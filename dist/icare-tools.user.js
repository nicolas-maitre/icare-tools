
// ==UserScript==
// @name        iCare Tools
// @namespace   Violentmonkey Scripts
// @noframes
// @match       https://icare-vali.lausanne.ch/icare/*
// @match       https://icare.lausanne.ch/icare/*
// @grant       none
// @version     1.1
// @author      Nicolas Maitre
// @description Task scheduler for icare and helpers
// ==/UserScript==

/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/.pnpm/localforage@1.10.0/node_modules/localforage/dist/localforage.js":
/*!********************************************************************************************!*\
  !*** ./node_modules/.pnpm/localforage@1.10.0/node_modules/localforage/dist/localforage.js ***!
  \********************************************************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/
(function(f){if(true){module.exports=f()}else { var g; }})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=undefined;if(!u&&a)return require(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw (f.code="MODULE_NOT_FOUND", f)}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=undefined;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
(function (global){
'use strict';
var Mutation = global.MutationObserver || global.WebKitMutationObserver;

var scheduleDrain;

{
  if (Mutation) {
    var called = 0;
    var observer = new Mutation(nextTick);
    var element = global.document.createTextNode('');
    observer.observe(element, {
      characterData: true
    });
    scheduleDrain = function () {
      element.data = (called = ++called % 2);
    };
  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {
    var channel = new global.MessageChannel();
    channel.port1.onmessage = nextTick;
    scheduleDrain = function () {
      channel.port2.postMessage(0);
    };
  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {
    scheduleDrain = function () {

      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted
      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.
      var scriptEl = global.document.createElement('script');
      scriptEl.onreadystatechange = function () {
        nextTick();

        scriptEl.onreadystatechange = null;
        scriptEl.parentNode.removeChild(scriptEl);
        scriptEl = null;
      };
      global.document.documentElement.appendChild(scriptEl);
    };
  } else {
    scheduleDrain = function () {
      setTimeout(nextTick, 0);
    };
  }
}

var draining;
var queue = [];
//named nextTick for less confusing stack traces
function nextTick() {
  draining = true;
  var i, oldQueue;
  var len = queue.length;
  while (len) {
    oldQueue = queue;
    queue = [];
    i = -1;
    while (++i < len) {
      oldQueue[i]();
    }
    len = queue.length;
  }
  draining = false;
}

module.exports = immediate;
function immediate(task) {
  if (queue.push(task) === 1 && !draining) {
    scheduleDrain();
  }
}

}).call(this,typeof __webpack_require__.g !== "undefined" ? __webpack_require__.g : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],2:[function(_dereq_,module,exports){
'use strict';
var immediate = _dereq_(1);

/* istanbul ignore next */
function INTERNAL() {}

var handlers = {};

var REJECTED = ['REJECTED'];
var FULFILLED = ['FULFILLED'];
var PENDING = ['PENDING'];

module.exports = Promise;

function Promise(resolver) {
  if (typeof resolver !== 'function') {
    throw new TypeError('resolver must be a function');
  }
  this.state = PENDING;
  this.queue = [];
  this.outcome = void 0;
  if (resolver !== INTERNAL) {
    safelyResolveThenable(this, resolver);
  }
}

Promise.prototype["catch"] = function (onRejected) {
  return this.then(null, onRejected);
};
Promise.prototype.then = function (onFulfilled, onRejected) {
  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||
    typeof onRejected !== 'function' && this.state === REJECTED) {
    return this;
  }
  var promise = new this.constructor(INTERNAL);
  if (this.state !== PENDING) {
    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;
    unwrap(promise, resolver, this.outcome);
  } else {
    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));
  }

  return promise;
};
function QueueItem(promise, onFulfilled, onRejected) {
  this.promise = promise;
  if (typeof onFulfilled === 'function') {
    this.onFulfilled = onFulfilled;
    this.callFulfilled = this.otherCallFulfilled;
  }
  if (typeof onRejected === 'function') {
    this.onRejected = onRejected;
    this.callRejected = this.otherCallRejected;
  }
}
QueueItem.prototype.callFulfilled = function (value) {
  handlers.resolve(this.promise, value);
};
QueueItem.prototype.otherCallFulfilled = function (value) {
  unwrap(this.promise, this.onFulfilled, value);
};
QueueItem.prototype.callRejected = function (value) {
  handlers.reject(this.promise, value);
};
QueueItem.prototype.otherCallRejected = function (value) {
  unwrap(this.promise, this.onRejected, value);
};

function unwrap(promise, func, value) {
  immediate(function () {
    var returnValue;
    try {
      returnValue = func(value);
    } catch (e) {
      return handlers.reject(promise, e);
    }
    if (returnValue === promise) {
      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));
    } else {
      handlers.resolve(promise, returnValue);
    }
  });
}

handlers.resolve = function (self, value) {
  var result = tryCatch(getThen, value);
  if (result.status === 'error') {
    return handlers.reject(self, result.value);
  }
  var thenable = result.value;

  if (thenable) {
    safelyResolveThenable(self, thenable);
  } else {
    self.state = FULFILLED;
    self.outcome = value;
    var i = -1;
    var len = self.queue.length;
    while (++i < len) {
      self.queue[i].callFulfilled(value);
    }
  }
  return self;
};
handlers.reject = function (self, error) {
  self.state = REJECTED;
  self.outcome = error;
  var i = -1;
  var len = self.queue.length;
  while (++i < len) {
    self.queue[i].callRejected(error);
  }
  return self;
};

function getThen(obj) {
  // Make sure we only access the accessor once as required by the spec
  var then = obj && obj.then;
  if (obj && (typeof obj === 'object' || typeof obj === 'function') && typeof then === 'function') {
    return function appyThen() {
      then.apply(obj, arguments);
    };
  }
}

function safelyResolveThenable(self, thenable) {
  // Either fulfill, reject or reject with error
  var called = false;
  function onError(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.reject(self, value);
  }

  function onSuccess(value) {
    if (called) {
      return;
    }
    called = true;
    handlers.resolve(self, value);
  }

  function tryToUnwrap() {
    thenable(onSuccess, onError);
  }

  var result = tryCatch(tryToUnwrap);
  if (result.status === 'error') {
    onError(result.value);
  }
}

function tryCatch(func, value) {
  var out = {};
  try {
    out.value = func(value);
    out.status = 'success';
  } catch (e) {
    out.status = 'error';
    out.value = e;
  }
  return out;
}

Promise.resolve = resolve;
function resolve(value) {
  if (value instanceof this) {
    return value;
  }
  return handlers.resolve(new this(INTERNAL), value);
}

Promise.reject = reject;
function reject(reason) {
  var promise = new this(INTERNAL);
  return handlers.reject(promise, reason);
}

Promise.all = all;
function all(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var values = new Array(len);
  var resolved = 0;
  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    allResolver(iterable[i], i);
  }
  return promise;
  function allResolver(value, i) {
    self.resolve(value).then(resolveFromAll, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
    function resolveFromAll(outValue) {
      values[i] = outValue;
      if (++resolved === len && !called) {
        called = true;
        handlers.resolve(promise, values);
      }
    }
  }
}

Promise.race = race;
function race(iterable) {
  var self = this;
  if (Object.prototype.toString.call(iterable) !== '[object Array]') {
    return this.reject(new TypeError('must be an array'));
  }

  var len = iterable.length;
  var called = false;
  if (!len) {
    return this.resolve([]);
  }

  var i = -1;
  var promise = new this(INTERNAL);

  while (++i < len) {
    resolver(iterable[i]);
  }
  return promise;
  function resolver(value) {
    self.resolve(value).then(function (response) {
      if (!called) {
        called = true;
        handlers.resolve(promise, response);
      }
    }, function (error) {
      if (!called) {
        called = true;
        handlers.reject(promise, error);
      }
    });
  }
}

},{"1":1}],3:[function(_dereq_,module,exports){
(function (global){
'use strict';
if (typeof global.Promise !== 'function') {
  global.Promise = _dereq_(2);
}

}).call(this,typeof __webpack_require__.g !== "undefined" ? __webpack_require__.g : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"2":2}],4:[function(_dereq_,module,exports){
'use strict';

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function getIDB() {
    /* global indexedDB,webkitIndexedDB,mozIndexedDB,OIndexedDB,msIndexedDB */
    try {
        if (typeof indexedDB !== 'undefined') {
            return indexedDB;
        }
        if (typeof webkitIndexedDB !== 'undefined') {
            return webkitIndexedDB;
        }
        if (typeof mozIndexedDB !== 'undefined') {
            return mozIndexedDB;
        }
        if (typeof OIndexedDB !== 'undefined') {
            return OIndexedDB;
        }
        if (typeof msIndexedDB !== 'undefined') {
            return msIndexedDB;
        }
    } catch (e) {
        return;
    }
}

var idb = getIDB();

function isIndexedDBValid() {
    try {
        // Initialize IndexedDB; fall back to vendor-prefixed versions
        // if needed.
        if (!idb || !idb.open) {
            return false;
        }
        // We mimic PouchDB here;
        //
        // We test for openDatabase because IE Mobile identifies itself
        // as Safari. Oh the lulz...
        var isSafari = typeof openDatabase !== 'undefined' && /(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent) && !/BlackBerry/.test(navigator.platform);

        var hasFetch = typeof fetch === 'function' && fetch.toString().indexOf('[native code') !== -1;

        // Safari <10.1 does not meet our requirements for IDB support
        // (see: https://github.com/pouchdb/pouchdb/issues/5572).
        // Safari 10.1 shipped with fetch, we can use that to detect it.
        // Note: this creates issues with `window.fetch` polyfills and
        // overrides; see:
        // https://github.com/localForage/localForage/issues/856
        return (!isSafari || hasFetch) && typeof indexedDB !== 'undefined' &&
        // some outdated implementations of IDB that appear on Samsung
        // and HTC Android devices <4.4 are missing IDBKeyRange
        // See: https://github.com/mozilla/localForage/issues/128
        // See: https://github.com/mozilla/localForage/issues/272
        typeof IDBKeyRange !== 'undefined';
    } catch (e) {
        return false;
    }
}

// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
// Abstracts constructing a Blob object, so it also works in older
// browsers that don't support the native Blob constructor. (i.e.
// old QtWebKit versions, at least).
function createBlob(parts, properties) {
    /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */
    parts = parts || [];
    properties = properties || {};
    try {
        return new Blob(parts, properties);
    } catch (e) {
        if (e.name !== 'TypeError') {
            throw e;
        }
        var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder : typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder : typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : WebKitBlobBuilder;
        var builder = new Builder();
        for (var i = 0; i < parts.length; i += 1) {
            builder.append(parts[i]);
        }
        return builder.getBlob(properties.type);
    }
}

// This is CommonJS because lie is an external dependency, so Rollup
// can just ignore it.
if (typeof Promise === 'undefined') {
    // In the "nopromises" build this will just throw if you don't have
    // a global promise object, but it would throw anyway later.
    _dereq_(3);
}
var Promise$1 = Promise;

function executeCallback(promise, callback) {
    if (callback) {
        promise.then(function (result) {
            callback(null, result);
        }, function (error) {
            callback(error);
        });
    }
}

function executeTwoCallbacks(promise, callback, errorCallback) {
    if (typeof callback === 'function') {
        promise.then(callback);
    }

    if (typeof errorCallback === 'function') {
        promise["catch"](errorCallback);
    }
}

function normalizeKey(key) {
    // Cast the key to a string, as that's all we can set as a key.
    if (typeof key !== 'string') {
        console.warn(key + ' used as a key, but it is not a string.');
        key = String(key);
    }

    return key;
}

function getCallback() {
    if (arguments.length && typeof arguments[arguments.length - 1] === 'function') {
        return arguments[arguments.length - 1];
    }
}

// Some code originally from async_storage.js in
// [Gaia](https://github.com/mozilla-b2g/gaia).

var DETECT_BLOB_SUPPORT_STORE = 'local-forage-detect-blob-support';
var supportsBlobs = void 0;
var dbContexts = {};
var toString = Object.prototype.toString;

// Transaction Modes
var READ_ONLY = 'readonly';
var READ_WRITE = 'readwrite';

// Transform a binary string to an array buffer, because otherwise
// weird stuff happens when you try to work with the binary string directly.
// It is known.
// From http://stackoverflow.com/questions/14967647/ (continues on next line)
// encode-decode-image-with-base64-breaks-image (2013-04-21)
function _binStringToArrayBuffer(bin) {
    var length = bin.length;
    var buf = new ArrayBuffer(length);
    var arr = new Uint8Array(buf);
    for (var i = 0; i < length; i++) {
        arr[i] = bin.charCodeAt(i);
    }
    return buf;
}

//
// Blobs are not supported in all versions of IndexedDB, notably
// Chrome <37 and Android <5. In those versions, storing a blob will throw.
//
// Various other blob bugs exist in Chrome v37-42 (inclusive).
// Detecting them is expensive and confusing to users, and Chrome 37-42
// is at very low usage worldwide, so we do a hacky userAgent check instead.
//
// content-type bug: https://code.google.com/p/chromium/issues/detail?id=408120
// 404 bug: https://code.google.com/p/chromium/issues/detail?id=447916
// FileReader bug: https://code.google.com/p/chromium/issues/detail?id=447836
//
// Code borrowed from PouchDB. See:
// https://github.com/pouchdb/pouchdb/blob/master/packages/node_modules/pouchdb-adapter-idb/src/blobSupport.js
//
function _checkBlobSupportWithoutCaching(idb) {
    return new Promise$1(function (resolve) {
        var txn = idb.transaction(DETECT_BLOB_SUPPORT_STORE, READ_WRITE);
        var blob = createBlob(['']);
        txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob, 'key');

        txn.onabort = function (e) {
            // If the transaction aborts now its due to not being able to
            // write to the database, likely due to the disk being full
            e.preventDefault();
            e.stopPropagation();
            resolve(false);
        };

        txn.oncomplete = function () {
            var matchedChrome = navigator.userAgent.match(/Chrome\/(\d+)/);
            var matchedEdge = navigator.userAgent.match(/Edge\//);
            // MS Edge pretends to be Chrome 42:
            // https://msdn.microsoft.com/en-us/library/hh869301%28v=vs.85%29.aspx
            resolve(matchedEdge || !matchedChrome || parseInt(matchedChrome[1], 10) >= 43);
        };
    })["catch"](function () {
        return false; // error, so assume unsupported
    });
}

function _checkBlobSupport(idb) {
    if (typeof supportsBlobs === 'boolean') {
        return Promise$1.resolve(supportsBlobs);
    }
    return _checkBlobSupportWithoutCaching(idb).then(function (value) {
        supportsBlobs = value;
        return supportsBlobs;
    });
}

function _deferReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Create a deferred object representing the current database operation.
    var deferredOperation = {};

    deferredOperation.promise = new Promise$1(function (resolve, reject) {
        deferredOperation.resolve = resolve;
        deferredOperation.reject = reject;
    });

    // Enqueue the deferred operation.
    dbContext.deferredOperations.push(deferredOperation);

    // Chain its promise to the database readiness.
    if (!dbContext.dbReady) {
        dbContext.dbReady = deferredOperation.promise;
    } else {
        dbContext.dbReady = dbContext.dbReady.then(function () {
            return deferredOperation.promise;
        });
    }
}

function _advanceReadiness(dbInfo) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Resolve its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.resolve();
        return deferredOperation.promise;
    }
}

function _rejectReadiness(dbInfo, err) {
    var dbContext = dbContexts[dbInfo.name];

    // Dequeue a deferred operation.
    var deferredOperation = dbContext.deferredOperations.pop();

    // Reject its promise (which is part of the database readiness
    // chain of promises).
    if (deferredOperation) {
        deferredOperation.reject(err);
        return deferredOperation.promise;
    }
}

function _getConnection(dbInfo, upgradeNeeded) {
    return new Promise$1(function (resolve, reject) {
        dbContexts[dbInfo.name] = dbContexts[dbInfo.name] || createDbContext();

        if (dbInfo.db) {
            if (upgradeNeeded) {
                _deferReadiness(dbInfo);
                dbInfo.db.close();
            } else {
                return resolve(dbInfo.db);
            }
        }

        var dbArgs = [dbInfo.name];

        if (upgradeNeeded) {
            dbArgs.push(dbInfo.version);
        }

        var openreq = idb.open.apply(idb, dbArgs);

        if (upgradeNeeded) {
            openreq.onupgradeneeded = function (e) {
                var db = openreq.result;
                try {
                    db.createObjectStore(dbInfo.storeName);
                    if (e.oldVersion <= 1) {
                        // Added when support for blob shims was added
                        db.createObjectStore(DETECT_BLOB_SUPPORT_STORE);
                    }
                } catch (ex) {
                    if (ex.name === 'ConstraintError') {
                        console.warn('The database "' + dbInfo.name + '"' + ' has been upgraded from version ' + e.oldVersion + ' to version ' + e.newVersion + ', but the storage "' + dbInfo.storeName + '" already exists.');
                    } else {
                        throw ex;
                    }
                }
            };
        }

        openreq.onerror = function (e) {
            e.preventDefault();
            reject(openreq.error);
        };

        openreq.onsuccess = function () {
            var db = openreq.result;
            db.onversionchange = function (e) {
                // Triggered when the database is modified (e.g. adding an objectStore) or
                // deleted (even when initiated by other sessions in different tabs).
                // Closing the connection here prevents those operations from being blocked.
                // If the database is accessed again later by this instance, the connection
                // will be reopened or the database recreated as needed.
                e.target.close();
            };
            resolve(db);
            _advanceReadiness(dbInfo);
        };
    });
}

function _getOriginalConnection(dbInfo) {
    return _getConnection(dbInfo, false);
}

function _getUpgradedConnection(dbInfo) {
    return _getConnection(dbInfo, true);
}

function _isUpgradeNeeded(dbInfo, defaultVersion) {
    if (!dbInfo.db) {
        return true;
    }

    var isNewStore = !dbInfo.db.objectStoreNames.contains(dbInfo.storeName);
    var isDowngrade = dbInfo.version < dbInfo.db.version;
    var isUpgrade = dbInfo.version > dbInfo.db.version;

    if (isDowngrade) {
        // If the version is not the default one
        // then warn for impossible downgrade.
        if (dbInfo.version !== defaultVersion) {
            console.warn('The database "' + dbInfo.name + '"' + " can't be downgraded from version " + dbInfo.db.version + ' to version ' + dbInfo.version + '.');
        }
        // Align the versions to prevent errors.
        dbInfo.version = dbInfo.db.version;
    }

    if (isUpgrade || isNewStore) {
        // If the store is new then increment the version (if needed).
        // This will trigger an "upgradeneeded" event which is required
        // for creating a store.
        if (isNewStore) {
            var incVersion = dbInfo.db.version + 1;
            if (incVersion > dbInfo.version) {
                dbInfo.version = incVersion;
            }
        }

        return true;
    }

    return false;
}

// encode a blob for indexeddb engines that don't support blobs
function _encodeBlob(blob) {
    return new Promise$1(function (resolve, reject) {
        var reader = new FileReader();
        reader.onerror = reject;
        reader.onloadend = function (e) {
            var base64 = btoa(e.target.result || '');
            resolve({
                __local_forage_encoded_blob: true,
                data: base64,
                type: blob.type
            });
        };
        reader.readAsBinaryString(blob);
    });
}

// decode an encoded blob
function _decodeBlob(encodedBlob) {
    var arrayBuff = _binStringToArrayBuffer(atob(encodedBlob.data));
    return createBlob([arrayBuff], { type: encodedBlob.type });
}

// is this one of our fancy encoded blobs?
function _isEncodedBlob(value) {
    return value && value.__local_forage_encoded_blob;
}

// Specialize the default `ready()` function by making it dependent
// on the current database operations. Thus, the driver will be actually
// ready when it's been initialized (default) *and* there are no pending
// operations on the database (initiated by some other instances).
function _fullyReady(callback) {
    var self = this;

    var promise = self._initReady().then(function () {
        var dbContext = dbContexts[self._dbInfo.name];

        if (dbContext && dbContext.dbReady) {
            return dbContext.dbReady;
        }
    });

    executeTwoCallbacks(promise, callback, callback);
    return promise;
}

// Try to establish a new db connection to replace the
// current one which is broken (i.e. experiencing
// InvalidStateError while creating a transaction).
function _tryReconnect(dbInfo) {
    _deferReadiness(dbInfo);

    var dbContext = dbContexts[dbInfo.name];
    var forages = dbContext.forages;

    for (var i = 0; i < forages.length; i++) {
        var forage = forages[i];
        if (forage._dbInfo.db) {
            forage._dbInfo.db.close();
            forage._dbInfo.db = null;
        }
    }
    dbInfo.db = null;

    return _getOriginalConnection(dbInfo).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        // store the latest db reference
        // in case the db was upgraded
        dbInfo.db = dbContext.db = db;
        for (var i = 0; i < forages.length; i++) {
            forages[i]._dbInfo.db = db;
        }
    })["catch"](function (err) {
        _rejectReadiness(dbInfo, err);
        throw err;
    });
}

// FF doesn't like Promises (micro-tasks) and IDDB store operations,
// so we have to do it with callbacks
function createTransaction(dbInfo, mode, callback, retries) {
    if (retries === undefined) {
        retries = 1;
    }

    try {
        var tx = dbInfo.db.transaction(dbInfo.storeName, mode);
        callback(null, tx);
    } catch (err) {
        if (retries > 0 && (!dbInfo.db || err.name === 'InvalidStateError' || err.name === 'NotFoundError')) {
            return Promise$1.resolve().then(function () {
                if (!dbInfo.db || err.name === 'NotFoundError' && !dbInfo.db.objectStoreNames.contains(dbInfo.storeName) && dbInfo.version <= dbInfo.db.version) {
                    // increase the db version, to create the new ObjectStore
                    if (dbInfo.db) {
                        dbInfo.version = dbInfo.db.version + 1;
                    }
                    // Reopen the database for upgrading.
                    return _getUpgradedConnection(dbInfo);
                }
            }).then(function () {
                return _tryReconnect(dbInfo).then(function () {
                    createTransaction(dbInfo, mode, callback, retries - 1);
                });
            })["catch"](callback);
        }

        callback(err);
    }
}

function createDbContext() {
    return {
        // Running localForages sharing a database.
        forages: [],
        // Shared database.
        db: null,
        // Database readiness (promise).
        dbReady: null,
        // Deferred operations on the database.
        deferredOperations: []
    };
}

// Open the IndexedDB database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    // Get the current context of the database;
    var dbContext = dbContexts[dbInfo.name];

    // ...or create a new context.
    if (!dbContext) {
        dbContext = createDbContext();
        // Register the new context in the global container.
        dbContexts[dbInfo.name] = dbContext;
    }

    // Register itself as a running localForage in the current context.
    dbContext.forages.push(self);

    // Replace the default `ready()` function with the specialized one.
    if (!self._initReady) {
        self._initReady = self.ready;
        self.ready = _fullyReady;
    }

    // Create an array of initialization states of the related localForages.
    var initPromises = [];

    function ignoreErrors() {
        // Don't handle errors here,
        // just makes sure related localForages aren't pending.
        return Promise$1.resolve();
    }

    for (var j = 0; j < dbContext.forages.length; j++) {
        var forage = dbContext.forages[j];
        if (forage !== self) {
            // Don't wait for itself...
            initPromises.push(forage._initReady()["catch"](ignoreErrors));
        }
    }

    // Take a snapshot of the related localForages.
    var forages = dbContext.forages.slice(0);

    // Initialize the connection process only when
    // all the related localForages aren't pending.
    return Promise$1.all(initPromises).then(function () {
        dbInfo.db = dbContext.db;
        // Get the connection or open a new one without upgrade.
        return _getOriginalConnection(dbInfo);
    }).then(function (db) {
        dbInfo.db = db;
        if (_isUpgradeNeeded(dbInfo, self._defaultConfig.version)) {
            // Reopen the database for upgrading.
            return _getUpgradedConnection(dbInfo);
        }
        return db;
    }).then(function (db) {
        dbInfo.db = dbContext.db = db;
        self._dbInfo = dbInfo;
        // Share the final connection amongst related localForages.
        for (var k = 0; k < forages.length; k++) {
            var forage = forages[k];
            if (forage !== self) {
                // Self is already up-to-date.
                forage._dbInfo.db = dbInfo.db;
                forage._dbInfo.version = dbInfo.version;
            }
        }
    });
}

function getItem(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.get(key);

                    req.onsuccess = function () {
                        var value = req.result;
                        if (value === undefined) {
                            value = null;
                        }
                        if (_isEncodedBlob(value)) {
                            value = _decodeBlob(value);
                        }
                        resolve(value);
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items stored in database.
function iterate(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.openCursor();
                    var iterationNumber = 1;

                    req.onsuccess = function () {
                        var cursor = req.result;

                        if (cursor) {
                            var value = cursor.value;
                            if (_isEncodedBlob(value)) {
                                value = _decodeBlob(value);
                            }
                            var result = iterator(value, cursor.key, iterationNumber++);

                            // when the iterator callback returns any
                            // (non-`undefined`) value, then we stop
                            // the iteration immediately
                            if (result !== void 0) {
                                resolve(result);
                            } else {
                                cursor["continue"]();
                            }
                        } else {
                            resolve();
                        }
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);

    return promise;
}

function setItem(key, value, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        var dbInfo;
        self.ready().then(function () {
            dbInfo = self._dbInfo;
            if (toString.call(value) === '[object Blob]') {
                return _checkBlobSupport(dbInfo.db).then(function (blobSupport) {
                    if (blobSupport) {
                        return value;
                    }
                    return _encodeBlob(value);
                });
            }
            return value;
        }).then(function (value) {
            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);

                    // The reason we don't _save_ null is because IE 10 does
                    // not support saving the `null` type in IndexedDB. How
                    // ironic, given the bug below!
                    // See: https://github.com/mozilla/localForage/issues/161
                    if (value === null) {
                        value = undefined;
                    }

                    var req = store.put(value, key);

                    transaction.oncomplete = function () {
                        // Cast to undefined so the value passed to
                        // callback/promise is the same as what one would get out
                        // of `getItem()` later. This leads to some weirdness
                        // (setItem('foo', undefined) will return `null`), but
                        // it's not my fault localStorage is our baseline and that
                        // it's weird.
                        if (value === undefined) {
                            value = null;
                        }

                        resolve(value);
                    };
                    transaction.onabort = transaction.onerror = function () {
                        var err = req.error ? req.error : req.transaction.error;
                        reject(err);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function removeItem(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    // We use a Grunt task to make this safe for IE and some
                    // versions of Android (including those used by Cordova).
                    // Normally IE won't like `.delete()` and will insist on
                    // using `['delete']()`, but we have a build step that
                    // fixes this for us now.
                    var req = store["delete"](key);
                    transaction.oncomplete = function () {
                        resolve();
                    };

                    transaction.onerror = function () {
                        reject(req.error);
                    };

                    // The request will be also be aborted if we've exceeded our storage
                    // space.
                    transaction.onabort = function () {
                        var err = req.error ? req.error : req.transaction.error;
                        reject(err);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function clear(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_WRITE, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.clear();

                    transaction.oncomplete = function () {
                        resolve();
                    };

                    transaction.onabort = transaction.onerror = function () {
                        var err = req.error ? req.error : req.transaction.error;
                        reject(err);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function length(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.count();

                    req.onsuccess = function () {
                        resolve(req.result);
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function key(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        if (n < 0) {
            resolve(null);

            return;
        }

        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var advanced = false;
                    var req = store.openKeyCursor();

                    req.onsuccess = function () {
                        var cursor = req.result;
                        if (!cursor) {
                            // this means there weren't enough keys
                            resolve(null);

                            return;
                        }

                        if (n === 0) {
                            // We have the first key, return it if that's what they
                            // wanted.
                            resolve(cursor.key);
                        } else {
                            if (!advanced) {
                                // Otherwise, ask the cursor to skip ahead n
                                // records.
                                advanced = true;
                                cursor.advance(n);
                            } else {
                                // When we get here, we've got the nth key.
                                resolve(cursor.key);
                            }
                        }
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            createTransaction(self._dbInfo, READ_ONLY, function (err, transaction) {
                if (err) {
                    return reject(err);
                }

                try {
                    var store = transaction.objectStore(self._dbInfo.storeName);
                    var req = store.openKeyCursor();
                    var keys = [];

                    req.onsuccess = function () {
                        var cursor = req.result;

                        if (!cursor) {
                            resolve(keys);
                            return;
                        }

                        keys.push(cursor.key);
                        cursor["continue"]();
                    };

                    req.onerror = function () {
                        reject(req.error);
                    };
                } catch (e) {
                    reject(e);
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function dropInstance(options, callback) {
    callback = getCallback.apply(this, arguments);

    var currentConfig = this.config();
    options = typeof options !== 'function' && options || {};
    if (!options.name) {
        options.name = options.name || currentConfig.name;
        options.storeName = options.storeName || currentConfig.storeName;
    }

    var self = this;
    var promise;
    if (!options.name) {
        promise = Promise$1.reject('Invalid arguments');
    } else {
        var isCurrentDb = options.name === currentConfig.name && self._dbInfo.db;

        var dbPromise = isCurrentDb ? Promise$1.resolve(self._dbInfo.db) : _getOriginalConnection(options).then(function (db) {
            var dbContext = dbContexts[options.name];
            var forages = dbContext.forages;
            dbContext.db = db;
            for (var i = 0; i < forages.length; i++) {
                forages[i]._dbInfo.db = db;
            }
            return db;
        });

        if (!options.storeName) {
            promise = dbPromise.then(function (db) {
                _deferReadiness(options);

                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;

                db.close();
                for (var i = 0; i < forages.length; i++) {
                    var forage = forages[i];
                    forage._dbInfo.db = null;
                }

                var dropDBPromise = new Promise$1(function (resolve, reject) {
                    var req = idb.deleteDatabase(options.name);

                    req.onerror = function () {
                        var db = req.result;
                        if (db) {
                            db.close();
                        }
                        reject(req.error);
                    };

                    req.onblocked = function () {
                        // Closing all open connections in onversionchange handler should prevent this situation, but if
                        // we do get here, it just means the request remains pending - eventually it will succeed or error
                        console.warn('dropInstance blocked for database "' + options.name + '" until all open connections are closed');
                    };

                    req.onsuccess = function () {
                        var db = req.result;
                        if (db) {
                            db.close();
                        }
                        resolve(db);
                    };
                });

                return dropDBPromise.then(function (db) {
                    dbContext.db = db;
                    for (var i = 0; i < forages.length; i++) {
                        var _forage = forages[i];
                        _advanceReadiness(_forage._dbInfo);
                    }
                })["catch"](function (err) {
                    (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function () {});
                    throw err;
                });
            });
        } else {
            promise = dbPromise.then(function (db) {
                if (!db.objectStoreNames.contains(options.storeName)) {
                    return;
                }

                var newVersion = db.version + 1;

                _deferReadiness(options);

                var dbContext = dbContexts[options.name];
                var forages = dbContext.forages;

                db.close();
                for (var i = 0; i < forages.length; i++) {
                    var forage = forages[i];
                    forage._dbInfo.db = null;
                    forage._dbInfo.version = newVersion;
                }

                var dropObjectPromise = new Promise$1(function (resolve, reject) {
                    var req = idb.open(options.name, newVersion);

                    req.onerror = function (err) {
                        var db = req.result;
                        db.close();
                        reject(err);
                    };

                    req.onupgradeneeded = function () {
                        var db = req.result;
                        db.deleteObjectStore(options.storeName);
                    };

                    req.onsuccess = function () {
                        var db = req.result;
                        db.close();
                        resolve(db);
                    };
                });

                return dropObjectPromise.then(function (db) {
                    dbContext.db = db;
                    for (var j = 0; j < forages.length; j++) {
                        var _forage2 = forages[j];
                        _forage2._dbInfo.db = db;
                        _advanceReadiness(_forage2._dbInfo);
                    }
                })["catch"](function (err) {
                    (_rejectReadiness(options, err) || Promise$1.resolve())["catch"](function () {});
                    throw err;
                });
            });
        }
    }

    executeCallback(promise, callback);
    return promise;
}

var asyncStorage = {
    _driver: 'asyncStorage',
    _initStorage: _initStorage,
    _support: isIndexedDBValid(),
    iterate: iterate,
    getItem: getItem,
    setItem: setItem,
    removeItem: removeItem,
    clear: clear,
    length: length,
    key: key,
    keys: keys,
    dropInstance: dropInstance
};

function isWebSQLValid() {
    return typeof openDatabase === 'function';
}

// Sadly, the best way to save binary data in WebSQL/localStorage is serializing
// it to Base64, so this is how we store it to prevent very strange errors with less
// verbose ways of binary <-> string data storage.
var BASE_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';

var BLOB_TYPE_PREFIX = '~~local_forage_type~';
var BLOB_TYPE_PREFIX_REGEX = /^~~local_forage_type~([^~]+)~/;

var SERIALIZED_MARKER = '__lfsc__:';
var SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER.length;

// OMG the serializations!
var TYPE_ARRAYBUFFER = 'arbf';
var TYPE_BLOB = 'blob';
var TYPE_INT8ARRAY = 'si08';
var TYPE_UINT8ARRAY = 'ui08';
var TYPE_UINT8CLAMPEDARRAY = 'uic8';
var TYPE_INT16ARRAY = 'si16';
var TYPE_INT32ARRAY = 'si32';
var TYPE_UINT16ARRAY = 'ur16';
var TYPE_UINT32ARRAY = 'ui32';
var TYPE_FLOAT32ARRAY = 'fl32';
var TYPE_FLOAT64ARRAY = 'fl64';
var TYPE_SERIALIZED_MARKER_LENGTH = SERIALIZED_MARKER_LENGTH + TYPE_ARRAYBUFFER.length;

var toString$1 = Object.prototype.toString;

function stringToBuffer(serializedString) {
    // Fill the string into a ArrayBuffer.
    var bufferLength = serializedString.length * 0.75;
    var len = serializedString.length;
    var i;
    var p = 0;
    var encoded1, encoded2, encoded3, encoded4;

    if (serializedString[serializedString.length - 1] === '=') {
        bufferLength--;
        if (serializedString[serializedString.length - 2] === '=') {
            bufferLength--;
        }
    }

    var buffer = new ArrayBuffer(bufferLength);
    var bytes = new Uint8Array(buffer);

    for (i = 0; i < len; i += 4) {
        encoded1 = BASE_CHARS.indexOf(serializedString[i]);
        encoded2 = BASE_CHARS.indexOf(serializedString[i + 1]);
        encoded3 = BASE_CHARS.indexOf(serializedString[i + 2]);
        encoded4 = BASE_CHARS.indexOf(serializedString[i + 3]);

        /*jslint bitwise: true */
        bytes[p++] = encoded1 << 2 | encoded2 >> 4;
        bytes[p++] = (encoded2 & 15) << 4 | encoded3 >> 2;
        bytes[p++] = (encoded3 & 3) << 6 | encoded4 & 63;
    }
    return buffer;
}

// Converts a buffer to a string to store, serialized, in the backend
// storage library.
function bufferToString(buffer) {
    // base64-arraybuffer
    var bytes = new Uint8Array(buffer);
    var base64String = '';
    var i;

    for (i = 0; i < bytes.length; i += 3) {
        /*jslint bitwise: true */
        base64String += BASE_CHARS[bytes[i] >> 2];
        base64String += BASE_CHARS[(bytes[i] & 3) << 4 | bytes[i + 1] >> 4];
        base64String += BASE_CHARS[(bytes[i + 1] & 15) << 2 | bytes[i + 2] >> 6];
        base64String += BASE_CHARS[bytes[i + 2] & 63];
    }

    if (bytes.length % 3 === 2) {
        base64String = base64String.substring(0, base64String.length - 1) + '=';
    } else if (bytes.length % 3 === 1) {
        base64String = base64String.substring(0, base64String.length - 2) + '==';
    }

    return base64String;
}

// Serialize a value, afterwards executing a callback (which usually
// instructs the `setItem()` callback/promise to be executed). This is how
// we store binary data with localStorage.
function serialize(value, callback) {
    var valueType = '';
    if (value) {
        valueType = toString$1.call(value);
    }

    // Cannot use `value instanceof ArrayBuffer` or such here, as these
    // checks fail when running the tests using casper.js...
    //
    // TODO: See why those tests fail and use a better solution.
    if (value && (valueType === '[object ArrayBuffer]' || value.buffer && toString$1.call(value.buffer) === '[object ArrayBuffer]')) {
        // Convert binary arrays to a string and prefix the string with
        // a special marker.
        var buffer;
        var marker = SERIALIZED_MARKER;

        if (value instanceof ArrayBuffer) {
            buffer = value;
            marker += TYPE_ARRAYBUFFER;
        } else {
            buffer = value.buffer;

            if (valueType === '[object Int8Array]') {
                marker += TYPE_INT8ARRAY;
            } else if (valueType === '[object Uint8Array]') {
                marker += TYPE_UINT8ARRAY;
            } else if (valueType === '[object Uint8ClampedArray]') {
                marker += TYPE_UINT8CLAMPEDARRAY;
            } else if (valueType === '[object Int16Array]') {
                marker += TYPE_INT16ARRAY;
            } else if (valueType === '[object Uint16Array]') {
                marker += TYPE_UINT16ARRAY;
            } else if (valueType === '[object Int32Array]') {
                marker += TYPE_INT32ARRAY;
            } else if (valueType === '[object Uint32Array]') {
                marker += TYPE_UINT32ARRAY;
            } else if (valueType === '[object Float32Array]') {
                marker += TYPE_FLOAT32ARRAY;
            } else if (valueType === '[object Float64Array]') {
                marker += TYPE_FLOAT64ARRAY;
            } else {
                callback(new Error('Failed to get type for BinaryArray'));
            }
        }

        callback(marker + bufferToString(buffer));
    } else if (valueType === '[object Blob]') {
        // Conver the blob to a binaryArray and then to a string.
        var fileReader = new FileReader();

        fileReader.onload = function () {
            // Backwards-compatible prefix for the blob type.
            var str = BLOB_TYPE_PREFIX + value.type + '~' + bufferToString(this.result);

            callback(SERIALIZED_MARKER + TYPE_BLOB + str);
        };

        fileReader.readAsArrayBuffer(value);
    } else {
        try {
            callback(JSON.stringify(value));
        } catch (e) {
            console.error("Couldn't convert value into a JSON string: ", value);

            callback(null, e);
        }
    }
}

// Deserialize data we've inserted into a value column/field. We place
// special markers into our strings to mark them as encoded; this isn't
// as nice as a meta field, but it's the only sane thing we can do whilst
// keeping localStorage support intact.
//
// Oftentimes this will just deserialize JSON content, but if we have a
// special marker (SERIALIZED_MARKER, defined above), we will extract
// some kind of arraybuffer/binary data/typed array out of the string.
function deserialize(value) {
    // If we haven't marked this string as being specially serialized (i.e.
    // something other than serialized JSON), we can just return it and be
    // done with it.
    if (value.substring(0, SERIALIZED_MARKER_LENGTH) !== SERIALIZED_MARKER) {
        return JSON.parse(value);
    }

    // The following code deals with deserializing some kind of Blob or
    // TypedArray. First we separate out the type of data we're dealing
    // with from the data itself.
    var serializedString = value.substring(TYPE_SERIALIZED_MARKER_LENGTH);
    var type = value.substring(SERIALIZED_MARKER_LENGTH, TYPE_SERIALIZED_MARKER_LENGTH);

    var blobType;
    // Backwards-compatible blob type serialization strategy.
    // DBs created with older versions of localForage will simply not have the blob type.
    if (type === TYPE_BLOB && BLOB_TYPE_PREFIX_REGEX.test(serializedString)) {
        var matcher = serializedString.match(BLOB_TYPE_PREFIX_REGEX);
        blobType = matcher[1];
        serializedString = serializedString.substring(matcher[0].length);
    }
    var buffer = stringToBuffer(serializedString);

    // Return the right type based on the code/type set during
    // serialization.
    switch (type) {
        case TYPE_ARRAYBUFFER:
            return buffer;
        case TYPE_BLOB:
            return createBlob([buffer], { type: blobType });
        case TYPE_INT8ARRAY:
            return new Int8Array(buffer);
        case TYPE_UINT8ARRAY:
            return new Uint8Array(buffer);
        case TYPE_UINT8CLAMPEDARRAY:
            return new Uint8ClampedArray(buffer);
        case TYPE_INT16ARRAY:
            return new Int16Array(buffer);
        case TYPE_UINT16ARRAY:
            return new Uint16Array(buffer);
        case TYPE_INT32ARRAY:
            return new Int32Array(buffer);
        case TYPE_UINT32ARRAY:
            return new Uint32Array(buffer);
        case TYPE_FLOAT32ARRAY:
            return new Float32Array(buffer);
        case TYPE_FLOAT64ARRAY:
            return new Float64Array(buffer);
        default:
            throw new Error('Unkown type: ' + type);
    }
}

var localforageSerializer = {
    serialize: serialize,
    deserialize: deserialize,
    stringToBuffer: stringToBuffer,
    bufferToString: bufferToString
};

/*
 * Includes code from:
 *
 * base64-arraybuffer
 * https://github.com/niklasvh/base64-arraybuffer
 *
 * Copyright (c) 2012 Niklas von Hertzen
 * Licensed under the MIT license.
 */

function createDbTable(t, dbInfo, callback, errorCallback) {
    t.executeSql('CREATE TABLE IF NOT EXISTS ' + dbInfo.storeName + ' ' + '(id INTEGER PRIMARY KEY, key unique, value)', [], callback, errorCallback);
}

// Open the WebSQL database (automatically creates one if one didn't
// previously exist), using any options set in the config.
function _initStorage$1(options) {
    var self = this;
    var dbInfo = {
        db: null
    };

    if (options) {
        for (var i in options) {
            dbInfo[i] = typeof options[i] !== 'string' ? options[i].toString() : options[i];
        }
    }

    var dbInfoPromise = new Promise$1(function (resolve, reject) {
        // Open the database; the openDatabase API will automatically
        // create it for us if it doesn't exist.
        try {
            dbInfo.db = openDatabase(dbInfo.name, String(dbInfo.version), dbInfo.description, dbInfo.size);
        } catch (e) {
            return reject(e);
        }

        // Create our key/value table if it doesn't exist.
        dbInfo.db.transaction(function (t) {
            createDbTable(t, dbInfo, function () {
                self._dbInfo = dbInfo;
                resolve();
            }, function (t, error) {
                reject(error);
            });
        }, reject);
    });

    dbInfo.serializer = localforageSerializer;
    return dbInfoPromise;
}

function tryExecuteSql(t, dbInfo, sqlStatement, args, callback, errorCallback) {
    t.executeSql(sqlStatement, args, callback, function (t, error) {
        if (error.code === error.SYNTAX_ERR) {
            t.executeSql('SELECT name FROM sqlite_master ' + "WHERE type='table' AND name = ?", [dbInfo.storeName], function (t, results) {
                if (!results.rows.length) {
                    // if the table is missing (was deleted)
                    // re-create it table and retry
                    createDbTable(t, dbInfo, function () {
                        t.executeSql(sqlStatement, args, callback, errorCallback);
                    }, errorCallback);
                } else {
                    errorCallback(t, error);
                }
            }, errorCallback);
        } else {
            errorCallback(t, error);
        }
    }, errorCallback);
}

function getItem$1(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName + ' WHERE key = ? LIMIT 1', [key], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).value : null;

                    // Check to see if this is serialized content we need to
                    // unpack.
                    if (result) {
                        result = dbInfo.serializer.deserialize(result);
                    }

                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function iterate$1(iterator, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;

            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT * FROM ' + dbInfo.storeName, [], function (t, results) {
                    var rows = results.rows;
                    var length = rows.length;

                    for (var i = 0; i < length; i++) {
                        var item = rows.item(i);
                        var result = item.value;

                        // Check to see if this is serialized content
                        // we need to unpack.
                        if (result) {
                            result = dbInfo.serializer.deserialize(result);
                        }

                        result = iterator(result, item.key, i + 1);

                        // void(0) prevents problems with redefinition
                        // of `undefined`.
                        if (result !== void 0) {
                            resolve(result);
                            return;
                        }
                    }

                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function _setItem(key, value, callback, retriesLeft) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            // The localStorage API doesn't return undefined values in an
            // "expected" way, so undefined is always cast to null in all
            // drivers. See: https://github.com/mozilla/localForage/pull/42
            if (value === undefined) {
                value = null;
            }

            // Save the original value to pass to the callback.
            var originalValue = value;

            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    dbInfo.db.transaction(function (t) {
                        tryExecuteSql(t, dbInfo, 'INSERT OR REPLACE INTO ' + dbInfo.storeName + ' ' + '(key, value) VALUES (?, ?)', [key, value], function () {
                            resolve(originalValue);
                        }, function (t, error) {
                            reject(error);
                        });
                    }, function (sqlError) {
                        // The transaction failed; check
                        // to see if it's a quota error.
                        if (sqlError.code === sqlError.QUOTA_ERR) {
                            // We reject the callback outright for now, but
                            // it's worth trying to re-run the transaction.
                            // Even if the user accepts the prompt to use
                            // more storage on Safari, this error will
                            // be called.
                            //
                            // Try to re-run the transaction.
                            if (retriesLeft > 0) {
                                resolve(_setItem.apply(self, [key, originalValue, callback, retriesLeft - 1]));
                                return;
                            }
                            reject(sqlError);
                        }
                    });
                }
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function setItem$1(key, value, callback) {
    return _setItem.apply(this, [key, value, callback, 1]);
}

function removeItem$1(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName + ' WHERE key = ?', [key], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Deletes every item in the table.
// TODO: Find out if this resets the AUTO_INCREMENT number.
function clear$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'DELETE FROM ' + dbInfo.storeName, [], function () {
                    resolve();
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Does a simple `COUNT(key)` to get the number of items stored in
// localForage.
function length$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                // Ahhh, SQL makes this one soooooo easy.
                tryExecuteSql(t, dbInfo, 'SELECT COUNT(key) as c FROM ' + dbInfo.storeName, [], function (t, results) {
                    var result = results.rows.item(0).c;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// Return the key located at key index X; essentially gets the key from a
// `WHERE id = ?`. This is the most efficient way I can think to implement
// this rarely-used (in my experience) part of the API, but it can seem
// inconsistent, because we do `INSERT OR REPLACE INTO` on `setItem()`, so
// the ID of each key will change every time it's updated. Perhaps a stored
// procedure for the `setItem()` SQL would solve this problem?
// TODO: Don't change ID on `setItem()`.
function key$1(n, callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName + ' WHERE id = ? LIMIT 1', [n + 1], function (t, results) {
                    var result = results.rows.length ? results.rows.item(0).key : null;
                    resolve(result);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$1(callback) {
    var self = this;

    var promise = new Promise$1(function (resolve, reject) {
        self.ready().then(function () {
            var dbInfo = self._dbInfo;
            dbInfo.db.transaction(function (t) {
                tryExecuteSql(t, dbInfo, 'SELECT key FROM ' + dbInfo.storeName, [], function (t, results) {
                    var keys = [];

                    for (var i = 0; i < results.rows.length; i++) {
                        keys.push(results.rows.item(i).key);
                    }

                    resolve(keys);
                }, function (t, error) {
                    reject(error);
                });
            });
        })["catch"](reject);
    });

    executeCallback(promise, callback);
    return promise;
}

// https://www.w3.org/TR/webdatabase/#databases
// > There is no way to enumerate or delete the databases available for an origin from this API.
function getAllStoreNames(db) {
    return new Promise$1(function (resolve, reject) {
        db.transaction(function (t) {
            t.executeSql('SELECT name FROM sqlite_master ' + "WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'", [], function (t, results) {
                var storeNames = [];

                for (var i = 0; i < results.rows.length; i++) {
                    storeNames.push(results.rows.item(i).name);
                }

                resolve({
                    db: db,
                    storeNames: storeNames
                });
            }, function (t, error) {
                reject(error);
            });
        }, function (sqlError) {
            reject(sqlError);
        });
    });
}

function dropInstance$1(options, callback) {
    callback = getCallback.apply(this, arguments);

    var currentConfig = this.config();
    options = typeof options !== 'function' && options || {};
    if (!options.name) {
        options.name = options.name || currentConfig.name;
        options.storeName = options.storeName || currentConfig.storeName;
    }

    var self = this;
    var promise;
    if (!options.name) {
        promise = Promise$1.reject('Invalid arguments');
    } else {
        promise = new Promise$1(function (resolve) {
            var db;
            if (options.name === currentConfig.name) {
                // use the db reference of the current instance
                db = self._dbInfo.db;
            } else {
                db = openDatabase(options.name, '', '', 0);
            }

            if (!options.storeName) {
                // drop all database tables
                resolve(getAllStoreNames(db));
            } else {
                resolve({
                    db: db,
                    storeNames: [options.storeName]
                });
            }
        }).then(function (operationInfo) {
            return new Promise$1(function (resolve, reject) {
                operationInfo.db.transaction(function (t) {
                    function dropTable(storeName) {
                        return new Promise$1(function (resolve, reject) {
                            t.executeSql('DROP TABLE IF EXISTS ' + storeName, [], function () {
                                resolve();
                            }, function (t, error) {
                                reject(error);
                            });
                        });
                    }

                    var operations = [];
                    for (var i = 0, len = operationInfo.storeNames.length; i < len; i++) {
                        operations.push(dropTable(operationInfo.storeNames[i]));
                    }

                    Promise$1.all(operations).then(function () {
                        resolve();
                    })["catch"](function (e) {
                        reject(e);
                    });
                }, function (sqlError) {
                    reject(sqlError);
                });
            });
        });
    }

    executeCallback(promise, callback);
    return promise;
}

var webSQLStorage = {
    _driver: 'webSQLStorage',
    _initStorage: _initStorage$1,
    _support: isWebSQLValid(),
    iterate: iterate$1,
    getItem: getItem$1,
    setItem: setItem$1,
    removeItem: removeItem$1,
    clear: clear$1,
    length: length$1,
    key: key$1,
    keys: keys$1,
    dropInstance: dropInstance$1
};

function isLocalStorageValid() {
    try {
        return typeof localStorage !== 'undefined' && 'setItem' in localStorage &&
        // in IE8 typeof localStorage.setItem === 'object'
        !!localStorage.setItem;
    } catch (e) {
        return false;
    }
}

function _getKeyPrefix(options, defaultConfig) {
    var keyPrefix = options.name + '/';

    if (options.storeName !== defaultConfig.storeName) {
        keyPrefix += options.storeName + '/';
    }
    return keyPrefix;
}

// Check if localStorage throws when saving an item
function checkIfLocalStorageThrows() {
    var localStorageTestKey = '_localforage_support_test';

    try {
        localStorage.setItem(localStorageTestKey, true);
        localStorage.removeItem(localStorageTestKey);

        return false;
    } catch (e) {
        return true;
    }
}

// Check if localStorage is usable and allows to save an item
// This method checks if localStorage is usable in Safari Private Browsing
// mode, or in any other case where the available quota for localStorage
// is 0 and there wasn't any saved items yet.
function _isLocalStorageUsable() {
    return !checkIfLocalStorageThrows() || localStorage.length > 0;
}

// Config the localStorage backend, using options set in the config.
function _initStorage$2(options) {
    var self = this;
    var dbInfo = {};
    if (options) {
        for (var i in options) {
            dbInfo[i] = options[i];
        }
    }

    dbInfo.keyPrefix = _getKeyPrefix(options, self._defaultConfig);

    if (!_isLocalStorageUsable()) {
        return Promise$1.reject();
    }

    self._dbInfo = dbInfo;
    dbInfo.serializer = localforageSerializer;

    return Promise$1.resolve();
}

// Remove all keys from the datastore, effectively destroying all data in
// the app's key/value store!
function clear$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var keyPrefix = self._dbInfo.keyPrefix;

        for (var i = localStorage.length - 1; i >= 0; i--) {
            var key = localStorage.key(i);

            if (key.indexOf(keyPrefix) === 0) {
                localStorage.removeItem(key);
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Retrieve an item from the store. Unlike the original async_storage
// library in Gaia, we don't modify return values at all. If a key's value
// is `undefined`, we pass that value to the callback function.
function getItem$2(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result = localStorage.getItem(dbInfo.keyPrefix + key);

        // If a result was found, parse it from the serialized
        // string into a JS object. If result isn't truthy, the key
        // is likely undefined and we'll pass it straight to the
        // callback.
        if (result) {
            result = dbInfo.serializer.deserialize(result);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

// Iterate over all items in the store.
function iterate$2(iterator, callback) {
    var self = this;

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var keyPrefix = dbInfo.keyPrefix;
        var keyPrefixLength = keyPrefix.length;
        var length = localStorage.length;

        // We use a dedicated iterator instead of the `i` variable below
        // so other keys we fetch in localStorage aren't counted in
        // the `iterationNumber` argument passed to the `iterate()`
        // callback.
        //
        // See: github.com/mozilla/localForage/pull/435#discussion_r38061530
        var iterationNumber = 1;

        for (var i = 0; i < length; i++) {
            var key = localStorage.key(i);
            if (key.indexOf(keyPrefix) !== 0) {
                continue;
            }
            var value = localStorage.getItem(key);

            // If a result was found, parse it from the serialized
            // string into a JS object. If result isn't truthy, the
            // key is likely undefined and we'll pass it straight
            // to the iterator.
            if (value) {
                value = dbInfo.serializer.deserialize(value);
            }

            value = iterator(value, key.substring(keyPrefixLength), iterationNumber++);

            if (value !== void 0) {
                return value;
            }
        }
    });

    executeCallback(promise, callback);
    return promise;
}

// Same as localStorage's key() method, except takes a callback.
function key$2(n, callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var result;
        try {
            result = localStorage.key(n);
        } catch (error) {
            result = null;
        }

        // Remove the prefix from the key, if a key is found.
        if (result) {
            result = result.substring(dbInfo.keyPrefix.length);
        }

        return result;
    });

    executeCallback(promise, callback);
    return promise;
}

function keys$2(callback) {
    var self = this;
    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        var length = localStorage.length;
        var keys = [];

        for (var i = 0; i < length; i++) {
            var itemKey = localStorage.key(i);
            if (itemKey.indexOf(dbInfo.keyPrefix) === 0) {
                keys.push(itemKey.substring(dbInfo.keyPrefix.length));
            }
        }

        return keys;
    });

    executeCallback(promise, callback);
    return promise;
}

// Supply the number of keys in the datastore to the callback function.
function length$2(callback) {
    var self = this;
    var promise = self.keys().then(function (keys) {
        return keys.length;
    });

    executeCallback(promise, callback);
    return promise;
}

// Remove an item from the store, nice and simple.
function removeItem$2(key, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = self.ready().then(function () {
        var dbInfo = self._dbInfo;
        localStorage.removeItem(dbInfo.keyPrefix + key);
    });

    executeCallback(promise, callback);
    return promise;
}

// Set a key's value and run an optional callback once the value is set.
// Unlike Gaia's implementation, the callback function is passed the value,
// in case you want to operate on that value only after you're sure it
// saved, or something like that.
function setItem$2(key, value, callback) {
    var self = this;

    key = normalizeKey(key);

    var promise = self.ready().then(function () {
        // Convert undefined values to null.
        // https://github.com/mozilla/localForage/pull/42
        if (value === undefined) {
            value = null;
        }

        // Save the original value to pass to the callback.
        var originalValue = value;

        return new Promise$1(function (resolve, reject) {
            var dbInfo = self._dbInfo;
            dbInfo.serializer.serialize(value, function (value, error) {
                if (error) {
                    reject(error);
                } else {
                    try {
                        localStorage.setItem(dbInfo.keyPrefix + key, value);
                        resolve(originalValue);
                    } catch (e) {
                        // localStorage capacity exceeded.
                        // TODO: Make this a specific error/event.
                        if (e.name === 'QuotaExceededError' || e.name === 'NS_ERROR_DOM_QUOTA_REACHED') {
                            reject(e);
                        }
                        reject(e);
                    }
                }
            });
        });
    });

    executeCallback(promise, callback);
    return promise;
}

function dropInstance$2(options, callback) {
    callback = getCallback.apply(this, arguments);

    options = typeof options !== 'function' && options || {};
    if (!options.name) {
        var currentConfig = this.config();
        options.name = options.name || currentConfig.name;
        options.storeName = options.storeName || currentConfig.storeName;
    }

    var self = this;
    var promise;
    if (!options.name) {
        promise = Promise$1.reject('Invalid arguments');
    } else {
        promise = new Promise$1(function (resolve) {
            if (!options.storeName) {
                resolve(options.name + '/');
            } else {
                resolve(_getKeyPrefix(options, self._defaultConfig));
            }
        }).then(function (keyPrefix) {
            for (var i = localStorage.length - 1; i >= 0; i--) {
                var key = localStorage.key(i);

                if (key.indexOf(keyPrefix) === 0) {
                    localStorage.removeItem(key);
                }
            }
        });
    }

    executeCallback(promise, callback);
    return promise;
}

var localStorageWrapper = {
    _driver: 'localStorageWrapper',
    _initStorage: _initStorage$2,
    _support: isLocalStorageValid(),
    iterate: iterate$2,
    getItem: getItem$2,
    setItem: setItem$2,
    removeItem: removeItem$2,
    clear: clear$2,
    length: length$2,
    key: key$2,
    keys: keys$2,
    dropInstance: dropInstance$2
};

var sameValue = function sameValue(x, y) {
    return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);
};

var includes = function includes(array, searchElement) {
    var len = array.length;
    var i = 0;
    while (i < len) {
        if (sameValue(array[i], searchElement)) {
            return true;
        }
        i++;
    }

    return false;
};

var isArray = Array.isArray || function (arg) {
    return Object.prototype.toString.call(arg) === '[object Array]';
};

// Drivers are stored here when `defineDriver()` is called.
// They are shared across all instances of localForage.
var DefinedDrivers = {};

var DriverSupport = {};

var DefaultDrivers = {
    INDEXEDDB: asyncStorage,
    WEBSQL: webSQLStorage,
    LOCALSTORAGE: localStorageWrapper
};

var DefaultDriverOrder = [DefaultDrivers.INDEXEDDB._driver, DefaultDrivers.WEBSQL._driver, DefaultDrivers.LOCALSTORAGE._driver];

var OptionalDriverMethods = ['dropInstance'];

var LibraryMethods = ['clear', 'getItem', 'iterate', 'key', 'keys', 'length', 'removeItem', 'setItem'].concat(OptionalDriverMethods);

var DefaultConfig = {
    description: '',
    driver: DefaultDriverOrder.slice(),
    name: 'localforage',
    // Default DB size is _JUST UNDER_ 5MB, as it's the highest size
    // we can use without a prompt.
    size: 4980736,
    storeName: 'keyvaluepairs',
    version: 1.0
};

function callWhenReady(localForageInstance, libraryMethod) {
    localForageInstance[libraryMethod] = function () {
        var _args = arguments;
        return localForageInstance.ready().then(function () {
            return localForageInstance[libraryMethod].apply(localForageInstance, _args);
        });
    };
}

function extend() {
    for (var i = 1; i < arguments.length; i++) {
        var arg = arguments[i];

        if (arg) {
            for (var _key in arg) {
                if (arg.hasOwnProperty(_key)) {
                    if (isArray(arg[_key])) {
                        arguments[0][_key] = arg[_key].slice();
                    } else {
                        arguments[0][_key] = arg[_key];
                    }
                }
            }
        }
    }

    return arguments[0];
}

var LocalForage = function () {
    function LocalForage(options) {
        _classCallCheck(this, LocalForage);

        for (var driverTypeKey in DefaultDrivers) {
            if (DefaultDrivers.hasOwnProperty(driverTypeKey)) {
                var driver = DefaultDrivers[driverTypeKey];
                var driverName = driver._driver;
                this[driverTypeKey] = driverName;

                if (!DefinedDrivers[driverName]) {
                    // we don't need to wait for the promise,
                    // since the default drivers can be defined
                    // in a blocking manner
                    this.defineDriver(driver);
                }
            }
        }

        this._defaultConfig = extend({}, DefaultConfig);
        this._config = extend({}, this._defaultConfig, options);
        this._driverSet = null;
        this._initDriver = null;
        this._ready = false;
        this._dbInfo = null;

        this._wrapLibraryMethodsWithReady();
        this.setDriver(this._config.driver)["catch"](function () {});
    }

    // Set any config values for localForage; can be called anytime before
    // the first API call (e.g. `getItem`, `setItem`).
    // We loop through options so we don't overwrite existing config
    // values.


    LocalForage.prototype.config = function config(options) {
        // If the options argument is an object, we use it to set values.
        // Otherwise, we return either a specified config value or all
        // config values.
        if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {
            // If localforage is ready and fully initialized, we can't set
            // any new configuration values. Instead, we return an error.
            if (this._ready) {
                return new Error("Can't call config() after localforage " + 'has been used.');
            }

            for (var i in options) {
                if (i === 'storeName') {
                    options[i] = options[i].replace(/\W/g, '_');
                }

                if (i === 'version' && typeof options[i] !== 'number') {
                    return new Error('Database version must be a number.');
                }

                this._config[i] = options[i];
            }

            // after all config options are set and
            // the driver option is used, try setting it
            if ('driver' in options && options.driver) {
                return this.setDriver(this._config.driver);
            }

            return true;
        } else if (typeof options === 'string') {
            return this._config[options];
        } else {
            return this._config;
        }
    };

    // Used to define a custom driver, shared across all instances of
    // localForage.


    LocalForage.prototype.defineDriver = function defineDriver(driverObject, callback, errorCallback) {
        var promise = new Promise$1(function (resolve, reject) {
            try {
                var driverName = driverObject._driver;
                var complianceError = new Error('Custom driver not compliant; see ' + 'https://mozilla.github.io/localForage/#definedriver');

                // A driver name should be defined and not overlap with the
                // library-defined, default drivers.
                if (!driverObject._driver) {
                    reject(complianceError);
                    return;
                }

                var driverMethods = LibraryMethods.concat('_initStorage');
                for (var i = 0, len = driverMethods.length; i < len; i++) {
                    var driverMethodName = driverMethods[i];

                    // when the property is there,
                    // it should be a method even when optional
                    var isRequired = !includes(OptionalDriverMethods, driverMethodName);
                    if ((isRequired || driverObject[driverMethodName]) && typeof driverObject[driverMethodName] !== 'function') {
                        reject(complianceError);
                        return;
                    }
                }

                var configureMissingMethods = function configureMissingMethods() {
                    var methodNotImplementedFactory = function methodNotImplementedFactory(methodName) {
                        return function () {
                            var error = new Error('Method ' + methodName + ' is not implemented by the current driver');
                            var promise = Promise$1.reject(error);
                            executeCallback(promise, arguments[arguments.length - 1]);
                            return promise;
                        };
                    };

                    for (var _i = 0, _len = OptionalDriverMethods.length; _i < _len; _i++) {
                        var optionalDriverMethod = OptionalDriverMethods[_i];
                        if (!driverObject[optionalDriverMethod]) {
                            driverObject[optionalDriverMethod] = methodNotImplementedFactory(optionalDriverMethod);
                        }
                    }
                };

                configureMissingMethods();

                var setDriverSupport = function setDriverSupport(support) {
                    if (DefinedDrivers[driverName]) {
                        console.info('Redefining LocalForage driver: ' + driverName);
                    }
                    DefinedDrivers[driverName] = driverObject;
                    DriverSupport[driverName] = support;
                    // don't use a then, so that we can define
                    // drivers that have simple _support methods
                    // in a blocking manner
                    resolve();
                };

                if ('_support' in driverObject) {
                    if (driverObject._support && typeof driverObject._support === 'function') {
                        driverObject._support().then(setDriverSupport, reject);
                    } else {
                        setDriverSupport(!!driverObject._support);
                    }
                } else {
                    setDriverSupport(true);
                }
            } catch (e) {
                reject(e);
            }
        });

        executeTwoCallbacks(promise, callback, errorCallback);
        return promise;
    };

    LocalForage.prototype.driver = function driver() {
        return this._driver || null;
    };

    LocalForage.prototype.getDriver = function getDriver(driverName, callback, errorCallback) {
        var getDriverPromise = DefinedDrivers[driverName] ? Promise$1.resolve(DefinedDrivers[driverName]) : Promise$1.reject(new Error('Driver not found.'));

        executeTwoCallbacks(getDriverPromise, callback, errorCallback);
        return getDriverPromise;
    };

    LocalForage.prototype.getSerializer = function getSerializer(callback) {
        var serializerPromise = Promise$1.resolve(localforageSerializer);
        executeTwoCallbacks(serializerPromise, callback);
        return serializerPromise;
    };

    LocalForage.prototype.ready = function ready(callback) {
        var self = this;

        var promise = self._driverSet.then(function () {
            if (self._ready === null) {
                self._ready = self._initDriver();
            }

            return self._ready;
        });

        executeTwoCallbacks(promise, callback, callback);
        return promise;
    };

    LocalForage.prototype.setDriver = function setDriver(drivers, callback, errorCallback) {
        var self = this;

        if (!isArray(drivers)) {
            drivers = [drivers];
        }

        var supportedDrivers = this._getSupportedDrivers(drivers);

        function setDriverToConfig() {
            self._config.driver = self.driver();
        }

        function extendSelfWithDriver(driver) {
            self._extend(driver);
            setDriverToConfig();

            self._ready = self._initStorage(self._config);
            return self._ready;
        }

        function initDriver(supportedDrivers) {
            return function () {
                var currentDriverIndex = 0;

                function driverPromiseLoop() {
                    while (currentDriverIndex < supportedDrivers.length) {
                        var driverName = supportedDrivers[currentDriverIndex];
                        currentDriverIndex++;

                        self._dbInfo = null;
                        self._ready = null;

                        return self.getDriver(driverName).then(extendSelfWithDriver)["catch"](driverPromiseLoop);
                    }

                    setDriverToConfig();
                    var error = new Error('No available storage method found.');
                    self._driverSet = Promise$1.reject(error);
                    return self._driverSet;
                }

                return driverPromiseLoop();
            };
        }

        // There might be a driver initialization in progress
        // so wait for it to finish in order to avoid a possible
        // race condition to set _dbInfo
        var oldDriverSetDone = this._driverSet !== null ? this._driverSet["catch"](function () {
            return Promise$1.resolve();
        }) : Promise$1.resolve();

        this._driverSet = oldDriverSetDone.then(function () {
            var driverName = supportedDrivers[0];
            self._dbInfo = null;
            self._ready = null;

            return self.getDriver(driverName).then(function (driver) {
                self._driver = driver._driver;
                setDriverToConfig();
                self._wrapLibraryMethodsWithReady();
                self._initDriver = initDriver(supportedDrivers);
            });
        })["catch"](function () {
            setDriverToConfig();
            var error = new Error('No available storage method found.');
            self._driverSet = Promise$1.reject(error);
            return self._driverSet;
        });

        executeTwoCallbacks(this._driverSet, callback, errorCallback);
        return this._driverSet;
    };

    LocalForage.prototype.supports = function supports(driverName) {
        return !!DriverSupport[driverName];
    };

    LocalForage.prototype._extend = function _extend(libraryMethodsAndProperties) {
        extend(this, libraryMethodsAndProperties);
    };

    LocalForage.prototype._getSupportedDrivers = function _getSupportedDrivers(drivers) {
        var supportedDrivers = [];
        for (var i = 0, len = drivers.length; i < len; i++) {
            var driverName = drivers[i];
            if (this.supports(driverName)) {
                supportedDrivers.push(driverName);
            }
        }
        return supportedDrivers;
    };

    LocalForage.prototype._wrapLibraryMethodsWithReady = function _wrapLibraryMethodsWithReady() {
        // Add a stub for each driver API method that delays the call to the
        // corresponding driver method until localForage is ready. These stubs
        // will be replaced by the driver methods as soon as the driver is
        // loaded, so there is no performance impact.
        for (var i = 0, len = LibraryMethods.length; i < len; i++) {
            callWhenReady(this, LibraryMethods[i]);
        }
    };

    LocalForage.prototype.createInstance = function createInstance(options) {
        return new LocalForage(options);
    };

    return LocalForage;
}();

// The actual localForage object that we expose as a module or via a
// global. It's extended by pulling in one of our other libraries.


var localforage_js = new LocalForage();

module.exports = localforage_js;

},{"3":3}]},{},[4])(4)
});


/***/ }),

/***/ "./src/components/TaskWindow.ts":
/*!**************************************!*\
  !*** ./src/components/TaskWindow.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "buildTaskWindow": () => (/* binding */ buildTaskWindow),
/* harmony export */   "refreshTaskWindow": () => (/* binding */ refreshTaskWindow)
/* harmony export */ });
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! localforage */ "./node_modules/.pnpm/localforage@1.10.0/node_modules/localforage/dist/localforage.js");
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(localforage__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



const taskWindowInfos = {};
const taskWindowResumeButtonRef = {};
const _taskWindowRef = {};
function buildTaskWindow() {
    _taskWindowRef.current = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.e)(document.body).addElem("div", {
        onclick() {
            return __awaiter(this, void 0, void 0, function* () {
                if (confirm("Êtes vous sûr de vouloir arrêter l'execution de la tâche courante?")) {
                    yield localforage__WEBPACK_IMPORTED_MODULE_0___default().setItem("LTShouldStopTask", true);
                    yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.removeCurrentTask)();
                    alert("La tâche a été annulée en cours d'éxecution. Veuillez vérifier l'état des données.");
                }
            });
        },
        style: {
            position: "fixed",
            top: "0",
            right: "0",
            visibility: "hidden",
            backgroundColor: "pink",
            minWidth: "350px",
            cursor: "pointer",
            padding: "10px",
            zIndex: "999",
            overflow: "hidden",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("button", {
        style: { float: "right", fontWeight: "bold" },
        onclick(e) {
            e.stopPropagation();
            _taskWindowRef.current.style.height = _taskWindowRef.current.style.height ? "" : "5em";
        },
    }, "__"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("h4", null, "TÂCHE EN COURS,", (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("br"), "CLIQUEZ ICI POUR ANNULER"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("p", { bindTo: taskWindowInfos, style: { whiteSpace: "pre" } }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("button", {
        bindTo: taskWindowResumeButtonRef,
        style: { display: "none" },
        onclick(e) {
            return __awaiter(this, void 0, void 0, function* () {
                e.stopPropagation();
                const task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.getCurrentTask)();
                if (!task)
                    return;
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.setCurrentTask)(Object.assign(Object.assign({}, task), { isPaused: false }));
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.handleTasks)();
            });
        },
    }, "Continuer la tâche"));
}
let _lastTaskParams;
function refreshTaskWindow(task) {
    var _a, _b, _c;
    return __awaiter(this, void 0, void 0, function* () {
        if (!_taskWindowRef.current)
            return;
        if (!task && task !== null)
            task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.getCurrentTask)();
        if (!task) {
            _taskWindowRef.current.style.visibility = "hidden";
            return;
        }
        _taskWindowRef.current.style.visibility = "visible";
        const taskParams = _lib_task__WEBPACK_IMPORTED_MODULE_1__.taskMap[task.name];
        if (_lastTaskParams !== taskParams) {
            (_a = _lastTaskParams === null || _lastTaskParams === void 0 ? void 0 : _lastTaskParams.actionsElems) === null || _a === void 0 ? void 0 : _a.forEach((e) => e.remove());
            (_b = taskParams.actionsElems) === null || _b === void 0 ? void 0 : _b.forEach((e) => _taskWindowRef.current.appendChild(e));
            _lastTaskParams = taskParams;
        }
        if (taskWindowResumeButtonRef.current)
            taskWindowResumeButtonRef.current.style.display = task.isPaused ? "block" : "none";
        if (taskWindowInfos.current)
            taskWindowInfos.current.textContent =
                "Nom: " +
                    task.name +
                    "\n" +
                    "Description: " +
                    ((_c = task.description) !== null && _c !== void 0 ? _c : "(no description)") +
                    "\n" +
                    "Démarré le: " +
                    new Date(task.startedAt).toLocaleString() +
                    "\n\n" +
                    "Étape: " +
                    task.stepName +
                    "\n" +
                    "Étape démarrée le: " +
                    new Date(task.stepStartedAt).toLocaleString() +
                    "\n" +
                    (task.isPaused ? "\nEN PAUSE" : "") +
                    (task.lastMessage ? "\nDernier message: " + task.lastMessage : "");
    });
}


/***/ }),

/***/ "./src/components/ToolsWindow.ts":
/*!***************************************!*\
  !*** ./src/components/ToolsWindow.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "ToolWindow": () => (/* binding */ ToolWindow),
/* harmony export */   "hideWindow": () => (/* binding */ hideWindow),
/* harmony export */   "showWindow": () => (/* binding */ showWindow)
/* harmony export */ });
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");


let _frontDivRef = {};
let _toolWindowRef = {};
function ToolWindow(ref, frontDivRef) {
    _frontDivRef = frontDivRef;
    _toolWindowRef = ref;
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("div", {
        bindTo: ref,
        style: {
            "--width": "min(90vw, 600px)",
            display: "inline-block",
            visibility: "hidden",
            position: "relative",
            margin: "50px",
            left: "calc(50vw - calc(var(--width) / 2))",
            width: "var(--width)",
            minHeight: "200px",
            backgroundColor: "white",
            border: "1px solid gray",
            boxShadow: "5px 5px 10px #000a",
            padding: "0 10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("div", {
        style: {
            display: "flex",
            flexFlow: "row nowrap",
            justifyContent: "space-between",
            borderBottom: "1px solid lightgray",
            fontSize: "1.5em",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h2", null, "Outils"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { onclick: hideWindow }, "X")), ...Object.values(_lib_task__WEBPACK_IMPORTED_MODULE_0__.taskMap).flatMap(({ windowSectionComponent }) => windowSectionComponent ? [windowSectionComponent()] : []));
}
function hideWindow() {
    if (!_frontDivRef.current || !_toolWindowRef.current)
        return;
    _frontDivRef.current.style.visibility = "hidden";
    _toolWindowRef.current.style.visibility = "hidden";
}
function showWindow() {
    if (!_frontDivRef.current || !_toolWindowRef.current)
        return;
    _frontDivRef.current.style.visibility = "visible";
    _toolWindowRef.current.style.visibility = "visible";
}


/***/ }),

/***/ "./src/components/WindowAddOtherPrestSection.ts":
/*!******************************************************!*\
  !*** ./src/components/WindowAddOtherPrestSection.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowAddOtherPrestSection": () => (/* binding */ WindowAddOtherPrestSection)
/* harmony export */ });
/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xlsx */ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
/* harmony import */ var _ToolsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToolsWindow */ "./src/components/ToolsWindow.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function WindowAddOtherPrestSection() {
    const submitButtonRef = {};
    const formRef = {};
    function onSubmit(evt) {
        return __awaiter(this, void 0, void 0, function* () {
            evt.preventDefault();
            if (!submitButtonRef.current || !formRef.current) {
                alert("erreur d'initialisation");
                return;
            }
            const formData = Object.fromEntries(new FormData(formRef.current).entries());
            if (!formData.wrongContracts) {
                alert("Merci de déposer tous les fichiers");
                return;
            }
            submitButtonRef.current.disabled = true;
            const wrongContractsBuffer = yield formData.wrongContracts.arrayBuffer();
            const wrongContractsWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(wrongContractsBuffer);
            let selectedWrongContractsSheet = 0;
            if (wrongContractsWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.promptIndex)("Tableur des contrats incomplêts: Sélectionnez la feuille de données", wrongContractsWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedWrongContractsSheet = promptRes;
            }
            const wrongContractsSheet = wrongContractsWorkbook.Sheets[wrongContractsWorkbook.SheetNames[selectedWrongContractsSheet]];
            const wrongContractsJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(wrongContractsSheet);
            if (!Array.isArray(wrongContractsJSON) ||
                !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.objectContainsKeys)(wrongContractsJSON[0], ["c ID"])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier de contrats est vide ou corrompu. Veuillez réessayer.");
                return;
            }
            const contractsById = Object.fromEntries(wrongContractsJSON.map((wc) => [wc["c ID"], wc]));
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.namedLog)({ wrongContractsJSON, contractsById });
            const contractsIdsToHandle = Object.keys(contractsById)
                .map(Number)
                .sort((a, b) => a - b);
            // .slice(127); //debug
            const taskData = {
                contracts: contractsById,
                contractIds: contractsIdsToHandle,
                doneContracts: [],
            };
            (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.setNewTask)("addOtherPrest", taskData, undefined, "Remplissage des contrats sans classe.");
            (0,_ToolsWindow__WEBPACK_IMPORTED_MODULE_3__.hideWindow)();
            submitButtonRef.current.disabled = false;
        });
    }
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h3", null, "Ajout automatique des 'autres prestations' 'Aide individuelle'"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("form", {
        onsubmit: onSubmit,
        bindTo: formRef,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("label", { htmlFor: "inputWrongContracts" }, "Feuille Excel avec les contrats incomplèts (c ID)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("input", {
        name: "wrongContracts",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputWrongContracts",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { type: "submit", bindTo: submitButtonRef }, "Démarrer")));
}


/***/ }),

/***/ "./src/components/WindowApplyContractSection.ts":
/*!******************************************************!*\
  !*** ./src/components/WindowApplyContractSection.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowApplyContractSection": () => (/* binding */ WindowApplyContractSection)
/* harmony export */ });
/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xlsx */ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
/* harmony import */ var _ToolsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToolsWindow */ "./src/components/ToolsWindow.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function WindowApplyContractSection() {
    const submitButtonRef = {};
    const formRef = {};
    function onSubmit(evt) {
        return __awaiter(this, void 0, void 0, function* () {
            evt.preventDefault();
            if (!submitButtonRef.current || !formRef.current) {
                alert("erreur d'initialisation");
                return;
            }
            const formData = Object.fromEntries(new FormData(formRef.current).entries());
            if (!formData.contracts) {
                alert("Merci de déposer tous les fichiers");
                return;
            }
            submitButtonRef.current.disabled = true;
            const contractsBuffer = yield formData.contracts.arrayBuffer();
            const contractsWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(contractsBuffer);
            let selectedContractsSheet = 0;
            if (contractsWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.promptIndex)("Tableur des contrats incomplêts: Sélectionnez la feuille de données", contractsWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedContractsSheet = promptRes;
            }
            const contractsSheet = contractsWorkbook.Sheets[contractsWorkbook.SheetNames[selectedContractsSheet]];
            const contractsJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(contractsSheet);
            if (!Array.isArray(contractsJSON) || !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.objectContainsKeys)(contractsJSON[0], ["c ID"])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier de contrats est vide ou corrompu. Veuillez réessayer.");
                return;
            }
            const contracts = Object.fromEntries(contractsJSON.map((c) => [c["c ID"], c]));
            const contractIdsToHandle = contractsJSON.map((c) => c["c ID"]);
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.namedLog)({ contracts });
            const taskData = {
                contractIdsToHandle,
                contracts,
                failedSavesIds: [],
            };
            (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.setNewTask)("applyContract", taskData, undefined, "Remplissage dynamique des contrats existants");
            (0,_ToolsWindow__WEBPACK_IMPORTED_MODULE_3__.hideWindow)();
            submitButtonRef.current.disabled = false;
        });
    }
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h3", null, "Remplissage dynamique des contrats existants"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("form", {
        onsubmit: onSubmit,
        bindTo: formRef,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("label", { htmlFor: "inputContracts" }, "Feuille Excel avec les contrats à modifier (c ID)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("input", {
        name: "contracts",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputContracts",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { type: "submit", bindTo: submitButtonRef }, "Démarrer")));
}


/***/ }),

/***/ "./src/components/WindowApplyPercentFacturation.ts":
/*!*********************************************************!*\
  !*** ./src/components/WindowApplyPercentFacturation.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowApplyPercentFacturation": () => (/* binding */ WindowApplyPercentFacturation)
/* harmony export */ });
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _ToolsWindow__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./ToolsWindow */ "./src/components/ToolsWindow.ts");



function WindowApplyPercentFacturation() {
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h3", null, "Deduction FAJE 20%"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("form", {
        onsubmit: onSubmit,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, "Lancez la procédure depuis la liste des journaux de facturation", (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { type: "submit" }, "Démarrer")));
    function onSubmit(evt) {
        evt.preventDefault();
        (0,_ToolsWindow__WEBPACK_IMPORTED_MODULE_2__.hideWindow)();
        const newTask = {
            factures: {},
            idsToHandle: [],
            text: "Déduction FAJE 20%",
        };
        (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.setNewTask)("applyPercentFacturation", newTask, undefined, "Ajoute un entrée de rabais à une liste de factures.");
    }
}


/***/ }),

/***/ "./src/components/WindowChangeMotiveSection.ts":
/*!*****************************************************!*\
  !*** ./src/components/WindowChangeMotiveSection.ts ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowChangeMotiveSection": () => (/* binding */ WindowChangeMotiveSection)
/* harmony export */ });
/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xlsx */ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
/* harmony import */ var _ToolsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToolsWindow */ "./src/components/ToolsWindow.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function WindowChangeMotiveSection() {
    const submitButtonRef = {};
    const formRef = {};
    function onSubmit(evt) {
        return __awaiter(this, void 0, void 0, function* () {
            evt.preventDefault();
            if (!submitButtonRef.current || !formRef.current) {
                alert("erreur d'initialisation");
                return;
            }
            const formData = Object.fromEntries(new FormData(formRef.current).entries());
            if (!formData.wrongContracts) {
                alert("Merci de déposer tous les fichiers");
                return;
            }
            submitButtonRef.current.disabled = true;
            const wrongContractsBuffer = yield formData.wrongContracts.arrayBuffer();
            const wrongContractsWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(wrongContractsBuffer);
            let selectedWrongContractsSheet = 0;
            if (wrongContractsWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.promptIndex)("Tableur des contrats incomplêts: Sélectionnez la feuille de données", wrongContractsWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedWrongContractsSheet = promptRes;
            }
            const wrongContractsSheet = wrongContractsWorkbook.Sheets[wrongContractsWorkbook.SheetNames[selectedWrongContractsSheet]];
            const wrongContractsJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(wrongContractsSheet);
            if (!Array.isArray(wrongContractsJSON) ||
                !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.objectContainsKeys)(wrongContractsJSON[0], ["c ID"])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier de contrats est vide ou corrompu. Veuillez réessayer.");
                return;
            }
            const contractIds = wrongContractsJSON.map((wc) => wc["c ID"]);
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.namedLog)({ contractIds });
            const taskData = {
                contractIds,
                contractsCount: contractIds.length,
                motiveValue: 221,
                failedSavesIds: [],
            };
            (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.setNewTask)("changeMotive", taskData, undefined, "Remplissage des motifs d'accueil vides");
            (0,_ToolsWindow__WEBPACK_IMPORTED_MODULE_3__.hideWindow)();
            submitButtonRef.current.disabled = false;
        });
    }
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h3", null, "Remplissage du motif d'accueil (DAC)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("form", {
        onsubmit: onSubmit,
        bindTo: formRef,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("label", { htmlFor: "inputWrongContracts" }, "Feuille Excel avec les contrats à modifier (c ID)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("input", {
        name: "wrongContracts",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputWrongContracts",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { type: "submit", bindTo: submitButtonRef }, "Démarrer")));
}


/***/ }),

/***/ "./src/components/WindowFillContractsClassesSection.ts":
/*!*************************************************************!*\
  !*** ./src/components/WindowFillContractsClassesSection.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowFillContractsClassesSection": () => (/* binding */ WindowFillContractsClassesSection)
/* harmony export */ });
/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xlsx */ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs");
/* harmony import */ var _components_ToolsWindow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/ToolsWindow */ "./src/components/ToolsWindow.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function WindowFillContractsClassesSection() {
    const submitButtonRef = {};
    const formRef = {};
    function onSubmit(evt) {
        return __awaiter(this, void 0, void 0, function* () {
            evt.preventDefault();
            if (!submitButtonRef.current || !formRef.current) {
                alert("erreur d'initialisation");
                return;
            }
            const formData = Object.fromEntries(new FormData(formRef.current).entries());
            if (!formData.allStudents || !formData.wrongContracts) {
                alert("Merci de déposer tous les fichiers");
                return;
            }
            submitButtonRef.current.disabled = true;
            const [allPeopleBuffer, wrongContractsBuffer] = yield Promise.all([
                formData.allStudents.arrayBuffer(),
                formData.wrongContracts.arrayBuffer(),
            ]);
            const allPeopleWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(allPeopleBuffer);
            let selectedAllPeopleSheet = 0;
            if (allPeopleWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.promptIndex)("Tableur agapeo: Sélectionnez la feuille de données", allPeopleWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedAllPeopleSheet = promptRes;
            }
            const allPeopleSheet = allPeopleWorkbook.Sheets[allPeopleWorkbook.SheetNames[selectedAllPeopleSheet]];
            const allPeopleJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(allPeopleSheet);
            if (!Array.isArray(allPeopleJSON) ||
                !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.objectContainsKeys)(allPeopleJSON[0], ["Nom", "Prenom", "DateNaissance"])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier d'élèves est vide ou corrompu. Veuillez réessayer.");
                console.error(allPeopleJSON[0]);
                return;
            }
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.namedLog)({ allPeopleJSON });
            const wrongContractsWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(wrongContractsBuffer);
            let selectedWrongContractsSheet = 0;
            if (wrongContractsWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.promptIndex)("Tableur des contrats incomplêts: Sélectionnez la feuille de données", wrongContractsWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedWrongContractsSheet = promptRes;
            }
            const wrongContractsSheet = wrongContractsWorkbook.Sheets[wrongContractsWorkbook.SheetNames[selectedWrongContractsSheet]];
            const wrongContractsJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(wrongContractsSheet);
            if (!Array.isArray(wrongContractsJSON) ||
                !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.objectContainsKeys)(wrongContractsJSON[0], [
                    "e id",
                    "e nom",
                    "e prenom",
                    "institution",
                    "institution id",
                ])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier de contrats est vide ou corrompu. Veuillez réessayer.");
                return;
            }
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.namedLog)({ wrongContractsJSON });
            const contractsById = Object.fromEntries(wrongContractsJSON.map((wc) => [wc["e id"], wc]));
            const contractsIdsToHandle = Object.keys(contractsById).sort((a, b) => parseInt(a) - parseInt(b));
            // .slice(127); //debug
            const taskData = {
                contracts: contractsById,
                contractsIds: contractsIdsToHandle,
                existingDataStrategy: formData.existingDataStrat,
                shouldSelectFirstData: formData.autoUseFirstDuplicateData === "on",
                shouldSkipContractNotFound: formData.autoSkipNotFound === "on",
                shouldSelectLastContractNotFound: formData.autoSelectLastContract === "on",
                contractsNotFound: {},
                contractsDuplicates: {},
                contractByContractMode: false,
            };
            (0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.setNewTask)("fillContractClasses", taskData, allPeopleJSON, "Remplissage des contrats sans classe.");
            (0,_components_ToolsWindow__WEBPACK_IMPORTED_MODULE_0__.hideWindow)();
            submitButtonRef.current.disabled = false;
        });
    }
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("h3", null, "Remplissage des contrats sans classes"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("form", {
        onsubmit: onSubmit,
        bindTo: formRef,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", { htmlFor: "inputAllStudents" }, "Feuille Excel avec tous les élèves (Nom, Prenom, DateNaissance, ClasseCourante)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        name: "allStudents",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputAllStudents",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", { htmlFor: "inputWrongContracts" }, "Feuille Excel avec les contrats incomplèts (e id, e nom, e prenom, institution, institution id)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        name: "wrongContracts",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputWrongContracts",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("div", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        type: "checkbox",
        id: "checkboxAutoUseFirstDuplicateData",
        name: "autoUseFirstDuplicateData",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", {
        htmlFor: "checkboxAutoUseFirstDuplicateData",
        style: { margin: "0 0 0 .5em" },
    }, "Toujours sélectionner la première école/classe en cas de résultats similaires.")), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("div", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        type: "checkbox",
        id: "checkboxAutoSkipNotFound",
        name: "autoSkipNotFound",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", {
        htmlFor: "checkboxAutoSkipNotFound",
        style: { margin: "0 0 0 .5em" },
    }, "Toujours ignorer les contrats introuvable. (Une liste sera affichée à la fin de l'éxecution)")), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("div", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        type: "checkbox",
        id: "checkboxAutoSelectLastContract",
        name: "autoSelectLastContract",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", {
        htmlFor: "checkboxAutoSelectLastContract",
        style: { margin: "0 0 0 .5em" },
    }, "Toujours sélectionner le dernier contrat lorsque plusieurs sont disponibles. (Une liste sera affichée à la fin de l'éxecution)")), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("fieldset", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("legend", { style: { fontSize: "1em", marginInlineEnd: "1em" } }, "Si une donnée est déjà enregistrée"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        name: "existingDataStrat",
        type: "radio",
        id: "radioExistingDataStratAsk",
        value: "ask",
        style: { margin: "0 .5em" },
        checked: true,
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", { htmlFor: "radioExistingDataStratAsk" }, "Toujours demander"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("br"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        name: "existingDataStrat",
        type: "radio",
        id: "radioExistingDataStratSkip",
        value: "skip",
        style: { margin: "0 .5em" },
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", { htmlFor: "radioExistingDataStratSkip" }, "Toujours ignorer"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("br"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("input", {
        name: "existingDataStrat",
        type: "radio",
        id: "radioExistingDataStratForce",
        value: "force",
        style: { margin: "0 .5em" },
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("label", { htmlFor: "radioExistingDataStratForce" }, "Toujours remplacer")), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_2__.createElem)("button", { type: "submit", bindTo: submitButtonRef }, "Démarrer")));
}


/***/ }),

/***/ "./src/components/WindowRemoveDACPrestSection.ts":
/*!*******************************************************!*\
  !*** ./src/components/WindowRemoveDACPrestSection.ts ***!
  \*******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowRemoveDACPrestSection": () => (/* binding */ WindowRemoveDACPrestSection)
/* harmony export */ });
/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xlsx */ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
/* harmony import */ var _ToolsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToolsWindow */ "./src/components/ToolsWindow.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function WindowRemoveDACPrestSection() {
    const submitButtonRef = {};
    const formRef = {};
    function onSubmit(evt) {
        return __awaiter(this, void 0, void 0, function* () {
            evt.preventDefault();
            if (!submitButtonRef.current || !formRef.current) {
                alert("erreur d'initialisation");
                return;
            }
            const formData = Object.fromEntries(new FormData(formRef.current).entries());
            if (!formData.wrongContracts) {
                alert("Merci de déposer tous les fichiers");
                return;
            }
            submitButtonRef.current.disabled = true;
            const wrongContractsBuffer = yield formData.wrongContracts.arrayBuffer();
            const wrongContractsWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(wrongContractsBuffer);
            let selectedWrongContractsSheet = 0;
            if (wrongContractsWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.promptIndex)("Tableur des contrats incomplêts: Sélectionnez la feuille de données", wrongContractsWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedWrongContractsSheet = promptRes;
            }
            const wrongContractsSheet = wrongContractsWorkbook.Sheets[wrongContractsWorkbook.SheetNames[selectedWrongContractsSheet]];
            const wrongContractsJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(wrongContractsSheet);
            if (!Array.isArray(wrongContractsJSON) ||
                !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.objectContainsKeys)(wrongContractsJSON[0], ["c ID", "institution id", "pp id"])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier de contrats est vide ou corrompu. Veuillez réessayer.");
                return;
            }
            const contractsById = Object.fromEntries(wrongContractsJSON
                .filter((c) => { var _a; return ((_a = c["Facturation DAC à supprimer"]) !== null && _a !== void 0 ? _a : 0) > 0; })
                .map((wc) => [wc["c ID"], wc]));
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.namedLog)({ wrongContractsJSON, contractsById });
            const contractsIdsToHandle = Object.keys(contractsById)
                .map(Number)
                .sort((a, b) => a - b);
            // .slice(127); //debug
            const taskData = {
                contracts: contractsById,
                contractIds: contractsIdsToHandle,
                doneContracts: [],
                strangeContracts: [],
            };
            (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.setNewTask)("removeDACPrest", taskData, undefined, "Supression des 'autres prestations' DAC");
            (0,_ToolsWindow__WEBPACK_IMPORTED_MODULE_3__.hideWindow)();
            submitButtonRef.current.disabled = false;
        });
    }
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h3", null, "Supression des 'autres prestations' DAC et facturation"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("form", {
        onsubmit: onSubmit,
        bindTo: formRef,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("label", { htmlFor: "inputWrongContracts" }, "Feuille Excel avec les contrats incorrects (c ID)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("input", {
        name: "wrongContracts",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputWrongContracts",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { type: "submit", bindTo: submitButtonRef }, "Démarrer")));
}


/***/ }),

/***/ "./src/components/WindowStepContractsSection.ts":
/*!******************************************************!*\
  !*** ./src/components/WindowStepContractsSection.ts ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "WindowStepContractsSection": () => (/* binding */ WindowStepContractsSection)
/* harmony export */ });
/* harmony import */ var xlsx__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! xlsx */ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
/* harmony import */ var _ToolsWindow__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ToolsWindow */ "./src/components/ToolsWindow.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function WindowStepContractsSection() {
    const submitButtonRef = {};
    const formRef = {};
    function onSubmit(evt) {
        return __awaiter(this, void 0, void 0, function* () {
            evt.preventDefault();
            if (!submitButtonRef.current || !formRef.current) {
                alert("erreur d'initialisation");
                return;
            }
            const formData = Object.fromEntries(new FormData(formRef.current).entries());
            if (!formData.wrongContracts) {
                alert("Merci de déposer tous les fichiers");
                return;
            }
            submitButtonRef.current.disabled = true;
            const wrongContractsBuffer = yield formData.wrongContracts.arrayBuffer();
            const wrongContractsWorkbook = (0,xlsx__WEBPACK_IMPORTED_MODULE_4__.read)(wrongContractsBuffer);
            let selectedWrongContractsSheet = 0;
            if (wrongContractsWorkbook.SheetNames.length > 1) {
                const promptRes = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.promptIndex)("Tableur des contrats: Sélectionnez la feuille de données", wrongContractsWorkbook.SheetNames, 0, true);
                if (promptRes === null) {
                    submitButtonRef.current.disabled = false;
                    return;
                }
                selectedWrongContractsSheet = promptRes;
            }
            const wrongContractsSheet = wrongContractsWorkbook.Sheets[wrongContractsWorkbook.SheetNames[selectedWrongContractsSheet]];
            const wrongContractsJSON = xlsx__WEBPACK_IMPORTED_MODULE_4__.utils.sheet_to_json(wrongContractsSheet);
            if (!Array.isArray(wrongContractsJSON) ||
                !(0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.objectContainsKeys)(wrongContractsJSON[0], ["c ID"])) {
                submitButtonRef.current.disabled = false;
                alert("Le fichier de contrats est vide ou corrompu. Veuillez réessayer.");
                return;
            }
            const contractIds = wrongContractsJSON.map((wc) => wc["c ID"]);
            (0,_lib_utils__WEBPACK_IMPORTED_MODULE_2__.namedLog)({ contractIds });
            const taskData = {
                contractIds,
                contractsCount: contractIds.length,
            };
            (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.setNewTask)("stepContracts", taskData, undefined, "Visite des contrats");
            (0,_ToolsWindow__WEBPACK_IMPORTED_MODULE_3__.hideWindow)();
            submitButtonRef.current.disabled = false;
        });
    }
    return (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("p", null, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("h3", null, "Visite des contrats"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("form", {
        onsubmit: onSubmit,
        bindTo: formRef,
        style: {
            borderLeft: "3px solid gray",
            paddingLeft: "10px",
            display: "flex",
            flexFlow: "column",
            alignItems: "flex-start",
            gap: "10px",
        },
    }, (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("label", { htmlFor: "inputWrongContracts" }, "Feuille Excel avec les contrats (c ID)"), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("input", {
        name: "wrongContracts",
        type: "file",
        accept: ".xlsx, .xlsm, .xls",
        required: true,
        id: "inputWrongContracts",
    }), (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_1__.createElem)("button", { type: "submit", bindTo: submitButtonRef }, "Démarrer")));
}


/***/ }),

/***/ "./src/lib/UIBuilder.ts":
/*!******************************!*\
  !*** ./src/lib/UIBuilder.ts ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "buildGoToContractButtonIntegration": () => (/* binding */ buildGoToContractButtonIntegration),
/* harmony export */   "buildRemoveEndDateButtonIntegration": () => (/* binding */ buildRemoveEndDateButtonIntegration),
/* harmony export */   "buildToolsButtonIntegration": () => (/* binding */ buildToolsButtonIntegration)
/* harmony export */ });
/* harmony import */ var _components_ToolsWindow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/ToolsWindow */ "./src/components/ToolsWindow.ts");
/* harmony import */ var _async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./async */ "./src/lib/async.ts");
/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./task */ "./src/lib/task.ts");
/* harmony import */ var _UITools__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./UITools */ "./src/lib/UITools.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




function buildToolsButtonIntegration() {
    //BUILD UI
    const mainMenuUlElement = document.querySelector("#mainmenu > ul");
    if (mainMenuUlElement) {
        (0,_UITools__WEBPACK_IMPORTED_MODULE_3__.e)(mainMenuUlElement).addElem("li", null, (0,_UITools__WEBPACK_IMPORTED_MODULE_3__.createElem)("a", {
            onclick: _components_ToolsWindow__WEBPACK_IMPORTED_MODULE_0__.showWindow,
            dataset: {
                toggle: "tooltip",
                placement: "top",
                originalTitle: "Les outils pratiques",
            },
        }, (0,_UITools__WEBPACK_IMPORTED_MODULE_3__.createElem)("i", { className: "fa fa-solid fa-toolbox" })));
    }
    const frontDivRef = {};
    const toolWindowRef = {};
    (0,_UITools__WEBPACK_IMPORTED_MODULE_3__.e)(document.body).addElem("div", {
        bindTo: frontDivRef,
        style: {
            position: "fixed",
            visibility: "hidden",
            top: "0",
            left: "0",
            minWidth: "100vw",
            height: "100vh",
            overflowY: "auto",
            backgroundColor: "#000a",
            zIndex: "1",
        },
    }, (0,_components_ToolsWindow__WEBPACK_IMPORTED_MODULE_0__.ToolWindow)(toolWindowRef, frontDivRef));
}
function buildGoToContractButtonIntegration() {
    var _a, _b;
    const h2 = document.querySelector("#data h2");
    const personIdForButton = Number((_b = (_a = h2 === null || h2 === void 0 ? void 0 : h2.textContent) === null || _a === void 0 ? void 0 : _a.split("(").at(1)) === null || _b === void 0 ? void 0 : _b.split(")").at(0));
    if (h2 && !isNaN(personIdForButton)) {
        (0,_UITools__WEBPACK_IMPORTED_MODULE_3__.e)(h2).addElem("button", {
            type: "button",
            title: "Afficher les contrats",
            onclick() {
                (0,_task__WEBPACK_IMPORTED_MODULE_2__.setNewTask)("goToContracts", { personId: personIdForButton });
            },
            style: {
                borderRadius: "1em",
                lineHeight: "1em",
                paddingBottom: ".2em",
            },
        }, "c");
    }
}
function buildRemoveEndDateButtonIntegration() {
    return __awaiter(this, void 0, void 0, function* () {
        //the button may disappear on tab switch
        const endDateInput = yield (0,_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#ui-id-6 > form > table > tbody > tr > td > input#verEnde");
        const endDateValue = endDateInput.value;
        if (endDateValue) {
            (0,_UITools__WEBPACK_IMPORTED_MODULE_3__.e)(endDateInput.parentElement).addElem("button", {
                type: "button",
                onclick(ev) {
                    (0,_task__WEBPACK_IMPORTED_MODULE_2__.setNewTask)("removeEndDate", {
                        dateToRemove: endDateValue,
                        newEndDate: "",
                    });
                },
                title: `Supprimer la date de fin du contrat et des prestations`,
                style: {
                    borderRadius: ".5em",
                },
            }, `supprimer fin au ${endDateValue}`);
        }
    });
}


/***/ }),

/***/ "./src/lib/UITools.ts":
/*!****************************!*\
  !*** ./src/lib/UITools.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addElement": () => (/* binding */ addElement),
/* harmony export */   "createElem": () => (/* binding */ createElem),
/* harmony export */   "e": () => (/* binding */ e),
/* harmony export */   "promptIndex": () => (/* binding */ promptIndex)
/* harmony export */ });
function createElem(type, props, ...children) {
    const el = document.createElement(type);
    Object.entries(props !== null && props !== void 0 ? props : {}).forEach(([name, val]) => {
        if (name === "dataset") {
            Object.assign(el[name], val);
        }
        else if (name === "style") {
            Object.entries(val).forEach(([k, v]) => {
                //@ts-ignore ts doesn't understand what's going on (and I don't want to search how to to it for 2 hours)
                if (el.style[k] !== undefined)
                    el.style[k] = v;
                else
                    el.style.setProperty(k, v);
            });
        }
        else if (name === "bindTo") {
            val.current = el;
        }
        else {
            el[name] = val;
        }
    });
    el.append(...children);
    return el;
}
function addElement(parent, type, props, ...children) {
    const el = createElem(type, props, ...children);
    parent.appendChild(el);
    return el;
}
function e(elem) {
    function addElem(type, props, ...children) {
        return addElement(elem, type, props, ...children);
    }
    return { elem, addElem };
}
function promptIndex(text, choices, defaultIndex = 0, allowNull = false) {
    let chosenIndex = 0;
    do {
        const promptRes = window.prompt(text + "\n" + choices.map((t, i) => `[${i + 1}] ${t}`).join("\n"), `${defaultIndex + 1}`);
        if (promptRes === null && allowNull)
            return null;
        chosenIndex = parseInt(promptRes !== null && promptRes !== void 0 ? promptRes : "") - 1;
    } while (isNaN(chosenIndex) || chosenIndex < 0 || chosenIndex >= choices.length);
    return chosenIndex;
}


/***/ }),

/***/ "./src/lib/async.ts":
/*!**************************!*\
  !*** ./src/lib/async.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "async_requestAnimationFrame": () => (/* binding */ async_requestAnimationFrame),
/* harmony export */   "async_setTimeout": () => (/* binding */ async_setTimeout),
/* harmony export */   "waitForSelector": () => (/* binding */ waitForSelector),
/* harmony export */   "waitForSelectorAll": () => (/* binding */ waitForSelectorAll),
/* harmony export */   "waitForValue": () => (/* binding */ waitForValue)
/* harmony export */ });
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
function async_requestAnimationFrame() {
    return new Promise((res) => requestAnimationFrame(res));
}
function async_setTimeout(ms) {
    return new Promise((res) => setTimeout(res, ms));
}
function waitForSelector(selector, checkInterval = 100, maxChecks = 50) {
    return __awaiter(this, void 0, void 0, function* () {
        const res = typeof selector === "function" ? yield selector() : document.querySelector(selector);
        return yield new Promise((resolve, reject) => {
            if (res === null) {
                if (maxChecks <= 0) {
                    reject(new Error(`can't find element ${selector.toString()}`));
                    return;
                }
                setTimeout(() => waitForSelector(selector, checkInterval, maxChecks - 1)
                    .then(resolve)
                    .catch(reject), checkInterval);
            }
            else {
                resolve(res);
            }
        });
    });
}
function waitForValue(getter, checkInterval = 100, maxChecks = 50 //~5 seconds
) {
    return __awaiter(this, void 0, void 0, function* () {
        const res = yield getter();
        return new Promise((resolve) => {
            if (res === undefined) {
                if (maxChecks <= 0) {
                    resolve(undefined);
                    return;
                }
                setTimeout(() => waitForValue(getter, checkInterval, maxChecks - 1).then(resolve), checkInterval);
            }
            else {
                resolve(res);
            }
        });
    });
}
function waitForSelectorAll(selector, minCount = 1, checkInterval = 100, maxChecks = 50) {
    console.log("waitForSelectorAll", maxChecks);
    const res = typeof selector === "function" ? selector() : document.querySelectorAll(selector);
    return new Promise((resolve, reject) => {
        if (res.length < minCount) {
            if (maxChecks <= 0) {
                reject(new Error(`can't find elements ${selector.toString()}`));
                return;
            }
            setTimeout(() => waitForSelectorAll(selector, minCount, checkInterval, maxChecks - 1)
                .then(resolve)
                .catch(reject), checkInterval);
        }
        else {
            resolve(res);
        }
    });
}


/***/ }),

/***/ "./src/lib/checks.ts":
/*!***************************!*\
  !*** ./src/lib/checks.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "errorIfIcareTools": () => (/* binding */ errorIfIcareTools)
/* harmony export */ });
/**
 * @throws {Error} prompt for disabling icare helpers
 */
function errorIfIcareTools() {
    if (window.HAS_ICARE_HELPERS_LOADED) {
        alert("Cette tâche ne peut pas fonctionner quand le script 'icare-helpers' est chargé. Désactivez le d'abord.");
        throw new Error("Cette tâche ne supporte pas le script 'icare-helpers'");
    }
}


/***/ }),

/***/ "./src/lib/errors.ts":
/*!***************************!*\
  !*** ./src/lib/errors.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Warning": () => (/* binding */ Warning)
/* harmony export */ });
class Warning {
    constructor(message) {
        this.message = message;
    }
    toString() {
        var _a;
        return `Warning: ${(_a = this.message) !== null && _a !== void 0 ? _a : "(no message)"}`;
    }
}


/***/ }),

/***/ "./src/lib/icareInteractions.ts":
/*!**************************************!*\
  !*** ./src/lib/icareInteractions.ts ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fillContractData": () => (/* binding */ fillContractData)
/* harmony export */ });
/* harmony import */ var _errors__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./errors */ "./src/lib/errors.ts");
/* harmony import */ var _task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./task */ "./src/lib/task.ts");
/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ "./src/lib/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};



function fillContractData(task, name, value, nextStep) {
    var _a, _b, _c, _d;
    return __awaiter(this, void 0, void 0, function* () {
        const person = task.sharedData.contracts[task.sharedData.contractsIds[0]];
        if (value === undefined) {
            alert(`Aucune valeur fournie pour ${name}.\n` +
                `
      Entrez la donnée manuellement et continuez la tâche\n` +
                `Personne: [${person["e id"]}] ${person["e prenom"]} ${person["e nom"]}`);
            task = yield (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task, true);
            throw new Error(`Aucune valeur fournie pour ${name}. p.id: ${person["e id"]}`);
        }
        const tables = document.querySelectorAll("#theKlForm > table.sortable");
        let select;
        let saveButton;
        for (let tableIndex = 0; tableIndex < tables.length; tableIndex++) {
            const table = tables[tableIndex];
            const TRList = table.querySelectorAll("table > thead > tr, table > tbody > tr");
            const TRs = [...TRList];
            const nameTR = tableIndex === 0 ? TRs[1] : TRs[0];
            const nameFromTR = (_a = nameTR === null || nameTR === void 0 ? void 0 : nameTR.textContent) === null || _a === void 0 ? void 0 : _a.trim();
            if (!(nameFromTR === null || nameFromTR === void 0 ? void 0 : nameFromTR.includes(name)))
                continue;
            const dataTR = tableIndex === 0 ? TRs[2] : TRs[1];
            select =
                (_b = dataTR === null || dataTR === void 0 ? void 0 : dataTR.querySelector("td > span > select.inputNoWidth")) !== null && _b !== void 0 ? _b : undefined;
            saveButton = (_c = dataTR === null || dataTR === void 0 ? void 0 : dataTR.querySelector("td > button.link")) !== null && _c !== void 0 ? _c : undefined;
            if (!((_d = saveButton === null || saveButton === void 0 ? void 0 : saveButton.getAttribute("onclick")) === null || _d === void 0 ? void 0 : _d.includes("javascript:saveEntry('KlassifizierungForm'")))
                throw new Error("Imposteur de bouton de sauvegarde (btn pas trouvé)");
            break;
        }
        (0,_utils__WEBPACK_IMPORTED_MODULE_2__.namedLog)({ name, select, saveButton });
        if (!select || !saveButton) {
            alert(`L'entrée ${name} est introuvable. Vérifiez et créez la si besoin.\nEnsuite relancez la tâche`);
            throw new _errors__WEBPACK_IMPORTED_MODULE_0__.Warning(`Ligne ${name} introuvable.`);
        }
        //Already a value inside the select
        if (select.value !== "0") {
            //Ask to overwrite
            if (task.sharedData.existingDataStrategy === "ask" &&
                !confirm(`${name} déjà renseigné.\nSouhaitez vous l'écraser?\n` + `Valeur: '${value}'`)) {
                alert(`Vérifiez/renseignez le collège, enregistrez puis continuez la tâche.`);
                task = yield (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task, true);
                throw new _errors__WEBPACK_IMPORTED_MODULE_0__.Warning(`Vérifier/Renseigner manuellement ${name}`);
            }
            //Skip to next step
            else if (task.sharedData.existingDataStrategy === "skip") {
                console.info("skipping to next step according to existingData strategy");
                task = yield (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task, true);
                return;
            }
        }
        //find matching name
        const optionsToSelect = [...select.options].filter((op) => { var _a; return (_a = op.textContent) === null || _a === void 0 ? void 0 : _a.trim().split("''").join("'").includes(value.trim().split("''").join("'")); });
        let resIndexChosen = 1;
        if (!task.sharedData.shouldSelectFirstData && optionsToSelect.length > 1) {
            do {
                const txtRes = prompt(`Veuillez choisir la bonne valeur pour '${name}'.\n\n` +
                    `Valeur cherchée: '${value}'\n` +
                    `Personne: ${person["e prenom"]} ${person["e nom"]} [${person["e id"]}]\n\n` +
                    optionsToSelect.map((o, i) => { var _a; return `[${i + 1}] ${(_a = o.textContent) === null || _a === void 0 ? void 0 : _a.trim()}`; }).join("\n"), resIndexChosen.toString());
                if (txtRes === null) {
                    alert(`Entrez manuellement la valeur de ${name}.\nValeur du fichier: ${value}\n` +
                        `Personne: [${person["e id"]}] ${person["e prenom"]} ${person["e nom"]}`);
                    task = yield (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task, true);
                    throw new _errors__WEBPACK_IMPORTED_MODULE_0__.Warning(`Entrer manuellement: ${name}: "${value}". p.id: ${person["e id"]}`);
                }
                resIndexChosen = parseInt(txtRes);
            } while (isNaN(resIndexChosen) ||
                resIndexChosen < 1 ||
                resIndexChosen > optionsToSelect.length);
        }
        const optionToSelect = optionsToSelect[resIndexChosen - 1];
        if (!(optionToSelect === null || optionToSelect === void 0 ? void 0 : optionToSelect.value)) {
            alert(`${name}: '${value}': introuvable dans les listes. Renseignez le manuellement puis enregistrez. Ensuite continuez la tâche.\n` +
                `Personne: [${person["e id"]}] ${person["e prenom"]} ${person["e nom"]}`);
            task = yield (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task, true);
            throw new _errors__WEBPACK_IMPORTED_MODULE_0__.Warning(`${name}: '${value}' introuvable. Renseigner manuellement. p.id: ${person["e id"]}`);
        }
        //skip if already right value
        if (select.value === optionToSelect.value) {
            (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task);
            return;
        }
        task = yield (0,_task__WEBPACK_IMPORTED_MODULE_1__.nextTaskStep)(nextStep, task, true);
        select.value = optionToSelect.value;
        saveButton.click();
    });
}


/***/ }),

/***/ "./src/lib/task.ts":
/*!*************************!*\
  !*** ./src/lib/task.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "getCurrentTask": () => (/* binding */ getCurrentTask),
/* harmony export */   "getHeavyData": () => (/* binding */ getHeavyData),
/* harmony export */   "handleTasks": () => (/* binding */ handleTasks),
/* harmony export */   "nextTaskStep": () => (/* binding */ nextTaskStep),
/* harmony export */   "removeCurrentTask": () => (/* binding */ removeCurrentTask),
/* harmony export */   "removeHeavyData": () => (/* binding */ removeHeavyData),
/* harmony export */   "setCurrentTask": () => (/* binding */ setCurrentTask),
/* harmony export */   "setHeavyData": () => (/* binding */ setHeavyData),
/* harmony export */   "setNewTask": () => (/* binding */ setNewTask),
/* harmony export */   "setStep": () => (/* binding */ setStep),
/* harmony export */   "taskMap": () => (/* binding */ taskMap)
/* harmony export */ });
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! localforage */ "./node_modules/.pnpm/localforage@1.10.0/node_modules/localforage/dist/localforage.js");
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(localforage__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_TaskWindow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/TaskWindow */ "./src/components/TaskWindow.ts");
/* harmony import */ var _tasks_addOtherPrests__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../tasks/addOtherPrests */ "./src/tasks/addOtherPrests.ts");
/* harmony import */ var _tasks_applyContract__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../tasks/applyContract */ "./src/tasks/applyContract.ts");
/* harmony import */ var _tasks_applyPercentFacturation__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../tasks/applyPercentFacturation */ "./src/tasks/applyPercentFacturation.ts");
/* harmony import */ var _tasks_changeMotive__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../tasks/changeMotive */ "./src/tasks/changeMotive.ts");
/* harmony import */ var _tasks_fillContractClasses__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../tasks/fillContractClasses */ "./src/tasks/fillContractClasses.ts");
/* harmony import */ var _tasks_goToContracts__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../tasks/goToContracts */ "./src/tasks/goToContracts.ts");
/* harmony import */ var _tasks_removeDACPrest__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../tasks/removeDACPrest */ "./src/tasks/removeDACPrest.ts");
/* harmony import */ var _tasks_test__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../tasks/test */ "./src/tasks/test.ts");
/* harmony import */ var _tasks_stepContracts__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../tasks/stepContracts */ "./src/tasks/stepContracts.ts");
/* harmony import */ var _tasks_removeEndDate__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../tasks/removeEndDate */ "./src/tasks/removeEndDate.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};












const taskMap = {
    applyContract: _tasks_applyContract__WEBPACK_IMPORTED_MODULE_3__.applyContractTaskParams,
    test: _tasks_test__WEBPACK_IMPORTED_MODULE_9__.testTaskParams,
    fillContractClasses: _tasks_fillContractClasses__WEBPACK_IMPORTED_MODULE_6__.fillContractClassesTaskParams,
    applyPercentFacturation: _tasks_applyPercentFacturation__WEBPACK_IMPORTED_MODULE_4__.applyPercentFacturationTaskParams,
    goToContracts: _tasks_goToContracts__WEBPACK_IMPORTED_MODULE_7__.goToContractsTaskParams,
    removeEndDate: _tasks_removeEndDate__WEBPACK_IMPORTED_MODULE_11__.removeEndDateTaskParams,
    addOtherPrest: _tasks_addOtherPrests__WEBPACK_IMPORTED_MODULE_2__.addOtherPrestTaskParams,
    removeDACPrest: _tasks_removeDACPrest__WEBPACK_IMPORTED_MODULE_8__.removeDACPrestTaskParams,
    changeMotive: _tasks_changeMotive__WEBPACK_IMPORTED_MODULE_5__.changeMotiveTaskParams,
    stepContracts: _tasks_stepContracts__WEBPACK_IMPORTED_MODULE_10__.stepContractsTaskParams,
};
// CONFIG
// const STEP_BY_STEP = true;
const STEP_BY_STEP = false;
function handleTasks() {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        const [task, shouldKillTask] = yield Promise.all([
            getCurrentTask(),
            localforage__WEBPACK_IMPORTED_MODULE_0___default().getItem("LTShouldStopTask"),
        ]);
        //kill task
        if (shouldKillTask) {
            yield removeCurrentTask();
            yield localforage__WEBPACK_IMPORTED_MODULE_0___default().removeItem("LTShouldStopTask");
            return;
        }
        (0,_components_TaskWindow__WEBPACK_IMPORTED_MODULE_1__.refreshTaskWindow)(task);
        if (!task) {
            console.info("no task");
            return;
        }
        if (task.isPaused) {
            console.info(`task ${task.name} is paused`, task);
            return;
        }
        console.info(`handling task ${task.name}, step ${task.stepName}`, task);
        try {
            yield taskMap[task.name].taskFn(task);
        }
        catch (e) {
            const brokenTask = yield getCurrentTask();
            console.error(`An error occured in the task ${task.name} at step ${task.stepName}. Pausing the task.`, e, task, brokenTask);
            if (brokenTask)
                yield setCurrentTask(Object.assign(Object.assign({}, brokenTask), { isPaused: true, lastMessage: (_a = e === null || e === void 0 ? void 0 : e.toString) === null || _a === void 0 ? void 0 : _a.call(e) }));
        }
    });
}
function setCurrentTask(task) {
    return __awaiter(this, void 0, void 0, function* () {
        yield localforage__WEBPACK_IMPORTED_MODULE_0___default().setItem("LTCurrentTask", task);
        (0,_components_TaskWindow__WEBPACK_IMPORTED_MODULE_1__.refreshTaskWindow)(task);
        return task;
    });
}
function getCurrentTask() {
    return __awaiter(this, void 0, void 0, function* () {
        return yield localforage__WEBPACK_IMPORTED_MODULE_0___default().getItem("LTCurrentTask");
    });
}
window.getCurrentTask = getCurrentTask;
function removeCurrentTask() {
    return __awaiter(this, void 0, void 0, function* () {
        yield Promise.all([localforage__WEBPACK_IMPORTED_MODULE_0___default().removeItem("LTCurrentTask"), removeHeavyData()]);
        (0,_components_TaskWindow__WEBPACK_IMPORTED_MODULE_1__.refreshTaskWindow)(null);
    });
}
function setHeavyData(value) {
    return __awaiter(this, void 0, void 0, function* () {
        yield localforage__WEBPACK_IMPORTED_MODULE_0___default().setItem("LTHeavyData", value);
    });
}
function getHeavyData() {
    return __awaiter(this, void 0, void 0, function* () {
        return yield localforage__WEBPACK_IMPORTED_MODULE_0___default().getItem("LTHeavyData");
    });
}
function removeHeavyData() {
    return __awaiter(this, void 0, void 0, function* () {
        yield localforage__WEBPACK_IMPORTED_MODULE_0___default().removeItem("LTHeavyData");
    });
}
function setNewTask(name, sharedData, heavyData, description) {
    return __awaiter(this, void 0, void 0, function* () {
        if (yield getCurrentTask()) {
            alert("Impossible de démarrer une nouvelle tâche. Une tâche est déjà en cours.");
            throw new Error("a task is already running");
        }
        const task = {
            name,
            description,
            stepName: "start",
            startedAt: Date.now(),
            stepStartedAt: Date.now(),
            isPaused: false,
            sharedData,
        };
        yield Promise.all([setCurrentTask(task), setHeavyData(heavyData)]);
        handleTasks();
        return task;
    });
}
function setStep(stepName) {
    return __awaiter(this, void 0, void 0, function* () {
        const task = yield getCurrentTask();
        if (!task)
            throw new Error("No current task");
        return yield nextTaskStep(stepName, task);
    });
}
window.icareTools = Object.assign(Object.assign({}, window.icareTools), { setNewTask,
    setStep });
function nextTaskStep(stepName, task, willReloadPage = false) {
    return __awaiter(this, void 0, void 0, function* () {
        task = Object.assign(Object.assign({}, task), { stepName, stepStartedAt: Date.now() });
        if (STEP_BY_STEP)
            task = Object.assign(Object.assign({}, task), { isPaused: true, lastMessage: "Step by step..." });
        task = yield setCurrentTask(task);
        if (!willReloadPage)
            handleTasks();
        return task;
    });
}


/***/ }),

/***/ "./src/lib/url.ts":
/*!************************!*\
  !*** ./src/lib/url.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "urlCheck": () => (/* binding */ urlCheck),
/* harmony export */   "urlCheckOrGo": () => (/* binding */ urlCheckOrGo)
/* harmony export */ });
function urlCheckOrGo(url, exclude) {
    if (urlCheck(url, exclude))
        return true;
    window.location.href = url;
    return false;
}
function urlCheck(url, exclude) {
    if (typeof url === "string")
        url = [url];
    if (exclude && window.location.href.includes(exclude))
        return false;
    return url.some((u) => window.location.href.includes(u));
}


/***/ }),

/***/ "./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "namedLog": () => (/* binding */ namedLog),
/* harmony export */   "objectContainsKeys": () => (/* binding */ objectContainsKeys)
/* harmony export */ });
function namedLog(values) {
    Object.entries(values).forEach(([n, v]) => console.log(n, v));
}
function objectContainsKeys(obj, keys) {
    const objKeys = Object.keys(obj);
    return keys.every((k) => objKeys.includes(k.toString()));
}


/***/ }),

/***/ "./src/tasks/addOtherPrests.ts":
/*!*************************************!*\
  !*** ./src/tasks/addOtherPrests.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "addOtherPrestTaskParams": () => (/* binding */ addOtherPrestTaskParams)
/* harmony export */ });
/* harmony import */ var _components_WindowAddOtherPrestSection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WindowAddOtherPrestSection */ "./src/components/WindowAddOtherPrestSection.ts");
/* harmony import */ var _lib_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/async */ "./src/lib/async.ts");
/* harmony import */ var _lib_checks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/checks */ "./src/lib/checks.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







function addOtherPrestTask(task) {
    var _a, _b;
    return __awaiter(this, void 0, void 0, function* () {
        (0,_lib_checks__WEBPACK_IMPORTED_MODULE_2__.errorIfIcareTools)();
        const currentContractId = task.sharedData.contractIds[0];
        const currentContract = currentContractId
            ? task.sharedData.contracts[currentContractId]
            : undefined;
        (0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.namedLog)({ currentContract });
        switch (task.stepName) {
            case "start": {
                if (task.sharedData.contractIds.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("success", task);
                    return;
                }
                const totalContracts = Object.keys(task.sharedData.contracts).length;
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("goToContract", Object.assign(Object.assign({}, task), { lastMessage: `id contrat: ${currentContractId}\n${totalContracts - task.sharedData.contractIds.length + 1}/${totalContracts}` }));
                return;
            }
            case "goToContract": {
                //go to contract url
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheckOrGo)(`/icare/Be/VertragEdit.do?method=main&aktuelle=true&theVerId=${currentContractId}`)) {
                    return;
                }
                const confirmBox = document.querySelector("#trotzdem");
                if (confirmBox) {
                    //confirm page
                    yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("addPrestation", task, true);
                    confirmBox.checked = true;
                    (_a = confirmBox.form) === null || _a === void 0 ? void 0 : _a.submit();
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("addPrestation", task);
                return;
            }
            case "addPrestation": {
                //check page, I don't check the contract id because I don't have all day. may cause issues in the future ¯\_(ツ)_/¯
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)(`/icare/Be/VertragEdit.do`)) {
                    return;
                }
                //click on "other prestations" tab
                const tabTitle = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#ui-id-9");
                tabTitle.click();
                //show prest form
                const newPrestSelect = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#ui-id-10 form[name=PlatzierungNewForm] #al-platzierungstyp-new");
                newPrestSelect.value = "1282"; //Aide individuelle B (125.-)
                (_b = newPrestSelect.onchange) === null || _b === void 0 ? void 0 : _b.call(newPrestSelect, {}); //the event handler doesn't use the event parameter
                const newPrestForm = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#ui-id-10 form#al-form");
                yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.async_setTimeout)(100); //to allow the form to load
                //set start date
                const startDateInput = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => newPrestForm.querySelector("#al-beginn"));
                startDateInput.value = "01.11.2022";
                //set end date
                const endDateInput = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => newPrestForm.querySelector("#al-ende"));
                endDateInput.value = "30.11.2022";
                //click on save
                const saveButton = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => newPrestForm.querySelector("button[type=submit].btn-success"));
                saveButton.click();
                //wait for success message
                try {
                    yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => {
                        const savedBox = document.querySelector("#saved");
                        return (savedBox === null || savedBox === void 0 ? void 0 : savedBox.style.visibility) === "visible" ? savedBox : null;
                    });
                }
                catch (e) {
                    throw new Error(`L'enregistrement automatique de ${currentContractId} n'a pas fonctionné, continuez la tâche pour réessayer ou faites le manuellement et passez au contrat suivant`);
                }
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", task);
                return;
            }
            case "endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractIds: task.sharedData.contractIds.slice(1), doneContracts: [
                            ...task.sharedData.doneContracts,
                            ...(currentContract ? [currentContract] : []),
                        ] }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("start", newTask);
                return;
            }
            case "success": {
                alert("Tâche terminée!");
                console.log("contrats terminés", task.sharedData.doneContracts);
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.removeCurrentTask)();
                return;
            }
        }
    });
}
const addOtherPrestTaskParams = {
    taskFn: addOtherPrestTask,
    windowSectionComponent: _components_WindowAddOtherPrestSection__WEBPACK_IMPORTED_MODULE_0__.WindowAddOtherPrestSection,
    actionsElems: [
        (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_4__.createElem)("button", {
            onclick(e) {
                return __awaiter(this, void 0, void 0, function* () {
                    e.stopPropagation();
                    if (!confirm("Êtes vous sûr de vouloir passer au contrat suivant?"))
                        return;
                    const task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.getCurrentTask)();
                    if (!task)
                        return;
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", Object.assign(Object.assign({}, task), { isPaused: false }));
                });
            },
        }, "Passer au contrat suivant"),
    ],
};


/***/ }),

/***/ "./src/tasks/applyContract.ts":
/*!************************************!*\
  !*** ./src/tasks/applyContract.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "applyContractTaskParams": () => (/* binding */ applyContractTaskParams)
/* harmony export */ });
/* harmony import */ var _components_WindowApplyContractSection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WindowApplyContractSection */ "./src/components/WindowApplyContractSection.ts");
/* harmony import */ var _lib_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/async */ "./src/lib/async.ts");
/* harmony import */ var _lib_checks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/checks */ "./src/lib/checks.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






function applyContractsTaskFn(task) {
    var _a, _b;
    return __awaiter(this, void 0, void 0, function* () {
        (0,_lib_checks__WEBPACK_IMPORTED_MODULE_2__.errorIfIcareTools)();
        const currentId = task.sharedData.contractIdsToHandle[0];
        switch (task.stepName) {
            case "start": {
                if (task.sharedData.contractIdsToHandle.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("success", task);
                    return;
                }
                const contractsCount = Object.keys(task.sharedData.contracts).length;
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("taskContractPageStart", Object.assign(Object.assign({}, task), { lastMessage: `id contrat: ${currentId}\n${contractsCount - task.sharedData.contractIdsToHandle.length + 1}/${contractsCount}` }));
                return;
            }
            case "taskContractPageStart": {
                const contractToApply = task.sharedData.contracts[currentId];
                if (contractToApply["c fin"] === undefined) {
                    //next step
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", task);
                    return;
                }
                //go to contract url
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheckOrGo)(`/icare/Be/VertragEdit.do?method=main&aktuelle=true&theVerId=${currentId}`)) {
                    return;
                }
                const confirmBox = document.querySelector("#trotzdem");
                if (confirmBox) {
                    //confirm page
                    yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("contractPageFillForm", task, true);
                    confirmBox.checked = true;
                    (_a = confirmBox.form) === null || _a === void 0 ? void 0 : _a.submit();
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("contractPageFillForm", task);
                return;
            }
            case "contractPageFillForm": {
                //check page, I don't check the contract id because I don't have all day. may cause issues in the future ¯\_(ツ)_/¯
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)(`/icare/Be/VertragEdit.do`)) {
                    return;
                }
                const currentContract = task.sharedData.contracts[currentId];
                let shouldSave = false;
                if (currentContract["c fin"] !== undefined) {
                    shouldSave = true;
                    //change end date
                    const endDateInput = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("input#verEnde");
                    endDateInput.value = currentContract["c fin"];
                }
                if (shouldSave) {
                    //ASYNC GARBAGE: wait for success on the same page
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("contractPageConfirmSave", task, true); //AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
                    //click on save
                    const submitButton = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("form[name=VertragEditForm] button[type=submit].btn-success");
                    submitButton.click();
                    // wait for success message
                    try {
                        yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => {
                            const savedBox = document.querySelector("#saved");
                            return (savedBox === null || savedBox === void 0 ? void 0 : savedBox.style.visibility) === "visible" ? savedBox : null;
                        }, 10, 500);
                    }
                    catch (e) {
                        //just save the error
                        task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.setCurrentTask)(Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { failedSavesIds: [...((_b = task.sharedData.failedSavesIds) !== null && _b !== void 0 ? _b : []), currentId] }) }));
                        // throw new Error(
                        //   `L'enregistrement automatique de ${currentId} n'a pas fonctionné, continuez la tâche pour réessayer ou faites le manuellement et passez au contrat suivant`
                        // );
                    }
                }
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", task);
                return;
            }
            case "contractPageConfirmSave": {
                //WARNING: asynchronous step, don't update the task here!
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)("/icare/Be/PlatzierungVertragPrepare.do"))
                    return;
                const okButton = document.querySelector("form[name=VertragEditForm] input.btn.btn-primary");
                okButton === null || okButton === void 0 ? void 0 : okButton.click();
                return;
            }
            case "endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractIdsToHandle: task.sharedData.contractIdsToHandle.slice(1) }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("start", newTask);
                return;
            }
            case "success": {
                console.info("failed saves:", task.sharedData.failedSavesIds);
                alert("Tâche terminée!");
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.removeCurrentTask)();
                return;
            }
        }
    });
}
const applyContractTaskParams = {
    taskFn: applyContractsTaskFn,
    windowSectionComponent: _components_WindowApplyContractSection__WEBPACK_IMPORTED_MODULE_0__.WindowApplyContractSection,
    actionsElems: [
        (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_4__.createElem)("button", {
            onclick(e) {
                return __awaiter(this, void 0, void 0, function* () {
                    e.stopPropagation();
                    if (!confirm("Êtes vous sûr de vouloir passer au contrat suivant?"))
                        return;
                    const task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.getCurrentTask)();
                    if (!task)
                        return;
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", Object.assign(Object.assign({}, task), { isPaused: false }));
                });
            },
        }, "Passer au contrat suivant"),
    ],
};


/***/ }),

/***/ "./src/tasks/applyPercentFacturation.ts":
/*!**********************************************!*\
  !*** ./src/tasks/applyPercentFacturation.ts ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "applyPercentFacturationTaskParams": () => (/* binding */ applyPercentFacturationTaskParams)
/* harmony export */ });
/* harmony import */ var _components_WindowApplyPercentFacturation__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WindowApplyPercentFacturation */ "./src/components/WindowApplyPercentFacturation.ts");
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/errors */ "./src/lib/errors.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};




function applyPercentFacturationTaskFn(task) {
    var _a, _b, _c, _d, _e, _f, _g;
    return __awaiter(this, void 0, void 0, function* () {
        const locale = window.locale;
        if (locale && locale.substring(0, 2) !== "fr") {
            alert("Cette tâche supporte uniquement le site en français.\n" +
                "Changez la langue et continuez la tâche");
            throw new Error("Cette tâche supporte uniquement le site en français.");
        }
        const factureId = task.sharedData.idsToHandle[0];
        const currentFacture = task.sharedData.factures[factureId];
        switch (task.stepName) {
            case "start": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_3__.urlCheck)("/icare/Ad/FjEdit.do")) {
                    alert("Mauvaise page de départ, naviguez sur la liste des facturation puis continuez la tâche");
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.Warning("Mauvaise page de départ.");
                }
                //get factures from list
                const TRs = [
                    ...document.querySelectorAll("#jqFjDisplayTable > tbody > tr"),
                ];
                const factures = Object.fromEntries(TRs.map((tr) => {
                    var _a, _b;
                    const cells = tr.querySelectorAll("td");
                    const numberLink = cells[1].querySelector("a");
                    if (!numberLink)
                        throw new Error("Imposteur de lien...");
                    const id = (_b = (_a = numberLink.textContent) === null || _a === void 0 ? void 0 : _a.trim()) !== null && _b !== void 0 ? _b : "";
                    const href = numberLink.href;
                    const facture = { id, href };
                    return [id, facture];
                }));
                const idsToHandle = Object.keys(factures);
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { factures,
                        idsToHandle }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("startOfLoop", newTask);
                return;
            }
            case "startOfLoop": {
                if (task.sharedData.idsToHandle.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("success", task);
                    return;
                }
                const facturesCount = Object.keys(task.sharedData.factures).length;
                const currentIndex = facturesCount - task.sharedData.idsToHandle.length + 1;
                const taskWithMessage = Object.assign(Object.assign({}, task), { lastMessage: `Info: Facture courante: ${factureId} (${currentIndex}/${facturesCount})` });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("collectOrders", taskWithMessage);
                return;
            }
            case "collectOrders": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_3__.urlCheckOrGo)(currentFacture.href)) {
                    return;
                }
                const tbody = document.querySelector("#fakPosTable > tbody");
                const rows = [...((_a = tbody === null || tbody === void 0 ? void 0 : tbody.querySelectorAll("tr[class=even], tr[class=odd]")) !== null && _a !== void 0 ? _a : [])];
                const orders = rows.map((row) => {
                    const inputs = getFacInputs(row);
                    const priceAsCents = Math.round(parseFloat(inputs.price.value) * 100);
                    if (isNaN(priceAsCents))
                        throw new Error("invalid price");
                    const orderNumber = parseInt(inputs.orderId.value);
                    if (isNaN(orderNumber))
                        throw new Error("order number is not a number " + inputs.orderId.value);
                    const order = {
                        number: orderNumber,
                        text: inputs.text.value,
                        compteDeb: inputs.compteDeb.value,
                        ctrCostDeb: inputs.ctrCostDeb.value,
                        compteCred: inputs.compteCred.value,
                        ctrCostCred: inputs.ctrCostCred.value,
                        priceAsCents,
                    };
                    return order;
                });
                //TODO: use a real algorythm here
                const groupsOfOrders = [orders];
                const newOrders = groupsOfOrders.map((orderGroup) => {
                    const lastOrder = orderGroup.at(-1);
                    if (!lastOrder)
                        throw new Error("missing order");
                    const sumAsCents = orderGroup.reduce((s, o) => s + o.priceAsCents, 0);
                    const priceWithPercentAsCents = sumAsCents * 0.2; //APPLY 20%
                    const order = {
                        number: lastOrder.number + 1,
                        text: task.sharedData.text,
                        compteDeb: lastOrder.compteDeb,
                        ctrCostDeb: lastOrder.ctrCostDeb,
                        compteCred: lastOrder.compteCred,
                        ctrCostCred: lastOrder.ctrCostCred,
                        priceAsCents: priceWithPercentAsCents,
                    };
                    return order;
                });
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { factures: Object.assign(Object.assign({}, task.sharedData.factures), { [factureId]: Object.assign(Object.assign({}, currentFacture), { orders, newOrders: newOrders, newOrderIndex: 0 }) }) }) });
                // nextTaskStep("newOrder_startOfLoop", newTask);
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("dummyStep", newTask); //TODO: ignore creation for now
                return;
            }
            case "newOrder_startOfLoop": {
                if (((_b = currentFacture.newOrderIndex) !== null && _b !== void 0 ? _b : Infinity) >= ((_d = (_c = currentFacture.newOrders) === null || _c === void 0 ? void 0 : _c.length) !== null && _d !== void 0 ? _d : 0)) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("dummyStep", task);
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("newOrder_fillOrder", task);
                return;
            }
            case "newOrder_fillOrder": {
                const orderToFill = (_e = currentFacture.newOrders) === null || _e === void 0 ? void 0 : _e[(_f = currentFacture.newOrderIndex) !== null && _f !== void 0 ? _f : Infinity];
                if (!orderToFill)
                    throw new Error("no order to fill");
                const table = [...document.querySelectorAll("#fakPosTable")].at(-1);
                if (!table)
                    throw new Error("table not found");
                const inputs = getFacInputs(table);
                inputs.orderId.value = orderToFill.number.toString();
                inputs.text.value = orderToFill.text;
                inputs.compteDeb.value = orderToFill.compteDeb;
                inputs.ctrCostDeb.value = orderToFill.ctrCostDeb;
                inputs.compteCred.value = orderToFill.compteCred;
                inputs.ctrCostCred.value = orderToFill.ctrCostCred;
                inputs.price.value = (orderToFill.priceAsCents / 100).toString();
                const submitButton = document.querySelector("div.col > div > button[type=button][onclick].btn-success");
                if (!submitButton)
                    throw new Error("no submit button");
                submitButton.click();
                //TODO: instant execution may cause problems with saving.
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("newOrder_endOfLoop", task);
                return;
            }
            case "newOrder_endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { factures: Object.assign(Object.assign({}, task.sharedData.factures), { [factureId]: Object.assign(Object.assign({}, task.sharedData.factures[factureId]), { newOrderIndex: ((_g = task.sharedData.factures[factureId].newOrderIndex) !== null && _g !== void 0 ? _g : 0) + 1 }) }) }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("newOrder_startOfLoop", newTask);
                return;
            }
            case "dummyStep": {
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("endOfLoop", task);
                return;
            }
            case "endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { idsToHandle: task.sharedData.idsToHandle.slice(1) }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("startOfLoop", newTask);
                return;
            }
            case "success": {
                alert("Terminé!");
                const allOrders = Object.fromEntries(Object.entries(task.sharedData.factures).flatMap(([facId, fac]) => { var _a; return ((_a = fac.orders) !== null && _a !== void 0 ? _a : []).map((or) => [or.number, or]); }));
                console.table(allOrders);
                console.log("done", task.sharedData);
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.removeCurrentTask)();
                return;
            }
        }
    });
}
function getFacInputs(parent) {
    const TDs = parent.querySelectorAll("td[valign]");
    const orderId = TDs[0].querySelector("form[name=FakturaPositionEditForm] > input.input[name=fpReihenfolge]");
    const text = TDs[1].querySelector("textarea[name=fpText]");
    const compteDeb = TDs[2].querySelector("textarea[name=fpKonto]");
    const ctrCostDeb = TDs[3].querySelector("textarea[name=fpKostSt]");
    const compteCred = TDs[4].querySelector("textarea[name=fpKontoHaben]");
    const ctrCostCred = TDs[5].querySelector("textarea[name=fpKostStHaben]");
    const price = TDs[9].querySelector("input[name=fpPreis]");
    if (!orderId || !text || !compteDeb || !ctrCostDeb || !compteCred || !ctrCostCred || !price) {
        throw new Error("Valeurs introuvables");
    }
    return {
        orderId,
        text,
        compteDeb,
        ctrCostDeb,
        compteCred,
        ctrCostCred,
        price,
    };
}
const applyPercentFacturationTaskParams = {
    taskFn: applyPercentFacturationTaskFn,
    windowSectionComponent: _components_WindowApplyPercentFacturation__WEBPACK_IMPORTED_MODULE_0__.WindowApplyPercentFacturation,
};


/***/ }),

/***/ "./src/tasks/changeMotive.ts":
/*!***********************************!*\
  !*** ./src/tasks/changeMotive.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "changeMotiveTaskFn": () => (/* binding */ changeMotiveTaskFn),
/* harmony export */   "changeMotiveTaskParams": () => (/* binding */ changeMotiveTaskParams)
/* harmony export */ });
/* harmony import */ var _components_WindowChangeMotiveSection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WindowChangeMotiveSection */ "./src/components/WindowChangeMotiveSection.ts");
/* harmony import */ var _lib_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/async */ "./src/lib/async.ts");
/* harmony import */ var _lib_checks__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/checks */ "./src/lib/checks.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};






function changeMotiveTaskFn(task) {
    var _a, _b;
    return __awaiter(this, void 0, void 0, function* () {
        (0,_lib_checks__WEBPACK_IMPORTED_MODULE_2__.errorIfIcareTools)();
        const currentId = task.sharedData.contractIds[0];
        switch (task.stepName) {
            case "start": {
                if (task.sharedData.contractIds.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("success", task);
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("goToContract", Object.assign(Object.assign({}, task), { lastMessage: `id contrat: ${currentId}\n${task.sharedData.contractsCount - task.sharedData.contractIds.length + 1}/${task.sharedData.contractsCount}` }));
                return;
            }
            case "goToContract": {
                //go to contract url
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheckOrGo)(`/icare/Be/VertragEdit.do?method=main&aktuelle=true&theVerId=${currentId}`)) {
                    return;
                }
                const confirmBox = document.querySelector("#trotzdem");
                if (confirmBox) {
                    //confirm page
                    yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("updateMotive", task, true);
                    confirmBox.checked = true;
                    (_a = confirmBox.form) === null || _a === void 0 ? void 0 : _a.submit();
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("updateMotive", task);
                return;
            }
            case "updateMotive": {
                //check page, I don't check the contract id because I don't have all day. may cause issues in the future ¯\_(ツ)_/¯
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)(`/icare/Be/VertragEdit.do`)) {
                    return;
                }
                //change motive
                const motiveSelect = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("select#motivId");
                motiveSelect.value = task.sharedData.motiveValue.toString();
                //ASYNC GARBAGE: wait for success on the same page
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("confirmSave", task, true); //AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
                //click on save
                const submitButton = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("form[name=VertragEditForm] button[type=submit].btn-success");
                submitButton.click();
                //wait for success message
                try {
                    yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => {
                        const savedBox = document.querySelector("#saved");
                        return (savedBox === null || savedBox === void 0 ? void 0 : savedBox.style.visibility) === "visible" ? savedBox : null;
                    }, undefined, 100);
                }
                catch (e) {
                    //just save the error
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.setCurrentTask)(Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { failedSavesIds: [...((_b = task.sharedData.failedSavesIds) !== null && _b !== void 0 ? _b : []), currentId] }) }));
                    // throw new Error(
                    //   `L'enregistrement automatique de ${currentId} n'a pas fonctionné, continuez la tâche pour réessayer ou faites le manuellement et passez au contrat suivant`
                    // );
                }
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", task);
                //   throw new Warning("wait");
                return;
            }
            case "confirmSave": {
                //WARNING: asynchronous step, don't update the task here!
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)("/icare/Be/PlatzierungVertragPrepare.do"))
                    return;
                const okButton = document.querySelector("form[name=VertragEditForm] input.btn.btn-primary");
                okButton === null || okButton === void 0 ? void 0 : okButton.click();
            }
            case "endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractIds: task.sharedData.contractIds.slice(1) }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("start", newTask);
                return;
            }
            case "success": {
                console.info("failed saves:", task.sharedData.failedSavesIds);
                alert("Tâche terminée!");
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.removeCurrentTask)();
                return;
            }
        }
    });
}
const changeMotiveTaskParams = {
    taskFn: changeMotiveTaskFn,
    windowSectionComponent: _components_WindowChangeMotiveSection__WEBPACK_IMPORTED_MODULE_0__.WindowChangeMotiveSection,
    actionsElems: [
        (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_4__.createElem)("button", {
            onclick(e) {
                return __awaiter(this, void 0, void 0, function* () {
                    e.stopPropagation();
                    if (!confirm("Êtes vous sûr de vouloir passer au contrat suivant?"))
                        return;
                    const task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.getCurrentTask)();
                    if (!task)
                        return;
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", Object.assign(Object.assign({}, task), { isPaused: false }));
                });
            },
        }, "Passer au contrat suivant"),
    ],
};


/***/ }),

/***/ "./src/tasks/fillContractClasses.ts":
/*!******************************************!*\
  !*** ./src/tasks/fillContractClasses.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "fillContractClassesTaskParams": () => (/* binding */ fillContractClassesTaskParams)
/* harmony export */ });
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! localforage */ "./node_modules/.pnpm/localforage@1.10.0/node_modules/localforage/dist/localforage.js");
/* harmony import */ var localforage__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(localforage__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _components_WindowFillContractsClassesSection__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../components/WindowFillContractsClassesSection */ "./src/components/WindowFillContractsClassesSection.ts");
/* harmony import */ var _lib_async__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/async */ "./src/lib/async.ts");
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/errors */ "./src/lib/errors.ts");
/* harmony import */ var _lib_icareInteractions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/icareInteractions */ "./src/lib/icareInteractions.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};








function fillContractClassesTaskFn(task) {
    var _a, _b, _c, _d, _e;
    return __awaiter(this, void 0, void 0, function* () {
        const locale = window.locale;
        if (locale && locale.substring(0, 2) !== "fr") {
            alert("Cette tâche supporte uniquement le site en français.\n" +
                "Changez la langue et continuez la tâche");
            throw new Error("Cette tâche supporte uniquement le site en français.");
        }
        if (window.HAS_ICARE_HELPERS_LOADED) {
            alert("Cette tâche ne peut pas fonctionner quand le script 'icare-helpers' est chargé. Désactivez le d'abord.");
            throw new Error("Cette tâche ne supporte pas le script 'icare-helpers'");
        }
        if (!window.cbc)
            window.cbc = (mode = true) => __awaiter(this, void 0, void 0, function* () {
                const lateTask = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.getCurrentTask)();
                if (!lateTask)
                    return;
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractByContractMode: mode }), lastMessage: "Mode CBC activé!" });
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.setCurrentTask)(newTask);
            });
        const personId = task.sharedData.contractsIds[0];
        const person = task.sharedData.contracts[personId];
        switch (task.stepName) {
            case "start": {
                if (task.sharedData.contractsIds.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("success", task);
                    return;
                }
                const contractsCount = Object.keys(task.sharedData.contracts).length;
                const currentContractIndex = contractsCount - task.sharedData.contractsIds.length + 1;
                const taskWithMessage = Object.assign(Object.assign({}, task), { lastMessage: `Info: Personne courante: ${personId} (${currentContractIndex}/${contractsCount})` });
                //skip to step if person already known
                if (person["e naissance"])
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("useDataFromAllPeople", taskWithMessage);
                else
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("searchPerson", taskWithMessage);
                return;
            }
            case "searchPerson": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheckOrGo)("/icare/Be/PersonenList.do?suchen=firstSearch"))
                    return;
                const resetFilterBtn = document.querySelector("button.btn-danger.float-left");
                resetFilterBtn === null || resetFilterBtn === void 0 ? void 0 : resetFilterBtn.click();
                const personIdInput = document.querySelector("#personentyp[name=perId]");
                if (!personIdInput)
                    throw new Error("person input not found");
                personIdInput.value = personId;
                const submitButton = document.querySelector("form#filterForm .float-right button[type=submit]");
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("findPerson", task, true);
                submitButton === null || submitButton === void 0 ? void 0 : submitButton.click();
                return;
            }
            case "findPerson": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheck)("/icare/Be/PersonenList.do", "?suchen=firstSearch"))
                    return;
                const personLines = document.querySelectorAll(".dataTable.jqResultList > tbody > tr");
                if (personLines.length !== 1)
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_3__.Warning(`Personne précise introuvable. id:${personId}. ${personLines.length} résultat(s)`);
                const personInfosTDs = personLines[0].getElementsByTagName("td");
                const foundId = (_a = personInfosTDs[2].textContent) === null || _a === void 0 ? void 0 : _a.trim();
                const foundBirthday = (_b = personInfosTDs[9].textContent) === null || _b === void 0 ? void 0 : _b.trim();
                if (foundId !== personId) {
                    console.info({ foundId });
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_3__.Warning(`Personne avec id ${personId} introuvable`);
                }
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contracts: Object.assign(Object.assign({}, task.sharedData.contracts), { [personId]: Object.assign(Object.assign({}, task.sharedData.contracts[personId]), { "e naissance": foundBirthday }) }) }) });
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("useDataFromAllPeople", newTask);
                return;
            }
            case "useDataFromAllPeople": {
                const allPeople = (yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.getHeavyData)());
                //find person in people list
                let foundPeople = allPeople.filter((p) => person["e nom"].toLowerCase().includes(p.Nom.trim().toLowerCase()) &&
                    person["e naissance"] === p.DateNaissance);
                if (foundPeople.length === 0)
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_3__.Warning(`${person["e nom"]} ${person["e prenom"]} introuvable dans le fichier`);
                let personIndex = 0;
                if (foundPeople.length > 1) {
                    //search by first name
                    const foundByFirstName = foundPeople.filter((p) => person["e prenom"].toLowerCase().includes(p.Prenom.trim().toLowerCase()));
                    if (foundByFirstName.length > 0)
                        foundPeople = foundByFirstName;
                    //prompt if still not found
                    if (foundPeople.length > 1) {
                        personIndex =
                            (_c = (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_6__.promptIndex)("Personne exacte introuvable.\n" +
                                `Recherche: ${person["e prenom"]} ${person["e nom"]} [${personId}]` +
                                "Veuillez sélectionner la bonne personne:", foundPeople.map((p) => `${p.Prenom} ${p.Nom} ${p.DateNaissance}`))) !== null && _c !== void 0 ? _c : 0;
                    }
                }
                const foundPerson = foundPeople[personIndex];
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contracts: Object.assign(Object.assign({}, task.sharedData.contracts), { [personId]: Object.assign(Object.assign({}, task.sharedData.contracts[personId]), { schoolClass: foundPerson.ClasseCourante, schoolName: foundPerson.BatimentNomOfficiel }) }) }) });
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.setCurrentTask)(newTask);
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("searchContract", task);
                return;
            }
            case "searchContract": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheckOrGo)("/icare/Be/VertragList.do?reset=true"))
                    return;
                const contractIdInput = document.querySelector("input[name=verNr]");
                if (!contractIdInput)
                    throw new Error("contract input not found");
                contractIdInput.value = personId;
                const institutionIdSelect = document.querySelector("select[name=mandantgruppe].select2-offscreen");
                if (!institutionIdSelect)
                    throw new Error("institution input not found");
                const institutionId = person["institution id"].toString();
                institutionIdSelect.value = institutionId;
                if (institutionIdSelect.value !== institutionId) {
                    //store contract not found
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.setCurrentTask)(Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractsNotFound: Object.assign(Object.assign({}, task.sharedData.contractsNotFound), { [personId]: {
                                    fname: person["e prenom"],
                                    lname: person["e nom"],
                                } }) }) }));
                    if (task.sharedData.shouldSkipContractNotFound) {
                        console.info("skipping contract because the institution was not found");
                        (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("endOfLoop", task);
                        return;
                    }
                    alert("La recherche ne peut pas être effectuée car l'institution n'est pas disponible.\n" +
                        "Trouvez et naviguez manuellement sur le contrat puis continuez la tâche.\n" +
                        `Institution: [${person["institution id"]}] ${person.institution} \n` +
                        `Pour: ${person["e prenom"]} ${person["e nom"]} [${personId}]`);
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("openContractEditPage", task, true);
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_3__.Warning(`Institution introuvable:[${institutionId}] "${person.institution}", p-id:${personId}.`);
                }
                const contractForm = document.querySelector("form[name=VertragListeForm]");
                if (!contractForm)
                    throw new Error("contract form not found");
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("findContract", task, true);
                contractForm.submit();
                return;
            }
            case "findContract": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheck)("/icare/Be/VertragList.do", "?reset=true"))
                    return;
                const contractLines = document.querySelectorAll("#ver.dataTable > tbody > tr");
                function getContractLineCells(tr) {
                    var _a, _b, _c;
                    const tds = tr.getElementsByTagName("td");
                    const [id, name, institution, group, dates, clientGroup, internalMessage, deleteDate] = tds;
                    const [startDate, endDate] = (_c = (_b = (_a = dates.textContent) === null || _a === void 0 ? void 0 : _a.trim()) === null || _b === void 0 ? void 0 : _b.split(" - ")) !== null && _c !== void 0 ? _c : [];
                    return {
                        id,
                        name,
                        institution,
                        group,
                        dates,
                        startDate,
                        endDate,
                        clientGroup,
                        internalMessage,
                        deleteDate,
                    };
                }
                let contractCells = undefined;
                //Precise contract not found
                if (contractLines.length !== 1) {
                    //Store contract that wasn't found
                    const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign({}, task.sharedData) });
                    if (contractLines.length === 0)
                        newTask.sharedData.contractsNotFound = Object.assign(Object.assign({}, task.sharedData.contractsNotFound), { [personId]: {
                                fname: person["e prenom"],
                                lname: person["e nom"],
                                count: contractLines.length,
                            } });
                    else
                        newTask.sharedData.contractsDuplicates = Object.assign(Object.assign({}, task.sharedData.contractsDuplicates), { [personId]: {
                                fname: person["e prenom"],
                                lname: person["e nom"],
                                count: contractLines.length,
                            } });
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.setCurrentTask)(newTask);
                    //auto skip if no contract found
                    if (task.sharedData.shouldSkipContractNotFound && contractLines.length === 0) {
                        console.info("skipping contract because it wasn't found.");
                        (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("endOfLoop", task);
                        return;
                    }
                    //select last if multiple results
                    if (task.sharedData.shouldSelectLastContractNotFound) {
                        contractCells = [...contractLines].map(getContractLineCells).reduce((prev, curr) => {
                            const currDate = new Date(curr.startDate.split(".").reverse().join("-"));
                            const prevDate = new Date(prev.startDate.split(".").reverse().join("-"));
                            return currDate > prevDate ? curr : prev;
                        });
                    }
                    else {
                        //prompt user to choose correct contract
                        alert("Contrat précis introuvable.\n" +
                            "Naviguez sur le contrat concerné et/ou continuez la tâche.\n" +
                            `Institution: [${person["institution id"]}] ${person.institution} \n` +
                            `Pour: ${person["e prenom"]} ${person["e nom"]} [${personId}]`);
                        task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("openContractEditPage", task, true);
                        throw new _lib_errors__WEBPACK_IMPORTED_MODULE_3__.Warning(`Contrat précis introuvable. p-id:${personId}. ${contractLines.length} résultat(s)`);
                    }
                }
                else {
                    contractCells = getContractLineCells(contractLines[0]);
                }
                const foundContractId = (_d = contractCells.id.textContent) === null || _d === void 0 ? void 0 : _d.trim();
                if (!(foundContractId === null || foundContractId === void 0 ? void 0 : foundContractId.includes(personId)))
                    throw new Error(`Contrat de la personne ${personId} introuvable. Contrat faux ${foundContractId} trouvé.`);
                const contractLink = contractCells.id.querySelector("a");
                if (!contractLink)
                    throw new Error("contract link not found");
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("openContractEditPage", task, true);
                contractLink.click();
                return;
            }
            case "openContractEditPage": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheck)("/icare/Be/VertragEdit.do?method=main&aktuelle=true&theVerId="))
                    return;
                //check if id is still the same
                const nameAndIdH2 = document.querySelector("#data h2");
                if (!((_e = nameAndIdH2 === null || nameAndIdH2 === void 0 ? void 0 : nameAndIdH2.textContent) === null || _e === void 0 ? void 0 : _e.includes(personId)))
                    throw new Error("L'id du contrat ne correspond pas.");
                const iframe = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_2__.waitForSelector)("iframe[name=klassifizierungframe]");
                if (!iframe)
                    throw new Error("iframe de contrat introuvable");
                const iframeSrc = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_2__.waitForValue)(() => iframe.src || undefined);
                if (!iframeSrc) {
                    console.log("iframe src", iframe.src, iframe);
                    alert("Impossible d'accéder aux modifications. Essayez de recharger la page puis continuez la tâche");
                    throw new Error("url de l'iframe introuvable. id:" + personId);
                }
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("fillContractCollege", task, true);
                window.location.href = iframe.src;
                return;
            }
            case "fillContractCollege": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheck)(["/icare/KlassifizierungSave.do", "/icare/PrepareKlassifizierung.do"]))
                    return;
                yield (0,_lib_icareInteractions__WEBPACK_IMPORTED_MODULE_4__.fillContractData)(task, "Collège", person.schoolName, "fillContractClass");
                /// nextTaskStep("fillContractClass", task, true);
                return;
            }
            case "fillContractClass": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_7__.urlCheck)(["/icare/KlassifizierungSave.do", "/icare/PrepareKlassifizierung.do"]))
                    return;
                yield (0,_lib_icareInteractions__WEBPACK_IMPORTED_MODULE_4__.fillContractData)(task, "Classe et enseignant", person.schoolClass, "endOfLoop");
                /// nextTaskStep("endOfLoop", task, true);
                return;
            }
            case "endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractsIds: task.sharedData.contractsIds.slice(1) }) });
                //step by step check
                if (newTask.sharedData.contractByContractMode) {
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("start", newTask, true);
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_3__.Warning("Mode pas à pas");
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("start", newTask);
                return;
            }
            case "success": {
                console.info("CONTRATS INTROUVABLES:");
                console.table(task.sharedData.contractsNotFound);
                console.info("CONTRATS MULTIPLES:");
                console.table(task.sharedData.contractsDuplicates);
                //store end time
                const endedAt = Date.now();
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.setCurrentTask)(Object.assign(Object.assign({}, task), { endedAt }));
                //store finished task
                (() => __awaiter(this, void 0, void 0, function* () {
                    var _f;
                    const finishedTasks = (_f = (yield localforage__WEBPACK_IMPORTED_MODULE_0___default().getItem("LTFinishedTasks"))) !== null && _f !== void 0 ? _f : [];
                    const cleanTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contracts: {} }) });
                    yield localforage__WEBPACK_IMPORTED_MODULE_0___default().setItem("LTFinishedTasks", [...finishedTasks, cleanTask]);
                }))();
                const elapsedTimeString = new Date(endedAt - task.startedAt).toISOString().substring(11, 19);
                const contractsNotFoundEntries = Object.entries(task.sharedData.contractsNotFound);
                const contractDuplicatesEntries = Object.entries(task.sharedData.contractsDuplicates);
                //display end of task infos
                alert(`Tâche terminée! (en ${elapsedTimeString}) \n` +
                    `[F12] Listes complêtes affichées dans la console\n` +
                    `${contractsNotFoundEntries.length} contrats pas trouvés sur ${Object.keys(task.sharedData.contracts).length}.\n` +
                    contractsNotFoundEntries
                        .map(([id, { fname, lname }], i) => `${i}. [${id}] ${fname} ${lname}`)
                        .join("\n") +
                    `${contractDuplicatesEntries.length} contrats multiples sur ${Object.keys(task.sharedData.contracts).length}.\n` +
                    contractDuplicatesEntries
                        .map(([id, { fname, lname }], i) => `${i}. [${id}] ${fname} ${lname}`)
                        .join("\n"));
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.removeCurrentTask)();
                return;
            }
            default: {
                throw new Error("Étape introuvable");
            }
        }
    });
}
const fillContractClassesTaskParams = {
    taskFn: fillContractClassesTaskFn,
    windowSectionComponent: _components_WindowFillContractsClassesSection__WEBPACK_IMPORTED_MODULE_1__.WindowFillContractsClassesSection,
    actionsElems: [
        (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_6__.createElem)("button", {
            onclick(e) {
                return __awaiter(this, void 0, void 0, function* () {
                    e.stopPropagation();
                    if (!confirm("Êtes vous sûr de vouloir passer au contrat suivant?"))
                        return;
                    const task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.getCurrentTask)();
                    if (!task)
                        return;
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_5__.nextTaskStep)("endOfLoop", Object.assign(Object.assign({}, task), { isPaused: false }));
                });
            },
        }, "Passer au contrat suivant"),
    ],
};


/***/ }),

/***/ "./src/tasks/goToContracts.ts":
/*!************************************!*\
  !*** ./src/tasks/goToContracts.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "goToContractsTaskParams": () => (/* binding */ goToContractsTaskParams)
/* harmony export */ });
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};


function goToContractsTaskFn(task) {
    return __awaiter(this, void 0, void 0, function* () {
        switch (task.stepName) {
            case "start": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_1__.urlCheckOrGo)("/icare/Be/VertragList.do?suchen=firstSearch&reset=true")) {
                    return;
                }
                const contractForm = document.querySelector("form[name=VertragListeForm]");
                if (!contractForm)
                    return;
                const contractIdInput = contractForm.querySelector("input[name=verNr]");
                if (!contractIdInput)
                    return;
                contractIdInput.value = task.sharedData.personId.toString();
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.nextTaskStep)("success", task, true);
                contractForm.submit();
                return;
            }
            case "success": {
                console.info("go to contracts task success");
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.removeCurrentTask)();
                return;
            }
        }
    });
}
const goToContractsTaskParams = {
    taskFn: goToContractsTaskFn,
};


/***/ }),

/***/ "./src/tasks/removeDACPrest.ts":
/*!*************************************!*\
  !*** ./src/tasks/removeDACPrest.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "removeDACPrestTaskParams": () => (/* binding */ removeDACPrestTaskParams)
/* harmony export */ });
/* harmony import */ var _components_WindowRemoveDACPrestSection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WindowRemoveDACPrestSection */ "./src/components/WindowRemoveDACPrestSection.ts");
/* harmony import */ var _lib_async__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/async */ "./src/lib/async.ts");
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/errors */ "./src/lib/errors.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UITools__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/UITools */ "./src/lib/UITools.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};







function removeDACPrestTask(task) {
    var _a, _b, _c, _d;
    return __awaiter(this, void 0, void 0, function* () {
        //check for compatibility
        const locale = window.locale;
        if (locale && locale.substring(0, 2) !== "fr") {
            alert("Cette tâche supporte uniquement le site en français.\n" +
                "Changez la langue et continuez la tâche");
            throw new Error("Cette tâche supporte uniquement le site en français.");
        }
        if (window.HAS_ICARE_HELPERS_LOADED) {
            alert("Cette tâche ne peut pas fonctionner quand le script 'icare-helpers' est chargé. Désactivez le d'abord.");
            throw new Error("Cette tâche ne supporte pas le script 'icare-helpers'");
        }
        const currentContractId = task.sharedData.contractIds[0];
        const currentContract = currentContractId
            ? task.sharedData.contracts[currentContractId]
            : undefined;
        (0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.namedLog)({ currentContract });
        switch (task.stepName) {
            case "start": {
                if (task.sharedData.contractIds.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("success", task);
                    return;
                }
                const totalContracts = Object.keys(task.sharedData.contracts).length;
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("goToContract", Object.assign(Object.assign({}, task), { lastMessage: `id contrat: ${currentContractId}\n${totalContracts - task.sharedData.contractIds.length + 1}/${totalContracts}` }));
                return;
            }
            case "goToContract": {
                //go to contract url
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheckOrGo)(`/icare/Be/VertragEdit.do?method=main&aktuelle=true&theVerId=${currentContractId}`)) {
                    return;
                }
                const confirmBox = document.querySelector("#trotzdem");
                if (confirmBox) {
                    //confirm page
                    yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("removePrestation", task, true);
                    confirmBox.checked = true;
                    (_a = confirmBox.form) === null || _a === void 0 ? void 0 : _a.submit();
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("removePrestation", task);
                return;
            }
            case "removePrestation": {
                //check page, I don't check the contract id because I don't have all day. may cause issues in the future ¯\_(ツ)_/¯
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)(`/icare/Be/VertragEdit.do`)) {
                    return;
                }
                //seems to prevent some fuckups
                yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.async_setTimeout)(200);
                //close icare error dialog
                (_d = (_c = (_b = document
                    .querySelector("#ajaxErrorDialog")) === null || _b === void 0 ? void 0 : _b.parentElement) === null || _c === void 0 ? void 0 : _c.querySelector(".ui-dialog-buttonpane button")) === null || _d === void 0 ? void 0 : _d.click();
                //click on "other prestations" tab
                //idk but it works
                const tabTitle = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#ui-id-9");
                tabTitle.click();
                const clickOnAll = () => __awaiter(this, void 0, void 0, function* () {
                    //click on "all"
                    const buttonAll = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#ui-id-10 input[type=button][name=alle]");
                    buttonAll.click();
                });
                //find prestation to delete
                try {
                    const deleteButton = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)(() => __awaiter(this, void 0, void 0, function* () {
                        var _e;
                        yield clickOnAll();
                        const allPotentialLines = document.querySelectorAll("#ui-id-10 .dataTable table tbody");
                        for (const tbody of allPotentialLines) {
                            const nameInput = tbody.querySelector("input.inputDesable");
                            if ((nameInput === null || nameInput === void 0 ? void 0 : nameInput.value) !== "Redevance Devoirs accompagnés") {
                                continue;
                            }
                            const trashIcon = tbody.querySelector("i.fas.fa-trash-alt");
                            return (_e = trashIcon === null || trashIcon === void 0 ? void 0 : trashIcon.parentElement) !== null && _e !== void 0 ? _e : null;
                        }
                        return null;
                    }), 100, 20 //~2sec
                    );
                    deleteButton.click();
                }
                catch (e) {
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("searchFactJournal", task, true);
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.Warning("Prestation introuvable, supprimez la manuellement et continuez la tâche");
                }
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("confirmPrestDelete", task, true);
                //ASYNC GARBAGE: wait for success on the same page (by counting the trash can icons)
                const getElemsCount = () => document.querySelectorAll("#ui-id-10 i.fas.fa-trash-alt").length;
                const baseElemsCount = getElemsCount();
                try {
                    yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForValue)(() => (getElemsCount() < baseElemsCount ? true : undefined));
                }
                catch (e) {
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("searchFactJournal", task, true);
                    throw new Error(`La supression automatique de la prestation du contrat ${currentContractId} n'a pas fonctionné,\n vérifiez/supprimez la manuellement et continuez la tâche`);
                }
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("searchFactJournal", task);
                return;
            }
            case "confirmPrestDelete": {
                //WARNING: asynchronous step, don't update the task here!
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)("/icare/Ad/PlatzierungLoeschen.do")) {
                    return;
                }
                const okButton = document.querySelector("button.btn.btn-success");
                okButton === null || okButton === void 0 ? void 0 : okButton.click();
                return;
            }
            case "searchFactJournal": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheckOrGo)("/icare/Ad/FjUebersicht.do?neueSuche=neueSuche")) {
                    return;
                }
                const institutionSelect = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("select#fjMandant");
                institutionSelect.value = currentContract["institution id"].toString();
                const yearInput = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("input#fjJahr");
                yearInput.value = (2022).toString();
                const nameInput = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("input#fjBezeichnung");
                nameInput.value = "DAC automne 2022";
                const submitButton = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("button#searchButton");
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("findFactJournal", task, true);
                submitButton.click();
                return;
            }
            case "findFactJournal": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_5__.urlCheck)("/icare/Ad/FjUebersicht.do")) {
                    return;
                }
                const fjLink = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelectorAll)("table#fj > tbody > tr > td.link > a", 2);
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("deleteFact", task, true);
                if (fjLink.length > 2) {
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.Warning("Trop de résultats! naviguez sur le bon et continuez la tâche");
                }
                fjLink[0].click();
                return;
            }
            case "deleteFact": {
                const factLines = document.querySelectorAll("table#jqFjDisplayTable > tbody > tr");
                const foundLines = [...factLines].filter((line) => {
                    var _a;
                    const linkRow = line.querySelectorAll("td.link")[1];
                    return (_a = linkRow.textContent) === null || _a === void 0 ? void 0 : _a.includes(`(${currentContract === null || currentContract === void 0 ? void 0 : currentContract["pp id"]})`);
                });
                if (foundLines.length === 0) {
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.Warning(`Facture ${currentContract === null || currentContract === void 0 ? void 0 : currentContract["pp id"]} introuvable, supprimez la manuellement et passez au contrat suivant.`);
                }
                if (foundLines.length > 1) {
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.setCurrentTask)(Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { strangeContracts: [...task.sharedData.strangeContracts, currentContract] }) }));
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.Warning("Plusieurs factures trouvées, la supression ne sera pas effectuée.\nPassez au contrat suivant");
                }
                const checkbox = foundLines[0].querySelector("input[type=checkbox]");
                if (!checkbox)
                    throw new Error("checkbox introuvable");
                checkbox.checked = true;
                try {
                    const deleteLink = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_1__.waitForSelector)("#jqFjDisplayTable #jqFjAuswahlUl li.delete > a[href='javascript:deleteSelectedFaks();']");
                    task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", task, true);
                    const oldConfirm = window.confirm;
                    window.confirm = () => true; //force confirm to true
                    deleteLink.click();
                }
                catch (e) {
                    throw new Error(`bouton de supression introuvable (${currentContract === null || currentContract === void 0 ? void 0 : currentContract["pp id"]})`);
                }
                return;
            }
            case "endOfLoop": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractIds: task.sharedData.contractIds.slice(1), doneContracts: [
                            ...task.sharedData.doneContracts,
                            ...(currentContract ? [currentContract] : []),
                        ] }) });
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("start", newTask);
                return;
            }
            case "success": {
                alert("Tâche terminée!");
                console.log("contrats terminés", task.sharedData.doneContracts);
                console.log("contrats ignorés", task.sharedData.strangeContracts);
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.removeCurrentTask)();
                return;
            }
            default: {
                throw new Error(`étape ${task.stepName} inconnue`);
            }
        }
    });
}
const removeDACPrestTaskParams = {
    taskFn: removeDACPrestTask,
    windowSectionComponent: _components_WindowRemoveDACPrestSection__WEBPACK_IMPORTED_MODULE_0__.WindowRemoveDACPrestSection,
    actionsElems: [
        (0,_lib_UITools__WEBPACK_IMPORTED_MODULE_4__.createElem)("button", {
            onclick(e) {
                return __awaiter(this, void 0, void 0, function* () {
                    e.stopPropagation();
                    if (!confirm("Êtes vous sûr de vouloir passer au contrat suivant?"))
                        return;
                    const task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.getCurrentTask)();
                    if (!task)
                        return;
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoop", Object.assign(Object.assign({}, task), { isPaused: false }));
                });
            },
        }, "Passer au contrat suivant"),
    ],
};


/***/ }),

/***/ "./src/tasks/removeEndDate.ts":
/*!************************************!*\
  !*** ./src/tasks/removeEndDate.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "removeEndDateTaskParams": () => (/* binding */ removeEndDateTaskParams)
/* harmony export */ });
/* harmony import */ var _lib_async__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/async */ "./src/lib/async.ts");
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/errors */ "./src/lib/errors.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/utils */ "./src/lib/utils.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function removeEndDateTaskFn(task) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        switch (task.stepName) {
            case "start": {
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_3__.urlCheck)("icare/Be/VertragEdit.do")) {
                    throw new _lib_errors__WEBPACK_IMPORTED_MODULE_1__.Warning("Démarrer la tâche depuis une page de contrat");
                }
                // wait for spinner end
                yield waitForSpinnerHidden();
                //go to contract tab
                (yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)("a#ui-id-5")).click();
                //get removal date
                const endDateInput = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)("#ui-id-6 > form > table > tbody > tr > td > input#verEnde");
                if (task.sharedData.dateToRemove !== endDateInput.value) {
                    throw new Error("weird date mismatch");
                }
                endDateInput.value = "";
                //save
                //ASYNC GARBAGE: wait for success on the same page
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("confirmSave", task, true); //AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
                (_a = endDateInput.form) === null || _a === void 0 ? void 0 : _a.submit();
                // wait for success message
                yield waitForSuccess();
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("updatePrests", task);
                return;
            }
            case "updatePrests": {
                //go to prests tab
                (yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)("a#ui-id-7")).click();
                // wait for spinner end
                yield waitForSpinnerHidden();
                const inputs = yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelectorAll)("#ui-id-8 #contractuelSave input.autoDate");
                (0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.namedLog)({ inputs });
                //set inputs to end date
                inputs.forEach((input) => {
                    if (input.value === task.sharedData.dateToRemove) {
                        input.value = task.sharedData.newEndDate;
                    }
                });
                //wait for success message to be hidden
                yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)(() => {
                    const savedBox = document.querySelector("#saved");
                    return (savedBox === null || savedBox === void 0 ? void 0 : savedBox.style.visibility) !== "visible" ? savedBox : null;
                }, 10, 500);
                //ASYNC GARBAGE: wait for success on the same page
                task = yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("confirmSave", task, true); //AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
                //save
                (yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)("#ui-id-8 .jqSavePlgsButton")).click();
                // wait for success message
                yield waitForSuccess();
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("backToContractTab", task);
                return;
            }
            case "backToContractTab": {
                //back to contract tab
                (yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)("a#ui-id-5")).click();
                yield waitForSpinnerHidden();
                yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.async_setTimeout)(200);
                //focus copy button
                (yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)("#ui-id-6 > [name=VertragEditForm] > table > tbody > tr > td > table > tbody > tr > td > button.btn.btn-primary", 250, Infinity)).focus();
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.nextTaskStep)("success", task);
                return;
            }
            case "confirmSave": {
                //WARNING: asynchronous step (used multiple times), don't update the task here!
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_3__.urlCheck)("/icare/Be/PlatzierungVertragPrepare.do"))
                    return;
                const okButton = document.querySelector("form[name=VertragEditForm] input.btn.btn-primary");
                okButton === null || okButton === void 0 ? void 0 : okButton.click();
                return;
            }
            case "success": {
                console.info("remove end date task success");
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_2__.removeCurrentTask)();
                return;
            }
        }
    });
}
const removeEndDateTaskParams = {
    taskFn: removeEndDateTaskFn,
};
function waitForSpinnerHidden() {
    return __awaiter(this, void 0, void 0, function* () {
        // wait for spinner end
        yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)(() => {
            const savedBox = document.querySelector(".spinner-container");
            return (savedBox === null || savedBox === void 0 ? void 0 : savedBox.style.display) === "none" ? savedBox : null;
        }, 10, 500);
    });
}
function waitForSuccess() {
    return __awaiter(this, void 0, void 0, function* () {
        // wait for success message
        yield (0,_lib_async__WEBPACK_IMPORTED_MODULE_0__.waitForSelector)(() => {
            const savedBox = document.querySelector("#saved");
            return (savedBox === null || savedBox === void 0 ? void 0 : savedBox.style.visibility) === "visible" ? savedBox : null;
        }, 10, 500);
    });
}


/***/ }),

/***/ "./src/tasks/stepContracts.ts":
/*!************************************!*\
  !*** ./src/tasks/stepContracts.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "stepContractsTaskFn": () => (/* binding */ stepContractsTaskFn),
/* harmony export */   "stepContractsTaskParams": () => (/* binding */ stepContractsTaskParams)
/* harmony export */ });
/* harmony import */ var _components_WindowStepContractsSection__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../components/WindowStepContractsSection */ "./src/components/WindowStepContractsSection.ts");
/* harmony import */ var _lib_checks__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../lib/checks */ "./src/lib/checks.ts");
/* harmony import */ var _lib_errors__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../lib/errors */ "./src/lib/errors.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/url */ "./src/lib/url.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};





function stepContractsTaskFn(task) {
    var _a;
    return __awaiter(this, void 0, void 0, function* () {
        (0,_lib_checks__WEBPACK_IMPORTED_MODULE_1__.errorIfIcareTools)();
        const currentId = task.sharedData.contractIds[0];
        switch (task.stepName) {
            case "start": {
                if (task.sharedData.contractIds.length === 0) {
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("success", task);
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("goToContract", Object.assign(Object.assign({}, task), { lastMessage: `id contrat: ${currentId}\n${task.sharedData.contractsCount - task.sharedData.contractIds.length + 1}/${task.sharedData.contractsCount}` }));
                return;
            }
            case "goToContract": {
                //go to contract url
                if (!(0,_lib_url__WEBPACK_IMPORTED_MODULE_4__.urlCheckOrGo)(`/icare/Be/VertragEdit.do?method=main&aktuelle=true&theVerId=${currentId}`)) {
                    return;
                }
                const confirmBox = document.querySelector("#trotzdem");
                if (confirmBox) {
                    //confirm page
                    yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoopConfirm", task, true);
                    confirmBox.checked = true;
                    (_a = confirmBox.form) === null || _a === void 0 ? void 0 : _a.submit();
                    return;
                }
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("endOfLoopConfirm", task);
                return;
            }
            case "endOfLoopConfirm": {
                const newTask = Object.assign(Object.assign({}, task), { sharedData: Object.assign(Object.assign({}, task.sharedData), { contractIds: task.sharedData.contractIds.slice(1) }) });
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.nextTaskStep)("start", newTask, true);
                throw new _lib_errors__WEBPACK_IMPORTED_MODULE_2__.Warning("waiting for continue (next contract)");
                return;
            }
            case "success": {
                alert("Tâche terminée!");
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_3__.removeCurrentTask)();
                return;
            }
        }
    });
}
const stepContractsTaskParams = {
    taskFn: stepContractsTaskFn,
    windowSectionComponent: _components_WindowStepContractsSection__WEBPACK_IMPORTED_MODULE_0__.WindowStepContractsSection,
};


/***/ }),

/***/ "./src/tasks/test.ts":
/*!***************************!*\
  !*** ./src/tasks/test.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "testTaskParams": () => (/* binding */ testTaskParams)
/* harmony export */ });
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../lib/task */ "./src/lib/task.ts");
var __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};

function testTask(task) {
    return __awaiter(this, void 0, void 0, function* () {
        switch (task.stepName) {
            case "start":
                window.location.href = "/icare/Be/Overview.do";
                (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.nextTaskStep)("sayHello", task);
                return;
            case "sayHello":
                if (window.location.href.includes("/icare/Be/Overview.do")) {
                    alert(task.sharedData);
                    (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.nextTaskStep)("success", task);
                }
                return;
            case "success":
                alert("Task success!");
                yield (0,_lib_task__WEBPACK_IMPORTED_MODULE_0__.removeCurrentTask)();
                break;
        }
    });
}
const testTaskParams = {
    taskFn: testTask,
};


/***/ }),

/***/ "./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs":
/*!*******************************************************************!*\
  !*** ./node_modules/.pnpm/xlsx@0.18.5/node_modules/xlsx/xlsx.mjs ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "CFB": () => (/* binding */ CFB),
/* harmony export */   "SSF": () => (/* binding */ SSF),
/* harmony export */   "parse_xlscfb": () => (/* binding */ parse_xlscfb),
/* harmony export */   "parse_zip": () => (/* binding */ parse_zip),
/* harmony export */   "read": () => (/* binding */ readSync),
/* harmony export */   "readFile": () => (/* binding */ readFileSync),
/* harmony export */   "readFileSync": () => (/* binding */ readFileSync),
/* harmony export */   "set_cptable": () => (/* binding */ set_cptable),
/* harmony export */   "set_fs": () => (/* binding */ set_fs),
/* harmony export */   "stream": () => (/* binding */ __stream),
/* harmony export */   "utils": () => (/* binding */ utils),
/* harmony export */   "version": () => (/* binding */ version),
/* harmony export */   "write": () => (/* binding */ writeSync),
/* harmony export */   "writeFile": () => (/* binding */ writeFileSync),
/* harmony export */   "writeFileAsync": () => (/* binding */ writeFileAsync),
/* harmony export */   "writeFileSync": () => (/* binding */ writeFileSync),
/* harmony export */   "writeFileXLSX": () => (/* binding */ writeFileSyncXLSX),
/* harmony export */   "writeXLSX": () => (/* binding */ writeSyncXLSX)
/* harmony export */ });
/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */
/* vim: set ts=2: */
/*exported XLSX */
/*global process:false, Buffer:false, ArrayBuffer:false, DataView:false, Deno:false */
var XLSX = {};
XLSX.version = '0.18.5';
var current_codepage = 1200, current_ansi = 1252;

var VALID_ANSI = [ 874, 932, 936, 949, 950, 1250, 1251, 1252, 1253, 1254, 1255, 1256, 1257, 1258, 10000 ];
/* ECMA-376 Part I 18.4.1 charset to codepage mapping */
var CS2CP = ({
	/*::[*/0/*::]*/:    1252, /* ANSI */
	/*::[*/1/*::]*/:   65001, /* DEFAULT */
	/*::[*/2/*::]*/:   65001, /* SYMBOL */
	/*::[*/77/*::]*/:  10000, /* MAC */
	/*::[*/128/*::]*/:   932, /* SHIFTJIS */
	/*::[*/129/*::]*/:   949, /* HANGUL */
	/*::[*/130/*::]*/:  1361, /* JOHAB */
	/*::[*/134/*::]*/:   936, /* GB2312 */
	/*::[*/136/*::]*/:   950, /* CHINESEBIG5 */
	/*::[*/161/*::]*/:  1253, /* GREEK */
	/*::[*/162/*::]*/:  1254, /* TURKISH */
	/*::[*/163/*::]*/:  1258, /* VIETNAMESE */
	/*::[*/177/*::]*/:  1255, /* HEBREW */
	/*::[*/178/*::]*/:  1256, /* ARABIC */
	/*::[*/186/*::]*/:  1257, /* BALTIC */
	/*::[*/204/*::]*/:  1251, /* RUSSIAN */
	/*::[*/222/*::]*/:   874, /* THAI */
	/*::[*/238/*::]*/:  1250, /* EASTEUROPE */
	/*::[*/255/*::]*/:  1252, /* OEM */
	/*::[*/69/*::]*/:   6969  /* MISC */
}/*:any*/);

var set_ansi = function(cp/*:number*/) { if(VALID_ANSI.indexOf(cp) == -1) return; current_ansi = CS2CP[0] = cp; };
function reset_ansi() { set_ansi(1252); }

var set_cp = function(cp/*:number*/) { current_codepage = cp; set_ansi(cp); };
function reset_cp() { set_cp(1200); reset_ansi(); }

function char_codes(data/*:string*/)/*:Array<number>*/ { var o/*:Array<number>*/ = []; for(var i = 0, len = data.length; i < len; ++i) o[i] = data.charCodeAt(i); return o; }

function utf16leread(data/*:string*/)/*:string*/ {
	var o/*:Array<string>*/ = [];
	for(var i = 0; i < (data.length>>1); ++i) o[i] = String.fromCharCode(data.charCodeAt(2*i) + (data.charCodeAt(2*i+1)<<8));
	return o.join("");
}
function utf16beread(data/*:string*/)/*:string*/ {
	var o/*:Array<string>*/ = [];
	for(var i = 0; i < (data.length>>1); ++i) o[i] = String.fromCharCode(data.charCodeAt(2*i+1) + (data.charCodeAt(2*i)<<8));
	return o.join("");
}

var debom = function(data/*:string*/)/*:string*/ {
	var c1 = data.charCodeAt(0), c2 = data.charCodeAt(1);
	if(c1 == 0xFF && c2 == 0xFE) return utf16leread(data.slice(2));
	if(c1 == 0xFE && c2 == 0xFF) return utf16beread(data.slice(2));
	if(c1 == 0xFEFF) return data.slice(1);
	return data;
};

var _getchar = function _gc1(x/*:number*/)/*:string*/ { return String.fromCharCode(x); };
var _getansi = function _ga1(x/*:number*/)/*:string*/ { return String.fromCharCode(x); };

var $cptable;
function set_cptable(cptable) {
	$cptable = cptable;
	set_cp = function(cp/*:number*/) { current_codepage = cp; set_ansi(cp); };
	debom = function(data/*:string*/) {
		if(data.charCodeAt(0) === 0xFF && data.charCodeAt(1) === 0xFE) { return $cptable.utils.decode(1200, char_codes(data.slice(2))); }
		return data;
	};
	_getchar = function _gc2(x/*:number*/)/*:string*/ {
		if(current_codepage === 1200) return String.fromCharCode(x);
		return $cptable.utils.decode(current_codepage, [x&255,x>>8])[0];
	};
	_getansi = function _ga2(x/*:number*/)/*:string*/ {
		return $cptable.utils.decode(current_ansi, [x])[0];
	};
	cpdoit();
}

var DENSE = null;
var DIF_XL = true;
var Base64_map = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";
function Base64_encode(input) {
  var o = "";
  var c1 = 0, c2 = 0, c3 = 0, e1 = 0, e2 = 0, e3 = 0, e4 = 0;
  for (var i = 0; i < input.length; ) {
    c1 = input.charCodeAt(i++);
    e1 = c1 >> 2;
    c2 = input.charCodeAt(i++);
    e2 = (c1 & 3) << 4 | c2 >> 4;
    c3 = input.charCodeAt(i++);
    e3 = (c2 & 15) << 2 | c3 >> 6;
    e4 = c3 & 63;
    if (isNaN(c2)) {
      e3 = e4 = 64;
    } else if (isNaN(c3)) {
      e4 = 64;
    }
    o += Base64_map.charAt(e1) + Base64_map.charAt(e2) + Base64_map.charAt(e3) + Base64_map.charAt(e4);
  }
  return o;
}
function Base64_decode(input) {
  var o = "";
  var c1 = 0, c2 = 0, c3 = 0, e1 = 0, e2 = 0, e3 = 0, e4 = 0;
  input = input.replace(/[^\w\+\/\=]/g, "");
  for (var i = 0; i < input.length; ) {
    e1 = Base64_map.indexOf(input.charAt(i++));
    e2 = Base64_map.indexOf(input.charAt(i++));
    c1 = e1 << 2 | e2 >> 4;
    o += String.fromCharCode(c1);
    e3 = Base64_map.indexOf(input.charAt(i++));
    c2 = (e2 & 15) << 4 | e3 >> 2;
    if (e3 !== 64) {
      o += String.fromCharCode(c2);
    }
    e4 = Base64_map.indexOf(input.charAt(i++));
    c3 = (e3 & 3) << 6 | e4;
    if (e4 !== 64) {
      o += String.fromCharCode(c3);
    }
  }
  return o;
}
var has_buf = /*#__PURE__*/(function() { return typeof Buffer !== 'undefined' && typeof process !== 'undefined' && typeof process.versions !== 'undefined' && !!process.versions.node; })();

var Buffer_from = /*#__PURE__*/(function() {
	if(typeof Buffer !== 'undefined') {
		var nbfs = !Buffer.from;
		if(!nbfs) try { Buffer.from("foo", "utf8"); } catch(e) { nbfs = true; }
		return nbfs ? function(buf, enc) { return (enc) ? new Buffer(buf, enc) : new Buffer(buf); } : Buffer.from.bind(Buffer);
	}
	return function() {};
})();


function new_raw_buf(len/*:number*/) {
	/* jshint -W056 */
	if(has_buf) return Buffer.alloc ? Buffer.alloc(len) : new Buffer(len);
	return typeof Uint8Array != "undefined" ? new Uint8Array(len) : new Array(len);
	/* jshint +W056 */
}

function new_unsafe_buf(len/*:number*/) {
	/* jshint -W056 */
	if(has_buf) return Buffer.allocUnsafe ? Buffer.allocUnsafe(len) : new Buffer(len);
	return typeof Uint8Array != "undefined" ? new Uint8Array(len) : new Array(len);
	/* jshint +W056 */
}

var s2a = function s2a(s/*:string*/)/*:any*/ {
	if(has_buf) return Buffer_from(s, "binary");
	return s.split("").map(function(x/*:string*/)/*:number*/{ return x.charCodeAt(0) & 0xff; });
};

function s2ab(s/*:string*/)/*:any*/ {
	if(typeof ArrayBuffer === 'undefined') return s2a(s);
	var buf = new ArrayBuffer(s.length), view = new Uint8Array(buf);
	for (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;
	return buf;
}

function a2s(data/*:any*/)/*:string*/ {
	if(Array.isArray(data)) return data.map(function(c) { return String.fromCharCode(c); }).join("");
	var o/*:Array<string>*/ = []; for(var i = 0; i < data.length; ++i) o[i] = String.fromCharCode(data[i]); return o.join("");
}

function a2u(data/*:Array<number>*/)/*:Uint8Array*/ {
	if(typeof Uint8Array === 'undefined') throw new Error("Unsupported");
	return new Uint8Array(data);
}

function ab2a(data/*:ArrayBuffer|Uint8Array*/)/*:Array<number>*/ {
	if(typeof ArrayBuffer == 'undefined') throw new Error("Unsupported");
	if(data instanceof ArrayBuffer) return ab2a(new Uint8Array(data));
	/*:: if(data instanceof ArrayBuffer) throw new Error("unreachable"); */
	var o = new Array(data.length);
	for(var i = 0; i < data.length; ++i) o[i] = data[i];
	return o;
}

var bconcat = has_buf ? function(bufs) { return Buffer.concat(bufs.map(function(buf) { return Buffer.isBuffer(buf) ? buf : Buffer_from(buf); })); } : function(bufs) {
	if(typeof Uint8Array !== "undefined") {
		var i = 0, maxlen = 0;
		for(i = 0; i < bufs.length; ++i) maxlen += bufs[i].length;
		var o = new Uint8Array(maxlen);
		var len = 0;
		for(i = 0, maxlen = 0; i < bufs.length; maxlen += len, ++i) {
			len = bufs[i].length;
			if(bufs[i] instanceof Uint8Array) o.set(bufs[i], maxlen);
			else if(typeof bufs[i] == "string") { throw "wtf"; }
			else o.set(new Uint8Array(bufs[i]), maxlen);
		}
		return o;
	}
	return [].concat.apply([], bufs.map(function(buf) { return Array.isArray(buf) ? buf : [].slice.call(buf); }));
};

function utf8decode(content/*:string*/) {
	var out = [], widx = 0, L = content.length + 250;
	var o = new_raw_buf(content.length + 255);
	for(var ridx = 0; ridx < content.length; ++ridx) {
		var c = content.charCodeAt(ridx);
		if(c < 0x80) o[widx++] = c;
		else if(c < 0x800) {
			o[widx++] = (192|((c>>6)&31));
			o[widx++] = (128|(c&63));
		} else if(c >= 0xD800 && c < 0xE000) {
			c = (c&1023)+64;
			var d = content.charCodeAt(++ridx)&1023;
			o[widx++] = (240|((c>>8)&7));
			o[widx++] = (128|((c>>2)&63));
			o[widx++] = (128|((d>>6)&15)|((c&3)<<4));
			o[widx++] = (128|(d&63));
		} else {
			o[widx++] = (224|((c>>12)&15));
			o[widx++] = (128|((c>>6)&63));
			o[widx++] = (128|(c&63));
		}
		if(widx > L) {
			out.push(o.slice(0, widx));
			widx = 0;
			o = new_raw_buf(65535);
			L = 65530;
		}
	}
	out.push(o.slice(0, widx));
	return bconcat(out);
}

var chr0 = /\u0000/g, chr1 = /[\u0001-\u0006]/g;
/*::
declare type Block = any;
declare type BufArray = {
	newblk(sz:number):Block;
	next(sz:number):Block;
	end():any;
	push(buf:Block):void;
};

type RecordHopperCB = {(d:any, Rn:string, RT:number):?boolean;};

type EvertType = {[string]:string};
type EvertNumType = {[string]:number};
type EvertArrType = {[string]:Array<string>};

type StringConv = {(string):string};

*/
/* ssf.js (C) 2013-present SheetJS -- http://sheetjs.com */
/*jshint -W041 */
function _strrev(x/*:string*/)/*:string*/ { var o = "", i = x.length-1; while(i>=0) o += x.charAt(i--); return o; }
function pad0(v/*:any*/,d/*:number*/)/*:string*/{var t=""+v; return t.length>=d?t:fill('0',d-t.length)+t;}
function pad_(v/*:any*/,d/*:number*/)/*:string*/{var t=""+v;return t.length>=d?t:fill(' ',d-t.length)+t;}
function rpad_(v/*:any*/,d/*:number*/)/*:string*/{var t=""+v; return t.length>=d?t:t+fill(' ',d-t.length);}
function pad0r1(v/*:any*/,d/*:number*/)/*:string*/{var t=""+Math.round(v); return t.length>=d?t:fill('0',d-t.length)+t;}
function pad0r2(v/*:any*/,d/*:number*/)/*:string*/{var t=""+v; return t.length>=d?t:fill('0',d-t.length)+t;}
var p2_32 = /*#__PURE__*/Math.pow(2,32);
function pad0r(v/*:any*/,d/*:number*/)/*:string*/{if(v>p2_32||v<-p2_32) return pad0r1(v,d); var i = Math.round(v); return pad0r2(i,d); }
/* yes, in 2022 this is still faster than string compare */
function SSF_isgeneral(s/*:string*/, i/*:?number*/)/*:boolean*/ { i = i || 0; return s.length >= 7 + i && (s.charCodeAt(i)|32) === 103 && (s.charCodeAt(i+1)|32) === 101 && (s.charCodeAt(i+2)|32) === 110 && (s.charCodeAt(i+3)|32) === 101 && (s.charCodeAt(i+4)|32) === 114 && (s.charCodeAt(i+5)|32) === 97 && (s.charCodeAt(i+6)|32) === 108; }
var days/*:Array<Array<string> >*/ = [
	['Sun', 'Sunday'],
	['Mon', 'Monday'],
	['Tue', 'Tuesday'],
	['Wed', 'Wednesday'],
	['Thu', 'Thursday'],
	['Fri', 'Friday'],
	['Sat', 'Saturday']
];
var months/*:Array<Array<string> >*/ = [
	['J', 'Jan', 'January'],
	['F', 'Feb', 'February'],
	['M', 'Mar', 'March'],
	['A', 'Apr', 'April'],
	['M', 'May', 'May'],
	['J', 'Jun', 'June'],
	['J', 'Jul', 'July'],
	['A', 'Aug', 'August'],
	['S', 'Sep', 'September'],
	['O', 'Oct', 'October'],
	['N', 'Nov', 'November'],
	['D', 'Dec', 'December']
];
function SSF_init_table(t/*:any*/) {
	if(!t) t = {};
	t[0]=  'General';
	t[1]=  '0';
	t[2]=  '0.00';
	t[3]=  '#,##0';
	t[4]=  '#,##0.00';
	t[9]=  '0%';
	t[10]= '0.00%';
	t[11]= '0.00E+00';
	t[12]= '# ?/?';
	t[13]= '# ??/??';
	t[14]= 'm/d/yy';
	t[15]= 'd-mmm-yy';
	t[16]= 'd-mmm';
	t[17]= 'mmm-yy';
	t[18]= 'h:mm AM/PM';
	t[19]= 'h:mm:ss AM/PM';
	t[20]= 'h:mm';
	t[21]= 'h:mm:ss';
	t[22]= 'm/d/yy h:mm';
	t[37]= '#,##0 ;(#,##0)';
	t[38]= '#,##0 ;[Red](#,##0)';
	t[39]= '#,##0.00;(#,##0.00)';
	t[40]= '#,##0.00;[Red](#,##0.00)';
	t[45]= 'mm:ss';
	t[46]= '[h]:mm:ss';
	t[47]= 'mmss.0';
	t[48]= '##0.0E+0';
	t[49]= '@';
	t[56]= '"上午/下午 "hh"時"mm"分"ss"秒 "';
	return t;
}
/* repeated to satiate webpack */
var table_fmt = {
	0:  'General',
	1:  '0',
	2:  '0.00',
	3:  '#,##0',
	4:  '#,##0.00',
	9:  '0%',
	10: '0.00%',
	11: '0.00E+00',
	12: '# ?/?',
	13: '# ??/??',
	14: 'm/d/yy',
	15: 'd-mmm-yy',
	16: 'd-mmm',
	17: 'mmm-yy',
	18: 'h:mm AM/PM',
	19: 'h:mm:ss AM/PM',
	20: 'h:mm',
	21: 'h:mm:ss',
	22: 'm/d/yy h:mm',
	37: '#,##0 ;(#,##0)',
	38: '#,##0 ;[Red](#,##0)',
	39: '#,##0.00;(#,##0.00)',
	40: '#,##0.00;[Red](#,##0.00)',
	45: 'mm:ss',
	46: '[h]:mm:ss',
	47: 'mmss.0',
	48: '##0.0E+0',
	49: '@',
	56: '"上午/下午 "hh"時"mm"分"ss"秒 "'
};

/* Defaults determined by systematically testing in Excel 2019 */

/* These formats appear to default to other formats in the table */
var SSF_default_map = {
	5:  37, 6:  38, 7:  39, 8:  40,         //  5 -> 37 ...  8 -> 40

	23:  0, 24:  0, 25:  0, 26:  0,         // 23 ->  0 ... 26 ->  0

	27: 14, 28: 14, 29: 14, 30: 14, 31: 14, // 27 -> 14 ... 31 -> 14

	50: 14, 51: 14, 52: 14, 53: 14, 54: 14, // 50 -> 14 ... 58 -> 14
	55: 14, 56: 14, 57: 14, 58: 14,
	59:  1, 60:  2, 61:  3, 62:  4,         // 59 ->  1 ... 62 ->  4

	67:  9, 68: 10,                         // 67 ->  9 ... 68 -> 10
	69: 12, 70: 13, 71: 14,                 // 69 -> 12 ... 71 -> 14
	72: 14, 73: 15, 74: 16, 75: 17,         // 72 -> 14 ... 75 -> 17
	76: 20, 77: 21, 78: 22,                 // 76 -> 20 ... 78 -> 22
	79: 45, 80: 46, 81: 47,                 // 79 -> 45 ... 81 -> 47
	82: 0                                   // 82 ->  0 ... 65536 -> 0 (omitted)
};


/* These formats technically refer to Accounting formats with no equivalent */
var SSF_default_str = {
	//  5 -- Currency,   0 decimal, black negative
	5:  '"$"#,##0_);\\("$"#,##0\\)',
	63: '"$"#,##0_);\\("$"#,##0\\)',

	//  6 -- Currency,   0 decimal, red   negative
	6:  '"$"#,##0_);[Red]\\("$"#,##0\\)',
	64: '"$"#,##0_);[Red]\\("$"#,##0\\)',

	//  7 -- Currency,   2 decimal, black negative
	7:  '"$"#,##0.00_);\\("$"#,##0.00\\)',
	65: '"$"#,##0.00_);\\("$"#,##0.00\\)',

	//  8 -- Currency,   2 decimal, red   negative
	8:  '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',
	66: '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',

	// 41 -- Accounting, 0 decimal, No Symbol
	41: '_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',

	// 42 -- Accounting, 0 decimal, $  Symbol
	42: '_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',

	// 43 -- Accounting, 2 decimal, No Symbol
	43: '_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',

	// 44 -- Accounting, 2 decimal, $  Symbol
	44: '_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'
};

function SSF_frac(x/*:number*/, D/*:number*/, mixed/*:?boolean*/)/*:Array<number>*/ {
	var sgn = x < 0 ? -1 : 1;
	var B = x * sgn;
	var P_2 = 0, P_1 = 1, P = 0;
	var Q_2 = 1, Q_1 = 0, Q = 0;
	var A = Math.floor(B);
	while(Q_1 < D) {
		A = Math.floor(B);
		P = A * P_1 + P_2;
		Q = A * Q_1 + Q_2;
		if((B - A) < 0.00000005) break;
		B = 1 / (B - A);
		P_2 = P_1; P_1 = P;
		Q_2 = Q_1; Q_1 = Q;
	}
	if(Q > D) { if(Q_1 > D) { Q = Q_2; P = P_2; } else { Q = Q_1; P = P_1; } }
	if(!mixed) return [0, sgn * P, Q];
	var q = Math.floor(sgn * P/Q);
	return [q, sgn*P - q*Q, Q];
}
function SSF_parse_date_code(v/*:number*/,opts/*:?any*/,b2/*:?boolean*/) {
	if(v > 2958465 || v < 0) return null;
	var date = (v|0), time = Math.floor(86400 * (v - date)), dow=0;
	var dout=[];
	var out={D:date, T:time, u:86400*(v-date)-time,y:0,m:0,d:0,H:0,M:0,S:0,q:0};
	if(Math.abs(out.u) < 1e-6) out.u = 0;
	if(opts && opts.date1904) date += 1462;
	if(out.u > 0.9999) {
		out.u = 0;
		if(++time == 86400) { out.T = time = 0; ++date; ++out.D; }
	}
	if(date === 60) {dout = b2 ? [1317,10,29] : [1900,2,29]; dow=3;}
	else if(date === 0) {dout = b2 ? [1317,8,29] : [1900,1,0]; dow=6;}
	else {
		if(date > 60) --date;
		/* 1 = Jan 1 1900 in Gregorian */
		var d = new Date(1900, 0, 1);
		d.setDate(d.getDate() + date - 1);
		dout = [d.getFullYear(), d.getMonth()+1,d.getDate()];
		dow = d.getDay();
		if(date < 60) dow = (dow + 6) % 7;
		if(b2) dow = SSF_fix_hijri(d, dout);
	}
	out.y = dout[0]; out.m = dout[1]; out.d = dout[2];
	out.S = time % 60; time = Math.floor(time / 60);
	out.M = time % 60; time = Math.floor(time / 60);
	out.H = time;
	out.q = dow;
	return out;
}
var SSFbasedate = /*#__PURE__*/new Date(1899, 11, 31, 0, 0, 0);
var SSFdnthresh = /*#__PURE__*/SSFbasedate.getTime();
var SSFbase1904 = /*#__PURE__*/new Date(1900, 2, 1, 0, 0, 0);
function datenum_local(v/*:Date*/, date1904/*:?boolean*/)/*:number*/ {
	var epoch = /*#__PURE__*/v.getTime();
	if(date1904) epoch -= 1461*24*60*60*1000;
	else if(v >= SSFbase1904) epoch += 24*60*60*1000;
	return (epoch - (SSFdnthresh + (/*#__PURE__*/v.getTimezoneOffset() - /*#__PURE__*/SSFbasedate.getTimezoneOffset()) * 60000)) / (24 * 60 * 60 * 1000);
}
/* ECMA-376 18.8.30 numFmt*/
/* Note: `toPrecision` uses standard form when prec > E and E >= -6 */
/* exponent >= -9 and <= 9 */
function SSF_strip_decimal(o/*:string*/)/*:string*/ {
	return (o.indexOf(".") == -1) ? o : o.replace(/(?:\.0*|(\.\d*[1-9])0+)$/, "$1");
}

/* General Exponential always shows 2 digits exp and trims the mantissa */
function SSF_normalize_exp(o/*:string*/)/*:string*/ {
	if(o.indexOf("E") == -1) return o;
	return o.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2");
}

/* exponent >= -9 and <= 9 */
function SSF_small_exp(v/*:number*/)/*:string*/ {
	var w = (v<0?12:11);
	var o = SSF_strip_decimal(v.toFixed(12)); if(o.length <= w) return o;
	o = v.toPrecision(10); if(o.length <= w) return o;
	return v.toExponential(5);
}

/* exponent >= 11 or <= -10 likely exponential */
function SSF_large_exp(v/*:number*/)/*:string*/ {
	var o = SSF_strip_decimal(v.toFixed(11));
	return (o.length > (v<0?12:11) || o === "0" || o === "-0") ? v.toPrecision(6) : o;
}

function SSF_general_num(v/*:number*/)/*:string*/ {
	var V = Math.floor(Math.log(Math.abs(v))*Math.LOG10E), o;

	if(V >= -4 && V <= -1) o = v.toPrecision(10+V);
	else if(Math.abs(V) <= 9) o = SSF_small_exp(v);
	else if(V === 10) o = v.toFixed(10).substr(0,12);
	else o = SSF_large_exp(v);

	return SSF_strip_decimal(SSF_normalize_exp(o.toUpperCase()));
}


/*
	"General" rules:
	- text is passed through ("@")
	- booleans are rendered as TRUE/FALSE
	- "up to 11 characters" displayed for numbers
	- Default date format (code 14) used for Dates

	The longest 32-bit integer text is "-2147483648", exactly 11 chars
	TODO: technically the display depends on the width of the cell
*/
function SSF_general(v/*:any*/, opts/*:any*/) {
	switch(typeof v) {
		case 'string': return v;
		case 'boolean': return v ? "TRUE" : "FALSE";
		case 'number': return (v|0) === v ? v.toString(10) : SSF_general_num(v);
		case 'undefined': return "";
		case 'object':
			if(v == null) return "";
			if(v instanceof Date) return SSF_format(14, datenum_local(v, opts && opts.date1904), opts);
	}
	throw new Error("unsupported value in General format: " + v);
}

function SSF_fix_hijri(date/*:Date*/, o/*:[number, number, number]*/) {
  /* TODO: properly adjust y/m/d and  */
  o[0] -= 581;
  var dow = date.getDay();
  if(date < 60) dow = (dow + 6) % 7;
  return dow;
}
//var THAI_DIGITS = "\u0E50\u0E51\u0E52\u0E53\u0E54\u0E55\u0E56\u0E57\u0E58\u0E59".split("");
function SSF_write_date(type/*:number*/, fmt/*:string*/, val, ss0/*:?number*/)/*:string*/ {
	var o="", ss=0, tt=0, y = val.y, out, outl = 0;
	switch(type) {
		case 98: /* 'b' buddhist year */
			y = val.y + 543;
			/* falls through */
		case 121: /* 'y' year */
		switch(fmt.length) {
			case 1: case 2: out = y % 100; outl = 2; break;
			default: out = y % 10000; outl = 4; break;
		} break;
		case 109: /* 'm' month */
		switch(fmt.length) {
			case 1: case 2: out = val.m; outl = fmt.length; break;
			case 3: return months[val.m-1][1];
			case 5: return months[val.m-1][0];
			default: return months[val.m-1][2];
		} break;
		case 100: /* 'd' day */
		switch(fmt.length) {
			case 1: case 2: out = val.d; outl = fmt.length; break;
			case 3: return days[val.q][0];
			default: return days[val.q][1];
		} break;
		case 104: /* 'h' 12-hour */
		switch(fmt.length) {
			case 1: case 2: out = 1+(val.H+11)%12; outl = fmt.length; break;
			default: throw 'bad hour format: ' + fmt;
		} break;
		case 72: /* 'H' 24-hour */
		switch(fmt.length) {
			case 1: case 2: out = val.H; outl = fmt.length; break;
			default: throw 'bad hour format: ' + fmt;
		} break;
		case 77: /* 'M' minutes */
		switch(fmt.length) {
			case 1: case 2: out = val.M; outl = fmt.length; break;
			default: throw 'bad minute format: ' + fmt;
		} break;
		case 115: /* 's' seconds */
			if(fmt != 's' && fmt != 'ss' && fmt != '.0' && fmt != '.00' && fmt != '.000') throw 'bad second format: ' + fmt;
			if(val.u === 0 && (fmt == "s" || fmt == "ss")) return pad0(val.S, fmt.length);
			/*::if(!ss0) ss0 = 0; */
			if(ss0 >= 2) tt = ss0 === 3 ? 1000 : 100;
			else tt = ss0 === 1 ? 10 : 1;
			ss = Math.round((tt)*(val.S + val.u));
			if(ss >= 60*tt) ss = 0;
			if(fmt === 's') return ss === 0 ? "0" : ""+ss/tt;
			o = pad0(ss,2 + ss0);
			if(fmt === 'ss') return o.substr(0,2);
			return "." + o.substr(2,fmt.length-1);
		case 90: /* 'Z' absolute time */
		switch(fmt) {
			case '[h]': case '[hh]': out = val.D*24+val.H; break;
			case '[m]': case '[mm]': out = (val.D*24+val.H)*60+val.M; break;
			case '[s]': case '[ss]': out = ((val.D*24+val.H)*60+val.M)*60+Math.round(val.S+val.u); break;
			default: throw 'bad abstime format: ' + fmt;
		} outl = fmt.length === 3 ? 1 : 2; break;
		case 101: /* 'e' era */
			out = y; outl = 1; break;
	}
	var outstr = outl > 0 ? pad0(out, outl) : "";
	return outstr;
}


/*jshint -W086 */
/*jshint +W086 */
function commaify(s/*:string*/)/*:string*/ {
	var w = 3;
	if(s.length <= w) return s;
	var j = (s.length % w), o = s.substr(0,j);
	for(; j!=s.length; j+=w) o+=(o.length > 0 ? "," : "") + s.substr(j,w);
	return o;
}
var pct1 = /%/g;
function write_num_pct(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{
	var sfmt = fmt.replace(pct1,""), mul = fmt.length - sfmt.length;
	return write_num(type, sfmt, val * Math.pow(10,2*mul)) + fill("%",mul);
}

function write_num_cm(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{
	var idx = fmt.length - 1;
	while(fmt.charCodeAt(idx-1) === 44) --idx;
	return write_num(type, fmt.substr(0,idx), val / Math.pow(10,3*(fmt.length-idx)));
}

function write_num_exp(fmt/*:string*/, val/*:number*/)/*:string*/{
	var o/*:string*/;
	var idx = fmt.indexOf("E") - fmt.indexOf(".") - 1;
	if(fmt.match(/^#+0.0E\+0$/)) {
		if(val == 0) return "0.0E+0";
		else if(val < 0) return "-" + write_num_exp(fmt, -val);
		var period = fmt.indexOf("."); if(period === -1) period=fmt.indexOf('E');
		var ee = Math.floor(Math.log(val)*Math.LOG10E)%period;
		if(ee < 0) ee += period;
		o = (val/Math.pow(10,ee)).toPrecision(idx+1+(period+ee)%period);
		if(o.indexOf("e") === -1) {
			var fakee = Math.floor(Math.log(val)*Math.LOG10E);
			if(o.indexOf(".") === -1) o = o.charAt(0) + "." + o.substr(1) + "E+" + (fakee - o.length+ee);
			else o += "E+" + (fakee - ee);
			while(o.substr(0,2) === "0.") {
				o = o.charAt(0) + o.substr(2,period) + "." + o.substr(2+period);
				o = o.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");
			}
			o = o.replace(/\+-/,"-");
		}
		o = o.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function($$,$1,$2,$3) { return $1 + $2 + $3.substr(0,(period+ee)%period) + "." + $3.substr(ee) + "E"; });
	} else o = val.toExponential(idx);
	if(fmt.match(/E\+00$/) && o.match(/e[+-]\d$/)) o = o.substr(0,o.length-1) + "0" + o.charAt(o.length-1);
	if(fmt.match(/E\-/) && o.match(/e\+/)) o = o.replace(/e\+/,"e");
	return o.replace("e","E");
}
var frac1 = /# (\?+)( ?)\/( ?)(\d+)/;
function write_num_f1(r/*:Array<string>*/, aval/*:number*/, sign/*:string*/)/*:string*/ {
	var den = parseInt(r[4],10), rr = Math.round(aval * den), base = Math.floor(rr/den);
	var myn = (rr - base*den), myd = den;
	return sign + (base === 0 ? "" : ""+base) + " " + (myn === 0 ? fill(" ", r[1].length + 1 + r[4].length) : pad_(myn,r[1].length) + r[2] + "/" + r[3] + pad0(myd,r[4].length));
}
function write_num_f2(r/*:Array<string>*/, aval/*:number*/, sign/*:string*/)/*:string*/ {
	return sign + (aval === 0 ? "" : ""+aval) + fill(" ", r[1].length + 2 + r[4].length);
}
var dec1 = /^#*0*\.([0#]+)/;
var closeparen = /\).*[0#]/;
var phone = /\(###\) ###\\?-####/;
function hashq(str/*:string*/)/*:string*/ {
	var o = "", cc;
	for(var i = 0; i != str.length; ++i) switch((cc=str.charCodeAt(i))) {
		case 35: break;
		case 63: o+= " "; break;
		case 48: o+= "0"; break;
		default: o+= String.fromCharCode(cc);
	}
	return o;
}
function rnd(val/*:number*/, d/*:number*/)/*:string*/ { var dd = Math.pow(10,d); return ""+(Math.round(val * dd)/dd); }
function dec(val/*:number*/, d/*:number*/)/*:number*/ {
	var _frac = val - Math.floor(val), dd = Math.pow(10,d);
	if (d < ('' + Math.round(_frac * dd)).length) return 0;
	return Math.round(_frac * dd);
}
function carry(val/*:number*/, d/*:number*/)/*:number*/ {
	if (d < ('' + Math.round((val-Math.floor(val))*Math.pow(10,d))).length) {
		return 1;
	}
	return 0;
}
function flr(val/*:number*/)/*:string*/ {
	if(val < 2147483647 && val > -2147483648) return ""+(val >= 0 ? (val|0) : (val-1|0));
	return ""+Math.floor(val);
}
function write_num_flt(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/ {
	if(type.charCodeAt(0) === 40 && !fmt.match(closeparen)) {
		var ffmt = fmt.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");
		if(val >= 0) return write_num_flt('n', ffmt, val);
		return '(' + write_num_flt('n', ffmt, -val) + ')';
	}
	if(fmt.charCodeAt(fmt.length - 1) === 44) return write_num_cm(type, fmt, val);
	if(fmt.indexOf('%') !== -1) return write_num_pct(type, fmt, val);
	if(fmt.indexOf('E') !== -1) return write_num_exp(fmt, val);
	if(fmt.charCodeAt(0) === 36) return "$"+write_num_flt(type,fmt.substr(fmt.charAt(1)==' '?2:1),val);
	var o;
	var r/*:?Array<string>*/, ri, ff, aval = Math.abs(val), sign = val < 0 ? "-" : "";
	if(fmt.match(/^00+$/)) return sign + pad0r(aval,fmt.length);
	if(fmt.match(/^[#?]+$/)) {
		o = pad0r(val,0); if(o === "0") o = "";
		return o.length > fmt.length ? o : hashq(fmt.substr(0,fmt.length-o.length)) + o;
	}
	if((r = fmt.match(frac1))) return write_num_f1(r, aval, sign);
	if(fmt.match(/^#+0+$/)) return sign + pad0r(aval,fmt.length - fmt.indexOf("0"));
	if((r = fmt.match(dec1))) {
		o = rnd(val, r[1].length).replace(/^([^\.]+)$/,"$1."+hashq(r[1])).replace(/\.$/,"."+hashq(r[1])).replace(/\.(\d*)$/,function($$, $1) { return "." + $1 + fill("0", hashq(/*::(*/r/*::||[""])*/[1]).length-$1.length); });
		return fmt.indexOf("0.") !== -1 ? o : o.replace(/^0\./,".");
	}
	fmt = fmt.replace(/^#+([0.])/, "$1");
	if((r = fmt.match(/^(0*)\.(#*)$/))) {
		return sign + rnd(aval, r[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");
	}
	if((r = fmt.match(/^#{1,3},##0(\.?)$/))) return sign + commaify(pad0r(aval,0));
	if((r = fmt.match(/^#,##0\.([#0]*0)$/))) {
		return val < 0 ? "-" + write_num_flt(type, fmt, -val) : commaify(""+(Math.floor(val) + carry(val, r[1].length))) + "." + pad0(dec(val, r[1].length),r[1].length);
	}
	if((r = fmt.match(/^#,#*,#0/))) return write_num_flt(type,fmt.replace(/^#,#*,/,""),val);
	if((r = fmt.match(/^([0#]+)(\\?-([0#]+))+$/))) {
		o = _strrev(write_num_flt(type, fmt.replace(/[\\-]/g,""), val));
		ri = 0;
		return _strrev(_strrev(fmt.replace(/\\/g,"")).replace(/[0#]/g,function(x){return ri<o.length?o.charAt(ri++):x==='0'?'0':"";}));
	}
	if(fmt.match(phone)) {
		o = write_num_flt(type, "##########", val);
		return "(" + o.substr(0,3) + ") " + o.substr(3, 3) + "-" + o.substr(6);
	}
	var oa = "";
	if((r = fmt.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))) {
		ri = Math.min(/*::String(*/r[4]/*::)*/.length,7);
		ff = SSF_frac(aval, Math.pow(10,ri)-1, false);
		o = "" + sign;
		oa = write_num("n", /*::String(*/r[1]/*::)*/, ff[1]);
		if(oa.charAt(oa.length-1) == " ") oa = oa.substr(0,oa.length-1) + "0";
		o += oa + /*::String(*/r[2]/*::)*/ + "/" + /*::String(*/r[3]/*::)*/;
		oa = rpad_(ff[2],ri);
		if(oa.length < r[4].length) oa = hashq(r[4].substr(r[4].length-oa.length)) + oa;
		o += oa;
		return o;
	}
	if((r = fmt.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))) {
		ri = Math.min(Math.max(r[1].length, r[4].length),7);
		ff = SSF_frac(aval, Math.pow(10,ri)-1, true);
		return sign + (ff[0]||(ff[1] ? "" : "0")) + " " + (ff[1] ? pad_(ff[1],ri) + r[2] + "/" + r[3] + rpad_(ff[2],ri): fill(" ", 2*ri+1 + r[2].length + r[3].length));
	}
	if((r = fmt.match(/^[#0?]+$/))) {
		o = pad0r(val, 0);
		if(fmt.length <= o.length) return o;
		return hashq(fmt.substr(0,fmt.length-o.length)) + o;
	}
	if((r = fmt.match(/^([#0?]+)\.([#0]+)$/))) {
		o = "" + val.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1");
		ri = o.indexOf(".");
		var lres = fmt.indexOf(".") - ri, rres = fmt.length - o.length - lres;
		return hashq(fmt.substr(0,lres) + o + fmt.substr(fmt.length-rres));
	}
	if((r = fmt.match(/^00,000\.([#0]*0)$/))) {
		ri = dec(val, r[1].length);
		return val < 0 ? "-" + write_num_flt(type, fmt, -val) : commaify(flr(val)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function($$) { return "00," + ($$.length < 3 ? pad0(0,3-$$.length) : "") + $$; }) + "." + pad0(ri,r[1].length);
	}
	switch(fmt) {
		case "###,##0.00": return write_num_flt(type, "#,##0.00", val);
		case "###,###":
		case "##,###":
		case "#,###": var x = commaify(pad0r(aval,0)); return x !== "0" ? sign + x : "";
		case "###,###.00": return write_num_flt(type, "###,##0.00",val).replace(/^0\./,".");
		case "#,###.00": return write_num_flt(type, "#,##0.00",val).replace(/^0\./,".");
		default:
	}
	throw new Error("unsupported format |" + fmt + "|");
}
function write_num_cm2(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{
	var idx = fmt.length - 1;
	while(fmt.charCodeAt(idx-1) === 44) --idx;
	return write_num(type, fmt.substr(0,idx), val / Math.pow(10,3*(fmt.length-idx)));
}
function write_num_pct2(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/{
	var sfmt = fmt.replace(pct1,""), mul = fmt.length - sfmt.length;
	return write_num(type, sfmt, val * Math.pow(10,2*mul)) + fill("%",mul);
}
function write_num_exp2(fmt/*:string*/, val/*:number*/)/*:string*/{
	var o/*:string*/;
	var idx = fmt.indexOf("E") - fmt.indexOf(".") - 1;
	if(fmt.match(/^#+0.0E\+0$/)) {
		if(val == 0) return "0.0E+0";
		else if(val < 0) return "-" + write_num_exp2(fmt, -val);
		var period = fmt.indexOf("."); if(period === -1) period=fmt.indexOf('E');
		var ee = Math.floor(Math.log(val)*Math.LOG10E)%period;
		if(ee < 0) ee += period;
		o = (val/Math.pow(10,ee)).toPrecision(idx+1+(period+ee)%period);
		if(!o.match(/[Ee]/)) {
			var fakee = Math.floor(Math.log(val)*Math.LOG10E);
			if(o.indexOf(".") === -1) o = o.charAt(0) + "." + o.substr(1) + "E+" + (fakee - o.length+ee);
			else o += "E+" + (fakee - ee);
			o = o.replace(/\+-/,"-");
		}
		o = o.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function($$,$1,$2,$3) { return $1 + $2 + $3.substr(0,(period+ee)%period) + "." + $3.substr(ee) + "E"; });
	} else o = val.toExponential(idx);
	if(fmt.match(/E\+00$/) && o.match(/e[+-]\d$/)) o = o.substr(0,o.length-1) + "0" + o.charAt(o.length-1);
	if(fmt.match(/E\-/) && o.match(/e\+/)) o = o.replace(/e\+/,"e");
	return o.replace("e","E");
}
function write_num_int(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/ {
	if(type.charCodeAt(0) === 40 && !fmt.match(closeparen)) {
		var ffmt = fmt.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");
		if(val >= 0) return write_num_int('n', ffmt, val);
		return '(' + write_num_int('n', ffmt, -val) + ')';
	}
	if(fmt.charCodeAt(fmt.length - 1) === 44) return write_num_cm2(type, fmt, val);
	if(fmt.indexOf('%') !== -1) return write_num_pct2(type, fmt, val);
	if(fmt.indexOf('E') !== -1) return write_num_exp2(fmt, val);
	if(fmt.charCodeAt(0) === 36) return "$"+write_num_int(type,fmt.substr(fmt.charAt(1)==' '?2:1),val);
	var o;
	var r/*:?Array<string>*/, ri, ff, aval = Math.abs(val), sign = val < 0 ? "-" : "";
	if(fmt.match(/^00+$/)) return sign + pad0(aval,fmt.length);
	if(fmt.match(/^[#?]+$/)) {
		o = (""+val); if(val === 0) o = "";
		return o.length > fmt.length ? o : hashq(fmt.substr(0,fmt.length-o.length)) + o;
	}
	if((r = fmt.match(frac1))) return write_num_f2(r, aval, sign);
	if(fmt.match(/^#+0+$/)) return sign + pad0(aval,fmt.length - fmt.indexOf("0"));
	if((r = fmt.match(dec1))) {
		/*:: if(!Array.isArray(r)) throw new Error("unreachable"); */
		o = (""+val).replace(/^([^\.]+)$/,"$1."+hashq(r[1])).replace(/\.$/,"."+hashq(r[1]));
		o = o.replace(/\.(\d*)$/,function($$, $1) {
		/*:: if(!Array.isArray(r)) throw new Error("unreachable"); */
			return "." + $1 + fill("0", hashq(r[1]).length-$1.length); });
		return fmt.indexOf("0.") !== -1 ? o : o.replace(/^0\./,".");
	}
	fmt = fmt.replace(/^#+([0.])/, "$1");
	if((r = fmt.match(/^(0*)\.(#*)$/))) {
		return sign + (""+aval).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,r[1].length?"0.":".");
	}
	if((r = fmt.match(/^#{1,3},##0(\.?)$/))) return sign + commaify((""+aval));
	if((r = fmt.match(/^#,##0\.([#0]*0)$/))) {
		return val < 0 ? "-" + write_num_int(type, fmt, -val) : commaify((""+val)) + "." + fill('0',r[1].length);
	}
	if((r = fmt.match(/^#,#*,#0/))) return write_num_int(type,fmt.replace(/^#,#*,/,""),val);
	if((r = fmt.match(/^([0#]+)(\\?-([0#]+))+$/))) {
		o = _strrev(write_num_int(type, fmt.replace(/[\\-]/g,""), val));
		ri = 0;
		return _strrev(_strrev(fmt.replace(/\\/g,"")).replace(/[0#]/g,function(x){return ri<o.length?o.charAt(ri++):x==='0'?'0':"";}));
	}
	if(fmt.match(phone)) {
		o = write_num_int(type, "##########", val);
		return "(" + o.substr(0,3) + ") " + o.substr(3, 3) + "-" + o.substr(6);
	}
	var oa = "";
	if((r = fmt.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))) {
		ri = Math.min(/*::String(*/r[4]/*::)*/.length,7);
		ff = SSF_frac(aval, Math.pow(10,ri)-1, false);
		o = "" + sign;
		oa = write_num("n", /*::String(*/r[1]/*::)*/, ff[1]);
		if(oa.charAt(oa.length-1) == " ") oa = oa.substr(0,oa.length-1) + "0";
		o += oa + /*::String(*/r[2]/*::)*/ + "/" + /*::String(*/r[3]/*::)*/;
		oa = rpad_(ff[2],ri);
		if(oa.length < r[4].length) oa = hashq(r[4].substr(r[4].length-oa.length)) + oa;
		o += oa;
		return o;
	}
	if((r = fmt.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))) {
		ri = Math.min(Math.max(r[1].length, r[4].length),7);
		ff = SSF_frac(aval, Math.pow(10,ri)-1, true);
		return sign + (ff[0]||(ff[1] ? "" : "0")) + " " + (ff[1] ? pad_(ff[1],ri) + r[2] + "/" + r[3] + rpad_(ff[2],ri): fill(" ", 2*ri+1 + r[2].length + r[3].length));
	}
	if((r = fmt.match(/^[#0?]+$/))) {
		o = "" + val;
		if(fmt.length <= o.length) return o;
		return hashq(fmt.substr(0,fmt.length-o.length)) + o;
	}
	if((r = fmt.match(/^([#0]+)\.([#0]+)$/))) {
		o = "" + val.toFixed(Math.min(r[2].length,10)).replace(/([^0])0+$/,"$1");
		ri = o.indexOf(".");
		var lres = fmt.indexOf(".") - ri, rres = fmt.length - o.length - lres;
		return hashq(fmt.substr(0,lres) + o + fmt.substr(fmt.length-rres));
	}
	if((r = fmt.match(/^00,000\.([#0]*0)$/))) {
		return val < 0 ? "-" + write_num_int(type, fmt, -val) : commaify(""+val).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function($$) { return "00," + ($$.length < 3 ? pad0(0,3-$$.length) : "") + $$; }) + "." + pad0(0,r[1].length);
	}
	switch(fmt) {
		case "###,###":
		case "##,###":
		case "#,###": var x = commaify(""+aval); return x !== "0" ? sign + x : "";
		default:
			if(fmt.match(/\.[0#?]*$/)) return write_num_int(type, fmt.slice(0,fmt.lastIndexOf(".")), val) + hashq(fmt.slice(fmt.lastIndexOf(".")));
	}
	throw new Error("unsupported format |" + fmt + "|");
}
function write_num(type/*:string*/, fmt/*:string*/, val/*:number*/)/*:string*/ {
	return (val|0) === val ? write_num_int(type, fmt, val) : write_num_flt(type, fmt, val);
}
function SSF_split_fmt(fmt/*:string*/)/*:Array<string>*/ {
	var out/*:Array<string>*/ = [];
	var in_str = false/*, cc*/;
	for(var i = 0, j = 0; i < fmt.length; ++i) switch((/*cc=*/fmt.charCodeAt(i))) {
		case 34: /* '"' */
			in_str = !in_str; break;
		case 95: case 42: case 92: /* '_' '*' '\\' */
			++i; break;
		case 59: /* ';' */
			out[out.length] = fmt.substr(j,i-j);
			j = i+1;
	}
	out[out.length] = fmt.substr(j);
	if(in_str === true) throw new Error("Format |" + fmt + "| unterminated string ");
	return out;
}

var SSF_abstime = /\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;
function fmt_is_date(fmt/*:string*/)/*:boolean*/ {
	var i = 0, /*cc = 0,*/ c = "", o = "";
	while(i < fmt.length) {
		switch((c = fmt.charAt(i))) {
			case 'G': if(SSF_isgeneral(fmt, i)) i+= 6; i++; break;
			case '"': for(;(/*cc=*/fmt.charCodeAt(++i)) !== 34 && i < fmt.length;){/*empty*/} ++i; break;
			case '\\': i+=2; break;
			case '_': i+=2; break;
			case '@': ++i; break;
			case 'B': case 'b':
				if(fmt.charAt(i+1) === "1" || fmt.charAt(i+1) === "2") return true;
				/* falls through */
			case 'M': case 'D': case 'Y': case 'H': case 'S': case 'E':
				/* falls through */
			case 'm': case 'd': case 'y': case 'h': case 's': case 'e': case 'g': return true;
			case 'A': case 'a': case '上':
				if(fmt.substr(i, 3).toUpperCase() === "A/P") return true;
				if(fmt.substr(i, 5).toUpperCase() === "AM/PM") return true;
				if(fmt.substr(i, 5).toUpperCase() === "上午/下午") return true;
				++i; break;
			case '[':
				o = c;
				while(fmt.charAt(i++) !== ']' && i < fmt.length) o += fmt.charAt(i);
				if(o.match(SSF_abstime)) return true;
				break;
			case '.':
				/* falls through */
			case '0': case '#':
				while(i < fmt.length && ("0#?.,E+-%".indexOf(c=fmt.charAt(++i)) > -1 || (c=='\\' && fmt.charAt(i+1) == "-" && "0#".indexOf(fmt.charAt(i+2))>-1))){/* empty */}
				break;
			case '?': while(fmt.charAt(++i) === c){/* empty */} break;
			case '*': ++i; if(fmt.charAt(i) == ' ' || fmt.charAt(i) == '*') ++i; break;
			case '(': case ')': ++i; break;
			case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
				while(i < fmt.length && "0123456789".indexOf(fmt.charAt(++i)) > -1){/* empty */} break;
			case ' ': ++i; break;
			default: ++i; break;
		}
	}
	return false;
}

function eval_fmt(fmt/*:string*/, v/*:any*/, opts/*:any*/, flen/*:number*/) {
	var out = [], o = "", i = 0, c = "", lst='t', dt, j, cc;
	var hr='H';
	/* Tokenize */
	while(i < fmt.length) {
		switch((c = fmt.charAt(i))) {
			case 'G': /* General */
				if(!SSF_isgeneral(fmt, i)) throw new Error('unrecognized character ' + c + ' in ' +fmt);
				out[out.length] = {t:'G', v:'General'}; i+=7; break;
			case '"': /* Literal text */
				for(o="";(cc=fmt.charCodeAt(++i)) !== 34 && i < fmt.length;) o += String.fromCharCode(cc);
				out[out.length] = {t:'t', v:o}; ++i; break;
			case '\\': var w = fmt.charAt(++i), t = (w === "(" || w === ")") ? w : 't';
				out[out.length] = {t:t, v:w}; ++i; break;
			case '_': out[out.length] = {t:'t', v:" "}; i+=2; break;
			case '@': /* Text Placeholder */
				out[out.length] = {t:'T', v:v}; ++i; break;
			case 'B': case 'b':
				if(fmt.charAt(i+1) === "1" || fmt.charAt(i+1) === "2") {
					if(dt==null) { dt=SSF_parse_date_code(v, opts, fmt.charAt(i+1) === "2"); if(dt==null) return ""; }
					out[out.length] = {t:'X', v:fmt.substr(i,2)}; lst = c; i+=2; break;
				}
				/* falls through */
			case 'M': case 'D': case 'Y': case 'H': case 'S': case 'E':
				c = c.toLowerCase();
				/* falls through */
			case 'm': case 'd': case 'y': case 'h': case 's': case 'e': case 'g':
				if(v < 0) return "";
				if(dt==null) { dt=SSF_parse_date_code(v, opts); if(dt==null) return ""; }
				o = c; while(++i < fmt.length && fmt.charAt(i).toLowerCase() === c) o+=c;
				if(c === 'm' && lst.toLowerCase() === 'h') c = 'M';
				if(c === 'h') c = hr;
				out[out.length] = {t:c, v:o}; lst = c; break;
			case 'A': case 'a': case '上':
				var q={t:c, v:c};
				if(dt==null) dt=SSF_parse_date_code(v, opts);
				if(fmt.substr(i, 3).toUpperCase() === "A/P") { if(dt!=null) q.v = dt.H >= 12 ? "P" : "A"; q.t = 'T'; hr='h';i+=3;}
				else if(fmt.substr(i,5).toUpperCase() === "AM/PM") { if(dt!=null) q.v = dt.H >= 12 ? "PM" : "AM"; q.t = 'T'; i+=5; hr='h'; }
				else if(fmt.substr(i,5).toUpperCase() === "上午/下午") { if(dt!=null) q.v = dt.H >= 12 ? "下午" : "上午"; q.t = 'T'; i+=5; hr='h'; }
				else { q.t = "t"; ++i; }
				if(dt==null && q.t === 'T') return "";
				out[out.length] = q; lst = c; break;
			case '[':
				o = c;
				while(fmt.charAt(i++) !== ']' && i < fmt.length) o += fmt.charAt(i);
				if(o.slice(-1) !== ']') throw 'unterminated "[" block: |' + o + '|';
				if(o.match(SSF_abstime)) {
					if(dt==null) { dt=SSF_parse_date_code(v, opts); if(dt==null) return ""; }
					out[out.length] = {t:'Z', v:o.toLowerCase()};
					lst = o.charAt(1);
				} else if(o.indexOf("$") > -1) {
					o = (o.match(/\$([^-\[\]]*)/)||[])[1]||"$";
					if(!fmt_is_date(fmt)) out[out.length] = {t:'t',v:o};
				}
				break;
			/* Numbers */
			case '.':
				if(dt != null) {
					o = c; while(++i < fmt.length && (c=fmt.charAt(i)) === "0") o += c;
					out[out.length] = {t:'s', v:o}; break;
				}
				/* falls through */
			case '0': case '#':
				o = c; while(++i < fmt.length && "0#?.,E+-%".indexOf(c=fmt.charAt(i)) > -1) o += c;
				out[out.length] = {t:'n', v:o}; break;
			case '?':
				o = c; while(fmt.charAt(++i) === c) o+=c;
				out[out.length] = {t:c, v:o}; lst = c; break;
			case '*': ++i; if(fmt.charAt(i) == ' ' || fmt.charAt(i) == '*') ++i; break; // **
			case '(': case ')': out[out.length] = {t:(flen===1?'t':c), v:c}; ++i; break;
			case '1': case '2': case '3': case '4': case '5': case '6': case '7': case '8': case '9':
				o = c; while(i < fmt.length && "0123456789".indexOf(fmt.charAt(++i)) > -1) o+=fmt.charAt(i);
				out[out.length] = {t:'D', v:o}; break;
			case ' ': out[out.length] = {t:c, v:c}; ++i; break;
			case '$': out[out.length] = {t:'t', v:'$'}; ++i; break;
			default:
				if(",$-+/():!^&'~{}<>=€acfijklopqrtuvwxzP".indexOf(c) === -1) throw new Error('unrecognized character ' + c + ' in ' + fmt);
				out[out.length] = {t:'t', v:c}; ++i; break;
		}
	}

	/* Scan for date/time parts */
	var bt = 0, ss0 = 0, ssm;
	for(i=out.length-1, lst='t'; i >= 0; --i) {
		switch(out[i].t) {
			case 'h': case 'H': out[i].t = hr; lst='h'; if(bt < 1) bt = 1; break;
			case 's':
				if((ssm=out[i].v.match(/\.0+$/))) ss0=Math.max(ss0,ssm[0].length-1);
				if(bt < 3) bt = 3;
			/* falls through */
			case 'd': case 'y': case 'M': case 'e': lst=out[i].t; break;
			case 'm': if(lst === 's') { out[i].t = 'M'; if(bt < 2) bt = 2; } break;
			case 'X': /*if(out[i].v === "B2");*/
				break;
			case 'Z':
				if(bt < 1 && out[i].v.match(/[Hh]/)) bt = 1;
				if(bt < 2 && out[i].v.match(/[Mm]/)) bt = 2;
				if(bt < 3 && out[i].v.match(/[Ss]/)) bt = 3;
		}
	}
	/* time rounding depends on presence of minute / second / usec fields */
	switch(bt) {
		case 0: break;
		case 1:
			/*::if(!dt) break;*/
			if(dt.u >= 0.5) { dt.u = 0; ++dt.S; }
			if(dt.S >=  60) { dt.S = 0; ++dt.M; }
			if(dt.M >=  60) { dt.M = 0; ++dt.H; }
			break;
		case 2:
			/*::if(!dt) break;*/
			if(dt.u >= 0.5) { dt.u = 0; ++dt.S; }
			if(dt.S >=  60) { dt.S = 0; ++dt.M; }
			break;
	}

	/* replace fields */
	var nstr = "", jj;
	for(i=0; i < out.length; ++i) {
		switch(out[i].t) {
			case 't': case 'T': case ' ': case 'D': break;
			case 'X': out[i].v = ""; out[i].t = ";"; break;
			case 'd': case 'm': case 'y': case 'h': case 'H': case 'M': case 's': case 'e': case 'b': case 'Z':
				/*::if(!dt) throw "unreachable"; */
				out[i].v = SSF_write_date(out[i].t.charCodeAt(0), out[i].v, dt, ss0);
				out[i].t = 't'; break;
			case 'n': case '?':
				jj = i+1;
				while(out[jj] != null && (
					(c=out[jj].t) === "?" || c === "D" ||
					((c === " " || c === "t") && out[jj+1] != null && (out[jj+1].t === '?' || out[jj+1].t === "t" && out[jj+1].v === '/')) ||
					(out[i].t === '(' && (c === ' ' || c === 'n' || c === ')')) ||
					(c === 't' && (out[jj].v === '/' || out[jj].v === ' ' && out[jj+1] != null && out[jj+1].t == '?'))
				)) {
					out[i].v += out[jj].v;
					out[jj] = {v:"", t:";"}; ++jj;
				}
				nstr += out[i].v;
				i = jj-1; break;
			case 'G': out[i].t = 't'; out[i].v = SSF_general(v,opts); break;
		}
	}
	var vv = "", myv, ostr;
	if(nstr.length > 0) {
		if(nstr.charCodeAt(0) == 40) /* '(' */ {
			myv = (v<0&&nstr.charCodeAt(0) === 45 ? -v : v);
			ostr = write_num('n', nstr, myv);
		} else {
			myv = (v<0 && flen > 1 ? -v : v);
			ostr = write_num('n', nstr, myv);
			if(myv < 0 && out[0] && out[0].t == 't') {
				ostr = ostr.substr(1);
				out[0].v = "-" + out[0].v;
			}
		}
		jj=ostr.length-1;
		var decpt = out.length;
		for(i=0; i < out.length; ++i) if(out[i] != null && out[i].t != 't' && out[i].v.indexOf(".") > -1) { decpt = i; break; }
		var lasti=out.length;
		if(decpt === out.length && ostr.indexOf("E") === -1) {
			for(i=out.length-1; i>= 0;--i) {
				if(out[i] == null || 'n?'.indexOf(out[i].t) === -1) continue;
				if(jj>=out[i].v.length-1) { jj -= out[i].v.length; out[i].v = ostr.substr(jj+1, out[i].v.length); }
				else if(jj < 0) out[i].v = "";
				else { out[i].v = ostr.substr(0, jj+1); jj = -1; }
				out[i].t = 't';
				lasti = i;
			}
			if(jj>=0 && lasti<out.length) out[lasti].v = ostr.substr(0,jj+1) + out[lasti].v;
		}
		else if(decpt !== out.length && ostr.indexOf("E") === -1) {
			jj = ostr.indexOf(".")-1;
			for(i=decpt; i>= 0; --i) {
				if(out[i] == null || 'n?'.indexOf(out[i].t) === -1) continue;
				j=out[i].v.indexOf(".")>-1&&i===decpt?out[i].v.indexOf(".")-1:out[i].v.length-1;
				vv = out[i].v.substr(j+1);
				for(; j>=0; --j) {
					if(jj>=0 && (out[i].v.charAt(j) === "0" || out[i].v.charAt(j) === "#")) vv = ostr.charAt(jj--) + vv;
				}
				out[i].v = vv;
				out[i].t = 't';
				lasti = i;
			}
			if(jj>=0 && lasti<out.length) out[lasti].v = ostr.substr(0,jj+1) + out[lasti].v;
			jj = ostr.indexOf(".")+1;
			for(i=decpt; i<out.length; ++i) {
				if(out[i] == null || ('n?('.indexOf(out[i].t) === -1 && i !== decpt)) continue;
				j=out[i].v.indexOf(".")>-1&&i===decpt?out[i].v.indexOf(".")+1:0;
				vv = out[i].v.substr(0,j);
				for(; j<out[i].v.length; ++j) {
					if(jj<ostr.length) vv += ostr.charAt(jj++);
				}
				out[i].v = vv;
				out[i].t = 't';
				lasti = i;
			}
		}
	}
	for(i=0; i<out.length; ++i) if(out[i] != null && 'n?'.indexOf(out[i].t)>-1) {
		myv = (flen >1 && v < 0 && i>0 && out[i-1].v === "-" ? -v:v);
		out[i].v = write_num(out[i].t, out[i].v, myv);
		out[i].t = 't';
	}
	var retval = "";
	for(i=0; i !== out.length; ++i) if(out[i] != null) retval += out[i].v;
	return retval;
}

var cfregex2 = /\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;
function chkcond(v, rr) {
	if(rr == null) return false;
	var thresh = parseFloat(rr[2]);
	switch(rr[1]) {
		case "=":  if(v == thresh) return true; break;
		case ">":  if(v >  thresh) return true; break;
		case "<":  if(v <  thresh) return true; break;
		case "<>": if(v != thresh) return true; break;
		case ">=": if(v >= thresh) return true; break;
		case "<=": if(v <= thresh) return true; break;
	}
	return false;
}
function choose_fmt(f/*:string*/, v/*:any*/) {
	var fmt = SSF_split_fmt(f);
	var l = fmt.length, lat = fmt[l-1].indexOf("@");
	if(l<4 && lat>-1) --l;
	if(fmt.length > 4) throw new Error("cannot find right format for |" + fmt.join("|") + "|");
	if(typeof v !== "number") return [4, fmt.length === 4 || lat>-1?fmt[fmt.length-1]:"@"];
	switch(fmt.length) {
		case 1: fmt = lat>-1 ? ["General", "General", "General", fmt[0]] : [fmt[0], fmt[0], fmt[0], "@"]; break;
		case 2: fmt = lat>-1 ? [fmt[0], fmt[0], fmt[0], fmt[1]] : [fmt[0], fmt[1], fmt[0], "@"]; break;
		case 3: fmt = lat>-1 ? [fmt[0], fmt[1], fmt[0], fmt[2]] : [fmt[0], fmt[1], fmt[2], "@"]; break;
		case 4: break;
	}
	var ff = v > 0 ? fmt[0] : v < 0 ? fmt[1] : fmt[2];
	if(fmt[0].indexOf("[") === -1 && fmt[1].indexOf("[") === -1) return [l, ff];
	if(fmt[0].match(/\[[=<>]/) != null || fmt[1].match(/\[[=<>]/) != null) {
		var m1 = fmt[0].match(cfregex2);
		var m2 = fmt[1].match(cfregex2);
		return chkcond(v, m1) ? [l, fmt[0]] : chkcond(v, m2) ? [l, fmt[1]] : [l, fmt[m1 != null && m2 != null ? 2 : 1]];
	}
	return [l, ff];
}
function SSF_format(fmt/*:string|number*/,v/*:any*/,o/*:?any*/) {
	if(o == null) o = {};
	var sfmt = "";
	switch(typeof fmt) {
		case "string":
			if(fmt == "m/d/yy" && o.dateNF) sfmt = o.dateNF;
			else sfmt = fmt;
			break;
		case "number":
			if(fmt == 14 && o.dateNF) sfmt = o.dateNF;
			else sfmt = (o.table != null ? (o.table/*:any*/) : table_fmt)[fmt];
			if(sfmt == null) sfmt = (o.table && o.table[SSF_default_map[fmt]]) || table_fmt[SSF_default_map[fmt]];
			if(sfmt == null) sfmt = SSF_default_str[fmt] || "General";
			break;
	}
	if(SSF_isgeneral(sfmt,0)) return SSF_general(v, o);
	if(v instanceof Date) v = datenum_local(v, o.date1904);
	var f = choose_fmt(sfmt, v);
	if(SSF_isgeneral(f[1])) return SSF_general(v, o);
	if(v === true) v = "TRUE"; else if(v === false) v = "FALSE";
	else if(v === "" || v == null) return "";
	return eval_fmt(f[1], v, o, f[0]);
}
function SSF_load(fmt/*:string*/, idx/*:?number*/)/*:number*/ {
	if(typeof idx != 'number') {
		idx = +idx || -1;
/*::if(typeof idx != 'number') return 0x188; */
		for(var i = 0; i < 0x0188; ++i) {
/*::if(typeof idx != 'number') return 0x188; */
			if(table_fmt[i] == undefined) { if(idx < 0) idx = i; continue; }
			if(table_fmt[i] == fmt) { idx = i; break; }
		}
/*::if(typeof idx != 'number') return 0x188; */
		if(idx < 0) idx = 0x187;
	}
/*::if(typeof idx != 'number') return 0x188; */
	table_fmt[idx] = fmt;
	return idx;
}
function SSF_load_table(tbl/*:SSFTable*/)/*:void*/ {
	for(var i=0; i!=0x0188; ++i)
		if(tbl[i] !== undefined) SSF_load(tbl[i], i);
}

function make_ssf() {
	table_fmt = SSF_init_table();
}

var SSF = {
	format: SSF_format,
	load: SSF_load,
	_table: table_fmt,
	load_table: SSF_load_table,
	parse_date_code: SSF_parse_date_code,
	is_date: fmt_is_date,
	get_table: function get_table() { return SSF._table = table_fmt; }
};

var SSFImplicit/*{[number]:string}*/ = ({
	"5": '"$"#,##0_);\\("$"#,##0\\)',
	"6": '"$"#,##0_);[Red]\\("$"#,##0\\)',
	"7": '"$"#,##0.00_);\\("$"#,##0.00\\)',
	"8": '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',
	"23": 'General', "24": 'General', "25": 'General', "26": 'General',
	"27": 'm/d/yy', "28": 'm/d/yy', "29": 'm/d/yy', "30": 'm/d/yy', "31": 'm/d/yy',
	"32": 'h:mm:ss', "33": 'h:mm:ss', "34": 'h:mm:ss', "35": 'h:mm:ss',
	"36": 'm/d/yy',
	"41": '_(* #,##0_);_(* \(#,##0\);_(* "-"_);_(@_)',
	"42": '_("$"* #,##0_);_("$"* \(#,##0\);_("$"* "-"_);_(@_)',
	"43": '_(* #,##0.00_);_(* \(#,##0.00\);_(* "-"??_);_(@_)',
	"44": '_("$"* #,##0.00_);_("$"* \(#,##0.00\);_("$"* "-"??_);_(@_)',
	"50": 'm/d/yy', "51": 'm/d/yy', "52": 'm/d/yy', "53": 'm/d/yy', "54": 'm/d/yy',
	"55": 'm/d/yy', "56": 'm/d/yy', "57": 'm/d/yy', "58": 'm/d/yy',
	"59": '0',
	"60": '0.00',
	"61": '#,##0',
	"62": '#,##0.00',
	"63": '"$"#,##0_);\\("$"#,##0\\)',
	"64": '"$"#,##0_);[Red]\\("$"#,##0\\)',
	"65": '"$"#,##0.00_);\\("$"#,##0.00\\)',
	"66": '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',
	"67": '0%',
	"68": '0.00%',
	"69": '# ?/?',
	"70": '# ??/??',
	"71": 'm/d/yy',
	"72": 'm/d/yy',
	"73": 'd-mmm-yy',
	"74": 'd-mmm',
	"75": 'mmm-yy',
	"76": 'h:mm',
	"77": 'h:mm:ss',
	"78": 'm/d/yy h:mm',
	"79": 'mm:ss',
	"80": '[h]:mm:ss',
	"81": 'mmss.0'
}/*:any*/);

/* dateNF parse TODO: move to SSF */
var dateNFregex = /[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;
function dateNF_regex(dateNF/*:string|number*/)/*:RegExp*/ {
	var fmt = typeof dateNF == "number" ? table_fmt[dateNF] : dateNF;
	fmt = fmt.replace(dateNFregex, "(\\d+)");
	return new RegExp("^" + fmt + "$");
}
function dateNF_fix(str/*:string*/, dateNF/*:string*/, match/*:Array<string>*/)/*:string*/ {
	var Y = -1, m = -1, d = -1, H = -1, M = -1, S = -1;
	(dateNF.match(dateNFregex)||[]).forEach(function(n, i) {
		var v = parseInt(match[i+1], 10);
		switch(n.toLowerCase().charAt(0)) {
			case 'y': Y = v; break; case 'd': d = v; break;
			case 'h': H = v; break; case 's': S = v; break;
			case 'm': if(H >= 0) M = v; else m = v; break;
		}
	});
	if(S >= 0 && M == -1 && m >= 0) { M = m; m = -1; }
	var datestr = (("" + (Y>=0?Y: new Date().getFullYear())).slice(-4) + "-" + ("00" + (m>=1?m:1)).slice(-2) + "-" + ("00" + (d>=1?d:1)).slice(-2));
	if(datestr.length == 7) datestr = "0" + datestr;
	if(datestr.length == 8) datestr = "20" + datestr;
	var timestr = (("00" + (H>=0?H:0)).slice(-2) + ":" + ("00" + (M>=0?M:0)).slice(-2) + ":" + ("00" + (S>=0?S:0)).slice(-2));
	if(H == -1 && M == -1 && S == -1) return datestr;
	if(Y == -1 && m == -1 && d == -1) return timestr;
	return datestr + "T" + timestr;
}

/*::
declare var ReadShift:any;
declare var CheckField:any;
declare var prep_blob:any;
declare var __readUInt32LE:any;
declare var __readInt32LE:any;
declare var __toBuffer:any;
declare var __utf16le:any;
declare var bconcat:any;
declare var s2a:any;
declare var chr0:any;
declare var chr1:any;
declare var has_buf:boolean;
declare var new_buf:any;
declare var new_raw_buf:any;
declare var new_unsafe_buf:any;
declare var Buffer_from:any;
*/
/* cfb.js (C) 2013-present SheetJS -- http://sheetjs.com */
/* vim: set ts=2: */
/*jshint eqnull:true */
/*exported CFB */
/*global Uint8Array:false, Uint16Array:false */

/*::
type SectorEntry = {
	name?:string;
	nodes?:Array<number>;
	data:RawBytes;
};
type SectorList = {
	[k:string|number]:SectorEntry;
	name:?string;
	fat_addrs:Array<number>;
	ssz:number;
}
type CFBFiles = {[n:string]:CFBEntry};
*/
/* crc32.js (C) 2014-present SheetJS -- http://sheetjs.com */
/* vim: set ts=2: */
/*exported CRC32 */
var CRC32 = /*#__PURE__*/(function() {
var CRC32 = {};
CRC32.version = '1.2.0';
/* see perf/crc32table.js */
/*global Int32Array */
function signed_crc_table()/*:any*/ {
	var c = 0, table/*:Array<number>*/ = new Array(256);

	for(var n =0; n != 256; ++n){
		c = n;
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		c = ((c&1) ? (-306674912 ^ (c >>> 1)) : (c >>> 1));
		table[n] = c;
	}

	return typeof Int32Array !== 'undefined' ? new Int32Array(table) : table;
}

var T0 = signed_crc_table();
function slice_by_16_tables(T) {
	var c = 0, v = 0, n = 0, table/*:Array<number>*/ = typeof Int32Array !== 'undefined' ? new Int32Array(4096) : new Array(4096) ;

	for(n = 0; n != 256; ++n) table[n] = T[n];
	for(n = 0; n != 256; ++n) {
		v = T[n];
		for(c = 256 + n; c < 4096; c += 256) v = table[c] = (v >>> 8) ^ T[v & 0xFF];
	}
	var out = [];
	for(n = 1; n != 16; ++n) out[n - 1] = typeof Int32Array !== 'undefined' ? table.subarray(n * 256, n * 256 + 256) : table.slice(n * 256, n * 256 + 256);
	return out;
}
var TT = slice_by_16_tables(T0);
var T1 = TT[0],  T2 = TT[1],  T3 = TT[2],  T4 = TT[3],  T5 = TT[4];
var T6 = TT[5],  T7 = TT[6],  T8 = TT[7],  T9 = TT[8],  Ta = TT[9];
var Tb = TT[10], Tc = TT[11], Td = TT[12], Te = TT[13], Tf = TT[14];
function crc32_bstr(bstr/*:string*/, seed/*:number*/)/*:number*/ {
	var C = seed/*:: ? 0 : 0 */ ^ -1;
	for(var i = 0, L = bstr.length; i < L;) C = (C>>>8) ^ T0[(C^bstr.charCodeAt(i++))&0xFF];
	return ~C;
}

function crc32_buf(B/*:Uint8Array|Array<number>*/, seed/*:number*/)/*:number*/ {
	var C = seed/*:: ? 0 : 0 */ ^ -1, L = B.length - 15, i = 0;
	for(; i < L;) C =
		Tf[B[i++] ^ (C & 255)] ^
		Te[B[i++] ^ ((C >> 8) & 255)] ^
		Td[B[i++] ^ ((C >> 16) & 255)] ^
		Tc[B[i++] ^ (C >>> 24)] ^
		Tb[B[i++]] ^ Ta[B[i++]] ^ T9[B[i++]] ^ T8[B[i++]] ^
		T7[B[i++]] ^ T6[B[i++]] ^ T5[B[i++]] ^ T4[B[i++]] ^
		T3[B[i++]] ^ T2[B[i++]] ^ T1[B[i++]] ^ T0[B[i++]];
	L += 15;
	while(i < L) C = (C>>>8) ^ T0[(C^B[i++])&0xFF];
	return ~C;
}

function crc32_str(str/*:string*/, seed/*:number*/)/*:number*/ {
	var C = seed ^ -1;
	for(var i = 0, L = str.length, c = 0, d = 0; i < L;) {
		c = str.charCodeAt(i++);
		if(c < 0x80) {
			C = (C>>>8) ^ T0[(C^c)&0xFF];
		} else if(c < 0x800) {
			C = (C>>>8) ^ T0[(C ^ (192|((c>>6)&31)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];
		} else if(c >= 0xD800 && c < 0xE000) {
			c = (c&1023)+64; d = str.charCodeAt(i++)&1023;
			C = (C>>>8) ^ T0[(C ^ (240|((c>>8)&7)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|((c>>2)&63)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|((d>>6)&15)|((c&3)<<4)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|(d&63)))&0xFF];
		} else {
			C = (C>>>8) ^ T0[(C ^ (224|((c>>12)&15)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|((c>>6)&63)))&0xFF];
			C = (C>>>8) ^ T0[(C ^ (128|(c&63)))&0xFF];
		}
	}
	return ~C;
}
CRC32.table = T0;
CRC32.bstr = crc32_bstr;
CRC32.buf = crc32_buf;
CRC32.str = crc32_str;
return CRC32;
})();
/* [MS-CFB] v20171201 */
var CFB = /*#__PURE__*/(function _CFB(){
var exports = {};
exports.version = '1.2.1';
/* [MS-CFB] 2.6.4 */
function namecmp(l/*:string*/, r/*:string*/)/*:number*/ {
	var L = l.split("/"), R = r.split("/");
	for(var i = 0, c = 0, Z = Math.min(L.length, R.length); i < Z; ++i) {
		if((c = L[i].length - R[i].length)) return c;
		if(L[i] != R[i]) return L[i] < R[i] ? -1 : 1;
	}
	return L.length - R.length;
}
function dirname(p/*:string*/)/*:string*/ {
	if(p.charAt(p.length - 1) == "/") return (p.slice(0,-1).indexOf("/") === -1) ? p : dirname(p.slice(0, -1));
	var c = p.lastIndexOf("/");
	return (c === -1) ? p : p.slice(0, c+1);
}

function filename(p/*:string*/)/*:string*/ {
	if(p.charAt(p.length - 1) == "/") return filename(p.slice(0, -1));
	var c = p.lastIndexOf("/");
	return (c === -1) ? p : p.slice(c+1);
}
/* -------------------------------------------------------------------------- */
/* DOS Date format:
   high|YYYYYYYm.mmmddddd.HHHHHMMM.MMMSSSSS|low
   add 1980 to stored year
   stored second should be doubled
*/

/* write JS date to buf as a DOS date */
function write_dos_date(buf/*:CFBlob*/, date/*:Date|string*/) {
	if(typeof date === "string") date = new Date(date);
	var hms/*:number*/ = date.getHours();
	hms = hms << 6 | date.getMinutes();
	hms = hms << 5 | (date.getSeconds()>>>1);
	buf.write_shift(2, hms);
	var ymd/*:number*/ = (date.getFullYear() - 1980);
	ymd = ymd << 4 | (date.getMonth()+1);
	ymd = ymd << 5 | date.getDate();
	buf.write_shift(2, ymd);
}

/* read four bytes from buf and interpret as a DOS date */
function parse_dos_date(buf/*:CFBlob*/)/*:Date*/ {
	var hms = buf.read_shift(2) & 0xFFFF;
	var ymd = buf.read_shift(2) & 0xFFFF;
	var val = new Date();
	var d = ymd & 0x1F; ymd >>>= 5;
	var m = ymd & 0x0F; ymd >>>= 4;
	val.setMilliseconds(0);
	val.setFullYear(ymd + 1980);
	val.setMonth(m-1);
	val.setDate(d);
	var S = hms & 0x1F; hms >>>= 5;
	var M = hms & 0x3F; hms >>>= 6;
	val.setHours(hms);
	val.setMinutes(M);
	val.setSeconds(S<<1);
	return val;
}
function parse_extra_field(blob/*:CFBlob*/)/*:any*/ {
	prep_blob(blob, 0);
	var o = /*::(*/{}/*:: :any)*/;
	var flags = 0;
	while(blob.l <= blob.length - 4) {
		var type = blob.read_shift(2);
		var sz = blob.read_shift(2), tgt = blob.l + sz;
		var p = {};
		switch(type) {
			/* UNIX-style Timestamps */
			case 0x5455: {
				flags = blob.read_shift(1);
				if(flags & 1) p.mtime = blob.read_shift(4);
				/* for some reason, CD flag corresponds to LFH */
				if(sz > 5) {
					if(flags & 2) p.atime = blob.read_shift(4);
					if(flags & 4) p.ctime = blob.read_shift(4);
				}
				if(p.mtime) p.mt = new Date(p.mtime*1000);
			}
			break;
		}
		blob.l = tgt;
		o[type] = p;
	}
	return o;
}
var fs/*:: = require('fs'); */;
function get_fs() { return fs || (fs = {}); }
function parse(file/*:RawBytes*/, options/*:CFBReadOpts*/)/*:CFBContainer*/ {
if(file[0] == 0x50 && file[1] == 0x4b) return parse_zip(file, options);
if((file[0] | 0x20) == 0x6d && (file[1]|0x20) == 0x69) return parse_mad(file, options);
if(file.length < 512) throw new Error("CFB file size " + file.length + " < 512");
var mver = 3;
var ssz = 512;
var nmfs = 0; // number of mini FAT sectors
var difat_sec_cnt = 0;
var dir_start = 0;
var minifat_start = 0;
var difat_start = 0;

var fat_addrs/*:Array<number>*/ = []; // locations of FAT sectors

/* [MS-CFB] 2.2 Compound File Header */
var blob/*:CFBlob*/ = /*::(*/file.slice(0,512)/*:: :any)*/;
prep_blob(blob, 0);

/* major version */
var mv = check_get_mver(blob);
mver = mv[0];
switch(mver) {
	case 3: ssz = 512; break; case 4: ssz = 4096; break;
	case 0: if(mv[1] == 0) return parse_zip(file, options);
	/* falls through */
	default: throw new Error("Major Version: Expected 3 or 4 saw " + mver);
}

/* reprocess header */
if(ssz !== 512) { blob = /*::(*/file.slice(0,ssz)/*:: :any)*/; prep_blob(blob, 28 /* blob.l */); }
/* Save header for final object */
var header/*:RawBytes*/ = file.slice(0,ssz);

check_shifts(blob, mver);

// Number of Directory Sectors
var dir_cnt/*:number*/ = blob.read_shift(4, 'i');
if(mver === 3 && dir_cnt !== 0) throw new Error('# Directory Sectors: Expected 0 saw ' + dir_cnt);

// Number of FAT Sectors
blob.l += 4;

// First Directory Sector Location
dir_start = blob.read_shift(4, 'i');

// Transaction Signature
blob.l += 4;

// Mini Stream Cutoff Size
blob.chk('00100000', 'Mini Stream Cutoff Size: ');

// First Mini FAT Sector Location
minifat_start = blob.read_shift(4, 'i');

// Number of Mini FAT Sectors
nmfs = blob.read_shift(4, 'i');

// First DIFAT sector location
difat_start = blob.read_shift(4, 'i');

// Number of DIFAT Sectors
difat_sec_cnt = blob.read_shift(4, 'i');

// Grab FAT Sector Locations
for(var q = -1, j = 0; j < 109; ++j) { /* 109 = (512 - blob.l)>>>2; */
	q = blob.read_shift(4, 'i');
	if(q<0) break;
	fat_addrs[j] = q;
}

/** Break the file up into sectors */
var sectors/*:Array<RawBytes>*/ = sectorify(file, ssz);

sleuth_fat(difat_start, difat_sec_cnt, sectors, ssz, fat_addrs);

/** Chains */
var sector_list/*:SectorList*/ = make_sector_list(sectors, dir_start, fat_addrs, ssz);

sector_list[dir_start].name = "!Directory";
if(nmfs > 0 && minifat_start !== ENDOFCHAIN) sector_list[minifat_start].name = "!MiniFAT";
sector_list[fat_addrs[0]].name = "!FAT";
sector_list.fat_addrs = fat_addrs;
sector_list.ssz = ssz;

/* [MS-CFB] 2.6.1 Compound File Directory Entry */
var files/*:CFBFiles*/ = {}, Paths/*:Array<string>*/ = [], FileIndex/*:CFBFileIndex*/ = [], FullPaths/*:Array<string>*/ = [];
read_directory(dir_start, sector_list, sectors, Paths, nmfs, files, FileIndex, minifat_start);

build_full_paths(FileIndex, FullPaths, Paths);
Paths.shift();

var o = {
	FileIndex: FileIndex,
	FullPaths: FullPaths
};

// $FlowIgnore
if(options && options.raw) o.raw = {header: header, sectors: sectors};
return o;
} // parse

/* [MS-CFB] 2.2 Compound File Header -- read up to major version */
function check_get_mver(blob/*:CFBlob*/)/*:[number, number]*/ {
	if(blob[blob.l] == 0x50 && blob[blob.l + 1] == 0x4b) return [0, 0];
	// header signature 8
	blob.chk(HEADER_SIGNATURE, 'Header Signature: ');

	// clsid 16
	//blob.chk(HEADER_CLSID, 'CLSID: ');
	blob.l += 16;

	// minor version 2
	var mver/*:number*/ = blob.read_shift(2, 'u');

	return [blob.read_shift(2,'u'), mver];
}
function check_shifts(blob/*:CFBlob*/, mver/*:number*/)/*:void*/ {
	var shift = 0x09;

	// Byte Order
	//blob.chk('feff', 'Byte Order: '); // note: some writers put 0xffff
	blob.l += 2;

	// Sector Shift
	switch((shift = blob.read_shift(2))) {
		case 0x09: if(mver != 3) throw new Error('Sector Shift: Expected 9 saw ' + shift); break;
		case 0x0c: if(mver != 4) throw new Error('Sector Shift: Expected 12 saw ' + shift); break;
		default: throw new Error('Sector Shift: Expected 9 or 12 saw ' + shift);
	}

	// Mini Sector Shift
	blob.chk('0600', 'Mini Sector Shift: ');

	// Reserved
	blob.chk('000000000000', 'Reserved: ');
}

/** Break the file up into sectors */
function sectorify(file/*:RawBytes*/, ssz/*:number*/)/*:Array<RawBytes>*/ {
	var nsectors = Math.ceil(file.length/ssz)-1;
	var sectors/*:Array<RawBytes>*/ = [];
	for(var i=1; i < nsectors; ++i) sectors[i-1] = file.slice(i*ssz,(i+1)*ssz);
	sectors[nsectors-1] = file.slice(nsectors*ssz);
	return sectors;
}

/* [MS-CFB] 2.6.4 Red-Black Tree */
function build_full_paths(FI/*:CFBFileIndex*/, FP/*:Array<string>*/, Paths/*:Array<string>*/)/*:void*/ {
	var i = 0, L = 0, R = 0, C = 0, j = 0, pl = Paths.length;
	var dad/*:Array<number>*/ = [], q/*:Array<number>*/ = [];

	for(; i < pl; ++i) { dad[i]=q[i]=i; FP[i]=Paths[i]; }

	for(; j < q.length; ++j) {
		i = q[j];
		L = FI[i].L; R = FI[i].R; C = FI[i].C;
		if(dad[i] === i) {
			if(L !== -1 /*NOSTREAM*/ && dad[L] !== L) dad[i] = dad[L];
			if(R !== -1 && dad[R] !== R) dad[i] = dad[R];
		}
		if(C !== -1 /*NOSTREAM*/) dad[C] = i;
		if(L !== -1 && i != dad[i]) { dad[L] = dad[i]; if(q.lastIndexOf(L) < j) q.push(L); }
		if(R !== -1 && i != dad[i]) { dad[R] = dad[i]; if(q.lastIndexOf(R) < j) q.push(R); }
	}
	for(i=1; i < pl; ++i) if(dad[i] === i) {
		if(R !== -1 /*NOSTREAM*/ && dad[R] !== R) dad[i] = dad[R];
		else if(L !== -1 && dad[L] !== L) dad[i] = dad[L];
	}

	for(i=1; i < pl; ++i) {
		if(FI[i].type === 0 /* unknown */) continue;
		j = i;
		if(j != dad[j]) do {
			j = dad[j];
			FP[i] = FP[j] + "/" + FP[i];
		} while (j !== 0 && -1 !== dad[j] && j != dad[j]);
		dad[i] = -1;
	}

	FP[0] += "/";
	for(i=1; i < pl; ++i) {
		if(FI[i].type !== 2 /* stream */) FP[i] += "/";
	}
}

function get_mfat_entry(entry/*:CFBEntry*/, payload/*:RawBytes*/, mini/*:?RawBytes*/)/*:CFBlob*/ {
	var start = entry.start, size = entry.size;
	//return (payload.slice(start*MSSZ, start*MSSZ + size)/*:any*/);
	var o = [];
	var idx = start;
	while(mini && size > 0 && idx >= 0) {
		o.push(payload.slice(idx * MSSZ, idx * MSSZ + MSSZ));
		size -= MSSZ;
		idx = __readInt32LE(mini, idx * 4);
	}
	if(o.length === 0) return (new_buf(0)/*:any*/);
	return (bconcat(o).slice(0, entry.size)/*:any*/);
}

/** Chase down the rest of the DIFAT chain to build a comprehensive list
    DIFAT chains by storing the next sector number as the last 32 bits */
function sleuth_fat(idx/*:number*/, cnt/*:number*/, sectors/*:Array<RawBytes>*/, ssz/*:number*/, fat_addrs)/*:void*/ {
	var q/*:number*/ = ENDOFCHAIN;
	if(idx === ENDOFCHAIN) {
		if(cnt !== 0) throw new Error("DIFAT chain shorter than expected");
	} else if(idx !== -1 /*FREESECT*/) {
		var sector = sectors[idx], m = (ssz>>>2)-1;
		if(!sector) return;
		for(var i = 0; i < m; ++i) {
			if((q = __readInt32LE(sector,i*4)) === ENDOFCHAIN) break;
			fat_addrs.push(q);
		}
		sleuth_fat(__readInt32LE(sector,ssz-4),cnt - 1, sectors, ssz, fat_addrs);
	}
}

/** Follow the linked list of sectors for a given starting point */
function get_sector_list(sectors/*:Array<RawBytes>*/, start/*:number*/, fat_addrs/*:Array<number>*/, ssz/*:number*/, chkd/*:?Array<boolean>*/)/*:SectorEntry*/ {
	var buf/*:Array<number>*/ = [], buf_chain/*:Array<any>*/ = [];
	if(!chkd) chkd = [];
	var modulus = ssz - 1, j = 0, jj = 0;
	for(j=start; j>=0;) {
		chkd[j] = true;
		buf[buf.length] = j;
		buf_chain.push(sectors[j]);
		var addr = fat_addrs[Math.floor(j*4/ssz)];
		jj = ((j*4) & modulus);
		if(ssz < 4 + jj) throw new Error("FAT boundary crossed: " + j + " 4 "+ssz);
		if(!sectors[addr]) break;
		j = __readInt32LE(sectors[addr], jj);
	}
	return {nodes: buf, data:__toBuffer([buf_chain])};
}

/** Chase down the sector linked lists */
function make_sector_list(sectors/*:Array<RawBytes>*/, dir_start/*:number*/, fat_addrs/*:Array<number>*/, ssz/*:number*/)/*:SectorList*/ {
	var sl = sectors.length, sector_list/*:SectorList*/ = ([]/*:any*/);
	var chkd/*:Array<boolean>*/ = [], buf/*:Array<number>*/ = [], buf_chain/*:Array<RawBytes>*/ = [];
	var modulus = ssz - 1, i=0, j=0, k=0, jj=0;
	for(i=0; i < sl; ++i) {
		buf = ([]/*:Array<number>*/);
		k = (i + dir_start); if(k >= sl) k-=sl;
		if(chkd[k]) continue;
		buf_chain = [];
		var seen = [];
		for(j=k; j>=0;) {
			seen[j] = true;
			chkd[j] = true;
			buf[buf.length] = j;
			buf_chain.push(sectors[j]);
			var addr/*:number*/ = fat_addrs[Math.floor(j*4/ssz)];
			jj = ((j*4) & modulus);
			if(ssz < 4 + jj) throw new Error("FAT boundary crossed: " + j + " 4 "+ssz);
			if(!sectors[addr]) break;
			j = __readInt32LE(sectors[addr], jj);
			if(seen[j]) break;
		}
		sector_list[k] = ({nodes: buf, data:__toBuffer([buf_chain])}/*:SectorEntry*/);
	}
	return sector_list;
}

/* [MS-CFB] 2.6.1 Compound File Directory Entry */
function read_directory(dir_start/*:number*/, sector_list/*:SectorList*/, sectors/*:Array<RawBytes>*/, Paths/*:Array<string>*/, nmfs, files, FileIndex, mini) {
	var minifat_store = 0, pl = (Paths.length?2:0);
	var sector = sector_list[dir_start].data;
	var i = 0, namelen = 0, name;
	for(; i < sector.length; i+= 128) {
		var blob/*:CFBlob*/ = /*::(*/sector.slice(i, i+128)/*:: :any)*/;
		prep_blob(blob, 64);
		namelen = blob.read_shift(2);
		name = __utf16le(blob,0,namelen-pl);
		Paths.push(name);
		var o/*:CFBEntry*/ = ({
			name:  name,
			type:  blob.read_shift(1),
			color: blob.read_shift(1),
			L:     blob.read_shift(4, 'i'),
			R:     blob.read_shift(4, 'i'),
			C:     blob.read_shift(4, 'i'),
			clsid: blob.read_shift(16),
			state: blob.read_shift(4, 'i'),
			start: 0,
			size: 0
		});
		var ctime/*:number*/ = blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2);
		if(ctime !== 0) o.ct = read_date(blob, blob.l-8);
		var mtime/*:number*/ = blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2) + blob.read_shift(2);
		if(mtime !== 0) o.mt = read_date(blob, blob.l-8);
		o.start = blob.read_shift(4, 'i');
		o.size = blob.read_shift(4, 'i');
		if(o.size < 0 && o.start < 0) { o.size = o.type = 0; o.start = ENDOFCHAIN; o.name = ""; }
		if(o.type === 5) { /* root */
			minifat_store = o.start;
			if(nmfs > 0 && minifat_store !== ENDOFCHAIN) sector_list[minifat_store].name = "!StreamData";
			/*minifat_size = o.size;*/
		} else if(o.size >= 4096 /* MSCSZ */) {
			o.storage = 'fat';
			if(sector_list[o.start] === undefined) sector_list[o.start] = get_sector_list(sectors, o.start, sector_list.fat_addrs, sector_list.ssz);
			sector_list[o.start].name = o.name;
			o.content = (sector_list[o.start].data.slice(0,o.size)/*:any*/);
		} else {
			o.storage = 'minifat';
			if(o.size < 0) o.size = 0;
			else if(minifat_store !== ENDOFCHAIN && o.start !== ENDOFCHAIN && sector_list[minifat_store]) {
				o.content = get_mfat_entry(o, sector_list[minifat_store].data, (sector_list[mini]||{}).data);
			}
		}
		if(o.content) prep_blob(o.content, 0);
		files[name] = o;
		FileIndex.push(o);
	}
}

function read_date(blob/*:RawBytes|CFBlob*/, offset/*:number*/)/*:Date*/ {
	return new Date(( ( (__readUInt32LE(blob,offset+4)/1e7)*Math.pow(2,32)+__readUInt32LE(blob,offset)/1e7 ) - 11644473600)*1000);
}

function read_file(filename/*:string*/, options/*:CFBReadOpts*/) {
	get_fs();
	return parse(fs.readFileSync(filename), options);
}

function read(blob/*:RawBytes|string*/, options/*:CFBReadOpts*/) {
	var type = options && options.type;
	if(!type) {
		if(has_buf && Buffer.isBuffer(blob)) type = "buffer";
	}
	switch(type || "base64") {
		case "file": /*:: if(typeof blob !== 'string') throw "Must pass a filename when type='file'"; */return read_file(blob, options);
		case "base64": /*:: if(typeof blob !== 'string') throw "Must pass a base64-encoded binary string when type='file'"; */return parse(s2a(Base64_decode(blob)), options);
		case "binary": /*:: if(typeof blob !== 'string') throw "Must pass a binary string when type='file'"; */return parse(s2a(blob), options);
	}
	return parse(/*::typeof blob == 'string' ? new Buffer(blob, 'utf-8') : */blob, options);
}

function init_cfb(cfb/*:CFBContainer*/, opts/*:?any*/)/*:void*/ {
	var o = opts || {}, root = o.root || "Root Entry";
	if(!cfb.FullPaths) cfb.FullPaths = [];
	if(!cfb.FileIndex) cfb.FileIndex = [];
	if(cfb.FullPaths.length !== cfb.FileIndex.length) throw new Error("inconsistent CFB structure");
	if(cfb.FullPaths.length === 0) {
		cfb.FullPaths[0] = root + "/";
		cfb.FileIndex[0] = ({ name: root, type: 5 }/*:any*/);
	}
	if(o.CLSID) cfb.FileIndex[0].clsid = o.CLSID;
	seed_cfb(cfb);
}
function seed_cfb(cfb/*:CFBContainer*/)/*:void*/ {
	var nm = "\u0001Sh33tJ5";
	if(CFB.find(cfb, "/" + nm)) return;
	var p = new_buf(4); p[0] = 55; p[1] = p[3] = 50; p[2] = 54;
	cfb.FileIndex.push(({ name: nm, type: 2, content:p, size:4, L:69, R:69, C:69 }/*:any*/));
	cfb.FullPaths.push(cfb.FullPaths[0] + nm);
	rebuild_cfb(cfb);
}
function rebuild_cfb(cfb/*:CFBContainer*/, f/*:?boolean*/)/*:void*/ {
	init_cfb(cfb);
	var gc = false, s = false;
	for(var i = cfb.FullPaths.length - 1; i >= 0; --i) {
		var _file = cfb.FileIndex[i];
		switch(_file.type) {
			case 0:
				if(s) gc = true;
				else { cfb.FileIndex.pop(); cfb.FullPaths.pop(); }
				break;
			case 1: case 2: case 5:
				s = true;
				if(isNaN(_file.R * _file.L * _file.C)) gc = true;
				if(_file.R > -1 && _file.L > -1 && _file.R == _file.L) gc = true;
				break;
			default: gc = true; break;
		}
	}
	if(!gc && !f) return;

	var now = new Date(1987, 1, 19), j = 0;
	// Track which names exist
	var fullPaths = Object.create ? Object.create(null) : {};
	var data/*:Array<[string, CFBEntry]>*/ = [];
	for(i = 0; i < cfb.FullPaths.length; ++i) {
		fullPaths[cfb.FullPaths[i]] = true;
		if(cfb.FileIndex[i].type === 0) continue;
		data.push([cfb.FullPaths[i], cfb.FileIndex[i]]);
	}
	for(i = 0; i < data.length; ++i) {
		var dad = dirname(data[i][0]);
		s = fullPaths[dad];
		if(!s) {
			data.push([dad, ({
				name: filename(dad).replace("/",""),
				type: 1,
				clsid: HEADER_CLSID,
				ct: now, mt: now,
				content: null
			}/*:any*/)]);
			// Add name to set
			fullPaths[dad] = true;
		}
	}

	data.sort(function(x,y) { return namecmp(x[0], y[0]); });
	cfb.FullPaths = []; cfb.FileIndex = [];
	for(i = 0; i < data.length; ++i) { cfb.FullPaths[i] = data[i][0]; cfb.FileIndex[i] = data[i][1]; }
	for(i = 0; i < data.length; ++i) {
		var elt = cfb.FileIndex[i];
		var nm = cfb.FullPaths[i];

		elt.name =  filename(nm).replace("/","");
		elt.L = elt.R = elt.C = -(elt.color = 1);
		elt.size = elt.content ? elt.content.length : 0;
		elt.start = 0;
		elt.clsid = (elt.clsid || HEADER_CLSID);
		if(i === 0) {
			elt.C = data.length > 1 ? 1 : -1;
			elt.size = 0;
			elt.type = 5;
		} else if(nm.slice(-1) == "/") {
			for(j=i+1;j < data.length; ++j) if(dirname(cfb.FullPaths[j])==nm) break;
			elt.C = j >= data.length ? -1 : j;
			for(j=i+1;j < data.length; ++j) if(dirname(cfb.FullPaths[j])==dirname(nm)) break;
			elt.R = j >= data.length ? -1 : j;
			elt.type = 1;
		} else {
			if(dirname(cfb.FullPaths[i+1]||"") == dirname(nm)) elt.R = i + 1;
			elt.type = 2;
		}
	}

}

function _write(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:RawBytes|string*/ {
	var _opts = options || {};
	/* MAD is order-sensitive, skip rebuild and sort */
	if(_opts.fileType == 'mad') return write_mad(cfb, _opts);
	rebuild_cfb(cfb);
	switch(_opts.fileType) {
		case 'zip': return write_zip(cfb, _opts);
		//case 'mad': return write_mad(cfb, _opts);
	}
	var L = (function(cfb/*:CFBContainer*/)/*:Array<number>*/{
		var mini_size = 0, fat_size = 0;
		for(var i = 0; i < cfb.FileIndex.length; ++i) {
			var file = cfb.FileIndex[i];
			if(!file.content) continue;
			/*:: if(file.content == null) throw new Error("unreachable"); */
			var flen = file.content.length;
			if(flen > 0){
				if(flen < 0x1000) mini_size += (flen + 0x3F) >> 6;
				else fat_size += (flen + 0x01FF) >> 9;
			}
		}
		var dir_cnt = (cfb.FullPaths.length +3) >> 2;
		var mini_cnt = (mini_size + 7) >> 3;
		var mfat_cnt = (mini_size + 0x7F) >> 7;
		var fat_base = mini_cnt + fat_size + dir_cnt + mfat_cnt;
		var fat_cnt = (fat_base + 0x7F) >> 7;
		var difat_cnt = fat_cnt <= 109 ? 0 : Math.ceil((fat_cnt-109)/0x7F);
		while(((fat_base + fat_cnt + difat_cnt + 0x7F) >> 7) > fat_cnt) difat_cnt = ++fat_cnt <= 109 ? 0 : Math.ceil((fat_cnt-109)/0x7F);
		var L =  [1, difat_cnt, fat_cnt, mfat_cnt, dir_cnt, fat_size, mini_size, 0];
		cfb.FileIndex[0].size = mini_size << 6;
		L[7] = (cfb.FileIndex[0].start=L[0]+L[1]+L[2]+L[3]+L[4]+L[5])+((L[6]+7) >> 3);
		return L;
	})(cfb);
	var o = new_buf(L[7] << 9);
	var i = 0, T = 0;
	{
		for(i = 0; i < 8; ++i) o.write_shift(1, HEADER_SIG[i]);
		for(i = 0; i < 8; ++i) o.write_shift(2, 0);
		o.write_shift(2, 0x003E);
		o.write_shift(2, 0x0003);
		o.write_shift(2, 0xFFFE);
		o.write_shift(2, 0x0009);
		o.write_shift(2, 0x0006);
		for(i = 0; i < 3; ++i) o.write_shift(2, 0);
		o.write_shift(4, 0);
		o.write_shift(4, L[2]);
		o.write_shift(4, L[0] + L[1] + L[2] + L[3] - 1);
		o.write_shift(4, 0);
		o.write_shift(4, 1<<12);
		o.write_shift(4, L[3] ? L[0] + L[1] + L[2] - 1: ENDOFCHAIN);
		o.write_shift(4, L[3]);
		o.write_shift(-4, L[1] ? L[0] - 1: ENDOFCHAIN);
		o.write_shift(4, L[1]);
		for(i = 0; i < 109; ++i) o.write_shift(-4, i < L[2] ? L[1] + i : -1);
	}
	if(L[1]) {
		for(T = 0; T < L[1]; ++T) {
			for(; i < 236 + T * 127; ++i) o.write_shift(-4, i < L[2] ? L[1] + i : -1);
			o.write_shift(-4, T === L[1] - 1 ? ENDOFCHAIN : T + 1);
		}
	}
	var chainit = function(w/*:number*/)/*:void*/ {
		for(T += w; i<T-1; ++i) o.write_shift(-4, i+1);
		if(w) { ++i; o.write_shift(-4, ENDOFCHAIN); }
	};
	T = i = 0;
	for(T+=L[1]; i<T; ++i) o.write_shift(-4, consts.DIFSECT);
	for(T+=L[2]; i<T; ++i) o.write_shift(-4, consts.FATSECT);
	chainit(L[3]);
	chainit(L[4]);
	var j/*:number*/ = 0, flen/*:number*/ = 0;
	var file/*:CFBEntry*/ = cfb.FileIndex[0];
	for(; j < cfb.FileIndex.length; ++j) {
		file = cfb.FileIndex[j];
		if(!file.content) continue;
		/*:: if(file.content == null) throw new Error("unreachable"); */
		flen = file.content.length;
		if(flen < 0x1000) continue;
		file.start = T;
		chainit((flen + 0x01FF) >> 9);
	}
	chainit((L[6] + 7) >> 3);
	while(o.l & 0x1FF) o.write_shift(-4, consts.ENDOFCHAIN);
	T = i = 0;
	for(j = 0; j < cfb.FileIndex.length; ++j) {
		file = cfb.FileIndex[j];
		if(!file.content) continue;
		/*:: if(file.content == null) throw new Error("unreachable"); */
		flen = file.content.length;
		if(!flen || flen >= 0x1000) continue;
		file.start = T;
		chainit((flen + 0x3F) >> 6);
	}
	while(o.l & 0x1FF) o.write_shift(-4, consts.ENDOFCHAIN);
	for(i = 0; i < L[4]<<2; ++i) {
		var nm = cfb.FullPaths[i];
		if(!nm || nm.length === 0) {
			for(j = 0; j < 17; ++j) o.write_shift(4, 0);
			for(j = 0; j < 3; ++j) o.write_shift(4, -1);
			for(j = 0; j < 12; ++j) o.write_shift(4, 0);
			continue;
		}
		file = cfb.FileIndex[i];
		if(i === 0) file.start = file.size ? file.start - 1 : ENDOFCHAIN;
		var _nm/*:string*/ = (i === 0 && _opts.root) || file.name;
		flen = 2*(_nm.length+1);
		o.write_shift(64, _nm, "utf16le");
		o.write_shift(2, flen);
		o.write_shift(1, file.type);
		o.write_shift(1, file.color);
		o.write_shift(-4, file.L);
		o.write_shift(-4, file.R);
		o.write_shift(-4, file.C);
		if(!file.clsid) for(j = 0; j < 4; ++j) o.write_shift(4, 0);
		else o.write_shift(16, file.clsid, "hex");
		o.write_shift(4, file.state || 0);
		o.write_shift(4, 0); o.write_shift(4, 0);
		o.write_shift(4, 0); o.write_shift(4, 0);
		o.write_shift(4, file.start);
		o.write_shift(4, file.size); o.write_shift(4, 0);
	}
	for(i = 1; i < cfb.FileIndex.length; ++i) {
		file = cfb.FileIndex[i];
		/*:: if(!file.content) throw new Error("unreachable"); */
		if(file.size >= 0x1000) {
			o.l = (file.start+1) << 9;
			if (has_buf && Buffer.isBuffer(file.content)) {
				file.content.copy(o, o.l, 0, file.size);
				// o is a 0-filled Buffer so just set next offset
				o.l += (file.size + 511) & -512;
			} else {
				for(j = 0; j < file.size; ++j) o.write_shift(1, file.content[j]);
				for(; j & 0x1FF; ++j) o.write_shift(1, 0);
			}
		}
	}
	for(i = 1; i < cfb.FileIndex.length; ++i) {
		file = cfb.FileIndex[i];
		/*:: if(!file.content) throw new Error("unreachable"); */
		if(file.size > 0 && file.size < 0x1000) {
			if (has_buf && Buffer.isBuffer(file.content)) {
				file.content.copy(o, o.l, 0, file.size);
				// o is a 0-filled Buffer so just set next offset
				o.l += (file.size + 63) & -64;
			} else {
				for(j = 0; j < file.size; ++j) o.write_shift(1, file.content[j]);
				for(; j & 0x3F; ++j) o.write_shift(1, 0);
			}
		}
	}
	if (has_buf) {
		o.l = o.length;
	} else {
		// When using Buffer, already 0-filled
		while(o.l < o.length) o.write_shift(1, 0);
	}
	return o;
}
/* [MS-CFB] 2.6.4 (Unicode 3.0.1 case conversion) */
function find(cfb/*:CFBContainer*/, path/*:string*/)/*:?CFBEntry*/ {
	var UCFullPaths/*:Array<string>*/ = cfb.FullPaths.map(function(x) { return x.toUpperCase(); });
	var UCPaths/*:Array<string>*/ = UCFullPaths.map(function(x) { var y = x.split("/"); return y[y.length - (x.slice(-1) == "/" ? 2 : 1)]; });
	var k/*:boolean*/ = false;
	if(path.charCodeAt(0) === 47 /* "/" */) { k = true; path = UCFullPaths[0].slice(0, -1) + path; }
	else k = path.indexOf("/") !== -1;
	var UCPath/*:string*/ = path.toUpperCase();
	var w/*:number*/ = k === true ? UCFullPaths.indexOf(UCPath) : UCPaths.indexOf(UCPath);
	if(w !== -1) return cfb.FileIndex[w];

	var m = !UCPath.match(chr1);
	UCPath = UCPath.replace(chr0,'');
	if(m) UCPath = UCPath.replace(chr1,'!');
	for(w = 0; w < UCFullPaths.length; ++w) {
		if((m ? UCFullPaths[w].replace(chr1,'!') : UCFullPaths[w]).replace(chr0,'') == UCPath) return cfb.FileIndex[w];
		if((m ? UCPaths[w].replace(chr1,'!') : UCPaths[w]).replace(chr0,'') == UCPath) return cfb.FileIndex[w];
	}
	return null;
}
/** CFB Constants */
var MSSZ = 64; /* Mini Sector Size = 1<<6 */
//var MSCSZ = 4096; /* Mini Stream Cutoff Size */
/* 2.1 Compound File Sector Numbers and Types */
var ENDOFCHAIN = -2;
/* 2.2 Compound File Header */
var HEADER_SIGNATURE = 'd0cf11e0a1b11ae1';
var HEADER_SIG = [0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1];
var HEADER_CLSID = '00000000000000000000000000000000';
var consts = {
	/* 2.1 Compund File Sector Numbers and Types */
	MAXREGSECT: -6,
	DIFSECT: -4,
	FATSECT: -3,
	ENDOFCHAIN: ENDOFCHAIN,
	FREESECT: -1,
	/* 2.2 Compound File Header */
	HEADER_SIGNATURE: HEADER_SIGNATURE,
	HEADER_MINOR_VERSION: '3e00',
	MAXREGSID: -6,
	NOSTREAM: -1,
	HEADER_CLSID: HEADER_CLSID,
	/* 2.6.1 Compound File Directory Entry */
	EntryTypes: ['unknown','storage','stream','lockbytes','property','root']
};

function write_file(cfb/*:CFBContainer*/, filename/*:string*/, options/*:CFBWriteOpts*/)/*:void*/ {
	get_fs();
	var o = _write(cfb, options);
	/*:: if(typeof Buffer == 'undefined' || !Buffer.isBuffer(o) || !(o instanceof Buffer)) throw new Error("unreachable"); */
	fs.writeFileSync(filename, o);
}

function a2s(o/*:RawBytes*/)/*:string*/ {
	var out = new Array(o.length);
	for(var i = 0; i < o.length; ++i) out[i] = String.fromCharCode(o[i]);
	return out.join("");
}

function write(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:RawBytes|string*/ {
	var o = _write(cfb, options);
	switch(options && options.type || "buffer") {
		case "file": get_fs(); fs.writeFileSync(options.filename, (o/*:any*/)); return o;
		case "binary": return typeof o == "string" ? o : a2s(o);
		case "base64": return Base64_encode(typeof o == "string" ? o : a2s(o));
		case "buffer": if(has_buf) return Buffer.isBuffer(o) ? o : Buffer_from(o);
			/* falls through */
		case "array": return typeof o == "string" ? s2a(o) : o;
	}
	return o;
}
/* node < 8.1 zlib does not expose bytesRead, so default to pure JS */
var _zlib;
function use_zlib(zlib) { try {
	var InflateRaw = zlib.InflateRaw;
	var InflRaw = new InflateRaw();
	InflRaw._processChunk(new Uint8Array([3, 0]), InflRaw._finishFlushFlag);
	if(InflRaw.bytesRead) _zlib = zlib;
	else throw new Error("zlib does not expose bytesRead");
} catch(e) {console.error("cannot use native zlib: " + (e.message || e)); } }

function _inflateRawSync(payload, usz) {
	if(!_zlib) return _inflate(payload, usz);
	var InflateRaw = _zlib.InflateRaw;
	var InflRaw = new InflateRaw();
	var out = InflRaw._processChunk(payload.slice(payload.l), InflRaw._finishFlushFlag);
	payload.l += InflRaw.bytesRead;
	return out;
}

function _deflateRawSync(payload) {
	return _zlib ? _zlib.deflateRawSync(payload) : _deflate(payload);
}
var CLEN_ORDER = [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ];

/*  LEN_ID = [ 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285 ]; */
var LEN_LN = [   3,   4,   5,   6,   7,   8,   9,  10,  11,  13 , 15,  17,  19,  23,  27,  31,  35,  43,  51,  59,  67,  83,  99, 115, 131, 163, 195, 227, 258 ];

/*  DST_ID = [  0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13,  14,  15,  16,  17,  18,  19,   20,   21,   22,   23,   24,   25,   26,    27,    28,    29 ]; */
var DST_LN = [  1,  2,  3,  4,  5,  7,  9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577 ];

function bit_swap_8(n) { var t = (((((n<<1)|(n<<11)) & 0x22110) | (((n<<5)|(n<<15)) & 0x88440))); return ((t>>16) | (t>>8) |t)&0xFF; }

var use_typed_arrays = typeof Uint8Array !== 'undefined';

var bitswap8 = use_typed_arrays ? new Uint8Array(1<<8) : [];
for(var q = 0; q < (1<<8); ++q) bitswap8[q] = bit_swap_8(q);

function bit_swap_n(n, b) {
	var rev = bitswap8[n & 0xFF];
	if(b <= 8) return rev >>> (8-b);
	rev = (rev << 8) | bitswap8[(n>>8)&0xFF];
	if(b <= 16) return rev >>> (16-b);
	rev = (rev << 8) | bitswap8[(n>>16)&0xFF];
	return rev >>> (24-b);
}

/* helpers for unaligned bit reads */
function read_bits_2(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 6 ? 0 : buf[h+1]<<8))>>>w)& 0x03; }
function read_bits_3(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 5 ? 0 : buf[h+1]<<8))>>>w)& 0x07; }
function read_bits_4(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 4 ? 0 : buf[h+1]<<8))>>>w)& 0x0F; }
function read_bits_5(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 3 ? 0 : buf[h+1]<<8))>>>w)& 0x1F; }
function read_bits_7(buf, bl) { var w = (bl&7), h = (bl>>>3); return ((buf[h]|(w <= 1 ? 0 : buf[h+1]<<8))>>>w)& 0x7F; }

/* works up to n = 3 * 8 + 1 = 25 */
function read_bits_n(buf, bl, n) {
	var w = (bl&7), h = (bl>>>3), f = ((1<<n)-1);
	var v = buf[h] >>> w;
	if(n < 8 - w) return v & f;
	v |= buf[h+1]<<(8-w);
	if(n < 16 - w) return v & f;
	v |= buf[h+2]<<(16-w);
	if(n < 24 - w) return v & f;
	v |= buf[h+3]<<(24-w);
	return v & f;
}

/* helpers for unaligned bit writes */
function write_bits_3(buf, bl, v) { var w = bl & 7, h = bl >>> 3;
	if(w <= 5) buf[h] |= (v & 7) << w;
	else {
		buf[h] |= (v << w) & 0xFF;
		buf[h+1] = (v&7) >> (8-w);
	}
	return bl + 3;
}

function write_bits_1(buf, bl, v) {
	var w = bl & 7, h = bl >>> 3;
	v = (v&1) << w;
	buf[h] |= v;
	return bl + 1;
}
function write_bits_8(buf, bl, v) {
	var w = bl & 7, h = bl >>> 3;
	v <<= w;
	buf[h] |=  v & 0xFF; v >>>= 8;
	buf[h+1] = v;
	return bl + 8;
}
function write_bits_16(buf, bl, v) {
	var w = bl & 7, h = bl >>> 3;
	v <<= w;
	buf[h] |=  v & 0xFF; v >>>= 8;
	buf[h+1] = v & 0xFF;
	buf[h+2] = v >>> 8;
	return bl + 16;
}

/* until ArrayBuffer#realloc is a thing, fake a realloc */
function realloc(b, sz/*:number*/) {
	var L = b.length, M = 2*L > sz ? 2*L : sz + 5, i = 0;
	if(L >= sz) return b;
	if(has_buf) {
		var o = new_unsafe_buf(M);
		// $FlowIgnore
		if(b.copy) b.copy(o);
		else for(; i < b.length; ++i) o[i] = b[i];
		return o;
	} else if(use_typed_arrays) {
		var a = new Uint8Array(M);
		if(a.set) a.set(b);
		else for(; i < L; ++i) a[i] = b[i];
		return a;
	}
	b.length = M;
	return b;
}

/* zero-filled arrays for older browsers */
function zero_fill_array(n) {
	var o = new Array(n);
	for(var i = 0; i < n; ++i) o[i] = 0;
	return o;
}

/* build tree (used for literals and lengths) */
function build_tree(clens, cmap, MAX/*:number*/)/*:number*/ {
	var maxlen = 1, w = 0, i = 0, j = 0, ccode = 0, L = clens.length;

	var bl_count  = use_typed_arrays ? new Uint16Array(32) : zero_fill_array(32);
	for(i = 0; i < 32; ++i) bl_count[i] = 0;

	for(i = L; i < MAX; ++i) clens[i] = 0;
	L = clens.length;

	var ctree = use_typed_arrays ? new Uint16Array(L) : zero_fill_array(L); // []

	/* build code tree */
	for(i = 0; i < L; ++i) {
		bl_count[(w = clens[i])]++;
		if(maxlen < w) maxlen = w;
		ctree[i] = 0;
	}
	bl_count[0] = 0;
	for(i = 1; i <= maxlen; ++i) bl_count[i+16] = (ccode = (ccode + bl_count[i-1])<<1);
	for(i = 0; i < L; ++i) {
		ccode = clens[i];
		if(ccode != 0) ctree[i] = bl_count[ccode+16]++;
	}

	/* cmap[maxlen + 4 bits] = (off&15) + (lit<<4) reverse mapping */
	var cleni = 0;
	for(i = 0; i < L; ++i) {
		cleni = clens[i];
		if(cleni != 0) {
			ccode = bit_swap_n(ctree[i], maxlen)>>(maxlen-cleni);
			for(j = (1<<(maxlen + 4 - cleni)) - 1; j>=0; --j)
				cmap[ccode|(j<<cleni)] = (cleni&15) | (i<<4);
		}
	}
	return maxlen;
}

/* Fixed Huffman */
var fix_lmap = use_typed_arrays ? new Uint16Array(512) : zero_fill_array(512);
var fix_dmap = use_typed_arrays ? new Uint16Array(32)  : zero_fill_array(32);
if(!use_typed_arrays) {
	for(var i = 0; i < 512; ++i) fix_lmap[i] = 0;
	for(i = 0; i < 32; ++i) fix_dmap[i] = 0;
}
(function() {
	var dlens/*:Array<number>*/ = [];
	var i = 0;
	for(;i<32; i++) dlens.push(5);
	build_tree(dlens, fix_dmap, 32);

	var clens/*:Array<number>*/ = [];
	i = 0;
	for(; i<=143; i++) clens.push(8);
	for(; i<=255; i++) clens.push(9);
	for(; i<=279; i++) clens.push(7);
	for(; i<=287; i++) clens.push(8);
	build_tree(clens, fix_lmap, 288);
})();var _deflateRaw = /*#__PURE__*/(function _deflateRawIIFE() {
	var DST_LN_RE = use_typed_arrays ? new Uint8Array(0x8000) : [];
	var j = 0, k = 0;
	for(; j < DST_LN.length - 1; ++j) {
		for(; k < DST_LN[j+1]; ++k) DST_LN_RE[k] = j;
	}
	for(;k < 32768; ++k) DST_LN_RE[k] = 29;

	var LEN_LN_RE = use_typed_arrays ? new Uint8Array(0x103) : [];
	for(j = 0, k = 0; j < LEN_LN.length - 1; ++j) {
		for(; k < LEN_LN[j+1]; ++k) LEN_LN_RE[k] = j;
	}

	function write_stored(data, out) {
		var boff = 0;
		while(boff < data.length) {
			var L = Math.min(0xFFFF, data.length - boff);
			var h = boff + L == data.length;
			out.write_shift(1, +h);
			out.write_shift(2, L);
			out.write_shift(2, (~L) & 0xFFFF);
			while(L-- > 0) out[out.l++] = data[boff++];
		}
		return out.l;
	}

	/* Fixed Huffman */
	function write_huff_fixed(data, out) {
		var bl = 0;
		var boff = 0;
		var addrs = use_typed_arrays ? new Uint16Array(0x8000) : [];
		while(boff < data.length) {
			var L = /* data.length - boff; */ Math.min(0xFFFF, data.length - boff);

			/* write a stored block for short data */
			if(L < 10) {
				bl = write_bits_3(out, bl, +!!(boff + L == data.length)); // jshint ignore:line
				if(bl & 7) bl += 8 - (bl & 7);
				out.l = (bl / 8) | 0;
				out.write_shift(2, L);
				out.write_shift(2, (~L) & 0xFFFF);
				while(L-- > 0) out[out.l++] = data[boff++];
				bl = out.l * 8;
				continue;
			}

			bl = write_bits_3(out, bl, +!!(boff + L == data.length) + 2); // jshint ignore:line
			var hash = 0;
			while(L-- > 0) {
				var d = data[boff];
				hash = ((hash << 5) ^ d) & 0x7FFF;

				var match = -1, mlen = 0;

				if((match = addrs[hash])) {
					match |= boff & ~0x7FFF;
					if(match > boff) match -= 0x8000;
					if(match < boff) while(data[match + mlen] == data[boff + mlen] && mlen < 250) ++mlen;
				}

				if(mlen > 2) {
					/* Copy Token  */
					d = LEN_LN_RE[mlen];
					if(d <= 22) bl = write_bits_8(out, bl, bitswap8[d+1]>>1) - 1;
					else {
						write_bits_8(out, bl, 3);
						bl += 5;
						write_bits_8(out, bl, bitswap8[d-23]>>5);
						bl += 3;
					}
					var len_eb = (d < 8) ? 0 : ((d - 4)>>2);
					if(len_eb > 0) {
						write_bits_16(out, bl, mlen - LEN_LN[d]);
						bl += len_eb;
					}

					d = DST_LN_RE[boff - match];
					bl = write_bits_8(out, bl, bitswap8[d]>>3);
					bl -= 3;

					var dst_eb = d < 4 ? 0 : (d-2)>>1;
					if(dst_eb > 0) {
						write_bits_16(out, bl, boff - match - DST_LN[d]);
						bl += dst_eb;
					}
					for(var q = 0; q < mlen; ++q) {
						addrs[hash] = boff & 0x7FFF;
						hash = ((hash << 5) ^ data[boff]) & 0x7FFF;
						++boff;
					}
					L-= mlen - 1;
				} else {
					/* Literal Token */
					if(d <= 143) d = d + 48;
					else bl = write_bits_1(out, bl, 1);
					bl = write_bits_8(out, bl, bitswap8[d]);
					addrs[hash] = boff & 0x7FFF;
					++boff;
				}
			}

			bl = write_bits_8(out, bl, 0) - 1;
		}
		out.l = ((bl + 7)/8)|0;
		return out.l;
	}
	return function _deflateRaw(data, out) {
		if(data.length < 8) return write_stored(data, out);
		return write_huff_fixed(data, out);
	};
})();

function _deflate(data) {
	var buf = new_buf(50+Math.floor(data.length*1.1));
	var off = _deflateRaw(data, buf);
	return buf.slice(0, off);
}
/* modified inflate function also moves original read head */

var dyn_lmap = use_typed_arrays ? new Uint16Array(32768) : zero_fill_array(32768);
var dyn_dmap = use_typed_arrays ? new Uint16Array(32768) : zero_fill_array(32768);
var dyn_cmap = use_typed_arrays ? new Uint16Array(128)   : zero_fill_array(128);
var dyn_len_1 = 1, dyn_len_2 = 1;

/* 5.5.3 Expanding Huffman Codes */
function dyn(data, boff/*:number*/) {
	/* nomenclature from RFC1951 refers to bit values; these are offset by the implicit constant */
	var _HLIT = read_bits_5(data, boff) + 257; boff += 5;
	var _HDIST = read_bits_5(data, boff) + 1; boff += 5;
	var _HCLEN = read_bits_4(data, boff) + 4; boff += 4;
	var w = 0;

	/* grab and store code lengths */
	var clens = use_typed_arrays ? new Uint8Array(19) : zero_fill_array(19);
	var ctree = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
	var maxlen = 1;
	var bl_count =  use_typed_arrays ? new Uint8Array(8) : zero_fill_array(8);
	var next_code = use_typed_arrays ? new Uint8Array(8) : zero_fill_array(8);
	var L = clens.length; /* 19 */
	for(var i = 0; i < _HCLEN; ++i) {
		clens[CLEN_ORDER[i]] = w = read_bits_3(data, boff);
		if(maxlen < w) maxlen = w;
		bl_count[w]++;
		boff += 3;
	}

	/* build code tree */
	var ccode = 0;
	bl_count[0] = 0;
	for(i = 1; i <= maxlen; ++i) next_code[i] = ccode = (ccode + bl_count[i-1])<<1;
	for(i = 0; i < L; ++i) if((ccode = clens[i]) != 0) ctree[i] = next_code[ccode]++;
	/* cmap[7 bits from stream] = (off&7) + (lit<<3) */
	var cleni = 0;
	for(i = 0; i < L; ++i) {
		cleni = clens[i];
		if(cleni != 0) {
			ccode = bitswap8[ctree[i]]>>(8-cleni);
			for(var j = (1<<(7-cleni))-1; j>=0; --j) dyn_cmap[ccode|(j<<cleni)] = (cleni&7) | (i<<3);
		}
	}

	/* read literal and dist codes at once */
	var hcodes/*:Array<number>*/ = [];
	maxlen = 1;
	for(; hcodes.length < _HLIT + _HDIST;) {
		ccode = dyn_cmap[read_bits_7(data, boff)];
		boff += ccode & 7;
		switch((ccode >>>= 3)) {
			case 16:
				w = 3 + read_bits_2(data, boff); boff += 2;
				ccode = hcodes[hcodes.length - 1];
				while(w-- > 0) hcodes.push(ccode);
				break;
			case 17:
				w = 3 + read_bits_3(data, boff); boff += 3;
				while(w-- > 0) hcodes.push(0);
				break;
			case 18:
				w = 11 + read_bits_7(data, boff); boff += 7;
				while(w -- > 0) hcodes.push(0);
				break;
			default:
				hcodes.push(ccode);
				if(maxlen < ccode) maxlen = ccode;
				break;
		}
	}

	/* build literal / length trees */
	var h1 = hcodes.slice(0, _HLIT), h2 = hcodes.slice(_HLIT);
	for(i = _HLIT; i < 286; ++i) h1[i] = 0;
	for(i = _HDIST; i < 30; ++i) h2[i] = 0;
	dyn_len_1 = build_tree(h1, dyn_lmap, 286);
	dyn_len_2 = build_tree(h2, dyn_dmap, 30);
	return boff;
}

/* return [ data, bytesRead ] */
function inflate(data, usz/*:number*/) {
	/* shortcircuit for empty buffer [0x03, 0x00] */
	if(data[0] == 3 && !(data[1] & 0x3)) { return [new_raw_buf(usz), 2]; }

	/* bit offset */
	var boff = 0;

	/* header includes final bit and type bits */
	var header = 0;

	var outbuf = new_unsafe_buf(usz ? usz : (1<<18));
	var woff = 0;
	var OL = outbuf.length>>>0;
	var max_len_1 = 0, max_len_2 = 0;

	while((header&1) == 0) {
		header = read_bits_3(data, boff); boff += 3;
		if((header >>> 1) == 0) {
			/* Stored block */
			if(boff & 7) boff += 8 - (boff&7);
			/* 2 bytes sz, 2 bytes bit inverse */
			var sz = data[boff>>>3] | data[(boff>>>3)+1]<<8;
			boff += 32;
			/* push sz bytes */
			if(sz > 0) {
				if(!usz && OL < woff + sz) { outbuf = realloc(outbuf, woff + sz); OL = outbuf.length; }
				while(sz-- > 0) { outbuf[woff++] = data[boff>>>3]; boff += 8; }
			}
			continue;
		} else if((header >> 1) == 1) {
			/* Fixed Huffman */
			max_len_1 = 9; max_len_2 = 5;
		} else {
			/* Dynamic Huffman */
			boff = dyn(data, boff);
			max_len_1 = dyn_len_1; max_len_2 = dyn_len_2;
		}
		for(;;) { // while(true) is apparently out of vogue in modern JS circles
			if(!usz && (OL < woff + 32767)) { outbuf = realloc(outbuf, woff + 32767); OL = outbuf.length; }
			/* ingest code and move read head */
			var bits = read_bits_n(data, boff, max_len_1);
			var code = (header>>>1) == 1 ? fix_lmap[bits] : dyn_lmap[bits];
			boff += code & 15; code >>>= 4;
			/* 0-255 are literals, 256 is end of block token, 257+ are copy tokens */
			if(((code>>>8)&0xFF) === 0) outbuf[woff++] = code;
			else if(code == 256) break;
			else {
				code -= 257;
				var len_eb = (code < 8) ? 0 : ((code-4)>>2); if(len_eb > 5) len_eb = 0;
				var tgt = woff + LEN_LN[code];
				/* length extra bits */
				if(len_eb > 0) {
					tgt += read_bits_n(data, boff, len_eb);
					boff += len_eb;
				}

				/* dist code */
				bits = read_bits_n(data, boff, max_len_2);
				code = (header>>>1) == 1 ? fix_dmap[bits] : dyn_dmap[bits];
				boff += code & 15; code >>>= 4;
				var dst_eb = (code < 4 ? 0 : (code-2)>>1);
				var dst = DST_LN[code];
				/* dist extra bits */
				if(dst_eb > 0) {
					dst += read_bits_n(data, boff, dst_eb);
					boff += dst_eb;
				}

				/* in the common case, manual byte copy is faster than TA set / Buffer copy */
				if(!usz && OL < tgt) { outbuf = realloc(outbuf, tgt + 100); OL = outbuf.length; }
				while(woff < tgt) { outbuf[woff] = outbuf[woff - dst]; ++woff; }
			}
		}
	}
	if(usz) return [outbuf, (boff+7)>>>3];
	return [outbuf.slice(0, woff), (boff+7)>>>3];
}

function _inflate(payload, usz) {
	var data = payload.slice(payload.l||0);
	var out = inflate(data, usz);
	payload.l += out[1];
	return out[0];
}

function warn_or_throw(wrn, msg) {
	if(wrn) { if(typeof console !== 'undefined') console.error(msg); }
	else throw new Error(msg);
}

function parse_zip(file/*:RawBytes*/, options/*:CFBReadOpts*/)/*:CFBContainer*/ {
	var blob/*:CFBlob*/ = /*::(*/file/*:: :any)*/;
	prep_blob(blob, 0);

	var FileIndex/*:CFBFileIndex*/ = [], FullPaths/*:Array<string>*/ = [];
	var o = {
		FileIndex: FileIndex,
		FullPaths: FullPaths
	};
	init_cfb(o, { root: options.root });

	/* find end of central directory, start just after signature */
	var i = blob.length - 4;
	while((blob[i] != 0x50 || blob[i+1] != 0x4b || blob[i+2] != 0x05 || blob[i+3] != 0x06) && i >= 0) --i;
	blob.l = i + 4;

	/* parse end of central directory */
	blob.l += 4;
	var fcnt = blob.read_shift(2);
	blob.l += 6;
	var start_cd = blob.read_shift(4);

	/* parse central directory */
	blob.l = start_cd;

	for(i = 0; i < fcnt; ++i) {
		/* trust local file header instead of CD entry */
		blob.l += 20;
		var csz = blob.read_shift(4);
		var usz = blob.read_shift(4);
		var namelen = blob.read_shift(2);
		var efsz = blob.read_shift(2);
		var fcsz = blob.read_shift(2);
		blob.l += 8;
		var offset = blob.read_shift(4);
		var EF = parse_extra_field(/*::(*/blob.slice(blob.l+namelen, blob.l+namelen+efsz)/*:: :any)*/);
		blob.l += namelen + efsz + fcsz;

		var L = blob.l;
		blob.l = offset + 4;
		parse_local_file(blob, csz, usz, o, EF);
		blob.l = L;
	}
	return o;
}


/* head starts just after local file header signature */
function parse_local_file(blob/*:CFBlob*/, csz/*:number*/, usz/*:number*/, o/*:CFBContainer*/, EF) {
	/* [local file header] */
	blob.l += 2;
	var flags = blob.read_shift(2);
	var meth = blob.read_shift(2);
	var date = parse_dos_date(blob);

	if(flags & 0x2041) throw new Error("Unsupported ZIP encryption");
	var crc32 = blob.read_shift(4);
	var _csz = blob.read_shift(4);
	var _usz = blob.read_shift(4);

	var namelen = blob.read_shift(2);
	var efsz = blob.read_shift(2);

	// TODO: flags & (1<<11) // UTF8
	var name = ""; for(var i = 0; i < namelen; ++i) name += String.fromCharCode(blob[blob.l++]);
	if(efsz) {
		var ef = parse_extra_field(/*::(*/blob.slice(blob.l, blob.l + efsz)/*:: :any)*/);
		if((ef[0x5455]||{}).mt) date = ef[0x5455].mt;
		if(((EF||{})[0x5455]||{}).mt) date = EF[0x5455].mt;
	}
	blob.l += efsz;

	/* [encryption header] */

	/* [file data] */
	var data = blob.slice(blob.l, blob.l + _csz);
	switch(meth) {
		case 8: data = _inflateRawSync(blob, _usz); break;
		case 0: break; // TODO: scan for magic number
		default: throw new Error("Unsupported ZIP Compression method " + meth);
	}

	/* [data descriptor] */
	var wrn = false;
	if(flags & 8) {
		crc32 = blob.read_shift(4);
		if(crc32 == 0x08074b50) { crc32 = blob.read_shift(4); wrn = true; }
		_csz = blob.read_shift(4);
		_usz = blob.read_shift(4);
	}

	if(_csz != csz) warn_or_throw(wrn, "Bad compressed size: " + csz + " != " + _csz);
	if(_usz != usz) warn_or_throw(wrn, "Bad uncompressed size: " + usz + " != " + _usz);
	//var _crc32 = CRC32.buf(data, 0);
	//if((crc32>>0) != (_crc32>>0)) warn_or_throw(wrn, "Bad CRC32 checksum: " + crc32 + " != " + _crc32);
	cfb_add(o, name, data, {unsafe: true, mt: date});
}
function write_zip(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:RawBytes*/ {
	var _opts = options || {};
	var out = [], cdirs = [];
	var o/*:CFBlob*/ = new_buf(1);
	var method = (_opts.compression ? 8 : 0), flags = 0;
	var desc = false;
	if(desc) flags |= 8;
	var i = 0, j = 0;

	var start_cd = 0, fcnt = 0;
	var root = cfb.FullPaths[0], fp = root, fi = cfb.FileIndex[0];
	var crcs = [];
	var sz_cd = 0;

	for(i = 1; i < cfb.FullPaths.length; ++i) {
		fp = cfb.FullPaths[i].slice(root.length); fi = cfb.FileIndex[i];
		if(!fi.size || !fi.content || fp == "\u0001Sh33tJ5") continue;
		var start = start_cd;

		/* TODO: CP437 filename */
		var namebuf = new_buf(fp.length);
		for(j = 0; j < fp.length; ++j) namebuf.write_shift(1, fp.charCodeAt(j) & 0x7F);
		namebuf = namebuf.slice(0, namebuf.l);
		crcs[fcnt] = CRC32.buf(/*::((*/fi.content/*::||[]):any)*/, 0);

		var outbuf = fi.content/*::||[]*/;
		if(method == 8) outbuf = _deflateRawSync(outbuf);

		/* local file header */
		o = new_buf(30);
		o.write_shift(4, 0x04034b50);
		o.write_shift(2, 20);
		o.write_shift(2, flags);
		o.write_shift(2, method);
		/* TODO: last mod file time/date */
		if(fi.mt) write_dos_date(o, fi.mt);
		else o.write_shift(4, 0);
		o.write_shift(-4, (flags & 8) ? 0 : crcs[fcnt]);
		o.write_shift(4,  (flags & 8) ? 0 : outbuf.length);
		o.write_shift(4,  (flags & 8) ? 0 : /*::(*/fi.content/*::||[])*/.length);
		o.write_shift(2, namebuf.length);
		o.write_shift(2, 0);

		start_cd += o.length;
		out.push(o);
		start_cd += namebuf.length;
		out.push(namebuf);

		/* TODO: extra fields? */

		/* TODO: encryption header ? */

		start_cd += outbuf.length;
		out.push(outbuf);

		/* data descriptor */
		if(flags & 8) {
			o = new_buf(12);
			o.write_shift(-4, crcs[fcnt]);
			o.write_shift(4, outbuf.length);
			o.write_shift(4, /*::(*/fi.content/*::||[])*/.length);
			start_cd += o.l;
			out.push(o);
		}

		/* central directory */
		o = new_buf(46);
		o.write_shift(4, 0x02014b50);
		o.write_shift(2, 0);
		o.write_shift(2, 20);
		o.write_shift(2, flags);
		o.write_shift(2, method);
		o.write_shift(4, 0); /* TODO: last mod file time/date */
		o.write_shift(-4, crcs[fcnt]);

		o.write_shift(4, outbuf.length);
		o.write_shift(4, /*::(*/fi.content/*::||[])*/.length);
		o.write_shift(2, namebuf.length);
		o.write_shift(2, 0);
		o.write_shift(2, 0);
		o.write_shift(2, 0);
		o.write_shift(2, 0);
		o.write_shift(4, 0);
		o.write_shift(4, start);

		sz_cd += o.l;
		cdirs.push(o);
		sz_cd += namebuf.length;
		cdirs.push(namebuf);
		++fcnt;
	}

	/* end of central directory */
	o = new_buf(22);
	o.write_shift(4, 0x06054b50);
	o.write_shift(2, 0);
	o.write_shift(2, 0);
	o.write_shift(2, fcnt);
	o.write_shift(2, fcnt);
	o.write_shift(4, sz_cd);
	o.write_shift(4, start_cd);
	o.write_shift(2, 0);

	return bconcat(([bconcat((out/*:any*/)), bconcat(cdirs), o]/*:any*/));
}
var ContentTypeMap = ({
	"htm": "text/html",
	"xml": "text/xml",

	"gif": "image/gif",
	"jpg": "image/jpeg",
	"png": "image/png",

	"mso": "application/x-mso",
	"thmx": "application/vnd.ms-officetheme",
	"sh33tj5": "application/octet-stream"
}/*:any*/);

function get_content_type(fi/*:CFBEntry*/, fp/*:string*/)/*:string*/ {
	if(fi.ctype) return fi.ctype;

	var ext = fi.name || "", m = ext.match(/\.([^\.]+)$/);
	if(m && ContentTypeMap[m[1]]) return ContentTypeMap[m[1]];

	if(fp) {
		m = (ext = fp).match(/[\.\\]([^\.\\])+$/);
		if(m && ContentTypeMap[m[1]]) return ContentTypeMap[m[1]];
	}

	return "application/octet-stream";
}

/* 76 character chunks TODO: intertwine encoding */
function write_base64_76(bstr/*:string*/)/*:string*/ {
	var data = Base64_encode(bstr);
	var o = [];
	for(var i = 0; i < data.length; i+= 76) o.push(data.slice(i, i+76));
	return o.join("\r\n") + "\r\n";
}

/*
Rules for QP:
	- escape =## applies for all non-display characters and literal "="
	- space or tab at end of line must be encoded
	- \r\n newlines can be preserved, but bare \r and \n must be escaped
	- lines must not exceed 76 characters, use soft breaks =\r\n

TODO: Some files from word appear to write line extensions with bare equals:

```
<table class=3DMsoTableGrid border=3D1 cellspacing=3D0 cellpadding=3D0 width=
="70%"
```
*/
function write_quoted_printable(text/*:string*/)/*:string*/ {
	var encoded = text.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g, function(c) {
		var w = c.charCodeAt(0).toString(16).toUpperCase();
		return "=" + (w.length == 1 ? "0" + w : w);
	});

	encoded = encoded.replace(/ $/mg, "=20").replace(/\t$/mg, "=09");

	if(encoded.charAt(0) == "\n") encoded = "=0D" + encoded.slice(1);
	encoded = encoded.replace(/\r(?!\n)/mg, "=0D").replace(/\n\n/mg, "\n=0A").replace(/([^\r\n])\n/mg, "$1=0A");

	var o/*:Array<string>*/ = [], split = encoded.split("\r\n");
	for(var si = 0; si < split.length; ++si) {
		var str = split[si];
		if(str.length == 0) { o.push(""); continue; }
		for(var i = 0; i < str.length;) {
			var end = 76;
			var tmp = str.slice(i, i + end);
			if(tmp.charAt(end - 1) == "=") end --;
			else if(tmp.charAt(end - 2) == "=") end -= 2;
			else if(tmp.charAt(end - 3) == "=") end -= 3;
			tmp = str.slice(i, i + end);
			i += end;
			if(i < str.length) tmp += "=";
			o.push(tmp);
		}
	}

	return o.join("\r\n");
}
function parse_quoted_printable(data/*:Array<string>*/)/*:RawBytes*/ {
	var o = [];

	/* unify long lines */
	for(var di = 0; di < data.length; ++di) {
		var line = data[di];
		while(di <= data.length && line.charAt(line.length - 1) == "=") line = line.slice(0, line.length - 1) + data[++di];
		o.push(line);
	}

	/* decode */
	for(var oi = 0; oi < o.length; ++oi) o[oi] = o[oi].replace(/[=][0-9A-Fa-f]{2}/g, function($$) { return String.fromCharCode(parseInt($$.slice(1), 16)); });
	return s2a(o.join("\r\n"));
}


function parse_mime(cfb/*:CFBContainer*/, data/*:Array<string>*/, root/*:string*/)/*:void*/ {
	var fname = "", cte = "", ctype = "", fdata;
	var di = 0;
	for(;di < 10; ++di) {
		var line = data[di];
		if(!line || line.match(/^\s*$/)) break;
		var m = line.match(/^(.*?):\s*([^\s].*)$/);
		if(m) switch(m[1].toLowerCase()) {
			case "content-location": fname = m[2].trim(); break;
			case "content-type": ctype = m[2].trim(); break;
			case "content-transfer-encoding": cte = m[2].trim(); break;
		}
	}
	++di;
	switch(cte.toLowerCase()) {
		case 'base64': fdata = s2a(Base64_decode(data.slice(di).join(""))); break;
		case 'quoted-printable': fdata = parse_quoted_printable(data.slice(di)); break;
		default: throw new Error("Unsupported Content-Transfer-Encoding " + cte);
	}
	var file = cfb_add(cfb, fname.slice(root.length), fdata, {unsafe: true});
	if(ctype) file.ctype = ctype;
}

function parse_mad(file/*:RawBytes*/, options/*:CFBReadOpts*/)/*:CFBContainer*/ {
	if(a2s(file.slice(0,13)).toLowerCase() != "mime-version:") throw new Error("Unsupported MAD header");
	var root = (options && options.root || "");
	// $FlowIgnore
	var data = (has_buf && Buffer.isBuffer(file) ? file.toString("binary") : a2s(file)).split("\r\n");
	var di = 0, row = "";

	/* if root is not specified, scan for the common prefix */
	for(di = 0; di < data.length; ++di) {
		row = data[di];
		if(!/^Content-Location:/i.test(row)) continue;
		row = row.slice(row.indexOf("file"));
		if(!root) root = row.slice(0, row.lastIndexOf("/") + 1);
		if(row.slice(0, root.length) == root) continue;
		while(root.length > 0) {
			root = root.slice(0, root.length - 1);
			root = root.slice(0, root.lastIndexOf("/") + 1);
			if(row.slice(0,root.length) == root) break;
		}
	}

	var mboundary = (data[1] || "").match(/boundary="(.*?)"/);
	if(!mboundary) throw new Error("MAD cannot find boundary");
	var boundary = "--" + (mboundary[1] || "");

	var FileIndex/*:CFBFileIndex*/ = [], FullPaths/*:Array<string>*/ = [];
	var o = {
		FileIndex: FileIndex,
		FullPaths: FullPaths
	};
	init_cfb(o);
	var start_di, fcnt = 0;
	for(di = 0; di < data.length; ++di) {
		var line = data[di];
		if(line !== boundary && line !== boundary + "--") continue;
		if(fcnt++) parse_mime(o, data.slice(start_di, di), root);
		start_di = di;
	}
	return o;
}

function write_mad(cfb/*:CFBContainer*/, options/*:CFBWriteOpts*/)/*:string*/ {
	var opts = options || {};
	var boundary = opts.boundary || "SheetJS";
	boundary = '------=' + boundary;

	var out = [
		'MIME-Version: 1.0',
		'Content-Type: multipart/related; boundary="' + boundary.slice(2) + '"',
		'',
		'',
		''
	];

	var root = cfb.FullPaths[0], fp = root, fi = cfb.FileIndex[0];
	for(var i = 1; i < cfb.FullPaths.length; ++i) {
		fp = cfb.FullPaths[i].slice(root.length);
		fi = cfb.FileIndex[i];
		if(!fi.size || !fi.content || fp == "\u0001Sh33tJ5") continue;

		/* Normalize filename */
		fp = fp.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g, function(c) {
			return "_x" + c.charCodeAt(0).toString(16) + "_";
		}).replace(/[\u0080-\uFFFF]/g, function(u) {
			return "_u" + u.charCodeAt(0).toString(16) + "_";
		});

		/* Extract content as binary string */
		var ca = fi.content;
		// $FlowIgnore
		var cstr = has_buf && Buffer.isBuffer(ca) ? ca.toString("binary") : a2s(ca);

		/* 4/5 of first 1024 chars ascii -> quoted printable, else base64 */
		var dispcnt = 0, L = Math.min(1024, cstr.length), cc = 0;
		for(var csl = 0; csl <= L; ++csl) if((cc=cstr.charCodeAt(csl)) >= 0x20 && cc < 0x80) ++dispcnt;
		var qp = dispcnt >= L * 4 / 5;

		out.push(boundary);
		out.push('Content-Location: ' + (opts.root || 'file:///C:/SheetJS/') + fp);
		out.push('Content-Transfer-Encoding: ' + (qp ? 'quoted-printable' : 'base64'));
		out.push('Content-Type: ' + get_content_type(fi, fp));
		out.push('');

		out.push(qp ? write_quoted_printable(cstr) : write_base64_76(cstr));
	}
	out.push(boundary + '--\r\n');
	return out.join("\r\n");
}
function cfb_new(opts/*:?any*/)/*:CFBContainer*/ {
	var o/*:CFBContainer*/ = ({}/*:any*/);
	init_cfb(o, opts);
	return o;
}

function cfb_add(cfb/*:CFBContainer*/, name/*:string*/, content/*:?RawBytes*/, opts/*:?any*/)/*:CFBEntry*/ {
	var unsafe = opts && opts.unsafe;
	if(!unsafe) init_cfb(cfb);
	var file = !unsafe && CFB.find(cfb, name);
	if(!file) {
		var fpath/*:string*/ = cfb.FullPaths[0];
		if(name.slice(0, fpath.length) == fpath) fpath = name;
		else {
			if(fpath.slice(-1) != "/") fpath += "/";
			fpath = (fpath + name).replace("//","/");
		}
		file = ({name: filename(name), type: 2}/*:any*/);
		cfb.FileIndex.push(file);
		cfb.FullPaths.push(fpath);
		if(!unsafe) CFB.utils.cfb_gc(cfb);
	}
	/*:: if(!file) throw new Error("unreachable"); */
	file.content = (content/*:any*/);
	file.size = content ? content.length : 0;
	if(opts) {
		if(opts.CLSID) file.clsid = opts.CLSID;
		if(opts.mt) file.mt = opts.mt;
		if(opts.ct) file.ct = opts.ct;
	}
	return file;
}

function cfb_del(cfb/*:CFBContainer*/, name/*:string*/)/*:boolean*/ {
	init_cfb(cfb);
	var file = CFB.find(cfb, name);
	if(file) for(var j = 0; j < cfb.FileIndex.length; ++j) if(cfb.FileIndex[j] == file) {
		cfb.FileIndex.splice(j, 1);
		cfb.FullPaths.splice(j, 1);
		return true;
	}
	return false;
}

function cfb_mov(cfb/*:CFBContainer*/, old_name/*:string*/, new_name/*:string*/)/*:boolean*/ {
	init_cfb(cfb);
	var file = CFB.find(cfb, old_name);
	if(file) for(var j = 0; j < cfb.FileIndex.length; ++j) if(cfb.FileIndex[j] == file) {
		cfb.FileIndex[j].name = filename(new_name);
		cfb.FullPaths[j] = new_name;
		return true;
	}
	return false;
}

function cfb_gc(cfb/*:CFBContainer*/)/*:void*/ { rebuild_cfb(cfb, true); }

exports.find = find;
exports.read = read;
exports.parse = parse;
exports.write = write;
exports.writeFile = write_file;
exports.utils = {
	cfb_new: cfb_new,
	cfb_add: cfb_add,
	cfb_del: cfb_del,
	cfb_mov: cfb_mov,
	cfb_gc: cfb_gc,
	ReadShift: ReadShift,
	CheckField: CheckField,
	prep_blob: prep_blob,
	bconcat: bconcat,
	use_zlib: use_zlib,
	_deflateRaw: _deflate,
	_inflateRaw: _inflate,
	consts: consts
};

return exports;
})();

let _fs = void 0;
function set_fs(fs) { _fs = fs; }


/* normalize data for blob ctor */
function blobify(data) {
	if(typeof data === "string") return s2ab(data);
	if(Array.isArray(data)) return a2u(data);
	return data;
}
/* write or download file */
function write_dl(fname/*:string*/, payload/*:any*/, enc/*:?string*/) {
	/*global IE_SaveFile, Blob, navigator, saveAs, document, File, chrome */
	if(typeof _fs !== 'undefined' && _fs.writeFileSync) return enc ? _fs.writeFileSync(fname, payload, enc) : _fs.writeFileSync(fname, payload);
	if(typeof Deno !== 'undefined') {
		/* in this spot, it's safe to assume typed arrays and TextEncoder/TextDecoder exist */
		if(enc && typeof payload == "string") switch(enc) {
			case "utf8": payload = new TextEncoder(enc).encode(payload); break;
			case "binary": payload = s2ab(payload); break;
			/* TODO: binary equivalent */
			default: throw new Error("Unsupported encoding " + enc);
		}
		return Deno.writeFileSync(fname, payload);
	}
	var data = (enc == "utf8") ? utf8write(payload) : payload;
	/*:: declare var IE_SaveFile: any; */
	if(typeof IE_SaveFile !== 'undefined') return IE_SaveFile(data, fname);
	if(typeof Blob !== 'undefined') {
		var blob = new Blob([blobify(data)], {type:"application/octet-stream"});
		/*:: declare var navigator: any; */
		if(typeof navigator !== 'undefined' && navigator.msSaveBlob) return navigator.msSaveBlob(blob, fname);
		/*:: declare var saveAs: any; */
		if(typeof saveAs !== 'undefined') return saveAs(blob, fname);
		if(typeof URL !== 'undefined' && typeof document !== 'undefined' && document.createElement && URL.createObjectURL) {
			var url = URL.createObjectURL(blob);
			/*:: declare var chrome: any; */
			if(typeof chrome === 'object' && typeof (chrome.downloads||{}).download == "function") {
				if(URL.revokeObjectURL && typeof setTimeout !== 'undefined') setTimeout(function() { URL.revokeObjectURL(url); }, 60000);
				return chrome.downloads.download({ url: url, filename: fname, saveAs: true});
			}
			var a = document.createElement("a");
			if(a.download != null) {
				/*:: if(document.body == null) throw new Error("unreachable"); */
				a.download = fname; a.href = url; document.body.appendChild(a); a.click();
				/*:: if(document.body == null) throw new Error("unreachable"); */ document.body.removeChild(a);
				if(URL.revokeObjectURL && typeof setTimeout !== 'undefined') setTimeout(function() { URL.revokeObjectURL(url); }, 60000);
				return url;
			}
		}
	}
	// $FlowIgnore
	if(typeof $ !== 'undefined' && typeof File !== 'undefined' && typeof Folder !== 'undefined') try { // extendscript
		// $FlowIgnore
		var out = File(fname); out.open("w"); out.encoding = "binary";
		if(Array.isArray(payload)) payload = a2s(payload);
		out.write(payload); out.close(); return payload;
	} catch(e) { if(!e.message || !e.message.match(/onstruct/)) throw e; }
	throw new Error("cannot save file " + fname);
}

/* read binary data from file */
function read_binary(path/*:string*/) {
	if(typeof _fs !== 'undefined') return _fs.readFileSync(path);
	if(typeof Deno !== 'undefined') return Deno.readFileSync(path);
	// $FlowIgnore
	if(typeof $ !== 'undefined' && typeof File !== 'undefined' && typeof Folder !== 'undefined') try { // extendscript
		// $FlowIgnore
		var infile = File(path); infile.open("r"); infile.encoding = "binary";
		var data = infile.read(); infile.close();
		return data;
	} catch(e) { if(!e.message || !e.message.match(/onstruct/)) throw e; }
	throw new Error("Cannot access file " + path);
}
function keys(o/*:any*/)/*:Array<any>*/ {
	var ks = Object.keys(o), o2 = [];
	for(var i = 0; i < ks.length; ++i) if(Object.prototype.hasOwnProperty.call(o, ks[i])) o2.push(ks[i]);
	return o2;
}

function evert_key(obj/*:any*/, key/*:string*/)/*:EvertType*/ {
	var o = ([]/*:any*/), K = keys(obj);
	for(var i = 0; i !== K.length; ++i) if(o[obj[K[i]][key]] == null) o[obj[K[i]][key]] = K[i];
	return o;
}

function evert(obj/*:any*/)/*:EvertType*/ {
	var o = ([]/*:any*/), K = keys(obj);
	for(var i = 0; i !== K.length; ++i) o[obj[K[i]]] = K[i];
	return o;
}

function evert_num(obj/*:any*/)/*:EvertNumType*/ {
	var o = ([]/*:any*/), K = keys(obj);
	for(var i = 0; i !== K.length; ++i) o[obj[K[i]]] = parseInt(K[i],10);
	return o;
}

function evert_arr(obj/*:any*/)/*:EvertArrType*/ {
	var o/*:EvertArrType*/ = ([]/*:any*/), K = keys(obj);
	for(var i = 0; i !== K.length; ++i) {
		if(o[obj[K[i]]] == null) o[obj[K[i]]] = [];
		o[obj[K[i]]].push(K[i]);
	}
	return o;
}

var basedate = /*#__PURE__*/new Date(1899, 11, 30, 0, 0, 0); // 2209161600000
function datenum(v/*:Date*/, date1904/*:?boolean*/)/*:number*/ {
	var epoch = /*#__PURE__*/v.getTime();
	if(date1904) epoch -= 1462*24*60*60*1000;
	var dnthresh = /*#__PURE__*/basedate.getTime() + (/*#__PURE__*/v.getTimezoneOffset() - /*#__PURE__*/basedate.getTimezoneOffset()) * 60000;
	return (epoch - dnthresh) / (24 * 60 * 60 * 1000);
}
var refdate = /*#__PURE__*/new Date();
var dnthresh = /*#__PURE__*/basedate.getTime() + (/*#__PURE__*/refdate.getTimezoneOffset() - /*#__PURE__*/basedate.getTimezoneOffset()) * 60000;
var refoffset = /*#__PURE__*/refdate.getTimezoneOffset();
function numdate(v/*:number*/)/*:Date*/ {
	var out = new Date();
	out.setTime(v * 24 * 60 * 60 * 1000 + dnthresh);
	if (out.getTimezoneOffset() !== refoffset) {
		out.setTime(out.getTime() + (out.getTimezoneOffset() - refoffset) * 60000);
	}
	return out;
}

/* ISO 8601 Duration */
function parse_isodur(s) {
	var sec = 0, mt = 0, time = false;
	var m = s.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);
	if(!m) throw new Error("|" + s + "| is not an ISO8601 Duration");
	for(var i = 1; i != m.length; ++i) {
		if(!m[i]) continue;
		mt = 1;
		if(i > 3) time = true;
		switch(m[i].slice(m[i].length-1)) {
			case 'Y':
				throw new Error("Unsupported ISO Duration Field: " + m[i].slice(m[i].length-1));
			case 'D': mt *= 24;
				/* falls through */
			case 'H': mt *= 60;
				/* falls through */
			case 'M':
				if(!time) throw new Error("Unsupported ISO Duration Field: M");
				else mt *= 60;
				/* falls through */
			case 'S': break;
		}
		sec += mt * parseInt(m[i], 10);
	}
	return sec;
}

var good_pd_date_1 = /*#__PURE__*/new Date('2017-02-19T19:06:09.000Z');
var good_pd_date = /*#__PURE__*/isNaN(/*#__PURE__*/good_pd_date_1.getFullYear()) ? /*#__PURE__*/new Date('2/19/17') : good_pd_date_1;
var good_pd = /*#__PURE__*/good_pd_date.getFullYear() == 2017;
/* parses a date as a local date */
function parseDate(str/*:string|Date*/, fixdate/*:?number*/)/*:Date*/ {
	var d = new Date(str);
	if(good_pd) {
		/*:: if(fixdate == null) fixdate = 0; */
		if(fixdate > 0) d.setTime(d.getTime() + d.getTimezoneOffset() * 60 * 1000);
		else if(fixdate < 0) d.setTime(d.getTime() - d.getTimezoneOffset() * 60 * 1000);
		return d;
	}
	if(str instanceof Date) return str;
	if(good_pd_date.getFullYear() == 1917 && !isNaN(d.getFullYear())) {
		var s = d.getFullYear();
		if(str.indexOf("" + s) > -1) return d;
		d.setFullYear(d.getFullYear() + 100); return d;
	}
	var n = str.match(/\d+/g)||["2017","2","19","0","0","0"];
	var out = new Date(+n[0], +n[1] - 1, +n[2], (+n[3]||0), (+n[4]||0), (+n[5]||0));
	if(str.indexOf("Z") > -1) out = new Date(out.getTime() - out.getTimezoneOffset() * 60 * 1000);
	return out;
}

function cc2str(arr/*:Array<number>*/, debomit)/*:string*/ {
	if(has_buf && Buffer.isBuffer(arr)) {
		if(debomit) {
			if(arr[0] == 0xFF && arr[1] == 0xFE) return utf8write(arr.slice(2).toString("utf16le"));
			if(arr[1] == 0xFE && arr[2] == 0xFF) return utf8write(utf16beread(arr.slice(2).toString("binary")));
		}
		return arr.toString("binary");
	}

	if(typeof TextDecoder !== "undefined") try {
		if(debomit) {
			if(arr[0] == 0xFF && arr[1] == 0xFE) return utf8write(new TextDecoder("utf-16le").decode(arr.slice(2)));
			if(arr[0] == 0xFE && arr[1] == 0xFF) return utf8write(new TextDecoder("utf-16be").decode(arr.slice(2)));
		}
		var rev = {
			"\u20ac": "\x80", "\u201a": "\x82", "\u0192": "\x83", "\u201e": "\x84",
			"\u2026": "\x85", "\u2020": "\x86", "\u2021": "\x87", "\u02c6": "\x88",
			"\u2030": "\x89", "\u0160": "\x8a", "\u2039": "\x8b", "\u0152": "\x8c",
			"\u017d": "\x8e", "\u2018": "\x91", "\u2019": "\x92", "\u201c": "\x93",
			"\u201d": "\x94", "\u2022": "\x95", "\u2013": "\x96", "\u2014": "\x97",
			"\u02dc": "\x98", "\u2122": "\x99", "\u0161": "\x9a", "\u203a": "\x9b",
			"\u0153": "\x9c", "\u017e": "\x9e", "\u0178": "\x9f"
		};
		if(Array.isArray(arr)) arr = new Uint8Array(arr);
		return new TextDecoder("latin1").decode(arr).replace(/[€‚ƒ„…†‡ˆ‰Š‹ŒŽ‘’“”•–—˜™š›œžŸ]/g, function(c) { return rev[c] || c; });
	} catch(e) {}

	var o = [];
	for(var i = 0; i != arr.length; ++i) o.push(String.fromCharCode(arr[i]));
	return o.join("");
}

function dup(o/*:any*/)/*:any*/ {
	if(typeof JSON != 'undefined' && !Array.isArray(o)) return JSON.parse(JSON.stringify(o));
	if(typeof o != 'object' || o == null) return o;
	if(o instanceof Date) return new Date(o.getTime());
	var out = {};
	for(var k in o) if(Object.prototype.hasOwnProperty.call(o, k)) out[k] = dup(o[k]);
	return out;
}

function fill(c/*:string*/,l/*:number*/)/*:string*/ { var o = ""; while(o.length < l) o+=c; return o; }

/* TODO: stress test */
function fuzzynum(s/*:string*/)/*:number*/ {
	var v/*:number*/ = Number(s);
	if(!isNaN(v)) return isFinite(v) ? v : NaN;
	if(!/\d/.test(s)) return v;
	var wt = 1;
	var ss = s.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g, function() { wt *= 100; return "";});
	if(!isNaN(v = Number(ss))) return v / wt;
	ss = ss.replace(/[(](.*)[)]/,function($$, $1) { wt = -wt; return $1;});
	if(!isNaN(v = Number(ss))) return v / wt;
	return v;
}
var lower_months = ['january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];
function fuzzydate(s/*:string*/)/*:Date*/ {
	var o = new Date(s), n = new Date(NaN);
	var y = o.getYear(), m = o.getMonth(), d = o.getDate();
	if(isNaN(d)) return n;
	var lower = s.toLowerCase();
	if(lower.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)) {
		lower = lower.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,"");
		if(lower.length > 3 && lower_months.indexOf(lower) == -1) return n;
	} else if(lower.match(/[a-z]/)) return n;
	if(y < 0 || y > 8099) return n;
	if((m > 0 || d > 1) && y != 101) return o;
	if(s.match(/[^-0-9:,\/\\]/)) return n;
	return o;
}

var split_regex = /*#__PURE__*/(function() {
	var safe_split_regex = "abacaba".split(/(:?b)/i).length == 5;
	return function split_regex(str/*:string*/, re, def/*:string*/)/*:Array<string>*/ {
		if(safe_split_regex || typeof re == "string") return str.split(re);
		var p = str.split(re), o = [p[0]];
		for(var i = 1; i < p.length; ++i) { o.push(def); o.push(p[i]); }
		return o;
	};
})();
function getdatastr(data)/*:?string*/ {
	if(!data) return null;
	if(data.content && data.type) return cc2str(data.content, true);
	if(data.data) return debom(data.data);
	if(data.asNodeBuffer && has_buf) return debom(data.asNodeBuffer().toString('binary'));
	if(data.asBinary) return debom(data.asBinary());
	if(data._data && data._data.getContent) return debom(cc2str(Array.prototype.slice.call(data._data.getContent(),0)));
	return null;
}

function getdatabin(data) {
	if(!data) return null;
	if(data.data) return char_codes(data.data);
	if(data.asNodeBuffer && has_buf) return data.asNodeBuffer();
	if(data._data && data._data.getContent) {
		var o = data._data.getContent();
		if(typeof o == "string") return char_codes(o);
		return Array.prototype.slice.call(o);
	}
	if(data.content && data.type) return data.content;
	return null;
}

function getdata(data) { return (data && data.name.slice(-4) === ".bin") ? getdatabin(data) : getdatastr(data); }

/* Part 2 Section 10.1.2 "Mapping Content Types" Names are case-insensitive */
/* OASIS does not comment on filename case sensitivity */
function safegetzipfile(zip, file/*:string*/) {
	var k = zip.FullPaths || keys(zip.files);
	var f = file.toLowerCase().replace(/[\/]/g, '\\'), g = f.replace(/\\/g,'\/');
	for(var i=0; i<k.length; ++i) {
		var n = k[i].replace(/^Root Entry[\/]/,"").toLowerCase();
		if(f == n || g == n) return zip.files ? zip.files[k[i]] : zip.FileIndex[i];
	}
	return null;
}

function getzipfile(zip, file/*:string*/) {
	var o = safegetzipfile(zip, file);
	if(o == null) throw new Error("Cannot find file " + file + " in zip");
	return o;
}

function getzipdata(zip, file/*:string*/, safe/*:?boolean*/)/*:any*/ {
	if(!safe) return getdata(getzipfile(zip, file));
	if(!file) return null;
	try { return getzipdata(zip, file); } catch(e) { return null; }
}

function getzipstr(zip, file/*:string*/, safe/*:?boolean*/)/*:?string*/ {
	if(!safe) return getdatastr(getzipfile(zip, file));
	if(!file) return null;
	try { return getzipstr(zip, file); } catch(e) { return null; }
}

function getzipbin(zip, file/*:string*/, safe/*:?boolean*/)/*:any*/ {
	if(!safe) return getdatabin(getzipfile(zip, file));
	if(!file) return null;
	try { return getzipbin(zip, file); } catch(e) { return null; }
}

function zipentries(zip) {
	var k = zip.FullPaths || keys(zip.files), o = [];
	for(var i = 0; i < k.length; ++i) if(k[i].slice(-1) != '/') o.push(k[i].replace(/^Root Entry[\/]/, ""));
	return o.sort();
}

function zip_add_file(zip, path, content) {
	if(zip.FullPaths) {
		if(typeof content == "string") {
			var res;
			if(has_buf) res = Buffer_from(content);
			/* TODO: investigate performance in Edge 13 */
			//else if(typeof TextEncoder !== "undefined") res = new TextEncoder().encode(content);
			else res = utf8decode(content);
			return CFB.utils.cfb_add(zip, path, res);
		}
		CFB.utils.cfb_add(zip, path, content);
	}
	else zip.file(path, content);
}

function zip_new() { return CFB.utils.cfb_new(); }

function zip_read(d, o) {
	switch(o.type) {
		case "base64": return CFB.read(d, { type: "base64" });
		case "binary": return CFB.read(d, { type: "binary" });
		case "buffer": case "array": return CFB.read(d, { type: "buffer" });
	}
	throw new Error("Unrecognized type " + o.type);
}

function resolve_path(path/*:string*/, base/*:string*/)/*:string*/ {
	if(path.charAt(0) == "/") return path.slice(1);
	var result = base.split('/');
	if(base.slice(-1) != "/") result.pop(); // folder path
	var target = path.split('/');
	while (target.length !== 0) {
		var step = target.shift();
		if (step === '..') result.pop();
		else if (step !== '.') result.push(step);
	}
	return result.join('/');
}
var XML_HEADER = '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r\n';
var attregexg=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g;
var tagregex1=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg, tagregex2 = /<[^>]*>/g;
var tagregex = /*#__PURE__*/XML_HEADER.match(tagregex1) ? tagregex1 : tagregex2;
var nsregex=/<\w*:/, nsregex2 = /<(\/?)\w+:/;
function parsexmltag(tag/*:string*/, skip_root/*:?boolean*/, skip_LC/*:?boolean*/)/*:any*/ {
	var z = ({}/*:any*/);
	var eq = 0, c = 0;
	for(; eq !== tag.length; ++eq) if((c = tag.charCodeAt(eq)) === 32 || c === 10 || c === 13) break;
	if(!skip_root) z[0] = tag.slice(0, eq);
	if(eq === tag.length) return z;
	var m = tag.match(attregexg), j=0, v="", i=0, q="", cc="", quot = 1;
	if(m) for(i = 0; i != m.length; ++i) {
		cc = m[i];
		for(c=0; c != cc.length; ++c) if(cc.charCodeAt(c) === 61) break;
		q = cc.slice(0,c).trim();
		while(cc.charCodeAt(c+1) == 32) ++c;
		quot = ((eq=cc.charCodeAt(c+1)) == 34 || eq == 39) ? 1 : 0;
		v = cc.slice(c+1+quot, cc.length-quot);
		for(j=0;j!=q.length;++j) if(q.charCodeAt(j) === 58) break;
		if(j===q.length) {
			if(q.indexOf("_") > 0) q = q.slice(0, q.indexOf("_")); // from ods
			z[q] = v;
			if(!skip_LC) z[q.toLowerCase()] = v;
		}
		else {
			var k = (j===5 && q.slice(0,5)==="xmlns"?"xmlns":"")+q.slice(j+1);
			if(z[k] && q.slice(j-3,j) == "ext") continue; // from ods
			z[k] = v;
			if(!skip_LC) z[k.toLowerCase()] = v;
		}
	}
	return z;
}
function strip_ns(x/*:string*/)/*:string*/ { return x.replace(nsregex2, "<$1"); }

var encodings = {
	'&quot;': '"',
	'&apos;': "'",
	'&gt;': '>',
	'&lt;': '<',
	'&amp;': '&'
};
var rencoding = /*#__PURE__*/evert(encodings);
//var rencstr = "&<>'\"".split("");

// TODO: CP remap (need to read file version to determine OS)
var unescapexml/*:StringConv*/ = /*#__PURE__*/(function() {
	/* 22.4.2.4 bstr (Basic String) */
	var encregex = /&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig, coderegex = /_x([\da-fA-F]{4})_/ig;
	return function unescapexml(text/*:string*/)/*:string*/ {
		var s = text + '', i = s.indexOf("<![CDATA[");
		if(i == -1) return s.replace(encregex, function($$, $1) { return encodings[$$]||String.fromCharCode(parseInt($1,$$.indexOf("x")>-1?16:10))||$$; }).replace(coderegex,function(m,c) {return String.fromCharCode(parseInt(c,16));});
		var j = s.indexOf("]]>");
		return unescapexml(s.slice(0, i)) + s.slice(i+9,j) + unescapexml(s.slice(j+3));
	};
})();

var decregex=/[&<>'"]/g, charegex = /[\u0000-\u0008\u000b-\u001f]/g;
function escapexml(text/*:string*/)/*:string*/{
	var s = text + '';
	return s.replace(decregex, function(y) { return rencoding[y]; }).replace(charegex,function(s) { return "_x" + ("000"+s.charCodeAt(0).toString(16)).slice(-4) + "_";});
}
function escapexmltag(text/*:string*/)/*:string*/{ return escapexml(text).replace(/ /g,"_x0020_"); }

var htmlcharegex = /[\u0000-\u001f]/g;
function escapehtml(text/*:string*/)/*:string*/{
	var s = text + '';
	return s.replace(decregex, function(y) { return rencoding[y]; }).replace(/\n/g, "<br/>").replace(htmlcharegex,function(s) { return "&#x" + ("000"+s.charCodeAt(0).toString(16)).slice(-4) + ";"; });
}

function escapexlml(text/*:string*/)/*:string*/{
	var s = text + '';
	return s.replace(decregex, function(y) { return rencoding[y]; }).replace(htmlcharegex,function(s) { return "&#x" + (s.charCodeAt(0).toString(16)).toUpperCase() + ";"; });
}

/* TODO: handle codepages */
var xlml_fixstr/*:StringConv*/ = /*#__PURE__*/(function() {
	var entregex = /&#(\d+);/g;
	function entrepl($$/*:string*/,$1/*:string*/)/*:string*/ { return String.fromCharCode(parseInt($1,10)); }
	return function xlml_fixstr(str/*:string*/)/*:string*/ { return str.replace(entregex,entrepl); };
})();
function xlml_unfixstr(str/*:string*/)/*:string*/ { return str.replace(/(\r\n|[\r\n])/g,"\&#10;"); }

function parsexmlbool(value/*:any*/)/*:boolean*/ {
	switch(value) {
		case 1: case true: case '1': case 'true': case 'TRUE': return true;
		/* case '0': case 'false': case 'FALSE':*/
		default: return false;
	}
}

function utf8reada(orig/*:string*/)/*:string*/ {
	var out = "", i = 0, c = 0, d = 0, e = 0, f = 0, w = 0;
	while (i < orig.length) {
		c = orig.charCodeAt(i++);
		if (c < 128) { out += String.fromCharCode(c); continue; }
		d = orig.charCodeAt(i++);
		if (c>191 && c<224) { f = ((c & 31) << 6); f |= (d & 63); out += String.fromCharCode(f); continue; }
		e = orig.charCodeAt(i++);
		if (c < 240) { out += String.fromCharCode(((c & 15) << 12) | ((d & 63) << 6) | (e & 63)); continue; }
		f = orig.charCodeAt(i++);
		w = (((c & 7) << 18) | ((d & 63) << 12) | ((e & 63) << 6) | (f & 63))-65536;
		out += String.fromCharCode(0xD800 + ((w>>>10)&1023));
		out += String.fromCharCode(0xDC00 + (w&1023));
	}
	return out;
}

function utf8readb(data) {
	var out = new_raw_buf(2*data.length), w, i, j = 1, k = 0, ww=0, c;
	for(i = 0; i < data.length; i+=j) {
		j = 1;
		if((c=data.charCodeAt(i)) < 128) w = c;
		else if(c < 224) { w = (c&31)*64+(data.charCodeAt(i+1)&63); j=2; }
		else if(c < 240) { w=(c&15)*4096+(data.charCodeAt(i+1)&63)*64+(data.charCodeAt(i+2)&63); j=3; }
		else { j = 4;
			w = (c & 7)*262144+(data.charCodeAt(i+1)&63)*4096+(data.charCodeAt(i+2)&63)*64+(data.charCodeAt(i+3)&63);
			w -= 65536; ww = 0xD800 + ((w>>>10)&1023); w = 0xDC00 + (w&1023);
		}
		if(ww !== 0) { out[k++] = ww&255; out[k++] = ww>>>8; ww = 0; }
		out[k++] = w%256; out[k++] = w>>>8;
	}
	return out.slice(0,k).toString('ucs2');
}

function utf8readc(data) { return Buffer_from(data, 'binary').toString('utf8'); }

var utf8corpus = "foo bar baz\u00e2\u0098\u0083\u00f0\u009f\u008d\u00a3";
var utf8read = has_buf && (/*#__PURE__*/utf8readc(utf8corpus) == /*#__PURE__*/utf8reada(utf8corpus) && utf8readc || /*#__PURE__*/utf8readb(utf8corpus) == /*#__PURE__*/utf8reada(utf8corpus) && utf8readb) || utf8reada;

var utf8write/*:StringConv*/ = has_buf ? function(data) { return Buffer_from(data, 'utf8').toString("binary"); } : function(orig/*:string*/)/*:string*/ {
	var out/*:Array<string>*/ = [], i = 0, c = 0, d = 0;
	while(i < orig.length) {
		c = orig.charCodeAt(i++);
		switch(true) {
			case c < 128: out.push(String.fromCharCode(c)); break;
			case c < 2048:
				out.push(String.fromCharCode(192 + (c >> 6)));
				out.push(String.fromCharCode(128 + (c & 63)));
				break;
			case c >= 55296 && c < 57344:
				c -= 55296; d = orig.charCodeAt(i++) - 56320 + (c<<10);
				out.push(String.fromCharCode(240 + ((d >>18) & 7)));
				out.push(String.fromCharCode(144 + ((d >>12) & 63)));
				out.push(String.fromCharCode(128 + ((d >> 6) & 63)));
				out.push(String.fromCharCode(128 + (d & 63)));
				break;
			default:
				out.push(String.fromCharCode(224 + (c >> 12)));
				out.push(String.fromCharCode(128 + ((c >> 6) & 63)));
				out.push(String.fromCharCode(128 + (c & 63)));
		}
	}
	return out.join("");
};

// matches <foo>...</foo> extracts content
var matchtag = /*#__PURE__*/(function() {
	var mtcache/*:{[k:string]:RegExp}*/ = ({}/*:any*/);
	return function matchtag(f/*:string*/,g/*:?string*/)/*:RegExp*/ {
		var t = f+"|"+(g||"");
		if(mtcache[t]) return mtcache[t];
		return (mtcache[t] = new RegExp('<(?:\\w+:)?'+f+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+f+'>',((g||"")/*:any*/)));
	};
})();

var htmldecode/*:{(s:string):string}*/ = /*#__PURE__*/(function() {
	var entities/*:Array<[RegExp, string]>*/ = [
		['nbsp', ' '], ['middot', '·'],
		['quot', '"'], ['apos', "'"], ['gt',   '>'], ['lt',   '<'], ['amp',  '&']
	].map(function(x/*:[string, string]*/) { return [new RegExp('&' + x[0] + ';', "ig"), x[1]]; });
	return function htmldecode(str/*:string*/)/*:string*/ {
		var o = str
				// Remove new lines and spaces from start of content
				.replace(/^[\t\n\r ]+/, "")
				// Remove new lines and spaces from end of content
				.replace(/[\t\n\r ]+$/,"")
				// Added line which removes any white space characters after and before html tags
				.replace(/>\s+/g,">").replace(/\s+</g,"<")
				// Replace remaining new lines and spaces with space
				.replace(/[\t\n\r ]+/g, " ")
				// Replace <br> tags with new lines
				.replace(/<\s*[bB][rR]\s*\/?>/g,"\n")
				// Strip HTML elements
				.replace(/<[^>]*>/g,"");
		for(var i = 0; i < entities.length; ++i) o = o.replace(entities[i][0], entities[i][1]);
		return o;
	};
})();

var vtregex = /*#__PURE__*/(function(){ var vt_cache = {};
	return function vt_regex(bt) {
		if(vt_cache[bt] !== undefined) return vt_cache[bt];
		return (vt_cache[bt] = new RegExp("<(?:vt:)?" + bt + ">([\\s\\S]*?)</(?:vt:)?" + bt + ">", 'g') );
};})();
var vtvregex = /<\/?(?:vt:)?variant>/g, vtmregex = /<(?:vt:)([^>]*)>([\s\S]*)</;
function parseVector(data/*:string*/, opts)/*:Array<{v:string,t:string}>*/ {
	var h = parsexmltag(data);

	var matches/*:Array<string>*/ = data.match(vtregex(h.baseType))||[];
	var res/*:Array<any>*/ = [];
	if(matches.length != h.size) {
		if(opts.WTF) throw new Error("unexpected vector length " + matches.length + " != " + h.size);
		return res;
	}
	matches.forEach(function(x/*:string*/) {
		var v = x.replace(vtvregex,"").match(vtmregex);
		if(v) res.push({v:utf8read(v[2]), t:v[1]});
	});
	return res;
}

var wtregex = /(^\s|\s$|\n)/;
function writetag(f/*:string*/,g/*:string*/)/*:string*/ { return '<' + f + (g.match(wtregex)?' xml:space="preserve"' : "") + '>' + g + '</' + f + '>'; }

function wxt_helper(h)/*:string*/ { return keys(h).map(function(k) { return " " + k + '="' + h[k] + '"';}).join(""); }
function writextag(f/*:string*/,g/*:?string*/,h) { return '<' + f + ((h != null) ? wxt_helper(h) : "") + ((g != null) ? (g.match(wtregex)?' xml:space="preserve"' : "") + '>' + g + '</' + f : "/") + '>';}

function write_w3cdtf(d/*:Date*/, t/*:?boolean*/)/*:string*/ { try { return d.toISOString().replace(/\.\d*/,""); } catch(e) { if(t) throw e; } return ""; }

function write_vt(s, xlsx/*:?boolean*/)/*:string*/ {
	switch(typeof s) {
		case 'string':
			var o = writextag('vt:lpwstr', escapexml(s));
			if(xlsx) o = o.replace(/&quot;/g, "_x0022_");
			return o;
		case 'number': return writextag((s|0)==s?'vt:i4':'vt:r8', escapexml(String(s)));
		case 'boolean': return writextag('vt:bool',s?'true':'false');
	}
	if(s instanceof Date) return writextag('vt:filetime', write_w3cdtf(s));
	throw new Error("Unable to serialize " + s);
}

function xlml_normalize(d)/*:string*/ {
	if(has_buf &&/*::typeof Buffer !== "undefined" && d != null && d instanceof Buffer &&*/ Buffer.isBuffer(d)) return d.toString('utf8');
	if(typeof d === 'string') return d;
	/* duktape */
	if(typeof Uint8Array !== 'undefined' && d instanceof Uint8Array) return utf8read(a2s(ab2a(d)));
	throw new Error("Bad input format: expected Buffer or string");
}
/* UOS uses CJK in tags */
var xlmlregex = /<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg;
//var xlmlregex = /<(\/?)([a-z0-9]*:|)(\w+)[^>]*>/mg;

var XMLNS = ({
	CORE_PROPS: 'http://schemas.openxmlformats.org/package/2006/metadata/core-properties',
	CUST_PROPS: "http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",
	EXT_PROPS: "http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",
	CT: 'http://schemas.openxmlformats.org/package/2006/content-types',
	RELS: 'http://schemas.openxmlformats.org/package/2006/relationships',
	TCMNT: 'http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments',
	'dc': 'http://purl.org/dc/elements/1.1/',
	'dcterms': 'http://purl.org/dc/terms/',
	'dcmitype': 'http://purl.org/dc/dcmitype/',
	'mx': 'http://schemas.microsoft.com/office/mac/excel/2008/main',
	'r': 'http://schemas.openxmlformats.org/officeDocument/2006/relationships',
	'sjs': 'http://schemas.openxmlformats.org/package/2006/sheetjs/core-properties',
	'vt': 'http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes',
	'xsi': 'http://www.w3.org/2001/XMLSchema-instance',
	'xsd': 'http://www.w3.org/2001/XMLSchema'
}/*:any*/);

var XMLNS_main = [
	'http://schemas.openxmlformats.org/spreadsheetml/2006/main',
	'http://purl.oclc.org/ooxml/spreadsheetml/main',
	'http://schemas.microsoft.com/office/excel/2006/main',
	'http://schemas.microsoft.com/office/excel/2006/2'
];

var XLMLNS = ({
	'o':    'urn:schemas-microsoft-com:office:office',
	'x':    'urn:schemas-microsoft-com:office:excel',
	'ss':   'urn:schemas-microsoft-com:office:spreadsheet',
	'dt':   'uuid:C2F41010-65B3-11d1-A29F-00AA00C14882',
	'mv':   'http://macVmlSchemaUri',
	'v':    'urn:schemas-microsoft-com:vml',
	'html': 'http://www.w3.org/TR/REC-html40'
}/*:any*/);
function read_double_le(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ {
	var s = 1 - 2 * (b[idx + 7] >>> 7);
	var e = ((b[idx + 7] & 0x7f) << 4) + ((b[idx + 6] >>> 4) & 0x0f);
	var m = (b[idx+6]&0x0f);
	for(var i = 5; i >= 0; --i) m = m * 256 + b[idx + i];
	if(e == 0x7ff) return m == 0 ? (s * Infinity) : NaN;
	if(e == 0) e = -1022;
	else { e -= 1023; m += Math.pow(2,52); }
	return s * Math.pow(2, e - 52) * m;
}

function write_double_le(b/*:RawBytes|CFBlob*/, v/*:number*/, idx/*:number*/) {
	var bs = ((((v < 0) || (1/v == -Infinity)) ? 1 : 0) << 7), e = 0, m = 0;
	var av = bs ? (-v) : v;
	if(!isFinite(av)) { e = 0x7ff; m = isNaN(v) ? 0x6969 : 0; }
	else if(av == 0) e = m = 0;
	else {
		e = Math.floor(Math.log(av) / Math.LN2);
		m = av * Math.pow(2, 52 - e);
		if((e <= -1023) && (!isFinite(m) || (m < Math.pow(2,52)))) { e = -1022; }
		else { m -= Math.pow(2,52); e+=1023; }
	}
	for(var i = 0; i <= 5; ++i, m/=256) b[idx + i] = m & 0xff;
	b[idx + 6] = ((e & 0x0f) << 4) | (m & 0xf);
	b[idx + 7] = (e >> 4) | bs;
}

var ___toBuffer = function(bufs/*:Array<Array<RawBytes> >*/)/*:RawBytes*/ { var x=[],w=10240; for(var i=0;i<bufs[0].length;++i) if(bufs[0][i]) for(var j=0,L=bufs[0][i].length;j<L;j+=w) x.push.apply(x, bufs[0][i].slice(j,j+w)); return x; };
var __toBuffer = has_buf ? function(bufs) { return (bufs[0].length > 0 && Buffer.isBuffer(bufs[0][0])) ? Buffer.concat(bufs[0].map(function(x) { return Buffer.isBuffer(x) ? x : Buffer_from(x); })) : ___toBuffer(bufs);} : ___toBuffer;

var ___utf16le = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/)/*:string*/ { var ss/*:Array<string>*/=[]; for(var i=s; i<e; i+=2) ss.push(String.fromCharCode(__readUInt16LE(b,i))); return ss.join("").replace(chr0,''); };
var __utf16le = has_buf ? function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/)/*:string*/ { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___utf16le(b,s,e); return b.toString('utf16le',s,e).replace(chr0,'')/*.replace(chr1,'!')*/; } : ___utf16le;

var ___hexlify = function(b/*:RawBytes|CFBlob*/,s/*:number*/,l/*:number*/)/*:string*/ { var ss/*:Array<string>*/=[]; for(var i=s; i<s+l; ++i) ss.push(("0" + b[i].toString(16)).slice(-2)); return ss.join(""); };
var __hexlify = has_buf ? function(b/*:RawBytes|CFBlob*/,s/*:number*/,l/*:number*/)/*:string*/ { return Buffer.isBuffer(b)/*:: && b instanceof Buffer*/ ? b.toString('hex',s,s+l) : ___hexlify(b,s,l); } : ___hexlify;

var ___utf8 = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/) { var ss=[]; for(var i=s; i<e; i++) ss.push(String.fromCharCode(__readUInt8(b,i))); return ss.join(""); };
var __utf8 = has_buf ? function utf8_b(b/*:RawBytes|CFBlob*/, s/*:number*/, e/*:number*/) { return (Buffer.isBuffer(b)/*:: && (b instanceof Buffer)*/) ? b.toString('utf8',s,e) : ___utf8(b,s,e); } : ___utf8;

var ___lpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len-1) : "";};
var __lpstr = ___lpstr;

var ___cpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len-1) : "";};
var __cpstr = ___cpstr;

var ___lpwstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = 2*__readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len-1) : "";};
var __lpwstr = ___lpwstr;

var ___lpp4 = function lpp4_(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf16le(b, i+4,i+4+len) : "";};
var __lpp4 = ___lpp4;

var ___8lpp4 = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? __utf8(b, i+4,i+4+len) : "";};
var __8lpp4 = ___8lpp4;

var ___double = function(b/*:RawBytes|CFBlob*/, idx/*:number*/) { return read_double_le(b, idx);};
var __double = ___double;

var is_buf = function is_buf_a(a) { return Array.isArray(a) || (typeof Uint8Array !== "undefined" && a instanceof Uint8Array); };

if(has_buf/*:: && typeof Buffer !== 'undefined'*/) {
	__lpstr = function lpstr_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___lpstr(b, i); var len = b.readUInt32LE(i); return len > 0 ? b.toString('utf8',i+4,i+4+len-1) : "";};
	__cpstr = function cpstr_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___cpstr(b, i); var len = b.readUInt32LE(i); return len > 0 ? b.toString('utf8',i+4,i+4+len-1) : "";};
	__lpwstr = function lpwstr_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___lpwstr(b, i); var len = 2*b.readUInt32LE(i); return b.toString('utf16le',i+4,i+4+len-1);};
	__lpp4 = function lpp4_b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___lpp4(b, i); var len = b.readUInt32LE(i); return b.toString('utf16le',i+4,i+4+len);};
	__8lpp4 = function lpp4_8b(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(!Buffer.isBuffer(b)/*:: || !(b instanceof Buffer)*/) return ___8lpp4(b, i); var len = b.readUInt32LE(i); return b.toString('utf8',i+4,i+4+len);};
	__double = function double_(b/*:RawBytes|CFBlob*/, i/*:number*/) { if(Buffer.isBuffer(b)/*::&& b instanceof Buffer*/) return b.readDoubleLE(i); return ___double(b,i); };
	is_buf = function is_buf_b(a) { return Buffer.isBuffer(a) || Array.isArray(a) || (typeof Uint8Array !== "undefined" && a instanceof Uint8Array); };
}

/* from js-xls */
function cpdoit() {
	__utf16le = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/) { return $cptable.utils.decode(1200, b.slice(s,e)).replace(chr0, ''); };
	__utf8 = function(b/*:RawBytes|CFBlob*/,s/*:number*/,e/*:number*/) { return $cptable.utils.decode(65001, b.slice(s,e)); };
	__lpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(current_ansi, b.slice(i+4, i+4+len-1)) : "";};
	__cpstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(current_codepage, b.slice(i+4, i+4+len-1)) : "";};
	__lpwstr = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = 2*__readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(1200, b.slice(i+4,i+4+len-1)) : "";};
	__lpp4 = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(1200, b.slice(i+4,i+4+len)) : "";};
	__8lpp4 = function(b/*:RawBytes|CFBlob*/,i/*:number*/) { var len = __readUInt32LE(b,i); return len > 0 ? $cptable.utils.decode(65001, b.slice(i+4,i+4+len)) : "";};
}
if(typeof $cptable !== 'undefined') cpdoit();

var __readUInt8 = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return b[idx]; };
var __readUInt16LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return (b[idx+1]*(1<<8))+b[idx]; };
var __readInt16LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { var u = (b[idx+1]*(1<<8))+b[idx]; return (u < 0x8000) ? u : ((0xffff - u + 1) * -1); };
var __readUInt32LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return b[idx+3]*(1<<24)+(b[idx+2]<<16)+(b[idx+1]<<8)+b[idx]; };
var __readInt32LE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return (b[idx+3]<<24)|(b[idx+2]<<16)|(b[idx+1]<<8)|b[idx]; };
var __readInt32BE = function(b/*:RawBytes|CFBlob*/, idx/*:number*/)/*:number*/ { return (b[idx]<<24)|(b[idx+1]<<16)|(b[idx+2]<<8)|b[idx+3]; };

function ReadShift(size/*:number*/, t/*:?string*/)/*:number|string*/ {
	var o="", oI/*:: :number = 0*/, oR, oo=[], w, vv, i, loc;
	switch(t) {
		case 'dbcs':
			loc = this.l;
			if(has_buf && Buffer.isBuffer(this)) o = this.slice(this.l, this.l+2*size).toString("utf16le");
			else for(i = 0; i < size; ++i) { o+=String.fromCharCode(__readUInt16LE(this, loc)); loc+=2; }
			size *= 2;
			break;

		case 'utf8': o = __utf8(this, this.l, this.l + size); break;
		case 'utf16le': size *= 2; o = __utf16le(this, this.l, this.l + size); break;

		case 'wstr':
			if(typeof $cptable !== 'undefined') o = $cptable.utils.decode(current_codepage, this.slice(this.l, this.l+2*size));
			else return ReadShift.call(this, size, 'dbcs');
			size = 2 * size; break;

		/* [MS-OLEDS] 2.1.4 LengthPrefixedAnsiString */
		case 'lpstr-ansi': o = __lpstr(this, this.l); size = 4 + __readUInt32LE(this, this.l); break;
		case 'lpstr-cp': o = __cpstr(this, this.l); size = 4 + __readUInt32LE(this, this.l); break;
		/* [MS-OLEDS] 2.1.5 LengthPrefixedUnicodeString */
		case 'lpwstr': o = __lpwstr(this, this.l); size = 4 + 2 * __readUInt32LE(this, this.l); break;
		/* [MS-OFFCRYPTO] 2.1.2 Length-Prefixed Padded Unicode String (UNICODE-LP-P4) */
		case 'lpp4': size = 4 +  __readUInt32LE(this, this.l); o = __lpp4(this, this.l); if(size & 0x02) size += 2; break;
		/* [MS-OFFCRYPTO] 2.1.3 Length-Prefixed UTF-8 String (UTF-8-LP-P4) */
		case '8lpp4': size = 4 +  __readUInt32LE(this, this.l); o = __8lpp4(this, this.l); if(size & 0x03) size += 4 - (size & 0x03); break;

		case 'cstr': size = 0; o = "";
			while((w=__readUInt8(this, this.l + size++))!==0) oo.push(_getchar(w));
			o = oo.join(""); break;
		case '_wstr': size = 0; o = "";
			while((w=__readUInt16LE(this,this.l +size))!==0){oo.push(_getchar(w));size+=2;}
			size+=2; o = oo.join(""); break;

		/* sbcs and dbcs support continue records in the SST way TODO codepages */
		case 'dbcs-cont': o = ""; loc = this.l;
			for(i = 0; i < size; ++i) {
				if(this.lens && this.lens.indexOf(loc) !== -1) {
					w = __readUInt8(this, loc);
					this.l = loc + 1;
					vv = ReadShift.call(this, size-i, w ? 'dbcs-cont' : 'sbcs-cont');
					return oo.join("") + vv;
				}
				oo.push(_getchar(__readUInt16LE(this, loc)));
				loc+=2;
			} o = oo.join(""); size *= 2; break;

		case 'cpstr':
			if(typeof $cptable !== 'undefined') {
				o = $cptable.utils.decode(current_codepage, this.slice(this.l, this.l + size));
				break;
			}
		/* falls through */
		case 'sbcs-cont': o = ""; loc = this.l;
			for(i = 0; i != size; ++i) {
				if(this.lens && this.lens.indexOf(loc) !== -1) {
					w = __readUInt8(this, loc);
					this.l = loc + 1;
					vv = ReadShift.call(this, size-i, w ? 'dbcs-cont' : 'sbcs-cont');
					return oo.join("") + vv;
				}
				oo.push(_getchar(__readUInt8(this, loc)));
				loc+=1;
			} o = oo.join(""); break;

		default:
	switch(size) {
		case 1: oI = __readUInt8(this, this.l); this.l++; return oI;
		case 2: oI = (t === 'i' ? __readInt16LE : __readUInt16LE)(this, this.l); this.l += 2; return oI;
		case 4: case -4:
			if(t === 'i' || ((this[this.l+3] & 0x80)===0)) { oI = ((size > 0) ? __readInt32LE : __readInt32BE)(this, this.l); this.l += 4; return oI; }
			else { oR = __readUInt32LE(this, this.l); this.l += 4; } return oR;
		case 8: case -8:
			if(t === 'f') {
				if(size == 8) oR = __double(this, this.l);
				else oR = __double([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]], 0);
				this.l += 8; return oR;
			} else size = 8;
		/* falls through */
		case 16: o = __hexlify(this, this.l, size); break;
	}}
	this.l+=size; return o;
}

var __writeUInt32LE = function(b/*:RawBytes|CFBlob*/, val/*:number*/, idx/*:number*/)/*:void*/ { b[idx] = (val & 0xFF); b[idx+1] = ((val >>> 8) & 0xFF); b[idx+2] = ((val >>> 16) & 0xFF); b[idx+3] = ((val >>> 24) & 0xFF); };
var __writeInt32LE  = function(b/*:RawBytes|CFBlob*/, val/*:number*/, idx/*:number*/)/*:void*/ { b[idx] = (val & 0xFF); b[idx+1] = ((val >> 8) & 0xFF); b[idx+2] = ((val >> 16) & 0xFF); b[idx+3] = ((val >> 24) & 0xFF); };
var __writeUInt16LE = function(b/*:RawBytes|CFBlob*/, val/*:number*/, idx/*:number*/)/*:void*/ { b[idx] = (val & 0xFF); b[idx+1] = ((val >>> 8) & 0xFF); };

function WriteShift(t/*:number*/, val/*:string|number*/, f/*:?string*/)/*:any*/ {
	var size = 0, i = 0;
	if(f === 'dbcs') {
		/*:: if(typeof val !== 'string') throw new Error("unreachable"); */
		for(i = 0; i != val.length; ++i) __writeUInt16LE(this, val.charCodeAt(i), this.l + 2 * i);
		size = 2 * val.length;
	} else if(f === 'sbcs') {
		if(typeof $cptable !== 'undefined' && current_ansi == 874) {
			/* TODO: use tables directly, don't encode */
			/*:: if(typeof val !== "string") throw new Error("unreachable"); */
			for(i = 0; i != val.length; ++i) {
				var cppayload = $cptable.utils.encode(current_ansi, val.charAt(i));
				this[this.l + i] = cppayload[0];
			}
		} else {
			/*:: if(typeof val !== 'string') throw new Error("unreachable"); */
			val = val.replace(/[^\x00-\x7F]/g, "_");
			/*:: if(typeof val !== 'string') throw new Error("unreachable"); */
			for(i = 0; i != val.length; ++i) this[this.l + i] = (val.charCodeAt(i) & 0xFF);
		}
		size = val.length;
	} else if(f === 'hex') {
		for(; i < t; ++i) {
			/*:: if(typeof val !== "string") throw new Error("unreachable"); */
			this[this.l++] = (parseInt(val.slice(2*i, 2*i+2), 16)||0);
		} return this;
	} else if(f === 'utf16le') {
			/*:: if(typeof val !== "string") throw new Error("unreachable"); */
			var end/*:number*/ = Math.min(this.l + t, this.length);
			for(i = 0; i < Math.min(val.length, t); ++i) {
				var cc = val.charCodeAt(i);
				this[this.l++] = (cc & 0xff);
				this[this.l++] = (cc >> 8);
			}
			while(this.l < end) this[this.l++] = 0;
			return this;
	} else /*:: if(typeof val === 'number') */ switch(t) {
		case  1: size = 1; this[this.l] = val&0xFF; break;
		case  2: size = 2; this[this.l] = val&0xFF; val >>>= 8; this[this.l+1] = val&0xFF; break;
		case  3: size = 3; this[this.l] = val&0xFF; val >>>= 8; this[this.l+1] = val&0xFF; val >>>= 8; this[this.l+2] = val&0xFF; break;
		case  4: size = 4; __writeUInt32LE(this, val, this.l); break;
		case  8: size = 8; if(f === 'f') { write_double_le(this, val, this.l); break; }
		/* falls through */
		case 16: break;
		case -4: size = 4; __writeInt32LE(this, val, this.l); break;
	}
	this.l += size; return this;
}

function CheckField(hexstr/*:string*/, fld/*:string*/)/*:void*/ {
	var m = __hexlify(this,this.l,hexstr.length>>1);
	if(m !== hexstr) throw new Error(fld + 'Expected ' + hexstr + ' saw ' + m);
	this.l += hexstr.length>>1;
}

function prep_blob(blob, pos/*:number*/)/*:void*/ {
	blob.l = pos;
	blob.read_shift = /*::(*/ReadShift/*:: :any)*/;
	blob.chk = CheckField;
	blob.write_shift = WriteShift;
}

function parsenoop(blob, length/*:: :number, opts?:any */) { blob.l += length; }

function new_buf(sz/*:number*/)/*:Block*/ {
	var o = new_raw_buf(sz);
	prep_blob(o, 0);
	return o;
}

/* [MS-XLSB] 2.1.4 Record */
function recordhopper(data, cb/*:RecordHopperCB*/, opts/*:?any*/) {
	if(!data) return;
	var tmpbyte, cntbyte, length;
	prep_blob(data, data.l || 0);
	var L = data.length, RT = 0, tgt = 0;
	while(data.l < L) {
		RT = data.read_shift(1);
		if(RT & 0x80) RT = (RT & 0x7F) + ((data.read_shift(1) & 0x7F)<<7);
		var R = XLSBRecordEnum[RT] || XLSBRecordEnum[0xFFFF];
		tmpbyte = data.read_shift(1);
		length = tmpbyte & 0x7F;
		for(cntbyte = 1; cntbyte <4 && (tmpbyte & 0x80); ++cntbyte) length += ((tmpbyte = data.read_shift(1)) & 0x7F)<<(7*cntbyte);
		tgt = data.l + length;
		var d = R.f && R.f(data, length, opts);
		data.l = tgt;
		if(cb(d, R, RT)) return;
	}
}

/* control buffer usage for fixed-length buffers */
function buf_array()/*:BufArray*/ {
	var bufs/*:Array<Block>*/ = [], blksz = has_buf ? 256 : 2048;
	var newblk = function ba_newblk(sz/*:number*/)/*:Block*/ {
		var o/*:Block*/ = (new_buf(sz)/*:any*/);
		prep_blob(o, 0);
		return o;
	};

	var curbuf/*:Block*/ = newblk(blksz);

	var endbuf = function ba_endbuf() {
		if(!curbuf) return;
		if(curbuf.length > curbuf.l) { curbuf = curbuf.slice(0, curbuf.l); curbuf.l = curbuf.length; }
		if(curbuf.length > 0) bufs.push(curbuf);
		curbuf = null;
	};

	var next = function ba_next(sz/*:number*/)/*:Block*/ {
		if(curbuf && (sz < (curbuf.length - curbuf.l))) return curbuf;
		endbuf();
		return (curbuf = newblk(Math.max(sz+1, blksz)));
	};

	var end = function ba_end() {
		endbuf();
		return bconcat(bufs);
	};

	var push = function ba_push(buf) { endbuf(); curbuf = buf; if(curbuf.l == null) curbuf.l = curbuf.length; next(blksz); };

	return ({ next:next, push:push, end:end, _bufs:bufs }/*:any*/);
}

function write_record(ba/*:BufArray*/, type/*:number*/, payload, length/*:?number*/) {
	var t/*:number*/ = +type, l;
	if(isNaN(t)) return; // TODO: throw something here?
	if(!length) length = XLSBRecordEnum[t].p || (payload||[]).length || 0;
	l = 1 + (t >= 0x80 ? 1 : 0) + 1/* + length*/;
	if(length >= 0x80) ++l; if(length >= 0x4000) ++l; if(length >= 0x200000) ++l;
	var o = ba.next(l);
	if(t <= 0x7F) o.write_shift(1, t);
	else {
		o.write_shift(1, (t & 0x7F) + 0x80);
		o.write_shift(1, (t >> 7));
	}
	for(var i = 0; i != 4; ++i) {
		if(length >= 0x80) { o.write_shift(1, (length & 0x7F)+0x80); length >>= 7; }
		else { o.write_shift(1, length); break; }
	}
	if(/*:: length != null &&*/length > 0 && is_buf(payload)) ba.push(payload);
}
/* XLS ranges enforced */
function shift_cell_xls(cell/*:CellAddress*/, tgt/*:any*/, opts/*:?any*/)/*:CellAddress*/ {
	var out = dup(cell);
	if(tgt.s) {
		if(out.cRel) out.c += tgt.s.c;
		if(out.rRel) out.r += tgt.s.r;
	} else {
		if(out.cRel) out.c += tgt.c;
		if(out.rRel) out.r += tgt.r;
	}
	if(!opts || opts.biff < 12) {
		while(out.c >= 0x100) out.c -= 0x100;
		while(out.r >= 0x10000) out.r -= 0x10000;
	}
	return out;
}

function shift_range_xls(cell, range, opts) {
	var out = dup(cell);
	out.s = shift_cell_xls(out.s, range.s, opts);
	out.e = shift_cell_xls(out.e, range.s, opts);
	return out;
}

function encode_cell_xls(c/*:CellAddress*/, biff/*:number*/)/*:string*/ {
	if(c.cRel && c.c < 0) { c = dup(c); while(c.c < 0) c.c += (biff > 8) ? 0x4000 : 0x100; }
	if(c.rRel && c.r < 0) { c = dup(c); while(c.r < 0) c.r += (biff > 8) ? 0x100000 : ((biff > 5) ? 0x10000 : 0x4000); }
	var s = encode_cell(c);
	if(!c.cRel && c.cRel != null) s = fix_col(s);
	if(!c.rRel && c.rRel != null) s = fix_row(s);
	return s;
}

function encode_range_xls(r, opts)/*:string*/ {
	if(r.s.r == 0 && !r.s.rRel) {
		if(r.e.r == (opts.biff >= 12 ? 0xFFFFF : (opts.biff >= 8 ? 0x10000 : 0x4000)) && !r.e.rRel) {
			return (r.s.cRel ? "" : "$") + encode_col(r.s.c) + ":" + (r.e.cRel ? "" : "$") + encode_col(r.e.c);
		}
	}
	if(r.s.c == 0 && !r.s.cRel) {
		if(r.e.c == (opts.biff >= 12 ? 0x3FFF : 0xFF) && !r.e.cRel) {
			return (r.s.rRel ? "" : "$") + encode_row(r.s.r) + ":" + (r.e.rRel ? "" : "$") + encode_row(r.e.r);
		}
	}
	return encode_cell_xls(r.s, opts.biff) + ":" + encode_cell_xls(r.e, opts.biff);
}
function decode_row(rowstr/*:string*/)/*:number*/ { return parseInt(unfix_row(rowstr),10) - 1; }
function encode_row(row/*:number*/)/*:string*/ { return "" + (row + 1); }
function fix_row(cstr/*:string*/)/*:string*/ { return cstr.replace(/([A-Z]|^)(\d+)$/,"$1$$$2"); }
function unfix_row(cstr/*:string*/)/*:string*/ { return cstr.replace(/\$(\d+)$/,"$1"); }

function decode_col(colstr/*:string*/)/*:number*/ { var c = unfix_col(colstr), d = 0, i = 0; for(; i !== c.length; ++i) d = 26*d + c.charCodeAt(i) - 64; return d - 1; }
function encode_col(col/*:number*/)/*:string*/ { if(col < 0) throw new Error("invalid column " + col); var s=""; for(++col; col; col=Math.floor((col-1)/26)) s = String.fromCharCode(((col-1)%26) + 65) + s; return s; }
function fix_col(cstr/*:string*/)/*:string*/ { return cstr.replace(/^([A-Z])/,"$$$1"); }
function unfix_col(cstr/*:string*/)/*:string*/ { return cstr.replace(/^\$([A-Z])/,"$1"); }

function split_cell(cstr/*:string*/)/*:Array<string>*/ { return cstr.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(","); }
//function decode_cell(cstr/*:string*/)/*:CellAddress*/ { var splt = split_cell(cstr); return { c:decode_col(splt[0]), r:decode_row(splt[1]) }; }
function decode_cell(cstr/*:string*/)/*:CellAddress*/ {
	var R = 0, C = 0;
	for(var i = 0; i < cstr.length; ++i) {
		var cc = cstr.charCodeAt(i);
		if(cc >= 48 && cc <= 57) R = 10 * R + (cc - 48);
		else if(cc >= 65 && cc <= 90) C = 26 * C + (cc - 64);
	}
	return { c: C - 1, r:R - 1 };
}
//function encode_cell(cell/*:CellAddress*/)/*:string*/ { return encode_col(cell.c) + encode_row(cell.r); }
function encode_cell(cell/*:CellAddress*/)/*:string*/ {
	var col = cell.c + 1;
	var s="";
	for(; col; col=((col-1)/26)|0) s = String.fromCharCode(((col-1)%26) + 65) + s;
	return s + (cell.r + 1);
}
function decode_range(range/*:string*/)/*:Range*/ {
	var idx = range.indexOf(":");
	if(idx == -1) return { s: decode_cell(range), e: decode_cell(range) };
	return { s: decode_cell(range.slice(0, idx)), e: decode_cell(range.slice(idx + 1)) };
}
/*# if only one arg, it is assumed to be a Range.  If 2 args, both are cell addresses */
function encode_range(cs/*:CellAddrSpec|Range*/,ce/*:?CellAddrSpec*/)/*:string*/ {
	if(typeof ce === 'undefined' || typeof ce === 'number') {
/*:: if(!(cs instanceof Range)) throw "unreachable"; */
		return encode_range(cs.s, cs.e);
	}
/*:: if((cs instanceof Range)) throw "unreachable"; */
	if(typeof cs !== 'string') cs = encode_cell((cs/*:any*/));
	if(typeof ce !== 'string') ce = encode_cell((ce/*:any*/));
/*:: if(typeof cs !== 'string') throw "unreachable"; */
/*:: if(typeof ce !== 'string') throw "unreachable"; */
	return cs == ce ? cs : cs + ":" + ce;
}

function safe_decode_range(range/*:string*/)/*:Range*/ {
	var o = {s:{c:0,r:0},e:{c:0,r:0}};
	var idx = 0, i = 0, cc = 0;
	var len = range.length;
	for(idx = 0; i < len; ++i) {
		if((cc=range.charCodeAt(i)-64) < 1 || cc > 26) break;
		idx = 26*idx + cc;
	}
	o.s.c = --idx;

	for(idx = 0; i < len; ++i) {
		if((cc=range.charCodeAt(i)-48) < 0 || cc > 9) break;
		idx = 10*idx + cc;
	}
	o.s.r = --idx;

	if(i === len || cc != 10) { o.e.c=o.s.c; o.e.r=o.s.r; return o; }
	++i;

	for(idx = 0; i != len; ++i) {
		if((cc=range.charCodeAt(i)-64) < 1 || cc > 26) break;
		idx = 26*idx + cc;
	}
	o.e.c = --idx;

	for(idx = 0; i != len; ++i) {
		if((cc=range.charCodeAt(i)-48) < 0 || cc > 9) break;
		idx = 10*idx + cc;
	}
	o.e.r = --idx;
	return o;
}

function safe_format_cell(cell/*:Cell*/, v/*:any*/) {
	var q = (cell.t == 'd' && v instanceof Date);
	if(cell.z != null) try { return (cell.w = SSF_format(cell.z, q ? datenum(v) : v)); } catch(e) { }
	try { return (cell.w = SSF_format((cell.XF||{}).numFmtId||(q ? 14 : 0),  q ? datenum(v) : v)); } catch(e) { return ''+v; }
}

function format_cell(cell/*:Cell*/, v/*:any*/, o/*:any*/) {
	if(cell == null || cell.t == null || cell.t == 'z') return "";
	if(cell.w !== undefined) return cell.w;
	if(cell.t == 'd' && !cell.z && o && o.dateNF) cell.z = o.dateNF;
	if(cell.t == "e") return BErr[cell.v] || cell.v;
	if(v == undefined) return safe_format_cell(cell, cell.v);
	return safe_format_cell(cell, v);
}

function sheet_to_workbook(sheet/*:Worksheet*/, opts)/*:Workbook*/ {
	var n = opts && opts.sheet ? opts.sheet : "Sheet1";
	var sheets = {}; sheets[n] = sheet;
	return { SheetNames: [n], Sheets: sheets };
}

function sheet_add_aoa(_ws/*:?Worksheet*/, data/*:AOA*/, opts/*:?any*/)/*:Worksheet*/ {
	var o = opts || {};
	var dense = _ws ? Array.isArray(_ws) : o.dense;
	if(DENSE != null && dense == null) dense = DENSE;
	var ws/*:Worksheet*/ = _ws || (dense ? ([]/*:any*/) : ({}/*:any*/));
	var _R = 0, _C = 0;
	if(ws && o.origin != null) {
		if(typeof o.origin == 'number') _R = o.origin;
		else {
			var _origin/*:CellAddress*/ = typeof o.origin == "string" ? decode_cell(o.origin) : o.origin;
			_R = _origin.r; _C = _origin.c;
		}
		if(!ws["!ref"]) ws["!ref"] = "A1:A1";
	}
	var range/*:Range*/ = ({s: {c:10000000, r:10000000}, e: {c:0, r:0}}/*:any*/);
	if(ws['!ref']) {
		var _range = safe_decode_range(ws['!ref']);
		range.s.c = _range.s.c;
		range.s.r = _range.s.r;
		range.e.c = Math.max(range.e.c, _range.e.c);
		range.e.r = Math.max(range.e.r, _range.e.r);
		if(_R == -1) range.e.r = _R = _range.e.r + 1;
	}
	for(var R = 0; R != data.length; ++R) {
		if(!data[R]) continue;
		if(!Array.isArray(data[R])) throw new Error("aoa_to_sheet expects an array of arrays");
		for(var C = 0; C != data[R].length; ++C) {
			if(typeof data[R][C] === 'undefined') continue;
			var cell/*:Cell*/ = ({v: data[R][C] }/*:any*/);
			var __R = _R + R, __C = _C + C;
			if(range.s.r > __R) range.s.r = __R;
			if(range.s.c > __C) range.s.c = __C;
			if(range.e.r < __R) range.e.r = __R;
			if(range.e.c < __C) range.e.c = __C;
			if(data[R][C] && typeof data[R][C] === 'object' && !Array.isArray(data[R][C]) && !(data[R][C] instanceof Date)) cell = data[R][C];
			else {
				if(Array.isArray(cell.v)) { cell.f = data[R][C][1]; cell.v = cell.v[0]; }
				if(cell.v === null) {
					if(cell.f) cell.t = 'n';
					else if(o.nullError) { cell.t = 'e'; cell.v = 0; }
					else if(!o.sheetStubs) continue;
					else cell.t = 'z';
				}
				else if(typeof cell.v === 'number') cell.t = 'n';
				else if(typeof cell.v === 'boolean') cell.t = 'b';
				else if(cell.v instanceof Date) {
					cell.z = o.dateNF || table_fmt[14];
					if(o.cellDates) { cell.t = 'd'; cell.w = SSF_format(cell.z, datenum(cell.v)); }
					else { cell.t = 'n'; cell.v = datenum(cell.v); cell.w = SSF_format(cell.z, cell.v); }
				}
				else cell.t = 's';
			}
			if(dense) {
				if(!ws[__R]) ws[__R] = [];
				if(ws[__R][__C] && ws[__R][__C].z) cell.z = ws[__R][__C].z;
				ws[__R][__C] = cell;
			} else {
				var cell_ref = encode_cell(({c:__C,r:__R}/*:any*/));
				if(ws[cell_ref] && ws[cell_ref].z) cell.z = ws[cell_ref].z;
				ws[cell_ref] = cell;
			}
		}
	}
	if(range.s.c < 10000000) ws['!ref'] = encode_range(range);
	return ws;
}
function aoa_to_sheet(data/*:AOA*/, opts/*:?any*/)/*:Worksheet*/ { return sheet_add_aoa(null, data, opts); }

function parse_Int32LE(data) {
	return data.read_shift(4, 'i');
}
function write_UInt32LE(x/*:number*/, o) {
	if (!o) o = new_buf(4);
	o.write_shift(4, x);
	return o;
}

/* [MS-XLSB] 2.5.168 */
function parse_XLWideString(data/*::, length*/)/*:string*/ {
	var cchCharacters = data.read_shift(4);
	return cchCharacters === 0 ? "" : data.read_shift(cchCharacters, 'dbcs');
}
function write_XLWideString(data/*:string*/, o) {
	var _null = false; if (o == null) { _null = true; o = new_buf(4 + 2 * data.length); }
	o.write_shift(4, data.length);
	if (data.length > 0) o.write_shift(0, data, 'dbcs');
	return _null ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.5.91 */
//function parse_LPWideString(data/*::, length*/)/*:string*/ {
//	var cchCharacters = data.read_shift(2);
//	return cchCharacters === 0 ? "" : data.read_shift(cchCharacters, "utf16le");
//}

/* [MS-XLSB] 2.5.143 */
function parse_StrRun(data) {
	return { ich: data.read_shift(2), ifnt: data.read_shift(2) };
}
function write_StrRun(run, o) {
	if (!o) o = new_buf(4);
	o.write_shift(2, run.ich || 0);
	o.write_shift(2, run.ifnt || 0);
	return o;
}

/* [MS-XLSB] 2.5.121 */
function parse_RichStr(data, length/*:number*/)/*:XLString*/ {
	var start = data.l;
	var flags = data.read_shift(1);
	var str = parse_XLWideString(data);
	var rgsStrRun = [];
	var z = ({ t: str, h: str }/*:any*/);
	if ((flags & 1) !== 0) { /* fRichStr */
		/* TODO: formatted string */
		var dwSizeStrRun = data.read_shift(4);
		for (var i = 0; i != dwSizeStrRun; ++i) rgsStrRun.push(parse_StrRun(data));
		z.r = rgsStrRun;
	}
	else z.r = [{ ich: 0, ifnt: 0 }];
	//if((flags & 2) !== 0) { /* fExtStr */
	//	/* TODO: phonetic string */
	//}
	data.l = start + length;
	return z;
}
function write_RichStr(str/*:XLString*/, o/*:?Block*/)/*:Block*/ {
	/* TODO: formatted string */
	var _null = false; if (o == null) { _null = true; o = new_buf(15 + 4 * str.t.length); }
	o.write_shift(1, 0);
	write_XLWideString(str.t, o);
	return _null ? o.slice(0, o.l) : o;
}
/* [MS-XLSB] 2.4.328 BrtCommentText (RichStr w/1 run) */
var parse_BrtCommentText = parse_RichStr;
function write_BrtCommentText(str/*:XLString*/, o/*:?Block*/)/*:Block*/ {
	/* TODO: formatted string */
	var _null = false; if (o == null) { _null = true; o = new_buf(23 + 4 * str.t.length); }
	o.write_shift(1, 1);
	write_XLWideString(str.t, o);
	o.write_shift(4, 1);
	write_StrRun({ ich: 0, ifnt: 0 }, o);
	return _null ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.5.9 */
function parse_XLSBCell(data)/*:any*/ {
	var col = data.read_shift(4);
	var iStyleRef = data.read_shift(2);
	iStyleRef += data.read_shift(1) << 16;
	data.l++; //var fPhShow = data.read_shift(1);
	return { c: col, iStyleRef: iStyleRef };
}
function write_XLSBCell(cell/*:any*/, o/*:?Block*/) {
	if (o == null) o = new_buf(8);
	o.write_shift(-4, cell.c);
	o.write_shift(3, cell.iStyleRef || cell.s);
	o.write_shift(1, 0); /* fPhShow */
	return o;
}

/* Short XLSB Cell does not include column */
function parse_XLSBShortCell(data)/*:any*/ {
	var iStyleRef = data.read_shift(2);
	iStyleRef += data.read_shift(1) <<16;
	data.l++; //var fPhShow = data.read_shift(1);
	return { c:-1, iStyleRef: iStyleRef };
}
function write_XLSBShortCell(cell/*:any*/, o/*:?Block*/) {
	if(o == null) o = new_buf(4);
	o.write_shift(3, cell.iStyleRef || cell.s);
	o.write_shift(1, 0); /* fPhShow */
	return o;
}

/* [MS-XLSB] 2.5.21 */
var parse_XLSBCodeName = parse_XLWideString;
var write_XLSBCodeName = write_XLWideString;

/* [MS-XLSB] 2.5.166 */
function parse_XLNullableWideString(data/*::, length*/)/*:string*/ {
	var cchCharacters = data.read_shift(4);
	return cchCharacters === 0 || cchCharacters === 0xFFFFFFFF ? "" : data.read_shift(cchCharacters, 'dbcs');
}
function write_XLNullableWideString(data/*:string*/, o) {
	var _null = false; if (o == null) { _null = true; o = new_buf(127); }
	o.write_shift(4, data.length > 0 ? data.length : 0xFFFFFFFF);
	if (data.length > 0) o.write_shift(0, data, 'dbcs');
	return _null ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.5.165 */
var parse_XLNameWideString = parse_XLWideString;
//var write_XLNameWideString = write_XLWideString;

/* [MS-XLSB] 2.5.114 */
var parse_RelID = parse_XLNullableWideString;
var write_RelID = write_XLNullableWideString;


/* [MS-XLS] 2.5.217 ; [MS-XLSB] 2.5.122 */
function parse_RkNumber(data)/*:number*/ {
	var b = data.slice(data.l, data.l + 4);
	var fX100 = (b[0] & 1), fInt = (b[0] & 2);
	data.l += 4;
	var RK = fInt === 0 ? __double([0, 0, 0, 0, (b[0] & 0xFC), b[1], b[2], b[3]], 0) : __readInt32LE(b, 0) >> 2;
	return fX100 ? (RK / 100) : RK;
}
function write_RkNumber(data/*:number*/, o) {
	if (o == null) o = new_buf(4);
	var fX100 = 0, fInt = 0, d100 = data * 100;
	if ((data == (data | 0)) && (data >= -(1 << 29)) && (data < (1 << 29))) { fInt = 1; }
	else if ((d100 == (d100 | 0)) && (d100 >= -(1 << 29)) && (d100 < (1 << 29))) { fInt = 1; fX100 = 1; }
	if (fInt) o.write_shift(-4, ((fX100 ? d100 : data) << 2) + (fX100 + 2));
	else throw new Error("unsupported RkNumber " + data); // TODO
}


/* [MS-XLSB] 2.5.117 RfX */
function parse_RfX(data /*::, length*/)/*:Range*/ {
	var cell/*:Range*/ = ({ s: {}, e: {} }/*:any*/);
	cell.s.r = data.read_shift(4);
	cell.e.r = data.read_shift(4);
	cell.s.c = data.read_shift(4);
	cell.e.c = data.read_shift(4);
	return cell;
}
function write_RfX(r/*:Range*/, o) {
	if (!o) o = new_buf(16);
	o.write_shift(4, r.s.r);
	o.write_shift(4, r.e.r);
	o.write_shift(4, r.s.c);
	o.write_shift(4, r.e.c);
	return o;
}

/* [MS-XLSB] 2.5.153 UncheckedRfX */
var parse_UncheckedRfX = parse_RfX;
var write_UncheckedRfX = write_RfX;

/* [MS-XLSB] 2.5.155 UncheckedSqRfX */
//function parse_UncheckedSqRfX(data) {
//	var cnt = data.read_shift(4);
//	var out = [];
//	for(var i = 0; i < cnt; ++i) {
//		var rng = parse_UncheckedRfX(data);
//		out.push(encode_range(rng));
//	}
//	return out.join(",");
//}
//function write_UncheckedSqRfX(sqrfx/*:string*/) {
//	var parts = sqrfx.split(/\s*,\s*/);
//	var o = new_buf(4); o.write_shift(4, parts.length);
//	var out = [o];
//	parts.forEach(function(rng) {
//		out.push(write_UncheckedRfX(safe_decode_range(rng)));
//	});
//	return bconcat(out);
//}

/* [MS-XLS] 2.5.342 ; [MS-XLSB] 2.5.171 */
/* TODO: error checking, NaN and Infinity values are not valid Xnum */
function parse_Xnum(data/*::, length*/) {
	if(data.length - data.l < 8) throw "XLS Xnum Buffer underflow";
	return data.read_shift(8, 'f');
}
function write_Xnum(data, o) { return (o || new_buf(8)).write_shift(8, data, 'f'); }

/* [MS-XLSB] 2.4.324 BrtColor */
function parse_BrtColor(data/*::, length*/) {
	var out = {};
	var d = data.read_shift(1);

	//var fValidRGB = d & 1;
	var xColorType = d >>> 1;

	var index = data.read_shift(1);
	var nTS = data.read_shift(2, 'i');
	var bR = data.read_shift(1);
	var bG = data.read_shift(1);
	var bB = data.read_shift(1);
	data.l++; //var bAlpha = data.read_shift(1);

	switch (xColorType) {
		case 0: out.auto = 1; break;
		case 1:
			out.index = index;
			var icv = XLSIcv[index];
			/* automatic pseudo index 81 */
			if (icv) out.rgb = rgb2Hex(icv);
			break;
		case 2:
			/* if(!fValidRGB) throw new Error("invalid"); */
			out.rgb = rgb2Hex([bR, bG, bB]);
			break;
		case 3: out.theme = index; break;
	}
	if (nTS != 0) out.tint = nTS > 0 ? nTS / 32767 : nTS / 32768;

	return out;
}
function write_BrtColor(color, o) {
	if (!o) o = new_buf(8);
	if (!color || color.auto) { o.write_shift(4, 0); o.write_shift(4, 0); return o; }
	if (color.index != null) {
		o.write_shift(1, 0x02);
		o.write_shift(1, color.index);
	} else if (color.theme != null) {
		o.write_shift(1, 0x06);
		o.write_shift(1, color.theme);
	} else {
		o.write_shift(1, 0x05);
		o.write_shift(1, 0);
	}
	var nTS = color.tint || 0;
	if (nTS > 0) nTS *= 32767;
	else if (nTS < 0) nTS *= 32768;
	o.write_shift(2, nTS);
	if (!color.rgb || color.theme != null) {
		o.write_shift(2, 0);
		o.write_shift(1, 0);
		o.write_shift(1, 0);
	} else {
		var rgb = (color.rgb || 'FFFFFF');
		if (typeof rgb == 'number') rgb = ("000000" + rgb.toString(16)).slice(-6);
		o.write_shift(1, parseInt(rgb.slice(0, 2), 16));
		o.write_shift(1, parseInt(rgb.slice(2, 4), 16));
		o.write_shift(1, parseInt(rgb.slice(4, 6), 16));
		o.write_shift(1, 0xFF);
	}
	return o;
}

/* [MS-XLSB] 2.5.52 */
function parse_FontFlags(data/*::, length, opts*/) {
	var d = data.read_shift(1);
	data.l++;
	var out = {
		fBold: d & 0x01,
		fItalic: d & 0x02,
		fUnderline: d & 0x04,
		fStrikeout: d & 0x08,
		fOutline: d & 0x10,
		fShadow: d & 0x20,
		fCondense: d & 0x40,
		fExtend: d & 0x80
	};
	return out;
}
function write_FontFlags(font, o) {
	if (!o) o = new_buf(2);
	var grbit =
		(font.italic ? 0x02 : 0) |
		(font.strike ? 0x08 : 0) |
		(font.outline ? 0x10 : 0) |
		(font.shadow ? 0x20 : 0) |
		(font.condense ? 0x40 : 0) |
		(font.extend ? 0x80 : 0);
	o.write_shift(1, grbit);
	o.write_shift(1, 0);
	return o;
}

/* [MS-OLEDS] 2.3.1 and 2.3.2 */
function parse_ClipboardFormatOrString(o, w/*:number*/)/*:string*/ {
	// $FlowIgnore
	var ClipFmt = { 2: "BITMAP", 3: "METAFILEPICT", 8: "DIB", 14: "ENHMETAFILE" };
	var m/*:number*/ = o.read_shift(4);
	switch (m) {
		case 0x00000000: return "";
		case 0xffffffff: case 0xfffffffe: return ClipFmt[o.read_shift(4)] || "";
	}
	if (m > 0x190) throw new Error("Unsupported Clipboard: " + m.toString(16));
	o.l -= 4;
	return o.read_shift(0, w == 1 ? "lpstr" : "lpwstr");
}
function parse_ClipboardFormatOrAnsiString(o) { return parse_ClipboardFormatOrString(o, 1); }
function parse_ClipboardFormatOrUnicodeString(o) { return parse_ClipboardFormatOrString(o, 2); }

/* [MS-OLEPS] 2.2 PropertyType */
// Note: some tree shakers cannot handle VT_VECTOR | $CONST, hence extra vars
//var VT_EMPTY    = 0x0000;
//var VT_NULL     = 0x0001;
var VT_I2       = 0x0002;
var VT_I4       = 0x0003;
//var VT_R4       = 0x0004;
//var VT_R8       = 0x0005;
//var VT_CY       = 0x0006;
//var VT_DATE     = 0x0007;
//var VT_BSTR     = 0x0008;
//var VT_ERROR    = 0x000A;
var VT_BOOL     = 0x000B;
var VT_VARIANT  = 0x000C;
//var VT_DECIMAL  = 0x000E;
//var VT_I1       = 0x0010;
//var VT_UI1      = 0x0011;
//var VT_UI2      = 0x0012;
var VT_UI4      = 0x0013;
//var VT_I8       = 0x0014;
//var VT_UI8      = 0x0015;
//var VT_INT      = 0x0016;
//var VT_UINT     = 0x0017;
var VT_LPSTR    = 0x001E;
//var VT_LPWSTR   = 0x001F;
var VT_FILETIME = 0x0040;
var VT_BLOB     = 0x0041;
//var VT_STREAM   = 0x0042;
//var VT_STORAGE  = 0x0043;
//var VT_STREAMED_Object  = 0x0044;
//var VT_STORED_Object    = 0x0045;
//var VT_BLOB_Object      = 0x0046;
var VT_CF       = 0x0047;
//var VT_CLSID    = 0x0048;
//var VT_VERSIONED_STREAM = 0x0049;
var VT_VECTOR   = 0x1000;
var VT_VECTOR_VARIANT = 0x100C;
var VT_VECTOR_LPSTR   = 0x101E;
//var VT_ARRAY    = 0x2000;

var VT_STRING   = 0x0050; // 2.3.3.1.11 VtString
var VT_USTR     = 0x0051; // 2.3.3.1.12 VtUnalignedString
var VT_CUSTOM   = [VT_STRING, VT_USTR];

/* [MS-OSHARED] 2.3.3.2.2.1 Document Summary Information PIDDSI */
var DocSummaryPIDDSI = {
	/*::[*/0x01/*::]*/: { n: 'CodePage', t: VT_I2 },
	/*::[*/0x02/*::]*/: { n: 'Category', t: VT_STRING },
	/*::[*/0x03/*::]*/: { n: 'PresentationFormat', t: VT_STRING },
	/*::[*/0x04/*::]*/: { n: 'ByteCount', t: VT_I4 },
	/*::[*/0x05/*::]*/: { n: 'LineCount', t: VT_I4 },
	/*::[*/0x06/*::]*/: { n: 'ParagraphCount', t: VT_I4 },
	/*::[*/0x07/*::]*/: { n: 'SlideCount', t: VT_I4 },
	/*::[*/0x08/*::]*/: { n: 'NoteCount', t: VT_I4 },
	/*::[*/0x09/*::]*/: { n: 'HiddenCount', t: VT_I4 },
	/*::[*/0x0a/*::]*/: { n: 'MultimediaClipCount', t: VT_I4 },
	/*::[*/0x0b/*::]*/: { n: 'ScaleCrop', t: VT_BOOL },
	/*::[*/0x0c/*::]*/: { n: 'HeadingPairs', t: VT_VECTOR_VARIANT /* VT_VECTOR | VT_VARIANT */ },
	/*::[*/0x0d/*::]*/: { n: 'TitlesOfParts', t: VT_VECTOR_LPSTR /* VT_VECTOR | VT_LPSTR */ },
	/*::[*/0x0e/*::]*/: { n: 'Manager', t: VT_STRING },
	/*::[*/0x0f/*::]*/: { n: 'Company', t: VT_STRING },
	/*::[*/0x10/*::]*/: { n: 'LinksUpToDate', t: VT_BOOL },
	/*::[*/0x11/*::]*/: { n: 'CharacterCount', t: VT_I4 },
	/*::[*/0x13/*::]*/: { n: 'SharedDoc', t: VT_BOOL },
	/*::[*/0x16/*::]*/: { n: 'HyperlinksChanged', t: VT_BOOL },
	/*::[*/0x17/*::]*/: { n: 'AppVersion', t: VT_I4, p: 'version' },
	/*::[*/0x18/*::]*/: { n: 'DigSig', t: VT_BLOB },
	/*::[*/0x1A/*::]*/: { n: 'ContentType', t: VT_STRING },
	/*::[*/0x1B/*::]*/: { n: 'ContentStatus', t: VT_STRING },
	/*::[*/0x1C/*::]*/: { n: 'Language', t: VT_STRING },
	/*::[*/0x1D/*::]*/: { n: 'Version', t: VT_STRING },
	/*::[*/0xFF/*::]*/: {},
	/* [MS-OLEPS] 2.18 */
	/*::[*/0x80000000/*::]*/: { n: 'Locale', t: VT_UI4 },
	/*::[*/0x80000003/*::]*/: { n: 'Behavior', t: VT_UI4 },
	/*::[*/0x72627262/*::]*/: {}
};

/* [MS-OSHARED] 2.3.3.2.1.1 Summary Information Property Set PIDSI */
var SummaryPIDSI = {
	/*::[*/0x01/*::]*/: { n: 'CodePage', t: VT_I2 },
	/*::[*/0x02/*::]*/: { n: 'Title', t: VT_STRING },
	/*::[*/0x03/*::]*/: { n: 'Subject', t: VT_STRING },
	/*::[*/0x04/*::]*/: { n: 'Author', t: VT_STRING },
	/*::[*/0x05/*::]*/: { n: 'Keywords', t: VT_STRING },
	/*::[*/0x06/*::]*/: { n: 'Comments', t: VT_STRING },
	/*::[*/0x07/*::]*/: { n: 'Template', t: VT_STRING },
	/*::[*/0x08/*::]*/: { n: 'LastAuthor', t: VT_STRING },
	/*::[*/0x09/*::]*/: { n: 'RevNumber', t: VT_STRING },
	/*::[*/0x0A/*::]*/: { n: 'EditTime', t: VT_FILETIME },
	/*::[*/0x0B/*::]*/: { n: 'LastPrinted', t: VT_FILETIME },
	/*::[*/0x0C/*::]*/: { n: 'CreatedDate', t: VT_FILETIME },
	/*::[*/0x0D/*::]*/: { n: 'ModifiedDate', t: VT_FILETIME },
	/*::[*/0x0E/*::]*/: { n: 'PageCount', t: VT_I4 },
	/*::[*/0x0F/*::]*/: { n: 'WordCount', t: VT_I4 },
	/*::[*/0x10/*::]*/: { n: 'CharCount', t: VT_I4 },
	/*::[*/0x11/*::]*/: { n: 'Thumbnail', t: VT_CF },
	/*::[*/0x12/*::]*/: { n: 'Application', t: VT_STRING },
	/*::[*/0x13/*::]*/: { n: 'DocSecurity', t: VT_I4 },
	/*::[*/0xFF/*::]*/: {},
	/* [MS-OLEPS] 2.18 */
	/*::[*/0x80000000/*::]*/: { n: 'Locale', t: VT_UI4 },
	/*::[*/0x80000003/*::]*/: { n: 'Behavior', t: VT_UI4 },
	/*::[*/0x72627262/*::]*/: {}
};

/* [MS-XLS] 2.4.63 Country/Region codes */
var CountryEnum = {
	/*::[*/0x0001/*::]*/: "US", // United States
	/*::[*/0x0002/*::]*/: "CA", // Canada
	/*::[*/0x0003/*::]*/: "", // Latin America (except Brazil)
	/*::[*/0x0007/*::]*/: "RU", // Russia
	/*::[*/0x0014/*::]*/: "EG", // Egypt
	/*::[*/0x001E/*::]*/: "GR", // Greece
	/*::[*/0x001F/*::]*/: "NL", // Netherlands
	/*::[*/0x0020/*::]*/: "BE", // Belgium
	/*::[*/0x0021/*::]*/: "FR", // France
	/*::[*/0x0022/*::]*/: "ES", // Spain
	/*::[*/0x0024/*::]*/: "HU", // Hungary
	/*::[*/0x0027/*::]*/: "IT", // Italy
	/*::[*/0x0029/*::]*/: "CH", // Switzerland
	/*::[*/0x002B/*::]*/: "AT", // Austria
	/*::[*/0x002C/*::]*/: "GB", // United Kingdom
	/*::[*/0x002D/*::]*/: "DK", // Denmark
	/*::[*/0x002E/*::]*/: "SE", // Sweden
	/*::[*/0x002F/*::]*/: "NO", // Norway
	/*::[*/0x0030/*::]*/: "PL", // Poland
	/*::[*/0x0031/*::]*/: "DE", // Germany
	/*::[*/0x0034/*::]*/: "MX", // Mexico
	/*::[*/0x0037/*::]*/: "BR", // Brazil
	/*::[*/0x003d/*::]*/: "AU", // Australia
	/*::[*/0x0040/*::]*/: "NZ", // New Zealand
	/*::[*/0x0042/*::]*/: "TH", // Thailand
	/*::[*/0x0051/*::]*/: "JP", // Japan
	/*::[*/0x0052/*::]*/: "KR", // Korea
	/*::[*/0x0054/*::]*/: "VN", // Viet Nam
	/*::[*/0x0056/*::]*/: "CN", // China
	/*::[*/0x005A/*::]*/: "TR", // Turkey
	/*::[*/0x0069/*::]*/: "JS", // Ramastan
	/*::[*/0x00D5/*::]*/: "DZ", // Algeria
	/*::[*/0x00D8/*::]*/: "MA", // Morocco
	/*::[*/0x00DA/*::]*/: "LY", // Libya
	/*::[*/0x015F/*::]*/: "PT", // Portugal
	/*::[*/0x0162/*::]*/: "IS", // Iceland
	/*::[*/0x0166/*::]*/: "FI", // Finland
	/*::[*/0x01A4/*::]*/: "CZ", // Czech Republic
	/*::[*/0x0376/*::]*/: "TW", // Taiwan
	/*::[*/0x03C1/*::]*/: "LB", // Lebanon
	/*::[*/0x03C2/*::]*/: "JO", // Jordan
	/*::[*/0x03C3/*::]*/: "SY", // Syria
	/*::[*/0x03C4/*::]*/: "IQ", // Iraq
	/*::[*/0x03C5/*::]*/: "KW", // Kuwait
	/*::[*/0x03C6/*::]*/: "SA", // Saudi Arabia
	/*::[*/0x03CB/*::]*/: "AE", // United Arab Emirates
	/*::[*/0x03CC/*::]*/: "IL", // Israel
	/*::[*/0x03CE/*::]*/: "QA", // Qatar
	/*::[*/0x03D5/*::]*/: "IR", // Iran
	/*::[*/0xFFFF/*::]*/: "US"  // United States
};

/* [MS-XLS] 2.5.127 */
var XLSFillPattern = [
	null,
	'solid',
	'mediumGray',
	'darkGray',
	'lightGray',
	'darkHorizontal',
	'darkVertical',
	'darkDown',
	'darkUp',
	'darkGrid',
	'darkTrellis',
	'lightHorizontal',
	'lightVertical',
	'lightDown',
	'lightUp',
	'lightGrid',
	'lightTrellis',
	'gray125',
	'gray0625'
];

function rgbify(arr/*:Array<number>*/)/*:Array<[number, number, number]>*/ { return arr.map(function(x) { return [(x>>16)&255,(x>>8)&255,x&255]; }); }

/* [MS-XLS] 2.5.161 */
/* [MS-XLSB] 2.5.75 Icv */
var _XLSIcv = /*#__PURE__*/ rgbify([
	/* Color Constants */
	0x000000,
	0xFFFFFF,
	0xFF0000,
	0x00FF00,
	0x0000FF,
	0xFFFF00,
	0xFF00FF,
	0x00FFFF,

	/* Overridable Defaults */
	0x000000,
	0xFFFFFF,
	0xFF0000,
	0x00FF00,
	0x0000FF,
	0xFFFF00,
	0xFF00FF,
	0x00FFFF,

	0x800000,
	0x008000,
	0x000080,
	0x808000,
	0x800080,
	0x008080,
	0xC0C0C0,
	0x808080,
	0x9999FF,
	0x993366,
	0xFFFFCC,
	0xCCFFFF,
	0x660066,
	0xFF8080,
	0x0066CC,
	0xCCCCFF,

	0x000080,
	0xFF00FF,
	0xFFFF00,
	0x00FFFF,
	0x800080,
	0x800000,
	0x008080,
	0x0000FF,
	0x00CCFF,
	0xCCFFFF,
	0xCCFFCC,
	0xFFFF99,
	0x99CCFF,
	0xFF99CC,
	0xCC99FF,
	0xFFCC99,

	0x3366FF,
	0x33CCCC,
	0x99CC00,
	0xFFCC00,
	0xFF9900,
	0xFF6600,
	0x666699,
	0x969696,
	0x003366,
	0x339966,
	0x003300,
	0x333300,
	0x993300,
	0x993366,
	0x333399,
	0x333333,

	/* Other entries to appease BIFF8/12 */
	0xFFFFFF, /* 0x40 icvForeground ?? */
	0x000000, /* 0x41 icvBackground ?? */
	0x000000, /* 0x42 icvFrame ?? */
	0x000000, /* 0x43 icv3D ?? */
	0x000000, /* 0x44 icv3DText ?? */
	0x000000, /* 0x45 icv3DHilite ?? */
	0x000000, /* 0x46 icv3DShadow ?? */
	0x000000, /* 0x47 icvHilite ?? */
	0x000000, /* 0x48 icvCtlText ?? */
	0x000000, /* 0x49 icvCtlScrl ?? */
	0x000000, /* 0x4A icvCtlInv ?? */
	0x000000, /* 0x4B icvCtlBody ?? */
	0x000000, /* 0x4C icvCtlFrame ?? */
	0x000000, /* 0x4D icvCtlFore ?? */
	0x000000, /* 0x4E icvCtlBack ?? */
	0x000000, /* 0x4F icvCtlNeutral */
	0x000000, /* 0x50 icvInfoBk ?? */
	0x000000 /* 0x51 icvInfoText ?? */
]);
var XLSIcv = /*#__PURE__*/dup(_XLSIcv);

/* [MS-XLSB] 2.5.97.2 */
var BErr = {
	/*::[*/0x00/*::]*/: "#NULL!",
	/*::[*/0x07/*::]*/: "#DIV/0!",
	/*::[*/0x0F/*::]*/: "#VALUE!",
	/*::[*/0x17/*::]*/: "#REF!",
	/*::[*/0x1D/*::]*/: "#NAME?",
	/*::[*/0x24/*::]*/: "#NUM!",
	/*::[*/0x2A/*::]*/: "#N/A",
	/*::[*/0x2B/*::]*/: "#GETTING_DATA",
	/*::[*/0xFF/*::]*/: "#WTF?"
};
//var RBErr = evert_num(BErr);
var RBErr = {
	"#NULL!":        0x00,
	"#DIV/0!":       0x07,
	"#VALUE!":       0x0F,
	"#REF!":         0x17,
	"#NAME?":        0x1D,
	"#NUM!":         0x24,
	"#N/A":          0x2A,
	"#GETTING_DATA": 0x2B,
	"#WTF?":         0xFF
};

/* Parts enumerated in OPC spec, MS-XLSB and MS-XLSX */
/* 12.3 Part Summary <SpreadsheetML> */
/* 14.2 Part Summary <DrawingML> */
/* [MS-XLSX] 2.1 Part Enumerations ; [MS-XLSB] 2.1.7 Part Enumeration */
var ct2type/*{[string]:string}*/ = ({
	/* Workbook */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml": "workbooks",
	"application/vnd.ms-excel.sheet.macroEnabled.main+xml": "workbooks",
	"application/vnd.ms-excel.sheet.binary.macroEnabled.main": "workbooks",
	"application/vnd.ms-excel.addin.macroEnabled.main+xml": "workbooks",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml": "workbooks",

	/* Worksheet */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml": "sheets",
	"application/vnd.ms-excel.worksheet": "sheets",
	"application/vnd.ms-excel.binIndexWs": "TODO", /* Binary Index */

	/* Chartsheet */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml": "charts",
	"application/vnd.ms-excel.chartsheet": "charts",

	/* Macrosheet */
	"application/vnd.ms-excel.macrosheet+xml": "macros",
	"application/vnd.ms-excel.macrosheet": "macros",
	"application/vnd.ms-excel.intlmacrosheet": "TODO",
	"application/vnd.ms-excel.binIndexMs": "TODO", /* Binary Index */

	/* Dialogsheet */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml": "dialogs",
	"application/vnd.ms-excel.dialogsheet": "dialogs",

	/* Shared Strings */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml": "strs",
	"application/vnd.ms-excel.sharedStrings": "strs",

	/* Styles */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml": "styles",
	"application/vnd.ms-excel.styles": "styles",

	/* File Properties */
	"application/vnd.openxmlformats-package.core-properties+xml": "coreprops",
	"application/vnd.openxmlformats-officedocument.custom-properties+xml": "custprops",
	"application/vnd.openxmlformats-officedocument.extended-properties+xml": "extprops",

	/* Custom Data Properties */
	"application/vnd.openxmlformats-officedocument.customXmlProperties+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty": "TODO",

	/* Comments */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml": "comments",
	"application/vnd.ms-excel.comments": "comments",
	"application/vnd.ms-excel.threadedcomments+xml": "threadedcomments",
	"application/vnd.ms-excel.person+xml": "people",

	/* Metadata (Stock/Geography and Dynamic Array) */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml": "metadata",
	"application/vnd.ms-excel.sheetMetadata": "metadata",

	/* PivotTable */
	"application/vnd.ms-excel.pivotTable": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml": "TODO",

	/* Chart Objects */
	"application/vnd.openxmlformats-officedocument.drawingml.chart+xml": "TODO",

	/* Chart Colors */
	"application/vnd.ms-office.chartcolorstyle+xml": "TODO",

	/* Chart Style */
	"application/vnd.ms-office.chartstyle+xml": "TODO",

	/* Chart Advanced */
	"application/vnd.ms-office.chartex+xml": "TODO",

	/* Calculation Chain */
	"application/vnd.ms-excel.calcChain": "calcchains",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml": "calcchains",

	/* Printer Settings */
	"application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings": "TODO",

	/* ActiveX */
	"application/vnd.ms-office.activeX": "TODO",
	"application/vnd.ms-office.activeX+xml": "TODO",

	/* Custom Toolbars */
	"application/vnd.ms-excel.attachedToolbars": "TODO",

	/* External Data Connections */
	"application/vnd.ms-excel.connections": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml": "TODO",

	/* External Links */
	"application/vnd.ms-excel.externalLink": "links",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml": "links",

	/* PivotCache */
	"application/vnd.ms-excel.pivotCacheDefinition": "TODO",
	"application/vnd.ms-excel.pivotCacheRecords": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml": "TODO",

	/* Query Table */
	"application/vnd.ms-excel.queryTable": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml": "TODO",

	/* Shared Workbook */
	"application/vnd.ms-excel.userNames": "TODO",
	"application/vnd.ms-excel.revisionHeaders": "TODO",
	"application/vnd.ms-excel.revisionLog": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml": "TODO",

	/* Single Cell Table */
	"application/vnd.ms-excel.tableSingleCells": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml": "TODO",

	/* Slicer */
	"application/vnd.ms-excel.slicer": "TODO",
	"application/vnd.ms-excel.slicerCache": "TODO",
	"application/vnd.ms-excel.slicer+xml": "TODO",
	"application/vnd.ms-excel.slicerCache+xml": "TODO",

	/* Sort Map */
	"application/vnd.ms-excel.wsSortMap": "TODO",

	/* Table */
	"application/vnd.ms-excel.table": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml": "TODO",

	/* Themes */
	"application/vnd.openxmlformats-officedocument.theme+xml": "themes",

	/* Theme Override */
	"application/vnd.openxmlformats-officedocument.themeOverride+xml": "TODO",

	/* Timeline */
	"application/vnd.ms-excel.Timeline+xml": "TODO", /* verify */
	"application/vnd.ms-excel.TimelineCache+xml": "TODO", /* verify */

	/* VBA */
	"application/vnd.ms-office.vbaProject": "vba",
	"application/vnd.ms-office.vbaProjectSignature": "TODO",

	/* Volatile Dependencies */
	"application/vnd.ms-office.volatileDependencies": "TODO",
	"application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml": "TODO",

	/* Control Properties */
	"application/vnd.ms-excel.controlproperties+xml": "TODO",

	/* Data Model */
	"application/vnd.openxmlformats-officedocument.model+data": "TODO",

	/* Survey */
	"application/vnd.ms-excel.Survey+xml": "TODO",

	/* Drawing */
	"application/vnd.openxmlformats-officedocument.drawing+xml": "drawings",
	"application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml": "TODO",
	"application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml": "TODO",

	/* VML */
	"application/vnd.openxmlformats-officedocument.vmlDrawing": "TODO",

	"application/vnd.openxmlformats-package.relationships+xml": "rels",
	"application/vnd.openxmlformats-officedocument.oleObject": "TODO",

	/* Image */
	"image/png": "TODO",

	"sheet": "js"
}/*:any*/);

var CT_LIST = {
		workbooks: {
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",
			xlsm: "application/vnd.ms-excel.sheet.macroEnabled.main+xml",
			xlsb: "application/vnd.ms-excel.sheet.binary.macroEnabled.main",
			xlam: "application/vnd.ms-excel.addin.macroEnabled.main+xml",
			xltx: "application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"
		},
		strs: { /* Shared Strings */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",
			xlsb: "application/vnd.ms-excel.sharedStrings"
		},
		comments: { /* Comments */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",
			xlsb: "application/vnd.ms-excel.comments"
		},
		sheets: { /* Worksheet */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",
			xlsb: "application/vnd.ms-excel.worksheet"
		},
		charts: { /* Chartsheet */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",
			xlsb: "application/vnd.ms-excel.chartsheet"
		},
		dialogs: { /* Dialogsheet */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",
			xlsb: "application/vnd.ms-excel.dialogsheet"
		},
		macros: { /* Macrosheet (Excel 4.0 Macros) */
			xlsx: "application/vnd.ms-excel.macrosheet+xml",
			xlsb: "application/vnd.ms-excel.macrosheet"
		},
		metadata: { /* Metadata (Stock/Geography and Dynamic Array) */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",
			xlsb: "application/vnd.ms-excel.sheetMetadata"
		},
		styles: { /* Styles */
			xlsx: "application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",
			xlsb: "application/vnd.ms-excel.styles"
		}
};

function new_ct()/*:any*/ {
	return ({
		workbooks:[], sheets:[], charts:[], dialogs:[], macros:[],
		rels:[], strs:[], comments:[], threadedcomments:[], links:[],
		coreprops:[], extprops:[], custprops:[], themes:[], styles:[],
		calcchains:[], vba: [], drawings: [], metadata: [], people:[],
		TODO:[], xmlns: "" }/*:any*/);
}

function parse_ct(data/*:?string*/) {
	var ct = new_ct();
	if(!data || !data.match) return ct;
	var ctext = {};
	(data.match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		switch(y[0].replace(nsregex,"<")) {
			case '<?xml': break;
			case '<Types': ct.xmlns = y['xmlns' + (y[0].match(/<(\w+):/)||["",""])[1] ]; break;
			case '<Default': ctext[y.Extension] = y.ContentType; break;
			case '<Override':
				if(ct[ct2type[y.ContentType]] !== undefined) ct[ct2type[y.ContentType]].push(y.PartName);
				break;
		}
	});
	if(ct.xmlns !== XMLNS.CT) throw new Error("Unknown Namespace: " + ct.xmlns);
	ct.calcchain = ct.calcchains.length > 0 ? ct.calcchains[0] : "";
	ct.sst = ct.strs.length > 0 ? ct.strs[0] : "";
	ct.style = ct.styles.length > 0 ? ct.styles[0] : "";
	ct.defaults = ctext;
	delete ct.calcchains;
	return ct;
}

function write_ct(ct, opts)/*:string*/ {
	var type2ct/*{[string]:Array<string>}*/ = evert_arr(ct2type);

	var o/*:Array<string>*/ = [], v;
	o[o.length] = (XML_HEADER);
	o[o.length] = writextag('Types', null, {
		'xmlns': XMLNS.CT,
		'xmlns:xsd': XMLNS.xsd,
		'xmlns:xsi': XMLNS.xsi
	});

	o = o.concat([
		['xml', 'application/xml'],
		['bin', 'application/vnd.ms-excel.sheet.binary.macroEnabled.main'],
		['vml', 'application/vnd.openxmlformats-officedocument.vmlDrawing'],
		['data', 'application/vnd.openxmlformats-officedocument.model+data'],
		/* from test files */
		['bmp', 'image/bmp'],
		['png', 'image/png'],
		['gif', 'image/gif'],
		['emf', 'image/x-emf'],
		['wmf', 'image/x-wmf'],
		['jpg', 'image/jpeg'], ['jpeg', 'image/jpeg'],
		['tif', 'image/tiff'], ['tiff', 'image/tiff'],
		['pdf', 'application/pdf'],
		['rels', 'application/vnd.openxmlformats-package.relationships+xml']
	].map(function(x) {
		return writextag('Default', null, {'Extension':x[0], 'ContentType': x[1]});
	}));

	/* only write first instance */
	var f1 = function(w) {
		if(ct[w] && ct[w].length > 0) {
			v = ct[w][0];
			o[o.length] = (writextag('Override', null, {
				'PartName': (v[0] == '/' ? "":"/") + v,
				'ContentType': CT_LIST[w][opts.bookType] || CT_LIST[w]['xlsx']
			}));
		}
	};

	/* book type-specific */
	var f2 = function(w) {
		(ct[w]||[]).forEach(function(v) {
			o[o.length] = (writextag('Override', null, {
				'PartName': (v[0] == '/' ? "":"/") + v,
				'ContentType': CT_LIST[w][opts.bookType] || CT_LIST[w]['xlsx']
			}));
		});
	};

	/* standard type */
	var f3 = function(t) {
		(ct[t]||[]).forEach(function(v) {
			o[o.length] = (writextag('Override', null, {
				'PartName': (v[0] == '/' ? "":"/") + v,
				'ContentType': type2ct[t][0]
			}));
		});
	};

	f1('workbooks');
	f2('sheets');
	f2('charts');
	f3('themes');
	['strs', 'styles'].forEach(f1);
	['coreprops', 'extprops', 'custprops'].forEach(f3);
	f3('vba');
	f3('comments');
	f3('threadedcomments');
	f3('drawings');
	f2('metadata');
	f3('people');
	if(o.length>2){ o[o.length] = ('</Types>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* 9.3 Relationships */
var RELS = ({
	WB: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",
	SHEET: "http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",
	HLINK: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",
	VML: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",
	XPATH: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",
	XMISS: "http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",
	XLINK: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",
	CXML: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",
	CXMLP: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",
	CMNT: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",
	CORE_PROPS: "http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",
	EXT_PROPS: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties',
	CUST_PROPS: 'http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties',
	SST: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",
	STY: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",
	THEME: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",
	CHART: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",
	CHARTEX: "http://schemas.microsoft.com/office/2014/relationships/chartEx",
	CS: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",
	WS: [
		"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",
		"http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"
	],
	DS: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",
	MS: "http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",
	IMG: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",
	DRAW: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",
	XLMETA: "http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",
	TCMNT: "http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",
	PEOPLE: "http://schemas.microsoft.com/office/2017/10/relationships/person",
	VBA: "http://schemas.microsoft.com/office/2006/relationships/vbaProject"
}/*:any*/);


/* 9.3.3 Representing Relationships */
function get_rels_path(file/*:string*/)/*:string*/ {
	var n = file.lastIndexOf("/");
	return file.slice(0,n+1) + '_rels/' + file.slice(n+1) + ".rels";
}

function parse_rels(data/*:?string*/, currentFilePath/*:string*/) {
	var rels = {"!id":{}};
	if (!data) return rels;
	if (currentFilePath.charAt(0) !== '/') {
		currentFilePath = '/'+currentFilePath;
	}
	var hash = {};

	(data.match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		/* 9.3.2.2 OPC_Relationships */
		if (y[0] === '<Relationship') {
			var rel = {}; rel.Type = y.Type; rel.Target = y.Target; rel.Id = y.Id; if(y.TargetMode) rel.TargetMode = y.TargetMode;
			var canonictarget = y.TargetMode === 'External' ? y.Target : resolve_path(y.Target, currentFilePath);
			rels[canonictarget] = rel;
			hash[y.Id] = rel;
		}
	});
	rels["!id"] = hash;
	return rels;
}


/* TODO */
function write_rels(rels)/*:string*/ {
	var o = [XML_HEADER, writextag('Relationships', null, {
		//'xmlns:ns0': XMLNS.RELS,
		'xmlns': XMLNS.RELS
	})];
	keys(rels['!id']).forEach(function(rid) {
		o[o.length] = (writextag('Relationship', null, rels['!id'][rid]));
	});
	if(o.length>2){ o[o.length] = ('</Relationships>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}

function add_rels(rels, rId/*:number*/, f, type, relobj, targetmode/*:?string*/)/*:number*/ {
	if(!relobj) relobj = {};
	if(!rels['!id']) rels['!id'] = {};
	if(!rels['!idx']) rels['!idx'] = 1;
	if(rId < 0) for(rId = rels['!idx']; rels['!id']['rId' + rId]; ++rId){/* empty */}
	rels['!idx'] = rId + 1;
	relobj.Id = 'rId' + rId;
	relobj.Type = type;
	relobj.Target = f;
	if(targetmode) relobj.TargetMode = targetmode;
	else if([RELS.HLINK, RELS.XPATH, RELS.XMISS].indexOf(relobj.Type) > -1) relobj.TargetMode = "External";
	if(rels['!id'][relobj.Id]) throw new Error("Cannot rewrite rId " + rId);
	rels['!id'][relobj.Id] = relobj;
	rels[('/' + relobj.Target).replace("//","/")] = relobj;
	return rId;
}
/* Open Document Format for Office Applications (OpenDocument) Version 1.2 */
/* Part 3 Section 4 Manifest File */
var CT_ODS = "application/vnd.oasis.opendocument.spreadsheet";
function parse_manifest(d, opts) {
	var str = xlml_normalize(d);
	var Rn;
	var FEtag;
	while((Rn = xlmlregex.exec(str))) switch(Rn[3]) {
		case 'manifest': break; // 4.2 <manifest:manifest>
		case 'file-entry': // 4.3 <manifest:file-entry>
			FEtag = parsexmltag(Rn[0], false);
			if(FEtag.path == '/' && FEtag.type !== CT_ODS) throw new Error("This OpenDocument is not a spreadsheet");
			break;
		case 'encryption-data': // 4.4 <manifest:encryption-data>
		case 'algorithm': // 4.5 <manifest:algorithm>
		case 'start-key-generation': // 4.6 <manifest:start-key-generation>
		case 'key-derivation': // 4.7 <manifest:key-derivation>
			throw new Error("Unsupported ODS Encryption");
		default: if(opts && opts.WTF) throw Rn;
	}
}

function write_manifest(manifest/*:Array<Array<string> >*/)/*:string*/ {
	var o = [XML_HEADER];
	o.push('<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">\n');
	o.push('  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>\n');
	for(var i = 0; i < manifest.length; ++i) o.push('  <manifest:file-entry manifest:full-path="' + manifest[i][0] + '" manifest:media-type="' + manifest[i][1] + '"/>\n');
	o.push('</manifest:manifest>');
	return o.join("");
}

/* Part 3 Section 6 Metadata Manifest File */
function write_rdf_type(file/*:string*/, res/*:string*/, tag/*:?string*/) {
	return [
		'  <rdf:Description rdf:about="' + file + '">\n',
		'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/' + (tag || "odf") + '#' + res + '"/>\n',
		'  </rdf:Description>\n'
	].join("");
}
function write_rdf_has(base/*:string*/, file/*:string*/) {
	return [
		'  <rdf:Description rdf:about="' + base + '">\n',
		'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="' + file + '"/>\n',
		'  </rdf:Description>\n'
	].join("");
}
function write_rdf(rdf) {
	var o = [XML_HEADER];
	o.push('<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">\n');
	for(var i = 0; i != rdf.length; ++i) {
		o.push(write_rdf_type(rdf[i][0], rdf[i][1]));
		o.push(write_rdf_has("",rdf[i][0]));
	}
	o.push(write_rdf_type("","Document", "pkg"));
	o.push('</rdf:RDF>');
	return o.join("");
}
/* TODO: pull properties */
function write_meta_ods(/*:: wb: Workbook, opts: any*/)/*:string*/ {
	return '<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>Sheet' + 'JS ' + XLSX.version + '</meta:generator></office:meta></office:document-meta>';
}

/* ECMA-376 Part II 11.1 Core Properties Part */
/* [MS-OSHARED] 2.3.3.2.[1-2].1 (PIDSI/PIDDSI) */
var CORE_PROPS/*:Array<Array<string> >*/ = [
	["cp:category", "Category"],
	["cp:contentStatus", "ContentStatus"],
	["cp:keywords", "Keywords"],
	["cp:lastModifiedBy", "LastAuthor"],
	["cp:lastPrinted", "LastPrinted"],
	["cp:revision", "RevNumber"],
	["cp:version", "Version"],
	["dc:creator", "Author"],
	["dc:description", "Comments"],
	["dc:identifier", "Identifier"],
	["dc:language", "Language"],
	["dc:subject", "Subject"],
	["dc:title", "Title"],
	["dcterms:created", "CreatedDate", 'date'],
	["dcterms:modified", "ModifiedDate", 'date']
];

var CORE_PROPS_REGEX/*:Array<RegExp>*/ = /*#__PURE__*/(function() {
	var r = new Array(CORE_PROPS.length);
	for(var i = 0; i < CORE_PROPS.length; ++i) {
		var f = CORE_PROPS[i];
		var g = "(?:"+ f[0].slice(0,f[0].indexOf(":")) +":)"+ f[0].slice(f[0].indexOf(":")+1);
		r[i] = new RegExp("<" + g + "[^>]*>([\\s\\S]*?)<\/" + g + ">");
	}
	return r;
})();

function parse_core_props(data) {
	var p = {};
	data = utf8read(data);

	for(var i = 0; i < CORE_PROPS.length; ++i) {
		var f = CORE_PROPS[i], cur = data.match(CORE_PROPS_REGEX[i]);
		if(cur != null && cur.length > 0) p[f[1]] = unescapexml(cur[1]);
		if(f[2] === 'date' && p[f[1]]) p[f[1]] = parseDate(p[f[1]]);
	}

	return p;
}

function cp_doit(f, g, h, o, p) {
	if(p[f] != null || g == null || g === "") return;
	p[f] = g;
	g = escapexml(g);
	o[o.length] = (h ? writextag(f,g,h) : writetag(f,g));
}

function write_core_props(cp, _opts) {
	var opts = _opts || {};
	var o = [XML_HEADER, writextag('cp:coreProperties', null, {
		//'xmlns': XMLNS.CORE_PROPS,
		'xmlns:cp': XMLNS.CORE_PROPS,
		'xmlns:dc': XMLNS.dc,
		'xmlns:dcterms': XMLNS.dcterms,
		'xmlns:dcmitype': XMLNS.dcmitype,
		'xmlns:xsi': XMLNS.xsi
	})], p = {};
	if(!cp && !opts.Props) return o.join("");

	if(cp) {
		if(cp.CreatedDate != null) cp_doit("dcterms:created", typeof cp.CreatedDate === "string" ? cp.CreatedDate : write_w3cdtf(cp.CreatedDate, opts.WTF), {"xsi:type":"dcterms:W3CDTF"}, o, p);
		if(cp.ModifiedDate != null) cp_doit("dcterms:modified", typeof cp.ModifiedDate === "string" ? cp.ModifiedDate : write_w3cdtf(cp.ModifiedDate, opts.WTF), {"xsi:type":"dcterms:W3CDTF"}, o, p);
	}

	for(var i = 0; i != CORE_PROPS.length; ++i) {
		var f = CORE_PROPS[i];
		var v = opts.Props && opts.Props[f[1]] != null ? opts.Props[f[1]] : cp ? cp[f[1]] : null;
		if(v === true) v = "1";
		else if(v === false) v = "0";
		else if(typeof v == "number") v = String(v);
		if(v != null) cp_doit(f[0], v, null, o, p);
	}
	if(o.length>2){ o[o.length] = ('</cp:coreProperties>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* 15.2.12.3 Extended File Properties Part */
/* [MS-OSHARED] 2.3.3.2.[1-2].1 (PIDSI/PIDDSI) */
var EXT_PROPS/*:Array<Array<string> >*/ = [
	["Application", "Application", "string"],
	["AppVersion", "AppVersion", "string"],
	["Company", "Company", "string"],
	["DocSecurity", "DocSecurity", "string"],
	["Manager", "Manager", "string"],
	["HyperlinksChanged", "HyperlinksChanged", "bool"],
	["SharedDoc", "SharedDoc", "bool"],
	["LinksUpToDate", "LinksUpToDate", "bool"],
	["ScaleCrop", "ScaleCrop", "bool"],
	["HeadingPairs", "HeadingPairs", "raw"],
	["TitlesOfParts", "TitlesOfParts", "raw"]
];

var PseudoPropsPairs = [
	"Worksheets",  "SheetNames",
	"NamedRanges", "DefinedNames",
	"Chartsheets", "ChartNames"
];
function load_props_pairs(HP/*:string|Array<Array<any>>*/, TOP, props, opts) {
	var v = [];
	if(typeof HP == "string") v = parseVector(HP, opts);
	else for(var j = 0; j < HP.length; ++j) v = v.concat(HP[j].map(function(hp) { return {v:hp}; }));
	var parts = (typeof TOP == "string") ? parseVector(TOP, opts).map(function (x) { return x.v; }) : TOP;
	var idx = 0, len = 0;
	if(parts.length > 0) for(var i = 0; i !== v.length; i += 2) {
		len = +(v[i+1].v);
		switch(v[i].v) {
			case "Worksheets":
			case "工作表":
			case "Листы":
			case "أوراق العمل":
			case "ワークシート":
			case "גליונות עבודה":
			case "Arbeitsblätter":
			case "Çalışma Sayfaları":
			case "Feuilles de calcul":
			case "Fogli di lavoro":
			case "Folhas de cálculo":
			case "Planilhas":
			case "Regneark":
			case "Hojas de cálculo":
			case "Werkbladen":
				props.Worksheets = len;
				props.SheetNames = parts.slice(idx, idx + len);
				break;

			case "Named Ranges":
			case "Rangos con nombre":
			case "名前付き一覧":
			case "Benannte Bereiche":
			case "Navngivne områder":
				props.NamedRanges = len;
				props.DefinedNames = parts.slice(idx, idx + len);
				break;

			case "Charts":
			case "Diagramme":
				props.Chartsheets = len;
				props.ChartNames = parts.slice(idx, idx + len);
				break;
		}
		idx += len;
	}
}

function parse_ext_props(data, p, opts) {
	var q = {}; if(!p) p = {};
	data = utf8read(data);

	EXT_PROPS.forEach(function(f) {
		var xml = (data.match(matchtag(f[0]))||[])[1];
		switch(f[2]) {
			case "string": if(xml) p[f[1]] = unescapexml(xml); break;
			case "bool": p[f[1]] = xml === "true"; break;
			case "raw":
				var cur = data.match(new RegExp("<" + f[0] + "[^>]*>([\\s\\S]*?)<\/" + f[0] + ">"));
				if(cur && cur.length > 0) q[f[1]] = cur[1];
				break;
		}
	});

	if(q.HeadingPairs && q.TitlesOfParts) load_props_pairs(q.HeadingPairs, q.TitlesOfParts, p, opts);

	return p;
}

function write_ext_props(cp/*::, opts*/)/*:string*/ {
	var o/*:Array<string>*/ = [], W = writextag;
	if(!cp) cp = {};
	cp.Application = "SheetJS";
	o[o.length] = (XML_HEADER);
	o[o.length] = (writextag('Properties', null, {
		'xmlns': XMLNS.EXT_PROPS,
		'xmlns:vt': XMLNS.vt
	}));

	EXT_PROPS.forEach(function(f) {
		if(cp[f[1]] === undefined) return;
		var v;
		switch(f[2]) {
			case 'string': v = escapexml(String(cp[f[1]])); break;
			case 'bool': v = cp[f[1]] ? 'true' : 'false'; break;
		}
		if(v !== undefined) o[o.length] = (W(f[0], v));
	});

	/* TODO: HeadingPairs, TitlesOfParts */
	o[o.length] = (W('HeadingPairs', W('vt:vector', W('vt:variant', '<vt:lpstr>Worksheets</vt:lpstr>')+W('vt:variant', W('vt:i4', String(cp.Worksheets))), {size:2, baseType:"variant"})));
	o[o.length] = (W('TitlesOfParts', W('vt:vector', cp.SheetNames.map(function(s) { return "<vt:lpstr>" + escapexml(s) + "</vt:lpstr>"; }).join(""), {size: cp.Worksheets, baseType:"lpstr"})));
	if(o.length>2){ o[o.length] = ('</Properties>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* 15.2.12.2 Custom File Properties Part */
var custregex = /<[^>]+>[^<]*/g;
function parse_cust_props(data/*:string*/, opts) {
	var p = {}, name = "";
	var m = data.match(custregex);
	if(m) for(var i = 0; i != m.length; ++i) {
		var x = m[i], y = parsexmltag(x);
		switch(y[0]) {
			case '<?xml': break;
			case '<Properties': break;
			case '<property': name = unescapexml(y.name); break;
			case '</property>': name = null; break;
			default: if (x.indexOf('<vt:') === 0) {
				var toks = x.split('>');
				var type = toks[0].slice(4), text = toks[1];
				/* 22.4.2.32 (CT_Variant). Omit the binary types from 22.4 (Variant Types) */
				switch(type) {
					case 'lpstr': case 'bstr': case 'lpwstr':
						p[name] = unescapexml(text);
						break;
					case 'bool':
						p[name] = parsexmlbool(text);
						break;
					case 'i1': case 'i2': case 'i4': case 'i8': case 'int': case 'uint':
						p[name] = parseInt(text, 10);
						break;
					case 'r4': case 'r8': case 'decimal':
						p[name] = parseFloat(text);
						break;
					case 'filetime': case 'date':
						p[name] = parseDate(text);
						break;
					case 'cy': case 'error':
						p[name] = unescapexml(text);
						break;
					default:
						if(type.slice(-1) == '/') break;
						if(opts.WTF && typeof console !== 'undefined') console.warn('Unexpected', x, type, toks);
				}
			} else if(x.slice(0,2) === "</") {/* empty */
			} else if(opts.WTF) throw new Error(x);
		}
	}
	return p;
}

function write_cust_props(cp/*::, opts*/)/*:string*/ {
	var o = [XML_HEADER, writextag('Properties', null, {
		'xmlns': XMLNS.CUST_PROPS,
		'xmlns:vt': XMLNS.vt
	})];
	if(!cp) return o.join("");
	var pid = 1;
	keys(cp).forEach(function custprop(k) { ++pid;
		o[o.length] = (writextag('property', write_vt(cp[k], true), {
			'fmtid': '{D5CDD505-2E9C-101B-9397-08002B2CF9AE}',
			'pid': pid,
			'name': escapexml(k)
		}));
	});
	if(o.length>2){ o[o.length] = '</Properties>'; o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* Common Name -> XLML Name */
var XLMLDocPropsMap = {
	Title: 'Title',
	Subject: 'Subject',
	Author: 'Author',
	Keywords: 'Keywords',
	Comments: 'Description',
	LastAuthor: 'LastAuthor',
	RevNumber: 'Revision',
	Application: 'AppName',
	/* TotalTime: 'TotalTime', */
	LastPrinted: 'LastPrinted',
	CreatedDate: 'Created',
	ModifiedDate: 'LastSaved',
	/* Pages */
	/* Words */
	/* Characters */
	Category: 'Category',
	/* PresentationFormat */
	Manager: 'Manager',
	Company: 'Company',
	/* Guid */
	/* HyperlinkBase */
	/* Bytes */
	/* Lines */
	/* Paragraphs */
	/* CharactersWithSpaces */
	AppVersion: 'Version',

	ContentStatus: 'ContentStatus', /* NOTE: missing from schema */
	Identifier: 'Identifier', /* NOTE: missing from schema */
	Language: 'Language' /* NOTE: missing from schema */
};
var evert_XLMLDPM;

function xlml_set_prop(Props, tag/*:string*/, val) {
	if(!evert_XLMLDPM) evert_XLMLDPM = evert(XLMLDocPropsMap);
	tag = evert_XLMLDPM[tag] || tag;
	Props[tag] = val;
}

function xlml_write_docprops(Props, opts) {
	var o/*:Array<string>*/ = [];
	keys(XLMLDocPropsMap).map(function(m) {
		for(var i = 0; i < CORE_PROPS.length; ++i) if(CORE_PROPS[i][1] == m) return CORE_PROPS[i];
		for(i = 0; i < EXT_PROPS.length; ++i) if(EXT_PROPS[i][1] == m) return EXT_PROPS[i];
		throw m;
	}).forEach(function(p) {
		if(Props[p[1]] == null) return;
		var m = opts && opts.Props && opts.Props[p[1]] != null ? opts.Props[p[1]] : Props[p[1]];
		switch(p[2]) {
			case 'date': m = new Date(m).toISOString().replace(/\.\d*Z/,"Z"); break;
		}
		if(typeof m == 'number') m = String(m);
		else if(m === true || m === false) { m = m ? "1" : "0"; }
		else if(m instanceof Date) m = new Date(m).toISOString().replace(/\.\d*Z/,"");
		o.push(writetag(XLMLDocPropsMap[p[1]] || p[1], m));
	});
	return writextag('DocumentProperties', o.join(""), {xmlns:XLMLNS.o });
}
function xlml_write_custprops(Props, Custprops/*::, opts*/) {
	var BLACKLIST = ["Worksheets","SheetNames"];
	var T = 'CustomDocumentProperties';
	var o/*:Array<string>*/ = [];
	if(Props) keys(Props).forEach(function(k) {
		/*:: if(!Props) return; */
		if(!Object.prototype.hasOwnProperty.call(Props, k)) return;
		for(var i = 0; i < CORE_PROPS.length; ++i) if(k == CORE_PROPS[i][1]) return;
		for(i = 0; i < EXT_PROPS.length; ++i) if(k == EXT_PROPS[i][1]) return;
		for(i = 0; i < BLACKLIST.length; ++i) if(k == BLACKLIST[i]) return;

		var m = Props[k];
		var t = "string";
		if(typeof m == 'number') { t = "float"; m = String(m); }
		else if(m === true || m === false) { t = "boolean"; m = m ? "1" : "0"; }
		else m = String(m);
		o.push(writextag(escapexmltag(k), m, {"dt:dt":t}));
	});
	if(Custprops) keys(Custprops).forEach(function(k) {
		/*:: if(!Custprops) return; */
		if(!Object.prototype.hasOwnProperty.call(Custprops, k)) return;
		if(Props && Object.prototype.hasOwnProperty.call(Props, k)) return;
		var m = Custprops[k];
		var t = "string";
		if(typeof m == 'number') { t = "float"; m = String(m); }
		else if(m === true || m === false) { t = "boolean"; m = m ? "1" : "0"; }
		else if(m instanceof Date) { t = "dateTime.tz"; m = m.toISOString(); }
		else m = String(m);
		o.push(writextag(escapexmltag(k), m, {"dt:dt":t}));
	});
	return '<' + T + ' xmlns="' + XLMLNS.o + '">' + o.join("") + '</' + T + '>';
}
/* [MS-DTYP] 2.3.3 FILETIME */
/* [MS-OLEDS] 2.1.3 FILETIME (Packet Version) */
/* [MS-OLEPS] 2.8 FILETIME (Packet Version) */
function parse_FILETIME(blob) {
	var dwLowDateTime = blob.read_shift(4), dwHighDateTime = blob.read_shift(4);
	return new Date(((dwHighDateTime/1e7*Math.pow(2,32) + dwLowDateTime/1e7) - 11644473600)*1000).toISOString().replace(/\.000/,"");
}
function write_FILETIME(time/*:string|Date*/) {
	var date = (typeof time == "string") ? new Date(Date.parse(time)) : time;
	var t = date.getTime() / 1000 + 11644473600;
	var l = t % Math.pow(2,32), h = (t - l) / Math.pow(2,32);
	l *= 1e7; h *= 1e7;
	var w = (l / Math.pow(2,32)) | 0;
	if(w > 0) { l = l % Math.pow(2,32); h += w; }
	var o = new_buf(8); o.write_shift(4, l); o.write_shift(4, h); return o;
}

/* [MS-OSHARED] 2.3.3.1.4 Lpstr */
function parse_lpstr(blob, type, pad/*:?number*/) {
	var start = blob.l;
	var str = blob.read_shift(0, 'lpstr-cp');
	if(pad) while((blob.l - start) & 3) ++blob.l;
	return str;
}

/* [MS-OSHARED] 2.3.3.1.6 Lpwstr */
function parse_lpwstr(blob, type, pad) {
	var str = blob.read_shift(0, 'lpwstr');
	if(pad) blob.l += (4 - ((str.length+1) & 3)) & 3;
	return str;
}


/* [MS-OSHARED] 2.3.3.1.11 VtString */
/* [MS-OSHARED] 2.3.3.1.12 VtUnalignedString */
function parse_VtStringBase(blob, stringType, pad) {
	if(stringType === 0x1F /*VT_LPWSTR*/) return parse_lpwstr(blob);
	return parse_lpstr(blob, stringType, pad);
}

function parse_VtString(blob, t/*:number*/, pad/*:?boolean*/) { return parse_VtStringBase(blob, t, pad === false ? 0: 4); }
function parse_VtUnalignedString(blob, t/*:number*/) { if(!t) throw new Error("VtUnalignedString must have positive length"); return parse_VtStringBase(blob, t, 0); }

/* [MS-OSHARED] 2.3.3.1.7 VtVecLpwstrValue */
function parse_VtVecLpwstrValue(blob)/*:Array<string>*/ {
	var length = blob.read_shift(4);
	var ret/*:Array<string>*/ = [];
	for(var i = 0; i != length; ++i) {
		var start = blob.l;
		ret[i] = blob.read_shift(0, 'lpwstr').replace(chr0,'');
		if((blob.l - start) & 0x02) blob.l += 2;
	}
	return ret;
}

/* [MS-OSHARED] 2.3.3.1.9 VtVecUnalignedLpstrValue */
function parse_VtVecUnalignedLpstrValue(blob)/*:Array<string>*/ {
	var length = blob.read_shift(4);
	var ret/*:Array<string>*/ = [];
	for(var i = 0; i != length; ++i) ret[i] = blob.read_shift(0, 'lpstr-cp').replace(chr0,'');
	return ret;
}


/* [MS-OSHARED] 2.3.3.1.13 VtHeadingPair */
function parse_VtHeadingPair(blob) {
	var start = blob.l;
	var headingString = parse_TypedPropertyValue(blob, VT_USTR);
	if(blob[blob.l] == 0x00 && blob[blob.l+1] == 0x00 && ((blob.l - start) & 0x02)) blob.l += 2;
	var headerParts = parse_TypedPropertyValue(blob, VT_I4);
	return [headingString, headerParts];
}

/* [MS-OSHARED] 2.3.3.1.14 VtVecHeadingPairValue */
function parse_VtVecHeadingPairValue(blob) {
	var cElements = blob.read_shift(4);
	var out = [];
	for(var i = 0; i < cElements / 2; ++i) out.push(parse_VtHeadingPair(blob));
	return out;
}

/* [MS-OLEPS] 2.18.1 Dictionary (uses 2.17, 2.16) */
function parse_dictionary(blob,CodePage) {
	var cnt = blob.read_shift(4);
	var dict/*:{[number]:string}*/ = ({}/*:any*/);
	for(var j = 0; j != cnt; ++j) {
		var pid = blob.read_shift(4);
		var len = blob.read_shift(4);
		dict[pid] = blob.read_shift(len, (CodePage === 0x4B0 ?'utf16le':'utf8')).replace(chr0,'').replace(chr1,'!');
		if(CodePage === 0x4B0 && (len % 2)) blob.l += 2;
	}
	if(blob.l & 3) blob.l = (blob.l>>2+1)<<2;
	return dict;
}

/* [MS-OLEPS] 2.9 BLOB */
function parse_BLOB(blob) {
	var size = blob.read_shift(4);
	var bytes = blob.slice(blob.l,blob.l+size);
	blob.l += size;
	if((size & 3) > 0) blob.l += (4 - (size & 3)) & 3;
	return bytes;
}

/* [MS-OLEPS] 2.11 ClipboardData */
function parse_ClipboardData(blob) {
	// TODO
	var o = {};
	o.Size = blob.read_shift(4);
	//o.Format = blob.read_shift(4);
	blob.l += o.Size + 3 - (o.Size - 1) % 4;
	return o;
}

/* [MS-OLEPS] 2.15 TypedPropertyValue */
function parse_TypedPropertyValue(blob, type/*:number*/, _opts)/*:any*/ {
	var t = blob.read_shift(2), ret, opts = _opts||{};
	blob.l += 2;
	if(type !== VT_VARIANT)
	if(t !== type && VT_CUSTOM.indexOf(type)===-1 && !((type & 0xFFFE) == 0x101E && (t & 0xFFFE) == 0x101E)) throw new Error('Expected type ' + type + ' saw ' + t);
	switch(type === VT_VARIANT ? t : type) {
		case 0x02 /*VT_I2*/: ret = blob.read_shift(2, 'i'); if(!opts.raw) blob.l += 2; return ret;
		case 0x03 /*VT_I4*/: ret = blob.read_shift(4, 'i'); return ret;
		case 0x0B /*VT_BOOL*/: return blob.read_shift(4) !== 0x0;
		case 0x13 /*VT_UI4*/: ret = blob.read_shift(4); return ret;
		case 0x1E /*VT_LPSTR*/: return parse_lpstr(blob, t, 4).replace(chr0,'');
		case 0x1F /*VT_LPWSTR*/: return parse_lpwstr(blob);
		case 0x40 /*VT_FILETIME*/: return parse_FILETIME(blob);
		case 0x41 /*VT_BLOB*/: return parse_BLOB(blob);
		case 0x47 /*VT_CF*/: return parse_ClipboardData(blob);
		case 0x50 /*VT_STRING*/: return parse_VtString(blob, t, !opts.raw).replace(chr0,'');
		case 0x51 /*VT_USTR*/: return parse_VtUnalignedString(blob, t/*, 4*/).replace(chr0,'');
		case 0x100C /*VT_VECTOR|VT_VARIANT*/: return parse_VtVecHeadingPairValue(blob);
		case 0x101E /*VT_VECTOR|VT_LPSTR*/:
		case 0x101F /*VT_VECTOR|VT_LPWSTR*/:
			return t == 0x101F ? parse_VtVecLpwstrValue(blob) : parse_VtVecUnalignedLpstrValue(blob);
		default: throw new Error("TypedPropertyValue unrecognized type " + type + " " + t);
	}
}
function write_TypedPropertyValue(type/*:number*/, value) {
	var o = new_buf(4), p = new_buf(4);
	o.write_shift(4, type == 0x50 ? 0x1F : type);
	switch(type) {
		case 0x03 /*VT_I4*/: p.write_shift(-4, value); break;
		case 0x05 /*VT_I4*/: p = new_buf(8); p.write_shift(8, value, 'f'); break;
		case 0x0B /*VT_BOOL*/: p.write_shift(4, value ? 0x01 : 0x00); break;
		case 0x40 /*VT_FILETIME*/: /*:: if(typeof value !== "string" && !(value instanceof Date)) throw "unreachable"; */ p = write_FILETIME(value); break;
		case 0x1F /*VT_LPWSTR*/:
		case 0x50 /*VT_STRING*/:
			/*:: if(typeof value !== "string") throw "unreachable"; */
			p = new_buf(4 + 2 * (value.length + 1) + (value.length % 2 ? 0 : 2));
			p.write_shift(4, value.length + 1);
			p.write_shift(0, value, "dbcs");
			while(p.l != p.length) p.write_shift(1, 0);
			break;
		default: throw new Error("TypedPropertyValue unrecognized type " + type + " " + value);
	}
	return bconcat([o, p]);
}

/* [MS-OLEPS] 2.20 PropertySet */
function parse_PropertySet(blob, PIDSI) {
	var start_addr = blob.l;
	var size = blob.read_shift(4);
	var NumProps = blob.read_shift(4);
	var Props = [], i = 0;
	var CodePage = 0;
	var Dictionary = -1, DictObj/*:{[number]:string}*/ = ({}/*:any*/);
	for(i = 0; i != NumProps; ++i) {
		var PropID = blob.read_shift(4);
		var Offset = blob.read_shift(4);
		Props[i] = [PropID, Offset + start_addr];
	}
	Props.sort(function(x,y) { return x[1] - y[1]; });
	var PropH = {};
	for(i = 0; i != NumProps; ++i) {
		if(blob.l !== Props[i][1]) {
			var fail = true;
			if(i>0 && PIDSI) switch(PIDSI[Props[i-1][0]].t) {
				case 0x02 /*VT_I2*/: if(blob.l+2 === Props[i][1]) { blob.l+=2; fail = false; } break;
				case 0x50 /*VT_STRING*/: if(blob.l <= Props[i][1]) { blob.l=Props[i][1]; fail = false; } break;
				case 0x100C /*VT_VECTOR|VT_VARIANT*/: if(blob.l <= Props[i][1]) { blob.l=Props[i][1]; fail = false; } break;
			}
			if((!PIDSI||i==0) && blob.l <= Props[i][1]) { fail=false; blob.l = Props[i][1]; }
			if(fail) throw new Error("Read Error: Expected address " + Props[i][1] + ' at ' + blob.l + ' :' + i);
		}
		if(PIDSI) {
			var piddsi = PIDSI[Props[i][0]];
			PropH[piddsi.n] = parse_TypedPropertyValue(blob, piddsi.t, {raw:true});
			if(piddsi.p === 'version') PropH[piddsi.n] = String(PropH[piddsi.n] >> 16) + "." + ("0000" + String(PropH[piddsi.n] & 0xFFFF)).slice(-4);
			if(piddsi.n == "CodePage") switch(PropH[piddsi.n]) {
				case 0: PropH[piddsi.n] = 1252;
					/* falls through */
				case 874:
				case 932:
				case 936:
				case 949:
				case 950:
				case 1250:
				case 1251:
				case 1253:
				case 1254:
				case 1255:
				case 1256:
				case 1257:
				case 1258:
				case 10000:
				case 1200:
				case 1201:
				case 1252:
				case 65000: case -536:
				case 65001: case -535:
					set_cp(CodePage = (PropH[piddsi.n]>>>0) & 0xFFFF); break;
				default: throw new Error("Unsupported CodePage: " + PropH[piddsi.n]);
			}
		} else {
			if(Props[i][0] === 0x1) {
				CodePage = PropH.CodePage = (parse_TypedPropertyValue(blob, VT_I2)/*:number*/);
				set_cp(CodePage);
				if(Dictionary !== -1) {
					var oldpos = blob.l;
					blob.l = Props[Dictionary][1];
					DictObj = parse_dictionary(blob,CodePage);
					blob.l = oldpos;
				}
			} else if(Props[i][0] === 0) {
				if(CodePage === 0) { Dictionary = i; blob.l = Props[i+1][1]; continue; }
				DictObj = parse_dictionary(blob,CodePage);
			} else {
				var name = DictObj[Props[i][0]];
				var val;
				/* [MS-OSHARED] 2.3.3.2.3.1.2 + PROPVARIANT */
				switch(blob[blob.l]) {
					case 0x41 /*VT_BLOB*/: blob.l += 4; val = parse_BLOB(blob); break;
					case 0x1E /*VT_LPSTR*/: blob.l += 4; val = parse_VtString(blob, blob[blob.l-4]).replace(/\u0000+$/,""); break;
					case 0x1F /*VT_LPWSTR*/: blob.l += 4; val = parse_VtString(blob, blob[blob.l-4]).replace(/\u0000+$/,""); break;
					case 0x03 /*VT_I4*/: blob.l += 4; val = blob.read_shift(4, 'i'); break;
					case 0x13 /*VT_UI4*/: blob.l += 4; val = blob.read_shift(4); break;
					case 0x05 /*VT_R8*/: blob.l += 4; val = blob.read_shift(8, 'f'); break;
					case 0x0B /*VT_BOOL*/: blob.l += 4; val = parsebool(blob, 4); break;
					case 0x40 /*VT_FILETIME*/: blob.l += 4; val = parseDate(parse_FILETIME(blob)); break;
					default: throw new Error("unparsed value: " + blob[blob.l]);
				}
				PropH[name] = val;
			}
		}
	}
	blob.l = start_addr + size; /* step ahead to skip padding */
	return PropH;
}
var XLSPSSkip = [ "CodePage", "Thumbnail", "_PID_LINKBASE", "_PID_HLINKS", "SystemIdentifier", "FMTID" ]; //.concat(PseudoPropsPairs);
function guess_property_type(val/*:any*/)/*:number*/ {
	switch(typeof val) {
		case "boolean": return 0x0B;
		case "number": return ((val|0)==val) ? 0x03 : 0x05;
		case "string": return 0x1F;
		case "object": if(val instanceof Date) return 0x40; break;
	}
	return -1;
}
function write_PropertySet(entries, RE, PIDSI) {
	var hdr = new_buf(8), piao = [], prop = [];
	var sz = 8, i = 0;

	var pr = new_buf(8), pio = new_buf(8);
	pr.write_shift(4, 0x0002);
	pr.write_shift(4, 0x04B0);
	pio.write_shift(4, 0x0001);
	prop.push(pr); piao.push(pio);
	sz += 8 + pr.length;

	if(!RE) {
		pio = new_buf(8);
		pio.write_shift(4, 0);
		piao.unshift(pio);

		var bufs = [new_buf(4)];
		bufs[0].write_shift(4, entries.length);
		for(i = 0; i < entries.length; ++i) {
			var value = entries[i][0];
			pr = new_buf(4 + 4 + 2 * (value.length + 1) + (value.length % 2 ? 0 : 2));
			pr.write_shift(4, i+2);
			pr.write_shift(4, value.length + 1);
			pr.write_shift(0, value, "dbcs");
			while(pr.l != pr.length) pr.write_shift(1, 0);
			bufs.push(pr);
		}
		pr = bconcat(bufs);
		prop.unshift(pr);
		sz += 8 + pr.length;
	}

	for(i = 0; i < entries.length; ++i) {
		if(RE && !RE[entries[i][0]]) continue;
		if(XLSPSSkip.indexOf(entries[i][0]) > -1 || PseudoPropsPairs.indexOf(entries[i][0]) > -1) continue;
		if(entries[i][1] == null) continue;

		var val = entries[i][1], idx = 0;
		if(RE) {
			idx = +RE[entries[i][0]];
			var pinfo = (PIDSI/*:: || {}*/)[idx]/*:: || {} */;
			if(pinfo.p == "version" && typeof val == "string") {
				/*:: if(typeof val !== "string") throw "unreachable"; */
				var arr = val.split(".");
				val = ((+arr[0])<<16) + ((+arr[1])||0);
			}
			pr = write_TypedPropertyValue(pinfo.t, val);
		} else {
			var T = guess_property_type(val);
			if(T == -1) { T = 0x1F; val = String(val); }
			pr = write_TypedPropertyValue(T, val);
		}
		prop.push(pr);

		pio = new_buf(8);
		pio.write_shift(4, !RE ? 2+i : idx);
		piao.push(pio);

		sz += 8 + pr.length;
	}

	var w = 8 * (prop.length + 1);
	for(i = 0; i < prop.length; ++i) { piao[i].write_shift(4, w); w += prop[i].length; }
	hdr.write_shift(4, sz);
	hdr.write_shift(4, prop.length);
	return bconcat([hdr].concat(piao).concat(prop));
}

/* [MS-OLEPS] 2.21 PropertySetStream */
function parse_PropertySetStream(file, PIDSI, clsid) {
	var blob = file.content;
	if(!blob) return ({}/*:any*/);
	prep_blob(blob, 0);

	var NumSets, FMTID0, FMTID1, Offset0, Offset1 = 0;
	blob.chk('feff', 'Byte Order: ');

	/*var vers = */blob.read_shift(2); // TODO: check version
	var SystemIdentifier = blob.read_shift(4);
	var CLSID = blob.read_shift(16);
	if(CLSID !== CFB.utils.consts.HEADER_CLSID && CLSID !== clsid) throw new Error("Bad PropertySet CLSID " + CLSID);
	NumSets = blob.read_shift(4);
	if(NumSets !== 1 && NumSets !== 2) throw new Error("Unrecognized #Sets: " + NumSets);
	FMTID0 = blob.read_shift(16); Offset0 = blob.read_shift(4);

	if(NumSets === 1 && Offset0 !== blob.l) throw new Error("Length mismatch: " + Offset0 + " !== " + blob.l);
	else if(NumSets === 2) { FMTID1 = blob.read_shift(16); Offset1 = blob.read_shift(4); }
	var PSet0 = parse_PropertySet(blob, PIDSI);

	var rval = ({ SystemIdentifier: SystemIdentifier }/*:any*/);
	for(var y in PSet0) rval[y] = PSet0[y];
	//rval.blob = blob;
	rval.FMTID = FMTID0;
	//rval.PSet0 = PSet0;
	if(NumSets === 1) return rval;
	if(Offset1 - blob.l == 2) blob.l += 2;
	if(blob.l !== Offset1) throw new Error("Length mismatch 2: " + blob.l + " !== " + Offset1);
	var PSet1;
	try { PSet1 = parse_PropertySet(blob, null); } catch(e) {/* empty */}
	for(y in PSet1) rval[y] = PSet1[y];
	rval.FMTID = [FMTID0, FMTID1]; // TODO: verify FMTID0/1
	return rval;
}
function write_PropertySetStream(entries, clsid, RE, PIDSI/*:{[key:string|number]:any}*/, entries2/*:?any*/, clsid2/*:?any*/) {
	var hdr = new_buf(entries2 ? 68 : 48);
	var bufs = [hdr];
	hdr.write_shift(2, 0xFFFE);
	hdr.write_shift(2, 0x0000); /* TODO: type 1 props */
	hdr.write_shift(4, 0x32363237);
	hdr.write_shift(16, CFB.utils.consts.HEADER_CLSID, "hex");
	hdr.write_shift(4, (entries2 ? 2 : 1));
	hdr.write_shift(16, clsid, "hex");
	hdr.write_shift(4, (entries2 ? 68 : 48));
	var ps0 = write_PropertySet(entries, RE, PIDSI);
	bufs.push(ps0);

	if(entries2) {
		var ps1 = write_PropertySet(entries2, null, null);
		hdr.write_shift(16, clsid2, "hex");
		hdr.write_shift(4, 68 + ps0.length);
		bufs.push(ps1);
	}
	return bconcat(bufs);
}

function parsenoop2(blob, length) { blob.read_shift(length); return null; }
function writezeroes(n, o) { if(!o) o=new_buf(n); for(var j=0; j<n; ++j) o.write_shift(1, 0); return o; }

function parslurp(blob, length, cb) {
	var arr = [], target = blob.l + length;
	while(blob.l < target) arr.push(cb(blob, target - blob.l));
	if(target !== blob.l) throw new Error("Slurp error");
	return arr;
}

function parsebool(blob, length/*:number*/) { return blob.read_shift(length) === 0x1; }
function writebool(v/*:any*/, o) { if(!o) o=new_buf(2); o.write_shift(2, +!!v); return o; }

function parseuint16(blob/*::, length:?number, opts:?any*/) { return blob.read_shift(2, 'u'); }
function writeuint16(v/*:number*/, o) { if(!o) o=new_buf(2); o.write_shift(2, v); return o; }
function parseuint16a(blob, length/*:: :?number, opts:?any*/) { return parslurp(blob,length,parseuint16);}

/* --- 2.5 Structures --- */

/* [MS-XLS] 2.5.10 Bes (boolean or error) */
function parse_Bes(blob/*::, length*/) {
	var v = blob.read_shift(1), t = blob.read_shift(1);
	return t === 0x01 ? v : v === 0x01;
}
function write_Bes(v, t/*:string*/, o) {
	if(!o) o = new_buf(2);
	o.write_shift(1, ((t == 'e') ? +v : +!!v));
	o.write_shift(1, ((t == 'e') ? 1 : 0));
	return o;
}

/* [MS-XLS] 2.5.240 ShortXLUnicodeString */
function parse_ShortXLUnicodeString(blob, length, opts) {
	var cch = blob.read_shift(opts && opts.biff >= 12 ? 2 : 1);
	var encoding = 'sbcs-cont';
	var cp = current_codepage;
	if(opts && opts.biff >= 8) current_codepage = 1200;
	if(!opts || opts.biff == 8 ) {
		var fHighByte = blob.read_shift(1);
		if(fHighByte) { encoding = 'dbcs-cont'; }
	} else if(opts.biff == 12) {
		encoding = 'wstr';
	}
	if(opts.biff >= 2 && opts.biff <= 5) encoding = 'cpstr';
	var o = cch ? blob.read_shift(cch, encoding) : "";
	current_codepage = cp;
	return o;
}

/* 2.5.293 XLUnicodeRichExtendedString */
function parse_XLUnicodeRichExtendedString(blob) {
	var cp = current_codepage;
	current_codepage = 1200;
	var cch = blob.read_shift(2), flags = blob.read_shift(1);
	var /*fHighByte = flags & 0x1,*/ fExtSt = flags & 0x4, fRichSt = flags & 0x8;
	var width = 1 + (flags & 0x1); // 0x0 -> utf8, 0x1 -> dbcs
	var cRun = 0, cbExtRst;
	var z = {};
	if(fRichSt) cRun = blob.read_shift(2);
	if(fExtSt) cbExtRst = blob.read_shift(4);
	var encoding = width == 2 ? 'dbcs-cont' : 'sbcs-cont';
	var msg = cch === 0 ? "" : blob.read_shift(cch, encoding);
	if(fRichSt) blob.l += 4 * cRun; //TODO: parse this
	if(fExtSt) blob.l += cbExtRst; //TODO: parse this
	z.t = msg;
	if(!fRichSt) { z.raw = "<t>" + z.t + "</t>"; z.r = z.t; }
	current_codepage = cp;
	return z;
}
function write_XLUnicodeRichExtendedString(xlstr/*:: :XLString, opts*/) {
	var str = (xlstr.t||""), nfmts = 1;

	var hdr = new_buf(3 + (nfmts > 1 ? 2 : 0));
	hdr.write_shift(2, str.length);
	hdr.write_shift(1, (nfmts > 1 ? 0x08 : 0x00) | 0x01);
	if(nfmts > 1) hdr.write_shift(2, nfmts);

	var otext = new_buf(2 * str.length);
	otext.write_shift(2 * str.length, str, 'utf16le');

	var out = [hdr, otext];

	return bconcat(out);
}

/* 2.5.296 XLUnicodeStringNoCch */
function parse_XLUnicodeStringNoCch(blob, cch, opts) {
	var retval;
	if(opts) {
		if(opts.biff >= 2 && opts.biff <= 5) return blob.read_shift(cch, 'cpstr');
		if(opts.biff >= 12) return blob.read_shift(cch, 'dbcs-cont');
	}
	var fHighByte = blob.read_shift(1);
	if(fHighByte===0) { retval = blob.read_shift(cch, 'sbcs-cont'); }
	else { retval = blob.read_shift(cch, 'dbcs-cont'); }
	return retval;
}

/* 2.5.294 XLUnicodeString */
function parse_XLUnicodeString(blob, length, opts) {
	var cch = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);
	if(cch === 0) { blob.l++; return ""; }
	return parse_XLUnicodeStringNoCch(blob, cch, opts);
}
/* BIFF5 override */
function parse_XLUnicodeString2(blob, length, opts) {
	if(opts.biff > 5) return parse_XLUnicodeString(blob, length, opts);
	var cch = blob.read_shift(1);
	if(cch === 0) { blob.l++; return ""; }
	return blob.read_shift(cch, (opts.biff <= 4 || !blob.lens ) ? 'cpstr' : 'sbcs-cont');
}
/* TODO: BIFF5 and lower, codepage awareness */
function write_XLUnicodeString(str, opts, o) {
	if(!o) o = new_buf(3 + 2 * str.length);
	o.write_shift(2, str.length);
	o.write_shift(1, 1);
	o.write_shift(31, str, 'utf16le');
	return o;
}

/* [MS-XLS] 2.5.61 ControlInfo */
function parse_ControlInfo(blob/*::, length, opts*/) {
	var flags = blob.read_shift(1);
	blob.l++;
	var accel = blob.read_shift(2);
	blob.l += 2;
	return [flags, accel];
}

/* [MS-OSHARED] 2.3.7.6 URLMoniker TODO: flags */
function parse_URLMoniker(blob/*::, length, opts*/) {
	var len = blob.read_shift(4), start = blob.l;
	var extra = false;
	if(len > 24) {
		/* look ahead */
		blob.l += len - 24;
		if(blob.read_shift(16) === "795881f43b1d7f48af2c825dc4852763") extra = true;
		blob.l = start;
	}
	var url = blob.read_shift((extra?len-24:len)>>1, 'utf16le').replace(chr0,"");
	if(extra) blob.l += 24;
	return url;
}

/* [MS-OSHARED] 2.3.7.8 FileMoniker TODO: all fields */
function parse_FileMoniker(blob/*::, length*/) {
	var cAnti = blob.read_shift(2);
	var preamble = ""; while(cAnti-- > 0) preamble += "../";
	var ansiPath = blob.read_shift(0, 'lpstr-ansi');
	blob.l += 2; //var endServer = blob.read_shift(2);
	if(blob.read_shift(2) != 0xDEAD) throw new Error("Bad FileMoniker");
	var sz = blob.read_shift(4);
	if(sz === 0) return preamble + ansiPath.replace(/\\/g,"/");
	var bytes = blob.read_shift(4);
	if(blob.read_shift(2) != 3) throw new Error("Bad FileMoniker");
	var unicodePath = blob.read_shift(bytes>>1, 'utf16le').replace(chr0,"");
	return preamble + unicodePath;
}

/* [MS-OSHARED] 2.3.7.2 HyperlinkMoniker TODO: all the monikers */
function parse_HyperlinkMoniker(blob, length) {
	var clsid = blob.read_shift(16); length -= 16;
	switch(clsid) {
		case "e0c9ea79f9bace118c8200aa004ba90b": return parse_URLMoniker(blob, length);
		case "0303000000000000c000000000000046": return parse_FileMoniker(blob, length);
		default: throw new Error("Unsupported Moniker " + clsid);
	}
}

/* [MS-OSHARED] 2.3.7.9 HyperlinkString */
function parse_HyperlinkString(blob/*::, length*/) {
	var len = blob.read_shift(4);
	var o = len > 0 ? blob.read_shift(len, 'utf16le').replace(chr0, "") : "";
	return o;
}
function write_HyperlinkString(str/*:string*/, o) {
	if(!o) o = new_buf(6 + str.length * 2);
	o.write_shift(4, 1 + str.length);
	for(var i = 0; i < str.length; ++i) o.write_shift(2, str.charCodeAt(i));
	o.write_shift(2, 0);
	return o;
}

/* [MS-OSHARED] 2.3.7.1 Hyperlink Object */
function parse_Hyperlink(blob, length)/*:Hyperlink*/ {
	var end = blob.l + length;
	var sVer = blob.read_shift(4);
	if(sVer !== 2) throw new Error("Unrecognized streamVersion: " + sVer);
	var flags = blob.read_shift(2);
	blob.l += 2;
	var displayName, targetFrameName, moniker, oleMoniker, Loc="", guid, fileTime;
	if(flags & 0x0010) displayName = parse_HyperlinkString(blob, end - blob.l);
	if(flags & 0x0080) targetFrameName = parse_HyperlinkString(blob, end - blob.l);
	if((flags & 0x0101) === 0x0101) moniker = parse_HyperlinkString(blob, end - blob.l);
	if((flags & 0x0101) === 0x0001) oleMoniker = parse_HyperlinkMoniker(blob, end - blob.l);
	if(flags & 0x0008) Loc = parse_HyperlinkString(blob, end - blob.l);
	if(flags & 0x0020) guid = blob.read_shift(16);
	if(flags & 0x0040) fileTime = parse_FILETIME(blob/*, 8*/);
	blob.l = end;
	var target = targetFrameName||moniker||oleMoniker||"";
	if(target && Loc) target+="#"+Loc;
	if(!target) target = "#" + Loc;
	if((flags & 0x0002) && target.charAt(0) == "/" && target.charAt(1) != "/") target = "file://" + target;
	var out = ({Target:target}/*:any*/);
	if(guid) out.guid = guid;
	if(fileTime) out.time = fileTime;
	if(displayName) out.Tooltip = displayName;
	return out;
}
function write_Hyperlink(hl) {
	var out = new_buf(512), i = 0;
	var Target = hl.Target;
	if(Target.slice(0,7) == "file://") Target = Target.slice(7);
	var hashidx = Target.indexOf("#");
	var F = hashidx > -1 ? 0x1f : 0x17;
	switch(Target.charAt(0)) { case "#": F=0x1c; break; case ".": F&=~2; break; }
	out.write_shift(4,2); out.write_shift(4, F);
	var data = [8,6815827,6619237,4849780,83]; for(i = 0; i < data.length; ++i) out.write_shift(4, data[i]);
	if(F == 0x1C) {
		Target = Target.slice(1);
		write_HyperlinkString(Target, out);
	} else if(F & 0x02) {
		data = "e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" ");
		for(i = 0; i < data.length; ++i) out.write_shift(1, parseInt(data[i], 16));
		var Pretarget = hashidx > -1 ? Target.slice(0, hashidx) : Target;
		out.write_shift(4, 2*(Pretarget.length + 1));
		for(i = 0; i < Pretarget.length; ++i) out.write_shift(2, Pretarget.charCodeAt(i));
		out.write_shift(2, 0);
		if(F & 0x08) write_HyperlinkString(hashidx > -1 ? Target.slice(hashidx+1): "", out);
	} else {
		data = "03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" ");
		for(i = 0; i < data.length; ++i) out.write_shift(1, parseInt(data[i], 16));
		var P = 0;
		while(Target.slice(P*3,P*3+3)=="../"||Target.slice(P*3,P*3+3)=="..\\") ++P;
		out.write_shift(2, P);
		out.write_shift(4, Target.length - 3 * P + 1);
		for(i = 0; i < Target.length - 3 * P; ++i) out.write_shift(1, Target.charCodeAt(i + 3 * P) & 0xFF);
		out.write_shift(1, 0);
		out.write_shift(2, 0xFFFF);
		out.write_shift(2, 0xDEAD);
		for(i = 0; i < 6; ++i) out.write_shift(4, 0);
	}
	return out.slice(0, out.l);
}

/* 2.5.178 LongRGBA */
function parse_LongRGBA(blob/*::, length*/) { var r = blob.read_shift(1), g = blob.read_shift(1), b = blob.read_shift(1), a = blob.read_shift(1); return [r,g,b,a]; }

/* 2.5.177 LongRGB */
function parse_LongRGB(blob, length) { var x = parse_LongRGBA(blob, length); x[3] = 0; return x; }


/* [MS-XLS] 2.5.19 */
function parse_XLSCell(blob/*::, length*/)/*:Cell*/ {
	var rw = blob.read_shift(2); // 0-indexed
	var col = blob.read_shift(2);
	var ixfe = blob.read_shift(2);
	return ({r:rw, c:col, ixfe:ixfe}/*:any*/);
}
function write_XLSCell(R/*:number*/, C/*:number*/, ixfe/*:?number*/, o) {
	if(!o) o = new_buf(6);
	o.write_shift(2, R);
	o.write_shift(2, C);
	o.write_shift(2, ixfe||0);
	return o;
}

/* [MS-XLS] 2.5.134 */
function parse_frtHeader(blob) {
	var rt = blob.read_shift(2);
	var flags = blob.read_shift(2); // TODO: parse these flags
	blob.l += 8;
	return {type: rt, flags: flags};
}



function parse_OptXLUnicodeString(blob, length, opts) { return length === 0 ? "" : parse_XLUnicodeString2(blob, length, opts); }

/* [MS-XLS] 2.5.344 */
function parse_XTI(blob, length, opts) {
	var w = opts.biff > 8 ? 4 : 2;
	var iSupBook = blob.read_shift(w), itabFirst = blob.read_shift(w,'i'), itabLast = blob.read_shift(w,'i');
	return [iSupBook, itabFirst, itabLast];
}

/* [MS-XLS] 2.5.218 */
function parse_RkRec(blob) {
	var ixfe = blob.read_shift(2);
	var RK = parse_RkNumber(blob);
	return [ixfe, RK];
}

/* [MS-XLS] 2.5.1 */
function parse_AddinUdf(blob, length, opts) {
	blob.l += 4; length -= 4;
	var l = blob.l + length;
	var udfName = parse_ShortXLUnicodeString(blob, length, opts);
	var cb = blob.read_shift(2);
	l -= blob.l;
	if(cb !== l) throw new Error("Malformed AddinUdf: padding = " + l + " != " + cb);
	blob.l += cb;
	return udfName;
}

/* [MS-XLS] 2.5.209 TODO: Check sizes */
function parse_Ref8U(blob/*::, length*/) {
	var rwFirst = blob.read_shift(2);
	var rwLast = blob.read_shift(2);
	var colFirst = blob.read_shift(2);
	var colLast = blob.read_shift(2);
	return {s:{c:colFirst, r:rwFirst}, e:{c:colLast,r:rwLast}};
}
function write_Ref8U(r/*:Range*/, o) {
	if(!o) o = new_buf(8);
	o.write_shift(2, r.s.r);
	o.write_shift(2, r.e.r);
	o.write_shift(2, r.s.c);
	o.write_shift(2, r.e.c);
	return o;
}

/* [MS-XLS] 2.5.211 */
function parse_RefU(blob/*::, length*/) {
	var rwFirst = blob.read_shift(2);
	var rwLast = blob.read_shift(2);
	var colFirst = blob.read_shift(1);
	var colLast = blob.read_shift(1);
	return {s:{c:colFirst, r:rwFirst}, e:{c:colLast,r:rwLast}};
}

/* [MS-XLS] 2.5.207 */
var parse_Ref = parse_RefU;

/* [MS-XLS] 2.5.143 */
function parse_FtCmo(blob/*::, length*/) {
	blob.l += 4;
	var ot = blob.read_shift(2);
	var id = blob.read_shift(2);
	var flags = blob.read_shift(2);
	blob.l+=12;
	return [id, ot, flags];
}

/* [MS-XLS] 2.5.149 */
function parse_FtNts(blob) {
	var out = {};
	blob.l += 4;
	blob.l += 16; // GUID TODO
	out.fSharedNote = blob.read_shift(2);
	blob.l += 4;
	return out;
}

/* [MS-XLS] 2.5.142 */
function parse_FtCf(blob) {
	var out = {};
	blob.l += 4;
	blob.cf = blob.read_shift(2);
	return out;
}

/* [MS-XLS] 2.5.140 - 2.5.154 and friends */
function parse_FtSkip(blob) { blob.l += 2; blob.l += blob.read_shift(2); }
var FtTab = {
	/*::[*/0x00/*::]*/: parse_FtSkip,      /* FtEnd */
	/*::[*/0x04/*::]*/: parse_FtSkip,      /* FtMacro */
	/*::[*/0x05/*::]*/: parse_FtSkip,      /* FtButton */
	/*::[*/0x06/*::]*/: parse_FtSkip,      /* FtGmo */
	/*::[*/0x07/*::]*/: parse_FtCf,        /* FtCf */
	/*::[*/0x08/*::]*/: parse_FtSkip,      /* FtPioGrbit */
	/*::[*/0x09/*::]*/: parse_FtSkip,      /* FtPictFmla */
	/*::[*/0x0A/*::]*/: parse_FtSkip,      /* FtCbls */
	/*::[*/0x0B/*::]*/: parse_FtSkip,      /* FtRbo */
	/*::[*/0x0C/*::]*/: parse_FtSkip,      /* FtSbs */
	/*::[*/0x0D/*::]*/: parse_FtNts,       /* FtNts */
	/*::[*/0x0E/*::]*/: parse_FtSkip,      /* FtSbsFmla */
	/*::[*/0x0F/*::]*/: parse_FtSkip,      /* FtGboData */
	/*::[*/0x10/*::]*/: parse_FtSkip,      /* FtEdoData */
	/*::[*/0x11/*::]*/: parse_FtSkip,      /* FtRboData */
	/*::[*/0x12/*::]*/: parse_FtSkip,      /* FtCblsData */
	/*::[*/0x13/*::]*/: parse_FtSkip,      /* FtLbsData */
	/*::[*/0x14/*::]*/: parse_FtSkip,      /* FtCblsFmla */
	/*::[*/0x15/*::]*/: parse_FtCmo
};
function parse_FtArray(blob, length/*::, ot*/) {
	var tgt = blob.l + length;
	var fts = [];
	while(blob.l < tgt) {
		var ft = blob.read_shift(2);
		blob.l-=2;
		try {
			fts.push(FtTab[ft](blob, tgt - blob.l));
		} catch(e) { blob.l = tgt; return fts; }
	}
	if(blob.l != tgt) blob.l = tgt; //throw new Error("bad Object Ft-sequence");
	return fts;
}

/* --- 2.4 Records --- */

/* [MS-XLS] 2.4.21 */
function parse_BOF(blob, length) {
	var o = {BIFFVer:0, dt:0};
	o.BIFFVer = blob.read_shift(2); length -= 2;
	if(length >= 2) { o.dt = blob.read_shift(2); blob.l -= 2; }
	switch(o.BIFFVer) {
		case 0x0600: /* BIFF8 */
		case 0x0500: /* BIFF5 */
		case 0x0400: /* BIFF4 */
		case 0x0300: /* BIFF3 */
		case 0x0200: /* BIFF2 */
		case 0x0002: case 0x0007: /* BIFF2 */
			break;
		default: if(length > 6) throw new Error("Unexpected BIFF Ver " + o.BIFFVer);
	}

	blob.read_shift(length);
	return o;
}
function write_BOF(wb/*:Workbook*/, t/*:number*/, o) {
	var h = 0x0600, w = 16;
	switch(o.bookType) {
		case 'biff8': break;
		case 'biff5': h = 0x0500; w = 8; break;
		case 'biff4': h = 0x0004; w = 6; break;
		case 'biff3': h = 0x0003; w = 6; break;
		case 'biff2': h = 0x0002; w = 4; break;
		case 'xla': break;
		default: throw new Error("unsupported BIFF version");
	}
	var out = new_buf(w);
	out.write_shift(2, h);
	out.write_shift(2, t);
	if(w > 4) out.write_shift(2, 0x7262);
	if(w > 6) out.write_shift(2, 0x07CD);
	if(w > 8) {
		out.write_shift(2, 0xC009);
		out.write_shift(2, 0x0001);
		out.write_shift(2, 0x0706);
		out.write_shift(2, 0x0000);
	}
	return out;
}


/* [MS-XLS] 2.4.146 */
function parse_InterfaceHdr(blob, length) {
	if(length === 0) return 0x04b0;
	if((blob.read_shift(2))!==0x04b0){/* empty */}
	return 0x04b0;
}


/* [MS-XLS] 2.4.349 */
function parse_WriteAccess(blob, length, opts) {
	if(opts.enc) { blob.l += length; return ""; }
	var l = blob.l;
	// TODO: make sure XLUnicodeString doesnt overrun
	var UserName = parse_XLUnicodeString2(blob, 0, opts);
	blob.read_shift(length + l - blob.l);
	return UserName;
}
function write_WriteAccess(s/*:string*/, opts) {
	var b8 = !opts || opts.biff == 8;
	var o = new_buf(b8 ? 112 : 54);
	o.write_shift(opts.biff == 8 ? 2 : 1, 7);
	if(b8) o.write_shift(1, 0);
	o.write_shift(4, 0x33336853);
	o.write_shift(4, (0x00534A74 | (b8 ? 0 : 0x20000000)));
	while(o.l < o.length) o.write_shift(1, (b8 ? 0 : 32));
	return o;
}

/* [MS-XLS] 2.4.351 */
function parse_WsBool(blob, length, opts) {
	var flags = opts && opts.biff == 8 || length == 2 ? blob.read_shift(2) : (blob.l += length, 0);
	return { fDialog: flags & 0x10, fBelow: flags & 0x40, fRight: flags & 0x80 };
}

/* [MS-XLS] 2.4.28 */
function parse_BoundSheet8(blob, length, opts) {
	var pos = blob.read_shift(4);
	var hidden = blob.read_shift(1) & 0x03;
	var dt = blob.read_shift(1);
	switch(dt) {
		case 0: dt = 'Worksheet'; break;
		case 1: dt = 'Macrosheet'; break;
		case 2: dt = 'Chartsheet'; break;
		case 6: dt = 'VBAModule'; break;
	}
	var name = parse_ShortXLUnicodeString(blob, 0, opts);
	if(name.length === 0) name = "Sheet1";
	return { pos:pos, hs:hidden, dt:dt, name:name };
}
function write_BoundSheet8(data, opts) {
	var w = (!opts || opts.biff >= 8 ? 2 : 1);
	var o = new_buf(8 + w * data.name.length);
	o.write_shift(4, data.pos);
	o.write_shift(1, data.hs || 0);
	o.write_shift(1, data.dt);
	o.write_shift(1, data.name.length);
	if(opts.biff >= 8) o.write_shift(1, 1);
	o.write_shift(w * data.name.length, data.name, opts.biff < 8 ? 'sbcs' : 'utf16le');
	var out = o.slice(0, o.l);
	out.l = o.l; return out;
}

/* [MS-XLS] 2.4.265 TODO */
function parse_SST(blob, length)/*:SST*/ {
	var end = blob.l + length;
	var cnt = blob.read_shift(4);
	var ucnt = blob.read_shift(4);
	var strs/*:SST*/ = ([]/*:any*/);
	for(var i = 0; i != ucnt && blob.l < end; ++i) {
		strs.push(parse_XLUnicodeRichExtendedString(blob));
	}
	strs.Count = cnt; strs.Unique = ucnt;
	return strs;
}
function write_SST(sst, opts) {
	var header = new_buf(8);
	header.write_shift(4, sst.Count);
	header.write_shift(4, sst.Unique);
	var strs = [];
	for(var j = 0; j < sst.length; ++j) strs[j] = write_XLUnicodeRichExtendedString(sst[j], opts);
	var o = bconcat([header].concat(strs));
	/*::(*/o/*:: :any)*/.parts = [header.length].concat(strs.map(function(str) { return str.length; }));
	return o;
}

/* [MS-XLS] 2.4.107 */
function parse_ExtSST(blob, length) {
	var extsst = {};
	extsst.dsst = blob.read_shift(2);
	blob.l += length-2;
	return extsst;
}


/* [MS-XLS] 2.4.221 TODO: check BIFF2-4 */
function parse_Row(blob) {
	var z = ({}/*:any*/);
	z.r = blob.read_shift(2);
	z.c = blob.read_shift(2);
	z.cnt = blob.read_shift(2) - z.c;
	var miyRw = blob.read_shift(2);
	blob.l += 4; // reserved(2), unused(2)
	var flags = blob.read_shift(1); // various flags
	blob.l += 3; // reserved(8), ixfe(12), flags(4)
	if(flags & 0x07) z.level = flags & 0x07;
	// collapsed: flags & 0x10
	if(flags & 0x20) z.hidden = true;
	if(flags & 0x40) z.hpt = miyRw / 20;
	return z;
}


/* [MS-XLS] 2.4.125 */
function parse_ForceFullCalculation(blob) {
	var header = parse_frtHeader(blob);
	if(header.type != 0x08A3) throw new Error("Invalid Future Record " + header.type);
	var fullcalc = blob.read_shift(4);
	return fullcalc !== 0x0;
}





/* [MS-XLS] 2.4.215 rt */
function parse_RecalcId(blob) {
	blob.read_shift(2);
	return blob.read_shift(4);
}

/* [MS-XLS] 2.4.87 */
function parse_DefaultRowHeight(blob, length, opts) {
	var f = 0;
	if(!(opts && opts.biff == 2)) {
		f = blob.read_shift(2);
	}
	var miyRw = blob.read_shift(2);
	if((opts && opts.biff == 2)) {
		f = 1 - (miyRw >> 15); miyRw &= 0x7fff;
	}
	var fl = {Unsynced:f&1,DyZero:(f&2)>>1,ExAsc:(f&4)>>2,ExDsc:(f&8)>>3};
	return [fl, miyRw];
}

/* [MS-XLS] 2.4.345 TODO */
function parse_Window1(blob) {
	var xWn = blob.read_shift(2), yWn = blob.read_shift(2), dxWn = blob.read_shift(2), dyWn = blob.read_shift(2);
	var flags = blob.read_shift(2), iTabCur = blob.read_shift(2), iTabFirst = blob.read_shift(2);
	var ctabSel = blob.read_shift(2), wTabRatio = blob.read_shift(2);
	return { Pos: [xWn, yWn], Dim: [dxWn, dyWn], Flags: flags, CurTab: iTabCur,
		FirstTab: iTabFirst, Selected: ctabSel, TabRatio: wTabRatio };
}
function write_Window1(/*::opts*/) {
	var o = new_buf(18);
	o.write_shift(2, 0);
	o.write_shift(2, 0);
	o.write_shift(2, 0x7260);
	o.write_shift(2, 0x44c0);
	o.write_shift(2, 0x38);
	o.write_shift(2, 0);
	o.write_shift(2, 0);
	o.write_shift(2, 1);
	o.write_shift(2, 0x01f4);
	return o;
}
/* [MS-XLS] 2.4.346 TODO */
function parse_Window2(blob, length, opts) {
	if(opts && opts.biff >= 2 && opts.biff < 5) return {};
	var f = blob.read_shift(2);
	return { RTL: f & 0x40 };
}
function write_Window2(view) {
	var o = new_buf(18), f = 0x6b6;
	if(view && view.RTL) f |= 0x40;
	o.write_shift(2, f);
	o.write_shift(4, 0);
	o.write_shift(4, 64);
	o.write_shift(4, 0);
	o.write_shift(4, 0);
	return o;
}

/* [MS-XLS] 2.4.189 TODO */
function parse_Pane(/*blob, length, opts*/) {
}

/* [MS-XLS] 2.4.122 TODO */
function parse_Font(blob, length, opts) {
	var o/*:any*/ = {
		dyHeight: blob.read_shift(2),
		fl: blob.read_shift(2)
	};
	switch((opts && opts.biff) || 8) {
		case 2: break;
		case 3: case 4: blob.l += 2; break;
		default: blob.l += 10; break;
	}
	o.name = parse_ShortXLUnicodeString(blob, 0, opts);
	return o;
}
function write_Font(data, opts) {
	var name = data.name || "Arial";
	var b5 = (opts && (opts.biff == 5)), w = (b5 ? (15 + name.length) : (16 + 2 * name.length));
	var o = new_buf(w);
	o.write_shift(2, (data.sz || 12) * 20);
	o.write_shift(4, 0);
	o.write_shift(2, 400);
	o.write_shift(4, 0);
	o.write_shift(2, 0);
	o.write_shift(1, name.length);
	if(!b5) o.write_shift(1, 1);
	o.write_shift((b5 ? 1 : 2) * name.length, name, (b5 ? "sbcs" : "utf16le"));
	return o;
}

/* [MS-XLS] 2.4.149 */
function parse_LabelSst(blob) {
	var cell = parse_XLSCell(blob);
	cell.isst = blob.read_shift(4);
	return cell;
}
function write_LabelSst(R/*:number*/, C/*:number*/, v/*:number*/, os/*:number*/ /*::, opts*/) {
	var o = new_buf(10);
	write_XLSCell(R, C, os, o);
	o.write_shift(4, v);
	return o;
}

/* [MS-XLS] 2.4.148 */
function parse_Label(blob, length, opts) {
	if(opts.biffguess && opts.biff == 2) opts.biff = 5;
	var target = blob.l + length;
	var cell = parse_XLSCell(blob, 6);
	if(opts.biff == 2) blob.l++;
	var str = parse_XLUnicodeString(blob, target - blob.l, opts);
	cell.val = str;
	return cell;
}
function write_Label(R/*:number*/, C/*:number*/, v/*:string*/, os/*:number*/, opts) {
	var b8 = !opts || opts.biff == 8;
	var o = new_buf(6 + 2 + (+b8) + (1 + b8) * v.length);
	write_XLSCell(R, C, os, o);
	o.write_shift(2, v.length);
	if(b8) o.write_shift(1, 1);
	o.write_shift((1 + b8) * v.length, v, b8 ? 'utf16le' : 'sbcs');
	return o;
}


/* [MS-XLS] 2.4.126 Number Formats */
function parse_Format(blob, length, opts) {
	var numFmtId = blob.read_shift(2);
	var fmtstr = parse_XLUnicodeString2(blob, 0, opts);
	return [numFmtId, fmtstr];
}
function write_Format(i/*:number*/, f/*:string*/, opts, o) {
	var b5 = (opts && (opts.biff == 5));
	if(!o) o = new_buf(b5 ? (3 + f.length) : (5 + 2 * f.length));
	o.write_shift(2, i);
	o.write_shift((b5 ? 1 : 2), f.length);
	if(!b5) o.write_shift(1, 1);
	o.write_shift((b5 ? 1 : 2) * f.length, f, (b5 ? 'sbcs' : 'utf16le'));
	var out = (o.length > o.l) ? o.slice(0, o.l) : o;
	if(out.l == null) out.l = out.length;
	return out;
}
var parse_BIFF2Format = parse_XLUnicodeString2;

/* [MS-XLS] 2.4.90 */
function parse_Dimensions(blob, length, opts) {
	var end = blob.l + length;
	var w = opts.biff == 8 || !opts.biff ? 4 : 2;
	var r = blob.read_shift(w), R = blob.read_shift(w);
	var c = blob.read_shift(2), C = blob.read_shift(2);
	blob.l = end;
	return {s: {r:r, c:c}, e: {r:R, c:C}};
}
function write_Dimensions(range, opts) {
	var w = opts.biff == 8 || !opts.biff ? 4 : 2;
	var o = new_buf(2*w + 6);
	o.write_shift(w, range.s.r);
	o.write_shift(w, range.e.r + 1);
	o.write_shift(2, range.s.c);
	o.write_shift(2, range.e.c + 1);
	o.write_shift(2, 0);
	return o;
}

/* [MS-XLS] 2.4.220 */
function parse_RK(blob) {
	var rw = blob.read_shift(2), col = blob.read_shift(2);
	var rkrec = parse_RkRec(blob);
	return {r:rw, c:col, ixfe:rkrec[0], rknum:rkrec[1]};
}

/* [MS-XLS] 2.4.175 */
function parse_MulRk(blob, length) {
	var target = blob.l + length - 2;
	var rw = blob.read_shift(2), col = blob.read_shift(2);
	var rkrecs = [];
	while(blob.l < target) rkrecs.push(parse_RkRec(blob));
	if(blob.l !== target) throw new Error("MulRK read error");
	var lastcol = blob.read_shift(2);
	if(rkrecs.length != lastcol - col + 1) throw new Error("MulRK length mismatch");
	return {r:rw, c:col, C:lastcol, rkrec:rkrecs};
}
/* [MS-XLS] 2.4.174 */
function parse_MulBlank(blob, length) {
	var target = blob.l + length - 2;
	var rw = blob.read_shift(2), col = blob.read_shift(2);
	var ixfes = [];
	while(blob.l < target) ixfes.push(blob.read_shift(2));
	if(blob.l !== target) throw new Error("MulBlank read error");
	var lastcol = blob.read_shift(2);
	if(ixfes.length != lastcol - col + 1) throw new Error("MulBlank length mismatch");
	return {r:rw, c:col, C:lastcol, ixfe:ixfes};
}

/* [MS-XLS] 2.5.20 2.5.249 TODO: interpret values here */
function parse_CellStyleXF(blob, length, style, opts) {
	var o = {};
	var a = blob.read_shift(4), b = blob.read_shift(4);
	var c = blob.read_shift(4), d = blob.read_shift(2);
	o.patternType = XLSFillPattern[c >> 26];

	if(!opts.cellStyles) return o;
	o.alc = a & 0x07;
	o.fWrap = (a >> 3) & 0x01;
	o.alcV = (a >> 4) & 0x07;
	o.fJustLast = (a >> 7) & 0x01;
	o.trot = (a >> 8) & 0xFF;
	o.cIndent = (a >> 16) & 0x0F;
	o.fShrinkToFit = (a >> 20) & 0x01;
	o.iReadOrder = (a >> 22) & 0x02;
	o.fAtrNum = (a >> 26) & 0x01;
	o.fAtrFnt = (a >> 27) & 0x01;
	o.fAtrAlc = (a >> 28) & 0x01;
	o.fAtrBdr = (a >> 29) & 0x01;
	o.fAtrPat = (a >> 30) & 0x01;
	o.fAtrProt = (a >> 31) & 0x01;

	o.dgLeft = b & 0x0F;
	o.dgRight = (b >> 4) & 0x0F;
	o.dgTop = (b >> 8) & 0x0F;
	o.dgBottom = (b >> 12) & 0x0F;
	o.icvLeft = (b >> 16) & 0x7F;
	o.icvRight = (b >> 23) & 0x7F;
	o.grbitDiag = (b >> 30) & 0x03;

	o.icvTop = c & 0x7F;
	o.icvBottom = (c >> 7) & 0x7F;
	o.icvDiag = (c >> 14) & 0x7F;
	o.dgDiag = (c >> 21) & 0x0F;

	o.icvFore = d & 0x7F;
	o.icvBack = (d >> 7) & 0x7F;
	o.fsxButton = (d >> 14) & 0x01;
	return o;
}
//function parse_CellXF(blob, length, opts) {return parse_CellStyleXF(blob,length,0, opts);}
//function parse_StyleXF(blob, length, opts) {return parse_CellStyleXF(blob,length,1, opts);}

/* [MS-XLS] 2.4.353 TODO: actually do this right */
function parse_XF(blob, length, opts) {
	var o = {};
	o.ifnt = blob.read_shift(2); o.numFmtId = blob.read_shift(2); o.flags = blob.read_shift(2);
	o.fStyle = (o.flags >> 2) & 0x01;
	length -= 6;
	o.data = parse_CellStyleXF(blob, length, o.fStyle, opts);
	return o;
}
function write_XF(data, ixfeP, opts, o) {
	var b5 = (opts && (opts.biff == 5));
	if(!o) o = new_buf(b5 ? 16 : 20);
	o.write_shift(2, 0);
	if(data.style) {
		o.write_shift(2, (data.numFmtId||0));
		o.write_shift(2, 0xFFF4);
	} else {
		o.write_shift(2, (data.numFmtId||0));
		o.write_shift(2, (ixfeP<<4));
	}
	var f = 0;
	if(data.numFmtId > 0 && b5) f |= 0x0400;
	o.write_shift(4, f);
	o.write_shift(4, 0);
	if(!b5) o.write_shift(4, 0);
	o.write_shift(2, 0);
	return o;
}

/* [MS-XLS] 2.4.134 */
function parse_Guts(blob) {
	blob.l += 4;
	var out = [blob.read_shift(2), blob.read_shift(2)];
	if(out[0] !== 0) out[0]--;
	if(out[1] !== 0) out[1]--;
	if(out[0] > 7 || out[1] > 7) throw new Error("Bad Gutters: " + out.join("|"));
	return out;
}
function write_Guts(guts/*:Array<number>*/) {
	var o = new_buf(8);
	o.write_shift(4, 0);
	o.write_shift(2, guts[0] ? guts[0] + 1 : 0);
	o.write_shift(2, guts[1] ? guts[1] + 1 : 0);
	return o;
}

/* [MS-XLS] 2.4.24 */
function parse_BoolErr(blob, length, opts) {
	var cell = parse_XLSCell(blob, 6);
	if(opts.biff == 2 || length == 9) ++blob.l;
	var val = parse_Bes(blob, 2);
	cell.val = val;
	cell.t = (val === true || val === false) ? 'b' : 'e';
	return cell;
}
function write_BoolErr(R/*:number*/, C/*:number*/, v, os/*:number*/, opts, t/*:string*/) {
	var o = new_buf(8);
	write_XLSCell(R, C, os, o);
	write_Bes(v, t, o);
	return o;
}

/* [MS-XLS] 2.4.180 Number */
function parse_Number(blob, length, opts) {
	if(opts.biffguess && opts.biff == 2) opts.biff = 5;
	var cell = parse_XLSCell(blob, 6);
	var xnum = parse_Xnum(blob, 8);
	cell.val = xnum;
	return cell;
}
function write_Number(R/*:number*/, C/*:number*/, v, os/*:: :number, opts*/) {
	var o = new_buf(14);
	write_XLSCell(R, C, os, o);
	write_Xnum(v, o);
	return o;
}

var parse_XLHeaderFooter = parse_OptXLUnicodeString; // TODO: parse 2.4.136

/* [MS-XLS] 2.4.271 */
function parse_SupBook(blob, length, opts) {
	var end = blob.l + length;
	var ctab = blob.read_shift(2);
	var cch = blob.read_shift(2);
	opts.sbcch = cch;
	if(cch == 0x0401 || cch == 0x3A01) return [cch, ctab];
	if(cch < 0x01 || cch >0xff) throw new Error("Unexpected SupBook type: "+cch);
	var virtPath = parse_XLUnicodeStringNoCch(blob, cch);
	/* TODO: 2.5.277 Virtual Path */
	var rgst = [];
	while(end > blob.l) rgst.push(parse_XLUnicodeString(blob));
	return [cch, ctab, virtPath, rgst];
}

/* [MS-XLS] 2.4.105 TODO */
function parse_ExternName(blob, length, opts) {
	var flags = blob.read_shift(2);
	var body;
	var o = ({
		fBuiltIn: flags & 0x01,
		fWantAdvise: (flags >>> 1) & 0x01,
		fWantPict: (flags >>> 2) & 0x01,
		fOle: (flags >>> 3) & 0x01,
		fOleLink: (flags >>> 4) & 0x01,
		cf: (flags >>> 5) & 0x3FF,
		fIcon: flags >>> 15 & 0x01
	}/*:any*/);
	if(opts.sbcch === 0x3A01) body = parse_AddinUdf(blob, length-2, opts);
	//else throw new Error("unsupported SupBook cch: " + opts.sbcch);
	o.body = body || blob.read_shift(length-2);
	if(typeof body === "string") o.Name = body;
	return o;
}

/* [MS-XLS] 2.4.150 TODO */
var XLSLblBuiltIn = [
	"_xlnm.Consolidate_Area",
	"_xlnm.Auto_Open",
	"_xlnm.Auto_Close",
	"_xlnm.Extract",
	"_xlnm.Database",
	"_xlnm.Criteria",
	"_xlnm.Print_Area",
	"_xlnm.Print_Titles",
	"_xlnm.Recorder",
	"_xlnm.Data_Form",
	"_xlnm.Auto_Activate",
	"_xlnm.Auto_Deactivate",
	"_xlnm.Sheet_Title",
	"_xlnm._FilterDatabase"
];
function parse_Lbl(blob, length, opts) {
	var target = blob.l + length;
	var flags = blob.read_shift(2);
	var chKey = blob.read_shift(1);
	var cch = blob.read_shift(1);
	var cce = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);
	var itab = 0;
	if(!opts || opts.biff >= 5) {
		if(opts.biff != 5) blob.l += 2;
		itab = blob.read_shift(2);
		if(opts.biff == 5) blob.l += 2;
		blob.l += 4;
	}
	var name = parse_XLUnicodeStringNoCch(blob, cch, opts);
	if(flags & 0x20) name = XLSLblBuiltIn[name.charCodeAt(0)];
	var npflen = target - blob.l; if(opts && opts.biff == 2) --npflen;
	/*jshint -W018 */
	var rgce = (target == blob.l || cce === 0 || !(npflen > 0)) ? [] : parse_NameParsedFormula(blob, npflen, opts, cce);
	/*jshint +W018 */
	return {
		chKey: chKey,
		Name: name,
		itab: itab,
		rgce: rgce
	};
}

/* [MS-XLS] 2.4.106 TODO: verify filename encoding */
function parse_ExternSheet(blob, length, opts) {
	if(opts.biff < 8) return parse_BIFF5ExternSheet(blob, length, opts);
	var o = [], target = blob.l + length, len = blob.read_shift(opts.biff > 8 ? 4 : 2);
	while(len-- !== 0) o.push(parse_XTI(blob, opts.biff > 8 ? 12 : 6, opts));
		// [iSupBook, itabFirst, itabLast];
	if(blob.l != target) throw new Error("Bad ExternSheet: " + blob.l + " != " + target);
	return o;
}
function parse_BIFF5ExternSheet(blob, length, opts) {
	if(blob[blob.l + 1] == 0x03) blob[blob.l]++;
	var o = parse_ShortXLUnicodeString(blob, length, opts);
	return o.charCodeAt(0) == 0x03 ? o.slice(1) : o;
}

/* [MS-XLS] 2.4.176 TODO: check older biff */
function parse_NameCmt(blob, length, opts) {
	if(opts.biff < 8) { blob.l += length; return; }
	var cchName = blob.read_shift(2);
	var cchComment = blob.read_shift(2);
	var name = parse_XLUnicodeStringNoCch(blob, cchName, opts);
	var comment = parse_XLUnicodeStringNoCch(blob, cchComment, opts);
	return [name, comment];
}

/* [MS-XLS] 2.4.260 */
function parse_ShrFmla(blob, length, opts) {
	var ref = parse_RefU(blob, 6);
	blob.l++;
	var cUse = blob.read_shift(1);
	length -= 8;
	return [parse_SharedParsedFormula(blob, length, opts), cUse, ref];
}

/* [MS-XLS] 2.4.4 TODO */
function parse_Array(blob, length, opts) {
	var ref = parse_Ref(blob, 6);
	/* TODO: fAlwaysCalc */
	switch(opts.biff) {
		case 2: blob.l ++; length -= 7; break;
		case 3: case 4: blob.l += 2; length -= 8; break;
		default: blob.l += 6; length -= 12;
	}
	return [ref, parse_ArrayParsedFormula(blob, length, opts, ref)];
}

/* [MS-XLS] 2.4.173 */
function parse_MTRSettings(blob) {
	var fMTREnabled = blob.read_shift(4) !== 0x00;
	var fUserSetThreadCount = blob.read_shift(4) !== 0x00;
	var cUserThreadCount = blob.read_shift(4);
	return [fMTREnabled, fUserSetThreadCount, cUserThreadCount];
}

/* [MS-XLS] 2.5.186 TODO: BIFF5 */
function parse_NoteSh(blob, length, opts) {
	if(opts.biff < 8) return;
	var row = blob.read_shift(2), col = blob.read_shift(2);
	var flags = blob.read_shift(2), idObj = blob.read_shift(2);
	var stAuthor = parse_XLUnicodeString2(blob, 0, opts);
	if(opts.biff < 8) blob.read_shift(1);
	return [{r:row,c:col}, stAuthor, idObj, flags];
}

/* [MS-XLS] 2.4.179 */
function parse_Note(blob, length, opts) {
	/* TODO: Support revisions */
	return parse_NoteSh(blob, length, opts);
}

/* [MS-XLS] 2.4.168 */
function parse_MergeCells(blob, length)/*:Array<Range>*/ {
	var merges/*:Array<Range>*/ = [];
	var cmcs = blob.read_shift(2);
	while (cmcs--) merges.push(parse_Ref8U(blob,length));
	return merges;
}
function write_MergeCells(merges/*:Array<Range>*/) {
	var o = new_buf(2 + merges.length * 8);
	o.write_shift(2, merges.length);
	for(var i = 0; i < merges.length; ++i) write_Ref8U(merges[i], o);
	return o;
}

/* [MS-XLS] 2.4.181 TODO: parse all the things! */
function parse_Obj(blob, length, opts) {
	if(opts && opts.biff < 8) return parse_BIFF5Obj(blob, length, opts);
	var cmo = parse_FtCmo(blob, 22); // id, ot, flags
	var fts = parse_FtArray(blob, length-22, cmo[1]);
	return { cmo: cmo, ft:fts };
}
/* from older spec */
var parse_BIFF5OT = {
0x08: function(blob, length) {
	var tgt = blob.l + length;
	blob.l += 10; // todo
	var cf = blob.read_shift(2);
	blob.l += 4;
	blob.l += 2; //var cbPictFmla = blob.read_shift(2);
	blob.l += 2;
	blob.l += 2; //var grbit = blob.read_shift(2);
	blob.l += 4;
	var cchName = blob.read_shift(1);
	blob.l += cchName; // TODO: stName
	blob.l = tgt; // TODO: fmla
	return { fmt:cf };
}
};

function parse_BIFF5Obj(blob, length, opts) {
	blob.l += 4; //var cnt = blob.read_shift(4);
	var ot = blob.read_shift(2);
	var id = blob.read_shift(2);
	var grbit = blob.read_shift(2);
	blob.l += 2; //var colL = blob.read_shift(2);
	blob.l += 2; //var dxL = blob.read_shift(2);
	blob.l += 2; //var rwT = blob.read_shift(2);
	blob.l += 2; //var dyT = blob.read_shift(2);
	blob.l += 2; //var colR = blob.read_shift(2);
	blob.l += 2; //var dxR = blob.read_shift(2);
	blob.l += 2; //var rwB = blob.read_shift(2);
	blob.l += 2; //var dyB = blob.read_shift(2);
	blob.l += 2; //var cbMacro = blob.read_shift(2);
	blob.l += 6;
	length -= 36;
	var fts = [];
	fts.push((parse_BIFF5OT[ot]||parsenoop)(blob, length, opts));
	return { cmo: [id, ot, grbit], ft:fts };
}

/* [MS-XLS] 2.4.329 TODO: parse properly */
function parse_TxO(blob, length, opts) {
	var s = blob.l;
	var texts = "";
try {
	blob.l += 4;
	var ot = (opts.lastobj||{cmo:[0,0]}).cmo[1];
	var controlInfo; // eslint-disable-line no-unused-vars
	if([0,5,7,11,12,14].indexOf(ot) == -1) blob.l += 6;
	else controlInfo = parse_ControlInfo(blob, 6, opts); // eslint-disable-line no-unused-vars
	var cchText = blob.read_shift(2);
	/*var cbRuns = */blob.read_shift(2);
	/*var ifntEmpty = */parseuint16(blob, 2);
	var len = blob.read_shift(2);
	blob.l += len;
	//var fmla = parse_ObjFmla(blob, s + length - blob.l);

	for(var i = 1; i < blob.lens.length-1; ++i) {
		if(blob.l-s != blob.lens[i]) throw new Error("TxO: bad continue record");
		var hdr = blob[blob.l];
		var t = parse_XLUnicodeStringNoCch(blob, blob.lens[i+1]-blob.lens[i]-1);
		texts += t;
		if(texts.length >= (hdr ? cchText : 2*cchText)) break;
	}
	if(texts.length !== cchText && texts.length !== cchText*2) {
		throw new Error("cchText: " + cchText + " != " + texts.length);
	}

	blob.l = s + length;
	/* [MS-XLS] 2.5.272 TxORuns */
//	var rgTxoRuns = [];
//	for(var j = 0; j != cbRuns/8-1; ++j) blob.l += 8;
//	var cchText2 = blob.read_shift(2);
//	if(cchText2 !== cchText) throw new Error("TxOLastRun mismatch: " + cchText2 + " " + cchText);
//	blob.l += 6;
//	if(s + length != blob.l) throw new Error("TxO " + (s + length) + ", at " + blob.l);
	return { t: texts };
} catch(e) { blob.l = s + length; return { t: texts }; }
}

/* [MS-XLS] 2.4.140 */
function parse_HLink(blob, length) {
	var ref = parse_Ref8U(blob, 8);
	blob.l += 16; /* CLSID */
	var hlink = parse_Hyperlink(blob, length-24);
	return [ref, hlink];
}
function write_HLink(hl) {
	var O = new_buf(24);
	var ref = decode_cell(hl[0]);
	O.write_shift(2, ref.r); O.write_shift(2, ref.r);
	O.write_shift(2, ref.c); O.write_shift(2, ref.c);
	var clsid = "d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" ");
	for(var i = 0; i < 16; ++i) O.write_shift(1, parseInt(clsid[i], 16));
	return bconcat([O, write_Hyperlink(hl[1])]);
}


/* [MS-XLS] 2.4.141 */
function parse_HLinkTooltip(blob, length) {
	blob.read_shift(2);
	var ref = parse_Ref8U(blob, 8);
	var wzTooltip = blob.read_shift((length-10)/2, 'dbcs-cont');
	wzTooltip = wzTooltip.replace(chr0,"");
	return [ref, wzTooltip];
}
function write_HLinkTooltip(hl) {
	var TT = hl[1].Tooltip;
	var O = new_buf(10 + 2 * (TT.length + 1));
	O.write_shift(2, 0x0800);
	var ref = decode_cell(hl[0]);
	O.write_shift(2, ref.r); O.write_shift(2, ref.r);
	O.write_shift(2, ref.c); O.write_shift(2, ref.c);
	for(var i = 0; i < TT.length; ++i) O.write_shift(2, TT.charCodeAt(i));
	O.write_shift(2, 0);
	return O;
}

/* [MS-XLS] 2.4.63 */
function parse_Country(blob)/*:[string|number, string|number]*/ {
	var o = [0,0], d;
	d = blob.read_shift(2); o[0] = CountryEnum[d] || d;
	d = blob.read_shift(2); o[1] = CountryEnum[d] || d;
	return o;
}
function write_Country(o) {
	if(!o) o = new_buf(4);
	o.write_shift(2, 0x01);
	o.write_shift(2, 0x01);
	return o;
}

/* [MS-XLS] 2.4.50 ClrtClient */
function parse_ClrtClient(blob) {
	var ccv = blob.read_shift(2);
	var o = [];
	while(ccv-->0) o.push(parse_LongRGB(blob, 8));
	return o;
}

/* [MS-XLS] 2.4.188 */
function parse_Palette(blob) {
	var ccv = blob.read_shift(2);
	var o = [];
	while(ccv-->0) o.push(parse_LongRGB(blob, 8));
	return o;
}

/* [MS-XLS] 2.4.354 */
function parse_XFCRC(blob) {
	blob.l += 2;
	var o = {cxfs:0, crc:0};
	o.cxfs = blob.read_shift(2);
	o.crc = blob.read_shift(4);
	return o;
}

/* [MS-XLS] 2.4.53 TODO: parse flags */
/* [MS-XLSB] 2.4.323 TODO: parse flags */
function parse_ColInfo(blob, length, opts) {
	if(!opts.cellStyles) return parsenoop(blob, length);
	var w = opts && opts.biff >= 12 ? 4 : 2;
	var colFirst = blob.read_shift(w);
	var colLast = blob.read_shift(w);
	var coldx = blob.read_shift(w);
	var ixfe = blob.read_shift(w);
	var flags = blob.read_shift(2);
	if(w == 2) blob.l += 2;
	var o = ({s:colFirst, e:colLast, w:coldx, ixfe:ixfe, flags:flags}/*:any*/);
	if(opts.biff >= 5 || !opts.biff) o.level = (flags >> 8) & 0x7;
	return o;
}
function write_ColInfo(col, idx) {
	var o = new_buf(12);
	o.write_shift(2, idx);
	o.write_shift(2, idx);
	o.write_shift(2, col.width * 256);
	o.write_shift(2, 0);
	var f = 0;
	if(col.hidden) f |= 1;
	o.write_shift(1, f);
	f = col.level || 0;
	o.write_shift(1, f);
	o.write_shift(2, 0);
	return o;
}

/* [MS-XLS] 2.4.257 */
function parse_Setup(blob, length) {
	var o = {};
	if(length < 32) return o;
	blob.l += 16;
	o.header = parse_Xnum(blob, 8);
	o.footer = parse_Xnum(blob, 8);
	blob.l += 2;
	return o;
}

/* [MS-XLS] 2.4.261 */
function parse_ShtProps(blob, length, opts) {
	var def = {area:false};
	if(opts.biff != 5) { blob.l += length; return def; }
	var d = blob.read_shift(1); blob.l += 3;
	if((d & 0x10)) def.area = true;
	return def;
}

/* [MS-XLS] 2.4.241 */
function write_RRTabId(n/*:number*/) {
	var out = new_buf(2 * n);
	for(var i = 0; i < n; ++i) out.write_shift(2, i+1);
	return out;
}

var parse_Blank = parse_XLSCell; /* [MS-XLS] 2.4.20 Just the cell */
var parse_Scl = parseuint16a; /* [MS-XLS] 2.4.247 num, den */
var parse_String = parse_XLUnicodeString; /* [MS-XLS] 2.4.268 */

/* --- Specific to versions before BIFF8 --- */
function parse_ImData(blob) {
	var cf = blob.read_shift(2);
	var env = blob.read_shift(2);
	var lcb = blob.read_shift(4);
	var o = {fmt:cf, env:env, len:lcb, data:blob.slice(blob.l,blob.l+lcb)};
	blob.l += lcb;
	return o;
}

/* BIFF2_??? where ??? is the name from [XLS] */
function parse_BIFF2STR(blob, length, opts) {
	if(opts.biffguess && opts.biff == 5) opts.biff = 2;
	var cell = parse_XLSCell(blob, 6);
	++blob.l;
	var str = parse_XLUnicodeString2(blob, length-7, opts);
	cell.t = 'str';
	cell.val = str;
	return cell;
}

function parse_BIFF2NUM(blob/*::, length*/) {
	var cell = parse_XLSCell(blob, 6);
	++blob.l;
	var num = parse_Xnum(blob, 8);
	cell.t = 'n';
	cell.val = num;
	return cell;
}
function write_BIFF2NUM(r/*:number*/, c/*:number*/, val/*:number*/) {
	var out = new_buf(15);
	write_BIFF2Cell(out, r, c);
	out.write_shift(8, val, 'f');
	return out;
}

function parse_BIFF2INT(blob) {
	var cell = parse_XLSCell(blob, 6);
	++blob.l;
	var num = blob.read_shift(2);
	cell.t = 'n';
	cell.val = num;
	return cell;
}
function write_BIFF2INT(r/*:number*/, c/*:number*/, val/*:number*/) {
	var out = new_buf(9);
	write_BIFF2Cell(out, r, c);
	out.write_shift(2, val);
	return out;
}

function parse_BIFF2STRING(blob) {
	var cch = blob.read_shift(1);
	if(cch === 0) { blob.l++; return ""; }
	return blob.read_shift(cch, 'sbcs-cont');
}

/* TODO: convert to BIFF8 font struct */
function parse_BIFF2FONTXTRA(blob, length) {
	blob.l += 6; // unknown
	blob.l += 2; // font weight "bls"
	blob.l += 1; // charset
	blob.l += 3; // unknown
	blob.l += 1; // font family
	blob.l += length - 13;
}

/* TODO: parse rich text runs */
function parse_RString(blob, length, opts) {
	var end = blob.l + length;
	var cell = parse_XLSCell(blob, 6);
	var cch = blob.read_shift(2);
	var str = parse_XLUnicodeStringNoCch(blob, cch, opts);
	blob.l = end;
	cell.t = 'str';
	cell.val = str;
	return cell;
}
/* from js-harb (C) 2014-present  SheetJS */
var DBF_SUPPORTED_VERSIONS = [0x02, 0x03, 0x30, 0x31, 0x83, 0x8B, 0x8C, 0xF5];
var DBF = /*#__PURE__*/(function() {
var dbf_codepage_map = {
	/* Code Pages Supported by Visual FoxPro */
	/*::[*/0x01/*::]*/:   437,           /*::[*/0x02/*::]*/:   850,
	/*::[*/0x03/*::]*/:  1252,           /*::[*/0x04/*::]*/: 10000,
	/*::[*/0x64/*::]*/:   852,           /*::[*/0x65/*::]*/:   866,
	/*::[*/0x66/*::]*/:   865,           /*::[*/0x67/*::]*/:   861,
	/*::[*/0x68/*::]*/:   895,           /*::[*/0x69/*::]*/:   620,
	/*::[*/0x6A/*::]*/:   737,           /*::[*/0x6B/*::]*/:   857,
	/*::[*/0x78/*::]*/:   950,           /*::[*/0x79/*::]*/:   949,
	/*::[*/0x7A/*::]*/:   936,           /*::[*/0x7B/*::]*/:   932,
	/*::[*/0x7C/*::]*/:   874,           /*::[*/0x7D/*::]*/:  1255,
	/*::[*/0x7E/*::]*/:  1256,           /*::[*/0x96/*::]*/: 10007,
	/*::[*/0x97/*::]*/: 10029,           /*::[*/0x98/*::]*/: 10006,
	/*::[*/0xC8/*::]*/:  1250,           /*::[*/0xC9/*::]*/:  1251,
	/*::[*/0xCA/*::]*/:  1254,           /*::[*/0xCB/*::]*/:  1253,

	/* shapefile DBF extension */
	/*::[*/0x00/*::]*/: 20127,           /*::[*/0x08/*::]*/:   865,
	/*::[*/0x09/*::]*/:   437,           /*::[*/0x0A/*::]*/:   850,
	/*::[*/0x0B/*::]*/:   437,           /*::[*/0x0D/*::]*/:   437,
	/*::[*/0x0E/*::]*/:   850,           /*::[*/0x0F/*::]*/:   437,
	/*::[*/0x10/*::]*/:   850,           /*::[*/0x11/*::]*/:   437,
	/*::[*/0x12/*::]*/:   850,           /*::[*/0x13/*::]*/:   932,
	/*::[*/0x14/*::]*/:   850,           /*::[*/0x15/*::]*/:   437,
	/*::[*/0x16/*::]*/:   850,           /*::[*/0x17/*::]*/:   865,
	/*::[*/0x18/*::]*/:   437,           /*::[*/0x19/*::]*/:   437,
	/*::[*/0x1A/*::]*/:   850,           /*::[*/0x1B/*::]*/:   437,
	/*::[*/0x1C/*::]*/:   863,           /*::[*/0x1D/*::]*/:   850,
	/*::[*/0x1F/*::]*/:   852,           /*::[*/0x22/*::]*/:   852,
	/*::[*/0x23/*::]*/:   852,           /*::[*/0x24/*::]*/:   860,
	/*::[*/0x25/*::]*/:   850,           /*::[*/0x26/*::]*/:   866,
	/*::[*/0x37/*::]*/:   850,           /*::[*/0x40/*::]*/:   852,
	/*::[*/0x4D/*::]*/:   936,           /*::[*/0x4E/*::]*/:   949,
	/*::[*/0x4F/*::]*/:   950,           /*::[*/0x50/*::]*/:   874,
	/*::[*/0x57/*::]*/:  1252,           /*::[*/0x58/*::]*/:  1252,
	/*::[*/0x59/*::]*/:  1252,           /*::[*/0x6C/*::]*/:   863,
	/*::[*/0x86/*::]*/:   737,           /*::[*/0x87/*::]*/:   852,
	/*::[*/0x88/*::]*/:   857,           /*::[*/0xCC/*::]*/:  1257,

	/*::[*/0xFF/*::]*/: 16969
};
var dbf_reverse_map = evert({
	/*::[*/0x01/*::]*/:   437,           /*::[*/0x02/*::]*/:   850,
	/*::[*/0x03/*::]*/:  1252,           /*::[*/0x04/*::]*/: 10000,
	/*::[*/0x64/*::]*/:   852,           /*::[*/0x65/*::]*/:   866,
	/*::[*/0x66/*::]*/:   865,           /*::[*/0x67/*::]*/:   861,
	/*::[*/0x68/*::]*/:   895,           /*::[*/0x69/*::]*/:   620,
	/*::[*/0x6A/*::]*/:   737,           /*::[*/0x6B/*::]*/:   857,
	/*::[*/0x78/*::]*/:   950,           /*::[*/0x79/*::]*/:   949,
	/*::[*/0x7A/*::]*/:   936,           /*::[*/0x7B/*::]*/:   932,
	/*::[*/0x7C/*::]*/:   874,           /*::[*/0x7D/*::]*/:  1255,
	/*::[*/0x7E/*::]*/:  1256,           /*::[*/0x96/*::]*/: 10007,
	/*::[*/0x97/*::]*/: 10029,           /*::[*/0x98/*::]*/: 10006,
	/*::[*/0xC8/*::]*/:  1250,           /*::[*/0xC9/*::]*/:  1251,
	/*::[*/0xCA/*::]*/:  1254,           /*::[*/0xCB/*::]*/:  1253,
	/*::[*/0x00/*::]*/: 20127
});
/* TODO: find an actual specification */
function dbf_to_aoa(buf, opts)/*:AOA*/ {
	var out/*:AOA*/ = [];
	var d/*:Block*/ = (new_raw_buf(1)/*:any*/);
	switch(opts.type) {
		case 'base64': d = s2a(Base64_decode(buf)); break;
		case 'binary': d = s2a(buf); break;
		case 'buffer':
		case 'array': d = buf; break;
	}
	prep_blob(d, 0);

	/* header */
	var ft = d.read_shift(1);
	var memo = !!(ft & 0x88);
	var vfp = false, l7 = false;
	switch(ft) {
		case 0x02: break; // dBASE II
		case 0x03: break; // dBASE III
		case 0x30: vfp = true; memo = true; break; // VFP
		case 0x31: vfp = true; memo = true; break; // VFP with autoincrement
		// 0x43 dBASE IV SQL table files
		// 0x63 dBASE IV SQL system files
		case 0x83: break; // dBASE III with memo
		case 0x8B: break; // dBASE IV with memo
		case 0x8C: l7 = true; break; // dBASE Level 7 with memo
		// case 0xCB dBASE IV SQL table files with memo
		case 0xF5: break; // FoxPro 2.x with memo
		// case 0xFB FoxBASE
		default: throw new Error("DBF Unsupported Version: " + ft.toString(16));
	}

	var nrow = 0, fpos = 0x0209;
	if(ft == 0x02) nrow = d.read_shift(2);
	d.l += 3; // dBASE II stores DDMMYY date, others use YYMMDD
	if(ft != 0x02) nrow = d.read_shift(4);
	if(nrow > 1048576) nrow = 1e6;

	if(ft != 0x02) fpos = d.read_shift(2); // header length
	var rlen = d.read_shift(2); // record length

	var /*flags = 0,*/ current_cp = opts.codepage || 1252;
	if(ft != 0x02) { // 20 reserved bytes
		d.l+=16;
		/*flags = */d.read_shift(1);
		//if(memo && ((flags & 0x02) === 0)) throw new Error("DBF Flags " + flags.toString(16) + " ft " + ft.toString(16));

		/* codepage present in FoxPro and dBASE Level 7 */
		if(d[d.l] !== 0) current_cp = dbf_codepage_map[d[d.l]];
		d.l+=1;

		d.l+=2;
	}
	if(l7) d.l += 36; // Level 7: 32 byte "Language driver name", 4 byte reserved

/*:: type DBFField = { name:string; len:number; type:string; } */
	var fields/*:Array<DBFField>*/ = [], field/*:DBFField*/ = ({}/*:any*/);
	var hend = Math.min(d.length, (ft == 0x02 ? 0x209 : (fpos - 10 - (vfp ? 264 : 0))));
	var ww = l7 ? 32 : 11;
	while(d.l < hend && d[d.l] != 0x0d) {
		field = ({}/*:any*/);
		field.name = $cptable.utils.decode(current_cp, d.slice(d.l, d.l+ww)).replace(/[\u0000\r\n].*$/g,"");
		d.l += ww;
		field.type = String.fromCharCode(d.read_shift(1));
		if(ft != 0x02 && !l7) field.offset = d.read_shift(4);
		field.len = d.read_shift(1);
		if(ft == 0x02) field.offset = d.read_shift(2);
		field.dec = d.read_shift(1);
		if(field.name.length) fields.push(field);
		if(ft != 0x02) d.l += l7 ? 13 : 14;
		switch(field.type) {
			case 'B': // Double (VFP) / Binary (dBASE L7)
				if((!vfp || field.len != 8) && opts.WTF) console.log('Skipping ' + field.name + ':' + field.type);
				break;
			case 'G': // General (FoxPro and dBASE L7)
			case 'P': // Picture (FoxPro and dBASE L7)
				if(opts.WTF) console.log('Skipping ' + field.name + ':' + field.type);
				break;
			case '+': // Autoincrement (dBASE L7 only)
			case '0': // _NullFlags (VFP only)
			case '@': // Timestamp (dBASE L7 only)
			case 'C': // Character (dBASE II)
			case 'D': // Date (dBASE III)
			case 'F': // Float (dBASE IV)
			case 'I': // Long (VFP and dBASE L7)
			case 'L': // Logical (dBASE II)
			case 'M': // Memo (dBASE III)
			case 'N': // Number (dBASE II)
			case 'O': // Double (dBASE L7 only)
			case 'T': // Datetime (VFP only)
			case 'Y': // Currency (VFP only)
				break;
			default: throw new Error('Unknown Field Type: ' + field.type);
		}
	}

	if(d[d.l] !== 0x0D) d.l = fpos-1;
	if(d.read_shift(1) !== 0x0D) throw new Error("DBF Terminator not found " + d.l + " " + d[d.l]);
	d.l = fpos;

	/* data */
	var R = 0, C = 0;
	out[0] = [];
	for(C = 0; C != fields.length; ++C) out[0][C] = fields[C].name;
	while(nrow-- > 0) {
		if(d[d.l] === 0x2A) {
			// TODO: record marked as deleted -- create a hidden row?
			d.l+=rlen;
			continue;
		}
		++d.l;
		out[++R] = []; C = 0;
		for(C = 0; C != fields.length; ++C) {
			var dd = d.slice(d.l, d.l+fields[C].len); d.l+=fields[C].len;
			prep_blob(dd, 0);
			var s = $cptable.utils.decode(current_cp, dd);
			switch(fields[C].type) {
				case 'C':
					// NOTE: it is conventional to write '  /  /  ' for empty dates
					if(s.trim().length) out[R][C] = s.replace(/\s+$/,"");
					break;
				case 'D':
					if(s.length === 8) out[R][C] = new Date(+s.slice(0,4), +s.slice(4,6)-1, +s.slice(6,8));
					else out[R][C] = s;
					break;
				case 'F': out[R][C] = parseFloat(s.trim()); break;
				case '+': case 'I': out[R][C] = l7 ? dd.read_shift(-4, 'i') ^ 0x80000000 : dd.read_shift(4, 'i'); break;
				case 'L': switch(s.trim().toUpperCase()) {
					case 'Y': case 'T': out[R][C] = true; break;
					case 'N': case 'F': out[R][C] = false; break;
					case '': case '?': break;
					default: throw new Error("DBF Unrecognized L:|" + s + "|");
					} break;
				case 'M': /* TODO: handle memo files */
					if(!memo) throw new Error("DBF Unexpected MEMO for type " + ft.toString(16));
					out[R][C] = "##MEMO##" + (l7 ? parseInt(s.trim(), 10): dd.read_shift(4));
					break;
				case 'N':
					s = s.replace(/\u0000/g,"").trim();
					// NOTE: dBASE II interprets "  .  " as 0
					if(s && s != ".") out[R][C] = +s || 0; break;
				case '@':
					// NOTE: dBASE specs appear to be incorrect
					out[R][C] = new Date(dd.read_shift(-8, 'f') - 0x388317533400);
					break;
				case 'T': out[R][C] = new Date((dd.read_shift(4) - 0x253D8C) * 0x5265C00 + dd.read_shift(4)); break;
				case 'Y': out[R][C] = dd.read_shift(4,'i')/1e4 + (dd.read_shift(4, 'i')/1e4)*Math.pow(2,32); break;
				case 'O': out[R][C] = -dd.read_shift(-8, 'f'); break;
				case 'B': if(vfp && fields[C].len == 8) { out[R][C] = dd.read_shift(8,'f'); break; }
					/* falls through */
				case 'G': case 'P': dd.l += fields[C].len; break;
				case '0':
					if(fields[C].name === '_NullFlags') break;
					/* falls through */
				default: throw new Error("DBF Unsupported data type " + fields[C].type);
			}
		}
	}
	if(ft != 0x02) if(d.l < d.length && d[d.l++] != 0x1A) throw new Error("DBF EOF Marker missing " + (d.l-1) + " of " + d.length + " " + d[d.l-1].toString(16));
	if(opts && opts.sheetRows) out = out.slice(0, opts.sheetRows);
	opts.DBF = fields;
	return out;
}

function dbf_to_sheet(buf, opts)/*:Worksheet*/ {
	var o = opts || {};
	if(!o.dateNF) o.dateNF = "yyyymmdd";
	var ws = aoa_to_sheet(dbf_to_aoa(buf, o), o);
	ws["!cols"] = o.DBF.map(function(field) { return {
		wch: field.len,
		DBF: field
	};});
	delete o.DBF;
	return ws;
}

function dbf_to_workbook(buf, opts)/*:Workbook*/ {
	try { return sheet_to_workbook(dbf_to_sheet(buf, opts), opts); }
	catch(e) { if(opts && opts.WTF) throw e; }
	return ({SheetNames:[],Sheets:{}});
}

var _RLEN = { 'B': 8, 'C': 250, 'L': 1, 'D': 8, '?': 0, '': 0 };
function sheet_to_dbf(ws/*:Worksheet*/, opts/*:WriteOpts*/) {
	var o = opts || {};
	if(+o.codepage >= 0) set_cp(+o.codepage);
	if(o.type == "string") throw new Error("Cannot write DBF to JS string");
	var ba = buf_array();
	var aoa/*:AOA*/ = sheet_to_json(ws, {header:1, raw:true, cellDates:true});
	var headers = aoa[0], data = aoa.slice(1), cols = ws["!cols"] || [];
	var i = 0, j = 0, hcnt = 0, rlen = 1;
	for(i = 0; i < headers.length; ++i) {
		if(((cols[i]||{}).DBF||{}).name) { headers[i] = cols[i].DBF.name; ++hcnt; continue; }
		if(headers[i] == null) continue;
		++hcnt;
		if(typeof headers[i] === 'number') headers[i] = headers[i].toString(10);
		if(typeof headers[i] !== 'string') throw new Error("DBF Invalid column name " + headers[i] + " |" + (typeof headers[i]) + "|");
		if(headers.indexOf(headers[i]) !== i) for(j=0; j<1024;++j)
			if(headers.indexOf(headers[i] + "_" + j) == -1) { headers[i] += "_" + j; break; }
	}
	var range = safe_decode_range(ws['!ref']);
	var coltypes/*:Array<string>*/ = [];
	var colwidths/*:Array<number>*/ = [];
	var coldecimals/*:Array<number>*/ = [];
	for(i = 0; i <= range.e.c - range.s.c; ++i) {
		var guess = '', _guess = '', maxlen = 0;
		var col/*:Array<any>*/ = [];
		for(j=0; j < data.length; ++j) {
			if(data[j][i] != null) col.push(data[j][i]);
		}
		if(col.length == 0 || headers[i] == null) { coltypes[i] = '?'; continue; }
		for(j = 0; j < col.length; ++j) {
			switch(typeof col[j]) {
				/* TODO: check if L2 compat is desired */
				case 'number': _guess = 'B'; break;
				case 'string': _guess = 'C'; break;
				case 'boolean': _guess = 'L'; break;
				case 'object': _guess = col[j] instanceof Date ? 'D' : 'C'; break;
				default: _guess = 'C';
			}
			maxlen = Math.max(maxlen, String(col[j]).length);
			guess = guess && guess != _guess ? 'C' : _guess;
			//if(guess == 'C') break;
		}
		if(maxlen > 250) maxlen = 250;
		_guess = ((cols[i]||{}).DBF||{}).type;
		/* TODO: more fine grained control over DBF type resolution */
		if(_guess == 'C') {
			if(cols[i].DBF.len > maxlen) maxlen = cols[i].DBF.len;
		}
		if(guess == 'B' && _guess == 'N') {
			guess = 'N';
			coldecimals[i] = cols[i].DBF.dec;
			maxlen = cols[i].DBF.len;
		}
		colwidths[i] = guess == 'C' || _guess == 'N' ? maxlen : (_RLEN[guess] || 0);
		rlen += colwidths[i];
		coltypes[i] = guess;
	}

	var h = ba.next(32);
	h.write_shift(4, 0x13021130);
	h.write_shift(4, data.length);
	h.write_shift(2, 296 + 32 * hcnt);
	h.write_shift(2, rlen);
	for(i=0; i < 4; ++i) h.write_shift(4, 0);
	h.write_shift(4, 0x00000000 | ((+dbf_reverse_map[/*::String(*/current_ansi/*::)*/] || 0x03)<<8));

	for(i = 0, j = 0; i < headers.length; ++i) {
		if(headers[i] == null) continue;
		var hf = ba.next(32);
		var _f = (headers[i].slice(-10) + "\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00").slice(0, 11);
		hf.write_shift(1, _f, "sbcs");
		hf.write_shift(1, coltypes[i] == '?' ? 'C' : coltypes[i], "sbcs");
		hf.write_shift(4, j);
		hf.write_shift(1, colwidths[i] || _RLEN[coltypes[i]] || 0);
		hf.write_shift(1, coldecimals[i] || 0);
		hf.write_shift(1, 0x02);
		hf.write_shift(4, 0);
		hf.write_shift(1, 0);
		hf.write_shift(4, 0);
		hf.write_shift(4, 0);
		j += (colwidths[i] || _RLEN[coltypes[i]] || 0);
	}

	var hb = ba.next(264);
	hb.write_shift(4, 0x0000000D);
	for(i=0; i < 65;++i) hb.write_shift(4, 0x00000000);
	for(i=0; i < data.length; ++i) {
		var rout = ba.next(rlen);
		rout.write_shift(1, 0);
		for(j=0; j<headers.length; ++j) {
			if(headers[j] == null) continue;
			switch(coltypes[j]) {
				case 'L': rout.write_shift(1, data[i][j] == null ? 0x3F : data[i][j] ? 0x54 : 0x46); break;
				case 'B': rout.write_shift(8, data[i][j]||0, 'f'); break;
				case 'N':
					var _n = "0";
					if(typeof data[i][j] == "number") _n = data[i][j].toFixed(coldecimals[j]||0);
					for(hcnt=0; hcnt < colwidths[j]-_n.length; ++hcnt) rout.write_shift(1, 0x20);
					rout.write_shift(1, _n, "sbcs");
					break;
				case 'D':
					if(!data[i][j]) rout.write_shift(8, "00000000", "sbcs");
					else {
						rout.write_shift(4, ("0000"+data[i][j].getFullYear()).slice(-4), "sbcs");
						rout.write_shift(2, ("00"+(data[i][j].getMonth()+1)).slice(-2), "sbcs");
						rout.write_shift(2, ("00"+data[i][j].getDate()).slice(-2), "sbcs");
					} break;
				case 'C':
					var _s = String(data[i][j] != null ? data[i][j] : "").slice(0, colwidths[j]);
					rout.write_shift(1, _s, "sbcs");
					for(hcnt=0; hcnt < colwidths[j]-_s.length; ++hcnt) rout.write_shift(1, 0x20); break;
			}
		}
		// data
	}
	ba.next(1).write_shift(1, 0x1A);
	return ba.end();
}
	return {
		to_workbook: dbf_to_workbook,
		to_sheet: dbf_to_sheet,
		from_sheet: sheet_to_dbf
	};
})();

var SYLK = /*#__PURE__*/(function() {
	/* TODO: stress test sequences */
	var sylk_escapes = ({
		AA:'À', BA:'Á', CA:'Â', DA:195, HA:'Ä', JA:197,
		AE:'È', BE:'É', CE:'Ê',         HE:'Ë',
		AI:'Ì', BI:'Í', CI:'Î',         HI:'Ï',
		AO:'Ò', BO:'Ó', CO:'Ô', DO:213, HO:'Ö',
		AU:'Ù', BU:'Ú', CU:'Û',         HU:'Ü',
		Aa:'à', Ba:'á', Ca:'â', Da:227, Ha:'ä', Ja:229,
		Ae:'è', Be:'é', Ce:'ê',         He:'ë',
		Ai:'ì', Bi:'í', Ci:'î',         Hi:'ï',
		Ao:'ò', Bo:'ó', Co:'ô', Do:245, Ho:'ö',
		Au:'ù', Bu:'ú', Cu:'û',         Hu:'ü',
		KC:'Ç', Kc:'ç', q:'æ',  z:'œ',  a:'Æ',  j:'Œ',
		DN:209, Dn:241, Hy:255,
		S:169,  c:170,  R:174,  "B ":180,
		/*::[*/0/*::]*/:176,    /*::[*/1/*::]*/:177,  /*::[*/2/*::]*/:178,
		/*::[*/3/*::]*/:179,    /*::[*/5/*::]*/:181,  /*::[*/6/*::]*/:182,
		/*::[*/7/*::]*/:183,    Q:185,  k:186,  b:208,  i:216,  l:222,  s:240,  y:248,
		"!":161, '"':162, "#":163, "(":164, "%":165, "'":167, "H ":168,
		"+":171, ";":187, "<":188, "=":189, ">":190, "?":191, "{":223
	}/*:any*/);
	var sylk_char_regex = new RegExp("\u001BN(" + keys(sylk_escapes).join("|").replace(/\|\|\|/, "|\\||").replace(/([?()+])/g,"\\$1") + "|\\|)", "gm");
	var sylk_char_fn = function(_, $1){ var o = sylk_escapes[$1]; return typeof o == "number" ? _getansi(o) : o; };
	var decode_sylk_char = function($$, $1, $2) { var newcc = (($1.charCodeAt(0) - 0x20)<<4) | ($2.charCodeAt(0) - 0x30); return newcc == 59 ? $$ : _getansi(newcc); };
	sylk_escapes["|"] = 254;
	/* TODO: find an actual specification */
	function sylk_to_aoa(d/*:RawData*/, opts)/*:[AOA, Worksheet]*/ {
		switch(opts.type) {
			case 'base64': return sylk_to_aoa_str(Base64_decode(d), opts);
			case 'binary': return sylk_to_aoa_str(d, opts);
			case 'buffer': return sylk_to_aoa_str(has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d), opts);
			case 'array': return sylk_to_aoa_str(cc2str(d), opts);
		}
		throw new Error("Unrecognized type " + opts.type);
	}
	function sylk_to_aoa_str(str/*:string*/, opts)/*:[AOA, Worksheet]*/ {
		var records = str.split(/[\n\r]+/), R = -1, C = -1, ri = 0, rj = 0, arr/*:AOA*/ = [];
		var formats/*:Array<string>*/ = [];
		var next_cell_format/*:string|null*/ = null;
		var sht = {}, rowinfo/*:Array<RowInfo>*/ = [], colinfo/*:Array<ColInfo>*/ = [], cw/*:Array<string>*/ = [];
		var Mval = 0, j;
		if(+opts.codepage >= 0) set_cp(+opts.codepage);
		for (; ri !== records.length; ++ri) {
			Mval = 0;
			var rstr=records[ri].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g, decode_sylk_char).replace(sylk_char_regex, sylk_char_fn);
			var record=rstr.replace(/;;/g, "\u0000").split(";").map(function(x) { return x.replace(/\u0000/g, ";"); });
			var RT=record[0], val;
			if(rstr.length > 0) switch(RT) {
			case 'ID': break; /* header */
			case 'E': break; /* EOF */
			case 'B': break; /* dimensions */
			case 'O': break; /* options? */
			case 'W': break; /* window? */
			case 'P':
				if(record[1].charAt(0) == 'P')
					formats.push(rstr.slice(3).replace(/;;/g, ";"));
				break;
			case 'C':
			var C_seen_K = false, C_seen_X = false, C_seen_S = false, C_seen_E = false, _R = -1, _C = -1;
			for(rj=1; rj<record.length; ++rj) switch(record[rj].charAt(0)) {
				case 'A': break; // TODO: comment
				case 'X': C = parseInt(record[rj].slice(1))-1; C_seen_X = true; break;
				case 'Y':
					R = parseInt(record[rj].slice(1))-1; if(!C_seen_X) C = 0;
					for(j = arr.length; j <= R; ++j) arr[j] = [];
					break;
				case 'K':
					val = record[rj].slice(1);
					if(val.charAt(0) === '"') val = val.slice(1,val.length - 1);
					else if(val === 'TRUE') val = true;
					else if(val === 'FALSE') val = false;
					else if(!isNaN(fuzzynum(val))) {
						val = fuzzynum(val);
						if(next_cell_format !== null && fmt_is_date(next_cell_format)) val = numdate(val);
					} else if(!isNaN(fuzzydate(val).getDate())) {
						val = parseDate(val);
					}
					if(typeof $cptable !== 'undefined' && typeof val == "string" && ((opts||{}).type != "string") && (opts||{}).codepage) val = $cptable.utils.decode(opts.codepage, val);
					C_seen_K = true;
					break;
				case 'E':
					C_seen_E = true;
					var formula = rc_to_a1(record[rj].slice(1), {r:R,c:C});
					arr[R][C] = [arr[R][C], formula];
					break;
				case 'S':
					C_seen_S = true;
					arr[R][C] = [arr[R][C], "S5S"];
					break;
				case 'G': break; // unknown
				case 'R': _R = parseInt(record[rj].slice(1))-1; break;
				case 'C': _C = parseInt(record[rj].slice(1))-1; break;
				default: if(opts && opts.WTF) throw new Error("SYLK bad record " + rstr);
			}
			if(C_seen_K) {
				if(arr[R][C] && arr[R][C].length == 2) arr[R][C][0] = val;
				else arr[R][C] = val;
				next_cell_format = null;
			}
			if(C_seen_S) {
				if(C_seen_E) throw new Error("SYLK shared formula cannot have own formula");
				var shrbase = _R > -1 && arr[_R][_C];
				if(!shrbase || !shrbase[1]) throw new Error("SYLK shared formula cannot find base");
				arr[R][C][1] = shift_formula_str(shrbase[1], {r: R - _R, c: C - _C});
			}
			break;
			case 'F':
			var F_seen = 0;
			for(rj=1; rj<record.length; ++rj) switch(record[rj].charAt(0)) {
				case 'X': C = parseInt(record[rj].slice(1))-1; ++F_seen; break;
				case 'Y':
					R = parseInt(record[rj].slice(1))-1; /*C = 0;*/
					for(j = arr.length; j <= R; ++j) arr[j] = [];
					break;
				case 'M': Mval = parseInt(record[rj].slice(1)) / 20; break;
				case 'F': break; /* ??? */
				case 'G': break; /* hide grid */
				case 'P':
					next_cell_format = formats[parseInt(record[rj].slice(1))];
					break;
				case 'S': break; /* cell style */
				case 'D': break; /* column */
				case 'N': break; /* font */
				case 'W':
					cw = record[rj].slice(1).split(" ");
					for(j = parseInt(cw[0], 10); j <= parseInt(cw[1], 10); ++j) {
						Mval = parseInt(cw[2], 10);
						colinfo[j-1] = Mval === 0 ? {hidden:true}: {wch:Mval}; process_col(colinfo[j-1]);
					} break;
				case 'C': /* default column format */
					C = parseInt(record[rj].slice(1))-1;
					if(!colinfo[C]) colinfo[C] = {};
					break;
				case 'R': /* row properties */
					R = parseInt(record[rj].slice(1))-1;
					if(!rowinfo[R]) rowinfo[R] = {};
					if(Mval > 0) { rowinfo[R].hpt = Mval; rowinfo[R].hpx = pt2px(Mval); }
					else if(Mval === 0) rowinfo[R].hidden = true;
					break;
				default: if(opts && opts.WTF) throw new Error("SYLK bad record " + rstr);
			}
			if(F_seen < 1) next_cell_format = null; break;
			default: if(opts && opts.WTF) throw new Error("SYLK bad record " + rstr);
			}
		}
		if(rowinfo.length > 0) sht['!rows'] = rowinfo;
		if(colinfo.length > 0) sht['!cols'] = colinfo;
		if(opts && opts.sheetRows) arr = arr.slice(0, opts.sheetRows);
		return [arr, sht];
	}

	function sylk_to_sheet(d/*:RawData*/, opts)/*:Worksheet*/ {
		var aoasht = sylk_to_aoa(d, opts);
		var aoa = aoasht[0], ws = aoasht[1];
		var o = aoa_to_sheet(aoa, opts);
		keys(ws).forEach(function(k) { o[k] = ws[k]; });
		return o;
	}

	function sylk_to_workbook(d/*:RawData*/, opts)/*:Workbook*/ { return sheet_to_workbook(sylk_to_sheet(d, opts), opts); }

	function write_ws_cell_sylk(cell/*:Cell*/, ws/*:Worksheet*/, R/*:number*/, C/*:number*//*::, opts*/)/*:string*/ {
		var o = "C;Y" + (R+1) + ";X" + (C+1) + ";K";
		switch(cell.t) {
			case 'n':
				o += (cell.v||0);
				if(cell.f && !cell.F) o += ";E" + a1_to_rc(cell.f, {r:R, c:C}); break;
			case 'b': o += cell.v ? "TRUE" : "FALSE"; break;
			case 'e': o += cell.w || cell.v; break;
			case 'd': o += '"' + (cell.w || cell.v) + '"'; break;
			case 's': o += '"' + cell.v.replace(/"/g,"").replace(/;/g, ";;") + '"'; break;
		}
		return o;
	}

	function write_ws_cols_sylk(out, cols) {
		cols.forEach(function(col, i) {
			var rec = "F;W" + (i+1) + " " + (i+1) + " ";
			if(col.hidden) rec += "0";
			else {
				if(typeof col.width == 'number' && !col.wpx) col.wpx = width2px(col.width);
				if(typeof col.wpx == 'number' && !col.wch) col.wch = px2char(col.wpx);
				if(typeof col.wch == 'number') rec += Math.round(col.wch);
			}
			if(rec.charAt(rec.length - 1) != " ") out.push(rec);
		});
	}

	function write_ws_rows_sylk(out/*:Array<string>*/, rows/*:Array<RowInfo>*/) {
		rows.forEach(function(row, i) {
			var rec = "F;";
			if(row.hidden) rec += "M0;";
			else if(row.hpt) rec += "M" + 20 * row.hpt + ";";
			else if(row.hpx) rec += "M" + 20 * px2pt(row.hpx) + ";";
			if(rec.length > 2) out.push(rec + "R" + (i+1));
		});
	}

	function sheet_to_sylk(ws/*:Worksheet*/, opts/*:?any*/)/*:string*/ {
		var preamble/*:Array<string>*/ = ["ID;PWXL;N;E"], o/*:Array<string>*/ = [];
		var r = safe_decode_range(ws['!ref']), cell/*:Cell*/;
		var dense = Array.isArray(ws);
		var RS = "\r\n";

		preamble.push("P;PGeneral");
		preamble.push("F;P0;DG0G8;M255");
		if(ws['!cols']) write_ws_cols_sylk(preamble, ws['!cols']);
		if(ws['!rows']) write_ws_rows_sylk(preamble, ws['!rows']);

		preamble.push("B;Y" + (r.e.r - r.s.r + 1) + ";X" + (r.e.c - r.s.c + 1) + ";D" + [r.s.c,r.s.r,r.e.c,r.e.r].join(" "));
		for(var R = r.s.r; R <= r.e.r; ++R) {
			for(var C = r.s.c; C <= r.e.c; ++C) {
				var coord = encode_cell({r:R,c:C});
				cell = dense ? (ws[R]||[])[C]: ws[coord];
				if(!cell || (cell.v == null && (!cell.f || cell.F))) continue;
				o.push(write_ws_cell_sylk(cell, ws, R, C, opts));
			}
		}
		return preamble.join(RS) + RS + o.join(RS) + RS + "E" + RS;
	}

	return {
		to_workbook: sylk_to_workbook,
		to_sheet: sylk_to_sheet,
		from_sheet: sheet_to_sylk
	};
})();

var DIF = /*#__PURE__*/(function() {
	function dif_to_aoa(d/*:RawData*/, opts)/*:AOA*/ {
		switch(opts.type) {
			case 'base64': return dif_to_aoa_str(Base64_decode(d), opts);
			case 'binary': return dif_to_aoa_str(d, opts);
			case 'buffer': return dif_to_aoa_str(has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d), opts);
			case 'array': return dif_to_aoa_str(cc2str(d), opts);
		}
		throw new Error("Unrecognized type " + opts.type);
	}
	function dif_to_aoa_str(str/*:string*/, opts)/*:AOA*/ {
		var records = str.split('\n'), R = -1, C = -1, ri = 0, arr/*:AOA*/ = [];
		for (; ri !== records.length; ++ri) {
			if (records[ri].trim() === 'BOT') { arr[++R] = []; C = 0; continue; }
			if (R < 0) continue;
			var metadata = records[ri].trim().split(",");
			var type = metadata[0], value = metadata[1];
			++ri;
			var data = records[ri] || "";
			while(((data.match(/["]/g)||[]).length & 1) && ri < records.length - 1) data += "\n" + records[++ri];
			data = data.trim();
			switch (+type) {
				case -1:
					if (data === 'BOT') { arr[++R] = []; C = 0; continue; }
					else if (data !== 'EOD') throw new Error("Unrecognized DIF special command " + data);
					break;
				case 0:
					if(data === 'TRUE') arr[R][C] = true;
					else if(data === 'FALSE') arr[R][C] = false;
					else if(!isNaN(fuzzynum(value))) arr[R][C] = fuzzynum(value);
					else if(!isNaN(fuzzydate(value).getDate())) arr[R][C] = parseDate(value);
					else arr[R][C] = value;
					++C; break;
				case 1:
					data = data.slice(1,data.length-1);
					data = data.replace(/""/g, '"');
					if(DIF_XL && data && data.match(/^=".*"$/)) data = data.slice(2, -1);
					arr[R][C++] = data !== '' ? data : null;
					break;
			}
			if (data === 'EOD') break;
		}
		if(opts && opts.sheetRows) arr = arr.slice(0, opts.sheetRows);
		return arr;
	}

	function dif_to_sheet(str/*:string*/, opts)/*:Worksheet*/ { return aoa_to_sheet(dif_to_aoa(str, opts), opts); }
	function dif_to_workbook(str/*:string*/, opts)/*:Workbook*/ { return sheet_to_workbook(dif_to_sheet(str, opts), opts); }

	var sheet_to_dif = /*#__PURE__*/(function() {
		var push_field = function pf(o/*:Array<string>*/, topic/*:string*/, v/*:number*/, n/*:number*/, s/*:string*/) {
			o.push(topic);
			o.push(v + "," + n);
			o.push('"' + s.replace(/"/g,'""') + '"');
		};
		var push_value = function po(o/*:Array<string>*/, type/*:number*/, v/*:any*/, s/*:string*/) {
			o.push(type + "," + v);
			o.push(type == 1 ? '"' + s.replace(/"/g,'""') + '"' : s);
		};
		return function sheet_to_dif(ws/*:Worksheet*//*::, opts:?any*/)/*:string*/ {
			var o/*:Array<string>*/ = [];
			var r = safe_decode_range(ws['!ref']), cell/*:Cell*/;
			var dense = Array.isArray(ws);
			push_field(o, "TABLE", 0, 1, "sheetjs");
			push_field(o, "VECTORS", 0, r.e.r - r.s.r + 1,"");
			push_field(o, "TUPLES", 0, r.e.c - r.s.c + 1,"");
			push_field(o, "DATA", 0, 0,"");
			for(var R = r.s.r; R <= r.e.r; ++R) {
				push_value(o, -1, 0, "BOT");
				for(var C = r.s.c; C <= r.e.c; ++C) {
					var coord = encode_cell({r:R,c:C});
					cell = dense ? (ws[R]||[])[C] : ws[coord];
					if(!cell) { push_value(o, 1, 0, ""); continue;}
					switch(cell.t) {
						case 'n':
							var val = DIF_XL ? cell.w : cell.v;
							if(!val && cell.v != null) val = cell.v;
							if(val == null) {
								if(DIF_XL && cell.f && !cell.F) push_value(o, 1, 0, "=" + cell.f);
								else push_value(o, 1, 0, "");
							}
							else push_value(o, 0, val, "V");
							break;
						case 'b':
							push_value(o, 0, cell.v ? 1 : 0, cell.v ? "TRUE" : "FALSE");
							break;
						case 's':
							push_value(o, 1, 0, (!DIF_XL || isNaN(cell.v)) ? cell.v : '="' + cell.v + '"');
							break;
						case 'd':
							if(!cell.w) cell.w = SSF_format(cell.z || table_fmt[14], datenum(parseDate(cell.v)));
							if(DIF_XL) push_value(o, 0, cell.w, "V");
							else push_value(o, 1, 0, cell.w);
							break;
						default: push_value(o, 1, 0, "");
					}
				}
			}
			push_value(o, -1, 0, "EOD");
			var RS = "\r\n";
			var oo = o.join(RS);
			//while((oo.length & 0x7F) != 0) oo += "\0";
			return oo;
		};
	})();
	return {
		to_workbook: dif_to_workbook,
		to_sheet: dif_to_sheet,
		from_sheet: sheet_to_dif
	};
})();

var ETH = /*#__PURE__*/(function() {
	function decode(s/*:string*/)/*:string*/ { return s.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,"\n"); }
	function encode(s/*:string*/)/*:string*/ { return s.replace(/\\/g, "\\b").replace(/:/g, "\\c").replace(/\n/g,"\\n"); }

	function eth_to_aoa(str/*:string*/, opts)/*:AOA*/ {
		var records = str.split('\n'), R = -1, C = -1, ri = 0, arr/*:AOA*/ = [];
		for (; ri !== records.length; ++ri) {
			var record = records[ri].trim().split(":");
			if(record[0] !== 'cell') continue;
			var addr = decode_cell(record[1]);
			if(arr.length <= addr.r) for(R = arr.length; R <= addr.r; ++R) if(!arr[R]) arr[R] = [];
			R = addr.r; C = addr.c;
			switch(record[2]) {
				case 't': arr[R][C] = decode(record[3]); break;
				case 'v': arr[R][C] = +record[3]; break;
				case 'vtf': var _f = record[record.length - 1];
					/* falls through */
				case 'vtc':
					switch(record[3]) {
						case 'nl': arr[R][C] = +record[4] ? true : false; break;
						default: arr[R][C] = +record[4]; break;
					}
					if(record[2] == 'vtf') arr[R][C] = [arr[R][C], _f];
			}
		}
		if(opts && opts.sheetRows) arr = arr.slice(0, opts.sheetRows);
		return arr;
	}

	function eth_to_sheet(d/*:string*/, opts)/*:Worksheet*/ { return aoa_to_sheet(eth_to_aoa(d, opts), opts); }
	function eth_to_workbook(d/*:string*/, opts)/*:Workbook*/ { return sheet_to_workbook(eth_to_sheet(d, opts), opts); }

	var header = [
		"socialcalc:version:1.5",
		"MIME-Version: 1.0",
		"Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"
	].join("\n");

	var sep = [
		"--SocialCalcSpreadsheetControlSave",
		"Content-type: text/plain; charset=UTF-8"
	].join("\n") + "\n";

	/* TODO: the other parts */
	var meta = [
		"# SocialCalc Spreadsheet Control Save",
		"part:sheet"
	].join("\n");

	var end = "--SocialCalcSpreadsheetControlSave--";

	function sheet_to_eth_data(ws/*:Worksheet*/)/*:string*/ {
		if(!ws || !ws['!ref']) return "";
		var o/*:Array<string>*/ = [], oo/*:Array<string>*/ = [], cell, coord = "";
		var r = decode_range(ws['!ref']);
		var dense = Array.isArray(ws);
		for(var R = r.s.r; R <= r.e.r; ++R) {
			for(var C = r.s.c; C <= r.e.c; ++C) {
				coord = encode_cell({r:R,c:C});
				cell = dense ? (ws[R]||[])[C] : ws[coord];
				if(!cell || cell.v == null || cell.t === 'z') continue;
				oo = ["cell", coord, 't'];
				switch(cell.t) {
					case 's': case 'str': oo.push(encode(cell.v)); break;
					case 'n':
						if(!cell.f) { oo[2]='v'; oo[3]=cell.v; }
						else { oo[2]='vtf'; oo[3]='n'; oo[4]=cell.v; oo[5]=encode(cell.f); }
						break;
					case 'b':
						oo[2] = 'vt'+(cell.f?'f':'c'); oo[3]='nl'; oo[4]=cell.v?"1":"0";
						oo[5] = encode(cell.f||(cell.v?'TRUE':'FALSE'));
						break;
					case 'd':
						var t = datenum(parseDate(cell.v));
						oo[2] = 'vtc'; oo[3] = 'nd'; oo[4] = ""+t;
						oo[5] = cell.w || SSF_format(cell.z || table_fmt[14], t);
						break;
					case 'e': continue;
				}
				o.push(oo.join(":"));
			}
		}
		o.push("sheet:c:" + (r.e.c-r.s.c+1) + ":r:" + (r.e.r-r.s.r+1) + ":tvf:1");
		o.push("valueformat:1:text-wiki");
		//o.push("copiedfrom:" + ws['!ref']); // clipboard only
		return o.join("\n");
	}

	function sheet_to_eth(ws/*:Worksheet*//*::, opts:?any*/)/*:string*/ {
		return [header, sep, meta, sep, sheet_to_eth_data(ws), end].join("\n");
		// return ["version:1.5", sheet_to_eth_data(ws)].join("\n"); // clipboard form
	}

	return {
		to_workbook: eth_to_workbook,
		to_sheet: eth_to_sheet,
		from_sheet: sheet_to_eth
	};
})();

var PRN = /*#__PURE__*/(function() {
	function set_text_arr(data/*:string*/, arr/*:AOA*/, R/*:number*/, C/*:number*/, o/*:any*/) {
		if(o.raw) arr[R][C] = data;
		else if(data === ""){/* empty */}
		else if(data === 'TRUE') arr[R][C] = true;
		else if(data === 'FALSE') arr[R][C] = false;
		else if(!isNaN(fuzzynum(data))) arr[R][C] = fuzzynum(data);
		else if(!isNaN(fuzzydate(data).getDate())) arr[R][C] = parseDate(data);
		else arr[R][C] = data;
	}

	function prn_to_aoa_str(f/*:string*/, opts)/*:AOA*/ {
		var o = opts || {};
		var arr/*:AOA*/ = ([]/*:any*/);
		if(!f || f.length === 0) return arr;
		var lines = f.split(/[\r\n]/);
		var L = lines.length - 1;
		while(L >= 0 && lines[L].length === 0) --L;
		var start = 10, idx = 0;
		var R = 0;
		for(; R <= L; ++R) {
			idx = lines[R].indexOf(" ");
			if(idx == -1) idx = lines[R].length; else idx++;
			start = Math.max(start, idx);
		}
		for(R = 0; R <= L; ++R) {
			arr[R] = [];
			/* TODO: confirm that widths are always 10 */
			var C = 0;
			set_text_arr(lines[R].slice(0, start).trim(), arr, R, C, o);
			for(C = 1; C <= (lines[R].length - start)/10 + 1; ++C)
				set_text_arr(lines[R].slice(start+(C-1)*10,start+C*10).trim(),arr,R,C,o);
		}
		if(o.sheetRows) arr = arr.slice(0, o.sheetRows);
		return arr;
	}

	// List of accepted CSV separators
	var guess_seps = {
		/*::[*/0x2C/*::]*/: ',',
		/*::[*/0x09/*::]*/: "\t",
		/*::[*/0x3B/*::]*/: ';',
		/*::[*/0x7C/*::]*/: '|'
	};

	// CSV separator weights to be used in case of equal numbers
	var guess_sep_weights = {
		/*::[*/0x2C/*::]*/: 3,
		/*::[*/0x09/*::]*/: 2,
		/*::[*/0x3B/*::]*/: 1,
		/*::[*/0x7C/*::]*/: 0
	};

	function guess_sep(str) {
		var cnt = {}, instr = false, end = 0, cc = 0;
		for(;end < str.length;++end) {
			if((cc=str.charCodeAt(end)) == 0x22) instr = !instr;
			else if(!instr && cc in guess_seps) cnt[cc] = (cnt[cc]||0)+1;
		}

		cc = [];
		for(end in cnt) if ( Object.prototype.hasOwnProperty.call(cnt, end) ) {
			cc.push([ cnt[end], end ]);
		}

		if ( !cc.length ) {
			cnt = guess_sep_weights;
			for(end in cnt) if ( Object.prototype.hasOwnProperty.call(cnt, end) ) {
				cc.push([ cnt[end], end ]);
			}
		}

		cc.sort(function(a, b) { return a[0] - b[0] || guess_sep_weights[a[1]] - guess_sep_weights[b[1]]; });

		return guess_seps[cc.pop()[1]] || 0x2C;
	}

	function dsv_to_sheet_str(str/*:string*/, opts)/*:Worksheet*/ {
		var o = opts || {};
		var sep = "";
		if(DENSE != null && o.dense == null) o.dense = DENSE;
		var ws/*:Worksheet*/ = o.dense ? ([]/*:any*/) : ({}/*:any*/);
		var range/*:Range*/ = ({s: {c:0, r:0}, e: {c:0, r:0}}/*:any*/);

		if(str.slice(0,4) == "sep=") {
			// If the line ends in \r\n
			if(str.charCodeAt(5) == 13 && str.charCodeAt(6) == 10 ) {
				sep = str.charAt(4); str = str.slice(7);
			}
			// If line ends in \r OR \n
			else if(str.charCodeAt(5) == 13 || str.charCodeAt(5) == 10 ) {
				sep = str.charAt(4); str = str.slice(6);
			}
			else sep = guess_sep(str.slice(0,1024));
		}
		else if(o && o.FS) sep = o.FS;
		else sep = guess_sep(str.slice(0,1024));
		var R = 0, C = 0, v = 0;
		var start = 0, end = 0, sepcc = sep.charCodeAt(0), instr = false, cc=0, startcc=str.charCodeAt(0);
		str = str.replace(/\r\n/mg, "\n");
		var _re/*:?RegExp*/ = o.dateNF != null ? dateNF_regex(o.dateNF) : null;
		function finish_cell() {
			var s = str.slice(start, end);
			var cell = ({}/*:any*/);
			if(s.charAt(0) == '"' && s.charAt(s.length - 1) == '"') s = s.slice(1,-1).replace(/""/g,'"');
			if(s.length === 0) cell.t = 'z';
			else if(o.raw) { cell.t = 's'; cell.v = s; }
			else if(s.trim().length === 0) { cell.t = 's'; cell.v = s; }
			else if(s.charCodeAt(0) == 0x3D) {
				if(s.charCodeAt(1) == 0x22 && s.charCodeAt(s.length - 1) == 0x22) { cell.t = 's'; cell.v = s.slice(2,-1).replace(/""/g,'"'); }
				else if(fuzzyfmla(s)) { cell.t = 'n'; cell.f = s.slice(1); }
				else { cell.t = 's'; cell.v = s; } }
			else if(s == "TRUE") { cell.t = 'b'; cell.v = true; }
			else if(s == "FALSE") { cell.t = 'b'; cell.v = false; }
			else if(!isNaN(v = fuzzynum(s))) { cell.t = 'n'; if(o.cellText !== false) cell.w = s; cell.v = v; }
			else if(!isNaN(fuzzydate(s).getDate()) || _re && s.match(_re)) {
				cell.z = o.dateNF || table_fmt[14];
				var k = 0;
				if(_re && s.match(_re)){ s=dateNF_fix(s, o.dateNF, (s.match(_re)||[])); k=1; }
				if(o.cellDates) { cell.t = 'd'; cell.v = parseDate(s, k); }
				else { cell.t = 'n'; cell.v = datenum(parseDate(s, k)); }
				if(o.cellText !== false) cell.w = SSF_format(cell.z, cell.v instanceof Date ? datenum(cell.v):cell.v);
				if(!o.cellNF) delete cell.z;
			} else {
				cell.t = 's';
				cell.v = s;
			}
			if(cell.t == 'z'){}
			else if(o.dense) { if(!ws[R]) ws[R] = []; ws[R][C] = cell; }
			else ws[encode_cell({c:C,r:R})] = cell;
			start = end+1; startcc = str.charCodeAt(start);
			if(range.e.c < C) range.e.c = C;
			if(range.e.r < R) range.e.r = R;
			if(cc == sepcc) ++C; else { C = 0; ++R; if(o.sheetRows && o.sheetRows <= R) return true; }
		}
		outer: for(;end < str.length;++end) switch((cc=str.charCodeAt(end))) {
			case 0x22: if(startcc === 0x22) instr = !instr; break;
			case sepcc: case 0x0a: case 0x0d: if(!instr && finish_cell()) break outer; break;
			default: break;
		}
		if(end - start > 0) finish_cell();

		ws['!ref'] = encode_range(range);
		return ws;
	}

	function prn_to_sheet_str(str/*:string*/, opts)/*:Worksheet*/ {
		if(!(opts && opts.PRN)) return dsv_to_sheet_str(str, opts);
		if(opts.FS) return dsv_to_sheet_str(str, opts);
		if(str.slice(0,4) == "sep=") return dsv_to_sheet_str(str, opts);
		if(str.indexOf("\t") >= 0 || str.indexOf(",") >= 0 || str.indexOf(";") >= 0) return dsv_to_sheet_str(str, opts);
		return aoa_to_sheet(prn_to_aoa_str(str, opts), opts);
	}

	function prn_to_sheet(d/*:RawData*/, opts)/*:Worksheet*/ {
		var str = "", bytes = opts.type == 'string' ? [0,0,0,0] : firstbyte(d, opts);
		switch(opts.type) {
			case 'base64': str = Base64_decode(d); break;
			case 'binary': str = d; break;
			case 'buffer':
				if(opts.codepage == 65001) str = d.toString('utf8'); // TODO: test if buf
				else if(opts.codepage && typeof $cptable !== 'undefined') str = $cptable.utils.decode(opts.codepage, d);
				else str = has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d);
				break;
			case 'array': str = cc2str(d); break;
			case 'string': str = d; break;
			default: throw new Error("Unrecognized type " + opts.type);
		}
		if(bytes[0] == 0xEF && bytes[1] == 0xBB && bytes[2] == 0xBF) str = utf8read(str.slice(3));
		else if(opts.type != 'string' && opts.type != 'buffer' && opts.codepage == 65001) str = utf8read(str);
		else if((opts.type == 'binary') && typeof $cptable !== 'undefined' && opts.codepage)  str = $cptable.utils.decode(opts.codepage, $cptable.utils.encode(28591,str));
		if(str.slice(0,19) == "socialcalc:version:") return ETH.to_sheet(opts.type == 'string' ? str : utf8read(str), opts);
		return prn_to_sheet_str(str, opts);
	}

	function prn_to_workbook(d/*:RawData*/, opts)/*:Workbook*/ { return sheet_to_workbook(prn_to_sheet(d, opts), opts); }

	function sheet_to_prn(ws/*:Worksheet*//*::, opts:?any*/)/*:string*/ {
		var o/*:Array<string>*/ = [];
		var r = safe_decode_range(ws['!ref']), cell/*:Cell*/;
		var dense = Array.isArray(ws);
		for(var R = r.s.r; R <= r.e.r; ++R) {
			var oo/*:Array<string>*/ = [];
			for(var C = r.s.c; C <= r.e.c; ++C) {
				var coord = encode_cell({r:R,c:C});
				cell = dense ? (ws[R]||[])[C] : ws[coord];
				if(!cell || cell.v == null) { oo.push("          "); continue; }
				var w = (cell.w || (format_cell(cell), cell.w) || "").slice(0,10);
				while(w.length < 10) w += " ";
				oo.push(w + (C === 0 ? " " : ""));
			}
			o.push(oo.join(""));
		}
		return o.join("\n");
	}

	return {
		to_workbook: prn_to_workbook,
		to_sheet: prn_to_sheet,
		from_sheet: sheet_to_prn
	};
})();

/* Excel defaults to SYLK but warns if data is not valid */
function read_wb_ID(d, opts) {
	var o = opts || {}, OLD_WTF = !!o.WTF; o.WTF = true;
	try {
		var out = SYLK.to_workbook(d, o);
		o.WTF = OLD_WTF;
		return out;
	} catch(e) {
		o.WTF = OLD_WTF;
		if(!e.message.match(/SYLK bad record ID/) && OLD_WTF) throw e;
		return PRN.to_workbook(d, opts);
	}
}

var WK_ = /*#__PURE__*/(function() {
	function lotushopper(data, cb/*:RecordHopperCB*/, opts/*:any*/) {
		if(!data) return;
		prep_blob(data, data.l || 0);
		var Enum = opts.Enum || WK1Enum;
		while(data.l < data.length) {
			var RT = data.read_shift(2);
			var R = Enum[RT] || Enum[0xFFFF];
			var length = data.read_shift(2);
			var tgt = data.l + length;
			var d = R.f && R.f(data, length, opts);
			data.l = tgt;
			if(cb(d, R, RT)) return;
		}
	}

	function lotus_to_workbook(d/*:RawData*/, opts) {
		switch(opts.type) {
			case 'base64': return lotus_to_workbook_buf(s2a(Base64_decode(d)), opts);
			case 'binary': return lotus_to_workbook_buf(s2a(d), opts);
			case 'buffer':
			case 'array': return lotus_to_workbook_buf(d, opts);
		}
		throw "Unsupported type " + opts.type;
	}

	function lotus_to_workbook_buf(d, opts)/*:Workbook*/ {
		if(!d) return d;
		var o = opts || {};
		if(DENSE != null && o.dense == null) o.dense = DENSE;
		var s/*:Worksheet*/ = ((o.dense ? [] : {})/*:any*/), n = "Sheet1", next_n = "", sidx = 0;
		var sheets = {}, snames = [], realnames = [];

		var refguess = {s: {r:0, c:0}, e: {r:0, c:0} };
		var sheetRows = o.sheetRows || 0;

		if(d[2] == 0x00) {
			if(d[3] == 0x08 || d[3] == 0x09) {
				if(d.length >= 16 && d[14] == 0x05 && d[15] === 0x6c) throw new Error("Unsupported Works 3 for Mac file");
			}
		}

		if(d[2] == 0x02) {
			o.Enum = WK1Enum;
			lotushopper(d, function(val, R, RT) { switch(RT) {
				case 0x00: /* BOF */
					o.vers = val;
					if(val >= 0x1000) o.qpro = true;
					break;
				case 0x06: refguess = val; break; /* RANGE */
				case 0xCC: if(val) next_n = val; break; /* SHEETNAMECS */
				case 0xDE: next_n = val; break; /* SHEETNAMELP */
				case 0x0F: /* LABEL */
				case 0x33: /* STRING */
					if(!o.qpro) val[1].v = val[1].v.slice(1);
					/* falls through */
				case 0x0D: /* INTEGER */
				case 0x0E: /* NUMBER */
				case 0x10: /* FORMULA */
					/* TODO: actual translation of the format code */
					if(RT == 0x0E && (val[2] & 0x70) == 0x70 && (val[2] & 0x0F) > 1 && (val[2] & 0x0F) < 15) {
						val[1].z = o.dateNF || table_fmt[14];
						if(o.cellDates) { val[1].t = 'd'; val[1].v = numdate(val[1].v); }
					}

					if(o.qpro) {
						if(val[3] > sidx) {
							s["!ref"] = encode_range(refguess);
							sheets[n] = s;
							snames.push(n);
							s = (o.dense ? [] : {});
							refguess = {s: {r:0, c:0}, e: {r:0, c:0} };
							sidx = val[3]; n = next_n || "Sheet" + (sidx + 1); next_n = "";
						}
					}

					var tmpcell = o.dense ? (s[val[0].r]||[])[val[0].c] : s[encode_cell(val[0])];
					if(tmpcell) {
						tmpcell.t = val[1].t; tmpcell.v = val[1].v;
						if(val[1].z != null) tmpcell.z = val[1].z;
						if(val[1].f != null) tmpcell.f = val[1].f;
						break;
					}
					if(o.dense) {
						if(!s[val[0].r]) s[val[0].r] = [];
						s[val[0].r][val[0].c] = val[1];
					} else s[encode_cell(val[0])] = val[1];
					break;
				default:
			}}, o);
		} else if(d[2] == 0x1A || d[2] == 0x0E) {
			o.Enum = WK3Enum;
			if(d[2] == 0x0E) { o.qpro = true; d.l = 0; }
			lotushopper(d, function(val, R, RT) { switch(RT) {
				case 0xCC: n = val; break; /* SHEETNAMECS */
				case 0x16: /* LABEL16 */
					val[1].v = val[1].v.slice(1);
					/* falls through */
				case 0x17: /* NUMBER17 */
				case 0x18: /* NUMBER18 */
				case 0x19: /* FORMULA19 */
				case 0x25: /* NUMBER25 */
				case 0x27: /* NUMBER27 */
				case 0x28: /* FORMULA28 */
					if(val[3] > sidx) {
						s["!ref"] = encode_range(refguess);
						sheets[n] = s;
						snames.push(n);
						s = (o.dense ? [] : {});
						refguess = {s: {r:0, c:0}, e: {r:0, c:0} };
						sidx = val[3]; n = "Sheet" + (sidx + 1);
					}
					if(sheetRows > 0 && val[0].r >= sheetRows) break;
					if(o.dense) {
						if(!s[val[0].r]) s[val[0].r] = [];
						s[val[0].r][val[0].c] = val[1];
					} else s[encode_cell(val[0])] = val[1];
					if(refguess.e.c < val[0].c) refguess.e.c = val[0].c;
					if(refguess.e.r < val[0].r) refguess.e.r = val[0].r;
					break;
				case 0x1B: /* XFORMAT */
					if(val[0x36b0]) realnames[val[0x36b0][0]] = val[0x36b0][1];
					break;
				case 0x0601: /* SHEETINFOQP */
					realnames[val[0]] = val[1]; if(val[0] == sidx) n = val[1]; break;
				default: break;
			}}, o);
		} else throw new Error("Unrecognized LOTUS BOF " + d[2]);
		s["!ref"] = encode_range(refguess);
		sheets[next_n || n] = s;
		snames.push(next_n || n);
		if(!realnames.length) return { SheetNames: snames, Sheets: sheets };
		var osheets = {}, rnames = [];
		/* TODO: verify no collisions */
		for(var i = 0; i < realnames.length; ++i) if(sheets[snames[i]]) {
			rnames.push(realnames[i] || snames[i]);
			osheets[realnames[i]] = sheets[realnames[i]] || sheets[snames[i]];
		} else {
			rnames.push(realnames[i]);
			osheets[realnames[i]] = ({ "!ref": "A1" });
		}
		return { SheetNames: rnames, Sheets: osheets };
	}

	function sheet_to_wk1(ws/*:Worksheet*/, opts/*:WriteOpts*/) {
		var o = opts || {};
		if(+o.codepage >= 0) set_cp(+o.codepage);
		if(o.type == "string") throw new Error("Cannot write WK1 to JS string");
		var ba = buf_array();
		var range = safe_decode_range(ws["!ref"]);
		var dense = Array.isArray(ws);
		var cols = [];

		write_biff_rec(ba, 0x00, write_BOF_WK1(0x0406));
		write_biff_rec(ba, 0x06, write_RANGE(range));
		var max_R = Math.min(range.e.r, 8191);
		for(var R = range.s.r; R <= max_R; ++R) {
			var rr = encode_row(R);
			for(var C = range.s.c; C <= range.e.c; ++C) {
				if(R === range.s.r) cols[C] = encode_col(C);
				var ref = cols[C] + rr;
				var cell = dense ? (ws[R]||[])[C] : ws[ref];
				if(!cell || cell.t == "z") continue;
				/* TODO: formula records */
				if(cell.t == "n") {
					if((cell.v|0)==cell.v && cell.v >= -32768 && cell.v <= 32767) write_biff_rec(ba, 0x0d, write_INTEGER(R, C, cell.v));
					else write_biff_rec(ba, 0x0e, write_NUMBER(R, C, cell.v));
				} else {
					var str = format_cell(cell);
					write_biff_rec(ba, 0x0F, write_LABEL(R, C, str.slice(0, 239)));
				}
			}
		}

		write_biff_rec(ba, 0x01);
		return ba.end();
	}

	function book_to_wk3(wb/*:Workbook*/, opts/*:WriteOpts*/) {
		var o = opts || {};
		if(+o.codepage >= 0) set_cp(+o.codepage);
		if(o.type == "string") throw new Error("Cannot write WK3 to JS string");
		var ba = buf_array();

		write_biff_rec(ba, 0x00, write_BOF_WK3(wb));

		for(var i = 0, cnt = 0; i < wb.SheetNames.length; ++i) if((wb.Sheets[wb.SheetNames[i]] || {})["!ref"]) write_biff_rec(ba, 0x1b, write_XFORMAT_SHEETNAME(wb.SheetNames[i], cnt++));

		var wsidx = 0;
		for(i = 0; i < wb.SheetNames.length; ++i) {
			var ws = wb.Sheets[wb.SheetNames[i]];
			if(!ws || !ws["!ref"]) continue;
			var range = safe_decode_range(ws["!ref"]);
			var dense = Array.isArray(ws);
			var cols = [];
			var max_R = Math.min(range.e.r, 8191);
			for(var R = range.s.r; R <= max_R; ++R) {
				var rr = encode_row(R);
				for(var C = range.s.c; C <= range.e.c; ++C) {
					if(R === range.s.r) cols[C] = encode_col(C);
					var ref = cols[C] + rr;
					var cell = dense ? (ws[R]||[])[C] : ws[ref];
					if(!cell || cell.t == "z") continue;
					/* TODO: FORMULA19 NUMBER18 records */
					if(cell.t == "n") {
						write_biff_rec(ba, 0x17, write_NUMBER_17(R, C, wsidx, cell.v));
					} else {
						var str = format_cell(cell);
						/* TODO: max len? */
						write_biff_rec(ba, 0x16, write_LABEL_16(R, C, wsidx, str.slice(0, 239)));
					}
				}
			}
			++wsidx;
		}

		write_biff_rec(ba, 0x01);
		return ba.end();
	}


	function write_BOF_WK1(v/*:number*/) {
		var out = new_buf(2);
		out.write_shift(2, v);
		return out;
	}

	function write_BOF_WK3(wb/*:Workbook*/) {
		var out = new_buf(26);
		out.write_shift(2, 0x1000);
		out.write_shift(2, 0x0004);
		out.write_shift(4, 0x0000);
		var rows = 0, cols = 0, wscnt = 0;
		for(var i = 0; i < wb.SheetNames.length; ++i) {
			var name = wb.SheetNames[i];
			var ws = wb.Sheets[name];
			if(!ws || !ws["!ref"]) continue;
			++wscnt;
			var range = decode_range(ws["!ref"]);
			if(rows < range.e.r) rows = range.e.r;
			if(cols < range.e.c) cols = range.e.c;
		}
		if(rows > 8191) rows = 8191;
		out.write_shift(2, rows);
		out.write_shift(1, wscnt);
		out.write_shift(1, cols);
		out.write_shift(2, 0x00);
		out.write_shift(2, 0x00);
		out.write_shift(1, 0x01);
		out.write_shift(1, 0x02);
		out.write_shift(4, 0);
		out.write_shift(4, 0);
		return out;
	}

	function parse_RANGE(blob, length, opts) {
		var o = {s:{c:0,r:0},e:{c:0,r:0}};
		if(length == 8 && opts.qpro) {
			o.s.c = blob.read_shift(1);
			blob.l++;
			o.s.r = blob.read_shift(2);
			o.e.c = blob.read_shift(1);
			blob.l++;
			o.e.r = blob.read_shift(2);
			return o;
		}
		o.s.c = blob.read_shift(2);
		o.s.r = blob.read_shift(2);
		if(length == 12 && opts.qpro) blob.l += 2;
		o.e.c = blob.read_shift(2);
		o.e.r = blob.read_shift(2);
		if(length == 12 && opts.qpro) blob.l += 2;
		if(o.s.c == 0xFFFF) o.s.c = o.e.c = o.s.r = o.e.r = 0;
		return o;
	}
	function write_RANGE(range) {
		var out = new_buf(8);
		out.write_shift(2, range.s.c);
		out.write_shift(2, range.s.r);
		out.write_shift(2, range.e.c);
		out.write_shift(2, range.e.r);
		return out;
	}

	function parse_cell(blob, length, opts) {
		var o = [{c:0,r:0}, {t:'n',v:0}, 0, 0];
		if(opts.qpro && opts.vers != 0x5120) {
			o[0].c = blob.read_shift(1);
			o[3] = blob.read_shift(1);
			o[0].r = blob.read_shift(2);
			blob.l+=2;
		} else {
			o[2] = blob.read_shift(1);
			o[0].c = blob.read_shift(2); o[0].r = blob.read_shift(2);
		}
		return o;
	}

	function parse_LABEL(blob, length, opts) {
		var tgt = blob.l + length;
		var o = parse_cell(blob, length, opts);
		o[1].t = 's';
		if(opts.vers == 0x5120) {
			blob.l++;
			var len = blob.read_shift(1);
			o[1].v = blob.read_shift(len, 'utf8');
			return o;
		}
		if(opts.qpro) blob.l++;
		o[1].v = blob.read_shift(tgt - blob.l, 'cstr');
		return o;
	}
	function write_LABEL(R, C, s) {
		/* TODO: encoding */
		var o = new_buf(7 + s.length);
		o.write_shift(1, 0xFF);
		o.write_shift(2, C);
		o.write_shift(2, R);
		o.write_shift(1, 0x27); // ??
		for(var i = 0; i < o.length; ++i) {
			var cc = s.charCodeAt(i);
			o.write_shift(1, cc >= 0x80 ? 0x5F : cc);
		}
		o.write_shift(1, 0);
		return o;
	}

	function parse_INTEGER(blob, length, opts) {
		var o = parse_cell(blob, length, opts);
		o[1].v = blob.read_shift(2, 'i');
		return o;
	}
	function write_INTEGER(R, C, v) {
		var o = new_buf(7);
		o.write_shift(1, 0xFF);
		o.write_shift(2, C);
		o.write_shift(2, R);
		o.write_shift(2, v, 'i');
		return o;
	}

	function parse_NUMBER(blob, length, opts) {
		var o = parse_cell(blob, length, opts);
		o[1].v = blob.read_shift(8, 'f');
		return o;
	}
	function write_NUMBER(R, C, v) {
		var o = new_buf(13);
		o.write_shift(1, 0xFF);
		o.write_shift(2, C);
		o.write_shift(2, R);
		o.write_shift(8, v, 'f');
		return o;
	}

	function parse_FORMULA(blob, length, opts) {
		var tgt = blob.l + length;
		var o = parse_cell(blob, length, opts);
		/* TODO: formula */
		o[1].v = blob.read_shift(8, 'f');
		if(opts.qpro) blob.l = tgt;
		else {
			var flen = blob.read_shift(2);
			wk1_fmla_to_csf(blob.slice(blob.l, blob.l + flen), o);
			blob.l += flen;
		}
		return o;
	}

	function wk1_parse_rc(B, V, col) {
		var rel = V & 0x8000;
		V &= ~0x8000;
		V = (rel ? B : 0) + ((V >= 0x2000) ? V - 0x4000 : V);
		return (rel ? "" : "$") + (col ? encode_col(V) : encode_row(V));
	}
	/* var oprec = [
		8, 8, 8, 8, 8, 8, 8, 8, 6, 4, 4, 5, 5, 7, 3, 3,
		3, 3, 3, 3, 1, 1, 2, 6, 8, 8, 8, 8, 8, 8, 8, 8
	]; */
	/* TODO: flesh out */
	var FuncTab = {
		0x33: ["FALSE", 0],
		0x34: ["TRUE", 0],
		0x46: ["LEN", 1],
		0x50: ["SUM", 69],
		0x51: ["AVERAGEA", 69],
		0x52: ["COUNTA", 69],
		0x53: ["MINA", 69],
		0x54: ["MAXA", 69],
		0x6F: ["T", 1]
	};
	var BinOpTab = [
		  "",   "",   "",   "",   "",   "",   "",   "", // eslint-disable-line no-mixed-spaces-and-tabs
		  "",  "+",  "-",  "*",  "/",  "^",  "=", "<>", // eslint-disable-line no-mixed-spaces-and-tabs
		"<=", ">=",  "<",  ">",   "",   "",   "",   "", // eslint-disable-line no-mixed-spaces-and-tabs
		 "&",   "",   "",   "",   "",   "",   "",   ""  // eslint-disable-line no-mixed-spaces-and-tabs
	];

	function wk1_fmla_to_csf(blob, o) {
		prep_blob(blob, 0);
		var out = [], argc = 0, R = "", C = "", argL = "", argR = "";
		while(blob.l < blob.length) {
			var cc = blob[blob.l++];
			switch(cc) {
				case 0x00: out.push(blob.read_shift(8, 'f')); break;
				case 0x01: {
					C = wk1_parse_rc(o[0].c, blob.read_shift(2), true);
					R = wk1_parse_rc(o[0].r, blob.read_shift(2), false);
					out.push(C + R);
				} break;
				case 0x02: {
					var c = wk1_parse_rc(o[0].c, blob.read_shift(2), true);
					var r = wk1_parse_rc(o[0].r, blob.read_shift(2), false);
					C = wk1_parse_rc(o[0].c, blob.read_shift(2), true);
					R = wk1_parse_rc(o[0].r, blob.read_shift(2), false);
					out.push(c + r + ":" + C + R);
				} break;
				case 0x03:
					if(blob.l < blob.length) { console.error("WK1 premature formula end"); return; }
					break;
				case 0x04: out.push("(" + out.pop() + ")"); break;
				case 0x05: out.push(blob.read_shift(2)); break;
				case 0x06: {
					/* TODO: text encoding */
					var Z = ""; while((cc = blob[blob.l++])) Z += String.fromCharCode(cc);
					out.push('"' + Z.replace(/"/g, '""') + '"');
				} break;

				case 0x08: out.push("-" + out.pop()); break;
				case 0x17: out.push("+" + out.pop()); break;
				case 0x16: out.push("NOT(" + out.pop() + ")"); break;

				case 0x14: case 0x15: {
					argR = out.pop(); argL = out.pop();
					out.push(["AND", "OR"][cc - 0x14] + "(" + argL + "," + argR + ")");
				} break;

				default:
					if(cc < 0x20 && BinOpTab[cc]) {
						argR = out.pop(); argL = out.pop();
						out.push(argL + BinOpTab[cc] + argR);
					} else if(FuncTab[cc]) {
						argc = FuncTab[cc][1];
						if(argc == 69) argc = blob[blob.l++];
						if(argc > out.length) { console.error("WK1 bad formula parse 0x" + cc.toString(16) + ":|" + out.join("|") + "|"); return; }
						var args = out.slice(-argc);
						out.length -= argc;
						out.push(FuncTab[cc][0] + "(" + args.join(",") + ")");
					}
					else if(cc <= 0x07) return console.error("WK1 invalid opcode " + cc.toString(16));
					else if(cc <= 0x18) return console.error("WK1 unsupported op " + cc.toString(16));
					else if(cc <= 0x1E) return console.error("WK1 invalid opcode " + cc.toString(16));
					else if(cc <= 0x73) return console.error("WK1 unsupported function opcode " + cc.toString(16));
					// possible future functions ??
					else return console.error("WK1 unrecognized opcode " + cc.toString(16));
			}
		}
		if(out.length == 1) o[1].f = "" + out[0];
		else console.error("WK1 bad formula parse |" + out.join("|") + "|");
	}


	function parse_cell_3(blob/*::, length*/) {
		var o = [{c:0,r:0}, {t:'n',v:0}, 0];
		o[0].r = blob.read_shift(2); o[3] = blob[blob.l++]; o[0].c = blob[blob.l++];
		return o;
	}

	function parse_LABEL_16(blob, length) {
		var o = parse_cell_3(blob, length);
		o[1].t = 's';
		o[1].v = blob.read_shift(length - 4, 'cstr');
		return o;
	}
	function write_LABEL_16(R, C, wsidx, s) {
		/* TODO: encoding */
		var o = new_buf(6 + s.length);
		o.write_shift(2, R);
		o.write_shift(1, wsidx);
		o.write_shift(1, C);
		o.write_shift(1, 0x27);
		for(var i = 0; i < s.length; ++i) {
			var cc = s.charCodeAt(i);
			o.write_shift(1, cc >= 0x80 ? 0x5F : cc);
		}
		o.write_shift(1, 0);
		return o;
	}

	function parse_NUMBER_18(blob, length) {
		var o = parse_cell_3(blob, length);
		o[1].v = blob.read_shift(2);
		var v = o[1].v >> 1;
		if(o[1].v & 0x1) {
			switch(v & 0x07) {
				case 0: v = (v >> 3) * 5000; break;
				case 1: v = (v >> 3) * 500; break;
				case 2: v = (v >> 3) / 20; break;
				case 3: v = (v >> 3) / 200; break;
				case 4: v = (v >> 3) / 2000; break;
				case 5: v = (v >> 3) / 20000; break;
				case 6: v = (v >> 3) / 16; break;
				case 7: v = (v >> 3) / 64; break;
			}
		}
		o[1].v = v;
		return o;
	}

	function parse_NUMBER_17(blob, length) {
		var o = parse_cell_3(blob, length);
		var v1 = blob.read_shift(4);
		var v2 = blob.read_shift(4);
		var e = blob.read_shift(2);
		if(e == 0xFFFF) {
			if(v1 === 0 && v2 === 0xC0000000) { o[1].t = "e"; o[1].v = 0x0F; } // ERR -> #VALUE!
			else if(v1 === 0 && v2 === 0xD0000000) { o[1].t = "e"; o[1].v = 0x2A; } // NA -> #N/A
			else o[1].v = 0;
			return o;
		}
		var s = e & 0x8000; e = (e&0x7FFF) - 16446;
		o[1].v = (1 - s*2) * (v2 * Math.pow(2, e+32) + v1 * Math.pow(2, e));
		return o;
	}
	function write_NUMBER_17(R, C, wsidx, v) {
		var o = new_buf(14);
		o.write_shift(2, R);
		o.write_shift(1, wsidx);
		o.write_shift(1, C);
		if(v == 0) {
			o.write_shift(4, 0);
			o.write_shift(4, 0);
			o.write_shift(2, 0xFFFF);
			return o;
		}
		var s = 0, e = 0, v1 = 0, v2 = 0;
		if(v < 0) { s = 1; v = -v; }
		e = Math.log2(v) | 0;
		v /= Math.pow(2, e-31);
		v2 = (v)>>>0;
		if((v2&0x80000000) == 0) { v/=2; ++e; v2 = v >>> 0; }
		v -= v2;
		v2 |= 0x80000000;
		v2 >>>= 0;
		v *= Math.pow(2, 32);
		v1 = v>>>0;
		o.write_shift(4, v1);
		o.write_shift(4, v2);
		e += 0x3FFF + (s ? 0x8000 : 0);
		o.write_shift(2, e);
		return o;
	}

	function parse_FORMULA_19(blob, length) {
		var o = parse_NUMBER_17(blob, 14);
		blob.l += length - 14; /* TODO: WK3 formula */
		return o;
	}

	function parse_NUMBER_25(blob, length) {
		var o = parse_cell_3(blob, length);
		var v1 = blob.read_shift(4);
		o[1].v = v1 >> 6;
		return o;
	}

	function parse_NUMBER_27(blob, length) {
		var o = parse_cell_3(blob, length);
		var v1 = blob.read_shift(8,'f');
		o[1].v = v1;
		return o;
	}

	function parse_FORMULA_28(blob, length) {
		var o = parse_NUMBER_27(blob, 14);
		blob.l += length - 10; /* TODO: formula */
		return o;
	}

	function parse_SHEETNAMECS(blob, length) {
		return blob[blob.l + length - 1] == 0 ? blob.read_shift(length, 'cstr') : "";
	}

	function parse_SHEETNAMELP(blob, length) {
		var len = blob[blob.l++];
		if(len > length - 1) len = length - 1;
		var o = ""; while(o.length < len) o += String.fromCharCode(blob[blob.l++]);
		return o;
	}

	function parse_SHEETINFOQP(blob, length, opts) {
		if(!opts.qpro || length < 21) return;
		var id = blob.read_shift(1);
		blob.l += 17;
		blob.l += 1; //var len = blob.read_shift(1);
		blob.l += 2;
		var nm = blob.read_shift(length - 21, 'cstr');
		return [id, nm];
	}

	function parse_XFORMAT(blob, length) {
		var o = {}, tgt = blob.l + length;
		while(blob.l < tgt) {
			var dt = blob.read_shift(2);
			if(dt == 0x36b0) {
				o[dt] = [0, ""];
				o[dt][0] = blob.read_shift(2);
				while(blob[blob.l]) { o[dt][1] += String.fromCharCode(blob[blob.l]); blob.l++; } blob.l++;
			}
			// TODO: 0x3a99 ??
		}
		return o;
	}
	function write_XFORMAT_SHEETNAME(name, wsidx) {
		var out = new_buf(5 + name.length);
		out.write_shift(2, 0x36b0);
		out.write_shift(2, wsidx);
		for(var i = 0; i < name.length; ++i) {
			var cc = name.charCodeAt(i);
			out[out.l++] = cc > 0x7F ? 0x5F : cc;
		}
		out[out.l++] = 0;
		return out;
	}

	var WK1Enum = {
		/*::[*/0x0000/*::]*/: { n:"BOF", f:parseuint16 },
		/*::[*/0x0001/*::]*/: { n:"EOF" },
		/*::[*/0x0002/*::]*/: { n:"CALCMODE" },
		/*::[*/0x0003/*::]*/: { n:"CALCORDER" },
		/*::[*/0x0004/*::]*/: { n:"SPLIT" },
		/*::[*/0x0005/*::]*/: { n:"SYNC" },
		/*::[*/0x0006/*::]*/: { n:"RANGE", f:parse_RANGE },
		/*::[*/0x0007/*::]*/: { n:"WINDOW1" },
		/*::[*/0x0008/*::]*/: { n:"COLW1" },
		/*::[*/0x0009/*::]*/: { n:"WINTWO" },
		/*::[*/0x000A/*::]*/: { n:"COLW2" },
		/*::[*/0x000B/*::]*/: { n:"NAME" },
		/*::[*/0x000C/*::]*/: { n:"BLANK" },
		/*::[*/0x000D/*::]*/: { n:"INTEGER", f:parse_INTEGER },
		/*::[*/0x000E/*::]*/: { n:"NUMBER", f:parse_NUMBER },
		/*::[*/0x000F/*::]*/: { n:"LABEL", f:parse_LABEL },
		/*::[*/0x0010/*::]*/: { n:"FORMULA", f:parse_FORMULA },
		/*::[*/0x0018/*::]*/: { n:"TABLE" },
		/*::[*/0x0019/*::]*/: { n:"ORANGE" },
		/*::[*/0x001A/*::]*/: { n:"PRANGE" },
		/*::[*/0x001B/*::]*/: { n:"SRANGE" },
		/*::[*/0x001C/*::]*/: { n:"FRANGE" },
		/*::[*/0x001D/*::]*/: { n:"KRANGE1" },
		/*::[*/0x0020/*::]*/: { n:"HRANGE" },
		/*::[*/0x0023/*::]*/: { n:"KRANGE2" },
		/*::[*/0x0024/*::]*/: { n:"PROTEC" },
		/*::[*/0x0025/*::]*/: { n:"FOOTER" },
		/*::[*/0x0026/*::]*/: { n:"HEADER" },
		/*::[*/0x0027/*::]*/: { n:"SETUP" },
		/*::[*/0x0028/*::]*/: { n:"MARGINS" },
		/*::[*/0x0029/*::]*/: { n:"LABELFMT" },
		/*::[*/0x002A/*::]*/: { n:"TITLES" },
		/*::[*/0x002B/*::]*/: { n:"SHEETJS" },
		/*::[*/0x002D/*::]*/: { n:"GRAPH" },
		/*::[*/0x002E/*::]*/: { n:"NGRAPH" },
		/*::[*/0x002F/*::]*/: { n:"CALCCOUNT" },
		/*::[*/0x0030/*::]*/: { n:"UNFORMATTED" },
		/*::[*/0x0031/*::]*/: { n:"CURSORW12" },
		/*::[*/0x0032/*::]*/: { n:"WINDOW" },
		/*::[*/0x0033/*::]*/: { n:"STRING", f:parse_LABEL },
		/*::[*/0x0037/*::]*/: { n:"PASSWORD" },
		/*::[*/0x0038/*::]*/: { n:"LOCKED" },
		/*::[*/0x003C/*::]*/: { n:"QUERY" },
		/*::[*/0x003D/*::]*/: { n:"QUERYNAME" },
		/*::[*/0x003E/*::]*/: { n:"PRINT" },
		/*::[*/0x003F/*::]*/: { n:"PRINTNAME" },
		/*::[*/0x0040/*::]*/: { n:"GRAPH2" },
		/*::[*/0x0041/*::]*/: { n:"GRAPHNAME" },
		/*::[*/0x0042/*::]*/: { n:"ZOOM" },
		/*::[*/0x0043/*::]*/: { n:"SYMSPLIT" },
		/*::[*/0x0044/*::]*/: { n:"NSROWS" },
		/*::[*/0x0045/*::]*/: { n:"NSCOLS" },
		/*::[*/0x0046/*::]*/: { n:"RULER" },
		/*::[*/0x0047/*::]*/: { n:"NNAME" },
		/*::[*/0x0048/*::]*/: { n:"ACOMM" },
		/*::[*/0x0049/*::]*/: { n:"AMACRO" },
		/*::[*/0x004A/*::]*/: { n:"PARSE" },
		/*::[*/0x0066/*::]*/: { n:"PRANGES??" },
		/*::[*/0x0067/*::]*/: { n:"RRANGES??" },
		/*::[*/0x0068/*::]*/: { n:"FNAME??" },
		/*::[*/0x0069/*::]*/: { n:"MRANGES??" },
		/*::[*/0x00CC/*::]*/: { n:"SHEETNAMECS", f:parse_SHEETNAMECS },
		/*::[*/0x00DE/*::]*/: { n:"SHEETNAMELP", f:parse_SHEETNAMELP },
		/*::[*/0xFFFF/*::]*/: { n:"" }
	};

	var WK3Enum = {
		/*::[*/0x0000/*::]*/: { n:"BOF" },
		/*::[*/0x0001/*::]*/: { n:"EOF" },
		/*::[*/0x0002/*::]*/: { n:"PASSWORD" },
		/*::[*/0x0003/*::]*/: { n:"CALCSET" },
		/*::[*/0x0004/*::]*/: { n:"WINDOWSET" },
		/*::[*/0x0005/*::]*/: { n:"SHEETCELLPTR" },
		/*::[*/0x0006/*::]*/: { n:"SHEETLAYOUT" },
		/*::[*/0x0007/*::]*/: { n:"COLUMNWIDTH" },
		/*::[*/0x0008/*::]*/: { n:"HIDDENCOLUMN" },
		/*::[*/0x0009/*::]*/: { n:"USERRANGE" },
		/*::[*/0x000A/*::]*/: { n:"SYSTEMRANGE" },
		/*::[*/0x000B/*::]*/: { n:"ZEROFORCE" },
		/*::[*/0x000C/*::]*/: { n:"SORTKEYDIR" },
		/*::[*/0x000D/*::]*/: { n:"FILESEAL" },
		/*::[*/0x000E/*::]*/: { n:"DATAFILLNUMS" },
		/*::[*/0x000F/*::]*/: { n:"PRINTMAIN" },
		/*::[*/0x0010/*::]*/: { n:"PRINTSTRING" },
		/*::[*/0x0011/*::]*/: { n:"GRAPHMAIN" },
		/*::[*/0x0012/*::]*/: { n:"GRAPHSTRING" },
		/*::[*/0x0013/*::]*/: { n:"??" },
		/*::[*/0x0014/*::]*/: { n:"ERRCELL" },
		/*::[*/0x0015/*::]*/: { n:"NACELL" },
		/*::[*/0x0016/*::]*/: { n:"LABEL16", f:parse_LABEL_16},
		/*::[*/0x0017/*::]*/: { n:"NUMBER17", f:parse_NUMBER_17 },
		/*::[*/0x0018/*::]*/: { n:"NUMBER18", f:parse_NUMBER_18 },
		/*::[*/0x0019/*::]*/: { n:"FORMULA19", f:parse_FORMULA_19},
		/*::[*/0x001A/*::]*/: { n:"FORMULA1A" },
		/*::[*/0x001B/*::]*/: { n:"XFORMAT", f:parse_XFORMAT },
		/*::[*/0x001C/*::]*/: { n:"DTLABELMISC" },
		/*::[*/0x001D/*::]*/: { n:"DTLABELCELL" },
		/*::[*/0x001E/*::]*/: { n:"GRAPHWINDOW" },
		/*::[*/0x001F/*::]*/: { n:"CPA" },
		/*::[*/0x0020/*::]*/: { n:"LPLAUTO" },
		/*::[*/0x0021/*::]*/: { n:"QUERY" },
		/*::[*/0x0022/*::]*/: { n:"HIDDENSHEET" },
		/*::[*/0x0023/*::]*/: { n:"??" },
		/*::[*/0x0025/*::]*/: { n:"NUMBER25", f:parse_NUMBER_25 },
		/*::[*/0x0026/*::]*/: { n:"??" },
		/*::[*/0x0027/*::]*/: { n:"NUMBER27", f:parse_NUMBER_27 },
		/*::[*/0x0028/*::]*/: { n:"FORMULA28", f:parse_FORMULA_28 },
		/*::[*/0x008E/*::]*/: { n:"??" },
		/*::[*/0x0093/*::]*/: { n:"??" },
		/*::[*/0x0096/*::]*/: { n:"??" },
		/*::[*/0x0097/*::]*/: { n:"??" },
		/*::[*/0x0098/*::]*/: { n:"??" },
		/*::[*/0x0099/*::]*/: { n:"??" },
		/*::[*/0x009A/*::]*/: { n:"??" },
		/*::[*/0x009B/*::]*/: { n:"??" },
		/*::[*/0x009C/*::]*/: { n:"??" },
		/*::[*/0x00A3/*::]*/: { n:"??" },
		/*::[*/0x00AE/*::]*/: { n:"??" },
		/*::[*/0x00AF/*::]*/: { n:"??" },
		/*::[*/0x00B0/*::]*/: { n:"??" },
		/*::[*/0x00B1/*::]*/: { n:"??" },
		/*::[*/0x00B8/*::]*/: { n:"??" },
		/*::[*/0x00B9/*::]*/: { n:"??" },
		/*::[*/0x00BA/*::]*/: { n:"??" },
		/*::[*/0x00BB/*::]*/: { n:"??" },
		/*::[*/0x00BC/*::]*/: { n:"??" },
		/*::[*/0x00C3/*::]*/: { n:"??" },
		/*::[*/0x00C9/*::]*/: { n:"??" },
		/*::[*/0x00CC/*::]*/: { n:"SHEETNAMECS", f:parse_SHEETNAMECS },
		/*::[*/0x00CD/*::]*/: { n:"??" },
		/*::[*/0x00CE/*::]*/: { n:"??" },
		/*::[*/0x00CF/*::]*/: { n:"??" },
		/*::[*/0x00D0/*::]*/: { n:"??" },
		/*::[*/0x0100/*::]*/: { n:"??" },
		/*::[*/0x0103/*::]*/: { n:"??" },
		/*::[*/0x0104/*::]*/: { n:"??" },
		/*::[*/0x0105/*::]*/: { n:"??" },
		/*::[*/0x0106/*::]*/: { n:"??" },
		/*::[*/0x0107/*::]*/: { n:"??" },
		/*::[*/0x0109/*::]*/: { n:"??" },
		/*::[*/0x010A/*::]*/: { n:"??" },
		/*::[*/0x010B/*::]*/: { n:"??" },
		/*::[*/0x010C/*::]*/: { n:"??" },
		/*::[*/0x010E/*::]*/: { n:"??" },
		/*::[*/0x010F/*::]*/: { n:"??" },
		/*::[*/0x0180/*::]*/: { n:"??" },
		/*::[*/0x0185/*::]*/: { n:"??" },
		/*::[*/0x0186/*::]*/: { n:"??" },
		/*::[*/0x0189/*::]*/: { n:"??" },
		/*::[*/0x018C/*::]*/: { n:"??" },
		/*::[*/0x0200/*::]*/: { n:"??" },
		/*::[*/0x0202/*::]*/: { n:"??" },
		/*::[*/0x0201/*::]*/: { n:"??" },
		/*::[*/0x0204/*::]*/: { n:"??" },
		/*::[*/0x0205/*::]*/: { n:"??" },
		/*::[*/0x0280/*::]*/: { n:"??" },
		/*::[*/0x0281/*::]*/: { n:"??" },
		/*::[*/0x0282/*::]*/: { n:"??" },
		/*::[*/0x0283/*::]*/: { n:"??" },
		/*::[*/0x0284/*::]*/: { n:"??" },
		/*::[*/0x0285/*::]*/: { n:"??" },
		/*::[*/0x0286/*::]*/: { n:"??" },
		/*::[*/0x0287/*::]*/: { n:"??" },
		/*::[*/0x0288/*::]*/: { n:"??" },
		/*::[*/0x0292/*::]*/: { n:"??" },
		/*::[*/0x0293/*::]*/: { n:"??" },
		/*::[*/0x0294/*::]*/: { n:"??" },
		/*::[*/0x0295/*::]*/: { n:"??" },
		/*::[*/0x0296/*::]*/: { n:"??" },
		/*::[*/0x0299/*::]*/: { n:"??" },
		/*::[*/0x029A/*::]*/: { n:"??" },
		/*::[*/0x0300/*::]*/: { n:"??" },
		/*::[*/0x0304/*::]*/: { n:"??" },
		/*::[*/0x0601/*::]*/: { n:"SHEETINFOQP", f:parse_SHEETINFOQP },
		/*::[*/0x0640/*::]*/: { n:"??" },
		/*::[*/0x0642/*::]*/: { n:"??" },
		/*::[*/0x0701/*::]*/: { n:"??" },
		/*::[*/0x0702/*::]*/: { n:"??" },
		/*::[*/0x0703/*::]*/: { n:"??" },
		/*::[*/0x0704/*::]*/: { n:"??" },
		/*::[*/0x0780/*::]*/: { n:"??" },
		/*::[*/0x0800/*::]*/: { n:"??" },
		/*::[*/0x0801/*::]*/: { n:"??" },
		/*::[*/0x0804/*::]*/: { n:"??" },
		/*::[*/0x0A80/*::]*/: { n:"??" },
		/*::[*/0x2AF6/*::]*/: { n:"??" },
		/*::[*/0x3231/*::]*/: { n:"??" },
		/*::[*/0x6E49/*::]*/: { n:"??" },
		/*::[*/0x6F44/*::]*/: { n:"??" },
		/*::[*/0xFFFF/*::]*/: { n:"" }
	};
	return {
		sheet_to_wk1: sheet_to_wk1,
		book_to_wk3: book_to_wk3,
		to_workbook: lotus_to_workbook
	};
})();
/* 18.4.7 rPr CT_RPrElt */
function parse_rpr(rpr) {
	var font = {}, m = rpr.match(tagregex), i = 0;
	var pass = false;
	if(m) for(;i!=m.length; ++i) {
		var y = parsexmltag(m[i]);
		switch(y[0].replace(/\w*:/g,"")) {
			/* 18.8.12 condense CT_BooleanProperty */
			/* ** not required . */
			case '<condense': break;
			/* 18.8.17 extend CT_BooleanProperty */
			/* ** not required . */
			case '<extend': break;
			/* 18.8.36 shadow CT_BooleanProperty */
			/* ** not required . */
			case '<shadow':
				if(!y.val) break;
				/* falls through */
			case '<shadow>':
			case '<shadow/>': font.shadow = 1; break;
			case '</shadow>': break;

			/* 18.4.1 charset CT_IntProperty TODO */
			case '<charset':
				if(y.val == '1') break;
				font.cp = CS2CP[parseInt(y.val, 10)];
				break;

			/* 18.4.2 outline CT_BooleanProperty TODO */
			case '<outline':
				if(!y.val) break;
				/* falls through */
			case '<outline>':
			case '<outline/>': font.outline = 1; break;
			case '</outline>': break;

			/* 18.4.5 rFont CT_FontName */
			case '<rFont': font.name = y.val; break;

			/* 18.4.11 sz CT_FontSize */
			case '<sz': font.sz = y.val; break;

			/* 18.4.10 strike CT_BooleanProperty */
			case '<strike':
				if(!y.val) break;
				/* falls through */
			case '<strike>':
			case '<strike/>': font.strike = 1; break;
			case '</strike>': break;

			/* 18.4.13 u CT_UnderlineProperty */
			case '<u':
				if(!y.val) break;
				switch(y.val) {
					case 'double': font.uval = "double"; break;
					case 'singleAccounting': font.uval = "single-accounting"; break;
					case 'doubleAccounting': font.uval = "double-accounting"; break;
				}
				/* falls through */
			case '<u>':
			case '<u/>': font.u = 1; break;
			case '</u>': break;

			/* 18.8.2 b */
			case '<b':
				if(y.val == '0') break;
				/* falls through */
			case '<b>':
			case '<b/>': font.b = 1; break;
			case '</b>': break;

			/* 18.8.26 i */
			case '<i':
				if(y.val == '0') break;
				/* falls through */
			case '<i>':
			case '<i/>': font.i = 1; break;
			case '</i>': break;

			/* 18.3.1.15 color CT_Color TODO: tint, theme, auto, indexed */
			case '<color':
				if(y.rgb) font.color = y.rgb.slice(2,8);
				break;
			case '<color>': case '<color/>': case '</color>': break;

			/* 18.8.18 family ST_FontFamily */
			case '<family': font.family = y.val; break;
			case '<family>': case '<family/>': case '</family>': break;

			/* 18.4.14 vertAlign CT_VerticalAlignFontProperty TODO */
			case '<vertAlign': font.valign = y.val; break;
			case '<vertAlign>': case '<vertAlign/>': case '</vertAlign>': break;

			/* 18.8.35 scheme CT_FontScheme TODO */
			case '<scheme': break;
			case '<scheme>': case '<scheme/>': case '</scheme>': break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': break;
			case '<ext': pass = true; break;
			case '</ext>': pass = false; break;
			default:
				if(y[0].charCodeAt(1) !== 47 && !pass) throw new Error('Unrecognized rich format ' + y[0]);
		}
	}
	return font;
}

var parse_rs = /*#__PURE__*/(function() {
	var tregex = matchtag("t"), rpregex = matchtag("rPr");
	/* 18.4.4 r CT_RElt */
	function parse_r(r) {
		/* 18.4.12 t ST_Xstring */
		var t = r.match(tregex)/*, cp = 65001*/;
		if(!t) return {t:"s", v:""};

		var o/*:Cell*/ = ({t:'s', v:unescapexml(t[1])}/*:any*/);
		var rpr = r.match(rpregex);
		if(rpr) o.s = parse_rpr(rpr[1]);
		return o;
	}
	var rregex = /<(?:\w+:)?r>/g, rend = /<\/(?:\w+:)?r>/;
	return function parse_rs(rs) {
		return rs.replace(rregex,"").split(rend).map(parse_r).filter(function(r) { return r.v; });
	};
})();


/* Parse a list of <r> tags */
var rs_to_html = /*#__PURE__*/(function parse_rs_factory() {
	var nlregex = /(\r\n|\n)/g;
	function parse_rpr2(font, intro, outro) {
		var style/*:Array<string>*/ = [];

		if(font.u) style.push("text-decoration: underline;");
		if(font.uval) style.push("text-underline-style:" + font.uval + ";");
		if(font.sz) style.push("font-size:" + font.sz + "pt;");
		if(font.outline) style.push("text-effect: outline;");
		if(font.shadow) style.push("text-shadow: auto;");
		intro.push('<span style="' + style.join("") + '">');

		if(font.b) { intro.push("<b>"); outro.push("</b>"); }
		if(font.i) { intro.push("<i>"); outro.push("</i>"); }
		if(font.strike) { intro.push("<s>"); outro.push("</s>"); }

		var align = font.valign || "";
		if(align == "superscript" || align == "super") align = "sup";
		else if(align == "subscript") align = "sub";
		if(align != "") { intro.push("<" + align + ">"); outro.push("</" + align + ">"); }

		outro.push("</span>");
		return font;
	}

	/* 18.4.4 r CT_RElt */
	function r_to_html(r) {
		var terms/*:[Array<string>, string, Array<string>]*/ = [[],r.v,[]];
		if(!r.v) return "";

		if(r.s) parse_rpr2(r.s, terms[0], terms[2]);

		return terms[0].join("") + terms[1].replace(nlregex,'<br/>') + terms[2].join("");
	}

	return function parse_rs(rs) {
		return rs.map(r_to_html).join("");
	};
})();

/* 18.4.8 si CT_Rst */
var sitregex = /<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g, sirregex = /<(?:\w+:)?r>/;
var sirphregex = /<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;
function parse_si(x, opts) {
	var html = opts ? opts.cellHTML : true;
	var z = {};
	if(!x) return { t: "" };
	//var y;
	/* 18.4.12 t ST_Xstring (Plaintext String) */
	// TODO: is whitespace actually valid here?
	if(x.match(/^\s*<(?:\w+:)?t[^>]*>/)) {
		z.t = unescapexml(utf8read(x.slice(x.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||""));
		z.r = utf8read(x);
		if(html) z.h = escapehtml(z.t);
	}
	/* 18.4.4 r CT_RElt (Rich Text Run) */
	else if((/*y = */x.match(sirregex))) {
		z.r = utf8read(x);
		z.t = unescapexml(utf8read((x.replace(sirphregex, '').match(sitregex)||[]).join("").replace(tagregex,"")));
		if(html) z.h = rs_to_html(parse_rs(z.r));
	}
	/* 18.4.3 phoneticPr CT_PhoneticPr (TODO: needed for Asian support) */
	/* 18.4.6 rPh CT_PhoneticRun (TODO: needed for Asian support) */
	return z;
}

/* 18.4 Shared String Table */
var sstr0 = /<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/;
var sstr1 = /<(?:\w+:)?(?:si|sstItem)>/g;
var sstr2 = /<\/(?:\w+:)?(?:si|sstItem)>/;
function parse_sst_xml(data/*:string*/, opts)/*:SST*/ {
	var s/*:SST*/ = ([]/*:any*/), ss = "";
	if(!data) return s;
	/* 18.4.9 sst CT_Sst */
	var sst = data.match(sstr0);
	if(sst) {
		ss = sst[2].replace(sstr1,"").split(sstr2);
		for(var i = 0; i != ss.length; ++i) {
			var o = parse_si(ss[i].trim(), opts);
			if(o != null) s[s.length] = o;
		}
		sst = parsexmltag(sst[1]); s.Count = sst.count; s.Unique = sst.uniqueCount;
	}
	return s;
}

var straywsregex = /^\s|\s$|[\t\n\r]/;
function write_sst_xml(sst/*:SST*/, opts)/*:string*/ {
	if(!opts.bookSST) return "";
	var o = [XML_HEADER];
	o[o.length] = (writextag('sst', null, {
		xmlns: XMLNS_main[0],
		count: sst.Count,
		uniqueCount: sst.Unique
	}));
	for(var i = 0; i != sst.length; ++i) { if(sst[i] == null) continue;
		var s/*:XLString*/ = sst[i];
		var sitag = "<si>";
		if(s.r) sitag += s.r;
		else {
			sitag += "<t";
			if(!s.t) s.t = "";
			if(s.t.match(straywsregex)) sitag += ' xml:space="preserve"';
			sitag += ">" + escapexml(s.t) + "</t>";
		}
		sitag += "</si>";
		o[o.length] = (sitag);
	}
	if(o.length>2){ o[o.length] = ('</sst>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* [MS-XLSB] 2.4.221 BrtBeginSst */
function parse_BrtBeginSst(data) {
	return [data.read_shift(4), data.read_shift(4)];
}

/* [MS-XLSB] 2.1.7.45 Shared Strings */
function parse_sst_bin(data, opts)/*:SST*/ {
	var s/*:SST*/ = ([]/*:any*/);
	var pass = false;
	recordhopper(data, function hopper_sst(val, R, RT) {
		switch(RT) {
			case 0x009F: /* BrtBeginSst */
				s.Count = val[0]; s.Unique = val[1]; break;
			case 0x0013: /* BrtSSTItem */
				s.push(val); break;
			case 0x00A0: /* BrtEndSst */
				return true;

			case 0x0023: /* BrtFRTBegin */
				pass = true; break;
			case 0x0024: /* BrtFRTEnd */
				pass = false; break;

			default:
				if(R.T){}
				if(!pass || opts.WTF) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	});
	return s;
}

function write_BrtBeginSst(sst, o) {
	if(!o) o = new_buf(8);
	o.write_shift(4, sst.Count);
	o.write_shift(4, sst.Unique);
	return o;
}

var write_BrtSSTItem = write_RichStr;

function write_sst_bin(sst/*::, opts*/) {
	var ba = buf_array();
	write_record(ba, 0x009F /* BrtBeginSst */, write_BrtBeginSst(sst));
	for(var i = 0; i < sst.length; ++i) write_record(ba, 0x0013 /* BrtSSTItem */, write_BrtSSTItem(sst[i]));
	/* FRTSST */
	write_record(ba, 0x00A0 /* BrtEndSst */);
	return ba.end();
}
function _JS2ANSI(str/*:string*/)/*:Array<number>*/ {
	if(typeof $cptable !== 'undefined') return $cptable.utils.encode(current_ansi, str);
	var o/*:Array<number>*/ = [], oo = str.split("");
	for(var i = 0; i < oo.length; ++i) o[i] = oo[i].charCodeAt(0);
	return o;
}

/* [MS-OFFCRYPTO] 2.1.4 Version */
function parse_CRYPTOVersion(blob, length/*:?number*/) {
	var o/*:any*/ = {};
	o.Major = blob.read_shift(2);
	o.Minor = blob.read_shift(2);
	/*:: if(length == null) return o; */
	if(length >= 4) blob.l += length - 4;
	return o;
}

/* [MS-OFFCRYPTO] 2.1.5 DataSpaceVersionInfo */
function parse_DataSpaceVersionInfo(blob) {
	var o = {};
	o.id = blob.read_shift(0, 'lpp4');
	o.R = parse_CRYPTOVersion(blob, 4);
	o.U = parse_CRYPTOVersion(blob, 4);
	o.W = parse_CRYPTOVersion(blob, 4);
	return o;
}

/* [MS-OFFCRYPTO] 2.1.6.1 DataSpaceMapEntry Structure */
function parse_DataSpaceMapEntry(blob) {
	var len = blob.read_shift(4);
	var end = blob.l + len - 4;
	var o = {};
	var cnt = blob.read_shift(4);
	var comps/*:Array<{t:number, v:string}>*/ = [];
	/* [MS-OFFCRYPTO] 2.1.6.2 DataSpaceReferenceComponent Structure */
	while(cnt-- > 0) comps.push({ t: blob.read_shift(4), v: blob.read_shift(0, 'lpp4') });
	o.name = blob.read_shift(0, 'lpp4');
	o.comps = comps;
	if(blob.l != end) throw new Error("Bad DataSpaceMapEntry: " + blob.l + " != " + end);
	return o;
}

/* [MS-OFFCRYPTO] 2.1.6 DataSpaceMap */
function parse_DataSpaceMap(blob) {
	var o = [];
	blob.l += 4; // must be 0x8
	var cnt = blob.read_shift(4);
	while(cnt-- > 0) o.push(parse_DataSpaceMapEntry(blob));
	return o;
}

/* [MS-OFFCRYPTO] 2.1.7 DataSpaceDefinition */
function parse_DataSpaceDefinition(blob)/*:Array<string>*/ {
	var o/*:Array<string>*/ = [];
	blob.l += 4; // must be 0x8
	var cnt = blob.read_shift(4);
	while(cnt-- > 0) o.push(blob.read_shift(0, 'lpp4'));
	return o;
}

/* [MS-OFFCRYPTO] 2.1.8 DataSpaceDefinition */
function parse_TransformInfoHeader(blob) {
	var o = {};
	/*var len = */blob.read_shift(4);
	blob.l += 4; // must be 0x1
	o.id = blob.read_shift(0, 'lpp4');
	o.name = blob.read_shift(0, 'lpp4');
	o.R = parse_CRYPTOVersion(blob, 4);
	o.U = parse_CRYPTOVersion(blob, 4);
	o.W = parse_CRYPTOVersion(blob, 4);
	return o;
}

function parse_Primary(blob) {
	/* [MS-OFFCRYPTO] 2.2.6 IRMDSTransformInfo */
	var hdr = parse_TransformInfoHeader(blob);
	/* [MS-OFFCRYPTO] 2.1.9 EncryptionTransformInfo */
	hdr.ename = blob.read_shift(0, '8lpp4');
	hdr.blksz = blob.read_shift(4);
	hdr.cmode = blob.read_shift(4);
	if(blob.read_shift(4) != 0x04) throw new Error("Bad !Primary record");
	return hdr;
}

/* [MS-OFFCRYPTO] 2.3.2 Encryption Header */
function parse_EncryptionHeader(blob, length/*:number*/) {
	var tgt = blob.l + length;
	var o = {};
	o.Flags = (blob.read_shift(4) & 0x3F);
	blob.l += 4;
	o.AlgID = blob.read_shift(4);
	var valid = false;
	switch(o.AlgID) {
		case 0x660E: case 0x660F: case 0x6610: valid = (o.Flags == 0x24); break;
		case 0x6801: valid = (o.Flags == 0x04); break;
		case 0: valid = (o.Flags == 0x10 || o.Flags == 0x04 || o.Flags == 0x24); break;
		default: throw 'Unrecognized encryption algorithm: ' + o.AlgID;
	}
	if(!valid) throw new Error("Encryption Flags/AlgID mismatch");
	o.AlgIDHash = blob.read_shift(4);
	o.KeySize = blob.read_shift(4);
	o.ProviderType = blob.read_shift(4);
	blob.l += 8;
	o.CSPName = blob.read_shift((tgt-blob.l)>>1, 'utf16le');
	blob.l = tgt;
	return o;
}

/* [MS-OFFCRYPTO] 2.3.3 Encryption Verifier */
function parse_EncryptionVerifier(blob, length/*:number*/) {
	var o = {}, tgt = blob.l + length;
	blob.l += 4; // SaltSize must be 0x10
	o.Salt = blob.slice(blob.l, blob.l+16); blob.l += 16;
	o.Verifier = blob.slice(blob.l, blob.l+16); blob.l += 16;
	/*var sz = */blob.read_shift(4);
	o.VerifierHash = blob.slice(blob.l, tgt); blob.l = tgt;
	return o;
}

/* [MS-OFFCRYPTO] 2.3.4.* EncryptionInfo Stream */
function parse_EncryptionInfo(blob) {
	var vers = parse_CRYPTOVersion(blob);
	switch(vers.Minor) {
		case 0x02: return [vers.Minor, parse_EncInfoStd(blob, vers)];
		case 0x03: return [vers.Minor, parse_EncInfoExt(blob, vers)];
		case 0x04: return [vers.Minor, parse_EncInfoAgl(blob, vers)];
	}
	throw new Error("ECMA-376 Encrypted file unrecognized Version: " + vers.Minor);
}

/* [MS-OFFCRYPTO] 2.3.4.5  EncryptionInfo Stream (Standard Encryption) */
function parse_EncInfoStd(blob/*::, vers*/) {
	var flags = blob.read_shift(4);
	if((flags & 0x3F) != 0x24) throw new Error("EncryptionInfo mismatch");
	var sz = blob.read_shift(4);
	//var tgt = blob.l + sz;
	var hdr = parse_EncryptionHeader(blob, sz);
	var verifier = parse_EncryptionVerifier(blob, blob.length - blob.l);
	return { t:"Std", h:hdr, v:verifier };
}
/* [MS-OFFCRYPTO] 2.3.4.6  EncryptionInfo Stream (Extensible Encryption) */
function parse_EncInfoExt(/*::blob, vers*/) { throw new Error("File is password-protected: ECMA-376 Extensible"); }
/* [MS-OFFCRYPTO] 2.3.4.10 EncryptionInfo Stream (Agile Encryption) */
function parse_EncInfoAgl(blob/*::, vers*/) {
	var KeyData = ["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];
	blob.l+=4;
	var xml = blob.read_shift(blob.length - blob.l, 'utf8');
	var o = {};
	xml.replace(tagregex, function xml_agile(x) {
		var y/*:any*/ = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<?xml': break;
			case '<encryption': case '</encryption>': break;
			case '<keyData': KeyData.forEach(function(k) { o[k] = y[k]; }); break;
			case '<dataIntegrity': o.encryptedHmacKey = y.encryptedHmacKey; o.encryptedHmacValue = y.encryptedHmacValue; break;
			case '<keyEncryptors>': case '<keyEncryptors': o.encs = []; break;
			case '</keyEncryptors>': break;

			case '<keyEncryptor': o.uri = y.uri; break;
			case '</keyEncryptor>': break;
			case '<encryptedKey': o.encs.push(y); break;
			default: throw y[0];
		}
	});
	return o;
}

/* [MS-OFFCRYPTO] 2.3.5.1 RC4 CryptoAPI Encryption Header */
function parse_RC4CryptoHeader(blob, length/*:number*/) {
	var o = {};
	var vers = o.EncryptionVersionInfo = parse_CRYPTOVersion(blob, 4); length -= 4;
	if(vers.Minor != 2) throw new Error('unrecognized minor version code: ' + vers.Minor);
	if(vers.Major > 4 || vers.Major < 2) throw new Error('unrecognized major version code: ' + vers.Major);
	o.Flags = blob.read_shift(4); length -= 4;
	var sz = blob.read_shift(4); length -= 4;
	o.EncryptionHeader = parse_EncryptionHeader(blob, sz); length -= sz;
	o.EncryptionVerifier = parse_EncryptionVerifier(blob, length);
	return o;
}
/* [MS-OFFCRYPTO] 2.3.6.1 RC4 Encryption Header */
function parse_RC4Header(blob/*::, length*/) {
	var o = {};
	var vers = o.EncryptionVersionInfo = parse_CRYPTOVersion(blob, 4);
	if(vers.Major != 1 || vers.Minor != 1) throw 'unrecognized version code ' + vers.Major + ' : ' + vers.Minor;
	o.Salt = blob.read_shift(16);
	o.EncryptedVerifier = blob.read_shift(16);
	o.EncryptedVerifierHash = blob.read_shift(16);
	return o;
}

/* [MS-OFFCRYPTO] 2.3.7.1 Binary Document Password Verifier Derivation */
function crypto_CreatePasswordVerifier_Method1(Password/*:string*/) {
	var Verifier = 0x0000, PasswordArray;
	var PasswordDecoded = _JS2ANSI(Password);
	var len = PasswordDecoded.length + 1, i, PasswordByte;
	var Intermediate1, Intermediate2, Intermediate3;
	PasswordArray = new_raw_buf(len);
	PasswordArray[0] = PasswordDecoded.length;
	for(i = 1; i != len; ++i) PasswordArray[i] = PasswordDecoded[i-1];
	for(i = len-1; i >= 0; --i) {
		PasswordByte = PasswordArray[i];
		Intermediate1 = ((Verifier & 0x4000) === 0x0000) ? 0 : 1;
		Intermediate2 = (Verifier << 1) & 0x7FFF;
		Intermediate3 = Intermediate1 | Intermediate2;
		Verifier = Intermediate3 ^ PasswordByte;
	}
	return Verifier ^ 0xCE4B;
}

/* [MS-OFFCRYPTO] 2.3.7.2 Binary Document XOR Array Initialization */
var crypto_CreateXorArray_Method1 = /*#__PURE__*/(function() {
	var PadArray = [0xBB, 0xFF, 0xFF, 0xBA, 0xFF, 0xFF, 0xB9, 0x80, 0x00, 0xBE, 0x0F, 0x00, 0xBF, 0x0F, 0x00];
	var InitialCode = [0xE1F0, 0x1D0F, 0xCC9C, 0x84C0, 0x110C, 0x0E10, 0xF1CE, 0x313E, 0x1872, 0xE139, 0xD40F, 0x84F9, 0x280C, 0xA96A, 0x4EC3];
	var XorMatrix = [0xAEFC, 0x4DD9, 0x9BB2, 0x2745, 0x4E8A, 0x9D14, 0x2A09, 0x7B61, 0xF6C2, 0xFDA5, 0xEB6B, 0xC6F7, 0x9DCF, 0x2BBF, 0x4563, 0x8AC6, 0x05AD, 0x0B5A, 0x16B4, 0x2D68, 0x5AD0, 0x0375, 0x06EA, 0x0DD4, 0x1BA8, 0x3750, 0x6EA0, 0xDD40, 0xD849, 0xA0B3, 0x5147, 0xA28E, 0x553D, 0xAA7A, 0x44D5, 0x6F45, 0xDE8A, 0xAD35, 0x4A4B, 0x9496, 0x390D, 0x721A, 0xEB23, 0xC667, 0x9CEF, 0x29FF, 0x53FE, 0xA7FC, 0x5FD9, 0x47D3, 0x8FA6, 0x0F6D, 0x1EDA, 0x3DB4, 0x7B68, 0xF6D0, 0xB861, 0x60E3, 0xC1C6, 0x93AD, 0x377B, 0x6EF6, 0xDDEC, 0x45A0, 0x8B40, 0x06A1, 0x0D42, 0x1A84, 0x3508, 0x6A10, 0xAA51, 0x4483, 0x8906, 0x022D, 0x045A, 0x08B4, 0x1168, 0x76B4, 0xED68, 0xCAF1, 0x85C3, 0x1BA7, 0x374E, 0x6E9C, 0x3730, 0x6E60, 0xDCC0, 0xA9A1, 0x4363, 0x86C6, 0x1DAD, 0x3331, 0x6662, 0xCCC4, 0x89A9, 0x0373, 0x06E6, 0x0DCC, 0x1021, 0x2042, 0x4084, 0x8108, 0x1231, 0x2462, 0x48C4];
	var Ror = function(Byte) { return ((Byte/2) | (Byte*128)) & 0xFF; };
	var XorRor = function(byte1, byte2) { return Ror(byte1 ^ byte2); };
	var CreateXorKey_Method1 = function(Password) {
		var XorKey = InitialCode[Password.length - 1];
		var CurrentElement = 0x68;
		for(var i = Password.length-1; i >= 0; --i) {
			var Char = Password[i];
			for(var j = 0; j != 7; ++j) {
				if(Char & 0x40) XorKey ^= XorMatrix[CurrentElement];
				Char *= 2; --CurrentElement;
			}
		}
		return XorKey;
	};
	return function(password/*:string*/) {
		var Password = _JS2ANSI(password);
		var XorKey = CreateXorKey_Method1(Password);
		var Index = Password.length;
		var ObfuscationArray = new_raw_buf(16);
		for(var i = 0; i != 16; ++i) ObfuscationArray[i] = 0x00;
		var Temp, PasswordLastChar, PadIndex;
		if((Index & 1) === 1) {
			Temp = XorKey >> 8;
			ObfuscationArray[Index] = XorRor(PadArray[0], Temp);
			--Index;
			Temp = XorKey & 0xFF;
			PasswordLastChar = Password[Password.length - 1];
			ObfuscationArray[Index] = XorRor(PasswordLastChar, Temp);
		}
		while(Index > 0) {
			--Index;
			Temp = XorKey >> 8;
			ObfuscationArray[Index] = XorRor(Password[Index], Temp);
			--Index;
			Temp = XorKey & 0xFF;
			ObfuscationArray[Index] = XorRor(Password[Index], Temp);
		}
		Index = 15;
		PadIndex = 15 - Password.length;
		while(PadIndex > 0) {
			Temp = XorKey >> 8;
			ObfuscationArray[Index] = XorRor(PadArray[PadIndex], Temp);
			--Index;
			--PadIndex;
			Temp = XorKey & 0xFF;
			ObfuscationArray[Index] = XorRor(Password[Index], Temp);
			--Index;
			--PadIndex;
		}
		return ObfuscationArray;
	};
})();

/* [MS-OFFCRYPTO] 2.3.7.3 Binary Document XOR Data Transformation Method 1 */
var crypto_DecryptData_Method1 = function(password/*:string*/, Data, XorArrayIndex, XorArray, O) {
	/* If XorArray is set, use it; if O is not set, make changes in-place */
	if(!O) O = Data;
	if(!XorArray) XorArray = crypto_CreateXorArray_Method1(password);
	var Index, Value;
	for(Index = 0; Index != Data.length; ++Index) {
		Value = Data[Index];
		Value ^= XorArray[XorArrayIndex];
		Value = ((Value>>5) | (Value<<3)) & 0xFF;
		O[Index] = Value;
		++XorArrayIndex;
	}
	return [O, XorArrayIndex, XorArray];
};

var crypto_MakeXorDecryptor = function(password/*:string*/) {
	var XorArrayIndex = 0, XorArray = crypto_CreateXorArray_Method1(password);
	return function(Data) {
		var O = crypto_DecryptData_Method1("", Data, XorArrayIndex, XorArray);
		XorArrayIndex = O[1];
		return O[0];
	};
};

/* 2.5.343 */
function parse_XORObfuscation(blob, length, opts, out) {
	var o = ({ key: parseuint16(blob), verificationBytes: parseuint16(blob) }/*:any*/);
	if(opts.password) o.verifier = crypto_CreatePasswordVerifier_Method1(opts.password);
	out.valid = o.verificationBytes === o.verifier;
	if(out.valid) out.insitu = crypto_MakeXorDecryptor(opts.password);
	return o;
}

/* 2.4.117 */
function parse_FilePassHeader(blob, length/*:number*/, oo) {
	var o = oo || {}; o.Info = blob.read_shift(2); blob.l -= 2;
	if(o.Info === 1) o.Data = parse_RC4Header(blob, length);
	else o.Data = parse_RC4CryptoHeader(blob, length);
	return o;
}
function parse_FilePass(blob, length/*:number*/, opts) {
	var o = ({ Type: opts.biff >= 8 ? blob.read_shift(2) : 0 }/*:any*/); /* wEncryptionType */
	if(o.Type) parse_FilePassHeader(blob, length-2, o);
	else parse_XORObfuscation(blob, opts.biff >= 8 ? length : length - 2, opts, o);
	return o;
}


var RTF = /*#__PURE__*/(function() {
	function rtf_to_sheet(d/*:RawData*/, opts)/*:Worksheet*/ {
		switch(opts.type) {
			case 'base64': return rtf_to_sheet_str(Base64_decode(d), opts);
			case 'binary': return rtf_to_sheet_str(d, opts);
			case 'buffer': return rtf_to_sheet_str(has_buf && Buffer.isBuffer(d) ? d.toString('binary') : a2s(d), opts);
			case 'array':  return rtf_to_sheet_str(cc2str(d), opts);
		}
		throw new Error("Unrecognized type " + opts.type);
	}

	/* TODO: this is a stub */
	function rtf_to_sheet_str(str/*:string*/, opts)/*:Worksheet*/ {
		var o = opts || {};
		var ws/*:Worksheet*/ = o.dense ? ([]/*:any*/) : ({}/*:any*/);

		var rows = str.match(/\\trowd.*?\\row\b/g);
		if(!rows.length) throw new Error("RTF missing table");
		var range/*:Range*/ = ({s: {c:0, r:0}, e: {c:0, r:rows.length - 1}}/*:any*/);
		rows.forEach(function(rowtf, R) {
			if(Array.isArray(ws)) ws[R] = [];
			var rtfre = /\\\w+\b/g;
			var last_index = 0;
			var res;
			var C = -1;
			while((res = rtfre.exec(rowtf))) {
				switch(res[0]) {
					case "\\cell":
						var data = rowtf.slice(last_index, rtfre.lastIndex - res[0].length);
						if(data[0] == " ") data = data.slice(1);
						++C;
						if(data.length) {
							// TODO: value parsing, including codepage adjustments
							var cell = {v: data, t:"s"};
							if(Array.isArray(ws)) ws[R][C] = cell;
							else ws[encode_cell({r:R, c:C})] = cell;
						}
						break;
				}
				last_index = rtfre.lastIndex;
			}
			if(C > range.e.c) range.e.c = C;
		});
		ws['!ref'] = encode_range(range);
		return ws;
	}

	function rtf_to_workbook(d/*:RawData*/, opts)/*:Workbook*/ { return sheet_to_workbook(rtf_to_sheet(d, opts), opts); }

	/* TODO: this is a stub */
	function sheet_to_rtf(ws/*:Worksheet*//*::, opts*/)/*:string*/ {
		var o = ["{\\rtf1\\ansi"];
		var r = safe_decode_range(ws['!ref']), cell/*:Cell*/;
		var dense = Array.isArray(ws);
		for(var R = r.s.r; R <= r.e.r; ++R) {
			o.push("\\trowd\\trautofit1");
			for(var C = r.s.c; C <= r.e.c; ++C) o.push("\\cellx" + (C+1));
			o.push("\\pard\\intbl");
			for(C = r.s.c; C <= r.e.c; ++C) {
				var coord = encode_cell({r:R,c:C});
				cell = dense ? (ws[R]||[])[C]: ws[coord];
				if(!cell || cell.v == null && (!cell.f || cell.F)) continue;
				o.push(" " + (cell.w || (format_cell(cell), cell.w)));
				o.push("\\cell");
			}
			o.push("\\pard\\intbl\\row");
		}
		return o.join("") + "}";
	}

	return {
		to_workbook: rtf_to_workbook,
		to_sheet: rtf_to_sheet,
		from_sheet: sheet_to_rtf
	};
})();
function hex2RGB(h) {
	var o = h.slice(h[0]==="#"?1:0).slice(0,6);
	return [parseInt(o.slice(0,2),16),parseInt(o.slice(2,4),16),parseInt(o.slice(4,6),16)];
}
function rgb2Hex(rgb) {
	for(var i=0,o=1; i!=3; ++i) o = o*256 + (rgb[i]>255?255:rgb[i]<0?0:rgb[i]);
	return o.toString(16).toUpperCase().slice(1);
}

function rgb2HSL(rgb) {
	var R = rgb[0]/255, G = rgb[1]/255, B=rgb[2]/255;
	var M = Math.max(R, G, B), m = Math.min(R, G, B), C = M - m;
	if(C === 0) return [0, 0, R];

	var H6 = 0, S = 0, L2 = (M + m);
	S = C / (L2 > 1 ? 2 - L2 : L2);
	switch(M){
		case R: H6 = ((G - B) / C + 6)%6; break;
		case G: H6 = ((B - R) / C + 2); break;
		case B: H6 = ((R - G) / C + 4); break;
	}
	return [H6 / 6, S, L2 / 2];
}

function hsl2RGB(hsl){
	var H = hsl[0], S = hsl[1], L = hsl[2];
	var C = S * 2 * (L < 0.5 ? L : 1 - L), m = L - C/2;
	var rgb = [m,m,m], h6 = 6*H;

	var X;
	if(S !== 0) switch(h6|0) {
		case 0: case 6: X = C * h6; rgb[0] += C; rgb[1] += X; break;
		case 1: X = C * (2 - h6);   rgb[0] += X; rgb[1] += C; break;
		case 2: X = C * (h6 - 2);   rgb[1] += C; rgb[2] += X; break;
		case 3: X = C * (4 - h6);   rgb[1] += X; rgb[2] += C; break;
		case 4: X = C * (h6 - 4);   rgb[2] += C; rgb[0] += X; break;
		case 5: X = C * (6 - h6);   rgb[2] += X; rgb[0] += C; break;
	}
	for(var i = 0; i != 3; ++i) rgb[i] = Math.round(rgb[i]*255);
	return rgb;
}

/* 18.8.3 bgColor tint algorithm */
function rgb_tint(hex, tint) {
	if(tint === 0) return hex;
	var hsl = rgb2HSL(hex2RGB(hex));
	if (tint < 0) hsl[2] = hsl[2] * (1 + tint);
	else hsl[2] = 1 - (1 - hsl[2]) * (1 - tint);
	return rgb2Hex(hsl2RGB(hsl));
}

/* 18.3.1.13 width calculations */
/* [MS-OI29500] 2.1.595 Column Width & Formatting */
var DEF_MDW = 6, MAX_MDW = 15, MIN_MDW = 1, MDW = DEF_MDW;
function width2px(width) { return Math.floor(( width + (Math.round(128/MDW))/256 )* MDW ); }
function px2char(px) { return (Math.floor((px - 5)/MDW * 100 + 0.5))/100; }
function char2width(chr) { return (Math.round((chr * MDW + 5)/MDW*256))/256; }
//function px2char_(px) { return (((px - 5)/MDW * 100 + 0.5))/100; }
//function char2width_(chr) { return (((chr * MDW + 5)/MDW*256))/256; }
function cycle_width(collw) { return char2width(px2char(width2px(collw))); }
/* XLSX/XLSB/XLS specify width in units of MDW */
function find_mdw_colw(collw) {
	var delta = Math.abs(collw - cycle_width(collw)), _MDW = MDW;
	if(delta > 0.005) for(MDW=MIN_MDW; MDW<MAX_MDW; ++MDW) if(Math.abs(collw - cycle_width(collw)) <= delta) { delta = Math.abs(collw - cycle_width(collw)); _MDW = MDW; }
	MDW = _MDW;
}
/* XLML specifies width in terms of pixels */
/*function find_mdw_wpx(wpx) {
	var delta = Infinity, guess = 0, _MDW = MIN_MDW;
	for(MDW=MIN_MDW; MDW<MAX_MDW; ++MDW) {
		guess = char2width_(px2char_(wpx))*256;
		guess = (guess) % 1;
		if(guess > 0.5) guess--;
		if(Math.abs(guess) < delta) { delta = Math.abs(guess); _MDW = MDW; }
	}
	MDW = _MDW;
}*/

function process_col(coll/*:ColInfo*/) {
	if(coll.width) {
		coll.wpx = width2px(coll.width);
		coll.wch = px2char(coll.wpx);
		coll.MDW = MDW;
	} else if(coll.wpx) {
		coll.wch = px2char(coll.wpx);
		coll.width = char2width(coll.wch);
		coll.MDW = MDW;
	} else if(typeof coll.wch == 'number') {
		coll.width = char2width(coll.wch);
		coll.wpx = width2px(coll.width);
		coll.MDW = MDW;
	}
	if(coll.customWidth) delete coll.customWidth;
}

var DEF_PPI = 96, PPI = DEF_PPI;
function px2pt(px) { return px * 96 / PPI; }
function pt2px(pt) { return pt * PPI / 96; }

/* [MS-EXSPXML3] 2.4.54 ST_enmPattern */
var XLMLPatternTypeMap = {
	"None": "none",
	"Solid": "solid",
	"Gray50": "mediumGray",
	"Gray75": "darkGray",
	"Gray25": "lightGray",
	"HorzStripe": "darkHorizontal",
	"VertStripe": "darkVertical",
	"ReverseDiagStripe": "darkDown",
	"DiagStripe": "darkUp",
	"DiagCross": "darkGrid",
	"ThickDiagCross": "darkTrellis",
	"ThinHorzStripe": "lightHorizontal",
	"ThinVertStripe": "lightVertical",
	"ThinReverseDiagStripe": "lightDown",
	"ThinHorzCross": "lightGrid"
};

/* 18.8.5 borders CT_Borders */
function parse_borders(t, styles, themes, opts) {
	styles.Borders = [];
	var border = {};
	var pass = false;
	(t[0].match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<borders': case '<borders>': case '</borders>': break;

			/* 18.8.4 border CT_Border */
			case '<border': case '<border>': case '<border/>':
				border = /*::(*/{}/*:: :any)*/;
				if(y.diagonalUp) border.diagonalUp = parsexmlbool(y.diagonalUp);
				if(y.diagonalDown) border.diagonalDown = parsexmlbool(y.diagonalDown);
				styles.Borders.push(border);
				break;
			case '</border>': break;

			/* note: not in spec, appears to be CT_BorderPr */
			case '<left/>': break;
			case '<left': case '<left>': break;
			case '</left>': break;

			/* note: not in spec, appears to be CT_BorderPr */
			case '<right/>': break;
			case '<right': case '<right>': break;
			case '</right>': break;

			/* 18.8.43 top CT_BorderPr */
			case '<top/>': break;
			case '<top': case '<top>': break;
			case '</top>': break;

			/* 18.8.6 bottom CT_BorderPr */
			case '<bottom/>': break;
			case '<bottom': case '<bottom>': break;
			case '</bottom>': break;

			/* 18.8.13 diagonal CT_BorderPr */
			case '<diagonal': case '<diagonal>': case '<diagonal/>': break;
			case '</diagonal>': break;

			/* 18.8.25 horizontal CT_BorderPr */
			case '<horizontal': case '<horizontal>': case '<horizontal/>': break;
			case '</horizontal>': break;

			/* 18.8.44 vertical CT_BorderPr */
			case '<vertical': case '<vertical>': case '<vertical/>': break;
			case '</vertical>': break;

			/* 18.8.37 start CT_BorderPr */
			case '<start': case '<start>': case '<start/>': break;
			case '</start>': break;

			/* 18.8.16 end CT_BorderPr */
			case '<end': case '<end>': case '<end/>': break;
			case '</end>': break;

			/* 18.8.? color CT_Color */
			case '<color': case '<color>':
				break;
			case '<color/>': case '</color>': break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': break;
			case '<ext': pass = true; break;
			case '</ext>': pass = false; break;
			default: if(opts && opts.WTF) {
				if(!pass) throw new Error('unrecognized ' + y[0] + ' in borders');
			}
		}
	});
}

/* 18.8.21 fills CT_Fills */
function parse_fills(t, styles, themes, opts) {
	styles.Fills = [];
	var fill = {};
	var pass = false;
	(t[0].match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<fills': case '<fills>': case '</fills>': break;

			/* 18.8.20 fill CT_Fill */
			case '<fill>': case '<fill': case '<fill/>':
				fill = {}; styles.Fills.push(fill); break;
			case '</fill>': break;

			/* 18.8.24 gradientFill CT_GradientFill */
			case '<gradientFill>': break;
			case '<gradientFill':
			case '</gradientFill>': styles.Fills.push(fill); fill = {}; break;

			/* 18.8.32 patternFill CT_PatternFill */
			case '<patternFill': case '<patternFill>':
				if(y.patternType) fill.patternType = y.patternType;
				break;
			case '<patternFill/>': case '</patternFill>': break;

			/* 18.8.3 bgColor CT_Color */
			case '<bgColor':
				if(!fill.bgColor) fill.bgColor = {};
				if(y.indexed) fill.bgColor.indexed = parseInt(y.indexed, 10);
				if(y.theme) fill.bgColor.theme = parseInt(y.theme, 10);
				if(y.tint) fill.bgColor.tint = parseFloat(y.tint);
				/* Excel uses ARGB strings */
				if(y.rgb) fill.bgColor.rgb = y.rgb.slice(-6);
				break;
			case '<bgColor/>': case '</bgColor>': break;

			/* 18.8.19 fgColor CT_Color */
			case '<fgColor':
				if(!fill.fgColor) fill.fgColor = {};
				if(y.theme) fill.fgColor.theme = parseInt(y.theme, 10);
				if(y.tint) fill.fgColor.tint = parseFloat(y.tint);
				/* Excel uses ARGB strings */
				if(y.rgb != null) fill.fgColor.rgb = y.rgb.slice(-6);
				break;
			case '<fgColor/>': case '</fgColor>': break;

			/* 18.8.38 stop CT_GradientStop */
			case '<stop': case '<stop/>': break;
			case '</stop>': break;

			/* 18.8.? color CT_Color */
			case '<color': case '<color/>': break;
			case '</color>': break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': break;
			case '<ext': pass = true; break;
			case '</ext>': pass = false; break;
			default: if(opts && opts.WTF) {
				if(!pass) throw new Error('unrecognized ' + y[0] + ' in fills');
			}
		}
	});
}

/* 18.8.23 fonts CT_Fonts */
function parse_fonts(t, styles, themes, opts) {
	styles.Fonts = [];
	var font = {};
	var pass = false;
	(t[0].match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<fonts': case '<fonts>': case '</fonts>': break;

			/* 18.8.22 font CT_Font */
			case '<font': case '<font>': break;
			case '</font>': case '<font/>':
				styles.Fonts.push(font);
				font = {};
				break;

			/* 18.8.29 name CT_FontName */
			case '<name': if(y.val) font.name = utf8read(y.val); break;
			case '<name/>': case '</name>': break;

			/* 18.8.2  b CT_BooleanProperty */
			case '<b': font.bold = y.val ? parsexmlbool(y.val) : 1; break;
			case '<b/>': font.bold = 1; break;

			/* 18.8.26 i CT_BooleanProperty */
			case '<i': font.italic = y.val ? parsexmlbool(y.val) : 1; break;
			case '<i/>': font.italic = 1; break;

			/* 18.4.13 u CT_UnderlineProperty */
			case '<u':
				switch(y.val) {
					case "none": font.underline = 0x00; break;
					case "single": font.underline = 0x01; break;
					case "double": font.underline = 0x02; break;
					case "singleAccounting": font.underline = 0x21; break;
					case "doubleAccounting": font.underline = 0x22; break;
				} break;
			case '<u/>': font.underline = 1; break;

			/* 18.4.10 strike CT_BooleanProperty */
			case '<strike': font.strike = y.val ? parsexmlbool(y.val) : 1; break;
			case '<strike/>': font.strike = 1; break;

			/* 18.4.2  outline CT_BooleanProperty */
			case '<outline': font.outline = y.val ? parsexmlbool(y.val) : 1; break;
			case '<outline/>': font.outline = 1; break;

			/* 18.8.36 shadow CT_BooleanProperty */
			case '<shadow': font.shadow = y.val ? parsexmlbool(y.val) : 1; break;
			case '<shadow/>': font.shadow = 1; break;

			/* 18.8.12 condense CT_BooleanProperty */
			case '<condense': font.condense = y.val ? parsexmlbool(y.val) : 1; break;
			case '<condense/>': font.condense = 1; break;

			/* 18.8.17 extend CT_BooleanProperty */
			case '<extend': font.extend = y.val ? parsexmlbool(y.val) : 1; break;
			case '<extend/>': font.extend = 1; break;

			/* 18.4.11 sz CT_FontSize */
			case '<sz': if(y.val) font.sz = +y.val; break;
			case '<sz/>': case '</sz>': break;

			/* 18.4.14 vertAlign CT_VerticalAlignFontProperty */
			case '<vertAlign': if(y.val) font.vertAlign = y.val; break;
			case '<vertAlign/>': case '</vertAlign>': break;

			/* 18.8.18 family CT_FontFamily */
			case '<family': if(y.val) font.family = parseInt(y.val,10); break;
			case '<family/>': case '</family>': break;

			/* 18.8.35 scheme CT_FontScheme */
			case '<scheme': if(y.val) font.scheme = y.val; break;
			case '<scheme/>': case '</scheme>': break;

			/* 18.4.1 charset CT_IntProperty */
			case '<charset':
				if(y.val == '1') break;
				y.codepage = CS2CP[parseInt(y.val, 10)];
				break;

			/* 18.?.? color CT_Color */
			case '<color':
				if(!font.color) font.color = {};
				if(y.auto) font.color.auto = parsexmlbool(y.auto);

				if(y.rgb) font.color.rgb = y.rgb.slice(-6);
				else if(y.indexed) {
					font.color.index = parseInt(y.indexed, 10);
					var icv = XLSIcv[font.color.index];
					if(font.color.index == 81) icv = XLSIcv[1];
					if(!icv) icv = XLSIcv[1]; //throw new Error(x); // note: 206 is valid
					font.color.rgb = icv[0].toString(16) + icv[1].toString(16) + icv[2].toString(16);
				} else if(y.theme) {
					font.color.theme = parseInt(y.theme, 10);
					if(y.tint) font.color.tint = parseFloat(y.tint);
					if(y.theme && themes.themeElements && themes.themeElements.clrScheme) {
						font.color.rgb = rgb_tint(themes.themeElements.clrScheme[font.color.theme].rgb, font.color.tint || 0);
					}
				}

				break;
			case '<color/>': case '</color>': break;

			/* note: sometimes mc:AlternateContent appears bare */
			case '<AlternateContent': pass = true; break;
			case '</AlternateContent>': pass = false; break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': break;
			case '<ext': pass = true; break;
			case '</ext>': pass = false; break;
			default: if(opts && opts.WTF) {
				if(!pass) throw new Error('unrecognized ' + y[0] + ' in fonts');
			}
		}
	});
}

/* 18.8.31 numFmts CT_NumFmts */
function parse_numFmts(t, styles, opts) {
	styles.NumberFmt = [];
	var k/*Array<number>*/ = (keys(table_fmt)/*:any*/);
	for(var i=0; i < k.length; ++i) styles.NumberFmt[k[i]] = table_fmt[k[i]];
	var m = t[0].match(tagregex);
	if(!m) return;
	for(i=0; i < m.length; ++i) {
		var y = parsexmltag(m[i]);
		switch(strip_ns(y[0])) {
			case '<numFmts': case '</numFmts>': case '<numFmts/>': case '<numFmts>': break;
			case '<numFmt': {
				var f=unescapexml(utf8read(y.formatCode)), j=parseInt(y.numFmtId,10);
				styles.NumberFmt[j] = f;
				if(j>0) {
					if(j > 0x188) {
						for(j = 0x188; j > 0x3c; --j) if(styles.NumberFmt[j] == null) break;
						styles.NumberFmt[j] = f;
					}
					SSF_load(f,j);
				}
			} break;
			case '</numFmt>': break;
			default: if(opts.WTF) throw new Error('unrecognized ' + y[0] + ' in numFmts');
		}
	}
}

function write_numFmts(NF/*:{[n:number|string]:string}*//*::, opts*/) {
	var o = ["<numFmts>"];
	[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {
		for(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) o[o.length] = (writextag('numFmt',null,{numFmtId:i,formatCode:escapexml(NF[i])}));
	});
	if(o.length === 1) return "";
	o[o.length] = ("</numFmts>");
	o[0] = writextag('numFmts', null, { count:o.length-2 }).replace("/>", ">");
	return o.join("");
}

/* 18.8.10 cellXfs CT_CellXfs */
var cellXF_uint = [ "numFmtId", "fillId", "fontId", "borderId", "xfId" ];
var cellXF_bool = [ "applyAlignment", "applyBorder", "applyFill", "applyFont", "applyNumberFormat", "applyProtection", "pivotButton", "quotePrefix" ];
function parse_cellXfs(t, styles, opts) {
	styles.CellXf = [];
	var xf;
	var pass = false;
	(t[0].match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x), i = 0;
		switch(strip_ns(y[0])) {
			case '<cellXfs': case '<cellXfs>': case '<cellXfs/>': case '</cellXfs>': break;

			/* 18.8.45 xf CT_Xf */
			case '<xf': case '<xf/>':
				xf = y;
				delete xf[0];
				for(i = 0; i < cellXF_uint.length; ++i) if(xf[cellXF_uint[i]])
					xf[cellXF_uint[i]] = parseInt(xf[cellXF_uint[i]], 10);
				for(i = 0; i < cellXF_bool.length; ++i) if(xf[cellXF_bool[i]])
					xf[cellXF_bool[i]] = parsexmlbool(xf[cellXF_bool[i]]);
				if(styles.NumberFmt && xf.numFmtId > 0x188) {
					for(i = 0x188; i > 0x3c; --i) if(styles.NumberFmt[xf.numFmtId] == styles.NumberFmt[i]) { xf.numFmtId = i; break; }
				}
				styles.CellXf.push(xf); break;
			case '</xf>': break;

			/* 18.8.1 alignment CT_CellAlignment */
			case '<alignment': case '<alignment/>':
				var alignment = {};
				if(y.vertical) alignment.vertical = y.vertical;
				if(y.horizontal) alignment.horizontal = y.horizontal;
				if(y.textRotation != null) alignment.textRotation = y.textRotation;
				if(y.indent) alignment.indent = y.indent;
				if(y.wrapText) alignment.wrapText = parsexmlbool(y.wrapText);
				xf.alignment = alignment;
				break;
			case '</alignment>': break;

			/* 18.8.33 protection CT_CellProtection */
			case '<protection':
				break;
			case '</protection>': case '<protection/>': break;

			/* note: sometimes mc:AlternateContent appears bare */
			case '<AlternateContent': pass = true; break;
			case '</AlternateContent>': pass = false; break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': break;
			case '<ext': pass = true; break;
			case '</ext>': pass = false; break;
			default: if(opts && opts.WTF) {
				if(!pass) throw new Error('unrecognized ' + y[0] + ' in cellXfs');
			}
		}
	});
}

function write_cellXfs(cellXfs)/*:string*/ {
	var o/*:Array<string>*/ = [];
	o[o.length] = (writextag('cellXfs',null));
	cellXfs.forEach(function(c) {
		o[o.length] = (writextag('xf', null, c));
	});
	o[o.length] = ("</cellXfs>");
	if(o.length === 2) return "";
	o[0] = writextag('cellXfs',null, {count:o.length-2}).replace("/>",">");
	return o.join("");
}

/* 18.8 Styles CT_Stylesheet*/
var parse_sty_xml= /*#__PURE__*/(function make_pstyx() {
var numFmtRegex = /<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/;
var cellXfRegex = /<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/;
var fillsRegex = /<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/;
var fontsRegex = /<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/;
var bordersRegex = /<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;

return function parse_sty_xml(data, themes, opts) {
	var styles = {};
	if(!data) return styles;
	data = data.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");
	/* 18.8.39 styleSheet CT_Stylesheet */
	var t;

	/* 18.8.31 numFmts CT_NumFmts ? */
	if((t=data.match(numFmtRegex))) parse_numFmts(t, styles, opts);

	/* 18.8.23 fonts CT_Fonts ? */
	if((t=data.match(fontsRegex))) parse_fonts(t, styles, themes, opts);

	/* 18.8.21 fills CT_Fills ? */
	if((t=data.match(fillsRegex))) parse_fills(t, styles, themes, opts);

	/* 18.8.5  borders CT_Borders ? */
	if((t=data.match(bordersRegex))) parse_borders(t, styles, themes, opts);

	/* 18.8.9  cellStyleXfs CT_CellStyleXfs ? */
	/* 18.8.8  cellStyles CT_CellStyles ? */

	/* 18.8.10 cellXfs CT_CellXfs ? */
	if((t=data.match(cellXfRegex))) parse_cellXfs(t, styles, opts);

	/* 18.8.15 dxfs CT_Dxfs ? */
	/* 18.8.42 tableStyles CT_TableStyles ? */
	/* 18.8.11 colors CT_Colors ? */
	/* 18.2.10 extLst CT_ExtensionList ? */

	return styles;
};
})();

function write_sty_xml(wb/*:Workbook*/, opts)/*:string*/ {
	var o = [XML_HEADER, writextag('styleSheet', null, {
		'xmlns': XMLNS_main[0],
		'xmlns:vt': XMLNS.vt
	})], w;
	if(wb.SSF && (w = write_numFmts(wb.SSF)) != null) o[o.length] = w;
	o[o.length] = ('<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>');
	o[o.length] = ('<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>');
	o[o.length] = ('<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>');
	o[o.length] = ('<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>');
	if((w = write_cellXfs(opts.cellXfs))) o[o.length] = (w);
	o[o.length] = ('<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>');
	o[o.length] = ('<dxfs count="0"/>');
	o[o.length] = ('<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>');

	if(o.length>2){ o[o.length] = ('</styleSheet>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* [MS-XLSB] 2.4.657 BrtFmt */
function parse_BrtFmt(data, length/*:number*/) {
	var numFmtId = data.read_shift(2);
	var stFmtCode = parse_XLWideString(data,length-2);
	return [numFmtId, stFmtCode];
}
function write_BrtFmt(i/*:number*/, f/*:string*/, o) {
	if(!o) o = new_buf(6 + 4 * f.length);
	o.write_shift(2, i);
	write_XLWideString(f, o);
	var out = (o.length > o.l) ? o.slice(0, o.l) : o;
	if(o.l == null) o.l = o.length;
	return out;
}

/* [MS-XLSB] 2.4.659 BrtFont TODO */
function parse_BrtFont(data, length/*:number*/, opts) {
	var out = ({}/*:any*/);

	out.sz = data.read_shift(2) / 20;

	var grbit = parse_FontFlags(data, 2, opts);
	if(grbit.fItalic) out.italic = 1;
	if(grbit.fCondense) out.condense = 1;
	if(grbit.fExtend) out.extend = 1;
	if(grbit.fShadow) out.shadow = 1;
	if(grbit.fOutline) out.outline = 1;
	if(grbit.fStrikeout) out.strike = 1;

	var bls = data.read_shift(2);
	if(bls === 0x02BC) out.bold = 1;

	switch(data.read_shift(2)) {
		/* case 0: out.vertAlign = "baseline"; break; */
		case 1: out.vertAlign = "superscript"; break;
		case 2: out.vertAlign = "subscript"; break;
	}

	var underline = data.read_shift(1);
	if(underline != 0) out.underline = underline;

	var family = data.read_shift(1);
	if(family > 0) out.family = family;

	var bCharSet = data.read_shift(1);
	if(bCharSet > 0) out.charset = bCharSet;

	data.l++;
	out.color = parse_BrtColor(data, 8);

	switch(data.read_shift(1)) {
		/* case 0: out.scheme = "none": break; */
		case 1: out.scheme = "major"; break;
		case 2: out.scheme = "minor"; break;
	}

	out.name = parse_XLWideString(data, length - 21);

	return out;
}
function write_BrtFont(font/*:any*/, o) {
	if(!o) o = new_buf(25+4*32);
	o.write_shift(2, font.sz * 20);
	write_FontFlags(font, o);
	o.write_shift(2, font.bold ? 0x02BC : 0x0190);
	var sss = 0;
	if(font.vertAlign == "superscript") sss = 1;
	else if(font.vertAlign == "subscript") sss = 2;
	o.write_shift(2, sss);
	o.write_shift(1, font.underline || 0);
	o.write_shift(1, font.family || 0);
	o.write_shift(1, font.charset || 0);
	o.write_shift(1, 0);
	write_BrtColor(font.color, o);
	var scheme = 0;
	if(font.scheme == "major") scheme = 1;
	if(font.scheme == "minor") scheme = 2;
	o.write_shift(1, scheme);
	write_XLWideString(font.name, o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.650 BrtFill */
var XLSBFillPTNames = [
	"none",
	"solid",
	"mediumGray",
	"darkGray",
	"lightGray",
	"darkHorizontal",
	"darkVertical",
	"darkDown",
	"darkUp",
	"darkGrid",
	"darkTrellis",
	"lightHorizontal",
	"lightVertical",
	"lightDown",
	"lightUp",
	"lightGrid",
	"lightTrellis",
	"gray125",
	"gray0625"
];
var rev_XLSBFillPTNames/*:EvertNumType*/;
/* TODO: gradient fill representation */
var parse_BrtFill = parsenoop;
function write_BrtFill(fill, o) {
	if(!o) o = new_buf(4*3 + 8*7 + 16*1);
	if(!rev_XLSBFillPTNames) rev_XLSBFillPTNames = (evert(XLSBFillPTNames)/*:any*/);
	var fls/*:number*/ = rev_XLSBFillPTNames[fill.patternType];
	if(fls == null) fls = 0x28;
	o.write_shift(4, fls);
	var j = 0;
	if(fls != 0x28) {
		/* TODO: custom FG Color */
		write_BrtColor({auto:1}, o);
		/* TODO: custom BG Color */
		write_BrtColor({auto:1}, o);

		for(; j < 12; ++j) o.write_shift(4, 0);
	} else {
		for(; j < 4; ++j) o.write_shift(4, 0);

		for(; j < 12; ++j) o.write_shift(4, 0); /* TODO */
		/* iGradientType */
		/* xnumDegree */
		/* xnumFillToLeft */
		/* xnumFillToRight */
		/* xnumFillToTop */
		/* xnumFillToBottom */
		/* cNumStop */
		/* xfillGradientStop */
	}
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.824 BrtXF */
function parse_BrtXF(data, length/*:number*/) {
	var tgt = data.l + length;
	var ixfeParent = data.read_shift(2);
	var ifmt = data.read_shift(2);
	data.l = tgt;
	return {ixfe:ixfeParent, numFmtId:ifmt };
}
function write_BrtXF(data, ixfeP, o) {
	if(!o) o = new_buf(16);
	o.write_shift(2, ixfeP||0);
	o.write_shift(2, data.numFmtId||0);
	o.write_shift(2, 0); /* iFont */
	o.write_shift(2, 0); /* iFill */
	o.write_shift(2, 0); /* ixBorder */
	o.write_shift(1, 0); /* trot */
	o.write_shift(1, 0); /* indent */
	var flow = 0;
	o.write_shift(1, flow); /* flags */
	o.write_shift(1, 0); /* flags */
	o.write_shift(1, 0); /* xfGrbitAtr */
	o.write_shift(1, 0);
	return o;
}

/* [MS-XLSB] 2.5.4 Blxf TODO */
function write_Blxf(data, o) {
	if(!o) o = new_buf(10);
	o.write_shift(1, 0); /* dg */
	o.write_shift(1, 0);
	o.write_shift(4, 0); /* color */
	o.write_shift(4, 0); /* color */
	return o;
}
/* [MS-XLSB] 2.4.302 BrtBorder TODO */
var parse_BrtBorder = parsenoop;
function write_BrtBorder(border, o) {
	if(!o) o = new_buf(51);
	o.write_shift(1, 0); /* diagonal */
	write_Blxf(null, o); /* top */
	write_Blxf(null, o); /* bottom */
	write_Blxf(null, o); /* left */
	write_Blxf(null, o); /* right */
	write_Blxf(null, o); /* diag */
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.763 BrtStyle TODO */
function write_BrtStyle(style, o) {
	if(!o) o = new_buf(12+4*10);
	o.write_shift(4, style.xfId);
	o.write_shift(2, 1);
	o.write_shift(1, +style.builtinId);
	o.write_shift(1, 0); /* iLevel */
	write_XLNullableWideString(style.name || "", o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.272 BrtBeginTableStyles */
function write_BrtBeginTableStyles(cnt, defTableStyle, defPivotStyle) {
	var o = new_buf(4+256*2*4);
	o.write_shift(4, cnt);
	write_XLNullableWideString(defTableStyle, o);
	write_XLNullableWideString(defPivotStyle, o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.1.7.50 Styles */
function parse_sty_bin(data, themes, opts) {
	var styles = {};
	styles.NumberFmt = ([]/*:any*/);
	for(var y in table_fmt) styles.NumberFmt[y] = table_fmt[y];

	styles.CellXf = [];
	styles.Fonts = [];
	var state/*:Array<string>*/ = [];
	var pass = false;
	recordhopper(data, function hopper_sty(val, R, RT) {
		switch(RT) {
			case 0x002C: /* BrtFmt */
				styles.NumberFmt[val[0]] = val[1]; SSF_load(val[1], val[0]);
				break;
			case 0x002B: /* BrtFont */
				styles.Fonts.push(val);
				if(val.color.theme != null && themes && themes.themeElements && themes.themeElements.clrScheme) {
					val.color.rgb = rgb_tint(themes.themeElements.clrScheme[val.color.theme].rgb, val.color.tint || 0);
				}
				break;
			case 0x0401: /* BrtKnownFonts */ break;
			case 0x002D: /* BrtFill */
				break;
			case 0x002E: /* BrtBorder */
				break;
			case 0x002F: /* BrtXF */
				if(state[state.length - 1] == 0x0269 /* BrtBeginCellXFs */) {
					styles.CellXf.push(val);
				}
				break;
			case 0x0030: /* BrtStyle */
			case 0x01FB: /* BrtDXF */
			case 0x023C: /* BrtMRUColor */
			case 0x01DB: /* BrtIndexedColor */
				break;

			case 0x0493: /* BrtDXF14 */
			case 0x0836: /* BrtDXF15 */
			case 0x046A: /* BrtSlicerStyleElement */
			case 0x0200: /* BrtTableStyleElement */
			case 0x082F: /* BrtTimelineStyleElement */
			case 0x0C00: /* BrtUid */
				break;

			case 0x0023: /* BrtFRTBegin */
				pass = true; break;
			case 0x0024: /* BrtFRTEnd */
				pass = false; break;
			case 0x0025: /* BrtACBegin */
				state.push(RT); pass = true; break;
			case 0x0026: /* BrtACEnd */
				state.pop(); pass = false; break;

			default:
				if(R.T > 0) state.push(RT);
				else if(R.T < 0) state.pop();
				else if(!pass || (opts.WTF && state[state.length-1] != 0x0025 /* BrtACBegin */)) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	});
	return styles;
}

function write_FMTS_bin(ba, NF/*:?SSFTable*/) {
	if(!NF) return;
	var cnt = 0;
	[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {
		/*:: if(!NF) return; */
		for(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) ++cnt;
	});

	if(cnt == 0) return;
	write_record(ba, 0x0267 /* BrtBeginFmts */, write_UInt32LE(cnt));
	[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {
		/*:: if(!NF) return; */
		for(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) write_record(ba, 0x002C /* BrtFmt */, write_BrtFmt(i, NF[i]));
	});
	write_record(ba, 0x0268 /* BrtEndFmts */);
}

function write_FONTS_bin(ba/*::, data*/) {
	var cnt = 1;

	if(cnt == 0) return;
	write_record(ba, 0x0263 /* BrtBeginFonts */, write_UInt32LE(cnt));
	write_record(ba, 0x002B /* BrtFont */, write_BrtFont({
		sz:12,
		color: {theme:1},
		name: "Calibri",
		family: 2,
		scheme: "minor"
	}));
	/* 1*65491BrtFont [ACFONTS] */
	write_record(ba, 0x0264 /* BrtEndFonts */);
}

function write_FILLS_bin(ba/*::, data*/) {
	var cnt = 2;

	if(cnt == 0) return;
	write_record(ba, 0x025B /* BrtBeginFills */, write_UInt32LE(cnt));
	write_record(ba, 0x002D /* BrtFill */, write_BrtFill({patternType:"none"}));
	write_record(ba, 0x002D /* BrtFill */, write_BrtFill({patternType:"gray125"}));
	/* 1*65431BrtFill */
	write_record(ba, 0x025C /* BrtEndFills */);
}

function write_BORDERS_bin(ba/*::, data*/) {
	var cnt = 1;

	if(cnt == 0) return;
	write_record(ba, 0x0265 /* BrtBeginBorders */, write_UInt32LE(cnt));
	write_record(ba, 0x002E /* BrtBorder */, write_BrtBorder({}));
	/* 1*65430BrtBorder */
	write_record(ba, 0x0266 /* BrtEndBorders */);
}

function write_CELLSTYLEXFS_bin(ba/*::, data*/) {
	var cnt = 1;
	write_record(ba, 0x0272 /* BrtBeginCellStyleXFs */, write_UInt32LE(cnt));
	write_record(ba, 0x002F /* BrtXF */, write_BrtXF({
		numFmtId: 0,
		fontId:   0,
		fillId:   0,
		borderId: 0
	}, 0xFFFF));
	/* 1*65430(BrtXF *FRT) */
	write_record(ba, 0x0273 /* BrtEndCellStyleXFs */);
}

function write_CELLXFS_bin(ba, data) {
	write_record(ba, 0x0269 /* BrtBeginCellXFs */, write_UInt32LE(data.length));
	data.forEach(function(c) { write_record(ba, 0x002F /* BrtXF */, write_BrtXF(c,0)); });
	/* 1*65430(BrtXF *FRT) */
	write_record(ba, 0x026A /* BrtEndCellXFs */);
}

function write_STYLES_bin(ba/*::, data*/) {
	var cnt = 1;

	write_record(ba, 0x026B /* BrtBeginStyles */, write_UInt32LE(cnt));
	write_record(ba, 0x0030 /* BrtStyle */, write_BrtStyle({
		xfId:0,
		builtinId:0,
		name:"Normal"
	}));
	/* 1*65430(BrtStyle *FRT) */
	write_record(ba, 0x026C /* BrtEndStyles */);
}

function write_DXFS_bin(ba/*::, data*/) {
	var cnt = 0;

	write_record(ba, 0x01F9 /* BrtBeginDXFs */, write_UInt32LE(cnt));
	/* *2147483647(BrtDXF *FRT) */
	write_record(ba, 0x01FA /* BrtEndDXFs */);
}

function write_TABLESTYLES_bin(ba/*::, data*/) {
	var cnt = 0;

	write_record(ba, 0x01FC /* BrtBeginTableStyles */, write_BrtBeginTableStyles(cnt, "TableStyleMedium9", "PivotStyleMedium4"));
	/* *TABLESTYLE */
	write_record(ba, 0x01FD /* BrtEndTableStyles */);
}

function write_COLORPALETTE_bin(/*::ba, data*/) {
	return;
	/* BrtBeginColorPalette [INDEXEDCOLORS] [MRUCOLORS] BrtEndColorPalette */
}

/* [MS-XLSB] 2.1.7.50 Styles */
function write_sty_bin(wb, opts) {
	var ba = buf_array();
	write_record(ba, 0x0116 /* BrtBeginStyleSheet */);
	write_FMTS_bin(ba, wb.SSF);
	write_FONTS_bin(ba, wb);
	write_FILLS_bin(ba, wb);
	write_BORDERS_bin(ba, wb);
	write_CELLSTYLEXFS_bin(ba, wb);
	write_CELLXFS_bin(ba, opts.cellXfs);
	write_STYLES_bin(ba, wb);
	write_DXFS_bin(ba, wb);
	write_TABLESTYLES_bin(ba, wb);
	write_COLORPALETTE_bin(ba, wb);
	/* FRTSTYLESHEET*/
	write_record(ba, 0x0117 /* BrtEndStyleSheet */);
	return ba.end();
}
/* Even though theme layout is dk1 lt1 dk2 lt2, true order is lt1 dk1 lt2 dk2 */
var XLSXThemeClrScheme = [
	'</a:lt1>', '</a:dk1>', '</a:lt2>', '</a:dk2>',
	'</a:accent1>', '</a:accent2>', '</a:accent3>',
	'</a:accent4>', '</a:accent5>', '</a:accent6>',
	'</a:hlink>', '</a:folHlink>'
];
/* 20.1.6.2 clrScheme CT_ColorScheme */
function parse_clrScheme(t, themes, opts) {
	themes.themeElements.clrScheme = [];
	var color = {};
	(t[0].match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		switch(y[0]) {
			/* 20.1.6.2 clrScheme (Color Scheme) CT_ColorScheme */
			case '<a:clrScheme': case '</a:clrScheme>': break;

			/* 20.1.2.3.32 srgbClr CT_SRgbColor */
			case '<a:srgbClr':
				color.rgb = y.val; break;

			/* 20.1.2.3.33 sysClr CT_SystemColor */
			case '<a:sysClr':
				color.rgb = y.lastClr; break;

			/* 20.1.4.1.1 accent1 (Accent 1) */
			/* 20.1.4.1.2 accent2 (Accent 2) */
			/* 20.1.4.1.3 accent3 (Accent 3) */
			/* 20.1.4.1.4 accent4 (Accent 4) */
			/* 20.1.4.1.5 accent5 (Accent 5) */
			/* 20.1.4.1.6 accent6 (Accent 6) */
			/* 20.1.4.1.9 dk1 (Dark 1) */
			/* 20.1.4.1.10 dk2 (Dark 2) */
			/* 20.1.4.1.15 folHlink (Followed Hyperlink) */
			/* 20.1.4.1.19 hlink (Hyperlink) */
			/* 20.1.4.1.22 lt1 (Light 1) */
			/* 20.1.4.1.23 lt2 (Light 2) */
			case '<a:dk1>': case '</a:dk1>':
			case '<a:lt1>': case '</a:lt1>':
			case '<a:dk2>': case '</a:dk2>':
			case '<a:lt2>': case '</a:lt2>':
			case '<a:accent1>': case '</a:accent1>':
			case '<a:accent2>': case '</a:accent2>':
			case '<a:accent3>': case '</a:accent3>':
			case '<a:accent4>': case '</a:accent4>':
			case '<a:accent5>': case '</a:accent5>':
			case '<a:accent6>': case '</a:accent6>':
			case '<a:hlink>': case '</a:hlink>':
			case '<a:folHlink>': case '</a:folHlink>':
				if (y[0].charAt(1) === '/') {
					themes.themeElements.clrScheme[XLSXThemeClrScheme.indexOf(y[0])] = color;
					color = {};
				} else {
					color.name = y[0].slice(3, y[0].length - 1);
				}
				break;

			default: if(opts && opts.WTF) throw new Error('Unrecognized ' + y[0] + ' in clrScheme');
		}
	});
}

/* 20.1.4.1.18 fontScheme CT_FontScheme */
function parse_fontScheme(/*::t, themes, opts*/) { }

/* 20.1.4.1.15 fmtScheme CT_StyleMatrix */
function parse_fmtScheme(/*::t, themes, opts*/) { }

var clrsregex = /<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/;
var fntsregex = /<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/;
var fmtsregex = /<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;

/* 20.1.6.10 themeElements CT_BaseStyles */
function parse_themeElements(data, themes, opts) {
	themes.themeElements = {};

	var t;

	[
		/* clrScheme CT_ColorScheme */
		['clrScheme', clrsregex, parse_clrScheme],
		/* fontScheme CT_FontScheme */
		['fontScheme', fntsregex, parse_fontScheme],
		/* fmtScheme CT_StyleMatrix */
		['fmtScheme', fmtsregex, parse_fmtScheme]
	].forEach(function(m) {
		if(!(t=data.match(m[1]))) throw new Error(m[0] + ' not found in themeElements');
		m[2](t, themes, opts);
	});
}

var themeltregex = /<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;

/* 14.2.7 Theme Part */
function parse_theme_xml(data/*:string*/, opts) {
	/* 20.1.6.9 theme CT_OfficeStyleSheet */
	if(!data || data.length === 0) data = write_theme();

	var t;
	var themes = {};

	/* themeElements CT_BaseStyles */
	if(!(t=data.match(themeltregex))) throw new Error('themeElements not found in theme');
	parse_themeElements(t[0], themes, opts);
	themes.raw = data;
	return themes;
}

function write_theme(Themes, opts)/*:string*/ {
	if(opts && opts.themeXLSX) return opts.themeXLSX;
	if(Themes && typeof Themes.raw == "string") return Themes.raw;
	var o = [XML_HEADER];
	o[o.length] = '<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">';
	o[o.length] =  '<a:themeElements>';

	o[o.length] =   '<a:clrScheme name="Office">';
	o[o.length] =    '<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>';
	o[o.length] =    '<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>';
	o[o.length] =    '<a:dk2><a:srgbClr val="1F497D"/></a:dk2>';
	o[o.length] =    '<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>';
	o[o.length] =    '<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>';
	o[o.length] =    '<a:accent2><a:srgbClr val="C0504D"/></a:accent2>';
	o[o.length] =    '<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>';
	o[o.length] =    '<a:accent4><a:srgbClr val="8064A2"/></a:accent4>';
	o[o.length] =    '<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>';
	o[o.length] =    '<a:accent6><a:srgbClr val="F79646"/></a:accent6>';
	o[o.length] =    '<a:hlink><a:srgbClr val="0000FF"/></a:hlink>';
	o[o.length] =    '<a:folHlink><a:srgbClr val="800080"/></a:folHlink>';
	o[o.length] =   '</a:clrScheme>';

	o[o.length] =   '<a:fontScheme name="Office">';
	o[o.length] =    '<a:majorFont>';
	o[o.length] =     '<a:latin typeface="Cambria"/>';
	o[o.length] =     '<a:ea typeface=""/>';
	o[o.length] =     '<a:cs typeface=""/>';
	o[o.length] =     '<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>';
	o[o.length] =     '<a:font script="Hang" typeface="맑은 고딕"/>';
	o[o.length] =     '<a:font script="Hans" typeface="宋体"/>';
	o[o.length] =     '<a:font script="Hant" typeface="新細明體"/>';
	o[o.length] =     '<a:font script="Arab" typeface="Times New Roman"/>';
	o[o.length] =     '<a:font script="Hebr" typeface="Times New Roman"/>';
	o[o.length] =     '<a:font script="Thai" typeface="Tahoma"/>';
	o[o.length] =     '<a:font script="Ethi" typeface="Nyala"/>';
	o[o.length] =     '<a:font script="Beng" typeface="Vrinda"/>';
	o[o.length] =     '<a:font script="Gujr" typeface="Shruti"/>';
	o[o.length] =     '<a:font script="Khmr" typeface="MoolBoran"/>';
	o[o.length] =     '<a:font script="Knda" typeface="Tunga"/>';
	o[o.length] =     '<a:font script="Guru" typeface="Raavi"/>';
	o[o.length] =     '<a:font script="Cans" typeface="Euphemia"/>';
	o[o.length] =     '<a:font script="Cher" typeface="Plantagenet Cherokee"/>';
	o[o.length] =     '<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>';
	o[o.length] =     '<a:font script="Tibt" typeface="Microsoft Himalaya"/>';
	o[o.length] =     '<a:font script="Thaa" typeface="MV Boli"/>';
	o[o.length] =     '<a:font script="Deva" typeface="Mangal"/>';
	o[o.length] =     '<a:font script="Telu" typeface="Gautami"/>';
	o[o.length] =     '<a:font script="Taml" typeface="Latha"/>';
	o[o.length] =     '<a:font script="Syrc" typeface="Estrangelo Edessa"/>';
	o[o.length] =     '<a:font script="Orya" typeface="Kalinga"/>';
	o[o.length] =     '<a:font script="Mlym" typeface="Kartika"/>';
	o[o.length] =     '<a:font script="Laoo" typeface="DokChampa"/>';
	o[o.length] =     '<a:font script="Sinh" typeface="Iskoola Pota"/>';
	o[o.length] =     '<a:font script="Mong" typeface="Mongolian Baiti"/>';
	o[o.length] =     '<a:font script="Viet" typeface="Times New Roman"/>';
	o[o.length] =     '<a:font script="Uigh" typeface="Microsoft Uighur"/>';
	o[o.length] =     '<a:font script="Geor" typeface="Sylfaen"/>';
	o[o.length] =    '</a:majorFont>';
	o[o.length] =    '<a:minorFont>';
	o[o.length] =     '<a:latin typeface="Calibri"/>';
	o[o.length] =     '<a:ea typeface=""/>';
	o[o.length] =     '<a:cs typeface=""/>';
	o[o.length] =     '<a:font script="Jpan" typeface="ＭＳ Ｐゴシック"/>';
	o[o.length] =     '<a:font script="Hang" typeface="맑은 고딕"/>';
	o[o.length] =     '<a:font script="Hans" typeface="宋体"/>';
	o[o.length] =     '<a:font script="Hant" typeface="新細明體"/>';
	o[o.length] =     '<a:font script="Arab" typeface="Arial"/>';
	o[o.length] =     '<a:font script="Hebr" typeface="Arial"/>';
	o[o.length] =     '<a:font script="Thai" typeface="Tahoma"/>';
	o[o.length] =     '<a:font script="Ethi" typeface="Nyala"/>';
	o[o.length] =     '<a:font script="Beng" typeface="Vrinda"/>';
	o[o.length] =     '<a:font script="Gujr" typeface="Shruti"/>';
	o[o.length] =     '<a:font script="Khmr" typeface="DaunPenh"/>';
	o[o.length] =     '<a:font script="Knda" typeface="Tunga"/>';
	o[o.length] =     '<a:font script="Guru" typeface="Raavi"/>';
	o[o.length] =     '<a:font script="Cans" typeface="Euphemia"/>';
	o[o.length] =     '<a:font script="Cher" typeface="Plantagenet Cherokee"/>';
	o[o.length] =     '<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>';
	o[o.length] =     '<a:font script="Tibt" typeface="Microsoft Himalaya"/>';
	o[o.length] =     '<a:font script="Thaa" typeface="MV Boli"/>';
	o[o.length] =     '<a:font script="Deva" typeface="Mangal"/>';
	o[o.length] =     '<a:font script="Telu" typeface="Gautami"/>';
	o[o.length] =     '<a:font script="Taml" typeface="Latha"/>';
	o[o.length] =     '<a:font script="Syrc" typeface="Estrangelo Edessa"/>';
	o[o.length] =     '<a:font script="Orya" typeface="Kalinga"/>';
	o[o.length] =     '<a:font script="Mlym" typeface="Kartika"/>';
	o[o.length] =     '<a:font script="Laoo" typeface="DokChampa"/>';
	o[o.length] =     '<a:font script="Sinh" typeface="Iskoola Pota"/>';
	o[o.length] =     '<a:font script="Mong" typeface="Mongolian Baiti"/>';
	o[o.length] =     '<a:font script="Viet" typeface="Arial"/>';
	o[o.length] =     '<a:font script="Uigh" typeface="Microsoft Uighur"/>';
	o[o.length] =     '<a:font script="Geor" typeface="Sylfaen"/>';
	o[o.length] =    '</a:minorFont>';
	o[o.length] =   '</a:fontScheme>';

	o[o.length] =   '<a:fmtScheme name="Office">';
	o[o.length] =    '<a:fillStyleLst>';
	o[o.length] =     '<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>';
	o[o.length] =     '<a:gradFill rotWithShape="1">';
	o[o.length] =      '<a:gsLst>';
	o[o.length] =       '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>';
	o[o.length] =       '<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>';
	o[o.length] =       '<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';
	o[o.length] =      '</a:gsLst>';
	o[o.length] =      '<a:lin ang="16200000" scaled="1"/>';
	o[o.length] =     '</a:gradFill>';
	o[o.length] =     '<a:gradFill rotWithShape="1">';
	o[o.length] =      '<a:gsLst>';
	o[o.length] =       '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>';
	o[o.length] =       '<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';
	o[o.length] =      '</a:gsLst>';
	o[o.length] =      '<a:lin ang="16200000" scaled="0"/>';
	o[o.length] =     '</a:gradFill>';
	o[o.length] =    '</a:fillStyleLst>';
	o[o.length] =    '<a:lnStyleLst>';
	o[o.length] =     '<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>';
	o[o.length] =     '<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>';
	o[o.length] =     '<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>';
	o[o.length] =    '</a:lnStyleLst>';
	o[o.length] =    '<a:effectStyleLst>';
	o[o.length] =     '<a:effectStyle>';
	o[o.length] =      '<a:effectLst>';
	o[o.length] =       '<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>';
	o[o.length] =      '</a:effectLst>';
	o[o.length] =     '</a:effectStyle>';
	o[o.length] =     '<a:effectStyle>';
	o[o.length] =      '<a:effectLst>';
	o[o.length] =       '<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>';
	o[o.length] =      '</a:effectLst>';
	o[o.length] =     '</a:effectStyle>';
	o[o.length] =     '<a:effectStyle>';
	o[o.length] =      '<a:effectLst>';
	o[o.length] =       '<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>';
	o[o.length] =      '</a:effectLst>';
	o[o.length] =      '<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>';
	o[o.length] =      '<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>';
	o[o.length] =     '</a:effectStyle>';
	o[o.length] =    '</a:effectStyleLst>';
	o[o.length] =    '<a:bgFillStyleLst>';
	o[o.length] =     '<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>';
	o[o.length] =     '<a:gradFill rotWithShape="1">';
	o[o.length] =      '<a:gsLst>';
	o[o.length] =       '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';
	o[o.length] =       '<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>';
	o[o.length] =       '<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>';
	o[o.length] =      '</a:gsLst>';
	o[o.length] =      '<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>';
	o[o.length] =     '</a:gradFill>';
	o[o.length] =     '<a:gradFill rotWithShape="1">';
	o[o.length] =      '<a:gsLst>';
	o[o.length] =       '<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>';
	o[o.length] =       '<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>';
	o[o.length] =      '</a:gsLst>';
	o[o.length] =      '<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>';
	o[o.length] =     '</a:gradFill>';
	o[o.length] =    '</a:bgFillStyleLst>';
	o[o.length] =   '</a:fmtScheme>';
	o[o.length] =  '</a:themeElements>';

	o[o.length] =  '<a:objectDefaults>';
	o[o.length] =   '<a:spDef>';
	o[o.length] =    '<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>';
	o[o.length] =   '</a:spDef>';
	o[o.length] =   '<a:lnDef>';
	o[o.length] =    '<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>';
	o[o.length] =   '</a:lnDef>';
	o[o.length] =  '</a:objectDefaults>';
	o[o.length] =  '<a:extraClrSchemeLst/>';
	o[o.length] = '</a:theme>';
	return o.join("");
}
/* [MS-XLS] 2.4.326 TODO: payload is a zip file */
function parse_Theme(blob, length, opts) {
	var end = blob.l + length;
	var dwThemeVersion = blob.read_shift(4);
	if(dwThemeVersion === 124226) return;
	if(!opts.cellStyles) { blob.l = end; return; }
	var data = blob.slice(blob.l);
	blob.l = end;
	var zip; try { zip = zip_read(data, {type: "array"}); } catch(e) { return; }
	var themeXML = getzipstr(zip, "theme/theme/theme1.xml", true);
	if(!themeXML) return;
	return parse_theme_xml(themeXML, opts);
}

/* 2.5.49 */
function parse_ColorTheme(blob/*::, length*/) { return blob.read_shift(4); }

/* 2.5.155 */
function parse_FullColorExt(blob/*::, length*/) {
	var o = {};
	o.xclrType = blob.read_shift(2);
	o.nTintShade = blob.read_shift(2);
	switch(o.xclrType) {
		case 0: blob.l += 4; break;
		case 1: o.xclrValue = parse_IcvXF(blob, 4); break;
		case 2: o.xclrValue = parse_LongRGBA(blob, 4); break;
		case 3: o.xclrValue = parse_ColorTheme(blob, 4); break;
		case 4: blob.l += 4; break;
	}
	blob.l += 8;
	return o;
}

/* 2.5.164 TODO: read 7 bits*/
function parse_IcvXF(blob, length) {
	return parsenoop(blob, length);
}

/* 2.5.280 */
function parse_XFExtGradient(blob, length) {
	return parsenoop(blob, length);
}

/* [MS-XLS] 2.5.108 */
function parse_ExtProp(blob/*::, length*/)/*:Array<any>*/ {
	var extType = blob.read_shift(2);
	var cb = blob.read_shift(2) - 4;
	var o = [extType];
	switch(extType) {
		case 0x04: case 0x05: case 0x07: case 0x08:
		case 0x09: case 0x0A: case 0x0B: case 0x0D:
			o[1] = parse_FullColorExt(blob, cb); break;
		case 0x06: o[1] = parse_XFExtGradient(blob, cb); break;
		case 0x0E: case 0x0F: o[1] = blob.read_shift(cb === 1 ? 1 : 2); break;
		default: throw new Error("Unrecognized ExtProp type: " + extType + " " + cb);
	}
	return o;
}

/* 2.4.355 */
function parse_XFExt(blob, length) {
	var end = blob.l + length;
	blob.l += 2;
	var ixfe = blob.read_shift(2);
	blob.l += 2;
	var cexts = blob.read_shift(2);
	var ext/*:AOA*/ = [];
	while(cexts-- > 0) ext.push(parse_ExtProp(blob, end-blob.l));
	return {ixfe:ixfe, ext:ext};
}

/* xf is an XF, see parse_XFExt for xfext */
function update_xfext(xf, xfext) {
	xfext.forEach(function(xfe) {
		switch(xfe[0]) { /* 2.5.108 extPropData */
			case 0x04: break; /* foreground color */
			case 0x05: break; /* background color */
			case 0x06: break; /* gradient fill */
			case 0x07: break; /* top cell border color */
			case 0x08: break; /* bottom cell border color */
			case 0x09: break; /* left cell border color */
			case 0x0a: break; /* right cell border color */
			case 0x0b: break; /* diagonal cell border color */
			case 0x0d: /* text color */
				break;
			case 0x0e: break; /* font scheme */
			case 0x0f: break; /* indentation level */
		}
	});
}

function parse_BrtMdtinfo(data, length) {
  return {
    flags: data.read_shift(4),
    version: data.read_shift(4),
    name: parse_XLWideString(data, length - 8)
  };
}
function write_BrtMdtinfo(data) {
  var o = new_buf(12 + 2 * data.name.length);
  o.write_shift(4, data.flags);
  o.write_shift(4, data.version);
  write_XLWideString(data.name, o);
  return o.slice(0, o.l);
}
function parse_BrtMdb(data) {
  var out = [];
  var cnt = data.read_shift(4);
  while (cnt-- > 0)
    out.push([data.read_shift(4), data.read_shift(4)]);
  return out;
}
function write_BrtMdb(mdb) {
  var o = new_buf(4 + 8 * mdb.length);
  o.write_shift(4, mdb.length);
  for (var i = 0; i < mdb.length; ++i) {
    o.write_shift(4, mdb[i][0]);
    o.write_shift(4, mdb[i][1]);
  }
  return o;
}
function write_BrtBeginEsfmd(cnt, name) {
  var o = new_buf(8 + 2 * name.length);
  o.write_shift(4, cnt);
  write_XLWideString(name, o);
  return o.slice(0, o.l);
}
function parse_BrtBeginEsmdb(data) {
  data.l += 4;
  return data.read_shift(4) != 0;
}
function write_BrtBeginEsmdb(cnt, cm) {
  var o = new_buf(8);
  o.write_shift(4, cnt);
  o.write_shift(4, cm ? 1 : 0);
  return o;
}
function parse_xlmeta_bin(data, name, _opts) {
  var out = { Types: [], Cell: [], Value: [] };
  var opts = _opts || {};
  var state = [];
  var pass = false;
  var metatype = 2;
  recordhopper(data, function(val, R, RT) {
    switch (RT) {
      case 335:
        out.Types.push({ name: val.name });
        break;
      case 51:
        val.forEach(function(r) {
          if (metatype == 1)
            out.Cell.push({ type: out.Types[r[0] - 1].name, index: r[1] });
          else if (metatype == 0)
            out.Value.push({ type: out.Types[r[0] - 1].name, index: r[1] });
        });
        break;
      case 337:
        metatype = val ? 1 : 0;
        break;
      case 338:
        metatype = 2;
        break;
      case 35:
        state.push(RT);
        pass = true;
        break;
      case 36:
        state.pop();
        pass = false;
        break;
      default:
        if (R.T) {
        } else if (!pass || opts.WTF && state[state.length - 1] != 35)
          throw new Error("Unexpected record 0x" + RT.toString(16));
    }
  });
  return out;
}
function write_xlmeta_bin() {
  var ba = buf_array();
  write_record(ba, 332);
  write_record(ba, 334, write_UInt32LE(1));
  write_record(ba, 335, write_BrtMdtinfo({
    name: "XLDAPR",
    version: 12e4,
    flags: 3496657072
  }));
  write_record(ba, 336);
  write_record(ba, 339, write_BrtBeginEsfmd(1, "XLDAPR"));
  write_record(ba, 52);
  write_record(ba, 35, write_UInt32LE(514));
  write_record(ba, 4096, write_UInt32LE(0));
  write_record(ba, 4097, writeuint16(1));
  write_record(ba, 36);
  write_record(ba, 53);
  write_record(ba, 340);
  write_record(ba, 337, write_BrtBeginEsmdb(1, true));
  write_record(ba, 51, write_BrtMdb([[1, 0]]));
  write_record(ba, 338);
  write_record(ba, 333);
  return ba.end();
}
function parse_xlmeta_xml(data, name, opts) {
  var out = { Types: [], Cell: [], Value: [] };
  if (!data)
    return out;
  var pass = false;
  var metatype = 2;
  var lastmeta;
  data.replace(tagregex, function(x) {
    var y = parsexmltag(x);
    switch (strip_ns(y[0])) {
      case "<?xml":
        break;
      case "<metadata":
      case "</metadata>":
        break;
      case "<metadataTypes":
      case "</metadataTypes>":
        break;
      case "<metadataType":
        out.Types.push({ name: y.name });
        break;
      case "</metadataType>":
        break;
      case "<futureMetadata":
        for (var j = 0; j < out.Types.length; ++j)
          if (out.Types[j].name == y.name)
            lastmeta = out.Types[j];
        break;
      case "</futureMetadata>":
        break;
      case "<bk>":
        break;
      case "</bk>":
        break;
      case "<rc":
        if (metatype == 1)
          out.Cell.push({ type: out.Types[y.t - 1].name, index: +y.v });
        else if (metatype == 0)
          out.Value.push({ type: out.Types[y.t - 1].name, index: +y.v });
        break;
      case "</rc>":
        break;
      case "<cellMetadata":
        metatype = 1;
        break;
      case "</cellMetadata>":
        metatype = 2;
        break;
      case "<valueMetadata":
        metatype = 0;
        break;
      case "</valueMetadata>":
        metatype = 2;
        break;
      case "<extLst":
      case "<extLst>":
      case "</extLst>":
      case "<extLst/>":
        break;
      case "<ext":
        pass = true;
        break;
      case "</ext>":
        pass = false;
        break;
      case "<rvb":
        if (!lastmeta)
          break;
        if (!lastmeta.offsets)
          lastmeta.offsets = [];
        lastmeta.offsets.push(+y.i);
        break;
      default:
        if (!pass && opts.WTF)
          throw new Error("unrecognized " + y[0] + " in metadata");
    }
    return x;
  });
  return out;
}
function write_xlmeta_xml() {
  var o = [XML_HEADER];
  o.push('<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">\n  <metadataTypes count="1">\n    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>\n  </metadataTypes>\n  <futureMetadata name="XLDAPR" count="1">\n    <bk>\n      <extLst>\n        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">\n          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>\n        </ext>\n      </extLst>\n    </bk>\n  </futureMetadata>\n  <cellMetadata count="1">\n    <bk>\n      <rc t="1" v="0"/>\n    </bk>\n  </cellMetadata>\n</metadata>');
  return o.join("");
}
/* 18.6 Calculation Chain */
function parse_cc_xml(data/*::, name, opts*/)/*:Array<any>*/ {
	var d = [];
	if(!data) return d;
	var i = 1;
	(data.match(tagregex)||[]).forEach(function(x) {
		var y = parsexmltag(x);
		switch(y[0]) {
			case '<?xml': break;
			/* 18.6.2  calcChain CT_CalcChain 1 */
			case '<calcChain': case '<calcChain>': case '</calcChain>': break;
			/* 18.6.1  c CT_CalcCell 1 */
			case '<c': delete y[0]; if(y.i) i = y.i; else y.i = i; d.push(y); break;
		}
	});
	return d;
}

//function write_cc_xml(data, opts) { }

/* [MS-XLSB] 2.6.4.1 */
function parse_BrtCalcChainItem$(data) {
	var out = {};
	out.i = data.read_shift(4);
	var cell = {};
	cell.r = data.read_shift(4);
	cell.c = data.read_shift(4);
	out.r = encode_cell(cell);
	var flags = data.read_shift(1);
	if(flags & 0x2) out.l = '1';
	if(flags & 0x8) out.a = '1';
	return out;
}

/* 18.6 Calculation Chain */
function parse_cc_bin(data, name, opts) {
	var out = [];
	var pass = false;
	recordhopper(data, function hopper_cc(val, R, RT) {
		switch(RT) {
			case 0x003F: /* 'BrtCalcChainItem$' */
				out.push(val); break;

			default:
				if(R.T){/* empty */}
				else if(!pass || opts.WTF) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	});
	return out;
}

//function write_cc_bin(data, opts) { }
/* 18.14 Supplementary Workbook Data */
function parse_xlink_xml(/*::data, rel, name:string, _opts*/) {
	//var opts = _opts || {};
	//if(opts.WTF) throw "XLSX External Link";
}

/* [MS-XLSB] 2.1.7.25 External Link */
function parse_xlink_bin(data, rel, name/*:string*/, _opts) {
	if(!data) return data;
	var opts = _opts || {};

	var pass = false, end = false;

	recordhopper(data, function xlink_parse(val, R, RT) {
		if(end) return;
		switch(RT) {
			case 0x0167: /* 'BrtSupTabs' */
			case 0x016B: /* 'BrtExternTableStart' */
			case 0x016C: /* 'BrtExternTableEnd' */
			case 0x016E: /* 'BrtExternRowHdr' */
			case 0x016F: /* 'BrtExternCellBlank' */
			case 0x0170: /* 'BrtExternCellReal' */
			case 0x0171: /* 'BrtExternCellBool' */
			case 0x0172: /* 'BrtExternCellError' */
			case 0x0173: /* 'BrtExternCellString' */
			case 0x01D8: /* 'BrtExternValueMeta' */
			case 0x0241: /* 'BrtSupNameStart' */
			case 0x0242: /* 'BrtSupNameValueStart' */
			case 0x0243: /* 'BrtSupNameValueEnd' */
			case 0x0244: /* 'BrtSupNameNum' */
			case 0x0245: /* 'BrtSupNameErr' */
			case 0x0246: /* 'BrtSupNameSt' */
			case 0x0247: /* 'BrtSupNameNil' */
			case 0x0248: /* 'BrtSupNameBool' */
			case 0x0249: /* 'BrtSupNameFmla' */
			case 0x024A: /* 'BrtSupNameBits' */
			case 0x024B: /* 'BrtSupNameEnd' */
				break;

			case 0x0023: /* 'BrtFRTBegin' */
				pass = true; break;
			case 0x0024: /* 'BrtFRTEnd' */
				pass = false; break;

			default:
				if(R.T){/* empty */}
				else if(!pass || opts.WTF) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	}, opts);
}
/* 20.5 DrawingML - SpreadsheetML Drawing */
/* 20.5.2.35 wsDr CT_Drawing */
function parse_drawing(data, rels/*:any*/) {
	if(!data) return "??";
	/*
	  Chartsheet Drawing:
	   - 20.5.2.35 wsDr CT_Drawing
	    - 20.5.2.1  absoluteAnchor CT_AbsoluteAnchor
	     - 20.5.2.16 graphicFrame CT_GraphicalObjectFrame
	      - 20.1.2.2.16 graphic CT_GraphicalObject
	       - 20.1.2.2.17 graphicData CT_GraphicalObjectData
          - chart reference
	   the actual type is based on the URI of the graphicData
		TODO: handle embedded charts and other types of graphics
	*/
	var id = (data.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];

	return rels['!id'][id].Target;
}

/* L.5.5.2 SpreadsheetML Comments + VML Schema */
var _shapeid = 1024;
function write_comments_vml(rId/*:number*/, comments) {
	var csize = [21600, 21600];
	/* L.5.2.1.2 Path Attribute */
	var bbox = ["m0,0l0",csize[1],csize[0],csize[1],csize[0],"0xe"].join(",");
	var o = [
		writextag("xml", null, { 'xmlns:v': XLMLNS.v, 'xmlns:o': XLMLNS.o, 'xmlns:x': XLMLNS.x, 'xmlns:mv': XLMLNS.mv }).replace(/\/>/,">"),
		writextag("o:shapelayout", writextag("o:idmap", null, {'v:ext':"edit", 'data':rId}), {'v:ext':"edit"}),
		writextag("v:shapetype", [
			writextag("v:stroke", null, {joinstyle:"miter"}),
			writextag("v:path", null, {gradientshapeok:"t", 'o:connecttype':"rect"})
		].join(""), {id:"_x0000_t202", 'o:spt':202, coordsize:csize.join(","),path:bbox})
	];
	while(_shapeid < rId * 1000) _shapeid += 1000;

	comments.forEach(function(x) {
	var c = decode_cell(x[0]);
	var fillopts = /*::(*/{'color2':"#BEFF82", 'type':"gradient"}/*:: :any)*/;
	if(fillopts.type == "gradient") fillopts.angle = "-180";
	var fillparm = fillopts.type == "gradient" ? writextag("o:fill", null, {type:"gradientUnscaled", 'v:ext':"view"}) : null;
	var fillxml = writextag('v:fill', fillparm, fillopts);

	var shadata = ({on:"t", 'obscured':"t"}/*:any*/);
	++_shapeid;

	o = o.concat([
	'<v:shape' + wxt_helper({
		id:'_x0000_s' + _shapeid,
		type:"#_x0000_t202",
		style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10" + (x[1].hidden ? ";visibility:hidden" : "") ,
		fillcolor:"#ECFAD4",
		strokecolor:"#edeaa1"
	}) + '>',
		fillxml,
		writextag("v:shadow", null, shadata),
		writextag("v:path", null, {'o:connecttype':"none"}),
		'<v:textbox><div style="text-align:left"></div></v:textbox>',
		'<x:ClientData ObjectType="Note">',
			'<x:MoveWithCells/>',
			'<x:SizeWithCells/>',
			/* Part 4 19.4.2.3 Anchor (Anchor) */
			writetag('x:Anchor', [c.c+1, 0, c.r+1, 0, c.c+3, 20, c.r+5, 20].join(",")),
			writetag('x:AutoFill', "False"),
			writetag('x:Row', String(c.r)),
			writetag('x:Column', String(c.c)),
			x[1].hidden ? '' : '<x:Visible/>',
		'</x:ClientData>',
	'</v:shape>'
	]); });
	o.push('</xml>');
	return o.join("");
}
function sheet_insert_comments(sheet, comments/*:Array<RawComment>*/, threaded/*:boolean*/, people/*:?Array<any>*/) {
	var dense = Array.isArray(sheet);
	var cell/*:Cell*/;
	comments.forEach(function(comment) {
		var r = decode_cell(comment.ref);
		if(dense) {
			if(!sheet[r.r]) sheet[r.r] = [];
			cell = sheet[r.r][r.c];
		} else cell = sheet[comment.ref];
		if (!cell) {
			cell = ({t:"z"}/*:any*/);
			if(dense) sheet[r.r][r.c] = cell;
			else sheet[comment.ref] = cell;
			var range = safe_decode_range(sheet["!ref"]||"BDWGO1000001:A1");
			if(range.s.r > r.r) range.s.r = r.r;
			if(range.e.r < r.r) range.e.r = r.r;
			if(range.s.c > r.c) range.s.c = r.c;
			if(range.e.c < r.c) range.e.c = r.c;
			var encoded = encode_range(range);
			if (encoded !== sheet["!ref"]) sheet["!ref"] = encoded;
		}

		if (!cell.c) cell.c = [];
		var o/*:Comment*/ = ({a: comment.author, t: comment.t, r: comment.r, T: threaded});
		if(comment.h) o.h = comment.h;

		/* threaded comments always override */
		for(var i = cell.c.length - 1; i >= 0; --i) {
			if(!threaded && cell.c[i].T) return;
			if(threaded && !cell.c[i].T) cell.c.splice(i, 1);
		}
		if(threaded && people) for(i = 0; i < people.length; ++i) {
			if(o.a == people[i].id) { o.a = people[i].name || o.a; break; }
		}
		cell.c.push(o);
	});
}

/* 18.7 Comments */
function parse_comments_xml(data/*:string*/, opts)/*:Array<RawComment>*/ {
	/* 18.7.6 CT_Comments */
	if(data.match(/<(?:\w+:)?comments *\/>/)) return [];
	var authors/*:Array<string>*/ = [];
	var commentList/*:Array<RawComment>*/ = [];
	var authtag = data.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);
	if(authtag && authtag[1]) authtag[1].split(/<\/\w*:?author>/).forEach(function(x) {
		if(x === "" || x.trim() === "") return;
		var a = x.match(/<(?:\w+:)?author[^>]*>(.*)/);
		if(a) authors.push(a[1]);
	});
	var cmnttag = data.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);
	if(cmnttag && cmnttag[1]) cmnttag[1].split(/<\/\w*:?comment>/).forEach(function(x) {
		if(x === "" || x.trim() === "") return;
		var cm = x.match(/<(?:\w+:)?comment[^>]*>/);
		if(!cm) return;
		var y = parsexmltag(cm[0]);
		var comment/*:RawComment*/ = ({ author: y.authorId && authors[y.authorId] || "sheetjsghost", ref: y.ref, guid: y.guid }/*:any*/);
		var cell = decode_cell(y.ref);
		if(opts.sheetRows && opts.sheetRows <= cell.r) return;
		var textMatch = x.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/);
		var rt = !!textMatch && !!textMatch[1] && parse_si(textMatch[1]) || {r:"",t:"",h:""};
		comment.r = rt.r;
		if(rt.r == "<t></t>") rt.t = rt.h = "";
		comment.t = (rt.t||"").replace(/\r\n/g,"\n").replace(/\r/g,"\n");
		if(opts.cellHTML) comment.h = rt.h;
		commentList.push(comment);
	});
	return commentList;
}

function write_comments_xml(data/*::, opts*/) {
	var o = [XML_HEADER, writextag('comments', null, { 'xmlns': XMLNS_main[0] })];

	var iauthor/*:Array<string>*/ = [];
	o.push("<authors>");
	data.forEach(function(x) { x[1].forEach(function(w) { var a = escapexml(w.a);
		if(iauthor.indexOf(a) == -1) {
			iauthor.push(a);
			o.push("<author>" + a + "</author>");
		}
		if(w.T && w.ID && iauthor.indexOf("tc=" + w.ID) == -1) {
			iauthor.push("tc=" + w.ID);
			o.push("<author>" + "tc=" + w.ID + "</author>");
		}
	}); });
	if(iauthor.length == 0) { iauthor.push("SheetJ5"); o.push("<author>SheetJ5</author>"); }
	o.push("</authors>");
	o.push("<commentList>");
	data.forEach(function(d) {
		/* 18.7.3 CT_Comment */
		var lastauthor = 0, ts = [];
		if(d[1][0] && d[1][0].T && d[1][0].ID) lastauthor = iauthor.indexOf("tc=" + d[1][0].ID);
		else d[1].forEach(function(c) {
			if(c.a) lastauthor = iauthor.indexOf(escapexml(c.a));
			ts.push(c.t||"");
		});
		o.push('<comment ref="' + d[0] + '" authorId="' + lastauthor + '"><text>');
		if(ts.length <= 1) o.push(writetag("t", escapexml(ts[0]||"")));
		else {
			/* based on Threaded Comments -> Comments projection */
			var t = "Comment:\n    " + (ts[0]) + "\n";
			for(var i = 1; i < ts.length; ++i) t += "Reply:\n    " + ts[i] + "\n";
			o.push(writetag("t", escapexml(t)));
		}
		o.push('</text></comment>');
	});
	o.push("</commentList>");
	if(o.length>2) { o[o.length] = ('</comments>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}

/* [MS-XLSX] 2.1.17 */
function parse_tcmnt_xml(data/*:string*/, opts)/*:Array<RawComment>*/ {
	var out = [];
	var pass = false, comment = {}, tidx = 0;
	data.replace(tagregex, function xml_tcmnt(x, idx) {
		var y/*:any*/ = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<?xml': break;

			/* 2.6.207 ThreadedComments CT_ThreadedComments */
			case '<ThreadedComments': break;
			case '</ThreadedComments>': break;

			/* 2.6.205 threadedComment CT_ThreadedComment */
			case '<threadedComment': comment = {author: y.personId, guid: y.id, ref: y.ref, T: 1}; break;
			case '</threadedComment>': if(comment.t != null) out.push(comment); break;

			case '<text>': case '<text': tidx = idx + x.length; break;
			case '</text>': comment.t = data.slice(tidx, idx).replace(/\r\n/g, "\n").replace(/\r/g, "\n"); break;

			/* 2.6.206 mentions CT_ThreadedCommentMentions TODO */
			case '<mentions': case '<mentions>': pass = true; break;
			case '</mentions>': pass = false; break;

			/* 2.6.202 mention CT_Mention TODO */

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': case '<extLst/>': break;
			/* 18.2.7  ext CT_Extension + */
			case '<ext': pass=true; break;
			case '</ext>': pass=false; break;

			default: if(!pass && opts.WTF) throw new Error('unrecognized ' + y[0] + ' in threaded comments');
		}
		return x;
	});
	return out;
}

function write_tcmnt_xml(comments, people, opts) {
	var o = [XML_HEADER, writextag('ThreadedComments', null, { 'xmlns': XMLNS.TCMNT }).replace(/[\/]>/, ">")];
	comments.forEach(function(carr) {
		var rootid = "";
		(carr[1] || []).forEach(function(c, idx) {
			if(!c.T) { delete c.ID; return; }
			if(c.a && people.indexOf(c.a) == -1) people.push(c.a);
			var tcopts = {
				ref: carr[0],
				id: "{54EE7951-7262-4200-6969-" + ("000000000000" + opts.tcid++).slice(-12) + "}"
			};
			if(idx == 0) rootid = tcopts.id;
			else tcopts.parentId = rootid;
			c.ID = tcopts.id;
			if(c.a) tcopts.personId = "{54EE7950-7262-4200-6969-" + ("000000000000" + people.indexOf(c.a)).slice(-12) + "}";
			o.push(writextag('threadedComment', writetag('text', c.t||""), tcopts));
		});
	});
	o.push('</ThreadedComments>');
	return o.join("");
}

/* [MS-XLSX] 2.1.18 */
function parse_people_xml(data/*:string*/, opts) {
	var out = [];
	var pass = false;
	data.replace(tagregex, function xml_tcmnt(x) {
		var y/*:any*/ = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<?xml': break;

			/* 2.4.85 personList CT_PersonList */
			case '<personList': break;
			case '</personList>': break;

			/* 2.6.203 person CT_Person TODO: providers */
			case '<person': out.push({name: y.displayname, id: y.id }); break;
			case '</person>': break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': case '<extLst/>': break;
			/* 18.2.7  ext CT_Extension + */
			case '<ext': pass=true; break;
			case '</ext>': pass=false; break;

			default: if(!pass && opts.WTF) throw new Error('unrecognized ' + y[0] + ' in threaded comments');
		}
		return x;
	});
	return out;
}
function write_people_xml(people/*, opts*/) {
	var o = [XML_HEADER, writextag('personList', null, {
		'xmlns': XMLNS.TCMNT,
		'xmlns:x': XMLNS_main[0]
	}).replace(/[\/]>/, ">")];
	people.forEach(function(person, idx) {
		o.push(writextag('person', null, {
			displayName: person,
			id: "{54EE7950-7262-4200-6969-" + ("000000000000" + idx).slice(-12) + "}",
			userId: person,
			providerId: "None"
		}));
	});
	o.push("</personList>");
	return o.join("");
}
/* [MS-XLSB] 2.4.28 BrtBeginComment */
function parse_BrtBeginComment(data) {
	var out = {};
	out.iauthor = data.read_shift(4);
	var rfx = parse_UncheckedRfX(data, 16);
	out.rfx = rfx.s;
	out.ref = encode_cell(rfx.s);
	data.l += 16; /*var guid = parse_GUID(data); */
	return out;
}
function write_BrtBeginComment(data, o) {
	if(o == null) o = new_buf(36);
	o.write_shift(4, data[1].iauthor);
	write_UncheckedRfX((data[0]/*:any*/), o);
	o.write_shift(4, 0);
	o.write_shift(4, 0);
	o.write_shift(4, 0);
	o.write_shift(4, 0);
	return o;
}

/* [MS-XLSB] 2.4.327 BrtCommentAuthor */
var parse_BrtCommentAuthor = parse_XLWideString;
function write_BrtCommentAuthor(data) { return write_XLWideString(data.slice(0, 54)); }

/* [MS-XLSB] 2.1.7.8 Comments */
function parse_comments_bin(data, opts)/*:Array<RawComment>*/ {
	var out/*:Array<RawComment>*/ = [];
	var authors/*:Array<string>*/ = [];
	var c = {};
	var pass = false;
	recordhopper(data, function hopper_cmnt(val, R, RT) {
		switch(RT) {
			case 0x0278: /* 'BrtCommentAuthor' */
				authors.push(val); break;
			case 0x027B: /* 'BrtBeginComment' */
				c = val; break;
			case 0x027D: /* 'BrtCommentText' */
				c.t = val.t; c.h = val.h; c.r = val.r; break;
			case 0x027C: /* 'BrtEndComment' */
				c.author = authors[c.iauthor];
				delete (c/*:any*/).iauthor;
				if(opts.sheetRows && c.rfx && opts.sheetRows <= c.rfx.r) break;
				if(!c.t) c.t = "";
				delete c.rfx; out.push(c); break;

			case 0x0C00: /* 'BrtUid' */
				break;

			case 0x0023: /* 'BrtFRTBegin' */
				pass = true; break;
			case 0x0024: /* 'BrtFRTEnd' */
				pass = false; break;
			case 0x0025: /* 'BrtACBegin' */ break;
			case 0x0026: /* 'BrtACEnd' */ break;


			default:
				if(R.T){/* empty */}
				else if(!pass || opts.WTF) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	});
	return out;
}

function write_comments_bin(data/*::, opts*/) {
	var ba = buf_array();
	var iauthor/*:Array<string>*/ = [];
	write_record(ba, 0x0274 /* BrtBeginComments */);

	write_record(ba, 0x0276 /* BrtBeginCommentAuthors */);
	data.forEach(function(comment) {
		comment[1].forEach(function(c) {
			if(iauthor.indexOf(c.a) > -1) return;
			iauthor.push(c.a.slice(0,54));
			write_record(ba, 0x0278 /* BrtCommentAuthor */, write_BrtCommentAuthor(c.a));
		});
	});
	write_record(ba, 0x0277 /* BrtEndCommentAuthors */);

	write_record(ba, 0x0279 /* BrtBeginCommentList */);
	data.forEach(function(comment) {
		comment[1].forEach(function(c) {
			c.iauthor = iauthor.indexOf(c.a);
			var range = {s:decode_cell(comment[0]),e:decode_cell(comment[0])};
			write_record(ba, 0x027B /* BrtBeginComment */, write_BrtBeginComment([range, c]));
			if(c.t && c.t.length > 0) write_record(ba, 0x027D /* BrtCommentText */, write_BrtCommentText(c));
			write_record(ba, 0x027C /* BrtEndComment */);
			delete c.iauthor;
		});
	});
	write_record(ba, 0x027A /* BrtEndCommentList */);

	write_record(ba, 0x0275 /* BrtEndComments */);
	return ba.end();
}
var CT_VBA = "application/vnd.ms-office.vbaProject";
function make_vba_xls(cfb) {
  var newcfb = CFB.utils.cfb_new({ root: "R" });
  cfb.FullPaths.forEach(function(p, i) {
    if (p.slice(-1) === "/" || !p.match(/_VBA_PROJECT_CUR/))
      return;
    var newpath = p.replace(/^[^\/]*/, "R").replace(/\/_VBA_PROJECT_CUR\u0000*/, "");
    CFB.utils.cfb_add(newcfb, newpath, cfb.FileIndex[i].content);
  });
  return CFB.write(newcfb);
}
function fill_vba_xls(cfb, vba) {
  vba.FullPaths.forEach(function(p, i) {
    if (i == 0)
      return;
    var newpath = p.replace(/[^\/]*[\/]/, "/_VBA_PROJECT_CUR/");
    if (newpath.slice(-1) !== "/")
      CFB.utils.cfb_add(cfb, newpath, vba.FileIndex[i].content);
  });
}
var VBAFMTS = ["xlsb", "xlsm", "xlam", "biff8", "xla"];
/* macro and dialog sheet stubs */
function parse_ds_bin(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'dialog'}; }
function parse_ds_xml(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'dialog'}; }
function parse_ms_bin(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'macro'}; }
function parse_ms_xml(/*::data:any, opts, idx:number, rels, wb, themes, styles*/)/*:Worksheet*/ { return {'!type':'macro'}; }
/* TODO: it will be useful to parse the function str */
var rc_to_a1 = /*#__PURE__*/(function(){
	var rcregex = /(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g;
	var rcbase/*:Cell*/ = ({r:0,c:0}/*:any*/);
	function rcfunc($$,$1,$2,$3) {
		var cRel = false, rRel = false;

		if($2.length == 0) rRel = true;
		else if($2.charAt(0) == "[") { rRel = true; $2 = $2.slice(1, -1); }

		if($3.length == 0) cRel = true;
		else if($3.charAt(0) == "[") { cRel = true; $3 = $3.slice(1, -1); }

		var R = $2.length>0?parseInt($2,10)|0:0, C = $3.length>0?parseInt($3,10)|0:0;

		if(cRel) C += rcbase.c; else --C;
		if(rRel) R += rcbase.r; else --R;
		return $1 + (cRel ? "" : "$") + encode_col(C) + (rRel ? "" : "$") + encode_row(R);
	}
	return function rc_to_a1(fstr/*:string*/, base/*:Cell*/)/*:string*/ {
		rcbase = base;
		return fstr.replace(rcregex, rcfunc);
	};
})();

var crefregex = /(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g;
var a1_to_rc = /*#__PURE__*/(function(){
	return function a1_to_rc(fstr/*:string*/, base/*:CellAddress*/) {
		return fstr.replace(crefregex, function($0, $1, $2, $3, $4, $5) {
			var c = decode_col($3) - ($2 ? 0 : base.c);
			var r = decode_row($5) - ($4 ? 0 : base.r);
			var R = (r == 0 ? "" : !$4 ? "[" + r + "]" : (r+1));
			var C = (c == 0 ? "" : !$2 ? "[" + c + "]" : (c+1));
			return $1 + "R" + R + "C" + C;
		});
	};
})();

/* no defined name can collide with a valid cell address A1:XFD1048576 ... except LOG10! */
function shift_formula_str(f/*:string*/, delta/*:Cell*/)/*:string*/ {
	return f.replace(crefregex, function($0, $1, $2, $3, $4, $5) {
		return $1+($2=="$" ? $2+$3 : encode_col(decode_col($3)+delta.c))+($4=="$" ? $4+$5 : encode_row(decode_row($5) + delta.r));
	});
}

function shift_formula_xlsx(f/*:string*/, range/*:string*/, cell/*:string*/)/*:string*/ {
	var r = decode_range(range), s = r.s, c = decode_cell(cell);
	var delta = {r:c.r - s.r, c:c.c - s.c};
	return shift_formula_str(f, delta);
}

/* TODO: parse formula */
function fuzzyfmla(f/*:string*/)/*:boolean*/ {
	if(f.length == 1) return false;
	return true;
}

function _xlfn(f/*:string*/)/*:string*/ {
	return f.replace(/_xlfn\./g,"");
}
function parseread1(blob) { blob.l+=1; return; }

/* [MS-XLS] 2.5.51 */
function parse_ColRelU(blob, length) {
	var c = blob.read_shift(length == 1 ? 1 : 2);
	return [c & 0x3FFF, (c >> 14) & 1, (c >> 15) & 1];
}

/* [MS-XLS] 2.5.198.105 ; [MS-XLSB] 2.5.97.89 */
function parse_RgceArea(blob, length, opts) {
	var w = 2;
	if(opts) {
		if(opts.biff >= 2 && opts.biff <= 5) return parse_RgceArea_BIFF2(blob, length, opts);
		else if(opts.biff == 12) w = 4;
	}
	var r=blob.read_shift(w), R=blob.read_shift(w);
	var c=parse_ColRelU(blob, 2);
	var C=parse_ColRelU(blob, 2);
	return { s:{r:r, c:c[0], cRel:c[1], rRel:c[2]}, e:{r:R, c:C[0], cRel:C[1], rRel:C[2]} };
}
/* BIFF 2-5 encodes flags in the row field */
function parse_RgceArea_BIFF2(blob/*::, length, opts*/) {
	var r=parse_ColRelU(blob, 2), R=parse_ColRelU(blob, 2);
	var c=blob.read_shift(1);
	var C=blob.read_shift(1);
	return { s:{r:r[0], c:c, cRel:r[1], rRel:r[2]}, e:{r:R[0], c:C, cRel:R[1], rRel:R[2]} };
}

/* [MS-XLS] 2.5.198.105 ; [MS-XLSB] 2.5.97.90 */
function parse_RgceAreaRel(blob, length, opts) {
	if(opts.biff < 8) return parse_RgceArea_BIFF2(blob, length, opts);
	var r=blob.read_shift(opts.biff == 12 ? 4 : 2), R=blob.read_shift(opts.biff == 12 ? 4 : 2);
	var c=parse_ColRelU(blob, 2);
	var C=parse_ColRelU(blob, 2);
	return { s:{r:r, c:c[0], cRel:c[1], rRel:c[2]}, e:{r:R, c:C[0], cRel:C[1], rRel:C[2]} };
}

/* [MS-XLS] 2.5.198.109 ; [MS-XLSB] 2.5.97.91 */
function parse_RgceLoc(blob, length, opts) {
	if(opts && opts.biff >= 2 && opts.biff <= 5) return parse_RgceLoc_BIFF2(blob, length, opts);
	var r = blob.read_shift(opts && opts.biff == 12 ? 4 : 2);
	var c = parse_ColRelU(blob, 2);
	return {r:r, c:c[0], cRel:c[1], rRel:c[2]};
}
function parse_RgceLoc_BIFF2(blob/*::, length, opts*/) {
	var r = parse_ColRelU(blob, 2);
	var c = blob.read_shift(1);
	return {r:r[0], c:c, cRel:r[1], rRel:r[2]};
}

/* [MS-XLS] 2.5.198.107, 2.5.47 */
function parse_RgceElfLoc(blob/*::, length, opts*/) {
	var r = blob.read_shift(2);
	var c = blob.read_shift(2);
	return {r:r, c:c & 0xFF, fQuoted:!!(c & 0x4000), cRel:c>>15, rRel:c>>15 };
}

/* [MS-XLS] 2.5.198.111 ; [MS-XLSB] 2.5.97.92 TODO */
function parse_RgceLocRel(blob, length, opts) {
	var biff = opts && opts.biff ? opts.biff : 8;
	if(biff >= 2 && biff <= 5) return parse_RgceLocRel_BIFF2(blob, length, opts);
	var r = blob.read_shift(biff >= 12 ? 4 : 2);
	var cl = blob.read_shift(2);
	var cRel = (cl & 0x4000) >> 14, rRel = (cl & 0x8000) >> 15;
	cl &= 0x3FFF;
	if(rRel == 1) while(r > 0x7FFFF) r -= 0x100000;
	if(cRel == 1) while(cl > 0x1FFF) cl = cl - 0x4000;
	return {r:r,c:cl,cRel:cRel,rRel:rRel};
}
function parse_RgceLocRel_BIFF2(blob/*::, length:number, opts*/) {
	var rl = blob.read_shift(2);
	var c = blob.read_shift(1);
	var rRel = (rl & 0x8000) >> 15, cRel = (rl & 0x4000) >> 14;
	rl &= 0x3FFF;
	if(rRel == 1 && rl >= 0x2000) rl = rl - 0x4000;
	if(cRel == 1 && c >= 0x80) c = c - 0x100;
	return {r:rl,c:c,cRel:cRel,rRel:rRel};
}

/* [MS-XLS] 2.5.198.27 ; [MS-XLSB] 2.5.97.18 */
function parse_PtgArea(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	var area = parse_RgceArea(blob, opts.biff >= 2 && opts.biff <= 5 ? 6 : 8, opts);
	return [type, area];
}

/* [MS-XLS] 2.5.198.28 ; [MS-XLSB] 2.5.97.19 */
function parse_PtgArea3d(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	var ixti = blob.read_shift(2, 'i');
	var w = 8;
	if(opts) switch(opts.biff) {
		case 5: blob.l += 12; w = 6; break;
		case 12: w = 12; break;
	}
	var area = parse_RgceArea(blob, w, opts);
	return [type, ixti, area];
}

/* [MS-XLS] 2.5.198.29 ; [MS-XLSB] 2.5.97.20 */
function parse_PtgAreaErr(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	blob.l += opts && (opts.biff > 8) ? 12 : (opts.biff < 8 ? 6 : 8);
	return [type];
}
/* [MS-XLS] 2.5.198.30 ; [MS-XLSB] 2.5.97.21 */
function parse_PtgAreaErr3d(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	var ixti = blob.read_shift(2);
	var w = 8;
	if(opts) switch(opts.biff) {
		case 5: blob.l += 12; w = 6; break;
		case 12: w = 12; break;
	}
	blob.l += w;
	return [type, ixti];
}

/* [MS-XLS] 2.5.198.31 ; [MS-XLSB] 2.5.97.22 */
function parse_PtgAreaN(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	var area = parse_RgceAreaRel(blob, length - 1, opts);
	return [type, area];
}

/* [MS-XLS] 2.5.198.32 ; [MS-XLSB] 2.5.97.23 */
function parse_PtgArray(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	blob.l += opts.biff == 2 ? 6 : opts.biff == 12 ? 14 : 7;
	return [type];
}

/* [MS-XLS] 2.5.198.33 ; [MS-XLSB] 2.5.97.24 */
function parse_PtgAttrBaxcel(blob) {
	var bitSemi = blob[blob.l+1] & 0x01; /* 1 = volatile */
	var bitBaxcel = 1;
	blob.l += 4;
	return [bitSemi, bitBaxcel];
}

/* [MS-XLS] 2.5.198.34 ; [MS-XLSB] 2.5.97.25 */
function parse_PtgAttrChoose(blob, length, opts)/*:Array<number>*/ {
	blob.l +=2;
	var offset = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);
	var o/*:Array<number>*/ = [];
	/* offset is 1 less than the number of elements */
	for(var i = 0; i <= offset; ++i) o.push(blob.read_shift(opts && opts.biff == 2 ? 1 : 2));
	return o;
}

/* [MS-XLS] 2.5.198.35 ; [MS-XLSB] 2.5.97.26 */
function parse_PtgAttrGoto(blob, length, opts) {
	var bitGoto = (blob[blob.l+1] & 0xFF) ? 1 : 0;
	blob.l += 2;
	return [bitGoto, blob.read_shift(opts && opts.biff == 2 ? 1 : 2)];
}

/* [MS-XLS] 2.5.198.36 ; [MS-XLSB] 2.5.97.27 */
function parse_PtgAttrIf(blob, length, opts) {
	var bitIf = (blob[blob.l+1] & 0xFF) ? 1 : 0;
	blob.l += 2;
	return [bitIf, blob.read_shift(opts && opts.biff == 2 ? 1 : 2)];
}

/* [MS-XLSB] 2.5.97.28 */
function parse_PtgAttrIfError(blob) {
	var bitIf = (blob[blob.l+1] & 0xFF) ? 1 : 0;
	blob.l += 2;
	return [bitIf, blob.read_shift(2)];
}

/* [MS-XLS] 2.5.198.37 ; [MS-XLSB] 2.5.97.29 */
function parse_PtgAttrSemi(blob, length, opts) {
	var bitSemi = (blob[blob.l+1] & 0xFF) ? 1 : 0;
	blob.l += opts && opts.biff == 2 ? 3 : 4;
	return [bitSemi];
}

/* [MS-XLS] 2.5.198.40 ; [MS-XLSB] 2.5.97.32 */
function parse_PtgAttrSpaceType(blob/*::, length*/) {
	var type = blob.read_shift(1), cch = blob.read_shift(1);
	return [type, cch];
}

/* [MS-XLS] 2.5.198.38 ; [MS-XLSB] 2.5.97.30 */
function parse_PtgAttrSpace(blob) {
	blob.read_shift(2);
	return parse_PtgAttrSpaceType(blob, 2);
}

/* [MS-XLS] 2.5.198.39 ; [MS-XLSB] 2.5.97.31 */
function parse_PtgAttrSpaceSemi(blob) {
	blob.read_shift(2);
	return parse_PtgAttrSpaceType(blob, 2);
}

/* [MS-XLS] 2.5.198.84 ; [MS-XLSB] 2.5.97.68 TODO */
function parse_PtgRef(blob, length, opts) {
	//var ptg = blob[blob.l] & 0x1F;
	var type = (blob[blob.l] & 0x60)>>5;
	blob.l += 1;
	var loc = parse_RgceLoc(blob, 0, opts);
	return [type, loc];
}

/* [MS-XLS] 2.5.198.88 ; [MS-XLSB] 2.5.97.72 TODO */
function parse_PtgRefN(blob, length, opts) {
	var type = (blob[blob.l] & 0x60)>>5;
	blob.l += 1;
	var loc = parse_RgceLocRel(blob, 0, opts);
	return [type, loc];
}

/* [MS-XLS] 2.5.198.85 ; [MS-XLSB] 2.5.97.69 TODO */
function parse_PtgRef3d(blob, length, opts) {
	var type = (blob[blob.l] & 0x60)>>5;
	blob.l += 1;
	var ixti = blob.read_shift(2); // XtiIndex
	if(opts && opts.biff == 5) blob.l += 12;
	var loc = parse_RgceLoc(blob, 0, opts); // TODO: or RgceLocRel
	return [type, ixti, loc];
}


/* [MS-XLS] 2.5.198.62 ; [MS-XLSB] 2.5.97.45 TODO */
function parse_PtgFunc(blob, length, opts) {
	//var ptg = blob[blob.l] & 0x1F;
	var type = (blob[blob.l] & 0x60)>>5;
	blob.l += 1;
	var iftab = blob.read_shift(opts && opts.biff <= 3 ? 1 : 2);
	return [FtabArgc[iftab], Ftab[iftab], type];
}
/* [MS-XLS] 2.5.198.63 ; [MS-XLSB] 2.5.97.46 TODO */
function parse_PtgFuncVar(blob, length, opts) {
	var type = blob[blob.l++];
	var cparams = blob.read_shift(1), tab = opts && opts.biff <= 3 ? [(type == 0x58 ? -1 : 0), blob.read_shift(1)]: parsetab(blob);
	return [cparams, (tab[0] === 0 ? Ftab : Cetab)[tab[1]]];
}

function parsetab(blob) {
	return [blob[blob.l+1]>>7, blob.read_shift(2) & 0x7FFF];
}

/* [MS-XLS] 2.5.198.41 ; [MS-XLSB] 2.5.97.33 */
function parse_PtgAttrSum(blob, length, opts) {
	blob.l += opts && opts.biff == 2 ? 3 : 4; return;
}

/* [MS-XLS] 2.5.198.58 ; [MS-XLSB] 2.5.97.40 */
function parse_PtgExp(blob, length, opts) {
	blob.l++;
	if(opts && opts.biff == 12) return [blob.read_shift(4, 'i'), 0];
	var row = blob.read_shift(2);
	var col = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);
	return [row, col];
}

/* [MS-XLS] 2.5.198.57 ; [MS-XLSB] 2.5.97.39 */
function parse_PtgErr(blob) { blob.l++; return BErr[blob.read_shift(1)]; }

/* [MS-XLS] 2.5.198.66 ; [MS-XLSB] 2.5.97.49 */
function parse_PtgInt(blob) { blob.l++; return blob.read_shift(2); }

/* [MS-XLS] 2.5.198.42 ; [MS-XLSB] 2.5.97.34 */
function parse_PtgBool(blob) { blob.l++; return blob.read_shift(1)!==0;}

/* [MS-XLS] 2.5.198.79 ; [MS-XLSB] 2.5.97.63 */
function parse_PtgNum(blob) { blob.l++; return parse_Xnum(blob, 8); }

/* [MS-XLS] 2.5.198.89 ; [MS-XLSB] 2.5.97.74 */
function parse_PtgStr(blob, length, opts) { blob.l++; return parse_ShortXLUnicodeString(blob, length-1, opts); }

/* [MS-XLS] 2.5.192.112 + 2.5.192.11{3,4,5,6,7} */
/* [MS-XLSB] 2.5.97.93 + 2.5.97.9{4,5,6,7} */
function parse_SerAr(blob, biff/*:number*/) {
	var val = [blob.read_shift(1)];
	if(biff == 12) switch(val[0]) {
		case 0x02: val[0] = 0x04; break; /* SerBool */
		case 0x04: val[0] = 0x10; break; /* SerErr */
		case 0x00: val[0] = 0x01; break; /* SerNum */
		case 0x01: val[0] = 0x02; break; /* SerStr */
	}
	switch(val[0]) {
		case 0x04: /* SerBool -- boolean */
			val[1] = parsebool(blob, 1) ? 'TRUE' : 'FALSE';
			if(biff != 12) blob.l += 7; break;
		case 0x25: /* appears to be an alias */
		case 0x10: /* SerErr -- error */
			val[1] = BErr[blob[blob.l]];
			blob.l += ((biff == 12) ? 4 : 8); break;
		case 0x00: /* SerNil -- honestly, I'm not sure how to reproduce this */
			blob.l += 8; break;
		case 0x01: /* SerNum -- Xnum */
			val[1] = parse_Xnum(blob, 8); break;
		case 0x02: /* SerStr -- XLUnicodeString (<256 chars) */
			val[1] = parse_XLUnicodeString2(blob, 0, {biff:biff > 0 && biff < 8 ? 2 : biff}); break;
		default: throw new Error("Bad SerAr: " + val[0]); /* Unreachable */
	}
	return val;
}

/* [MS-XLS] 2.5.198.61 ; [MS-XLSB] 2.5.97.44 */
function parse_PtgExtraMem(blob, cce, opts) {
	var count = blob.read_shift((opts.biff == 12) ? 4 : 2);
	var out/*:Array<Range>*/ = [];
	for(var i = 0; i != count; ++i) out.push(((opts.biff == 12) ? parse_UncheckedRfX : parse_Ref8U)(blob, 8));
	return out;
}

/* [MS-XLS] 2.5.198.59 ; [MS-XLSB] 2.5.97.41 */
function parse_PtgExtraArray(blob, length, opts) {
	var rows = 0, cols = 0;
	if(opts.biff == 12) {
		rows = blob.read_shift(4); // DRw
		cols = blob.read_shift(4); // DCol
	} else {
		cols = 1 + blob.read_shift(1); //DColByteU
		rows = 1 + blob.read_shift(2); //DRw
	}
	if(opts.biff >= 2 && opts.biff < 8) { --rows; if(--cols == 0) cols = 0x100; }
	// $FlowIgnore
	for(var i = 0, o/*:Array<Array<any>>*/ = []; i != rows && (o[i] = []); ++i)
		for(var j = 0; j != cols; ++j) o[i][j] = parse_SerAr(blob, opts.biff);
	return o;
}

/* [MS-XLS] 2.5.198.76 ; [MS-XLSB] 2.5.97.60 */
function parse_PtgName(blob, length, opts) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	var w = (!opts || (opts.biff >= 8)) ? 4 : 2;
	var nameindex = blob.read_shift(w);
	switch(opts.biff) {
		case 2: blob.l += 5; break;
		case 3: case 4: blob.l += 8; break;
		case 5: blob.l += 12; break;
	}
	return [type, 0, nameindex];
}

/* [MS-XLS] 2.5.198.77 ; [MS-XLSB] 2.5.97.61 */
function parse_PtgNameX(blob, length, opts) {
	if(opts.biff == 5) return parse_PtgNameX_BIFF5(blob, length, opts);
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	var ixti = blob.read_shift(2); // XtiIndex
	var nameindex = blob.read_shift(4);
	return [type, ixti, nameindex];
}
function parse_PtgNameX_BIFF5(blob/*::, length, opts*/) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	var ixti = blob.read_shift(2, 'i'); // XtiIndex
	blob.l += 8;
	var nameindex = blob.read_shift(2);
	blob.l += 12;
	return [type, ixti, nameindex];
}

/* [MS-XLS] 2.5.198.70 ; [MS-XLSB] 2.5.97.54 */
function parse_PtgMemArea(blob, length, opts) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	blob.l += (opts && opts.biff == 2 ? 3 : 4);
	var cce = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);
	return [type, cce];
}

/* [MS-XLS] 2.5.198.72 ; [MS-XLSB] 2.5.97.56 */
function parse_PtgMemFunc(blob, length, opts) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	var cce = blob.read_shift(opts && opts.biff == 2 ? 1 : 2);
	return [type, cce];
}


/* [MS-XLS] 2.5.198.86 ; [MS-XLSB] 2.5.97.69 */
function parse_PtgRefErr(blob, length, opts) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	blob.l += 4;
	if(opts.biff < 8) blob.l--;
	if(opts.biff == 12) blob.l += 2;
	return [type];
}

/* [MS-XLS] 2.5.198.87 ; [MS-XLSB] 2.5.97.71 */
function parse_PtgRefErr3d(blob, length, opts) {
	var type = (blob[blob.l++] & 0x60) >> 5;
	var ixti = blob.read_shift(2);
	var w = 4;
	if(opts) switch(opts.biff) {
		case 5: w = 15; break;
		case 12: w = 6; break;
	}
	blob.l += w;
	return [type, ixti];
}

/* [MS-XLS] 2.5.198.71 ; [MS-XLSB] 2.5.97.55 */
var parse_PtgMemErr = parsenoop;
/* [MS-XLS] 2.5.198.73  ; [MS-XLSB] 2.5.97.57 */
var parse_PtgMemNoMem = parsenoop;
/* [MS-XLS] 2.5.198.92 */
var parse_PtgTbl = parsenoop;

function parse_PtgElfLoc(blob, length, opts) {
	blob.l += 2;
	return [parse_RgceElfLoc(blob, 4, opts)];
}
function parse_PtgElfNoop(blob/*::, length, opts*/) {
	blob.l += 6;
	return [];
}
/* [MS-XLS] 2.5.198.46 */
var parse_PtgElfCol = parse_PtgElfLoc;
/* [MS-XLS] 2.5.198.47 */
var parse_PtgElfColS = parse_PtgElfNoop;
/* [MS-XLS] 2.5.198.48 */
var parse_PtgElfColSV = parse_PtgElfNoop;
/* [MS-XLS] 2.5.198.49 */
var parse_PtgElfColV = parse_PtgElfLoc;
/* [MS-XLS] 2.5.198.50 */
function parse_PtgElfLel(blob/*::, length, opts*/) {
	blob.l += 2;
	return [parseuint16(blob), blob.read_shift(2) & 0x01];
}
/* [MS-XLS] 2.5.198.51 */
var parse_PtgElfRadical = parse_PtgElfLoc;
/* [MS-XLS] 2.5.198.52 */
var parse_PtgElfRadicalLel = parse_PtgElfLel;
/* [MS-XLS] 2.5.198.53 */
var parse_PtgElfRadicalS = parse_PtgElfNoop;
/* [MS-XLS] 2.5.198.54 */
var parse_PtgElfRw = parse_PtgElfLoc;
/* [MS-XLS] 2.5.198.55 */
var parse_PtgElfRwV = parse_PtgElfLoc;

/* [MS-XLSB] 2.5.97.52 TODO */
var PtgListRT = [
	"Data",
	"All",
	"Headers",
	"??",
	"?Data2",
	"??",
	"?DataHeaders",
	"??",
	"Totals",
	"??",
	"??",
	"??",
	"?DataTotals",
	"??",
	"??",
	"??",
	"?Current"
];
function parse_PtgList(blob/*::, length, opts*/) {
	blob.l += 2;
	var ixti = blob.read_shift(2);
	var flags = blob.read_shift(2);
	var idx = blob.read_shift(4);
	var c = blob.read_shift(2);
	var C = blob.read_shift(2);
	var rt = PtgListRT[(flags >> 2) & 0x1F];
	return {ixti: ixti, coltype:(flags&0x3), rt:rt, idx:idx, c:c, C:C};
}
/* [MS-XLS] 2.5.198.91 ; [MS-XLSB] 2.5.97.76 */
function parse_PtgSxName(blob/*::, length, opts*/) {
	blob.l += 2;
	return [blob.read_shift(4)];
}

/* [XLS] old spec */
function parse_PtgSheet(blob, length, opts) {
	blob.l += 5;
	blob.l += 2;
	blob.l += (opts.biff == 2 ? 1 : 4);
	return ["PTGSHEET"];
}
function parse_PtgEndSheet(blob, length, opts) {
	blob.l += (opts.biff == 2 ? 4 : 5);
	return ["PTGENDSHEET"];
}
function parse_PtgMemAreaN(blob/*::, length, opts*/) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	var cce = blob.read_shift(2);
	return [type, cce];
}
function parse_PtgMemNoMemN(blob/*::, length, opts*/) {
	var type = (blob.read_shift(1) >>> 5) & 0x03;
	var cce = blob.read_shift(2);
	return [type, cce];
}
function parse_PtgAttrNoop(blob/*::, length, opts*/) {
	blob.l += 4;
	return [0, 0];
}

/* [MS-XLS] 2.5.198.25 ; [MS-XLSB] 2.5.97.16 */
var PtgTypes = {
	/*::[*/0x01/*::]*/: { n:'PtgExp', f:parse_PtgExp },
	/*::[*/0x02/*::]*/: { n:'PtgTbl', f:parse_PtgTbl },
	/*::[*/0x03/*::]*/: { n:'PtgAdd', f:parseread1 },
	/*::[*/0x04/*::]*/: { n:'PtgSub', f:parseread1 },
	/*::[*/0x05/*::]*/: { n:'PtgMul', f:parseread1 },
	/*::[*/0x06/*::]*/: { n:'PtgDiv', f:parseread1 },
	/*::[*/0x07/*::]*/: { n:'PtgPower', f:parseread1 },
	/*::[*/0x08/*::]*/: { n:'PtgConcat', f:parseread1 },
	/*::[*/0x09/*::]*/: { n:'PtgLt', f:parseread1 },
	/*::[*/0x0A/*::]*/: { n:'PtgLe', f:parseread1 },
	/*::[*/0x0B/*::]*/: { n:'PtgEq', f:parseread1 },
	/*::[*/0x0C/*::]*/: { n:'PtgGe', f:parseread1 },
	/*::[*/0x0D/*::]*/: { n:'PtgGt', f:parseread1 },
	/*::[*/0x0E/*::]*/: { n:'PtgNe', f:parseread1 },
	/*::[*/0x0F/*::]*/: { n:'PtgIsect', f:parseread1 },
	/*::[*/0x10/*::]*/: { n:'PtgUnion', f:parseread1 },
	/*::[*/0x11/*::]*/: { n:'PtgRange', f:parseread1 },
	/*::[*/0x12/*::]*/: { n:'PtgUplus', f:parseread1 },
	/*::[*/0x13/*::]*/: { n:'PtgUminus', f:parseread1 },
	/*::[*/0x14/*::]*/: { n:'PtgPercent', f:parseread1 },
	/*::[*/0x15/*::]*/: { n:'PtgParen', f:parseread1 },
	/*::[*/0x16/*::]*/: { n:'PtgMissArg', f:parseread1 },
	/*::[*/0x17/*::]*/: { n:'PtgStr', f:parse_PtgStr },
	/*::[*/0x1A/*::]*/: { n:'PtgSheet', f:parse_PtgSheet },
	/*::[*/0x1B/*::]*/: { n:'PtgEndSheet', f:parse_PtgEndSheet },
	/*::[*/0x1C/*::]*/: { n:'PtgErr', f:parse_PtgErr },
	/*::[*/0x1D/*::]*/: { n:'PtgBool', f:parse_PtgBool },
	/*::[*/0x1E/*::]*/: { n:'PtgInt', f:parse_PtgInt },
	/*::[*/0x1F/*::]*/: { n:'PtgNum', f:parse_PtgNum },
	/*::[*/0x20/*::]*/: { n:'PtgArray', f:parse_PtgArray },
	/*::[*/0x21/*::]*/: { n:'PtgFunc', f:parse_PtgFunc },
	/*::[*/0x22/*::]*/: { n:'PtgFuncVar', f:parse_PtgFuncVar },
	/*::[*/0x23/*::]*/: { n:'PtgName', f:parse_PtgName },
	/*::[*/0x24/*::]*/: { n:'PtgRef', f:parse_PtgRef },
	/*::[*/0x25/*::]*/: { n:'PtgArea', f:parse_PtgArea },
	/*::[*/0x26/*::]*/: { n:'PtgMemArea', f:parse_PtgMemArea },
	/*::[*/0x27/*::]*/: { n:'PtgMemErr', f:parse_PtgMemErr },
	/*::[*/0x28/*::]*/: { n:'PtgMemNoMem', f:parse_PtgMemNoMem },
	/*::[*/0x29/*::]*/: { n:'PtgMemFunc', f:parse_PtgMemFunc },
	/*::[*/0x2A/*::]*/: { n:'PtgRefErr', f:parse_PtgRefErr },
	/*::[*/0x2B/*::]*/: { n:'PtgAreaErr', f:parse_PtgAreaErr },
	/*::[*/0x2C/*::]*/: { n:'PtgRefN', f:parse_PtgRefN },
	/*::[*/0x2D/*::]*/: { n:'PtgAreaN', f:parse_PtgAreaN },
	/*::[*/0x2E/*::]*/: { n:'PtgMemAreaN', f:parse_PtgMemAreaN },
	/*::[*/0x2F/*::]*/: { n:'PtgMemNoMemN', f:parse_PtgMemNoMemN },
	/*::[*/0x39/*::]*/: { n:'PtgNameX', f:parse_PtgNameX },
	/*::[*/0x3A/*::]*/: { n:'PtgRef3d', f:parse_PtgRef3d },
	/*::[*/0x3B/*::]*/: { n:'PtgArea3d', f:parse_PtgArea3d },
	/*::[*/0x3C/*::]*/: { n:'PtgRefErr3d', f:parse_PtgRefErr3d },
	/*::[*/0x3D/*::]*/: { n:'PtgAreaErr3d', f:parse_PtgAreaErr3d },
	/*::[*/0xFF/*::]*/: {}
};
/* These are duplicated in the PtgTypes table */
var PtgDupes = {
	/*::[*/0x40/*::]*/: 0x20, /*::[*/0x60/*::]*/: 0x20,
	/*::[*/0x41/*::]*/: 0x21, /*::[*/0x61/*::]*/: 0x21,
	/*::[*/0x42/*::]*/: 0x22, /*::[*/0x62/*::]*/: 0x22,
	/*::[*/0x43/*::]*/: 0x23, /*::[*/0x63/*::]*/: 0x23,
	/*::[*/0x44/*::]*/: 0x24, /*::[*/0x64/*::]*/: 0x24,
	/*::[*/0x45/*::]*/: 0x25, /*::[*/0x65/*::]*/: 0x25,
	/*::[*/0x46/*::]*/: 0x26, /*::[*/0x66/*::]*/: 0x26,
	/*::[*/0x47/*::]*/: 0x27, /*::[*/0x67/*::]*/: 0x27,
	/*::[*/0x48/*::]*/: 0x28, /*::[*/0x68/*::]*/: 0x28,
	/*::[*/0x49/*::]*/: 0x29, /*::[*/0x69/*::]*/: 0x29,
	/*::[*/0x4A/*::]*/: 0x2A, /*::[*/0x6A/*::]*/: 0x2A,
	/*::[*/0x4B/*::]*/: 0x2B, /*::[*/0x6B/*::]*/: 0x2B,
	/*::[*/0x4C/*::]*/: 0x2C, /*::[*/0x6C/*::]*/: 0x2C,
	/*::[*/0x4D/*::]*/: 0x2D, /*::[*/0x6D/*::]*/: 0x2D,
	/*::[*/0x4E/*::]*/: 0x2E, /*::[*/0x6E/*::]*/: 0x2E,
	/*::[*/0x4F/*::]*/: 0x2F, /*::[*/0x6F/*::]*/: 0x2F,
	/*::[*/0x58/*::]*/: 0x22, /*::[*/0x78/*::]*/: 0x22,
	/*::[*/0x59/*::]*/: 0x39, /*::[*/0x79/*::]*/: 0x39,
	/*::[*/0x5A/*::]*/: 0x3A, /*::[*/0x7A/*::]*/: 0x3A,
	/*::[*/0x5B/*::]*/: 0x3B, /*::[*/0x7B/*::]*/: 0x3B,
	/*::[*/0x5C/*::]*/: 0x3C, /*::[*/0x7C/*::]*/: 0x3C,
	/*::[*/0x5D/*::]*/: 0x3D, /*::[*/0x7D/*::]*/: 0x3D
};

var Ptg18 = {
	/*::[*/0x01/*::]*/: { n:'PtgElfLel', f:parse_PtgElfLel },
	/*::[*/0x02/*::]*/: { n:'PtgElfRw', f:parse_PtgElfRw },
	/*::[*/0x03/*::]*/: { n:'PtgElfCol', f:parse_PtgElfCol },
	/*::[*/0x06/*::]*/: { n:'PtgElfRwV', f:parse_PtgElfRwV },
	/*::[*/0x07/*::]*/: { n:'PtgElfColV', f:parse_PtgElfColV },
	/*::[*/0x0A/*::]*/: { n:'PtgElfRadical', f:parse_PtgElfRadical },
	/*::[*/0x0B/*::]*/: { n:'PtgElfRadicalS', f:parse_PtgElfRadicalS },
	/*::[*/0x0D/*::]*/: { n:'PtgElfColS', f:parse_PtgElfColS },
	/*::[*/0x0F/*::]*/: { n:'PtgElfColSV', f:parse_PtgElfColSV },
	/*::[*/0x10/*::]*/: { n:'PtgElfRadicalLel', f:parse_PtgElfRadicalLel },
	/*::[*/0x19/*::]*/: { n:'PtgList', f:parse_PtgList },
	/*::[*/0x1D/*::]*/: { n:'PtgSxName', f:parse_PtgSxName },
	/*::[*/0xFF/*::]*/: {}
};
var Ptg19 = {
	/*::[*/0x00/*::]*/: { n:'PtgAttrNoop', f:parse_PtgAttrNoop },
	/*::[*/0x01/*::]*/: { n:'PtgAttrSemi', f:parse_PtgAttrSemi },
	/*::[*/0x02/*::]*/: { n:'PtgAttrIf', f:parse_PtgAttrIf },
	/*::[*/0x04/*::]*/: { n:'PtgAttrChoose', f:parse_PtgAttrChoose },
	/*::[*/0x08/*::]*/: { n:'PtgAttrGoto', f:parse_PtgAttrGoto },
	/*::[*/0x10/*::]*/: { n:'PtgAttrSum', f:parse_PtgAttrSum },
	/*::[*/0x20/*::]*/: { n:'PtgAttrBaxcel', f:parse_PtgAttrBaxcel },
	/*::[*/0x21/*::]*/: { n:'PtgAttrBaxcel', f:parse_PtgAttrBaxcel },
	/*::[*/0x40/*::]*/: { n:'PtgAttrSpace', f:parse_PtgAttrSpace },
	/*::[*/0x41/*::]*/: { n:'PtgAttrSpaceSemi', f:parse_PtgAttrSpaceSemi },
	/*::[*/0x80/*::]*/: { n:'PtgAttrIfError', f:parse_PtgAttrIfError },
	/*::[*/0xFF/*::]*/: {}
};

/* [MS-XLS] 2.5.198.103 ; [MS-XLSB] 2.5.97.87 */
function parse_RgbExtra(blob, length, rgce, opts) {
	if(opts.biff < 8) return parsenoop(blob, length);
	var target = blob.l + length;
	var o = [];
	for(var i = 0; i !== rgce.length; ++i) {
		switch(rgce[i][0]) {
			case 'PtgArray': /* PtgArray -> PtgExtraArray */
				rgce[i][1] = parse_PtgExtraArray(blob, 0, opts);
				o.push(rgce[i][1]);
				break;
			case 'PtgMemArea': /* PtgMemArea -> PtgExtraMem */
				rgce[i][2] = parse_PtgExtraMem(blob, rgce[i][1], opts);
				o.push(rgce[i][2]);
				break;
			case 'PtgExp': /* PtgExp -> PtgExtraCol */
				if(opts && opts.biff == 12) {
					rgce[i][1][1] = blob.read_shift(4);
					o.push(rgce[i][1]);
				} break;
			case 'PtgList': /* TODO: PtgList -> PtgExtraList */
			case 'PtgElfRadicalS': /* TODO: PtgElfRadicalS -> PtgExtraElf */
			case 'PtgElfColS': /* TODO: PtgElfColS -> PtgExtraElf */
			case 'PtgElfColSV': /* TODO: PtgElfColSV -> PtgExtraElf */
				throw "Unsupported " + rgce[i][0];
			default: break;
		}
	}
	length = target - blob.l;
	/* note: this is technically an error but Excel disregards */
	//if(target !== blob.l && blob.l !== target - length) throw new Error(target + " != " + blob.l);
	if(length !== 0) o.push(parsenoop(blob, length));
	return o;
}

/* [MS-XLS] 2.5.198.104 ; [MS-XLSB] 2.5.97.88 */
function parse_Rgce(blob, length, opts) {
	var target = blob.l + length;
	var R, id, ptgs = [];
	while(target != blob.l) {
		length = target - blob.l;
		id = blob[blob.l];
		R = PtgTypes[id] || PtgTypes[PtgDupes[id]];
		if(id === 0x18 || id === 0x19) R = (id === 0x18 ? Ptg18 : Ptg19)[blob[blob.l + 1]];
		if(!R || !R.f) { /*ptgs.push*/(parsenoop(blob, length)); }
		else { ptgs.push([R.n, R.f(blob, length, opts)]); }
	}
	return ptgs;
}

function stringify_array(f/*:Array<Array<string>>*/)/*:string*/ {
	var o/*:Array<string>*/ = [];
	for(var i = 0; i < f.length; ++i) {
		var x = f[i], r/*:Array<string>*/ = [];
		for(var j = 0; j < x.length; ++j) {
			var y = x[j];
			if(y) switch(y[0]) {
				// TODO: handle embedded quotes
				case 0x02:
					/*:: if(typeof y[1] != 'string') throw "unreachable"; */
					r.push('"' + y[1].replace(/"/g,'""') + '"'); break;
				default: r.push(y[1]);
			} else r.push("");
		}
		o.push(r.join(","));
	}
	return o.join(";");
}

/* [MS-XLS] 2.2.2 ; [MS-XLSB] 2.2.2 TODO */
var PtgBinOp = {
	PtgAdd: "+",
	PtgConcat: "&",
	PtgDiv: "/",
	PtgEq: "=",
	PtgGe: ">=",
	PtgGt: ">",
	PtgLe: "<=",
	PtgLt: "<",
	PtgMul: "*",
	PtgNe: "<>",
	PtgPower: "^",
	PtgSub: "-"
};

// List of invalid characters needs to be tested further
function formula_quote_sheet_name(sname/*:string*/, opts)/*:string*/ {
	if(!sname && !(opts && opts.biff <= 5 && opts.biff >= 2)) throw new Error("empty sheet name");
	if (/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(sname)) return "'" + sname + "'";
	return sname;
}
function get_ixti_raw(supbooks, ixti/*:number*/, opts)/*:string*/ {
	if(!supbooks) return "SH33TJSERR0";
	if(opts.biff > 8 && (!supbooks.XTI || !supbooks.XTI[ixti])) return supbooks.SheetNames[ixti];
	if(!supbooks.XTI) return "SH33TJSERR6";
	var XTI = supbooks.XTI[ixti];
	if(opts.biff < 8) {
		if(ixti > 10000) ixti-= 65536;
		if(ixti < 0) ixti = -ixti;
		return ixti == 0 ? "" : supbooks.XTI[ixti - 1];
	}
	if(!XTI) return "SH33TJSERR1";
	var o = "";
	if(opts.biff > 8) switch(supbooks[XTI[0]][0]) {
		case 0x0165: /* 'BrtSupSelf' */
			o = XTI[1] == -1 ? "#REF" : supbooks.SheetNames[XTI[1]];
			return XTI[1] == XTI[2] ? o : o + ":" + supbooks.SheetNames[XTI[2]];
		case 0x0166: /* 'BrtSupSame' */
			if(opts.SID != null) return supbooks.SheetNames[opts.SID];
			return "SH33TJSSAME" + supbooks[XTI[0]][0];
		case 0x0163: /* 'BrtSupBookSrc' */
			/* falls through */
		default: return "SH33TJSSRC" + supbooks[XTI[0]][0];
	}
	switch(supbooks[XTI[0]][0][0]) {
		case 0x0401:
			o = XTI[1] == -1 ? "#REF" : (supbooks.SheetNames[XTI[1]] || "SH33TJSERR3");
			return XTI[1] == XTI[2] ? o : o + ":" + supbooks.SheetNames[XTI[2]];
		case 0x3A01: return supbooks[XTI[0]].slice(1).map(function(name) { return name.Name; }).join(";;"); //return "SH33TJSERR8";
		default:
			if(!supbooks[XTI[0]][0][3]) return "SH33TJSERR2";
			o = XTI[1] == -1 ? "#REF" : (supbooks[XTI[0]][0][3][XTI[1]] || "SH33TJSERR4");
			return XTI[1] == XTI[2] ? o : o + ":" + supbooks[XTI[0]][0][3][XTI[2]];
	}
}
function get_ixti(supbooks, ixti/*:number*/, opts)/*:string*/ {
	var ixtiraw = get_ixti_raw(supbooks, ixti, opts);
	return ixtiraw == "#REF" ? ixtiraw : formula_quote_sheet_name(ixtiraw, opts);
}
function stringify_formula(formula/*Array<any>*/, range, cell/*:any*/, supbooks, opts)/*:string*/ {
	var biff = (opts && opts.biff) || 8;
	var _range = /*range != null ? range :*/ {s:{c:0, r:0},e:{c:0, r:0}};
	var stack/*:Array<string>*/ = [], e1, e2, /*::type,*/ c/*:CellAddress*/, ixti=0, nameidx=0, r, sname="";
	if(!formula[0] || !formula[0][0]) return "";
	var last_sp = -1, sp = "";
	for(var ff = 0, fflen = formula[0].length; ff < fflen; ++ff) {
		var f = formula[0][ff];
		switch(f[0]) {
			case 'PtgUminus': /* [MS-XLS] 2.5.198.93 */
				stack.push("-" + stack.pop()); break;
			case 'PtgUplus': /* [MS-XLS] 2.5.198.95 */
				stack.push("+" + stack.pop()); break;
			case 'PtgPercent': /* [MS-XLS] 2.5.198.81 */
				stack.push(stack.pop() + "%"); break;

			case 'PtgAdd':    /* [MS-XLS] 2.5.198.26 */
			case 'PtgConcat': /* [MS-XLS] 2.5.198.43 */
			case 'PtgDiv':    /* [MS-XLS] 2.5.198.45 */
			case 'PtgEq':     /* [MS-XLS] 2.5.198.56 */
			case 'PtgGe':     /* [MS-XLS] 2.5.198.64 */
			case 'PtgGt':     /* [MS-XLS] 2.5.198.65 */
			case 'PtgLe':     /* [MS-XLS] 2.5.198.68 */
			case 'PtgLt':     /* [MS-XLS] 2.5.198.69 */
			case 'PtgMul':    /* [MS-XLS] 2.5.198.75 */
			case 'PtgNe':     /* [MS-XLS] 2.5.198.78 */
			case 'PtgPower':  /* [MS-XLS] 2.5.198.82 */
			case 'PtgSub':    /* [MS-XLS] 2.5.198.90 */
				e1 = stack.pop(); e2 = stack.pop();
				if(last_sp >= 0) {
					switch(formula[0][last_sp][1][0]) {
						case 0:
							// $FlowIgnore
							sp = fill(" ", formula[0][last_sp][1][1]); break;
						case 1:
							// $FlowIgnore
							sp = fill("\r", formula[0][last_sp][1][1]); break;
						default:
							sp = "";
							// $FlowIgnore
							if(opts.WTF) throw new Error("Unexpected PtgAttrSpaceType " + formula[0][last_sp][1][0]);
					}
					e2 = e2 + sp;
					last_sp = -1;
				}
				stack.push(e2+PtgBinOp[f[0]]+e1);
				break;

			case 'PtgIsect': /* [MS-XLS] 2.5.198.67 */
				e1 = stack.pop(); e2 = stack.pop();
				stack.push(e2+" "+e1);
				break;
			case 'PtgUnion': /* [MS-XLS] 2.5.198.94 */
				e1 = stack.pop(); e2 = stack.pop();
				stack.push(e2+","+e1);
				break;
			case 'PtgRange': /* [MS-XLS] 2.5.198.83 */
				e1 = stack.pop(); e2 = stack.pop();
				stack.push(e2+":"+e1);
				break;

			case 'PtgAttrChoose': /* [MS-XLS] 2.5.198.34 */
				break;
			case 'PtgAttrGoto': /* [MS-XLS] 2.5.198.35 */
				break;
			case 'PtgAttrIf': /* [MS-XLS] 2.5.198.36 */
				break;
			case 'PtgAttrIfError': /* [MS-XLSB] 2.5.97.28 */
				break;


			case 'PtgRef': /* [MS-XLS] 2.5.198.84 */
				/*::type = f[1][0]; */c = shift_cell_xls((f[1][1]/*:any*/), _range, opts);
				stack.push(encode_cell_xls(c, biff));
				break;
			case 'PtgRefN': /* [MS-XLS] 2.5.198.88 */
				/*::type = f[1][0]; */c = cell ? shift_cell_xls((f[1][1]/*:any*/), cell, opts) : (f[1][1]/*:any*/);
				stack.push(encode_cell_xls(c, biff));
				break;
			case 'PtgRef3d': /* [MS-XLS] 2.5.198.85 */
				/*::type = f[1][0]; */ixti = /*::Number(*/f[1][1]/*::)*/; c = shift_cell_xls((f[1][2]/*:any*/), _range, opts);
				sname = get_ixti(supbooks, ixti, opts);
				var w = sname; /* IE9 fails on defined names */ // eslint-disable-line no-unused-vars
				stack.push(sname + "!" + encode_cell_xls(c, biff));
				break;

			case 'PtgFunc': /* [MS-XLS] 2.5.198.62 */
			case 'PtgFuncVar': /* [MS-XLS] 2.5.198.63 */
				/* f[1] = [argc, func, type] */
				var argc/*:number*/ = (f[1][0]/*:any*/), func/*:string*/ = (f[1][1]/*:any*/);
				if(!argc) argc = 0;
				argc &= 0x7F;
				var args = argc == 0 ? [] : stack.slice(-argc);
				stack.length -= argc;
				if(func === 'User') func = args.shift();
				stack.push(func + "(" + args.join(",") + ")");
				break;

			case 'PtgBool': /* [MS-XLS] 2.5.198.42 */
				stack.push(f[1] ? "TRUE" : "FALSE"); break;
			case 'PtgInt': /* [MS-XLS] 2.5.198.66 */
				stack.push(/*::String(*/f[1]/*::)*/); break;
			case 'PtgNum': /* [MS-XLS] 2.5.198.79 TODO: precision? */
				stack.push(String(f[1])); break;
			case 'PtgStr': /* [MS-XLS] 2.5.198.89 */
				// $FlowIgnore
				stack.push('"' + f[1].replace(/"/g, '""') + '"'); break;
			case 'PtgErr': /* [MS-XLS] 2.5.198.57 */
				stack.push(/*::String(*/f[1]/*::)*/); break;
			case 'PtgAreaN': /* [MS-XLS] 2.5.198.31 TODO */
				/*::type = f[1][0]; */r = shift_range_xls(f[1][1], cell ? {s:cell} : _range, opts);
				stack.push(encode_range_xls((r/*:any*/), opts));
				break;
			case 'PtgArea': /* [MS-XLS] 2.5.198.27 TODO: fixed points */
				/*::type = f[1][0]; */r = shift_range_xls(f[1][1], _range, opts);
				stack.push(encode_range_xls((r/*:any*/), opts));
				break;
			case 'PtgArea3d': /* [MS-XLS] 2.5.198.28 TODO */
				/*::type = f[1][0]; */ixti = /*::Number(*/f[1][1]/*::)*/; r = f[1][2];
				sname = get_ixti(supbooks, ixti, opts);
				stack.push(sname + "!" + encode_range_xls((r/*:any*/), opts));
				break;
			case 'PtgAttrSum': /* [MS-XLS] 2.5.198.41 */
				stack.push("SUM(" + stack.pop() + ")");
				break;

			case 'PtgAttrBaxcel': /* [MS-XLS] 2.5.198.33 */
			case 'PtgAttrSemi': /* [MS-XLS] 2.5.198.37 */
				break;

			case 'PtgName': /* [MS-XLS] 2.5.198.76 ; [MS-XLSB] 2.5.97.60 TODO: revisions */
				/* f[1] = type, 0, nameindex */
				nameidx = (f[1][2]/*:any*/);
				var lbl = (supbooks.names||[])[nameidx-1] || (supbooks[0]||[])[nameidx];
				var name = lbl ? lbl.Name : "SH33TJSNAME" + String(nameidx);
				/* [MS-XLSB] 2.5.97.10 Ftab -- last verified 20220204 */
				if(name && name.slice(0,6) == "_xlfn." && !opts.xlfn) name = name.slice(6);
				stack.push(name);
				break;

			case 'PtgNameX': /* [MS-XLS] 2.5.198.77 ; [MS-XLSB] 2.5.97.61 TODO: revisions */
				/* f[1] = type, ixti, nameindex */
				var bookidx/*:number*/ = (f[1][1]/*:any*/); nameidx = (f[1][2]/*:any*/); var externbook;
				/* TODO: Properly handle missing values -- this should be using get_ixti_raw primarily */
				if(opts.biff <= 5) {
					if(bookidx < 0) bookidx = -bookidx;
					if(supbooks[bookidx]) externbook = supbooks[bookidx][nameidx];
				} else {
					var o = "";
					if(((supbooks[bookidx]||[])[0]||[])[0] == 0x3A01){/* empty */}
					else if(((supbooks[bookidx]||[])[0]||[])[0] == 0x0401){
						if(supbooks[bookidx][nameidx] && supbooks[bookidx][nameidx].itab > 0) {
							o = supbooks.SheetNames[supbooks[bookidx][nameidx].itab-1] + "!";
						}
					}
					else o = supbooks.SheetNames[nameidx-1]+ "!";
					if(supbooks[bookidx] && supbooks[bookidx][nameidx]) o += supbooks[bookidx][nameidx].Name;
					else if(supbooks[0] && supbooks[0][nameidx]) o += supbooks[0][nameidx].Name;
					else {
						var ixtidata = (get_ixti_raw(supbooks, bookidx, opts)||"").split(";;");
						if(ixtidata[nameidx - 1]) o = ixtidata[nameidx - 1]; // TODO: confirm this is correct
						else o += "SH33TJSERRX";
					}
					stack.push(o);
					break;
				}
				if(!externbook) externbook = {Name: "SH33TJSERRY"};
				stack.push(externbook.Name);
				break;

			case 'PtgParen': /* [MS-XLS] 2.5.198.80 */
				var lp = '(', rp = ')';
				if(last_sp >= 0) {
					sp = "";
					switch(formula[0][last_sp][1][0]) {
						// $FlowIgnore
						case 2: lp = fill(" ", formula[0][last_sp][1][1]) + lp; break;
						// $FlowIgnore
						case 3: lp = fill("\r", formula[0][last_sp][1][1]) + lp; break;
						// $FlowIgnore
						case 4: rp = fill(" ", formula[0][last_sp][1][1]) + rp; break;
						// $FlowIgnore
						case 5: rp = fill("\r", formula[0][last_sp][1][1]) + rp; break;
						default:
							// $FlowIgnore
							if(opts.WTF) throw new Error("Unexpected PtgAttrSpaceType " + formula[0][last_sp][1][0]);
					}
					last_sp = -1;
				}
				stack.push(lp + stack.pop() + rp); break;

			case 'PtgRefErr': /* [MS-XLS] 2.5.198.86 */
				stack.push('#REF!'); break;

			case 'PtgRefErr3d': /* [MS-XLS] 2.5.198.87 */
				stack.push('#REF!'); break;

			case 'PtgExp': /* [MS-XLS] 2.5.198.58 TODO */
				c = {c:(f[1][1]/*:any*/),r:(f[1][0]/*:any*/)};
				var q = ({c: cell.c, r:cell.r}/*:any*/);
				if(supbooks.sharedf[encode_cell(c)]) {
					var parsedf = (supbooks.sharedf[encode_cell(c)]);
					stack.push(stringify_formula(parsedf, _range, q, supbooks, opts));
				} else {
					var fnd = false;
					for(e1=0;e1!=supbooks.arrayf.length; ++e1) {
						/* TODO: should be something like range_has */
						e2 = supbooks.arrayf[e1];
						if(c.c < e2[0].s.c || c.c > e2[0].e.c) continue;
						if(c.r < e2[0].s.r || c.r > e2[0].e.r) continue;
						stack.push(stringify_formula(e2[1], _range, q, supbooks, opts));
						fnd = true;
						break;
					}
					if(!fnd) stack.push(/*::String(*/f[1]/*::)*/);
				}
				break;

			case 'PtgArray': /* [MS-XLS] 2.5.198.32 TODO */
				stack.push("{" + stringify_array(/*::(*/f[1]/*:: :any)*/) + "}");
				break;

			case 'PtgMemArea': /* [MS-XLS] 2.5.198.70 TODO: confirm this is a non-display */
				//stack.push("(" + f[2].map(encode_range).join(",") + ")");
				break;

			case 'PtgAttrSpace': /* [MS-XLS] 2.5.198.38 */
			case 'PtgAttrSpaceSemi': /* [MS-XLS] 2.5.198.39 */
				last_sp = ff;
				break;

			case 'PtgTbl': /* [MS-XLS] 2.5.198.92 TODO */
				break;

			case 'PtgMemErr': /* [MS-XLS] 2.5.198.71 */
				break;

			case 'PtgMissArg': /* [MS-XLS] 2.5.198.74 */
				stack.push("");
				break;

			case 'PtgAreaErr': /* [MS-XLS] 2.5.198.29 */
				stack.push("#REF!"); break;

			case 'PtgAreaErr3d': /* [MS-XLS] 2.5.198.30 */
				stack.push("#REF!"); break;

			case 'PtgList': /* [MS-XLSB] 2.5.97.52 */
				// $FlowIgnore
				stack.push("Table" + f[1].idx + "[#" + f[1].rt + "]");
				break;

			case 'PtgMemAreaN':
			case 'PtgMemNoMemN':
			case 'PtgAttrNoop':
			case 'PtgSheet':
			case 'PtgEndSheet':
				break;

			case 'PtgMemFunc': /* [MS-XLS] 2.5.198.72 TODO */
				break;
			case 'PtgMemNoMem': /* [MS-XLS] 2.5.198.73 TODO */
				break;

			case 'PtgElfCol': /* [MS-XLS] 2.5.198.46 */
			case 'PtgElfColS': /* [MS-XLS] 2.5.198.47 */
			case 'PtgElfColSV': /* [MS-XLS] 2.5.198.48 */
			case 'PtgElfColV': /* [MS-XLS] 2.5.198.49 */
			case 'PtgElfLel': /* [MS-XLS] 2.5.198.50 */
			case 'PtgElfRadical': /* [MS-XLS] 2.5.198.51 */
			case 'PtgElfRadicalLel': /* [MS-XLS] 2.5.198.52 */
			case 'PtgElfRadicalS': /* [MS-XLS] 2.5.198.53 */
			case 'PtgElfRw': /* [MS-XLS] 2.5.198.54 */
			case 'PtgElfRwV': /* [MS-XLS] 2.5.198.55 */
				throw new Error("Unsupported ELFs");

			case 'PtgSxName': /* [MS-XLS] 2.5.198.91 TODO -- find a test case */
				throw new Error('Unrecognized Formula Token: ' + String(f));
			default: throw new Error('Unrecognized Formula Token: ' + String(f));
		}
		var PtgNonDisp = ['PtgAttrSpace', 'PtgAttrSpaceSemi', 'PtgAttrGoto'];
		if(opts.biff != 3) if(last_sp >= 0 && PtgNonDisp.indexOf(formula[0][ff][0]) == -1) {
			f = formula[0][last_sp];
			var _left = true;
			switch(f[1][0]) {
				/* note: some bad XLSB files omit the PtgParen */
				case 4: _left = false;
				/* falls through */
				case 0:
					// $FlowIgnore
					sp = fill(" ", f[1][1]); break;
				case 5: _left = false;
				/* falls through */
				case 1:
					// $FlowIgnore
					sp = fill("\r", f[1][1]); break;
				default:
					sp = "";
					// $FlowIgnore
					if(opts.WTF) throw new Error("Unexpected PtgAttrSpaceType " + f[1][0]);
			}
			stack.push((_left ? sp : "") + stack.pop() + (_left ? "" : sp));
			last_sp = -1;
		}
	}
	if(stack.length > 1 && opts.WTF) throw new Error("bad formula stack");
	return stack[0];
}

/* [MS-XLS] 2.5.198.1 TODO */
function parse_ArrayParsedFormula(blob, length, opts/*::, ref*/) {
	var target = blob.l + length, len = opts.biff == 2 ? 1 : 2;
	var rgcb, cce = blob.read_shift(len); // length of rgce
	if(cce == 0xFFFF) return [[],parsenoop(blob, length-2)];
	var rgce = parse_Rgce(blob, cce, opts);
	if(length !== cce + len) rgcb = parse_RgbExtra(blob, length - cce - len, rgce, opts);
	blob.l = target;
	return [rgce, rgcb];
}

/* [MS-XLS] 2.5.198.3 TODO */
function parse_XLSCellParsedFormula(blob, length, opts) {
	var target = blob.l + length, len = opts.biff == 2 ? 1 : 2;
	var rgcb, cce = blob.read_shift(len); // length of rgce
	if(cce == 0xFFFF) return [[],parsenoop(blob, length-2)];
	var rgce = parse_Rgce(blob, cce, opts);
	if(length !== cce + len) rgcb = parse_RgbExtra(blob, length - cce - len, rgce, opts);
	blob.l = target;
	return [rgce, rgcb];
}

/* [MS-XLS] 2.5.198.21 */
function parse_NameParsedFormula(blob, length, opts, cce) {
	var target = blob.l + length;
	var rgce = parse_Rgce(blob, cce, opts);
	var rgcb;
	if(target !== blob.l) rgcb = parse_RgbExtra(blob, target - blob.l, rgce, opts);
	return [rgce, rgcb];
}

/* [MS-XLS] 2.5.198.118 TODO */
function parse_SharedParsedFormula(blob, length, opts) {
	var target = blob.l + length;
	var rgcb, cce = blob.read_shift(2); // length of rgce
	var rgce = parse_Rgce(blob, cce, opts);
	if(cce == 0xFFFF) return [[],parsenoop(blob, length-2)];
	if(length !== cce + 2) rgcb = parse_RgbExtra(blob, target - cce - 2, rgce, opts);
	return [rgce, rgcb];
}

/* [MS-XLS] 2.5.133 TODO: how to emit empty strings? */
function parse_FormulaValue(blob/*::, length*/) {
	var b;
	if(__readUInt16LE(blob,blob.l + 6) !== 0xFFFF) return [parse_Xnum(blob),'n'];
	switch(blob[blob.l]) {
		case 0x00: blob.l += 8; return ["String", 's'];
		case 0x01: b = blob[blob.l+2] === 0x1; blob.l += 8; return [b,'b'];
		case 0x02: b = blob[blob.l+2]; blob.l += 8; return [b,'e'];
		case 0x03: blob.l += 8; return ["",'s'];
	}
	return [];
}
function write_FormulaValue(value) {
	if(value == null) {
		// Blank String Value
		var o = new_buf(8);
		o.write_shift(1, 0x03);
		o.write_shift(1, 0);
		o.write_shift(2, 0);
		o.write_shift(2, 0);
		o.write_shift(2, 0xFFFF);
		return o;
	} else if(typeof value == "number") return write_Xnum(value);
	return write_Xnum(0);
}

/* [MS-XLS] 2.4.127 TODO */
function parse_Formula(blob, length, opts) {
	var end = blob.l + length;
	var cell = parse_XLSCell(blob, 6);
	if(opts.biff == 2) ++blob.l;
	var val = parse_FormulaValue(blob,8);
	var flags = blob.read_shift(1);
	if(opts.biff != 2) {
		blob.read_shift(1);
		if(opts.biff >= 5) {
			/*var chn = */blob.read_shift(4);
		}
	}
	var cbf = parse_XLSCellParsedFormula(blob, end - blob.l, opts);
	return {cell:cell, val:val[0], formula:cbf, shared: (flags >> 3) & 1, tt:val[1]};
}
function write_Formula(cell/*:Cell*/, R/*:number*/, C/*:number*/, opts, os/*:number*/) {
	// Cell
	var o1 = write_XLSCell(R, C, os);

	// FormulaValue
	var o2 = write_FormulaValue(cell.v);

	// flags + cache
	var o3 = new_buf(6);
	var flags = 0x01 | 0x20;
	o3.write_shift(2, flags);
	o3.write_shift(4, 0);

	// CellParsedFormula
	var bf = new_buf(cell.bf.length);
	for(var i = 0; i < cell.bf.length; ++i) bf[i] = cell.bf[i];

	var out = bconcat([o1, o2, o3, bf]);
	return out;
}


/* XLSB Parsed Formula records have the same shape */
function parse_XLSBParsedFormula(data, length, opts) {
	var cce = data.read_shift(4);
	var rgce = parse_Rgce(data, cce, opts);
	var cb = data.read_shift(4);
	var rgcb = cb > 0 ? parse_RgbExtra(data, cb, rgce, opts) : null;
	return [rgce, rgcb];
}

/* [MS-XLSB] 2.5.97.1 ArrayParsedFormula */
var parse_XLSBArrayParsedFormula = parse_XLSBParsedFormula;
/* [MS-XLSB] 2.5.97.4 CellParsedFormula */
var parse_XLSBCellParsedFormula = parse_XLSBParsedFormula;
/* [MS-XLSB] 2.5.97.8 DVParsedFormula */
//var parse_XLSBDVParsedFormula = parse_XLSBParsedFormula;
/* [MS-XLSB] 2.5.97.9 FRTParsedFormula */
//var parse_XLSBFRTParsedFormula = parse_XLSBParsedFormula2;
/* [MS-XLSB] 2.5.97.12 NameParsedFormula */
var parse_XLSBNameParsedFormula = parse_XLSBParsedFormula;
/* [MS-XLSB] 2.5.97.98 SharedParsedFormula */
var parse_XLSBSharedParsedFormula = parse_XLSBParsedFormula;
var Cetab = {
  0: "BEEP",
  1: "OPEN",
  2: "OPEN.LINKS",
  3: "CLOSE.ALL",
  4: "SAVE",
  5: "SAVE.AS",
  6: "FILE.DELETE",
  7: "PAGE.SETUP",
  8: "PRINT",
  9: "PRINTER.SETUP",
  10: "QUIT",
  11: "NEW.WINDOW",
  12: "ARRANGE.ALL",
  13: "WINDOW.SIZE",
  14: "WINDOW.MOVE",
  15: "FULL",
  16: "CLOSE",
  17: "RUN",
  22: "SET.PRINT.AREA",
  23: "SET.PRINT.TITLES",
  24: "SET.PAGE.BREAK",
  25: "REMOVE.PAGE.BREAK",
  26: "FONT",
  27: "DISPLAY",
  28: "PROTECT.DOCUMENT",
  29: "PRECISION",
  30: "A1.R1C1",
  31: "CALCULATE.NOW",
  32: "CALCULATION",
  34: "DATA.FIND",
  35: "EXTRACT",
  36: "DATA.DELETE",
  37: "SET.DATABASE",
  38: "SET.CRITERIA",
  39: "SORT",
  40: "DATA.SERIES",
  41: "TABLE",
  42: "FORMAT.NUMBER",
  43: "ALIGNMENT",
  44: "STYLE",
  45: "BORDER",
  46: "CELL.PROTECTION",
  47: "COLUMN.WIDTH",
  48: "UNDO",
  49: "CUT",
  50: "COPY",
  51: "PASTE",
  52: "CLEAR",
  53: "PASTE.SPECIAL",
  54: "EDIT.DELETE",
  55: "INSERT",
  56: "FILL.RIGHT",
  57: "FILL.DOWN",
  61: "DEFINE.NAME",
  62: "CREATE.NAMES",
  63: "FORMULA.GOTO",
  64: "FORMULA.FIND",
  65: "SELECT.LAST.CELL",
  66: "SHOW.ACTIVE.CELL",
  67: "GALLERY.AREA",
  68: "GALLERY.BAR",
  69: "GALLERY.COLUMN",
  70: "GALLERY.LINE",
  71: "GALLERY.PIE",
  72: "GALLERY.SCATTER",
  73: "COMBINATION",
  74: "PREFERRED",
  75: "ADD.OVERLAY",
  76: "GRIDLINES",
  77: "SET.PREFERRED",
  78: "AXES",
  79: "LEGEND",
  80: "ATTACH.TEXT",
  81: "ADD.ARROW",
  82: "SELECT.CHART",
  83: "SELECT.PLOT.AREA",
  84: "PATTERNS",
  85: "MAIN.CHART",
  86: "OVERLAY",
  87: "SCALE",
  88: "FORMAT.LEGEND",
  89: "FORMAT.TEXT",
  90: "EDIT.REPEAT",
  91: "PARSE",
  92: "JUSTIFY",
  93: "HIDE",
  94: "UNHIDE",
  95: "WORKSPACE",
  96: "FORMULA",
  97: "FORMULA.FILL",
  98: "FORMULA.ARRAY",
  99: "DATA.FIND.NEXT",
  100: "DATA.FIND.PREV",
  101: "FORMULA.FIND.NEXT",
  102: "FORMULA.FIND.PREV",
  103: "ACTIVATE",
  104: "ACTIVATE.NEXT",
  105: "ACTIVATE.PREV",
  106: "UNLOCKED.NEXT",
  107: "UNLOCKED.PREV",
  108: "COPY.PICTURE",
  109: "SELECT",
  110: "DELETE.NAME",
  111: "DELETE.FORMAT",
  112: "VLINE",
  113: "HLINE",
  114: "VPAGE",
  115: "HPAGE",
  116: "VSCROLL",
  117: "HSCROLL",
  118: "ALERT",
  119: "NEW",
  120: "CANCEL.COPY",
  121: "SHOW.CLIPBOARD",
  122: "MESSAGE",
  124: "PASTE.LINK",
  125: "APP.ACTIVATE",
  126: "DELETE.ARROW",
  127: "ROW.HEIGHT",
  128: "FORMAT.MOVE",
  129: "FORMAT.SIZE",
  130: "FORMULA.REPLACE",
  131: "SEND.KEYS",
  132: "SELECT.SPECIAL",
  133: "APPLY.NAMES",
  134: "REPLACE.FONT",
  135: "FREEZE.PANES",
  136: "SHOW.INFO",
  137: "SPLIT",
  138: "ON.WINDOW",
  139: "ON.DATA",
  140: "DISABLE.INPUT",
  142: "OUTLINE",
  143: "LIST.NAMES",
  144: "FILE.CLOSE",
  145: "SAVE.WORKBOOK",
  146: "DATA.FORM",
  147: "COPY.CHART",
  148: "ON.TIME",
  149: "WAIT",
  150: "FORMAT.FONT",
  151: "FILL.UP",
  152: "FILL.LEFT",
  153: "DELETE.OVERLAY",
  155: "SHORT.MENUS",
  159: "SET.UPDATE.STATUS",
  161: "COLOR.PALETTE",
  162: "DELETE.STYLE",
  163: "WINDOW.RESTORE",
  164: "WINDOW.MAXIMIZE",
  166: "CHANGE.LINK",
  167: "CALCULATE.DOCUMENT",
  168: "ON.KEY",
  169: "APP.RESTORE",
  170: "APP.MOVE",
  171: "APP.SIZE",
  172: "APP.MINIMIZE",
  173: "APP.MAXIMIZE",
  174: "BRING.TO.FRONT",
  175: "SEND.TO.BACK",
  185: "MAIN.CHART.TYPE",
  186: "OVERLAY.CHART.TYPE",
  187: "SELECT.END",
  188: "OPEN.MAIL",
  189: "SEND.MAIL",
  190: "STANDARD.FONT",
  191: "CONSOLIDATE",
  192: "SORT.SPECIAL",
  193: "GALLERY.3D.AREA",
  194: "GALLERY.3D.COLUMN",
  195: "GALLERY.3D.LINE",
  196: "GALLERY.3D.PIE",
  197: "VIEW.3D",
  198: "GOAL.SEEK",
  199: "WORKGROUP",
  200: "FILL.GROUP",
  201: "UPDATE.LINK",
  202: "PROMOTE",
  203: "DEMOTE",
  204: "SHOW.DETAIL",
  206: "UNGROUP",
  207: "OBJECT.PROPERTIES",
  208: "SAVE.NEW.OBJECT",
  209: "SHARE",
  210: "SHARE.NAME",
  211: "DUPLICATE",
  212: "APPLY.STYLE",
  213: "ASSIGN.TO.OBJECT",
  214: "OBJECT.PROTECTION",
  215: "HIDE.OBJECT",
  216: "SET.EXTRACT",
  217: "CREATE.PUBLISHER",
  218: "SUBSCRIBE.TO",
  219: "ATTRIBUTES",
  220: "SHOW.TOOLBAR",
  222: "PRINT.PREVIEW",
  223: "EDIT.COLOR",
  224: "SHOW.LEVELS",
  225: "FORMAT.MAIN",
  226: "FORMAT.OVERLAY",
  227: "ON.RECALC",
  228: "EDIT.SERIES",
  229: "DEFINE.STYLE",
  240: "LINE.PRINT",
  243: "ENTER.DATA",
  249: "GALLERY.RADAR",
  250: "MERGE.STYLES",
  251: "EDITION.OPTIONS",
  252: "PASTE.PICTURE",
  253: "PASTE.PICTURE.LINK",
  254: "SPELLING",
  256: "ZOOM",
  259: "INSERT.OBJECT",
  260: "WINDOW.MINIMIZE",
  265: "SOUND.NOTE",
  266: "SOUND.PLAY",
  267: "FORMAT.SHAPE",
  268: "EXTEND.POLYGON",
  269: "FORMAT.AUTO",
  272: "GALLERY.3D.BAR",
  273: "GALLERY.3D.SURFACE",
  274: "FILL.AUTO",
  276: "CUSTOMIZE.TOOLBAR",
  277: "ADD.TOOL",
  278: "EDIT.OBJECT",
  279: "ON.DOUBLECLICK",
  280: "ON.ENTRY",
  281: "WORKBOOK.ADD",
  282: "WORKBOOK.MOVE",
  283: "WORKBOOK.COPY",
  284: "WORKBOOK.OPTIONS",
  285: "SAVE.WORKSPACE",
  288: "CHART.WIZARD",
  289: "DELETE.TOOL",
  290: "MOVE.TOOL",
  291: "WORKBOOK.SELECT",
  292: "WORKBOOK.ACTIVATE",
  293: "ASSIGN.TO.TOOL",
  295: "COPY.TOOL",
  296: "RESET.TOOL",
  297: "CONSTRAIN.NUMERIC",
  298: "PASTE.TOOL",
  302: "WORKBOOK.NEW",
  305: "SCENARIO.CELLS",
  306: "SCENARIO.DELETE",
  307: "SCENARIO.ADD",
  308: "SCENARIO.EDIT",
  309: "SCENARIO.SHOW",
  310: "SCENARIO.SHOW.NEXT",
  311: "SCENARIO.SUMMARY",
  312: "PIVOT.TABLE.WIZARD",
  313: "PIVOT.FIELD.PROPERTIES",
  314: "PIVOT.FIELD",
  315: "PIVOT.ITEM",
  316: "PIVOT.ADD.FIELDS",
  318: "OPTIONS.CALCULATION",
  319: "OPTIONS.EDIT",
  320: "OPTIONS.VIEW",
  321: "ADDIN.MANAGER",
  322: "MENU.EDITOR",
  323: "ATTACH.TOOLBARS",
  324: "VBAActivate",
  325: "OPTIONS.CHART",
  328: "VBA.INSERT.FILE",
  330: "VBA.PROCEDURE.DEFINITION",
  336: "ROUTING.SLIP",
  338: "ROUTE.DOCUMENT",
  339: "MAIL.LOGON",
  342: "INSERT.PICTURE",
  343: "EDIT.TOOL",
  344: "GALLERY.DOUGHNUT",
  350: "CHART.TREND",
  352: "PIVOT.ITEM.PROPERTIES",
  354: "WORKBOOK.INSERT",
  355: "OPTIONS.TRANSITION",
  356: "OPTIONS.GENERAL",
  370: "FILTER.ADVANCED",
  373: "MAIL.ADD.MAILER",
  374: "MAIL.DELETE.MAILER",
  375: "MAIL.REPLY",
  376: "MAIL.REPLY.ALL",
  377: "MAIL.FORWARD",
  378: "MAIL.NEXT.LETTER",
  379: "DATA.LABEL",
  380: "INSERT.TITLE",
  381: "FONT.PROPERTIES",
  382: "MACRO.OPTIONS",
  383: "WORKBOOK.HIDE",
  384: "WORKBOOK.UNHIDE",
  385: "WORKBOOK.DELETE",
  386: "WORKBOOK.NAME",
  388: "GALLERY.CUSTOM",
  390: "ADD.CHART.AUTOFORMAT",
  391: "DELETE.CHART.AUTOFORMAT",
  392: "CHART.ADD.DATA",
  393: "AUTO.OUTLINE",
  394: "TAB.ORDER",
  395: "SHOW.DIALOG",
  396: "SELECT.ALL",
  397: "UNGROUP.SHEETS",
  398: "SUBTOTAL.CREATE",
  399: "SUBTOTAL.REMOVE",
  400: "RENAME.OBJECT",
  412: "WORKBOOK.SCROLL",
  413: "WORKBOOK.NEXT",
  414: "WORKBOOK.PREV",
  415: "WORKBOOK.TAB.SPLIT",
  416: "FULL.SCREEN",
  417: "WORKBOOK.PROTECT",
  420: "SCROLLBAR.PROPERTIES",
  421: "PIVOT.SHOW.PAGES",
  422: "TEXT.TO.COLUMNS",
  423: "FORMAT.CHARTTYPE",
  424: "LINK.FORMAT",
  425: "TRACER.DISPLAY",
  430: "TRACER.NAVIGATE",
  431: "TRACER.CLEAR",
  432: "TRACER.ERROR",
  433: "PIVOT.FIELD.GROUP",
  434: "PIVOT.FIELD.UNGROUP",
  435: "CHECKBOX.PROPERTIES",
  436: "LABEL.PROPERTIES",
  437: "LISTBOX.PROPERTIES",
  438: "EDITBOX.PROPERTIES",
  439: "PIVOT.REFRESH",
  440: "LINK.COMBO",
  441: "OPEN.TEXT",
  442: "HIDE.DIALOG",
  443: "SET.DIALOG.FOCUS",
  444: "ENABLE.OBJECT",
  445: "PUSHBUTTON.PROPERTIES",
  446: "SET.DIALOG.DEFAULT",
  447: "FILTER",
  448: "FILTER.SHOW.ALL",
  449: "CLEAR.OUTLINE",
  450: "FUNCTION.WIZARD",
  451: "ADD.LIST.ITEM",
  452: "SET.LIST.ITEM",
  453: "REMOVE.LIST.ITEM",
  454: "SELECT.LIST.ITEM",
  455: "SET.CONTROL.VALUE",
  456: "SAVE.COPY.AS",
  458: "OPTIONS.LISTS.ADD",
  459: "OPTIONS.LISTS.DELETE",
  460: "SERIES.AXES",
  461: "SERIES.X",
  462: "SERIES.Y",
  463: "ERRORBAR.X",
  464: "ERRORBAR.Y",
  465: "FORMAT.CHART",
  466: "SERIES.ORDER",
  467: "MAIL.LOGOFF",
  468: "CLEAR.ROUTING.SLIP",
  469: "APP.ACTIVATE.MICROSOFT",
  470: "MAIL.EDIT.MAILER",
  471: "ON.SHEET",
  472: "STANDARD.WIDTH",
  473: "SCENARIO.MERGE",
  474: "SUMMARY.INFO",
  475: "FIND.FILE",
  476: "ACTIVE.CELL.FONT",
  477: "ENABLE.TIPWIZARD",
  478: "VBA.MAKE.ADDIN",
  480: "INSERTDATATABLE",
  481: "WORKGROUP.OPTIONS",
  482: "MAIL.SEND.MAILER",
  485: "AUTOCORRECT",
  489: "POST.DOCUMENT",
  491: "PICKLIST",
  493: "VIEW.SHOW",
  494: "VIEW.DEFINE",
  495: "VIEW.DELETE",
  509: "SHEET.BACKGROUND",
  510: "INSERT.MAP.OBJECT",
  511: "OPTIONS.MENONO",
  517: "MSOCHECKS",
  518: "NORMAL",
  519: "LAYOUT",
  520: "RM.PRINT.AREA",
  521: "CLEAR.PRINT.AREA",
  522: "ADD.PRINT.AREA",
  523: "MOVE.BRK",
  545: "HIDECURR.NOTE",
  546: "HIDEALL.NOTES",
  547: "DELETE.NOTE",
  548: "TRAVERSE.NOTES",
  549: "ACTIVATE.NOTES",
  620: "PROTECT.REVISIONS",
  621: "UNPROTECT.REVISIONS",
  647: "OPTIONS.ME",
  653: "WEB.PUBLISH",
  667: "NEWWEBQUERY",
  673: "PIVOT.TABLE.CHART",
  753: "OPTIONS.SAVE",
  755: "OPTIONS.SPELL",
  808: "HIDEALL.INKANNOTS"
};
var Ftab = {
  0: "COUNT",
  1: "IF",
  2: "ISNA",
  3: "ISERROR",
  4: "SUM",
  5: "AVERAGE",
  6: "MIN",
  7: "MAX",
  8: "ROW",
  9: "COLUMN",
  10: "NA",
  11: "NPV",
  12: "STDEV",
  13: "DOLLAR",
  14: "FIXED",
  15: "SIN",
  16: "COS",
  17: "TAN",
  18: "ATAN",
  19: "PI",
  20: "SQRT",
  21: "EXP",
  22: "LN",
  23: "LOG10",
  24: "ABS",
  25: "INT",
  26: "SIGN",
  27: "ROUND",
  28: "LOOKUP",
  29: "INDEX",
  30: "REPT",
  31: "MID",
  32: "LEN",
  33: "VALUE",
  34: "TRUE",
  35: "FALSE",
  36: "AND",
  37: "OR",
  38: "NOT",
  39: "MOD",
  40: "DCOUNT",
  41: "DSUM",
  42: "DAVERAGE",
  43: "DMIN",
  44: "DMAX",
  45: "DSTDEV",
  46: "VAR",
  47: "DVAR",
  48: "TEXT",
  49: "LINEST",
  50: "TREND",
  51: "LOGEST",
  52: "GROWTH",
  53: "GOTO",
  54: "HALT",
  55: "RETURN",
  56: "PV",
  57: "FV",
  58: "NPER",
  59: "PMT",
  60: "RATE",
  61: "MIRR",
  62: "IRR",
  63: "RAND",
  64: "MATCH",
  65: "DATE",
  66: "TIME",
  67: "DAY",
  68: "MONTH",
  69: "YEAR",
  70: "WEEKDAY",
  71: "HOUR",
  72: "MINUTE",
  73: "SECOND",
  74: "NOW",
  75: "AREAS",
  76: "ROWS",
  77: "COLUMNS",
  78: "OFFSET",
  79: "ABSREF",
  80: "RELREF",
  81: "ARGUMENT",
  82: "SEARCH",
  83: "TRANSPOSE",
  84: "ERROR",
  85: "STEP",
  86: "TYPE",
  87: "ECHO",
  88: "SET.NAME",
  89: "CALLER",
  90: "DEREF",
  91: "WINDOWS",
  92: "SERIES",
  93: "DOCUMENTS",
  94: "ACTIVE.CELL",
  95: "SELECTION",
  96: "RESULT",
  97: "ATAN2",
  98: "ASIN",
  99: "ACOS",
  100: "CHOOSE",
  101: "HLOOKUP",
  102: "VLOOKUP",
  103: "LINKS",
  104: "INPUT",
  105: "ISREF",
  106: "GET.FORMULA",
  107: "GET.NAME",
  108: "SET.VALUE",
  109: "LOG",
  110: "EXEC",
  111: "CHAR",
  112: "LOWER",
  113: "UPPER",
  114: "PROPER",
  115: "LEFT",
  116: "RIGHT",
  117: "EXACT",
  118: "TRIM",
  119: "REPLACE",
  120: "SUBSTITUTE",
  121: "CODE",
  122: "NAMES",
  123: "DIRECTORY",
  124: "FIND",
  125: "CELL",
  126: "ISERR",
  127: "ISTEXT",
  128: "ISNUMBER",
  129: "ISBLANK",
  130: "T",
  131: "N",
  132: "FOPEN",
  133: "FCLOSE",
  134: "FSIZE",
  135: "FREADLN",
  136: "FREAD",
  137: "FWRITELN",
  138: "FWRITE",
  139: "FPOS",
  140: "DATEVALUE",
  141: "TIMEVALUE",
  142: "SLN",
  143: "SYD",
  144: "DDB",
  145: "GET.DEF",
  146: "REFTEXT",
  147: "TEXTREF",
  148: "INDIRECT",
  149: "REGISTER",
  150: "CALL",
  151: "ADD.BAR",
  152: "ADD.MENU",
  153: "ADD.COMMAND",
  154: "ENABLE.COMMAND",
  155: "CHECK.COMMAND",
  156: "RENAME.COMMAND",
  157: "SHOW.BAR",
  158: "DELETE.MENU",
  159: "DELETE.COMMAND",
  160: "GET.CHART.ITEM",
  161: "DIALOG.BOX",
  162: "CLEAN",
  163: "MDETERM",
  164: "MINVERSE",
  165: "MMULT",
  166: "FILES",
  167: "IPMT",
  168: "PPMT",
  169: "COUNTA",
  170: "CANCEL.KEY",
  171: "FOR",
  172: "WHILE",
  173: "BREAK",
  174: "NEXT",
  175: "INITIATE",
  176: "REQUEST",
  177: "POKE",
  178: "EXECUTE",
  179: "TERMINATE",
  180: "RESTART",
  181: "HELP",
  182: "GET.BAR",
  183: "PRODUCT",
  184: "FACT",
  185: "GET.CELL",
  186: "GET.WORKSPACE",
  187: "GET.WINDOW",
  188: "GET.DOCUMENT",
  189: "DPRODUCT",
  190: "ISNONTEXT",
  191: "GET.NOTE",
  192: "NOTE",
  193: "STDEVP",
  194: "VARP",
  195: "DSTDEVP",
  196: "DVARP",
  197: "TRUNC",
  198: "ISLOGICAL",
  199: "DCOUNTA",
  200: "DELETE.BAR",
  201: "UNREGISTER",
  204: "USDOLLAR",
  205: "FINDB",
  206: "SEARCHB",
  207: "REPLACEB",
  208: "LEFTB",
  209: "RIGHTB",
  210: "MIDB",
  211: "LENB",
  212: "ROUNDUP",
  213: "ROUNDDOWN",
  214: "ASC",
  215: "DBCS",
  216: "RANK",
  219: "ADDRESS",
  220: "DAYS360",
  221: "TODAY",
  222: "VDB",
  223: "ELSE",
  224: "ELSE.IF",
  225: "END.IF",
  226: "FOR.CELL",
  227: "MEDIAN",
  228: "SUMPRODUCT",
  229: "SINH",
  230: "COSH",
  231: "TANH",
  232: "ASINH",
  233: "ACOSH",
  234: "ATANH",
  235: "DGET",
  236: "CREATE.OBJECT",
  237: "VOLATILE",
  238: "LAST.ERROR",
  239: "CUSTOM.UNDO",
  240: "CUSTOM.REPEAT",
  241: "FORMULA.CONVERT",
  242: "GET.LINK.INFO",
  243: "TEXT.BOX",
  244: "INFO",
  245: "GROUP",
  246: "GET.OBJECT",
  247: "DB",
  248: "PAUSE",
  251: "RESUME",
  252: "FREQUENCY",
  253: "ADD.TOOLBAR",
  254: "DELETE.TOOLBAR",
  255: "User",
  256: "RESET.TOOLBAR",
  257: "EVALUATE",
  258: "GET.TOOLBAR",
  259: "GET.TOOL",
  260: "SPELLING.CHECK",
  261: "ERROR.TYPE",
  262: "APP.TITLE",
  263: "WINDOW.TITLE",
  264: "SAVE.TOOLBAR",
  265: "ENABLE.TOOL",
  266: "PRESS.TOOL",
  267: "REGISTER.ID",
  268: "GET.WORKBOOK",
  269: "AVEDEV",
  270: "BETADIST",
  271: "GAMMALN",
  272: "BETAINV",
  273: "BINOMDIST",
  274: "CHIDIST",
  275: "CHIINV",
  276: "COMBIN",
  277: "CONFIDENCE",
  278: "CRITBINOM",
  279: "EVEN",
  280: "EXPONDIST",
  281: "FDIST",
  282: "FINV",
  283: "FISHER",
  284: "FISHERINV",
  285: "FLOOR",
  286: "GAMMADIST",
  287: "GAMMAINV",
  288: "CEILING",
  289: "HYPGEOMDIST",
  290: "LOGNORMDIST",
  291: "LOGINV",
  292: "NEGBINOMDIST",
  293: "NORMDIST",
  294: "NORMSDIST",
  295: "NORMINV",
  296: "NORMSINV",
  297: "STANDARDIZE",
  298: "ODD",
  299: "PERMUT",
  300: "POISSON",
  301: "TDIST",
  302: "WEIBULL",
  303: "SUMXMY2",
  304: "SUMX2MY2",
  305: "SUMX2PY2",
  306: "CHITEST",
  307: "CORREL",
  308: "COVAR",
  309: "FORECAST",
  310: "FTEST",
  311: "INTERCEPT",
  312: "PEARSON",
  313: "RSQ",
  314: "STEYX",
  315: "SLOPE",
  316: "TTEST",
  317: "PROB",
  318: "DEVSQ",
  319: "GEOMEAN",
  320: "HARMEAN",
  321: "SUMSQ",
  322: "KURT",
  323: "SKEW",
  324: "ZTEST",
  325: "LARGE",
  326: "SMALL",
  327: "QUARTILE",
  328: "PERCENTILE",
  329: "PERCENTRANK",
  330: "MODE",
  331: "TRIMMEAN",
  332: "TINV",
  334: "MOVIE.COMMAND",
  335: "GET.MOVIE",
  336: "CONCATENATE",
  337: "POWER",
  338: "PIVOT.ADD.DATA",
  339: "GET.PIVOT.TABLE",
  340: "GET.PIVOT.FIELD",
  341: "GET.PIVOT.ITEM",
  342: "RADIANS",
  343: "DEGREES",
  344: "SUBTOTAL",
  345: "SUMIF",
  346: "COUNTIF",
  347: "COUNTBLANK",
  348: "SCENARIO.GET",
  349: "OPTIONS.LISTS.GET",
  350: "ISPMT",
  351: "DATEDIF",
  352: "DATESTRING",
  353: "NUMBERSTRING",
  354: "ROMAN",
  355: "OPEN.DIALOG",
  356: "SAVE.DIALOG",
  357: "VIEW.GET",
  358: "GETPIVOTDATA",
  359: "HYPERLINK",
  360: "PHONETIC",
  361: "AVERAGEA",
  362: "MAXA",
  363: "MINA",
  364: "STDEVPA",
  365: "VARPA",
  366: "STDEVA",
  367: "VARA",
  368: "BAHTTEXT",
  369: "THAIDAYOFWEEK",
  370: "THAIDIGIT",
  371: "THAIMONTHOFYEAR",
  372: "THAINUMSOUND",
  373: "THAINUMSTRING",
  374: "THAISTRINGLENGTH",
  375: "ISTHAIDIGIT",
  376: "ROUNDBAHTDOWN",
  377: "ROUNDBAHTUP",
  378: "THAIYEAR",
  379: "RTD",
  380: "CUBEVALUE",
  381: "CUBEMEMBER",
  382: "CUBEMEMBERPROPERTY",
  383: "CUBERANKEDMEMBER",
  384: "HEX2BIN",
  385: "HEX2DEC",
  386: "HEX2OCT",
  387: "DEC2BIN",
  388: "DEC2HEX",
  389: "DEC2OCT",
  390: "OCT2BIN",
  391: "OCT2HEX",
  392: "OCT2DEC",
  393: "BIN2DEC",
  394: "BIN2OCT",
  395: "BIN2HEX",
  396: "IMSUB",
  397: "IMDIV",
  398: "IMPOWER",
  399: "IMABS",
  400: "IMSQRT",
  401: "IMLN",
  402: "IMLOG2",
  403: "IMLOG10",
  404: "IMSIN",
  405: "IMCOS",
  406: "IMEXP",
  407: "IMARGUMENT",
  408: "IMCONJUGATE",
  409: "IMAGINARY",
  410: "IMREAL",
  411: "COMPLEX",
  412: "IMSUM",
  413: "IMPRODUCT",
  414: "SERIESSUM",
  415: "FACTDOUBLE",
  416: "SQRTPI",
  417: "QUOTIENT",
  418: "DELTA",
  419: "GESTEP",
  420: "ISEVEN",
  421: "ISODD",
  422: "MROUND",
  423: "ERF",
  424: "ERFC",
  425: "BESSELJ",
  426: "BESSELK",
  427: "BESSELY",
  428: "BESSELI",
  429: "XIRR",
  430: "XNPV",
  431: "PRICEMAT",
  432: "YIELDMAT",
  433: "INTRATE",
  434: "RECEIVED",
  435: "DISC",
  436: "PRICEDISC",
  437: "YIELDDISC",
  438: "TBILLEQ",
  439: "TBILLPRICE",
  440: "TBILLYIELD",
  441: "PRICE",
  442: "YIELD",
  443: "DOLLARDE",
  444: "DOLLARFR",
  445: "NOMINAL",
  446: "EFFECT",
  447: "CUMPRINC",
  448: "CUMIPMT",
  449: "EDATE",
  450: "EOMONTH",
  451: "YEARFRAC",
  452: "COUPDAYBS",
  453: "COUPDAYS",
  454: "COUPDAYSNC",
  455: "COUPNCD",
  456: "COUPNUM",
  457: "COUPPCD",
  458: "DURATION",
  459: "MDURATION",
  460: "ODDLPRICE",
  461: "ODDLYIELD",
  462: "ODDFPRICE",
  463: "ODDFYIELD",
  464: "RANDBETWEEN",
  465: "WEEKNUM",
  466: "AMORDEGRC",
  467: "AMORLINC",
  468: "CONVERT",
  724: "SHEETJS",
  469: "ACCRINT",
  470: "ACCRINTM",
  471: "WORKDAY",
  472: "NETWORKDAYS",
  473: "GCD",
  474: "MULTINOMIAL",
  475: "LCM",
  476: "FVSCHEDULE",
  477: "CUBEKPIMEMBER",
  478: "CUBESET",
  479: "CUBESETCOUNT",
  480: "IFERROR",
  481: "COUNTIFS",
  482: "SUMIFS",
  483: "AVERAGEIF",
  484: "AVERAGEIFS"
};
var FtabArgc = {
  2: 1,
  3: 1,
  10: 0,
  15: 1,
  16: 1,
  17: 1,
  18: 1,
  19: 0,
  20: 1,
  21: 1,
  22: 1,
  23: 1,
  24: 1,
  25: 1,
  26: 1,
  27: 2,
  30: 2,
  31: 3,
  32: 1,
  33: 1,
  34: 0,
  35: 0,
  38: 1,
  39: 2,
  40: 3,
  41: 3,
  42: 3,
  43: 3,
  44: 3,
  45: 3,
  47: 3,
  48: 2,
  53: 1,
  61: 3,
  63: 0,
  65: 3,
  66: 3,
  67: 1,
  68: 1,
  69: 1,
  70: 1,
  71: 1,
  72: 1,
  73: 1,
  74: 0,
  75: 1,
  76: 1,
  77: 1,
  79: 2,
  80: 2,
  83: 1,
  85: 0,
  86: 1,
  89: 0,
  90: 1,
  94: 0,
  95: 0,
  97: 2,
  98: 1,
  99: 1,
  101: 3,
  102: 3,
  105: 1,
  106: 1,
  108: 2,
  111: 1,
  112: 1,
  113: 1,
  114: 1,
  117: 2,
  118: 1,
  119: 4,
  121: 1,
  126: 1,
  127: 1,
  128: 1,
  129: 1,
  130: 1,
  131: 1,
  133: 1,
  134: 1,
  135: 1,
  136: 2,
  137: 2,
  138: 2,
  140: 1,
  141: 1,
  142: 3,
  143: 4,
  144: 4,
  161: 1,
  162: 1,
  163: 1,
  164: 1,
  165: 2,
  172: 1,
  175: 2,
  176: 2,
  177: 3,
  178: 2,
  179: 1,
  184: 1,
  186: 1,
  189: 3,
  190: 1,
  195: 3,
  196: 3,
  197: 1,
  198: 1,
  199: 3,
  201: 1,
  207: 4,
  210: 3,
  211: 1,
  212: 2,
  213: 2,
  214: 1,
  215: 1,
  225: 0,
  229: 1,
  230: 1,
  231: 1,
  232: 1,
  233: 1,
  234: 1,
  235: 3,
  244: 1,
  247: 4,
  252: 2,
  257: 1,
  261: 1,
  271: 1,
  273: 4,
  274: 2,
  275: 2,
  276: 2,
  277: 3,
  278: 3,
  279: 1,
  280: 3,
  281: 3,
  282: 3,
  283: 1,
  284: 1,
  285: 2,
  286: 4,
  287: 3,
  288: 2,
  289: 4,
  290: 3,
  291: 3,
  292: 3,
  293: 4,
  294: 1,
  295: 3,
  296: 1,
  297: 3,
  298: 1,
  299: 2,
  300: 3,
  301: 3,
  302: 4,
  303: 2,
  304: 2,
  305: 2,
  306: 2,
  307: 2,
  308: 2,
  309: 3,
  310: 2,
  311: 2,
  312: 2,
  313: 2,
  314: 2,
  315: 2,
  316: 4,
  325: 2,
  326: 2,
  327: 2,
  328: 2,
  331: 2,
  332: 2,
  337: 2,
  342: 1,
  343: 1,
  346: 2,
  347: 1,
  350: 4,
  351: 3,
  352: 1,
  353: 2,
  360: 1,
  368: 1,
  369: 1,
  370: 1,
  371: 1,
  372: 1,
  373: 1,
  374: 1,
  375: 1,
  376: 1,
  377: 1,
  378: 1,
  382: 3,
  385: 1,
  392: 1,
  393: 1,
  396: 2,
  397: 2,
  398: 2,
  399: 1,
  400: 1,
  401: 1,
  402: 1,
  403: 1,
  404: 1,
  405: 1,
  406: 1,
  407: 1,
  408: 1,
  409: 1,
  410: 1,
  414: 4,
  415: 1,
  416: 1,
  417: 2,
  420: 1,
  421: 1,
  422: 2,
  424: 1,
  425: 2,
  426: 2,
  427: 2,
  428: 2,
  430: 3,
  438: 3,
  439: 3,
  440: 3,
  443: 2,
  444: 2,
  445: 2,
  446: 2,
  447: 6,
  448: 6,
  449: 2,
  450: 2,
  464: 2,
  468: 3,
  476: 2,
  479: 1,
  480: 2,
  65535: 0
};
/* Part 3 TODO: actually parse formulae */
function ods_to_csf_formula(f/*:string*/)/*:string*/ {
	if(f.slice(0,3) == "of:") f = f.slice(3);
	/* 5.2 Basic Expressions */
	if(f.charCodeAt(0) == 61) {
		f = f.slice(1);
		if(f.charCodeAt(0) == 61) f = f.slice(1);
	}
	f = f.replace(/COM\.MICROSOFT\./g, "");
	/* Part 3 Section 5.8 References */
	f = f.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g, function($$, $1) { return $1.replace(/\./g,""); });
	/* TODO: something other than this */
	f = f.replace(/\[.(#[A-Z]*[?!])\]/g, "$1");
	return f.replace(/[;~]/g,",").replace(/\|/g,";");
}

function csf_to_ods_formula(f/*:string*/)/*:string*/ {
	var o = "of:=" + f.replace(crefregex, "$1[.$2$3$4$5]").replace(/\]:\[/g,":");
	/* TODO: something other than this */
	return o.replace(/;/g, "|").replace(/,/g,";");
}

function ods_to_csf_3D(r/*:string*/)/*:[string, string]*/ {
	var a = r.split(":");
	var s = a[0].split(".")[0];
	return [s, a[0].split(".")[1] + (a.length > 1 ? (":" + (a[1].split(".")[1] || a[1].split(".")[0])) : "")];
}

function csf_to_ods_3D(r/*:string*/)/*:string*/ {
	return r.replace(/\./,"!");
}

var strs = {}; // shared strings
var _ssfopts = {}; // spreadsheet formatting options


/*global Map */
var browser_has_Map = typeof Map !== 'undefined';

function get_sst_id(sst/*:SST*/, str/*:string*/, rev)/*:number*/ {
	var i = 0, len = sst.length;
	if(rev) {
		if(browser_has_Map ? rev.has(str) : Object.prototype.hasOwnProperty.call(rev, str)) {
			var revarr = browser_has_Map ? rev.get(str) : rev[str];
			for(; i < revarr.length; ++i) {
				if(sst[revarr[i]].t === str) { sst.Count ++; return revarr[i]; }
			}
		}
	} else for(; i < len; ++i) {
		if(sst[i].t === str) { sst.Count ++; return i; }
	}
	sst[len] = ({t:str}/*:any*/); sst.Count ++; sst.Unique ++;
	if(rev) {
		if(browser_has_Map) {
			if(!rev.has(str)) rev.set(str, []);
			rev.get(str).push(len);
		} else {
			if(!Object.prototype.hasOwnProperty.call(rev, str)) rev[str] = [];
			rev[str].push(len);
		}
	}
	return len;
}

function col_obj_w(C/*:number*/, col) {
	var p = ({min:C+1,max:C+1}/*:any*/);
	/* wch (chars), wpx (pixels) */
	var wch = -1;
	if(col.MDW) MDW = col.MDW;
	if(col.width != null) p.customWidth = 1;
	else if(col.wpx != null) wch = px2char(col.wpx);
	else if(col.wch != null) wch = col.wch;
	if(wch > -1) { p.width = char2width(wch); p.customWidth = 1; }
	else if(col.width != null) p.width = col.width;
	if(col.hidden) p.hidden = true;
	if(col.level != null) { p.outlineLevel = p.level = col.level; }
	return p;
}

function default_margins(margins/*:Margins*/, mode/*:?string*/) {
	if(!margins) return;
	var defs = [0.7, 0.7, 0.75, 0.75, 0.3, 0.3];
	if(mode == 'xlml') defs = [1, 1, 1, 1, 0.5, 0.5];
	if(margins.left   == null) margins.left   = defs[0];
	if(margins.right  == null) margins.right  = defs[1];
	if(margins.top    == null) margins.top    = defs[2];
	if(margins.bottom == null) margins.bottom = defs[3];
	if(margins.header == null) margins.header = defs[4];
	if(margins.footer == null) margins.footer = defs[5];
}

function get_cell_style(styles/*:Array<any>*/, cell/*:Cell*/, opts) {
	var z = opts.revssf[cell.z != null ? cell.z : "General"];
	var i = 0x3c, len = styles.length;
	if(z == null && opts.ssf) {
		for(; i < 0x188; ++i) if(opts.ssf[i] == null) {
			SSF_load(cell.z, i);
			// $FlowIgnore
			opts.ssf[i] = cell.z;
			opts.revssf[cell.z] = z = i;
			break;
		}
	}
	for(i = 0; i != len; ++i) if(styles[i].numFmtId === z) return i;
	styles[len] = {
		numFmtId:z,
		fontId:0,
		fillId:0,
		borderId:0,
		xfId:0,
		applyNumberFormat:1
	};
	return len;
}

function safe_format(p/*:Cell*/, fmtid/*:number*/, fillid/*:?number*/, opts, themes, styles) {
	try {
		if(opts.cellNF) p.z = table_fmt[fmtid];
	} catch(e) { if(opts.WTF) throw e; }
	if(p.t === 'z' && !opts.cellStyles) return;
	if(p.t === 'd' && typeof p.v === 'string') p.v = parseDate(p.v);
	if((!opts || opts.cellText !== false) && p.t !== 'z') try {
		if(table_fmt[fmtid] == null) SSF_load(SSFImplicit[fmtid] || "General", fmtid);
		if(p.t === 'e') p.w = p.w || BErr[p.v];
		else if(fmtid === 0) {
			if(p.t === 'n') {
				if((p.v|0) === p.v) p.w = p.v.toString(10);
				else p.w = SSF_general_num(p.v);
			}
			else if(p.t === 'd') {
				var dd = datenum(p.v);
				if((dd|0) === dd) p.w = dd.toString(10);
				else p.w = SSF_general_num(dd);
			}
			else if(p.v === undefined) return "";
			else p.w = SSF_general(p.v,_ssfopts);
		}
		else if(p.t === 'd') p.w = SSF_format(fmtid,datenum(p.v),_ssfopts);
		else p.w = SSF_format(fmtid,p.v,_ssfopts);
	} catch(e) { if(opts.WTF) throw e; }
	if(!opts.cellStyles) return;
	if(fillid != null) try {
		p.s = styles.Fills[fillid];
		if (p.s.fgColor && p.s.fgColor.theme && !p.s.fgColor.rgb) {
			p.s.fgColor.rgb = rgb_tint(themes.themeElements.clrScheme[p.s.fgColor.theme].rgb, p.s.fgColor.tint || 0);
			if(opts.WTF) p.s.fgColor.raw_rgb = themes.themeElements.clrScheme[p.s.fgColor.theme].rgb;
		}
		if (p.s.bgColor && p.s.bgColor.theme) {
			p.s.bgColor.rgb = rgb_tint(themes.themeElements.clrScheme[p.s.bgColor.theme].rgb, p.s.bgColor.tint || 0);
			if(opts.WTF) p.s.bgColor.raw_rgb = themes.themeElements.clrScheme[p.s.bgColor.theme].rgb;
		}
	} catch(e) { if(opts.WTF && styles.Fills) throw e; }
}

function check_ws(ws/*:Worksheet*/, sname/*:string*/, i/*:number*/) {
	if(ws && ws['!ref']) {
		var range = safe_decode_range(ws['!ref']);
		if(range.e.c < range.s.c || range.e.r < range.s.r) throw new Error("Bad range (" + i + "): " + ws['!ref']);
	}
}
function parse_ws_xml_dim(ws/*:Worksheet*/, s/*:string*/) {
	var d = safe_decode_range(s);
	if(d.s.r<=d.e.r && d.s.c<=d.e.c && d.s.r>=0 && d.s.c>=0) ws["!ref"] = encode_range(d);
}
var mergecregex = /<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g;
var sheetdataregex = /<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/;
var hlinkregex = /<(?:\w:)?hyperlink [^>]*>/mg;
var dimregex = /"(\w*:\w*)"/;
var colregex = /<(?:\w:)?col\b[^>]*[\/]?>/g;
var afregex = /<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g;
var marginregex= /<(?:\w:)?pageMargins[^>]*\/>/g;
var sheetprregex = /<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/;
var sheetprregex2= /<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/;
var svsregex = /<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;

/* 18.3 Worksheets */
function parse_ws_xml(data/*:?string*/, opts, idx/*:number*/, rels, wb/*:WBWBProps*/, themes, styles)/*:Worksheet*/ {
	if(!data) return data;
	if(!rels) rels = {'!id':{}};
	if(DENSE != null && opts.dense == null) opts.dense = DENSE;

	/* 18.3.1.99 worksheet CT_Worksheet */
	var s = opts.dense ? ([]/*:any*/) : ({}/*:any*/);
	var refguess/*:Range*/ = ({s: {r:2000000, c:2000000}, e: {r:0, c:0} }/*:any*/);

	var data1 = "", data2 = "";
	var mtch/*:?any*/ = data.match(sheetdataregex);
	if(mtch) {
		data1 = data.slice(0, mtch.index);
		data2 = data.slice(mtch.index + mtch[0].length);
	} else data1 = data2 = data;

	/* 18.3.1.82 sheetPr CT_SheetPr */
	var sheetPr = data1.match(sheetprregex);
	if(sheetPr) parse_ws_xml_sheetpr(sheetPr[0], s, wb, idx);
	else if((sheetPr = data1.match(sheetprregex2))) parse_ws_xml_sheetpr2(sheetPr[0], sheetPr[1]||"", s, wb, idx, styles, themes);

	/* 18.3.1.35 dimension CT_SheetDimension */
	var ridx = (data1.match(/<(?:\w*:)?dimension/)||{index:-1}).index;
	if(ridx > 0) {
		var ref = data1.slice(ridx,ridx+50).match(dimregex);
		if(ref) parse_ws_xml_dim(s, ref[1]);
	}

	/* 18.3.1.88 sheetViews CT_SheetViews */
	var svs = data1.match(svsregex);
	if(svs && svs[1]) parse_ws_xml_sheetviews(svs[1], wb);

	/* 18.3.1.17 cols CT_Cols */
	var columns/*:Array<ColInfo>*/ = [];
	if(opts.cellStyles) {
		/* 18.3.1.13 col CT_Col */
		var cols = data1.match(colregex);
		if(cols) parse_ws_xml_cols(columns, cols);
	}

	/* 18.3.1.80 sheetData CT_SheetData ? */
	if(mtch) parse_ws_xml_data(mtch[1], s, opts, refguess, themes, styles);

	/* 18.3.1.2  autoFilter CT_AutoFilter */
	var afilter = data2.match(afregex);
	if(afilter) s['!autofilter'] = parse_ws_xml_autofilter(afilter[0]);

	/* 18.3.1.55 mergeCells CT_MergeCells */
	var merges/*:Array<Range>*/ = [];
	var _merge = data2.match(mergecregex);
	if(_merge) for(ridx = 0; ridx != _merge.length; ++ridx)
		merges[ridx] = safe_decode_range(_merge[ridx].slice(_merge[ridx].indexOf("\"")+1));

	/* 18.3.1.48 hyperlinks CT_Hyperlinks */
	var hlink = data2.match(hlinkregex);
	if(hlink) parse_ws_xml_hlinks(s, hlink, rels);

	/* 18.3.1.62 pageMargins CT_PageMargins */
	var margins = data2.match(marginregex);
	if(margins) s['!margins'] = parse_ws_xml_margins(parsexmltag(margins[0]));

	if(!s["!ref"] && refguess.e.c >= refguess.s.c && refguess.e.r >= refguess.s.r) s["!ref"] = encode_range(refguess);
	if(opts.sheetRows > 0 && s["!ref"]) {
		var tmpref = safe_decode_range(s["!ref"]);
		if(opts.sheetRows <= +tmpref.e.r) {
			tmpref.e.r = opts.sheetRows - 1;
			if(tmpref.e.r > refguess.e.r) tmpref.e.r = refguess.e.r;
			if(tmpref.e.r < tmpref.s.r) tmpref.s.r = tmpref.e.r;
			if(tmpref.e.c > refguess.e.c) tmpref.e.c = refguess.e.c;
			if(tmpref.e.c < tmpref.s.c) tmpref.s.c = tmpref.e.c;
			s["!fullref"] = s["!ref"];
			s["!ref"] = encode_range(tmpref);
		}
	}
	if(columns.length > 0) s["!cols"] = columns;
	if(merges.length > 0) s["!merges"] = merges;
	return s;
}

function write_ws_xml_merges(merges/*:Array<Range>*/)/*:string*/ {
	if(merges.length === 0) return "";
	var o = '<mergeCells count="' + merges.length + '">';
	for(var i = 0; i != merges.length; ++i) o += '<mergeCell ref="' + encode_range(merges[i]) + '"/>';
	return o + '</mergeCells>';
}

/* 18.3.1.82-3 sheetPr CT_ChartsheetPr / CT_SheetPr */
function parse_ws_xml_sheetpr(sheetPr/*:string*/, s, wb/*:WBWBProps*/, idx/*:number*/) {
	var data = parsexmltag(sheetPr);
	if(!wb.Sheets[idx]) wb.Sheets[idx] = {};
	if(data.codeName) wb.Sheets[idx].CodeName = unescapexml(utf8read(data.codeName));
}
function parse_ws_xml_sheetpr2(sheetPr/*:string*/, body/*:string*/, s, wb/*:WBWBProps*/, idx/*:number*/) {
	parse_ws_xml_sheetpr(sheetPr.slice(0, sheetPr.indexOf(">")), s, wb, idx);
}
function write_ws_xml_sheetpr(ws, wb, idx, opts, o) {
	var needed = false;
	var props = {}, payload = null;
	if(opts.bookType !== 'xlsx' && wb.vbaraw) {
		var cname = wb.SheetNames[idx];
		try { if(wb.Workbook) cname = wb.Workbook.Sheets[idx].CodeName || cname; } catch(e) {}
		needed = true;
		props.codeName = utf8write(escapexml(cname));
	}

	if(ws && ws["!outline"]) {
		var outlineprops = {summaryBelow:1, summaryRight:1};
		if(ws["!outline"].above) outlineprops.summaryBelow = 0;
		if(ws["!outline"].left) outlineprops.summaryRight = 0;
		payload = (payload||"") + writextag('outlinePr', null, outlineprops);
	}

	if(!needed && !payload) return;
	o[o.length] = (writextag('sheetPr', payload, props));
}

/* 18.3.1.85 sheetProtection CT_SheetProtection */
var sheetprot_deffalse = ["objects", "scenarios", "selectLockedCells", "selectUnlockedCells"];
var sheetprot_deftrue = [
	"formatColumns", "formatRows", "formatCells",
	"insertColumns", "insertRows", "insertHyperlinks",
	"deleteColumns", "deleteRows",
	"sort", "autoFilter", "pivotTables"
];
function write_ws_xml_protection(sp)/*:string*/ {
	// algorithmName, hashValue, saltValue, spinCount
	var o = ({sheet:1}/*:any*/);
	sheetprot_deffalse.forEach(function(n) { if(sp[n] != null && sp[n]) o[n] = "1"; });
	sheetprot_deftrue.forEach(function(n) { if(sp[n] != null && !sp[n]) o[n] = "0"; });
	/* TODO: algorithm */
	if(sp.password) o.password = crypto_CreatePasswordVerifier_Method1(sp.password).toString(16).toUpperCase();
	return writextag('sheetProtection', null, o);
}

function parse_ws_xml_hlinks(s, data/*:Array<string>*/, rels) {
	var dense = Array.isArray(s);
	for(var i = 0; i != data.length; ++i) {
		var val = parsexmltag(utf8read(data[i]), true);
		if(!val.ref) return;
		var rel = ((rels || {})['!id']||[])[val.id];
		if(rel) {
			val.Target = rel.Target;
			if(val.location) val.Target += "#"+unescapexml(val.location);
		} else {
			val.Target = "#" + unescapexml(val.location);
			rel = {Target: val.Target, TargetMode: 'Internal'};
		}
		val.Rel = rel;
		if(val.tooltip) { val.Tooltip = val.tooltip; delete val.tooltip; }
		var rng = safe_decode_range(val.ref);
		for(var R=rng.s.r;R<=rng.e.r;++R) for(var C=rng.s.c;C<=rng.e.c;++C) {
			var addr = encode_cell({c:C,r:R});
			if(dense) {
				if(!s[R]) s[R] = [];
				if(!s[R][C]) s[R][C] = {t:"z",v:undefined};
				s[R][C].l = val;
			} else {
				if(!s[addr]) s[addr] = {t:"z",v:undefined};
				s[addr].l = val;
			}
		}
	}
}

function parse_ws_xml_margins(margin) {
	var o = {};
	["left", "right", "top", "bottom", "header", "footer"].forEach(function(k) {
		if(margin[k]) o[k] = parseFloat(margin[k]);
	});
	return o;
}
function write_ws_xml_margins(margin)/*:string*/ {
	default_margins(margin);
	return writextag('pageMargins', null, margin);
}

function parse_ws_xml_cols(columns, cols) {
	var seencol = false;
	for(var coli = 0; coli != cols.length; ++coli) {
		var coll = parsexmltag(cols[coli], true);
		if(coll.hidden) coll.hidden = parsexmlbool(coll.hidden);
		var colm=parseInt(coll.min, 10)-1, colM=parseInt(coll.max,10)-1;
		if(coll.outlineLevel) coll.level = (+coll.outlineLevel || 0);
		delete coll.min; delete coll.max; coll.width = +coll.width;
		if(!seencol && coll.width) { seencol = true; find_mdw_colw(coll.width); }
		process_col(coll);
		while(colm <= colM) columns[colm++] = dup(coll);
	}
}
function write_ws_xml_cols(ws, cols)/*:string*/ {
	var o = ["<cols>"], col;
	for(var i = 0; i != cols.length; ++i) {
		if(!(col = cols[i])) continue;
		o[o.length] = (writextag('col', null, col_obj_w(i, col)));
	}
	o[o.length] = "</cols>";
	return o.join("");
}

function parse_ws_xml_autofilter(data/*:string*/) {
	var o = { ref: (data.match(/ref="([^"]*)"/)||[])[1]};
	return o;
}
function write_ws_xml_autofilter(data, ws, wb, idx)/*:string*/ {
	var ref = typeof data.ref == "string" ? data.ref : encode_range(data.ref);
	if(!wb.Workbook) wb.Workbook = ({Sheets:[]}/*:any*/);
	if(!wb.Workbook.Names) wb.Workbook.Names = [];
	var names/*: Array<any> */ = wb.Workbook.Names;
	var range = decode_range(ref);
	if(range.s.r == range.e.r) { range.e.r = decode_range(ws["!ref"]).e.r; ref = encode_range(range); }
	for(var i = 0; i < names.length; ++i) {
		var name = names[i];
		if(name.Name != '_xlnm._FilterDatabase') continue;
		if(name.Sheet != idx) continue;
		name.Ref = "'" + wb.SheetNames[idx] + "'!" + ref; break;
	}
	if(i == names.length) names.push({ Name: '_xlnm._FilterDatabase', Sheet: idx, Ref: "'" + wb.SheetNames[idx] + "'!" + ref  });
	return writextag("autoFilter", null, {ref:ref});
}

/* 18.3.1.88 sheetViews CT_SheetViews */
/* 18.3.1.87 sheetView CT_SheetView */
var sviewregex = /<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;
function parse_ws_xml_sheetviews(data, wb/*:WBWBProps*/) {
	if(!wb.Views) wb.Views = [{}];
	(data.match(sviewregex)||[]).forEach(function(r/*:string*/, i/*:number*/) {
		var tag = parsexmltag(r);
		// $FlowIgnore
		if(!wb.Views[i]) wb.Views[i] = {};
		// $FlowIgnore
		if(+tag.zoomScale) wb.Views[i].zoom = +tag.zoomScale;
		// $FlowIgnore
		if(parsexmlbool(tag.rightToLeft)) wb.Views[i].RTL = true;
	});
}
function write_ws_xml_sheetviews(ws, opts, idx, wb)/*:string*/ {
	var sview = ({workbookViewId:"0"}/*:any*/);
	// $FlowIgnore
	if((((wb||{}).Workbook||{}).Views||[])[0]) sview.rightToLeft = wb.Workbook.Views[0].RTL ? "1" : "0";
	return writextag("sheetViews", writextag("sheetView", null, sview), {});
}

function write_ws_xml_cell(cell/*:Cell*/, ref, ws, opts/*::, idx, wb*/)/*:string*/ {
	if(cell.c) ws['!comments'].push([ref, cell.c]);
	if(cell.v === undefined && typeof cell.f !== "string" || cell.t === 'z' && !cell.f) return "";
	var vv = "";
	var oldt = cell.t, oldv = cell.v;
	if(cell.t !== "z") switch(cell.t) {
		case 'b': vv = cell.v ? "1" : "0"; break;
		case 'n': vv = ''+cell.v; break;
		case 'e': vv = BErr[cell.v]; break;
		case 'd':
			if(opts && opts.cellDates) vv = parseDate(cell.v, -1).toISOString();
			else {
				cell = dup(cell);
				cell.t = 'n';
				vv = ''+(cell.v = datenum(parseDate(cell.v)));
			}
			if(typeof cell.z === 'undefined') cell.z = table_fmt[14];
			break;
		default: vv = cell.v; break;
	}
	var v = writetag('v', escapexml(vv)), o = ({r:ref}/*:any*/);
	/* TODO: cell style */
	var os = get_cell_style(opts.cellXfs, cell, opts);
	if(os !== 0) o.s = os;
	switch(cell.t) {
		case 'n': break;
		case 'd': o.t = "d"; break;
		case 'b': o.t = "b"; break;
		case 'e': o.t = "e"; break;
		case 'z': break;
		default: if(cell.v == null) { delete cell.t; break; }
			if(cell.v.length > 32767) throw new Error("Text length must not exceed 32767 characters");
			if(opts && opts.bookSST) {
				v = writetag('v', ''+get_sst_id(opts.Strings, cell.v, opts.revStrings));
				o.t = "s"; break;
			}
			o.t = "str"; break;
	}
	if(cell.t != oldt) { cell.t = oldt; cell.v = oldv; }
	if(typeof cell.f == "string" && cell.f) {
		var ff = cell.F && cell.F.slice(0, ref.length) == ref ? {t:"array", ref:cell.F} : null;
		v = writextag('f', escapexml(cell.f), ff) + (cell.v != null ? v : "");
	}
	if(cell.l) ws['!links'].push([ref, cell.l]);
	if(cell.D) o.cm = 1;
	return writextag('c', v, o);
}

var parse_ws_xml_data = /*#__PURE__*/(function() {
	var cellregex = /<(?:\w+:)?c[ \/>]/, rowregex = /<\/(?:\w+:)?row>/;
	var rregex = /r=["']([^"']*)["']/, isregex = /<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/;
	var refregex = /ref=["']([^"']*)["']/;
	var match_v = matchtag("v"), match_f = matchtag("f");

return function parse_ws_xml_data(sdata/*:string*/, s, opts, guess/*:Range*/, themes, styles) {
	var ri = 0, x = "", cells/*:Array<string>*/ = [], cref/*:?Array<string>*/ = [], idx=0, i=0, cc=0, d="", p/*:any*/;
	var tag, tagr = 0, tagc = 0;
	var sstr, ftag;
	var fmtid = 0, fillid = 0;
	var do_format = Array.isArray(styles.CellXf), cf;
	var arrayf/*:Array<[Range, string]>*/ = [];
	var sharedf = [];
	var dense = Array.isArray(s);
	var rows/*:Array<RowInfo>*/ = [], rowobj = {}, rowrite = false;
	var sheetStubs = !!opts.sheetStubs;
	for(var marr = sdata.split(rowregex), mt = 0, marrlen = marr.length; mt != marrlen; ++mt) {
		x = marr[mt].trim();
		var xlen = x.length;
		if(xlen === 0) continue;

		/* 18.3.1.73 row CT_Row */
		var rstarti = 0;
		outa: for(ri = 0; ri < xlen; ++ri) switch(/*x.charCodeAt(ri)*/x[ri]) {
			case ">" /*62*/:
				if(/*x.charCodeAt(ri-1) != 47*/x[ri-1] != "/") { ++ri; break outa; }
				if(opts && opts.cellStyles) {
					// TODO: avoid duplication
					tag = parsexmltag(x.slice(rstarti,ri), true);
					tagr = tag.r != null ? parseInt(tag.r, 10) : tagr+1; tagc = -1;
					if(opts.sheetRows && opts.sheetRows < tagr) continue;
					rowobj = {}; rowrite = false;
					if(tag.ht) { rowrite = true; rowobj.hpt = parseFloat(tag.ht); rowobj.hpx = pt2px(rowobj.hpt); }
					if(tag.hidden == "1") { rowrite = true; rowobj.hidden = true; }
					if(tag.outlineLevel != null) { rowrite = true; rowobj.level = +tag.outlineLevel; }
					if(rowrite) rows[tagr-1] = rowobj;
				}
				break;
			case "<" /*60*/: rstarti = ri; break;
		}
		if(rstarti >= ri) break;
		tag = parsexmltag(x.slice(rstarti,ri), true);
		tagr = tag.r != null ? parseInt(tag.r, 10) : tagr+1; tagc = -1;
		if(opts.sheetRows && opts.sheetRows < tagr) continue;
		if(guess.s.r > tagr - 1) guess.s.r = tagr - 1;
		if(guess.e.r < tagr - 1) guess.e.r = tagr - 1;

		if(opts && opts.cellStyles) {
			rowobj = {}; rowrite = false;
			if(tag.ht) { rowrite = true; rowobj.hpt = parseFloat(tag.ht); rowobj.hpx = pt2px(rowobj.hpt); }
			if(tag.hidden == "1") { rowrite = true; rowobj.hidden = true; }
			if(tag.outlineLevel != null) { rowrite = true; rowobj.level = +tag.outlineLevel; }
			if(rowrite) rows[tagr-1] = rowobj;
		}

		/* 18.3.1.4 c CT_Cell */
		cells = x.slice(ri).split(cellregex);
		for(var rslice = 0; rslice != cells.length; ++rslice) if(cells[rslice].trim().charAt(0) != "<") break;
		cells = cells.slice(rslice);
		for(ri = 0; ri != cells.length; ++ri) {
			x = cells[ri].trim();
			if(x.length === 0) continue;
			cref = x.match(rregex); idx = ri; i=0; cc=0;
			x = "<c " + (x.slice(0,1)=="<"?">":"") + x;
			if(cref != null && cref.length === 2) {
				idx = 0; d=cref[1];
				for(i=0; i != d.length; ++i) {
					if((cc=d.charCodeAt(i)-64) < 1 || cc > 26) break;
					idx = 26*idx + cc;
				}
				--idx;
				tagc = idx;
			} else ++tagc;
			for(i = 0; i != x.length; ++i) if(x.charCodeAt(i) === 62) break; ++i;
			tag = parsexmltag(x.slice(0,i), true);
			if(!tag.r) tag.r = encode_cell({r:tagr-1, c:tagc});
			d = x.slice(i);
			p = ({t:""}/*:any*/);

			if((cref=d.match(match_v))!= null && /*::cref != null && */cref[1] !== '') p.v=unescapexml(cref[1]);
			if(opts.cellFormula) {
				if((cref=d.match(match_f))!= null && /*::cref != null && */cref[1] !== '') {
					/* TODO: match against XLSXFutureFunctions */
					p.f=unescapexml(utf8read(cref[1])).replace(/\r\n/g, "\n");
					if(!opts.xlfn) p.f = _xlfn(p.f);
					if(/*::cref != null && cref[0] != null && */cref[0].indexOf('t="array"') > -1) {
						p.F = (d.match(refregex)||[])[1];
						if(p.F.indexOf(":") > -1) arrayf.push([safe_decode_range(p.F), p.F]);
					} else if(/*::cref != null && cref[0] != null && */cref[0].indexOf('t="shared"') > -1) {
						// TODO: parse formula
						ftag = parsexmltag(cref[0]);
						var ___f = unescapexml(utf8read(cref[1]));
						if(!opts.xlfn) ___f = _xlfn(___f);
						sharedf[parseInt(ftag.si, 10)] = [ftag, ___f, tag.r];
					}
				} else if((cref=d.match(/<f[^>]*\/>/))) {
					ftag = parsexmltag(cref[0]);
					if(sharedf[ftag.si]) p.f = shift_formula_xlsx(sharedf[ftag.si][1], sharedf[ftag.si][2]/*[0].ref*/, tag.r);
				}
				/* TODO: factor out contains logic */
				var _tag = decode_cell(tag.r);
				for(i = 0; i < arrayf.length; ++i)
					if(_tag.r >= arrayf[i][0].s.r && _tag.r <= arrayf[i][0].e.r)
						if(_tag.c >= arrayf[i][0].s.c && _tag.c <= arrayf[i][0].e.c)
							p.F = arrayf[i][1];
			}

			if(tag.t == null && p.v === undefined) {
				if(p.f || p.F) {
					p.v = 0; p.t = "n";
				} else if(!sheetStubs) continue;
				else p.t = "z";
			}
			else p.t = tag.t || "n";
			if(guess.s.c > tagc) guess.s.c = tagc;
			if(guess.e.c < tagc) guess.e.c = tagc;
			/* 18.18.11 t ST_CellType */
			switch(p.t) {
				case 'n':
					if(p.v == "" || p.v == null) {
						if(!sheetStubs) continue;
						p.t = 'z';
					} else p.v = parseFloat(p.v);
					break;
				case 's':
					if(typeof p.v == 'undefined') {
						if(!sheetStubs) continue;
						p.t = 'z';
					} else {
						sstr = strs[parseInt(p.v, 10)];
						p.v = sstr.t;
						p.r = sstr.r;
						if(opts.cellHTML) p.h = sstr.h;
					}
					break;
				case 'str':
					p.t = "s";
					p.v = (p.v!=null) ? utf8read(p.v) : '';
					if(opts.cellHTML) p.h = escapehtml(p.v);
					break;
				case 'inlineStr':
					cref = d.match(isregex);
					p.t = 's';
					if(cref != null && (sstr = parse_si(cref[1]))) {
						p.v = sstr.t;
						if(opts.cellHTML) p.h = sstr.h;
					} else p.v = "";
					break;
				case 'b': p.v = parsexmlbool(p.v); break;
				case 'd':
					if(opts.cellDates) p.v = parseDate(p.v, 1);
					else { p.v = datenum(parseDate(p.v, 1)); p.t = 'n'; }
					break;
				/* error string in .w, number in .v */
				case 'e':
					if(!opts || opts.cellText !== false) p.w = p.v;
					p.v = RBErr[p.v]; break;
			}
			/* formatting */
			fmtid = fillid = 0;
			cf = null;
			if(do_format && tag.s !== undefined) {
				cf = styles.CellXf[tag.s];
				if(cf != null) {
					if(cf.numFmtId != null) fmtid = cf.numFmtId;
					if(opts.cellStyles) {
						if(cf.fillId != null) fillid = cf.fillId;
					}
				}
			}
			safe_format(p, fmtid, fillid, opts, themes, styles);
			if(opts.cellDates && do_format && p.t == 'n' && fmt_is_date(table_fmt[fmtid])) { p.t = 'd'; p.v = numdate(p.v); }
			if(tag.cm && opts.xlmeta) {
				var cm = (opts.xlmeta.Cell||[])[+tag.cm-1];
				if(cm && cm.type == 'XLDAPR') p.D = true;
			}
			if(dense) {
				var _r = decode_cell(tag.r);
				if(!s[_r.r]) s[_r.r] = [];
				s[_r.r][_r.c] = p;
			} else s[tag.r] = p;
		}
	}
	if(rows.length > 0) s['!rows'] = rows;
}; })();

function write_ws_xml_data(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*//*::, rels*/)/*:string*/ {
	var o/*:Array<string>*/ = [], r/*:Array<string>*/ = [], range = safe_decode_range(ws['!ref']), cell="", ref, rr = "", cols/*:Array<string>*/ = [], R=0, C=0, rows = ws['!rows'];
	var dense = Array.isArray(ws);
	var params = ({r:rr}/*:any*/), row/*:RowInfo*/, height = -1;
	for(C = range.s.c; C <= range.e.c; ++C) cols[C] = encode_col(C);
	for(R = range.s.r; R <= range.e.r; ++R) {
		r = [];
		rr = encode_row(R);
		for(C = range.s.c; C <= range.e.c; ++C) {
			ref = cols[C] + rr;
			var _cell = dense ? (ws[R]||[])[C]: ws[ref];
			if(_cell === undefined) continue;
			if((cell = write_ws_xml_cell(_cell, ref, ws, opts, idx, wb)) != null) r.push(cell);
		}
		if(r.length > 0 || (rows && rows[R])) {
			params = ({r:rr}/*:any*/);
			if(rows && rows[R]) {
				row = rows[R];
				if(row.hidden) params.hidden = 1;
				height = -1;
				if(row.hpx) height = px2pt(row.hpx);
				else if(row.hpt) height = row.hpt;
				if(height > -1) { params.ht = height; params.customHeight = 1; }
				if(row.level) { params.outlineLevel = row.level; }
			}
			o[o.length] = (writextag('row', r.join(""), params));
		}
	}
	if(rows) for(; R < rows.length; ++R) {
		if(rows && rows[R]) {
			params = ({r:R+1}/*:any*/);
			row = rows[R];
			if(row.hidden) params.hidden = 1;
			height = -1;
			if (row.hpx) height = px2pt(row.hpx);
			else if (row.hpt) height = row.hpt;
			if (height > -1) { params.ht = height; params.customHeight = 1; }
			if (row.level) { params.outlineLevel = row.level; }
			o[o.length] = (writextag('row', "", params));
		}
	}
	return o.join("");
}

function write_ws_xml(idx/*:number*/, opts, wb/*:Workbook*/, rels)/*:string*/ {
	var o = [XML_HEADER, writextag('worksheet', null, {
		'xmlns': XMLNS_main[0],
		'xmlns:r': XMLNS.r
	})];
	var s = wb.SheetNames[idx], sidx = 0, rdata = "";
	var ws = wb.Sheets[s];
	if(ws == null) ws = {};
	var ref = ws['!ref'] || 'A1';
	var range = safe_decode_range(ref);
	if(range.e.c > 0x3FFF || range.e.r > 0xFFFFF) {
		if(opts.WTF) throw new Error("Range " + ref + " exceeds format limit A1:XFD1048576");
		range.e.c = Math.min(range.e.c, 0x3FFF);
		range.e.r = Math.min(range.e.c, 0xFFFFF);
		ref = encode_range(range);
	}
	if(!rels) rels = {};
	ws['!comments'] = [];
	var _drawing = [];

	write_ws_xml_sheetpr(ws, wb, idx, opts, o);

	o[o.length] = (writextag('dimension', null, {'ref': ref}));

	o[o.length] = write_ws_xml_sheetviews(ws, opts, idx, wb);

	/* TODO: store in WB, process styles */
	if(opts.sheetFormat) o[o.length] = (writextag('sheetFormatPr', null, {
		defaultRowHeight:opts.sheetFormat.defaultRowHeight||'16',
		baseColWidth:opts.sheetFormat.baseColWidth||'10',
		outlineLevelRow:opts.sheetFormat.outlineLevelRow||'7'
	}));

	if(ws['!cols'] != null && ws['!cols'].length > 0) o[o.length] = (write_ws_xml_cols(ws, ws['!cols']));

	o[sidx = o.length] = '<sheetData/>';
	ws['!links'] = [];
	if(ws['!ref'] != null) {
		rdata = write_ws_xml_data(ws, opts, idx, wb, rels);
		if(rdata.length > 0) o[o.length] = (rdata);
	}
	if(o.length>sidx+1) { o[o.length] = ('</sheetData>'); o[sidx]=o[sidx].replace("/>",">"); }

	/* sheetCalcPr */

	if(ws['!protect']) o[o.length] = write_ws_xml_protection(ws['!protect']);

	/* protectedRanges */
	/* scenarios */

	if(ws['!autofilter'] != null) o[o.length] = write_ws_xml_autofilter(ws['!autofilter'], ws, wb, idx);

	/* sortState */
	/* dataConsolidate */
	/* customSheetViews */

	if(ws['!merges'] != null && ws['!merges'].length > 0) o[o.length] = (write_ws_xml_merges(ws['!merges']));

	/* phoneticPr */
	/* conditionalFormatting */
	/* dataValidations */

	var relc = -1, rel, rId = -1;
	if(/*::(*/ws['!links']/*::||[])*/.length > 0) {
		o[o.length] = "<hyperlinks>";
		/*::(*/ws['!links']/*::||[])*/.forEach(function(l) {
			if(!l[1].Target) return;
			rel = ({"ref":l[0]}/*:any*/);
			if(l[1].Target.charAt(0) != "#") {
				rId = add_rels(rels, -1, escapexml(l[1].Target).replace(/#.*$/, ""), RELS.HLINK);
				rel["r:id"] = "rId"+rId;
			}
			if((relc = l[1].Target.indexOf("#")) > -1) rel.location = escapexml(l[1].Target.slice(relc+1));
			if(l[1].Tooltip) rel.tooltip = escapexml(l[1].Tooltip);
			o[o.length] = writextag("hyperlink",null,rel);
		});
		o[o.length] = "</hyperlinks>";
	}
	delete ws['!links'];

	/* printOptions */

	if(ws['!margins'] != null) o[o.length] =  write_ws_xml_margins(ws['!margins']);

	/* pageSetup */
	/* headerFooter */
	/* rowBreaks */
	/* colBreaks */
	/* customProperties */
	/* cellWatches */

	if(!opts || opts.ignoreEC || (opts.ignoreEC == (void 0))) o[o.length] = writetag("ignoredErrors", writextag("ignoredError", null, {numberStoredAsText:1, sqref:ref}));

	/* smartTags */

	if(_drawing.length > 0) {
		rId = add_rels(rels, -1, "../drawings/drawing" + (idx+1) + ".xml", RELS.DRAW);
		o[o.length] = writextag("drawing", null, {"r:id":"rId" + rId});
		ws['!drawing'] = _drawing;
	}

	if(ws['!comments'].length > 0) {
		rId = add_rels(rels, -1, "../drawings/vmlDrawing" + (idx+1) + ".vml", RELS.VML);
		o[o.length] = writextag("legacyDrawing", null, {"r:id":"rId" + rId});
		ws['!legacy'] = rId;
	}

	/* legacyDrawingHF */
	/* picture */
	/* oleObjects */
	/* controls */
	/* webPublishItems */
	/* tableParts */
	/* extLst */

	if(o.length>1) { o[o.length] = ('</worksheet>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}

/* [MS-XLSB] 2.4.726 BrtRowHdr */
function parse_BrtRowHdr(data, length) {
	var z = ({}/*:any*/);
	var tgt = data.l + length;
	z.r = data.read_shift(4);
	data.l += 4; // TODO: ixfe
	var miyRw = data.read_shift(2);
	data.l += 1; // TODO: top/bot padding
	var flags = data.read_shift(1);
	data.l = tgt;
	if(flags & 0x07) z.level = flags & 0x07;
	if(flags & 0x10) z.hidden = true;
	if(flags & 0x20) z.hpt = miyRw / 20;
	return z;
}
function write_BrtRowHdr(R/*:number*/, range, ws) {
	var o = new_buf(17+8*16);
	var row = (ws['!rows']||[])[R]||{};
	o.write_shift(4, R);

	o.write_shift(4, 0); /* TODO: ixfe */

	var miyRw = 0x0140;
	if(row.hpx) miyRw = px2pt(row.hpx) * 20;
	else if(row.hpt) miyRw = row.hpt * 20;
	o.write_shift(2, miyRw);

	o.write_shift(1, 0); /* top/bot padding */

	var flags = 0x0;
	if(row.level) flags |= row.level;
	if(row.hidden) flags |= 0x10;
	if(row.hpx || row.hpt) flags |= 0x20;
	o.write_shift(1, flags);

	o.write_shift(1, 0); /* phonetic guide */

	/* [MS-XLSB] 2.5.8 BrtColSpan explains the mechanism */
	var ncolspan = 0, lcs = o.l;
	o.l += 4;

	var caddr = {r:R, c:0};
	for(var i = 0; i < 16; ++i) {
		if((range.s.c > ((i+1) << 10)) || (range.e.c < (i << 10))) continue;
		var first = -1, last = -1;
		for(var j = (i<<10); j < ((i+1)<<10); ++j) {
			caddr.c = j;
			var cell = Array.isArray(ws) ? (ws[caddr.r]||[])[caddr.c] : ws[encode_cell(caddr)];
			if(cell) { if(first < 0) first = j; last = j; }
		}
		if(first < 0) continue;
		++ncolspan;
		o.write_shift(4, first);
		o.write_shift(4, last);
	}

	var l = o.l;
	o.l = lcs;
	o.write_shift(4, ncolspan);
	o.l = l;

	return o.length > o.l ? o.slice(0, o.l) : o;
}
function write_row_header(ba, ws, range, R) {
	var o = write_BrtRowHdr(R, range, ws);
	if((o.length > 17) || (ws['!rows']||[])[R]) write_record(ba, 0x0000 /* BrtRowHdr */, o);
}

/* [MS-XLSB] 2.4.820 BrtWsDim */
var parse_BrtWsDim = parse_UncheckedRfX;
var write_BrtWsDim = write_UncheckedRfX;

/* [MS-XLSB] 2.4.821 BrtWsFmtInfo */
function parse_BrtWsFmtInfo(/*::data, length*/) {
}
//function write_BrtWsFmtInfo(ws, o) { }

/* [MS-XLSB] 2.4.823 BrtWsProp */
function parse_BrtWsProp(data, length) {
	var z = {};
	var f = data[data.l]; ++data.l;
	z.above = !(f & 0x40);
	z.left  = !(f & 0x80);
	/* TODO: pull flags */
	data.l += 18;
	z.name = parse_XLSBCodeName(data, length - 19);
	return z;
}
function write_BrtWsProp(str, outl, o) {
	if(o == null) o = new_buf(84+4*str.length);
	var f = 0xC0;
	if(outl) {
		if(outl.above) f &= ~0x40;
		if(outl.left)  f &= ~0x80;
	}
	o.write_shift(1, f);
	for(var i = 1; i < 3; ++i) o.write_shift(1,0);
	write_BrtColor({auto:1}, o);
	o.write_shift(-4,-1);
	o.write_shift(-4,-1);
	write_XLSBCodeName(str, o);
	return o.slice(0, o.l);
}

/* [MS-XLSB] 2.4.306 BrtCellBlank */
function parse_BrtCellBlank(data) {
	var cell = parse_XLSBCell(data);
	return [cell];
}
function write_BrtCellBlank(cell, ncell, o) {
	if(o == null) o = new_buf(8);
	return write_XLSBCell(ncell, o);
}
function parse_BrtShortBlank(data) {
	var cell = parse_XLSBShortCell(data);
	return [cell];
}
function write_BrtShortBlank(cell, ncell, o) {
	if(o == null) o = new_buf(4);
	return write_XLSBShortCell(ncell, o);
}

/* [MS-XLSB] 2.4.307 BrtCellBool */
function parse_BrtCellBool(data) {
	var cell = parse_XLSBCell(data);
	var fBool = data.read_shift(1);
	return [cell, fBool, 'b'];
}
function write_BrtCellBool(cell, ncell, o) {
	if(o == null) o = new_buf(9);
	write_XLSBCell(ncell, o);
	o.write_shift(1, cell.v ? 1 : 0);
	return o;
}
function parse_BrtShortBool(data) {
	var cell = parse_XLSBShortCell(data);
	var fBool = data.read_shift(1);
	return [cell, fBool, 'b'];
}
function write_BrtShortBool(cell, ncell, o) {
	if(o == null) o = new_buf(5);
	write_XLSBShortCell(ncell, o);
	o.write_shift(1, cell.v ? 1 : 0);
	return o;
}

/* [MS-XLSB] 2.4.308 BrtCellError */
function parse_BrtCellError(data) {
	var cell = parse_XLSBCell(data);
	var bError = data.read_shift(1);
	return [cell, bError, 'e'];
}
function write_BrtCellError(cell, ncell, o) {
	if(o == null) o = new_buf(9);
	write_XLSBCell(ncell, o);
	o.write_shift(1, cell.v);
	return o;
}
function parse_BrtShortError(data) {
	var cell = parse_XLSBShortCell(data);
	var bError = data.read_shift(1);
	return [cell, bError, 'e'];
}
function write_BrtShortError(cell, ncell, o) {
	if(o == null) o = new_buf(8);
	write_XLSBShortCell(ncell, o);
	o.write_shift(1, cell.v);
	o.write_shift(2, 0);
	o.write_shift(1, 0);
	return o;
}


/* [MS-XLSB] 2.4.311 BrtCellIsst */
function parse_BrtCellIsst(data) {
	var cell = parse_XLSBCell(data);
	var isst = data.read_shift(4);
	return [cell, isst, 's'];
}
function write_BrtCellIsst(cell, ncell, o) {
	if(o == null) o = new_buf(12);
	write_XLSBCell(ncell, o);
	o.write_shift(4, ncell.v);
	return o;
}
function parse_BrtShortIsst(data) {
	var cell = parse_XLSBShortCell(data);
	var isst = data.read_shift(4);
	return [cell, isst, 's'];
}
function write_BrtShortIsst(cell, ncell, o) {
	if(o == null) o = new_buf(8);
	write_XLSBShortCell(ncell, o);
	o.write_shift(4, ncell.v);
	return o;
}

/* [MS-XLSB] 2.4.313 BrtCellReal */
function parse_BrtCellReal(data) {
	var cell = parse_XLSBCell(data);
	var value = parse_Xnum(data);
	return [cell, value, 'n'];
}
function write_BrtCellReal(cell, ncell, o) {
	if(o == null) o = new_buf(16);
	write_XLSBCell(ncell, o);
	write_Xnum(cell.v, o);
	return o;
}
function parse_BrtShortReal(data) {
	var cell = parse_XLSBShortCell(data);
	var value = parse_Xnum(data);
	return [cell, value, 'n'];
}
function write_BrtShortReal(cell, ncell, o) {
	if(o == null) o = new_buf(12);
	write_XLSBShortCell(ncell, o);
	write_Xnum(cell.v, o);
	return o;
}

/* [MS-XLSB] 2.4.314 BrtCellRk */
function parse_BrtCellRk(data) {
	var cell = parse_XLSBCell(data);
	var value = parse_RkNumber(data);
	return [cell, value, 'n'];
}
function write_BrtCellRk(cell, ncell, o) {
	if(o == null) o = new_buf(12);
	write_XLSBCell(ncell, o);
	write_RkNumber(cell.v, o);
	return o;
}
function parse_BrtShortRk(data) {
	var cell = parse_XLSBShortCell(data);
	var value = parse_RkNumber(data);
	return [cell, value, 'n'];
}
function write_BrtShortRk(cell, ncell, o) {
	if(o == null) o = new_buf(8);
	write_XLSBShortCell(ncell, o);
	write_RkNumber(cell.v, o);
	return o;
}

/* [MS-XLSB] 2.4.323 BrtCellRString */
function parse_BrtCellRString(data) {
	var cell = parse_XLSBCell(data);
	var value = parse_RichStr(data);
	return [cell, value, 'is'];
}

/* [MS-XLSB] 2.4.317 BrtCellSt */
function parse_BrtCellSt(data) {
	var cell = parse_XLSBCell(data);
	var value = parse_XLWideString(data);
	return [cell, value, 'str'];
}
function write_BrtCellSt(cell, ncell, o) {
	if(o == null) o = new_buf(12 + 4 * cell.v.length);
	write_XLSBCell(ncell, o);
	write_XLWideString(cell.v, o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}
function parse_BrtShortSt(data) {
	var cell = parse_XLSBShortCell(data);
	var value = parse_XLWideString(data);
	return [cell, value, 'str'];
}
function write_BrtShortSt(cell, ncell, o) {
	if(o == null) o = new_buf(8 + 4 * cell.v.length);
	write_XLSBShortCell(ncell, o);
	write_XLWideString(cell.v, o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.653 BrtFmlaBool */
function parse_BrtFmlaBool(data, length, opts) {
	var end = data.l + length;
	var cell = parse_XLSBCell(data);
	cell.r = opts['!row'];
	var value = data.read_shift(1);
	var o = [cell, value, 'b'];
	if(opts.cellFormula) {
		data.l += 2;
		var formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);
		o[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */
	}
	else data.l = end;
	return o;
}

/* [MS-XLSB] 2.4.654 BrtFmlaError */
function parse_BrtFmlaError(data, length, opts) {
	var end = data.l + length;
	var cell = parse_XLSBCell(data);
	cell.r = opts['!row'];
	var value = data.read_shift(1);
	var o = [cell, value, 'e'];
	if(opts.cellFormula) {
		data.l += 2;
		var formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);
		o[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */
	}
	else data.l = end;
	return o;
}

/* [MS-XLSB] 2.4.655 BrtFmlaNum */
function parse_BrtFmlaNum(data, length, opts) {
	var end = data.l + length;
	var cell = parse_XLSBCell(data);
	cell.r = opts['!row'];
	var value = parse_Xnum(data);
	var o = [cell, value, 'n'];
	if(opts.cellFormula) {
		data.l += 2;
		var formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);
		o[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */
	}
	else data.l = end;
	return o;
}

/* [MS-XLSB] 2.4.656 BrtFmlaString */
function parse_BrtFmlaString(data, length, opts) {
	var end = data.l + length;
	var cell = parse_XLSBCell(data);
	cell.r = opts['!row'];
	var value = parse_XLWideString(data);
	var o = [cell, value, 'str'];
	if(opts.cellFormula) {
		data.l += 2;
		var formula = parse_XLSBCellParsedFormula(data, end - data.l, opts);
		o[3] = stringify_formula(formula, null/*range*/, cell, opts.supbooks, opts);/* TODO */
	}
	else data.l = end;
	return o;
}

/* [MS-XLSB] 2.4.682 BrtMergeCell */
var parse_BrtMergeCell = parse_UncheckedRfX;
var write_BrtMergeCell = write_UncheckedRfX;
/* [MS-XLSB] 2.4.107 BrtBeginMergeCells */
function write_BrtBeginMergeCells(cnt, o) {
	if(o == null) o = new_buf(4);
	o.write_shift(4, cnt);
	return o;
}

/* [MS-XLSB] 2.4.662 BrtHLink */
function parse_BrtHLink(data, length/*::, opts*/) {
	var end = data.l + length;
	var rfx = parse_UncheckedRfX(data, 16);
	var relId = parse_XLNullableWideString(data);
	var loc = parse_XLWideString(data);
	var tooltip = parse_XLWideString(data);
	var display = parse_XLWideString(data);
	data.l = end;
	var o = ({rfx:rfx, relId:relId, loc:loc, display:display}/*:any*/);
	if(tooltip) o.Tooltip = tooltip;
	return o;
}
function write_BrtHLink(l, rId) {
	var o = new_buf(50+4*(l[1].Target.length + (l[1].Tooltip || "").length));
	write_UncheckedRfX({s:decode_cell(l[0]), e:decode_cell(l[0])}, o);
	write_RelID("rId" + rId, o);
	var locidx = l[1].Target.indexOf("#");
	var loc = locidx == -1 ? "" : l[1].Target.slice(locidx+1);
	write_XLWideString(loc || "", o);
	write_XLWideString(l[1].Tooltip || "", o);
	write_XLWideString("", o);
	return o.slice(0, o.l);
}

/* [MS-XLSB] 2.4.692 BrtPane */
function parse_BrtPane(/*data, length, opts*/) {
}

/* [MS-XLSB] 2.4.6 BrtArrFmla */
function parse_BrtArrFmla(data, length, opts) {
	var end = data.l + length;
	var rfx = parse_RfX(data, 16);
	var fAlwaysCalc = data.read_shift(1);
	var o = [rfx]; o[2] = fAlwaysCalc;
	if(opts.cellFormula) {
		var formula = parse_XLSBArrayParsedFormula(data, end - data.l, opts);
		o[1] = formula;
	} else data.l = end;
	return o;
}

/* [MS-XLSB] 2.4.750 BrtShrFmla */
function parse_BrtShrFmla(data, length, opts) {
	var end = data.l + length;
	var rfx = parse_UncheckedRfX(data, 16);
	var o = [rfx];
	if(opts.cellFormula) {
		var formula = parse_XLSBSharedParsedFormula(data, end - data.l, opts);
		o[1] = formula;
		data.l = end;
	} else data.l = end;
	return o;
}

/* [MS-XLSB] 2.4.323 BrtColInfo */
/* TODO: once XLS ColInfo is set, combine the functions */
function write_BrtColInfo(C/*:number*/, col, o) {
	if(o == null) o = new_buf(18);
	var p = col_obj_w(C, col);
	o.write_shift(-4, C);
	o.write_shift(-4, C);
	o.write_shift(4, (p.width || 10) * 256);
	o.write_shift(4, 0/*ixfe*/); // style
	var flags = 0;
	if(col.hidden) flags |= 0x01;
	if(typeof p.width == 'number') flags |= 0x02;
	if(col.level) flags |= (col.level << 8);
	o.write_shift(2, flags); // bit flag
	return o;
}

/* [MS-XLSB] 2.4.678 BrtMargins */
var BrtMarginKeys = ["left","right","top","bottom","header","footer"];
function parse_BrtMargins(data/*::, length, opts*/)/*:Margins*/ {
	var margins = ({}/*:any*/);
	BrtMarginKeys.forEach(function(k) { margins[k] = parse_Xnum(data, 8); });
	return margins;
}
function write_BrtMargins(margins/*:Margins*/, o) {
	if(o == null) o = new_buf(6*8);
	default_margins(margins);
	BrtMarginKeys.forEach(function(k) { write_Xnum((margins/*:any*/)[k], o); });
	return o;
}

/* [MS-XLSB] 2.4.299 BrtBeginWsView */
function parse_BrtBeginWsView(data/*::, length, opts*/) {
	var f = data.read_shift(2);
	data.l += 28;
	return { RTL: f & 0x20 };
}
function write_BrtBeginWsView(ws, Workbook, o) {
	if(o == null) o = new_buf(30);
	var f = 0x39c;
	if((((Workbook||{}).Views||[])[0]||{}).RTL) f |= 0x20;
	o.write_shift(2, f); // bit flag
	o.write_shift(4, 0);
	o.write_shift(4, 0); // view first row
	o.write_shift(4, 0); // view first col
	o.write_shift(1, 0); // gridline color ICV
	o.write_shift(1, 0);
	o.write_shift(2, 0);
	o.write_shift(2, 100); // zoom scale
	o.write_shift(2, 0);
	o.write_shift(2, 0);
	o.write_shift(2, 0);
	o.write_shift(4, 0); // workbook view id
	return o;
}

/* [MS-XLSB] 2.4.309 BrtCellIgnoreEC */
function write_BrtCellIgnoreEC(ref) {
	var o = new_buf(24);
	o.write_shift(4, 4);
	o.write_shift(4, 1);
	write_UncheckedRfX(ref, o);
	return o;
}

/* [MS-XLSB] 2.4.748 BrtSheetProtection */
function write_BrtSheetProtection(sp, o) {
	if(o == null) o = new_buf(16*4+2);
	o.write_shift(2, sp.password ? crypto_CreatePasswordVerifier_Method1(sp.password) : 0);
	o.write_shift(4, 1); // this record should not be written if no protection
	[
		["objects",             false], // fObjects
		["scenarios",           false], // fScenarios
		["formatCells",          true], // fFormatCells
		["formatColumns",        true], // fFormatColumns
		["formatRows",           true], // fFormatRows
		["insertColumns",        true], // fInsertColumns
		["insertRows",           true], // fInsertRows
		["insertHyperlinks",     true], // fInsertHyperlinks
		["deleteColumns",        true], // fDeleteColumns
		["deleteRows",           true], // fDeleteRows
		["selectLockedCells",   false], // fSelLockedCells
		["sort",                 true], // fSort
		["autoFilter",           true], // fAutoFilter
		["pivotTables",          true], // fPivotTables
		["selectUnlockedCells", false]  // fSelUnlockedCells
	].forEach(function(n) {
		/*:: if(o == null) throw "unreachable"; */
		if(n[1]) o.write_shift(4, sp[n[0]] != null && !sp[n[0]] ? 1 : 0);
		else      o.write_shift(4, sp[n[0]] != null && sp[n[0]] ? 0 : 1);
	});
	return o;
}

function parse_BrtDVal(/*data, length, opts*/) {
}
function parse_BrtDVal14(/*data, length, opts*/) {
}
/* [MS-XLSB] 2.1.7.61 Worksheet */
function parse_ws_bin(data, _opts, idx, rels, wb/*:WBWBProps*/, themes, styles)/*:Worksheet*/ {
	if(!data) return data;
	var opts = _opts || {};
	if(!rels) rels = {'!id':{}};
	if(DENSE != null && opts.dense == null) opts.dense = DENSE;
	var s/*:Worksheet*/ = (opts.dense ? [] : {});

	var ref;
	var refguess = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };

	var state/*:Array<string>*/ = [];
	var pass = false, end = false;
	var row, p, cf, R, C, addr, sstr, rr, cell/*:Cell*/;
	var merges/*:Array<Range>*/ = [];
	opts.biff = 12;
	opts['!row'] = 0;

	var ai = 0, af = false;

	var arrayf/*:Array<[Range, string]>*/ = [];
	var sharedf = {};
	var supbooks = opts.supbooks || /*::(*/wb/*:: :any)*/.supbooks || ([[]]/*:any*/);
	supbooks.sharedf = sharedf;
	supbooks.arrayf = arrayf;
	supbooks.SheetNames = wb.SheetNames || wb.Sheets.map(function(x) { return x.name; });
	if(!opts.supbooks) {
		opts.supbooks = supbooks;
		if(wb.Names) for(var i = 0; i < wb.Names.length; ++i) supbooks[0][i+1] = wb.Names[i];
	}

	var colinfo/*:Array<ColInfo>*/ = [], rowinfo/*:Array<RowInfo>*/ = [];
	var seencol = false;

	XLSBRecordEnum[0x0010] = { n:"BrtShortReal", f:parse_BrtShortReal };

	var cm, vm;

	recordhopper(data, function ws_parse(val, RR, RT) {
		if(end) return;
		switch(RT) {
			case 0x0094: /* 'BrtWsDim' */
				ref = val; break;
			case 0x0000: /* 'BrtRowHdr' */
				row = val;
				if(opts.sheetRows && opts.sheetRows <= row.r) end=true;
				rr = encode_row(R = row.r);
				opts['!row'] = row.r;
				if(val.hidden || val.hpt || val.level != null) {
					if(val.hpt) val.hpx = pt2px(val.hpt);
					rowinfo[val.r] = val;
				}
				break;

			case 0x0002: /* 'BrtCellRk' */
			case 0x0003: /* 'BrtCellError' */
			case 0x0004: /* 'BrtCellBool' */
			case 0x0005: /* 'BrtCellReal' */
			case 0x0006: /* 'BrtCellSt' */
			case 0x0007: /* 'BrtCellIsst' */
			case 0x0008: /* 'BrtFmlaString' */
			case 0x0009: /* 'BrtFmlaNum' */
			case 0x000A: /* 'BrtFmlaBool' */
			case 0x000B: /* 'BrtFmlaError' */
			case 0x000D: /* 'BrtShortRk' */
			case 0x000E: /* 'BrtShortError' */
			case 0x000F: /* 'BrtShortBool' */
			case 0x0010: /* 'BrtShortReal' */
			case 0x0011: /* 'BrtShortSt' */
			case 0x0012: /* 'BrtShortIsst' */
			case 0x003E: /* 'BrtCellRString' */
				p = ({t:val[2]}/*:any*/);
				switch(val[2]) {
					case 'n': p.v = val[1]; break;
					case 's': sstr = strs[val[1]]; p.v = sstr.t; p.r = sstr.r; break;
					case 'b': p.v = val[1] ? true : false; break;
					case 'e': p.v = val[1]; if(opts.cellText !== false) p.w = BErr[p.v]; break;
					case 'str': p.t = 's'; p.v = val[1]; break;
					case 'is': p.t = 's'; p.v = val[1].t; break;
				}
				if((cf = styles.CellXf[val[0].iStyleRef])) safe_format(p,cf.numFmtId,null,opts, themes, styles);
				C = val[0].c == -1 ? C + 1 : val[0].c;
				if(opts.dense) { if(!s[R]) s[R] = []; s[R][C] = p; }
				else s[encode_col(C) + rr] = p;
				if(opts.cellFormula) {
					af = false;
					for(ai = 0; ai < arrayf.length; ++ai) {
						var aii = arrayf[ai];
						if(row.r >= aii[0].s.r && row.r <= aii[0].e.r)
							if(C >= aii[0].s.c && C <= aii[0].e.c) {
								p.F = encode_range(aii[0]); af = true;
							}
					}
					if(!af && val.length > 3) p.f = val[3];
				}

				if(refguess.s.r > row.r) refguess.s.r = row.r;
				if(refguess.s.c > C) refguess.s.c = C;
				if(refguess.e.r < row.r) refguess.e.r = row.r;
				if(refguess.e.c < C) refguess.e.c = C;
				if(opts.cellDates && cf && p.t == 'n' && fmt_is_date(table_fmt[cf.numFmtId])) {
					var _d = SSF_parse_date_code(p.v); if(_d) { p.t = 'd'; p.v = new Date(_d.y, _d.m-1,_d.d,_d.H,_d.M,_d.S,_d.u); }
				}
				if(cm) {
					if(cm.type == 'XLDAPR') p.D = true;
					cm = void 0;
				}
				if(vm) vm = void 0;
				break;

			case 0x0001: /* 'BrtCellBlank' */
			case 0x000C: /* 'BrtShortBlank' */
				if(!opts.sheetStubs || pass) break;
				p = ({t:'z',v:void 0}/*:any*/);
				C = val[0].c == -1 ? C + 1 : val[0].c;
				if(opts.dense) { if(!s[R]) s[R] = []; s[R][C] = p; }
				else s[encode_col(C) + rr] = p;
				if(refguess.s.r > row.r) refguess.s.r = row.r;
				if(refguess.s.c > C) refguess.s.c = C;
				if(refguess.e.r < row.r) refguess.e.r = row.r;
				if(refguess.e.c < C) refguess.e.c = C;
				if(cm) {
					if(cm.type == 'XLDAPR') p.D = true;
					cm = void 0;
				}
				if(vm) vm = void 0;
				break;

			case 0x00B0: /* 'BrtMergeCell' */
				merges.push(val); break;

			case 0x0031: { /* 'BrtCellMeta' */
				cm = ((opts.xlmeta||{}).Cell||[])[val-1];
			} break;

			case 0x01EE: /* 'BrtHLink' */
				var rel = rels['!id'][val.relId];
				if(rel) {
					val.Target = rel.Target;
					if(val.loc) val.Target += "#"+val.loc;
					val.Rel = rel;
				} else if(val.relId == '') {
					val.Target = "#" + val.loc;
				}
				for(R=val.rfx.s.r;R<=val.rfx.e.r;++R) for(C=val.rfx.s.c;C<=val.rfx.e.c;++C) {
					if(opts.dense) {
						if(!s[R]) s[R] = [];
						if(!s[R][C]) s[R][C] = {t:'z',v:undefined};
						s[R][C].l = val;
					} else {
						addr = encode_cell({c:C,r:R});
						if(!s[addr]) s[addr] = {t:'z',v:undefined};
						s[addr].l = val;
					}
				}
				break;

			case 0x01AA: /* 'BrtArrFmla' */
				if(!opts.cellFormula) break;
				arrayf.push(val);
				cell = ((opts.dense ? s[R][C] : s[encode_col(C) + rr])/*:any*/);
				cell.f = stringify_formula(val[1], refguess, {r:row.r, c:C}, supbooks, opts);
				cell.F = encode_range(val[0]);
				break;
			case 0x01AB: /* 'BrtShrFmla' */
				if(!opts.cellFormula) break;
				sharedf[encode_cell(val[0].s)] = val[1];
				cell = (opts.dense ? s[R][C] : s[encode_col(C) + rr]);
				cell.f = stringify_formula(val[1], refguess, {r:row.r, c:C}, supbooks, opts);
				break;

			/* identical to 'ColInfo' in XLS */
			case 0x003C: /* 'BrtColInfo' */
				if(!opts.cellStyles) break;
				while(val.e >= val.s) {
					colinfo[val.e--] = { width: val.w/256, hidden: !!(val.flags & 0x01), level: val.level };
					if(!seencol) { seencol = true; find_mdw_colw(val.w/256); }
					process_col(colinfo[val.e+1]);
				}
				break;

			case 0x00A1: /* 'BrtBeginAFilter' */
				s['!autofilter'] = { ref:encode_range(val) };
				break;

			case 0x01DC: /* 'BrtMargins' */
				s['!margins'] = val;
				break;

			case 0x0093: /* 'BrtWsProp' */
				if(!wb.Sheets[idx]) wb.Sheets[idx] = {};
				if(val.name) wb.Sheets[idx].CodeName = val.name;
				if(val.above || val.left) s['!outline'] = { above: val.above, left: val.left };
				break;

			case 0x0089: /* 'BrtBeginWsView' */
				if(!wb.Views) wb.Views = [{}];
				if(!wb.Views[0]) wb.Views[0] = {};
				if(val.RTL) wb.Views[0].RTL = true;
				break;

			case 0x01E5: /* 'BrtWsFmtInfo' */
				break;

			case 0x0040: /* 'BrtDVal' */
			case 0x041D: /* 'BrtDVal14' */
				break;

			case 0x0097: /* 'BrtPane' */
				break;
			case 0x0098: /* 'BrtSel' */
			case 0x00AF: /* 'BrtAFilterDateGroupItem' */
			case 0x0284: /* 'BrtActiveX' */
			case 0x0271: /* 'BrtBigName' */
			case 0x0232: /* 'BrtBkHim' */
			case 0x018C: /* 'BrtBrk' */
			case 0x0458: /* 'BrtCFIcon' */
			case 0x047A: /* 'BrtCFRuleExt' */
			case 0x01D7: /* 'BrtCFVO' */
			case 0x041A: /* 'BrtCFVO14' */
			case 0x0289: /* 'BrtCellIgnoreEC' */
			case 0x0451: /* 'BrtCellIgnoreEC14' */
			case 0x024D: /* 'BrtCellSmartTagProperty' */
			case 0x025F: /* 'BrtCellWatch' */
			case 0x0234: /* 'BrtColor' */
			case 0x041F: /* 'BrtColor14' */
			case 0x00A8: /* 'BrtColorFilter' */
			case 0x00AE: /* 'BrtCustomFilter' */
			case 0x049C: /* 'BrtCustomFilter14' */
			case 0x01F3: /* 'BrtDRef' */
			case 0x01FB: /* 'BrtDXF' */
			case 0x0226: /* 'BrtDrawing' */
			case 0x00AB: /* 'BrtDynamicFilter' */
			case 0x00A7: /* 'BrtFilter' */
			case 0x0499: /* 'BrtFilter14' */
			case 0x00A9: /* 'BrtIconFilter' */
			case 0x049D: /* 'BrtIconFilter14' */
			case 0x0227: /* 'BrtLegacyDrawing' */
			case 0x0228: /* 'BrtLegacyDrawingHF' */
			case 0x0295: /* 'BrtListPart' */
			case 0x027F: /* 'BrtOleObject' */
			case 0x01DE: /* 'BrtPageSetup' */
			case 0x0219: /* 'BrtPhoneticInfo' */
			case 0x01DD: /* 'BrtPrintOptions' */
			case 0x0218: /* 'BrtRangeProtection' */
			case 0x044F: /* 'BrtRangeProtection14' */
			case 0x02A8: /* 'BrtRangeProtectionIso' */
			case 0x0450: /* 'BrtRangeProtectionIso14' */
			case 0x0400: /* 'BrtRwDescent' */
			case 0x0297: /* 'BrtSheetCalcProp' */
			case 0x0217: /* 'BrtSheetProtection' */
			case 0x02A6: /* 'BrtSheetProtectionIso' */
			case 0x01F8: /* 'BrtSlc' */
			case 0x0413: /* 'BrtSparkline' */
			case 0x01AC: /* 'BrtTable' */
			case 0x00AA: /* 'BrtTop10Filter' */
			case 0x0C00: /* 'BrtUid' */
			case 0x0032: /* 'BrtValueMeta' */
			case 0x0816: /* 'BrtWebExtension' */
			case 0x0415: /* 'BrtWsFmtInfoEx14' */
				break;

			case 0x0023: /* 'BrtFRTBegin' */
				pass = true; break;
			case 0x0024: /* 'BrtFRTEnd' */
				pass = false; break;
			case 0x0025: /* 'BrtACBegin' */
				state.push(RT); pass = true; break;
			case 0x0026: /* 'BrtACEnd' */
				state.pop(); pass = false; break;

			default:
				if(RR.T){/* empty */}
				else if(!pass || opts.WTF) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	}, opts);

	delete opts.supbooks;
	delete opts['!row'];

	if(!s["!ref"] && (refguess.s.r < 2000000 || ref && (ref.e.r > 0 || ref.e.c > 0 || ref.s.r > 0 || ref.s.c > 0))) s["!ref"] = encode_range(ref || refguess);
	if(opts.sheetRows && s["!ref"]) {
		var tmpref = safe_decode_range(s["!ref"]);
		if(opts.sheetRows <= +tmpref.e.r) {
			tmpref.e.r = opts.sheetRows - 1;
			if(tmpref.e.r > refguess.e.r) tmpref.e.r = refguess.e.r;
			if(tmpref.e.r < tmpref.s.r) tmpref.s.r = tmpref.e.r;
			if(tmpref.e.c > refguess.e.c) tmpref.e.c = refguess.e.c;
			if(tmpref.e.c < tmpref.s.c) tmpref.s.c = tmpref.e.c;
			s["!fullref"] = s["!ref"];
			s["!ref"] = encode_range(tmpref);
		}
	}
	if(merges.length > 0) s["!merges"] = merges;
	if(colinfo.length > 0) s["!cols"] = colinfo;
	if(rowinfo.length > 0) s["!rows"] = rowinfo;
	return s;
}

/* TODO: something useful -- this is a stub */
function write_ws_bin_cell(ba/*:BufArray*/, cell/*:Cell*/, R/*:number*/, C/*:number*/, opts, ws/*:Worksheet*/, last_seen/*:boolean*/)/*:boolean*/ {
	if(cell.v === undefined) return false;
	var vv = "";
	switch(cell.t) {
		case 'b': vv = cell.v ? "1" : "0"; break;
		case 'd': // no BrtCellDate :(
			cell = dup(cell);
			cell.z = cell.z || table_fmt[14];
			cell.v = datenum(parseDate(cell.v)); cell.t = 'n';
			break;
		/* falls through */
		case 'n': case 'e': vv = ''+cell.v; break;
		default: vv = cell.v; break;
	}
	var o/*:any*/ = ({r:R, c:C}/*:any*/);
	/* TODO: cell style */
	o.s = get_cell_style(opts.cellXfs, cell, opts);
	if(cell.l) ws['!links'].push([encode_cell(o), cell.l]);
	if(cell.c) ws['!comments'].push([encode_cell(o), cell.c]);
	switch(cell.t) {
		case 's': case 'str':
			if(opts.bookSST) {
				vv = get_sst_id(opts.Strings, (cell.v/*:any*/), opts.revStrings);
				o.t = "s"; o.v = vv;
				if(last_seen) write_record(ba, 0x0012 /* BrtShortIsst */, write_BrtShortIsst(cell, o));
				else write_record(ba, 0x0007 /* BrtCellIsst */, write_BrtCellIsst(cell, o));
			} else {
				o.t = "str";
				if(last_seen) write_record(ba, 0x0011 /* BrtShortSt */, write_BrtShortSt(cell, o));
				else write_record(ba, 0x0006 /* BrtCellSt */, write_BrtCellSt(cell, o));
			}
			return true;
		case 'n':
			/* TODO: determine threshold for Real vs RK */
			if(cell.v == (cell.v | 0) && cell.v > -1000 && cell.v < 1000) {
				if(last_seen) write_record(ba, 0x000D /* BrtShortRk */, write_BrtShortRk(cell, o));
				else write_record(ba, 0x0002 /* BrtCellRk */, write_BrtCellRk(cell, o));
			} else {
				if(last_seen) write_record(ba, 0x0010 /* BrtShortReal */, write_BrtShortReal(cell, o));
				else write_record(ba, 0x0005 /* BrtCellReal */, write_BrtCellReal(cell, o));
			} return true;
		case 'b':
			o.t = "b";
			if(last_seen) write_record(ba, 0x000F /* BrtShortBool */, write_BrtShortBool(cell, o));
			else write_record(ba, 0x0004 /* BrtCellBool */, write_BrtCellBool(cell, o));
			return true;
		case 'e':
			o.t = "e";
			if(last_seen) write_record(ba, 0x000E /* BrtShortError */, write_BrtShortError(cell, o));
			else write_record(ba, 0x0003 /* BrtCellError */, write_BrtCellError(cell, o));
			return true;
	}
	if(last_seen) write_record(ba, 0x000C /* BrtShortBlank */, write_BrtShortBlank(cell, o));
	else write_record(ba, 0x0001 /* BrtCellBlank */, write_BrtCellBlank(cell, o));
	return true;
}

function write_CELLTABLE(ba, ws/*:Worksheet*/, idx/*:number*/, opts/*::, wb:Workbook*/) {
	var range = safe_decode_range(ws['!ref'] || "A1"), ref, rr = "", cols/*:Array<string>*/ = [];
	write_record(ba, 0x0091 /* BrtBeginSheetData */);
	var dense = Array.isArray(ws);
	var cap = range.e.r;
	if(ws['!rows']) cap = Math.max(range.e.r, ws['!rows'].length - 1);
	for(var R = range.s.r; R <= cap; ++R) {
		rr = encode_row(R);
		/* [ACCELLTABLE] */
		/* BrtRowHdr */
		write_row_header(ba, ws, range, R);
		var last_seen = false;
		if(R <= range.e.r) for(var C = range.s.c; C <= range.e.c; ++C) {
			/* *16384CELL */
			if(R === range.s.r) cols[C] = encode_col(C);
			ref = cols[C] + rr;
			var cell = dense ? (ws[R]||[])[C] : ws[ref];
			if(!cell) { last_seen = false; continue; }
			/* write cell */
			last_seen = write_ws_bin_cell(ba, cell, R, C, opts, ws, last_seen);
		}
	}
	write_record(ba, 0x0092 /* BrtEndSheetData */);
}

function write_MERGECELLS(ba, ws/*:Worksheet*/) {
	if(!ws || !ws['!merges']) return;
	write_record(ba, 0x00B1 /* BrtBeginMergeCells */, write_BrtBeginMergeCells(ws['!merges'].length));
	ws['!merges'].forEach(function(m) { write_record(ba, 0x00B0 /* BrtMergeCell */, write_BrtMergeCell(m)); });
	write_record(ba, 0x00B2 /* BrtEndMergeCells */);
}

function write_COLINFOS(ba, ws/*:Worksheet*//*::, idx:number, opts, wb:Workbook*/) {
	if(!ws || !ws['!cols']) return;
	write_record(ba, 0x0186 /* BrtBeginColInfos */);
	ws['!cols'].forEach(function(m, i) { if(m) write_record(ba, 0x003C /* 'BrtColInfo' */, write_BrtColInfo(i, m)); });
	write_record(ba, 0x0187 /* BrtEndColInfos */);
}

function write_IGNOREECS(ba, ws/*:Worksheet*/) {
	if(!ws || !ws['!ref']) return;
	write_record(ba, 0x0288 /* BrtBeginCellIgnoreECs */);
	write_record(ba, 0x0289 /* BrtCellIgnoreEC */, write_BrtCellIgnoreEC(safe_decode_range(ws['!ref'])));
	write_record(ba, 0x028A /* BrtEndCellIgnoreECs */);
}

function write_HLINKS(ba, ws/*:Worksheet*/, rels) {
	/* *BrtHLink */
	ws['!links'].forEach(function(l) {
		if(!l[1].Target) return;
		var rId = add_rels(rels, -1, l[1].Target.replace(/#.*$/, ""), RELS.HLINK);
		write_record(ba, 0x01EE /* BrtHLink */, write_BrtHLink(l, rId));
	});
	delete ws['!links'];
}
function write_LEGACYDRAWING(ba, ws/*:Worksheet*/, idx/*:number*/, rels) {
	/* [BrtLegacyDrawing] */
	if(ws['!comments'].length > 0) {
		var rId = add_rels(rels, -1, "../drawings/vmlDrawing" + (idx+1) + ".vml", RELS.VML);
		write_record(ba, 0x0227 /* BrtLegacyDrawing */, write_RelID("rId" + rId));
		ws['!legacy'] = rId;
	}
}

function write_AUTOFILTER(ba, ws, wb, idx) {
	if(!ws['!autofilter']) return;
	var data = ws['!autofilter'];
	var ref = typeof data.ref === "string" ? data.ref : encode_range(data.ref);

	/* Update FilterDatabase defined name for the worksheet */
	if(!wb.Workbook) wb.Workbook = ({Sheets:[]}/*:any*/);
	if(!wb.Workbook.Names) wb.Workbook.Names = [];
	var names/*: Array<any> */ = wb.Workbook.Names;
	var range = decode_range(ref);
	if(range.s.r == range.e.r) { range.e.r = decode_range(ws["!ref"]).e.r; ref = encode_range(range); }
	for(var i = 0; i < names.length; ++i) {
		var name = names[i];
		if(name.Name != '_xlnm._FilterDatabase') continue;
		if(name.Sheet != idx) continue;
		name.Ref = "'" + wb.SheetNames[idx] + "'!" + ref; break;
	}
	if(i == names.length) names.push({ Name: '_xlnm._FilterDatabase', Sheet: idx, Ref: "'" + wb.SheetNames[idx] + "'!" + ref  });

	write_record(ba, 0x00A1 /* BrtBeginAFilter */, write_UncheckedRfX(safe_decode_range(ref)));
	/* *FILTERCOLUMN */
	/* [SORTSTATE] */
	/* BrtEndAFilter */
	write_record(ba, 0x00A2 /* BrtEndAFilter */);
}

function write_WSVIEWS2(ba, ws, Workbook) {
	write_record(ba, 0x0085 /* BrtBeginWsViews */);
	{ /* 1*WSVIEW2 */
		/* [ACUID] */
		write_record(ba, 0x0089 /* BrtBeginWsView */, write_BrtBeginWsView(ws, Workbook));
		/* [BrtPane] */
		/* *4BrtSel */
		/* *4SXSELECT */
		/* *FRT */
		write_record(ba, 0x008A /* BrtEndWsView */);
	}
	/* *FRT */
	write_record(ba, 0x0086 /* BrtEndWsViews */);
}

function write_WSFMTINFO(/*::ba, ws*/) {
	/* [ACWSFMTINFO] */
	// write_record(ba, 0x01E5 /* BrtWsFmtInfo */, write_BrtWsFmtInfo(ws));
}

function write_SHEETPROTECT(ba, ws) {
	if(!ws['!protect']) return;
	/* [BrtSheetProtectionIso] */
	write_record(ba, 0x0217 /* BrtSheetProtection */, write_BrtSheetProtection(ws['!protect']));
}

function write_ws_bin(idx/*:number*/, opts, wb/*:Workbook*/, rels) {
	var ba = buf_array();
	var s = wb.SheetNames[idx], ws = wb.Sheets[s] || {};
	var c/*:string*/ = s; try { if(wb && wb.Workbook) c = wb.Workbook.Sheets[idx].CodeName || c; } catch(e) {}
	var r = safe_decode_range(ws['!ref'] || "A1");
	if(r.e.c > 0x3FFF || r.e.r > 0xFFFFF) {
		if(opts.WTF) throw new Error("Range " + (ws['!ref'] || "A1") + " exceeds format limit A1:XFD1048576");
		r.e.c = Math.min(r.e.c, 0x3FFF);
		r.e.r = Math.min(r.e.c, 0xFFFFF);
	}
	ws['!links'] = [];
	/* passed back to write_zip and removed there */
	ws['!comments'] = [];
	write_record(ba, 0x0081 /* BrtBeginSheet */);
	if(wb.vbaraw || ws['!outline']) write_record(ba, 0x0093 /* BrtWsProp */, write_BrtWsProp(c, ws['!outline']));
	write_record(ba, 0x0094 /* BrtWsDim */, write_BrtWsDim(r));
	write_WSVIEWS2(ba, ws, wb.Workbook);
	write_WSFMTINFO(ba, ws);
	write_COLINFOS(ba, ws, idx, opts, wb);
	write_CELLTABLE(ba, ws, idx, opts, wb);
	/* [BrtSheetCalcProp] */
	write_SHEETPROTECT(ba, ws);
	/* *([BrtRangeProtectionIso] BrtRangeProtection) */
	/* [SCENMAN] */
	write_AUTOFILTER(ba, ws, wb, idx);
	/* [SORTSTATE] */
	/* [DCON] */
	/* [USERSHVIEWS] */
	write_MERGECELLS(ba, ws);
	/* [BrtPhoneticInfo] */
	/* *CONDITIONALFORMATTING */
	/* [DVALS] */
	write_HLINKS(ba, ws, rels);
	/* [BrtPrintOptions] */
	if(ws['!margins']) write_record(ba, 0x01DC /* BrtMargins */, write_BrtMargins(ws['!margins']));
	/* [BrtPageSetup] */
	/* [HEADERFOOTER] */
	/* [RWBRK] */
	/* [COLBRK] */
	/* *BrtBigName */
	/* [CELLWATCHES] */
	if(!opts || opts.ignoreEC || (opts.ignoreEC == (void 0))) write_IGNOREECS(ba, ws);
	/* [SMARTTAGS] */
	/* [BrtDrawing] */
	write_LEGACYDRAWING(ba, ws, idx, rels);
	/* [BrtLegacyDrawingHF] */
	/* [BrtBkHim] */
	/* [OLEOBJECTS] */
	/* [ACTIVEXCONTROLS] */
	/* [WEBPUBITEMS] */
	/* [LISTPARTS] */
	/* FRTWORKSHEET */
	write_record(ba, 0x0082 /* BrtEndSheet */);
	return ba.end();
}
function parse_Cache(data/*:string*/)/*:[Array<number|string>, string, ?string]*/ {
	var col/*:Array<number|string>*/ = [];
	var num = data.match(/^<c:numCache>/);
	var f;

	/* 21.2.2.150 pt CT_NumVal */
	(data.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(pt) {
		var q = pt.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);
		if(!q) return;
		col[+q[1]] = num ? +q[2] : q[2];
	});

	/* 21.2.2.71 formatCode CT_Xstring */
	var nf = unescapexml((data.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/) || ["","General"])[1]);

	(data.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(F) { f = F.replace(/<.*?>/g,""); });

	return [col, nf, f];
}

/* 21.2 DrawingML - Charts */
function parse_chart(data/*:?string*/, name/*:string*/, opts, rels, wb, csheet) {
	var cs/*:Worksheet*/ = ((csheet || {"!type":"chart"})/*:any*/);
	if(!data) return csheet;
	/* 21.2.2.27 chart CT_Chart */

	var C = 0, R = 0, col = "A";
	var refguess = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };

	/* 21.2.2.120 numCache CT_NumData */
	(data.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(nc) {
		var cache = parse_Cache(nc);
		refguess.s.r = refguess.s.c = 0;
		refguess.e.c = C;
		col = encode_col(C);
		cache[0].forEach(function(n,i) {
			cs[col + encode_row(i)] = {t:'n', v:n, z:cache[1] };
			R = i;
		});
		if(refguess.e.r < R) refguess.e.r = R;
		++C;
	});
	if(C > 0) cs["!ref"] = encode_range(refguess);
	return cs;
}
/* 18.3 Worksheets also covers Chartsheets */
function parse_cs_xml(data/*:?string*/, opts, idx/*:number*/, rels, wb/*::, themes, styles*/)/*:Worksheet*/ {
	if(!data) return data;
	/* 18.3.1.12 chartsheet CT_ChartSheet */
	if(!rels) rels = {'!id':{}};
	var s = ({'!type':"chart", '!drawel':null, '!rel':""}/*:any*/);
	var m;

	/* 18.3.1.83 sheetPr CT_ChartsheetPr */
	var sheetPr = data.match(sheetprregex);
	if(sheetPr) parse_ws_xml_sheetpr(sheetPr[0], s, wb, idx);

	/* 18.3.1.36 drawing CT_Drawing */
	if((m = data.match(/drawing r:id="(.*?)"/))) s['!rel'] = m[1];

	if(rels['!id'][s['!rel']]) s['!drawel'] = rels['!id'][s['!rel']];
	return s;
}
function write_cs_xml(idx/*:number*/, opts, wb/*:Workbook*/, rels)/*:string*/ {
	var o = [XML_HEADER, writextag('chartsheet', null, {
		'xmlns': XMLNS_main[0],
		'xmlns:r': XMLNS.r
	})];
	o[o.length] = writextag("drawing", null, {"r:id": "rId1"});
	add_rels(rels, -1, "../drawings/drawing" + (idx+1) + ".xml", RELS.DRAW);
	if(o.length>2) { o[o.length] = ('</chartsheet>'); o[1]=o[1].replace("/>",">"); }
	return o.join("");
}

/* [MS-XLSB] 2.4.331 BrtCsProp */
function parse_BrtCsProp(data, length/*:number*/) {
	data.l += 10;
	var name = parse_XLWideString(data, length - 10);
	return { name: name };
}

/* [MS-XLSB] 2.1.7.7 Chart Sheet */
function parse_cs_bin(data, opts, idx/*:number*/, rels, wb/*::, themes, styles*/)/*:Worksheet*/ {
	if(!data) return data;
	if(!rels) rels = {'!id':{}};
	var s = {'!type':"chart", '!drawel':null, '!rel':""};
	var state/*:Array<string>*/ = [];
	var pass = false;
	recordhopper(data, function cs_parse(val, R, RT) {
		switch(RT) {

			case 0x0226: /* 'BrtDrawing' */
				s['!rel'] = val; break;

			case 0x028B: /* 'BrtCsProp' */
				if(!wb.Sheets[idx]) wb.Sheets[idx] = {};
				if(val.name) wb.Sheets[idx].CodeName = val.name;
				break;

			case 0x0232: /* 'BrtBkHim' */
			case 0x028C: /* 'BrtCsPageSetup' */
			case 0x029D: /* 'BrtCsProtection' */
			case 0x02A7: /* 'BrtCsProtectionIso' */
			case 0x0227: /* 'BrtLegacyDrawing' */
			case 0x0228: /* 'BrtLegacyDrawingHF' */
			case 0x01DC: /* 'BrtMargins' */
			case 0x0C00: /* 'BrtUid' */
				break;

			case 0x0023: /* 'BrtFRTBegin' */
				pass = true; break;
			case 0x0024: /* 'BrtFRTEnd' */
				pass = false; break;
			case 0x0025: /* 'BrtACBegin' */
				state.push(RT); break;
			case 0x0026: /* 'BrtACEnd' */
				state.pop(); break;

			default:
				if(R.T > 0) state.push(RT);
				else if(R.T < 0) state.pop();
				else if(!pass || opts.WTF) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	}, opts);

	if(rels['!id'][s['!rel']]) s['!drawel'] = rels['!id'][s['!rel']];
	return s;
}
function write_cs_bin(/*::idx:number, opts, wb:Workbook, rels*/) {
	var ba = buf_array();
	write_record(ba, 0x0081 /* BrtBeginSheet */);
	/* [BrtCsProp] */
	/* CSVIEWS */
	/* [[BrtCsProtectionIso] BrtCsProtection] */
	/* [USERCSVIEWS] */
	/* [BrtMargins] */
	/* [BrtCsPageSetup] */
	/* [HEADERFOOTER] */
	/* BrtDrawing */
	/* [BrtLegacyDrawing] */
	/* [BrtLegacyDrawingHF] */
	/* [BrtBkHim] */
	/* [WEBPUBITEMS] */
	/* FRTCHARTSHEET */
	write_record(ba, 0x0082 /* BrtEndSheet */);
	return ba.end();
}
/* 18.2.28 (CT_WorkbookProtection) Defaults */
var WBPropsDef = [
	['allowRefreshQuery',           false, "bool"],
	['autoCompressPictures',        true,  "bool"],
	['backupFile',                  false, "bool"],
	['checkCompatibility',          false, "bool"],
	['CodeName',                    ''],
	['date1904',                    false, "bool"],
	['defaultThemeVersion',         0,      "int"],
	['filterPrivacy',               false, "bool"],
	['hidePivotFieldList',          false, "bool"],
	['promptedSolutions',           false, "bool"],
	['publishItems',                false, "bool"],
	['refreshAllConnections',       false, "bool"],
	['saveExternalLinkValues',      true,  "bool"],
	['showBorderUnselectedTables',  true,  "bool"],
	['showInkAnnotation',           true,  "bool"],
	['showObjects',                 'all'],
	['showPivotChartFilter',        false, "bool"],
	['updateLinks', 'userSet']
];

/* 18.2.30 (CT_BookView) Defaults */
var WBViewDef = [
	['activeTab',                   0,      "int"],
	['autoFilterDateGrouping',      true,  "bool"],
	['firstSheet',                  0,      "int"],
	['minimized',                   false, "bool"],
	['showHorizontalScroll',        true,  "bool"],
	['showSheetTabs',               true,  "bool"],
	['showVerticalScroll',          true,  "bool"],
	['tabRatio',                    600,    "int"],
	['visibility',                  'visible']
	//window{Height,Width}, {x,y}Window
];

/* 18.2.19 (CT_Sheet) Defaults */
var SheetDef = [
	//['state', 'visible']
];

/* 18.2.2  (CT_CalcPr) Defaults */
var CalcPrDef = [
	['calcCompleted', 'true'],
	['calcMode', 'auto'],
	['calcOnSave', 'true'],
	['concurrentCalc', 'true'],
	['fullCalcOnLoad', 'false'],
	['fullPrecision', 'true'],
	['iterate', 'false'],
	['iterateCount', '100'],
	['iterateDelta', '0.001'],
	['refMode', 'A1']
];

/* 18.2.3 (CT_CustomWorkbookView) Defaults */
/*var CustomWBViewDef = [
	['autoUpdate', 'false'],
	['changesSavedWin', 'false'],
	['includeHiddenRowCol', 'true'],
	['includePrintSettings', 'true'],
	['maximized', 'false'],
	['minimized', 'false'],
	['onlySync', 'false'],
	['personalView', 'false'],
	['showComments', 'commIndicator'],
	['showFormulaBar', 'true'],
	['showHorizontalScroll', 'true'],
	['showObjects', 'all'],
	['showSheetTabs', 'true'],
	['showStatusbar', 'true'],
	['showVerticalScroll', 'true'],
	['tabRatio', '600'],
	['xWindow', '0'],
	['yWindow', '0']
];*/

function push_defaults_array(target, defaults) {
	for(var j = 0; j != target.length; ++j) { var w = target[j];
		for(var i=0; i != defaults.length; ++i) { var z = defaults[i];
			if(w[z[0]] == null) w[z[0]] = z[1];
			else switch(z[2]) {
			case "bool": if(typeof w[z[0]] == "string") w[z[0]] = parsexmlbool(w[z[0]]); break;
			case "int": if(typeof w[z[0]] == "string") w[z[0]] = parseInt(w[z[0]], 10); break;
			}
		}
	}
}
function push_defaults(target, defaults) {
	for(var i = 0; i != defaults.length; ++i) { var z = defaults[i];
		if(target[z[0]] == null) target[z[0]] = z[1];
		else switch(z[2]) {
			case "bool": if(typeof target[z[0]] == "string") target[z[0]] = parsexmlbool(target[z[0]]); break;
			case "int": if(typeof target[z[0]] == "string") target[z[0]] = parseInt(target[z[0]], 10); break;
		}
	}
}

function parse_wb_defaults(wb) {
	push_defaults(wb.WBProps, WBPropsDef);
	push_defaults(wb.CalcPr, CalcPrDef);

	push_defaults_array(wb.WBView, WBViewDef);
	push_defaults_array(wb.Sheets, SheetDef);

	_ssfopts.date1904 = parsexmlbool(wb.WBProps.date1904);
}

function safe1904(wb/*:Workbook*/)/*:string*/ {
	/* TODO: store date1904 somewhere else */
	if(!wb.Workbook) return "false";
	if(!wb.Workbook.WBProps) return "false";
	return parsexmlbool(wb.Workbook.WBProps.date1904) ? "true" : "false";
}

var badchars = /*#__PURE__*/"][*?\/\\".split("");
function check_ws_name(n/*:string*/, safe/*:?boolean*/)/*:boolean*/ {
	if(n.length > 31) { if(safe) return false; throw new Error("Sheet names cannot exceed 31 chars"); }
	var _good = true;
	badchars.forEach(function(c) {
		if(n.indexOf(c) == -1) return;
		if(!safe) throw new Error("Sheet name cannot contain : \\ / ? * [ ]");
		_good = false;
	});
	return _good;
}
function check_wb_names(N, S, codes) {
	N.forEach(function(n,i) {
		check_ws_name(n);
		for(var j = 0; j < i; ++j) if(n == N[j]) throw new Error("Duplicate Sheet Name: " + n);
		if(codes) {
			var cn = (S && S[i] && S[i].CodeName) || n;
			if(cn.charCodeAt(0) == 95 && cn.length > 22) throw new Error("Bad Code Name: Worksheet" + cn);
		}
	});
}
function check_wb(wb) {
	if(!wb || !wb.SheetNames || !wb.Sheets) throw new Error("Invalid Workbook");
	if(!wb.SheetNames.length) throw new Error("Workbook is empty");
	var Sheets = (wb.Workbook && wb.Workbook.Sheets) || [];
	check_wb_names(wb.SheetNames, Sheets, !!wb.vbaraw);
	for(var i = 0; i < wb.SheetNames.length; ++i) check_ws(wb.Sheets[wb.SheetNames[i]], wb.SheetNames[i], i);
	/* TODO: validate workbook */
}
/* 18.2 Workbook */
var wbnsregex = /<\w+:workbook/;
function parse_wb_xml(data, opts)/*:WorkbookFile*/ {
	if(!data) throw new Error("Could not find file");
	var wb = /*::(*/{ AppVersion:{}, WBProps:{}, WBView:[], Sheets:[], CalcPr:{}, Names:[], xmlns: "" }/*::)*/;
	var pass = false, xmlns = "xmlns";
	var dname = {}, dnstart = 0;
	data.replace(tagregex, function xml_wb(x, idx) {
		var y/*:any*/ = parsexmltag(x);
		switch(strip_ns(y[0])) {
			case '<?xml': break;

			/* 18.2.27 workbook CT_Workbook 1 */
			case '<workbook':
				if(x.match(wbnsregex)) xmlns = "xmlns" + x.match(/<(\w+):/)[1];
				wb.xmlns = y[xmlns];
				break;
			case '</workbook>': break;

			/* 18.2.13 fileVersion CT_FileVersion ? */
			case '<fileVersion': delete y[0]; wb.AppVersion = y; break;
			case '<fileVersion/>': case '</fileVersion>': break;

			/* 18.2.12 fileSharing CT_FileSharing ? */
			case '<fileSharing':
				break;
			case '<fileSharing/>': break;

			/* 18.2.28 workbookPr CT_WorkbookPr ? */
			case '<workbookPr':
			case '<workbookPr/>':
				WBPropsDef.forEach(function(w) {
					if(y[w[0]] == null) return;
					switch(w[2]) {
						case "bool": wb.WBProps[w[0]] = parsexmlbool(y[w[0]]); break;
						case "int": wb.WBProps[w[0]] = parseInt(y[w[0]], 10); break;
						default: wb.WBProps[w[0]] = y[w[0]];
					}
				});
				if(y.codeName) wb.WBProps.CodeName = utf8read(y.codeName);
				break;
			case '</workbookPr>': break;

			/* 18.2.29 workbookProtection CT_WorkbookProtection ? */
			case '<workbookProtection':
				break;
			case '<workbookProtection/>': break;

			/* 18.2.1  bookViews CT_BookViews ? */
			case '<bookViews': case '<bookViews>': case '</bookViews>': break;
			/* 18.2.30   workbookView CT_BookView + */
			case '<workbookView': case '<workbookView/>': delete y[0]; wb.WBView.push(y); break;
			case '</workbookView>': break;

			/* 18.2.20 sheets CT_Sheets 1 */
			case '<sheets': case '<sheets>': case '</sheets>': break; // aggregate sheet
			/* 18.2.19   sheet CT_Sheet + */
			case '<sheet':
				switch(y.state) {
					case "hidden": y.Hidden = 1; break;
					case "veryHidden": y.Hidden = 2; break;
					default: y.Hidden = 0;
				}
				delete y.state;
				y.name = unescapexml(utf8read(y.name));
				delete y[0]; wb.Sheets.push(y); break;
			case '</sheet>': break;

			/* 18.2.15 functionGroups CT_FunctionGroups ? */
			case '<functionGroups': case '<functionGroups/>': break;
			/* 18.2.14   functionGroup CT_FunctionGroup + */
			case '<functionGroup': break;

			/* 18.2.9  externalReferences CT_ExternalReferences ? */
			case '<externalReferences': case '</externalReferences>': case '<externalReferences>': break;
			/* 18.2.8    externalReference CT_ExternalReference + */
			case '<externalReference': break;

			/* 18.2.6  definedNames CT_DefinedNames ? */
			case '<definedNames/>': break;
			case '<definedNames>': case '<definedNames': pass=true; break;
			case '</definedNames>': pass=false; break;
			/* 18.2.5    definedName CT_DefinedName + */
			case '<definedName': {
				dname = {};
				dname.Name = utf8read(y.name);
				if(y.comment) dname.Comment = y.comment;
				if(y.localSheetId) dname.Sheet = +y.localSheetId;
				if(parsexmlbool(y.hidden||"0")) dname.Hidden = true;
				dnstart = idx + x.length;
			}	break;
			case '</definedName>': {
				dname.Ref = unescapexml(utf8read(data.slice(dnstart, idx)));
				wb.Names.push(dname);
			} break;
			case '<definedName/>': break;

			/* 18.2.2  calcPr CT_CalcPr ? */
			case '<calcPr': delete y[0]; wb.CalcPr = y; break;
			case '<calcPr/>': delete y[0]; wb.CalcPr = y; break;
			case '</calcPr>': break;

			/* 18.2.16 oleSize CT_OleSize ? (ref required) */
			case '<oleSize': break;

			/* 18.2.4  customWorkbookViews CT_CustomWorkbookViews ? */
			case '<customWorkbookViews>': case '</customWorkbookViews>': case '<customWorkbookViews': break;
			/* 18.2.3  customWorkbookView CT_CustomWorkbookView + */
			case '<customWorkbookView': case '</customWorkbookView>': break;

			/* 18.2.18 pivotCaches CT_PivotCaches ? */
			case '<pivotCaches>': case '</pivotCaches>': case '<pivotCaches': break;
			/* 18.2.17 pivotCache CT_PivotCache ? */
			case '<pivotCache': break;

			/* 18.2.21 smartTagPr CT_SmartTagPr ? */
			case '<smartTagPr': case '<smartTagPr/>': break;

			/* 18.2.23 smartTagTypes CT_SmartTagTypes ? */
			case '<smartTagTypes': case '<smartTagTypes>': case '</smartTagTypes>': break;
			/* 18.2.22 smartTagType CT_SmartTagType ? */
			case '<smartTagType': break;

			/* 18.2.24 webPublishing CT_WebPublishing ? */
			case '<webPublishing': case '<webPublishing/>': break;

			/* 18.2.11 fileRecoveryPr CT_FileRecoveryPr ? */
			case '<fileRecoveryPr': case '<fileRecoveryPr/>': break;

			/* 18.2.26 webPublishObjects CT_WebPublishObjects ? */
			case '<webPublishObjects>': case '<webPublishObjects': case '</webPublishObjects>': break;
			/* 18.2.25 webPublishObject CT_WebPublishObject ? */
			case '<webPublishObject': break;

			/* 18.2.10 extLst CT_ExtensionList ? */
			case '<extLst': case '<extLst>': case '</extLst>': case '<extLst/>': break;
			/* 18.2.7  ext CT_Extension + */
			case '<ext': pass=true; break; //TODO: check with versions of excel
			case '</ext>': pass=false; break;

			/* Others */
			case '<ArchID': break;
			case '<AlternateContent':
			case '<AlternateContent>': pass=true; break;
			case '</AlternateContent>': pass=false; break;

			/* TODO */
			case '<revisionPtr': break;

			default: if(!pass && opts.WTF) throw new Error('unrecognized ' + y[0] + ' in workbook');
		}
		return x;
	});
	if(XMLNS_main.indexOf(wb.xmlns) === -1) throw new Error("Unknown Namespace: " + wb.xmlns);

	parse_wb_defaults(wb);

	return wb;
}

function write_wb_xml(wb/*:Workbook*//*::, opts:?WriteOpts*/)/*:string*/ {
	var o = [XML_HEADER];
	o[o.length] = writextag('workbook', null, {
		'xmlns': XMLNS_main[0],
		//'xmlns:mx': XMLNS.mx,
		//'xmlns:s': XMLNS_main[0],
		'xmlns:r': XMLNS.r
	});

	var write_names = (wb.Workbook && (wb.Workbook.Names||[]).length > 0);

	/* fileVersion */
	/* fileSharing */

	var workbookPr/*:any*/ = ({codeName:"ThisWorkbook"}/*:any*/);
	if(wb.Workbook && wb.Workbook.WBProps) {
		WBPropsDef.forEach(function(x) {
			/*:: if(!wb.Workbook || !wb.Workbook.WBProps) throw "unreachable"; */
			if((wb.Workbook.WBProps[x[0]]/*:any*/) == null) return;
			if((wb.Workbook.WBProps[x[0]]/*:any*/) == x[1]) return;
			workbookPr[x[0]] = (wb.Workbook.WBProps[x[0]]/*:any*/);
		});
		/*:: if(!wb.Workbook || !wb.Workbook.WBProps) throw "unreachable"; */
		if(wb.Workbook.WBProps.CodeName) { workbookPr.codeName = wb.Workbook.WBProps.CodeName; delete workbookPr.CodeName; }
	}
	o[o.length] = (writextag('workbookPr', null, workbookPr));

	/* workbookProtection */

	var sheets = wb.Workbook && wb.Workbook.Sheets || [];
	var i = 0;

	/* bookViews only written if first worksheet is hidden */
	if(sheets && sheets[0] && !!sheets[0].Hidden) {
		o[o.length] = "<bookViews>";
		for(i = 0; i != wb.SheetNames.length; ++i) {
			if(!sheets[i]) break;
			if(!sheets[i].Hidden) break;
		}
		if(i == wb.SheetNames.length) i = 0;
		o[o.length] = '<workbookView firstSheet="' + i + '" activeTab="' + i + '"/>';
		o[o.length] = "</bookViews>";
	}

	o[o.length] = "<sheets>";
	for(i = 0; i != wb.SheetNames.length; ++i) {
		var sht = ({name:escapexml(wb.SheetNames[i].slice(0,31))}/*:any*/);
		sht.sheetId = ""+(i+1);
		sht["r:id"] = "rId"+(i+1);
		if(sheets[i]) switch(sheets[i].Hidden) {
			case 1: sht.state = "hidden"; break;
			case 2: sht.state = "veryHidden"; break;
		}
		o[o.length] = (writextag('sheet',null,sht));
	}
	o[o.length] = "</sheets>";

	/* functionGroups */
	/* externalReferences */

	if(write_names) {
		o[o.length] = "<definedNames>";
		if(wb.Workbook && wb.Workbook.Names) wb.Workbook.Names.forEach(function(n) {
			var d/*:any*/ = {name:n.Name};
			if(n.Comment) d.comment = n.Comment;
			if(n.Sheet != null) d.localSheetId = ""+n.Sheet;
			if(n.Hidden) d.hidden = "1";
			if(!n.Ref) return;
			o[o.length] = writextag('definedName', escapexml(n.Ref), d);
		});
		o[o.length] = "</definedNames>";
	}

	/* calcPr */
	/* oleSize */
	/* customWorkbookViews */
	/* pivotCaches */
	/* smartTagPr */
	/* smartTagTypes */
	/* webPublishing */
	/* fileRecoveryPr */
	/* webPublishObjects */
	/* extLst */

	if(o.length>2){ o[o.length] = '</workbook>'; o[1]=o[1].replace("/>",">"); }
	return o.join("");
}
/* [MS-XLSB] 2.4.304 BrtBundleSh */
function parse_BrtBundleSh(data, length/*:number*/) {
	var z = {};
	z.Hidden = data.read_shift(4); //hsState ST_SheetState
	z.iTabID = data.read_shift(4);
	z.strRelID = parse_RelID(data,length-8);
	z.name = parse_XLWideString(data);
	return z;
}
function write_BrtBundleSh(data, o) {
	if(!o) o = new_buf(127);
	o.write_shift(4, data.Hidden);
	o.write_shift(4, data.iTabID);
	write_RelID(data.strRelID, o);
	write_XLWideString(data.name.slice(0,31), o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.815 BrtWbProp */
function parse_BrtWbProp(data, length)/*:WBProps*/ {
	var o/*:WBProps*/ = ({}/*:any*/);
	var flags = data.read_shift(4);
	o.defaultThemeVersion = data.read_shift(4);
	var strName = (length > 8) ? parse_XLWideString(data) : "";
	if(strName.length > 0) o.CodeName = strName;
	o.autoCompressPictures = !!(flags & 0x10000);
	o.backupFile = !!(flags & 0x40);
	o.checkCompatibility = !!(flags & 0x1000);
	o.date1904 = !!(flags & 0x01);
	o.filterPrivacy = !!(flags & 0x08);
	o.hidePivotFieldList = !!(flags & 0x400);
	o.promptedSolutions = !!(flags & 0x10);
	o.publishItems = !!(flags & 0x800);
	o.refreshAllConnections = !!(flags & 0x40000);
	o.saveExternalLinkValues = !!(flags & 0x80);
	o.showBorderUnselectedTables = !!(flags & 0x04);
	o.showInkAnnotation = !!(flags & 0x20);
	o.showObjects = ["all", "placeholders", "none"][(flags >> 13) & 0x03];
	o.showPivotChartFilter = !!(flags & 0x8000);
	o.updateLinks = ["userSet", "never", "always"][(flags >> 8) & 0x03];
	return o;
}
function write_BrtWbProp(data/*:?WBProps*/, o) {
	if(!o) o = new_buf(72);
	var flags = 0;
	if(data) {
		/* TODO: mirror parse_BrtWbProp fields */
		if(data.filterPrivacy) flags |= 0x08;
	}
	o.write_shift(4, flags);
	o.write_shift(4, 0);
	write_XLSBCodeName(data && data.CodeName || "ThisWorkbook", o);
	return o.slice(0, o.l);
}

function parse_BrtFRTArchID$(data, length) {
	var o = {};
	data.read_shift(4);
	o.ArchID = data.read_shift(4);
	data.l += length - 8;
	return o;
}

/* [MS-XLSB] 2.4.687 BrtName */
function parse_BrtName(data, length, opts) {
	var end = data.l + length;
	data.l += 4; //var flags = data.read_shift(4);
	data.l += 1; //var chKey = data.read_shift(1);
	var itab = data.read_shift(4);
	var name = parse_XLNameWideString(data);
	var formula = parse_XLSBNameParsedFormula(data, 0, opts);
	var comment = parse_XLNullableWideString(data);
	//if(0 /* fProc */) {
		// unusedstring1: XLNullableWideString
		// description: XLNullableWideString
		// helpTopic: XLNullableWideString
		// unusedstring2: XLNullableWideString
	//}
	data.l = end;
	var out = ({Name:name, Ptg:formula}/*:any*/);
	if(itab < 0xFFFFFFF) out.Sheet = itab;
	if(comment) out.Comment = comment;
	return out;
}

/* [MS-XLSB] 2.1.7.61 Workbook */
function parse_wb_bin(data, opts)/*:WorkbookFile*/ {
	var wb = { AppVersion:{}, WBProps:{}, WBView:[], Sheets:[], CalcPr:{}, xmlns: "" };
	var state/*:Array<string>*/ = [];
	var pass = false;

	if(!opts) opts = {};
	opts.biff = 12;

	var Names = [];
	var supbooks = ([[]]/*:any*/);
	supbooks.SheetNames = [];
	supbooks.XTI = [];

	XLSBRecordEnum[0x0010] = { n:"BrtFRTArchID$", f:parse_BrtFRTArchID$ };

	recordhopper(data, function hopper_wb(val, R, RT) {
		switch(RT) {
			case 0x009C: /* 'BrtBundleSh' */
				supbooks.SheetNames.push(val.name);
				wb.Sheets.push(val); break;

			case 0x0099: /* 'BrtWbProp' */
				wb.WBProps = val; break;

			case 0x0027: /* 'BrtName' */
				if(val.Sheet != null) opts.SID = val.Sheet;
				val.Ref = stringify_formula(val.Ptg, null, null, supbooks, opts);
				delete opts.SID;
				delete val.Ptg;
				Names.push(val);
				break;
			case 0x040C: /* 'BrtNameExt' */ break;

			case 0x0165: /* 'BrtSupSelf' */
			case 0x0166: /* 'BrtSupSame' */
			case 0x0163: /* 'BrtSupBookSrc' */
			case 0x029B: /* 'BrtSupAddin' */
				if(!supbooks[0].length) supbooks[0] = [RT, val];
				else supbooks.push([RT, val]);
				supbooks[supbooks.length - 1].XTI = [];
				break;
			case 0x016A: /* 'BrtExternSheet' */
				if(supbooks.length === 0) { supbooks[0] = []; supbooks[0].XTI = []; }
				supbooks[supbooks.length - 1].XTI = supbooks[supbooks.length - 1].XTI.concat(val);
				supbooks.XTI = supbooks.XTI.concat(val);
				break;
			case 0x0169: /* 'BrtPlaceholderName' */
				break;

			case 0x0817: /* 'BrtAbsPath15' */
			case 0x009E: /* 'BrtBookView' */
			case 0x008F: /* 'BrtBeginBundleShs' */
			case 0x0298: /* 'BrtBeginFnGroup' */
			case 0x0161: /* 'BrtBeginExternals' */
				break;

			/* case 'BrtModelTimeGroupingCalcCol' */
			case 0x0C00: /* 'BrtUid' */
			case 0x0C01: /* 'BrtRevisionPtr' */
			case 0x0216: /* 'BrtBookProtection' */
			case 0x02A5: /* 'BrtBookProtectionIso' */
			case 0x009D: /* 'BrtCalcProp' */
			case 0x0262: /* 'BrtCrashRecErr' */
			case 0x0802: /* 'BrtDecoupledPivotCacheID' */
			case 0x009B: /* 'BrtFileRecover' */
			case 0x0224: /* 'BrtFileSharing' */
			case 0x02A4: /* 'BrtFileSharingIso' */
			case 0x0080: /* 'BrtFileVersion' */
			case 0x0299: /* 'BrtFnGroup' */
			case 0x0850: /* 'BrtModelRelationship' */
			case 0x084D: /* 'BrtModelTable' */
			case 0x0225: /* 'BrtOleSize' */
			case 0x0805: /* 'BrtPivotTableRef' */
			case 0x0254: /* 'BrtSmartTagType' */
			case 0x081C: /* 'BrtTableSlicerCacheID' */
			case 0x081B: /* 'BrtTableSlicerCacheIDs' */
			case 0x0822: /* 'BrtTimelineCachePivotCacheID' */
			case 0x018D: /* 'BrtUserBookView' */
			case 0x009A: /* 'BrtWbFactoid' */
			case 0x045D: /* 'BrtWbProp14' */
			case 0x0229: /* 'BrtWebOpt' */
			case 0x082B: /* 'BrtWorkBookPr15' */
				break;

			case 0x0023: /* 'BrtFRTBegin' */
				state.push(RT); pass = true; break;
			case 0x0024: /* 'BrtFRTEnd' */
				state.pop(); pass = false; break;
			case 0x0025: /* 'BrtACBegin' */
				state.push(RT); pass = true; break;
			case 0x0026: /* 'BrtACEnd' */
				state.pop(); pass = false; break;

			case 0x0010: /* 'BrtFRTArchID$' */ break;

			default:
				if(R.T){/* empty */}
				else if(!pass || (opts.WTF && state[state.length-1] != 0x0025 /* BrtACBegin */ && state[state.length-1] != 0x0023 /* BrtFRTBegin */)) throw new Error("Unexpected record 0x" + RT.toString(16));
		}
	}, opts);

	parse_wb_defaults(wb);

	// $FlowIgnore
	wb.Names = Names;

	(wb/*:any*/).supbooks = supbooks;
	return wb;
}

function write_BUNDLESHS(ba, wb/*::, opts*/) {
	write_record(ba, 0x008F /* BrtBeginBundleShs */);
	for(var idx = 0; idx != wb.SheetNames.length; ++idx) {
		var viz = wb.Workbook && wb.Workbook.Sheets && wb.Workbook.Sheets[idx] && wb.Workbook.Sheets[idx].Hidden || 0;
		var d = { Hidden: viz, iTabID: idx+1, strRelID: 'rId' + (idx+1), name: wb.SheetNames[idx] };
		write_record(ba, 0x009C /* BrtBundleSh */, write_BrtBundleSh(d));
	}
	write_record(ba, 0x0090 /* BrtEndBundleShs */);
}

/* [MS-XLSB] 2.4.649 BrtFileVersion */
function write_BrtFileVersion(data, o) {
	if(!o) o = new_buf(127);
	for(var i = 0; i != 4; ++i) o.write_shift(4, 0);
	write_XLWideString("SheetJS", o);
	write_XLWideString(XLSX.version, o);
	write_XLWideString(XLSX.version, o);
	write_XLWideString("7262", o);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

/* [MS-XLSB] 2.4.301 BrtBookView */
function write_BrtBookView(idx, o) {
	if(!o) o = new_buf(29);
	o.write_shift(-4, 0);
	o.write_shift(-4, 460);
	o.write_shift(4,  28800);
	o.write_shift(4,  17600);
	o.write_shift(4,  500);
	o.write_shift(4,  idx);
	o.write_shift(4,  idx);
	var flags = 0x78;
	o.write_shift(1,  flags);
	return o.length > o.l ? o.slice(0, o.l) : o;
}

function write_BOOKVIEWS(ba, wb/*::, opts*/) {
	/* required if hidden tab appears before visible tab */
	if(!wb.Workbook || !wb.Workbook.Sheets) return;
	var sheets = wb.Workbook.Sheets;
	var i = 0, vistab = -1, hidden = -1;
	for(; i < sheets.length; ++i) {
		if(!sheets[i] || !sheets[i].Hidden && vistab == -1) vistab = i;
		else if(sheets[i].Hidden == 1 && hidden == -1) hidden = i;
	}
	if(hidden > vistab) return;
	write_record(ba, 0x0087 /* BrtBeginBookViews */);
	write_record(ba, 0x009E /* BrtBookView */, write_BrtBookView(vistab));
	/* 1*(BrtBookView *FRT) */
	write_record(ba, 0x0088 /* BrtEndBookViews */);
}

/* [MS-XLSB] 2.4.305 BrtCalcProp */
/*function write_BrtCalcProp(data, o) {
	if(!o) o = new_buf(26);
	o.write_shift(4,0); // force recalc
	o.write_shift(4,1);
	o.write_shift(4,0);
	write_Xnum(0, o);
	o.write_shift(-4, 1023);
	o.write_shift(1, 0x33);
	o.write_shift(1, 0x00);
	return o;
}*/

/* [MS-XLSB] 2.4.646 BrtFileRecover */
/*function write_BrtFileRecover(data, o) {
	if(!o) o = new_buf(1);
	o.write_shift(1,0);
	return o;
}*/

/* [MS-XLSB] 2.1.7.61 Workbook */
function write_wb_bin(wb, opts) {
	var ba = buf_array();
	write_record(ba, 0x0083 /* BrtBeginBook */);
	write_record(ba, 0x0080 /* BrtFileVersion */, write_BrtFileVersion());
	/* [[BrtFileSharingIso] BrtFileSharing] */
	write_record(ba, 0x0099 /* BrtWbProp */, write_BrtWbProp(wb.Workbook && wb.Workbook.WBProps || null));
	/* [ACABSPATH] */
	/* [[BrtBookProtectionIso] BrtBookProtection] */
	write_BOOKVIEWS(ba, wb, opts);
	write_BUNDLESHS(ba, wb, opts);
	/* [FNGROUP] */
	/* [EXTERNALS] */
	/* *BrtName */
	/* write_record(ba, 0x009D BrtCalcProp, write_BrtCalcProp()); */
	/* [BrtOleSize] */
	/* *(BrtUserBookView *FRT) */
	/* [PIVOTCACHEIDS] */
	/* [BrtWbFactoid] */
	/* [SMARTTAGTYPES] */
	/* [BrtWebOpt] */
	/* write_record(ba, 0x009B BrtFileRecover, write_BrtFileRecover()); */
	/* [WEBPUBITEMS] */
	/* [CRERRS] */
	/* FRTWORKBOOK */
	write_record(ba, 0x0084 /* BrtEndBook */);

	return ba.end();
}
function parse_wb(data, name/*:string*/, opts)/*:WorkbookFile*/ {
	if(name.slice(-4)===".bin") return parse_wb_bin((data/*:any*/), opts);
	return parse_wb_xml((data/*:any*/), opts);
}

function parse_ws(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {
	if(name.slice(-4)===".bin") return parse_ws_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);
	return parse_ws_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);
}

function parse_cs(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {
	if(name.slice(-4)===".bin") return parse_cs_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);
	return parse_cs_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);
}

function parse_ms(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {
	if(name.slice(-4)===".bin") return parse_ms_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);
	return parse_ms_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);
}

function parse_ds(data, name/*:string*/, idx/*:number*/, opts, rels, wb, themes, styles)/*:Worksheet*/ {
	if(name.slice(-4)===".bin") return parse_ds_bin((data/*:any*/), opts, idx, rels, wb, themes, styles);
	return parse_ds_xml((data/*:any*/), opts, idx, rels, wb, themes, styles);
}

function parse_sty(data, name/*:string*/, themes, opts) {
	if(name.slice(-4)===".bin") return parse_sty_bin((data/*:any*/), themes, opts);
	return parse_sty_xml((data/*:any*/), themes, opts);
}

function parse_theme(data/*:string*/, name/*:string*/, opts) {
	return parse_theme_xml(data, opts);
}

function parse_sst(data, name/*:string*/, opts)/*:SST*/ {
	if(name.slice(-4)===".bin") return parse_sst_bin((data/*:any*/), opts);
	return parse_sst_xml((data/*:any*/), opts);
}

function parse_cmnt(data, name/*:string*/, opts)/*:Array<RawComment>*/ {
	if(name.slice(-4)===".bin") return parse_comments_bin((data/*:any*/), opts);
	return parse_comments_xml((data/*:any*/), opts);
}

function parse_cc(data, name/*:string*/, opts) {
	if(name.slice(-4)===".bin") return parse_cc_bin((data/*:any*/), name, opts);
	return parse_cc_xml((data/*:any*/), name, opts);
}

function parse_xlink(data, rel, name/*:string*/, opts) {
	if(name.slice(-4)===".bin") return parse_xlink_bin((data/*:any*/), rel, name, opts);
	return parse_xlink_xml((data/*:any*/), rel, name, opts);
}

function parse_xlmeta(data, name/*:string*/, opts) {
	if(name.slice(-4)===".bin") return parse_xlmeta_bin((data/*:any*/), name, opts);
	return parse_xlmeta_xml((data/*:any*/), name, opts);
}

function write_wb(wb, name/*:string*/, opts) {
	return (name.slice(-4)===".bin" ? write_wb_bin : write_wb_xml)(wb, opts);
}

function write_ws(data/*:number*/, name/*:string*/, opts, wb/*:Workbook*/, rels) {
	return (name.slice(-4)===".bin" ? write_ws_bin : write_ws_xml)(data, opts, wb, rels);
}

// eslint-disable-next-line no-unused-vars
function write_cs(data/*:number*/, name/*:string*/, opts, wb/*:Workbook*/, rels) {
	return (name.slice(-4)===".bin" ? write_cs_bin : write_cs_xml)(data, opts, wb, rels);
}

function write_sty(data, name/*:string*/, opts) {
	return (name.slice(-4)===".bin" ? write_sty_bin : write_sty_xml)(data, opts);
}

function write_sst(data/*:SST*/, name/*:string*/, opts) {
	return (name.slice(-4)===".bin" ? write_sst_bin : write_sst_xml)(data, opts);
}

function write_cmnt(data/*:Array<any>*/, name/*:string*/, opts) {
	return (name.slice(-4)===".bin" ? write_comments_bin : write_comments_xml)(data, opts);
}
/*
function write_cc(data, name:string, opts) {
	return (name.slice(-4)===".bin" ? write_cc_bin : write_cc_xml)(data, opts);
}
*/

function write_xlmeta(name/*:string*/) {
	return (name.slice(-4)===".bin" ? write_xlmeta_bin : write_xlmeta_xml)();
}
var attregexg2=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g;
var attregex2=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;
function xlml_parsexmltag(tag/*:string*/, skip_root/*:?boolean*/) {
	var words = tag.split(/\s+/);
	var z/*:any*/ = ([]/*:any*/); if(!skip_root) z[0] = words[0];
	if(words.length === 1) return z;
	var m = tag.match(attregexg2), y, j, w, i;
	if(m) for(i = 0; i != m.length; ++i) {
		y = m[i].match(attregex2);
/*:: if(!y || !y[2]) continue; */
		if((j=y[1].indexOf(":")) === -1) z[y[1]] = y[2].slice(1,y[2].length-1);
		else {
			if(y[1].slice(0,6) === "xmlns:") w = "xmlns"+y[1].slice(6);
			else w = y[1].slice(j+1);
			z[w] = y[2].slice(1,y[2].length-1);
		}
	}
	return z;
}
function xlml_parsexmltagobj(tag/*:string*/) {
	var words = tag.split(/\s+/);
	var z = {};
	if(words.length === 1) return z;
	var m = tag.match(attregexg2), y, j, w, i;
	if(m) for(i = 0; i != m.length; ++i) {
		y = m[i].match(attregex2);
/*:: if(!y || !y[2]) continue; */
		if((j=y[1].indexOf(":")) === -1) z[y[1]] = y[2].slice(1,y[2].length-1);
		else {
			if(y[1].slice(0,6) === "xmlns:") w = "xmlns"+y[1].slice(6);
			else w = y[1].slice(j+1);
			z[w] = y[2].slice(1,y[2].length-1);
		}
	}
	return z;
}

// ----

/* map from xlml named formats to SSF TODO: localize */
var XLMLFormatMap/*: {[string]:string}*/;

function xlml_format(format, value)/*:string*/ {
	var fmt = XLMLFormatMap[format] || unescapexml(format);
	if(fmt === "General") return SSF_general(value);
	return SSF_format(fmt, value);
}

function xlml_set_custprop(Custprops, key, cp, val/*:string*/) {
	var oval/*:any*/ = val;
	switch((cp[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]) {
		case "boolean": oval = parsexmlbool(val); break;
		case "i2": case "int": oval = parseInt(val, 10); break;
		case "r4": case "float": oval = parseFloat(val); break;
		case "date": case "dateTime.tz": oval = parseDate(val); break;
		case "i8": case "string": case "fixed": case "uuid": case "bin.base64": break;
		default: throw new Error("bad custprop:" + cp[0]);
	}
	Custprops[unescapexml(key)] = oval;
}

function safe_format_xlml(cell/*:Cell*/, nf, o) {
	if(cell.t === 'z') return;
	if(!o || o.cellText !== false) try {
		if(cell.t === 'e') { cell.w = cell.w || BErr[cell.v]; }
		else if(nf === "General") {
			if(cell.t === 'n') {
				if((cell.v|0) === cell.v) cell.w = cell.v.toString(10);
				else cell.w = SSF_general_num(cell.v);
			}
			else cell.w = SSF_general(cell.v);
		}
		else cell.w = xlml_format(nf||"General", cell.v);
	} catch(e) { if(o.WTF) throw e; }
	try {
		var z = XLMLFormatMap[nf]||nf||"General";
		if(o.cellNF) cell.z = z;
		if(o.cellDates && cell.t == 'n' && fmt_is_date(z)) {
			var _d = SSF_parse_date_code(cell.v); if(_d) { cell.t = 'd'; cell.v = new Date(_d.y, _d.m-1,_d.d,_d.H,_d.M,_d.S,_d.u); }
		}
	} catch(e) { if(o.WTF) throw e; }
}

function process_style_xlml(styles, stag, opts) {
	if(opts.cellStyles) {
		if(stag.Interior) {
			var I = stag.Interior;
			if(I.Pattern) I.patternType = XLMLPatternTypeMap[I.Pattern] || I.Pattern;
		}
	}
	styles[stag.ID] = stag;
}

/* TODO: there must exist some form of OSP-blessed spec */
function parse_xlml_data(xml, ss, data, cell/*:any*/, base, styles, csty, row, arrayf, o) {
	var nf = "General", sid = cell.StyleID, S = {}; o = o || {};
	var interiors = [];
	var i = 0;
	if(sid === undefined && row) sid = row.StyleID;
	if(sid === undefined && csty) sid = csty.StyleID;
	while(styles[sid] !== undefined) {
		if(styles[sid].nf) nf = styles[sid].nf;
		if(styles[sid].Interior) interiors.push(styles[sid].Interior);
		if(!styles[sid].Parent) break;
		sid = styles[sid].Parent;
	}
	switch(data.Type) {
		case 'Boolean':
			cell.t = 'b';
			cell.v = parsexmlbool(xml);
			break;
		case 'String':
			cell.t = 's'; cell.r = xlml_fixstr(unescapexml(xml));
			cell.v = (xml.indexOf("<") > -1 ? unescapexml(ss||xml).replace(/<.*?>/g, "") : cell.r); // todo: BR etc
			break;
		case 'DateTime':
			if(xml.slice(-1) != "Z") xml += "Z";
			cell.v = (parseDate(xml) - new Date(Date.UTC(1899, 11, 30))) / (24 * 60 * 60 * 1000);
			if(cell.v !== cell.v) cell.v = unescapexml(xml);
			else if(cell.v<60) cell.v = cell.v -1;
			if(!nf || nf == "General") nf = "yyyy-mm-dd";
			/* falls through */
		case 'Number':
			if(cell.v === undefined) cell.v=+xml;
			if(!cell.t) cell.t = 'n';
			break;
		case 'Error': cell.t = 'e'; cell.v = RBErr[xml]; if(o.cellText !== false) cell.w = xml; break;
		default:
			if(xml == "" && ss == "") { cell.t = 'z'; }
			else { cell.t = 's'; cell.v = xlml_fixstr(ss||xml); }
			break;
	}
	safe_format_xlml(cell, nf, o);
	if(o.cellFormula !== false) {
		if(cell.Formula) {
			var fstr = unescapexml(cell.Formula);
			/* strictly speaking, the leading = is required but some writers omit */
			if(fstr.charCodeAt(0) == 61 /* = */) fstr = fstr.slice(1);
			cell.f = rc_to_a1(fstr, base);
			delete cell.Formula;
			if(cell.ArrayRange == "RC") cell.F = rc_to_a1("RC:RC", base);
			else if(cell.ArrayRange) {
				cell.F = rc_to_a1(cell.ArrayRange, base);
				arrayf.push([safe_decode_range(cell.F), cell.F]);
			}
		} else {
			for(i = 0; i < arrayf.length; ++i)
				if(base.r >= arrayf[i][0].s.r && base.r <= arrayf[i][0].e.r)
					if(base.c >= arrayf[i][0].s.c && base.c <= arrayf[i][0].e.c)
						cell.F = arrayf[i][1];
		}
	}
	if(o.cellStyles) {
		interiors.forEach(function(x) {
			if(!S.patternType && x.patternType) S.patternType = x.patternType;
		});
		cell.s = S;
	}
	if(cell.StyleID !== undefined) cell.ixfe = cell.StyleID;
}

function xlml_clean_comment(comment/*:any*/) {
	comment.t = comment.v || "";
	comment.t = comment.t.replace(/\r\n/g,"\n").replace(/\r/g,"\n");
	comment.v = comment.w = comment.ixfe = undefined;
}

/* TODO: Everything */
function parse_xlml_xml(d, _opts)/*:Workbook*/ {
	var opts = _opts || {};
	make_ssf();
	var str = debom(xlml_normalize(d));
	if(opts.type == 'binary' || opts.type == 'array' || opts.type == 'base64') {
		if(typeof $cptable !== 'undefined') str = $cptable.utils.decode(65001, char_codes(str));
		else str = utf8read(str);
	}
	var opening = str.slice(0, 1024).toLowerCase(), ishtml = false;
	opening = opening.replace(/".*?"/g, "");
	if((opening.indexOf(">") & 1023) > Math.min((opening.indexOf(",") & 1023), (opening.indexOf(";")&1023))) { var _o = dup(opts); _o.type = "string"; return PRN.to_workbook(str, _o); }
	if(opening.indexOf("<?xml") == -1) ["html", "table", "head", "meta", "script", "style", "div"].forEach(function(tag) { if(opening.indexOf("<" + tag) >= 0) ishtml = true; });
	if(ishtml) return html_to_workbook(str, opts);

	XLMLFormatMap = ({
		"General Number": "General",
		"General Date": table_fmt[22],
		"Long Date": "dddd, mmmm dd, yyyy",
		"Medium Date": table_fmt[15],
		"Short Date": table_fmt[14],
		"Long Time": table_fmt[19],
		"Medium Time": table_fmt[18],
		"Short Time": table_fmt[20],
		"Currency": '"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',
		"Fixed": table_fmt[2],
		"Standard": table_fmt[4],
		"Percent": table_fmt[10],
		"Scientific": table_fmt[11],
		"Yes/No": '"Yes";"Yes";"No";@',
		"True/False": '"True";"True";"False";@',
		"On/Off": '"Yes";"Yes";"No";@'
	}/*:any*/);


	var Rn;
	var state = [], tmp;
	if(DENSE != null && opts.dense == null) opts.dense = DENSE;
	var sheets = {}, sheetnames/*:Array<string>*/ = [], cursheet/*:Worksheet*/ = (opts.dense ? [] : {}), sheetname = "";
	var cell = ({}/*:any*/), row = {};// eslint-disable-line no-unused-vars
	var dtag = xlml_parsexmltag('<Data ss:Type="String">'), didx = 0;
	var c = 0, r = 0;
	var refguess/*:Range*/ = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };
	var styles = {}, stag = {};
	var ss = "", fidx = 0;
	var merges/*:Array<Range>*/ = [];
	var Props = {}, Custprops = {}, pidx = 0, cp = [];
	var comments/*:Array<Comment>*/ = [], comment/*:Comment*/ = ({}/*:any*/);
	var cstys = [], csty, seencol = false;
	var arrayf/*:Array<[Range, string]>*/ = [];
	var rowinfo/*:Array<RowInfo>*/ = [], rowobj = {}, cc = 0, rr = 0;
	var Workbook/*:WBWBProps*/ = ({ Sheets:[], WBProps:{date1904:false} }/*:any*/), wsprops = {};
	xlmlregex.lastIndex = 0;
	str = str.replace(/<!--([\s\S]*?)-->/mg,"");
	var raw_Rn3 = "";
	while((Rn = xlmlregex.exec(str))) switch((Rn[3] = (raw_Rn3 = Rn[3]).toLowerCase())) {
		case 'data' /*case 'Data'*/:
			if(raw_Rn3 == "data") {
				if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));}
				else if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);
				break;
			}
			if(state[state.length-1][1]) break;
			if(Rn[1]==='/') parse_xlml_data(str.slice(didx, Rn.index), ss, dtag, state[state.length-1][0]==/*"Comment"*/"comment"?comment:cell, {c:c,r:r}, styles, cstys[c], row, arrayf, opts);
			else { ss = ""; dtag = xlml_parsexmltag(Rn[0]); didx = Rn.index + Rn[0].length; }
			break;
		case 'cell' /*case 'Cell'*/:
			if(Rn[1]==='/'){
				if(comments.length > 0) cell.c = comments;
				if((!opts.sheetRows || opts.sheetRows > r) && cell.v !== undefined) {
					if(opts.dense) {
						if(!cursheet[r]) cursheet[r] = [];
						cursheet[r][c] = cell;
					} else cursheet[encode_col(c) + encode_row(r)] = cell;
				}
				if(cell.HRef) {
					cell.l = ({Target:unescapexml(cell.HRef)}/*:any*/);
					if(cell.HRefScreenTip) cell.l.Tooltip = cell.HRefScreenTip;
					delete cell.HRef; delete cell.HRefScreenTip;
				}
				if(cell.MergeAcross || cell.MergeDown) {
					cc = c + (parseInt(cell.MergeAcross,10)|0);
					rr = r + (parseInt(cell.MergeDown,10)|0);
					merges.push({s:{c:c,r:r},e:{c:cc,r:rr}});
				}
				if(!opts.sheetStubs) { if(cell.MergeAcross) c = cc + 1; else ++c; }
				else if(cell.MergeAcross || cell.MergeDown) {
					/*:: if(!cc) cc = 0; if(!rr) rr = 0; */
					for(var cma = c; cma <= cc; ++cma) {
						for(var cmd = r; cmd <= rr; ++cmd) {
							if(cma > c || cmd > r) {
								if(opts.dense) {
									if(!cursheet[cmd]) cursheet[cmd] = [];
									cursheet[cmd][cma] = {t:'z'};
								} else cursheet[encode_col(cma) + encode_row(cmd)] = {t:'z'};
							}
						}
					}
					c = cc + 1;
				}
				else ++c;
			} else {
				cell = xlml_parsexmltagobj(Rn[0]);
				if(cell.Index) c = +cell.Index - 1;
				if(c < refguess.s.c) refguess.s.c = c;
				if(c > refguess.e.c) refguess.e.c = c;
				if(Rn[0].slice(-2) === "/>") ++c;
				comments = [];
			}
			break;
		case 'row' /*case 'Row'*/:
			if(Rn[1]==='/' || Rn[0].slice(-2) === "/>") {
				if(r < refguess.s.r) refguess.s.r = r;
				if(r > refguess.e.r) refguess.e.r = r;
				if(Rn[0].slice(-2) === "/>") {
					row = xlml_parsexmltag(Rn[0]);
					if(row.Index) r = +row.Index - 1;
				}
				c = 0; ++r;
			} else {
				row = xlml_parsexmltag(Rn[0]);
				if(row.Index) r = +row.Index - 1;
				rowobj = {};
				if(row.AutoFitHeight == "0" || row.Height) {
					rowobj.hpx = parseInt(row.Height, 10); rowobj.hpt = px2pt(rowobj.hpx);
					rowinfo[r] = rowobj;
				}
				if(row.Hidden == "1") { rowobj.hidden = true; rowinfo[r] = rowobj; }
			}
			break;
		case 'worksheet' /*case 'Worksheet'*/: /* TODO: read range from FullRows/FullColumns */
			if(Rn[1]==='/'){
				if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));
				sheetnames.push(sheetname);
				if(refguess.s.r <= refguess.e.r && refguess.s.c <= refguess.e.c) {
					cursheet["!ref"] = encode_range(refguess);
					if(opts.sheetRows && opts.sheetRows <= refguess.e.r) {
						cursheet["!fullref"] = cursheet["!ref"];
						refguess.e.r = opts.sheetRows - 1;
						cursheet["!ref"] = encode_range(refguess);
					}
				}
				if(merges.length) cursheet["!merges"] = merges;
				if(cstys.length > 0) cursheet["!cols"] = cstys;
				if(rowinfo.length > 0) cursheet["!rows"] = rowinfo;
				sheets[sheetname] = cursheet;
			} else {
				refguess = {s: {r:2000000, c:2000000}, e: {r:0, c:0} };
				r = c = 0;
				state.push([Rn[3], false]);
				tmp = xlml_parsexmltag(Rn[0]);
				sheetname = unescapexml(tmp.Name);
				cursheet = (opts.dense ? [] : {});
				merges = [];
				arrayf = [];
				rowinfo = [];
				wsprops = {name:sheetname, Hidden:0};
				Workbook.Sheets.push(wsprops);
			}
			break;
		case 'table' /*case 'Table'*/:
			if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));}
			else if(Rn[0].slice(-2) == "/>") break;
			else {
				state.push([Rn[3], false]);
				cstys = []; seencol = false;
			}
			break;

		case 'style' /*case 'Style'*/:
			if(Rn[1]==='/') process_style_xlml(styles, stag, opts);
			else stag = xlml_parsexmltag(Rn[0]);
			break;

		case 'numberformat' /*case 'NumberFormat'*/:
			stag.nf = unescapexml(xlml_parsexmltag(Rn[0]).Format || "General");
			if(XLMLFormatMap[stag.nf]) stag.nf = XLMLFormatMap[stag.nf];
			for(var ssfidx = 0; ssfidx != 0x188; ++ssfidx) if(table_fmt[ssfidx] == stag.nf) break;
			if(ssfidx == 0x188) for(ssfidx = 0x39; ssfidx != 0x188; ++ssfidx) if(table_fmt[ssfidx] == null) { SSF_load(stag.nf, ssfidx); break; }
			break;

		case 'column' /*case 'Column'*/:
			if(state[state.length-1][0] !== /*'Table'*/'table') break;
			csty = xlml_parsexmltag(Rn[0]);
			if(csty.Hidden) { csty.hidden = true; delete csty.Hidden; }
			if(csty.Width) csty.wpx = parseInt(csty.Width, 10);
			if(!seencol && csty.wpx > 10) {
				seencol = true; MDW = DEF_MDW; //find_mdw_wpx(csty.wpx);
				for(var _col = 0; _col < cstys.length; ++_col) if(cstys[_col]) process_col(cstys[_col]);
			}
			if(seencol) process_col(csty);
			cstys[(csty.Index-1||cstys.length)] = csty;
			for(var i = 0; i < +csty.Span; ++i) cstys[cstys.length] = dup(csty);
			break;

		case 'namedrange' /*case 'NamedRange'*/:
			if(Rn[1]==='/') break;
			if(!Workbook.Names) Workbook.Names = [];
			var _NamedRange = parsexmltag(Rn[0]);
			var _DefinedName/*:DefinedName*/ = ({
				Name: _NamedRange.Name,
				Ref: rc_to_a1(_NamedRange.RefersTo.slice(1), {r:0, c:0})
			}/*:any*/);
			if(Workbook.Sheets.length>0) _DefinedName.Sheet=Workbook.Sheets.length-1;
			/*:: if(Workbook.Names) */Workbook.Names.push(_DefinedName);
			break;

		case 'namedcell' /*case 'NamedCell'*/: break;
		case 'b' /*case 'B'*/: break;
		case 'i' /*case 'I'*/: break;
		case 'u' /*case 'U'*/: break;
		case 's' /*case 'S'*/: break;
		case 'em' /*case 'EM'*/: break;
		case 'h2' /*case 'H2'*/: break;
		case 'h3' /*case 'H3'*/: break;
		case 'sub' /*case 'Sub'*/: break;
		case 'sup' /*case 'Sup'*/: break;
		case 'span' /*case 'Span'*/: break;
		case 'alignment' /*case 'Alignment'*/:
			break;
		case 'borders' /*case 'Borders'*/: break;
		case 'border' /*case 'Border'*/: break;
		case 'font' /*case 'Font'*/:
			if(Rn[0].slice(-2) === "/>") break;
			else if(Rn[1]==="/") ss += str.slice(fidx, Rn.index);
			else fidx = Rn.index + Rn[0].length;
			break;
		case 'interior' /*case 'Interior'*/:
			if(!opts.cellStyles) break;
			stag.Interior = xlml_parsexmltag(Rn[0]);
			break;
		case 'protection' /*case 'Protection'*/: break;

		case 'author' /*case 'Author'*/:
		case 'title' /*case 'Title'*/:
		case 'description' /*case 'Description'*/:
		case 'created' /*case 'Created'*/:
		case 'keywords' /*case 'Keywords'*/:
		case 'subject' /*case 'Subject'*/:
		case 'category' /*case 'Category'*/:
		case 'company' /*case 'Company'*/:
		case 'lastauthor' /*case 'LastAuthor'*/:
		case 'lastsaved' /*case 'LastSaved'*/:
		case 'lastprinted' /*case 'LastPrinted'*/:
		case 'version' /*case 'Version'*/:
		case 'revision' /*case 'Revision'*/:
		case 'totaltime' /*case 'TotalTime'*/:
		case 'hyperlinkbase' /*case 'HyperlinkBase'*/:
		case 'manager' /*case 'Manager'*/:
		case 'contentstatus' /*case 'ContentStatus'*/:
		case 'identifier' /*case 'Identifier'*/:
		case 'language' /*case 'Language'*/:
		case 'appname' /*case 'AppName'*/:
			if(Rn[0].slice(-2) === "/>") break;
			else if(Rn[1]==="/") xlml_set_prop(Props, raw_Rn3, str.slice(pidx, Rn.index));
			else pidx = Rn.index + Rn[0].length;
			break;
		case 'paragraphs' /*case 'Paragraphs'*/: break;

		case 'styles' /*case 'Styles'*/:
		case 'workbook' /*case 'Workbook'*/:
			if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));}
			else state.push([Rn[3], false]);
			break;

		case 'comment' /*case 'Comment'*/:
			if(Rn[1]==='/'){
				if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));
				xlml_clean_comment(comment);
				comments.push(comment);
			} else {
				state.push([Rn[3], false]);
				tmp = xlml_parsexmltag(Rn[0]);
				comment = ({a:tmp.Author}/*:any*/);
			}
			break;

		case 'autofilter' /*case 'AutoFilter'*/:
			if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));}
			else if(Rn[0].charAt(Rn[0].length-2) !== '/') {
				var AutoFilter = xlml_parsexmltag(Rn[0]);
				cursheet['!autofilter'] = { ref:rc_to_a1(AutoFilter.Range).replace(/\$/g,"") };
				state.push([Rn[3], true]);
			}
			break;

		case 'name' /*case 'Name'*/: break;

		case 'datavalidation' /*case 'DataValidation'*/:
			if(Rn[1]==='/'){
				if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));
			} else {
				if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);
			}
			break;

		case 'pixelsperinch' /*case 'PixelsPerInch'*/:
			break;
		case 'componentoptions' /*case 'ComponentOptions'*/:
		case 'documentproperties' /*case 'DocumentProperties'*/:
		case 'customdocumentproperties' /*case 'CustomDocumentProperties'*/:
		case 'officedocumentsettings' /*case 'OfficeDocumentSettings'*/:
		case 'pivottable' /*case 'PivotTable'*/:
		case 'pivotcache' /*case 'PivotCache'*/:
		case 'names' /*case 'Names'*/:
		case 'mapinfo' /*case 'MapInfo'*/:
		case 'pagebreaks' /*case 'PageBreaks'*/:
		case 'querytable' /*case 'QueryTable'*/:
		case 'sorting' /*case 'Sorting'*/:
		case 'schema' /*case 'Schema'*/: //case 'data' /*case 'data'*/:
		case 'conditionalformatting' /*case 'ConditionalFormatting'*/:
		case 'smarttagtype' /*case 'SmartTagType'*/:
		case 'smarttags' /*case 'SmartTags'*/:
		case 'excelworkbook' /*case 'ExcelWorkbook'*/:
		case 'workbookoptions' /*case 'WorkbookOptions'*/:
		case 'worksheetoptions' /*case 'WorksheetOptions'*/:
			if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw new Error("Bad state: "+tmp.join("|"));}
			else if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);
			break;

		case 'null' /*case 'Null'*/: break;

		default:
			/* FODS file root is <office:document> */
			if(state.length == 0 && Rn[3] == "document") return parse_fods(str, opts);
			/* UOS file root is <uof:UOF> */
			if(state.length == 0 && Rn[3] == "uof"/*"UOF"*/) return parse_fods(str, opts);

			var seen = true;
			switch(state[state.length-1][0]) {
				/* OfficeDocumentSettings */
				case 'officedocumentsettings' /*case 'OfficeDocumentSettings'*/: switch(Rn[3]) {
					case 'allowpng' /*case 'AllowPNG'*/: break;
					case 'removepersonalinformation' /*case 'RemovePersonalInformation'*/: break;
					case 'downloadcomponents' /*case 'DownloadComponents'*/: break;
					case 'locationofcomponents' /*case 'LocationOfComponents'*/: break;
					case 'colors' /*case 'Colors'*/: break;
					case 'color' /*case 'Color'*/: break;
					case 'index' /*case 'Index'*/: break;
					case 'rgb' /*case 'RGB'*/: break;
					case 'targetscreensize' /*case 'TargetScreenSize'*/: break;
					case 'readonlyrecommended' /*case 'ReadOnlyRecommended'*/: break;
					default: seen = false;
				} break;

				/* ComponentOptions */
				case 'componentoptions' /*case 'ComponentOptions'*/: switch(Rn[3]) {
					case 'toolbar' /*case 'Toolbar'*/: break;
					case 'hideofficelogo' /*case 'HideOfficeLogo'*/: break;
					case 'spreadsheetautofit' /*case 'SpreadsheetAutoFit'*/: break;
					case 'label' /*case 'Label'*/: break;
					case 'caption' /*case 'Caption'*/: break;
					case 'maxheight' /*case 'MaxHeight'*/: break;
					case 'maxwidth' /*case 'MaxWidth'*/: break;
					case 'nextsheetnumber' /*case 'NextSheetNumber'*/: break;
					default: seen = false;
				} break;

				/* ExcelWorkbook */
				case 'excelworkbook' /*case 'ExcelWorkbook'*/: switch(Rn[3]) {
					case 'date1904' /*case 'Date1904'*/:
						/*:: if(!Workbook.WBProps) Workbook.WBProps = {}; */
						Workbook.WBProps.date1904 = true;
						break;
					case 'windowheight' /*case 'WindowHeight'*/: break;
					case 'windowwidth' /*case 'WindowWidth'*/: break;
					case 'windowtopx' /*case 'WindowTopX'*/: break;
					case 'windowtopy' /*case 'WindowTopY'*/: break;
					case 'tabratio' /*case 'TabRatio'*/: break;
					case 'protectstructure' /*case 'ProtectStructure'*/: break;
					case 'protectwindow' /*case 'ProtectWindow'*/: break;
					case 'protectwindows' /*case 'ProtectWindows'*/: break;
					case 'activesheet' /*case 'ActiveSheet'*/: break;
					case 'displayinknotes' /*case 'DisplayInkNotes'*/: break;
					case 'firstvisiblesheet' /*case 'FirstVisibleSheet'*/: break;
					case 'supbook' /*case 'SupBook'*/: break;
					case 'sheetname' /*case 'SheetName'*/: break;
					case 'sheetindex' /*case 'SheetIndex'*/: break;
					case 'sheetindexfirst' /*case 'SheetIndexFirst'*/: break;
					case 'sheetindexlast' /*case 'SheetIndexLast'*/: break;
					case 'dll' /*case 'Dll'*/: break;
					case 'acceptlabelsinformulas' /*case 'AcceptLabelsInFormulas'*/: break;
					case 'donotsavelinkvalues' /*case 'DoNotSaveLinkValues'*/: break;
					case 'iteration' /*case 'Iteration'*/: break;
					case 'maxiterations' /*case 'MaxIterations'*/: break;
					case 'maxchange' /*case 'MaxChange'*/: break;
					case 'path' /*case 'Path'*/: break;
					case 'xct' /*case 'Xct'*/: break;
					case 'count' /*case 'Count'*/: break;
					case 'selectedsheets' /*case 'SelectedSheets'*/: break;
					case 'calculation' /*case 'Calculation'*/: break;
					case 'uncalced' /*case 'Uncalced'*/: break;
					case 'startupprompt' /*case 'StartupPrompt'*/: break;
					case 'crn' /*case 'Crn'*/: break;
					case 'externname' /*case 'ExternName'*/: break;
					case 'formula' /*case 'Formula'*/: break;
					case 'colfirst' /*case 'ColFirst'*/: break;
					case 'collast' /*case 'ColLast'*/: break;
					case 'wantadvise' /*case 'WantAdvise'*/: break;
					case 'boolean' /*case 'Boolean'*/: break;
					case 'error' /*case 'Error'*/: break;
					case 'text' /*case 'Text'*/: break;
					case 'ole' /*case 'OLE'*/: break;
					case 'noautorecover' /*case 'NoAutoRecover'*/: break;
					case 'publishobjects' /*case 'PublishObjects'*/: break;
					case 'donotcalculatebeforesave' /*case 'DoNotCalculateBeforeSave'*/: break;
					case 'number' /*case 'Number'*/: break;
					case 'refmoder1c1' /*case 'RefModeR1C1'*/: break;
					case 'embedsavesmarttags' /*case 'EmbedSaveSmartTags'*/: break;
					default: seen = false;
				} break;

				/* WorkbookOptions */
				case 'workbookoptions' /*case 'WorkbookOptions'*/: switch(Rn[3]) {
					case 'owcversion' /*case 'OWCVersion'*/: break;
					case 'height' /*case 'Height'*/: break;
					case 'width' /*case 'Width'*/: break;
					default: seen = false;
				} break;

				/* WorksheetOptions */
				case 'worksheetoptions' /*case 'WorksheetOptions'*/: switch(Rn[3]) {
					case 'visible' /*case 'Visible'*/:
						if(Rn[0].slice(-2) === "/>"){/* empty */}
						else if(Rn[1]==="/") switch(str.slice(pidx, Rn.index)) {
							case "SheetHidden": wsprops.Hidden = 1; break;
							case "SheetVeryHidden": wsprops.Hidden = 2; break;
						}
						else pidx = Rn.index + Rn[0].length;
						break;
					case 'header' /*case 'Header'*/:
						if(!cursheet['!margins']) default_margins(cursheet['!margins']={}, 'xlml');
						if(!isNaN(+parsexmltag(Rn[0]).Margin)) cursheet['!margins'].header = +parsexmltag(Rn[0]).Margin;
						break;
					case 'footer' /*case 'Footer'*/:
						if(!cursheet['!margins']) default_margins(cursheet['!margins']={}, 'xlml');
						if(!isNaN(+parsexmltag(Rn[0]).Margin)) cursheet['!margins'].footer = +parsexmltag(Rn[0]).Margin;
						break;
					case 'pagemargins' /*case 'PageMargins'*/:
						var pagemargins = parsexmltag(Rn[0]);
						if(!cursheet['!margins']) default_margins(cursheet['!margins']={},'xlml');
						if(!isNaN(+pagemargins.Top)) cursheet['!margins'].top = +pagemargins.Top;
						if(!isNaN(+pagemargins.Left)) cursheet['!margins'].left = +pagemargins.Left;
						if(!isNaN(+pagemargins.Right)) cursheet['!margins'].right = +pagemargins.Right;
						if(!isNaN(+pagemargins.Bottom)) cursheet['!margins'].bottom = +pagemargins.Bottom;
						break;
					case 'displayrighttoleft' /*case 'DisplayRightToLeft'*/:
						if(!Workbook.Views) Workbook.Views = [];
						if(!Workbook.Views[0]) Workbook.Views[0] = {};
						Workbook.Views[0].RTL = true;
						break;

					case 'freezepanes' /*case 'FreezePanes'*/: break;
					case 'frozennosplit' /*case 'FrozenNoSplit'*/: break;

					case 'splithorizontal' /*case 'SplitHorizontal'*/:
					case 'splitvertical' /*case 'SplitVertical'*/:
						break;

					case 'donotdisplaygridlines' /*case 'DoNotDisplayGridlines'*/:
						break;

					case 'activerow' /*case 'ActiveRow'*/: break;
					case 'activecol' /*case 'ActiveCol'*/: break;
					case 'toprowbottompane' /*case 'TopRowBottomPane'*/: break;
					case 'leftcolumnrightpane' /*case 'LeftColumnRightPane'*/: break;

					case 'unsynced' /*case 'Unsynced'*/: break;
					case 'print' /*case 'Print'*/: break;
					case 'printerrors' /*case 'PrintErrors'*/: break;
					case 'panes' /*case 'Panes'*/: break;
					case 'scale' /*case 'Scale'*/: break;
					case 'pane' /*case 'Pane'*/: break;
					case 'number' /*case 'Number'*/: break;
					case 'layout' /*case 'Layout'*/: break;
					case 'pagesetup' /*case 'PageSetup'*/: break;
					case 'selected' /*case 'Selected'*/: break;
					case 'protectobjects' /*case 'ProtectObjects'*/: break;
					case 'enableselection' /*case 'EnableSelection'*/: break;
					case 'protectscenarios' /*case 'ProtectScenarios'*/: break;
					case 'validprinterinfo' /*case 'ValidPrinterInfo'*/: break;
					case 'horizontalresolution' /*case 'HorizontalResolution'*/: break;
					case 'verticalresolution' /*case 'VerticalResolution'*/: break;
					case 'numberofcopies' /*case 'NumberofCopies'*/: break;
					case 'activepane' /*case 'ActivePane'*/: break;
					case 'toprowvisible' /*case 'TopRowVisible'*/: break;
					case 'leftcolumnvisible' /*case 'LeftColumnVisible'*/: break;
					case 'fittopage' /*case 'FitToPage'*/: break;
					case 'rangeselection' /*case 'RangeSelection'*/: break;
					case 'papersizeindex' /*case 'PaperSizeIndex'*/: break;
					case 'pagelayoutzoom' /*case 'PageLayoutZoom'*/: break;
					case 'pagebreakzoom' /*case 'PageBreakZoom'*/: break;
					case 'filteron' /*case 'FilterOn'*/: break;
					case 'fitwidth' /*case 'FitWidth'*/: break;
					case 'fitheight' /*case 'FitHeight'*/: break;
					case 'commentslayout' /*case 'CommentsLayout'*/: break;
					case 'zoom' /*case 'Zoom'*/: break;
					case 'lefttoright' /*case 'LeftToRight'*/: break;
					case 'gridlines' /*case 'Gridlines'*/: break;
					case 'allowsort' /*case 'AllowSort'*/: break;
					case 'allowfilter' /*case 'AllowFilter'*/: break;
					case 'allowinsertrows' /*case 'AllowInsertRows'*/: break;
					case 'allowdeleterows' /*case 'AllowDeleteRows'*/: break;
					case 'allowinsertcols' /*case 'AllowInsertCols'*/: break;
					case 'allowdeletecols' /*case 'AllowDeleteCols'*/: break;
					case 'allowinserthyperlinks' /*case 'AllowInsertHyperlinks'*/: break;
					case 'allowformatcells' /*case 'AllowFormatCells'*/: break;
					case 'allowsizecols' /*case 'AllowSizeCols'*/: break;
					case 'allowsizerows' /*case 'AllowSizeRows'*/: break;
					case 'nosummaryrowsbelowdetail' /*case 'NoSummaryRowsBelowDetail'*/:
						if(!cursheet["!outline"]) cursheet["!outline"] = {};
						cursheet["!outline"].above = true;
						break;
					case 'tabcolorindex' /*case 'TabColorIndex'*/: break;
					case 'donotdisplayheadings' /*case 'DoNotDisplayHeadings'*/: break;
					case 'showpagelayoutzoom' /*case 'ShowPageLayoutZoom'*/: break;
					case 'nosummarycolumnsrightdetail' /*case 'NoSummaryColumnsRightDetail'*/:
						if(!cursheet["!outline"]) cursheet["!outline"] = {};
						cursheet["!outline"].left = true;
						break;
					case 'blackandwhite' /*case 'BlackAndWhite'*/: break;
					case 'donotdisplayzeros' /*case 'DoNotDisplayZeros'*/: break;
					case 'displaypagebreak' /*case 'DisplayPageBreak'*/: break;
					case 'rowcolheadings' /*case 'RowColHeadings'*/: break;
					case 'donotdisplayoutline' /*case 'DoNotDisplayOutline'*/: break;
					case 'noorientation' /*case 'NoOrientation'*/: break;
					case 'allowusepivottables' /*case 'AllowUsePivotTables'*/: break;
					case 'zeroheight' /*case 'ZeroHeight'*/: break;
					case 'viewablerange' /*case 'ViewableRange'*/: break;
					case 'selection' /*case 'Selection'*/: break;
					case 'protectcontents' /*case 'ProtectContents'*/: break;
					default: seen = false;
				} break;

				/* PivotTable */
				case 'pivottable' /*case 'PivotTable'*/: case 'pivotcache' /*case 'PivotCache'*/: switch(Rn[3]) {
					case 'immediateitemsondrop' /*case 'ImmediateItemsOnDrop'*/: break;
					case 'showpagemultipleitemlabel' /*case 'ShowPageMultipleItemLabel'*/: break;
					case 'compactrowindent' /*case 'CompactRowIndent'*/: break;
					case 'location' /*case 'Location'*/: break;
					case 'pivotfield' /*case 'PivotField'*/: break;
					case 'orientation' /*case 'Orientation'*/: break;
					case 'layoutform' /*case 'LayoutForm'*/: break;
					case 'layoutsubtotallocation' /*case 'LayoutSubtotalLocation'*/: break;
					case 'layoutcompactrow' /*case 'LayoutCompactRow'*/: break;
					case 'position' /*case 'Position'*/: break;
					case 'pivotitem' /*case 'PivotItem'*/: break;
					case 'datatype' /*case 'DataType'*/: break;
					case 'datafield' /*case 'DataField'*/: break;
					case 'sourcename' /*case 'SourceName'*/: break;
					case 'parentfield' /*case 'ParentField'*/: break;
					case 'ptlineitems' /*case 'PTLineItems'*/: break;
					case 'ptlineitem' /*case 'PTLineItem'*/: break;
					case 'countofsameitems' /*case 'CountOfSameItems'*/: break;
					case 'item' /*case 'Item'*/: break;
					case 'itemtype' /*case 'ItemType'*/: break;
					case 'ptsource' /*case 'PTSource'*/: break;
					case 'cacheindex' /*case 'CacheIndex'*/: break;
					case 'consolidationreference' /*case 'ConsolidationReference'*/: break;
					case 'filename' /*case 'FileName'*/: break;
					case 'reference' /*case 'Reference'*/: break;
					case 'nocolumngrand' /*case 'NoColumnGrand'*/: break;
					case 'norowgrand' /*case 'NoRowGrand'*/: break;
					case 'blanklineafteritems' /*case 'BlankLineAfterItems'*/: break;
					case 'hidden' /*case 'Hidden'*/: break;
					case 'subtotal' /*case 'Subtotal'*/: break;
					case 'basefield' /*case 'BaseField'*/: break;
					case 'mapchilditems' /*case 'MapChildItems'*/: break;
					case 'function' /*case 'Function'*/: break;
					case 'refreshonfileopen' /*case 'RefreshOnFileOpen'*/: break;
					case 'printsettitles' /*case 'PrintSetTitles'*/: break;
					case 'mergelabels' /*case 'MergeLabels'*/: break;
					case 'defaultversion' /*case 'DefaultVersion'*/: break;
					case 'refreshname' /*case 'RefreshName'*/: break;
					case 'refreshdate' /*case 'RefreshDate'*/: break;
					case 'refreshdatecopy' /*case 'RefreshDateCopy'*/: break;
					case 'versionlastrefresh' /*case 'VersionLastRefresh'*/: break;
					case 'versionlastupdate' /*case 'VersionLastUpdate'*/: break;
					case 'versionupdateablemin' /*case 'VersionUpdateableMin'*/: break;
					case 'versionrefreshablemin' /*case 'VersionRefreshableMin'*/: break;
					case 'calculation' /*case 'Calculation'*/: break;
					default: seen = false;
				} break;

				/* PageBreaks */
				case 'pagebreaks' /*case 'PageBreaks'*/: switch(Rn[3]) {
					case 'colbreaks' /*case 'ColBreaks'*/: break;
					case 'colbreak' /*case 'ColBreak'*/: break;
					case 'rowbreaks' /*case 'RowBreaks'*/: break;
					case 'rowbreak' /*case 'RowBreak'*/: break;
					case 'colstart' /*case 'ColStart'*/: break;
					case 'colend' /*case 'ColEnd'*/: break;
					case 'rowend' /*case 'RowEnd'*/: break;
					default: seen = false;
				} break;

				/* AutoFilter */
				case 'autofilter' /*case 'AutoFilter'*/: switch(Rn[3]) {
					case 'autofiltercolumn' /*case 'AutoFilterColumn'*/: break;
					case 'autofiltercondition' /*case 'AutoFilterCondition'*/: break;
					case 'autofilterand' /*case 'AutoFilterAnd'*/: break;
					case 'autofilteror' /*case 'AutoFilterOr'*/: break;
					default: seen = false;
				} break;

				/* QueryTable */
				case 'querytable' /*case 'QueryTable'*/: switch(Rn[3]) {
					case 'id' /*case 'Id'*/: break;
					case 'autoformatfont' /*case 'AutoFormatFont'*/: break;
					case 'autoformatpattern' /*case 'AutoFormatPattern'*/: break;
					case 'querysource' /*case 'QuerySource'*/: break;
					case 'querytype' /*case 'QueryType'*/: break;
					case 'enableredirections' /*case 'EnableRedirections'*/: break;
					case 'refreshedinxl9' /*case 'RefreshedInXl9'*/: break;
					case 'urlstring' /*case 'URLString'*/: break;
					case 'htmltables' /*case 'HTMLTables'*/: break;
					case 'connection' /*case 'Connection'*/: break;
					case 'commandtext' /*case 'CommandText'*/: break;
					case 'refreshinfo' /*case 'RefreshInfo'*/: break;
					case 'notitles' /*case 'NoTitles'*/: break;
					case 'nextid' /*case 'NextId'*/: break;
					case 'columninfo' /*case 'ColumnInfo'*/: break;
					case 'overwritecells' /*case 'OverwriteCells'*/: break;
					case 'donotpromptforfile' /*case 'DoNotPromptForFile'*/: break;
					case 'textwizardsettings' /*case 'TextWizardSettings'*/: break;
					case 'source' /*case 'Source'*/: break;
					case 'number' /*case 'Number'*/: break;
					case 'decimal' /*case 'Decimal'*/: break;
					case 'thousandseparator' /*case 'ThousandSeparator'*/: break;
					case 'trailingminusnumbers' /*case 'TrailingMinusNumbers'*/: break;
					case 'formatsettings' /*case 'FormatSettings'*/: break;
					case 'fieldtype' /*case 'FieldType'*/: break;
					case 'delimiters' /*case 'Delimiters'*/: break;
					case 'tab' /*case 'Tab'*/: break;
					case 'comma' /*case 'Comma'*/: break;
					case 'autoformatname' /*case 'AutoFormatName'*/: break;
					case 'versionlastedit' /*case 'VersionLastEdit'*/: break;
					case 'versionlastrefresh' /*case 'VersionLastRefresh'*/: break;
					default: seen = false;
				} break;

				case 'datavalidation' /*case 'DataValidation'*/:
				switch(Rn[3]) {
					case 'range' /*case 'Range'*/: break;

					case 'type' /*case 'Type'*/: break;
					case 'min' /*case 'Min'*/: break;
					case 'max' /*case 'Max'*/: break;
					case 'sort' /*case 'Sort'*/: break;
					case 'descending' /*case 'Descending'*/: break;
					case 'order' /*case 'Order'*/: break;
					case 'casesensitive' /*case 'CaseSensitive'*/: break;
					case 'value' /*case 'Value'*/: break;
					case 'errorstyle' /*case 'ErrorStyle'*/: break;
					case 'errormessage' /*case 'ErrorMessage'*/: break;
					case 'errortitle' /*case 'ErrorTitle'*/: break;
					case 'inputmessage' /*case 'InputMessage'*/: break;
					case 'inputtitle' /*case 'InputTitle'*/: break;
					case 'combohide' /*case 'ComboHide'*/: break;
					case 'inputhide' /*case 'InputHide'*/: break;
					case 'condition' /*case 'Condition'*/: break;
					case 'qualifier' /*case 'Qualifier'*/: break;
					case 'useblank' /*case 'UseBlank'*/: break;
					case 'value1' /*case 'Value1'*/: break;
					case 'value2' /*case 'Value2'*/: break;
					case 'format' /*case 'Format'*/: break;

					case 'cellrangelist' /*case 'CellRangeList'*/: break;
					default: seen = false;
				} break;

				case 'sorting' /*case 'Sorting'*/:
				case 'conditionalformatting' /*case 'ConditionalFormatting'*/:
				switch(Rn[3]) {
					case 'range' /*case 'Range'*/: break;
					case 'type' /*case 'Type'*/: break;
					case 'min' /*case 'Min'*/: break;
					case 'max' /*case 'Max'*/: break;
					case 'sort' /*case 'Sort'*/: break;
					case 'descending' /*case 'Descending'*/: break;
					case 'order' /*case 'Order'*/: break;
					case 'casesensitive' /*case 'CaseSensitive'*/: break;
					case 'value' /*case 'Value'*/: break;
					case 'errorstyle' /*case 'ErrorStyle'*/: break;
					case 'errormessage' /*case 'ErrorMessage'*/: break;
					case 'errortitle' /*case 'ErrorTitle'*/: break;
					case 'cellrangelist' /*case 'CellRangeList'*/: break;
					case 'inputmessage' /*case 'InputMessage'*/: break;
					case 'inputtitle' /*case 'InputTitle'*/: break;
					case 'combohide' /*case 'ComboHide'*/: break;
					case 'inputhide' /*case 'InputHide'*/: break;
					case 'condition' /*case 'Condition'*/: break;
					case 'qualifier' /*case 'Qualifier'*/: break;
					case 'useblank' /*case 'UseBlank'*/: break;
					case 'value1' /*case 'Value1'*/: break;
					case 'value2' /*case 'Value2'*/: break;
					case 'format' /*case 'Format'*/: break;
					default: seen = false;
				} break;

				/* MapInfo (schema) */
				case 'mapinfo' /*case 'MapInfo'*/: case 'schema' /*case 'Schema'*/: case 'data' /*case 'data'*/: switch(Rn[3]) {
					case 'map' /*case 'Map'*/: break;
					case 'entry' /*case 'Entry'*/: break;
					case 'range' /*case 'Range'*/: break;
					case 'xpath' /*case 'XPath'*/: break;
					case 'field' /*case 'Field'*/: break;
					case 'xsdtype' /*case 'XSDType'*/: break;
					case 'filteron' /*case 'FilterOn'*/: break;
					case 'aggregate' /*case 'Aggregate'*/: break;
					case 'elementtype' /*case 'ElementType'*/: break;
					case 'attributetype' /*case 'AttributeType'*/: break;
				/* These are from xsd (XML Schema Definition) */
					case 'schema' /*case 'schema'*/:
					case 'element' /*case 'element'*/:
					case 'complextype' /*case 'complexType'*/:
					case 'datatype' /*case 'datatype'*/:
					case 'all' /*case 'all'*/:
					case 'attribute' /*case 'attribute'*/:
					case 'extends' /*case 'extends'*/: break;

					case 'row' /*case 'row'*/: break;
					default: seen = false;
				} break;

				/* SmartTags (can be anything) */
				case 'smarttags' /*case 'SmartTags'*/: break;

				default: seen = false; break;
			}
			if(seen) break;
			/* CustomDocumentProperties */
			if(Rn[3].match(/!\[CDATA/)) break;
			if(!state[state.length-1][1]) throw 'Unrecognized tag: ' + Rn[3] + "|" + state.join("|");
			if(state[state.length-1][0]===/*'CustomDocumentProperties'*/'customdocumentproperties') {
				if(Rn[0].slice(-2) === "/>") break;
				else if(Rn[1]==="/") xlml_set_custprop(Custprops, raw_Rn3, cp, str.slice(pidx, Rn.index));
				else { cp = Rn; pidx = Rn.index + Rn[0].length; }
				break;
			}
			if(opts.WTF) throw 'Unrecognized tag: ' + Rn[3] + "|" + state.join("|");
	}
	var out = ({}/*:any*/);
	if(!opts.bookSheets && !opts.bookProps) out.Sheets = sheets;
	out.SheetNames = sheetnames;
	out.Workbook = Workbook;
	out.SSF = dup(table_fmt);
	out.Props = Props;
	out.Custprops = Custprops;
	return out;
}

function parse_xlml(data/*:RawBytes|string*/, opts)/*:Workbook*/ {
	fix_read_opts(opts=opts||{});
	switch(opts.type||"base64") {
		case "base64": return parse_xlml_xml(Base64_decode(data), opts);
		case "binary": case "buffer": case "file": return parse_xlml_xml(data, opts);
		case "array": return parse_xlml_xml(a2s(data), opts);
	}
	/*:: throw new Error("unsupported type " + opts.type); */
}

/* TODO */
function write_props_xlml(wb/*:Workbook*/, opts)/*:string*/ {
	var o/*:Array<string>*/ = [];
	/* DocumentProperties */
	if(wb.Props) o.push(xlml_write_docprops(wb.Props, opts));
	/* CustomDocumentProperties */
	if(wb.Custprops) o.push(xlml_write_custprops(wb.Props, wb.Custprops, opts));
	return o.join("");
}
/* TODO */
function write_wb_xlml(/*::wb, opts*/)/*:string*/ {
	/* OfficeDocumentSettings */
	/* ExcelWorkbook */
	return "";
}
/* TODO */
function write_sty_xlml(wb, opts)/*:string*/ {
	/* Styles */
	var styles/*:Array<string>*/ = ['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];
	opts.cellXfs.forEach(function(xf, id) {
		var payload/*:Array<string>*/ = [];
		payload.push(writextag('NumberFormat', null, {"ss:Format": escapexml(table_fmt[xf.numFmtId])}));

		var o = /*::(*/{"ss:ID": "s" + (21+id)}/*:: :any)*/;
		styles.push(writextag('Style', payload.join(""), o));
	});
	return writextag("Styles", styles.join(""));
}
function write_name_xlml(n) { return writextag("NamedRange", null, {"ss:Name": n.Name, "ss:RefersTo":"=" + a1_to_rc(n.Ref, {r:0,c:0})}); }
function write_names_xlml(wb/*::, opts*/)/*:string*/ {
	if(!((wb||{}).Workbook||{}).Names) return "";
	/*:: if(!wb || !wb.Workbook || !wb.Workbook.Names) throw new Error("unreachable"); */
	var names/*:Array<any>*/ = wb.Workbook.Names;
	var out/*:Array<string>*/ = [];
	for(var i = 0; i < names.length; ++i) {
		var n = names[i];
		if(n.Sheet != null) continue;
		if(n.Name.match(/^_xlfn\./)) continue;
		out.push(write_name_xlml(n));
	}
	return writextag("Names", out.join(""));
}
function write_ws_xlml_names(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*/)/*:string*/ {
	if(!ws) return "";
	if(!((wb||{}).Workbook||{}).Names) return "";
	/*:: if(!wb || !wb.Workbook || !wb.Workbook.Names) throw new Error("unreachable"); */
	var names/*:Array<any>*/ = wb.Workbook.Names;
	var out/*:Array<string>*/ = [];
	for(var i = 0; i < names.length; ++i) {
		var n = names[i];
		if(n.Sheet != idx) continue;
		/*switch(n.Name) {
			case "_": continue;
		}*/
		if(n.Name.match(/^_xlfn\./)) continue;
		out.push(write_name_xlml(n));
	}
	return out.join("");
}
/* WorksheetOptions */
function write_ws_xlml_wsopts(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*/)/*:string*/ {
	if(!ws) return "";
	var o/*:Array<string>*/ = [];
	/* NOTE: spec technically allows any order, but stick with implied order */

	/* FitToPage */
	/* DoNotDisplayColHeaders */
	/* DoNotDisplayRowHeaders */
	/* ViewableRange */
	/* Selection */
	/* GridlineColor */
	/* Name */
	/* ExcelWorksheetType */
	/* IntlMacro */
	/* Unsynced */
	/* Selected */
	/* CodeName */

	if(ws['!margins']) {
		o.push("<PageSetup>");
		if(ws['!margins'].header) o.push(writextag("Header", null, {'x:Margin':ws['!margins'].header}));
		if(ws['!margins'].footer) o.push(writextag("Footer", null, {'x:Margin':ws['!margins'].footer}));
		o.push(writextag("PageMargins", null, {
			'x:Bottom': ws['!margins'].bottom || "0.75",
			'x:Left': ws['!margins'].left || "0.7",
			'x:Right': ws['!margins'].right || "0.7",
			'x:Top': ws['!margins'].top || "0.75"
		}));
		o.push("</PageSetup>");
	}

	/* PageSetup */
	/* DisplayPageBreak */
	/* TransitionExpressionEvaluation */
	/* TransitionFormulaEntry */
	/* Print */
	/* Zoom */
	/* PageLayoutZoom */
	/* PageBreakZoom */
	/* ShowPageBreakZoom */
	/* DefaultRowHeight */
	/* DefaultColumnWidth */
	/* StandardWidth */

	if(wb && wb.Workbook && wb.Workbook.Sheets && wb.Workbook.Sheets[idx]) {
		/* Visible */
		if(wb.Workbook.Sheets[idx].Hidden) o.push(writextag("Visible", (wb.Workbook.Sheets[idx].Hidden == 1 ? "SheetHidden" : "SheetVeryHidden"), {}));
		else {
			/* Selected */
			for(var i = 0; i < idx; ++i) if(wb.Workbook.Sheets[i] && !wb.Workbook.Sheets[i].Hidden) break;
			if(i == idx) o.push("<Selected/>");
		}
	}

	/* LeftColumnVisible */

	if(((((wb||{}).Workbook||{}).Views||[])[0]||{}).RTL) o.push("<DisplayRightToLeft/>");

	/* GridlineColorIndex */
	/* DisplayFormulas */
	/* DoNotDisplayGridlines */
	/* DoNotDisplayHeadings */
	/* DoNotDisplayOutline */
	/* ApplyAutomaticOutlineStyles */
	/* NoSummaryRowsBelowDetail */
	/* NoSummaryColumnsRightDetail */
	/* DoNotDisplayZeros */
	/* ActiveRow */
	/* ActiveColumn */
	/* FilterOn */
	/* RangeSelection */
	/* TopRowVisible */
	/* TopRowBottomPane */
	/* LeftColumnRightPane */
	/* ActivePane */
	/* SplitHorizontal */
	/* SplitVertical */
	/* FreezePanes */
	/* FrozenNoSplit */
	/* TabColorIndex */
	/* Panes */

	/* NOTE: Password not supported in XLML Format */
	if(ws['!protect']) {
		o.push(writetag("ProtectContents", "True"));
		if(ws['!protect'].objects) o.push(writetag("ProtectObjects", "True"));
		if(ws['!protect'].scenarios) o.push(writetag("ProtectScenarios", "True"));
		if(ws['!protect'].selectLockedCells != null && !ws['!protect'].selectLockedCells) o.push(writetag("EnableSelection", "NoSelection"));
		else if(ws['!protect'].selectUnlockedCells != null && !ws['!protect'].selectUnlockedCells) o.push(writetag("EnableSelection", "UnlockedCells"));
	[
		[ "formatCells", "AllowFormatCells" ],
		[ "formatColumns", "AllowSizeCols" ],
		[ "formatRows", "AllowSizeRows" ],
		[ "insertColumns", "AllowInsertCols" ],
		[ "insertRows", "AllowInsertRows" ],
		[ "insertHyperlinks", "AllowInsertHyperlinks" ],
		[ "deleteColumns", "AllowDeleteCols" ],
		[ "deleteRows", "AllowDeleteRows" ],
		[ "sort", "AllowSort" ],
		[ "autoFilter", "AllowFilter" ],
		[ "pivotTables", "AllowUsePivotTables" ]
	].forEach(function(x) { if(ws['!protect'][x[0]]) o.push("<"+x[1]+"/>"); });
	}

	if(o.length == 0) return "";
	return writextag("WorksheetOptions", o.join(""), {xmlns:XLMLNS.x});
}
function write_ws_xlml_comment(comments/*:Array<any>*/)/*:string*/ {
	return comments.map(function(c) {
		// TODO: formatted text
		var t = xlml_unfixstr(c.t||"");
		var d =writextag("ss:Data", t, {"xmlns":"http://www.w3.org/TR/REC-html40"});
		return writextag("Comment", d, {"ss:Author":c.a});
	}).join("");
}
function write_ws_xlml_cell(cell, ref/*:string*/, ws, opts, idx/*:number*/, wb, addr)/*:string*/{
	if(!cell || (cell.v == undefined && cell.f == undefined)) return "";

	var attr = {};
	if(cell.f) attr["ss:Formula"] = "=" + escapexml(a1_to_rc(cell.f, addr));
	if(cell.F && cell.F.slice(0, ref.length) == ref) {
		var end = decode_cell(cell.F.slice(ref.length + 1));
		attr["ss:ArrayRange"] = "RC:R" + (end.r == addr.r ? "" : "[" + (end.r - addr.r) + "]") + "C" + (end.c == addr.c ? "" : "[" + (end.c - addr.c) + "]");
	}

	if(cell.l && cell.l.Target) {
		attr["ss:HRef"] = escapexml(cell.l.Target);
		if(cell.l.Tooltip) attr["x:HRefScreenTip"] = escapexml(cell.l.Tooltip);
	}

	if(ws['!merges']) {
		var marr = ws['!merges'];
		for(var mi = 0; mi != marr.length; ++mi) {
			if(marr[mi].s.c != addr.c || marr[mi].s.r != addr.r) continue;
			if(marr[mi].e.c > marr[mi].s.c) attr['ss:MergeAcross'] = marr[mi].e.c - marr[mi].s.c;
			if(marr[mi].e.r > marr[mi].s.r) attr['ss:MergeDown'] = marr[mi].e.r - marr[mi].s.r;
		}
	}

	var t = "", p = "";
	switch(cell.t) {
		case 'z': if(!opts.sheetStubs) return ""; break;
		case 'n': t = 'Number'; p = String(cell.v); break;
		case 'b': t = 'Boolean'; p = (cell.v ? "1" : "0"); break;
		case 'e': t = 'Error'; p = BErr[cell.v]; break;
		case 'd': t = 'DateTime'; p = new Date(cell.v).toISOString(); if(cell.z == null) cell.z = cell.z || table_fmt[14]; break;
		case 's': t = 'String'; p = escapexlml(cell.v||""); break;
	}
	/* TODO: cell style */
	var os = get_cell_style(opts.cellXfs, cell, opts);
	attr["ss:StyleID"] = "s" + (21+os);
	attr["ss:Index"] = addr.c + 1;
	var _v = (cell.v != null ? p : "");
	var m = cell.t == 'z' ? "" : ('<Data ss:Type="' + t + '">' + _v + '</Data>');

	if((cell.c||[]).length > 0) m += write_ws_xlml_comment(cell.c);

	return writextag("Cell", m, attr);
}
function write_ws_xlml_row(R/*:number*/, row)/*:string*/ {
	var o = '<Row ss:Index="' + (R+1) + '"';
	if(row) {
		if(row.hpt && !row.hpx) row.hpx = pt2px(row.hpt);
		if(row.hpx) o += ' ss:AutoFitHeight="0" ss:Height="' + row.hpx + '"';
		if(row.hidden) o += ' ss:Hidden="1"';
	}
	return o + '>';
}
/* TODO */
function write_ws_xlml_table(ws/*:Worksheet*/, opts, idx/*:number*/, wb/*:Workbook*/)/*:string*/ {
	if(!ws['!ref']) return "";
	var range/*:Range*/ = safe_decode_range(ws['!ref']);
	var marr/*:Array<Range>*/ = ws['!merges'] || [], mi = 0;
	var o/*:Array<string>*/ = [];
	if(ws['!cols']) ws['!cols'].forEach(function(n, i) {
		process_col(n);
		var w = !!n.width;
		var p = col_obj_w(i, n);
		var k/*:any*/ = {"ss:Index":i+1};
		if(w) k['ss:Width'] = width2px(p.width);
		if(n.hidden) k['ss:Hidden']="1";
		o.push(writextag("Column",null,k));
	});
	var dense = Array.isArray(ws);
	for(var R = range.s.r; R <= range.e.r; ++R) {
		var row = [write_ws_xlml_row(R, (ws['!rows']||[])[R])];
		for(var C = range.s.c; C <= range.e.c; ++C) {
			var skip = false;
			for(mi = 0; mi != marr.length; ++mi) {
				if(marr[mi].s.c > C) continue;
				if(marr[mi].s.r > R) continue;
				if(marr[mi].e.c < C) continue;
				if(marr[mi].e.r < R) continue;
				if(marr[mi].s.c != C || marr[mi].s.r != R) skip = true;
				break;
			}
			if(skip) continue;
			var addr = {r:R,c:C};
			var ref = encode_cell(addr), cell = dense ? (ws[R]||[])[C] : ws[ref];
			row.push(write_ws_xlml_cell(cell, ref, ws, opts, idx, wb, addr));
		}
		row.push("</Row>");
		if(row.length > 2) o.push(row.join(""));
	}
	return o.join("");
}
function write_ws_xlml(idx/*:number*/, opts, wb/*:Workbook*/)/*:string*/ {
	var o/*:Array<string>*/ = [];
	var s = wb.SheetNames[idx];
	var ws = wb.Sheets[s];

	var t/*:string*/ = ws ? write_ws_xlml_names(ws, opts, idx, wb) : "";
	if(t.length > 0) o.push("<Names>" + t + "</Names>");

	/* Table */
	t = ws ? write_ws_xlml_table(ws, opts, idx, wb) : "";
	if(t.length > 0) o.push("<Table>" + t + "</Table>");

	/* WorksheetOptions */
	o.push(write_ws_xlml_wsopts(ws, opts, idx, wb));

	return o.join("");
}
function write_xlml(wb, opts)/*:string*/ {
	if(!opts) opts = {};
	if(!wb.SSF) wb.SSF = dup(table_fmt);
	if(wb.SSF) {
		make_ssf(); SSF_load_table(wb.SSF);
		// $FlowIgnore
		opts.revssf = evert_num(wb.SSF); opts.revssf[wb.SSF[65535]] = 0;
		opts.ssf = wb.SSF;
		opts.cellXfs = [];
		get_cell_style(opts.cellXfs, {}, {revssf:{"General":0}});
	}
	var d/*:Array<string>*/ = [];
	d.push(write_props_xlml(wb, opts));
	d.push(write_wb_xlml(wb, opts));
	d.push("");
	d.push("");
	for(var i = 0; i < wb.SheetNames.length; ++i)
		d.push(writextag("Worksheet", write_ws_xlml(i, opts, wb), {"ss:Name":escapexml(wb.SheetNames[i])}));
	d[2] = write_sty_xlml(wb, opts);
	d[3] = write_names_xlml(wb, opts);
	return XML_HEADER + writextag("Workbook", d.join(""), {
		'xmlns':      XLMLNS.ss,
		'xmlns:o':    XLMLNS.o,
		'xmlns:x':    XLMLNS.x,
		'xmlns:ss':   XLMLNS.ss,
		'xmlns:dt':   XLMLNS.dt,
		'xmlns:html': XLMLNS.html
	});
}
/* [MS-OLEDS] 2.3.8 CompObjStream */
function parse_compobj(obj/*:CFBEntry*/) {
	var v = {};
	var o = obj.content;
	/*:: if(o == null) return; */

	/* [MS-OLEDS] 2.3.7 CompObjHeader -- All fields MUST be ignored */
	o.l = 28;

	v.AnsiUserType = o.read_shift(0, "lpstr-ansi");
	v.AnsiClipboardFormat = parse_ClipboardFormatOrAnsiString(o);

	if(o.length - o.l <= 4) return v;

	var m/*:number*/ = o.read_shift(4);
	if(m == 0 || m > 40) return v;
	o.l-=4; v.Reserved1 = o.read_shift(0, "lpstr-ansi");

	if(o.length - o.l <= 4) return v;
	m = o.read_shift(4);
	if(m !== 0x71b239f4) return v;
	v.UnicodeClipboardFormat = parse_ClipboardFormatOrUnicodeString(o);

	m = o.read_shift(4);
	if(m == 0 || m > 40) return v;
	o.l-=4; v.Reserved2 = o.read_shift(0, "lpwstr");
}

/*
	Continue logic for:
	- 2.4.58 Continue          0x003c
	- 2.4.59 ContinueBigName   0x043c
	- 2.4.60 ContinueFrt       0x0812
	- 2.4.61 ContinueFrt11     0x0875
	- 2.4.62 ContinueFrt12     0x087f
*/
var CONTINUE_RT = [ 0x003c, 0x043c, 0x0812, 0x0875, 0x087f ];
function slurp(RecordType, R, blob, length/*:number*/, opts)/*:any*/ {
	var l = length;
	var bufs = [];
	var d = blob.slice(blob.l,blob.l+l);
	if(opts && opts.enc && opts.enc.insitu && d.length > 0) switch(RecordType) {
	case 0x0009: case 0x0209: case 0x0409: case 0x0809/* BOF */: case 0x002f /* FilePass */: case 0x0195 /* FileLock */: case 0x00e1 /* InterfaceHdr */: case 0x0196 /* RRDInfo */: case 0x0138 /* RRDHead */: case 0x0194 /* UsrExcl */: case 0x000a /* EOF */:
		break;
	case 0x0085 /* BoundSheet8 */:
		break;
	default:
		opts.enc.insitu(d);
	}
	bufs.push(d);
	blob.l += l;
	var nextrt = __readUInt16LE(blob,blob.l), next = XLSRecordEnum[nextrt];
	var start = 0;
	while(next != null && CONTINUE_RT.indexOf(nextrt) > -1) {
		l = __readUInt16LE(blob,blob.l+2);
		start = blob.l + 4;
		if(nextrt == 0x0812 /* ContinueFrt */) start += 4;
		else if(nextrt == 0x0875 || nextrt == 0x087f) {
			start += 12;
		}
		d = blob.slice(start,blob.l+4+l);
		bufs.push(d);
		blob.l += 4+l;
		next = (XLSRecordEnum[nextrt = __readUInt16LE(blob, blob.l)]);
	}
	var b = (bconcat(bufs)/*:any*/);
	prep_blob(b, 0);
	var ll = 0; b.lens = [];
	for(var j = 0; j < bufs.length; ++j) { b.lens.push(ll); ll += bufs[j].length; }
	if(b.length < length) throw "XLS Record 0x" + RecordType.toString(16) + " Truncated: " + b.length + " < " + length;
	return R.f(b, b.length, opts);
}

function safe_format_xf(p/*:any*/, opts/*:ParseOpts*/, date1904/*:?boolean*/) {
	if(p.t === 'z') return;
	if(!p.XF) return;
	var fmtid = 0;
	try {
		fmtid = p.z || p.XF.numFmtId || 0;
		if(opts.cellNF) p.z = table_fmt[fmtid];
	} catch(e) { if(opts.WTF) throw e; }
	if(!opts || opts.cellText !== false) try {
		if(p.t === 'e') { p.w = p.w || BErr[p.v]; }
		else if(fmtid === 0 || fmtid == "General") {
			if(p.t === 'n') {
				if((p.v|0) === p.v) p.w = p.v.toString(10);
				else p.w = SSF_general_num(p.v);
			}
			else p.w = SSF_general(p.v);
		}
		else p.w = SSF_format(fmtid,p.v, {date1904:!!date1904, dateNF: opts && opts.dateNF});
	} catch(e) { if(opts.WTF) throw e; }
	if(opts.cellDates && fmtid && p.t == 'n' && fmt_is_date(table_fmt[fmtid] || String(fmtid))) {
		var _d = SSF_parse_date_code(p.v); if(_d) { p.t = 'd'; p.v = new Date(_d.y, _d.m-1,_d.d,_d.H,_d.M,_d.S,_d.u); }
	}
}

function make_cell(val, ixfe, t)/*:Cell*/ {
	return ({v:val, ixfe:ixfe, t:t}/*:any*/);
}

// 2.3.2
function parse_workbook(blob, options/*:ParseOpts*/)/*:Workbook*/ {
	var wb = ({opts:{}}/*:any*/);
	var Sheets = {};
	if(DENSE != null && options.dense == null) options.dense = DENSE;
	var out/*:Worksheet*/ = ((options.dense ? [] : {})/*:any*/);
	var Directory = {};
	var range/*:Range*/ = ({}/*:any*/);
	var last_formula = null;
	var sst/*:SST*/ = ([]/*:any*/);
	var cur_sheet = "";
	var Preamble = {};
	var lastcell, last_cell = "", cc/*:Cell*/, cmnt, rngC, rngR;
	var sharedf = {};
	var arrayf/*:Array<[Range, string]>*/ = [];
	var temp_val/*:Cell*/;
	var country;
	var XFs = []; /* XF records */
	var palette/*:Array<[number, number, number]>*/ = [];
	var Workbook/*:WBWBProps*/ = ({ Sheets:[], WBProps:{date1904:false}, Views:[{}] }/*:any*/), wsprops = {};
	var get_rgb = function getrgb(icv/*:number*/)/*:[number, number, number]*/ {
		if(icv < 8) return XLSIcv[icv];
		if(icv < 64) return palette[icv-8] || XLSIcv[icv];
		return XLSIcv[icv];
	};
	var process_cell_style = function pcs(cell, line/*:any*/, options) {
		var xfd = line.XF.data;
		if(!xfd || !xfd.patternType || !options || !options.cellStyles) return;
		line.s = ({}/*:any*/);
		line.s.patternType = xfd.patternType;
		var t;
		if((t = rgb2Hex(get_rgb(xfd.icvFore)))) { line.s.fgColor = {rgb:t}; }
		if((t = rgb2Hex(get_rgb(xfd.icvBack)))) { line.s.bgColor = {rgb:t}; }
	};
	var addcell = function addcell(cell/*:any*/, line/*:any*/, options/*:any*/) {
		if(file_depth > 1) return;
		if(options.sheetRows && cell.r >= options.sheetRows) return;
		if(options.cellStyles && line.XF && line.XF.data) process_cell_style(cell, line, options);
		delete line.ixfe; delete line.XF;
		lastcell = cell;
		last_cell = encode_cell(cell);
		if(!range || !range.s || !range.e) range = {s:{r:0,c:0},e:{r:0,c:0}};
		if(cell.r < range.s.r) range.s.r = cell.r;
		if(cell.c < range.s.c) range.s.c = cell.c;
		if(cell.r + 1 > range.e.r) range.e.r = cell.r + 1;
		if(cell.c + 1 > range.e.c) range.e.c = cell.c + 1;
		if(options.cellFormula && line.f) {
			for(var afi = 0; afi < arrayf.length; ++afi) {
				if(arrayf[afi][0].s.c > cell.c || arrayf[afi][0].s.r > cell.r) continue;
				if(arrayf[afi][0].e.c < cell.c || arrayf[afi][0].e.r < cell.r) continue;
				line.F = encode_range(arrayf[afi][0]);
				if(arrayf[afi][0].s.c != cell.c || arrayf[afi][0].s.r != cell.r) delete line.f;
				if(line.f) line.f = "" + stringify_formula(arrayf[afi][1], range, cell, supbooks, opts);
				break;
			}
		}
		{
			if(options.dense) {
				if(!out[cell.r]) out[cell.r] = [];
				out[cell.r][cell.c] = line;
			} else out[last_cell] = line;
		}
	};
	var opts = ({
		enc: false, // encrypted
		sbcch: 0, // cch in the preceding SupBook
		snames: [], // sheetnames
		sharedf: sharedf, // shared formulae by address
		arrayf: arrayf, // array formulae array
		rrtabid: [], // RRTabId
		lastuser: "", // Last User from WriteAccess
		biff: 8, // BIFF version
		codepage: 0, // CP from CodePage record
		winlocked: 0, // fLockWn from WinProtect
		cellStyles: !!options && !!options.cellStyles,
		WTF: !!options && !!options.wtf
	}/*:any*/);
	if(options.password) opts.password = options.password;
	var themes;
	var merges/*:Array<Range>*/ = [];
	var objects = [];
	var colinfo/*:Array<ColInfo>*/ = [], rowinfo/*:Array<RowInfo>*/ = [];
	var seencol = false;
	var supbooks = ([]/*:any*/); // 1-indexed, will hold extern names
	supbooks.SheetNames = opts.snames;
	supbooks.sharedf = opts.sharedf;
	supbooks.arrayf = opts.arrayf;
	supbooks.names = [];
	supbooks.XTI = [];
	var last_RT = 0;
	var file_depth = 0; /* TODO: make a real stack */
	var BIFF2Fmt = 0, BIFF2FmtTable/*:Array<string>*/ = [];
	var FilterDatabases = []; /* TODO: sort out supbooks and process elsewhere */
	var last_lbl/*:?DefinedName*/;

	/* explicit override for some broken writers */
	opts.codepage = 1200;
	set_cp(1200);
	var seen_codepage = false;
	while(blob.l < blob.length - 1) {
		var s = blob.l;
		var RecordType = blob.read_shift(2);
		if(RecordType === 0 && last_RT === 0x000a /* EOF */) break;
		var length = (blob.l === blob.length ? 0 : blob.read_shift(2));
		var R = XLSRecordEnum[RecordType];
		//console.log(RecordType.toString(16), RecordType, R, blob.l, length, blob.length);
		//if(!R) console.log(blob.slice(blob.l, blob.l + length));
		if(R && R.f) {
			if(options.bookSheets) {
				if(last_RT === 0x0085 /* BoundSheet8 */ && RecordType !== 0x0085 /* R.n !== 'BoundSheet8' */) break;
			}
			last_RT = RecordType;
			if(R.r === 2 || R.r == 12) {
				var rt = blob.read_shift(2); length -= 2;
				if(!opts.enc && rt !== RecordType && (((rt&0xFF)<<8)|(rt>>8)) !== RecordType) throw new Error("rt mismatch: " + rt + "!=" + RecordType);
				if(R.r == 12){
					blob.l += 10; length -= 10;
				} // skip FRT
			}
			//console.error(R,blob.l,length,blob.length);
			var val/*:any*/ = ({}/*:any*/);
			if(RecordType === 0x000a /* EOF */) val = /*::(*/R.f(blob, length, opts)/*:: :any)*/;
			else val = /*::(*/slurp(RecordType, R, blob, length, opts)/*:: :any)*/;
			/*:: val = (val:any); */
			if(file_depth == 0 && [0x0009, 0x0209, 0x0409, 0x0809].indexOf(last_RT) === -1 /* 'BOF' */) continue;
			switch(RecordType) {
				case 0x0022 /* Date1904 */:
					/*:: if(!Workbook.WBProps) Workbook.WBProps = {}; */
					wb.opts.Date1904 = Workbook.WBProps.date1904 = val; break;
				case 0x0086 /* WriteProtect */: wb.opts.WriteProtect = true; break;
				case 0x002f /* FilePass */:
					if(!opts.enc) blob.l = 0;
					opts.enc = val;
					if(!options.password) throw new Error("File is password-protected");
					if(val.valid == null) throw new Error("Encryption scheme unsupported");
					if(!val.valid) throw new Error("Password is incorrect");
					break;
				case 0x005c /* WriteAccess */: opts.lastuser = val; break;
				case 0x0042 /* CodePage */:
					var cpval = Number(val);
					/* overrides based on test cases */
					switch(cpval) {
						case 0x5212: cpval =  1200; break;
						case 0x8000: cpval = 10000; break;
						case 0x8001: cpval =  1252; break;
					}
					set_cp(opts.codepage = cpval);
					seen_codepage = true;
					break;
				case 0x013d /* RRTabId */: opts.rrtabid = val; break;
				case 0x0019 /* WinProtect */: opts.winlocked = val; break;
				case 0x01b7 /* RefreshAll */: wb.opts["RefreshAll"] = val; break;
				case 0x000c /* CalcCount */: wb.opts["CalcCount"] = val; break;
				case 0x0010 /* CalcDelta */: wb.opts["CalcDelta"] = val; break;
				case 0x0011 /* CalcIter */: wb.opts["CalcIter"] = val; break;
				case 0x000d /* CalcMode */: wb.opts["CalcMode"] = val; break;
				case 0x000e /* CalcPrecision */: wb.opts["CalcPrecision"] = val; break;
				case 0x005f /* CalcSaveRecalc */: wb.opts["CalcSaveRecalc"] = val; break;
				case 0x000f /* CalcRefMode */: opts.CalcRefMode = val; break; // TODO: implement R1C1
				case 0x08a3 /* ForceFullCalculation */: wb.opts.FullCalc = val; break;
				case 0x0081 /* WsBool */:
					if(val.fDialog) out["!type"] = "dialog";
					if(!val.fBelow) (out["!outline"] || (out["!outline"] = {})).above = true;
					if(!val.fRight) (out["!outline"] || (out["!outline"] = {})).left = true;
					break; // TODO
				case 0x00e0 /* XF */:
					XFs.push(val); break;
				case 0x01ae /* SupBook */:
					supbooks.push([val]);
					supbooks[supbooks.length-1].XTI = [];
					break;
				case 0x0023: case 0x0223 /* ExternName */:
					supbooks[supbooks.length-1].push(val);
					break;
				case 0x0018: case 0x0218 /* Lbl */:
					last_lbl = ({
						Name: val.Name,
						Ref: stringify_formula(val.rgce,range,null,supbooks,opts)
					}/*:DefinedName*/);
					if(val.itab > 0) last_lbl.Sheet = val.itab - 1;
					supbooks.names.push(last_lbl);
					if(!supbooks[0]) { supbooks[0] = []; supbooks[0].XTI = []; }
					supbooks[supbooks.length-1].push(val);
					if(val.Name == "_xlnm._FilterDatabase" && val.itab > 0)
						if(val.rgce && val.rgce[0] && val.rgce[0][0] && val.rgce[0][0][0] == 'PtgArea3d')
							FilterDatabases[val.itab - 1] = { ref: encode_range(val.rgce[0][0][1][2]) };
					break;
				case 0x0016 /* ExternCount */: opts.ExternCount = val; break;
				case 0x0017 /* ExternSheet */:
					if(supbooks.length == 0) { supbooks[0] = []; supbooks[0].XTI = []; }
					supbooks[supbooks.length - 1].XTI = supbooks[supbooks.length - 1].XTI.concat(val); supbooks.XTI = supbooks.XTI.concat(val); break;
				case 0x0894 /* NameCmt */:
					/* TODO: search for correct name */
					if(opts.biff < 8) break;
					if(last_lbl != null) last_lbl.Comment = val[1];
					break;
				case 0x0012 /* Protect */: out["!protect"] = val; break; /* for sheet or book */
				case 0x0013 /* Password */: if(val !== 0 && opts.WTF) console.error("Password verifier: " + val); break;
				case 0x0085 /* BoundSheet8 */: {
					Directory[val.pos] = val;
					opts.snames.push(val.name);
				} break;
				case 0x000a /* EOF */: {
					if(--file_depth) break;
					if(range.e) {
						if(range.e.r > 0 && range.e.c > 0) {
							range.e.r--; range.e.c--;
							out["!ref"] = encode_range(range);
							if(options.sheetRows && options.sheetRows <= range.e.r) {
								var tmpri = range.e.r;
								range.e.r = options.sheetRows - 1;
								out["!fullref"] = out["!ref"];
								out["!ref"] = encode_range(range);
								range.e.r = tmpri;
							}
							range.e.r++; range.e.c++;
						}
						if(merges.length > 0) out["!merges"] = merges;
						if(objects.length > 0) out["!objects"] = objects;
						if(colinfo.length > 0) out["!cols"] = colinfo;
						if(rowinfo.length > 0) out["!rows"] = rowinfo;
						Workbook.Sheets.push(wsprops);
					}
					if(cur_sheet === "") Preamble = out; else Sheets[cur_sheet] = out;
					out = ((options.dense ? [] : {})/*:any*/);
				} break;
				case 0x0009: case 0x0209: case 0x0409: case 0x0809 /* BOF */: {
					if(opts.biff === 8) opts.biff = {
						/*::[*/0x0009/*::]*/:2,
						/*::[*/0x0209/*::]*/:3,
						/*::[*/0x0409/*::]*/:4
					}[RecordType] || {
						/*::[*/0x0200/*::]*/:2,
						/*::[*/0x0300/*::]*/:3,
						/*::[*/0x0400/*::]*/:4,
						/*::[*/0x0500/*::]*/:5,
						/*::[*/0x0600/*::]*/:8,
						/*::[*/0x0002/*::]*/:2,
						/*::[*/0x0007/*::]*/:2
					}[val.BIFFVer] || 8;
					opts.biffguess = val.BIFFVer == 0;
					if(val.BIFFVer == 0 && val.dt == 0x1000) { opts.biff = 5; seen_codepage = true; set_cp(opts.codepage = 28591); }
					if(opts.biff == 8 && val.BIFFVer == 0 && val.dt == 16) opts.biff = 2;
					if(file_depth++) break;
					out = ((options.dense ? [] : {})/*:any*/);

					if(opts.biff < 8 && !seen_codepage) { seen_codepage = true; set_cp(opts.codepage = options.codepage || 1252); }

					if(opts.biff < 5 || val.BIFFVer == 0 && val.dt == 0x1000) {
						if(cur_sheet === "") cur_sheet = "Sheet1";
						range = {s:{r:0,c:0},e:{r:0,c:0}};
						/* fake BoundSheet8 */
						var fakebs8 = {pos: blob.l - length, name:cur_sheet};
						Directory[fakebs8.pos] = fakebs8;
						opts.snames.push(cur_sheet);
					}
					else cur_sheet = (Directory[s] || {name:""}).name;
					if(val.dt == 0x20) out["!type"] = "chart";
					if(val.dt == 0x40) out["!type"] = "macro";
					merges = [];
					objects = [];
					opts.arrayf = arrayf = [];
					colinfo = []; rowinfo = [];
					seencol = false;
					wsprops = {Hidden:(Directory[s]||{hs:0}).hs, name:cur_sheet };
				} break;
				case 0x0203 /* Number */: case 0x0003 /* BIFF2NUM */: case 0x0002 /* BIFF2INT */: {
					if(out["!type"] == "chart") if(options.dense ? (out[val.r]||[])[val.c]: out[encode_cell({c:val.c, r:val.r})]) ++val.c;
					temp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe]||{}, v:val.val, t:'n'}/*:any*/);
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell({c:val.c, r:val.r}, temp_val, options);
				} break;
				case 0x0005: case 0x0205 /* BoolErr */: {
					temp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe], v:val.val, t:val.t}/*:any*/);
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell({c:val.c, r:val.r}, temp_val, options);
				} break;
				case 0x027e /* RK */: {
					temp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe], v:val.rknum, t:'n'}/*:any*/);
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell({c:val.c, r:val.r}, temp_val, options);
				} break;
				case 0x00bd /* MulRk */: {
					for(var j = val.c; j <= val.C; ++j) {
						var ixfe = val.rkrec[j-val.c][0];
						temp_val= ({ixfe:ixfe, XF:XFs[ixfe], v:val.rkrec[j-val.c][1], t:'n'}/*:any*/);
						if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
						safe_format_xf(temp_val, options, wb.opts.Date1904);
						addcell({c:j, r:val.r}, temp_val, options);
					}
				} break;
				case 0x0006: case 0x0206: case 0x0406 /* Formula */: {
					if(val.val == 'String') { last_formula = val; break; }
					temp_val = make_cell(val.val, val.cell.ixfe, val.tt);
					temp_val.XF = XFs[temp_val.ixfe];
					if(options.cellFormula) {
						var _f = val.formula;
						if(_f && _f[0] && _f[0][0] && _f[0][0][0] == 'PtgExp') {
							var _fr = _f[0][0][1][0], _fc = _f[0][0][1][1];
							var _fe = encode_cell({r:_fr, c:_fc});
							if(sharedf[_fe]) temp_val.f = ""+stringify_formula(val.formula,range,val.cell,supbooks, opts);
							else temp_val.F = ((options.dense ? (out[_fr]||[])[_fc]: out[_fe]) || {}).F;
						} else temp_val.f = ""+stringify_formula(val.formula,range,val.cell,supbooks, opts);
					}
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell(val.cell, temp_val, options);
					last_formula = val;
				} break;
				case 0x0007: case 0x0207 /* String */: {
					if(last_formula) { /* technically always true */
						last_formula.val = val;
						temp_val = make_cell(val, last_formula.cell.ixfe, 's');
						temp_val.XF = XFs[temp_val.ixfe];
						if(options.cellFormula) {
							temp_val.f = ""+stringify_formula(last_formula.formula, range, last_formula.cell, supbooks, opts);
						}
						if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
						safe_format_xf(temp_val, options, wb.opts.Date1904);
						addcell(last_formula.cell, temp_val, options);
						last_formula = null;
					} else throw new Error("String record expects Formula");
				} break;
				case 0x0021: case 0x0221 /* Array */: {
					arrayf.push(val);
					var _arraystart = encode_cell(val[0].s);
					cc = options.dense ? (out[val[0].s.r]||[])[val[0].s.c] : out[_arraystart];
					if(options.cellFormula && cc) {
						if(!last_formula) break; /* technically unreachable */
						if(!_arraystart || !cc) break;
						cc.f = ""+stringify_formula(val[1], range, val[0], supbooks, opts);
						cc.F = encode_range(val[0]);
					}
				} break;
				case 0x04bc /* ShrFmla */: {
					if(!options.cellFormula) break;
					if(last_cell) {
						/* TODO: capture range */
						if(!last_formula) break; /* technically unreachable */
						sharedf[encode_cell(last_formula.cell)]= val[0];
						cc = options.dense ? (out[last_formula.cell.r]||[])[last_formula.cell.c] : out[encode_cell(last_formula.cell)];
						(cc||{}).f = ""+stringify_formula(val[0], range, lastcell, supbooks, opts);
					}
				} break;
				case 0x00fd /* LabelSst */:
					temp_val=make_cell(sst[val.isst].t, val.ixfe, 's');
					if(sst[val.isst].h) temp_val.h = sst[val.isst].h;
					temp_val.XF = XFs[temp_val.ixfe];
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell({c:val.c, r:val.r}, temp_val, options);
					break;
				case 0x0201 /* Blank */: if(options.sheetStubs) {
					temp_val = ({ixfe: val.ixfe, XF: XFs[val.ixfe], t:'z'}/*:any*/);
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell({c:val.c, r:val.r}, temp_val, options);
				} break;
				case 0x00be /* MulBlank */: if(options.sheetStubs) {
					for(var _j = val.c; _j <= val.C; ++_j) {
						var _ixfe = val.ixfe[_j-val.c];
						temp_val= ({ixfe:_ixfe, XF:XFs[_ixfe], t:'z'}/*:any*/);
						if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
						safe_format_xf(temp_val, options, wb.opts.Date1904);
						addcell({c:_j, r:val.r}, temp_val, options);
					}
				} break;
				case 0x00d6 /* RString */:
				case 0x0204 /* Label */: case 0x0004 /* BIFF2STR */:
					temp_val=make_cell(val.val, val.ixfe, 's');
					temp_val.XF = XFs[temp_val.ixfe];
					if(BIFF2Fmt > 0) temp_val.z = BIFF2FmtTable[(temp_val.ixfe>>8) & 0x3F];
					safe_format_xf(temp_val, options, wb.opts.Date1904);
					addcell({c:val.c, r:val.r}, temp_val, options);
					break;

				case 0x0000: case 0x0200 /* Dimensions */: {
					if(file_depth === 1) range = val; /* TODO: stack */
				} break;
				case 0x00fc /* SST */: {
					sst = val;
				} break;
				case 0x041e /* Format */: { /* val = [id, fmt] */
					if(opts.biff == 4) {
						BIFF2FmtTable[BIFF2Fmt++] = val[1];
						for(var b4idx = 0; b4idx < BIFF2Fmt + 163; ++b4idx) if(table_fmt[b4idx] == val[1]) break;
						if(b4idx >= 163) SSF_load(val[1], BIFF2Fmt + 163);
					}
					else SSF_load(val[1], val[0]);
				} break;
				case 0x001e /* BIFF2FORMAT */: {
					BIFF2FmtTable[BIFF2Fmt++] = val;
					for(var b2idx = 0; b2idx < BIFF2Fmt + 163; ++b2idx) if(table_fmt[b2idx] == val) break;
					if(b2idx >= 163) SSF_load(val, BIFF2Fmt + 163);
				} break;

				case 0x00e5 /* MergeCells */: merges = merges.concat(val); break;

				case 0x005d /* Obj */: objects[val.cmo[0]] = opts.lastobj = val; break;
				case 0x01b6 /* TxO */: opts.lastobj.TxO = val; break;
				case 0x007f /* ImData */: opts.lastobj.ImData = val; break;

				case 0x01b8 /* HLink */: {
					for(rngR = val[0].s.r; rngR <= val[0].e.r; ++rngR)
						for(rngC = val[0].s.c; rngC <= val[0].e.c; ++rngC) {
							cc = options.dense ? (out[rngR]||[])[rngC] : out[encode_cell({c:rngC,r:rngR})];
							if(cc) cc.l = val[1];
						}
				} break;
				case 0x0800 /* HLinkTooltip */: {
					for(rngR = val[0].s.r; rngR <= val[0].e.r; ++rngR)
						for(rngC = val[0].s.c; rngC <= val[0].e.c; ++rngC) {
							cc = options.dense ? (out[rngR]||[])[rngC] : out[encode_cell({c:rngC,r:rngR})];
							if(cc && cc.l) cc.l.Tooltip = val[1];
							}
				} break;
				case 0x001c /* Note */: {
					if(opts.biff <= 5 && opts.biff >= 2) break; /* TODO: BIFF5 */
					cc = options.dense ? (out[val[0].r]||[])[val[0].c] : out[encode_cell(val[0])];
					var noteobj = objects[val[2]];
					if(!cc) {
						if(options.dense) {
							if(!out[val[0].r]) out[val[0].r] = [];
							cc = out[val[0].r][val[0].c] = ({t:"z"}/*:any*/);
						} else {
							cc = out[encode_cell(val[0])] = ({t:"z"}/*:any*/);
						}
						range.e.r = Math.max(range.e.r, val[0].r);
						range.s.r = Math.min(range.s.r, val[0].r);
						range.e.c = Math.max(range.e.c, val[0].c);
						range.s.c = Math.min(range.s.c, val[0].c);
					}
					if(!cc.c) cc.c = [];
					cmnt = {a:val[1],t:noteobj.TxO.t};
					cc.c.push(cmnt);
				} break;
				case 0x087d /* XFExt */: update_xfext(XFs[val.ixfe], val.ext); break;
				case 0x007d /* ColInfo */: {
					if(!opts.cellStyles) break;
					while(val.e >= val.s) {
						colinfo[val.e--] = { width: val.w/256, level: (val.level || 0), hidden: !!(val.flags & 1) };
						if(!seencol) { seencol = true; find_mdw_colw(val.w/256); }
						process_col(colinfo[val.e+1]);
					}
				} break;
				case 0x0208 /* Row */: {
					var rowobj = {};
					if(val.level != null) { rowinfo[val.r] = rowobj; rowobj.level = val.level; }
					if(val.hidden) { rowinfo[val.r] = rowobj; rowobj.hidden = true; }
					if(val.hpt) {
						rowinfo[val.r] = rowobj;
						rowobj.hpt = val.hpt; rowobj.hpx = pt2px(val.hpt);
					}
				} break;
				case 0x0026 /* LeftMargin */:
				case 0x0027 /* RightMargin */:
				case 0x0028 /* TopMargin */:
				case 0x0029 /* BottomMargin */:
					if(!out['!margins']) default_margins(out['!margins'] = {});
					out['!margins'][({0x26: "left", 0x27:"right", 0x28:"top", 0x29:"bottom"})[RecordType]] = val;
					break;
				case 0x00a1 /* Setup */: // TODO
					if(!out['!margins']) default_margins(out['!margins'] = {});
					out['!margins'].header = val.header;
					out['!margins'].footer = val.footer;
					break;
				case 0x023e /* Window2 */: // TODO
					// $FlowIgnore
					if(val.RTL) Workbook.Views[0].RTL = true;
					break;
				case 0x0092 /* Palette */: palette = val; break;
				case 0x0896 /* Theme */: themes = val; break;
				case 0x008c /* Country */: country = val; break;
				case 0x01ba /* CodeName */: {
					/*:: if(!Workbook.WBProps) Workbook.WBProps = {}; */
					if(!cur_sheet) Workbook.WBProps.CodeName = val || "ThisWorkbook";
					else wsprops.CodeName = val || wsprops.name;
				} break;
			}
		} else {
			if(!R) console.error("Missing Info for XLS Record 0x" + RecordType.toString(16));
			blob.l += length;
		}
	}
	wb.SheetNames=keys(Directory).sort(function(a,b) { return Number(a) - Number(b); }).map(function(x){return Directory[x].name;});
	if(!options.bookSheets) wb.Sheets=Sheets;
	if(!wb.SheetNames.length && Preamble["!ref"]) {
		wb.SheetNames.push("Sheet1");
		/*jshint -W069 */
		if(wb.Sheets) wb.Sheets["Sheet1"] = Preamble;
		/*jshint +W069 */
	} else wb.Preamble=Preamble;
	if(wb.Sheets) FilterDatabases.forEach(function(r,i) { wb.Sheets[wb.SheetNames[i]]['!autofilter'] = r; });
	wb.Strings = sst;
	wb.SSF = dup(table_fmt);
	if(opts.enc) wb.Encryption = opts.enc;
	if(themes) wb.Themes = themes;
	wb.Metadata = {};
	if(country !== undefined) wb.Metadata.Country = country;
	if(supbooks.names.length > 0) Workbook.Names = supbooks.names;
	wb.Workbook = Workbook;
	return wb;
}

/* TODO: split props*/
var PSCLSID = {
	SI: "e0859ff2f94f6810ab9108002b27b3d9",
	DSI: "02d5cdd59c2e1b10939708002b2cf9ae",
	UDI: "05d5cdd59c2e1b10939708002b2cf9ae"
};
function parse_xls_props(cfb/*:CFBContainer*/, props, o) {
	/* [MS-OSHARED] 2.3.3.2.2 Document Summary Information Property Set */
	var DSI = CFB.find(cfb, '/!DocumentSummaryInformation');
	if(DSI && DSI.size > 0) try {
		var DocSummary = parse_PropertySetStream(DSI, DocSummaryPIDDSI, PSCLSID.DSI);
		for(var d in DocSummary) props[d] = DocSummary[d];
	} catch(e) {if(o.WTF) throw e;/* empty */}

	/* [MS-OSHARED] 2.3.3.2.1 Summary Information Property Set*/
	var SI = CFB.find(cfb, '/!SummaryInformation');
	if(SI && SI.size > 0) try {
		var Summary = parse_PropertySetStream(SI, SummaryPIDSI, PSCLSID.SI);
		for(var s in Summary) if(props[s] == null) props[s] = Summary[s];
	} catch(e) {if(o.WTF) throw e;/* empty */}

	if(props.HeadingPairs && props.TitlesOfParts) {
		load_props_pairs(props.HeadingPairs, props.TitlesOfParts, props, o);
		delete props.HeadingPairs; delete props.TitlesOfParts;
	}
}
function write_xls_props(wb/*:Workbook*/, cfb/*:CFBContainer*/) {
	var DSEntries = [], SEntries = [], CEntries = [];
	var i = 0, Keys;
	var DocSummaryRE/*:{[key:string]:string}*/ = evert_key(DocSummaryPIDDSI, "n");
	var SummaryRE/*:{[key:string]:string}*/ = evert_key(SummaryPIDSI, "n");
	if(wb.Props) {
		Keys = keys(wb.Props);
		// $FlowIgnore
		for(i = 0; i < Keys.length; ++i) (Object.prototype.hasOwnProperty.call(DocSummaryRE, Keys[i]) ? DSEntries : Object.prototype.hasOwnProperty.call(SummaryRE, Keys[i]) ? SEntries : CEntries).push([Keys[i], wb.Props[Keys[i]]]);
	}
	if(wb.Custprops) {
		Keys = keys(wb.Custprops);
		// $FlowIgnore
		for(i = 0; i < Keys.length; ++i) if(!Object.prototype.hasOwnProperty.call((wb.Props||{}), Keys[i])) (Object.prototype.hasOwnProperty.call(DocSummaryRE, Keys[i]) ? DSEntries : Object.prototype.hasOwnProperty.call(SummaryRE, Keys[i]) ? SEntries : CEntries).push([Keys[i], wb.Custprops[Keys[i]]]);
	}
	var CEntries2 = [];
	for(i = 0; i < CEntries.length; ++i) {
		if(XLSPSSkip.indexOf(CEntries[i][0]) > -1 || PseudoPropsPairs.indexOf(CEntries[i][0]) > -1) continue;
		if(CEntries[i][1] == null) continue;
		CEntries2.push(CEntries[i]);
	}
	if(SEntries.length) CFB.utils.cfb_add(cfb, "/\u0005SummaryInformation", write_PropertySetStream(SEntries, PSCLSID.SI, SummaryRE, SummaryPIDSI));
	if(DSEntries.length || CEntries2.length) CFB.utils.cfb_add(cfb, "/\u0005DocumentSummaryInformation", write_PropertySetStream(DSEntries, PSCLSID.DSI, DocSummaryRE, DocSummaryPIDDSI, CEntries2.length ? CEntries2 : null, PSCLSID.UDI));
}

function parse_xlscfb(cfb/*:any*/, options/*:?ParseOpts*/)/*:Workbook*/ {
if(!options) options = {};
fix_read_opts(options);
reset_cp();
if(options.codepage) set_ansi(options.codepage);
var CompObj/*:?CFBEntry*/, WB/*:?any*/;
if(cfb.FullPaths) {
	if(CFB.find(cfb, '/encryption')) throw new Error("File is password-protected");
	CompObj = CFB.find(cfb, '!CompObj');
	WB = CFB.find(cfb, '/Workbook') || CFB.find(cfb, '/Book');
} else {
	switch(options.type) {
		case 'base64': cfb = s2a(Base64_decode(cfb)); break;
		case 'binary': cfb = s2a(cfb); break;
		case 'buffer': break;
		case 'array': if(!Array.isArray(cfb)) cfb = Array.prototype.slice.call(cfb); break;
	}
	prep_blob(cfb, 0);
	WB = ({content: cfb}/*:any*/);
}
var /*::CompObjP, */WorkbookP/*:: :Workbook = XLSX.utils.book_new(); */;

var _data/*:?any*/;
if(CompObj) /*::CompObjP = */parse_compobj(CompObj);
if(options.bookProps && !options.bookSheets) WorkbookP = ({}/*:any*/);
else/*:: if(cfb instanceof CFBContainer) */ {
	var T = has_buf ? 'buffer' : 'array';
	if(WB && WB.content) WorkbookP = parse_workbook(WB.content, options);
	/* Quattro Pro 7-8 */
	else if((_data=CFB.find(cfb, 'PerfectOffice_MAIN')) && _data.content) WorkbookP = WK_.to_workbook(_data.content, (options.type = T, options));
	/* Quattro Pro 9 */
	else if((_data=CFB.find(cfb, 'NativeContent_MAIN')) && _data.content) WorkbookP = WK_.to_workbook(_data.content, (options.type = T, options));
	/* Works 4 for Mac */
	else if((_data=CFB.find(cfb, 'MN0')) && _data.content) throw new Error("Unsupported Works 4 for Mac file");
	else throw new Error("Cannot find Workbook stream");
	if(options.bookVBA && cfb.FullPaths && CFB.find(cfb, '/_VBA_PROJECT_CUR/VBA/dir')) WorkbookP.vbaraw = make_vba_xls(cfb);
}

var props = {};
if(cfb.FullPaths) parse_xls_props(/*::((*/cfb/*:: :any):CFBContainer)*/, props, options);

WorkbookP.Props = WorkbookP.Custprops = props; /* TODO: split up properties */
if(options.bookFiles) WorkbookP.cfb = cfb;
/*WorkbookP.CompObjP = CompObjP; // TODO: storage? */
return WorkbookP;
}


function write_xlscfb(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:CFBContainer*/ {
	var o = opts || {};
	var cfb = CFB.utils.cfb_new({root:"R"});
	var wbpath = "/Workbook";
	switch(o.bookType || "xls") {
		case "xls": o.bookType = "biff8";
		/* falls through */
		case "xla": if(!o.bookType) o.bookType = "xla";
		/* falls through */
		case "biff8": wbpath = "/Workbook"; o.biff = 8; break;
		case "biff5": wbpath = "/Book"; o.biff = 5; break;
		default: throw new Error("invalid type " + o.bookType + " for XLS CFB");
	}
	CFB.utils.cfb_add(cfb, wbpath, write_biff_buf(wb, o));
	if(o.biff == 8 && (wb.Props || wb.Custprops)) write_xls_props(wb, cfb);
	// TODO: SI, DSI, CO
	if(o.biff == 8 && wb.vbaraw) fill_vba_xls(cfb, CFB.read(wb.vbaraw, {type: typeof wb.vbaraw == "string" ? "binary" : "buffer"}));
	return cfb;
}
/* [MS-XLSB] 2.3 Record Enumeration */
var XLSBRecordEnum = {
	/*::[*/0x0000/*::]*/: { /* n:"BrtRowHdr", */ f:parse_BrtRowHdr },
	/*::[*/0x0001/*::]*/: { /* n:"BrtCellBlank", */ f:parse_BrtCellBlank },
	/*::[*/0x0002/*::]*/: { /* n:"BrtCellRk", */ f:parse_BrtCellRk },
	/*::[*/0x0003/*::]*/: { /* n:"BrtCellError", */ f:parse_BrtCellError },
	/*::[*/0x0004/*::]*/: { /* n:"BrtCellBool", */ f:parse_BrtCellBool },
	/*::[*/0x0005/*::]*/: { /* n:"BrtCellReal", */ f:parse_BrtCellReal },
	/*::[*/0x0006/*::]*/: { /* n:"BrtCellSt", */ f:parse_BrtCellSt },
	/*::[*/0x0007/*::]*/: { /* n:"BrtCellIsst", */ f:parse_BrtCellIsst },
	/*::[*/0x0008/*::]*/: { /* n:"BrtFmlaString", */ f:parse_BrtFmlaString },
	/*::[*/0x0009/*::]*/: { /* n:"BrtFmlaNum", */ f:parse_BrtFmlaNum },
	/*::[*/0x000A/*::]*/: { /* n:"BrtFmlaBool", */ f:parse_BrtFmlaBool },
	/*::[*/0x000B/*::]*/: { /* n:"BrtFmlaError", */ f:parse_BrtFmlaError },
	/*::[*/0x000C/*::]*/: { /* n:"BrtShortBlank", */ f:parse_BrtShortBlank },
	/*::[*/0x000D/*::]*/: { /* n:"BrtShortRk", */ f:parse_BrtShortRk },
	/*::[*/0x000E/*::]*/: { /* n:"BrtShortError", */ f:parse_BrtShortError },
	/*::[*/0x000F/*::]*/: { /* n:"BrtShortBool", */ f:parse_BrtShortBool },
	/*::[*/0x0010/*::]*/: { /* n:"BrtShortReal", */ f:parse_BrtShortReal },
	/*::[*/0x0011/*::]*/: { /* n:"BrtShortSt", */ f:parse_BrtShortSt },
	/*::[*/0x0012/*::]*/: { /* n:"BrtShortIsst", */ f:parse_BrtShortIsst },
	/*::[*/0x0013/*::]*/: { /* n:"BrtSSTItem", */ f:parse_RichStr },
	/*::[*/0x0014/*::]*/: { /* n:"BrtPCDIMissing" */ },
	/*::[*/0x0015/*::]*/: { /* n:"BrtPCDINumber" */ },
	/*::[*/0x0016/*::]*/: { /* n:"BrtPCDIBoolean" */ },
	/*::[*/0x0017/*::]*/: { /* n:"BrtPCDIError" */ },
	/*::[*/0x0018/*::]*/: { /* n:"BrtPCDIString" */ },
	/*::[*/0x0019/*::]*/: { /* n:"BrtPCDIDatetime" */ },
	/*::[*/0x001A/*::]*/: { /* n:"BrtPCDIIndex" */ },
	/*::[*/0x001B/*::]*/: { /* n:"BrtPCDIAMissing" */ },
	/*::[*/0x001C/*::]*/: { /* n:"BrtPCDIANumber" */ },
	/*::[*/0x001D/*::]*/: { /* n:"BrtPCDIABoolean" */ },
	/*::[*/0x001E/*::]*/: { /* n:"BrtPCDIAError" */ },
	/*::[*/0x001F/*::]*/: { /* n:"BrtPCDIAString" */ },
	/*::[*/0x0020/*::]*/: { /* n:"BrtPCDIADatetime" */ },
	/*::[*/0x0021/*::]*/: { /* n:"BrtPCRRecord" */ },
	/*::[*/0x0022/*::]*/: { /* n:"BrtPCRRecordDt" */ },
	/*::[*/0x0023/*::]*/: { /* n:"BrtFRTBegin", */ T:1 },
	/*::[*/0x0024/*::]*/: { /* n:"BrtFRTEnd", */ T:-1 },
	/*::[*/0x0025/*::]*/: { /* n:"BrtACBegin", */ T:1 },
	/*::[*/0x0026/*::]*/: { /* n:"BrtACEnd", */ T:-1 },
	/*::[*/0x0027/*::]*/: { /* n:"BrtName", */ f:parse_BrtName },
	/*::[*/0x0028/*::]*/: { /* n:"BrtIndexRowBlock" */ },
	/*::[*/0x002A/*::]*/: { /* n:"BrtIndexBlock" */ },
	/*::[*/0x002B/*::]*/: { /* n:"BrtFont", */ f:parse_BrtFont },
	/*::[*/0x002C/*::]*/: { /* n:"BrtFmt", */ f:parse_BrtFmt },
	/*::[*/0x002D/*::]*/: { /* n:"BrtFill", */ f:parse_BrtFill },
	/*::[*/0x002E/*::]*/: { /* n:"BrtBorder", */ f:parse_BrtBorder },
	/*::[*/0x002F/*::]*/: { /* n:"BrtXF", */ f:parse_BrtXF },
	/*::[*/0x0030/*::]*/: { /* n:"BrtStyle" */ },
	/*::[*/0x0031/*::]*/: { /* n:"BrtCellMeta", */ f:parse_Int32LE },
	/*::[*/0x0032/*::]*/: { /* n:"BrtValueMeta" */ },
	/*::[*/0x0033/*::]*/: { /* n:"BrtMdb" */ f:parse_BrtMdb },
	/*::[*/0x0034/*::]*/: { /* n:"BrtBeginFmd", */ T:1 },
	/*::[*/0x0035/*::]*/: { /* n:"BrtEndFmd", */ T:-1 },
	/*::[*/0x0036/*::]*/: { /* n:"BrtBeginMdx", */ T:1 },
	/*::[*/0x0037/*::]*/: { /* n:"BrtEndMdx", */ T:-1 },
	/*::[*/0x0038/*::]*/: { /* n:"BrtBeginMdxTuple", */ T:1 },
	/*::[*/0x0039/*::]*/: { /* n:"BrtEndMdxTuple", */ T:-1 },
	/*::[*/0x003A/*::]*/: { /* n:"BrtMdxMbrIstr" */ },
	/*::[*/0x003B/*::]*/: { /* n:"BrtStr" */ },
	/*::[*/0x003C/*::]*/: { /* n:"BrtColInfo", */ f:parse_ColInfo },
	/*::[*/0x003E/*::]*/: { /* n:"BrtCellRString", */ f:parse_BrtCellRString },
	/*::[*/0x003F/*::]*/: { /* n:"BrtCalcChainItem$", */ f:parse_BrtCalcChainItem$ },
	/*::[*/0x0040/*::]*/: { /* n:"BrtDVal", */ f:parse_BrtDVal },
	/*::[*/0x0041/*::]*/: { /* n:"BrtSxvcellNum" */ },
	/*::[*/0x0042/*::]*/: { /* n:"BrtSxvcellStr" */ },
	/*::[*/0x0043/*::]*/: { /* n:"BrtSxvcellBool" */ },
	/*::[*/0x0044/*::]*/: { /* n:"BrtSxvcellErr" */ },
	/*::[*/0x0045/*::]*/: { /* n:"BrtSxvcellDate" */ },
	/*::[*/0x0046/*::]*/: { /* n:"BrtSxvcellNil" */ },
	/*::[*/0x0080/*::]*/: { /* n:"BrtFileVersion" */ },
	/*::[*/0x0081/*::]*/: { /* n:"BrtBeginSheet", */ T:1 },
	/*::[*/0x0082/*::]*/: { /* n:"BrtEndSheet", */ T:-1 },
	/*::[*/0x0083/*::]*/: { /* n:"BrtBeginBook", */ T:1, f:parsenoop, p:0 },
	/*::[*/0x0084/*::]*/: { /* n:"BrtEndBook", */ T:-1 },
	/*::[*/0x0085/*::]*/: { /* n:"BrtBeginWsViews", */ T:1 },
	/*::[*/0x0086/*::]*/: { /* n:"BrtEndWsViews", */ T:-1 },
	/*::[*/0x0087/*::]*/: { /* n:"BrtBeginBookViews", */ T:1 },
	/*::[*/0x0088/*::]*/: { /* n:"BrtEndBookViews", */ T:-1 },
	/*::[*/0x0089/*::]*/: { /* n:"BrtBeginWsView", */ T:1, f:parse_BrtBeginWsView },
	/*::[*/0x008A/*::]*/: { /* n:"BrtEndWsView", */ T:-1 },
	/*::[*/0x008B/*::]*/: { /* n:"BrtBeginCsViews", */ T:1 },
	/*::[*/0x008C/*::]*/: { /* n:"BrtEndCsViews", */ T:-1 },
	/*::[*/0x008D/*::]*/: { /* n:"BrtBeginCsView", */ T:1 },
	/*::[*/0x008E/*::]*/: { /* n:"BrtEndCsView", */ T:-1 },
	/*::[*/0x008F/*::]*/: { /* n:"BrtBeginBundleShs", */ T:1 },
	/*::[*/0x0090/*::]*/: { /* n:"BrtEndBundleShs", */ T:-1 },
	/*::[*/0x0091/*::]*/: { /* n:"BrtBeginSheetData", */ T:1 },
	/*::[*/0x0092/*::]*/: { /* n:"BrtEndSheetData", */ T:-1 },
	/*::[*/0x0093/*::]*/: { /* n:"BrtWsProp", */ f:parse_BrtWsProp },
	/*::[*/0x0094/*::]*/: { /* n:"BrtWsDim", */ f:parse_BrtWsDim, p:16 },
	/*::[*/0x0097/*::]*/: { /* n:"BrtPane", */ f:parse_BrtPane },
	/*::[*/0x0098/*::]*/: { /* n:"BrtSel" */ },
	/*::[*/0x0099/*::]*/: { /* n:"BrtWbProp", */ f:parse_BrtWbProp },
	/*::[*/0x009A/*::]*/: { /* n:"BrtWbFactoid" */ },
	/*::[*/0x009B/*::]*/: { /* n:"BrtFileRecover" */ },
	/*::[*/0x009C/*::]*/: { /* n:"BrtBundleSh", */ f:parse_BrtBundleSh },
	/*::[*/0x009D/*::]*/: { /* n:"BrtCalcProp" */ },
	/*::[*/0x009E/*::]*/: { /* n:"BrtBookView" */ },
	/*::[*/0x009F/*::]*/: { /* n:"BrtBeginSst", */ T:1, f:parse_BrtBeginSst },
	/*::[*/0x00A0/*::]*/: { /* n:"BrtEndSst", */ T:-1 },
	/*::[*/0x00A1/*::]*/: { /* n:"BrtBeginAFilter", */ T:1, f:parse_UncheckedRfX },
	/*::[*/0x00A2/*::]*/: { /* n:"BrtEndAFilter", */ T:-1 },
	/*::[*/0x00A3/*::]*/: { /* n:"BrtBeginFilterColumn", */ T:1 },
	/*::[*/0x00A4/*::]*/: { /* n:"BrtEndFilterColumn", */ T:-1 },
	/*::[*/0x00A5/*::]*/: { /* n:"BrtBeginFilters", */ T:1 },
	/*::[*/0x00A6/*::]*/: { /* n:"BrtEndFilters", */ T:-1 },
	/*::[*/0x00A7/*::]*/: { /* n:"BrtFilter" */ },
	/*::[*/0x00A8/*::]*/: { /* n:"BrtColorFilter" */ },
	/*::[*/0x00A9/*::]*/: { /* n:"BrtIconFilter" */ },
	/*::[*/0x00AA/*::]*/: { /* n:"BrtTop10Filter" */ },
	/*::[*/0x00AB/*::]*/: { /* n:"BrtDynamicFilter" */ },
	/*::[*/0x00AC/*::]*/: { /* n:"BrtBeginCustomFilters", */ T:1 },
	/*::[*/0x00AD/*::]*/: { /* n:"BrtEndCustomFilters", */ T:-1 },
	/*::[*/0x00AE/*::]*/: { /* n:"BrtCustomFilter" */ },
	/*::[*/0x00AF/*::]*/: { /* n:"BrtAFilterDateGroupItem" */ },
	/*::[*/0x00B0/*::]*/: { /* n:"BrtMergeCell", */ f:parse_BrtMergeCell },
	/*::[*/0x00B1/*::]*/: { /* n:"BrtBeginMergeCells", */ T:1 },
	/*::[*/0x00B2/*::]*/: { /* n:"BrtEndMergeCells", */ T:-1 },
	/*::[*/0x00B3/*::]*/: { /* n:"BrtBeginPivotCacheDef", */ T:1 },
	/*::[*/0x00B4/*::]*/: { /* n:"BrtEndPivotCacheDef", */ T:-1 },
	/*::[*/0x00B5/*::]*/: { /* n:"BrtBeginPCDFields", */ T:1 },
	/*::[*/0x00B6/*::]*/: { /* n:"BrtEndPCDFields", */ T:-1 },
	/*::[*/0x00B7/*::]*/: { /* n:"BrtBeginPCDField", */ T:1 },
	/*::[*/0x00B8/*::]*/: { /* n:"BrtEndPCDField", */ T:-1 },
	/*::[*/0x00B9/*::]*/: { /* n:"BrtBeginPCDSource", */ T:1 },
	/*::[*/0x00BA/*::]*/: { /* n:"BrtEndPCDSource", */ T:-1 },
	/*::[*/0x00BB/*::]*/: { /* n:"BrtBeginPCDSRange", */ T:1 },
	/*::[*/0x00BC/*::]*/: { /* n:"BrtEndPCDSRange", */ T:-1 },
	/*::[*/0x00BD/*::]*/: { /* n:"BrtBeginPCDFAtbl", */ T:1 },
	/*::[*/0x00BE/*::]*/: { /* n:"BrtEndPCDFAtbl", */ T:-1 },
	/*::[*/0x00BF/*::]*/: { /* n:"BrtBeginPCDIRun", */ T:1 },
	/*::[*/0x00C0/*::]*/: { /* n:"BrtEndPCDIRun", */ T:-1 },
	/*::[*/0x00C1/*::]*/: { /* n:"BrtBeginPivotCacheRecords", */ T:1 },
	/*::[*/0x00C2/*::]*/: { /* n:"BrtEndPivotCacheRecords", */ T:-1 },
	/*::[*/0x00C3/*::]*/: { /* n:"BrtBeginPCDHierarchies", */ T:1 },
	/*::[*/0x00C4/*::]*/: { /* n:"BrtEndPCDHierarchies", */ T:-1 },
	/*::[*/0x00C5/*::]*/: { /* n:"BrtBeginPCDHierarchy", */ T:1 },
	/*::[*/0x00C6/*::]*/: { /* n:"BrtEndPCDHierarchy", */ T:-1 },
	/*::[*/0x00C7/*::]*/: { /* n:"BrtBeginPCDHFieldsUsage", */ T:1 },
	/*::[*/0x00C8/*::]*/: { /* n:"BrtEndPCDHFieldsUsage", */ T:-1 },
	/*::[*/0x00C9/*::]*/: { /* n:"BrtBeginExtConnection", */ T:1 },
	/*::[*/0x00CA/*::]*/: { /* n:"BrtEndExtConnection", */ T:-1 },
	/*::[*/0x00CB/*::]*/: { /* n:"BrtBeginECDbProps", */ T:1 },
	/*::[*/0x00CC/*::]*/: { /* n:"BrtEndECDbProps", */ T:-1 },
	/*::[*/0x00CD/*::]*/: { /* n:"BrtBeginECOlapProps", */ T:1 },
	/*::[*/0x00CE/*::]*/: { /* n:"BrtEndECOlapProps", */ T:-1 },
	/*::[*/0x00CF/*::]*/: { /* n:"BrtBeginPCDSConsol", */ T:1 },
	/*::[*/0x00D0/*::]*/: { /* n:"BrtEndPCDSConsol", */ T:-1 },
	/*::[*/0x00D1/*::]*/: { /* n:"BrtBeginPCDSCPages", */ T:1 },
	/*::[*/0x00D2/*::]*/: { /* n:"BrtEndPCDSCPages", */ T:-1 },
	/*::[*/0x00D3/*::]*/: { /* n:"BrtBeginPCDSCPage", */ T:1 },
	/*::[*/0x00D4/*::]*/: { /* n:"BrtEndPCDSCPage", */ T:-1 },
	/*::[*/0x00D5/*::]*/: { /* n:"BrtBeginPCDSCPItem", */ T:1 },
	/*::[*/0x00D6/*::]*/: { /* n:"BrtEndPCDSCPItem", */ T:-1 },
	/*::[*/0x00D7/*::]*/: { /* n:"BrtBeginPCDSCSets", */ T:1 },
	/*::[*/0x00D8/*::]*/: { /* n:"BrtEndPCDSCSets", */ T:-1 },
	/*::[*/0x00D9/*::]*/: { /* n:"BrtBeginPCDSCSet", */ T:1 },
	/*::[*/0x00DA/*::]*/: { /* n:"BrtEndPCDSCSet", */ T:-1 },
	/*::[*/0x00DB/*::]*/: { /* n:"BrtBeginPCDFGroup", */ T:1 },
	/*::[*/0x00DC/*::]*/: { /* n:"BrtEndPCDFGroup", */ T:-1 },
	/*::[*/0x00DD/*::]*/: { /* n:"BrtBeginPCDFGItems", */ T:1 },
	/*::[*/0x00DE/*::]*/: { /* n:"BrtEndPCDFGItems", */ T:-1 },
	/*::[*/0x00DF/*::]*/: { /* n:"BrtBeginPCDFGRange", */ T:1 },
	/*::[*/0x00E0/*::]*/: { /* n:"BrtEndPCDFGRange", */ T:-1 },
	/*::[*/0x00E1/*::]*/: { /* n:"BrtBeginPCDFGDiscrete", */ T:1 },
	/*::[*/0x00E2/*::]*/: { /* n:"BrtEndPCDFGDiscrete", */ T:-1 },
	/*::[*/0x00E3/*::]*/: { /* n:"BrtBeginPCDSDTupleCache", */ T:1 },
	/*::[*/0x00E4/*::]*/: { /* n:"BrtEndPCDSDTupleCache", */ T:-1 },
	/*::[*/0x00E5/*::]*/: { /* n:"BrtBeginPCDSDTCEntries", */ T:1 },
	/*::[*/0x00E6/*::]*/: { /* n:"BrtEndPCDSDTCEntries", */ T:-1 },
	/*::[*/0x00E7/*::]*/: { /* n:"BrtBeginPCDSDTCEMembers", */ T:1 },
	/*::[*/0x00E8/*::]*/: { /* n:"BrtEndPCDSDTCEMembers", */ T:-1 },
	/*::[*/0x00E9/*::]*/: { /* n:"BrtBeginPCDSDTCEMember", */ T:1 },
	/*::[*/0x00EA/*::]*/: { /* n:"BrtEndPCDSDTCEMember", */ T:-1 },
	/*::[*/0x00EB/*::]*/: { /* n:"BrtBeginPCDSDTCQueries", */ T:1 },
	/*::[*/0x00EC/*::]*/: { /* n:"BrtEndPCDSDTCQueries", */ T:-1 },
	/*::[*/0x00ED/*::]*/: { /* n:"BrtBeginPCDSDTCQuery", */ T:1 },
	/*::[*/0x00EE/*::]*/: { /* n:"BrtEndPCDSDTCQuery", */ T:-1 },
	/*::[*/0x00EF/*::]*/: { /* n:"BrtBeginPCDSDTCSets", */ T:1 },
	/*::[*/0x00F0/*::]*/: { /* n:"BrtEndPCDSDTCSets", */ T:-1 },
	/*::[*/0x00F1/*::]*/: { /* n:"BrtBeginPCDSDTCSet", */ T:1 },
	/*::[*/0x00F2/*::]*/: { /* n:"BrtEndPCDSDTCSet", */ T:-1 },
	/*::[*/0x00F3/*::]*/: { /* n:"BrtBeginPCDCalcItems", */ T:1 },
	/*::[*/0x00F4/*::]*/: { /* n:"BrtEndPCDCalcItems", */ T:-1 },
	/*::[*/0x00F5/*::]*/: { /* n:"BrtBeginPCDCalcItem", */ T:1 },
	/*::[*/0x00F6/*::]*/: { /* n:"BrtEndPCDCalcItem", */ T:-1 },
	/*::[*/0x00F7/*::]*/: { /* n:"BrtBeginPRule", */ T:1 },
	/*::[*/0x00F8/*::]*/: { /* n:"BrtEndPRule", */ T:-1 },
	/*::[*/0x00F9/*::]*/: { /* n:"BrtBeginPRFilters", */ T:1 },
	/*::[*/0x00FA/*::]*/: { /* n:"BrtEndPRFilters", */ T:-1 },
	/*::[*/0x00FB/*::]*/: { /* n:"BrtBeginPRFilter", */ T:1 },
	/*::[*/0x00FC/*::]*/: { /* n:"BrtEndPRFilter", */ T:-1 },
	/*::[*/0x00FD/*::]*/: { /* n:"BrtBeginPNames", */ T:1 },
	/*::[*/0x00FE/*::]*/: { /* n:"BrtEndPNames", */ T:-1 },
	/*::[*/0x00FF/*::]*/: { /* n:"BrtBeginPName", */ T:1 },
	/*::[*/0x0100/*::]*/: { /* n:"BrtEndPName", */ T:-1 },
	/*::[*/0x0101/*::]*/: { /* n:"BrtBeginPNPairs", */ T:1 },
	/*::[*/0x0102/*::]*/: { /* n:"BrtEndPNPairs", */ T:-1 },
	/*::[*/0x0103/*::]*/: { /* n:"BrtBeginPNPair", */ T:1 },
	/*::[*/0x0104/*::]*/: { /* n:"BrtEndPNPair", */ T:-1 },
	/*::[*/0x0105/*::]*/: { /* n:"BrtBeginECWebProps", */ T:1 },
	/*::[*/0x0106/*::]*/: { /* n:"BrtEndECWebProps", */ T:-1 },
	/*::[*/0x0107/*::]*/: { /* n:"BrtBeginEcWpTables", */ T:1 },
	/*::[*/0x0108/*::]*/: { /* n:"BrtEndECWPTables", */ T:-1 },
	/*::[*/0x0109/*::]*/: { /* n:"BrtBeginECParams", */ T:1 },
	/*::[*/0x010A/*::]*/: { /* n:"BrtEndECParams", */ T:-1 },
	/*::[*/0x010B/*::]*/: { /* n:"BrtBeginECParam", */ T:1 },
	/*::[*/0x010C/*::]*/: { /* n:"BrtEndECParam", */ T:-1 },
	/*::[*/0x010D/*::]*/: { /* n:"BrtBeginPCDKPIs", */ T:1 },
	/*::[*/0x010E/*::]*/: { /* n:"BrtEndPCDKPIs", */ T:-1 },
	/*::[*/0x010F/*::]*/: { /* n:"BrtBeginPCDKPI", */ T:1 },
	/*::[*/0x0110/*::]*/: { /* n:"BrtEndPCDKPI", */ T:-1 },
	/*::[*/0x0111/*::]*/: { /* n:"BrtBeginDims", */ T:1 },
	/*::[*/0x0112/*::]*/: { /* n:"BrtEndDims", */ T:-1 },
	/*::[*/0x0113/*::]*/: { /* n:"BrtBeginDim", */ T:1 },
	/*::[*/0x0114/*::]*/: { /* n:"BrtEndDim", */ T:-1 },
	/*::[*/0x0115/*::]*/: { /* n:"BrtIndexPartEnd" */ },
	/*::[*/0x0116/*::]*/: { /* n:"BrtBeginStyleSheet", */ T:1 },
	/*::[*/0x0117/*::]*/: { /* n:"BrtEndStyleSheet", */ T:-1 },
	/*::[*/0x0118/*::]*/: { /* n:"BrtBeginSXView", */ T:1 },
	/*::[*/0x0119/*::]*/: { /* n:"BrtEndSXVI", */ T:-1 },
	/*::[*/0x011A/*::]*/: { /* n:"BrtBeginSXVI", */ T:1 },
	/*::[*/0x011B/*::]*/: { /* n:"BrtBeginSXVIs", */ T:1 },
	/*::[*/0x011C/*::]*/: { /* n:"BrtEndSXVIs", */ T:-1 },
	/*::[*/0x011D/*::]*/: { /* n:"BrtBeginSXVD", */ T:1 },
	/*::[*/0x011E/*::]*/: { /* n:"BrtEndSXVD", */ T:-1 },
	/*::[*/0x011F/*::]*/: { /* n:"BrtBeginSXVDs", */ T:1 },
	/*::[*/0x0120/*::]*/: { /* n:"BrtEndSXVDs", */ T:-1 },
	/*::[*/0x0121/*::]*/: { /* n:"BrtBeginSXPI", */ T:1 },
	/*::[*/0x0122/*::]*/: { /* n:"BrtEndSXPI", */ T:-1 },
	/*::[*/0x0123/*::]*/: { /* n:"BrtBeginSXPIs", */ T:1 },
	/*::[*/0x0124/*::]*/: { /* n:"BrtEndSXPIs", */ T:-1 },
	/*::[*/0x0125/*::]*/: { /* n:"BrtBeginSXDI", */ T:1 },
	/*::[*/0x0126/*::]*/: { /* n:"BrtEndSXDI", */ T:-1 },
	/*::[*/0x0127/*::]*/: { /* n:"BrtBeginSXDIs", */ T:1 },
	/*::[*/0x0128/*::]*/: { /* n:"BrtEndSXDIs", */ T:-1 },
	/*::[*/0x0129/*::]*/: { /* n:"BrtBeginSXLI", */ T:1 },
	/*::[*/0x012A/*::]*/: { /* n:"BrtEndSXLI", */ T:-1 },
	/*::[*/0x012B/*::]*/: { /* n:"BrtBeginSXLIRws", */ T:1 },
	/*::[*/0x012C/*::]*/: { /* n:"BrtEndSXLIRws", */ T:-1 },
	/*::[*/0x012D/*::]*/: { /* n:"BrtBeginSXLICols", */ T:1 },
	/*::[*/0x012E/*::]*/: { /* n:"BrtEndSXLICols", */ T:-1 },
	/*::[*/0x012F/*::]*/: { /* n:"BrtBeginSXFormat", */ T:1 },
	/*::[*/0x0130/*::]*/: { /* n:"BrtEndSXFormat", */ T:-1 },
	/*::[*/0x0131/*::]*/: { /* n:"BrtBeginSXFormats", */ T:1 },
	/*::[*/0x0132/*::]*/: { /* n:"BrtEndSxFormats", */ T:-1 },
	/*::[*/0x0133/*::]*/: { /* n:"BrtBeginSxSelect", */ T:1 },
	/*::[*/0x0134/*::]*/: { /* n:"BrtEndSxSelect", */ T:-1 },
	/*::[*/0x0135/*::]*/: { /* n:"BrtBeginISXVDRws", */ T:1 },
	/*::[*/0x0136/*::]*/: { /* n:"BrtEndISXVDRws", */ T:-1 },
	/*::[*/0x0137/*::]*/: { /* n:"BrtBeginISXVDCols", */ T:1 },
	/*::[*/0x0138/*::]*/: { /* n:"BrtEndISXVDCols", */ T:-1 },
	/*::[*/0x0139/*::]*/: { /* n:"BrtEndSXLocation", */ T:-1 },
	/*::[*/0x013A/*::]*/: { /* n:"BrtBeginSXLocation", */ T:1 },
	/*::[*/0x013B/*::]*/: { /* n:"BrtEndSXView", */ T:-1 },
	/*::[*/0x013C/*::]*/: { /* n:"BrtBeginSXTHs", */ T:1 },
	/*::[*/0x013D/*::]*/: { /* n:"BrtEndSXTHs", */ T:-1 },
	/*::[*/0x013E/*::]*/: { /* n:"BrtBeginSXTH", */ T:1 },
	/*::[*/0x013F/*::]*/: { /* n:"BrtEndSXTH", */ T:-1 },
	/*::[*/0x0140/*::]*/: { /* n:"BrtBeginISXTHRws", */ T:1 },
	/*::[*/0x0141/*::]*/: { /* n:"BrtEndISXTHRws", */ T:-1 },
	/*::[*/0x0142/*::]*/: { /* n:"BrtBeginISXTHCols", */ T:1 },
	/*::[*/0x0143/*::]*/: { /* n:"BrtEndISXTHCols", */ T:-1 },
	/*::[*/0x0144/*::]*/: { /* n:"BrtBeginSXTDMPS", */ T:1 },
	/*::[*/0x0145/*::]*/: { /* n:"BrtEndSXTDMPs", */ T:-1 },
	/*::[*/0x0146/*::]*/: { /* n:"BrtBeginSXTDMP", */ T:1 },
	/*::[*/0x0147/*::]*/: { /* n:"BrtEndSXTDMP", */ T:-1 },
	/*::[*/0x0148/*::]*/: { /* n:"BrtBeginSXTHItems", */ T:1 },
	/*::[*/0x0149/*::]*/: { /* n:"BrtEndSXTHItems", */ T:-1 },
	/*::[*/0x014A/*::]*/: { /* n:"BrtBeginSXTHItem", */ T:1 },
	/*::[*/0x014B/*::]*/: { /* n:"BrtEndSXTHItem", */ T:-1 },
	/*::[*/0x014C/*::]*/: { /* n:"BrtBeginMetadata", */ T:1 },
	/*::[*/0x014D/*::]*/: { /* n:"BrtEndMetadata", */ T:-1 },
	/*::[*/0x014E/*::]*/: { /* n:"BrtBeginEsmdtinfo", */ T:1 },
	/*::[*/0x014F/*::]*/: { /* n:"BrtMdtinfo", */ f:parse_BrtMdtinfo },
	/*::[*/0x0150/*::]*/: { /* n:"BrtEndEsmdtinfo", */ T:-1 },
	/*::[*/0x0151/*::]*/: { /* n:"BrtBeginEsmdb", */ f:parse_BrtBeginEsmdb, T:1 },
	/*::[*/0x0152/*::]*/: { /* n:"BrtEndEsmdb", */ T:-1 },
	/*::[*/0x0153/*::]*/: { /* n:"BrtBeginEsfmd", */ T:1 },
	/*::[*/0x0154/*::]*/: { /* n:"BrtEndEsfmd", */ T:-1 },
	/*::[*/0x0155/*::]*/: { /* n:"BrtBeginSingleCells", */ T:1 },
	/*::[*/0x0156/*::]*/: { /* n:"BrtEndSingleCells", */ T:-1 },
	/*::[*/0x0157/*::]*/: { /* n:"BrtBeginList", */ T:1 },
	/*::[*/0x0158/*::]*/: { /* n:"BrtEndList", */ T:-1 },
	/*::[*/0x0159/*::]*/: { /* n:"BrtBeginListCols", */ T:1 },
	/*::[*/0x015A/*::]*/: { /* n:"BrtEndListCols", */ T:-1 },
	/*::[*/0x015B/*::]*/: { /* n:"BrtBeginListCol", */ T:1 },
	/*::[*/0x015C/*::]*/: { /* n:"BrtEndListCol", */ T:-1 },
	/*::[*/0x015D/*::]*/: { /* n:"BrtBeginListXmlCPr", */ T:1 },
	/*::[*/0x015E/*::]*/: { /* n:"BrtEndListXmlCPr", */ T:-1 },
	/*::[*/0x015F/*::]*/: { /* n:"BrtListCCFmla" */ },
	/*::[*/0x0160/*::]*/: { /* n:"BrtListTrFmla" */ },
	/*::[*/0x0161/*::]*/: { /* n:"BrtBeginExternals", */ T:1 },
	/*::[*/0x0162/*::]*/: { /* n:"BrtEndExternals", */ T:-1 },
	/*::[*/0x0163/*::]*/: { /* n:"BrtSupBookSrc", */ f:parse_RelID},
	/*::[*/0x0165/*::]*/: { /* n:"BrtSupSelf" */ },
	/*::[*/0x0166/*::]*/: { /* n:"BrtSupSame" */ },
	/*::[*/0x0167/*::]*/: { /* n:"BrtSupTabs" */ },
	/*::[*/0x0168/*::]*/: { /* n:"BrtBeginSupBook", */ T:1 },
	/*::[*/0x0169/*::]*/: { /* n:"BrtPlaceholderName" */ },
	/*::[*/0x016A/*::]*/: { /* n:"BrtExternSheet", */ f:parse_ExternSheet },
	/*::[*/0x016B/*::]*/: { /* n:"BrtExternTableStart" */ },
	/*::[*/0x016C/*::]*/: { /* n:"BrtExternTableEnd" */ },
	/*::[*/0x016E/*::]*/: { /* n:"BrtExternRowHdr" */ },
	/*::[*/0x016F/*::]*/: { /* n:"BrtExternCellBlank" */ },
	/*::[*/0x0170/*::]*/: { /* n:"BrtExternCellReal" */ },
	/*::[*/0x0171/*::]*/: { /* n:"BrtExternCellBool" */ },
	/*::[*/0x0172/*::]*/: { /* n:"BrtExternCellError" */ },
	/*::[*/0x0173/*::]*/: { /* n:"BrtExternCellString" */ },
	/*::[*/0x0174/*::]*/: { /* n:"BrtBeginEsmdx", */ T:1 },
	/*::[*/0x0175/*::]*/: { /* n:"BrtEndEsmdx", */ T:-1 },
	/*::[*/0x0176/*::]*/: { /* n:"BrtBeginMdxSet", */ T:1 },
	/*::[*/0x0177/*::]*/: { /* n:"BrtEndMdxSet", */ T:-1 },
	/*::[*/0x0178/*::]*/: { /* n:"BrtBeginMdxMbrProp", */ T:1 },
	/*::[*/0x0179/*::]*/: { /* n:"BrtEndMdxMbrProp", */ T:-1 },
	/*::[*/0x017A/*::]*/: { /* n:"BrtBeginMdxKPI", */ T:1 },
	/*::[*/0x017B/*::]*/: { /* n:"BrtEndMdxKPI", */ T:-1 },
	/*::[*/0x017C/*::]*/: { /* n:"BrtBeginEsstr", */ T:1 },
	/*::[*/0x017D/*::]*/: { /* n:"BrtEndEsstr", */ T:-1 },
	/*::[*/0x017E/*::]*/: { /* n:"BrtBeginPRFItem", */ T:1 },
	/*::[*/0x017F/*::]*/: { /* n:"BrtEndPRFItem", */ T:-1 },
	/*::[*/0x0180/*::]*/: { /* n:"BrtBeginPivotCacheIDs", */ T:1 },
	/*::[*/0x0181/*::]*/: { /* n:"BrtEndPivotCacheIDs", */ T:-1 },
	/*::[*/0x0182/*::]*/: { /* n:"BrtBeginPivotCacheID", */ T:1 },
	/*::[*/0x0183/*::]*/: { /* n:"BrtEndPivotCacheID", */ T:-1 },
	/*::[*/0x0184/*::]*/: { /* n:"BrtBeginISXVIs", */ T:1 },
	/*::[*/0x0185/*::]*/: { /* n:"BrtEndISXVIs", */ T:-1 },
	/*::[*/0x0186/*::]*/: { /* n:"BrtBeginColInfos", */ T:1 },
	/*::[*/0x0187/*::]*/: { /* n:"BrtEndColInfos", */ T:-1 },
	/*::[*/0x0188/*::]*/: { /* n:"BrtBeginRwBrk", */ T:1 },
	/*::[*/0x0189/*::]*/: { /* n:"BrtEndRwBrk", */ T:-1 },
	/*::[*/0x018A/*::]*/: { /* n:"BrtBeginColBrk", */ T:1 },
	/*::[*/0x018B/*::]*/: { /* n:"BrtEndColBrk", */ T:-1 },
	/*::[*/0x018C/*::]*/: { /* n:"BrtBrk" */ },
	/*::[*/0x018D/*::]*/: { /* n:"BrtUserBookView" */ },
	/*::[*/0x018E/*::]*/: { /* n:"BrtInfo" */ },
	/*::[*/0x018F/*::]*/: { /* n:"BrtCUsr" */ },
	/*::[*/0x0190/*::]*/: { /* n:"BrtUsr" */ },
	/*::[*/0x0191/*::]*/: { /* n:"BrtBeginUsers", */ T:1 },
	/*::[*/0x0193/*::]*/: { /* n:"BrtEOF" */ },
	/*::[*/0x0194/*::]*/: { /* n:"BrtUCR" */ },
	/*::[*/0x0195/*::]*/: { /* n:"BrtRRInsDel" */ },
	/*::[*/0x0196/*::]*/: { /* n:"BrtRREndInsDel" */ },
	/*::[*/0x0197/*::]*/: { /* n:"BrtRRMove" */ },
	/*::[*/0x0198/*::]*/: { /* n:"BrtRREndMove" */ },
	/*::[*/0x0199/*::]*/: { /* n:"BrtRRChgCell" */ },
	/*::[*/0x019A/*::]*/: { /* n:"BrtRREndChgCell" */ },
	/*::[*/0x019B/*::]*/: { /* n:"BrtRRHeader" */ },
	/*::[*/0x019C/*::]*/: { /* n:"BrtRRUserView" */ },
	/*::[*/0x019D/*::]*/: { /* n:"BrtRRRenSheet" */ },
	/*::[*/0x019E/*::]*/: { /* n:"BrtRRInsertSh" */ },
	/*::[*/0x019F/*::]*/: { /* n:"BrtRRDefName" */ },
	/*::[*/0x01A0/*::]*/: { /* n:"BrtRRNote" */ },
	/*::[*/0x01A1/*::]*/: { /* n:"BrtRRConflict" */ },
	/*::[*/0x01A2/*::]*/: { /* n:"BrtRRTQSIF" */ },
	/*::[*/0x01A3/*::]*/: { /* n:"BrtRRFormat" */ },
	/*::[*/0x01A4/*::]*/: { /* n:"BrtRREndFormat" */ },
	/*::[*/0x01A5/*::]*/: { /* n:"BrtRRAutoFmt" */ },
	/*::[*/0x01A6/*::]*/: { /* n:"BrtBeginUserShViews", */ T:1 },
	/*::[*/0x01A7/*::]*/: { /* n:"BrtBeginUserShView", */ T:1 },
	/*::[*/0x01A8/*::]*/: { /* n:"BrtEndUserShView", */ T:-1 },
	/*::[*/0x01A9/*::]*/: { /* n:"BrtEndUserShViews", */ T:-1 },
	/*::[*/0x01AA/*::]*/: { /* n:"BrtArrFmla", */ f:parse_BrtArrFmla },
	/*::[*/0x01AB/*::]*/: { /* n:"BrtShrFmla", */ f:parse_BrtShrFmla },
	/*::[*/0x01AC/*::]*/: { /* n:"BrtTable" */ },
	/*::[*/0x01AD/*::]*/: { /* n:"BrtBeginExtConnections", */ T:1 },
	/*::[*/0x01AE/*::]*/: { /* n:"BrtEndExtConnections", */ T:-1 },
	/*::[*/0x01AF/*::]*/: { /* n:"BrtBeginPCDCalcMems", */ T:1 },
	/*::[*/0x01B0/*::]*/: { /* n:"BrtEndPCDCalcMems", */ T:-1 },
	/*::[*/0x01B1/*::]*/: { /* n:"BrtBeginPCDCalcMem", */ T:1 },
	/*::[*/0x01B2/*::]*/: { /* n:"BrtEndPCDCalcMem", */ T:-1 },
	/*::[*/0x01B3/*::]*/: { /* n:"BrtBeginPCDHGLevels", */ T:1 },
	/*::[*/0x01B4/*::]*/: { /* n:"BrtEndPCDHGLevels", */ T:-1 },
	/*::[*/0x01B5/*::]*/: { /* n:"BrtBeginPCDHGLevel", */ T:1 },
	/*::[*/0x01B6/*::]*/: { /* n:"BrtEndPCDHGLevel", */ T:-1 },
	/*::[*/0x01B7/*::]*/: { /* n:"BrtBeginPCDHGLGroups", */ T:1 },
	/*::[*/0x01B8/*::]*/: { /* n:"BrtEndPCDHGLGroups", */ T:-1 },
	/*::[*/0x01B9/*::]*/: { /* n:"BrtBeginPCDHGLGroup", */ T:1 },
	/*::[*/0x01BA/*::]*/: { /* n:"BrtEndPCDHGLGroup", */ T:-1 },
	/*::[*/0x01BB/*::]*/: { /* n:"BrtBeginPCDHGLGMembers", */ T:1 },
	/*::[*/0x01BC/*::]*/: { /* n:"BrtEndPCDHGLGMembers", */ T:-1 },
	/*::[*/0x01BD/*::]*/: { /* n:"BrtBeginPCDHGLGMember", */ T:1 },
	/*::[*/0x01BE/*::]*/: { /* n:"BrtEndPCDHGLGMember", */ T:-1 },
	/*::[*/0x01BF/*::]*/: { /* n:"BrtBeginQSI", */ T:1 },
	/*::[*/0x01C0/*::]*/: { /* n:"BrtEndQSI", */ T:-1 },
	/*::[*/0x01C1/*::]*/: { /* n:"BrtBeginQSIR", */ T:1 },
	/*::[*/0x01C2/*::]*/: { /* n:"BrtEndQSIR", */ T:-1 },
	/*::[*/0x01C3/*::]*/: { /* n:"BrtBeginDeletedNames", */ T:1 },
	/*::[*/0x01C4/*::]*/: { /* n:"BrtEndDeletedNames", */ T:-1 },
	/*::[*/0x01C5/*::]*/: { /* n:"BrtBeginDeletedName", */ T:1 },
	/*::[*/0x01C6/*::]*/: { /* n:"BrtEndDeletedName", */ T:-1 },
	/*::[*/0x01C7/*::]*/: { /* n:"BrtBeginQSIFs", */ T:1 },
	/*::[*/0x01C8/*::]*/: { /* n:"BrtEndQSIFs", */ T:-1 },
	/*::[*/0x01C9/*::]*/: { /* n:"BrtBeginQSIF", */ T:1 },
	/*::[*/0x01CA/*::]*/: { /* n:"BrtEndQSIF", */ T:-1 },
	/*::[*/0x01CB/*::]*/: { /* n:"BrtBeginAutoSortScope", */ T:1 },
	/*::[*/0x01CC/*::]*/: { /* n:"BrtEndAutoSortScope", */ T:-1 },
	/*::[*/0x01CD/*::]*/: { /* n:"BrtBeginConditionalFormatting", */ T:1 },
	/*::[*/0x01CE/*::]*/: { /* n:"BrtEndConditionalFormatting", */ T:-1 },
	/*::[*/0x01CF/*::]*/: { /* n:"BrtBeginCFRule", */ T:1 },
	/*::[*/0x01D0/*::]*/: { /* n:"BrtEndCFRule", */ T:-1 },
	/*::[*/0x01D1/*::]*/: { /* n:"BrtBeginIconSet", */ T:1 },
	/*::[*/0x01D2/*::]*/: { /* n:"BrtEndIconSet", */ T:-1 },
	/*::[*/0x01D3/*::]*/: { /* n:"BrtBeginDatabar", */ T:1 },
	/*::[*/0x01D4/*::]*/: { /* n:"BrtEndDatabar", */ T:-1 },
	/*::[*/0x01D5/*::]*/: { /* n:"BrtBeginColorScale", */ T:1 },
	/*::[*/0x01D6/*::]*/: { /* n:"BrtEndColorScale", */ T:-1 },
	/*::[*/0x01D7/*::]*/: { /* n:"BrtCFVO" */ },
	/*::[*/0x01D8/*::]*/: { /* n:"BrtExternValueMeta" */ },
	/*::[*/0x01D9/*::]*/: { /* n:"BrtBeginColorPalette", */ T:1 },
	/*::[*/0x01DA/*::]*/: { /* n:"BrtEndColorPalette", */ T:-1 },
	/*::[*/0x01DB/*::]*/: { /* n:"BrtIndexedColor" */ },
	/*::[*/0x01DC/*::]*/: { /* n:"BrtMargins", */ f:parse_BrtMargins },
	/*::[*/0x01DD/*::]*/: { /* n:"BrtPrintOptions" */ },
	/*::[*/0x01DE/*::]*/: { /* n:"BrtPageSetup" */ },
	/*::[*/0x01DF/*::]*/: { /* n:"BrtBeginHeaderFooter", */ T:1 },
	/*::[*/0x01E0/*::]*/: { /* n:"BrtEndHeaderFooter", */ T:-1 },
	/*::[*/0x01E1/*::]*/: { /* n:"BrtBeginSXCrtFormat", */ T:1 },
	/*::[*/0x01E2/*::]*/: { /* n:"BrtEndSXCrtFormat", */ T:-1 },
	/*::[*/0x01E3/*::]*/: { /* n:"BrtBeginSXCrtFormats", */ T:1 },
	/*::[*/0x01E4/*::]*/: { /* n:"BrtEndSXCrtFormats", */ T:-1 },
	/*::[*/0x01E5/*::]*/: { /* n:"BrtWsFmtInfo", */ f:parse_BrtWsFmtInfo },
	/*::[*/0x01E6/*::]*/: { /* n:"BrtBeginMgs", */ T:1 },
	/*::[*/0x01E7/*::]*/: { /* n:"BrtEndMGs", */ T:-1 },
	/*::[*/0x01E8/*::]*/: { /* n:"BrtBeginMGMaps", */ T:1 },
	/*::[*/0x01E9/*::]*/: { /* n:"BrtEndMGMaps", */ T:-1 },
	/*::[*/0x01EA/*::]*/: { /* n:"BrtBeginMG", */ T:1 },
	/*::[*/0x01EB/*::]*/: { /* n:"BrtEndMG", */ T:-1 },
	/*::[*/0x01EC/*::]*/: { /* n:"BrtBeginMap", */ T:1 },
	/*::[*/0x01ED/*::]*/: { /* n:"BrtEndMap", */ T:-1 },
	/*::[*/0x01EE/*::]*/: { /* n:"BrtHLink", */ f:parse_BrtHLink },
	/*::[*/0x01EF/*::]*/: { /* n:"BrtBeginDCon", */ T:1 },
	/*::[*/0x01F0/*::]*/: { /* n:"BrtEndDCon", */ T:-1 },
	/*::[*/0x01F1/*::]*/: { /* n:"BrtBeginDRefs", */ T:1 },
	/*::[*/0x01F2/*::]*/: { /* n:"BrtEndDRefs", */ T:-1 },
	/*::[*/0x01F3/*::]*/: { /* n:"BrtDRef" */ },
	/*::[*/0x01F4/*::]*/: { /* n:"BrtBeginScenMan", */ T:1 },
	/*::[*/0x01F5/*::]*/: { /* n:"BrtEndScenMan", */ T:-1 },
	/*::[*/0x01F6/*::]*/: { /* n:"BrtBeginSct", */ T:1 },
	/*::[*/0x01F7/*::]*/: { /* n:"BrtEndSct", */ T:-1 },
	/*::[*/0x01F8/*::]*/: { /* n:"BrtSlc" */ },
	/*::[*/0x01F9/*::]*/: { /* n:"BrtBeginDXFs", */ T:1 },
	/*::[*/0x01FA/*::]*/: { /* n:"BrtEndDXFs", */ T:-1 },
	/*::[*/0x01FB/*::]*/: { /* n:"BrtDXF" */ },
	/*::[*/0x01FC/*::]*/: { /* n:"BrtBeginTableStyles", */ T:1 },
	/*::[*/0x01FD/*::]*/: { /* n:"BrtEndTableStyles", */ T:-1 },
	/*::[*/0x01FE/*::]*/: { /* n:"BrtBeginTableStyle", */ T:1 },
	/*::[*/0x01FF/*::]*/: { /* n:"BrtEndTableStyle", */ T:-1 },
	/*::[*/0x0200/*::]*/: { /* n:"BrtTableStyleElement" */ },
	/*::[*/0x0201/*::]*/: { /* n:"BrtTableStyleClient" */ },
	/*::[*/0x0202/*::]*/: { /* n:"BrtBeginVolDeps", */ T:1 },
	/*::[*/0x0203/*::]*/: { /* n:"BrtEndVolDeps", */ T:-1 },
	/*::[*/0x0204/*::]*/: { /* n:"BrtBeginVolType", */ T:1 },
	/*::[*/0x0205/*::]*/: { /* n:"BrtEndVolType", */ T:-1 },
	/*::[*/0x0206/*::]*/: { /* n:"BrtBeginVolMain", */ T:1 },
	/*::[*/0x0207/*::]*/: { /* n:"BrtEndVolMain", */ T:-1 },
	/*::[*/0x0208/*::]*/: { /* n:"BrtBeginVolTopic", */ T:1 },
	/*::[*/0x0209/*::]*/: { /* n:"BrtEndVolTopic", */ T:-1 },
	/*::[*/0x020A/*::]*/: { /* n:"BrtVolSubtopic" */ },
	/*::[*/0x020B/*::]*/: { /* n:"BrtVolRef" */ },
	/*::[*/0x020C/*::]*/: { /* n:"BrtVolNum" */ },
	/*::[*/0x020D/*::]*/: { /* n:"BrtVolErr" */ },
	/*::[*/0x020E/*::]*/: { /* n:"BrtVolStr" */ },
	/*::[*/0x020F/*::]*/: { /* n:"BrtVolBool" */ },
	/*::[*/0x0210/*::]*/: { /* n:"BrtBeginCalcChain$", */ T:1 },
	/*::[*/0x0211/*::]*/: { /* n:"BrtEndCalcChain$", */ T:-1 },
	/*::[*/0x0212/*::]*/: { /* n:"BrtBeginSortState", */ T:1 },
	/*::[*/0x0213/*::]*/: { /* n:"BrtEndSortState", */ T:-1 },
	/*::[*/0x0214/*::]*/: { /* n:"BrtBeginSortCond", */ T:1 },
	/*::[*/0x0215/*::]*/: { /* n:"BrtEndSortCond", */ T:-1 },
	/*::[*/0x0216/*::]*/: { /* n:"BrtBookProtection" */ },
	/*::[*/0x0217/*::]*/: { /* n:"BrtSheetProtection" */ },
	/*::[*/0x0218/*::]*/: { /* n:"BrtRangeProtection" */ },
	/*::[*/0x0219/*::]*/: { /* n:"BrtPhoneticInfo" */ },
	/*::[*/0x021A/*::]*/: { /* n:"BrtBeginECTxtWiz", */ T:1 },
	/*::[*/0x021B/*::]*/: { /* n:"BrtEndECTxtWiz", */ T:-1 },
	/*::[*/0x021C/*::]*/: { /* n:"BrtBeginECTWFldInfoLst", */ T:1 },
	/*::[*/0x021D/*::]*/: { /* n:"BrtEndECTWFldInfoLst", */ T:-1 },
	/*::[*/0x021E/*::]*/: { /* n:"BrtBeginECTwFldInfo", */ T:1 },
	/*::[*/0x0224/*::]*/: { /* n:"BrtFileSharing" */ },
	/*::[*/0x0225/*::]*/: { /* n:"BrtOleSize" */ },
	/*::[*/0x0226/*::]*/: { /* n:"BrtDrawing", */ f:parse_RelID },
	/*::[*/0x0227/*::]*/: { /* n:"BrtLegacyDrawing" */ },
	/*::[*/0x0228/*::]*/: { /* n:"BrtLegacyDrawingHF" */ },
	/*::[*/0x0229/*::]*/: { /* n:"BrtWebOpt" */ },
	/*::[*/0x022A/*::]*/: { /* n:"BrtBeginWebPubItems", */ T:1 },
	/*::[*/0x022B/*::]*/: { /* n:"BrtEndWebPubItems", */ T:-1 },
	/*::[*/0x022C/*::]*/: { /* n:"BrtBeginWebPubItem", */ T:1 },
	/*::[*/0x022D/*::]*/: { /* n:"BrtEndWebPubItem", */ T:-1 },
	/*::[*/0x022E/*::]*/: { /* n:"BrtBeginSXCondFmt", */ T:1 },
	/*::[*/0x022F/*::]*/: { /* n:"BrtEndSXCondFmt", */ T:-1 },
	/*::[*/0x0230/*::]*/: { /* n:"BrtBeginSXCondFmts", */ T:1 },
	/*::[*/0x0231/*::]*/: { /* n:"BrtEndSXCondFmts", */ T:-1 },
	/*::[*/0x0232/*::]*/: { /* n:"BrtBkHim" */ },
	/*::[*/0x0234/*::]*/: { /* n:"BrtColor" */ },
	/*::[*/0x0235/*::]*/: { /* n:"BrtBeginIndexedColors", */ T:1 },
	/*::[*/0x0236/*::]*/: { /* n:"BrtEndIndexedColors", */ T:-1 },
	/*::[*/0x0239/*::]*/: { /* n:"BrtBeginMRUColors", */ T:1 },
	/*::[*/0x023A/*::]*/: { /* n:"BrtEndMRUColors", */ T:-1 },
	/*::[*/0x023C/*::]*/: { /* n:"BrtMRUColor" */ },
	/*::[*/0x023D/*::]*/: { /* n:"BrtBeginDVals", */ T:1 },
	/*::[*/0x023E/*::]*/: { /* n:"BrtEndDVals", */ T:-1 },
	/*::[*/0x0241/*::]*/: { /* n:"BrtSupNameStart" */ },
	/*::[*/0x0242/*::]*/: { /* n:"BrtSupNameValueStart" */ },
	/*::[*/0x0243/*::]*/: { /* n:"BrtSupNameValueEnd" */ },
	/*::[*/0x0244/*::]*/: { /* n:"BrtSupNameNum" */ },
	/*::[*/0x0245/*::]*/: { /* n:"BrtSupNameErr" */ },
	/*::[*/0x0246/*::]*/: { /* n:"BrtSupNameSt" */ },
	/*::[*/0x0247/*::]*/: { /* n:"BrtSupNameNil" */ },
	/*::[*/0x0248/*::]*/: { /* n:"BrtSupNameBool" */ },
	/*::[*/0x0249/*::]*/: { /* n:"BrtSupNameFmla" */ },
	/*::[*/0x024A/*::]*/: { /* n:"BrtSupNameBits" */ },
	/*::[*/0x024B/*::]*/: { /* n:"BrtSupNameEnd" */ },
	/*::[*/0x024C/*::]*/: { /* n:"BrtEndSupBook", */ T:-1 },
	/*::[*/0x024D/*::]*/: { /* n:"BrtCellSmartTagProperty" */ },
	/*::[*/0x024E/*::]*/: { /* n:"BrtBeginCellSmartTag", */ T:1 },
	/*::[*/0x024F/*::]*/: { /* n:"BrtEndCellSmartTag", */ T:-1 },
	/*::[*/0x0250/*::]*/: { /* n:"BrtBeginCellSmartTags", */ T:1 },
	/*::[*/0x0251/*::]*/: { /* n:"BrtEndCellSmartTags", */ T:-1 },
	/*::[*/0x0252/*::]*/: { /* n:"BrtBeginSmartTags", */ T:1 },
	/*::[*/0x0253/*::]*/: { /* n:"BrtEndSmartTags", */ T:-1 },
	/*::[*/0x0254/*::]*/: { /* n:"BrtSmartTagType" */ },
	/*::[*/0x0255/*::]*/: { /* n:"BrtBeginSmartTagTypes", */ T:1 },
	/*::[*/0x0256/*::]*/: { /* n:"BrtEndSmartTagTypes", */ T:-1 },
	/*::[*/0x0257/*::]*/: { /* n:"BrtBeginSXFilters", */ T:1 },
	/*::[*/0x0258/*::]*/: { /* n:"BrtEndSXFilters", */ T:-1 },
	/*::[*/0x0259/*::]*/: { /* n:"BrtBeginSXFILTER", */ T:1 },
	/*::[*/0x025A/*::]*/: { /* n:"BrtEndSXFilter", */ T:-1 },
	/*::[*/0x025B/*::]*/: { /* n:"BrtBeginFills", */ T:1 },
	/*::[*/0x025C/*::]*/: { /* n:"BrtEndFills", */ T:-1 },
	/*::[*/0x025D/*::]*/: { /* n:"BrtBeginCellWatches", */ T:1 },
	/*::[*/0x025E/*::]*/: { /* n:"BrtEndCellWatches", */ T:-1 },
	/*::[*/0x025F/*::]*/: { /* n:"BrtCellWatch" */ },
	/*::[*/0x0260/*::]*/: { /* n:"BrtBeginCRErrs", */ T:1 },
	/*::[*/0x0261/*::]*/: { /* n:"BrtEndCRErrs", */ T:-1 },
	/*::[*/0x0262/*::]*/: { /* n:"BrtCrashRecErr" */ },
	/*::[*/0x0263/*::]*/: { /* n:"BrtBeginFonts", */ T:1 },
	/*::[*/0x0264/*::]*/: { /* n:"BrtEndFonts", */ T:-1 },
	/*::[*/0x0265/*::]*/: { /* n:"BrtBeginBorders", */ T:1 },
	/*::[*/0x0266/*::]*/: { /* n:"BrtEndBorders", */ T:-1 },
	/*::[*/0x0267/*::]*/: { /* n:"BrtBeginFmts", */ T:1 },
	/*::[*/0x0268/*::]*/: { /* n:"BrtEndFmts", */ T:-1 },
	/*::[*/0x0269/*::]*/: { /* n:"BrtBeginCellXFs", */ T:1 },
	/*::[*/0x026A/*::]*/: { /* n:"BrtEndCellXFs", */ T:-1 },
	/*::[*/0x026B/*::]*/: { /* n:"BrtBeginStyles", */ T:1 },
	/*::[*/0x026C/*::]*/: { /* n:"BrtEndStyles", */ T:-1 },
	/*::[*/0x0271/*::]*/: { /* n:"BrtBigName" */ },
	/*::[*/0x0272/*::]*/: { /* n:"BrtBeginCellStyleXFs", */ T:1 },
	/*::[*/0x0273/*::]*/: { /* n:"BrtEndCellStyleXFs", */ T:-1 },
	/*::[*/0x0274/*::]*/: { /* n:"BrtBeginComments", */ T:1 },
	/*::[*/0x0275/*::]*/: { /* n:"BrtEndComments", */ T:-1 },
	/*::[*/0x0276/*::]*/: { /* n:"BrtBeginCommentAuthors", */ T:1 },
	/*::[*/0x0277/*::]*/: { /* n:"BrtEndCommentAuthors", */ T:-1 },
	/*::[*/0x0278/*::]*/: { /* n:"BrtCommentAuthor", */ f:parse_BrtCommentAuthor },
	/*::[*/0x0279/*::]*/: { /* n:"BrtBeginCommentList", */ T:1 },
	/*::[*/0x027A/*::]*/: { /* n:"BrtEndCommentList", */ T:-1 },
	/*::[*/0x027B/*::]*/: { /* n:"BrtBeginComment", */ T:1, f:parse_BrtBeginComment},
	/*::[*/0x027C/*::]*/: { /* n:"BrtEndComment", */ T:-1 },
	/*::[*/0x027D/*::]*/: { /* n:"BrtCommentText", */ f:parse_BrtCommentText },
	/*::[*/0x027E/*::]*/: { /* n:"BrtBeginOleObjects", */ T:1 },
	/*::[*/0x027F/*::]*/: { /* n:"BrtOleObject" */ },
	/*::[*/0x0280/*::]*/: { /* n:"BrtEndOleObjects", */ T:-1 },
	/*::[*/0x0281/*::]*/: { /* n:"BrtBeginSxrules", */ T:1 },
	/*::[*/0x0282/*::]*/: { /* n:"BrtEndSxRules", */ T:-1 },
	/*::[*/0x0283/*::]*/: { /* n:"BrtBeginActiveXControls", */ T:1 },
	/*::[*/0x0284/*::]*/: { /* n:"BrtActiveX" */ },
	/*::[*/0x0285/*::]*/: { /* n:"BrtEndActiveXControls", */ T:-1 },
	/*::[*/0x0286/*::]*/: { /* n:"BrtBeginPCDSDTCEMembersSortBy", */ T:1 },
	/*::[*/0x0288/*::]*/: { /* n:"BrtBeginCellIgnoreECs", */ T:1 },
	/*::[*/0x0289/*::]*/: { /* n:"BrtCellIgnoreEC" */ },
	/*::[*/0x028A/*::]*/: { /* n:"BrtEndCellIgnoreECs", */ T:-1 },
	/*::[*/0x028B/*::]*/: { /* n:"BrtCsProp", */ f:parse_BrtCsProp },
	/*::[*/0x028C/*::]*/: { /* n:"BrtCsPageSetup" */ },
	/*::[*/0x028D/*::]*/: { /* n:"BrtBeginUserCsViews", */ T:1 },
	/*::[*/0x028E/*::]*/: { /* n:"BrtEndUserCsViews", */ T:-1 },
	/*::[*/0x028F/*::]*/: { /* n:"BrtBeginUserCsView", */ T:1 },
	/*::[*/0x0290/*::]*/: { /* n:"BrtEndUserCsView", */ T:-1 },
	/*::[*/0x0291/*::]*/: { /* n:"BrtBeginPcdSFCIEntries", */ T:1 },
	/*::[*/0x0292/*::]*/: { /* n:"BrtEndPCDSFCIEntries", */ T:-1 },
	/*::[*/0x0293/*::]*/: { /* n:"BrtPCDSFCIEntry" */ },
	/*::[*/0x0294/*::]*/: { /* n:"BrtBeginListParts", */ T:1 },
	/*::[*/0x0295/*::]*/: { /* n:"BrtListPart" */ },
	/*::[*/0x0296/*::]*/: { /* n:"BrtEndListParts", */ T:-1 },
	/*::[*/0x0297/*::]*/: { /* n:"BrtSheetCalcProp" */ },
	/*::[*/0x0298/*::]*/: { /* n:"BrtBeginFnGroup", */ T:1 },
	/*::[*/0x0299/*::]*/: { /* n:"BrtFnGroup" */ },
	/*::[*/0x029A/*::]*/: { /* n:"BrtEndFnGroup", */ T:-1 },
	/*::[*/0x029B/*::]*/: { /* n:"BrtSupAddin" */ },
	/*::[*/0x029C/*::]*/: { /* n:"BrtSXTDMPOrder" */ },
	/*::[*/0x029D/*::]*/: { /* n:"BrtCsProtection" */ },
	/*::[*/0x029F/*::]*/: { /* n:"BrtBeginWsSortMap", */ T:1 },
	/*::[*/0x02A0/*::]*/: { /* n:"BrtEndWsSortMap", */ T:-1 },
	/*::[*/0x02A1/*::]*/: { /* n:"BrtBeginRRSort", */ T:1 },
	/*::[*/0x02A2/*::]*/: { /* n:"BrtEndRRSort", */ T:-1 },
	/*::[*/0x02A3/*::]*/: { /* n:"BrtRRSortItem" */ },
	/*::[*/0x02A4/*::]*/: { /* n:"BrtFileSharingIso" */ },
	/*::[*/0x02A5/*::]*/: { /* n:"BrtBookProtectionIso" */ },
	/*::[*/0x02A6/*::]*/: { /* n:"BrtSheetProtectionIso" */ },
	/*::[*/0x02A7/*::]*/: { /* n:"BrtCsProtectionIso" */ },
	/*::[*/0x02A8/*::]*/: { /* n:"BrtRangeProtectionIso" */ },
	/*::[*/0x02A9/*::]*/: { /* n:"BrtDValList" */ },
	/*::[*/0x0400/*::]*/: { /* n:"BrtRwDescent" */ },
	/*::[*/0x0401/*::]*/: { /* n:"BrtKnownFonts" */ },
	/*::[*/0x0402/*::]*/: { /* n:"BrtBeginSXTupleSet", */ T:1 },
	/*::[*/0x0403/*::]*/: { /* n:"BrtEndSXTupleSet", */ T:-1 },
	/*::[*/0x0404/*::]*/: { /* n:"BrtBeginSXTupleSetHeader", */ T:1 },
	/*::[*/0x0405/*::]*/: { /* n:"BrtEndSXTupleSetHeader", */ T:-1 },
	/*::[*/0x0406/*::]*/: { /* n:"BrtSXTupleSetHeaderItem" */ },
	/*::[*/0x0407/*::]*/: { /* n:"BrtBeginSXTupleSetData", */ T:1 },
	/*::[*/0x0408/*::]*/: { /* n:"BrtEndSXTupleSetData", */ T:-1 },
	/*::[*/0x0409/*::]*/: { /* n:"BrtBeginSXTupleSetRow", */ T:1 },
	/*::[*/0x040A/*::]*/: { /* n:"BrtEndSXTupleSetRow", */ T:-1 },
	/*::[*/0x040B/*::]*/: { /* n:"BrtSXTupleSetRowItem" */ },
	/*::[*/0x040C/*::]*/: { /* n:"BrtNameExt" */ },
	/*::[*/0x040D/*::]*/: { /* n:"BrtPCDH14" */ },
	/*::[*/0x040E/*::]*/: { /* n:"BrtBeginPCDCalcMem14", */ T:1 },
	/*::[*/0x040F/*::]*/: { /* n:"BrtEndPCDCalcMem14", */ T:-1 },
	/*::[*/0x0410/*::]*/: { /* n:"BrtSXTH14" */ },
	/*::[*/0x0411/*::]*/: { /* n:"BrtBeginSparklineGroup", */ T:1 },
	/*::[*/0x0412/*::]*/: { /* n:"BrtEndSparklineGroup", */ T:-1 },
	/*::[*/0x0413/*::]*/: { /* n:"BrtSparkline" */ },
	/*::[*/0x0414/*::]*/: { /* n:"BrtSXDI14" */ },
	/*::[*/0x0415/*::]*/: { /* n:"BrtWsFmtInfoEx14" */ },
	/*::[*/0x0416/*::]*/: { /* n:"BrtBeginConditionalFormatting14", */ T:1 },
	/*::[*/0x0417/*::]*/: { /* n:"BrtEndConditionalFormatting14", */ T:-1 },
	/*::[*/0x0418/*::]*/: { /* n:"BrtBeginCFRule14", */ T:1 },
	/*::[*/0x0419/*::]*/: { /* n:"BrtEndCFRule14", */ T:-1 },
	/*::[*/0x041A/*::]*/: { /* n:"BrtCFVO14" */ },
	/*::[*/0x041B/*::]*/: { /* n:"BrtBeginDatabar14", */ T:1 },
	/*::[*/0x041C/*::]*/: { /* n:"BrtBeginIconSet14", */ T:1 },
	/*::[*/0x041D/*::]*/: { /* n:"BrtDVal14", */ f: parse_BrtDVal14 },
	/*::[*/0x041E/*::]*/: { /* n:"BrtBeginDVals14", */ T:1 },
	/*::[*/0x041F/*::]*/: { /* n:"BrtColor14" */ },
	/*::[*/0x0420/*::]*/: { /* n:"BrtBeginSparklines", */ T:1 },
	/*::[*/0x0421/*::]*/: { /* n:"BrtEndSparklines", */ T:-1 },
	/*::[*/0x0422/*::]*/: { /* n:"BrtBeginSparklineGroups", */ T:1 },
	/*::[*/0x0423/*::]*/: { /* n:"BrtEndSparklineGroups", */ T:-1 },
	/*::[*/0x0425/*::]*/: { /* n:"BrtSXVD14" */ },
	/*::[*/0x0426/*::]*/: { /* n:"BrtBeginSXView14", */ T:1 },
	/*::[*/0x0427/*::]*/: { /* n:"BrtEndSXView14", */ T:-1 },
	/*::[*/0x0428/*::]*/: { /* n:"BrtBeginSXView16", */ T:1 },
	/*::[*/0x0429/*::]*/: { /* n:"BrtEndSXView16", */ T:-1 },
	/*::[*/0x042A/*::]*/: { /* n:"BrtBeginPCD14", */ T:1 },
	/*::[*/0x042B/*::]*/: { /* n:"BrtEndPCD14", */ T:-1 },
	/*::[*/0x042C/*::]*/: { /* n:"BrtBeginExtConn14", */ T:1 },
	/*::[*/0x042D/*::]*/: { /* n:"BrtEndExtConn14", */ T:-1 },
	/*::[*/0x042E/*::]*/: { /* n:"BrtBeginSlicerCacheIDs", */ T:1 },
	/*::[*/0x042F/*::]*/: { /* n:"BrtEndSlicerCacheIDs", */ T:-1 },
	/*::[*/0x0430/*::]*/: { /* n:"BrtBeginSlicerCacheID", */ T:1 },
	/*::[*/0x0431/*::]*/: { /* n:"BrtEndSlicerCacheID", */ T:-1 },
	/*::[*/0x0433/*::]*/: { /* n:"BrtBeginSlicerCache", */ T:1 },
	/*::[*/0x0434/*::]*/: { /* n:"BrtEndSlicerCache", */ T:-1 },
	/*::[*/0x0435/*::]*/: { /* n:"BrtBeginSlicerCacheDef", */ T:1 },
	/*::[*/0x0436/*::]*/: { /* n:"BrtEndSlicerCacheDef", */ T:-1 },
	/*::[*/0x0437/*::]*/: { /* n:"BrtBeginSlicersEx", */ T:1 },
	/*::[*/0x0438/*::]*/: { /* n:"BrtEndSlicersEx", */ T:-1 },
	/*::[*/0x0439/*::]*/: { /* n:"BrtBeginSlicerEx", */ T:1 },
	/*::[*/0x043A/*::]*/: { /* n:"BrtEndSlicerEx", */ T:-1 },
	/*::[*/0x043B/*::]*/: { /* n:"BrtBeginSlicer", */ T:1 },
	/*::[*/0x043C/*::]*/: { /* n:"BrtEndSlicer", */ T:-1 },
	/*::[*/0x043D/*::]*/: { /* n:"BrtSlicerCachePivotTables" */ },
	/*::[*/0x043E/*::]*/: { /* n:"BrtBeginSlicerCacheOlapImpl", */ T:1 },
	/*::[*/0x043F/*::]*/: { /* n:"BrtEndSlicerCacheOlapImpl", */ T:-1 },
	/*::[*/0x0440/*::]*/: { /* n:"BrtBeginSlicerCacheLevelsData", */ T:1 },
	/*::[*/0x0441/*::]*/: { /* n:"BrtEndSlicerCacheLevelsData", */ T:-1 },
	/*::[*/0x0442/*::]*/: { /* n:"BrtBeginSlicerCacheLevelData", */ T:1 },
	/*::[*/0x0443/*::]*/: { /* n:"BrtEndSlicerCacheLevelData", */ T:-1 },
	/*::[*/0x0444/*::]*/: { /* n:"BrtBeginSlicerCacheSiRanges", */ T:1 },
	/*::[*/0x0445/*::]*/: { /* n:"BrtEndSlicerCacheSiRanges", */ T:-1 },
	/*::[*/0x0446/*::]*/: { /* n:"BrtBeginSlicerCacheSiRange", */ T:1 },
	/*::[*/0x0447/*::]*/: { /* n:"BrtEndSlicerCacheSiRange", */ T:-1 },
	/*::[*/0x0448/*::]*/: { /* n:"BrtSlicerCacheOlapItem" */ },
	/*::[*/0x0449/*::]*/: { /* n:"BrtBeginSlicerCacheSelections", */ T:1 },
	/*::[*/0x044A/*::]*/: { /* n:"BrtSlicerCacheSelection" */ },
	/*::[*/0x044B/*::]*/: { /* n:"BrtEndSlicerCacheSelections", */ T:-1 },
	/*::[*/0x044C/*::]*/: { /* n:"BrtBeginSlicerCacheNative", */ T:1 },
	/*::[*/0x044D/*::]*/: { /* n:"BrtEndSlicerCacheNative", */ T:-1 },
	/*::[*/0x044E/*::]*/: { /* n:"BrtSlicerCacheNativeItem" */ },
	/*::[*/0x044F/*::]*/: { /* n:"BrtRangeProtection14" */ },
	/*::[*/0x0450/*::]*/: { /* n:"BrtRangeProtectionIso14" */ },
	/*::[*/0x0451/*::]*/: { /* n:"BrtCellIgnoreEC14" */ },
	/*::[*/0x0457/*::]*/: { /* n:"BrtList14" */ },
	/*::[*/0x0458/*::]*/: { /* n:"BrtCFIcon" */ },
	/*::[*/0x0459/*::]*/: { /* n:"BrtBeginSlicerCachesPivotCacheIDs", */ T:1 },
	/*::[*/0x045A/*::]*/: { /* n:"BrtEndSlicerCachesPivotCacheIDs", */ T:-1 },
	/*::[*/0x045B/*::]*/: { /* n:"BrtBeginSlicers", */ T:1 },
	/*::[*/0x045C/*::]*/: { /* n:"BrtEndSlicers", */ T:-1 },
	/*::[*/0x045D/*::]*/: { /* n:"BrtWbProp14" */ },
	/*::[*/0x045E/*::]*/: { /* n:"BrtBeginSXEdit", */ T:1 },
	/*::[*/0x045F/*::]*/: { /* n:"BrtEndSXEdit", */ T:-1 },
	/*::[*/0x0460/*::]*/: { /* n:"BrtBeginSXEdits", */ T:1 },
	/*::[*/0x0461/*::]*/: { /* n:"BrtEndSXEdits", */ T:-1 },
	/*::[*/0x0462/*::]*/: { /* n:"BrtBeginSXChange", */ T:1 },
	/*::[*/0x0463/*::]*/: { /* n:"BrtEndSXChange", */ T:-1 },
	/*::[*/0x0464/*::]*/: { /* n:"BrtBeginSXChanges", */ T:1 },
	/*::[*/0x0465/*::]*/: { /* n:"BrtEndSXChanges", */ T:-1 },
	/*::[*/0x0466/*::]*/: { /* n:"BrtSXTupleItems" */ },
	/*::[*/0x0468/*::]*/: { /* n:"BrtBeginSlicerStyle", */ T:1 },
	/*::[*/0x0469/*::]*/: { /* n:"BrtEndSlicerStyle", */ T:-1 },
	/*::[*/0x046A/*::]*/: { /* n:"BrtSlicerStyleElement" */ },
	/*::[*/0x046B/*::]*/: { /* n:"BrtBeginStyleSheetExt14", */ T:1 },
	/*::[*/0x046C/*::]*/: { /* n:"BrtEndStyleSheetExt14", */ T:-1 },
	/*::[*/0x046D/*::]*/: { /* n:"BrtBeginSlicerCachesPivotCacheID", */ T:1 },
	/*::[*/0x046E/*::]*/: { /* n:"BrtEndSlicerCachesPivotCacheID", */ T:-1 },
	/*::[*/0x046F/*::]*/: { /* n:"BrtBeginConditionalFormattings", */ T:1 },
	/*::[*/0x0470/*::]*/: { /* n:"BrtEndConditionalFormattings", */ T:-1 },
	/*::[*/0x0471/*::]*/: { /* n:"BrtBeginPCDCalcMemExt", */ T:1 },
	/*::[*/0x0472/*::]*/: { /* n:"BrtEndPCDCalcMemExt", */ T:-1 },
	/*::[*/0x0473/*::]*/: { /* n:"BrtBeginPCDCalcMemsExt", */ T:1 },
	/*::[*/0x0474/*::]*/: { /* n:"BrtEndPCDCalcMemsExt", */ T:-1 },
	/*::[*/0x0475/*::]*/: { /* n:"BrtPCDField14" */ },
	/*::[*/0x0476/*::]*/: { /* n:"BrtBeginSlicerStyles", */ T:1 },
	/*::[*/0x0477/*::]*/: { /* n:"BrtEndSlicerStyles", */ T:-1 },
	/*::[*/0x0478/*::]*/: { /* n:"BrtBeginSlicerStyleElements", */ T:1 },
	/*::[*/0x0479/*::]*/: { /* n:"BrtEndSlicerStyleElements", */ T:-1 },
	/*::[*/0x047A/*::]*/: { /* n:"BrtCFRuleExt" */ },
	/*::[*/0x047B/*::]*/: { /* n:"BrtBeginSXCondFmt14", */ T:1 },
	/*::[*/0x047C/*::]*/: { /* n:"BrtEndSXCondFmt14", */ T:-1 },
	/*::[*/0x047D/*::]*/: { /* n:"BrtBeginSXCondFmts14", */ T:1 },
	/*::[*/0x047E/*::]*/: { /* n:"BrtEndSXCondFmts14", */ T:-1 },
	/*::[*/0x0480/*::]*/: { /* n:"BrtBeginSortCond14", */ T:1 },
	/*::[*/0x0481/*::]*/: { /* n:"BrtEndSortCond14", */ T:-1 },
	/*::[*/0x0482/*::]*/: { /* n:"BrtEndDVals14", */ T:-1 },
	/*::[*/0x0483/*::]*/: { /* n:"BrtEndIconSet14", */ T:-1 },
	/*::[*/0x0484/*::]*/: { /* n:"BrtEndDatabar14", */ T:-1 },
	/*::[*/0x0485/*::]*/: { /* n:"BrtBeginColorScale14", */ T:1 },
	/*::[*/0x0486/*::]*/: { /* n:"BrtEndColorScale14", */ T:-1 },
	/*::[*/0x0487/*::]*/: { /* n:"BrtBeginSxrules14", */ T:1 },
	/*::[*/0x0488/*::]*/: { /* n:"BrtEndSxrules14", */ T:-1 },
	/*::[*/0x0489/*::]*/: { /* n:"BrtBeginPRule14", */ T:1 },
	/*::[*/0x048A/*::]*/: { /* n:"BrtEndPRule14", */ T:-1 },
	/*::[*/0x048B/*::]*/: { /* n:"BrtBeginPRFilters14", */ T:1 },
	/*::[*/0x048C/*::]*/: { /* n:"BrtEndPRFilters14", */ T:-1 },
	/*::[*/0x048D/*::]*/: { /* n:"BrtBeginPRFilter14", */ T:1 },
	/*::[*/0x048E/*::]*/: { /* n:"BrtEndPRFilter14", */ T:-1 },
	/*::[*/0x048F/*::]*/: { /* n:"BrtBeginPRFItem14", */ T:1 },
	/*::[*/0x0490/*::]*/: { /* n:"BrtEndPRFItem14", */ T:-1 },
	/*::[*/0x0491/*::]*/: { /* n:"BrtBeginCellIgnoreECs14", */ T:1 },
	/*::[*/0x0492/*::]*/: { /* n:"BrtEndCellIgnoreECs14", */ T:-1 },
	/*::[*/0x0493/*::]*/: { /* n:"BrtDxf14" */ },
	/*::[*/0x0494/*::]*/: { /* n:"BrtBeginDxF14s", */ T:1 },
	/*::[*/0x0495/*::]*/: { /* n:"BrtEndDxf14s", */ T:-1 },
	/*::[*/0x0499/*::]*/: { /* n:"BrtFilter14" */ },
	/*::[*/0x049A/*::]*/: { /* n:"BrtBeginCustomFilters14", */ T:1 },
	/*::[*/0x049C/*::]*/: { /* n:"BrtCustomFilter14" */ },
	/*::[*/0x049D/*::]*/: { /* n:"BrtIconFilter14" */ },
	/*::[*/0x049E/*::]*/: { /* n:"BrtPivotCacheConnectionName" */ },
	/*::[*/0x0800/*::]*/: { /* n:"BrtBeginDecoupledPivotCacheIDs", */ T:1 },
	/*::[*/0x0801/*::]*/: { /* n:"BrtEndDecoupledPivotCacheIDs", */ T:-1 },
	/*::[*/0x0802/*::]*/: { /* n:"BrtDecoupledPivotCacheID" */ },
	/*::[*/0x0803/*::]*/: { /* n:"BrtBeginPivotTableRefs", */ T:1 },
	/*::[*/0x0804/*::]*/: { /* n:"BrtEndPivotTableRefs", */ T:-1 },
	/*::[*/0x0805/*::]*/: { /* n:"BrtPivotTableRef" */ },
	/*::[*/0x0806/*::]*/: { /* n:"BrtSlicerCacheBookPivotTables" */ },
	/*::[*/0x0807/*::]*/: { /* n:"BrtBeginSxvcells", */ T:1 },
	/*::[*/0x0808/*::]*/: { /* n:"BrtEndSxvcells", */ T:-1 },
	/*::[*/0x0809/*::]*/: { /* n:"BrtBeginSxRow", */ T:1 },
	/*::[*/0x080A/*::]*/: { /* n:"BrtEndSxRow", */ T:-1 },
	/*::[*/0x080C/*::]*/: { /* n:"BrtPcdCalcMem15" */ },
	/*::[*/0x0813/*::]*/: { /* n:"BrtQsi15" */ },
	/*::[*/0x0814/*::]*/: { /* n:"BrtBeginWebExtensions", */ T:1 },
	/*::[*/0x0815/*::]*/: { /* n:"BrtEndWebExtensions", */ T:-1 },
	/*::[*/0x0816/*::]*/: { /* n:"BrtWebExtension" */ },
	/*::[*/0x0817/*::]*/: { /* n:"BrtAbsPath15" */ },
	/*::[*/0x0818/*::]*/: { /* n:"BrtBeginPivotTableUISettings", */ T:1 },
	/*::[*/0x0819/*::]*/: { /* n:"BrtEndPivotTableUISettings", */ T:-1 },
	/*::[*/0x081B/*::]*/: { /* n:"BrtTableSlicerCacheIDs" */ },
	/*::[*/0x081C/*::]*/: { /* n:"BrtTableSlicerCacheID" */ },
	/*::[*/0x081D/*::]*/: { /* n:"BrtBeginTableSlicerCache", */ T:1 },
	/*::[*/0x081E/*::]*/: { /* n:"BrtEndTableSlicerCache", */ T:-1 },
	/*::[*/0x081F/*::]*/: { /* n:"BrtSxFilter15" */ },
	/*::[*/0x0820/*::]*/: { /* n:"BrtBeginTimelineCachePivotCacheIDs", */ T:1 },
	/*::[*/0x0821/*::]*/: { /* n:"BrtEndTimelineCachePivotCacheIDs", */ T:-1 },
	/*::[*/0x0822/*::]*/: { /* n:"BrtTimelineCachePivotCacheID" */ },
	/*::[*/0x0823/*::]*/: { /* n:"BrtBeginTimelineCacheIDs", */ T:1 },
	/*::[*/0x0824/*::]*/: { /* n:"BrtEndTimelineCacheIDs", */ T:-1 },
	/*::[*/0x0825/*::]*/: { /* n:"BrtBeginTimelineCacheID", */ T:1 },
	/*::[*/0x0826/*::]*/: { /* n:"BrtEndTimelineCacheID", */ T:-1 },
	/*::[*/0x0827/*::]*/: { /* n:"BrtBeginTimelinesEx", */ T:1 },
	/*::[*/0x0828/*::]*/: { /* n:"BrtEndTimelinesEx", */ T:-1 },
	/*::[*/0x0829/*::]*/: { /* n:"BrtBeginTimelineEx", */ T:1 },
	/*::[*/0x082A/*::]*/: { /* n:"BrtEndTimelineEx", */ T:-1 },
	/*::[*/0x082B/*::]*/: { /* n:"BrtWorkBookPr15" */ },
	/*::[*/0x082C/*::]*/: { /* n:"BrtPCDH15" */ },
	/*::[*/0x082D/*::]*/: { /* n:"BrtBeginTimelineStyle", */ T:1 },
	/*::[*/0x082E/*::]*/: { /* n:"BrtEndTimelineStyle", */ T:-1 },
	/*::[*/0x082F/*::]*/: { /* n:"BrtTimelineStyleElement" */ },
	/*::[*/0x0830/*::]*/: { /* n:"BrtBeginTimelineStylesheetExt15", */ T:1 },
	/*::[*/0x0831/*::]*/: { /* n:"BrtEndTimelineStylesheetExt15", */ T:-1 },
	/*::[*/0x0832/*::]*/: { /* n:"BrtBeginTimelineStyles", */ T:1 },
	/*::[*/0x0833/*::]*/: { /* n:"BrtEndTimelineStyles", */ T:-1 },
	/*::[*/0x0834/*::]*/: { /* n:"BrtBeginTimelineStyleElements", */ T:1 },
	/*::[*/0x0835/*::]*/: { /* n:"BrtEndTimelineStyleElements", */ T:-1 },
	/*::[*/0x0836/*::]*/: { /* n:"BrtDxf15" */ },
	/*::[*/0x0837/*::]*/: { /* n:"BrtBeginDxfs15", */ T:1 },
	/*::[*/0x0838/*::]*/: { /* n:"BrtEndDxfs15", */ T:-1 },
	/*::[*/0x0839/*::]*/: { /* n:"BrtSlicerCacheHideItemsWithNoData" */ },
	/*::[*/0x083A/*::]*/: { /* n:"BrtBeginItemUniqueNames", */ T:1 },
	/*::[*/0x083B/*::]*/: { /* n:"BrtEndItemUniqueNames", */ T:-1 },
	/*::[*/0x083C/*::]*/: { /* n:"BrtItemUniqueName" */ },
	/*::[*/0x083D/*::]*/: { /* n:"BrtBeginExtConn15", */ T:1 },
	/*::[*/0x083E/*::]*/: { /* n:"BrtEndExtConn15", */ T:-1 },
	/*::[*/0x083F/*::]*/: { /* n:"BrtBeginOledbPr15", */ T:1 },
	/*::[*/0x0840/*::]*/: { /* n:"BrtEndOledbPr15", */ T:-1 },
	/*::[*/0x0841/*::]*/: { /* n:"BrtBeginDataFeedPr15", */ T:1 },
	/*::[*/0x0842/*::]*/: { /* n:"BrtEndDataFeedPr15", */ T:-1 },
	/*::[*/0x0843/*::]*/: { /* n:"BrtTextPr15" */ },
	/*::[*/0x0844/*::]*/: { /* n:"BrtRangePr15" */ },
	/*::[*/0x0845/*::]*/: { /* n:"BrtDbCommand15" */ },
	/*::[*/0x0846/*::]*/: { /* n:"BrtBeginDbTables15", */ T:1 },
	/*::[*/0x0847/*::]*/: { /* n:"BrtEndDbTables15", */ T:-1 },
	/*::[*/0x0848/*::]*/: { /* n:"BrtDbTable15" */ },
	/*::[*/0x0849/*::]*/: { /* n:"BrtBeginDataModel", */ T:1 },
	/*::[*/0x084A/*::]*/: { /* n:"BrtEndDataModel", */ T:-1 },
	/*::[*/0x084B/*::]*/: { /* n:"BrtBeginModelTables", */ T:1 },
	/*::[*/0x084C/*::]*/: { /* n:"BrtEndModelTables", */ T:-1 },
	/*::[*/0x084D/*::]*/: { /* n:"BrtModelTable" */ },
	/*::[*/0x084E/*::]*/: { /* n:"BrtBeginModelRelationships", */ T:1 },
	/*::[*/0x084F/*::]*/: { /* n:"BrtEndModelRelationships", */ T:-1 },
	/*::[*/0x0850/*::]*/: { /* n:"BrtModelRelationship" */ },
	/*::[*/0x0851/*::]*/: { /* n:"BrtBeginECTxtWiz15", */ T:1 },
	/*::[*/0x0852/*::]*/: { /* n:"BrtEndECTxtWiz15", */ T:-1 },
	/*::[*/0x0853/*::]*/: { /* n:"BrtBeginECTWFldInfoLst15", */ T:1 },
	/*::[*/0x0854/*::]*/: { /* n:"BrtEndECTWFldInfoLst15", */ T:-1 },
	/*::[*/0x0855/*::]*/: { /* n:"BrtBeginECTWFldInfo15", */ T:1 },
	/*::[*/0x0856/*::]*/: { /* n:"BrtFieldListActiveItem" */ },
	/*::[*/0x0857/*::]*/: { /* n:"BrtPivotCacheIdVersion" */ },
	/*::[*/0x0858/*::]*/: { /* n:"BrtSXDI15" */ },
	/*::[*/0x0859/*::]*/: { /* n:"BrtBeginModelTimeGroupings", */ T:1 },
	/*::[*/0x085A/*::]*/: { /* n:"BrtEndModelTimeGroupings", */ T:-1 },
	/*::[*/0x085B/*::]*/: { /* n:"BrtBeginModelTimeGrouping", */ T:1 },
	/*::[*/0x085C/*::]*/: { /* n:"BrtEndModelTimeGrouping", */ T:-1 },
	/*::[*/0x085D/*::]*/: { /* n:"BrtModelTimeGroupingCalcCol" */ },
	/*::[*/0x0C00/*::]*/: { /* n:"BrtUid" */ },
	/*::[*/0x0C01/*::]*/: { /* n:"BrtRevisionPtr" */ },
	/*::[*/0x1000/*::]*/: { /* n:"BrtBeginDynamicArrayPr", */ T:1 },
	/*::[*/0x1001/*::]*/: { /* n:"BrtEndDynamicArrayPr", */ T:-1 },
	/*::[*/0x138A/*::]*/: { /* n:"BrtBeginRichValueBlock", */ T:1 },
	/*::[*/0x138B/*::]*/: { /* n:"BrtEndRichValueBlock", */ T:-1 },
	/*::[*/0x13D9/*::]*/: { /* n:"BrtBeginRichFilters", */ T:1 },
	/*::[*/0x13DA/*::]*/: { /* n:"BrtEndRichFilters", */ T:-1 },
	/*::[*/0x13DB/*::]*/: { /* n:"BrtRichFilter" */ },
	/*::[*/0x13DC/*::]*/: { /* n:"BrtBeginRichFilterColumn", */ T:1 },
	/*::[*/0x13DD/*::]*/: { /* n:"BrtEndRichFilterColumn", */ T:-1 },
	/*::[*/0x13DE/*::]*/: { /* n:"BrtBeginCustomRichFilters", */ T:1 },
	/*::[*/0x13DF/*::]*/: { /* n:"BrtEndCustomRichFilters", */ T:-1 },
	/*::[*/0x13E0/*::]*/: { /* n:"BrtCustomRichFilter" */ },
	/*::[*/0x13E1/*::]*/: { /* n:"BrtTop10RichFilter" */ },
	/*::[*/0x13E2/*::]*/: { /* n:"BrtDynamicRichFilter" */ },
	/*::[*/0x13E4/*::]*/: { /* n:"BrtBeginRichSortCondition", */ T:1 },
	/*::[*/0x13E5/*::]*/: { /* n:"BrtEndRichSortCondition", */ T:-1 },
	/*::[*/0x13E6/*::]*/: { /* n:"BrtRichFilterDateGroupItem" */ },
	/*::[*/0x13E7/*::]*/: { /* n:"BrtBeginCalcFeatures", */ T:1 },
	/*::[*/0x13E8/*::]*/: { /* n:"BrtEndCalcFeatures", */ T:-1 },
	/*::[*/0x13E9/*::]*/: { /* n:"BrtCalcFeature" */ },
	/*::[*/0x13EB/*::]*/: { /* n:"BrtExternalLinksPr" */ },
	/*::[*/0xFFFF/*::]*/: { n:"" }
};

/* [MS-XLS] 2.3 Record Enumeration (and other sources) */
var XLSRecordEnum = {
	/* [MS-XLS] 2.3 Record Enumeration 2021-08-17 */
	/*::[*/0x0006/*::]*/: { /* n:"Formula", */ f:parse_Formula },
	/*::[*/0x000a/*::]*/: { /* n:"EOF", */ f:parsenoop2 },
	/*::[*/0x000c/*::]*/: { /* n:"CalcCount", */ f:parseuint16 }, //
	/*::[*/0x000d/*::]*/: { /* n:"CalcMode", */ f:parseuint16 }, //
	/*::[*/0x000e/*::]*/: { /* n:"CalcPrecision", */ f:parsebool }, //
	/*::[*/0x000f/*::]*/: { /* n:"CalcRefMode", */ f:parsebool }, //
	/*::[*/0x0010/*::]*/: { /* n:"CalcDelta", */ f:parse_Xnum }, //
	/*::[*/0x0011/*::]*/: { /* n:"CalcIter", */ f:parsebool }, //
	/*::[*/0x0012/*::]*/: { /* n:"Protect", */ f:parsebool },
	/*::[*/0x0013/*::]*/: { /* n:"Password", */ f:parseuint16 },
	/*::[*/0x0014/*::]*/: { /* n:"Header", */ f:parse_XLHeaderFooter },
	/*::[*/0x0015/*::]*/: { /* n:"Footer", */ f:parse_XLHeaderFooter },
	/*::[*/0x0017/*::]*/: { /* n:"ExternSheet", */ f:parse_ExternSheet },
	/*::[*/0x0018/*::]*/: { /* n:"Lbl", */ f:parse_Lbl },
	/*::[*/0x0019/*::]*/: { /* n:"WinProtect", */ f:parsebool },
	/*::[*/0x001a/*::]*/: { /* n:"VerticalPageBreaks", */ },
	/*::[*/0x001b/*::]*/: { /* n:"HorizontalPageBreaks", */ },
	/*::[*/0x001c/*::]*/: { /* n:"Note", */ f:parse_Note },
	/*::[*/0x001d/*::]*/: { /* n:"Selection", */ },
	/*::[*/0x0022/*::]*/: { /* n:"Date1904", */ f:parsebool },
	/*::[*/0x0023/*::]*/: { /* n:"ExternName", */ f:parse_ExternName },
	/*::[*/0x0026/*::]*/: { /* n:"LeftMargin", */ f:parse_Xnum }, // *
	/*::[*/0x0027/*::]*/: { /* n:"RightMargin", */ f:parse_Xnum }, // *
	/*::[*/0x0028/*::]*/: { /* n:"TopMargin", */ f:parse_Xnum }, // *
	/*::[*/0x0029/*::]*/: { /* n:"BottomMargin", */ f:parse_Xnum }, // *
	/*::[*/0x002a/*::]*/: { /* n:"PrintRowCol", */ f:parsebool },
	/*::[*/0x002b/*::]*/: { /* n:"PrintGrid", */ f:parsebool },
	/*::[*/0x002f/*::]*/: { /* n:"FilePass", */ f:parse_FilePass },
	/*::[*/0x0031/*::]*/: { /* n:"Font", */ f:parse_Font },
	/*::[*/0x0033/*::]*/: { /* n:"PrintSize", */ f:parseuint16 },
	/*::[*/0x003c/*::]*/: { /* n:"Continue", */ },
	/*::[*/0x003d/*::]*/: { /* n:"Window1", */ f:parse_Window1 },
	/*::[*/0x0040/*::]*/: { /* n:"Backup", */ f:parsebool },
	/*::[*/0x0041/*::]*/: { /* n:"Pane", */ f:parse_Pane },
	/*::[*/0x0042/*::]*/: { /* n:"CodePage", */ f:parseuint16 },
	/*::[*/0x004d/*::]*/: { /* n:"Pls", */ },
	/*::[*/0x0050/*::]*/: { /* n:"DCon", */ },
	/*::[*/0x0051/*::]*/: { /* n:"DConRef", */ },
	/*::[*/0x0052/*::]*/: { /* n:"DConName", */ },
	/*::[*/0x0055/*::]*/: { /* n:"DefColWidth", */ f:parseuint16 },
	/*::[*/0x0059/*::]*/: { /* n:"XCT", */ },
	/*::[*/0x005a/*::]*/: { /* n:"CRN", */ },
	/*::[*/0x005b/*::]*/: { /* n:"FileSharing", */ },
	/*::[*/0x005c/*::]*/: { /* n:"WriteAccess", */ f:parse_WriteAccess },
	/*::[*/0x005d/*::]*/: { /* n:"Obj", */ f:parse_Obj },
	/*::[*/0x005e/*::]*/: { /* n:"Uncalced", */ },
	/*::[*/0x005f/*::]*/: { /* n:"CalcSaveRecalc", */ f:parsebool }, //
	/*::[*/0x0060/*::]*/: { /* n:"Template", */ },
	/*::[*/0x0061/*::]*/: { /* n:"Intl", */ },
	/*::[*/0x0063/*::]*/: { /* n:"ObjProtect", */ f:parsebool },
	/*::[*/0x007d/*::]*/: { /* n:"ColInfo", */ f:parse_ColInfo },
	/*::[*/0x0080/*::]*/: { /* n:"Guts", */ f:parse_Guts },
	/*::[*/0x0081/*::]*/: { /* n:"WsBool", */ f:parse_WsBool },
	/*::[*/0x0082/*::]*/: { /* n:"GridSet", */ f:parseuint16 },
	/*::[*/0x0083/*::]*/: { /* n:"HCenter", */ f:parsebool },
	/*::[*/0x0084/*::]*/: { /* n:"VCenter", */ f:parsebool },
	/*::[*/0x0085/*::]*/: { /* n:"BoundSheet8", */ f:parse_BoundSheet8 },
	/*::[*/0x0086/*::]*/: { /* n:"WriteProtect", */ },
	/*::[*/0x008c/*::]*/: { /* n:"Country", */ f:parse_Country },
	/*::[*/0x008d/*::]*/: { /* n:"HideObj", */ f:parseuint16 },
	/*::[*/0x0090/*::]*/: { /* n:"Sort", */ },
	/*::[*/0x0092/*::]*/: { /* n:"Palette", */ f:parse_Palette },
	/*::[*/0x0097/*::]*/: { /* n:"Sync", */ },
	/*::[*/0x0098/*::]*/: { /* n:"LPr", */ },
	/*::[*/0x0099/*::]*/: { /* n:"DxGCol", */ },
	/*::[*/0x009a/*::]*/: { /* n:"FnGroupName", */ },
	/*::[*/0x009b/*::]*/: { /* n:"FilterMode", */ },
	/*::[*/0x009c/*::]*/: { /* n:"BuiltInFnGroupCount", */ f:parseuint16 },
	/*::[*/0x009d/*::]*/: { /* n:"AutoFilterInfo", */ },
	/*::[*/0x009e/*::]*/: { /* n:"AutoFilter", */ },
	/*::[*/0x00a0/*::]*/: { /* n:"Scl", */ f:parse_Scl },
	/*::[*/0x00a1/*::]*/: { /* n:"Setup", */ f:parse_Setup },
	/*::[*/0x00ae/*::]*/: { /* n:"ScenMan", */ },
	/*::[*/0x00af/*::]*/: { /* n:"SCENARIO", */ },
	/*::[*/0x00b0/*::]*/: { /* n:"SxView", */ },
	/*::[*/0x00b1/*::]*/: { /* n:"Sxvd", */ },
	/*::[*/0x00b2/*::]*/: { /* n:"SXVI", */ },
	/*::[*/0x00b4/*::]*/: { /* n:"SxIvd", */ },
	/*::[*/0x00b5/*::]*/: { /* n:"SXLI", */ },
	/*::[*/0x00b6/*::]*/: { /* n:"SXPI", */ },
	/*::[*/0x00b8/*::]*/: { /* n:"DocRoute", */ },
	/*::[*/0x00b9/*::]*/: { /* n:"RecipName", */ },
	/*::[*/0x00bd/*::]*/: { /* n:"MulRk", */ f:parse_MulRk },
	/*::[*/0x00be/*::]*/: { /* n:"MulBlank", */ f:parse_MulBlank },
	/*::[*/0x00c1/*::]*/: { /* n:"Mms", */ f:parsenoop2 },
	/*::[*/0x00c5/*::]*/: { /* n:"SXDI", */ },
	/*::[*/0x00c6/*::]*/: { /* n:"SXDB", */ },
	/*::[*/0x00c7/*::]*/: { /* n:"SXFDB", */ },
	/*::[*/0x00c8/*::]*/: { /* n:"SXDBB", */ },
	/*::[*/0x00c9/*::]*/: { /* n:"SXNum", */ },
	/*::[*/0x00ca/*::]*/: { /* n:"SxBool", */ f:parsebool },
	/*::[*/0x00cb/*::]*/: { /* n:"SxErr", */ },
	/*::[*/0x00cc/*::]*/: { /* n:"SXInt", */ },
	/*::[*/0x00cd/*::]*/: { /* n:"SXString", */ },
	/*::[*/0x00ce/*::]*/: { /* n:"SXDtr", */ },
	/*::[*/0x00cf/*::]*/: { /* n:"SxNil", */ },
	/*::[*/0x00d0/*::]*/: { /* n:"SXTbl", */ },
	/*::[*/0x00d1/*::]*/: { /* n:"SXTBRGIITM", */ },
	/*::[*/0x00d2/*::]*/: { /* n:"SxTbpg", */ },
	/*::[*/0x00d3/*::]*/: { /* n:"ObProj", */ },
	/*::[*/0x00d5/*::]*/: { /* n:"SXStreamID", */ },
	/*::[*/0x00d7/*::]*/: { /* n:"DBCell", */ },
	/*::[*/0x00d8/*::]*/: { /* n:"SXRng", */ },
	/*::[*/0x00d9/*::]*/: { /* n:"SxIsxoper", */ },
	/*::[*/0x00da/*::]*/: { /* n:"BookBool", */ f:parseuint16 },
	/*::[*/0x00dc/*::]*/: { /* n:"DbOrParamQry", */ },
	/*::[*/0x00dd/*::]*/: { /* n:"ScenarioProtect", */ f:parsebool },
	/*::[*/0x00de/*::]*/: { /* n:"OleObjectSize", */ },
	/*::[*/0x00e0/*::]*/: { /* n:"XF", */ f:parse_XF },
	/*::[*/0x00e1/*::]*/: { /* n:"InterfaceHdr", */ f:parse_InterfaceHdr },
	/*::[*/0x00e2/*::]*/: { /* n:"InterfaceEnd", */ f:parsenoop2 },
	/*::[*/0x00e3/*::]*/: { /* n:"SXVS", */ },
	/*::[*/0x00e5/*::]*/: { /* n:"MergeCells", */ f:parse_MergeCells },
	/*::[*/0x00e9/*::]*/: { /* n:"BkHim", */ },
	/*::[*/0x00eb/*::]*/: { /* n:"MsoDrawingGroup", */ },
	/*::[*/0x00ec/*::]*/: { /* n:"MsoDrawing", */ },
	/*::[*/0x00ed/*::]*/: { /* n:"MsoDrawingSelection", */ },
	/*::[*/0x00ef/*::]*/: { /* n:"PhoneticInfo", */ },
	/*::[*/0x00f0/*::]*/: { /* n:"SxRule", */ },
	/*::[*/0x00f1/*::]*/: { /* n:"SXEx", */ },
	/*::[*/0x00f2/*::]*/: { /* n:"SxFilt", */ },
	/*::[*/0x00f4/*::]*/: { /* n:"SxDXF", */ },
	/*::[*/0x00f5/*::]*/: { /* n:"SxItm", */ },
	/*::[*/0x00f6/*::]*/: { /* n:"SxName", */ },
	/*::[*/0x00f7/*::]*/: { /* n:"SxSelect", */ },
	/*::[*/0x00f8/*::]*/: { /* n:"SXPair", */ },
	/*::[*/0x00f9/*::]*/: { /* n:"SxFmla", */ },
	/*::[*/0x00fb/*::]*/: { /* n:"SxFormat", */ },
	/*::[*/0x00fc/*::]*/: { /* n:"SST", */ f:parse_SST },
	/*::[*/0x00fd/*::]*/: { /* n:"LabelSst", */ f:parse_LabelSst },
	/*::[*/0x00ff/*::]*/: { /* n:"ExtSST", */ f:parse_ExtSST },
	/*::[*/0x0100/*::]*/: { /* n:"SXVDEx", */ },
	/*::[*/0x0103/*::]*/: { /* n:"SXFormula", */ },
	/*::[*/0x0122/*::]*/: { /* n:"SXDBEx", */ },
	/*::[*/0x0137/*::]*/: { /* n:"RRDInsDel", */ },
	/*::[*/0x0138/*::]*/: { /* n:"RRDHead", */ },
	/*::[*/0x013b/*::]*/: { /* n:"RRDChgCell", */ },
	/*::[*/0x013d/*::]*/: { /* n:"RRTabId", */ f:parseuint16a },
	/*::[*/0x013e/*::]*/: { /* n:"RRDRenSheet", */ },
	/*::[*/0x013f/*::]*/: { /* n:"RRSort", */ },
	/*::[*/0x0140/*::]*/: { /* n:"RRDMove", */ },
	/*::[*/0x014a/*::]*/: { /* n:"RRFormat", */ },
	/*::[*/0x014b/*::]*/: { /* n:"RRAutoFmt", */ },
	/*::[*/0x014d/*::]*/: { /* n:"RRInsertSh", */ },
	/*::[*/0x014e/*::]*/: { /* n:"RRDMoveBegin", */ },
	/*::[*/0x014f/*::]*/: { /* n:"RRDMoveEnd", */ },
	/*::[*/0x0150/*::]*/: { /* n:"RRDInsDelBegin", */ },
	/*::[*/0x0151/*::]*/: { /* n:"RRDInsDelEnd", */ },
	/*::[*/0x0152/*::]*/: { /* n:"RRDConflict", */ },
	/*::[*/0x0153/*::]*/: { /* n:"RRDDefName", */ },
	/*::[*/0x0154/*::]*/: { /* n:"RRDRstEtxp", */ },
	/*::[*/0x015f/*::]*/: { /* n:"LRng", */ },
	/*::[*/0x0160/*::]*/: { /* n:"UsesELFs", */ f:parsebool },
	/*::[*/0x0161/*::]*/: { /* n:"DSF", */ f:parsenoop2 },
	/*::[*/0x0191/*::]*/: { /* n:"CUsr", */ },
	/*::[*/0x0192/*::]*/: { /* n:"CbUsr", */ },
	/*::[*/0x0193/*::]*/: { /* n:"UsrInfo", */ },
	/*::[*/0x0194/*::]*/: { /* n:"UsrExcl", */ },
	/*::[*/0x0195/*::]*/: { /* n:"FileLock", */ },
	/*::[*/0x0196/*::]*/: { /* n:"RRDInfo", */ },
	/*::[*/0x0197/*::]*/: { /* n:"BCUsrs", */ },
	/*::[*/0x0198/*::]*/: { /* n:"UsrChk", */ },
	/*::[*/0x01a9/*::]*/: { /* n:"UserBView", */ },
	/*::[*/0x01aa/*::]*/: { /* n:"UserSViewBegin", */ },
	/*::[*/0x01ab/*::]*/: { /* n:"UserSViewEnd", */ },
	/*::[*/0x01ac/*::]*/: { /* n:"RRDUserView", */ },
	/*::[*/0x01ad/*::]*/: { /* n:"Qsi", */ },
	/*::[*/0x01ae/*::]*/: { /* n:"SupBook", */ f:parse_SupBook },
	/*::[*/0x01af/*::]*/: { /* n:"Prot4Rev", */ f:parsebool },
	/*::[*/0x01b0/*::]*/: { /* n:"CondFmt", */ },
	/*::[*/0x01b1/*::]*/: { /* n:"CF", */ },
	/*::[*/0x01b2/*::]*/: { /* n:"DVal", */ },
	/*::[*/0x01b5/*::]*/: { /* n:"DConBin", */ },
	/*::[*/0x01b6/*::]*/: { /* n:"TxO", */ f:parse_TxO },
	/*::[*/0x01b7/*::]*/: { /* n:"RefreshAll", */ f:parsebool }, //
	/*::[*/0x01b8/*::]*/: { /* n:"HLink", */ f:parse_HLink },
	/*::[*/0x01b9/*::]*/: { /* n:"Lel", */ },
	/*::[*/0x01ba/*::]*/: { /* n:"CodeName", */ f:parse_XLUnicodeString },
	/*::[*/0x01bb/*::]*/: { /* n:"SXFDBType", */ },
	/*::[*/0x01bc/*::]*/: { /* n:"Prot4RevPass", */ f:parseuint16 },
	/*::[*/0x01bd/*::]*/: { /* n:"ObNoMacros", */ },
	/*::[*/0x01be/*::]*/: { /* n:"Dv", */ },
	/*::[*/0x01c0/*::]*/: { /* n:"Excel9File", */ f:parsenoop2 },
	/*::[*/0x01c1/*::]*/: { /* n:"RecalcId", */ f:parse_RecalcId, r:2},
	/*::[*/0x01c2/*::]*/: { /* n:"EntExU2", */ f:parsenoop2 },
	/*::[*/0x0200/*::]*/: { /* n:"Dimensions", */ f:parse_Dimensions },
	/*::[*/0x0201/*::]*/: { /* n:"Blank", */ f:parse_Blank },
	/*::[*/0x0203/*::]*/: { /* n:"Number", */ f:parse_Number },
	/*::[*/0x0204/*::]*/: { /* n:"Label", */ f:parse_Label },
	/*::[*/0x0205/*::]*/: { /* n:"BoolErr", */ f:parse_BoolErr },
	/*::[*/0x0207/*::]*/: { /* n:"String", */ f:parse_String },
	/*::[*/0x0208/*::]*/: { /* n:"Row", */ f:parse_Row },
	/*::[*/0x020b/*::]*/: { /* n:"Index", */ },
	/*::[*/0x0221/*::]*/: { /* n:"Array", */ f:parse_Array },
	/*::[*/0x0225/*::]*/: { /* n:"DefaultRowHeight", */ f:parse_DefaultRowHeight },
	/*::[*/0x0236/*::]*/: { /* n:"Table", */ },
	/*::[*/0x023e/*::]*/: { /* n:"Window2", */ f:parse_Window2 },
	/*::[*/0x027e/*::]*/: { /* n:"RK", */ f:parse_RK },
	/*::[*/0x0293/*::]*/: { /* n:"Style", */ },
	/*::[*/0x0418/*::]*/: { /* n:"BigName", */ },
	/*::[*/0x041e/*::]*/: { /* n:"Format", */ f:parse_Format },
	/*::[*/0x043c/*::]*/: { /* n:"ContinueBigName", */ },
	/*::[*/0x04bc/*::]*/: { /* n:"ShrFmla", */ f:parse_ShrFmla },
	/*::[*/0x0800/*::]*/: { /* n:"HLinkTooltip", */ f:parse_HLinkTooltip },
	/*::[*/0x0801/*::]*/: { /* n:"WebPub", */ },
	/*::[*/0x0802/*::]*/: { /* n:"QsiSXTag", */ },
	/*::[*/0x0803/*::]*/: { /* n:"DBQueryExt", */ },
	/*::[*/0x0804/*::]*/: { /* n:"ExtString", */ },
	/*::[*/0x0805/*::]*/: { /* n:"TxtQry", */ },
	/*::[*/0x0806/*::]*/: { /* n:"Qsir", */ },
	/*::[*/0x0807/*::]*/: { /* n:"Qsif", */ },
	/*::[*/0x0808/*::]*/: { /* n:"RRDTQSIF", */ },
	/*::[*/0x0809/*::]*/: { /* n:"BOF", */ f:parse_BOF },
	/*::[*/0x080a/*::]*/: { /* n:"OleDbConn", */ },
	/*::[*/0x080b/*::]*/: { /* n:"WOpt", */ },
	/*::[*/0x080c/*::]*/: { /* n:"SXViewEx", */ },
	/*::[*/0x080d/*::]*/: { /* n:"SXTH", */ },
	/*::[*/0x080e/*::]*/: { /* n:"SXPIEx", */ },
	/*::[*/0x080f/*::]*/: { /* n:"SXVDTEx", */ },
	/*::[*/0x0810/*::]*/: { /* n:"SXViewEx9", */ },
	/*::[*/0x0812/*::]*/: { /* n:"ContinueFrt", */ },
	/*::[*/0x0813/*::]*/: { /* n:"RealTimeData", */ },
	/*::[*/0x0850/*::]*/: { /* n:"ChartFrtInfo", */ },
	/*::[*/0x0851/*::]*/: { /* n:"FrtWrapper", */ },
	/*::[*/0x0852/*::]*/: { /* n:"StartBlock", */ },
	/*::[*/0x0853/*::]*/: { /* n:"EndBlock", */ },
	/*::[*/0x0854/*::]*/: { /* n:"StartObject", */ },
	/*::[*/0x0855/*::]*/: { /* n:"EndObject", */ },
	/*::[*/0x0856/*::]*/: { /* n:"CatLab", */ },
	/*::[*/0x0857/*::]*/: { /* n:"YMult", */ },
	/*::[*/0x0858/*::]*/: { /* n:"SXViewLink", */ },
	/*::[*/0x0859/*::]*/: { /* n:"PivotChartBits", */ },
	/*::[*/0x085a/*::]*/: { /* n:"FrtFontList", */ },
	/*::[*/0x0862/*::]*/: { /* n:"SheetExt", */ },
	/*::[*/0x0863/*::]*/: { /* n:"BookExt", */ r:12},
	/*::[*/0x0864/*::]*/: { /* n:"SXAddl", */ },
	/*::[*/0x0865/*::]*/: { /* n:"CrErr", */ },
	/*::[*/0x0866/*::]*/: { /* n:"HFPicture", */ },
	/*::[*/0x0867/*::]*/: { /* n:"FeatHdr", */ f:parsenoop2 },
	/*::[*/0x0868/*::]*/: { /* n:"Feat", */ },
	/*::[*/0x086a/*::]*/: { /* n:"DataLabExt", */ },
	/*::[*/0x086b/*::]*/: { /* n:"DataLabExtContents", */ },
	/*::[*/0x086c/*::]*/: { /* n:"CellWatch", */ },
	/*::[*/0x0871/*::]*/: { /* n:"FeatHdr11", */ },
	/*::[*/0x0872/*::]*/: { /* n:"Feature11", */ },
	/*::[*/0x0874/*::]*/: { /* n:"DropDownObjIds", */ },
	/*::[*/0x0875/*::]*/: { /* n:"ContinueFrt11", */ },
	/*::[*/0x0876/*::]*/: { /* n:"DConn", */ },
	/*::[*/0x0877/*::]*/: { /* n:"List12", */ },
	/*::[*/0x0878/*::]*/: { /* n:"Feature12", */ },
	/*::[*/0x0879/*::]*/: { /* n:"CondFmt12", */ },
	/*::[*/0x087a/*::]*/: { /* n:"CF12", */ },
	/*::[*/0x087b/*::]*/: { /* n:"CFEx", */ },
	/*::[*/0x087c/*::]*/: { /* n:"XFCRC", */ f:parse_XFCRC, r:12 },
	/*::[*/0x087d/*::]*/: { /* n:"XFExt", */ f:parse_XFExt, r:12 },
	/*::[*/0x087e/*::]*/: { /* n:"AutoFilter12", */ },
	/*::[*/0x087f/*::]*/: { /* n:"ContinueFrt12", */ },
	/*::[*/0x0884/*::]*/: { /* n:"MDTInfo", */ },
	/*::[*/0x0885/*::]*/: { /* n:"MDXStr", */ },
	/*::[*/0x0886/*::]*/: { /* n:"MDXTuple", */ },
	/*::[*/0x0887/*::]*/: { /* n:"MDXSet", */ },
	/*::[*/0x0888/*::]*/: { /* n:"MDXProp", */ },
	/*::[*/0x0889/*::]*/: { /* n:"MDXKPI", */ },
	/*::[*/0x088a/*::]*/: { /* n:"MDB", */ },
	/*::[*/0x088b/*::]*/: { /* n:"PLV", */ },
	/*::[*/0x088c/*::]*/: { /* n:"Compat12", */ f:parsebool, r:12 },
	/*::[*/0x088d/*::]*/: { /* n:"DXF", */ },
	/*::[*/0x088e/*::]*/: { /* n:"TableStyles", */ r:12 },
	/*::[*/0x088f/*::]*/: { /* n:"TableStyle", */ },
	/*::[*/0x0890/*::]*/: { /* n:"TableStyleElement", */ },
	/*::[*/0x0892/*::]*/: { /* n:"StyleExt", */ },
	/*::[*/0x0893/*::]*/: { /* n:"NamePublish", */ },
	/*::[*/0x0894/*::]*/: { /* n:"NameCmt", */ f:parse_NameCmt, r:12 },
	/*::[*/0x0895/*::]*/: { /* n:"SortData", */ },
	/*::[*/0x0896/*::]*/: { /* n:"Theme", */ f:parse_Theme, r:12 },
	/*::[*/0x0897/*::]*/: { /* n:"GUIDTypeLib", */ },
	/*::[*/0x0898/*::]*/: { /* n:"FnGrp12", */ },
	/*::[*/0x0899/*::]*/: { /* n:"NameFnGrp12", */ },
	/*::[*/0x089a/*::]*/: { /* n:"MTRSettings", */ f:parse_MTRSettings, r:12 },
	/*::[*/0x089b/*::]*/: { /* n:"CompressPictures", */ f:parsenoop2 },
	/*::[*/0x089c/*::]*/: { /* n:"HeaderFooter", */ },
	/*::[*/0x089d/*::]*/: { /* n:"CrtLayout12", */ },
	/*::[*/0x089e/*::]*/: { /* n:"CrtMlFrt", */ },
	/*::[*/0x089f/*::]*/: { /* n:"CrtMlFrtContinue", */ },
	/*::[*/0x08a3/*::]*/: { /* n:"ForceFullCalculation", */ f:parse_ForceFullCalculation },
	/*::[*/0x08a4/*::]*/: { /* n:"ShapePropsStream", */ },
	/*::[*/0x08a5/*::]*/: { /* n:"TextPropsStream", */ },
	/*::[*/0x08a6/*::]*/: { /* n:"RichTextStream", */ },
	/*::[*/0x08a7/*::]*/: { /* n:"CrtLayout12A", */ },
	/*::[*/0x1001/*::]*/: { /* n:"Units", */ },
	/*::[*/0x1002/*::]*/: { /* n:"Chart", */ },
	/*::[*/0x1003/*::]*/: { /* n:"Series", */ },
	/*::[*/0x1006/*::]*/: { /* n:"DataFormat", */ },
	/*::[*/0x1007/*::]*/: { /* n:"LineFormat", */ },
	/*::[*/0x1009/*::]*/: { /* n:"MarkerFormat", */ },
	/*::[*/0x100a/*::]*/: { /* n:"AreaFormat", */ },
	/*::[*/0x100b/*::]*/: { /* n:"PieFormat", */ },
	/*::[*/0x100c/*::]*/: { /* n:"AttachedLabel", */ },
	/*::[*/0x100d/*::]*/: { /* n:"SeriesText", */ },
	/*::[*/0x1014/*::]*/: { /* n:"ChartFormat", */ },
	/*::[*/0x1015/*::]*/: { /* n:"Legend", */ },
	/*::[*/0x1016/*::]*/: { /* n:"SeriesList", */ },
	/*::[*/0x1017/*::]*/: { /* n:"Bar", */ },
	/*::[*/0x1018/*::]*/: { /* n:"Line", */ },
	/*::[*/0x1019/*::]*/: { /* n:"Pie", */ },
	/*::[*/0x101a/*::]*/: { /* n:"Area", */ },
	/*::[*/0x101b/*::]*/: { /* n:"Scatter", */ },
	/*::[*/0x101c/*::]*/: { /* n:"CrtLine", */ },
	/*::[*/0x101d/*::]*/: { /* n:"Axis", */ },
	/*::[*/0x101e/*::]*/: { /* n:"Tick", */ },
	/*::[*/0x101f/*::]*/: { /* n:"ValueRange", */ },
	/*::[*/0x1020/*::]*/: { /* n:"CatSerRange", */ },
	/*::[*/0x1021/*::]*/: { /* n:"AxisLine", */ },
	/*::[*/0x1022/*::]*/: { /* n:"CrtLink", */ },
	/*::[*/0x1024/*::]*/: { /* n:"DefaultText", */ },
	/*::[*/0x1025/*::]*/: { /* n:"Text", */ },
	/*::[*/0x1026/*::]*/: { /* n:"FontX", */ f:parseuint16 },
	/*::[*/0x1027/*::]*/: { /* n:"ObjectLink", */ },
	/*::[*/0x1032/*::]*/: { /* n:"Frame", */ },
	/*::[*/0x1033/*::]*/: { /* n:"Begin", */ },
	/*::[*/0x1034/*::]*/: { /* n:"End", */ },
	/*::[*/0x1035/*::]*/: { /* n:"PlotArea", */ },
	/*::[*/0x103a/*::]*/: { /* n:"Chart3d", */ },
	/*::[*/0x103c/*::]*/: { /* n:"PicF", */ },
	/*::[*/0x103d/*::]*/: { /* n:"DropBar", */ },
	/*::[*/0x103e/*::]*/: { /* n:"Radar", */ },
	/*::[*/0x103f/*::]*/: { /* n:"Surf", */ },
	/*::[*/0x1040/*::]*/: { /* n:"RadarArea", */ },
	/*::[*/0x1041/*::]*/: { /* n:"AxisParent", */ },
	/*::[*/0x1043/*::]*/: { /* n:"LegendException", */ },
	/*::[*/0x1044/*::]*/: { /* n:"ShtProps", */ f:parse_ShtProps },
	/*::[*/0x1045/*::]*/: { /* n:"SerToCrt", */ },
	/*::[*/0x1046/*::]*/: { /* n:"AxesUsed", */ },
	/*::[*/0x1048/*::]*/: { /* n:"SBaseRef", */ },
	/*::[*/0x104a/*::]*/: { /* n:"SerParent", */ },
	/*::[*/0x104b/*::]*/: { /* n:"SerAuxTrend", */ },
	/*::[*/0x104e/*::]*/: { /* n:"IFmtRecord", */ },
	/*::[*/0x104f/*::]*/: { /* n:"Pos", */ },
	/*::[*/0x1050/*::]*/: { /* n:"AlRuns", */ },
	/*::[*/0x1051/*::]*/: { /* n:"BRAI", */ },
	/*::[*/0x105b/*::]*/: { /* n:"SerAuxErrBar", */ },
	/*::[*/0x105c/*::]*/: { /* n:"ClrtClient", */ f:parse_ClrtClient },
	/*::[*/0x105d/*::]*/: { /* n:"SerFmt", */ },
	/*::[*/0x105f/*::]*/: { /* n:"Chart3DBarShape", */ },
	/*::[*/0x1060/*::]*/: { /* n:"Fbi", */ },
	/*::[*/0x1061/*::]*/: { /* n:"BopPop", */ },
	/*::[*/0x1062/*::]*/: { /* n:"AxcExt", */ },
	/*::[*/0x1063/*::]*/: { /* n:"Dat", */ },
	/*::[*/0x1064/*::]*/: { /* n:"PlotGrowth", */ },
	/*::[*/0x1065/*::]*/: { /* n:"SIIndex", */ },
	/*::[*/0x1066/*::]*/: { /* n:"GelFrame", */ },
	/*::[*/0x1067/*::]*/: { /* n:"BopPopCustom", */ },
	/*::[*/0x1068/*::]*/: { /* n:"Fbi2", */ },

	/*::[*/0x0000/*::]*/: { /* n:"Dimensions", */ f:parse_Dimensions },
	/*::[*/0x0001/*::]*/: { /* n:"BIFF2BLANK", */ },
	/*::[*/0x0002/*::]*/: { /* n:"BIFF2INT", */ f:parse_BIFF2INT },
	/*::[*/0x0003/*::]*/: { /* n:"BIFF2NUM", */ f:parse_BIFF2NUM },
	/*::[*/0x0004/*::]*/: { /* n:"BIFF2STR", */ f:parse_BIFF2STR },
	/*::[*/0x0005/*::]*/: { /* n:"BoolErr", */ f:parse_BoolErr },
	/*::[*/0x0007/*::]*/: { /* n:"String", */ f:parse_BIFF2STRING },
	/*::[*/0x0008/*::]*/: { /* n:"BIFF2ROW", */ },
	/*::[*/0x0009/*::]*/: { /* n:"BOF", */ f:parse_BOF },
	/*::[*/0x000b/*::]*/: { /* n:"Index", */ },
	/*::[*/0x0016/*::]*/: { /* n:"ExternCount", */ f:parseuint16 },
	/*::[*/0x001e/*::]*/: { /* n:"BIFF2FORMAT", */ f:parse_BIFF2Format },
	/*::[*/0x001f/*::]*/: { /* n:"BIFF2FMTCNT", */ }, /* 16-bit cnt of BIFF2FORMAT records */
	/*::[*/0x0020/*::]*/: { /* n:"BIFF2COLINFO", */ },
	/*::[*/0x0021/*::]*/: { /* n:"Array", */ f:parse_Array },
	/*::[*/0x0024/*::]*/: { /* n:"COLWIDTH", */ },
	/*::[*/0x0025/*::]*/: { /* n:"DefaultRowHeight", */ f:parse_DefaultRowHeight },
	// 0x2c ??
	// 0x2d ??
	// 0x2e ??
	// 0x30 FONTCOUNT: number of fonts
	/*::[*/0x0032/*::]*/: { /* n:"BIFF2FONTXTRA", */ f:parse_BIFF2FONTXTRA },
	// 0x35: INFOOPTS
	// 0x36: TABLE (BIFF2 only)
	// 0x37: TABLE2 (BIFF2 only)
	// 0x38: WNDESK
	// 0x39 ??
	// 0x3a: BEGINPREF
	// 0x3b: ENDPREF
	/*::[*/0x003e/*::]*/: { /* n:"BIFF2WINDOW2", */ },
	// 0x3f ??
	// 0x46: SHOWSCROLL
	// 0x47: SHOWFORMULA
	// 0x48: STATUSBAR
	// 0x49: SHORTMENUS
	// 0x4A:
	// 0x4B:
	// 0x4C:
	// 0x4E:
	// 0x4F:
	// 0x58: TOOLBAR (BIFF3)

	/* - - - */
	/*::[*/0x0034/*::]*/: { /* n:"DDEObjName", */ },
	/*::[*/0x0043/*::]*/: { /* n:"BIFF2XF", */ },
	/*::[*/0x0044/*::]*/: { /* n:"BIFF2XFINDEX", */ f:parseuint16 },
	/*::[*/0x0045/*::]*/: { /* n:"BIFF2FONTCLR", */ },
	/*::[*/0x0056/*::]*/: { /* n:"BIFF4FMTCNT", */ }, /* 16-bit cnt, similar to BIFF2 */
	/*::[*/0x007e/*::]*/: { /* n:"RK", */ }, /* Not necessarily same as 0x027e */
	/*::[*/0x007f/*::]*/: { /* n:"ImData", */ f:parse_ImData },
	/*::[*/0x0087/*::]*/: { /* n:"Addin", */ },
	/*::[*/0x0088/*::]*/: { /* n:"Edg", */ },
	/*::[*/0x0089/*::]*/: { /* n:"Pub", */ },
	// 0x8A
	// 0x8B LH: alternate menu key flag (BIFF3/4)
	// 0x8E
	// 0x8F
	/*::[*/0x0091/*::]*/: { /* n:"Sub", */ },
	// 0x93 STYLE
	/*::[*/0x0094/*::]*/: { /* n:"LHRecord", */ },
	/*::[*/0x0095/*::]*/: { /* n:"LHNGraph", */ },
	/*::[*/0x0096/*::]*/: { /* n:"Sound", */ },
	// 0xA2 FNPROTO: function prototypes (BIFF4)
	// 0xA3
	// 0xA8
	/*::[*/0x00a9/*::]*/: { /* n:"CoordList", */ },
	/*::[*/0x00ab/*::]*/: { /* n:"GCW", */ },
	/*::[*/0x00bc/*::]*/: { /* n:"ShrFmla", */ }, /* Not necessarily same as 0x04bc */
	/*::[*/0x00bf/*::]*/: { /* n:"ToolbarHdr", */ },
	/*::[*/0x00c0/*::]*/: { /* n:"ToolbarEnd", */ },
	/*::[*/0x00c2/*::]*/: { /* n:"AddMenu", */ },
	/*::[*/0x00c3/*::]*/: { /* n:"DelMenu", */ },
	/*::[*/0x00d6/*::]*/: { /* n:"RString", */ f:parse_RString },
	/*::[*/0x00df/*::]*/: { /* n:"UDDesc", */ },
	/*::[*/0x00ea/*::]*/: { /* n:"TabIdConf", */ },
	/*::[*/0x0162/*::]*/: { /* n:"XL5Modify", */ },
	/*::[*/0x01a5/*::]*/: { /* n:"FileSharing2", */ },
	/*::[*/0x0206/*::]*/: { /* n:"Formula", */ f:parse_Formula },
	/*::[*/0x0209/*::]*/: { /* n:"BOF", */ f:parse_BOF },
	/*::[*/0x0218/*::]*/: { /* n:"Lbl", */ f:parse_Lbl },
	/*::[*/0x0223/*::]*/: { /* n:"ExternName", */ f:parse_ExternName },
	/*::[*/0x0231/*::]*/: { /* n:"Font", */ },
	/*::[*/0x0243/*::]*/: { /* n:"BIFF3XF", */ },
	/*::[*/0x0406/*::]*/: { /* n:"Formula", */ f:parse_Formula },
	/*::[*/0x0409/*::]*/: { /* n:"BOF", */ f:parse_BOF },
	/*::[*/0x0443/*::]*/: { /* n:"BIFF4XF", */ },
	/*::[*/0x086d/*::]*/: { /* n:"FeatInfo", */ },
	/*::[*/0x0873/*::]*/: { /* n:"FeatInfo11", */ },
	/*::[*/0x0881/*::]*/: { /* n:"SXAddl12", */ },
	/*::[*/0x08c0/*::]*/: { /* n:"AutoWebPub", */ },
	/*::[*/0x08c1/*::]*/: { /* n:"ListObj", */ },
	/*::[*/0x08c2/*::]*/: { /* n:"ListField", */ },
	/*::[*/0x08c3/*::]*/: { /* n:"ListDV", */ },
	/*::[*/0x08c4/*::]*/: { /* n:"ListCondFmt", */ },
	/*::[*/0x08c5/*::]*/: { /* n:"ListCF", */ },
	/*::[*/0x08c6/*::]*/: { /* n:"FMQry", */ },
	/*::[*/0x08c7/*::]*/: { /* n:"FMSQry", */ },
	/*::[*/0x08c8/*::]*/: { /* n:"PLV", */ },
	/*::[*/0x08c9/*::]*/: { /* n:"LnExt", */ },
	/*::[*/0x08ca/*::]*/: { /* n:"MkrExt", */ },
	/*::[*/0x08cb/*::]*/: { /* n:"CrtCoopt", */ },
	/*::[*/0x08d6/*::]*/: { /* n:"FRTArchId$", */ r:12 },

	/*::[*/0x7262/*::]*/: {}
};

function write_biff_rec(ba/*:BufArray*/, type/*:number*/, payload, length/*:?number*/)/*:void*/ {
	var t/*:number*/ = type;
	if(isNaN(t)) return;
	var len = length || (payload||[]).length || 0;
	var o = ba.next(4);
	o.write_shift(2, t);
	o.write_shift(2, len);
	if(/*:: len != null &&*/len > 0 && is_buf(payload)) ba.push(payload);
}

function write_biff_continue(ba/*:BufArray*/, type/*:number*/, payload, length/*:?number*/)/*:void*/ {
	var len = length || (payload||[]).length || 0;
	if(len <= 8224) return write_biff_rec(ba, type, payload, len);
	var t = type;
	if(isNaN(t)) return;
	var parts = payload.parts || [], sidx = 0;
	var i = 0, w = 0;
	while(w + (parts[sidx] || 8224) <= 8224) { w+= (parts[sidx] || 8224); sidx++; }
	var o = ba.next(4);
	o.write_shift(2, t);
	o.write_shift(2, w);
	ba.push(payload.slice(i, i + w));
	i += w;
	while(i < len) {
		o = ba.next(4);
		o.write_shift(2, 0x3c); // TODO: figure out correct continue type
		w = 0;
		while(w + (parts[sidx] || 8224) <= 8224) { w+= (parts[sidx] || 8224); sidx++; }
		o.write_shift(2, w);
		ba.push(payload.slice(i, i+w)); i+= w;
	}
}

function write_BIFF2Cell(out, r/*:number*/, c/*:number*/) {
	if(!out) out = new_buf(7);
	out.write_shift(2, r);
	out.write_shift(2, c);
	out.write_shift(2, 0);
	out.write_shift(1, 0);
	return out;
}

function write_BIFF2BERR(r/*:number*/, c/*:number*/, val, t/*:?string*/) {
	var out = new_buf(9);
	write_BIFF2Cell(out, r, c);
	write_Bes(val, t || 'b', out);
	return out;
}

/* TODO: codepage, large strings */
function write_BIFF2LABEL(r/*:number*/, c/*:number*/, val) {
	var out = new_buf(8 + 2*val.length);
	write_BIFF2Cell(out, r, c);
	out.write_shift(1, val.length);
	out.write_shift(val.length, val, 'sbcs');
	return out.l < out.length ? out.slice(0, out.l) : out;
}

function write_ws_biff2_cell(ba/*:BufArray*/, cell/*:Cell*/, R/*:number*/, C/*:number*//*::, opts*/) {
	if(cell.v != null) switch(cell.t) {
		case 'd': case 'n':
			var v = cell.t == 'd' ? datenum(parseDate(cell.v)) : cell.v;
			if((v == (v|0)) && (v >= 0) && (v < 65536))
				write_biff_rec(ba, 0x0002, write_BIFF2INT(R, C, v));
			else
				write_biff_rec(ba, 0x0003, write_BIFF2NUM(R,C, v));
			return;
		case 'b': case 'e': write_biff_rec(ba, 0x0005, write_BIFF2BERR(R, C, cell.v, cell.t)); return;
		/* TODO: codepage, sst */
		case 's': case 'str':
			write_biff_rec(ba, 0x0004, write_BIFF2LABEL(R, C, (cell.v||"").slice(0,255)));
			return;
	}
	write_biff_rec(ba, 0x0001, write_BIFF2Cell(null, R, C));
}

function write_ws_biff2(ba/*:BufArray*/, ws/*:Worksheet*/, idx/*:number*/, opts/*::, wb:Workbook*/) {
	var dense = Array.isArray(ws);
	var range = safe_decode_range(ws['!ref'] || "A1"), ref/*:string*/, rr = "", cols/*:Array<string>*/ = [];
	if(range.e.c > 0xFF || range.e.r > 0x3FFF) {
		if(opts.WTF) throw new Error("Range " + (ws['!ref'] || "A1") + " exceeds format limit A1:IV16384");
		range.e.c = Math.min(range.e.c, 0xFF);
		range.e.r = Math.min(range.e.c, 0x3FFF);
		ref = encode_range(range);
	}
	for(var R = range.s.r; R <= range.e.r; ++R) {
		rr = encode_row(R);
		for(var C = range.s.c; C <= range.e.c; ++C) {
			if(R === range.s.r) cols[C] = encode_col(C);
			ref = cols[C] + rr;
			var cell = dense ? (ws[R]||[])[C] : ws[ref];
			if(!cell) continue;
			/* write cell */
			write_ws_biff2_cell(ba, cell, R, C, opts);
		}
	}
}

/* Based on test files */
function write_biff2_buf(wb/*:Workbook*/, opts/*:WriteOpts*/) {
	var o = opts || {};
	if(DENSE != null && o.dense == null) o.dense = DENSE;
	var ba = buf_array();
	var idx = 0;
	for(var i=0;i<wb.SheetNames.length;++i) if(wb.SheetNames[i] == o.sheet) idx=i;
	if(idx == 0 && !!o.sheet && wb.SheetNames[0] != o.sheet) throw new Error("Sheet not found: " + o.sheet);
	write_biff_rec(ba, (o.biff == 4 ? 0x0409 : (o.biff == 3 ? 0x0209 : 0x0009)), write_BOF(wb, 0x10, o));
	/* ... */
	write_ws_biff2(ba, wb.Sheets[wb.SheetNames[idx]], idx, o, wb);
	/* ... */
	write_biff_rec(ba, 0x000A);
	return ba.end();
}

function write_FONTS_biff8(ba, data, opts) {
	write_biff_rec(ba, 0x0031 /* Font */, write_Font({
		sz:12,
		color: {theme:1},
		name: "Arial",
		family: 2,
		scheme: "minor"
	}, opts));
}


function write_FMTS_biff8(ba, NF/*:?SSFTable*/, opts) {
	if(!NF) return;
	[[5,8],[23,26],[41,44],[/*63*/50,/*66],[164,*/392]].forEach(function(r) {
		/*:: if(!NF) return; */
		for(var i = r[0]; i <= r[1]; ++i) if(NF[i] != null) write_biff_rec(ba, 0x041E /* Format */, write_Format(i, NF[i], opts));
	});
}

function write_FEAT(ba, ws) {
	/* [MS-XLS] 2.4.112 */
	var o = new_buf(19);
	o.write_shift(4, 0x867); o.write_shift(4, 0); o.write_shift(4, 0);
	o.write_shift(2, 3); o.write_shift(1, 1); o.write_shift(4, 0);
	write_biff_rec(ba, 0x0867 /* FeatHdr */, o);
	/* [MS-XLS] 2.4.111 */
	o = new_buf(39);
	o.write_shift(4, 0x868); o.write_shift(4, 0); o.write_shift(4, 0);
	o.write_shift(2, 3); o.write_shift(1, 0); o.write_shift(4, 0);
	o.write_shift(2, 1); o.write_shift(4, 4); o.write_shift(2, 0);
	write_Ref8U(safe_decode_range(ws['!ref']||"A1"), o);
	o.write_shift(4, 4);
	write_biff_rec(ba, 0x0868 /* Feat */, o);
}

function write_CELLXFS_biff8(ba, opts) {
	for(var i = 0; i < 16; ++i) write_biff_rec(ba, 0x00e0 /* XF */, write_XF({numFmtId:0, style:true}, 0, opts));
	opts.cellXfs.forEach(function(c) {
		write_biff_rec(ba, 0x00e0 /* XF */, write_XF(c, 0, opts));
	});
}

function write_ws_biff8_hlinks(ba/*:BufArray*/, ws) {
	for(var R=0; R<ws['!links'].length; ++R) {
		var HL = ws['!links'][R];
		write_biff_rec(ba, 0x01b8 /* HLink */, write_HLink(HL));
		if(HL[1].Tooltip) write_biff_rec(ba, 0x0800 /* HLinkTooltip */, write_HLinkTooltip(HL));
	}
	delete ws['!links'];
}

function write_ws_cols_biff8(ba, cols) {
	if(!cols) return;
	var cnt = 0;
	cols.forEach(function(col, idx) {
		if(++cnt <= 256 && col) {
			write_biff_rec(ba, 0x007d /* ColInfo */, write_ColInfo(col_obj_w(idx, col), idx));
		}
	});
}

function write_ws_biff8_cell(ba/*:BufArray*/, cell/*:Cell*/, R/*:number*/, C/*:number*/, opts) {
	var os = 16 + get_cell_style(opts.cellXfs, cell, opts);
	if(cell.v == null && !cell.bf) {
		write_biff_rec(ba, 0x0201 /* Blank */, write_XLSCell(R, C, os));
		return;
	}
	if(cell.bf) write_biff_rec(ba, 0x0006 /* Formula */, write_Formula(cell, R, C, opts, os));
	else switch(cell.t) {
		case 'd': case 'n':
			var v = cell.t == 'd' ? datenum(parseDate(cell.v)) : cell.v;
			/* TODO: emit RK as appropriate */
			write_biff_rec(ba, 0x0203 /* Number */, write_Number(R, C, v, os, opts));
			break;
		case 'b': case 'e':
			write_biff_rec(ba, 0x0205 /* BoolErr */, write_BoolErr(R, C, cell.v, os, opts, cell.t));
			break;
		/* TODO: codepage, sst */
		case 's': case 'str':
			if(opts.bookSST) {
				var isst = get_sst_id(opts.Strings, cell.v, opts.revStrings);
				write_biff_rec(ba, 0x00fd /* LabelSst */, write_LabelSst(R, C, isst, os, opts));
			} else write_biff_rec(ba, 0x0204 /* Label */, write_Label(R, C, (cell.v||"").slice(0,255), os, opts));
			break;
		default:
			write_biff_rec(ba, 0x0201 /* Blank */, write_XLSCell(R, C, os));
	}
}

/* [MS-XLS] 2.1.7.20.5 */
function write_ws_biff8(idx/*:number*/, opts, wb/*:Workbook*/) {
	var ba = buf_array();
	var s = wb.SheetNames[idx], ws = wb.Sheets[s] || {};
	var _WB/*:WBWBProps*/ = ((wb||{}).Workbook||{}/*:any*/);
	var _sheet/*:WBWSProp*/ = ((_WB.Sheets||[])[idx]||{}/*:any*/);
	var dense = Array.isArray(ws);
	var b8 = opts.biff == 8;
	var ref/*:string*/, rr = "", cols/*:Array<string>*/ = [];
	var range = safe_decode_range(ws['!ref'] || "A1");
	var MAX_ROWS = b8 ? 65536 : 16384;
	if(range.e.c > 0xFF || range.e.r >= MAX_ROWS) {
		if(opts.WTF) throw new Error("Range " + (ws['!ref'] || "A1") + " exceeds format limit A1:IV16384");
		range.e.c = Math.min(range.e.c, 0xFF);
		range.e.r = Math.min(range.e.c, MAX_ROWS-1);
	}

	write_biff_rec(ba, 0x0809, write_BOF(wb, 0x10, opts));
	/* [Uncalced] Index */
	write_biff_rec(ba, 0x000d /* CalcMode */, writeuint16(1));
	write_biff_rec(ba, 0x000c /* CalcCount */, writeuint16(100));
	write_biff_rec(ba, 0x000f /* CalcRefMode */, writebool(true));
	write_biff_rec(ba, 0x0011 /* CalcIter */, writebool(false));
	write_biff_rec(ba, 0x0010 /* CalcDelta */, write_Xnum(0.001));
	write_biff_rec(ba, 0x005f /* CalcSaveRecalc */, writebool(true));
	write_biff_rec(ba, 0x002a /* PrintRowCol */, writebool(false));
	write_biff_rec(ba, 0x002b /* PrintGrid */, writebool(false));
	write_biff_rec(ba, 0x0082 /* GridSet */, writeuint16(1));
	write_biff_rec(ba, 0x0080 /* Guts */, write_Guts([0,0]));
	/* DefaultRowHeight WsBool [Sync] [LPr] [HorizontalPageBreaks] [VerticalPageBreaks] */
	/* Header (string) */
	/* Footer (string) */
	write_biff_rec(ba, 0x0083 /* HCenter */, writebool(false));
	write_biff_rec(ba, 0x0084 /* VCenter */, writebool(false));
	/* ... */
	if(b8) write_ws_cols_biff8(ba, ws["!cols"]);
	/* ... */
	write_biff_rec(ba, 0x200, write_Dimensions(range, opts));
	/* ... */

	if(b8) ws['!links'] = [];
	for(var R = range.s.r; R <= range.e.r; ++R) {
		rr = encode_row(R);
		for(var C = range.s.c; C <= range.e.c; ++C) {
			if(R === range.s.r) cols[C] = encode_col(C);
			ref = cols[C] + rr;
			var cell = dense ? (ws[R]||[])[C] : ws[ref];
			if(!cell) continue;
			/* write cell */
			write_ws_biff8_cell(ba, cell, R, C, opts);
			if(b8 && cell.l) ws['!links'].push([ref, cell.l]);
		}
	}
	var cname/*:string*/ = _sheet.CodeName || _sheet.name || s;
	/* ... */
	if(b8) write_biff_rec(ba, 0x023e /* Window2 */, write_Window2((_WB.Views||[])[0]));
	/* ... */
	if(b8 && (ws['!merges']||[]).length) write_biff_rec(ba, 0x00e5 /* MergeCells */, write_MergeCells(ws['!merges']));
	/* [LRng] *QUERYTABLE [PHONETICINFO] CONDFMTS */
	if(b8) write_ws_biff8_hlinks(ba, ws);
	/* [DVAL] */
	write_biff_rec(ba, 0x01ba /* CodeName */, write_XLUnicodeString(cname, opts));
	/* *WebPub *CellWatch [SheetExt] */
	if(b8) write_FEAT(ba, ws);
	/* *FEAT11 *RECORD12 */
	write_biff_rec(ba, 0x000a /* EOF */);
	return ba.end();
}

/* [MS-XLS] 2.1.7.20.3 */
function write_biff8_global(wb/*:Workbook*/, bufs, opts/*:WriteOpts*/) {
	var A = buf_array();
	var _WB/*:WBWBProps*/ = ((wb||{}).Workbook||{}/*:any*/);
	var _sheets/*:Array<WBWSProp>*/ = (_WB.Sheets||[]);
	var _wb/*:WBProps*/ = /*::((*/_WB.WBProps||{/*::CodeName:"ThisWorkbook"*/}/*:: ):any)*/;
	var b8 = opts.biff == 8, b5 = opts.biff == 5;
	write_biff_rec(A, 0x0809, write_BOF(wb, 0x05, opts));
	if(opts.bookType == "xla") write_biff_rec(A, 0x0087 /* Addin */);
	write_biff_rec(A, 0x00e1 /* InterfaceHdr */, b8 ? writeuint16(0x04b0) : null);
	write_biff_rec(A, 0x00c1 /* Mms */, writezeroes(2));
	if(b5) write_biff_rec(A, 0x00bf /* ToolbarHdr */);
	if(b5) write_biff_rec(A, 0x00c0 /* ToolbarEnd */);
	write_biff_rec(A, 0x00e2 /* InterfaceEnd */);
	write_biff_rec(A, 0x005c /* WriteAccess */, write_WriteAccess("SheetJS", opts));
	/* [FileSharing] */
	write_biff_rec(A, 0x0042 /* CodePage */, writeuint16(b8 ? 0x04b0 : 0x04E4));
	/* *2047 Lel */
	if(b8) write_biff_rec(A, 0x0161 /* DSF */, writeuint16(0));
	if(b8) write_biff_rec(A, 0x01c0 /* Excel9File */);
	write_biff_rec(A, 0x013d /* RRTabId */, write_RRTabId(wb.SheetNames.length));
	if(b8 && wb.vbaraw) write_biff_rec(A, 0x00d3 /* ObProj */);
	/* [ObNoMacros] */
	if(b8 && wb.vbaraw) {
		var cname/*:string*/ = _wb.CodeName || "ThisWorkbook";
		write_biff_rec(A, 0x01ba /* CodeName */, write_XLUnicodeString(cname, opts));
	}
	write_biff_rec(A, 0x009c /* BuiltInFnGroupCount */, writeuint16(0x11));
	/* *FnGroupName *FnGrp12 */
	/* *Lbl */
	/* [OleObjectSize] */
	write_biff_rec(A, 0x0019 /* WinProtect */, writebool(false));
	write_biff_rec(A, 0x0012 /* Protect */, writebool(false));
	write_biff_rec(A, 0x0013 /* Password */, writeuint16(0));
	if(b8) write_biff_rec(A, 0x01af /* Prot4Rev */, writebool(false));
	if(b8) write_biff_rec(A, 0x01bc /* Prot4RevPass */, writeuint16(0));
	write_biff_rec(A, 0x003d /* Window1 */, write_Window1(opts));
	write_biff_rec(A, 0x0040 /* Backup */, writebool(false));
	write_biff_rec(A, 0x008d /* HideObj */, writeuint16(0));
	write_biff_rec(A, 0x0022 /* Date1904 */, writebool(safe1904(wb)=="true"));
	write_biff_rec(A, 0x000e /* CalcPrecision */, writebool(true));
	if(b8) write_biff_rec(A, 0x01b7 /* RefreshAll */, writebool(false));
	write_biff_rec(A, 0x00DA /* BookBool */, writeuint16(0));
	/* ... */
	write_FONTS_biff8(A, wb, opts);
	write_FMTS_biff8(A, wb.SSF, opts);
	write_CELLXFS_biff8(A, opts);
	/* ... */
	if(b8) write_biff_rec(A, 0x0160 /* UsesELFs */, writebool(false));
	var a = A.end();

	var C = buf_array();
	/* METADATA [MTRSettings] [ForceFullCalculation] */
	if(b8) write_biff_rec(C, 0x008C, write_Country());
	/* *SUPBOOK *LBL *RTD [RecalcId] *HFPicture *MSODRAWINGGROUP */

	/* BIFF8: [SST *Continue] ExtSST */
	if(b8 && opts.Strings) write_biff_continue(C, 0x00FC, write_SST(opts.Strings, opts));

	/* *WebPub [WOpt] [CrErr] [BookExt] *FeatHdr *DConn [THEME] [CompressPictures] [Compat12] [GUIDTypeLib] */
	write_biff_rec(C, 0x000A /* EOF */);
	var c = C.end();

	var B = buf_array();
	var blen = 0, j = 0;
	for(j = 0; j < wb.SheetNames.length; ++j) blen += (b8 ? 12 : 11) + (b8 ? 2 : 1) * wb.SheetNames[j].length;
	var start = a.length + blen + c.length;
	for(j = 0; j < wb.SheetNames.length; ++j) {
		var _sheet/*:WBWSProp*/ = _sheets[j] || ({}/*:any*/);
		write_biff_rec(B, 0x0085 /* BoundSheet8 */, write_BoundSheet8({pos:start, hs:_sheet.Hidden||0, dt:0, name:wb.SheetNames[j]}, opts));
		start += bufs[j].length;
	}
	/* 1*BoundSheet8 */
	var b = B.end();
	if(blen != b.length) throw new Error("BS8 " + blen + " != " + b.length);

	var out = [];
	if(a.length) out.push(a);
	if(b.length) out.push(b);
	if(c.length) out.push(c);
	return bconcat(out);
}

/* [MS-XLS] 2.1.7.20 Workbook Stream */
function write_biff8_buf(wb/*:Workbook*/, opts/*:WriteOpts*/) {
	var o = opts || {};
	var bufs = [];

	if(wb && !wb.SSF) {
		wb.SSF = dup(table_fmt);
	}
	if(wb && wb.SSF) {
		make_ssf(); SSF_load_table(wb.SSF);
		// $FlowIgnore
		o.revssf = evert_num(wb.SSF); o.revssf[wb.SSF[65535]] = 0;
		o.ssf = wb.SSF;
	}

	o.Strings = /*::((*/[]/*:: :any):SST)*/; o.Strings.Count = 0; o.Strings.Unique = 0;
	fix_write_opts(o);

	o.cellXfs = [];
	get_cell_style(o.cellXfs, {}, {revssf:{"General":0}});

	if(!wb.Props) wb.Props = {};

	for(var i = 0; i < wb.SheetNames.length; ++i) bufs[bufs.length] = write_ws_biff8(i, o, wb);
	bufs.unshift(write_biff8_global(wb, bufs, o));
	return bconcat(bufs);
}

function write_biff_buf(wb/*:Workbook*/, opts/*:WriteOpts*/) {
	for(var i = 0; i <= wb.SheetNames.length; ++i) {
		var ws = wb.Sheets[wb.SheetNames[i]];
		if(!ws || !ws["!ref"]) continue;
		var range = decode_range(ws["!ref"]);
		if(range.e.c > 255) { // note: 255 is IV
		if(typeof console != "undefined" && console.error) console.error("Worksheet '" + wb.SheetNames[i] + "' extends beyond column IV (255).  Data may be lost.");
		}
	}

	var o = opts || {};
	switch(o.biff || 2) {
		case 8: case 5: return write_biff8_buf(wb, opts);
		case 4: case 3: case 2: return write_biff2_buf(wb, opts);
	}
	throw new Error("invalid type " + o.bookType + " for BIFF");
}
/* note: browser DOM element cannot see mso- style attrs, must parse */
function html_to_sheet(str/*:string*/, _opts)/*:Workbook*/ {
	var opts = _opts || {};
	if(DENSE != null && opts.dense == null) opts.dense = DENSE;
	var ws/*:Worksheet*/ = opts.dense ? ([]/*:any*/) : ({}/*:any*/);
	str = str.replace(/<!--.*?-->/g, "");
	var mtch/*:any*/ = str.match(/<table/i);
	if(!mtch) throw new Error("Invalid HTML: could not find <table>");
	var mtch2/*:any*/ = str.match(/<\/table/i);
	var i/*:number*/ = mtch.index, j/*:number*/ = mtch2 && mtch2.index || str.length;
	var rows = split_regex(str.slice(i, j), /(:?<tr[^>]*>)/i, "<tr>");
	var R = -1, C = 0, RS = 0, CS = 0;
	var range/*:Range*/ = {s:{r:10000000, c:10000000},e:{r:0,c:0}};
	var merges/*:Array<Range>*/ = [];
	for(i = 0; i < rows.length; ++i) {
		var row = rows[i].trim();
		var hd = row.slice(0,3).toLowerCase();
		if(hd == "<tr") { ++R; if(opts.sheetRows && opts.sheetRows <= R) { --R; break; } C = 0; continue; }
		if(hd != "<td" && hd != "<th") continue;
		var cells = row.split(/<\/t[dh]>/i);
		for(j = 0; j < cells.length; ++j) {
			var cell = cells[j].trim();
			if(!cell.match(/<t[dh]/i)) continue;
			var m = cell, cc = 0;
			/* TODO: parse styles etc */
			while(m.charAt(0) == "<" && (cc = m.indexOf(">")) > -1) m = m.slice(cc+1);
			for(var midx = 0; midx < merges.length; ++midx) {
				var _merge/*:Range*/ = merges[midx];
				if(_merge.s.c == C && _merge.s.r < R && R <= _merge.e.r) { C = _merge.e.c + 1; midx = -1; }
			}
			var tag = parsexmltag(cell.slice(0, cell.indexOf(">")));
			CS = tag.colspan ? +tag.colspan : 1;
			if((RS = +tag.rowspan)>1 || CS>1) merges.push({s:{r:R,c:C},e:{r:R + (RS||1) - 1, c:C + CS - 1}});
			var _t/*:string*/ = tag.t || tag["data-t"] || "";
			/* TODO: generate stub cells */
			if(!m.length) { C += CS; continue; }
			m = htmldecode(m);
			if(range.s.r > R) range.s.r = R; if(range.e.r < R) range.e.r = R;
			if(range.s.c > C) range.s.c = C; if(range.e.c < C) range.e.c = C;
			if(!m.length) { C += CS; continue; }
			var o/*:Cell*/ = {t:'s', v:m};
			if(opts.raw || !m.trim().length || _t == 's'){}
			else if(m === 'TRUE') o = {t:'b', v:true};
			else if(m === 'FALSE') o = {t:'b', v:false};
			else if(!isNaN(fuzzynum(m))) o = {t:'n', v:fuzzynum(m)};
			else if(!isNaN(fuzzydate(m).getDate())) {
				o = ({t:'d', v:parseDate(m)}/*:any*/);
				if(!opts.cellDates) o = ({t:'n', v:datenum(o.v)}/*:any*/);
				o.z = opts.dateNF || table_fmt[14];
			}
			if(opts.dense) { if(!ws[R]) ws[R] = []; ws[R][C] = o; }
			else ws[encode_cell({r:R, c:C})] = o;
			C += CS;
		}
	}
	ws['!ref'] = encode_range(range);
	if(merges.length) ws["!merges"] = merges;
	return ws;
}
function make_html_row(ws/*:Worksheet*/, r/*:Range*/, R/*:number*/, o/*:Sheet2HTMLOpts*/)/*:string*/ {
	var M/*:Array<Range>*/ = (ws['!merges'] ||[]);
	var oo/*:Array<string>*/ = [];
	for(var C = r.s.c; C <= r.e.c; ++C) {
		var RS = 0, CS = 0;
		for(var j = 0; j < M.length; ++j) {
			if(M[j].s.r > R || M[j].s.c > C) continue;
			if(M[j].e.r < R || M[j].e.c < C) continue;
			if(M[j].s.r < R || M[j].s.c < C) { RS = -1; break; }
			RS = M[j].e.r - M[j].s.r + 1; CS = M[j].e.c - M[j].s.c + 1; break;
		}
		if(RS < 0) continue;
		var coord = encode_cell({r:R,c:C});
		var cell = o.dense ? (ws[R]||[])[C] : ws[coord];
		/* TODO: html entities */
		var w = (cell && cell.v != null) && (cell.h || escapehtml(cell.w || (format_cell(cell), cell.w) || "")) || "";
		var sp = ({}/*:any*/);
		if(RS > 1) sp.rowspan = RS;
		if(CS > 1) sp.colspan = CS;
		if(o.editable) w = '<span contenteditable="true">' + w + '</span>';
		else if(cell) {
			sp["data-t"] = cell && cell.t || 'z';
			if(cell.v != null) sp["data-v"] = cell.v;
			if(cell.z != null) sp["data-z"] = cell.z;
			if(cell.l && (cell.l.Target || "#").charAt(0) != "#") w = '<a href="' + cell.l.Target +'">' + w + '</a>';
		}
		sp.id = (o.id || "sjs") + "-" + coord;
		oo.push(writextag('td', w, sp));
	}
	var preamble = "<tr>";
	return preamble + oo.join("") + "</tr>";
}

var HTML_BEGIN = '<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>';
var HTML_END = '</body></html>';

function html_to_workbook(str/*:string*/, opts)/*:Workbook*/ {
	var mtch = str.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);
	if(!mtch || mtch.length == 0) throw new Error("Invalid HTML: could not find <table>");
	if(mtch.length == 1) return sheet_to_workbook(html_to_sheet(mtch[0], opts), opts);
	var wb = book_new();
	mtch.forEach(function(s, idx) { book_append_sheet(wb, html_to_sheet(s, opts), "Sheet" + (idx+1)); });
	return wb;
}

function make_html_preamble(ws/*:Worksheet*/, R/*:Range*/, o/*:Sheet2HTMLOpts*/)/*:string*/ {
	var out/*:Array<string>*/ = [];
	return out.join("") + '<table' + (o && o.id ? ' id="' + o.id + '"' : "") + '>';
}

function sheet_to_html(ws/*:Worksheet*/, opts/*:?Sheet2HTMLOpts*//*, wb:?Workbook*/)/*:string*/ {
	var o = opts || {};
	var header = o.header != null ? o.header : HTML_BEGIN;
	var footer = o.footer != null ? o.footer : HTML_END;
	var out/*:Array<string>*/ = [header];
	var r = decode_range(ws['!ref']);
	o.dense = Array.isArray(ws);
	out.push(make_html_preamble(ws, r, o));
	for(var R = r.s.r; R <= r.e.r; ++R) out.push(make_html_row(ws, r, R, o));
	out.push("</table>" + footer);
	return out.join("");
}

function sheet_add_dom(ws/*:Worksheet*/, table/*:HTMLElement*/, _opts/*:?any*/)/*:Worksheet*/ {
	var opts = _opts || {};
	if(DENSE != null) opts.dense = DENSE;
	var or_R = 0, or_C = 0;
	if(opts.origin != null) {
		if(typeof opts.origin == 'number') or_R = opts.origin;
		else {
			var _origin/*:CellAddress*/ = typeof opts.origin == "string" ? decode_cell(opts.origin) : opts.origin;
			or_R = _origin.r; or_C = _origin.c;
		}
	}

	var rows/*:HTMLCollection<HTMLTableRowElement>*/ = table.getElementsByTagName('tr');
	var sheetRows = Math.min(opts.sheetRows||10000000, rows.length);
	var range/*:Range*/ = {s:{r:0,c:0},e:{r:or_R,c:or_C}};
	if(ws["!ref"]) {
		var _range/*:Range*/ = decode_range(ws["!ref"]);
		range.s.r = Math.min(range.s.r, _range.s.r);
		range.s.c = Math.min(range.s.c, _range.s.c);
		range.e.r = Math.max(range.e.r, _range.e.r);
		range.e.c = Math.max(range.e.c, _range.e.c);
		if(or_R == -1) range.e.r = or_R = _range.e.r + 1;
	}
	var merges/*:Array<Range>*/ = [], midx = 0;
	var rowinfo/*:Array<RowInfo>*/ = ws["!rows"] || (ws["!rows"] = []);
	var _R = 0, R = 0, _C = 0, C = 0, RS = 0, CS = 0;
	if(!ws["!cols"]) ws['!cols'] = [];
	for(; _R < rows.length && R < sheetRows; ++_R) {
		var row/*:HTMLTableRowElement*/ = rows[_R];
		if (is_dom_element_hidden(row)) {
			if (opts.display) continue;
			rowinfo[R] = {hidden: true};
		}
		var elts/*:HTMLCollection<HTMLTableCellElement>*/ = (row.children/*:any*/);
		for(_C = C = 0; _C < elts.length; ++_C) {
			var elt/*:HTMLTableCellElement*/ = elts[_C];
			if (opts.display && is_dom_element_hidden(elt)) continue;
			var v/*:?string*/ = elt.hasAttribute('data-v') ? elt.getAttribute('data-v') : elt.hasAttribute('v') ? elt.getAttribute('v') : htmldecode(elt.innerHTML);
			var z/*:?string*/ = elt.getAttribute('data-z') || elt.getAttribute('z');
			for(midx = 0; midx < merges.length; ++midx) {
				var m/*:Range*/ = merges[midx];
				if(m.s.c == C + or_C && m.s.r < R + or_R && R + or_R <= m.e.r) { C = m.e.c+1 - or_C; midx = -1; }
			}
			/* TODO: figure out how to extract nonstandard mso- style */
			CS = +elt.getAttribute("colspan") || 1;
			if( ((RS = (+elt.getAttribute("rowspan") || 1)))>1 || CS>1) merges.push({s:{r:R + or_R,c:C + or_C},e:{r:R + or_R + (RS||1) - 1, c:C + or_C + (CS||1) - 1}});
			var o/*:Cell*/ = {t:'s', v:v};
			var _t/*:string*/ = elt.getAttribute("data-t") || elt.getAttribute("t") || "";
			if(v != null) {
				if(v.length == 0) o.t = _t || 'z';
				else if(opts.raw || v.trim().length == 0 || _t == "s"){}
				else if(v === 'TRUE') o = {t:'b', v:true};
				else if(v === 'FALSE') o = {t:'b', v:false};
				else if(!isNaN(fuzzynum(v))) o = {t:'n', v:fuzzynum(v)};
				else if(!isNaN(fuzzydate(v).getDate())) {
					o = ({t:'d', v:parseDate(v)}/*:any*/);
					if(!opts.cellDates) o = ({t:'n', v:datenum(o.v)}/*:any*/);
					o.z = opts.dateNF || table_fmt[14];
				}
			}
			if(o.z === undefined && z != null) o.z = z;
			/* The first link is used.  Links are assumed to be fully specified.
			 * TODO: The right way to process relative links is to make a new <a> */
			var l = "", Aelts = elt.getElementsByTagName("A");
			if(Aelts && Aelts.length) for(var Aelti = 0; Aelti < Aelts.length; ++Aelti)	if(Aelts[Aelti].hasAttribute("href")) {
				l = Aelts[Aelti].getAttribute("href"); if(l.charAt(0) != "#") break;
			}
			if(l && l.charAt(0) != "#") o.l = ({ Target: l });
			if(opts.dense) { if(!ws[R + or_R]) ws[R + or_R] = []; ws[R + or_R][C + or_C] = o; }
			else ws[encode_cell({c:C + or_C, r:R + or_R})] = o;
			if(range.e.c < C + or_C) range.e.c = C + or_C;
			C += CS;
		}
		++R;
	}
	if(merges.length) ws['!merges'] = (ws["!merges"] || []).concat(merges);
	range.e.r = Math.max(range.e.r, R - 1 + or_R);
	ws['!ref'] = encode_range(range);
	if(R >= sheetRows) ws['!fullref'] = encode_range((range.e.r = rows.length-_R+R-1 + or_R,range)); // We can count the real number of rows to parse but we don't to improve the performance
	return ws;
}

function parse_dom_table(table/*:HTMLElement*/, _opts/*:?any*/)/*:Worksheet*/ {
	var opts = _opts || {};
	var ws/*:Worksheet*/ = opts.dense ? ([]/*:any*/) : ({}/*:any*/);
	return sheet_add_dom(ws, table, _opts);
}

function table_to_book(table/*:HTMLElement*/, opts/*:?any*/)/*:Workbook*/ {
	return sheet_to_workbook(parse_dom_table(table, opts), opts);
}

function is_dom_element_hidden(element/*:HTMLElement*/)/*:boolean*/ {
	var display/*:string*/ = '';
	var get_computed_style/*:?function*/ = get_get_computed_style_function(element);
	if(get_computed_style) display = get_computed_style(element).getPropertyValue('display');
	if(!display) display = element.style && element.style.display;
	return display === 'none';
}

/* global getComputedStyle */
function get_get_computed_style_function(element/*:HTMLElement*/)/*:?function*/ {
	// The proper getComputedStyle implementation is the one defined in the element window
	if(element.ownerDocument.defaultView && typeof element.ownerDocument.defaultView.getComputedStyle === 'function') return element.ownerDocument.defaultView.getComputedStyle;
	// If it is not available, try to get one from the global namespace
	if(typeof getComputedStyle === 'function') return getComputedStyle;
	return null;
}
/* OpenDocument */
function parse_text_p(text/*:string*//*::, tag*/)/*:Array<any>*/ {
	/* 6.1.2 White Space Characters */
	var fixed = text
		.replace(/[\t\r\n]/g, " ").trim().replace(/ +/g, " ")
		.replace(/<text:s\/>/g," ")
		.replace(/<text:s text:c="(\d+)"\/>/g, function($$,$1) { return Array(parseInt($1,10)+1).join(" "); })
		.replace(/<text:tab[^>]*\/>/g,"\t")
		.replace(/<text:line-break\/>/g,"\n");
	var v = unescapexml(fixed.replace(/<[^>]*>/g,""));

	return [v];
}

var number_formats_ods = {
	/* ods name: [short ssf fmt, long ssf fmt] */
	day:           ["d",   "dd"],
	month:         ["m",   "mm"],
	year:          ["y",   "yy"],
	hours:         ["h",   "hh"],
	minutes:       ["m",   "mm"],
	seconds:       ["s",   "ss"],
	"am-pm":       ["A/P", "AM/PM"],
	"day-of-week": ["ddd", "dddd"],
	era:           ["e",   "ee"],
	/* there is no native representation of LO "Q" format */
	quarter:       ["\\Qm", "m\\\"th quarter\""]
};


function parse_content_xml(d/*:string*/, _opts)/*:Workbook*/ {
		var opts = _opts || {};
		if(DENSE != null && opts.dense == null) opts.dense = DENSE;
		var str = xlml_normalize(d);
		var state/*:Array<any>*/ = [], tmp;
		var tag/*:: = {}*/;
		var NFtag = {name:""}, NF = "", pidx = 0;
		var sheetag/*:: = {name:"", '名称':""}*/;
		var rowtag/*:: = {'行号':""}*/;
		var Sheets = {}, SheetNames/*:Array<string>*/ = [];
		var ws = opts.dense ? ([]/*:any*/) : ({}/*:any*/);
		var Rn, q/*:: :any = ({t:"", v:null, z:null, w:"",c:[],}:any)*/;
		var ctag = ({value:""}/*:any*/);
		var textp = "", textpidx = 0, textptag/*:: = {}*/;
		var textR = [];
		var R = -1, C = -1, range = {s: {r:1000000,c:10000000}, e: {r:0, c:0}};
		var row_ol = 0;
		var number_format_map = {};
		var merges/*:Array<Range>*/ = [], mrange = {}, mR = 0, mC = 0;
		var rowinfo/*:Array<RowInfo>*/ = [], rowpeat = 1, colpeat = 1;
		var arrayf/*:Array<[Range, string]>*/ = [];
		var WB = {Names:[]};
		var atag = ({}/*:any*/);
		var _Ref/*:[string, string]*/ = ["", ""];
		var comments/*:Array<Comment>*/ = [], comment/*:Comment*/ = ({}/*:any*/);
		var creator = "", creatoridx = 0;
		var isstub = false, intable = false;
		var i = 0;
		xlmlregex.lastIndex = 0;
		str = str.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");
		while((Rn = xlmlregex.exec(str))) switch((Rn[3]=Rn[3].replace(/_.*$/,""))) {

			case 'table': case '工作表': // 9.1.2 <table:table>
				if(Rn[1]==='/') {
					if(range.e.c >= range.s.c && range.e.r >= range.s.r) ws['!ref'] = encode_range(range);
					else ws['!ref'] = "A1:A1";
					if(opts.sheetRows > 0 && opts.sheetRows <= range.e.r) {
						ws['!fullref'] = ws['!ref'];
						range.e.r = opts.sheetRows - 1;
						ws['!ref'] = encode_range(range);
					}
					if(merges.length) ws['!merges'] = merges;
					if(rowinfo.length) ws["!rows"] = rowinfo;
					sheetag.name = sheetag['名称'] || sheetag.name;
					if(typeof JSON !== 'undefined') JSON.stringify(sheetag);
					SheetNames.push(sheetag.name);
					Sheets[sheetag.name] = ws;
					intable = false;
				}
				else if(Rn[0].charAt(Rn[0].length-2) !== '/') {
					sheetag = parsexmltag(Rn[0], false);
					R = C = -1;
					range.s.r = range.s.c = 10000000; range.e.r = range.e.c = 0;
					ws = opts.dense ? ([]/*:any*/) : ({}/*:any*/); merges = [];
					rowinfo = [];
					intable = true;
				}
				break;

			case 'table-row-group': // 9.1.9 <table:table-row-group>
				if(Rn[1] === "/") --row_ol; else ++row_ol;
				break;
			case 'table-row': case '行': // 9.1.3 <table:table-row>
				if(Rn[1] === '/') { R+=rowpeat; rowpeat = 1; break; }
				rowtag = parsexmltag(Rn[0], false);
				if(rowtag['行号']) R = rowtag['行号'] - 1; else if(R == -1) R = 0;
				rowpeat = +rowtag['number-rows-repeated'] || 1;
				/* TODO: remove magic */
				if(rowpeat < 10) for(i = 0; i < rowpeat; ++i) if(row_ol > 0) rowinfo[R + i] = {level: row_ol};
				C = -1; break;
			case 'covered-table-cell': // 9.1.5 <table:covered-table-cell>
				if(Rn[1] !== '/') ++C;
				if(opts.sheetStubs) {
					if(opts.dense) { if(!ws[R]) ws[R] = []; ws[R][C] = {t:'z'}; }
					else ws[encode_cell({r:R,c:C})] = {t:'z'};
				}
				textp = ""; textR = [];
				break; /* stub */
			case 'table-cell': case '数据':
				if(Rn[0].charAt(Rn[0].length-2) === '/') {
					++C;
					ctag = parsexmltag(Rn[0], false);
					colpeat = parseInt(ctag['number-columns-repeated']||"1", 10);
					q = ({t:'z', v:null/*:: , z:null, w:"",c:[]*/}/*:any*/);
					if(ctag.formula && opts.cellFormula != false) q.f = ods_to_csf_formula(unescapexml(ctag.formula));
					if((ctag['数据类型'] || ctag['value-type']) == "string") {
						q.t = "s"; q.v = unescapexml(ctag['string-value'] || "");
						if(opts.dense) {
							if(!ws[R]) ws[R] = [];
							ws[R][C] = q;
						} else {
							ws[encode_cell({r:R,c:C})] = q;
						}
					}
					C+= colpeat-1;
				} else if(Rn[1]!=='/') {
					++C;
					textp = ""; textpidx = 0; textR = [];
					colpeat = 1;
					var rptR = rowpeat ? R + rowpeat - 1 : R;
					if(C > range.e.c) range.e.c = C;
					if(C < range.s.c) range.s.c = C;
					if(R < range.s.r) range.s.r = R;
					if(rptR > range.e.r) range.e.r = rptR;
					ctag = parsexmltag(Rn[0], false);
					comments = []; comment = ({}/*:any*/);
					q = ({t:ctag['数据类型'] || ctag['value-type'], v:null/*:: , z:null, w:"",c:[]*/}/*:any*/);
					if(opts.cellFormula) {
						if(ctag.formula) ctag.formula = unescapexml(ctag.formula);
						if(ctag['number-matrix-columns-spanned'] && ctag['number-matrix-rows-spanned']) {
							mR = parseInt(ctag['number-matrix-rows-spanned'],10) || 0;
							mC = parseInt(ctag['number-matrix-columns-spanned'],10) || 0;
							mrange = {s: {r:R,c:C}, e:{r:R + mR-1,c:C + mC-1}};
							q.F = encode_range(mrange);
							arrayf.push([mrange, q.F]);
						}
						if(ctag.formula) q.f = ods_to_csf_formula(ctag.formula);
						else for(i = 0; i < arrayf.length; ++i)
							if(R >= arrayf[i][0].s.r && R <= arrayf[i][0].e.r)
								if(C >= arrayf[i][0].s.c && C <= arrayf[i][0].e.c)
									q.F = arrayf[i][1];
					}
					if(ctag['number-columns-spanned'] || ctag['number-rows-spanned']) {
						mR = parseInt(ctag['number-rows-spanned'],10) || 0;
						mC = parseInt(ctag['number-columns-spanned'],10) || 0;
						mrange = {s: {r:R,c:C}, e:{r:R + mR-1,c:C + mC-1}};
						merges.push(mrange);
					}

					/* 19.675.2 table:number-columns-repeated */
					if(ctag['number-columns-repeated']) colpeat = parseInt(ctag['number-columns-repeated'], 10);

					/* 19.385 office:value-type */
					switch(q.t) {
						case 'boolean': q.t = 'b'; q.v = parsexmlbool(ctag['boolean-value']); break;
						case 'float': q.t = 'n'; q.v = parseFloat(ctag.value); break;
						case 'percentage': q.t = 'n'; q.v = parseFloat(ctag.value); break;
						case 'currency': q.t = 'n'; q.v = parseFloat(ctag.value); break;
						case 'date': q.t = 'd'; q.v = parseDate(ctag['date-value']);
							if(!opts.cellDates) { q.t = 'n'; q.v = datenum(q.v); }
							q.z = 'm/d/yy'; break;
						case 'time': q.t = 'n'; q.v = parse_isodur(ctag['time-value'])/86400;
							if(opts.cellDates) { q.t = 'd'; q.v = numdate(q.v); }
							q.z = 'HH:MM:SS'; break;
						case 'number': q.t = 'n'; q.v = parseFloat(ctag['数据数值']); break;
						default:
							if(q.t === 'string' || q.t === 'text' || !q.t) {
								q.t = 's';
								if(ctag['string-value'] != null) { textp = unescapexml(ctag['string-value']); textR = []; }
							} else throw new Error('Unsupported value type ' + q.t);
					}
				} else {
					isstub = false;
					if(q.t === 's') {
						q.v = textp || '';
						if(textR.length) q.R = textR;
						isstub = textpidx == 0;
					}
					if(atag.Target) q.l = atag;
					if(comments.length > 0) { q.c = comments; comments = []; }
					if(textp && opts.cellText !== false) q.w = textp;
					if(isstub) { q.t = "z"; delete q.v; }
					if(!isstub || opts.sheetStubs) {
						if(!(opts.sheetRows && opts.sheetRows <= R)) {
							for(var rpt = 0; rpt < rowpeat; ++rpt) {
								colpeat = parseInt(ctag['number-columns-repeated']||"1", 10);
								if(opts.dense) {
									if(!ws[R + rpt]) ws[R + rpt] = [];
									ws[R + rpt][C] = rpt == 0 ? q : dup(q);
									while(--colpeat > 0) ws[R + rpt][C + colpeat] = dup(q);
								} else {
									ws[encode_cell({r:R + rpt,c:C})] = q;
									while(--colpeat > 0) ws[encode_cell({r:R + rpt,c:C + colpeat})] = dup(q);
								}
								if(range.e.c <= C) range.e.c = C;
							}
						}
					}
					colpeat = parseInt(ctag['number-columns-repeated']||"1", 10);
					C += colpeat-1; colpeat = 0;
					q = {/*:: t:"", v:null, z:null, w:"",c:[]*/};
					textp = ""; textR = [];
				}
				atag = ({}/*:any*/);
				break; // 9.1.4 <table:table-cell>

			/* pure state */
			case 'document': // TODO: <office:document> is the root for FODS
			case 'document-content': case '电子表格文档': // 3.1.3.2 <office:document-content>
			case 'spreadsheet': case '主体': // 3.7 <office:spreadsheet>
			case 'scripts': // 3.12 <office:scripts>
			case 'styles': // TODO <office:styles>
			case 'font-face-decls': // 3.14 <office:font-face-decls>
			case 'master-styles': // 3.15.4 <office:master-styles> -- relevant for FODS
				if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw "Bad state: "+tmp;}
				else if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], true]);
				break;

			case 'annotation': // 14.1 <office:annotation>
				if(Rn[1]==='/'){
					if((tmp=state.pop())[0]!==Rn[3]) throw "Bad state: "+tmp;
					comment.t = textp;
					if(textR.length) /*::(*/comment/*:: :any)*/.R = textR;
					comment.a = creator;
					comments.push(comment);
				}
				else if(Rn[0].charAt(Rn[0].length-2) !== '/') {state.push([Rn[3], false]);}
				creator = ""; creatoridx = 0;
				textp = ""; textpidx = 0; textR = [];
				break;

			case 'creator': // 4.3.2.7 <dc:creator>
				if(Rn[1]==='/') { creator = str.slice(creatoridx,Rn.index); }
				else creatoridx = Rn.index + Rn[0].length;
				break;

			/* ignore state */
			case 'meta': case '元数据': // TODO: <office:meta> <uof:元数据> FODS/UOF
			case 'settings': // TODO: <office:settings>
			case 'config-item-set': // TODO: <office:config-item-set>
			case 'config-item-map-indexed': // TODO: <office:config-item-map-indexed>
			case 'config-item-map-entry': // TODO: <office:config-item-map-entry>
			case 'config-item-map-named': // TODO: <office:config-item-map-entry>
			case 'shapes': // 9.2.8 <table:shapes>
			case 'frame': // 10.4.2 <draw:frame>
			case 'text-box': // 10.4.3 <draw:text-box>
			case 'image': // 10.4.4 <draw:image>
			case 'data-pilot-tables': // 9.6.2 <table:data-pilot-tables>
			case 'list-style': // 16.30 <text:list-style>
			case 'form': // 13.13 <form:form>
			case 'dde-links': // 9.8 <table:dde-links>
			case 'event-listeners': // TODO
			case 'chart': // TODO
				if(Rn[1]==='/'){if((tmp=state.pop())[0]!==Rn[3]) throw "Bad state: "+tmp;}
				else if(Rn[0].charAt(Rn[0].length-2) !== '/') state.push([Rn[3], false]);
				textp = ""; textpidx = 0; textR = [];
				break;

			case 'scientific-number': // TODO: <number:scientific-number>
				break;
			case 'currency-symbol': // TODO: <number:currency-symbol>
				break;
			case 'currency-style': // TODO: <number:currency-style>
				break;
			case 'number-style': // 16.27.2 <number:number-style>
			case 'percentage-style': // 16.27.9 <number:percentage-style>
			case 'date-style': // 16.27.10 <number:date-style>
			case 'time-style': // 16.27.18 <number:time-style>
				if(Rn[1]==='/'){
					number_format_map[NFtag.name] = NF;
					if((tmp=state.pop())[0]!==Rn[3]) throw "Bad state: "+tmp;
				} else if(Rn[0].charAt(Rn[0].length-2) !== '/') {
					NF = "";
					NFtag = parsexmltag(Rn[0], false);
					state.push([Rn[3], true]);
				} break;

			case 'script': break; // 3.13 <office:script>
			case 'libraries': break; // TODO: <ooo:libraries>
			case 'automatic-styles': break; // 3.15.3 <office:automatic-styles>

			case 'default-style': // TODO: <style:default-style>
			case 'page-layout': break; // TODO: <style:page-layout>
			case 'style': // 16.2 <style:style>
				break;
			case 'map': break; // 16.3 <style:map>
			case 'font-face': break; // 16.21 <style:font-face>

			case 'paragraph-properties': break; // 17.6 <style:paragraph-properties>
			case 'table-properties': break; // 17.15 <style:table-properties>
			case 'table-column-properties': break; // 17.16 <style:table-column-properties>
			case 'table-row-properties': break; // 17.17 <style:table-row-properties>
			case 'table-cell-properties': break; // 17.18 <style:table-cell-properties>

			case 'number': // 16.27.3 <number:number>
				switch(state[state.length-1][0]) {
					case 'time-style':
					case 'date-style':
						tag = parsexmltag(Rn[0], false);
						NF += number_formats_ods[Rn[3]][tag.style==='long'?1:0]; break;
				} break;

			case 'fraction': break; // TODO 16.27.6 <number:fraction>

			case 'day': // 16.27.11 <number:day>
			case 'month': // 16.27.12 <number:month>
			case 'year': // 16.27.13 <number:year>
			case 'era': // 16.27.14 <number:era>
			case 'day-of-week': // 16.27.15 <number:day-of-week>
			case 'week-of-year': // 16.27.16 <number:week-of-year>
			case 'quarter': // 16.27.17 <number:quarter>
			case 'hours': // 16.27.19 <number:hours>
			case 'minutes': // 16.27.20 <number:minutes>
			case 'seconds': // 16.27.21 <number:seconds>
			case 'am-pm': // 16.27.22 <number:am-pm>
				switch(state[state.length-1][0]) {
					case 'time-style':
					case 'date-style':
						tag = parsexmltag(Rn[0], false);
						NF += number_formats_ods[Rn[3]][tag.style==='long'?1:0]; break;
				} break;

			case 'boolean-style': break; // 16.27.23 <number:boolean-style>
			case 'boolean': break; // 16.27.24 <number:boolean>
			case 'text-style': break; // 16.27.25 <number:text-style>
			case 'text': // 16.27.26 <number:text>
				if(Rn[0].slice(-2) === "/>") break;
				else if(Rn[1]==="/") switch(state[state.length-1][0]) {
					case 'number-style':
					case 'date-style':
					case 'time-style':
						NF += str.slice(pidx, Rn.index);
						break;
				}
				else pidx = Rn.index + Rn[0].length;
				break;

			case 'named-range': // 9.4.12 <table:named-range>
				tag = parsexmltag(Rn[0], false);
				_Ref = ods_to_csf_3D(tag['cell-range-address']);
				var nrange = ({Name:tag.name, Ref:_Ref[0] + '!' + _Ref[1]}/*:any*/);
				if(intable) nrange.Sheet = SheetNames.length;
				WB.Names.push(nrange);
				break;

			case 'text-content': break; // 16.27.27 <number:text-content>
			case 'text-properties': break; // 16.27.27 <style:text-properties>
			case 'embedded-text': break; // 16.27.4 <number:embedded-text>

			case 'body': case '电子表格': break; // 3.3 16.9.6 19.726.3

			case 'forms': break; // 12.25.2 13.2
			case 'table-column': break; // 9.1.6 <table:table-column>
			case 'table-header-rows': break; // 9.1.7 <table:table-header-rows>
			case 'table-rows': break; // 9.1.12 <table:table-rows>
			/* TODO: outline levels */
			case 'table-column-group': break; // 9.1.10 <table:table-column-group>
			case 'table-header-columns': break; // 9.1.11 <table:table-header-columns>
			case 'table-columns': break; // 9.1.12 <table:table-columns>

			case 'null-date': break; // 9.4.2 <table:null-date> TODO: date1904

			case 'graphic-properties': break; // 17.21 <style:graphic-properties>
			case 'calculation-settings': break; // 9.4.1 <table:calculation-settings>
			case 'named-expressions': break; // 9.4.11 <table:named-expressions>
			case 'label-range': break; // 9.4.9 <table:label-range>
			case 'label-ranges': break; // 9.4.10 <table:label-ranges>
			case 'named-expression': break; // 9.4.13 <table:named-expression>
			case 'sort': break; // 9.4.19 <table:sort>
			case 'sort-by': break; // 9.4.20 <table:sort-by>
			case 'sort-groups': break; // 9.4.22 <table:sort-groups>

			case 'tab': break; // 6.1.4 <text:tab>
			case 'line-break': break; // 6.1.5 <text:line-break>
			case 'span': break; // 6.1.7 <text:span>
			case 'p': case '文本串': // 5.1.3 <text:p>
				if(['master-styles'].indexOf(state[state.length-1][0]) > -1) break;
				if(Rn[1]==='/' && (!ctag || !ctag['string-value'])) {
					var ptp = parse_text_p(str.slice(textpidx,Rn.index), textptag);
					textp = (textp.length > 0 ? textp + "\n" : "") + ptp[0];
				} else { textptag = parsexmltag(Rn[0], false); textpidx = Rn.index + Rn[0].length; }
				break; // <text:p>
			case 's': break; // <text:s>

			case 'database-range': // 9.4.15 <table:database-range>
				if(Rn[1]==='/') break;
				try {
					_Ref = ods_to_csf_3D(parsexmltag(Rn[0])['target-range-address']);
					Sheets[_Ref[0]]['!autofilter'] = { ref:_Ref[1] };
				} catch(e) {/* empty */}
				break;

			case 'date': break; // <*:date>

			case 'object': break; // 10.4.6.2 <draw:object>
			case 'title': case '标题': break; // <*:title> OR <uof:标题>
			case 'desc': break; // <*:desc>
			case 'binary-data': break; // 10.4.5 TODO: b64 blob

			/* 9.2 Advanced Tables */
			case 'table-source': break; // 9.2.6
			case 'scenario': break; // 9.2.6

			case 'iteration': break; // 9.4.3 <table:iteration>
			case 'content-validations': break; // 9.4.4 <table:
			case 'content-validation': break; // 9.4.5 <table:
			case 'help-message': break; // 9.4.6 <table:
			case 'error-message': break; // 9.4.7 <table:
			case 'database-ranges': break; // 9.4.14 <table:database-ranges>
			case 'filter': break; // 9.5.2 <table:filter>
			case 'filter-and': break; // 9.5.3 <table:filter-and>
			case 'filter-or': break; // 9.5.4 <table:filter-or>
			case 'filter-condition': break; // 9.5.5 <table:filter-condition>

			case 'list-level-style-bullet': break; // 16.31 <text:
			case 'list-level-style-number': break; // 16.32 <text:
			case 'list-level-properties': break; // 17.19 <style:

			/* 7.3 Document Fields */
			case 'sender-firstname': // 7.3.6.2
			case 'sender-lastname': // 7.3.6.3
			case 'sender-initials': // 7.3.6.4
			case 'sender-title': // 7.3.6.5
			case 'sender-position': // 7.3.6.6
			case 'sender-email': // 7.3.6.7
			case 'sender-phone-private': // 7.3.6.8
			case 'sender-fax': // 7.3.6.9
			case 'sender-company': // 7.3.6.10
			case 'sender-phone-work': // 7.3.6.11
			case 'sender-street': // 7.3.6.12
			case 'sender-city': // 7.3.6.13
			case 'sender-postal-code': // 7.3.6.14
			case 'sender-country': // 7.3.6.15
			case 'sender-state-or-province': // 7.3.6.16
			case 'author-name': // 7.3.7.1
			case 'author-initials': // 7.3.7.2
			case 'chapter': // 7.3.8
			case 'file-name': // 7.3.9
			case 'template-name': // 7.3.9
			case 'sheet-name': // 7.3.9
				break;

			case 'event-listener':
				break;
			/* TODO: FODS Properties */
			case 'initial-creator':
			case 'creation-date':
			case 'print-date':
			case 'generator':
			case 'document-statistic':
			case 'user-defined':
			case 'editing-duration':
			case 'editing-cycles':
				break;

			/* TODO: FODS Config */
			case 'config-item':
				break;

			/* TODO: style tokens */
			case 'page-number': break; // TODO <text:page-number>
			case 'page-count': break; // TODO <text:page-count>
			case 'time': break; // TODO <text:time>

			/* 9.3 Advanced Table Cells */
			case 'cell-range-source': break; // 9.3.1 <table:
			case 'detective': break; // 9.3.2 <table:
			case 'operation': break; // 9.3.3 <table:
			case 'highlighted-range': break; // 9.3.4 <table:

			/* 9.6 Data Pilot Tables <table: */
			case 'data-pilot-table': // 9.6.3
			case 'source-cell-range': // 9.6.5
			case 'source-service': // 9.6.6
			case 'data-pilot-field': // 9.6.7
			case 'data-pilot-level': // 9.6.8
			case 'data-pilot-subtotals': // 9.6.9
			case 'data-pilot-subtotal': // 9.6.10
			case 'data-pilot-members': // 9.6.11
			case 'data-pilot-member': // 9.6.12
			case 'data-pilot-display-info': // 9.6.13
			case 'data-pilot-sort-info': // 9.6.14
			case 'data-pilot-layout-info': // 9.6.15
			case 'data-pilot-field-reference': // 9.6.16
			case 'data-pilot-groups': // 9.6.17
			case 'data-pilot-group': // 9.6.18
			case 'data-pilot-group-member': // 9.6.19
				break;

			/* 10.3 Drawing Shapes */
			case 'rect': // 10.3.2
				break;

			/* 14.6 DDE Connections */
			case 'dde-connection-decls': // 14.6.2 <text:
			case 'dde-connection-decl': // 14.6.3 <text:
			case 'dde-link': // 14.6.4 <table:
			case 'dde-source': // 14.6.5 <office:
				break;

			case 'properties': break; // 13.7 <form:properties>
			case 'property': break; // 13.8 <form:property>

			case 'a': // 6.1.8 hyperlink
				if(Rn[1]!== '/') {
					atag = parsexmltag(Rn[0], false);
					if(!atag.href) break;
					atag.Target = unescapexml(atag.href); delete atag.href;
					if(atag.Target.charAt(0) == "#" && atag.Target.indexOf(".") > -1) {
						_Ref = ods_to_csf_3D(atag.Target.slice(1));
						atag.Target = "#" + _Ref[0] + "!" + _Ref[1];
					} else if(atag.Target.match(/^\.\.[\\\/]/)) atag.Target = atag.Target.slice(3);
				}
				break;

			/* non-standard */
			case 'table-protection': break;
			case 'data-pilot-grand-total': break; // <table:
			case 'office-document-common-attrs': break; // bare
			default: switch(Rn[2]) {
				case 'dc:':       // TODO: properties
				case 'calcext:':  // ignore undocumented extensions
				case 'loext:':    // ignore undocumented extensions
				case 'ooo:':      // ignore undocumented extensions
				case 'chartooo:': // ignore undocumented extensions
				case 'draw:':     // TODO: drawing
				case 'style:':    // TODO: styles
				case 'chart:':    // TODO: charts
				case 'form:':     // TODO: forms
				case 'uof:':      // TODO: uof
				case '表:':       // TODO: uof
				case '字:':       // TODO: uof
					break;
				default: if(opts.WTF) throw new Error(Rn);
			}
		}
		var out/*:Workbook*/ = ({
			Sheets: Sheets,
			SheetNames: SheetNames,
			Workbook: WB
		}/*:any*/);
		if(opts.bookSheets) delete /*::(*/out/*:: :any)*/.Sheets;
		return out;
}

function parse_ods(zip/*:ZIPFile*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	opts = opts || ({}/*:any*/);
	if(safegetzipfile(zip, 'META-INF/manifest.xml')) parse_manifest(getzipdata(zip, 'META-INF/manifest.xml'), opts);
	var content = getzipstr(zip, 'content.xml');
	if(!content) throw new Error("Missing content.xml in ODS / UOF file");
	var wb = parse_content_xml(utf8read(content), opts);
	if(safegetzipfile(zip, 'meta.xml')) wb.Props = parse_core_props(getzipdata(zip, 'meta.xml'));
	return wb;
}
function parse_fods(data/*:string*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	return parse_content_xml(data, opts);
}

/* OpenDocument */
var write_styles_ods/*:{(wb:any, opts:any):string}*/ = /* @__PURE__ */(function() {
	var master_styles = [
		'<office:master-styles>',
			'<style:master-page style:name="mp1" style:page-layout-name="mp1">',
				'<style:header/>',
				'<style:header-left style:display="false"/>',
				'<style:footer/>',
				'<style:footer-left style:display="false"/>',
			'</style:master-page>',
		'</office:master-styles>'
	].join("");

	var payload = '<office:document-styles ' + wxt_helper({
		'xmlns:office':   "urn:oasis:names:tc:opendocument:xmlns:office:1.0",
		'xmlns:table':    "urn:oasis:names:tc:opendocument:xmlns:table:1.0",
		'xmlns:style':    "urn:oasis:names:tc:opendocument:xmlns:style:1.0",
		'xmlns:text':     "urn:oasis:names:tc:opendocument:xmlns:text:1.0",
		'xmlns:draw':     "urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",
		'xmlns:fo':       "urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",
		'xmlns:xlink':    "http://www.w3.org/1999/xlink",
		'xmlns:dc':       "http://purl.org/dc/elements/1.1/",
		'xmlns:number':   "urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",
		'xmlns:svg':      "urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",
		'xmlns:of':       "urn:oasis:names:tc:opendocument:xmlns:of:1.2",
		'office:version': "1.2"
	}) + '>' + master_styles + '</office:document-styles>';

	return function wso(/*::wb, opts*/) {
		return XML_HEADER + payload;
	};
})();
var write_content_ods/*:{(wb:any, opts:any):string}*/ = /* @__PURE__ */(function() {
	/* 6.1.2 White Space Characters */
	var write_text_p = function(text/*:string*/)/*:string*/ {
		return escapexml(text)
			.replace(/  +/g, function($$){return '<text:s text:c="'+$$.length+'"/>';})
			.replace(/\t/g, "<text:tab/>")
			.replace(/\n/g, "</text:p><text:p>")
			.replace(/^ /, "<text:s/>").replace(/ $/, "<text:s/>");
	};

	var null_cell_xml = '          <table:table-cell />\n';
	var covered_cell_xml = '          <table:covered-table-cell/>\n';
	var write_ws = function(ws, wb/*:Workbook*/, i/*:number*//*::, opts*/)/*:string*/ {
		/* Section 9 Tables */
		var o/*:Array<string>*/ = [];
		o.push('      <table:table table:name="' + escapexml(wb.SheetNames[i]) + '" table:style-name="ta1">\n');
		var R=0,C=0, range = decode_range(ws['!ref']||"A1");
		var marr/*:Array<Range>*/ = ws['!merges'] || [], mi = 0;
		var dense = Array.isArray(ws);
		if(ws["!cols"]) {
			for(C = 0; C <= range.e.c; ++C) o.push('        <table:table-column' + (ws["!cols"][C] ? ' table:style-name="co' + ws["!cols"][C].ods + '"' : '') + '></table:table-column>\n');
		}
		var H = "", ROWS = ws["!rows"]||[];
		for(R = 0; R < range.s.r; ++R) {
			H = ROWS[R] ? ' table:style-name="ro' + ROWS[R].ods + '"' : "";
			o.push('        <table:table-row' + H + '></table:table-row>\n');
		}
		for(; R <= range.e.r; ++R) {
			H = ROWS[R] ? ' table:style-name="ro' + ROWS[R].ods + '"' : "";
			o.push('        <table:table-row' + H + '>\n');
			for(C=0; C < range.s.c; ++C) o.push(null_cell_xml);
			for(; C <= range.e.c; ++C) {
				var skip = false, ct = {}, textp = "";
				for(mi = 0; mi != marr.length; ++mi) {
					if(marr[mi].s.c > C) continue;
					if(marr[mi].s.r > R) continue;
					if(marr[mi].e.c < C) continue;
					if(marr[mi].e.r < R) continue;
					if(marr[mi].s.c != C || marr[mi].s.r != R) skip = true;
					ct['table:number-columns-spanned'] = (marr[mi].e.c - marr[mi].s.c + 1);
					ct['table:number-rows-spanned'] =    (marr[mi].e.r - marr[mi].s.r + 1);
					break;
				}
				if(skip) { o.push(covered_cell_xml); continue; }
				var ref = encode_cell({r:R, c:C}), cell = dense ? (ws[R]||[])[C]: ws[ref];
				if(cell && cell.f) {
					ct['table:formula'] = escapexml(csf_to_ods_formula(cell.f));
					if(cell.F) {
						if(cell.F.slice(0, ref.length) == ref) {
							var _Fref = decode_range(cell.F);
							ct['table:number-matrix-columns-spanned'] = (_Fref.e.c - _Fref.s.c + 1);
							ct['table:number-matrix-rows-spanned'] =    (_Fref.e.r - _Fref.s.r + 1);
						}
					}
				}
				if(!cell) { o.push(null_cell_xml); continue; }
				switch(cell.t) {
					case 'b':
						textp = (cell.v ? 'TRUE' : 'FALSE');
						ct['office:value-type'] = "boolean";
						ct['office:boolean-value'] = (cell.v ? 'true' : 'false');
						break;
					case 'n':
						textp = (cell.w||String(cell.v||0));
						ct['office:value-type'] = "float";
						ct['office:value'] = (cell.v||0);
						break;
					case 's': case 'str':
						textp = cell.v == null ? "" : cell.v;
						ct['office:value-type'] = "string";
						break;
					case 'd':
						textp = (cell.w||(parseDate(cell.v).toISOString()));
						ct['office:value-type'] = "date";
						ct['office:date-value'] = (parseDate(cell.v).toISOString());
						ct['table:style-name'] = "ce1";
						break;
					//case 'e':
					default: o.push(null_cell_xml); continue;
				}
				var text_p = write_text_p(textp);
				if(cell.l && cell.l.Target) {
					var _tgt = cell.l.Target;
					_tgt = _tgt.charAt(0) == "#" ? "#" + csf_to_ods_3D(_tgt.slice(1)) : _tgt;
					// TODO: choose correct parent path format based on link delimiters
					if(_tgt.charAt(0) != "#" && !_tgt.match(/^\w+:/)) _tgt = '../' + _tgt;
					text_p = writextag('text:a', text_p, {'xlink:href': _tgt.replace(/&/g, "&amp;")});
				}
				o.push('          ' + writextag('table:table-cell', writextag('text:p', text_p, {}), ct) + '\n');
			}
			o.push('        </table:table-row>\n');
		}
		o.push('      </table:table>\n');
		return o.join("");
	};

	var write_automatic_styles_ods = function(o/*:Array<string>*/, wb) {
		o.push(' <office:automatic-styles>\n');

		o.push('  <number:date-style style:name="N37" number:automatic-order="true">\n');
		o.push('   <number:month number:style="long"/>\n');
		o.push('   <number:text>/</number:text>\n');
		o.push('   <number:day number:style="long"/>\n');
		o.push('   <number:text>/</number:text>\n');
		o.push('   <number:year/>\n');
		o.push('  </number:date-style>\n');

		/* column styles */
		var cidx = 0;
		wb.SheetNames.map(function(n) { return wb.Sheets[n]; }).forEach(function(ws) {
			if(!ws) return;
			if(ws["!cols"]) {
				for(var C = 0; C < ws["!cols"].length; ++C) if(ws["!cols"][C]) {
					var colobj = ws["!cols"][C];
					if(colobj.width == null && colobj.wpx == null && colobj.wch == null) continue;
					process_col(colobj);
					colobj.ods = cidx;
					var w = ws["!cols"][C].wpx + "px";
					o.push('  <style:style style:name="co' + cidx + '" style:family="table-column">\n');
					o.push('   <style:table-column-properties fo:break-before="auto" style:column-width="' + w + '"/>\n');
					o.push('  </style:style>\n');
					++cidx;
				}
			}
		});

		/* row styles */
		var ridx = 0;
		wb.SheetNames.map(function(n) { return wb.Sheets[n]; }).forEach(function(ws) {
			if(!ws) return;
			if(ws["!rows"]) {
				for(var R = 0; R < ws["!rows"].length; ++R) if(ws["!rows"][R]) {
					ws["!rows"][R].ods = ridx;
					var h = ws["!rows"][R].hpx + "px";
					o.push('  <style:style style:name="ro' + ridx + '" style:family="table-row">\n');
					o.push('   <style:table-row-properties fo:break-before="auto" style:row-height="' + h + '"/>\n');
					o.push('  </style:style>\n');
					++ridx;
				}
			}
		});

		/* table */
		o.push('  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">\n');
		o.push('   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>\n');
		o.push('  </style:style>\n');

		/* table cells, text */
		o.push('  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>\n');

		/* page-layout */

		o.push(' </office:automatic-styles>\n');
	};

	return function wcx(wb, opts) {
		var o = [XML_HEADER];
		/* 3.1.3.2 */
		var attr = wxt_helper({
			'xmlns:office':       "urn:oasis:names:tc:opendocument:xmlns:office:1.0",
			'xmlns:table':        "urn:oasis:names:tc:opendocument:xmlns:table:1.0",
			'xmlns:style':        "urn:oasis:names:tc:opendocument:xmlns:style:1.0",
			'xmlns:text':         "urn:oasis:names:tc:opendocument:xmlns:text:1.0",
			'xmlns:draw':         "urn:oasis:names:tc:opendocument:xmlns:drawing:1.0",
			'xmlns:fo':           "urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0",
			'xmlns:xlink':        "http://www.w3.org/1999/xlink",
			'xmlns:dc':           "http://purl.org/dc/elements/1.1/",
			'xmlns:meta':         "urn:oasis:names:tc:opendocument:xmlns:meta:1.0",
			'xmlns:number':       "urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0",
			'xmlns:presentation': "urn:oasis:names:tc:opendocument:xmlns:presentation:1.0",
			'xmlns:svg':          "urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0",
			'xmlns:chart':        "urn:oasis:names:tc:opendocument:xmlns:chart:1.0",
			'xmlns:dr3d':         "urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0",
			'xmlns:math':         "http://www.w3.org/1998/Math/MathML",
			'xmlns:form':         "urn:oasis:names:tc:opendocument:xmlns:form:1.0",
			'xmlns:script':       "urn:oasis:names:tc:opendocument:xmlns:script:1.0",
			'xmlns:ooo':          "http://openoffice.org/2004/office",
			'xmlns:ooow':         "http://openoffice.org/2004/writer",
			'xmlns:oooc':         "http://openoffice.org/2004/calc",
			'xmlns:dom':          "http://www.w3.org/2001/xml-events",
			'xmlns:xforms':       "http://www.w3.org/2002/xforms",
			'xmlns:xsd':          "http://www.w3.org/2001/XMLSchema",
			'xmlns:xsi':          "http://www.w3.org/2001/XMLSchema-instance",
			'xmlns:sheet':        "urn:oasis:names:tc:opendocument:sh33tjs:1.0",
			'xmlns:rpt':          "http://openoffice.org/2005/report",
			'xmlns:of':           "urn:oasis:names:tc:opendocument:xmlns:of:1.2",
			'xmlns:xhtml':        "http://www.w3.org/1999/xhtml",
			'xmlns:grddl':        "http://www.w3.org/2003/g/data-view#",
			'xmlns:tableooo':     "http://openoffice.org/2009/table",
			'xmlns:drawooo':      "http://openoffice.org/2010/draw",
			'xmlns:calcext':      "urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0",
			'xmlns:loext':        "urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0",
			'xmlns:field':        "urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0",
			'xmlns:formx':        "urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0",
			'xmlns:css3t':        "http://www.w3.org/TR/css3-text/",
			'office:version':     "1.2"
		});

		var fods = wxt_helper({
			'xmlns:config':    "urn:oasis:names:tc:opendocument:xmlns:config:1.0",
			'office:mimetype': "application/vnd.oasis.opendocument.spreadsheet"
		});

		if(opts.bookType == "fods") {
			o.push('<office:document' + attr + fods + '>\n');
			o.push(write_meta_ods().replace(/office:document-meta/g, "office:meta"));
			// TODO: settings (equiv of settings.xml for ODS)
		} else o.push('<office:document-content' + attr  + '>\n');
		// o.push('  <office:scripts/>\n');
		write_automatic_styles_ods(o, wb);
		o.push('  <office:body>\n');
		o.push('    <office:spreadsheet>\n');
		for(var i = 0; i != wb.SheetNames.length; ++i) o.push(write_ws(wb.Sheets[wb.SheetNames[i]], wb, i, opts));
		o.push('    </office:spreadsheet>\n');
		o.push('  </office:body>\n');
		if(opts.bookType == "fods") o.push('</office:document>');
		else o.push('</office:document-content>');
		return o.join("");
	};
})();

function write_ods(wb/*:any*/, opts/*:any*/) {
	if(opts.bookType == "fods") return write_content_ods(wb, opts);

	var zip = zip_new();
	var f = "";

	var manifest/*:Array<Array<string> >*/ = [];
	var rdf/*:Array<[string, string]>*/ = [];

	/* Part 3 Section 3.3 MIME Media Type */
	f = "mimetype";
	zip_add_file(zip, f, "application/vnd.oasis.opendocument.spreadsheet");

	/* Part 1 Section 2.2 Documents */
	f = "content.xml";
	zip_add_file(zip, f, write_content_ods(wb, opts));
	manifest.push([f, "text/xml"]);
	rdf.push([f, "ContentFile"]);

	/* TODO: these are hard-coded styles to satiate excel */
	f = "styles.xml";
	zip_add_file(zip, f, write_styles_ods(wb, opts));
	manifest.push([f, "text/xml"]);
	rdf.push([f, "StylesFile"]);

	/* TODO: this is hard-coded to satiate excel */
	f = "meta.xml";
	zip_add_file(zip, f, XML_HEADER + write_meta_ods(/*::wb, opts*/));
	manifest.push([f, "text/xml"]);
	rdf.push([f, "MetadataFile"]);

	/* Part 3 Section 6 Metadata Manifest File */
	f = "manifest.rdf";
	zip_add_file(zip, f, write_rdf(rdf/*, opts*/));
	manifest.push([f, "application/rdf+xml"]);

	/* Part 3 Section 4 Manifest File */
	f = "META-INF/manifest.xml";
	zip_add_file(zip, f, write_manifest(manifest/*, opts*/));

	return zip;
}

/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */
function u8_to_dataview(array) {
  return new DataView(array.buffer, array.byteOffset, array.byteLength);
}
function u8str(u8) {
  return typeof TextDecoder != "undefined" ? new TextDecoder().decode(u8) : utf8read(a2s(u8));
}
function stru8(str) {
  return typeof TextEncoder != "undefined" ? new TextEncoder().encode(str) : s2a(utf8write(str));
}
function u8contains(body, search) {
  outer:
    for (var L = 0; L <= body.length - search.length; ++L) {
      for (var j = 0; j < search.length; ++j)
        if (body[L + j] != search[j])
          continue outer;
      return true;
    }
  return false;
}
function u8concat(u8a) {
  var len = u8a.reduce(function(acc, x) {
    return acc + x.length;
  }, 0);
  var out = new Uint8Array(len);
  var off = 0;
  u8a.forEach(function(u8) {
    out.set(u8, off);
    off += u8.length;
  });
  return out;
}
function popcnt(x) {
  x -= x >> 1 & 1431655765;
  x = (x & 858993459) + (x >> 2 & 858993459);
  return (x + (x >> 4) & 252645135) * 16843009 >>> 24;
}
function readDecimal128LE(buf, offset) {
  var exp = (buf[offset + 15] & 127) << 7 | buf[offset + 14] >> 1;
  var mantissa = buf[offset + 14] & 1;
  for (var j = offset + 13; j >= offset; --j)
    mantissa = mantissa * 256 + buf[j];
  return (buf[offset + 15] & 128 ? -mantissa : mantissa) * Math.pow(10, exp - 6176);
}
function writeDecimal128LE(buf, offset, value) {
  var exp = Math.floor(value == 0 ? 0 : Math.LOG10E * Math.log(Math.abs(value))) + 6176 - 20;
  var mantissa = value / Math.pow(10, exp - 6176);
  buf[offset + 15] |= exp >> 7;
  buf[offset + 14] |= (exp & 127) << 1;
  for (var i = 0; mantissa >= 1; ++i, mantissa /= 256)
    buf[offset + i] = mantissa & 255;
  buf[offset + 15] |= value >= 0 ? 0 : 128;
}
function parse_varint49(buf, ptr) {
  var l = ptr ? ptr[0] : 0;
  var usz = buf[l] & 127;
  varint:
    if (buf[l++] >= 128) {
      usz |= (buf[l] & 127) << 7;
      if (buf[l++] < 128)
        break varint;
      usz |= (buf[l] & 127) << 14;
      if (buf[l++] < 128)
        break varint;
      usz |= (buf[l] & 127) << 21;
      if (buf[l++] < 128)
        break varint;
      usz += (buf[l] & 127) * Math.pow(2, 28);
      ++l;
      if (buf[l++] < 128)
        break varint;
      usz += (buf[l] & 127) * Math.pow(2, 35);
      ++l;
      if (buf[l++] < 128)
        break varint;
      usz += (buf[l] & 127) * Math.pow(2, 42);
      ++l;
      if (buf[l++] < 128)
        break varint;
    }
  if (ptr)
    ptr[0] = l;
  return usz;
}
function write_varint49(v) {
  var usz = new Uint8Array(7);
  usz[0] = v & 127;
  var L = 1;
  sz:
    if (v > 127) {
      usz[L - 1] |= 128;
      usz[L] = v >> 7 & 127;
      ++L;
      if (v <= 16383)
        break sz;
      usz[L - 1] |= 128;
      usz[L] = v >> 14 & 127;
      ++L;
      if (v <= 2097151)
        break sz;
      usz[L - 1] |= 128;
      usz[L] = v >> 21 & 127;
      ++L;
      if (v <= 268435455)
        break sz;
      usz[L - 1] |= 128;
      usz[L] = v / 256 >>> 21 & 127;
      ++L;
      if (v <= 34359738367)
        break sz;
      usz[L - 1] |= 128;
      usz[L] = v / 65536 >>> 21 & 127;
      ++L;
      if (v <= 4398046511103)
        break sz;
      usz[L - 1] |= 128;
      usz[L] = v / 16777216 >>> 21 & 127;
      ++L;
    }
  return usz.slice(0, L);
}
function varint_to_i32(buf) {
  var l = 0, i32 = buf[l] & 127;
  varint:
    if (buf[l++] >= 128) {
      i32 |= (buf[l] & 127) << 7;
      if (buf[l++] < 128)
        break varint;
      i32 |= (buf[l] & 127) << 14;
      if (buf[l++] < 128)
        break varint;
      i32 |= (buf[l] & 127) << 21;
      if (buf[l++] < 128)
        break varint;
      i32 |= (buf[l] & 127) << 28;
    }
  return i32;
}
function parse_shallow(buf) {
  var out = [], ptr = [0];
  while (ptr[0] < buf.length) {
    var off = ptr[0];
    var num = parse_varint49(buf, ptr);
    var type = num & 7;
    num = Math.floor(num / 8);
    var len = 0;
    var res;
    if (num == 0)
      break;
    switch (type) {
      case 0:
        {
          var l = ptr[0];
          while (buf[ptr[0]++] >= 128)
            ;
          res = buf.slice(l, ptr[0]);
        }
        break;
      case 5:
        len = 4;
        res = buf.slice(ptr[0], ptr[0] + len);
        ptr[0] += len;
        break;
      case 1:
        len = 8;
        res = buf.slice(ptr[0], ptr[0] + len);
        ptr[0] += len;
        break;
      case 2:
        len = parse_varint49(buf, ptr);
        res = buf.slice(ptr[0], ptr[0] + len);
        ptr[0] += len;
        break;
      case 3:
      case 4:
      default:
        throw new Error("PB Type ".concat(type, " for Field ").concat(num, " at offset ").concat(off));
    }
    var v = { data: res, type: type };
    if (out[num] == null)
      out[num] = [v];
    else
      out[num].push(v);
  }
  return out;
}
function write_shallow(proto) {
  var out = [];
  proto.forEach(function(field, idx) {
    field.forEach(function(item) {
      if (!item.data)
        return;
      out.push(write_varint49(idx * 8 + item.type));
      if (item.type == 2)
        out.push(write_varint49(item.data.length));
      out.push(item.data);
    });
  });
  return u8concat(out);
}
function mappa(data, cb) {
  return (data == null ? void 0 : data.map(function(d) {
    return cb(d.data);
  })) || [];
}
function parse_iwa_file(buf) {
  var _a;
  var out = [], ptr = [0];
  while (ptr[0] < buf.length) {
    var len = parse_varint49(buf, ptr);
    var ai = parse_shallow(buf.slice(ptr[0], ptr[0] + len));
    ptr[0] += len;
    var res = {
      id: varint_to_i32(ai[1][0].data),
      messages: []
    };
    ai[2].forEach(function(b) {
      var mi = parse_shallow(b.data);
      var fl = varint_to_i32(mi[3][0].data);
      res.messages.push({
        meta: mi,
        data: buf.slice(ptr[0], ptr[0] + fl)
      });
      ptr[0] += fl;
    });
    if ((_a = ai[3]) == null ? void 0 : _a[0])
      res.merge = varint_to_i32(ai[3][0].data) >>> 0 > 0;
    out.push(res);
  }
  return out;
}
function write_iwa_file(ias) {
  var bufs = [];
  ias.forEach(function(ia) {
    var ai = [];
    ai[1] = [{ data: write_varint49(ia.id), type: 0 }];
    ai[2] = [];
    if (ia.merge != null)
      ai[3] = [{ data: write_varint49(+!!ia.merge), type: 0 }];
    var midata = [];
    ia.messages.forEach(function(mi) {
      midata.push(mi.data);
      mi.meta[3] = [{ type: 0, data: write_varint49(mi.data.length) }];
      ai[2].push({ data: write_shallow(mi.meta), type: 2 });
    });
    var aipayload = write_shallow(ai);
    bufs.push(write_varint49(aipayload.length));
    bufs.push(aipayload);
    midata.forEach(function(mid) {
      return bufs.push(mid);
    });
  });
  return u8concat(bufs);
}
function parse_snappy_chunk(type, buf) {
  if (type != 0)
    throw new Error("Unexpected Snappy chunk type ".concat(type));
  var ptr = [0];
  var usz = parse_varint49(buf, ptr);
  var chunks = [];
  while (ptr[0] < buf.length) {
    var tag = buf[ptr[0]] & 3;
    if (tag == 0) {
      var len = buf[ptr[0]++] >> 2;
      if (len < 60)
        ++len;
      else {
        var c = len - 59;
        len = buf[ptr[0]];
        if (c > 1)
          len |= buf[ptr[0] + 1] << 8;
        if (c > 2)
          len |= buf[ptr[0] + 2] << 16;
        if (c > 3)
          len |= buf[ptr[0] + 3] << 24;
        len >>>= 0;
        len++;
        ptr[0] += c;
      }
      chunks.push(buf.slice(ptr[0], ptr[0] + len));
      ptr[0] += len;
      continue;
    } else {
      var offset = 0, length = 0;
      if (tag == 1) {
        length = (buf[ptr[0]] >> 2 & 7) + 4;
        offset = (buf[ptr[0]++] & 224) << 3;
        offset |= buf[ptr[0]++];
      } else {
        length = (buf[ptr[0]++] >> 2) + 1;
        if (tag == 2) {
          offset = buf[ptr[0]] | buf[ptr[0] + 1] << 8;
          ptr[0] += 2;
        } else {
          offset = (buf[ptr[0]] | buf[ptr[0] + 1] << 8 | buf[ptr[0] + 2] << 16 | buf[ptr[0] + 3] << 24) >>> 0;
          ptr[0] += 4;
        }
      }
      chunks = [u8concat(chunks)];
      if (offset == 0)
        throw new Error("Invalid offset 0");
      if (offset > chunks[0].length)
        throw new Error("Invalid offset beyond length");
      if (length >= offset) {
        chunks.push(chunks[0].slice(-offset));
        length -= offset;
        while (length >= chunks[chunks.length - 1].length) {
          chunks.push(chunks[chunks.length - 1]);
          length -= chunks[chunks.length - 1].length;
        }
      }
      chunks.push(chunks[0].slice(-offset, -offset + length));
    }
  }
  var o = u8concat(chunks);
  if (o.length != usz)
    throw new Error("Unexpected length: ".concat(o.length, " != ").concat(usz));
  return o;
}
function decompress_iwa_file(buf) {
  var out = [];
  var l = 0;
  while (l < buf.length) {
    var t = buf[l++];
    var len = buf[l] | buf[l + 1] << 8 | buf[l + 2] << 16;
    l += 3;
    out.push(parse_snappy_chunk(t, buf.slice(l, l + len)));
    l += len;
  }
  if (l !== buf.length)
    throw new Error("data is not a valid framed stream!");
  return u8concat(out);
}
function compress_iwa_file(buf) {
  var out = [];
  var l = 0;
  while (l < buf.length) {
    var c = Math.min(buf.length - l, 268435455);
    var frame = new Uint8Array(4);
    out.push(frame);
    var usz = write_varint49(c);
    var L = usz.length;
    out.push(usz);
    if (c <= 60) {
      L++;
      out.push(new Uint8Array([c - 1 << 2]));
    } else if (c <= 256) {
      L += 2;
      out.push(new Uint8Array([240, c - 1 & 255]));
    } else if (c <= 65536) {
      L += 3;
      out.push(new Uint8Array([244, c - 1 & 255, c - 1 >> 8 & 255]));
    } else if (c <= 16777216) {
      L += 4;
      out.push(new Uint8Array([248, c - 1 & 255, c - 1 >> 8 & 255, c - 1 >> 16 & 255]));
    } else if (c <= 4294967296) {
      L += 5;
      out.push(new Uint8Array([252, c - 1 & 255, c - 1 >> 8 & 255, c - 1 >> 16 & 255, c - 1 >>> 24 & 255]));
    }
    out.push(buf.slice(l, l + c));
    L += c;
    frame[0] = 0;
    frame[1] = L & 255;
    frame[2] = L >> 8 & 255;
    frame[3] = L >> 16 & 255;
    l += c;
  }
  return u8concat(out);
}
function parse_old_storage(buf, sst, rsst, v) {
  var dv = u8_to_dataview(buf);
  var flags = dv.getUint32(4, true);
  var data_offset = (v > 1 ? 12 : 8) + popcnt(flags & (v > 1 ? 3470 : 398)) * 4;
  var ridx = -1, sidx = -1, ieee = NaN, dt = new Date(2001, 0, 1);
  if (flags & 512) {
    ridx = dv.getUint32(data_offset, true);
    data_offset += 4;
  }
  data_offset += popcnt(flags & (v > 1 ? 12288 : 4096)) * 4;
  if (flags & 16) {
    sidx = dv.getUint32(data_offset, true);
    data_offset += 4;
  }
  if (flags & 32) {
    ieee = dv.getFloat64(data_offset, true);
    data_offset += 8;
  }
  if (flags & 64) {
    dt.setTime(dt.getTime() + dv.getFloat64(data_offset, true) * 1e3);
    data_offset += 8;
  }
  var ret;
  switch (buf[2]) {
    case 0:
      break;
    case 2:
      ret = { t: "n", v: ieee };
      break;
    case 3:
      ret = { t: "s", v: sst[sidx] };
      break;
    case 5:
      ret = { t: "d", v: dt };
      break;
    case 6:
      ret = { t: "b", v: ieee > 0 };
      break;
    case 7:
      ret = { t: "n", v: ieee / 86400 };
      break;
    case 8:
      ret = { t: "e", v: 0 };
      break;
    case 9:
      {
        if (ridx > -1)
          ret = { t: "s", v: rsst[ridx] };
        else if (sidx > -1)
          ret = { t: "s", v: sst[sidx] };
        else if (!isNaN(ieee))
          ret = { t: "n", v: ieee };
        else
          throw new Error("Unsupported cell type ".concat(buf.slice(0, 4)));
      }
      break;
    default:
      throw new Error("Unsupported cell type ".concat(buf.slice(0, 4)));
  }
  return ret;
}
function parse_new_storage(buf, sst, rsst) {
  var dv = u8_to_dataview(buf);
  var flags = dv.getUint32(8, true);
  var data_offset = 12;
  var ridx = -1, sidx = -1, d128 = NaN, ieee = NaN, dt = new Date(2001, 0, 1);
  if (flags & 1) {
    d128 = readDecimal128LE(buf, data_offset);
    data_offset += 16;
  }
  if (flags & 2) {
    ieee = dv.getFloat64(data_offset, true);
    data_offset += 8;
  }
  if (flags & 4) {
    dt.setTime(dt.getTime() + dv.getFloat64(data_offset, true) * 1e3);
    data_offset += 8;
  }
  if (flags & 8) {
    sidx = dv.getUint32(data_offset, true);
    data_offset += 4;
  }
  if (flags & 16) {
    ridx = dv.getUint32(data_offset, true);
    data_offset += 4;
  }
  var ret;
  switch (buf[1]) {
    case 0:
      break;
    case 2:
      ret = { t: "n", v: d128 };
      break;
    case 3:
      ret = { t: "s", v: sst[sidx] };
      break;
    case 5:
      ret = { t: "d", v: dt };
      break;
    case 6:
      ret = { t: "b", v: ieee > 0 };
      break;
    case 7:
      ret = { t: "n", v: ieee / 86400 };
      break;
    case 8:
      ret = { t: "e", v: 0 };
      break;
    case 9:
      {
        if (ridx > -1)
          ret = { t: "s", v: rsst[ridx] };
        else
          throw new Error("Unsupported cell type ".concat(buf[1], " : ").concat(flags & 31, " : ").concat(buf.slice(0, 4)));
      }
      break;
    case 10:
      ret = { t: "n", v: d128 };
      break;
    default:
      throw new Error("Unsupported cell type ".concat(buf[1], " : ").concat(flags & 31, " : ").concat(buf.slice(0, 4)));
  }
  return ret;
}
function write_new_storage(cell, sst) {
  var out = new Uint8Array(32), dv = u8_to_dataview(out), l = 12, flags = 0;
  out[0] = 5;
  switch (cell.t) {
    case "n":
      out[1] = 2;
      writeDecimal128LE(out, l, cell.v);
      flags |= 1;
      l += 16;
      break;
    case "b":
      out[1] = 6;
      dv.setFloat64(l, cell.v ? 1 : 0, true);
      flags |= 2;
      l += 8;
      break;
    case "s":
      if (sst.indexOf(cell.v) == -1)
        throw new Error("Value ".concat(cell.v, " missing from SST!"));
      out[1] = 3;
      dv.setUint32(l, sst.indexOf(cell.v), true);
      flags |= 8;
      l += 4;
      break;
    default:
      throw "unsupported cell type " + cell.t;
  }
  dv.setUint32(8, flags, true);
  return out.slice(0, l);
}
function write_old_storage(cell, sst) {
  var out = new Uint8Array(32), dv = u8_to_dataview(out), l = 12, flags = 0;
  out[0] = 3;
  switch (cell.t) {
    case "n":
      out[2] = 2;
      dv.setFloat64(l, cell.v, true);
      flags |= 32;
      l += 8;
      break;
    case "b":
      out[2] = 6;
      dv.setFloat64(l, cell.v ? 1 : 0, true);
      flags |= 32;
      l += 8;
      break;
    case "s":
      if (sst.indexOf(cell.v) == -1)
        throw new Error("Value ".concat(cell.v, " missing from SST!"));
      out[2] = 3;
      dv.setUint32(l, sst.indexOf(cell.v), true);
      flags |= 16;
      l += 4;
      break;
    default:
      throw "unsupported cell type " + cell.t;
  }
  dv.setUint32(4, flags, true);
  return out.slice(0, l);
}
function parse_cell_storage(buf, sst, rsst) {
  switch (buf[0]) {
    case 0:
    case 1:
    case 2:
    case 3:
      return parse_old_storage(buf, sst, rsst, buf[0]);
    case 5:
      return parse_new_storage(buf, sst, rsst);
    default:
      throw new Error("Unsupported payload version ".concat(buf[0]));
  }
}
function parse_TSP_Reference(buf) {
  var pb = parse_shallow(buf);
  return parse_varint49(pb[1][0].data);
}
function write_TSP_Reference(idx) {
  var out = [];
  out[1] = [{ type: 0, data: write_varint49(idx) }];
  return write_shallow(out);
}
function parse_TST_TableDataList(M, root) {
  var pb = parse_shallow(root.data);
  var type = varint_to_i32(pb[1][0].data);
  var entries = pb[3];
  var data = [];
  (entries || []).forEach(function(entry) {
    var le = parse_shallow(entry.data);
    var key = varint_to_i32(le[1][0].data) >>> 0;
    switch (type) {
      case 1:
        data[key] = u8str(le[3][0].data);
        break;
      case 8:
        {
          var rt = M[parse_TSP_Reference(le[9][0].data)][0];
          var rtp = parse_shallow(rt.data);
          var rtpref = M[parse_TSP_Reference(rtp[1][0].data)][0];
          var mtype = varint_to_i32(rtpref.meta[1][0].data);
          if (mtype != 2001)
            throw new Error("2000 unexpected reference to ".concat(mtype));
          var tswpsa = parse_shallow(rtpref.data);
          data[key] = tswpsa[3].map(function(x) {
            return u8str(x.data);
          }).join("");
        }
        break;
    }
  });
  return data;
}
function parse_TST_TileRowInfo(u8, type) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n;
  var pb = parse_shallow(u8);
  var R = varint_to_i32(pb[1][0].data) >>> 0;
  var cnt = varint_to_i32(pb[2][0].data) >>> 0;
  var wide_offsets = ((_b = (_a = pb[8]) == null ? void 0 : _a[0]) == null ? void 0 : _b.data) && varint_to_i32(pb[8][0].data) > 0 || false;
  var used_storage_u8, used_storage;
  if (((_d = (_c = pb[7]) == null ? void 0 : _c[0]) == null ? void 0 : _d.data) && type != 0) {
    used_storage_u8 = (_f = (_e = pb[7]) == null ? void 0 : _e[0]) == null ? void 0 : _f.data;
    used_storage = (_h = (_g = pb[6]) == null ? void 0 : _g[0]) == null ? void 0 : _h.data;
  } else if (((_j = (_i = pb[4]) == null ? void 0 : _i[0]) == null ? void 0 : _j.data) && type != 1) {
    used_storage_u8 = (_l = (_k = pb[4]) == null ? void 0 : _k[0]) == null ? void 0 : _l.data;
    used_storage = (_n = (_m = pb[3]) == null ? void 0 : _m[0]) == null ? void 0 : _n.data;
  } else
    throw "NUMBERS Tile missing ".concat(type, " cell storage");
  var width = wide_offsets ? 4 : 1;
  var used_storage_offsets = u8_to_dataview(used_storage_u8);
  var offsets = [];
  for (var C = 0; C < used_storage_u8.length / 2; ++C) {
    var off = used_storage_offsets.getUint16(C * 2, true);
    if (off < 65535)
      offsets.push([C, off]);
  }
  if (offsets.length != cnt)
    throw "Expected ".concat(cnt, " cells, found ").concat(offsets.length);
  var cells = [];
  for (C = 0; C < offsets.length - 1; ++C)
    cells[offsets[C][0]] = used_storage.subarray(offsets[C][1] * width, offsets[C + 1][1] * width);
  if (offsets.length >= 1)
    cells[offsets[offsets.length - 1][0]] = used_storage.subarray(offsets[offsets.length - 1][1] * width);
  return { R: R, cells: cells };
}
function parse_TST_Tile(M, root) {
  var _a;
  var pb = parse_shallow(root.data);
  var storage = ((_a = pb == null ? void 0 : pb[7]) == null ? void 0 : _a[0]) ? varint_to_i32(pb[7][0].data) >>> 0 > 0 ? 1 : 0 : -1;
  var ri = mappa(pb[5], function(u8) {
    return parse_TST_TileRowInfo(u8, storage);
  });
  return {
    nrows: varint_to_i32(pb[4][0].data) >>> 0,
    data: ri.reduce(function(acc, x) {
      if (!acc[x.R])
        acc[x.R] = [];
      x.cells.forEach(function(cell, C) {
        if (acc[x.R][C])
          throw new Error("Duplicate cell r=".concat(x.R, " c=").concat(C));
        acc[x.R][C] = cell;
      });
      return acc;
    }, [])
  };
}
function parse_TST_TableModelArchive(M, root, ws) {
  var _a;
  var pb = parse_shallow(root.data);
  var range = { s: { r: 0, c: 0 }, e: { r: 0, c: 0 } };
  range.e.r = (varint_to_i32(pb[6][0].data) >>> 0) - 1;
  if (range.e.r < 0)
    throw new Error("Invalid row varint ".concat(pb[6][0].data));
  range.e.c = (varint_to_i32(pb[7][0].data) >>> 0) - 1;
  if (range.e.c < 0)
    throw new Error("Invalid col varint ".concat(pb[7][0].data));
  ws["!ref"] = encode_range(range);
  var store = parse_shallow(pb[4][0].data);
  var sst = parse_TST_TableDataList(M, M[parse_TSP_Reference(store[4][0].data)][0]);
  var rsst = ((_a = store[17]) == null ? void 0 : _a[0]) ? parse_TST_TableDataList(M, M[parse_TSP_Reference(store[17][0].data)][0]) : [];
  var tile = parse_shallow(store[3][0].data);
  var _R = 0;
  tile[1].forEach(function(t) {
    var tl = parse_shallow(t.data);
    var ref = M[parse_TSP_Reference(tl[2][0].data)][0];
    var mtype = varint_to_i32(ref.meta[1][0].data);
    if (mtype != 6002)
      throw new Error("6001 unexpected reference to ".concat(mtype));
    var _tile = parse_TST_Tile(M, ref);
    _tile.data.forEach(function(row, R) {
      row.forEach(function(buf, C) {
        var addr = encode_cell({ r: _R + R, c: C });
        var res = parse_cell_storage(buf, sst, rsst);
        if (res)
          ws[addr] = res;
      });
    });
    _R += _tile.nrows;
  });
}
function parse_TST_TableInfoArchive(M, root) {
  var pb = parse_shallow(root.data);
  var out = { "!ref": "A1" };
  var tableref = M[parse_TSP_Reference(pb[2][0].data)];
  var mtype = varint_to_i32(tableref[0].meta[1][0].data);
  if (mtype != 6001)
    throw new Error("6000 unexpected reference to ".concat(mtype));
  parse_TST_TableModelArchive(M, tableref[0], out);
  return out;
}
function parse_TN_SheetArchive(M, root) {
  var _a;
  var pb = parse_shallow(root.data);
  var out = {
    name: ((_a = pb[1]) == null ? void 0 : _a[0]) ? u8str(pb[1][0].data) : "",
    sheets: []
  };
  var shapeoffs = mappa(pb[2], parse_TSP_Reference);
  shapeoffs.forEach(function(off) {
    M[off].forEach(function(m) {
      var mtype = varint_to_i32(m.meta[1][0].data);
      if (mtype == 6e3)
        out.sheets.push(parse_TST_TableInfoArchive(M, m));
    });
  });
  return out;
}
function parse_TN_DocumentArchive(M, root) {
  var out = book_new();
  var pb = parse_shallow(root.data);
  var sheetoffs = mappa(pb[1], parse_TSP_Reference);
  sheetoffs.forEach(function(off) {
    M[off].forEach(function(m) {
      var mtype = varint_to_i32(m.meta[1][0].data);
      if (mtype == 2) {
        var root2 = parse_TN_SheetArchive(M, m);
        root2.sheets.forEach(function(sheet, idx) {
          book_append_sheet(out, sheet, idx == 0 ? root2.name : root2.name + "_" + idx, true);
        });
      }
    });
  });
  if (out.SheetNames.length == 0)
    throw new Error("Empty NUMBERS file");
  return out;
}
function parse_numbers_iwa(cfb) {
  var _a, _b, _c, _d;
  var M = {}, indices = [];
  cfb.FullPaths.forEach(function(p) {
    if (p.match(/\.iwpv2/))
      throw new Error("Unsupported password protection");
  });
  cfb.FileIndex.forEach(function(s) {
    if (!s.name.match(/\.iwa$/))
      return;
    var o;
    try {
      o = decompress_iwa_file(s.content);
    } catch (e) {
      return console.log("?? " + s.content.length + " " + (e.message || e));
    }
    var packets;
    try {
      packets = parse_iwa_file(o);
    } catch (e) {
      return console.log("## " + (e.message || e));
    }
    packets.forEach(function(packet) {
      M[packet.id] = packet.messages;
      indices.push(packet.id);
    });
  });
  if (!indices.length)
    throw new Error("File has no messages");
  var docroot = ((_d = (_c = (_b = (_a = M == null ? void 0 : M[1]) == null ? void 0 : _a[0]) == null ? void 0 : _b.meta) == null ? void 0 : _c[1]) == null ? void 0 : _d[0].data) && varint_to_i32(M[1][0].meta[1][0].data) == 1 && M[1][0];
  if (!docroot)
    indices.forEach(function(idx) {
      M[idx].forEach(function(iwam) {
        var mtype = varint_to_i32(iwam.meta[1][0].data) >>> 0;
        if (mtype == 1) {
          if (!docroot)
            docroot = iwam;
          else
            throw new Error("Document has multiple roots");
        }
      });
    });
  if (!docroot)
    throw new Error("Cannot find Document root");
  return parse_TN_DocumentArchive(M, docroot);
}
function write_tile_row(tri, data, SST) {
  var _a, _b, _c, _d;
  if (!((_a = tri[6]) == null ? void 0 : _a[0]) || !((_b = tri[7]) == null ? void 0 : _b[0]))
    throw "Mutation only works on post-BNC storages!";
  var wide_offsets = ((_d = (_c = tri[8]) == null ? void 0 : _c[0]) == null ? void 0 : _d.data) && varint_to_i32(tri[8][0].data) > 0 || false;
  if (wide_offsets)
    throw "Math only works with normal offsets";
  var cnt = 0;
  var dv = u8_to_dataview(tri[7][0].data), last_offset = 0, cell_storage = [];
  var _dv = u8_to_dataview(tri[4][0].data), _last_offset = 0, _cell_storage = [];
  for (var C = 0; C < data.length; ++C) {
    if (data[C] == null) {
      dv.setUint16(C * 2, 65535, true);
      _dv.setUint16(C * 2, 65535);
      continue;
    }
    dv.setUint16(C * 2, last_offset, true);
    _dv.setUint16(C * 2, _last_offset, true);
    var celload, _celload;
    switch (typeof data[C]) {
      case "string":
        celload = write_new_storage({ t: "s", v: data[C] }, SST);
        _celload = write_old_storage({ t: "s", v: data[C] }, SST);
        break;
      case "number":
        celload = write_new_storage({ t: "n", v: data[C] }, SST);
        _celload = write_old_storage({ t: "n", v: data[C] }, SST);
        break;
      case "boolean":
        celload = write_new_storage({ t: "b", v: data[C] }, SST);
        _celload = write_old_storage({ t: "b", v: data[C] }, SST);
        break;
      default:
        throw new Error("Unsupported value " + data[C]);
    }
    cell_storage.push(celload);
    last_offset += celload.length;
    _cell_storage.push(_celload);
    _last_offset += _celload.length;
    ++cnt;
  }
  tri[2][0].data = write_varint49(cnt);
  for (; C < tri[7][0].data.length / 2; ++C) {
    dv.setUint16(C * 2, 65535, true);
    _dv.setUint16(C * 2, 65535, true);
  }
  tri[6][0].data = u8concat(cell_storage);
  tri[3][0].data = u8concat(_cell_storage);
  return cnt;
}
function write_numbers_iwa(wb, opts) {
  if (!opts || !opts.numbers)
    throw new Error("Must pass a `numbers` option -- check the README");
  var ws = wb.Sheets[wb.SheetNames[0]];
  if (wb.SheetNames.length > 1)
    console.error("The Numbers writer currently writes only the first table");
  var range = decode_range(ws["!ref"]);
  range.s.r = range.s.c = 0;
  var trunc = false;
  if (range.e.c > 9) {
    trunc = true;
    range.e.c = 9;
  }
  if (range.e.r > 49) {
    trunc = true;
    range.e.r = 49;
  }
  if (trunc)
    console.error("The Numbers writer is currently limited to ".concat(encode_range(range)));
  var data = sheet_to_json(ws, { range: range, header: 1 });
  var SST = ["~Sh33tJ5~"];
  data.forEach(function(row) {
    return row.forEach(function(cell) {
      if (typeof cell == "string")
        SST.push(cell);
    });
  });
  var dependents = {};
  var indices = [];
  var cfb = CFB.read(opts.numbers, { type: "base64" });
  cfb.FileIndex.map(function(fi, idx) {
    return [fi, cfb.FullPaths[idx]];
  }).forEach(function(row) {
    var fi = row[0], fp = row[1];
    if (fi.type != 2)
      return;
    if (!fi.name.match(/\.iwa/))
      return;
    var old_content = fi.content;
    var raw1 = decompress_iwa_file(old_content);
    var x2 = parse_iwa_file(raw1);
    x2.forEach(function(packet2) {
      indices.push(packet2.id);
      dependents[packet2.id] = { deps: [], location: fp, type: varint_to_i32(packet2.messages[0].meta[1][0].data) };
    });
  });
  indices.sort(function(x2, y2) {
    return x2 - y2;
  });
  var indices_varint = indices.filter(function(x2) {
    return x2 > 1;
  }).map(function(x2) {
    return [x2, write_varint49(x2)];
  });
  cfb.FileIndex.map(function(fi, idx) {
    return [fi, cfb.FullPaths[idx]];
  }).forEach(function(row) {
    var fi = row[0], fp = row[1];
    if (!fi.name.match(/\.iwa/))
      return;
    var x2 = parse_iwa_file(decompress_iwa_file(fi.content));
    x2.forEach(function(ia) {
      ia.messages.forEach(function(m) {
        indices_varint.forEach(function(ivi) {
          if (ia.messages.some(function(mess) {
            return varint_to_i32(mess.meta[1][0].data) != 11006 && u8contains(mess.data, ivi[1]);
          })) {
            dependents[ivi[0]].deps.push(ia.id);
          }
        });
      });
    });
  });
  function get_unique_msgid() {
    for (var i = 927262; i < 2e6; ++i)
      if (!dependents[i])
        return i;
    throw new Error("Too many messages");
  }
  var entry = CFB.find(cfb, dependents[1].location);
  var x = parse_iwa_file(decompress_iwa_file(entry.content));
  var docroot;
  for (var xi = 0; xi < x.length; ++xi) {
    var packet = x[xi];
    if (packet.id == 1)
      docroot = packet;
  }
  var sheetrootref = parse_TSP_Reference(parse_shallow(docroot.messages[0].data)[1][0].data);
  entry = CFB.find(cfb, dependents[sheetrootref].location);
  x = parse_iwa_file(decompress_iwa_file(entry.content));
  for (xi = 0; xi < x.length; ++xi) {
    packet = x[xi];
    if (packet.id == sheetrootref)
      docroot = packet;
  }
  sheetrootref = parse_TSP_Reference(parse_shallow(docroot.messages[0].data)[2][0].data);
  entry = CFB.find(cfb, dependents[sheetrootref].location);
  x = parse_iwa_file(decompress_iwa_file(entry.content));
  for (xi = 0; xi < x.length; ++xi) {
    packet = x[xi];
    if (packet.id == sheetrootref)
      docroot = packet;
  }
  sheetrootref = parse_TSP_Reference(parse_shallow(docroot.messages[0].data)[2][0].data);
  entry = CFB.find(cfb, dependents[sheetrootref].location);
  x = parse_iwa_file(decompress_iwa_file(entry.content));
  for (xi = 0; xi < x.length; ++xi) {
    packet = x[xi];
    if (packet.id == sheetrootref)
      docroot = packet;
  }
  var pb = parse_shallow(docroot.messages[0].data);
  {
    pb[6][0].data = write_varint49(range.e.r + 1);
    pb[7][0].data = write_varint49(range.e.c + 1);
    var cruidsref = parse_TSP_Reference(pb[46][0].data);
    var oldbucket = CFB.find(cfb, dependents[cruidsref].location);
    var _x = parse_iwa_file(decompress_iwa_file(oldbucket.content));
    {
      for (var j = 0; j < _x.length; ++j) {
        if (_x[j].id == cruidsref)
          break;
      }
      if (_x[j].id != cruidsref)
        throw "Bad ColumnRowUIDMapArchive";
      var cruids = parse_shallow(_x[j].messages[0].data);
      cruids[1] = [];
      cruids[2] = [], cruids[3] = [];
      for (var C = 0; C <= range.e.c; ++C) {
        var uuid = [];
        uuid[1] = uuid[2] = [{ type: 0, data: write_varint49(C + 420690) }];
        cruids[1].push({ type: 2, data: write_shallow(uuid) });
        cruids[2].push({ type: 0, data: write_varint49(C) });
        cruids[3].push({ type: 0, data: write_varint49(C) });
      }
      cruids[4] = [];
      cruids[5] = [], cruids[6] = [];
      for (var R = 0; R <= range.e.r; ++R) {
        uuid = [];
        uuid[1] = uuid[2] = [{ type: 0, data: write_varint49(R + 726270) }];
        cruids[4].push({ type: 2, data: write_shallow(uuid) });
        cruids[5].push({ type: 0, data: write_varint49(R) });
        cruids[6].push({ type: 0, data: write_varint49(R) });
      }
      _x[j].messages[0].data = write_shallow(cruids);
    }
    oldbucket.content = compress_iwa_file(write_iwa_file(_x));
    oldbucket.size = oldbucket.content.length;
    delete pb[46];
    var store = parse_shallow(pb[4][0].data);
    {
      store[7][0].data = write_varint49(range.e.r + 1);
      var row_headers = parse_shallow(store[1][0].data);
      var row_header_ref = parse_TSP_Reference(row_headers[2][0].data);
      oldbucket = CFB.find(cfb, dependents[row_header_ref].location);
      _x = parse_iwa_file(decompress_iwa_file(oldbucket.content));
      {
        if (_x[0].id != row_header_ref)
          throw "Bad HeaderStorageBucket";
        var base_bucket = parse_shallow(_x[0].messages[0].data);
        for (R = 0; R < data.length; ++R) {
          var _bucket = parse_shallow(base_bucket[2][0].data);
          _bucket[1][0].data = write_varint49(R);
          _bucket[4][0].data = write_varint49(data[R].length);
          base_bucket[2][R] = { type: base_bucket[2][0].type, data: write_shallow(_bucket) };
        }
        _x[0].messages[0].data = write_shallow(base_bucket);
      }
      oldbucket.content = compress_iwa_file(write_iwa_file(_x));
      oldbucket.size = oldbucket.content.length;
      var col_header_ref = parse_TSP_Reference(store[2][0].data);
      oldbucket = CFB.find(cfb, dependents[col_header_ref].location);
      _x = parse_iwa_file(decompress_iwa_file(oldbucket.content));
      {
        if (_x[0].id != col_header_ref)
          throw "Bad HeaderStorageBucket";
        base_bucket = parse_shallow(_x[0].messages[0].data);
        for (C = 0; C <= range.e.c; ++C) {
          _bucket = parse_shallow(base_bucket[2][0].data);
          _bucket[1][0].data = write_varint49(C);
          _bucket[4][0].data = write_varint49(range.e.r + 1);
          base_bucket[2][C] = { type: base_bucket[2][0].type, data: write_shallow(_bucket) };
        }
        _x[0].messages[0].data = write_shallow(base_bucket);
      }
      oldbucket.content = compress_iwa_file(write_iwa_file(_x));
      oldbucket.size = oldbucket.content.length;
      var sstref = parse_TSP_Reference(store[4][0].data);
      (function() {
        var sentry = CFB.find(cfb, dependents[sstref].location);
        var sx = parse_iwa_file(decompress_iwa_file(sentry.content));
        var sstroot;
        for (var sxi = 0; sxi < sx.length; ++sxi) {
          var packet2 = sx[sxi];
          if (packet2.id == sstref)
            sstroot = packet2;
        }
        var sstdata = parse_shallow(sstroot.messages[0].data);
        {
          sstdata[3] = [];
          var newsst = [];
          SST.forEach(function(str, i) {
            newsst[1] = [{ type: 0, data: write_varint49(i) }];
            newsst[2] = [{ type: 0, data: write_varint49(1) }];
            newsst[3] = [{ type: 2, data: stru8(str) }];
            sstdata[3].push({ type: 2, data: write_shallow(newsst) });
          });
        }
        sstroot.messages[0].data = write_shallow(sstdata);
        var sy = write_iwa_file(sx);
        var raw32 = compress_iwa_file(sy);
        sentry.content = raw32;
        sentry.size = sentry.content.length;
      })();
      var tile = parse_shallow(store[3][0].data);
      {
        var t = tile[1][0];
        delete tile[2];
        var tl = parse_shallow(t.data);
        {
          var tileref = parse_TSP_Reference(tl[2][0].data);
          (function() {
            var tentry = CFB.find(cfb, dependents[tileref].location);
            var tx = parse_iwa_file(decompress_iwa_file(tentry.content));
            var tileroot;
            for (var sxi = 0; sxi < tx.length; ++sxi) {
              var packet2 = tx[sxi];
              if (packet2.id == tileref)
                tileroot = packet2;
            }
            var tiledata = parse_shallow(tileroot.messages[0].data);
            {
              delete tiledata[6];
              delete tile[7];
              var rowload = new Uint8Array(tiledata[5][0].data);
              tiledata[5] = [];
              var cnt = 0;
              for (var R2 = 0; R2 <= range.e.r; ++R2) {
                var tilerow = parse_shallow(rowload);
                cnt += write_tile_row(tilerow, data[R2], SST);
                tilerow[1][0].data = write_varint49(R2);
                tiledata[5].push({ data: write_shallow(tilerow), type: 2 });
              }
              tiledata[1] = [{ type: 0, data: write_varint49(range.e.c + 1) }];
              tiledata[2] = [{ type: 0, data: write_varint49(range.e.r + 1) }];
              tiledata[3] = [{ type: 0, data: write_varint49(cnt) }];
              tiledata[4] = [{ type: 0, data: write_varint49(range.e.r + 1) }];
            }
            tileroot.messages[0].data = write_shallow(tiledata);
            var ty = write_iwa_file(tx);
            var raw32 = compress_iwa_file(ty);
            tentry.content = raw32;
            tentry.size = tentry.content.length;
          })();
        }
        t.data = write_shallow(tl);
      }
      store[3][0].data = write_shallow(tile);
    }
    pb[4][0].data = write_shallow(store);
  }
  docroot.messages[0].data = write_shallow(pb);
  var y = write_iwa_file(x);
  var raw3 = compress_iwa_file(y);
  entry.content = raw3;
  entry.size = entry.content.length;
  return cfb;
}
function fix_opts_func(defaults/*:Array<Array<any> >*/)/*:{(o:any):void}*/ {
	return function fix_opts(opts) {
		for(var i = 0; i != defaults.length; ++i) {
			var d = defaults[i];
			if(opts[d[0]] === undefined) opts[d[0]] = d[1];
			if(d[2] === 'n') opts[d[0]] = Number(opts[d[0]]);
		}
	};
}

function fix_read_opts(opts) {
fix_opts_func([
	['cellNF', false], /* emit cell number format string as .z */
	['cellHTML', true], /* emit html string as .h */
	['cellFormula', true], /* emit formulae as .f */
	['cellStyles', false], /* emits style/theme as .s */
	['cellText', true], /* emit formatted text as .w */
	['cellDates', false], /* emit date cells with type `d` */

	['sheetStubs', false], /* emit empty cells */
	['sheetRows', 0, 'n'], /* read n rows (0 = read all rows) */

	['bookDeps', false], /* parse calculation chains */
	['bookSheets', false], /* only try to get sheet names (no Sheets) */
	['bookProps', false], /* only try to get properties (no Sheets) */
	['bookFiles', false], /* include raw file structure (keys, files, cfb) */
	['bookVBA', false], /* include vba raw data (vbaraw) */

	['password',''], /* password */
	['WTF', false] /* WTF mode (throws errors) */
])(opts);
}

function fix_write_opts(opts) {
fix_opts_func([
	['cellDates', false], /* write date cells with type `d` */

	['bookSST', false], /* Generate Shared String Table */

	['bookType', 'xlsx'], /* Type of workbook (xlsx/m/b) */

	['compression', false], /* Use file compression */

	['WTF', false] /* WTF mode (throws errors) */
])(opts);
}
function get_sheet_type(n/*:string*/)/*:string*/ {
	if(RELS.WS.indexOf(n) > -1) return "sheet";
	if(RELS.CS && n == RELS.CS) return "chart";
	if(RELS.DS && n == RELS.DS) return "dialog";
	if(RELS.MS && n == RELS.MS) return "macro";
	return (n && n.length) ? n : "sheet";
}
function safe_parse_wbrels(wbrels, sheets) {
	if(!wbrels) return 0;
	try {
		wbrels = sheets.map(function pwbr(w) { if(!w.id) w.id = w.strRelID; return [w.name, wbrels['!id'][w.id].Target, get_sheet_type(wbrels['!id'][w.id].Type)]; });
	} catch(e) { return null; }
	return !wbrels || wbrels.length === 0 ? null : wbrels;
}

function safe_parse_sheet(zip, path/*:string*/, relsPath/*:string*/, sheet, idx/*:number*/, sheetRels, sheets, stype/*:string*/, opts, wb, themes, styles) {
	try {
		sheetRels[sheet]=parse_rels(getzipstr(zip, relsPath, true), path);
		var data = getzipdata(zip, path);
		var _ws;
		switch(stype) {
			case 'sheet':  _ws = parse_ws(data, path, idx, opts, sheetRels[sheet], wb, themes, styles); break;
			case 'chart':  _ws = parse_cs(data, path, idx, opts, sheetRels[sheet], wb, themes, styles);
				if(!_ws || !_ws['!drawel']) break;
				var dfile = resolve_path(_ws['!drawel'].Target, path);
				var drelsp = get_rels_path(dfile);
				var draw = parse_drawing(getzipstr(zip, dfile, true), parse_rels(getzipstr(zip, drelsp, true), dfile));
				var chartp = resolve_path(draw, dfile);
				var crelsp = get_rels_path(chartp);
				_ws = parse_chart(getzipstr(zip, chartp, true), chartp, opts, parse_rels(getzipstr(zip, crelsp, true), chartp), wb, _ws);
				break;
			case 'macro':  _ws = parse_ms(data, path, idx, opts, sheetRels[sheet], wb, themes, styles); break;
			case 'dialog': _ws = parse_ds(data, path, idx, opts, sheetRels[sheet], wb, themes, styles); break;
			default: throw new Error("Unrecognized sheet type " + stype);
		}
		sheets[sheet] = _ws;

		/* scan rels for comments and threaded comments */
		var tcomments = [];
		if(sheetRels && sheetRels[sheet]) keys(sheetRels[sheet]).forEach(function(n) {
			var dfile = "";
			if(sheetRels[sheet][n].Type == RELS.CMNT) {
				dfile = resolve_path(sheetRels[sheet][n].Target, path);
				var comments = parse_cmnt(getzipdata(zip, dfile, true), dfile, opts);
				if(!comments || !comments.length) return;
				sheet_insert_comments(_ws, comments, false);
			}
			if(sheetRels[sheet][n].Type == RELS.TCMNT) {
				dfile = resolve_path(sheetRels[sheet][n].Target, path);
				tcomments = tcomments.concat(parse_tcmnt_xml(getzipdata(zip, dfile, true), opts));
			}
		});
		if(tcomments && tcomments.length) sheet_insert_comments(_ws, tcomments, true, opts.people || []);
	} catch(e) { if(opts.WTF) throw e; }
}

function strip_front_slash(x/*:string*/)/*:string*/ { return x.charAt(0) == '/' ? x.slice(1) : x; }

function parse_zip(zip/*:ZIP*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	make_ssf();
	opts = opts || {};
	fix_read_opts(opts);

	/* OpenDocument Part 3 Section 2.2.1 OpenDocument Package */
	if(safegetzipfile(zip, 'META-INF/manifest.xml')) return parse_ods(zip, opts);
	/* UOC */
	if(safegetzipfile(zip, 'objectdata.xml')) return parse_ods(zip, opts);
	/* Numbers */
	if(safegetzipfile(zip, 'Index/Document.iwa')) {
		if(typeof Uint8Array == "undefined") throw new Error('NUMBERS file parsing requires Uint8Array support');
		if(typeof parse_numbers_iwa != "undefined") {
			if(zip.FileIndex) return parse_numbers_iwa(zip);
			var _zip = CFB.utils.cfb_new();
			zipentries(zip).forEach(function(e) { zip_add_file(_zip, e, getzipbin(zip, e)); });
			return parse_numbers_iwa(_zip);
		}
		throw new Error('Unsupported NUMBERS file');
	}
	if(!safegetzipfile(zip, '[Content_Types].xml')) {
		if(safegetzipfile(zip, 'index.xml.gz')) throw new Error('Unsupported NUMBERS 08 file');
		if(safegetzipfile(zip, 'index.xml')) throw new Error('Unsupported NUMBERS 09 file');
		throw new Error('Unsupported ZIP file');
	}

	var entries = zipentries(zip);
	var dir = parse_ct((getzipstr(zip, '[Content_Types].xml')/*:?any*/));
	var xlsb = false;
	var sheets, binname;
	if(dir.workbooks.length === 0) {
		binname = "xl/workbook.xml";
		if(getzipdata(zip,binname, true)) dir.workbooks.push(binname);
	}
	if(dir.workbooks.length === 0) {
		binname = "xl/workbook.bin";
		if(!getzipdata(zip,binname,true)) throw new Error("Could not find workbook");
		dir.workbooks.push(binname);
		xlsb = true;
	}
	if(dir.workbooks[0].slice(-3) == "bin") xlsb = true;

	var themes = ({}/*:any*/);
	var styles = ({}/*:any*/);
	if(!opts.bookSheets && !opts.bookProps) {
		strs = [];
		if(dir.sst) try { strs=parse_sst(getzipdata(zip, strip_front_slash(dir.sst)), dir.sst, opts); } catch(e) { if(opts.WTF) throw e; }

		if(opts.cellStyles && dir.themes.length) themes = parse_theme(getzipstr(zip, dir.themes[0].replace(/^\//,''), true)||"",dir.themes[0], opts);

		if(dir.style) styles = parse_sty(getzipdata(zip, strip_front_slash(dir.style)), dir.style, themes, opts);
	}

	/*var externbooks = */dir.links.map(function(link) {
		try {
			var rels = parse_rels(getzipstr(zip, get_rels_path(strip_front_slash(link))), link);
			return parse_xlink(getzipdata(zip, strip_front_slash(link)), rels, link, opts);
		} catch(e) {}
	});

	var wb = parse_wb(getzipdata(zip, strip_front_slash(dir.workbooks[0])), dir.workbooks[0], opts);

	var props = {}, propdata = "";

	if(dir.coreprops.length) {
		propdata = getzipdata(zip, strip_front_slash(dir.coreprops[0]), true);
		if(propdata) props = parse_core_props(propdata);
		if(dir.extprops.length !== 0) {
			propdata = getzipdata(zip, strip_front_slash(dir.extprops[0]), true);
			if(propdata) parse_ext_props(propdata, props, opts);
		}
	}

	var custprops = {};
	if(!opts.bookSheets || opts.bookProps) {
		if (dir.custprops.length !== 0) {
			propdata = getzipstr(zip, strip_front_slash(dir.custprops[0]), true);
			if(propdata) custprops = parse_cust_props(propdata, opts);
		}
	}

	var out = ({}/*:any*/);
	if(opts.bookSheets || opts.bookProps) {
		if(wb.Sheets) sheets = wb.Sheets.map(function pluck(x){ return x.name; });
		else if(props.Worksheets && props.SheetNames.length > 0) sheets=props.SheetNames;
		if(opts.bookProps) { out.Props = props; out.Custprops = custprops; }
		if(opts.bookSheets && typeof sheets !== 'undefined') out.SheetNames = sheets;
		if(opts.bookSheets ? out.SheetNames : opts.bookProps) return out;
	}
	sheets = {};

	var deps = {};
	if(opts.bookDeps && dir.calcchain) deps=parse_cc(getzipdata(zip, strip_front_slash(dir.calcchain)),dir.calcchain,opts);

	var i=0;
	var sheetRels = ({}/*:any*/);
	var path, relsPath;

	{
		var wbsheets = wb.Sheets;
		props.Worksheets = wbsheets.length;
		props.SheetNames = [];
		for(var j = 0; j != wbsheets.length; ++j) {
			props.SheetNames[j] = wbsheets[j].name;
		}
	}

	var wbext = xlsb ? "bin" : "xml";
	var wbrelsi = dir.workbooks[0].lastIndexOf("/");
	var wbrelsfile = (dir.workbooks[0].slice(0, wbrelsi+1) + "_rels/" + dir.workbooks[0].slice(wbrelsi+1) + ".rels").replace(/^\//,"");
	if(!safegetzipfile(zip, wbrelsfile)) wbrelsfile = 'xl/_rels/workbook.' + wbext + '.rels';
	var wbrels = parse_rels(getzipstr(zip, wbrelsfile, true), wbrelsfile.replace(/_rels.*/, "s5s"));

	if((dir.metadata || []).length >= 1) {
		/* TODO: MDX and other types of metadata */
		opts.xlmeta = parse_xlmeta(getzipdata(zip, strip_front_slash(dir.metadata[0])),dir.metadata[0],opts);
	}

	if((dir.people || []).length >= 1) {
		opts.people = parse_people_xml(getzipdata(zip, strip_front_slash(dir.people[0])),opts);
	}

	if(wbrels) wbrels = safe_parse_wbrels(wbrels, wb.Sheets);

	/* Numbers iOS hack */
	var nmode = (getzipdata(zip,"xl/worksheets/sheet.xml",true))?1:0;
	wsloop: for(i = 0; i != props.Worksheets; ++i) {
		var stype = "sheet";
		if(wbrels && wbrels[i]) {
			path = 'xl/' + (wbrels[i][1]).replace(/[\/]?xl\//, "");
			if(!safegetzipfile(zip, path)) path = wbrels[i][1];
			if(!safegetzipfile(zip, path)) path = wbrelsfile.replace(/_rels\/.*$/,"") + wbrels[i][1];
			stype = wbrels[i][2];
		} else {
			path = 'xl/worksheets/sheet'+(i+1-nmode)+"." + wbext;
			path = path.replace(/sheet0\./,"sheet.");
		}
		relsPath = path.replace(/^(.*)(\/)([^\/]*)$/, "$1/_rels/$3.rels");
		if(opts && opts.sheets != null) switch(typeof opts.sheets) {
			case "number": if(i != opts.sheets) continue wsloop; break;
			case "string": if(props.SheetNames[i].toLowerCase() != opts.sheets.toLowerCase()) continue wsloop; break;
			default: if(Array.isArray && Array.isArray(opts.sheets)) {
				var snjseen = false;
				for(var snj = 0; snj != opts.sheets.length; ++snj) {
					if(typeof opts.sheets[snj] == "number" && opts.sheets[snj] == i) snjseen=1;
					if(typeof opts.sheets[snj] == "string" && opts.sheets[snj].toLowerCase() == props.SheetNames[i].toLowerCase()) snjseen = 1;
				}
				if(!snjseen) continue wsloop;
			}
		}
		safe_parse_sheet(zip, path, relsPath, props.SheetNames[i], i, sheetRels, sheets, stype, opts, wb, themes, styles);
	}

	out = ({
		Directory: dir,
		Workbook: wb,
		Props: props,
		Custprops: custprops,
		Deps: deps,
		Sheets: sheets,
		SheetNames: props.SheetNames,
		Strings: strs,
		Styles: styles,
		Themes: themes,
		SSF: dup(table_fmt)
	}/*:any*/);
	if(opts && opts.bookFiles) {
		if(zip.files) {
			out.keys = entries;
			out.files = zip.files;
		} else {
			out.keys = [];
			out.files = {};
			zip.FullPaths.forEach(function(p, idx) {
				p = p.replace(/^Root Entry[\/]/, "");
				out.keys.push(p);
				out.files[p] = zip.FileIndex[idx];
			});
		}
	}
	if(opts && opts.bookVBA) {
		if(dir.vba.length > 0) out.vbaraw = getzipdata(zip,strip_front_slash(dir.vba[0]),true);
		else if(dir.defaults && dir.defaults.bin === CT_VBA) out.vbaraw = getzipdata(zip, 'xl/vbaProject.bin',true);
	}
	return out;
}

/* [MS-OFFCRYPTO] 2.1.1 */
function parse_xlsxcfb(cfb, _opts/*:?ParseOpts*/)/*:Workbook*/ {
	var opts = _opts || {};
	var f = 'Workbook', data = CFB.find(cfb, f);
	try {
	f = '/!DataSpaces/Version';
	data = CFB.find(cfb, f); if(!data || !data.content) throw new Error("ECMA-376 Encrypted file missing " + f);
	/*var version = */parse_DataSpaceVersionInfo(data.content);

	/* 2.3.4.1 */
	f = '/!DataSpaces/DataSpaceMap';
	data = CFB.find(cfb, f); if(!data || !data.content) throw new Error("ECMA-376 Encrypted file missing " + f);
	var dsm = parse_DataSpaceMap(data.content);
	if(dsm.length !== 1 || dsm[0].comps.length !== 1 || dsm[0].comps[0].t !== 0 || dsm[0].name !== "StrongEncryptionDataSpace" || dsm[0].comps[0].v !== "EncryptedPackage")
		throw new Error("ECMA-376 Encrypted file bad " + f);

	/* 2.3.4.2 */
	f = '/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace';
	data = CFB.find(cfb, f); if(!data || !data.content) throw new Error("ECMA-376 Encrypted file missing " + f);
	var seds = parse_DataSpaceDefinition(data.content);
	if(seds.length != 1 || seds[0] != "StrongEncryptionTransform")
		throw new Error("ECMA-376 Encrypted file bad " + f);

	/* 2.3.4.3 */
	f = '/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary';
	data = CFB.find(cfb, f); if(!data || !data.content) throw new Error("ECMA-376 Encrypted file missing " + f);
	/*var hdr = */parse_Primary(data.content);
	} catch(e) {}

	f = '/EncryptionInfo';
	data = CFB.find(cfb, f); if(!data || !data.content) throw new Error("ECMA-376 Encrypted file missing " + f);
	var einfo = parse_EncryptionInfo(data.content);

	/* 2.3.4.4 */
	f = '/EncryptedPackage';
	data = CFB.find(cfb, f); if(!data || !data.content) throw new Error("ECMA-376 Encrypted file missing " + f);

/*global decrypt_agile */
/*:: declare var decrypt_agile:any; */
	if(einfo[0] == 0x04 && typeof decrypt_agile !== 'undefined') return decrypt_agile(einfo[1], data.content, opts.password || "", opts);
/*global decrypt_std76 */
/*:: declare var decrypt_std76:any; */
	if(einfo[0] == 0x02 && typeof decrypt_std76 !== 'undefined') return decrypt_std76(einfo[1], data.content, opts.password || "", opts);
	throw new Error("File is password-protected");
}

function write_zip(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:ZIP*/ {
	if(opts.bookType == "ods") return write_ods(wb, opts);
	if(opts.bookType == "numbers") return write_numbers_iwa(wb, opts);
	if(opts.bookType == "xlsb") return write_zip_xlsxb(wb, opts);
	return write_zip_xlsx(wb, opts);
}

/* XLSX and XLSB writing are very similar.  Originally they were unified in one
   export function.  This is horrible for tree shaking in the common case (most
   applications need to export files in one format) so this function supports
   both formats while write_zip_xlsx only handles XLSX */
function write_zip_xlsxb(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:ZIP*/ {
	_shapeid = 1024;
	if(wb && !wb.SSF) {
		wb.SSF = dup(table_fmt);
	}
	if(wb && wb.SSF) {
		make_ssf(); SSF_load_table(wb.SSF);
		// $FlowIgnore
		opts.revssf = evert_num(wb.SSF); opts.revssf[wb.SSF[65535]] = 0;
		opts.ssf = wb.SSF;
	}
	opts.rels = {}; opts.wbrels = {};
	opts.Strings = /*::((*/[]/*:: :any):SST)*/; opts.Strings.Count = 0; opts.Strings.Unique = 0;
	if(browser_has_Map) opts.revStrings = new Map();
	else { opts.revStrings = {}; opts.revStrings.foo = []; delete opts.revStrings.foo; }
	var wbext = opts.bookType == "xlsb" ? "bin" : "xml";
	var vbafmt = VBAFMTS.indexOf(opts.bookType) > -1;
	var ct = new_ct();
	fix_write_opts(opts = opts || {});
	var zip = zip_new();
	var f = "", rId = 0;

	opts.cellXfs = [];
	get_cell_style(opts.cellXfs, {}, {revssf:{"General":0}});

	if(!wb.Props) wb.Props = {};

	f = "docProps/core.xml";
	zip_add_file(zip, f, write_core_props(wb.Props, opts));
	ct.coreprops.push(f);
	add_rels(opts.rels, 2, f, RELS.CORE_PROPS);

	/*::if(!wb.Props) throw "unreachable"; */
	f = "docProps/app.xml";
	if(wb.Props && wb.Props.SheetNames){/* empty */}
	else if(!wb.Workbook || !wb.Workbook.Sheets) wb.Props.SheetNames = wb.SheetNames;
	else {
		var _sn = [];
		for(var _i = 0; _i < wb.SheetNames.length; ++_i)
			if((wb.Workbook.Sheets[_i]||{}).Hidden != 2) _sn.push(wb.SheetNames[_i]);
		wb.Props.SheetNames = _sn;
	}
	wb.Props.Worksheets = wb.Props.SheetNames.length;
	zip_add_file(zip, f, write_ext_props(wb.Props, opts));
	ct.extprops.push(f);
	add_rels(opts.rels, 3, f, RELS.EXT_PROPS);

	if(wb.Custprops !== wb.Props && keys(wb.Custprops||{}).length > 0) {
		f = "docProps/custom.xml";
		zip_add_file(zip, f, write_cust_props(wb.Custprops, opts));
		ct.custprops.push(f);
		add_rels(opts.rels, 4, f, RELS.CUST_PROPS);
	}

	for(rId=1;rId <= wb.SheetNames.length; ++rId) {
		var wsrels = {'!id':{}};
		var ws = wb.Sheets[wb.SheetNames[rId-1]];
		var _type = (ws || {})["!type"] || "sheet";
		switch(_type) {
		case "chart":
			/* falls through */
		default:
			f = "xl/worksheets/sheet" + rId + "." + wbext;
			zip_add_file(zip, f, write_ws(rId-1, f, opts, wb, wsrels));
			ct.sheets.push(f);
			add_rels(opts.wbrels, -1, "worksheets/sheet" + rId + "." + wbext, RELS.WS[0]);
		}

		if(ws) {
			var comments = ws['!comments'];
			var need_vml = false;
			var cf = "";
			if(comments && comments.length > 0) {
				cf = "xl/comments" + rId + "." + wbext;
				zip_add_file(zip, cf, write_cmnt(comments, cf, opts));
				ct.comments.push(cf);
				add_rels(wsrels, -1, "../comments" + rId + "." + wbext, RELS.CMNT);
				need_vml = true;
			}
			if(ws['!legacy']) {
				if(need_vml) zip_add_file(zip, "xl/drawings/vmlDrawing" + (rId) + ".vml", write_comments_vml(rId, ws['!comments']));
			}
			delete ws['!comments'];
			delete ws['!legacy'];
		}

		if(wsrels['!id'].rId1) zip_add_file(zip, get_rels_path(f), write_rels(wsrels));
	}

	if(opts.Strings != null && opts.Strings.length > 0) {
		f = "xl/sharedStrings." + wbext;
		zip_add_file(zip, f, write_sst(opts.Strings, f, opts));
		ct.strs.push(f);
		add_rels(opts.wbrels, -1, "sharedStrings." + wbext, RELS.SST);
	}

	f = "xl/workbook." + wbext;
	zip_add_file(zip, f, write_wb(wb, f, opts));
	ct.workbooks.push(f);
	add_rels(opts.rels, 1, f, RELS.WB);

	/* TODO: something more intelligent with themes */

	f = "xl/theme/theme1.xml";
	zip_add_file(zip, f, write_theme(wb.Themes, opts));
	ct.themes.push(f);
	add_rels(opts.wbrels, -1, "theme/theme1.xml", RELS.THEME);

	/* TODO: something more intelligent with styles */

	f = "xl/styles." + wbext;
	zip_add_file(zip, f, write_sty(wb, f, opts));
	ct.styles.push(f);
	add_rels(opts.wbrels, -1, "styles." + wbext, RELS.STY);

	if(wb.vbaraw && vbafmt) {
		f = "xl/vbaProject.bin";
		zip_add_file(zip, f, wb.vbaraw);
		ct.vba.push(f);
		add_rels(opts.wbrels, -1, "vbaProject.bin", RELS.VBA);
	}

	f = "xl/metadata." + wbext;
	zip_add_file(zip, f, write_xlmeta(f));
	ct.metadata.push(f);
	add_rels(opts.wbrels, -1, "metadata." + wbext, RELS.XLMETA);

	zip_add_file(zip, "[Content_Types].xml", write_ct(ct, opts));
	zip_add_file(zip, '_rels/.rels', write_rels(opts.rels));
	zip_add_file(zip, 'xl/_rels/workbook.' + wbext + '.rels', write_rels(opts.wbrels));

	delete opts.revssf; delete opts.ssf;
	return zip;
}

function write_zip_xlsx(wb/*:Workbook*/, opts/*:WriteOpts*/)/*:ZIP*/ {
	_shapeid = 1024;
	if(wb && !wb.SSF) {
		wb.SSF = dup(table_fmt);
	}
	if(wb && wb.SSF) {
		make_ssf(); SSF_load_table(wb.SSF);
		// $FlowIgnore
		opts.revssf = evert_num(wb.SSF); opts.revssf[wb.SSF[65535]] = 0;
		opts.ssf = wb.SSF;
	}
	opts.rels = {}; opts.wbrels = {};
	opts.Strings = /*::((*/[]/*:: :any):SST)*/; opts.Strings.Count = 0; opts.Strings.Unique = 0;
	if(browser_has_Map) opts.revStrings = new Map();
	else { opts.revStrings = {}; opts.revStrings.foo = []; delete opts.revStrings.foo; }
	var wbext = "xml";
	var vbafmt = VBAFMTS.indexOf(opts.bookType) > -1;
	var ct = new_ct();
	fix_write_opts(opts = opts || {});
	var zip = zip_new();
	var f = "", rId = 0;

	opts.cellXfs = [];
	get_cell_style(opts.cellXfs, {}, {revssf:{"General":0}});

	if(!wb.Props) wb.Props = {};

	f = "docProps/core.xml";
	zip_add_file(zip, f, write_core_props(wb.Props, opts));
	ct.coreprops.push(f);
	add_rels(opts.rels, 2, f, RELS.CORE_PROPS);

	/*::if(!wb.Props) throw "unreachable"; */
	f = "docProps/app.xml";
	if(wb.Props && wb.Props.SheetNames){/* empty */}
	else if(!wb.Workbook || !wb.Workbook.Sheets) wb.Props.SheetNames = wb.SheetNames;
	else {
		var _sn = [];
		for(var _i = 0; _i < wb.SheetNames.length; ++_i)
			if((wb.Workbook.Sheets[_i]||{}).Hidden != 2) _sn.push(wb.SheetNames[_i]);
		wb.Props.SheetNames = _sn;
	}
	wb.Props.Worksheets = wb.Props.SheetNames.length;
	zip_add_file(zip, f, write_ext_props(wb.Props, opts));
	ct.extprops.push(f);
	add_rels(opts.rels, 3, f, RELS.EXT_PROPS);

	if(wb.Custprops !== wb.Props && keys(wb.Custprops||{}).length > 0) {
		f = "docProps/custom.xml";
		zip_add_file(zip, f, write_cust_props(wb.Custprops, opts));
		ct.custprops.push(f);
		add_rels(opts.rels, 4, f, RELS.CUST_PROPS);
	}

	var people = ["SheetJ5"];
	opts.tcid = 0;

	for(rId=1;rId <= wb.SheetNames.length; ++rId) {
		var wsrels = {'!id':{}};
		var ws = wb.Sheets[wb.SheetNames[rId-1]];
		var _type = (ws || {})["!type"] || "sheet";
		switch(_type) {
		case "chart":
			/* falls through */
		default:
			f = "xl/worksheets/sheet" + rId + "." + wbext;
			zip_add_file(zip, f, write_ws_xml(rId-1, opts, wb, wsrels));
			ct.sheets.push(f);
			add_rels(opts.wbrels, -1, "worksheets/sheet" + rId + "." + wbext, RELS.WS[0]);
		}

		if(ws) {
			var comments = ws['!comments'];
			var need_vml = false;
			var cf = "";
			if(comments && comments.length > 0) {
				var needtc = false;
				comments.forEach(function(carr) {
					carr[1].forEach(function(c) { if(c.T == true) needtc = true; });
				});
				if(needtc) {
					cf = "xl/threadedComments/threadedComment" + rId + "." + wbext;
					zip_add_file(zip, cf, write_tcmnt_xml(comments, people, opts));
					ct.threadedcomments.push(cf);
					add_rels(wsrels, -1, "../threadedComments/threadedComment" + rId + "." + wbext, RELS.TCMNT);
				}

				cf = "xl/comments" + rId + "." + wbext;
				zip_add_file(zip, cf, write_comments_xml(comments, opts));
				ct.comments.push(cf);
				add_rels(wsrels, -1, "../comments" + rId + "." + wbext, RELS.CMNT);
				need_vml = true;
			}
			if(ws['!legacy']) {
				if(need_vml) zip_add_file(zip, "xl/drawings/vmlDrawing" + (rId) + ".vml", write_comments_vml(rId, ws['!comments']));
			}
			delete ws['!comments'];
			delete ws['!legacy'];
		}

		if(wsrels['!id'].rId1) zip_add_file(zip, get_rels_path(f), write_rels(wsrels));
	}

	if(opts.Strings != null && opts.Strings.length > 0) {
		f = "xl/sharedStrings." + wbext;
		zip_add_file(zip, f, write_sst_xml(opts.Strings, opts));
		ct.strs.push(f);
		add_rels(opts.wbrels, -1, "sharedStrings." + wbext, RELS.SST);
	}

	f = "xl/workbook." + wbext;
	zip_add_file(zip, f, write_wb_xml(wb, opts));
	ct.workbooks.push(f);
	add_rels(opts.rels, 1, f, RELS.WB);

	/* TODO: something more intelligent with themes */

	f = "xl/theme/theme1.xml";
	zip_add_file(zip, f, write_theme(wb.Themes, opts));
	ct.themes.push(f);
	add_rels(opts.wbrels, -1, "theme/theme1.xml", RELS.THEME);

	/* TODO: something more intelligent with styles */

	f = "xl/styles." + wbext;
	zip_add_file(zip, f, write_sty_xml(wb, opts));
	ct.styles.push(f);
	add_rels(opts.wbrels, -1, "styles." + wbext, RELS.STY);

	if(wb.vbaraw && vbafmt) {
		f = "xl/vbaProject.bin";
		zip_add_file(zip, f, wb.vbaraw);
		ct.vba.push(f);
		add_rels(opts.wbrels, -1, "vbaProject.bin", RELS.VBA);
	}

	f = "xl/metadata." + wbext;
	zip_add_file(zip, f, write_xlmeta_xml());
	ct.metadata.push(f);
	add_rels(opts.wbrels, -1, "metadata." + wbext, RELS.XLMETA);

	if(people.length > 1) {
		f = "xl/persons/person.xml";
		zip_add_file(zip, f, write_people_xml(people, opts));
		ct.people.push(f);
		add_rels(opts.wbrels, -1, "persons/person.xml", RELS.PEOPLE);
	}

	zip_add_file(zip, "[Content_Types].xml", write_ct(ct, opts));
	zip_add_file(zip, '_rels/.rels', write_rels(opts.rels));
	zip_add_file(zip, 'xl/_rels/workbook.' + wbext + '.rels', write_rels(opts.wbrels));

	delete opts.revssf; delete opts.ssf;
	return zip;
}

function firstbyte(f/*:RawData*/,o/*:?TypeOpts*/)/*:Array<number>*/ {
	var x = "";
	switch((o||{}).type || "base64") {
		case 'buffer': return [f[0], f[1], f[2], f[3], f[4], f[5], f[6], f[7]];
		case 'base64': x = Base64_decode(f.slice(0,12)); break;
		case 'binary': x = f; break;
		case 'array':  return [f[0], f[1], f[2], f[3], f[4], f[5], f[6], f[7]];
		default: throw new Error("Unrecognized type " + (o && o.type || "undefined"));
	}
	return [x.charCodeAt(0), x.charCodeAt(1), x.charCodeAt(2), x.charCodeAt(3), x.charCodeAt(4), x.charCodeAt(5), x.charCodeAt(6), x.charCodeAt(7)];
}

function read_cfb(cfb/*:CFBContainer*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	if(CFB.find(cfb, "EncryptedPackage")) return parse_xlsxcfb(cfb, opts);
	return parse_xlscfb(cfb, opts);
}

function read_zip(data/*:RawData*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	var zip, d = data;
	var o = opts||{};
	if(!o.type) o.type = (has_buf && Buffer.isBuffer(data)) ? "buffer" : "base64";
	zip = zip_read(d, o);
	return parse_zip(zip, o);
}

function read_plaintext(data/*:string*/, o/*:ParseOpts*/)/*:Workbook*/ {
	var i = 0;
	main: while(i < data.length) switch(data.charCodeAt(i)) {
		case 0x0A: case 0x0D: case 0x20: ++i; break;
		case 0x3C: return parse_xlml(data.slice(i),o);
		default: break main;
	}
	return PRN.to_workbook(data, o);
}

function read_plaintext_raw(data/*:RawData*/, o/*:ParseOpts*/)/*:Workbook*/ {
	var str = "", bytes = firstbyte(data, o);
	switch(o.type) {
		case 'base64': str = Base64_decode(data); break;
		case 'binary': str = data; break;
		case 'buffer': str = data.toString('binary'); break;
		case 'array': str = cc2str(data); break;
		default: throw new Error("Unrecognized type " + o.type);
	}
	if(bytes[0] == 0xEF && bytes[1] == 0xBB && bytes[2] == 0xBF) str = utf8read(str);
	o.type = "binary";
	return read_plaintext(str, o);
}

function read_utf16(data/*:RawData*/, o/*:ParseOpts*/)/*:Workbook*/ {
	var d = data;
	if(o.type == 'base64') d = Base64_decode(d);
	d = $cptable.utils.decode(1200, d.slice(2), 'str');
	o.type = "binary";
	return read_plaintext(d, o);
}

function bstrify(data/*:string*/)/*:string*/ {
	return !data.match(/[^\x00-\x7F]/) ? data : utf8write(data);
}

function read_prn(data, d, o, str) {
	if(str) { o.type = "string"; return PRN.to_workbook(data, o); }
	return PRN.to_workbook(d, o);
}

function readSync(data/*:RawData*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	reset_cp();
	var o = opts||{};
	if(typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) return readSync(new Uint8Array(data), (o = dup(o), o.type = "array", o));
	if(typeof Uint8Array !== 'undefined' && data instanceof Uint8Array && !o.type) o.type = typeof Deno !== "undefined" ? "buffer" : "array";
	var d = data, n = [0,0,0,0], str = false;
	if(o.cellStyles) { o.cellNF = true; o.sheetStubs = true; }
	_ssfopts = {};
	if(o.dateNF) _ssfopts.dateNF = o.dateNF;
	if(!o.type) o.type = (has_buf && Buffer.isBuffer(data)) ? "buffer" : "base64";
	if(o.type == "file") { o.type = has_buf ? "buffer" : "binary"; d = read_binary(data); if(typeof Uint8Array !== 'undefined' && !has_buf) o.type = "array"; }
	if(o.type == "string") { str = true; o.type = "binary"; o.codepage = 65001; d = bstrify(data); }
	if(o.type == 'array' && typeof Uint8Array !== 'undefined' && data instanceof Uint8Array && typeof ArrayBuffer !== 'undefined') {
		// $FlowIgnore
		var ab=new ArrayBuffer(3), vu=new Uint8Array(ab); vu.foo="bar";
		// $FlowIgnore
		if(!vu.foo) {o=dup(o); o.type='array'; return readSync(ab2a(d), o);}
	}
	switch((n = firstbyte(d, o))[0]) {
		case 0xD0: if(n[1] === 0xCF && n[2] === 0x11 && n[3] === 0xE0 && n[4] === 0xA1 && n[5] === 0xB1 && n[6] === 0x1A && n[7] === 0xE1) return read_cfb(CFB.read(d, o), o); break;
		case 0x09: if(n[1] <= 0x08) return parse_xlscfb(d, o); break;
		case 0x3C: return parse_xlml(d, o);
		case 0x49:
			if(n[1] === 0x49 && n[2] === 0x2a && n[3] === 0x00) throw new Error("TIFF Image File is not a spreadsheet");
			if(n[1] === 0x44) return read_wb_ID(d, o);
			break;
		case 0x54: if(n[1] === 0x41 && n[2] === 0x42 && n[3] === 0x4C) return DIF.to_workbook(d, o); break;
		case 0x50: return (n[1] === 0x4B && n[2] < 0x09 && n[3] < 0x09) ? read_zip(d, o) : read_prn(data, d, o, str);
		case 0xEF: return n[3] === 0x3C ? parse_xlml(d, o) : read_prn(data, d, o, str);
		case 0xFF:
			if(n[1] === 0xFE) { return read_utf16(d, o); }
			else if(n[1] === 0x00 && n[2] === 0x02 && n[3] === 0x00) return WK_.to_workbook(d, o);
			break;
		case 0x00:
			if(n[1] === 0x00) {
				if(n[2] >= 0x02 && n[3] === 0x00) return WK_.to_workbook(d, o);
				if(n[2] === 0x00 && (n[3] === 0x08 || n[3] === 0x09)) return WK_.to_workbook(d, o);
			}
			break;
		case 0x03: case 0x83: case 0x8B: case 0x8C: return DBF.to_workbook(d, o);
		case 0x7B: if(n[1] === 0x5C && n[2] === 0x72 && n[3] === 0x74) return RTF.to_workbook(d, o); break;
		case 0x0A: case 0x0D: case 0x20: return read_plaintext_raw(d, o);
		case 0x89: if(n[1] === 0x50 && n[2] === 0x4E && n[3] === 0x47) throw new Error("PNG Image File is not a spreadsheet"); break;
	}
	if(DBF_SUPPORTED_VERSIONS.indexOf(n[0]) > -1 && n[2] <= 12 && n[3] <= 31) return DBF.to_workbook(d, o);
	return read_prn(data, d, o, str);
}

function readFileSync(filename/*:string*/, opts/*:?ParseOpts*/)/*:Workbook*/ {
	var o = opts||{}; o.type = 'file';
	return readSync(filename, o);
}
function write_cfb_ctr(cfb/*:CFBContainer*/, o/*:WriteOpts*/)/*:any*/ {
	switch(o.type) {
		case "base64": case "binary": break;
		case "buffer": case "array": o.type = ""; break;
		case "file": return write_dl(o.file, CFB.write(cfb, {type:has_buf ? 'buffer' : ""}));
		case "string": throw new Error("'string' output type invalid for '" + o.bookType + "' files");
		default: throw new Error("Unrecognized type " + o.type);
	}
	return CFB.write(cfb, o);
}

/*:: declare var encrypt_agile:any; */
function write_zip_type(wb/*:Workbook*/, opts/*:?WriteOpts*/)/*:any*/ {
	var o = dup(opts||{});
	var z = write_zip(wb, o);
	return write_zip_denouement(z, o);
}
function write_zip_typeXLSX(wb/*:Workbook*/, opts/*:?WriteOpts*/)/*:any*/ {
	var o = dup(opts||{});
	var z = write_zip_xlsx(wb, o);
	return write_zip_denouement(z, o);
}
function write_zip_denouement(z/*:any*/, o/*:?WriteOpts*/)/*:any*/ {
	var oopts = {};
	var ftype = has_buf ? "nodebuffer" : (typeof Uint8Array !== "undefined" ? "array" : "string");
	if(o.compression) oopts.compression = 'DEFLATE';
	if(o.password) oopts.type = ftype;
	else switch(o.type) {
		case "base64": oopts.type = "base64"; break;
		case "binary": oopts.type = "string"; break;
		case "string": throw new Error("'string' output type invalid for '" + o.bookType + "' files");
		case "buffer":
		case "file": oopts.type = ftype; break;
		default: throw new Error("Unrecognized type " + o.type);
	}
	var out = z.FullPaths ? CFB.write(z, {fileType:"zip", type: /*::(*/{"nodebuffer": "buffer", "string": "binary"}/*:: :any)*/[oopts.type] || oopts.type, compression: !!o.compression}) : z.generate(oopts);
	if(typeof Deno !== "undefined") {
		if(typeof out == "string") {
			if(o.type == "binary" || o.type == "base64") return out;
			out = new Uint8Array(s2ab(out));
		}
	}
/*jshint -W083 */
	if(o.password && typeof encrypt_agile !== 'undefined') return write_cfb_ctr(encrypt_agile(out, o.password), o); // eslint-disable-line no-undef
/*jshint +W083 */
	if(o.type === "file") return write_dl(o.file, out);
	return o.type == "string" ? utf8read(/*::(*/out/*:: :any)*/) : out;
}

function write_cfb_type(wb/*:Workbook*/, opts/*:?WriteOpts*/)/*:any*/ {
	var o = opts||{};
	var cfb/*:CFBContainer*/ = write_xlscfb(wb, o);
	return write_cfb_ctr(cfb, o);
}

function write_string_type(out/*:string*/, opts/*:WriteOpts*/, bom/*:?string*/)/*:any*/ {
	if(!bom) bom = "";
	var o = bom + out;
	switch(opts.type) {
		case "base64": return Base64_encode(utf8write(o));
		case "binary": return utf8write(o);
		case "string": return out;
		case "file": return write_dl(opts.file, o, 'utf8');
		case "buffer": {
			if(has_buf) return Buffer_from(o, 'utf8');
			else if(typeof TextEncoder !== "undefined") return new TextEncoder().encode(o);
			else return write_string_type(o, {type:'binary'}).split("").map(function(c) { return c.charCodeAt(0); });
		}
	}
	throw new Error("Unrecognized type " + opts.type);
}

function write_stxt_type(out/*:string*/, opts/*:WriteOpts*/)/*:any*/ {
	switch(opts.type) {
		case "base64": return Base64_encode(out);
		case "binary": return out;
		case "string": return out; /* override in sheet_to_txt */
		case "file": return write_dl(opts.file, out, 'binary');
		case "buffer": {
			if(has_buf) return Buffer_from(out, 'binary');
			else return out.split("").map(function(c) { return c.charCodeAt(0); });
		}
	}
	throw new Error("Unrecognized type " + opts.type);
}

/* TODO: test consistency */
function write_binary_type(out, opts/*:WriteOpts*/)/*:any*/ {
	switch(opts.type) {
		case "string":
		case "base64":
		case "binary":
			var bstr = "";
			// $FlowIgnore
			for(var i = 0; i < out.length; ++i) bstr += String.fromCharCode(out[i]);
			return opts.type == 'base64' ? Base64_encode(bstr) : opts.type == 'string' ? utf8read(bstr) : bstr;
		case "file": return write_dl(opts.file, out);
		case "buffer": return out;
		default: throw new Error("Unrecognized type " + opts.type);
	}
}

function writeSyncXLSX(wb/*:Workbook*/, opts/*:?WriteOpts*/) {
	reset_cp();
	check_wb(wb);
	var o = dup(opts||{});
	if(o.cellStyles) { o.cellNF = true; o.sheetStubs = true; }
	if(o.type == "array") { o.type = "binary"; var out/*:string*/ = (writeSyncXLSX(wb, o)/*:any*/); o.type = "array"; return s2ab(out); }
	return write_zip_typeXLSX(wb, o);
}

function writeSync(wb/*:Workbook*/, opts/*:?WriteOpts*/) {
	reset_cp();
	check_wb(wb);
	var o = dup(opts||{});
	if(o.cellStyles) { o.cellNF = true; o.sheetStubs = true; }
	if(o.type == "array") { o.type = "binary"; var out/*:string*/ = (writeSync(wb, o)/*:any*/); o.type = "array"; return s2ab(out); }
	var idx = 0;
	if(o.sheet) {
		if(typeof o.sheet == "number") idx = o.sheet;
		else idx = wb.SheetNames.indexOf(o.sheet);
		if(!wb.SheetNames[idx]) throw new Error("Sheet not found: " + o.sheet + " : " + (typeof o.sheet));
	}
	switch(o.bookType || 'xlsb') {
		case 'xml':
		case 'xlml': return write_string_type(write_xlml(wb, o), o);
		case 'slk':
		case 'sylk': return write_string_type(SYLK.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'htm':
		case 'html': return write_string_type(sheet_to_html(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'txt': return write_stxt_type(sheet_to_txt(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'csv': return write_string_type(sheet_to_csv(wb.Sheets[wb.SheetNames[idx]], o), o, "\ufeff");
		case 'dif': return write_string_type(DIF.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'dbf': return write_binary_type(DBF.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'prn': return write_string_type(PRN.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'rtf': return write_string_type(RTF.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'eth': return write_string_type(ETH.from_sheet(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'fods': return write_string_type(write_ods(wb, o), o);
		case 'wk1': return write_binary_type(WK_.sheet_to_wk1(wb.Sheets[wb.SheetNames[idx]], o), o);
		case 'wk3': return write_binary_type(WK_.book_to_wk3(wb, o), o);
		case 'biff2': if(!o.biff) o.biff = 2; /* falls through */
		case 'biff3': if(!o.biff) o.biff = 3; /* falls through */
		case 'biff4': if(!o.biff) o.biff = 4; return write_binary_type(write_biff_buf(wb, o), o);
		case 'biff5': if(!o.biff) o.biff = 5; /* falls through */
		case 'biff8':
		case 'xla':
		case 'xls': if(!o.biff) o.biff = 8; return write_cfb_type(wb, o);
		case 'xlsx':
		case 'xlsm':
		case 'xlam':
		case 'xlsb':
		case 'numbers':
		case 'ods': return write_zip_type(wb, o);
		default: throw new Error ("Unrecognized bookType |" + o.bookType + "|");
	}
}

function resolve_book_type(o/*:WriteFileOpts*/) {
	if(o.bookType) return;
	var _BT = {
		"xls": "biff8",
		"htm": "html",
		"slk": "sylk",
		"socialcalc": "eth",
		"Sh33tJS": "WTF"
	};
	var ext = o.file.slice(o.file.lastIndexOf(".")).toLowerCase();
	if(ext.match(/^\.[a-z]+$/)) o.bookType = ext.slice(1);
	o.bookType = _BT[o.bookType] || o.bookType;
}

function writeFileSync(wb/*:Workbook*/, filename/*:string*/, opts/*:?WriteFileOpts*/) {
	var o = opts||{}; o.type = 'file';
	o.file = filename;
	resolve_book_type(o);
	return writeSync(wb, o);
}

function writeFileSyncXLSX(wb/*:Workbook*/, filename/*:string*/, opts/*:?WriteFileOpts*/) {
	var o = opts||{}; o.type = 'file';
	o.file = filename;
	resolve_book_type(o);
	return writeSyncXLSX(wb, o);
}


function writeFileAsync(filename/*:string*/, wb/*:Workbook*/, opts/*:?WriteFileOpts*/, cb/*:?(e?:ErrnoError)=>void*/) {
	var o = opts||{}; o.type = 'file';
	o.file = filename;
	resolve_book_type(o);
	o.type = 'buffer';
	var _cb = cb; if(!(_cb instanceof Function)) _cb = (opts/*:any*/);
	return _fs.writeFile(filename, writeSync(wb, o), _cb);
}
/*::
type MJRObject = {
	row: any;
	isempty: boolean;
};
*/
function make_json_row(sheet/*:Worksheet*/, r/*:Range*/, R/*:number*/, cols/*:Array<string>*/, header/*:number*/, hdr/*:Array<any>*/, dense/*:boolean*/, o/*:Sheet2JSONOpts*/)/*:MJRObject*/ {
	var rr = encode_row(R);
	var defval = o.defval, raw = o.raw || !Object.prototype.hasOwnProperty.call(o, "raw");
	var isempty = true;
	var row/*:any*/ = (header === 1) ? [] : {};
	if(header !== 1) {
		if(Object.defineProperty) try { Object.defineProperty(row, '__rowNum__', {value:R, enumerable:false}); } catch(e) { row.__rowNum__ = R; }
		else row.__rowNum__ = R;
	}
	if(!dense || sheet[R]) for (var C = r.s.c; C <= r.e.c; ++C) {
		var val = dense ? sheet[R][C] : sheet[cols[C] + rr];
		if(val === undefined || val.t === undefined) {
			if(defval === undefined) continue;
			if(hdr[C] != null) { row[hdr[C]] = defval; }
			continue;
		}
		var v = val.v;
		switch(val.t){
			case 'z': if(v == null) break; continue;
			case 'e': v = (v == 0 ? null : void 0); break;
			case 's': case 'd': case 'b': case 'n': break;
			default: throw new Error('unrecognized type ' + val.t);
		}
		if(hdr[C] != null) {
			if(v == null) {
				if(val.t == "e" && v === null) row[hdr[C]] = null;
				else if(defval !== undefined) row[hdr[C]] = defval;
				else if(raw && v === null) row[hdr[C]] = null;
				else continue;
			} else {
				row[hdr[C]] = raw && (val.t !== "n" || (val.t === "n" && o.rawNumbers !== false)) ? v : format_cell(val,v,o);
			}
			if(v != null) isempty = false;
		}
	}
	return { row: row, isempty: isempty };
}


function sheet_to_json(sheet/*:Worksheet*/, opts/*:?Sheet2JSONOpts*/) {
	if(sheet == null || sheet["!ref"] == null) return [];
	var val = {t:'n',v:0}, header = 0, offset = 1, hdr/*:Array<any>*/ = [], v=0, vv="";
	var r = {s:{r:0,c:0},e:{r:0,c:0}};
	var o = opts || {};
	var range = o.range != null ? o.range : sheet["!ref"];
	if(o.header === 1) header = 1;
	else if(o.header === "A") header = 2;
	else if(Array.isArray(o.header)) header = 3;
	else if(o.header == null) header = 0;
	switch(typeof range) {
		case 'string': r = safe_decode_range(range); break;
		case 'number': r = safe_decode_range(sheet["!ref"]); r.s.r = range; break;
		default: r = range;
	}
	if(header > 0) offset = 0;
	var rr = encode_row(r.s.r);
	var cols/*:Array<string>*/ = [];
	var out/*:Array<any>*/ = [];
	var outi = 0, counter = 0;
	var dense = Array.isArray(sheet);
	var R = r.s.r, C = 0;
	var header_cnt = {};
	if(dense && !sheet[R]) sheet[R] = [];
	var colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet["!cols"] || [];
	var rowinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet["!rows"] || [];
	for(C = r.s.c; C <= r.e.c; ++C) {
		if(((colinfo[C]||{}).hidden)) continue;
		cols[C] = encode_col(C);
		val = dense ? sheet[R][C] : sheet[cols[C] + rr];
		switch(header) {
			case 1: hdr[C] = C - r.s.c; break;
			case 2: hdr[C] = cols[C]; break;
			case 3: hdr[C] = o.header[C - r.s.c]; break;
			default:
				if(val == null) val = {w: "__EMPTY", t: "s"};
				vv = v = format_cell(val, null, o);
				counter = header_cnt[v] || 0;
				if(!counter) header_cnt[v] = 1;
				else {
					do { vv = v + "_" + (counter++); } while(header_cnt[vv]); header_cnt[v] = counter;
					header_cnt[vv] = 1;
				}
				hdr[C] = vv;
		}
	}
	for (R = r.s.r + offset; R <= r.e.r; ++R) {
		if ((rowinfo[R]||{}).hidden) continue;
		var row = make_json_row(sheet, r, R, cols, header, hdr, dense, o);
		if((row.isempty === false) || (header === 1 ? o.blankrows !== false : !!o.blankrows)) out[outi++] = row.row;
	}
	out.length = outi;
	return out;
}

var qreg = /"/g;
function make_csv_row(sheet/*:Worksheet*/, r/*:Range*/, R/*:number*/, cols/*:Array<string>*/, fs/*:number*/, rs/*:number*/, FS/*:string*/, o/*:Sheet2CSVOpts*/)/*:?string*/ {
	var isempty = true;
	var row/*:Array<string>*/ = [], txt = "", rr = encode_row(R);
	for(var C = r.s.c; C <= r.e.c; ++C) {
		if (!cols[C]) continue;
		var val = o.dense ? (sheet[R]||[])[C]: sheet[cols[C] + rr];
		if(val == null) txt = "";
		else if(val.v != null) {
			isempty = false;
			txt = ''+(o.rawNumbers && val.t == "n" ? val.v : format_cell(val, null, o));
			for(var i = 0, cc = 0; i !== txt.length; ++i) if((cc = txt.charCodeAt(i)) === fs || cc === rs || cc === 34 || o.forceQuotes) {txt = "\"" + txt.replace(qreg, '""') + "\""; break; }
			if(txt == "ID") txt = '"ID"';
		} else if(val.f != null && !val.F) {
			isempty = false;
			txt = '=' + val.f; if(txt.indexOf(",") >= 0) txt = '"' + txt.replace(qreg, '""') + '"';
		} else txt = "";
		/* NOTE: Excel CSV does not support array formulae */
		row.push(txt);
	}
	if(o.blankrows === false && isempty) return null;
	return row.join(FS);
}

function sheet_to_csv(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/)/*:string*/ {
	var out/*:Array<string>*/ = [];
	var o = opts == null ? {} : opts;
	if(sheet == null || sheet["!ref"] == null) return "";
	var r = safe_decode_range(sheet["!ref"]);
	var FS = o.FS !== undefined ? o.FS : ",", fs = FS.charCodeAt(0);
	var RS = o.RS !== undefined ? o.RS : "\n", rs = RS.charCodeAt(0);
	var endregex = new RegExp((FS=="|" ? "\\|" : FS)+"+$");
	var row = "", cols/*:Array<string>*/ = [];
	o.dense = Array.isArray(sheet);
	var colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet["!cols"] || [];
	var rowinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet["!rows"] || [];
	for(var C = r.s.c; C <= r.e.c; ++C) if (!((colinfo[C]||{}).hidden)) cols[C] = encode_col(C);
	var w = 0;
	for(var R = r.s.r; R <= r.e.r; ++R) {
		if ((rowinfo[R]||{}).hidden) continue;
		row = make_csv_row(sheet, r, R, cols, fs, rs, FS, o);
		if(row == null) { continue; }
		if(o.strip) row = row.replace(endregex,"");
		if(row || (o.blankrows !== false)) out.push((w++ ? RS : "") + row);
	}
	delete o.dense;
	return out.join("");
}

function sheet_to_txt(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/) {
	if(!opts) opts = {}; opts.FS = "\t"; opts.RS = "\n";
	var s = sheet_to_csv(sheet, opts);
	if(typeof $cptable == 'undefined' || opts.type == 'string') return s;
	var o = $cptable.utils.encode(1200, s, 'str');
	return String.fromCharCode(255) + String.fromCharCode(254) + o;
}

function sheet_to_formulae(sheet/*:Worksheet*/)/*:Array<string>*/ {
	var y = "", x, val="";
	if(sheet == null || sheet["!ref"] == null) return [];
	var r = safe_decode_range(sheet['!ref']), rr = "", cols/*:Array<string>*/ = [], C;
	var cmds/*:Array<string>*/ = [];
	var dense = Array.isArray(sheet);
	for(C = r.s.c; C <= r.e.c; ++C) cols[C] = encode_col(C);
	for(var R = r.s.r; R <= r.e.r; ++R) {
		rr = encode_row(R);
		for(C = r.s.c; C <= r.e.c; ++C) {
			y = cols[C] + rr;
			x = dense ? (sheet[R]||[])[C] : sheet[y];
			val = "";
			if(x === undefined) continue;
			else if(x.F != null) {
				y = x.F;
				if(!x.f) continue;
				val = x.f;
				if(y.indexOf(":") == -1) y = y + ":" + y;
			}
			if(x.f != null) val = x.f;
			else if(x.t == 'z') continue;
			else if(x.t == 'n' && x.v != null) val = "" + x.v;
			else if(x.t == 'b') val = x.v ? "TRUE" : "FALSE";
			else if(x.w !== undefined) val = "'" + x.w;
			else if(x.v === undefined) continue;
			else if(x.t == 's') val = "'" + x.v;
			else val = ""+x.v;
			cmds[cmds.length] = y + "=" + val;
		}
	}
	return cmds;
}

function sheet_add_json(_ws/*:?Worksheet*/, js/*:Array<any>*/, opts)/*:Worksheet*/ {
	var o = opts || {};
	var offset = +!o.skipHeader;
	var ws/*:Worksheet*/ = _ws || ({}/*:any*/);
	var _R = 0, _C = 0;
	if(ws && o.origin != null) {
		if(typeof o.origin == 'number') _R = o.origin;
		else {
			var _origin/*:CellAddress*/ = typeof o.origin == "string" ? decode_cell(o.origin) : o.origin;
			_R = _origin.r; _C = _origin.c;
		}
	}
	var cell/*:Cell*/;
	var range/*:Range*/ = ({s: {c:0, r:0}, e: {c:_C, r:_R + js.length - 1 + offset}}/*:any*/);
	if(ws['!ref']) {
		var _range = safe_decode_range(ws['!ref']);
		range.e.c = Math.max(range.e.c, _range.e.c);
		range.e.r = Math.max(range.e.r, _range.e.r);
		if(_R == -1) { _R = _range.e.r + 1; range.e.r = _R + js.length - 1 + offset; }
	} else {
		if(_R == -1) { _R = 0; range.e.r = js.length - 1 + offset; }
	}
	var hdr/*:Array<string>*/ = o.header || [], C = 0;

	js.forEach(function (JS, R/*:number*/) {
		keys(JS).forEach(function(k) {
			if((C=hdr.indexOf(k)) == -1) hdr[C=hdr.length] = k;
			var v = JS[k];
			var t = 'z';
			var z = "";
			var ref = encode_cell({c:_C + C,r:_R + R + offset});
			cell = ws_get_cell_stub(ws, ref);
			if(v && typeof v === 'object' && !(v instanceof Date)){
				ws[ref] = v;
			} else {
				if(typeof v == 'number') t = 'n';
				else if(typeof v == 'boolean') t = 'b';
				else if(typeof v == 'string') t = 's';
				else if(v instanceof Date) {
					t = 'd';
					if(!o.cellDates) { t = 'n'; v = datenum(v); }
					z = (o.dateNF || table_fmt[14]);
				}
				else if(v === null && o.nullError) { t = 'e'; v = 0; }
				if(!cell) ws[ref] = cell = ({t:t, v:v}/*:any*/);
				else {
					cell.t = t; cell.v = v;
					delete cell.w; delete cell.R;
					if(z) cell.z = z;
				}
				if(z) cell.z = z;
			}
		});
	});
	range.e.c = Math.max(range.e.c, _C + hdr.length - 1);
	var __R = encode_row(_R);
	if(offset) for(C = 0; C < hdr.length; ++C) ws[encode_col(C + _C) + __R] = {t:'s', v:hdr[C]};
	ws['!ref'] = encode_range(range);
	return ws;
}
function json_to_sheet(js/*:Array<any>*/, opts)/*:Worksheet*/ { return sheet_add_json(null, js, opts); }

/* get cell, creating a stub if necessary */
function ws_get_cell_stub(ws/*:Worksheet*/, R, C/*:?number*/)/*:Cell*/ {
	/* A1 cell address */
	if(typeof R == "string") {
		/* dense */
		if(Array.isArray(ws)) {
			var RC = decode_cell(R);
			if(!ws[RC.r]) ws[RC.r] = [];
			return ws[RC.r][RC.c] || (ws[RC.r][RC.c] = {t:'z'});
		}
		return ws[R] || (ws[R] = {t:'z'});
	}
	/* cell address object */
	if(typeof R != "number") return ws_get_cell_stub(ws, encode_cell(R));
	/* R and C are 0-based indices */
	return ws_get_cell_stub(ws, encode_cell({r:R,c:C||0}));
}

/* find sheet index for given name / validate index */
function wb_sheet_idx(wb/*:Workbook*/, sh/*:number|string*/) {
	if(typeof sh == "number") {
		if(sh >= 0 && wb.SheetNames.length > sh) return sh;
		throw new Error("Cannot find sheet # " + sh);
	} else if(typeof sh == "string") {
		var idx = wb.SheetNames.indexOf(sh);
		if(idx > -1) return idx;
		throw new Error("Cannot find sheet name |" + sh + "|");
	} else throw new Error("Cannot find sheet |" + sh + "|");
}

/* simple blank workbook object */
function book_new()/*:Workbook*/ {
	return { SheetNames: [], Sheets: {} };
}

/* add a worksheet to the end of a given workbook */
function book_append_sheet(wb/*:Workbook*/, ws/*:Worksheet*/, name/*:?string*/, roll/*:?boolean*/)/*:string*/ {
	var i = 1;
	if(!name) for(; i <= 0xFFFF; ++i, name = undefined) if(wb.SheetNames.indexOf(name = "Sheet" + i) == -1) break;
	if(!name || wb.SheetNames.length >= 0xFFFF) throw new Error("Too many worksheets");
	if(roll && wb.SheetNames.indexOf(name) >= 0) {
		var m = name.match(/(^.*?)(\d+)$/);
		i = m && +m[2] || 0;
		var root = m && m[1] || name;
		for(++i; i <= 0xFFFF; ++i) if(wb.SheetNames.indexOf(name = root + i) == -1) break;
	}
	check_ws_name(name);
	if(wb.SheetNames.indexOf(name) >= 0) throw new Error("Worksheet with name |" + name + "| already exists!");

	wb.SheetNames.push(name);
	wb.Sheets[name] = ws;
	return name;
}

/* set sheet visibility (visible/hidden/very hidden) */
function book_set_sheet_visibility(wb/*:Workbook*/, sh/*:number|string*/, vis/*:number*/) {
	if(!wb.Workbook) wb.Workbook = {};
	if(!wb.Workbook.Sheets) wb.Workbook.Sheets = [];

	var idx = wb_sheet_idx(wb, sh);
	// $FlowIgnore
	if(!wb.Workbook.Sheets[idx]) wb.Workbook.Sheets[idx] = {};

	switch(vis) {
		case 0: case 1: case 2: break;
		default: throw new Error("Bad sheet visibility setting " + vis);
	}
	// $FlowIgnore
	wb.Workbook.Sheets[idx].Hidden = vis;
}

/* set number format */
function cell_set_number_format(cell/*:Cell*/, fmt/*:string|number*/) {
	cell.z = fmt;
	return cell;
}

/* set cell hyperlink */
function cell_set_hyperlink(cell/*:Cell*/, target/*:string*/, tooltip/*:?string*/) {
	if(!target) {
		delete cell.l;
	} else {
		cell.l = ({ Target: target }/*:Hyperlink*/);
		if(tooltip) cell.l.Tooltip = tooltip;
	}
	return cell;
}
function cell_set_internal_link(cell/*:Cell*/, range/*:string*/, tooltip/*:?string*/) { return cell_set_hyperlink(cell, "#" + range, tooltip); }

/* add to cell comments */
function cell_add_comment(cell/*:Cell*/, text/*:string*/, author/*:?string*/) {
	if(!cell.c) cell.c = [];
	cell.c.push({t:text, a:author||"SheetJS"});
}

/* set array formula and flush related cells */
function sheet_set_array_formula(ws/*:Worksheet*/, range, formula/*:string*/, dynamic/*:boolean*/) {
	var rng = typeof range != "string" ? range : safe_decode_range(range);
	var rngstr = typeof range == "string" ? range : encode_range(range);
	for(var R = rng.s.r; R <= rng.e.r; ++R) for(var C = rng.s.c; C <= rng.e.c; ++C) {
		var cell = ws_get_cell_stub(ws, R, C);
		cell.t = 'n';
		cell.F = rngstr;
		delete cell.v;
		if(R == rng.s.r && C == rng.s.c) {
			cell.f = formula;
			if(dynamic) cell.D = true;
		}
	}
	return ws;
}

var utils/*:any*/ = {
	encode_col: encode_col,
	encode_row: encode_row,
	encode_cell: encode_cell,
	encode_range: encode_range,
	decode_col: decode_col,
	decode_row: decode_row,
	split_cell: split_cell,
	decode_cell: decode_cell,
	decode_range: decode_range,
	format_cell: format_cell,
	sheet_add_aoa: sheet_add_aoa,
	sheet_add_json: sheet_add_json,
	sheet_add_dom: sheet_add_dom,
	aoa_to_sheet: aoa_to_sheet,
	json_to_sheet: json_to_sheet,
	table_to_sheet: parse_dom_table,
	table_to_book: table_to_book,
	sheet_to_csv: sheet_to_csv,
	sheet_to_txt: sheet_to_txt,
	sheet_to_json: sheet_to_json,
	sheet_to_html: sheet_to_html,
	sheet_to_formulae: sheet_to_formulae,
	sheet_to_row_object_array: sheet_to_json,
	sheet_get_cell: ws_get_cell_stub,
	book_new: book_new,
	book_append_sheet: book_append_sheet,
	book_set_sheet_visibility: book_set_sheet_visibility,
	cell_set_number_format: cell_set_number_format,
	cell_set_hyperlink: cell_set_hyperlink,
	cell_set_internal_link: cell_set_internal_link,
	cell_add_comment: cell_add_comment,
	sheet_set_array_formula: sheet_set_array_formula,
	consts: {
		SHEET_VISIBLE: 0,
		SHEET_HIDDEN: 1,
		SHEET_VERY_HIDDEN: 2
	}
};

var _Readable;
function set_readable(R) { _Readable = R; }

function write_csv_stream(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/) {
	var stream = _Readable();
	var o = opts == null ? {} : opts;
	if(sheet == null || sheet["!ref"] == null) { stream.push(null); return stream; }
	var r = safe_decode_range(sheet["!ref"]);
	var FS = o.FS !== undefined ? o.FS : ",", fs = FS.charCodeAt(0);
	var RS = o.RS !== undefined ? o.RS : "\n", rs = RS.charCodeAt(0);
	var endregex = new RegExp((FS=="|" ? "\\|" : FS)+"+$");
	var row/*:?string*/ = "", cols/*:Array<string>*/ = [];
	o.dense = Array.isArray(sheet);
	var colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet["!cols"] || [];
	var rowinfo/*:Array<RowInfo>*/ = o.skipHidden && sheet["!rows"] || [];
	for(var C = r.s.c; C <= r.e.c; ++C) if (!((colinfo[C]||{}).hidden)) cols[C] = encode_col(C);
	var R = r.s.r;
	var BOM = false, w = 0;
	stream._read = function() {
		if(!BOM) { BOM = true; return stream.push("\uFEFF"); }
		while(R <= r.e.r) {
			++R;
			if ((rowinfo[R-1]||{}).hidden) continue;
			row = make_csv_row(sheet, r, R-1, cols, fs, rs, FS, o);
			if(row != null) {
				if(o.strip) row = row.replace(endregex,"");
				if(row || (o.blankrows !== false)) return stream.push((w++ ? RS : "") + row);
			}
		}
		return stream.push(null);
	};
	return stream;
}

function write_html_stream(ws/*:Worksheet*/, opts/*:?Sheet2HTMLOpts*/) {
	var stream = _Readable();

	var o = opts || {};
	var header = o.header != null ? o.header : HTML_BEGIN;
	var footer = o.footer != null ? o.footer : HTML_END;
	stream.push(header);
	var r = decode_range(ws['!ref']);
	o.dense = Array.isArray(ws);
	stream.push(make_html_preamble(ws, r, o));
	var R = r.s.r;
	var end = false;
	stream._read = function() {
		if(R > r.e.r) {
			if(!end) { end = true; stream.push("</table>" + footer); }
			return stream.push(null);
		}
		while(R <= r.e.r) {
			stream.push(make_html_row(ws, r, R, o));
			++R;
			break;
		}
	};
	return stream;
}

function write_json_stream(sheet/*:Worksheet*/, opts/*:?Sheet2CSVOpts*/) {
	var stream = _Readable({objectMode:true});

	if(sheet == null || sheet["!ref"] == null) { stream.push(null); return stream; }
	var val = {t:'n',v:0}, header = 0, offset = 1, hdr/*:Array<any>*/ = [], v=0, vv="";
	var r = {s:{r:0,c:0},e:{r:0,c:0}};
	var o = opts || {};
	var range = o.range != null ? o.range : sheet["!ref"];
	if(o.header === 1) header = 1;
	else if(o.header === "A") header = 2;
	else if(Array.isArray(o.header)) header = 3;
	switch(typeof range) {
		case 'string': r = safe_decode_range(range); break;
		case 'number': r = safe_decode_range(sheet["!ref"]); r.s.r = range; break;
		default: r = range;
	}
	if(header > 0) offset = 0;
	var rr = encode_row(r.s.r);
	var cols/*:Array<string>*/ = [];
	var counter = 0;
	var dense = Array.isArray(sheet);
	var R = r.s.r, C = 0;
	var header_cnt = {};
	if(dense && !sheet[R]) sheet[R] = [];
	var colinfo/*:Array<ColInfo>*/ = o.skipHidden && sheet["!cols"] || [];
	var rowinfo/*:Array<RowInfo>*/ = o.skipHidden && sheet["!rows"] || [];
	for(C = r.s.c; C <= r.e.c; ++C) {
		if(((colinfo[C]||{}).hidden)) continue;
		cols[C] = encode_col(C);
		val = dense ? sheet[R][C] : sheet[cols[C] + rr];
		switch(header) {
			case 1: hdr[C] = C - r.s.c; break;
			case 2: hdr[C] = cols[C]; break;
			case 3: hdr[C] = o.header[C - r.s.c]; break;
			default:
				if(val == null) val = {w: "__EMPTY", t: "s"};
				vv = v = format_cell(val, null, o);
				counter = header_cnt[v] || 0;
				if(!counter) header_cnt[v] = 1;
				else {
					do { vv = v + "_" + (counter++); } while(header_cnt[vv]); header_cnt[v] = counter;
					header_cnt[vv] = 1;
				}
				hdr[C] = vv;
		}
	}
	R = r.s.r + offset;
	stream._read = function() {
		while(R <= r.e.r) {
			if ((rowinfo[R-1]||{}).hidden) continue;
			var row = make_json_row(sheet, r, R, cols, header, hdr, dense, o);
			++R;
			if((row.isempty === false) || (header === 1 ? o.blankrows !== false : !!o.blankrows)) {
				stream.push(row.row);
				return;
			}
		}
		return stream.push(null);
	};
	return stream;
}

var __stream = {
	to_json: write_json_stream,
	to_html: write_html_stream,
	to_csv: write_csv_stream,
  set_readable: set_readable
};
const version = XLSX.version;



/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!***************************!*\
  !*** ./src/index.user.ts ***!
  \***************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _components_TaskWindow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./components/TaskWindow */ "./src/components/TaskWindow.ts");
/* harmony import */ var _lib_task__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./lib/task */ "./src/lib/task.ts");
/* harmony import */ var _lib_UIBuilder__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./lib/UIBuilder */ "./src/lib/UIBuilder.ts");
/* harmony import */ var _lib_url__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./lib/url */ "./src/lib/url.ts");
// ==UserScript==
// @name        iCare Tools
// @namespace   Violentmonkey Scripts
// @noframes
// @match       https://icare-vali.lausanne.ch/icare/*
// @match       https://icare.lausanne.ch/icare/*
// @grant       none
// @version     1.1
// @author      Nicolas Maitre
// @description Task scheduler for icare and helpers
// ==/UserScript==




//use violentmonkey for custom editor
//add tools button to top bar
(0,_lib_UIBuilder__WEBPACK_IMPORTED_MODULE_2__.buildToolsButtonIntegration)();
//add contract button to person page
if ((0,_lib_url__WEBPACK_IMPORTED_MODULE_3__.urlCheck)(["/icare/Be/PersonEdit.do", "/icare/Be/KindEdit.do"])) {
    (0,_lib_UIBuilder__WEBPACK_IMPORTED_MODULE_2__.buildGoToContractButtonIntegration)();
}
//add end date removal button on contract page
if ((0,_lib_url__WEBPACK_IMPORTED_MODULE_3__.urlCheck)("/icare/Be/VertragEdit.do")) {
    (0,_lib_UIBuilder__WEBPACK_IMPORTED_MODULE_2__.buildRemoveEndDateButtonIntegration)();
}
(0,_components_TaskWindow__WEBPACK_IMPORTED_MODULE_0__.buildTaskWindow)();
//exec on page load
(0,_lib_task__WEBPACK_IMPORTED_MODULE_1__.handleTasks)();

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWNhcmUtdG9vbHMudXNlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxHQUFHLElBQXNELEVBQUUsbUJBQW1CLEtBQUssVUFBb08sQ0FBQyxhQUFhLDBCQUEwQiwwQkFBMEIsZ0JBQWdCLFVBQVUsVUFBVSxNQUFNLFNBQW1DLENBQUMsZ0JBQWdCLE9BQUMsT0FBTyxvQkFBb0IsOENBQThDLHFDQUFxQyxZQUFZLFlBQVksbUNBQW1DLGlCQUFpQixnQkFBZ0Isc0JBQXNCLG9CQUFvQixNQUFNLFNBQW1DLENBQUMsWUFBWSxXQUFXLFlBQVksU0FBUyxHQUFHO0FBQ2x6QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUEsb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQyxtQkFBbUIscUJBQU0sbUJBQW1CLHFCQUFNLG1GQUFtRjtBQUN0SSxDQUFDLEdBQUc7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEsQ0FBQyxFQUFFLE1BQU07QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUMsbUJBQW1CLHFCQUFNLG1CQUFtQixxQkFBTSxtRkFBbUY7QUFDdEksQ0FBQyxFQUFFLE1BQU07QUFDVDs7QUFFQSxxR0FBcUcscUJBQXFCLG1CQUFtQjs7QUFFN0ksa0RBQWtELDBDQUEwQzs7QUFFNUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxzQkFBc0I7QUFDdEIsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7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QUNiLFNBQVM7QUFDVCxLQUFLOztBQUVMOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULEtBQUs7O0FBRUw7QUFDQTtB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWOztBQUVBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBOztBQUVBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLFVBQVU7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsZ0JBQWdCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSx3QkFBd0IsWUFBWTtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdCQUF3QixZQUFZO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVCxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFNBQVM7QUFDVCxrREFBa0QsUUFBUTtBQUMxRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQixzQkFBc0I7QUFDMUM7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHVDQUF1QztBQUN2QyxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxtRUFBbUU7QUFDbkU7O0FBRUEsOENBQThDO0FBQzlDO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7QUFDVjtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4RUFBOEU7O0FBRTlFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDREQUE0RCxTQUFTO0FBQ3JFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDBFQUEwRSxXQUFXO0FBQ3JGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkVBQTZFLDZCQUE2Qix3Q0FBd0M7O0FBRWxKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckMsY0FBYyxnQkFBZ0I7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsVUFBVTtBQUNWO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsY0FBYztBQUNkO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWTtBQUNaO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsWUFBWTtBQUNaO0FBQ0E7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QjtBQUN6QjtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQix5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxJQUFJLFNBQVMsTUFBTTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkM7QUFDN0MsOENBQThDOztBQUU5QztBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUNBQWlDO0FBQy9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHFEQUFxRDs7QUFFckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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M0MsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLGlDQUFpQztBQUMzRCwwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsaUNBQWlDO0FBQzNELDBCQUEwQixtQ0FBbUM7QUFDN0QsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLFFBQVE7QUFDbEMsMEJBQTBCLHNDQUFzQztBQUNoRSwwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsUUFBUTtBQUNsQywwQkFBMEIsc0NBQXNDO0FBQ2hFLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQixRQUFRO0FBQ2xDLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBLFlBQVksYUFBYTtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FB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Q2xCO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdURBQXVELG1CQUFtQjtBQUMxRSx1REFBdUQsc0JBQXNCO0FBQzdFO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0REFBNEQ7QUFDNUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0QkFBNEIseURBQXlEO0FBQ3JGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQXVCOztBQUV2QjtBQUNBO0FBQ0EsMkJBQTJCOztBQUUzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCLG9CQUFvQjs7QUFFcEM7QUFDQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFO0FBQzlFO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFD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Q0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7QUFDbkM7QUFDQSwrQ0FBK0M7QUFDL0MsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTs7QUFFTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsc0NBQXNDO0FBQ3JEO0FBQ0E7QUFDQSxpQkFBaUIsNENBQTRDO0FBQzdEO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQiwrQ0FBK0M7QUFDckUsbUJBQW1CLHVDQUF1QztBQUMxRCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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LElBQUksa0RBQVEsQ0FBQywwQkFBMEIsQ0FBQyxFQUFFO0lBQ3hDLG1GQUFtQyxFQUFFLENBQUM7Q0FDdkM7QUFFRCx1RUFBZSxFQUFFLENBQUM7QUFFbEIsbUJBQW1CO0FBQ25CLHNEQUFXLEVBQUUsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy8ucG5wbS9sb2NhbGZvcmFnZUAxLjEwLjAvbm9kZV9tb2R1bGVzL2xvY2FsZm9yYWdlL2Rpc3QvbG9jYWxmb3JhZ2UuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2NvbXBvbmVudHMvVGFza1dpbmRvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvY29tcG9uZW50cy9Ub29sc1dpbmRvdy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvY29tcG9uZW50cy9XaW5kb3dBZGRPdGhlclByZXN0U2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvY29tcG9uZW50cy9XaW5kb3dBcHBseUNvbnRyYWN0U2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvY29tcG9uZW50cy9XaW5kb3dBcHBseVBlcmNlbnRGYWN0dXJhdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvY29tcG9uZW50cy9XaW5kb3dDaGFuZ2VNb3RpdmVTZWN0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9DOi9kZXZlbG9wL2ljYXJlLXRvb2xzL3NyYy9jb21wb25lbnRzL1dpbmRvd0ZpbGxDb250cmFjdHNDbGFzc2VzU2VjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvY29tcG9uZW50cy9XaW5kb3dSZW1vdmVEQUNQcmVzdFNlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2NvbXBvbmVudHMvV2luZG93U3RlcENvbnRyYWN0c1NlY3Rpb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi9VSUJ1aWxkZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi9VSVRvb2xzLnRzIiwid2VicGFjazovLy8uL3NyYy9DOi9kZXZlbG9wL2ljYXJlLXRvb2xzL3NyYy9saWIvYXN5bmMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi9jaGVja3MudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi9lcnJvcnMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi9pY2FyZUludGVyYWN0aW9ucy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvbGliL3Rhc2sudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi91cmwudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2xpYi91dGlscy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvQzovZGV2ZWxvcC9pY2FyZS10b29scy9zcmMvdGFza3MvYWRkT3RoZXJQcmVzdHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL3Rhc2tzL2FwcGx5Q29udHJhY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL3Rhc2tzL2FwcGx5UGVyY2VudEZhY3R1cmF0aW9uLnRzIiwid2VicGFjazovLy8uL3NyYy9DOi9kZXZlbG9wL2ljYXJlLXRvb2xzL3NyYy90YXNrcy9jaGFuZ2VNb3RpdmUudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL3Rhc2tzL2ZpbGxDb250cmFjdENsYXNzZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL3Rhc2tzL2dvVG9Db250cmFjdHMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL3Rhc2tzL3JlbW92ZURBQ1ByZXN0LnRzIiwid2VicGFjazovLy8uL3NyYy9DOi9kZXZlbG9wL2ljYXJlLXRvb2xzL3NyYy90YXNrcy9yZW1vdmVFbmREYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy9DOi9kZXZlbG9wL2ljYXJlLXRvb2xzL3NyYy90YXNrcy9zdGVwQ29udHJhY3RzLnRzIiwid2VicGFjazovLy8uL3NyYy9DOi9kZXZlbG9wL2ljYXJlLXRvb2xzL3NyYy90YXNrcy90ZXN0LnRzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy8ucG5wbS94bHN4QDAuMTguNS9ub2RlX21vZHVsZXMveGxzeC94bHN4Lm1qcyIsIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9jb21wYXQgZ2V0IGRlZmF1bHQgZXhwb3J0Iiwid2VicGFjazovLy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vLy4vc3JjL0M6L2RldmVsb3AvaWNhcmUtdG9vbHMvc3JjL2luZGV4LnVzZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gICAgbG9jYWxGb3JhZ2UgLS0gT2ZmbGluZSBTdG9yYWdlLCBJbXByb3ZlZFxuICAgIFZlcnNpb24gMS4xMC4wXG4gICAgaHR0cHM6Ly9sb2NhbGZvcmFnZS5naXRodWIuaW8vbG9jYWxGb3JhZ2VcbiAgICAoYykgMjAxMy0yMDE3IE1vemlsbGEsIEFwYWNoZSBMaWNlbnNlIDIuMFxuKi9cbihmdW5jdGlvbihmKXtpZih0eXBlb2YgZXhwb3J0cz09PVwib2JqZWN0XCImJnR5cGVvZiBtb2R1bGUhPT1cInVuZGVmaW5lZFwiKXttb2R1bGUuZXhwb3J0cz1mKCl9ZWxzZSBpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoW10sZil9ZWxzZXt2YXIgZztpZih0eXBlb2Ygd2luZG93IT09XCJ1bmRlZmluZWRcIil7Zz13aW5kb3d9ZWxzZSBpZih0eXBlb2YgZ2xvYmFsIT09XCJ1bmRlZmluZWRcIil7Zz1nbG9iYWx9ZWxzZSBpZih0eXBlb2Ygc2VsZiE9PVwidW5kZWZpbmVkXCIpe2c9c2VsZn1lbHNle2c9dGhpc31nLmxvY2FsZm9yYWdlID0gZigpfX0pKGZ1bmN0aW9uKCl7dmFyIGRlZmluZSxtb2R1bGUsZXhwb3J0cztyZXR1cm4gKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IChmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsIGYpfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKF9kZXJlcV8sbW9kdWxlLGV4cG9ydHMpe1xuKGZ1bmN0aW9uIChnbG9iYWwpe1xuJ3VzZSBzdHJpY3QnO1xudmFyIE11dGF0aW9uID0gZ2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgZ2xvYmFsLldlYktpdE11dGF0aW9uT2JzZXJ2ZXI7XG5cbnZhciBzY2hlZHVsZURyYWluO1xuXG57XG4gIGlmIChNdXRhdGlvbikge1xuICAgIHZhciBjYWxsZWQgPSAwO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbihuZXh0VGljayk7XG4gICAgdmFyIGVsZW1lbnQgPSBnbG9iYWwuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG4gICAgICBlbGVtZW50LmRhdGEgPSAoY2FsbGVkID0gKytjYWxsZWQgJSAyKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCFnbG9iYWwuc2V0SW1tZWRpYXRlICYmIHR5cGVvZiBnbG9iYWwuTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgdmFyIGNoYW5uZWwgPSBuZXcgZ2xvYmFsLk1lc3NhZ2VDaGFubmVsKCk7XG4gICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBuZXh0VGljaztcbiAgICBzY2hlZHVsZURyYWluID0gZnVuY3Rpb24gKCkge1xuICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICB9O1xuICB9IGVsc2UgaWYgKCdkb2N1bWVudCcgaW4gZ2xvYmFsICYmICdvbnJlYWR5c3RhdGVjaGFuZ2UnIGluIGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKSkge1xuICAgIHNjaGVkdWxlRHJhaW4gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgIC8vIENyZWF0ZSBhIDxzY3JpcHQ+IGVsZW1lbnQ7IGl0cyByZWFkeXN0YXRlY2hhbmdlIGV2ZW50IHdpbGwgYmUgZmlyZWQgYXN5bmNocm9ub3VzbHkgb25jZSBpdCBpcyBpbnNlcnRlZFxuICAgICAgLy8gaW50byB0aGUgZG9jdW1lbnQuIERvIHNvLCB0aHVzIHF1ZXVpbmcgdXAgdGhlIHRhc2suIFJlbWVtYmVyIHRvIGNsZWFuIHVwIG9uY2UgaXQncyBiZWVuIGNhbGxlZC5cbiAgICAgIHZhciBzY3JpcHRFbCA9IGdsb2JhbC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgIHNjcmlwdEVsLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soKTtcblxuICAgICAgICBzY3JpcHRFbC5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuICAgICAgICBzY3JpcHRFbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHNjcmlwdEVsKTtcbiAgICAgICAgc2NyaXB0RWwgPSBudWxsO1xuICAgICAgfTtcbiAgICAgIGdsb2JhbC5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0RWwpO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgc2NoZWR1bGVEcmFpbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNldFRpbWVvdXQobmV4dFRpY2ssIDApO1xuICAgIH07XG4gIH1cbn1cblxudmFyIGRyYWluaW5nO1xudmFyIHF1ZXVlID0gW107XG4vL25hbWVkIG5leHRUaWNrIGZvciBsZXNzIGNvbmZ1c2luZyBzdGFjayB0cmFjZXNcbmZ1bmN0aW9uIG5leHRUaWNrKCkge1xuICBkcmFpbmluZyA9IHRydWU7XG4gIHZhciBpLCBvbGRRdWV1ZTtcbiAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgd2hpbGUgKGxlbikge1xuICAgIG9sZFF1ZXVlID0gcXVldWU7XG4gICAgcXVldWUgPSBbXTtcbiAgICBpID0gLTE7XG4gICAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgICAgb2xkUXVldWVbaV0oKTtcbiAgICB9XG4gICAgbGVuID0gcXVldWUubGVuZ3RoO1xuICB9XG4gIGRyYWluaW5nID0gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaW1tZWRpYXRlO1xuZnVuY3Rpb24gaW1tZWRpYXRlKHRhc2spIHtcbiAgaWYgKHF1ZXVlLnB1c2godGFzaykgPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgc2NoZWR1bGVEcmFpbigpO1xuICB9XG59XG5cbn0pLmNhbGwodGhpcyx0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09IFwidW5kZWZpbmVkXCIgPyBzZWxmIDogdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHt9KVxufSx7fV0sMjpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG52YXIgaW1tZWRpYXRlID0gX2RlcmVxXygxKTtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbmZ1bmN0aW9uIElOVEVSTkFMKCkge31cblxudmFyIGhhbmRsZXJzID0ge307XG5cbnZhciBSRUpFQ1RFRCA9IFsnUkVKRUNURUQnXTtcbnZhciBGVUxGSUxMRUQgPSBbJ0ZVTEZJTExFRCddO1xudmFyIFBFTkRJTkcgPSBbJ1BFTkRJTkcnXTtcblxubW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5mdW5jdGlvbiBQcm9taXNlKHJlc29sdmVyKSB7XG4gIGlmICh0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdyZXNvbHZlciBtdXN0IGJlIGEgZnVuY3Rpb24nKTtcbiAgfVxuICB0aGlzLnN0YXRlID0gUEVORElORztcbiAgdGhpcy5xdWV1ZSA9IFtdO1xuICB0aGlzLm91dGNvbWUgPSB2b2lkIDA7XG4gIGlmIChyZXNvbHZlciAhPT0gSU5URVJOQUwpIHtcbiAgICBzYWZlbHlSZXNvbHZlVGhlbmFibGUodGhpcywgcmVzb2x2ZXIpO1xuICB9XG59XG5cblByb21pc2UucHJvdG90eXBlW1wiY2F0Y2hcIl0gPSBmdW5jdGlvbiAob25SZWplY3RlZCkge1xuICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0ZWQpO1xufTtcblByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcbiAgaWYgKHR5cGVvZiBvbkZ1bGZpbGxlZCAhPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLnN0YXRlID09PSBGVUxGSUxMRUQgfHxcbiAgICB0eXBlb2Ygb25SZWplY3RlZCAhPT0gJ2Z1bmN0aW9uJyAmJiB0aGlzLnN0YXRlID09PSBSRUpFQ1RFRCkge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIHZhciBwcm9taXNlID0gbmV3IHRoaXMuY29uc3RydWN0b3IoSU5URVJOQUwpO1xuICBpZiAodGhpcy5zdGF0ZSAhPT0gUEVORElORykge1xuICAgIHZhciByZXNvbHZlciA9IHRoaXMuc3RhdGUgPT09IEZVTEZJTExFRCA/IG9uRnVsZmlsbGVkIDogb25SZWplY3RlZDtcbiAgICB1bndyYXAocHJvbWlzZSwgcmVzb2x2ZXIsIHRoaXMub3V0Y29tZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5xdWV1ZS5wdXNoKG5ldyBRdWV1ZUl0ZW0ocHJvbWlzZSwgb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpKTtcbiAgfVxuXG4gIHJldHVybiBwcm9taXNlO1xufTtcbmZ1bmN0aW9uIFF1ZXVlSXRlbShwcm9taXNlLCBvbkZ1bGZpbGxlZCwgb25SZWplY3RlZCkge1xuICB0aGlzLnByb21pc2UgPSBwcm9taXNlO1xuICBpZiAodHlwZW9mIG9uRnVsZmlsbGVkID09PSAnZnVuY3Rpb24nKSB7XG4gICAgdGhpcy5vbkZ1bGZpbGxlZCA9IG9uRnVsZmlsbGVkO1xuICAgIHRoaXMuY2FsbEZ1bGZpbGxlZCA9IHRoaXMub3RoZXJDYWxsRnVsZmlsbGVkO1xuICB9XG4gIGlmICh0eXBlb2Ygb25SZWplY3RlZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMub25SZWplY3RlZCA9IG9uUmVqZWN0ZWQ7XG4gICAgdGhpcy5jYWxsUmVqZWN0ZWQgPSB0aGlzLm90aGVyQ2FsbFJlamVjdGVkO1xuICB9XG59XG5RdWV1ZUl0ZW0ucHJvdG90eXBlLmNhbGxGdWxmaWxsZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaGFuZGxlcnMucmVzb2x2ZSh0aGlzLnByb21pc2UsIHZhbHVlKTtcbn07XG5RdWV1ZUl0ZW0ucHJvdG90eXBlLm90aGVyQ2FsbEZ1bGZpbGxlZCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB1bndyYXAodGhpcy5wcm9taXNlLCB0aGlzLm9uRnVsZmlsbGVkLCB2YWx1ZSk7XG59O1xuUXVldWVJdGVtLnByb3RvdHlwZS5jYWxsUmVqZWN0ZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgaGFuZGxlcnMucmVqZWN0KHRoaXMucHJvbWlzZSwgdmFsdWUpO1xufTtcblF1ZXVlSXRlbS5wcm90b3R5cGUub3RoZXJDYWxsUmVqZWN0ZWQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgdW53cmFwKHRoaXMucHJvbWlzZSwgdGhpcy5vblJlamVjdGVkLCB2YWx1ZSk7XG59O1xuXG5mdW5jdGlvbiB1bndyYXAocHJvbWlzZSwgZnVuYywgdmFsdWUpIHtcbiAgaW1tZWRpYXRlKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmV0dXJuVmFsdWU7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVyblZhbHVlID0gZnVuYyh2YWx1ZSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXJzLnJlamVjdChwcm9taXNlLCBlKTtcbiAgICB9XG4gICAgaWYgKHJldHVyblZhbHVlID09PSBwcm9taXNlKSB7XG4gICAgICBoYW5kbGVycy5yZWplY3QocHJvbWlzZSwgbmV3IFR5cGVFcnJvcignQ2Fubm90IHJlc29sdmUgcHJvbWlzZSB3aXRoIGl0c2VsZicpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGFuZGxlcnMucmVzb2x2ZShwcm9taXNlLCByZXR1cm5WYWx1ZSk7XG4gICAgfVxuICB9KTtcbn1cblxuaGFuZGxlcnMucmVzb2x2ZSA9IGZ1bmN0aW9uIChzZWxmLCB2YWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2goZ2V0VGhlbiwgdmFsdWUpO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIHJldHVybiBoYW5kbGVycy5yZWplY3Qoc2VsZiwgcmVzdWx0LnZhbHVlKTtcbiAgfVxuICB2YXIgdGhlbmFibGUgPSByZXN1bHQudmFsdWU7XG5cbiAgaWYgKHRoZW5hYmxlKSB7XG4gICAgc2FmZWx5UmVzb2x2ZVRoZW5hYmxlKHNlbGYsIHRoZW5hYmxlKTtcbiAgfSBlbHNlIHtcbiAgICBzZWxmLnN0YXRlID0gRlVMRklMTEVEO1xuICAgIHNlbGYub3V0Y29tZSA9IHZhbHVlO1xuICAgIHZhciBpID0gLTE7XG4gICAgdmFyIGxlbiA9IHNlbGYucXVldWUubGVuZ3RoO1xuICAgIHdoaWxlICgrK2kgPCBsZW4pIHtcbiAgICAgIHNlbGYucXVldWVbaV0uY2FsbEZ1bGZpbGxlZCh2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzZWxmO1xufTtcbmhhbmRsZXJzLnJlamVjdCA9IGZ1bmN0aW9uIChzZWxmLCBlcnJvcikge1xuICBzZWxmLnN0YXRlID0gUkVKRUNURUQ7XG4gIHNlbGYub3V0Y29tZSA9IGVycm9yO1xuICB2YXIgaSA9IC0xO1xuICB2YXIgbGVuID0gc2VsZi5xdWV1ZS5sZW5ndGg7XG4gIHdoaWxlICgrK2kgPCBsZW4pIHtcbiAgICBzZWxmLnF1ZXVlW2ldLmNhbGxSZWplY3RlZChlcnJvcik7XG4gIH1cbiAgcmV0dXJuIHNlbGY7XG59O1xuXG5mdW5jdGlvbiBnZXRUaGVuKG9iaikge1xuICAvLyBNYWtlIHN1cmUgd2Ugb25seSBhY2Nlc3MgdGhlIGFjY2Vzc29yIG9uY2UgYXMgcmVxdWlyZWQgYnkgdGhlIHNwZWNcbiAgdmFyIHRoZW4gPSBvYmogJiYgb2JqLnRoZW47XG4gIGlmIChvYmogJiYgKHR5cGVvZiBvYmogPT09ICdvYmplY3QnIHx8IHR5cGVvZiBvYmogPT09ICdmdW5jdGlvbicpICYmIHR5cGVvZiB0aGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGFwcHlUaGVuKCkge1xuICAgICAgdGhlbi5hcHBseShvYmosIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzYWZlbHlSZXNvbHZlVGhlbmFibGUoc2VsZiwgdGhlbmFibGUpIHtcbiAgLy8gRWl0aGVyIGZ1bGZpbGwsIHJlamVjdCBvciByZWplY3Qgd2l0aCBlcnJvclxuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGZ1bmN0aW9uIG9uRXJyb3IodmFsdWUpIHtcbiAgICBpZiAoY2FsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNhbGxlZCA9IHRydWU7XG4gICAgaGFuZGxlcnMucmVqZWN0KHNlbGYsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU3VjY2Vzcyh2YWx1ZSkge1xuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgICBoYW5kbGVycy5yZXNvbHZlKHNlbGYsIHZhbHVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeVRvVW53cmFwKCkge1xuICAgIHRoZW5hYmxlKG9uU3VjY2Vzcywgb25FcnJvcik7XG4gIH1cblxuICB2YXIgcmVzdWx0ID0gdHJ5Q2F0Y2godHJ5VG9VbndyYXApO1xuICBpZiAocmVzdWx0LnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgIG9uRXJyb3IocmVzdWx0LnZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiB0cnlDYXRjaChmdW5jLCB2YWx1ZSkge1xuICB2YXIgb3V0ID0ge307XG4gIHRyeSB7XG4gICAgb3V0LnZhbHVlID0gZnVuYyh2YWx1ZSk7XG4gICAgb3V0LnN0YXR1cyA9ICdzdWNjZXNzJztcbiAgfSBjYXRjaCAoZSkge1xuICAgIG91dC5zdGF0dXMgPSAnZXJyb3InO1xuICAgIG91dC52YWx1ZSA9IGU7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuUHJvbWlzZS5yZXNvbHZlID0gcmVzb2x2ZTtcbmZ1bmN0aW9uIHJlc29sdmUodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgdGhpcykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICByZXR1cm4gaGFuZGxlcnMucmVzb2x2ZShuZXcgdGhpcyhJTlRFUk5BTCksIHZhbHVlKTtcbn1cblxuUHJvbWlzZS5yZWplY3QgPSByZWplY3Q7XG5mdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gIHZhciBwcm9taXNlID0gbmV3IHRoaXMoSU5URVJOQUwpO1xuICByZXR1cm4gaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG59XG5cblByb21pc2UuYWxsID0gYWxsO1xuZnVuY3Rpb24gYWxsKGl0ZXJhYmxlKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpdGVyYWJsZSkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICByZXR1cm4gdGhpcy5yZWplY3QobmV3IFR5cGVFcnJvcignbXVzdCBiZSBhbiBhcnJheScpKTtcbiAgfVxuXG4gIHZhciBsZW4gPSBpdGVyYWJsZS5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgaWYgKCFsZW4pIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlKFtdKTtcbiAgfVxuXG4gIHZhciB2YWx1ZXMgPSBuZXcgQXJyYXkobGVuKTtcbiAgdmFyIHJlc29sdmVkID0gMDtcbiAgdmFyIGkgPSAtMTtcbiAgdmFyIHByb21pc2UgPSBuZXcgdGhpcyhJTlRFUk5BTCk7XG5cbiAgd2hpbGUgKCsraSA8IGxlbikge1xuICAgIGFsbFJlc29sdmVyKGl0ZXJhYmxlW2ldLCBpKTtcbiAgfVxuICByZXR1cm4gcHJvbWlzZTtcbiAgZnVuY3Rpb24gYWxsUmVzb2x2ZXIodmFsdWUsIGkpIHtcbiAgICBzZWxmLnJlc29sdmUodmFsdWUpLnRoZW4ocmVzb2x2ZUZyb21BbGwsIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBmdW5jdGlvbiByZXNvbHZlRnJvbUFsbChvdXRWYWx1ZSkge1xuICAgICAgdmFsdWVzW2ldID0gb3V0VmFsdWU7XG4gICAgICBpZiAoKytyZXNvbHZlZCA9PT0gbGVuICYmICFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVzb2x2ZShwcm9taXNlLCB2YWx1ZXMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5Qcm9taXNlLnJhY2UgPSByYWNlO1xuZnVuY3Rpb24gcmFjZShpdGVyYWJsZSkge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoaXRlcmFibGUpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgcmV0dXJuIHRoaXMucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ211c3QgYmUgYW4gYXJyYXknKSk7XG4gIH1cblxuICB2YXIgbGVuID0gaXRlcmFibGUubGVuZ3RoO1xuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIGlmICghbGVuKSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZShbXSk7XG4gIH1cblxuICB2YXIgaSA9IC0xO1xuICB2YXIgcHJvbWlzZSA9IG5ldyB0aGlzKElOVEVSTkFMKTtcblxuICB3aGlsZSAoKytpIDwgbGVuKSB7XG4gICAgcmVzb2x2ZXIoaXRlcmFibGVbaV0pO1xuICB9XG4gIHJldHVybiBwcm9taXNlO1xuICBmdW5jdGlvbiByZXNvbHZlcih2YWx1ZSkge1xuICAgIHNlbGYucmVzb2x2ZSh2YWx1ZSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHtcbiAgICAgIGlmICghY2FsbGVkKSB7XG4gICAgICAgIGNhbGxlZCA9IHRydWU7XG4gICAgICAgIGhhbmRsZXJzLnJlc29sdmUocHJvbWlzZSwgcmVzcG9uc2UpO1xuICAgICAgfVxuICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaGFuZGxlcnMucmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG59LHtcIjFcIjoxfV0sMzpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4oZnVuY3Rpb24gKGdsb2JhbCl7XG4ndXNlIHN0cmljdCc7XG5pZiAodHlwZW9mIGdsb2JhbC5Qcm9taXNlICE9PSAnZnVuY3Rpb24nKSB7XG4gIGdsb2JhbC5Qcm9taXNlID0gX2RlcmVxXygyKTtcbn1cblxufSkuY2FsbCh0aGlzLHR5cGVvZiBnbG9iYWwgIT09IFwidW5kZWZpbmVkXCIgPyBnbG9iYWwgOiB0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIiA/IHNlbGYgOiB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiID8gd2luZG93IDoge30pXG59LHtcIjJcIjoyfV0sNDpbZnVuY3Rpb24oX2RlcmVxXyxtb2R1bGUsZXhwb3J0cyl7XG4ndXNlIHN0cmljdCc7XG5cbnZhciBfdHlwZW9mID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBTeW1ib2wuaXRlcmF0b3IgPT09IFwic3ltYm9sXCIgPyBmdW5jdGlvbiAob2JqKSB7IHJldHVybiB0eXBlb2Ygb2JqOyB9IDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gZ2V0SURCKCkge1xuICAgIC8qIGdsb2JhbCBpbmRleGVkREIsd2Via2l0SW5kZXhlZERCLG1vekluZGV4ZWREQixPSW5kZXhlZERCLG1zSW5kZXhlZERCICovXG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleGVkREIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm4gaW5kZXhlZERCO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlb2Ygd2Via2l0SW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIHdlYmtpdEluZGV4ZWREQjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIG1vekluZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBtb3pJbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBPSW5kZXhlZERCICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgcmV0dXJuIE9JbmRleGVkREI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBtc0luZGV4ZWREQiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHJldHVybiBtc0luZGV4ZWREQjtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxudmFyIGlkYiA9IGdldElEQigpO1xuXG5mdW5jdGlvbiBpc0luZGV4ZWREQlZhbGlkKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIEluaXRpYWxpemUgSW5kZXhlZERCOyBmYWxsIGJhY2sgdG8gdmVuZG9yLXByZWZpeGVkIHZlcnNpb25zXG4gICAgICAgIC8vIGlmIG5lZWRlZC5cbiAgICAgICAgaWYgKCFpZGIgfHwgIWlkYi5vcGVuKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgbWltaWMgUG91Y2hEQiBoZXJlO1xuICAgICAgICAvL1xuICAgICAgICAvLyBXZSB0ZXN0IGZvciBvcGVuRGF0YWJhc2UgYmVjYXVzZSBJRSBNb2JpbGUgaWRlbnRpZmllcyBpdHNlbGZcbiAgICAgICAgLy8gYXMgU2FmYXJpLiBPaCB0aGUgbHVsei4uLlxuICAgICAgICB2YXIgaXNTYWZhcmkgPSB0eXBlb2Ygb3BlbkRhdGFiYXNlICE9PSAndW5kZWZpbmVkJyAmJiAvKFNhZmFyaXxpUGhvbmV8aVBhZHxpUG9kKS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL0Nocm9tZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhL0JsYWNrQmVycnkvLnRlc3QobmF2aWdhdG9yLnBsYXRmb3JtKTtcblxuICAgICAgICB2YXIgaGFzRmV0Y2ggPSB0eXBlb2YgZmV0Y2ggPT09ICdmdW5jdGlvbicgJiYgZmV0Y2gudG9TdHJpbmcoKS5pbmRleE9mKCdbbmF0aXZlIGNvZGUnKSAhPT0gLTE7XG5cbiAgICAgICAgLy8gU2FmYXJpIDwxMC4xIGRvZXMgbm90IG1lZXQgb3VyIHJlcXVpcmVtZW50cyBmb3IgSURCIHN1cHBvcnRcbiAgICAgICAgLy8gKHNlZTogaHR0cHM6Ly9naXRodWIuY29tL3BvdWNoZGIvcG91Y2hkYi9pc3N1ZXMvNTU3MikuXG4gICAgICAgIC8vIFNhZmFyaSAxMC4xIHNoaXBwZWQgd2l0aCBmZXRjaCwgd2UgY2FuIHVzZSB0aGF0IHRvIGRldGVjdCBpdC5cbiAgICAgICAgLy8gTm90ZTogdGhpcyBjcmVhdGVzIGlzc3VlcyB3aXRoIGB3aW5kb3cuZmV0Y2hgIHBvbHlmaWxscyBhbmRcbiAgICAgICAgLy8gb3ZlcnJpZGVzOyBzZWU6XG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9sb2NhbEZvcmFnZS9sb2NhbEZvcmFnZS9pc3N1ZXMvODU2XG4gICAgICAgIHJldHVybiAoIWlzU2FmYXJpIHx8IGhhc0ZldGNoKSAmJiB0eXBlb2YgaW5kZXhlZERCICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAvLyBzb21lIG91dGRhdGVkIGltcGxlbWVudGF0aW9ucyBvZiBJREIgdGhhdCBhcHBlYXIgb24gU2Ftc3VuZ1xuICAgICAgICAvLyBhbmQgSFRDIEFuZHJvaWQgZGV2aWNlcyA8NC40IGFyZSBtaXNzaW5nIElEQktleVJhbmdlXG4gICAgICAgIC8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvaXNzdWVzLzEyOFxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL2lzc3Vlcy8yNzJcbiAgICAgICAgdHlwZW9mIElEQktleVJhbmdlICE9PSAndW5kZWZpbmVkJztcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbi8vIEFic3RyYWN0cyBjb25zdHJ1Y3RpbmcgYSBCbG9iIG9iamVjdCwgc28gaXQgYWxzbyB3b3JrcyBpbiBvbGRlclxuLy8gYnJvd3NlcnMgdGhhdCBkb24ndCBzdXBwb3J0IHRoZSBuYXRpdmUgQmxvYiBjb25zdHJ1Y3Rvci4gKGkuZS5cbi8vIG9sZCBRdFdlYktpdCB2ZXJzaW9ucywgYXQgbGVhc3QpLlxuLy8gQWJzdHJhY3RzIGNvbnN0cnVjdGluZyBhIEJsb2Igb2JqZWN0LCBzbyBpdCBhbHNvIHdvcmtzIGluIG9sZGVyXG4vLyBicm93c2VycyB0aGF0IGRvbid0IHN1cHBvcnQgdGhlIG5hdGl2ZSBCbG9iIGNvbnN0cnVjdG9yLiAoaS5lLlxuLy8gb2xkIFF0V2ViS2l0IHZlcnNpb25zLCBhdCBsZWFzdCkuXG5mdW5jdGlvbiBjcmVhdGVCbG9iKHBhcnRzLCBwcm9wZXJ0aWVzKSB7XG4gICAgLyogZ2xvYmFsIEJsb2JCdWlsZGVyLE1TQmxvYkJ1aWxkZXIsTW96QmxvYkJ1aWxkZXIsV2ViS2l0QmxvYkJ1aWxkZXIgKi9cbiAgICBwYXJ0cyA9IHBhcnRzIHx8IFtdO1xuICAgIHByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzIHx8IHt9O1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihwYXJ0cywgcHJvcGVydGllcyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBpZiAoZS5uYW1lICE9PSAnVHlwZUVycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgQnVpbGRlciA9IHR5cGVvZiBCbG9iQnVpbGRlciAhPT0gJ3VuZGVmaW5lZCcgPyBCbG9iQnVpbGRlciA6IHR5cGVvZiBNU0Jsb2JCdWlsZGVyICE9PSAndW5kZWZpbmVkJyA/IE1TQmxvYkJ1aWxkZXIgOiB0eXBlb2YgTW96QmxvYkJ1aWxkZXIgIT09ICd1bmRlZmluZWQnID8gTW96QmxvYkJ1aWxkZXIgOiBXZWJLaXRCbG9iQnVpbGRlcjtcbiAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgQnVpbGRlcigpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhcnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICBidWlsZGVyLmFwcGVuZChwYXJ0c1tpXSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1aWxkZXIuZ2V0QmxvYihwcm9wZXJ0aWVzLnR5cGUpO1xuICAgIH1cbn1cblxuLy8gVGhpcyBpcyBDb21tb25KUyBiZWNhdXNlIGxpZSBpcyBhbiBleHRlcm5hbCBkZXBlbmRlbmN5LCBzbyBSb2xsdXBcbi8vIGNhbiBqdXN0IGlnbm9yZSBpdC5cbmlmICh0eXBlb2YgUHJvbWlzZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAvLyBJbiB0aGUgXCJub3Byb21pc2VzXCIgYnVpbGQgdGhpcyB3aWxsIGp1c3QgdGhyb3cgaWYgeW91IGRvbid0IGhhdmVcbiAgICAvLyBhIGdsb2JhbCBwcm9taXNlIG9iamVjdCwgYnV0IGl0IHdvdWxkIHRocm93IGFueXdheSBsYXRlci5cbiAgICBfZGVyZXFfKDMpO1xufVxudmFyIFByb21pc2UkMSA9IFByb21pc2U7XG5cbmZ1bmN0aW9uIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjaykge1xuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0KTtcbiAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhlcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvbWlzZS50aGVuKGNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGVycm9yQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcHJvbWlzZVtcImNhdGNoXCJdKGVycm9yQ2FsbGJhY2spO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplS2V5KGtleSkge1xuICAgIC8vIENhc3QgdGhlIGtleSB0byBhIHN0cmluZywgYXMgdGhhdCdzIGFsbCB3ZSBjYW4gc2V0IGFzIGEga2V5LlxuICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBjb25zb2xlLndhcm4oa2V5ICsgJyB1c2VkIGFzIGEga2V5LCBidXQgaXQgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICBrZXkgPSBTdHJpbmcoa2V5KTtcbiAgICB9XG5cbiAgICByZXR1cm4ga2V5O1xufVxuXG5mdW5jdGlvbiBnZXRDYWxsYmFjaygpIHtcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCAmJiB0eXBlb2YgYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gYXJndW1lbnRzW2FyZ3VtZW50cy5sZW5ndGggLSAxXTtcbiAgICB9XG59XG5cbi8vIFNvbWUgY29kZSBvcmlnaW5hbGx5IGZyb20gYXN5bmNfc3RvcmFnZS5qcyBpblxuLy8gW0dhaWFdKGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhLWIyZy9nYWlhKS5cblxudmFyIERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUgPSAnbG9jYWwtZm9yYWdlLWRldGVjdC1ibG9iLXN1cHBvcnQnO1xudmFyIHN1cHBvcnRzQmxvYnMgPSB2b2lkIDA7XG52YXIgZGJDb250ZXh0cyA9IHt9O1xudmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuLy8gVHJhbnNhY3Rpb24gTW9kZXNcbnZhciBSRUFEX09OTFkgPSAncmVhZG9ubHknO1xudmFyIFJFQURfV1JJVEUgPSAncmVhZHdyaXRlJztcblxuLy8gVHJhbnNmb3JtIGEgYmluYXJ5IHN0cmluZyB0byBhbiBhcnJheSBidWZmZXIsIGJlY2F1c2Ugb3RoZXJ3aXNlXG4vLyB3ZWlyZCBzdHVmZiBoYXBwZW5zIHdoZW4geW91IHRyeSB0byB3b3JrIHdpdGggdGhlIGJpbmFyeSBzdHJpbmcgZGlyZWN0bHkuXG4vLyBJdCBpcyBrbm93bi5cbi8vIEZyb20gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8xNDk2NzY0Ny8gKGNvbnRpbnVlcyBvbiBuZXh0IGxpbmUpXG4vLyBlbmNvZGUtZGVjb2RlLWltYWdlLXdpdGgtYmFzZTY0LWJyZWFrcy1pbWFnZSAoMjAxMy0wNC0yMSlcbmZ1bmN0aW9uIF9iaW5TdHJpbmdUb0FycmF5QnVmZmVyKGJpbikge1xuICAgIHZhciBsZW5ndGggPSBiaW4ubGVuZ3RoO1xuICAgIHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIobGVuZ3RoKTtcbiAgICB2YXIgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGFycltpXSA9IGJpbi5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnVmO1xufVxuXG4vL1xuLy8gQmxvYnMgYXJlIG5vdCBzdXBwb3J0ZWQgaW4gYWxsIHZlcnNpb25zIG9mIEluZGV4ZWREQiwgbm90YWJseVxuLy8gQ2hyb21lIDwzNyBhbmQgQW5kcm9pZCA8NS4gSW4gdGhvc2UgdmVyc2lvbnMsIHN0b3JpbmcgYSBibG9iIHdpbGwgdGhyb3cuXG4vL1xuLy8gVmFyaW91cyBvdGhlciBibG9iIGJ1Z3MgZXhpc3QgaW4gQ2hyb21lIHYzNy00MiAoaW5jbHVzaXZlKS5cbi8vIERldGVjdGluZyB0aGVtIGlzIGV4cGVuc2l2ZSBhbmQgY29uZnVzaW5nIHRvIHVzZXJzLCBhbmQgQ2hyb21lIDM3LTQyXG4vLyBpcyBhdCB2ZXJ5IGxvdyB1c2FnZSB3b3JsZHdpZGUsIHNvIHdlIGRvIGEgaGFja3kgdXNlckFnZW50IGNoZWNrIGluc3RlYWQuXG4vL1xuLy8gY29udGVudC10eXBlIGJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQwODEyMFxuLy8gNDA0IGJ1ZzogaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0NzkxNlxuLy8gRmlsZVJlYWRlciBidWc6IGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDc4MzZcbi8vXG4vLyBDb2RlIGJvcnJvd2VkIGZyb20gUG91Y2hEQi4gU2VlOlxuLy8gaHR0cHM6Ly9naXRodWIuY29tL3BvdWNoZGIvcG91Y2hkYi9ibG9iL21hc3Rlci9wYWNrYWdlcy9ub2RlX21vZHVsZXMvcG91Y2hkYi1hZGFwdGVyLWlkYi9zcmMvYmxvYlN1cHBvcnQuanNcbi8vXG5mdW5jdGlvbiBfY2hlY2tCbG9iU3VwcG9ydFdpdGhvdXRDYWNoaW5nKGlkYikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgIHZhciB0eG4gPSBpZGIudHJhbnNhY3Rpb24oREVURUNUX0JMT0JfU1VQUE9SVF9TVE9SRSwgUkVBRF9XUklURSk7XG4gICAgICAgIHZhciBibG9iID0gY3JlYXRlQmxvYihbJyddKTtcbiAgICAgICAgdHhuLm9iamVjdFN0b3JlKERFVEVDVF9CTE9CX1NVUFBPUlRfU1RPUkUpLnB1dChibG9iLCAna2V5Jyk7XG5cbiAgICAgICAgdHhuLm9uYWJvcnQgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIHRyYW5zYWN0aW9uIGFib3J0cyBub3cgaXRzIGR1ZSB0byBub3QgYmVpbmcgYWJsZSB0b1xuICAgICAgICAgICAgLy8gd3JpdGUgdG8gdGhlIGRhdGFiYXNlLCBsaWtlbHkgZHVlIHRvIHRoZSBkaXNrIGJlaW5nIGZ1bGxcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0eG4ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtYXRjaGVkQ2hyb21lID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb21lXFwvKFxcZCspLyk7XG4gICAgICAgICAgICB2YXIgbWF0Y2hlZEVkZ2UgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9FZGdlXFwvLyk7XG4gICAgICAgICAgICAvLyBNUyBFZGdlIHByZXRlbmRzIHRvIGJlIENocm9tZSA0MjpcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaGg4NjkzMDElMjh2PXZzLjg1JTI5LmFzcHhcbiAgICAgICAgICAgIHJlc29sdmUobWF0Y2hlZEVkZ2UgfHwgIW1hdGNoZWRDaHJvbWUgfHwgcGFyc2VJbnQobWF0Y2hlZENocm9tZVsxXSwgMTApID49IDQzKTtcbiAgICAgICAgfTtcbiAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlOyAvLyBlcnJvciwgc28gYXNzdW1lIHVuc3VwcG9ydGVkXG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9jaGVja0Jsb2JTdXBwb3J0KGlkYikge1xuICAgIGlmICh0eXBlb2Ygc3VwcG9ydHNCbG9icyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZShzdXBwb3J0c0Jsb2JzKTtcbiAgICB9XG4gICAgcmV0dXJuIF9jaGVja0Jsb2JTdXBwb3J0V2l0aG91dENhY2hpbmcoaWRiKS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICBzdXBwb3J0c0Jsb2JzID0gdmFsdWU7XG4gICAgICAgIHJldHVybiBzdXBwb3J0c0Jsb2JzO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBfZGVmZXJSZWFkaW5lc3MoZGJJbmZvKSB7XG4gICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbZGJJbmZvLm5hbWVdO1xuXG4gICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgY3VycmVudCBkYXRhYmFzZSBvcGVyYXRpb24uXG4gICAgdmFyIGRlZmVycmVkT3BlcmF0aW9uID0ge307XG5cbiAgICBkZWZlcnJlZE9wZXJhdGlvbi5wcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGRlZmVycmVkT3BlcmF0aW9uLnJlc29sdmUgPSByZXNvbHZlO1xuICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbi5yZWplY3QgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICAvLyBFbnF1ZXVlIHRoZSBkZWZlcnJlZCBvcGVyYXRpb24uXG4gICAgZGJDb250ZXh0LmRlZmVycmVkT3BlcmF0aW9ucy5wdXNoKGRlZmVycmVkT3BlcmF0aW9uKTtcblxuICAgIC8vIENoYWluIGl0cyBwcm9taXNlIHRvIHRoZSBkYXRhYmFzZSByZWFkaW5lc3MuXG4gICAgaWYgKCFkYkNvbnRleHQuZGJSZWFkeSkge1xuICAgICAgICBkYkNvbnRleHQuZGJSZWFkeSA9IGRlZmVycmVkT3BlcmF0aW9uLnByb21pc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGJDb250ZXh0LmRiUmVhZHkgPSBkYkNvbnRleHQuZGJSZWFkeS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZE9wZXJhdGlvbi5wcm9taXNlO1xuICAgICAgICB9KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9hZHZhbmNlUmVhZGluZXNzKGRiSW5mbykge1xuICAgIHZhciBkYkNvbnRleHQgPSBkYkNvbnRleHRzW2RiSW5mby5uYW1lXTtcblxuICAgIC8vIERlcXVldWUgYSBkZWZlcnJlZCBvcGVyYXRpb24uXG4gICAgdmFyIGRlZmVycmVkT3BlcmF0aW9uID0gZGJDb250ZXh0LmRlZmVycmVkT3BlcmF0aW9ucy5wb3AoKTtcblxuICAgIC8vIFJlc29sdmUgaXRzIHByb21pc2UgKHdoaWNoIGlzIHBhcnQgb2YgdGhlIGRhdGFiYXNlIHJlYWRpbmVzc1xuICAgIC8vIGNoYWluIG9mIHByb21pc2VzKS5cbiAgICBpZiAoZGVmZXJyZWRPcGVyYXRpb24pIHtcbiAgICAgICAgZGVmZXJyZWRPcGVyYXRpb24ucmVzb2x2ZSgpO1xuICAgICAgICByZXR1cm4gZGVmZXJyZWRPcGVyYXRpb24ucHJvbWlzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9yZWplY3RSZWFkaW5lc3MoZGJJbmZvLCBlcnIpIHtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyBEZXF1ZXVlIGEgZGVmZXJyZWQgb3BlcmF0aW9uLlxuICAgIHZhciBkZWZlcnJlZE9wZXJhdGlvbiA9IGRiQ29udGV4dC5kZWZlcnJlZE9wZXJhdGlvbnMucG9wKCk7XG5cbiAgICAvLyBSZWplY3QgaXRzIHByb21pc2UgKHdoaWNoIGlzIHBhcnQgb2YgdGhlIGRhdGFiYXNlIHJlYWRpbmVzc1xuICAgIC8vIGNoYWluIG9mIHByb21pc2VzKS5cbiAgICBpZiAoZGVmZXJyZWRPcGVyYXRpb24pIHtcbiAgICAgICAgZGVmZXJyZWRPcGVyYXRpb24ucmVqZWN0KGVycik7XG4gICAgICAgIHJldHVybiBkZWZlcnJlZE9wZXJhdGlvbi5wcm9taXNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gX2dldENvbm5lY3Rpb24oZGJJbmZvLCB1cGdyYWRlTmVlZGVkKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBkYkNvbnRleHRzW2RiSW5mby5uYW1lXSA9IGRiQ29udGV4dHNbZGJJbmZvLm5hbWVdIHx8IGNyZWF0ZURiQ29udGV4dCgpO1xuXG4gICAgICAgIGlmIChkYkluZm8uZGIpIHtcbiAgICAgICAgICAgIGlmICh1cGdyYWRlTmVlZGVkKSB7XG4gICAgICAgICAgICAgICAgX2RlZmVyUmVhZGluZXNzKGRiSW5mbyk7XG4gICAgICAgICAgICAgICAgZGJJbmZvLmRiLmNsb3NlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGRiSW5mby5kYik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZGJBcmdzID0gW2RiSW5mby5uYW1lXTtcblxuICAgICAgICBpZiAodXBncmFkZU5lZWRlZCkge1xuICAgICAgICAgICAgZGJBcmdzLnB1c2goZGJJbmZvLnZlcnNpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9wZW5yZXEgPSBpZGIub3Blbi5hcHBseShpZGIsIGRiQXJncyk7XG5cbiAgICAgICAgaWYgKHVwZ3JhZGVOZWVkZWQpIHtcbiAgICAgICAgICAgIG9wZW5yZXEub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGIgPSBvcGVucmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShkYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUub2xkVmVyc2lvbiA8PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBZGRlZCB3aGVuIHN1cHBvcnQgZm9yIGJsb2Igc2hpbXMgd2FzIGFkZGVkXG4gICAgICAgICAgICAgICAgICAgICAgICBkYi5jcmVhdGVPYmplY3RTdG9yZShERVRFQ1RfQkxPQl9TVVBQT1JUX1NUT1JFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChleC5uYW1lID09PSAnQ29uc3RyYWludEVycm9yJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgZGF0YWJhc2UgXCInICsgZGJJbmZvLm5hbWUgKyAnXCInICsgJyBoYXMgYmVlbiB1cGdyYWRlZCBmcm9tIHZlcnNpb24gJyArIGUub2xkVmVyc2lvbiArICcgdG8gdmVyc2lvbiAnICsgZS5uZXdWZXJzaW9uICsgJywgYnV0IHRoZSBzdG9yYWdlIFwiJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnXCIgYWxyZWFkeSBleGlzdHMuJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBvcGVucmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgcmVqZWN0KG9wZW5yZXEuZXJyb3IpO1xuICAgICAgICB9O1xuXG4gICAgICAgIG9wZW5yZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiID0gb3BlbnJlcS5yZXN1bHQ7XG4gICAgICAgICAgICBkYi5vbnZlcnNpb25jaGFuZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFRyaWdnZXJlZCB3aGVuIHRoZSBkYXRhYmFzZSBpcyBtb2RpZmllZCAoZS5nLiBhZGRpbmcgYW4gb2JqZWN0U3RvcmUpIG9yXG4gICAgICAgICAgICAgICAgLy8gZGVsZXRlZCAoZXZlbiB3aGVuIGluaXRpYXRlZCBieSBvdGhlciBzZXNzaW9ucyBpbiBkaWZmZXJlbnQgdGFicykuXG4gICAgICAgICAgICAgICAgLy8gQ2xvc2luZyB0aGUgY29ubmVjdGlvbiBoZXJlIHByZXZlbnRzIHRob3NlIG9wZXJhdGlvbnMgZnJvbSBiZWluZyBibG9ja2VkLlxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBkYXRhYmFzZSBpcyBhY2Nlc3NlZCBhZ2FpbiBsYXRlciBieSB0aGlzIGluc3RhbmNlLCB0aGUgY29ubmVjdGlvblxuICAgICAgICAgICAgICAgIC8vIHdpbGwgYmUgcmVvcGVuZWQgb3IgdGhlIGRhdGFiYXNlIHJlY3JlYXRlZCBhcyBuZWVkZWQuXG4gICAgICAgICAgICAgICAgZS50YXJnZXQuY2xvc2UoKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXNvbHZlKGRiKTtcbiAgICAgICAgICAgIF9hZHZhbmNlUmVhZGluZXNzKGRiSW5mbyk7XG4gICAgICAgIH07XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIF9nZXRPcmlnaW5hbENvbm5lY3Rpb24oZGJJbmZvKSB7XG4gICAgcmV0dXJuIF9nZXRDb25uZWN0aW9uKGRiSW5mbywgZmFsc2UpO1xufVxuXG5mdW5jdGlvbiBfZ2V0VXBncmFkZWRDb25uZWN0aW9uKGRiSW5mbykge1xuICAgIHJldHVybiBfZ2V0Q29ubmVjdGlvbihkYkluZm8sIHRydWUpO1xufVxuXG5mdW5jdGlvbiBfaXNVcGdyYWRlTmVlZGVkKGRiSW5mbywgZGVmYXVsdFZlcnNpb24pIHtcbiAgICBpZiAoIWRiSW5mby5kYikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICB2YXIgaXNOZXdTdG9yZSA9ICFkYkluZm8uZGIub2JqZWN0U3RvcmVOYW1lcy5jb250YWlucyhkYkluZm8uc3RvcmVOYW1lKTtcbiAgICB2YXIgaXNEb3duZ3JhZGUgPSBkYkluZm8udmVyc2lvbiA8IGRiSW5mby5kYi52ZXJzaW9uO1xuICAgIHZhciBpc1VwZ3JhZGUgPSBkYkluZm8udmVyc2lvbiA+IGRiSW5mby5kYi52ZXJzaW9uO1xuXG4gICAgaWYgKGlzRG93bmdyYWRlKSB7XG4gICAgICAgIC8vIElmIHRoZSB2ZXJzaW9uIGlzIG5vdCB0aGUgZGVmYXVsdCBvbmVcbiAgICAgICAgLy8gdGhlbiB3YXJuIGZvciBpbXBvc3NpYmxlIGRvd25ncmFkZS5cbiAgICAgICAgaWYgKGRiSW5mby52ZXJzaW9uICE9PSBkZWZhdWx0VmVyc2lvbikge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgZGF0YWJhc2UgXCInICsgZGJJbmZvLm5hbWUgKyAnXCInICsgXCIgY2FuJ3QgYmUgZG93bmdyYWRlZCBmcm9tIHZlcnNpb24gXCIgKyBkYkluZm8uZGIudmVyc2lvbiArICcgdG8gdmVyc2lvbiAnICsgZGJJbmZvLnZlcnNpb24gKyAnLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsaWduIHRoZSB2ZXJzaW9ucyB0byBwcmV2ZW50IGVycm9ycy5cbiAgICAgICAgZGJJbmZvLnZlcnNpb24gPSBkYkluZm8uZGIudmVyc2lvbjtcbiAgICB9XG5cbiAgICBpZiAoaXNVcGdyYWRlIHx8IGlzTmV3U3RvcmUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHN0b3JlIGlzIG5ldyB0aGVuIGluY3JlbWVudCB0aGUgdmVyc2lvbiAoaWYgbmVlZGVkKS5cbiAgICAgICAgLy8gVGhpcyB3aWxsIHRyaWdnZXIgYW4gXCJ1cGdyYWRlbmVlZGVkXCIgZXZlbnQgd2hpY2ggaXMgcmVxdWlyZWRcbiAgICAgICAgLy8gZm9yIGNyZWF0aW5nIGEgc3RvcmUuXG4gICAgICAgIGlmIChpc05ld1N0b3JlKSB7XG4gICAgICAgICAgICB2YXIgaW5jVmVyc2lvbiA9IGRiSW5mby5kYi52ZXJzaW9uICsgMTtcbiAgICAgICAgICAgIGlmIChpbmNWZXJzaW9uID4gZGJJbmZvLnZlcnNpb24pIHtcbiAgICAgICAgICAgICAgICBkYkluZm8udmVyc2lvbiA9IGluY1ZlcnNpb247XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIGVuY29kZSBhIGJsb2IgZm9yIGluZGV4ZWRkYiBlbmdpbmVzIHRoYXQgZG9uJ3Qgc3VwcG9ydCBibG9ic1xuZnVuY3Rpb24gX2VuY29kZUJsb2IoYmxvYikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG4gICAgICAgIHJlYWRlci5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBiYXNlNjQgPSBidG9hKGUudGFyZ2V0LnJlc3VsdCB8fCAnJyk7XG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBfX2xvY2FsX2ZvcmFnZV9lbmNvZGVkX2Jsb2I6IHRydWUsXG4gICAgICAgICAgICAgICAgZGF0YTogYmFzZTY0LFxuICAgICAgICAgICAgICAgIHR5cGU6IGJsb2IudHlwZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNCaW5hcnlTdHJpbmcoYmxvYik7XG4gICAgfSk7XG59XG5cbi8vIGRlY29kZSBhbiBlbmNvZGVkIGJsb2JcbmZ1bmN0aW9uIF9kZWNvZGVCbG9iKGVuY29kZWRCbG9iKSB7XG4gICAgdmFyIGFycmF5QnVmZiA9IF9iaW5TdHJpbmdUb0FycmF5QnVmZmVyKGF0b2IoZW5jb2RlZEJsb2IuZGF0YSkpO1xuICAgIHJldHVybiBjcmVhdGVCbG9iKFthcnJheUJ1ZmZdLCB7IHR5cGU6IGVuY29kZWRCbG9iLnR5cGUgfSk7XG59XG5cbi8vIGlzIHRoaXMgb25lIG9mIG91ciBmYW5jeSBlbmNvZGVkIGJsb2JzP1xuZnVuY3Rpb24gX2lzRW5jb2RlZEJsb2IodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgJiYgdmFsdWUuX19sb2NhbF9mb3JhZ2VfZW5jb2RlZF9ibG9iO1xufVxuXG4vLyBTcGVjaWFsaXplIHRoZSBkZWZhdWx0IGByZWFkeSgpYCBmdW5jdGlvbiBieSBtYWtpbmcgaXQgZGVwZW5kZW50XG4vLyBvbiB0aGUgY3VycmVudCBkYXRhYmFzZSBvcGVyYXRpb25zLiBUaHVzLCB0aGUgZHJpdmVyIHdpbGwgYmUgYWN0dWFsbHlcbi8vIHJlYWR5IHdoZW4gaXQncyBiZWVuIGluaXRpYWxpemVkIChkZWZhdWx0KSAqYW5kKiB0aGVyZSBhcmUgbm8gcGVuZGluZ1xuLy8gb3BlcmF0aW9ucyBvbiB0aGUgZGF0YWJhc2UgKGluaXRpYXRlZCBieSBzb21lIG90aGVyIGluc3RhbmNlcykuXG5mdW5jdGlvbiBfZnVsbHlSZWFkeShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5faW5pdFJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYkNvbnRleHQgPSBkYkNvbnRleHRzW3NlbGYuX2RiSW5mby5uYW1lXTtcblxuICAgICAgICBpZiAoZGJDb250ZXh0ICYmIGRiQ29udGV4dC5kYlJlYWR5KSB7XG4gICAgICAgICAgICByZXR1cm4gZGJDb250ZXh0LmRiUmVhZHk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGV4ZWN1dGVUd29DYWxsYmFja3MocHJvbWlzZSwgY2FsbGJhY2ssIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gVHJ5IHRvIGVzdGFibGlzaCBhIG5ldyBkYiBjb25uZWN0aW9uIHRvIHJlcGxhY2UgdGhlXG4vLyBjdXJyZW50IG9uZSB3aGljaCBpcyBicm9rZW4gKGkuZS4gZXhwZXJpZW5jaW5nXG4vLyBJbnZhbGlkU3RhdGVFcnJvciB3aGlsZSBjcmVhdGluZyBhIHRyYW5zYWN0aW9uKS5cbmZ1bmN0aW9uIF90cnlSZWNvbm5lY3QoZGJJbmZvKSB7XG4gICAgX2RlZmVyUmVhZGluZXNzKGRiSW5mbyk7XG5cbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG4gICAgdmFyIGZvcmFnZXMgPSBkYkNvbnRleHQuZm9yYWdlcztcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9yYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgZm9yYWdlID0gZm9yYWdlc1tpXTtcbiAgICAgICAgaWYgKGZvcmFnZS5fZGJJbmZvLmRiKSB7XG4gICAgICAgICAgICBmb3JhZ2UuX2RiSW5mby5kYi5jbG9zZSgpO1xuICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8uZGIgPSBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRiSW5mby5kYiA9IG51bGw7XG5cbiAgICByZXR1cm4gX2dldE9yaWdpbmFsQ29ubmVjdGlvbihkYkluZm8pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiO1xuICAgICAgICBpZiAoX2lzVXBncmFkZU5lZWRlZChkYkluZm8pKSB7XG4gICAgICAgICAgICAvLyBSZW9wZW4gdGhlIGRhdGFiYXNlIGZvciB1cGdyYWRpbmcuXG4gICAgICAgICAgICByZXR1cm4gX2dldFVwZ3JhZGVkQ29ubmVjdGlvbihkYkluZm8pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBkYjtcbiAgICB9KS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAvLyBzdG9yZSB0aGUgbGF0ZXN0IGRiIHJlZmVyZW5jZVxuICAgICAgICAvLyBpbiBjYXNlIHRoZSBkYiB3YXMgdXBncmFkZWRcbiAgICAgICAgZGJJbmZvLmRiID0gZGJDb250ZXh0LmRiID0gZGI7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9yYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZm9yYWdlc1tpXS5fZGJJbmZvLmRiID0gZGI7XG4gICAgICAgIH1cbiAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgX3JlamVjdFJlYWRpbmVzcyhkYkluZm8sIGVycik7XG4gICAgICAgIHRocm93IGVycjtcbiAgICB9KTtcbn1cblxuLy8gRkYgZG9lc24ndCBsaWtlIFByb21pc2VzIChtaWNyby10YXNrcykgYW5kIElEREIgc3RvcmUgb3BlcmF0aW9ucyxcbi8vIHNvIHdlIGhhdmUgdG8gZG8gaXQgd2l0aCBjYWxsYmFja3NcbmZ1bmN0aW9uIGNyZWF0ZVRyYW5zYWN0aW9uKGRiSW5mbywgbW9kZSwgY2FsbGJhY2ssIHJldHJpZXMpIHtcbiAgICBpZiAocmV0cmllcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHJpZXMgPSAxO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIHZhciB0eCA9IGRiSW5mby5kYi50cmFuc2FjdGlvbihkYkluZm8uc3RvcmVOYW1lLCBtb2RlKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgdHgpO1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICBpZiAocmV0cmllcyA+IDAgJiYgKCFkYkluZm8uZGIgfHwgZXJyLm5hbWUgPT09ICdJbnZhbGlkU3RhdGVFcnJvcicgfHwgZXJyLm5hbWUgPT09ICdOb3RGb3VuZEVycm9yJykpIHtcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlJDEucmVzb2x2ZSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGlmICghZGJJbmZvLmRiIHx8IGVyci5uYW1lID09PSAnTm90Rm91bmRFcnJvcicgJiYgIWRiSW5mby5kYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKGRiSW5mby5zdG9yZU5hbWUpICYmIGRiSW5mby52ZXJzaW9uIDw9IGRiSW5mby5kYi52ZXJzaW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGluY3JlYXNlIHRoZSBkYiB2ZXJzaW9uLCB0byBjcmVhdGUgdGhlIG5ldyBPYmplY3RTdG9yZVxuICAgICAgICAgICAgICAgICAgICBpZiAoZGJJbmZvLmRiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYkluZm8udmVyc2lvbiA9IGRiSW5mby5kYi52ZXJzaW9uICsgMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSZW9wZW4gdGhlIGRhdGFiYXNlIGZvciB1cGdyYWRpbmcuXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfZ2V0VXBncmFkZWRDb25uZWN0aW9uKGRiSW5mbyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIF90cnlSZWNvbm5lY3QoZGJJbmZvKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVHJhbnNhY3Rpb24oZGJJbmZvLCBtb2RlLCBjYWxsYmFjaywgcmV0cmllcyAtIDEpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSlbXCJjYXRjaFwiXShjYWxsYmFjayk7XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhlcnIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRGJDb250ZXh0KCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIC8vIFJ1bm5pbmcgbG9jYWxGb3JhZ2VzIHNoYXJpbmcgYSBkYXRhYmFzZS5cbiAgICAgICAgZm9yYWdlczogW10sXG4gICAgICAgIC8vIFNoYXJlZCBkYXRhYmFzZS5cbiAgICAgICAgZGI6IG51bGwsXG4gICAgICAgIC8vIERhdGFiYXNlIHJlYWRpbmVzcyAocHJvbWlzZSkuXG4gICAgICAgIGRiUmVhZHk6IG51bGwsXG4gICAgICAgIC8vIERlZmVycmVkIG9wZXJhdGlvbnMgb24gdGhlIGRhdGFiYXNlLlxuICAgICAgICBkZWZlcnJlZE9wZXJhdGlvbnM6IFtdXG4gICAgfTtcbn1cblxuLy8gT3BlbiB0aGUgSW5kZXhlZERCIGRhdGFiYXNlIChhdXRvbWF0aWNhbGx5IGNyZWF0ZXMgb25lIGlmIG9uZSBkaWRuJ3Rcbi8vIHByZXZpb3VzbHkgZXhpc3QpLCB1c2luZyBhbnkgb3B0aW9ucyBzZXQgaW4gdGhlIGNvbmZpZy5cbmZ1bmN0aW9uIF9pbml0U3RvcmFnZShvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7XG4gICAgICAgIGRiOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgZGJJbmZvW2ldID0gb3B0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgY3VycmVudCBjb250ZXh0IG9mIHRoZSBkYXRhYmFzZTtcbiAgICB2YXIgZGJDb250ZXh0ID0gZGJDb250ZXh0c1tkYkluZm8ubmFtZV07XG5cbiAgICAvLyAuLi5vciBjcmVhdGUgYSBuZXcgY29udGV4dC5cbiAgICBpZiAoIWRiQ29udGV4dCkge1xuICAgICAgICBkYkNvbnRleHQgPSBjcmVhdGVEYkNvbnRleHQoKTtcbiAgICAgICAgLy8gUmVnaXN0ZXIgdGhlIG5ldyBjb250ZXh0IGluIHRoZSBnbG9iYWwgY29udGFpbmVyLlxuICAgICAgICBkYkNvbnRleHRzW2RiSW5mby5uYW1lXSA9IGRiQ29udGV4dDtcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciBpdHNlbGYgYXMgYSBydW5uaW5nIGxvY2FsRm9yYWdlIGluIHRoZSBjdXJyZW50IGNvbnRleHQuXG4gICAgZGJDb250ZXh0LmZvcmFnZXMucHVzaChzZWxmKTtcblxuICAgIC8vIFJlcGxhY2UgdGhlIGRlZmF1bHQgYHJlYWR5KClgIGZ1bmN0aW9uIHdpdGggdGhlIHNwZWNpYWxpemVkIG9uZS5cbiAgICBpZiAoIXNlbGYuX2luaXRSZWFkeSkge1xuICAgICAgICBzZWxmLl9pbml0UmVhZHkgPSBzZWxmLnJlYWR5O1xuICAgICAgICBzZWxmLnJlYWR5ID0gX2Z1bGx5UmVhZHk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIGFuIGFycmF5IG9mIGluaXRpYWxpemF0aW9uIHN0YXRlcyBvZiB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgdmFyIGluaXRQcm9taXNlcyA9IFtdO1xuXG4gICAgZnVuY3Rpb24gaWdub3JlRXJyb3JzKCkge1xuICAgICAgICAvLyBEb24ndCBoYW5kbGUgZXJyb3JzIGhlcmUsXG4gICAgICAgIC8vIGp1c3QgbWFrZXMgc3VyZSByZWxhdGVkIGxvY2FsRm9yYWdlcyBhcmVuJ3QgcGVuZGluZy5cbiAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaiA9IDA7IGogPCBkYkNvbnRleHQuZm9yYWdlcy5sZW5ndGg7IGorKykge1xuICAgICAgICB2YXIgZm9yYWdlID0gZGJDb250ZXh0LmZvcmFnZXNbal07XG4gICAgICAgIGlmIChmb3JhZ2UgIT09IHNlbGYpIHtcbiAgICAgICAgICAgIC8vIERvbid0IHdhaXQgZm9yIGl0c2VsZi4uLlxuICAgICAgICAgICAgaW5pdFByb21pc2VzLnB1c2goZm9yYWdlLl9pbml0UmVhZHkoKVtcImNhdGNoXCJdKGlnbm9yZUVycm9ycykpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gVGFrZSBhIHNuYXBzaG90IG9mIHRoZSByZWxhdGVkIGxvY2FsRm9yYWdlcy5cbiAgICB2YXIgZm9yYWdlcyA9IGRiQ29udGV4dC5mb3JhZ2VzLnNsaWNlKDApO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSB0aGUgY29ubmVjdGlvbiBwcm9jZXNzIG9ubHkgd2hlblxuICAgIC8vIGFsbCB0aGUgcmVsYXRlZCBsb2NhbEZvcmFnZXMgYXJlbid0IHBlbmRpbmcuXG4gICAgcmV0dXJuIFByb21pc2UkMS5hbGwoaW5pdFByb21pc2VzKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGJJbmZvLmRiID0gZGJDb250ZXh0LmRiO1xuICAgICAgICAvLyBHZXQgdGhlIGNvbm5lY3Rpb24gb3Igb3BlbiBhIG5ldyBvbmUgd2l0aG91dCB1cGdyYWRlLlxuICAgICAgICByZXR1cm4gX2dldE9yaWdpbmFsQ29ubmVjdGlvbihkYkluZm8pO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiO1xuICAgICAgICBpZiAoX2lzVXBncmFkZU5lZWRlZChkYkluZm8sIHNlbGYuX2RlZmF1bHRDb25maWcudmVyc2lvbikpIHtcbiAgICAgICAgICAgIC8vIFJlb3BlbiB0aGUgZGF0YWJhc2UgZm9yIHVwZ3JhZGluZy5cbiAgICAgICAgICAgIHJldHVybiBfZ2V0VXBncmFkZWRDb25uZWN0aW9uKGRiSW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGRiO1xuICAgIH0pLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgIGRiSW5mby5kYiA9IGRiQ29udGV4dC5kYiA9IGRiO1xuICAgICAgICBzZWxmLl9kYkluZm8gPSBkYkluZm87XG4gICAgICAgIC8vIFNoYXJlIHRoZSBmaW5hbCBjb25uZWN0aW9uIGFtb25nc3QgcmVsYXRlZCBsb2NhbEZvcmFnZXMuXG4gICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgZm9yYWdlcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgdmFyIGZvcmFnZSA9IGZvcmFnZXNba107XG4gICAgICAgICAgICBpZiAoZm9yYWdlICE9PSBzZWxmKSB7XG4gICAgICAgICAgICAgICAgLy8gU2VsZiBpcyBhbHJlYWR5IHVwLXRvLWRhdGUuXG4gICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8uZGIgPSBkYkluZm8uZGI7XG4gICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8udmVyc2lvbiA9IGRiSW5mby52ZXJzaW9uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW0oa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGtleSA9IG5vcm1hbGl6ZUtleShrZXkpO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3JlYXRlVHJhbnNhY3Rpb24oc2VsZi5fZGJJbmZvLCBSRUFEX09OTFksIGZ1bmN0aW9uIChlcnIsIHRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc2VsZi5fZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5nZXQoa2V5KTtcblxuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc0VuY29kZWRCbG9iKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gX2RlY29kZUJsb2IodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gSXRlcmF0ZSBvdmVyIGFsbCBpdGVtcyBzdG9yZWQgaW4gZGF0YWJhc2UuXG5mdW5jdGlvbiBpdGVyYXRlKGl0ZXJhdG9yLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNyZWF0ZVRyYW5zYWN0aW9uKHNlbGYuX2RiSW5mbywgUkVBRF9PTkxZLCBmdW5jdGlvbiAoZXJyLCB0cmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuX2RiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbkN1cnNvcigpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgaXRlcmF0aW9uTnVtYmVyID0gMTtcblxuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJzb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBjdXJzb3IudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKF9pc0VuY29kZWRCbG9iKHZhbHVlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IF9kZWNvZGVCbG9iKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZXJhdG9yKHZhbHVlLCBjdXJzb3Iua2V5LCBpdGVyYXRpb25OdW1iZXIrKyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpdGVyYXRvciBjYWxsYmFjayByZXR1cm5zIGFueVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIChub24tYHVuZGVmaW5lZGApIHZhbHVlLCB0aGVuIHdlIHN0b3BcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgaXRlcmF0aW9uIGltbWVkaWF0ZWx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPT0gdm9pZCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3JbXCJjb250aW51ZVwiXSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gc2V0SXRlbShrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGtleSA9IG5vcm1hbGl6ZUtleShrZXkpO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgdmFyIGRiSW5mbztcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgaWYgKHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBCbG9iXScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2NoZWNrQmxvYlN1cHBvcnQoZGJJbmZvLmRiKS50aGVuKGZ1bmN0aW9uIChibG9iU3VwcG9ydCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoYmxvYlN1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2VuY29kZUJsb2IodmFsdWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgY3JlYXRlVHJhbnNhY3Rpb24oc2VsZi5fZGJJbmZvLCBSRUFEX1dSSVRFLCBmdW5jdGlvbiAoZXJyLCB0cmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuX2RiSW5mby5zdG9yZU5hbWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZWFzb24gd2UgZG9uJ3QgX3NhdmVfIG51bGwgaXMgYmVjYXVzZSBJRSAxMCBkb2VzXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdCBzdXBwb3J0IHNhdmluZyB0aGUgYG51bGxgIHR5cGUgaW4gSW5kZXhlZERCLiBIb3dcbiAgICAgICAgICAgICAgICAgICAgLy8gaXJvbmljLCBnaXZlbiB0aGUgYnVnIGJlbG93IVxuICAgICAgICAgICAgICAgICAgICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL2lzc3Vlcy8xNjFcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5wdXQodmFsdWUsIGtleSk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhc3QgdG8gdW5kZWZpbmVkIHNvIHRoZSB2YWx1ZSBwYXNzZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGxiYWNrL3Byb21pc2UgaXMgdGhlIHNhbWUgYXMgd2hhdCBvbmUgd291bGQgZ2V0IG91dFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb2YgYGdldEl0ZW0oKWAgbGF0ZXIuIFRoaXMgbGVhZHMgdG8gc29tZSB3ZWlyZG5lc3NcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIChzZXRJdGVtKCdmb28nLCB1bmRlZmluZWQpIHdpbGwgcmV0dXJuIGBudWxsYCksIGJ1dFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyBub3QgbXkgZmF1bHQgbG9jYWxTdG9yYWdlIGlzIG91ciBiYXNlbGluZSBhbmQgdGhhdFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaXQncyB3ZWlyZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25hYm9ydCA9IHRyYW5zYWN0aW9uLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyID0gcmVxLmVycm9yID8gcmVxLmVycm9yIDogcmVxLnRyYW5zYWN0aW9uLmVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUl0ZW0oa2V5LCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGtleSA9IG5vcm1hbGl6ZUtleShrZXkpO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3JlYXRlVHJhbnNhY3Rpb24oc2VsZi5fZGJJbmZvLCBSRUFEX1dSSVRFLCBmdW5jdGlvbiAoZXJyLCB0cmFuc2FjdGlvbikge1xuICAgICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yZSA9IHRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHNlbGYuX2RiSW5mby5zdG9yZU5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgYSBHcnVudCB0YXNrIHRvIG1ha2UgdGhpcyBzYWZlIGZvciBJRSBhbmQgc29tZVxuICAgICAgICAgICAgICAgICAgICAvLyB2ZXJzaW9ucyBvZiBBbmRyb2lkIChpbmNsdWRpbmcgdGhvc2UgdXNlZCBieSBDb3Jkb3ZhKS5cbiAgICAgICAgICAgICAgICAgICAgLy8gTm9ybWFsbHkgSUUgd29uJ3QgbGlrZSBgLmRlbGV0ZSgpYCBhbmQgd2lsbCBpbnNpc3Qgb25cbiAgICAgICAgICAgICAgICAgICAgLy8gdXNpbmcgYFsnZGVsZXRlJ10oKWAsIGJ1dCB3ZSBoYXZlIGEgYnVpbGQgc3RlcCB0aGF0XG4gICAgICAgICAgICAgICAgICAgIC8vIGZpeGVzIHRoaXMgZm9yIHVzIG5vdy5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlW1wiZGVsZXRlXCJdKGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zYWN0aW9uLm9uY29tcGxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZXF1ZXN0IHdpbGwgYmUgYWxzbyBiZSBhYm9ydGVkIGlmIHdlJ3ZlIGV4Y2VlZGVkIG91ciBzdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgIC8vIHNwYWNlLlxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVyciA9IHJlcS5lcnJvciA/IHJlcS5lcnJvciA6IHJlcS50cmFuc2FjdGlvbi5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBjbGVhcihjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNyZWF0ZVRyYW5zYWN0aW9uKHNlbGYuX2RiSW5mbywgUkVBRF9XUklURSwgZnVuY3Rpb24gKGVyciwgdHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzZWxmLl9kYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLmNsZWFyKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNhY3Rpb24ub25jb21wbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbi5vbmFib3J0ID0gdHJhbnNhY3Rpb24ub25lcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlcnIgPSByZXEuZXJyb3IgPyByZXEuZXJyb3IgOiByZXEudHJhbnNhY3Rpb24uZXJyb3I7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gbGVuZ3RoKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3JlYXRlVHJhbnNhY3Rpb24oc2VsZi5fZGJJbmZvLCBSRUFEX09OTFksIGZ1bmN0aW9uIChlcnIsIHRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc2VsZi5fZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBzdG9yZS5jb3VudCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlcS5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleShuLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGlmIChuIDwgMCkge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY3JlYXRlVHJhbnNhY3Rpb24oc2VsZi5fZGJJbmZvLCBSRUFEX09OTFksIGZ1bmN0aW9uIChlcnIsIHRyYW5zYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN0b3JlID0gdHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoc2VsZi5fZGJJbmZvLnN0b3JlTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhZHZhbmNlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gc3RvcmUub3BlbktleUN1cnNvcigpO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3Vyc29yID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBtZWFucyB0aGVyZSB3ZXJlbid0IGVub3VnaCBrZXlzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShudWxsKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG4gPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHRoZSBmaXJzdCBrZXksIHJldHVybiBpdCBpZiB0aGF0J3Mgd2hhdCB0aGV5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2FudGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYWR2YW5jZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBhc2sgdGhlIGN1cnNvciB0byBza2lwIGFoZWFkIG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjb3Jkcy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWR2YW5jZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3IuYWR2YW5jZShuKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaGVuIHdlIGdldCBoZXJlLCB3ZSd2ZSBnb3QgdGhlIG50aCBrZXkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoY3Vyc29yLmtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlcS5lcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleXMoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjcmVhdGVUcmFuc2FjdGlvbihzZWxmLl9kYkluZm8sIFJFQURfT05MWSwgZnVuY3Rpb24gKGVyciwgdHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmUgPSB0cmFuc2FjdGlvbi5vYmplY3RTdG9yZShzZWxmLl9kYkluZm8uc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcSA9IHN0b3JlLm9wZW5LZXlDdXJzb3IoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBbXTtcblxuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnNvciA9IHJlcS5yZXN1bHQ7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY3Vyc29yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShrZXlzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChjdXJzb3Iua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcltcImNvbnRpbnVlXCJdKCk7XG4gICAgICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QocmVxLmVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gZHJvcEluc3RhbmNlKG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gICAgY2FsbGJhY2sgPSBnZXRDYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXG4gICAgdmFyIGN1cnJlbnRDb25maWcgPSB0aGlzLmNvbmZpZygpO1xuICAgIG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyAhPT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zIHx8IHt9O1xuICAgIGlmICghb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgIG9wdGlvbnMubmFtZSA9IG9wdGlvbnMubmFtZSB8fCBjdXJyZW50Q29uZmlnLm5hbWU7XG4gICAgICAgIG9wdGlvbnMuc3RvcmVOYW1lID0gb3B0aW9ucy5zdG9yZU5hbWUgfHwgY3VycmVudENvbmZpZy5zdG9yZU5hbWU7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlO1xuICAgIGlmICghb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlJDEucmVqZWN0KCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBpc0N1cnJlbnREYiA9IG9wdGlvbnMubmFtZSA9PT0gY3VycmVudENvbmZpZy5uYW1lICYmIHNlbGYuX2RiSW5mby5kYjtcblxuICAgICAgICB2YXIgZGJQcm9taXNlID0gaXNDdXJyZW50RGIgPyBQcm9taXNlJDEucmVzb2x2ZShzZWxmLl9kYkluZm8uZGIpIDogX2dldE9yaWdpbmFsQ29ubmVjdGlvbihvcHRpb25zKS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAgICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbb3B0aW9ucy5uYW1lXTtcbiAgICAgICAgICAgIHZhciBmb3JhZ2VzID0gZGJDb250ZXh0LmZvcmFnZXM7XG4gICAgICAgICAgICBkYkNvbnRleHQuZGIgPSBkYjtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9yYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZvcmFnZXNbaV0uX2RiSW5mby5kYiA9IGRiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGRiO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoIW9wdGlvbnMuc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICBwcm9taXNlID0gZGJQcm9taXNlLnRoZW4oZnVuY3Rpb24gKGRiKSB7XG4gICAgICAgICAgICAgICAgX2RlZmVyUmVhZGluZXNzKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbb3B0aW9ucy5uYW1lXTtcbiAgICAgICAgICAgICAgICB2YXIgZm9yYWdlcyA9IGRiQ29udGV4dC5mb3JhZ2VzO1xuXG4gICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcmFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcmFnZSA9IGZvcmFnZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGZvcmFnZS5fZGJJbmZvLmRiID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZHJvcERCUHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxID0gaWRiLmRlbGV0ZURhdGFiYXNlKG9wdGlvbnMubmFtZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGIgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChyZXEuZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmJsb2NrZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbG9zaW5nIGFsbCBvcGVuIGNvbm5lY3Rpb25zIGluIG9udmVyc2lvbmNoYW5nZSBoYW5kbGVyIHNob3VsZCBwcmV2ZW50IHRoaXMgc2l0dWF0aW9uLCBidXQgaWZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIGRvIGdldCBoZXJlLCBpdCBqdXN0IG1lYW5zIHRoZSByZXF1ZXN0IHJlbWFpbnMgcGVuZGluZyAtIGV2ZW50dWFsbHkgaXQgd2lsbCBzdWNjZWVkIG9yIGVycm9yXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ2Ryb3BJbnN0YW5jZSBibG9ja2VkIGZvciBkYXRhYmFzZSBcIicgKyBvcHRpb25zLm5hbWUgKyAnXCIgdW50aWwgYWxsIG9wZW4gY29ubmVjdGlvbnMgYXJlIGNsb3NlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbnN1Y2Nlc3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGIgPSByZXEucmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGIpO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIGRyb3BEQlByb21pc2UudGhlbihmdW5jdGlvbiAoZGIpIHtcbiAgICAgICAgICAgICAgICAgICAgZGJDb250ZXh0LmRiID0gZGI7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZm9yYWdlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIF9mb3JhZ2UgPSBmb3JhZ2VzW2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkdmFuY2VSZWFkaW5lc3MoX2ZvcmFnZS5fZGJJbmZvKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAoX3JlamVjdFJlYWRpbmVzcyhvcHRpb25zLCBlcnIpIHx8IFByb21pc2UkMS5yZXNvbHZlKCkpW1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge30pO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlcnI7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHByb21pc2UgPSBkYlByb21pc2UudGhlbihmdW5jdGlvbiAoZGIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMob3B0aW9ucy5zdG9yZU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV3VmVyc2lvbiA9IGRiLnZlcnNpb24gKyAxO1xuXG4gICAgICAgICAgICAgICAgX2RlZmVyUmVhZGluZXNzKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRiQ29udGV4dCA9IGRiQ29udGV4dHNbb3B0aW9ucy5uYW1lXTtcbiAgICAgICAgICAgICAgICB2YXIgZm9yYWdlcyA9IGRiQ29udGV4dC5mb3JhZ2VzO1xuXG4gICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZvcmFnZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZvcmFnZSA9IGZvcmFnZXNbaV07XG4gICAgICAgICAgICAgICAgICAgIGZvcmFnZS5fZGJJbmZvLmRiID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgZm9yYWdlLl9kYkluZm8udmVyc2lvbiA9IG5ld1ZlcnNpb247XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGRyb3BPYmplY3RQcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXEgPSBpZGIub3BlbihvcHRpb25zLm5hbWUsIG5ld1ZlcnNpb24pO1xuXG4gICAgICAgICAgICAgICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRiID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICByZXEub251cGdyYWRlbmVlZGVkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRiID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmRlbGV0ZU9iamVjdFN0b3JlKG9wdGlvbnMuc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICByZXEub25zdWNjZXNzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRiID0gcmVxLnJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRiKTtcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkcm9wT2JqZWN0UHJvbWlzZS50aGVuKGZ1bmN0aW9uIChkYikge1xuICAgICAgICAgICAgICAgICAgICBkYkNvbnRleHQuZGIgPSBkYjtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmb3JhZ2VzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2ZvcmFnZTIgPSBmb3JhZ2VzW2pdO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ZvcmFnZTIuX2RiSW5mby5kYiA9IGRiO1xuICAgICAgICAgICAgICAgICAgICAgICAgX2FkdmFuY2VSZWFkaW5lc3MoX2ZvcmFnZTIuX2RiSW5mbyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVtcImNhdGNoXCJdKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgKF9yZWplY3RSZWFkaW5lc3Mob3B0aW9ucywgZXJyKSB8fCBQcm9taXNlJDEucmVzb2x2ZSgpKVtcImNhdGNoXCJdKGZ1bmN0aW9uICgpIHt9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgYXN5bmNTdG9yYWdlID0ge1xuICAgIF9kcml2ZXI6ICdhc3luY1N0b3JhZ2UnLFxuICAgIF9pbml0U3RvcmFnZTogX2luaXRTdG9yYWdlLFxuICAgIF9zdXBwb3J0OiBpc0luZGV4ZWREQlZhbGlkKCksXG4gICAgaXRlcmF0ZTogaXRlcmF0ZSxcbiAgICBnZXRJdGVtOiBnZXRJdGVtLFxuICAgIHNldEl0ZW06IHNldEl0ZW0sXG4gICAgcmVtb3ZlSXRlbTogcmVtb3ZlSXRlbSxcbiAgICBjbGVhcjogY2xlYXIsXG4gICAgbGVuZ3RoOiBsZW5ndGgsXG4gICAga2V5OiBrZXksXG4gICAga2V5czoga2V5cyxcbiAgICBkcm9wSW5zdGFuY2U6IGRyb3BJbnN0YW5jZVxufTtcblxuZnVuY3Rpb24gaXNXZWJTUUxWYWxpZCgpIHtcbiAgICByZXR1cm4gdHlwZW9mIG9wZW5EYXRhYmFzZSA9PT0gJ2Z1bmN0aW9uJztcbn1cblxuLy8gU2FkbHksIHRoZSBiZXN0IHdheSB0byBzYXZlIGJpbmFyeSBkYXRhIGluIFdlYlNRTC9sb2NhbFN0b3JhZ2UgaXMgc2VyaWFsaXppbmdcbi8vIGl0IHRvIEJhc2U2NCwgc28gdGhpcyBpcyBob3cgd2Ugc3RvcmUgaXQgdG8gcHJldmVudCB2ZXJ5IHN0cmFuZ2UgZXJyb3JzIHdpdGggbGVzc1xuLy8gdmVyYm9zZSB3YXlzIG9mIGJpbmFyeSA8LT4gc3RyaW5nIGRhdGEgc3RvcmFnZS5cbnZhciBCQVNFX0NIQVJTID0gJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky8nO1xuXG52YXIgQkxPQl9UWVBFX1BSRUZJWCA9ICd+fmxvY2FsX2ZvcmFnZV90eXBlfic7XG52YXIgQkxPQl9UWVBFX1BSRUZJWF9SRUdFWCA9IC9efn5sb2NhbF9mb3JhZ2VfdHlwZX4oW15+XSspfi87XG5cbnZhciBTRVJJQUxJWkVEX01BUktFUiA9ICdfX2xmc2NfXzonO1xudmFyIFNFUklBTElaRURfTUFSS0VSX0xFTkdUSCA9IFNFUklBTElaRURfTUFSS0VSLmxlbmd0aDtcblxuLy8gT01HIHRoZSBzZXJpYWxpemF0aW9ucyFcbnZhciBUWVBFX0FSUkFZQlVGRkVSID0gJ2FyYmYnO1xudmFyIFRZUEVfQkxPQiA9ICdibG9iJztcbnZhciBUWVBFX0lOVDhBUlJBWSA9ICdzaTA4JztcbnZhciBUWVBFX1VJTlQ4QVJSQVkgPSAndWkwOCc7XG52YXIgVFlQRV9VSU5UOENMQU1QRURBUlJBWSA9ICd1aWM4JztcbnZhciBUWVBFX0lOVDE2QVJSQVkgPSAnc2kxNic7XG52YXIgVFlQRV9JTlQzMkFSUkFZID0gJ3NpMzInO1xudmFyIFRZUEVfVUlOVDE2QVJSQVkgPSAndXIxNic7XG52YXIgVFlQRV9VSU5UMzJBUlJBWSA9ICd1aTMyJztcbnZhciBUWVBFX0ZMT0FUMzJBUlJBWSA9ICdmbDMyJztcbnZhciBUWVBFX0ZMT0FUNjRBUlJBWSA9ICdmbDY0JztcbnZhciBUWVBFX1NFUklBTElaRURfTUFSS0VSX0xFTkdUSCA9IFNFUklBTElaRURfTUFSS0VSX0xFTkdUSCArIFRZUEVfQVJSQVlCVUZGRVIubGVuZ3RoO1xuXG52YXIgdG9TdHJpbmckMSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHN0cmluZ1RvQnVmZmVyKHNlcmlhbGl6ZWRTdHJpbmcpIHtcbiAgICAvLyBGaWxsIHRoZSBzdHJpbmcgaW50byBhIEFycmF5QnVmZmVyLlxuICAgIHZhciBidWZmZXJMZW5ndGggPSBzZXJpYWxpemVkU3RyaW5nLmxlbmd0aCAqIDAuNzU7XG4gICAgdmFyIGxlbiA9IHNlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoO1xuICAgIHZhciBpO1xuICAgIHZhciBwID0gMDtcbiAgICB2YXIgZW5jb2RlZDEsIGVuY29kZWQyLCBlbmNvZGVkMywgZW5jb2RlZDQ7XG5cbiAgICBpZiAoc2VyaWFsaXplZFN0cmluZ1tzZXJpYWxpemVkU3RyaW5nLmxlbmd0aCAtIDFdID09PSAnPScpIHtcbiAgICAgICAgYnVmZmVyTGVuZ3RoLS07XG4gICAgICAgIGlmIChzZXJpYWxpemVkU3RyaW5nW3NlcmlhbGl6ZWRTdHJpbmcubGVuZ3RoIC0gMl0gPT09ICc9Jykge1xuICAgICAgICAgICAgYnVmZmVyTGVuZ3RoLS07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB2YXIgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKGJ1ZmZlckxlbmd0aCk7XG4gICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYnVmZmVyKTtcblxuICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgICAgICBlbmNvZGVkMSA9IEJBU0VfQ0hBUlMuaW5kZXhPZihzZXJpYWxpemVkU3RyaW5nW2ldKTtcbiAgICAgICAgZW5jb2RlZDIgPSBCQVNFX0NIQVJTLmluZGV4T2Yoc2VyaWFsaXplZFN0cmluZ1tpICsgMV0pO1xuICAgICAgICBlbmNvZGVkMyA9IEJBU0VfQ0hBUlMuaW5kZXhPZihzZXJpYWxpemVkU3RyaW5nW2kgKyAyXSk7XG4gICAgICAgIGVuY29kZWQ0ID0gQkFTRV9DSEFSUy5pbmRleE9mKHNlcmlhbGl6ZWRTdHJpbmdbaSArIDNdKTtcblxuICAgICAgICAvKmpzbGludCBiaXR3aXNlOiB0cnVlICovXG4gICAgICAgIGJ5dGVzW3ArK10gPSBlbmNvZGVkMSA8PCAyIHwgZW5jb2RlZDIgPj4gNDtcbiAgICAgICAgYnl0ZXNbcCsrXSA9IChlbmNvZGVkMiAmIDE1KSA8PCA0IHwgZW5jb2RlZDMgPj4gMjtcbiAgICAgICAgYnl0ZXNbcCsrXSA9IChlbmNvZGVkMyAmIDMpIDw8IDYgfCBlbmNvZGVkNCAmIDYzO1xuICAgIH1cbiAgICByZXR1cm4gYnVmZmVyO1xufVxuXG4vLyBDb252ZXJ0cyBhIGJ1ZmZlciB0byBhIHN0cmluZyB0byBzdG9yZSwgc2VyaWFsaXplZCwgaW4gdGhlIGJhY2tlbmRcbi8vIHN0b3JhZ2UgbGlicmFyeS5cbmZ1bmN0aW9uIGJ1ZmZlclRvU3RyaW5nKGJ1ZmZlcikge1xuICAgIC8vIGJhc2U2NC1hcnJheWJ1ZmZlclxuICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgdmFyIGJhc2U2NFN0cmluZyA9ICcnO1xuICAgIHZhciBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICAgIC8qanNsaW50IGJpdHdpc2U6IHRydWUgKi9cbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbYnl0ZXNbaV0gPj4gMl07XG4gICAgICAgIGJhc2U2NFN0cmluZyArPSBCQVNFX0NIQVJTWyhieXRlc1tpXSAmIDMpIDw8IDQgfCBieXRlc1tpICsgMV0gPj4gNF07XG4gICAgICAgIGJhc2U2NFN0cmluZyArPSBCQVNFX0NIQVJTWyhieXRlc1tpICsgMV0gJiAxNSkgPDwgMiB8IGJ5dGVzW2kgKyAyXSA+PiA2XTtcbiAgICAgICAgYmFzZTY0U3RyaW5nICs9IEJBU0VfQ0hBUlNbYnl0ZXNbaSArIDJdICYgNjNdO1xuICAgIH1cblxuICAgIGlmIChieXRlcy5sZW5ndGggJSAzID09PSAyKSB7XG4gICAgICAgIGJhc2U2NFN0cmluZyA9IGJhc2U2NFN0cmluZy5zdWJzdHJpbmcoMCwgYmFzZTY0U3RyaW5nLmxlbmd0aCAtIDEpICsgJz0nO1xuICAgIH0gZWxzZSBpZiAoYnl0ZXMubGVuZ3RoICUgMyA9PT0gMSkge1xuICAgICAgICBiYXNlNjRTdHJpbmcgPSBiYXNlNjRTdHJpbmcuc3Vic3RyaW5nKDAsIGJhc2U2NFN0cmluZy5sZW5ndGggLSAyKSArICc9PSc7XG4gICAgfVxuXG4gICAgcmV0dXJuIGJhc2U2NFN0cmluZztcbn1cblxuLy8gU2VyaWFsaXplIGEgdmFsdWUsIGFmdGVyd2FyZHMgZXhlY3V0aW5nIGEgY2FsbGJhY2sgKHdoaWNoIHVzdWFsbHlcbi8vIGluc3RydWN0cyB0aGUgYHNldEl0ZW0oKWAgY2FsbGJhY2svcHJvbWlzZSB0byBiZSBleGVjdXRlZCkuIFRoaXMgaXMgaG93XG4vLyB3ZSBzdG9yZSBiaW5hcnkgZGF0YSB3aXRoIGxvY2FsU3RvcmFnZS5cbmZ1bmN0aW9uIHNlcmlhbGl6ZSh2YWx1ZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgdmFsdWVUeXBlID0gJyc7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHZhbHVlVHlwZSA9IHRvU3RyaW5nJDEuY2FsbCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gQ2Fubm90IHVzZSBgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcmAgb3Igc3VjaCBoZXJlLCBhcyB0aGVzZVxuICAgIC8vIGNoZWNrcyBmYWlsIHdoZW4gcnVubmluZyB0aGUgdGVzdHMgdXNpbmcgY2FzcGVyLmpzLi4uXG4gICAgLy9cbiAgICAvLyBUT0RPOiBTZWUgd2h5IHRob3NlIHRlc3RzIGZhaWwgYW5kIHVzZSBhIGJldHRlciBzb2x1dGlvbi5cbiAgICBpZiAodmFsdWUgJiYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyB8fCB2YWx1ZS5idWZmZXIgJiYgdG9TdHJpbmckMS5jYWxsKHZhbHVlLmJ1ZmZlcikgPT09ICdbb2JqZWN0IEFycmF5QnVmZmVyXScpKSB7XG4gICAgICAgIC8vIENvbnZlcnQgYmluYXJ5IGFycmF5cyB0byBhIHN0cmluZyBhbmQgcHJlZml4IHRoZSBzdHJpbmcgd2l0aFxuICAgICAgICAvLyBhIHNwZWNpYWwgbWFya2VyLlxuICAgICAgICB2YXIgYnVmZmVyO1xuICAgICAgICB2YXIgbWFya2VyID0gU0VSSUFMSVpFRF9NQVJLRVI7XG5cbiAgICAgICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICAgIGJ1ZmZlciA9IHZhbHVlO1xuICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfQVJSQVlCVUZGRVI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBidWZmZXIgPSB2YWx1ZS5idWZmZXI7XG5cbiAgICAgICAgICAgIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEludDhBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfSU5UOEFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IFVpbnQ4QXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQ4QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQ4Q0xBTVBFREFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEludDE2QXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX0lOVDE2QVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDE2QXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQxNkFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEludDMyQXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX0lOVDMyQVJSQVk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgVWludDMyQXJyYXldJykge1xuICAgICAgICAgICAgICAgIG1hcmtlciArPSBUWVBFX1VJTlQzMkFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfRkxPQVQzMkFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZVR5cGUgPT09ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nKSB7XG4gICAgICAgICAgICAgICAgbWFya2VyICs9IFRZUEVfRkxPQVQ2NEFSUkFZO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoJ0ZhaWxlZCB0byBnZXQgdHlwZSBmb3IgQmluYXJ5QXJyYXknKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjYWxsYmFjayhtYXJrZXIgKyBidWZmZXJUb1N0cmluZyhidWZmZXIpKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ1tvYmplY3QgQmxvYl0nKSB7XG4gICAgICAgIC8vIENvbnZlciB0aGUgYmxvYiB0byBhIGJpbmFyeUFycmF5IGFuZCB0aGVuIHRvIGEgc3RyaW5nLlxuICAgICAgICB2YXIgZmlsZVJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XG5cbiAgICAgICAgZmlsZVJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBCYWNrd2FyZHMtY29tcGF0aWJsZSBwcmVmaXggZm9yIHRoZSBibG9iIHR5cGUuXG4gICAgICAgICAgICB2YXIgc3RyID0gQkxPQl9UWVBFX1BSRUZJWCArIHZhbHVlLnR5cGUgKyAnficgKyBidWZmZXJUb1N0cmluZyh0aGlzLnJlc3VsdCk7XG5cbiAgICAgICAgICAgIGNhbGxiYWNrKFNFUklBTElaRURfTUFSS0VSICsgVFlQRV9CTE9CICsgc3RyKTtcbiAgICAgICAgfTtcblxuICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY2FsbGJhY2soSlNPTi5zdHJpbmdpZnkodmFsdWUpKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkNvdWxkbid0IGNvbnZlcnQgdmFsdWUgaW50byBhIEpTT04gc3RyaW5nOiBcIiwgdmFsdWUpO1xuXG4gICAgICAgICAgICBjYWxsYmFjayhudWxsLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gRGVzZXJpYWxpemUgZGF0YSB3ZSd2ZSBpbnNlcnRlZCBpbnRvIGEgdmFsdWUgY29sdW1uL2ZpZWxkLiBXZSBwbGFjZVxuLy8gc3BlY2lhbCBtYXJrZXJzIGludG8gb3VyIHN0cmluZ3MgdG8gbWFyayB0aGVtIGFzIGVuY29kZWQ7IHRoaXMgaXNuJ3Rcbi8vIGFzIG5pY2UgYXMgYSBtZXRhIGZpZWxkLCBidXQgaXQncyB0aGUgb25seSBzYW5lIHRoaW5nIHdlIGNhbiBkbyB3aGlsc3Rcbi8vIGtlZXBpbmcgbG9jYWxTdG9yYWdlIHN1cHBvcnQgaW50YWN0LlxuLy9cbi8vIE9mdGVudGltZXMgdGhpcyB3aWxsIGp1c3QgZGVzZXJpYWxpemUgSlNPTiBjb250ZW50LCBidXQgaWYgd2UgaGF2ZSBhXG4vLyBzcGVjaWFsIG1hcmtlciAoU0VSSUFMSVpFRF9NQVJLRVIsIGRlZmluZWQgYWJvdmUpLCB3ZSB3aWxsIGV4dHJhY3Rcbi8vIHNvbWUga2luZCBvZiBhcnJheWJ1ZmZlci9iaW5hcnkgZGF0YS90eXBlZCBhcnJheSBvdXQgb2YgdGhlIHN0cmluZy5cbmZ1bmN0aW9uIGRlc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgLy8gSWYgd2UgaGF2ZW4ndCBtYXJrZWQgdGhpcyBzdHJpbmcgYXMgYmVpbmcgc3BlY2lhbGx5IHNlcmlhbGl6ZWQgKGkuZS5cbiAgICAvLyBzb21ldGhpbmcgb3RoZXIgdGhhbiBzZXJpYWxpemVkIEpTT04pLCB3ZSBjYW4ganVzdCByZXR1cm4gaXQgYW5kIGJlXG4gICAgLy8gZG9uZSB3aXRoIGl0LlxuICAgIGlmICh2YWx1ZS5zdWJzdHJpbmcoMCwgU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RIKSAhPT0gU0VSSUFMSVpFRF9NQVJLRVIpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgIH1cblxuICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBkZWFscyB3aXRoIGRlc2VyaWFsaXppbmcgc29tZSBraW5kIG9mIEJsb2Igb3JcbiAgICAvLyBUeXBlZEFycmF5LiBGaXJzdCB3ZSBzZXBhcmF0ZSBvdXQgdGhlIHR5cGUgb2YgZGF0YSB3ZSdyZSBkZWFsaW5nXG4gICAgLy8gd2l0aCBmcm9tIHRoZSBkYXRhIGl0c2VsZi5cbiAgICB2YXIgc2VyaWFsaXplZFN0cmluZyA9IHZhbHVlLnN1YnN0cmluZyhUWVBFX1NFUklBTElaRURfTUFSS0VSX0xFTkdUSCk7XG4gICAgdmFyIHR5cGUgPSB2YWx1ZS5zdWJzdHJpbmcoU0VSSUFMSVpFRF9NQVJLRVJfTEVOR1RILCBUWVBFX1NFUklBTElaRURfTUFSS0VSX0xFTkdUSCk7XG5cbiAgICB2YXIgYmxvYlR5cGU7XG4gICAgLy8gQmFja3dhcmRzLWNvbXBhdGlibGUgYmxvYiB0eXBlIHNlcmlhbGl6YXRpb24gc3RyYXRlZ3kuXG4gICAgLy8gREJzIGNyZWF0ZWQgd2l0aCBvbGRlciB2ZXJzaW9ucyBvZiBsb2NhbEZvcmFnZSB3aWxsIHNpbXBseSBub3QgaGF2ZSB0aGUgYmxvYiB0eXBlLlxuICAgIGlmICh0eXBlID09PSBUWVBFX0JMT0IgJiYgQkxPQl9UWVBFX1BSRUZJWF9SRUdFWC50ZXN0KHNlcmlhbGl6ZWRTdHJpbmcpKSB7XG4gICAgICAgIHZhciBtYXRjaGVyID0gc2VyaWFsaXplZFN0cmluZy5tYXRjaChCTE9CX1RZUEVfUFJFRklYX1JFR0VYKTtcbiAgICAgICAgYmxvYlR5cGUgPSBtYXRjaGVyWzFdO1xuICAgICAgICBzZXJpYWxpemVkU3RyaW5nID0gc2VyaWFsaXplZFN0cmluZy5zdWJzdHJpbmcobWF0Y2hlclswXS5sZW5ndGgpO1xuICAgIH1cbiAgICB2YXIgYnVmZmVyID0gc3RyaW5nVG9CdWZmZXIoc2VyaWFsaXplZFN0cmluZyk7XG5cbiAgICAvLyBSZXR1cm4gdGhlIHJpZ2h0IHR5cGUgYmFzZWQgb24gdGhlIGNvZGUvdHlwZSBzZXQgZHVyaW5nXG4gICAgLy8gc2VyaWFsaXphdGlvbi5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBUWVBFX0FSUkFZQlVGRkVSOlxuICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcjtcbiAgICAgICAgY2FzZSBUWVBFX0JMT0I6XG4gICAgICAgICAgICByZXR1cm4gY3JlYXRlQmxvYihbYnVmZmVyXSwgeyB0eXBlOiBibG9iVHlwZSB9KTtcbiAgICAgICAgY2FzZSBUWVBFX0lOVDhBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9VSU5UOEFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50OEFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9VSU5UOENMQU1QRURBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgVWludDhDbGFtcGVkQXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX0lOVDE2QVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEludDE2QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgY2FzZSBUWVBFX1VJTlQxNkFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfSU5UMzJBUlJBWTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfVUlOVDMyQVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KGJ1ZmZlcik7XG4gICAgICAgIGNhc2UgVFlQRV9GTE9BVDMyQVJSQVk6XG4gICAgICAgICAgICByZXR1cm4gbmV3IEZsb2F0MzJBcnJheShidWZmZXIpO1xuICAgICAgICBjYXNlIFRZUEVfRkxPQVQ2NEFSUkFZOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkoYnVmZmVyKTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5rb3duIHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9XG59XG5cbnZhciBsb2NhbGZvcmFnZVNlcmlhbGl6ZXIgPSB7XG4gICAgc2VyaWFsaXplOiBzZXJpYWxpemUsXG4gICAgZGVzZXJpYWxpemU6IGRlc2VyaWFsaXplLFxuICAgIHN0cmluZ1RvQnVmZmVyOiBzdHJpbmdUb0J1ZmZlcixcbiAgICBidWZmZXJUb1N0cmluZzogYnVmZmVyVG9TdHJpbmdcbn07XG5cbi8qXG4gKiBJbmNsdWRlcyBjb2RlIGZyb206XG4gKlxuICogYmFzZTY0LWFycmF5YnVmZmVyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vbmlrbGFzdmgvYmFzZTY0LWFycmF5YnVmZmVyXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDEyIE5pa2xhcyB2b24gSGVydHplblxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLlxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZURiVGFibGUodCwgZGJJbmZvLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgIHQuZXhlY3V0ZVNxbCgnQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgJyArIGRiSW5mby5zdG9yZU5hbWUgKyAnICcgKyAnKGlkIElOVEVHRVIgUFJJTUFSWSBLRVksIGtleSB1bmlxdWUsIHZhbHVlKScsIFtdLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG59XG5cbi8vIE9wZW4gdGhlIFdlYlNRTCBkYXRhYmFzZSAoYXV0b21hdGljYWxseSBjcmVhdGVzIG9uZSBpZiBvbmUgZGlkbid0XG4vLyBwcmV2aW91c2x5IGV4aXN0KSwgdXNpbmcgYW55IG9wdGlvbnMgc2V0IGluIHRoZSBjb25maWcuXG5mdW5jdGlvbiBfaW5pdFN0b3JhZ2UkMShvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7XG4gICAgICAgIGRiOiBudWxsXG4gICAgfTtcblxuICAgIGlmIChvcHRpb25zKSB7XG4gICAgICAgIGZvciAodmFyIGkgaW4gb3B0aW9ucykge1xuICAgICAgICAgICAgZGJJbmZvW2ldID0gdHlwZW9mIG9wdGlvbnNbaV0gIT09ICdzdHJpbmcnID8gb3B0aW9uc1tpXS50b1N0cmluZygpIDogb3B0aW9uc1tpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHZhciBkYkluZm9Qcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIC8vIE9wZW4gdGhlIGRhdGFiYXNlOyB0aGUgb3BlbkRhdGFiYXNlIEFQSSB3aWxsIGF1dG9tYXRpY2FsbHlcbiAgICAgICAgLy8gY3JlYXRlIGl0IGZvciB1cyBpZiBpdCBkb2Vzbid0IGV4aXN0LlxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgZGJJbmZvLmRiID0gb3BlbkRhdGFiYXNlKGRiSW5mby5uYW1lLCBTdHJpbmcoZGJJbmZvLnZlcnNpb24pLCBkYkluZm8uZGVzY3JpcHRpb24sIGRiSW5mby5zaXplKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIHJlamVjdChlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0ZSBvdXIga2V5L3ZhbHVlIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3QuXG4gICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgY3JlYXRlRGJUYWJsZSh0LCBkYkluZm8sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzZWxmLl9kYkluZm8gPSBkYkluZm87XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCByZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZGJJbmZvLnNlcmlhbGl6ZXIgPSBsb2NhbGZvcmFnZVNlcmlhbGl6ZXI7XG4gICAgcmV0dXJuIGRiSW5mb1Byb21pc2U7XG59XG5cbmZ1bmN0aW9uIHRyeUV4ZWN1dGVTcWwodCwgZGJJbmZvLCBzcWxTdGF0ZW1lbnQsIGFyZ3MsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKSB7XG4gICAgdC5leGVjdXRlU3FsKHNxbFN0YXRlbWVudCwgYXJncywgY2FsbGJhY2ssIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gZXJyb3IuU1lOVEFYX0VSUikge1xuICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgJyArIFwiV0hFUkUgdHlwZT0ndGFibGUnIEFORCBuYW1lID0gP1wiLCBbZGJJbmZvLnN0b3JlTmFtZV0sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXN1bHRzLnJvd3MubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZSB0YWJsZSBpcyBtaXNzaW5nICh3YXMgZGVsZXRlZClcbiAgICAgICAgICAgICAgICAgICAgLy8gcmUtY3JlYXRlIGl0IHRhYmxlIGFuZCByZXRyeVxuICAgICAgICAgICAgICAgICAgICBjcmVhdGVEYlRhYmxlKHQsIGRiSW5mbywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5leGVjdXRlU3FsKHNxbFN0YXRlbWVudCwgYXJncywgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgICAgICAgICB9LCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrKHQsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVycm9yQ2FsbGJhY2sodCwgZXJyb3IpO1xuICAgICAgICB9XG4gICAgfSwgZXJyb3JDYWxsYmFjayk7XG59XG5cbmZ1bmN0aW9uIGdldEl0ZW0kMShrZXksIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAga2V5ID0gbm9ybWFsaXplS2V5KGtleSk7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLmRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgdHJ5RXhlY3V0ZVNxbCh0LCBkYkluZm8sICdTRUxFQ1QgKiBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyBXSEVSRSBrZXkgPSA/IExJTUlUIDEnLCBba2V5XSwgZnVuY3Rpb24gKHQsIHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlc3VsdHMucm93cy5sZW5ndGggPyByZXN1bHRzLnJvd3MuaXRlbSgwKS52YWx1ZSA6IG51bGw7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHRoaXMgaXMgc2VyaWFsaXplZCBjb250ZW50IHdlIG5lZWQgdG9cbiAgICAgICAgICAgICAgICAgICAgLy8gdW5wYWNrLlxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSBkYkluZm8uc2VyaWFsaXplci5kZXNlcmlhbGl6ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGl0ZXJhdGUkMShpdGVyYXRvciwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuXG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0cnlFeGVjdXRlU3FsKHQsIGRiSW5mbywgJ1NFTEVDVCAqIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUsIFtdLCBmdW5jdGlvbiAodCwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcm93cyA9IHJlc3VsdHMucm93cztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGxlbmd0aCA9IHJvd3MubGVuZ3RoO1xuXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpdGVtID0gcm93cy5pdGVtKGkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGl0ZW0udmFsdWU7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGlzIGlzIHNlcmlhbGl6ZWQgY29udGVudFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byB1bnBhY2suXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gaXRlcmF0b3IocmVzdWx0LCBpdGVtLmtleSwgaSArIDEpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB2b2lkKDApIHByZXZlbnRzIHByb2JsZW1zIHdpdGggcmVkZWZpbml0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvZiBgdW5kZWZpbmVkYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgIT09IHZvaWQgMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gX3NldEl0ZW0oa2V5LCB2YWx1ZSwgY2FsbGJhY2ssIHJldHJpZXNMZWZ0KSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAga2V5ID0gbm9ybWFsaXplS2V5KGtleSk7XG5cbiAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBUaGUgbG9jYWxTdG9yYWdlIEFQSSBkb2Vzbid0IHJldHVybiB1bmRlZmluZWQgdmFsdWVzIGluIGFuXG4gICAgICAgICAgICAvLyBcImV4cGVjdGVkXCIgd2F5LCBzbyB1bmRlZmluZWQgaXMgYWx3YXlzIGNhc3QgdG8gbnVsbCBpbiBhbGxcbiAgICAgICAgICAgIC8vIGRyaXZlcnMuIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL21vemlsbGEvbG9jYWxGb3JhZ2UvcHVsbC80MlxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIG9yaWdpbmFsIHZhbHVlIHRvIHBhc3MgdG8gdGhlIGNhbGxiYWNrLlxuICAgICAgICAgICAgdmFyIG9yaWdpbmFsVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5zZXJpYWxpemVyLnNlcmlhbGl6ZSh2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlLCBlcnJvcikge1xuICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5RXhlY3V0ZVNxbCh0LCBkYkluZm8sICdJTlNFUlQgT1IgUkVQTEFDRSBJTlRPICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyAnICsgJyhrZXksIHZhbHVlKSBWQUxVRVMgKD8sID8pJywgW2tleSwgdmFsdWVdLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvcmlnaW5hbFZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHNxbEVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGUgdHJhbnNhY3Rpb24gZmFpbGVkOyBjaGVja1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdG8gc2VlIGlmIGl0J3MgYSBxdW90YSBlcnJvci5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzcWxFcnJvci5jb2RlID09PSBzcWxFcnJvci5RVU9UQV9FUlIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSByZWplY3QgdGhlIGNhbGxiYWNrIG91dHJpZ2h0IGZvciBub3csIGJ1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGl0J3Mgd29ydGggdHJ5aW5nIHRvIHJlLXJ1biB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXZlbiBpZiB0aGUgdXNlciBhY2NlcHRzIHRoZSBwcm9tcHQgdG8gdXNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gbW9yZSBzdG9yYWdlIG9uIFNhZmFyaSwgdGhpcyBlcnJvciB3aWxsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmUgY2FsbGVkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIHJlLXJ1biB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJldHJpZXNMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF9zZXRJdGVtLmFwcGx5KHNlbGYsIFtrZXksIG9yaWdpbmFsVmFsdWUsIGNhbGxiYWNrLCByZXRyaWVzTGVmdCAtIDFdKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHNxbEVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIHNldEl0ZW0kMShrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBfc2V0SXRlbS5hcHBseSh0aGlzLCBba2V5LCB2YWx1ZSwgY2FsbGJhY2ssIDFdKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlSXRlbSQxKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBrZXkgPSBub3JtYWxpemVLZXkoa2V5KTtcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0cnlFeGVjdXRlU3FsKHQsIGRiSW5mbywgJ0RFTEVURSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyBXSEVSRSBrZXkgPSA/JywgW2tleV0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIERlbGV0ZXMgZXZlcnkgaXRlbSBpbiB0aGUgdGFibGUuXG4vLyBUT0RPOiBGaW5kIG91dCBpZiB0aGlzIHJlc2V0cyB0aGUgQVVUT19JTkNSRU1FTlQgbnVtYmVyLlxuZnVuY3Rpb24gY2xlYXIkMShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0cnlFeGVjdXRlU3FsKHQsIGRiSW5mbywgJ0RFTEVURSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lLCBbXSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShyZWplY3QpO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gRG9lcyBhIHNpbXBsZSBgQ09VTlQoa2V5KWAgdG8gZ2V0IHRoZSBudW1iZXIgb2YgaXRlbXMgc3RvcmVkIGluXG4vLyBsb2NhbEZvcmFnZS5cbmZ1bmN0aW9uIGxlbmd0aCQxKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIC8vIEFoaGgsIFNRTCBtYWtlcyB0aGlzIG9uZSBzb29vb29vIGVhc3kuXG4gICAgICAgICAgICAgICAgdHJ5RXhlY3V0ZVNxbCh0LCBkYkluZm8sICdTRUxFQ1QgQ09VTlQoa2V5KSBhcyBjIEZST00gJyArIGRiSW5mby5zdG9yZU5hbWUsIFtdLCBmdW5jdGlvbiAodCwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzdWx0cy5yb3dzLml0ZW0oMCkuYztcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFJldHVybiB0aGUga2V5IGxvY2F0ZWQgYXQga2V5IGluZGV4IFg7IGVzc2VudGlhbGx5IGdldHMgdGhlIGtleSBmcm9tIGFcbi8vIGBXSEVSRSBpZCA9ID9gLiBUaGlzIGlzIHRoZSBtb3N0IGVmZmljaWVudCB3YXkgSSBjYW4gdGhpbmsgdG8gaW1wbGVtZW50XG4vLyB0aGlzIHJhcmVseS11c2VkIChpbiBteSBleHBlcmllbmNlKSBwYXJ0IG9mIHRoZSBBUEksIGJ1dCBpdCBjYW4gc2VlbVxuLy8gaW5jb25zaXN0ZW50LCBiZWNhdXNlIHdlIGRvIGBJTlNFUlQgT1IgUkVQTEFDRSBJTlRPYCBvbiBgc2V0SXRlbSgpYCwgc29cbi8vIHRoZSBJRCBvZiBlYWNoIGtleSB3aWxsIGNoYW5nZSBldmVyeSB0aW1lIGl0J3MgdXBkYXRlZC4gUGVyaGFwcyBhIHN0b3JlZFxuLy8gcHJvY2VkdXJlIGZvciB0aGUgYHNldEl0ZW0oKWAgU1FMIHdvdWxkIHNvbHZlIHRoaXMgcHJvYmxlbT9cbi8vIFRPRE86IERvbid0IGNoYW5nZSBJRCBvbiBgc2V0SXRlbSgpYC5cbmZ1bmN0aW9uIGtleSQxKG4sIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRiSW5mbyA9IHNlbGYuX2RiSW5mbztcbiAgICAgICAgICAgIGRiSW5mby5kYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgICAgIHRyeUV4ZWN1dGVTcWwodCwgZGJJbmZvLCAnU0VMRUNUIGtleSBGUk9NICcgKyBkYkluZm8uc3RvcmVOYW1lICsgJyBXSEVSRSBpZCA9ID8gTElNSVQgMScsIFtuICsgMV0sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSByZXN1bHRzLnJvd3MubGVuZ3RoID8gcmVzdWx0cy5yb3dzLml0ZW0oMCkua2V5IDogbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pW1wiY2F0Y2hcIl0ocmVqZWN0KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbmZ1bmN0aW9uIGtleXMkMShjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHNlbGYucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgICAgICBkYkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICB0cnlFeGVjdXRlU3FsKHQsIGRiSW5mbywgJ1NFTEVDVCBrZXkgRlJPTSAnICsgZGJJbmZvLnN0b3JlTmFtZSwgW10sIGZ1bmN0aW9uICh0LCByZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHRzLnJvd3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXMucHVzaChyZXN1bHRzLnJvd3MuaXRlbShpKS5rZXkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShrZXlzKTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAodCwgZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KVtcImNhdGNoXCJdKHJlamVjdCk7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvd2ViZGF0YWJhc2UvI2RhdGFiYXNlc1xuLy8gPiBUaGVyZSBpcyBubyB3YXkgdG8gZW51bWVyYXRlIG9yIGRlbGV0ZSB0aGUgZGF0YWJhc2VzIGF2YWlsYWJsZSBmb3IgYW4gb3JpZ2luIGZyb20gdGhpcyBBUEkuXG5mdW5jdGlvbiBnZXRBbGxTdG9yZU5hbWVzKGRiKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBkYi50cmFuc2FjdGlvbihmdW5jdGlvbiAodCkge1xuICAgICAgICAgICAgdC5leGVjdXRlU3FsKCdTRUxFQ1QgbmFtZSBGUk9NIHNxbGl0ZV9tYXN0ZXIgJyArIFwiV0hFUkUgdHlwZT0ndGFibGUnIEFORCBuYW1lIDw+ICdfX1dlYktpdERhdGFiYXNlSW5mb1RhYmxlX18nXCIsIFtdLCBmdW5jdGlvbiAodCwgcmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHZhciBzdG9yZU5hbWVzID0gW107XG5cbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3VsdHMucm93cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBzdG9yZU5hbWVzLnB1c2gocmVzdWx0cy5yb3dzLml0ZW0oaSkubmFtZSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh7XG4gICAgICAgICAgICAgICAgICAgIGRiOiBkYixcbiAgICAgICAgICAgICAgICAgICAgc3RvcmVOYW1lczogc3RvcmVOYW1lc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKHQsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCBmdW5jdGlvbiAoc3FsRXJyb3IpIHtcbiAgICAgICAgICAgIHJlamVjdChzcWxFcnJvcik7XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBkcm9wSW5zdGFuY2UkMShvcHRpb25zLCBjYWxsYmFjaykge1xuICAgIGNhbGxiYWNrID0gZ2V0Q2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblxuICAgIHZhciBjdXJyZW50Q29uZmlnID0gdGhpcy5jb25maWcoKTtcbiAgICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgIT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMubmFtZSkge1xuICAgICAgICBvcHRpb25zLm5hbWUgPSBvcHRpb25zLm5hbWUgfHwgY3VycmVudENvbmZpZy5uYW1lO1xuICAgICAgICBvcHRpb25zLnN0b3JlTmFtZSA9IG9wdGlvbnMuc3RvcmVOYW1lIHx8IGN1cnJlbnRDb25maWcuc3RvcmVOYW1lO1xuICAgIH1cblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcHJvbWlzZTtcbiAgICBpZiAoIW9wdGlvbnMubmFtZSkge1xuICAgICAgICBwcm9taXNlID0gUHJvbWlzZSQxLnJlamVjdCgnSW52YWxpZCBhcmd1bWVudHMnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBwcm9taXNlID0gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSkge1xuICAgICAgICAgICAgdmFyIGRiO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMubmFtZSA9PT0gY3VycmVudENvbmZpZy5uYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gdXNlIHRoZSBkYiByZWZlcmVuY2Ugb2YgdGhlIGN1cnJlbnQgaW5zdGFuY2VcbiAgICAgICAgICAgICAgICBkYiA9IHNlbGYuX2RiSW5mby5kYjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZGIgPSBvcGVuRGF0YWJhc2Uob3B0aW9ucy5uYW1lLCAnJywgJycsIDApO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICAgICAgLy8gZHJvcCBhbGwgZGF0YWJhc2UgdGFibGVzXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShnZXRBbGxTdG9yZU5hbWVzKGRiKSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUoe1xuICAgICAgICAgICAgICAgICAgICBkYjogZGIsXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlTmFtZXM6IFtvcHRpb25zLnN0b3JlTmFtZV1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbiAob3BlcmF0aW9uSW5mbykge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIG9wZXJhdGlvbkluZm8uZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJvcFRhYmxlKHN0b3JlTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuZXhlY3V0ZVNxbCgnRFJPUCBUQUJMRSBJRiBFWElTVFMgJyArIHN0b3JlTmFtZSwgW10sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uICh0LCBlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgb3BlcmF0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb3BlcmF0aW9uSW5mby5zdG9yZU5hbWVzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGVyYXRpb25zLnB1c2goZHJvcFRhYmxlKG9wZXJhdGlvbkluZm8uc3RvcmVOYW1lc1tpXSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZSQxLmFsbChvcGVyYXRpb25zKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoc3FsRXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHNxbEVycm9yKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgd2ViU1FMU3RvcmFnZSA9IHtcbiAgICBfZHJpdmVyOiAnd2ViU1FMU3RvcmFnZScsXG4gICAgX2luaXRTdG9yYWdlOiBfaW5pdFN0b3JhZ2UkMSxcbiAgICBfc3VwcG9ydDogaXNXZWJTUUxWYWxpZCgpLFxuICAgIGl0ZXJhdGU6IGl0ZXJhdGUkMSxcbiAgICBnZXRJdGVtOiBnZXRJdGVtJDEsXG4gICAgc2V0SXRlbTogc2V0SXRlbSQxLFxuICAgIHJlbW92ZUl0ZW06IHJlbW92ZUl0ZW0kMSxcbiAgICBjbGVhcjogY2xlYXIkMSxcbiAgICBsZW5ndGg6IGxlbmd0aCQxLFxuICAgIGtleToga2V5JDEsXG4gICAga2V5czoga2V5cyQxLFxuICAgIGRyb3BJbnN0YW5jZTogZHJvcEluc3RhbmNlJDFcbn07XG5cbmZ1bmN0aW9uIGlzTG9jYWxTdG9yYWdlVmFsaWQoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnICYmICdzZXRJdGVtJyBpbiBsb2NhbFN0b3JhZ2UgJiZcbiAgICAgICAgLy8gaW4gSUU4IHR5cGVvZiBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSA9PT0gJ29iamVjdCdcbiAgICAgICAgISFsb2NhbFN0b3JhZ2Uuc2V0SXRlbTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9nZXRLZXlQcmVmaXgob3B0aW9ucywgZGVmYXVsdENvbmZpZykge1xuICAgIHZhciBrZXlQcmVmaXggPSBvcHRpb25zLm5hbWUgKyAnLyc7XG5cbiAgICBpZiAob3B0aW9ucy5zdG9yZU5hbWUgIT09IGRlZmF1bHRDb25maWcuc3RvcmVOYW1lKSB7XG4gICAgICAgIGtleVByZWZpeCArPSBvcHRpb25zLnN0b3JlTmFtZSArICcvJztcbiAgICB9XG4gICAgcmV0dXJuIGtleVByZWZpeDtcbn1cblxuLy8gQ2hlY2sgaWYgbG9jYWxTdG9yYWdlIHRocm93cyB3aGVuIHNhdmluZyBhbiBpdGVtXG5mdW5jdGlvbiBjaGVja0lmTG9jYWxTdG9yYWdlVGhyb3dzKCkge1xuICAgIHZhciBsb2NhbFN0b3JhZ2VUZXN0S2V5ID0gJ19sb2NhbGZvcmFnZV9zdXBwb3J0X3Rlc3QnO1xuXG4gICAgdHJ5IHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0obG9jYWxTdG9yYWdlVGVzdEtleSwgdHJ1ZSk7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGxvY2FsU3RvcmFnZVRlc3RLZXkpO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuLy8gQ2hlY2sgaWYgbG9jYWxTdG9yYWdlIGlzIHVzYWJsZSBhbmQgYWxsb3dzIHRvIHNhdmUgYW4gaXRlbVxuLy8gVGhpcyBtZXRob2QgY2hlY2tzIGlmIGxvY2FsU3RvcmFnZSBpcyB1c2FibGUgaW4gU2FmYXJpIFByaXZhdGUgQnJvd3Npbmdcbi8vIG1vZGUsIG9yIGluIGFueSBvdGhlciBjYXNlIHdoZXJlIHRoZSBhdmFpbGFibGUgcXVvdGEgZm9yIGxvY2FsU3RvcmFnZVxuLy8gaXMgMCBhbmQgdGhlcmUgd2Fzbid0IGFueSBzYXZlZCBpdGVtcyB5ZXQuXG5mdW5jdGlvbiBfaXNMb2NhbFN0b3JhZ2VVc2FibGUoKSB7XG4gICAgcmV0dXJuICFjaGVja0lmTG9jYWxTdG9yYWdlVGhyb3dzKCkgfHwgbG9jYWxTdG9yYWdlLmxlbmd0aCA+IDA7XG59XG5cbi8vIENvbmZpZyB0aGUgbG9jYWxTdG9yYWdlIGJhY2tlbmQsIHVzaW5nIG9wdGlvbnMgc2V0IGluIHRoZSBjb25maWcuXG5mdW5jdGlvbiBfaW5pdFN0b3JhZ2UkMihvcHRpb25zKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBkYkluZm8gPSB7fTtcbiAgICBpZiAob3B0aW9ucykge1xuICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgIGRiSW5mb1tpXSA9IG9wdGlvbnNbaV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBkYkluZm8ua2V5UHJlZml4ID0gX2dldEtleVByZWZpeChvcHRpb25zLCBzZWxmLl9kZWZhdWx0Q29uZmlnKTtcblxuICAgIGlmICghX2lzTG9jYWxTdG9yYWdlVXNhYmxlKCkpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZWplY3QoKTtcbiAgICB9XG5cbiAgICBzZWxmLl9kYkluZm8gPSBkYkluZm87XG4gICAgZGJJbmZvLnNlcmlhbGl6ZXIgPSBsb2NhbGZvcmFnZVNlcmlhbGl6ZXI7XG5cbiAgICByZXR1cm4gUHJvbWlzZSQxLnJlc29sdmUoKTtcbn1cblxuLy8gUmVtb3ZlIGFsbCBrZXlzIGZyb20gdGhlIGRhdGFzdG9yZSwgZWZmZWN0aXZlbHkgZGVzdHJveWluZyBhbGwgZGF0YSBpblxuLy8gdGhlIGFwcCdzIGtleS92YWx1ZSBzdG9yZSFcbmZ1bmN0aW9uIGNsZWFyJDIoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBrZXlQcmVmaXggPSBzZWxmLl9kYkluZm8ua2V5UHJlZml4O1xuXG4gICAgICAgIGZvciAodmFyIGkgPSBsb2NhbFN0b3JhZ2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuXG4gICAgICAgICAgICBpZiAoa2V5LmluZGV4T2Yoa2V5UHJlZml4KSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFJldHJpZXZlIGFuIGl0ZW0gZnJvbSB0aGUgc3RvcmUuIFVubGlrZSB0aGUgb3JpZ2luYWwgYXN5bmNfc3RvcmFnZVxuLy8gbGlicmFyeSBpbiBHYWlhLCB3ZSBkb24ndCBtb2RpZnkgcmV0dXJuIHZhbHVlcyBhdCBhbGwuIElmIGEga2V5J3MgdmFsdWVcbi8vIGlzIGB1bmRlZmluZWRgLCB3ZSBwYXNzIHRoYXQgdmFsdWUgdG8gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuZnVuY3Rpb24gZ2V0SXRlbSQyKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBrZXkgPSBub3JtYWxpemVLZXkoa2V5KTtcblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICB2YXIgcmVzdWx0ID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oZGJJbmZvLmtleVByZWZpeCArIGtleSk7XG5cbiAgICAgICAgLy8gSWYgYSByZXN1bHQgd2FzIGZvdW5kLCBwYXJzZSBpdCBmcm9tIHRoZSBzZXJpYWxpemVkXG4gICAgICAgIC8vIHN0cmluZyBpbnRvIGEgSlMgb2JqZWN0LiBJZiByZXN1bHQgaXNuJ3QgdHJ1dGh5LCB0aGUga2V5XG4gICAgICAgIC8vIGlzIGxpa2VseSB1bmRlZmluZWQgYW5kIHdlJ2xsIHBhc3MgaXQgc3RyYWlnaHQgdG8gdGhlXG4gICAgICAgIC8vIGNhbGxiYWNrLlxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSBkYkluZm8uc2VyaWFsaXplci5kZXNlcmlhbGl6ZShyZXN1bHQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIEl0ZXJhdGUgb3ZlciBhbGwgaXRlbXMgaW4gdGhlIHN0b3JlLlxuZnVuY3Rpb24gaXRlcmF0ZSQyKGl0ZXJhdG9yLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICB2YXIga2V5UHJlZml4ID0gZGJJbmZvLmtleVByZWZpeDtcbiAgICAgICAgdmFyIGtleVByZWZpeExlbmd0aCA9IGtleVByZWZpeC5sZW5ndGg7XG4gICAgICAgIHZhciBsZW5ndGggPSBsb2NhbFN0b3JhZ2UubGVuZ3RoO1xuXG4gICAgICAgIC8vIFdlIHVzZSBhIGRlZGljYXRlZCBpdGVyYXRvciBpbnN0ZWFkIG9mIHRoZSBgaWAgdmFyaWFibGUgYmVsb3dcbiAgICAgICAgLy8gc28gb3RoZXIga2V5cyB3ZSBmZXRjaCBpbiBsb2NhbFN0b3JhZ2UgYXJlbid0IGNvdW50ZWQgaW5cbiAgICAgICAgLy8gdGhlIGBpdGVyYXRpb25OdW1iZXJgIGFyZ3VtZW50IHBhc3NlZCB0byB0aGUgYGl0ZXJhdGUoKWBcbiAgICAgICAgLy8gY2FsbGJhY2suXG4gICAgICAgIC8vXG4gICAgICAgIC8vIFNlZTogZ2l0aHViLmNvbS9tb3ppbGxhL2xvY2FsRm9yYWdlL3B1bGwvNDM1I2Rpc2N1c3Npb25fcjM4MDYxNTMwXG4gICAgICAgIHZhciBpdGVyYXRpb25OdW1iZXIgPSAxO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpO1xuICAgICAgICAgICAgaWYgKGtleS5pbmRleE9mKGtleVByZWZpeCkgIT09IDApIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG5cbiAgICAgICAgICAgIC8vIElmIGEgcmVzdWx0IHdhcyBmb3VuZCwgcGFyc2UgaXQgZnJvbSB0aGUgc2VyaWFsaXplZFxuICAgICAgICAgICAgLy8gc3RyaW5nIGludG8gYSBKUyBvYmplY3QuIElmIHJlc3VsdCBpc24ndCB0cnV0aHksIHRoZVxuICAgICAgICAgICAgLy8ga2V5IGlzIGxpa2VseSB1bmRlZmluZWQgYW5kIHdlJ2xsIHBhc3MgaXQgc3RyYWlnaHRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBpdGVyYXRvci5cbiAgICAgICAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZGJJbmZvLnNlcmlhbGl6ZXIuZGVzZXJpYWxpemUodmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YWx1ZSA9IGl0ZXJhdG9yKHZhbHVlLCBrZXkuc3Vic3RyaW5nKGtleVByZWZpeExlbmd0aCksIGl0ZXJhdGlvbk51bWJlcisrKTtcblxuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFNhbWUgYXMgbG9jYWxTdG9yYWdlJ3Mga2V5KCkgbWV0aG9kLCBleGNlcHQgdGFrZXMgYSBjYWxsYmFjay5cbmZ1bmN0aW9uIGtleSQyKG4sIGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICB2YXIgcmVzdWx0O1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmVzdWx0ID0gbG9jYWxTdG9yYWdlLmtleShuKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZW1vdmUgdGhlIHByZWZpeCBmcm9tIHRoZSBrZXksIGlmIGEga2V5IGlzIGZvdW5kLlxuICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICByZXN1bHQgPSByZXN1bHQuc3Vic3RyaW5nKGRiSW5mby5rZXlQcmVmaXgubGVuZ3RoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG5mdW5jdGlvbiBrZXlzJDIoY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBkYkluZm8gPSBzZWxmLl9kYkluZm87XG4gICAgICAgIHZhciBsZW5ndGggPSBsb2NhbFN0b3JhZ2UubGVuZ3RoO1xuICAgICAgICB2YXIga2V5cyA9IFtdO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBpdGVtS2V5ID0gbG9jYWxTdG9yYWdlLmtleShpKTtcbiAgICAgICAgICAgIGlmIChpdGVtS2V5LmluZGV4T2YoZGJJbmZvLmtleVByZWZpeCkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goaXRlbUtleS5zdWJzdHJpbmcoZGJJbmZvLmtleVByZWZpeC5sZW5ndGgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuLy8gU3VwcGx5IHRoZSBudW1iZXIgb2Yga2V5cyBpbiB0aGUgZGF0YXN0b3JlIHRvIHRoZSBjYWxsYmFjayBmdW5jdGlvbi5cbmZ1bmN0aW9uIGxlbmd0aCQyKGNhbGxiYWNrKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlID0gc2VsZi5rZXlzKCkudGhlbihmdW5jdGlvbiAoa2V5cykge1xuICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGg7XG4gICAgfSk7XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG4vLyBSZW1vdmUgYW4gaXRlbSBmcm9tIHRoZSBzdG9yZSwgbmljZSBhbmQgc2ltcGxlLlxuZnVuY3Rpb24gcmVtb3ZlSXRlbSQyKGtleSwgY2FsbGJhY2spIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICBrZXkgPSBub3JtYWxpemVLZXkoa2V5KTtcblxuICAgIHZhciBwcm9taXNlID0gc2VsZi5yZWFkeSgpLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShkYkluZm8ua2V5UHJlZml4ICsga2V5KTtcbiAgICB9KTtcblxuICAgIGV4ZWN1dGVDYWxsYmFjayhwcm9taXNlLCBjYWxsYmFjayk7XG4gICAgcmV0dXJuIHByb21pc2U7XG59XG5cbi8vIFNldCBhIGtleSdzIHZhbHVlIGFuZCBydW4gYW4gb3B0aW9uYWwgY2FsbGJhY2sgb25jZSB0aGUgdmFsdWUgaXMgc2V0LlxuLy8gVW5saWtlIEdhaWEncyBpbXBsZW1lbnRhdGlvbiwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIGlzIHBhc3NlZCB0aGUgdmFsdWUsXG4vLyBpbiBjYXNlIHlvdSB3YW50IHRvIG9wZXJhdGUgb24gdGhhdCB2YWx1ZSBvbmx5IGFmdGVyIHlvdSdyZSBzdXJlIGl0XG4vLyBzYXZlZCwgb3Igc29tZXRoaW5nIGxpa2UgdGhhdC5cbmZ1bmN0aW9uIHNldEl0ZW0kMihrZXksIHZhbHVlLCBjYWxsYmFjaykge1xuICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgIGtleSA9IG5vcm1hbGl6ZUtleShrZXkpO1xuXG4gICAgdmFyIHByb21pc2UgPSBzZWxmLnJlYWR5KCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIC8vIENvbnZlcnQgdW5kZWZpbmVkIHZhbHVlcyB0byBudWxsLlxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbW96aWxsYS9sb2NhbEZvcmFnZS9wdWxsLzQyXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTYXZlIHRoZSBvcmlnaW5hbCB2YWx1ZSB0byBwYXNzIHRvIHRoZSBjYWxsYmFjay5cbiAgICAgICAgdmFyIG9yaWdpbmFsVmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICB2YXIgZGJJbmZvID0gc2VsZi5fZGJJbmZvO1xuICAgICAgICAgICAgZGJJbmZvLnNlcmlhbGl6ZXIuc2VyaWFsaXplKHZhbHVlLCBmdW5jdGlvbiAodmFsdWUsIGVycm9yKSB7XG4gICAgICAgICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGRiSW5mby5rZXlQcmVmaXggKyBrZXksIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob3JpZ2luYWxWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZSBjYXBhY2l0eSBleGNlZWRlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IE1ha2UgdGhpcyBhIHNwZWNpZmljIGVycm9yL2V2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicgfHwgZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGNhbGxiYWNrKTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gZHJvcEluc3RhbmNlJDIob3B0aW9ucywgY2FsbGJhY2spIHtcbiAgICBjYWxsYmFjayA9IGdldENhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cbiAgICBvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgIT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucyB8fCB7fTtcbiAgICBpZiAoIW9wdGlvbnMubmFtZSkge1xuICAgICAgICB2YXIgY3VycmVudENvbmZpZyA9IHRoaXMuY29uZmlnKCk7XG4gICAgICAgIG9wdGlvbnMubmFtZSA9IG9wdGlvbnMubmFtZSB8fCBjdXJyZW50Q29uZmlnLm5hbWU7XG4gICAgICAgIG9wdGlvbnMuc3RvcmVOYW1lID0gb3B0aW9ucy5zdG9yZU5hbWUgfHwgY3VycmVudENvbmZpZy5zdG9yZU5hbWU7XG4gICAgfVxuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBwcm9taXNlO1xuICAgIGlmICghb3B0aW9ucy5uYW1lKSB7XG4gICAgICAgIHByb21pc2UgPSBQcm9taXNlJDEucmVqZWN0KCdJbnZhbGlkIGFyZ3VtZW50cycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHByb21pc2UgPSBuZXcgUHJvbWlzZSQxKGZ1bmN0aW9uIChyZXNvbHZlKSB7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuc3RvcmVOYW1lKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShvcHRpb25zLm5hbWUgKyAnLycpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKF9nZXRLZXlQcmVmaXgob3B0aW9ucywgc2VsZi5fZGVmYXVsdENvbmZpZykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChrZXlQcmVmaXgpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSBsb2NhbFN0b3JhZ2UubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gbG9jYWxTdG9yYWdlLmtleShpKTtcblxuICAgICAgICAgICAgICAgIGlmIChrZXkuaW5kZXhPZihrZXlQcmVmaXgpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBleGVjdXRlQ2FsbGJhY2socHJvbWlzZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBwcm9taXNlO1xufVxuXG52YXIgbG9jYWxTdG9yYWdlV3JhcHBlciA9IHtcbiAgICBfZHJpdmVyOiAnbG9jYWxTdG9yYWdlV3JhcHBlcicsXG4gICAgX2luaXRTdG9yYWdlOiBfaW5pdFN0b3JhZ2UkMixcbiAgICBfc3VwcG9ydDogaXNMb2NhbFN0b3JhZ2VWYWxpZCgpLFxuICAgIGl0ZXJhdGU6IGl0ZXJhdGUkMixcbiAgICBnZXRJdGVtOiBnZXRJdGVtJDIsXG4gICAgc2V0SXRlbTogc2V0SXRlbSQyLFxuICAgIHJlbW92ZUl0ZW06IHJlbW92ZUl0ZW0kMixcbiAgICBjbGVhcjogY2xlYXIkMixcbiAgICBsZW5ndGg6IGxlbmd0aCQyLFxuICAgIGtleToga2V5JDIsXG4gICAga2V5czoga2V5cyQyLFxuICAgIGRyb3BJbnN0YW5jZTogZHJvcEluc3RhbmNlJDJcbn07XG5cbnZhciBzYW1lVmFsdWUgPSBmdW5jdGlvbiBzYW1lVmFsdWUoeCwgeSkge1xuICAgIHJldHVybiB4ID09PSB5IHx8IHR5cGVvZiB4ID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PT0gJ251bWJlcicgJiYgaXNOYU4oeCkgJiYgaXNOYU4oeSk7XG59O1xuXG52YXIgaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyhhcnJheSwgc2VhcmNoRWxlbWVudCkge1xuICAgIHZhciBsZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgdmFyIGkgPSAwO1xuICAgIHdoaWxlIChpIDwgbGVuKSB7XG4gICAgICAgIGlmIChzYW1lVmFsdWUoYXJyYXlbaV0sIHNlYXJjaEVsZW1lbnQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpKys7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5IHx8IGZ1bmN0aW9uIChhcmcpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGFyZykgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuXG4vLyBEcml2ZXJzIGFyZSBzdG9yZWQgaGVyZSB3aGVuIGBkZWZpbmVEcml2ZXIoKWAgaXMgY2FsbGVkLlxuLy8gVGhleSBhcmUgc2hhcmVkIGFjcm9zcyBhbGwgaW5zdGFuY2VzIG9mIGxvY2FsRm9yYWdlLlxudmFyIERlZmluZWREcml2ZXJzID0ge307XG5cbnZhciBEcml2ZXJTdXBwb3J0ID0ge307XG5cbnZhciBEZWZhdWx0RHJpdmVycyA9IHtcbiAgICBJTkRFWEVEREI6IGFzeW5jU3RvcmFnZSxcbiAgICBXRUJTUUw6IHdlYlNRTFN0b3JhZ2UsXG4gICAgTE9DQUxTVE9SQUdFOiBsb2NhbFN0b3JhZ2VXcmFwcGVyXG59O1xuXG52YXIgRGVmYXVsdERyaXZlck9yZGVyID0gW0RlZmF1bHREcml2ZXJzLklOREVYRUREQi5fZHJpdmVyLCBEZWZhdWx0RHJpdmVycy5XRUJTUUwuX2RyaXZlciwgRGVmYXVsdERyaXZlcnMuTE9DQUxTVE9SQUdFLl9kcml2ZXJdO1xuXG52YXIgT3B0aW9uYWxEcml2ZXJNZXRob2RzID0gWydkcm9wSW5zdGFuY2UnXTtcblxudmFyIExpYnJhcnlNZXRob2RzID0gWydjbGVhcicsICdnZXRJdGVtJywgJ2l0ZXJhdGUnLCAna2V5JywgJ2tleXMnLCAnbGVuZ3RoJywgJ3JlbW92ZUl0ZW0nLCAnc2V0SXRlbSddLmNvbmNhdChPcHRpb25hbERyaXZlck1ldGhvZHMpO1xuXG52YXIgRGVmYXVsdENvbmZpZyA9IHtcbiAgICBkZXNjcmlwdGlvbjogJycsXG4gICAgZHJpdmVyOiBEZWZhdWx0RHJpdmVyT3JkZXIuc2xpY2UoKSxcbiAgICBuYW1lOiAnbG9jYWxmb3JhZ2UnLFxuICAgIC8vIERlZmF1bHQgREIgc2l6ZSBpcyBfSlVTVCBVTkRFUl8gNU1CLCBhcyBpdCdzIHRoZSBoaWdoZXN0IHNpemVcbiAgICAvLyB3ZSBjYW4gdXNlIHdpdGhvdXQgYSBwcm9tcHQuXG4gICAgc2l6ZTogNDk4MDczNixcbiAgICBzdG9yZU5hbWU6ICdrZXl2YWx1ZXBhaXJzJyxcbiAgICB2ZXJzaW9uOiAxLjBcbn07XG5cbmZ1bmN0aW9uIGNhbGxXaGVuUmVhZHkobG9jYWxGb3JhZ2VJbnN0YW5jZSwgbGlicmFyeU1ldGhvZCkge1xuICAgIGxvY2FsRm9yYWdlSW5zdGFuY2VbbGlicmFyeU1ldGhvZF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgcmV0dXJuIGxvY2FsRm9yYWdlSW5zdGFuY2UucmVhZHkoKS50aGVuKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbEZvcmFnZUluc3RhbmNlW2xpYnJhcnlNZXRob2RdLmFwcGx5KGxvY2FsRm9yYWdlSW5zdGFuY2UsIF9hcmdzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gZXh0ZW5kKCkge1xuICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgICAgaWYgKGFyZykge1xuICAgICAgICAgICAgZm9yICh2YXIgX2tleSBpbiBhcmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJnLmhhc093blByb3BlcnR5KF9rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0FycmF5KGFyZ1tfa2V5XSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3VtZW50c1swXVtfa2V5XSA9IGFyZ1tfa2V5XS5zbGljZSgpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXJndW1lbnRzWzBdW19rZXldID0gYXJnW19rZXldO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGFyZ3VtZW50c1swXTtcbn1cblxudmFyIExvY2FsRm9yYWdlID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIExvY2FsRm9yYWdlKG9wdGlvbnMpIHtcbiAgICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIExvY2FsRm9yYWdlKTtcblxuICAgICAgICBmb3IgKHZhciBkcml2ZXJUeXBlS2V5IGluIERlZmF1bHREcml2ZXJzKSB7XG4gICAgICAgICAgICBpZiAoRGVmYXVsdERyaXZlcnMuaGFzT3duUHJvcGVydHkoZHJpdmVyVHlwZUtleSkpIHtcbiAgICAgICAgICAgICAgICB2YXIgZHJpdmVyID0gRGVmYXVsdERyaXZlcnNbZHJpdmVyVHlwZUtleV07XG4gICAgICAgICAgICAgICAgdmFyIGRyaXZlck5hbWUgPSBkcml2ZXIuX2RyaXZlcjtcbiAgICAgICAgICAgICAgICB0aGlzW2RyaXZlclR5cGVLZXldID0gZHJpdmVyTmFtZTtcblxuICAgICAgICAgICAgICAgIGlmICghRGVmaW5lZERyaXZlcnNbZHJpdmVyTmFtZV0pIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgZG9uJ3QgbmVlZCB0byB3YWl0IGZvciB0aGUgcHJvbWlzZSxcbiAgICAgICAgICAgICAgICAgICAgLy8gc2luY2UgdGhlIGRlZmF1bHQgZHJpdmVycyBjYW4gYmUgZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAvLyBpbiBhIGJsb2NraW5nIG1hbm5lclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmluZURyaXZlcihkcml2ZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2RlZmF1bHRDb25maWcgPSBleHRlbmQoe30sIERlZmF1bHRDb25maWcpO1xuICAgICAgICB0aGlzLl9jb25maWcgPSBleHRlbmQoe30sIHRoaXMuX2RlZmF1bHRDb25maWcsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9kcml2ZXJTZXQgPSBudWxsO1xuICAgICAgICB0aGlzLl9pbml0RHJpdmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5fcmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fZGJJbmZvID0gbnVsbDtcblxuICAgICAgICB0aGlzLl93cmFwTGlicmFyeU1ldGhvZHNXaXRoUmVhZHkoKTtcbiAgICAgICAgdGhpcy5zZXREcml2ZXIodGhpcy5fY29uZmlnLmRyaXZlcilbXCJjYXRjaFwiXShmdW5jdGlvbiAoKSB7fSk7XG4gICAgfVxuXG4gICAgLy8gU2V0IGFueSBjb25maWcgdmFsdWVzIGZvciBsb2NhbEZvcmFnZTsgY2FuIGJlIGNhbGxlZCBhbnl0aW1lIGJlZm9yZVxuICAgIC8vIHRoZSBmaXJzdCBBUEkgY2FsbCAoZS5nLiBgZ2V0SXRlbWAsIGBzZXRJdGVtYCkuXG4gICAgLy8gV2UgbG9vcCB0aHJvdWdoIG9wdGlvbnMgc28gd2UgZG9uJ3Qgb3ZlcndyaXRlIGV4aXN0aW5nIGNvbmZpZ1xuICAgIC8vIHZhbHVlcy5cblxuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLmNvbmZpZyA9IGZ1bmN0aW9uIGNvbmZpZyhvcHRpb25zKSB7XG4gICAgICAgIC8vIElmIHRoZSBvcHRpb25zIGFyZ3VtZW50IGlzIGFuIG9iamVjdCwgd2UgdXNlIGl0IHRvIHNldCB2YWx1ZXMuXG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgcmV0dXJuIGVpdGhlciBhIHNwZWNpZmllZCBjb25maWcgdmFsdWUgb3IgYWxsXG4gICAgICAgIC8vIGNvbmZpZyB2YWx1ZXMuXG4gICAgICAgIGlmICgodHlwZW9mIG9wdGlvbnMgPT09ICd1bmRlZmluZWQnID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG9wdGlvbnMpKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIC8vIElmIGxvY2FsZm9yYWdlIGlzIHJlYWR5IGFuZCBmdWxseSBpbml0aWFsaXplZCwgd2UgY2FuJ3Qgc2V0XG4gICAgICAgICAgICAvLyBhbnkgbmV3IGNvbmZpZ3VyYXRpb24gdmFsdWVzLiBJbnN0ZWFkLCB3ZSByZXR1cm4gYW4gZXJyb3IuXG4gICAgICAgICAgICBpZiAodGhpcy5fcmVhZHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEVycm9yKFwiQ2FuJ3QgY2FsbCBjb25maWcoKSBhZnRlciBsb2NhbGZvcmFnZSBcIiArICdoYXMgYmVlbiB1c2VkLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaSA9PT0gJ3N0b3JlTmFtZScpIHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uc1tpXSA9IG9wdGlvbnNbaV0ucmVwbGFjZSgvXFxXL2csICdfJyk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09ICd2ZXJzaW9uJyAmJiB0eXBlb2Ygb3B0aW9uc1tpXSAhPT0gJ251bWJlcicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignRGF0YWJhc2UgdmVyc2lvbiBtdXN0IGJlIGEgbnVtYmVyLicpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuX2NvbmZpZ1tpXSA9IG9wdGlvbnNbaV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGFmdGVyIGFsbCBjb25maWcgb3B0aW9ucyBhcmUgc2V0IGFuZFxuICAgICAgICAgICAgLy8gdGhlIGRyaXZlciBvcHRpb24gaXMgdXNlZCwgdHJ5IHNldHRpbmcgaXRcbiAgICAgICAgICAgIGlmICgnZHJpdmVyJyBpbiBvcHRpb25zICYmIG9wdGlvbnMuZHJpdmVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0RHJpdmVyKHRoaXMuX2NvbmZpZy5kcml2ZXIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jb25maWdbb3B0aW9uc107XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY29uZmlnO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIFVzZWQgdG8gZGVmaW5lIGEgY3VzdG9tIGRyaXZlciwgc2hhcmVkIGFjcm9zcyBhbGwgaW5zdGFuY2VzIG9mXG4gICAgLy8gbG9jYWxGb3JhZ2UuXG5cblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5kZWZpbmVEcml2ZXIgPSBmdW5jdGlvbiBkZWZpbmVEcml2ZXIoZHJpdmVyT2JqZWN0LCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB2YXIgZHJpdmVyTmFtZSA9IGRyaXZlck9iamVjdC5fZHJpdmVyO1xuICAgICAgICAgICAgICAgIHZhciBjb21wbGlhbmNlRXJyb3IgPSBuZXcgRXJyb3IoJ0N1c3RvbSBkcml2ZXIgbm90IGNvbXBsaWFudDsgc2VlICcgKyAnaHR0cHM6Ly9tb3ppbGxhLmdpdGh1Yi5pby9sb2NhbEZvcmFnZS8jZGVmaW5lZHJpdmVyJyk7XG5cbiAgICAgICAgICAgICAgICAvLyBBIGRyaXZlciBuYW1lIHNob3VsZCBiZSBkZWZpbmVkIGFuZCBub3Qgb3ZlcmxhcCB3aXRoIHRoZVxuICAgICAgICAgICAgICAgIC8vIGxpYnJhcnktZGVmaW5lZCwgZGVmYXVsdCBkcml2ZXJzLlxuICAgICAgICAgICAgICAgIGlmICghZHJpdmVyT2JqZWN0Ll9kcml2ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGNvbXBsaWFuY2VFcnJvcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgZHJpdmVyTWV0aG9kcyA9IExpYnJhcnlNZXRob2RzLmNvbmNhdCgnX2luaXRTdG9yYWdlJyk7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGRyaXZlck1ldGhvZHMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRyaXZlck1ldGhvZE5hbWUgPSBkcml2ZXJNZXRob2RzW2ldO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIHdoZW4gdGhlIHByb3BlcnR5IGlzIHRoZXJlLFxuICAgICAgICAgICAgICAgICAgICAvLyBpdCBzaG91bGQgYmUgYSBtZXRob2QgZXZlbiB3aGVuIG9wdGlvbmFsXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc1JlcXVpcmVkID0gIWluY2x1ZGVzKE9wdGlvbmFsRHJpdmVyTWV0aG9kcywgZHJpdmVyTWV0aG9kTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgoaXNSZXF1aXJlZCB8fCBkcml2ZXJPYmplY3RbZHJpdmVyTWV0aG9kTmFtZV0pICYmIHR5cGVvZiBkcml2ZXJPYmplY3RbZHJpdmVyTWV0aG9kTmFtZV0gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChjb21wbGlhbmNlRXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGNvbmZpZ3VyZU1pc3NpbmdNZXRob2RzID0gZnVuY3Rpb24gY29uZmlndXJlTWlzc2luZ01ldGhvZHMoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXRob2ROb3RJbXBsZW1lbnRlZEZhY3RvcnkgPSBmdW5jdGlvbiBtZXRob2ROb3RJbXBsZW1lbnRlZEZhY3RvcnkobWV0aG9kTmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBuZXcgRXJyb3IoJ01ldGhvZCAnICsgbWV0aG9kTmFtZSArICcgaXMgbm90IGltcGxlbWVudGVkIGJ5IHRoZSBjdXJyZW50IGRyaXZlcicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9taXNlID0gUHJvbWlzZSQxLnJlamVjdChlcnJvcik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhlY3V0ZUNhbGxiYWNrKHByb21pc2UsIGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9sZW4gPSBPcHRpb25hbERyaXZlck1ldGhvZHMubGVuZ3RoOyBfaSA8IF9sZW47IF9pKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb25hbERyaXZlck1ldGhvZCA9IE9wdGlvbmFsRHJpdmVyTWV0aG9kc1tfaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWRyaXZlck9iamVjdFtvcHRpb25hbERyaXZlck1ldGhvZF0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXJPYmplY3Rbb3B0aW9uYWxEcml2ZXJNZXRob2RdID0gbWV0aG9kTm90SW1wbGVtZW50ZWRGYWN0b3J5KG9wdGlvbmFsRHJpdmVyTWV0aG9kKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBjb25maWd1cmVNaXNzaW5nTWV0aG9kcygpO1xuXG4gICAgICAgICAgICAgICAgdmFyIHNldERyaXZlclN1cHBvcnQgPSBmdW5jdGlvbiBzZXREcml2ZXJTdXBwb3J0KHN1cHBvcnQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKERlZmluZWREcml2ZXJzW2RyaXZlck5hbWVdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmluZm8oJ1JlZGVmaW5pbmcgTG9jYWxGb3JhZ2UgZHJpdmVyOiAnICsgZHJpdmVyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgRGVmaW5lZERyaXZlcnNbZHJpdmVyTmFtZV0gPSBkcml2ZXJPYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIERyaXZlclN1cHBvcnRbZHJpdmVyTmFtZV0gPSBzdXBwb3J0O1xuICAgICAgICAgICAgICAgICAgICAvLyBkb24ndCB1c2UgYSB0aGVuLCBzbyB0aGF0IHdlIGNhbiBkZWZpbmVcbiAgICAgICAgICAgICAgICAgICAgLy8gZHJpdmVycyB0aGF0IGhhdmUgc2ltcGxlIF9zdXBwb3J0IG1ldGhvZHNcbiAgICAgICAgICAgICAgICAgICAgLy8gaW4gYSBibG9ja2luZyBtYW5uZXJcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZiAoJ19zdXBwb3J0JyBpbiBkcml2ZXJPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRyaXZlck9iamVjdC5fc3VwcG9ydCAmJiB0eXBlb2YgZHJpdmVyT2JqZWN0Ll9zdXBwb3J0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkcml2ZXJPYmplY3QuX3N1cHBvcnQoKS50aGVuKHNldERyaXZlclN1cHBvcnQsIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXREcml2ZXJTdXBwb3J0KCEhZHJpdmVyT2JqZWN0Ll9zdXBwb3J0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNldERyaXZlclN1cHBvcnQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBMb2NhbEZvcmFnZS5wcm90b3R5cGUuZHJpdmVyID0gZnVuY3Rpb24gZHJpdmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZHJpdmVyIHx8IG51bGw7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5nZXREcml2ZXIgPSBmdW5jdGlvbiBnZXREcml2ZXIoZHJpdmVyTmFtZSwgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGdldERyaXZlclByb21pc2UgPSBEZWZpbmVkRHJpdmVyc1tkcml2ZXJOYW1lXSA/IFByb21pc2UkMS5yZXNvbHZlKERlZmluZWREcml2ZXJzW2RyaXZlck5hbWVdKSA6IFByb21pc2UkMS5yZWplY3QobmV3IEVycm9yKCdEcml2ZXIgbm90IGZvdW5kLicpKTtcblxuICAgICAgICBleGVjdXRlVHdvQ2FsbGJhY2tzKGdldERyaXZlclByb21pc2UsIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIGdldERyaXZlclByb21pc2U7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5nZXRTZXJpYWxpemVyID0gZnVuY3Rpb24gZ2V0U2VyaWFsaXplcihjYWxsYmFjaykge1xuICAgICAgICB2YXIgc2VyaWFsaXplclByb21pc2UgPSBQcm9taXNlJDEucmVzb2x2ZShsb2NhbGZvcmFnZVNlcmlhbGl6ZXIpO1xuICAgICAgICBleGVjdXRlVHdvQ2FsbGJhY2tzKHNlcmlhbGl6ZXJQcm9taXNlLCBjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiBzZXJpYWxpemVyUHJvbWlzZTtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLnJlYWR5ID0gZnVuY3Rpb24gcmVhZHkoY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHZhciBwcm9taXNlID0gc2VsZi5fZHJpdmVyU2V0LnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHNlbGYuX3JlYWR5ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5fcmVhZHkgPSBzZWxmLl9pbml0RHJpdmVyKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9yZWFkeTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZXhlY3V0ZVR3b0NhbGxiYWNrcyhwcm9taXNlLCBjYWxsYmFjaywgY2FsbGJhY2spO1xuICAgICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLnNldERyaXZlciA9IGZ1bmN0aW9uIHNldERyaXZlcihkcml2ZXJzLCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjaykge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFpc0FycmF5KGRyaXZlcnMpKSB7XG4gICAgICAgICAgICBkcml2ZXJzID0gW2RyaXZlcnNdO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN1cHBvcnRlZERyaXZlcnMgPSB0aGlzLl9nZXRTdXBwb3J0ZWREcml2ZXJzKGRyaXZlcnMpO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNldERyaXZlclRvQ29uZmlnKCkge1xuICAgICAgICAgICAgc2VsZi5fY29uZmlnLmRyaXZlciA9IHNlbGYuZHJpdmVyKCk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBleHRlbmRTZWxmV2l0aERyaXZlcihkcml2ZXIpIHtcbiAgICAgICAgICAgIHNlbGYuX2V4dGVuZChkcml2ZXIpO1xuICAgICAgICAgICAgc2V0RHJpdmVyVG9Db25maWcoKTtcblxuICAgICAgICAgICAgc2VsZi5fcmVhZHkgPSBzZWxmLl9pbml0U3RvcmFnZShzZWxmLl9jb25maWcpO1xuICAgICAgICAgICAgcmV0dXJuIHNlbGYuX3JlYWR5O1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaW5pdERyaXZlcihzdXBwb3J0ZWREcml2ZXJzKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50RHJpdmVySW5kZXggPSAwO1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gZHJpdmVyUHJvbWlzZUxvb3AoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlIChjdXJyZW50RHJpdmVySW5kZXggPCBzdXBwb3J0ZWREcml2ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRyaXZlck5hbWUgPSBzdXBwb3J0ZWREcml2ZXJzW2N1cnJlbnREcml2ZXJJbmRleF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RHJpdmVySW5kZXgrKztcblxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fZGJJbmZvID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuX3JlYWR5ID0gbnVsbDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0RHJpdmVyKGRyaXZlck5hbWUpLnRoZW4oZXh0ZW5kU2VsZldpdGhEcml2ZXIpW1wiY2F0Y2hcIl0oZHJpdmVyUHJvbWlzZUxvb3ApO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0RHJpdmVyVG9Db25maWcoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKCdObyBhdmFpbGFibGUgc3RvcmFnZSBtZXRob2QgZm91bmQuJyk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuX2RyaXZlclNldCA9IFByb21pc2UkMS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5fZHJpdmVyU2V0O1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHJldHVybiBkcml2ZXJQcm9taXNlTG9vcCgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZXJlIG1pZ2h0IGJlIGEgZHJpdmVyIGluaXRpYWxpemF0aW9uIGluIHByb2dyZXNzXG4gICAgICAgIC8vIHNvIHdhaXQgZm9yIGl0IHRvIGZpbmlzaCBpbiBvcmRlciB0byBhdm9pZCBhIHBvc3NpYmxlXG4gICAgICAgIC8vIHJhY2UgY29uZGl0aW9uIHRvIHNldCBfZGJJbmZvXG4gICAgICAgIHZhciBvbGREcml2ZXJTZXREb25lID0gdGhpcy5fZHJpdmVyU2V0ICE9PSBudWxsID8gdGhpcy5fZHJpdmVyU2V0W1wiY2F0Y2hcIl0oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UkMS5yZXNvbHZlKCk7XG4gICAgICAgIH0pIDogUHJvbWlzZSQxLnJlc29sdmUoKTtcblxuICAgICAgICB0aGlzLl9kcml2ZXJTZXQgPSBvbGREcml2ZXJTZXREb25lLnRoZW4oZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRyaXZlck5hbWUgPSBzdXBwb3J0ZWREcml2ZXJzWzBdO1xuICAgICAgICAgICAgc2VsZi5fZGJJbmZvID0gbnVsbDtcbiAgICAgICAgICAgIHNlbGYuX3JlYWR5ID0gbnVsbDtcblxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0RHJpdmVyKGRyaXZlck5hbWUpLnRoZW4oZnVuY3Rpb24gKGRyaXZlcikge1xuICAgICAgICAgICAgICAgIHNlbGYuX2RyaXZlciA9IGRyaXZlci5fZHJpdmVyO1xuICAgICAgICAgICAgICAgIHNldERyaXZlclRvQ29uZmlnKCk7XG4gICAgICAgICAgICAgICAgc2VsZi5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5KCk7XG4gICAgICAgICAgICAgICAgc2VsZi5faW5pdERyaXZlciA9IGluaXREcml2ZXIoc3VwcG9ydGVkRHJpdmVycyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSlbXCJjYXRjaFwiXShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZXREcml2ZXJUb0NvbmZpZygpO1xuICAgICAgICAgICAgdmFyIGVycm9yID0gbmV3IEVycm9yKCdObyBhdmFpbGFibGUgc3RvcmFnZSBtZXRob2QgZm91bmQuJyk7XG4gICAgICAgICAgICBzZWxmLl9kcml2ZXJTZXQgPSBQcm9taXNlJDEucmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybiBzZWxmLl9kcml2ZXJTZXQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGV4ZWN1dGVUd29DYWxsYmFja3ModGhpcy5fZHJpdmVyU2V0LCBjYWxsYmFjaywgZXJyb3JDYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzLl9kcml2ZXJTZXQ7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5zdXBwb3J0cyA9IGZ1bmN0aW9uIHN1cHBvcnRzKGRyaXZlck5hbWUpIHtcbiAgICAgICAgcmV0dXJuICEhRHJpdmVyU3VwcG9ydFtkcml2ZXJOYW1lXTtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLl9leHRlbmQgPSBmdW5jdGlvbiBfZXh0ZW5kKGxpYnJhcnlNZXRob2RzQW5kUHJvcGVydGllcykge1xuICAgICAgICBleHRlbmQodGhpcywgbGlicmFyeU1ldGhvZHNBbmRQcm9wZXJ0aWVzKTtcbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLl9nZXRTdXBwb3J0ZWREcml2ZXJzID0gZnVuY3Rpb24gX2dldFN1cHBvcnRlZERyaXZlcnMoZHJpdmVycykge1xuICAgICAgICB2YXIgc3VwcG9ydGVkRHJpdmVycyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gZHJpdmVycy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIGRyaXZlck5hbWUgPSBkcml2ZXJzW2ldO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3VwcG9ydHMoZHJpdmVyTmFtZSkpIHtcbiAgICAgICAgICAgICAgICBzdXBwb3J0ZWREcml2ZXJzLnB1c2goZHJpdmVyTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHN1cHBvcnRlZERyaXZlcnM7XG4gICAgfTtcblxuICAgIExvY2FsRm9yYWdlLnByb3RvdHlwZS5fd3JhcExpYnJhcnlNZXRob2RzV2l0aFJlYWR5ID0gZnVuY3Rpb24gX3dyYXBMaWJyYXJ5TWV0aG9kc1dpdGhSZWFkeSgpIHtcbiAgICAgICAgLy8gQWRkIGEgc3R1YiBmb3IgZWFjaCBkcml2ZXIgQVBJIG1ldGhvZCB0aGF0IGRlbGF5cyB0aGUgY2FsbCB0byB0aGVcbiAgICAgICAgLy8gY29ycmVzcG9uZGluZyBkcml2ZXIgbWV0aG9kIHVudGlsIGxvY2FsRm9yYWdlIGlzIHJlYWR5LiBUaGVzZSBzdHVic1xuICAgICAgICAvLyB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBkcml2ZXIgbWV0aG9kcyBhcyBzb29uIGFzIHRoZSBkcml2ZXIgaXNcbiAgICAgICAgLy8gbG9hZGVkLCBzbyB0aGVyZSBpcyBubyBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBMaWJyYXJ5TWV0aG9kcy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgY2FsbFdoZW5SZWFkeSh0aGlzLCBMaWJyYXJ5TWV0aG9kc1tpXSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgTG9jYWxGb3JhZ2UucHJvdG90eXBlLmNyZWF0ZUluc3RhbmNlID0gZnVuY3Rpb24gY3JlYXRlSW5zdGFuY2Uob3B0aW9ucykge1xuICAgICAgICByZXR1cm4gbmV3IExvY2FsRm9yYWdlKG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICByZXR1cm4gTG9jYWxGb3JhZ2U7XG59KCk7XG5cbi8vIFRoZSBhY3R1YWwgbG9jYWxGb3JhZ2Ugb2JqZWN0IHRoYXQgd2UgZXhwb3NlIGFzIGEgbW9kdWxlIG9yIHZpYSBhXG4vLyBnbG9iYWwuIEl0J3MgZXh0ZW5kZWQgYnkgcHVsbGluZyBpbiBvbmUgb2Ygb3VyIG90aGVyIGxpYnJhcmllcy5cblxuXG52YXIgbG9jYWxmb3JhZ2VfanMgPSBuZXcgTG9jYWxGb3JhZ2UoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBsb2NhbGZvcmFnZV9qcztcblxufSx7XCIzXCI6M31dfSx7fSxbNF0pKDQpXG59KTtcbiIsImltcG9ydCBsb2NhbGZvcmFnZSBmcm9tIFwibG9jYWxmb3JhZ2VcIjtcclxuaW1wb3J0IHtcclxuICBnZXRDdXJyZW50VGFzayxcclxuICBoYW5kbGVUYXNrcyxcclxuICByZW1vdmVDdXJyZW50VGFzayxcclxuICBzZXRDdXJyZW50VGFzayxcclxuICBUYXNrLFxyXG4gIHRhc2tNYXAsXHJcbiAgVGFza1BhcmFtcyxcclxufSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgQmluZFJlZiwgY3JlYXRlRWxlbSwgZSB9IGZyb20gXCIuLi9saWIvVUlUb29sc1wiO1xyXG5cclxuY29uc3QgdGFza1dpbmRvd0luZm9zOiBCaW5kUmVmPEhUTUxQYXJhZ3JhcGhFbGVtZW50PiA9IHt9O1xyXG5jb25zdCB0YXNrV2luZG93UmVzdW1lQnV0dG9uUmVmOiBCaW5kUmVmPEhUTUxCdXR0b25FbGVtZW50PiA9IHt9O1xyXG5cclxuY29uc3QgX3Rhc2tXaW5kb3dSZWY6IEJpbmRSZWY8SFRNTERpdkVsZW1lbnQ+ID0ge307XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRUYXNrV2luZG93KCkge1xyXG4gIF90YXNrV2luZG93UmVmLmN1cnJlbnQgPSBlKGRvY3VtZW50LmJvZHkpLmFkZEVsZW0oXHJcbiAgICBcImRpdlwiLFxyXG4gICAge1xyXG4gICAgICBhc3luYyBvbmNsaWNrKCkge1xyXG4gICAgICAgIGlmIChjb25maXJtKFwiw4p0ZXMgdm91cyBzw7tyIGRlIHZvdWxvaXIgYXJyw6p0ZXIgbCdleGVjdXRpb24gZGUgbGEgdMOiY2hlIGNvdXJhbnRlP1wiKSkge1xyXG4gICAgICAgICAgYXdhaXQgbG9jYWxmb3JhZ2Uuc2V0SXRlbShcIkxUU2hvdWxkU3RvcFRhc2tcIiwgdHJ1ZSk7XHJcbiAgICAgICAgICBhd2FpdCByZW1vdmVDdXJyZW50VGFzaygpO1xyXG4gICAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICAgIFwiTGEgdMOiY2hlIGEgw6l0w6kgYW5udWzDqWUgZW4gY291cnMgZCfDqXhlY3V0aW9uLiBWZXVpbGxleiB2w6lyaWZpZXIgbCfDqXRhdCBkZXMgZG9ubsOpZXMuXCJcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgICBzdHlsZToge1xyXG4gICAgICAgIHBvc2l0aW9uOiBcImZpeGVkXCIsXHJcbiAgICAgICAgdG9wOiBcIjBcIixcclxuICAgICAgICByaWdodDogXCIwXCIsXHJcbiAgICAgICAgdmlzaWJpbGl0eTogXCJoaWRkZW5cIixcclxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IFwicGlua1wiLFxyXG4gICAgICAgIG1pbldpZHRoOiBcIjM1MHB4XCIsXHJcbiAgICAgICAgY3Vyc29yOiBcInBvaW50ZXJcIixcclxuICAgICAgICBwYWRkaW5nOiBcIjEwcHhcIixcclxuICAgICAgICB6SW5kZXg6IFwiOTk5XCIsXHJcbiAgICAgICAgb3ZlcmZsb3c6IFwiaGlkZGVuXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY3JlYXRlRWxlbShcclxuICAgICAgXCJidXR0b25cIixcclxuICAgICAge1xyXG4gICAgICAgIHN0eWxlOiB7IGZsb2F0OiBcInJpZ2h0XCIsIGZvbnRXZWlnaHQ6IFwiYm9sZFwiIH0sXHJcbiAgICAgICAgb25jbGljayhlKSB7XHJcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgX3Rhc2tXaW5kb3dSZWYuY3VycmVudCEuc3R5bGUuaGVpZ2h0ID0gX3Rhc2tXaW5kb3dSZWYuY3VycmVudCEuc3R5bGUuaGVpZ2h0ID8gXCJcIiA6IFwiNWVtXCI7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCJfX1wiXHJcbiAgICApLFxyXG4gICAgY3JlYXRlRWxlbShcImg0XCIsIG51bGwsIFwiVMOCQ0hFIEVOIENPVVJTLFwiLCBjcmVhdGVFbGVtKFwiYnJcIiksIFwiQ0xJUVVFWiBJQ0kgUE9VUiBBTk5VTEVSXCIpLFxyXG4gICAgY3JlYXRlRWxlbShcInBcIiwgeyBiaW5kVG86IHRhc2tXaW5kb3dJbmZvcywgc3R5bGU6IHsgd2hpdGVTcGFjZTogXCJwcmVcIiB9IH0pLFxyXG4gICAgY3JlYXRlRWxlbShcclxuICAgICAgXCJidXR0b25cIixcclxuICAgICAge1xyXG4gICAgICAgIGJpbmRUbzogdGFza1dpbmRvd1Jlc3VtZUJ1dHRvblJlZixcclxuICAgICAgICBzdHlsZTogeyBkaXNwbGF5OiBcIm5vbmVcIiB9LFxyXG4gICAgICAgIGFzeW5jIG9uY2xpY2soZSkge1xyXG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBnZXRDdXJyZW50VGFzaygpO1xyXG4gICAgICAgICAgaWYgKCF0YXNrKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgYXdhaXQgc2V0Q3VycmVudFRhc2soe1xyXG4gICAgICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgICAgICBpc1BhdXNlZDogZmFsc2UsXHJcbiAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICBoYW5kbGVUYXNrcygpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIFwiQ29udGludWVyIGxhIHTDomNoZVwiXHJcbiAgICApXHJcbiAgKTtcclxufVxyXG5sZXQgX2xhc3RUYXNrUGFyYW1zOiBUYXNrUGFyYW1zIHwgdW5kZWZpbmVkO1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFRhc2tXaW5kb3codGFzazogVGFzayB8IG51bGwpIHtcclxuICBpZiAoIV90YXNrV2luZG93UmVmLmN1cnJlbnQpIHJldHVybjtcclxuICBpZiAoIXRhc2sgJiYgdGFzayAhPT0gbnVsbCkgdGFzayA9IGF3YWl0IGdldEN1cnJlbnRUYXNrKCk7XHJcbiAgaWYgKCF0YXNrKSB7XHJcbiAgICBfdGFza1dpbmRvd1JlZi5jdXJyZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgX3Rhc2tXaW5kb3dSZWYuY3VycmVudC5zdHlsZS52aXNpYmlsaXR5ID0gXCJ2aXNpYmxlXCI7XHJcblxyXG4gIGNvbnN0IHRhc2tQYXJhbXM6IFRhc2tQYXJhbXMgPSB0YXNrTWFwW3Rhc2submFtZV07XHJcblxyXG4gIGlmIChfbGFzdFRhc2tQYXJhbXMgIT09IHRhc2tQYXJhbXMpIHtcclxuICAgIF9sYXN0VGFza1BhcmFtcz8uYWN0aW9uc0VsZW1zPy5mb3JFYWNoKChlKSA9PiBlLnJlbW92ZSgpKTtcclxuICAgIHRhc2tQYXJhbXMuYWN0aW9uc0VsZW1zPy5mb3JFYWNoKChlKSA9PiBfdGFza1dpbmRvd1JlZi5jdXJyZW50IS5hcHBlbmRDaGlsZChlKSk7XHJcbiAgICBfbGFzdFRhc2tQYXJhbXMgPSB0YXNrUGFyYW1zO1xyXG4gIH1cclxuXHJcbiAgaWYgKHRhc2tXaW5kb3dSZXN1bWVCdXR0b25SZWYuY3VycmVudClcclxuICAgIHRhc2tXaW5kb3dSZXN1bWVCdXR0b25SZWYuY3VycmVudC5zdHlsZS5kaXNwbGF5ID0gdGFzay5pc1BhdXNlZCA/IFwiYmxvY2tcIiA6IFwibm9uZVwiO1xyXG5cclxuICBpZiAodGFza1dpbmRvd0luZm9zLmN1cnJlbnQpXHJcbiAgICB0YXNrV2luZG93SW5mb3MuY3VycmVudC50ZXh0Q29udGVudCA9XHJcbiAgICAgIFwiTm9tOiBcIiArXHJcbiAgICAgIHRhc2submFtZSArXHJcbiAgICAgIFwiXFxuXCIgK1xyXG4gICAgICBcIkRlc2NyaXB0aW9uOiBcIiArXHJcbiAgICAgICh0YXNrLmRlc2NyaXB0aW9uID8/IFwiKG5vIGRlc2NyaXB0aW9uKVwiKSArXHJcbiAgICAgIFwiXFxuXCIgK1xyXG4gICAgICBcIkTDqW1hcnLDqSBsZTogXCIgK1xyXG4gICAgICBuZXcgRGF0ZSh0YXNrLnN0YXJ0ZWRBdCkudG9Mb2NhbGVTdHJpbmcoKSArXHJcbiAgICAgIFwiXFxuXFxuXCIgK1xyXG4gICAgICBcIsOJdGFwZTogXCIgK1xyXG4gICAgICB0YXNrLnN0ZXBOYW1lICtcclxuICAgICAgXCJcXG5cIiArXHJcbiAgICAgIFwiw4l0YXBlIGTDqW1hcnLDqWUgbGU6IFwiICtcclxuICAgICAgbmV3IERhdGUodGFzay5zdGVwU3RhcnRlZEF0KS50b0xvY2FsZVN0cmluZygpICtcclxuICAgICAgXCJcXG5cIiArXHJcbiAgICAgICh0YXNrLmlzUGF1c2VkID8gXCJcXG5FTiBQQVVTRVwiIDogXCJcIikgK1xyXG4gICAgICAodGFzay5sYXN0TWVzc2FnZSA/IFwiXFxuRGVybmllciBtZXNzYWdlOiBcIiArIHRhc2subGFzdE1lc3NhZ2UgOiBcIlwiKTtcclxufVxyXG4iLCJpbXBvcnQgeyB0YXNrTWFwIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IEJpbmRSZWYsIGNyZWF0ZUVsZW0gfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuXHJcbmxldCBfZnJvbnREaXZSZWY6IEJpbmRSZWY8SFRNTERpdkVsZW1lbnQ+ID0ge307XHJcbmxldCBfdG9vbFdpbmRvd1JlZjogQmluZFJlZjxIVE1MRGl2RWxlbWVudD4gPSB7fTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBUb29sV2luZG93KHJlZjogQmluZFJlZjxIVE1MRGl2RWxlbWVudD4sIGZyb250RGl2UmVmOiBCaW5kUmVmPEhUTUxEaXZFbGVtZW50Pikge1xyXG4gIF9mcm9udERpdlJlZiA9IGZyb250RGl2UmVmO1xyXG4gIF90b29sV2luZG93UmVmID0gcmVmO1xyXG4gIHJldHVybiBjcmVhdGVFbGVtKFxyXG4gICAgXCJkaXZcIixcclxuICAgIHtcclxuICAgICAgYmluZFRvOiByZWYsXHJcbiAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgXCItLXdpZHRoXCI6IFwibWluKDkwdncsIDYwMHB4KVwiLFxyXG4gICAgICAgIGRpc3BsYXk6IFwiaW5saW5lLWJsb2NrXCIsXHJcbiAgICAgICAgdmlzaWJpbGl0eTogXCJoaWRkZW5cIixcclxuICAgICAgICBwb3NpdGlvbjogXCJyZWxhdGl2ZVwiLFxyXG4gICAgICAgIG1hcmdpbjogXCI1MHB4XCIsXHJcbiAgICAgICAgbGVmdDogXCJjYWxjKDUwdncgLSBjYWxjKHZhcigtLXdpZHRoKSAvIDIpKVwiLFxyXG4gICAgICAgIHdpZHRoOiBcInZhcigtLXdpZHRoKVwiLFxyXG4gICAgICAgIG1pbkhlaWdodDogXCIyMDBweFwiLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCJ3aGl0ZVwiLFxyXG4gICAgICAgIGJvcmRlcjogXCIxcHggc29saWQgZ3JheVwiLFxyXG4gICAgICAgIGJveFNoYWRvdzogXCI1cHggNXB4IDEwcHggIzAwMGFcIixcclxuICAgICAgICBwYWRkaW5nOiBcIjAgMTBweFwiLFxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiZGl2XCIsXHJcbiAgICAgIHtcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXHJcbiAgICAgICAgICBmbGV4RmxvdzogXCJyb3cgbm93cmFwXCIsXHJcbiAgICAgICAgICBqdXN0aWZ5Q29udGVudDogXCJzcGFjZS1iZXR3ZWVuXCIsXHJcbiAgICAgICAgICBib3JkZXJCb3R0b206IFwiMXB4IHNvbGlkIGxpZ2h0Z3JheVwiLFxyXG4gICAgICAgICAgZm9udFNpemU6IFwiMS41ZW1cIixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVFbGVtKFwiaDJcIiwgbnVsbCwgXCJPdXRpbHNcIiksXHJcbiAgICAgIGNyZWF0ZUVsZW0oXCJidXR0b25cIiwgeyBvbmNsaWNrOiBoaWRlV2luZG93IH0sIFwiWFwiKVxyXG4gICAgKSxcclxuICAgIC4uLk9iamVjdC52YWx1ZXModGFza01hcCkuZmxhdE1hcCgoeyB3aW5kb3dTZWN0aW9uQ29tcG9uZW50IH0pID0+XHJcbiAgICAgIHdpbmRvd1NlY3Rpb25Db21wb25lbnQgPyBbd2luZG93U2VjdGlvbkNvbXBvbmVudCgpXSA6IFtdXHJcbiAgICApXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhpZGVXaW5kb3coKSB7XHJcbiAgaWYgKCFfZnJvbnREaXZSZWYuY3VycmVudCB8fCAhX3Rvb2xXaW5kb3dSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gIF9mcm9udERpdlJlZi5jdXJyZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcImhpZGRlblwiO1xyXG4gIF90b29sV2luZG93UmVmLmN1cnJlbnQuc3R5bGUudmlzaWJpbGl0eSA9IFwiaGlkZGVuXCI7XHJcbn1cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dXaW5kb3coKSB7XHJcbiAgaWYgKCFfZnJvbnREaXZSZWYuY3VycmVudCB8fCAhX3Rvb2xXaW5kb3dSZWYuY3VycmVudCkgcmV0dXJuO1xyXG4gIF9mcm9udERpdlJlZi5jdXJyZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxuICBfdG9vbFdpbmRvd1JlZi5jdXJyZW50LnN0eWxlLnZpc2liaWxpdHkgPSBcInZpc2libGVcIjtcclxufVxyXG4iLCJpbXBvcnQgeyByZWFkIGFzIHJlYWRYTFNYLCB1dGlscyBhcyBYTFNYVXRpbHMgfSBmcm9tIFwieGxzeFwiO1xyXG5pbXBvcnQgeyBzZXROZXdUYXNrIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IEJpbmRSZWYsIGNyZWF0ZUVsZW0sIHByb21wdEluZGV4IH0gZnJvbSBcIi4uL2xpYi9VSVRvb2xzXCI7XHJcbmltcG9ydCB7IG5hbWVkTG9nLCBvYmplY3RDb250YWluc0tleXMgfSBmcm9tIFwiLi4vbGliL3V0aWxzXCI7XHJcbmltcG9ydCB7IEFkZE90aGVyUHJlc3RDb250cmFjdCwgQWRkT3RoZXJQcmVzdFNoYXJlZERhdGEgfSBmcm9tIFwiLi4vdGFza3MvYWRkT3RoZXJQcmVzdHNcIjtcclxuaW1wb3J0IHsgaGlkZVdpbmRvdyB9IGZyb20gXCIuL1Rvb2xzV2luZG93XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gV2luZG93QWRkT3RoZXJQcmVzdFNlY3Rpb24oKSB7XHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uUmVmOiBCaW5kUmVmPEhUTUxCdXR0b25FbGVtZW50PiA9IHt9O1xyXG4gIGNvbnN0IGZvcm1SZWY6IEJpbmRSZWY8SFRNTEZvcm1FbGVtZW50PiA9IHt9O1xyXG5cclxuICBhc3luYyBmdW5jdGlvbiBvblN1Ym1pdChldnQ6IFN1Ym1pdEV2ZW50KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoIXN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50IHx8ICFmb3JtUmVmLmN1cnJlbnQpIHtcclxuICAgICAgYWxlcnQoXCJlcnJldXIgZCdpbml0aWFsaXNhdGlvblwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHR5cGUgRm9ybUVudHJpZXMgPSB7XHJcbiAgICAgIHdyb25nQ29udHJhY3RzOiBGaWxlO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhuZXcgRm9ybURhdGEoZm9ybVJlZi5jdXJyZW50KS5lbnRyaWVzKCkpIGFzIEZvcm1FbnRyaWVzO1xyXG5cclxuICAgIGlmICghZm9ybURhdGEud3JvbmdDb250cmFjdHMpIHtcclxuICAgICAgYWxlcnQoXCJNZXJjaSBkZSBkw6lwb3NlciB0b3VzIGxlcyBmaWNoaWVyc1wiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c0J1ZmZlciA9IGF3YWl0IGZvcm1EYXRhLndyb25nQ29udHJhY3RzLmFycmF5QnVmZmVyKCk7XHJcblxyXG4gICAgY29uc3Qgd3JvbmdDb250cmFjdHNXb3JrYm9vayA9IHJlYWRYTFNYKHdyb25nQ29udHJhY3RzQnVmZmVyKTtcclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRXcm9uZ0NvbnRyYWN0c1NoZWV0ID0gMDtcclxuICAgIGlmICh3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICBjb25zdCBwcm9tcHRSZXMgPSBwcm9tcHRJbmRleChcclxuICAgICAgICBcIlRhYmxldXIgZGVzIGNvbnRyYXRzIGluY29tcGzDqnRzOiBTw6lsZWN0aW9ubmV6IGxhIGZldWlsbGUgZGUgZG9ubsOpZXNcIixcclxuICAgICAgICB3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXMsXHJcbiAgICAgICAgMCxcclxuICAgICAgICB0cnVlXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChwcm9tcHRSZXMgPT09IG51bGwpIHtcclxuICAgICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZWxlY3RlZFdyb25nQ29udHJhY3RzU2hlZXQgPSBwcm9tcHRSZXM7XHJcbiAgICB9XHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c1NoZWV0ID1cclxuICAgICAgd3JvbmdDb250cmFjdHNXb3JrYm9vay5TaGVldHNbd3JvbmdDb250cmFjdHNXb3JrYm9vay5TaGVldE5hbWVzW3NlbGVjdGVkV3JvbmdDb250cmFjdHNTaGVldF1dO1xyXG5cclxuICAgIGNvbnN0IHdyb25nQ29udHJhY3RzSlNPTjogQWRkT3RoZXJQcmVzdENvbnRyYWN0W10gPVxyXG4gICAgICBYTFNYVXRpbHMuc2hlZXRfdG9fanNvbih3cm9uZ0NvbnRyYWN0c1NoZWV0KTtcclxuICAgIGlmIChcclxuICAgICAgIUFycmF5LmlzQXJyYXkod3JvbmdDb250cmFjdHNKU09OKSB8fFxyXG4gICAgICAhb2JqZWN0Q29udGFpbnNLZXlzKHdyb25nQ29udHJhY3RzSlNPTlswXSwgW1wiYyBJRFwiXSlcclxuICAgICkge1xyXG4gICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBhbGVydChcIkxlIGZpY2hpZXIgZGUgY29udHJhdHMgZXN0IHZpZGUgb3UgY29ycm9tcHUuIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udHJhY3RzQnlJZCA9IE9iamVjdC5mcm9tRW50cmllcyh3cm9uZ0NvbnRyYWN0c0pTT04ubWFwKCh3YykgPT4gW3djW1wiYyBJRFwiXSwgd2NdKSk7XHJcblxyXG4gICAgbmFtZWRMb2coeyB3cm9uZ0NvbnRyYWN0c0pTT04sIGNvbnRyYWN0c0J5SWQgfSk7XHJcblxyXG4gICAgY29uc3QgY29udHJhY3RzSWRzVG9IYW5kbGUgPSBPYmplY3Qua2V5cyhjb250cmFjdHNCeUlkKVxyXG4gICAgICAubWFwKE51bWJlcilcclxuICAgICAgLnNvcnQoKGEsIGIpID0+IGEgLSBiKTtcclxuICAgIC8vIC5zbGljZSgxMjcpOyAvL2RlYnVnXHJcblxyXG4gICAgY29uc3QgdGFza0RhdGE6IEFkZE90aGVyUHJlc3RTaGFyZWREYXRhID0ge1xyXG4gICAgICBjb250cmFjdHM6IGNvbnRyYWN0c0J5SWQsXHJcbiAgICAgIGNvbnRyYWN0SWRzOiBjb250cmFjdHNJZHNUb0hhbmRsZSxcclxuICAgICAgZG9uZUNvbnRyYWN0czogW10sXHJcbiAgICB9O1xyXG5cclxuICAgIHNldE5ld1Rhc2soXCJhZGRPdGhlclByZXN0XCIsIHRhc2tEYXRhLCB1bmRlZmluZWQsIFwiUmVtcGxpc3NhZ2UgZGVzIGNvbnRyYXRzIHNhbnMgY2xhc3NlLlwiKTtcclxuXHJcbiAgICBoaWRlV2luZG93KCk7XHJcbiAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNyZWF0ZUVsZW0oXHJcbiAgICBcInBcIixcclxuICAgIG51bGwsXHJcbiAgICBjcmVhdGVFbGVtKFwiaDNcIiwgbnVsbCwgXCJBam91dCBhdXRvbWF0aXF1ZSBkZXMgJ2F1dHJlcyBwcmVzdGF0aW9ucycgJ0FpZGUgaW5kaXZpZHVlbGxlJ1wiKSxcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiZm9ybVwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgb25zdWJtaXQ6IG9uU3VibWl0LFxyXG4gICAgICAgIGJpbmRUbzogZm9ybVJlZixcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgYm9yZGVyTGVmdDogXCIzcHggc29saWQgZ3JheVwiLFxyXG4gICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiLFxyXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXHJcbiAgICAgICAgICBmbGV4RmxvdzogXCJjb2x1bW5cIixcclxuICAgICAgICAgIGFsaWduSXRlbXM6IFwiZmxleC1zdGFydFwiLFxyXG4gICAgICAgICAgZ2FwOiBcIjEwcHhcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVFbGVtKFxyXG4gICAgICAgIFwibGFiZWxcIixcclxuICAgICAgICB7IGh0bWxGb3I6IFwiaW5wdXRXcm9uZ0NvbnRyYWN0c1wiIH0sXHJcbiAgICAgICAgXCJGZXVpbGxlIEV4Y2VsIGF2ZWMgbGVzIGNvbnRyYXRzIGluY29tcGzDqHRzIChjIElEKVwiXHJcbiAgICAgICksXHJcbiAgICAgIGNyZWF0ZUVsZW0oXCJpbnB1dFwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJ3cm9uZ0NvbnRyYWN0c1wiLFxyXG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxyXG4gICAgICAgIGFjY2VwdDogXCIueGxzeCwgLnhsc20sIC54bHNcIixcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBpZDogXCJpbnB1dFdyb25nQ29udHJhY3RzXCIsXHJcbiAgICAgIH0pLFxyXG4gICAgICBjcmVhdGVFbGVtKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJzdWJtaXRcIiwgYmluZFRvOiBzdWJtaXRCdXR0b25SZWYgfSwgXCJEw6ltYXJyZXJcIilcclxuICAgIClcclxuICApO1xyXG59XHJcbiIsImltcG9ydCB7IHJlYWQgYXMgcmVhZFhMU1gsIHV0aWxzIGFzIFhMU1hVdGlscyB9IGZyb20gXCJ4bHN4XCI7XHJcbmltcG9ydCB7IHNldE5ld1Rhc2sgfSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgQmluZFJlZiwgY3JlYXRlRWxlbSwgcHJvbXB0SW5kZXggfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuaW1wb3J0IHsgbmFtZWRMb2csIG9iamVjdENvbnRhaW5zS2V5cyB9IGZyb20gXCIuLi9saWIvdXRpbHNcIjtcclxuaW1wb3J0IHsgQXBwbHlDb250cmFjdFNoYXJlZERhdGEgfSBmcm9tIFwiLi4vdGFza3MvYXBwbHlDb250cmFjdFwiO1xyXG5pbXBvcnQge1xyXG4gIENoYW5nZU1vdGl2ZUNvbnRyYWN0LFxyXG4gIENoYW5nZU1vdGl2ZVNoYXJlZERhdGEsXHJcbiAgQ2hhbmdlTW90aXZlVGFzayxcclxufSBmcm9tIFwiLi4vdGFza3MvY2hhbmdlTW90aXZlXCI7XHJcbmltcG9ydCB7IGhpZGVXaW5kb3cgfSBmcm9tIFwiLi9Ub29sc1dpbmRvd1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFdpbmRvd0FwcGx5Q29udHJhY3RTZWN0aW9uKCkge1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvblJlZjogQmluZFJlZjxIVE1MQnV0dG9uRWxlbWVudD4gPSB7fTtcclxuICBjb25zdCBmb3JtUmVmOiBCaW5kUmVmPEhUTUxGb3JtRWxlbWVudD4gPSB7fTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gb25TdWJtaXQoZXZ0OiBTdWJtaXRFdmVudCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKCFzdWJtaXRCdXR0b25SZWYuY3VycmVudCB8fCAhZm9ybVJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGFsZXJ0KFwiZXJyZXVyIGQnaW5pdGlhbGlzYXRpb25cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0eXBlIEZvcm1FbnRyaWVzID0ge1xyXG4gICAgICBjb250cmFjdHM6IEZpbGU7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGZvcm1EYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKG5ldyBGb3JtRGF0YShmb3JtUmVmLmN1cnJlbnQpLmVudHJpZXMoKSkgYXMgRm9ybUVudHJpZXM7XHJcblxyXG4gICAgaWYgKCFmb3JtRGF0YS5jb250cmFjdHMpIHtcclxuICAgICAgYWxlcnQoXCJNZXJjaSBkZSBkw6lwb3NlciB0b3VzIGxlcyBmaWNoaWVyc1wiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBjb250cmFjdHNCdWZmZXIgPSBhd2FpdCBmb3JtRGF0YS5jb250cmFjdHMuYXJyYXlCdWZmZXIoKTtcclxuXHJcbiAgICBjb25zdCBjb250cmFjdHNXb3JrYm9vayA9IHJlYWRYTFNYKGNvbnRyYWN0c0J1ZmZlcik7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkQ29udHJhY3RzU2hlZXQgPSAwO1xyXG4gICAgaWYgKGNvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICBjb25zdCBwcm9tcHRSZXMgPSBwcm9tcHRJbmRleChcclxuICAgICAgICBcIlRhYmxldXIgZGVzIGNvbnRyYXRzIGluY29tcGzDqnRzOiBTw6lsZWN0aW9ubmV6IGxhIGZldWlsbGUgZGUgZG9ubsOpZXNcIixcclxuICAgICAgICBjb250cmFjdHNXb3JrYm9vay5TaGVldE5hbWVzLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgdHJ1ZVxyXG4gICAgICApO1xyXG4gICAgICBpZiAocHJvbXB0UmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgc2VsZWN0ZWRDb250cmFjdHNTaGVldCA9IHByb21wdFJlcztcclxuICAgIH1cclxuICAgIGNvbnN0IGNvbnRyYWN0c1NoZWV0ID1cclxuICAgICAgY29udHJhY3RzV29ya2Jvb2suU2hlZXRzW2NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXNbc2VsZWN0ZWRDb250cmFjdHNTaGVldF1dO1xyXG5cclxuICAgIGNvbnN0IGNvbnRyYWN0c0pTT046IENoYW5nZU1vdGl2ZUNvbnRyYWN0W10gPSBYTFNYVXRpbHMuc2hlZXRfdG9fanNvbihjb250cmFjdHNTaGVldCk7XHJcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoY29udHJhY3RzSlNPTikgfHwgIW9iamVjdENvbnRhaW5zS2V5cyhjb250cmFjdHNKU09OWzBdLCBbXCJjIElEXCJdKSkge1xyXG4gICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBhbGVydChcIkxlIGZpY2hpZXIgZGUgY29udHJhdHMgZXN0IHZpZGUgb3UgY29ycm9tcHUuIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udHJhY3RzID0gT2JqZWN0LmZyb21FbnRyaWVzKGNvbnRyYWN0c0pTT04ubWFwKChjKSA9PiBbY1tcImMgSURcIl0sIGNdKSk7XHJcblxyXG4gICAgY29uc3QgY29udHJhY3RJZHNUb0hhbmRsZSA9IGNvbnRyYWN0c0pTT04ubWFwKChjKSA9PiBjW1wiYyBJRFwiXSk7XHJcblxyXG4gICAgbmFtZWRMb2coeyBjb250cmFjdHMgfSk7XHJcblxyXG4gICAgY29uc3QgdGFza0RhdGE6IEFwcGx5Q29udHJhY3RTaGFyZWREYXRhID0ge1xyXG4gICAgICBjb250cmFjdElkc1RvSGFuZGxlLFxyXG4gICAgICBjb250cmFjdHMsXHJcbiAgICAgIGZhaWxlZFNhdmVzSWRzOiBbXSxcclxuICAgIH07XHJcblxyXG4gICAgc2V0TmV3VGFzayhcclxuICAgICAgXCJhcHBseUNvbnRyYWN0XCIsXHJcbiAgICAgIHRhc2tEYXRhLFxyXG4gICAgICB1bmRlZmluZWQsXHJcbiAgICAgIFwiUmVtcGxpc3NhZ2UgZHluYW1pcXVlIGRlcyBjb250cmF0cyBleGlzdGFudHNcIlxyXG4gICAgKTtcclxuXHJcbiAgICBoaWRlV2luZG93KCk7XHJcbiAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNyZWF0ZUVsZW0oXHJcbiAgICBcInBcIixcclxuICAgIG51bGwsXHJcbiAgICBjcmVhdGVFbGVtKFwiaDNcIiwgbnVsbCwgXCJSZW1wbGlzc2FnZSBkeW5hbWlxdWUgZGVzIGNvbnRyYXRzIGV4aXN0YW50c1wiKSxcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiZm9ybVwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgb25zdWJtaXQ6IG9uU3VibWl0LFxyXG4gICAgICAgIGJpbmRUbzogZm9ybVJlZixcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgYm9yZGVyTGVmdDogXCIzcHggc29saWQgZ3JheVwiLFxyXG4gICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiLFxyXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXHJcbiAgICAgICAgICBmbGV4RmxvdzogXCJjb2x1bW5cIixcclxuICAgICAgICAgIGFsaWduSXRlbXM6IFwiZmxleC1zdGFydFwiLFxyXG4gICAgICAgICAgZ2FwOiBcIjEwcHhcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVFbGVtKFxyXG4gICAgICAgIFwibGFiZWxcIixcclxuICAgICAgICB7IGh0bWxGb3I6IFwiaW5wdXRDb250cmFjdHNcIiB9LFxyXG4gICAgICAgIFwiRmV1aWxsZSBFeGNlbCBhdmVjIGxlcyBjb250cmF0cyDDoCBtb2RpZmllciAoYyBJRClcIlxyXG4gICAgICApLFxyXG4gICAgICBjcmVhdGVFbGVtKFwiaW5wdXRcIiwge1xyXG4gICAgICAgIG5hbWU6IFwiY29udHJhY3RzXCIsXHJcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXHJcbiAgICAgICAgYWNjZXB0OiBcIi54bHN4LCAueGxzbSwgLnhsc1wiLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIGlkOiBcImlucHV0Q29udHJhY3RzXCIsXHJcbiAgICAgIH0pLFxyXG4gICAgICBjcmVhdGVFbGVtKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJzdWJtaXRcIiwgYmluZFRvOiBzdWJtaXRCdXR0b25SZWYgfSwgXCJEw6ltYXJyZXJcIilcclxuICAgIClcclxuICApO1xyXG59XHJcbiIsImltcG9ydCB7IHNldE5ld1Rhc2sgfSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgY3JlYXRlRWxlbSB9IGZyb20gXCIuLi9saWIvVUlUb29sc1wiO1xyXG5pbXBvcnQgeyBBcHBseVBlcmNlbnRGYWN0dXJhdGlvblNoYXJlZERhdGEgfSBmcm9tIFwiLi4vdGFza3MvYXBwbHlQZXJjZW50RmFjdHVyYXRpb25cIjtcclxuaW1wb3J0IHsgaGlkZVdpbmRvdyB9IGZyb20gXCIuL1Rvb2xzV2luZG93XCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gV2luZG93QXBwbHlQZXJjZW50RmFjdHVyYXRpb24oKSB7XHJcbiAgcmV0dXJuIGNyZWF0ZUVsZW0oXHJcbiAgICBcInBcIixcclxuICAgIG51bGwsXHJcbiAgICBjcmVhdGVFbGVtKFwiaDNcIiwgbnVsbCwgXCJEZWR1Y3Rpb24gRkFKRSAyMCVcIiksXHJcbiAgICBjcmVhdGVFbGVtKFxyXG4gICAgICBcImZvcm1cIixcclxuICAgICAge1xyXG4gICAgICAgIG9uc3VibWl0OiBvblN1Ym1pdCxcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgYm9yZGVyTGVmdDogXCIzcHggc29saWQgZ3JheVwiLFxyXG4gICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiLFxyXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXHJcbiAgICAgICAgICBmbGV4RmxvdzogXCJjb2x1bW5cIixcclxuICAgICAgICAgIGFsaWduSXRlbXM6IFwiZmxleC1zdGFydFwiLFxyXG4gICAgICAgICAgZ2FwOiBcIjEwcHhcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIkxhbmNleiBsYSBwcm9jw6lkdXJlIGRlcHVpcyBsYSBsaXN0ZSBkZXMgam91cm5hdXggZGUgZmFjdHVyYXRpb25cIixcclxuICAgICAgY3JlYXRlRWxlbShcImJ1dHRvblwiLCB7IHR5cGU6IFwic3VibWl0XCIgfSwgXCJEw6ltYXJyZXJcIilcclxuICAgIClcclxuICApO1xyXG5cclxuICBmdW5jdGlvbiBvblN1Ym1pdChldnQ6IFN1Ym1pdEV2ZW50KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGhpZGVXaW5kb3coKTtcclxuICAgIGNvbnN0IG5ld1Rhc2s6IEFwcGx5UGVyY2VudEZhY3R1cmF0aW9uU2hhcmVkRGF0YSA9IHtcclxuICAgICAgZmFjdHVyZXM6IHt9LFxyXG4gICAgICBpZHNUb0hhbmRsZTogW10sXHJcbiAgICAgIHRleHQ6IFwiRMOpZHVjdGlvbiBGQUpFIDIwJVwiLFxyXG4gICAgfTtcclxuICAgIHNldE5ld1Rhc2soXHJcbiAgICAgIFwiYXBwbHlQZXJjZW50RmFjdHVyYXRpb25cIixcclxuICAgICAgbmV3VGFzayxcclxuICAgICAgdW5kZWZpbmVkLFxyXG4gICAgICBcIkFqb3V0ZSB1biBlbnRyw6llIGRlIHJhYmFpcyDDoCB1bmUgbGlzdGUgZGUgZmFjdHVyZXMuXCJcclxuICAgICk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCB7IHJlYWQgYXMgcmVhZFhMU1gsIHV0aWxzIGFzIFhMU1hVdGlscyB9IGZyb20gXCJ4bHN4XCI7XHJcbmltcG9ydCB7IHNldE5ld1Rhc2sgfSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgQmluZFJlZiwgY3JlYXRlRWxlbSwgcHJvbXB0SW5kZXggfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuaW1wb3J0IHsgbmFtZWRMb2csIG9iamVjdENvbnRhaW5zS2V5cyB9IGZyb20gXCIuLi9saWIvdXRpbHNcIjtcclxuaW1wb3J0IHtcclxuICBDaGFuZ2VNb3RpdmVDb250cmFjdCxcclxuICBDaGFuZ2VNb3RpdmVTaGFyZWREYXRhLFxyXG4gIENoYW5nZU1vdGl2ZVRhc2ssXHJcbn0gZnJvbSBcIi4uL3Rhc2tzL2NoYW5nZU1vdGl2ZVwiO1xyXG5pbXBvcnQgeyBoaWRlV2luZG93IH0gZnJvbSBcIi4vVG9vbHNXaW5kb3dcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBXaW5kb3dDaGFuZ2VNb3RpdmVTZWN0aW9uKCkge1xyXG4gIGNvbnN0IHN1Ym1pdEJ1dHRvblJlZjogQmluZFJlZjxIVE1MQnV0dG9uRWxlbWVudD4gPSB7fTtcclxuICBjb25zdCBmb3JtUmVmOiBCaW5kUmVmPEhUTUxGb3JtRWxlbWVudD4gPSB7fTtcclxuXHJcbiAgYXN5bmMgZnVuY3Rpb24gb25TdWJtaXQoZXZ0OiBTdWJtaXRFdmVudCkge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKCFzdWJtaXRCdXR0b25SZWYuY3VycmVudCB8fCAhZm9ybVJlZi5jdXJyZW50KSB7XHJcbiAgICAgIGFsZXJ0KFwiZXJyZXVyIGQnaW5pdGlhbGlzYXRpb25cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0eXBlIEZvcm1FbnRyaWVzID0ge1xyXG4gICAgICB3cm9uZ0NvbnRyYWN0czogRmlsZTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgZm9ybURhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMobmV3IEZvcm1EYXRhKGZvcm1SZWYuY3VycmVudCkuZW50cmllcygpKSBhcyBGb3JtRW50cmllcztcclxuXHJcbiAgICBpZiAoIWZvcm1EYXRhLndyb25nQ29udHJhY3RzKSB7XHJcbiAgICAgIGFsZXJ0KFwiTWVyY2kgZGUgZMOpcG9zZXIgdG91cyBsZXMgZmljaGllcnNcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgY29uc3Qgd3JvbmdDb250cmFjdHNCdWZmZXIgPSBhd2FpdCBmb3JtRGF0YS53cm9uZ0NvbnRyYWN0cy5hcnJheUJ1ZmZlcigpO1xyXG5cclxuICAgIGNvbnN0IHdyb25nQ29udHJhY3RzV29ya2Jvb2sgPSByZWFkWExTWCh3cm9uZ0NvbnRyYWN0c0J1ZmZlcik7XHJcblxyXG4gICAgbGV0IHNlbGVjdGVkV3JvbmdDb250cmFjdHNTaGVldCA9IDA7XHJcbiAgICBpZiAod3JvbmdDb250cmFjdHNXb3JrYm9vay5TaGVldE5hbWVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgY29uc3QgcHJvbXB0UmVzID0gcHJvbXB0SW5kZXgoXHJcbiAgICAgICAgXCJUYWJsZXVyIGRlcyBjb250cmF0cyBpbmNvbXBsw6p0czogU8OpbGVjdGlvbm5leiBsYSBmZXVpbGxlIGRlIGRvbm7DqWVzXCIsXHJcbiAgICAgICAgd3JvbmdDb250cmFjdHNXb3JrYm9vay5TaGVldE5hbWVzLFxyXG4gICAgICAgIDAsXHJcbiAgICAgICAgdHJ1ZVxyXG4gICAgICApO1xyXG4gICAgICBpZiAocHJvbXB0UmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgc2VsZWN0ZWRXcm9uZ0NvbnRyYWN0c1NoZWV0ID0gcHJvbXB0UmVzO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgd3JvbmdDb250cmFjdHNTaGVldCA9XHJcbiAgICAgIHdyb25nQ29udHJhY3RzV29ya2Jvb2suU2hlZXRzW3dyb25nQ29udHJhY3RzV29ya2Jvb2suU2hlZXROYW1lc1tzZWxlY3RlZFdyb25nQ29udHJhY3RzU2hlZXRdXTtcclxuXHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c0pTT046IENoYW5nZU1vdGl2ZUNvbnRyYWN0W10gPSBYTFNYVXRpbHMuc2hlZXRfdG9fanNvbih3cm9uZ0NvbnRyYWN0c1NoZWV0KTtcclxuICAgIGlmIChcclxuICAgICAgIUFycmF5LmlzQXJyYXkod3JvbmdDb250cmFjdHNKU09OKSB8fFxyXG4gICAgICAhb2JqZWN0Q29udGFpbnNLZXlzKHdyb25nQ29udHJhY3RzSlNPTlswXSwgW1wiYyBJRFwiXSlcclxuICAgICkge1xyXG4gICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBhbGVydChcIkxlIGZpY2hpZXIgZGUgY29udHJhdHMgZXN0IHZpZGUgb3UgY29ycm9tcHUuIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udHJhY3RJZHMgPSB3cm9uZ0NvbnRyYWN0c0pTT04ubWFwKCh3YykgPT4gd2NbXCJjIElEXCJdKTtcclxuXHJcbiAgICBuYW1lZExvZyh7IGNvbnRyYWN0SWRzIH0pO1xyXG5cclxuICAgIGNvbnN0IHRhc2tEYXRhOiBDaGFuZ2VNb3RpdmVTaGFyZWREYXRhID0ge1xyXG4gICAgICBjb250cmFjdElkcyxcclxuICAgICAgY29udHJhY3RzQ291bnQ6IGNvbnRyYWN0SWRzLmxlbmd0aCxcclxuICAgICAgbW90aXZlVmFsdWU6IDIyMSwgLy9EQUNcclxuICAgICAgZmFpbGVkU2F2ZXNJZHM6IFtdLFxyXG4gICAgfTtcclxuXHJcbiAgICBzZXROZXdUYXNrKFwiY2hhbmdlTW90aXZlXCIsIHRhc2tEYXRhLCB1bmRlZmluZWQsIFwiUmVtcGxpc3NhZ2UgZGVzIG1vdGlmcyBkJ2FjY3VlaWwgdmlkZXNcIik7XHJcblxyXG4gICAgaGlkZVdpbmRvdygpO1xyXG4gICAgc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjcmVhdGVFbGVtKFxyXG4gICAgXCJwXCIsXHJcbiAgICBudWxsLFxyXG4gICAgY3JlYXRlRWxlbShcImgzXCIsIG51bGwsIFwiUmVtcGxpc3NhZ2UgZHUgbW90aWYgZCdhY2N1ZWlsIChEQUMpXCIpLFxyXG4gICAgY3JlYXRlRWxlbShcclxuICAgICAgXCJmb3JtXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBvbnN1Ym1pdDogb25TdWJtaXQsXHJcbiAgICAgICAgYmluZFRvOiBmb3JtUmVmLFxyXG4gICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICBib3JkZXJMZWZ0OiBcIjNweCBzb2xpZCBncmF5XCIsXHJcbiAgICAgICAgICBwYWRkaW5nTGVmdDogXCIxMHB4XCIsXHJcbiAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcclxuICAgICAgICAgIGZsZXhGbG93OiBcImNvbHVtblwiLFxyXG4gICAgICAgICAgYWxpZ25JdGVtczogXCJmbGV4LXN0YXJ0XCIsXHJcbiAgICAgICAgICBnYXA6IFwiMTBweFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgICAgXCJsYWJlbFwiLFxyXG4gICAgICAgIHsgaHRtbEZvcjogXCJpbnB1dFdyb25nQ29udHJhY3RzXCIgfSxcclxuICAgICAgICBcIkZldWlsbGUgRXhjZWwgYXZlYyBsZXMgY29udHJhdHMgw6AgbW9kaWZpZXIgKGMgSUQpXCJcclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICBuYW1lOiBcIndyb25nQ29udHJhY3RzXCIsXHJcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXHJcbiAgICAgICAgYWNjZXB0OiBcIi54bHN4LCAueGxzbSwgLnhsc1wiLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIGlkOiBcImlucHV0V3JvbmdDb250cmFjdHNcIixcclxuICAgICAgfSksXHJcbiAgICAgIGNyZWF0ZUVsZW0oXCJidXR0b25cIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCBiaW5kVG86IHN1Ym1pdEJ1dHRvblJlZiB9LCBcIkTDqW1hcnJlclwiKVxyXG4gICAgKVxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgcmVhZCBhcyByZWFkWExTWCwgdXRpbHMgYXMgWExTWFV0aWxzIH0gZnJvbSBcInhsc3hcIjtcclxuaW1wb3J0IHsgaGlkZVdpbmRvdyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1Rvb2xzV2luZG93XCI7XHJcbmltcG9ydCB7IHNldE5ld1Rhc2sgfSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgQmluZFJlZiwgY3JlYXRlRWxlbSwgcHJvbXB0SW5kZXggfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuaW1wb3J0IHsgbmFtZWRMb2csIG9iamVjdENvbnRhaW5zS2V5cyB9IGZyb20gXCIuLi9saWIvdXRpbHNcIjtcclxuaW1wb3J0IHtcclxuICBFeGlzdGluZ0RhdGFTdHJhdGVneSxcclxuICBGaWxsQ29udHJhY3RDbGFzc2VzU2hhcmVkRGF0YSxcclxuICBGaWxsQ29udHJhY3RzQ2xhc3NlQ29udHJhY3QsXHJcbiAgRmlsbENvbnRyYWN0c0NsYXNzZVBlcnNvbixcclxufSBmcm9tIFwiLi4vdGFza3MvZmlsbENvbnRyYWN0Q2xhc3Nlc1wiO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIFdpbmRvd0ZpbGxDb250cmFjdHNDbGFzc2VzU2VjdGlvbigpIHtcclxuICBjb25zdCBzdWJtaXRCdXR0b25SZWY6IEJpbmRSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0ge307XHJcbiAgY29uc3QgZm9ybVJlZjogQmluZFJlZjxIVE1MRm9ybUVsZW1lbnQ+ID0ge307XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIG9uU3VibWl0KGV2dDogU3VibWl0RXZlbnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICghc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQgfHwgIWZvcm1SZWYuY3VycmVudCkge1xyXG4gICAgICBhbGVydChcImVycmV1ciBkJ2luaXRpYWxpc2F0aW9uXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHlwZSBGb3JtRW50cmllcyA9IHtcclxuICAgICAgYWxsU3R1ZGVudHM6IEZpbGU7XHJcbiAgICAgIHdyb25nQ29udHJhY3RzOiBGaWxlO1xyXG4gICAgICBhdXRvVXNlRmlyc3REdXBsaWNhdGVEYXRhPzogXCJvblwiO1xyXG4gICAgICBhdXRvU2tpcE5vdEZvdW5kPzogXCJvblwiO1xyXG4gICAgICBhdXRvU2VsZWN0TGFzdENvbnRyYWN0PzogXCJvblwiO1xyXG4gICAgICBleGlzdGluZ0RhdGFTdHJhdDogRXhpc3RpbmdEYXRhU3RyYXRlZ3k7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGZvcm1EYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKG5ldyBGb3JtRGF0YShmb3JtUmVmLmN1cnJlbnQpLmVudHJpZXMoKSkgYXMgRm9ybUVudHJpZXM7XHJcblxyXG4gICAgaWYgKCFmb3JtRGF0YS5hbGxTdHVkZW50cyB8fCAhZm9ybURhdGEud3JvbmdDb250cmFjdHMpIHtcclxuICAgICAgYWxlcnQoXCJNZXJjaSBkZSBkw6lwb3NlciB0b3VzIGxlcyBmaWNoaWVyc1wiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCBbYWxsUGVvcGxlQnVmZmVyLCB3cm9uZ0NvbnRyYWN0c0J1ZmZlcl0gPSBhd2FpdCBQcm9taXNlLmFsbChbXHJcbiAgICAgIGZvcm1EYXRhLmFsbFN0dWRlbnRzLmFycmF5QnVmZmVyKCksXHJcbiAgICAgIGZvcm1EYXRhLndyb25nQ29udHJhY3RzLmFycmF5QnVmZmVyKCksXHJcbiAgICBdKTtcclxuXHJcbiAgICBjb25zdCBhbGxQZW9wbGVXb3JrYm9vayA9IHJlYWRYTFNYKGFsbFBlb3BsZUJ1ZmZlcik7XHJcbiAgICBsZXQgc2VsZWN0ZWRBbGxQZW9wbGVTaGVldCA9IDA7XHJcbiAgICBpZiAoYWxsUGVvcGxlV29ya2Jvb2suU2hlZXROYW1lcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IHByb21wdFJlcyA9IHByb21wdEluZGV4KFxyXG4gICAgICAgIFwiVGFibGV1ciBhZ2FwZW86IFPDqWxlY3Rpb25uZXogbGEgZmV1aWxsZSBkZSBkb25uw6llc1wiLFxyXG4gICAgICAgIGFsbFBlb3BsZVdvcmtib29rLlNoZWV0TmFtZXMsXHJcbiAgICAgICAgMCxcclxuICAgICAgICB0cnVlXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChwcm9tcHRSZXMgPT09IG51bGwpIHtcclxuICAgICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZWxlY3RlZEFsbFBlb3BsZVNoZWV0ID0gcHJvbXB0UmVzO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYWxsUGVvcGxlU2hlZXQgPVxyXG4gICAgICBhbGxQZW9wbGVXb3JrYm9vay5TaGVldHNbYWxsUGVvcGxlV29ya2Jvb2suU2hlZXROYW1lc1tzZWxlY3RlZEFsbFBlb3BsZVNoZWV0XV07XHJcbiAgICBjb25zdCBhbGxQZW9wbGVKU09OOiBGaWxsQ29udHJhY3RzQ2xhc3NlUGVyc29uW10gPSBYTFNYVXRpbHMuc2hlZXRfdG9fanNvbihhbGxQZW9wbGVTaGVldCk7XHJcbiAgICBpZiAoXHJcbiAgICAgICFBcnJheS5pc0FycmF5KGFsbFBlb3BsZUpTT04pIHx8XHJcbiAgICAgICFvYmplY3RDb250YWluc0tleXMoYWxsUGVvcGxlSlNPTlswXSwgW1wiTm9tXCIsIFwiUHJlbm9tXCIsIFwiRGF0ZU5haXNzYW5jZVwiXSlcclxuICAgICkge1xyXG4gICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBhbGVydChcIkxlIGZpY2hpZXIgZCfDqWzDqHZlcyBlc3QgdmlkZSBvdSBjb3Jyb21wdS4gVmV1aWxsZXogcsOpZXNzYXllci5cIik7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYWxsUGVvcGxlSlNPTlswXSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIG5hbWVkTG9nKHsgYWxsUGVvcGxlSlNPTiB9KTtcclxuXHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c1dvcmtib29rID0gcmVhZFhMU1god3JvbmdDb250cmFjdHNCdWZmZXIpO1xyXG5cclxuICAgIGxldCBzZWxlY3RlZFdyb25nQ29udHJhY3RzU2hlZXQgPSAwO1xyXG4gICAgaWYgKHdyb25nQ29udHJhY3RzV29ya2Jvb2suU2hlZXROYW1lcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IHByb21wdFJlcyA9IHByb21wdEluZGV4KFxyXG4gICAgICAgIFwiVGFibGV1ciBkZXMgY29udHJhdHMgaW5jb21wbMOqdHM6IFPDqWxlY3Rpb25uZXogbGEgZmV1aWxsZSBkZSBkb25uw6llc1wiLFxyXG4gICAgICAgIHdyb25nQ29udHJhY3RzV29ya2Jvb2suU2hlZXROYW1lcyxcclxuICAgICAgICAwLFxyXG4gICAgICAgIHRydWVcclxuICAgICAgKTtcclxuICAgICAgaWYgKHByb21wdFJlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHNlbGVjdGVkV3JvbmdDb250cmFjdHNTaGVldCA9IHByb21wdFJlcztcclxuICAgIH1cclxuICAgIGNvbnN0IHdyb25nQ29udHJhY3RzU2hlZXQgPVxyXG4gICAgICB3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0c1t3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXNbc2VsZWN0ZWRXcm9uZ0NvbnRyYWN0c1NoZWV0XV07XHJcblxyXG4gICAgY29uc3Qgd3JvbmdDb250cmFjdHNKU09OOiBGaWxsQ29udHJhY3RzQ2xhc3NlQ29udHJhY3RbXSA9XHJcbiAgICAgIFhMU1hVdGlscy5zaGVldF90b19qc29uKHdyb25nQ29udHJhY3RzU2hlZXQpO1xyXG4gICAgaWYgKFxyXG4gICAgICAhQXJyYXkuaXNBcnJheSh3cm9uZ0NvbnRyYWN0c0pTT04pIHx8XHJcbiAgICAgICFvYmplY3RDb250YWluc0tleXMod3JvbmdDb250cmFjdHNKU09OWzBdLCBbXHJcbiAgICAgICAgXCJlIGlkXCIsXHJcbiAgICAgICAgXCJlIG5vbVwiLFxyXG4gICAgICAgIFwiZSBwcmVub21cIixcclxuICAgICAgICBcImluc3RpdHV0aW9uXCIsXHJcbiAgICAgICAgXCJpbnN0aXR1dGlvbiBpZFwiLFxyXG4gICAgICBdKVxyXG4gICAgKSB7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGFsZXJ0KFwiTGUgZmljaGllciBkZSBjb250cmF0cyBlc3QgdmlkZSBvdSBjb3Jyb21wdS4gVmV1aWxsZXogcsOpZXNzYXllci5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBuYW1lZExvZyh7IHdyb25nQ29udHJhY3RzSlNPTiB9KTtcclxuXHJcbiAgICBjb25zdCBjb250cmFjdHNCeUlkID0gT2JqZWN0LmZyb21FbnRyaWVzKHdyb25nQ29udHJhY3RzSlNPTi5tYXAoKHdjKSA9PiBbd2NbXCJlIGlkXCJdLCB3Y10pKTtcclxuXHJcbiAgICBjb25zdCBjb250cmFjdHNJZHNUb0hhbmRsZSA9IE9iamVjdC5rZXlzKGNvbnRyYWN0c0J5SWQpLnNvcnQoXHJcbiAgICAgIChhLCBiKSA9PiBwYXJzZUludChhKSAtIHBhcnNlSW50KGIpXHJcbiAgICApO1xyXG4gICAgLy8gLnNsaWNlKDEyNyk7IC8vZGVidWdcclxuXHJcbiAgICBjb25zdCB0YXNrRGF0YTogRmlsbENvbnRyYWN0Q2xhc3Nlc1NoYXJlZERhdGEgPSB7XHJcbiAgICAgIGNvbnRyYWN0czogY29udHJhY3RzQnlJZCxcclxuICAgICAgY29udHJhY3RzSWRzOiBjb250cmFjdHNJZHNUb0hhbmRsZSxcclxuICAgICAgZXhpc3RpbmdEYXRhU3RyYXRlZ3k6IGZvcm1EYXRhLmV4aXN0aW5nRGF0YVN0cmF0LFxyXG4gICAgICBzaG91bGRTZWxlY3RGaXJzdERhdGE6IGZvcm1EYXRhLmF1dG9Vc2VGaXJzdER1cGxpY2F0ZURhdGEgPT09IFwib25cIixcclxuICAgICAgc2hvdWxkU2tpcENvbnRyYWN0Tm90Rm91bmQ6IGZvcm1EYXRhLmF1dG9Ta2lwTm90Rm91bmQgPT09IFwib25cIixcclxuICAgICAgc2hvdWxkU2VsZWN0TGFzdENvbnRyYWN0Tm90Rm91bmQ6IGZvcm1EYXRhLmF1dG9TZWxlY3RMYXN0Q29udHJhY3QgPT09IFwib25cIixcclxuICAgICAgY29udHJhY3RzTm90Rm91bmQ6IHt9LFxyXG4gICAgICBjb250cmFjdHNEdXBsaWNhdGVzOiB7fSxcclxuICAgICAgY29udHJhY3RCeUNvbnRyYWN0TW9kZTogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgIHNldE5ld1Rhc2soXHJcbiAgICAgIFwiZmlsbENvbnRyYWN0Q2xhc3Nlc1wiLFxyXG4gICAgICB0YXNrRGF0YSxcclxuICAgICAgYWxsUGVvcGxlSlNPTixcclxuICAgICAgXCJSZW1wbGlzc2FnZSBkZXMgY29udHJhdHMgc2FucyBjbGFzc2UuXCJcclxuICAgICk7XHJcblxyXG4gICAgaGlkZVdpbmRvdygpO1xyXG4gICAgc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHJldHVybiBjcmVhdGVFbGVtKFxyXG4gICAgXCJwXCIsXHJcbiAgICBudWxsLFxyXG4gICAgY3JlYXRlRWxlbShcImgzXCIsIG51bGwsIFwiUmVtcGxpc3NhZ2UgZGVzIGNvbnRyYXRzIHNhbnMgY2xhc3Nlc1wiKSxcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiZm9ybVwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgb25zdWJtaXQ6IG9uU3VibWl0LFxyXG4gICAgICAgIGJpbmRUbzogZm9ybVJlZixcclxuICAgICAgICBzdHlsZToge1xyXG4gICAgICAgICAgYm9yZGVyTGVmdDogXCIzcHggc29saWQgZ3JheVwiLFxyXG4gICAgICAgICAgcGFkZGluZ0xlZnQ6IFwiMTBweFwiLFxyXG4gICAgICAgICAgZGlzcGxheTogXCJmbGV4XCIsXHJcbiAgICAgICAgICBmbGV4RmxvdzogXCJjb2x1bW5cIixcclxuICAgICAgICAgIGFsaWduSXRlbXM6IFwiZmxleC1zdGFydFwiLFxyXG4gICAgICAgICAgZ2FwOiBcIjEwcHhcIixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBjcmVhdGVFbGVtKFxyXG4gICAgICAgIFwibGFiZWxcIixcclxuICAgICAgICB7IGh0bWxGb3I6IFwiaW5wdXRBbGxTdHVkZW50c1wiIH0sXHJcbiAgICAgICAgXCJGZXVpbGxlIEV4Y2VsIGF2ZWMgdG91cyBsZXMgw6lsw6h2ZXMgKE5vbSwgUHJlbm9tLCBEYXRlTmFpc3NhbmNlLCBDbGFzc2VDb3VyYW50ZSlcIlxyXG4gICAgICApLFxyXG4gICAgICBjcmVhdGVFbGVtKFwiaW5wdXRcIiwge1xyXG4gICAgICAgIG5hbWU6IFwiYWxsU3R1ZGVudHNcIixcclxuICAgICAgICB0eXBlOiBcImZpbGVcIixcclxuICAgICAgICBhY2NlcHQ6IFwiLnhsc3gsIC54bHNtLCAueGxzXCIsXHJcbiAgICAgICAgcmVxdWlyZWQ6IHRydWUsXHJcbiAgICAgICAgaWQ6IFwiaW5wdXRBbGxTdHVkZW50c1wiLFxyXG4gICAgICB9KSxcclxuICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICBcImxhYmVsXCIsXHJcbiAgICAgICAgeyBodG1sRm9yOiBcImlucHV0V3JvbmdDb250cmFjdHNcIiB9LFxyXG4gICAgICAgIFwiRmV1aWxsZSBFeGNlbCBhdmVjIGxlcyBjb250cmF0cyBpbmNvbXBsw6h0cyAoZSBpZCwgZSBub20sIGUgcHJlbm9tLCBpbnN0aXR1dGlvbiwgaW5zdGl0dXRpb24gaWQpXCJcclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICBuYW1lOiBcIndyb25nQ29udHJhY3RzXCIsXHJcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXHJcbiAgICAgICAgYWNjZXB0OiBcIi54bHN4LCAueGxzbSwgLnhsc1wiLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIGlkOiBcImlucHV0V3JvbmdDb250cmFjdHNcIixcclxuICAgICAgfSksXHJcbiAgICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgICAgXCJkaXZcIixcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIGNyZWF0ZUVsZW0oXCJpbnB1dFwiLCB7XHJcbiAgICAgICAgICB0eXBlOiBcImNoZWNrYm94XCIsXHJcbiAgICAgICAgICBpZDogXCJjaGVja2JveEF1dG9Vc2VGaXJzdER1cGxpY2F0ZURhdGFcIixcclxuICAgICAgICAgIG5hbWU6IFwiYXV0b1VzZUZpcnN0RHVwbGljYXRlRGF0YVwiLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgICAgICBcImxhYmVsXCIsXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIGh0bWxGb3I6IFwiY2hlY2tib3hBdXRvVXNlRmlyc3REdXBsaWNhdGVEYXRhXCIsXHJcbiAgICAgICAgICAgIHN0eWxlOiB7IG1hcmdpbjogXCIwIDAgMCAuNWVtXCIgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBcIlRvdWpvdXJzIHPDqWxlY3Rpb25uZXIgbGEgcHJlbWnDqHJlIMOpY29sZS9jbGFzc2UgZW4gY2FzIGRlIHLDqXN1bHRhdHMgc2ltaWxhaXJlcy5cIlxyXG4gICAgICAgIClcclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICBcImRpdlwiLFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcclxuICAgICAgICAgIGlkOiBcImNoZWNrYm94QXV0b1NraXBOb3RGb3VuZFwiLFxyXG4gICAgICAgICAgbmFtZTogXCJhdXRvU2tpcE5vdEZvdW5kXCIsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICAgIFwibGFiZWxcIixcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaHRtbEZvcjogXCJjaGVja2JveEF1dG9Ta2lwTm90Rm91bmRcIixcclxuICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiBcIjAgMCAwIC41ZW1cIiB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiVG91am91cnMgaWdub3JlciBsZXMgY29udHJhdHMgaW50cm91dmFibGUuIChVbmUgbGlzdGUgc2VyYSBhZmZpY2jDqWUgw6AgbGEgZmluIGRlIGwnw6l4ZWN1dGlvbilcIlxyXG4gICAgICAgIClcclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICBcImRpdlwiLFxyXG4gICAgICAgIG51bGwsXHJcbiAgICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICAgIHR5cGU6IFwiY2hlY2tib3hcIixcclxuICAgICAgICAgIGlkOiBcImNoZWNrYm94QXV0b1NlbGVjdExhc3RDb250cmFjdFwiLFxyXG4gICAgICAgICAgbmFtZTogXCJhdXRvU2VsZWN0TGFzdENvbnRyYWN0XCIsXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICAgIFwibGFiZWxcIixcclxuICAgICAgICAgIHtcclxuICAgICAgICAgICAgaHRtbEZvcjogXCJjaGVja2JveEF1dG9TZWxlY3RMYXN0Q29udHJhY3RcIixcclxuICAgICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiBcIjAgMCAwIC41ZW1cIiB9LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIFwiVG91am91cnMgc8OpbGVjdGlvbm5lciBsZSBkZXJuaWVyIGNvbnRyYXQgbG9yc3F1ZSBwbHVzaWV1cnMgc29udCBkaXNwb25pYmxlcy4gKFVuZSBsaXN0ZSBzZXJhIGFmZmljaMOpZSDDoCBsYSBmaW4gZGUgbCfDqXhlY3V0aW9uKVwiXHJcbiAgICAgICAgKVxyXG4gICAgICApLFxyXG4gICAgICBjcmVhdGVFbGVtKFxyXG4gICAgICAgIFwiZmllbGRzZXRcIixcclxuICAgICAgICBudWxsLFxyXG4gICAgICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgICAgICBcImxlZ2VuZFwiLFxyXG4gICAgICAgICAgeyBzdHlsZTogeyBmb250U2l6ZTogXCIxZW1cIiwgbWFyZ2luSW5saW5lRW5kOiBcIjFlbVwiIH0gfSxcclxuICAgICAgICAgIFwiU2kgdW5lIGRvbm7DqWUgZXN0IGTDqWrDoCBlbnJlZ2lzdHLDqWVcIlxyXG4gICAgICAgICksXHJcbiAgICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICAgIG5hbWU6IFwiZXhpc3RpbmdEYXRhU3RyYXRcIixcclxuICAgICAgICAgIHR5cGU6IFwicmFkaW9cIixcclxuICAgICAgICAgIGlkOiBcInJhZGlvRXhpc3RpbmdEYXRhU3RyYXRBc2tcIixcclxuICAgICAgICAgIHZhbHVlOiBcImFza1wiLFxyXG4gICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiBcIjAgLjVlbVwiIH0sXHJcbiAgICAgICAgICBjaGVja2VkOiB0cnVlLFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGNyZWF0ZUVsZW0oXCJsYWJlbFwiLCB7IGh0bWxGb3I6IFwicmFkaW9FeGlzdGluZ0RhdGFTdHJhdEFza1wiIH0sIFwiVG91am91cnMgZGVtYW5kZXJcIiksXHJcbiAgICAgICAgY3JlYXRlRWxlbShcImJyXCIpLFxyXG4gICAgICAgIGNyZWF0ZUVsZW0oXCJpbnB1dFwiLCB7XHJcbiAgICAgICAgICBuYW1lOiBcImV4aXN0aW5nRGF0YVN0cmF0XCIsXHJcbiAgICAgICAgICB0eXBlOiBcInJhZGlvXCIsXHJcbiAgICAgICAgICBpZDogXCJyYWRpb0V4aXN0aW5nRGF0YVN0cmF0U2tpcFwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwic2tpcFwiLFxyXG4gICAgICAgICAgc3R5bGU6IHsgbWFyZ2luOiBcIjAgLjVlbVwiIH0sXHJcbiAgICAgICAgfSksXHJcbiAgICAgICAgY3JlYXRlRWxlbShcImxhYmVsXCIsIHsgaHRtbEZvcjogXCJyYWRpb0V4aXN0aW5nRGF0YVN0cmF0U2tpcFwiIH0sIFwiVG91am91cnMgaWdub3JlclwiKSxcclxuICAgICAgICBjcmVhdGVFbGVtKFwiYnJcIiksXHJcbiAgICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICAgIG5hbWU6IFwiZXhpc3RpbmdEYXRhU3RyYXRcIixcclxuICAgICAgICAgIHR5cGU6IFwicmFkaW9cIixcclxuICAgICAgICAgIGlkOiBcInJhZGlvRXhpc3RpbmdEYXRhU3RyYXRGb3JjZVwiLFxyXG4gICAgICAgICAgdmFsdWU6IFwiZm9yY2VcIixcclxuICAgICAgICAgIHN0eWxlOiB7IG1hcmdpbjogXCIwIC41ZW1cIiB9LFxyXG4gICAgICAgIH0pLFxyXG4gICAgICAgIGNyZWF0ZUVsZW0oXCJsYWJlbFwiLCB7IGh0bWxGb3I6IFwicmFkaW9FeGlzdGluZ0RhdGFTdHJhdEZvcmNlXCIgfSwgXCJUb3Vqb3VycyByZW1wbGFjZXJcIilcclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlRWxlbShcImJ1dHRvblwiLCB7IHR5cGU6IFwic3VibWl0XCIsIGJpbmRUbzogc3VibWl0QnV0dG9uUmVmIH0sIFwiRMOpbWFycmVyXCIpXHJcbiAgICApXHJcbiAgKTtcclxufVxyXG4iLCJpbXBvcnQgeyByZWFkIGFzIHJlYWRYTFNYLCB1dGlscyBhcyBYTFNYVXRpbHMgfSBmcm9tIFwieGxzeFwiO1xyXG5pbXBvcnQgeyBzZXROZXdUYXNrIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IEJpbmRSZWYsIGNyZWF0ZUVsZW0sIHByb21wdEluZGV4IH0gZnJvbSBcIi4uL2xpYi9VSVRvb2xzXCI7XHJcbmltcG9ydCB7IG5hbWVkTG9nLCBvYmplY3RDb250YWluc0tleXMgfSBmcm9tIFwiLi4vbGliL3V0aWxzXCI7XHJcbmltcG9ydCB7IFJlbW92ZURBQ1ByZXN0Q29udHJhY3QsIFJlbW92ZURBQ1ByZXN0U2hhcmVkRGF0YSB9IGZyb20gXCIuLi90YXNrcy9yZW1vdmVEQUNQcmVzdFwiO1xyXG5pbXBvcnQgeyBoaWRlV2luZG93IH0gZnJvbSBcIi4vVG9vbHNXaW5kb3dcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBXaW5kb3dSZW1vdmVEQUNQcmVzdFNlY3Rpb24oKSB7XHJcbiAgY29uc3Qgc3VibWl0QnV0dG9uUmVmOiBCaW5kUmVmPEhUTUxCdXR0b25FbGVtZW50PiA9IHt9O1xyXG4gIGNvbnN0IGZvcm1SZWY6IEJpbmRSZWY8SFRNTEZvcm1FbGVtZW50PiA9IHt9O1xyXG5cclxuICBhc3luYyBmdW5jdGlvbiBvblN1Ym1pdChldnQ6IFN1Ym1pdEV2ZW50KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBpZiAoIXN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50IHx8ICFmb3JtUmVmLmN1cnJlbnQpIHtcclxuICAgICAgYWxlcnQoXCJlcnJldXIgZCdpbml0aWFsaXNhdGlvblwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHR5cGUgRm9ybUVudHJpZXMgPSB7XHJcbiAgICAgIHdyb25nQ29udHJhY3RzOiBGaWxlO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IE9iamVjdC5mcm9tRW50cmllcyhuZXcgRm9ybURhdGEoZm9ybVJlZi5jdXJyZW50KS5lbnRyaWVzKCkpIGFzIEZvcm1FbnRyaWVzO1xyXG5cclxuICAgIGlmICghZm9ybURhdGEud3JvbmdDb250cmFjdHMpIHtcclxuICAgICAgYWxlcnQoXCJNZXJjaSBkZSBkw6lwb3NlciB0b3VzIGxlcyBmaWNoaWVyc1wiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c0J1ZmZlciA9IGF3YWl0IGZvcm1EYXRhLndyb25nQ29udHJhY3RzLmFycmF5QnVmZmVyKCk7XHJcblxyXG4gICAgY29uc3Qgd3JvbmdDb250cmFjdHNXb3JrYm9vayA9IHJlYWRYTFNYKHdyb25nQ29udHJhY3RzQnVmZmVyKTtcclxuXHJcbiAgICBsZXQgc2VsZWN0ZWRXcm9uZ0NvbnRyYWN0c1NoZWV0ID0gMDtcclxuICAgIGlmICh3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXMubGVuZ3RoID4gMSkge1xyXG4gICAgICBjb25zdCBwcm9tcHRSZXMgPSBwcm9tcHRJbmRleChcclxuICAgICAgICBcIlRhYmxldXIgZGVzIGNvbnRyYXRzIGluY29tcGzDqnRzOiBTw6lsZWN0aW9ubmV6IGxhIGZldWlsbGUgZGUgZG9ubsOpZXNcIixcclxuICAgICAgICB3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXMsXHJcbiAgICAgICAgMCxcclxuICAgICAgICB0cnVlXHJcbiAgICAgICk7XHJcbiAgICAgIGlmIChwcm9tcHRSZXMgPT09IG51bGwpIHtcclxuICAgICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZWxlY3RlZFdyb25nQ29udHJhY3RzU2hlZXQgPSBwcm9tcHRSZXM7XHJcbiAgICB9XHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c1NoZWV0ID1cclxuICAgICAgd3JvbmdDb250cmFjdHNXb3JrYm9vay5TaGVldHNbd3JvbmdDb250cmFjdHNXb3JrYm9vay5TaGVldE5hbWVzW3NlbGVjdGVkV3JvbmdDb250cmFjdHNTaGVldF1dO1xyXG5cclxuICAgIGNvbnN0IHdyb25nQ29udHJhY3RzSlNPTjogUmVtb3ZlREFDUHJlc3RDb250cmFjdFtdID1cclxuICAgICAgWExTWFV0aWxzLnNoZWV0X3RvX2pzb24od3JvbmdDb250cmFjdHNTaGVldCk7XHJcbiAgICBpZiAoXHJcbiAgICAgICFBcnJheS5pc0FycmF5KHdyb25nQ29udHJhY3RzSlNPTikgfHxcclxuICAgICAgIW9iamVjdENvbnRhaW5zS2V5cyh3cm9uZ0NvbnRyYWN0c0pTT05bMF0sIFtcImMgSURcIiwgXCJpbnN0aXR1dGlvbiBpZFwiLCBcInBwIGlkXCJdKVxyXG4gICAgKSB7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIGFsZXJ0KFwiTGUgZmljaGllciBkZSBjb250cmF0cyBlc3QgdmlkZSBvdSBjb3Jyb21wdS4gVmV1aWxsZXogcsOpZXNzYXllci5cIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb250cmFjdHNCeUlkID0gT2JqZWN0LmZyb21FbnRyaWVzKFxyXG4gICAgICB3cm9uZ0NvbnRyYWN0c0pTT05cclxuICAgICAgICAuZmlsdGVyKChjKSA9PiAoY1tcIkZhY3R1cmF0aW9uIERBQyDDoCBzdXBwcmltZXJcIl0gPz8gMCkgPiAwKVxyXG4gICAgICAgIC5tYXAoKHdjKSA9PiBbd2NbXCJjIElEXCJdLCB3Y10pXHJcbiAgICApO1xyXG5cclxuICAgIG5hbWVkTG9nKHsgd3JvbmdDb250cmFjdHNKU09OLCBjb250cmFjdHNCeUlkIH0pO1xyXG5cclxuICAgIGNvbnN0IGNvbnRyYWN0c0lkc1RvSGFuZGxlID0gT2JqZWN0LmtleXMoY29udHJhY3RzQnlJZClcclxuICAgICAgLm1hcChOdW1iZXIpXHJcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBhIC0gYik7XHJcbiAgICAvLyAuc2xpY2UoMTI3KTsgLy9kZWJ1Z1xyXG5cclxuICAgIGNvbnN0IHRhc2tEYXRhOiBSZW1vdmVEQUNQcmVzdFNoYXJlZERhdGEgPSB7XHJcbiAgICAgIGNvbnRyYWN0czogY29udHJhY3RzQnlJZCxcclxuICAgICAgY29udHJhY3RJZHM6IGNvbnRyYWN0c0lkc1RvSGFuZGxlLFxyXG4gICAgICBkb25lQ29udHJhY3RzOiBbXSxcclxuICAgICAgc3RyYW5nZUNvbnRyYWN0czogW10sXHJcbiAgICB9O1xyXG5cclxuICAgIHNldE5ld1Rhc2soXCJyZW1vdmVEQUNQcmVzdFwiLCB0YXNrRGF0YSwgdW5kZWZpbmVkLCBcIlN1cHJlc3Npb24gZGVzICdhdXRyZXMgcHJlc3RhdGlvbnMnIERBQ1wiKTtcclxuXHJcbiAgICBoaWRlV2luZG93KCk7XHJcbiAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNyZWF0ZUVsZW0oXHJcbiAgICBcInBcIixcclxuICAgIG51bGwsXHJcbiAgICBjcmVhdGVFbGVtKFwiaDNcIiwgbnVsbCwgXCJTdXByZXNzaW9uIGRlcyAnYXV0cmVzIHByZXN0YXRpb25zJyBEQUMgZXQgZmFjdHVyYXRpb25cIiksXHJcbiAgICBjcmVhdGVFbGVtKFxyXG4gICAgICBcImZvcm1cIixcclxuICAgICAge1xyXG4gICAgICAgIG9uc3VibWl0OiBvblN1Ym1pdCxcclxuICAgICAgICBiaW5kVG86IGZvcm1SZWYsXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgIGJvcmRlckxlZnQ6IFwiM3B4IHNvbGlkIGdyYXlcIixcclxuICAgICAgICAgIHBhZGRpbmdMZWZ0OiBcIjEwcHhcIixcclxuICAgICAgICAgIGRpc3BsYXk6IFwiZmxleFwiLFxyXG4gICAgICAgICAgZmxleEZsb3c6IFwiY29sdW1uXCIsXHJcbiAgICAgICAgICBhbGlnbkl0ZW1zOiBcImZsZXgtc3RhcnRcIixcclxuICAgICAgICAgIGdhcDogXCIxMHB4XCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICBcImxhYmVsXCIsXHJcbiAgICAgICAgeyBodG1sRm9yOiBcImlucHV0V3JvbmdDb250cmFjdHNcIiB9LFxyXG4gICAgICAgIFwiRmV1aWxsZSBFeGNlbCBhdmVjIGxlcyBjb250cmF0cyBpbmNvcnJlY3RzIChjIElEKVwiXHJcbiAgICAgICksXHJcbiAgICAgIGNyZWF0ZUVsZW0oXCJpbnB1dFwiLCB7XHJcbiAgICAgICAgbmFtZTogXCJ3cm9uZ0NvbnRyYWN0c1wiLFxyXG4gICAgICAgIHR5cGU6IFwiZmlsZVwiLFxyXG4gICAgICAgIGFjY2VwdDogXCIueGxzeCwgLnhsc20sIC54bHNcIixcclxuICAgICAgICByZXF1aXJlZDogdHJ1ZSxcclxuICAgICAgICBpZDogXCJpbnB1dFdyb25nQ29udHJhY3RzXCIsXHJcbiAgICAgIH0pLFxyXG4gICAgICBjcmVhdGVFbGVtKFwiYnV0dG9uXCIsIHsgdHlwZTogXCJzdWJtaXRcIiwgYmluZFRvOiBzdWJtaXRCdXR0b25SZWYgfSwgXCJEw6ltYXJyZXJcIilcclxuICAgIClcclxuICApO1xyXG59XHJcbiIsImltcG9ydCB7IHJlYWQgYXMgcmVhZFhMU1gsIHV0aWxzIGFzIFhMU1hVdGlscyB9IGZyb20gXCJ4bHN4XCI7XHJcbmltcG9ydCB7IHNldE5ld1Rhc2sgfSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgQmluZFJlZiwgY3JlYXRlRWxlbSwgcHJvbXB0SW5kZXggfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuaW1wb3J0IHsgbmFtZWRMb2csIG9iamVjdENvbnRhaW5zS2V5cyB9IGZyb20gXCIuLi9saWIvdXRpbHNcIjtcclxuaW1wb3J0IHsgaGlkZVdpbmRvdyB9IGZyb20gXCIuL1Rvb2xzV2luZG93XCI7XHJcbmltcG9ydCB7IEJhc2ljQ29udHJhY3QsIFN0ZXBDb250cmFjdHNTaGFyZWREYXRhIH0gZnJvbSBcIi4uL3Rhc2tzL3N0ZXBDb250cmFjdHNcIjtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBXaW5kb3dTdGVwQ29udHJhY3RzU2VjdGlvbigpIHtcclxuICBjb25zdCBzdWJtaXRCdXR0b25SZWY6IEJpbmRSZWY8SFRNTEJ1dHRvbkVsZW1lbnQ+ID0ge307XHJcbiAgY29uc3QgZm9ybVJlZjogQmluZFJlZjxIVE1MRm9ybUVsZW1lbnQ+ID0ge307XHJcblxyXG4gIGFzeW5jIGZ1bmN0aW9uIG9uU3VibWl0KGV2dDogU3VibWl0RXZlbnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgIGlmICghc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQgfHwgIWZvcm1SZWYuY3VycmVudCkge1xyXG4gICAgICBhbGVydChcImVycmV1ciBkJ2luaXRpYWxpc2F0aW9uXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdHlwZSBGb3JtRW50cmllcyA9IHtcclxuICAgICAgd3JvbmdDb250cmFjdHM6IEZpbGU7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IGZvcm1EYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKG5ldyBGb3JtRGF0YShmb3JtUmVmLmN1cnJlbnQpLmVudHJpZXMoKSkgYXMgRm9ybUVudHJpZXM7XHJcblxyXG4gICAgaWYgKCFmb3JtRGF0YS53cm9uZ0NvbnRyYWN0cykge1xyXG4gICAgICBhbGVydChcIk1lcmNpIGRlIGTDqXBvc2VyIHRvdXMgbGVzIGZpY2hpZXJzXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgc3VibWl0QnV0dG9uUmVmLmN1cnJlbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIGNvbnN0IHdyb25nQ29udHJhY3RzQnVmZmVyID0gYXdhaXQgZm9ybURhdGEud3JvbmdDb250cmFjdHMuYXJyYXlCdWZmZXIoKTtcclxuXHJcbiAgICBjb25zdCB3cm9uZ0NvbnRyYWN0c1dvcmtib29rID0gcmVhZFhMU1god3JvbmdDb250cmFjdHNCdWZmZXIpO1xyXG5cclxuICAgIGxldCBzZWxlY3RlZFdyb25nQ29udHJhY3RzU2hlZXQgPSAwO1xyXG4gICAgaWYgKHdyb25nQ29udHJhY3RzV29ya2Jvb2suU2hlZXROYW1lcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIGNvbnN0IHByb21wdFJlcyA9IHByb21wdEluZGV4KFxyXG4gICAgICAgIFwiVGFibGV1ciBkZXMgY29udHJhdHM6IFPDqWxlY3Rpb25uZXogbGEgZmV1aWxsZSBkZSBkb25uw6llc1wiLFxyXG4gICAgICAgIHdyb25nQ29udHJhY3RzV29ya2Jvb2suU2hlZXROYW1lcyxcclxuICAgICAgICAwLFxyXG4gICAgICAgIHRydWVcclxuICAgICAgKTtcclxuICAgICAgaWYgKHByb21wdFJlcyA9PT0gbnVsbCkge1xyXG4gICAgICAgIHN1Ym1pdEJ1dHRvblJlZi5jdXJyZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHNlbGVjdGVkV3JvbmdDb250cmFjdHNTaGVldCA9IHByb21wdFJlcztcclxuICAgIH1cclxuICAgIGNvbnN0IHdyb25nQ29udHJhY3RzU2hlZXQgPVxyXG4gICAgICB3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0c1t3cm9uZ0NvbnRyYWN0c1dvcmtib29rLlNoZWV0TmFtZXNbc2VsZWN0ZWRXcm9uZ0NvbnRyYWN0c1NoZWV0XV07XHJcblxyXG4gICAgY29uc3Qgd3JvbmdDb250cmFjdHNKU09OOiBCYXNpY0NvbnRyYWN0W10gPSBYTFNYVXRpbHMuc2hlZXRfdG9fanNvbih3cm9uZ0NvbnRyYWN0c1NoZWV0KTtcclxuICAgIGlmIChcclxuICAgICAgIUFycmF5LmlzQXJyYXkod3JvbmdDb250cmFjdHNKU09OKSB8fFxyXG4gICAgICAhb2JqZWN0Q29udGFpbnNLZXlzKHdyb25nQ29udHJhY3RzSlNPTlswXSwgW1wiYyBJRFwiXSlcclxuICAgICkge1xyXG4gICAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICBhbGVydChcIkxlIGZpY2hpZXIgZGUgY29udHJhdHMgZXN0IHZpZGUgb3UgY29ycm9tcHUuIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY29udHJhY3RJZHMgPSB3cm9uZ0NvbnRyYWN0c0pTT04ubWFwKCh3YykgPT4gd2NbXCJjIElEXCJdKTtcclxuXHJcbiAgICBuYW1lZExvZyh7IGNvbnRyYWN0SWRzIH0pO1xyXG5cclxuICAgIGNvbnN0IHRhc2tEYXRhOiBTdGVwQ29udHJhY3RzU2hhcmVkRGF0YSA9IHtcclxuICAgICAgY29udHJhY3RJZHMsXHJcbiAgICAgIGNvbnRyYWN0c0NvdW50OiBjb250cmFjdElkcy5sZW5ndGgsXHJcbiAgICB9O1xyXG5cclxuICAgIHNldE5ld1Rhc2soXCJzdGVwQ29udHJhY3RzXCIsIHRhc2tEYXRhLCB1bmRlZmluZWQsIFwiVmlzaXRlIGRlcyBjb250cmF0c1wiKTtcclxuXHJcbiAgICBoaWRlV2luZG93KCk7XHJcbiAgICBzdWJtaXRCdXR0b25SZWYuY3VycmVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIGNyZWF0ZUVsZW0oXHJcbiAgICBcInBcIixcclxuICAgIG51bGwsXHJcbiAgICBjcmVhdGVFbGVtKFwiaDNcIiwgbnVsbCwgXCJWaXNpdGUgZGVzIGNvbnRyYXRzXCIpLFxyXG4gICAgY3JlYXRlRWxlbShcclxuICAgICAgXCJmb3JtXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBvbnN1Ym1pdDogb25TdWJtaXQsXHJcbiAgICAgICAgYmluZFRvOiBmb3JtUmVmLFxyXG4gICAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgICBib3JkZXJMZWZ0OiBcIjNweCBzb2xpZCBncmF5XCIsXHJcbiAgICAgICAgICBwYWRkaW5nTGVmdDogXCIxMHB4XCIsXHJcbiAgICAgICAgICBkaXNwbGF5OiBcImZsZXhcIixcclxuICAgICAgICAgIGZsZXhGbG93OiBcImNvbHVtblwiLFxyXG4gICAgICAgICAgYWxpZ25JdGVtczogXCJmbGV4LXN0YXJ0XCIsXHJcbiAgICAgICAgICBnYXA6IFwiMTBweFwiLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0sXHJcbiAgICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgICAgXCJsYWJlbFwiLFxyXG4gICAgICAgIHsgaHRtbEZvcjogXCJpbnB1dFdyb25nQ29udHJhY3RzXCIgfSxcclxuICAgICAgICBcIkZldWlsbGUgRXhjZWwgYXZlYyBsZXMgY29udHJhdHMgKGMgSUQpXCJcclxuICAgICAgKSxcclxuICAgICAgY3JlYXRlRWxlbShcImlucHV0XCIsIHtcclxuICAgICAgICBuYW1lOiBcIndyb25nQ29udHJhY3RzXCIsXHJcbiAgICAgICAgdHlwZTogXCJmaWxlXCIsXHJcbiAgICAgICAgYWNjZXB0OiBcIi54bHN4LCAueGxzbSwgLnhsc1wiLFxyXG4gICAgICAgIHJlcXVpcmVkOiB0cnVlLFxyXG4gICAgICAgIGlkOiBcImlucHV0V3JvbmdDb250cmFjdHNcIixcclxuICAgICAgfSksXHJcbiAgICAgIGNyZWF0ZUVsZW0oXCJidXR0b25cIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCBiaW5kVG86IHN1Ym1pdEJ1dHRvblJlZiB9LCBcIkTDqW1hcnJlclwiKVxyXG4gICAgKVxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgc2hvd1dpbmRvdywgVG9vbFdpbmRvdyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1Rvb2xzV2luZG93XCI7XHJcbmltcG9ydCB7IHdhaXRGb3JTZWxlY3RvciB9IGZyb20gXCIuL2FzeW5jXCI7XHJcbmltcG9ydCB7IHNldE5ld1Rhc2sgfSBmcm9tIFwiLi90YXNrXCI7XHJcbmltcG9ydCB7IEJpbmRSZWYsIGNyZWF0ZUVsZW0sIGUgfSBmcm9tIFwiLi9VSVRvb2xzXCI7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRUb29sc0J1dHRvbkludGVncmF0aW9uKCkge1xyXG4gIC8vQlVJTEQgVUlcclxuICBjb25zdCBtYWluTWVudVVsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjbWFpbm1lbnUgPiB1bFwiKTtcclxuICBpZiAobWFpbk1lbnVVbEVsZW1lbnQpIHtcclxuICAgIGUobWFpbk1lbnVVbEVsZW1lbnQpLmFkZEVsZW0oXHJcbiAgICAgIFwibGlcIixcclxuICAgICAgbnVsbCxcclxuICAgICAgY3JlYXRlRWxlbShcclxuICAgICAgICBcImFcIixcclxuICAgICAgICB7XHJcbiAgICAgICAgICBvbmNsaWNrOiBzaG93V2luZG93LFxyXG4gICAgICAgICAgZGF0YXNldDoge1xyXG4gICAgICAgICAgICB0b2dnbGU6IFwidG9vbHRpcFwiLFxyXG4gICAgICAgICAgICBwbGFjZW1lbnQ6IFwidG9wXCIsXHJcbiAgICAgICAgICAgIG9yaWdpbmFsVGl0bGU6IFwiTGVzIG91dGlscyBwcmF0aXF1ZXNcIixcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjcmVhdGVFbGVtKFwiaVwiLCB7IGNsYXNzTmFtZTogXCJmYSBmYS1zb2xpZCBmYS10b29sYm94XCIgfSlcclxuICAgICAgKVxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGZyb250RGl2UmVmOiBCaW5kUmVmPEhUTUxEaXZFbGVtZW50PiA9IHt9O1xyXG4gIGNvbnN0IHRvb2xXaW5kb3dSZWY6IEJpbmRSZWY8SFRNTERpdkVsZW1lbnQ+ID0ge307XHJcblxyXG4gIGUoZG9jdW1lbnQuYm9keSkuYWRkRWxlbShcclxuICAgIFwiZGl2XCIsXHJcbiAgICB7XHJcbiAgICAgIGJpbmRUbzogZnJvbnREaXZSZWYsXHJcbiAgICAgIHN0eWxlOiB7XHJcbiAgICAgICAgcG9zaXRpb246IFwiZml4ZWRcIixcclxuICAgICAgICB2aXNpYmlsaXR5OiBcImhpZGRlblwiLFxyXG4gICAgICAgIHRvcDogXCIwXCIsXHJcbiAgICAgICAgbGVmdDogXCIwXCIsXHJcbiAgICAgICAgbWluV2lkdGg6IFwiMTAwdndcIixcclxuICAgICAgICBoZWlnaHQ6IFwiMTAwdmhcIixcclxuICAgICAgICBvdmVyZmxvd1k6IFwiYXV0b1wiLFxyXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogXCIjMDAwYVwiLFxyXG4gICAgICAgIHpJbmRleDogXCIxXCIsXHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgVG9vbFdpbmRvdyh0b29sV2luZG93UmVmLCBmcm9udERpdlJlZilcclxuICApO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRHb1RvQ29udHJhY3RCdXR0b25JbnRlZ3JhdGlvbigpIHtcclxuICBjb25zdCBoMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGF0YSBoMlwiKTtcclxuICBjb25zdCBwZXJzb25JZEZvckJ1dHRvbiA9IE51bWJlcihoMj8udGV4dENvbnRlbnQ/LnNwbGl0KFwiKFwiKS5hdCgxKT8uc3BsaXQoXCIpXCIpLmF0KDApKTtcclxuICBpZiAoaDIgJiYgIWlzTmFOKHBlcnNvbklkRm9yQnV0dG9uKSkge1xyXG4gICAgZShoMikuYWRkRWxlbShcclxuICAgICAgXCJidXR0b25cIixcclxuICAgICAge1xyXG4gICAgICAgIHR5cGU6IFwiYnV0dG9uXCIsXHJcbiAgICAgICAgdGl0bGU6IFwiQWZmaWNoZXIgbGVzIGNvbnRyYXRzXCIsXHJcbiAgICAgICAgb25jbGljaygpIHtcclxuICAgICAgICAgIHNldE5ld1Rhc2soXCJnb1RvQ29udHJhY3RzXCIsIHsgcGVyc29uSWQ6IHBlcnNvbklkRm9yQnV0dG9uIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgIGJvcmRlclJhZGl1czogXCIxZW1cIixcclxuICAgICAgICAgIGxpbmVIZWlnaHQ6IFwiMWVtXCIsXHJcbiAgICAgICAgICBwYWRkaW5nQm90dG9tOiBcIi4yZW1cIixcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcImNcIlxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBidWlsZFJlbW92ZUVuZERhdGVCdXR0b25JbnRlZ3JhdGlvbigpIHtcclxuICAvL3RoZSBidXR0b24gbWF5IGRpc2FwcGVhciBvbiB0YWIgc3dpdGNoXHJcbiAgY29uc3QgZW5kRGF0ZUlucHV0ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxyXG4gICAgXCIjdWktaWQtNiA+IGZvcm0gPiB0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCA+IGlucHV0I3ZlckVuZGVcIlxyXG4gICk7XHJcbiAgY29uc3QgZW5kRGF0ZVZhbHVlID0gZW5kRGF0ZUlucHV0LnZhbHVlO1xyXG4gIGlmIChlbmREYXRlVmFsdWUpIHtcclxuICAgIGUoZW5kRGF0ZUlucHV0LnBhcmVudEVsZW1lbnQhKS5hZGRFbGVtKFxyXG4gICAgICBcImJ1dHRvblwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgdHlwZTogXCJidXR0b25cIixcclxuICAgICAgICBvbmNsaWNrKGV2KSB7XHJcbiAgICAgICAgICBzZXROZXdUYXNrKFwicmVtb3ZlRW5kRGF0ZVwiLCB7XHJcbiAgICAgICAgICAgIGRhdGVUb1JlbW92ZTogZW5kRGF0ZVZhbHVlLFxyXG4gICAgICAgICAgICBuZXdFbmREYXRlOiBcIlwiLFxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB0aXRsZTogYFN1cHByaW1lciBsYSBkYXRlIGRlIGZpbiBkdSBjb250cmF0IGV0IGRlcyBwcmVzdGF0aW9uc2AsXHJcbiAgICAgICAgc3R5bGU6IHtcclxuICAgICAgICAgIGJvcmRlclJhZGl1czogXCIuNWVtXCIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgYHN1cHByaW1lciBmaW4gYXUgJHtlbmREYXRlVmFsdWV9YFxyXG4gICAgKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IHR5cGUgQmluZFJlZjxUPiA9IHsgY3VycmVudD86IFQgfTtcclxudHlwZSBFbGVtU3R5bGUgPSBQYXJ0aWFsPEhUTUxFbGVtZW50W1wic3R5bGVcIl0gJiBSZWNvcmQ8YC0tJHtzdHJpbmd9YCwgc3RyaW5nPj47XHJcbnR5cGUgRWxlbVByb3BzPFQ+ID0gUGFydGlhbDxPbWl0PFQsIFwic3R5bGVcIj4+ICZcclxuICBSZWNvcmQ8c3RyaW5nLCBhbnk+ICYge1xyXG4gICAgYmluZFRvPzogQmluZFJlZjxIVE1MRWxlbWVudD47XHJcbiAgICBzdHlsZT86IEVsZW1TdHlsZTtcclxuICB9O1xyXG5cclxudHlwZSBFbGVtVHlwZSA9IGtleW9mIEhUTUxFbGVtZW50VGFnTmFtZU1hcDtcclxudHlwZSBDaGlsZEVsZW0gPSBFbGVtZW50IHwgc3RyaW5nO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVsZW08VCBleHRlbmRzIEVsZW1UeXBlPihcclxuICB0eXBlOiBULFxyXG4gIHByb3BzPzogRWxlbVByb3BzPEhUTUxFbGVtZW50VGFnTmFtZU1hcFtUXT4gfCBudWxsLFxyXG4gIC4uLmNoaWxkcmVuOiBDaGlsZEVsZW1bXVxyXG4pOiBIVE1MRWxlbWVudFRhZ05hbWVNYXBbVF0ge1xyXG4gIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0eXBlKTtcclxuICBPYmplY3QuZW50cmllcyhwcm9wcyA/PyB7fSkuZm9yRWFjaCgoW25hbWUsIHZhbF0pID0+IHtcclxuICAgIGlmIChuYW1lID09PSBcImRhdGFzZXRcIikge1xyXG4gICAgICBPYmplY3QuYXNzaWduKGVsW25hbWVdLCB2YWwpO1xyXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSBcInN0eWxlXCIpIHtcclxuICAgICAgT2JqZWN0LmVudHJpZXModmFsKS5mb3JFYWNoKChbaywgdl0pID0+IHtcclxuICAgICAgICAvL0B0cy1pZ25vcmUgdHMgZG9lc24ndCB1bmRlcnN0YW5kIHdoYXQncyBnb2luZyBvbiAoYW5kIEkgZG9uJ3Qgd2FudCB0byBzZWFyY2ggaG93IHRvIHRvIGl0IGZvciAyIGhvdXJzKVxyXG4gICAgICAgIGlmIChlbC5zdHlsZVtrXSAhPT0gdW5kZWZpbmVkKSBlbC5zdHlsZVtrXSA9IHY7XHJcbiAgICAgICAgZWxzZSBlbC5zdHlsZS5zZXRQcm9wZXJ0eShrLCB2IGFzIHN0cmluZyk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIGlmIChuYW1lID09PSBcImJpbmRUb1wiKSB7XHJcbiAgICAgIHZhbC5jdXJyZW50ID0gZWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAoZWwgYXMgUmVjb3JkPHN0cmluZywgYW55PilbbmFtZV0gPSB2YWw7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIGVsLmFwcGVuZCguLi5jaGlsZHJlbik7XHJcblxyXG4gIHJldHVybiBlbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGFkZEVsZW1lbnQ8VCBleHRlbmRzIEVsZW1UeXBlPihcclxuICBwYXJlbnQ6IEVsZW1lbnQsXHJcbiAgdHlwZTogVCxcclxuICBwcm9wczogRWxlbVByb3BzPEhUTUxFbGVtZW50VGFnTmFtZU1hcFtUXT4gfCBudWxsLFxyXG4gIC4uLmNoaWxkcmVuOiBDaGlsZEVsZW1bXVxyXG4pIHtcclxuICBjb25zdCBlbCA9IGNyZWF0ZUVsZW0odHlwZSwgcHJvcHMsIC4uLmNoaWxkcmVuKTtcclxuICBwYXJlbnQuYXBwZW5kQ2hpbGQoZWwpO1xyXG4gIHJldHVybiBlbDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGUoZWxlbTogRWxlbWVudCkge1xyXG4gIGZ1bmN0aW9uIGFkZEVsZW08VCBleHRlbmRzIEVsZW1UeXBlPihcclxuICAgIHR5cGU6IFQsXHJcbiAgICBwcm9wczogRWxlbVByb3BzPEhUTUxFbGVtZW50VGFnTmFtZU1hcFtUXT4gfCBudWxsLFxyXG4gICAgLi4uY2hpbGRyZW46IENoaWxkRWxlbVtdXHJcbiAgKSB7XHJcbiAgICByZXR1cm4gYWRkRWxlbWVudDxUPihlbGVtLCB0eXBlLCBwcm9wcywgLi4uY2hpbGRyZW4pO1xyXG4gIH1cclxuICByZXR1cm4geyBlbGVtLCBhZGRFbGVtIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwcm9tcHRJbmRleCh0ZXh0OiBzdHJpbmcsIGNob2ljZXM6IHN0cmluZ1tdLCBkZWZhdWx0SW5kZXggPSAwLCBhbGxvd051bGwgPSBmYWxzZSkge1xyXG4gIGxldCBjaG9zZW5JbmRleCA9IDA7XHJcbiAgZG8ge1xyXG4gICAgY29uc3QgcHJvbXB0UmVzID0gd2luZG93LnByb21wdChcclxuICAgICAgdGV4dCArIFwiXFxuXCIgKyBjaG9pY2VzLm1hcCgodCwgaSkgPT4gYFske2kgKyAxfV0gJHt0fWApLmpvaW4oXCJcXG5cIiksXHJcbiAgICAgIGAke2RlZmF1bHRJbmRleCArIDF9YFxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAocHJvbXB0UmVzID09PSBudWxsICYmIGFsbG93TnVsbCkgcmV0dXJuIG51bGw7XHJcblxyXG4gICAgY2hvc2VuSW5kZXggPSBwYXJzZUludChwcm9tcHRSZXMgPz8gXCJcIikgLSAxO1xyXG4gIH0gd2hpbGUgKGlzTmFOKGNob3NlbkluZGV4KSB8fCBjaG9zZW5JbmRleCA8IDAgfHwgY2hvc2VuSW5kZXggPj0gY2hvaWNlcy5sZW5ndGgpO1xyXG4gIHJldHVybiBjaG9zZW5JbmRleDtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gYXN5bmNfcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCk6IFByb21pc2U8RE9NSGlnaFJlc1RpbWVTdGFtcD4ge1xyXG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzKSA9PiByZXF1ZXN0QW5pbWF0aW9uRnJhbWUocmVzKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhc3luY19zZXRUaW1lb3V0KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlcykgPT4gc2V0VGltZW91dChyZXMsIG1zKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yU2VsZWN0b3I8VCBleHRlbmRzIEhUTUxFbGVtZW50PihcclxuICBzZWxlY3Rvcjogc3RyaW5nIHwgKCgpID0+IFQgfCBudWxsKSB8ICgoKSA9PiBQcm9taXNlPFQgfCBudWxsPiksXHJcbiAgY2hlY2tJbnRlcnZhbCA9IDEwMCxcclxuICBtYXhDaGVja3MgPSA1MFxyXG4pOiBQcm9taXNlPFQ+IHtcclxuICBjb25zdCByZXMgPVxyXG4gICAgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgPyBhd2FpdCBzZWxlY3RvcigpIDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxUPihzZWxlY3Rvcik7XHJcblxyXG4gIHJldHVybiBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICBpZiAocmVzID09PSBudWxsKSB7XHJcbiAgICAgIGlmIChtYXhDaGVja3MgPD0gMCkge1xyXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoYGNhbid0IGZpbmQgZWxlbWVudCAke3NlbGVjdG9yLnRvU3RyaW5nKCl9YCkpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICgpID0+XHJcbiAgICAgICAgICB3YWl0Rm9yU2VsZWN0b3Ioc2VsZWN0b3IsIGNoZWNrSW50ZXJ2YWwsIG1heENoZWNrcyAtIDEpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc29sdmUpXHJcbiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpLFxyXG4gICAgICAgIGNoZWNrSW50ZXJ2YWxcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc29sdmUocmVzKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JWYWx1ZTxUPihcclxuICBnZXR0ZXI6ICgpID0+IChUIHwgdW5kZWZpbmVkKSB8IFByb21pc2U8VCB8IHVuZGVmaW5lZD4sXHJcbiAgY2hlY2tJbnRlcnZhbCA9IDEwMCxcclxuICBtYXhDaGVja3MgPSA1MCAvL341IHNlY29uZHNcclxuKTogUHJvbWlzZTxUIHwgdW5kZWZpbmVkPiB7XHJcbiAgY29uc3QgcmVzID0gYXdhaXQgZ2V0dGVyKCk7XHJcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XHJcbiAgICBpZiAocmVzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgaWYgKG1heENoZWNrcyA8PSAwKSB7XHJcbiAgICAgICAgcmVzb2x2ZSh1bmRlZmluZWQpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICgpID0+IHdhaXRGb3JWYWx1ZShnZXR0ZXIsIGNoZWNrSW50ZXJ2YWwsIG1heENoZWNrcyAtIDEpLnRoZW4ocmVzb2x2ZSksXHJcbiAgICAgICAgY2hlY2tJbnRlcnZhbFxyXG4gICAgICApO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmVzb2x2ZShyZXMpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gd2FpdEZvclNlbGVjdG9yQWxsPFQgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXHJcbiAgc2VsZWN0b3I6IHN0cmluZyB8ICgoKSA9PiBOb2RlTGlzdE9mPFQ+KSxcclxuICBtaW5Db3VudCA9IDEsXHJcbiAgY2hlY2tJbnRlcnZhbCA9IDEwMCxcclxuICBtYXhDaGVja3MgPSA1MFxyXG4pOiBQcm9taXNlPE5vZGVMaXN0T2Y8VD4+IHtcclxuICBjb25zb2xlLmxvZyhcIndhaXRGb3JTZWxlY3RvckFsbFwiLCBtYXhDaGVja3MpO1xyXG4gIGNvbnN0IHJlcyA9IHR5cGVvZiBzZWxlY3RvciA9PT0gXCJmdW5jdGlvblwiID8gc2VsZWN0b3IoKSA6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8VD4oc2VsZWN0b3IpO1xyXG5cclxuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgaWYgKHJlcy5sZW5ndGggPCBtaW5Db3VudCkge1xyXG4gICAgICBpZiAobWF4Q2hlY2tzIDw9IDApIHtcclxuICAgICAgICByZWplY3QobmV3IEVycm9yKGBjYW4ndCBmaW5kIGVsZW1lbnRzICR7c2VsZWN0b3IudG9TdHJpbmcoKX1gKSk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIHNldFRpbWVvdXQoXHJcbiAgICAgICAgKCkgPT5cclxuICAgICAgICAgIHdhaXRGb3JTZWxlY3RvckFsbChzZWxlY3RvciwgbWluQ291bnQsIGNoZWNrSW50ZXJ2YWwsIG1heENoZWNrcyAtIDEpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc29sdmUpXHJcbiAgICAgICAgICAgIC5jYXRjaChyZWplY3QpLFxyXG4gICAgICAgIGNoZWNrSW50ZXJ2YWxcclxuICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc29sdmUocmVzKTtcclxuICAgIH1cclxuICB9KTtcclxufVxyXG4iLCJpbXBvcnQgeyBJY2FyZVdpbmRvdyB9IGZyb20gXCIuL2ljYXJlVHlwZXNcIjtcclxuXHJcbi8qKlxyXG4gKiBAdGhyb3dzIHtFcnJvcn0gcHJvbXB0IGZvciBkaXNhYmxpbmcgaWNhcmUgaGVscGVyc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGVycm9ySWZJY2FyZVRvb2xzKCkge1xyXG4gIGlmICgod2luZG93IGFzIEljYXJlV2luZG93KS5IQVNfSUNBUkVfSEVMUEVSU19MT0FERUQpIHtcclxuICAgIGFsZXJ0KFxyXG4gICAgICBcIkNldHRlIHTDomNoZSBuZSBwZXV0IHBhcyBmb25jdGlvbm5lciBxdWFuZCBsZSBzY3JpcHQgJ2ljYXJlLWhlbHBlcnMnIGVzdCBjaGFyZ8OpLiBEw6lzYWN0aXZleiBsZSBkJ2Fib3JkLlwiXHJcbiAgICApO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2V0dGUgdMOiY2hlIG5lIHN1cHBvcnRlIHBhcyBsZSBzY3JpcHQgJ2ljYXJlLWhlbHBlcnMnXCIpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY2xhc3MgV2FybmluZyB7XHJcbiAgbWVzc2FnZTogYW55O1xyXG5cclxuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBhbnkpIHtcclxuICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiBgV2FybmluZzogJHt0aGlzLm1lc3NhZ2UgPz8gXCIobm8gbWVzc2FnZSlcIn1gO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBGaWxsQ29udHJhY3RDbGFzc2VzU2hhcmVkRGF0YSB9IGZyb20gXCIuLi90YXNrcy9maWxsQ29udHJhY3RDbGFzc2VzXCI7XHJcbmltcG9ydCB7IFdhcm5pbmcgfSBmcm9tIFwiLi9lcnJvcnNcIjtcclxuaW1wb3J0IHsgbmV4dFRhc2tTdGVwLCBUYXNrIH0gZnJvbSBcIi4vdGFza1wiO1xyXG5pbXBvcnQgeyBuYW1lZExvZyB9IGZyb20gXCIuL3V0aWxzXCI7XHJcblxyXG50eXBlIE1pbmltYWxGaWxsQ29udHJhY3RUYXNrID0gT21pdDxUYXNrLCBcInNoYXJlZERhdGFcIj4gJiB7XHJcbiAgc2hhcmVkRGF0YTogUGljazxcclxuICAgIEZpbGxDb250cmFjdENsYXNzZXNTaGFyZWREYXRhLFxyXG4gICAgXCJjb250cmFjdHNcIiB8IFwiY29udHJhY3RzSWRzXCIgfCBcImV4aXN0aW5nRGF0YVN0cmF0ZWd5XCIgfCBcInNob3VsZFNlbGVjdEZpcnN0RGF0YVwiXHJcbiAgPjtcclxufTtcclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGZpbGxDb250cmFjdERhdGEoXHJcbiAgdGFzazogTWluaW1hbEZpbGxDb250cmFjdFRhc2ssXHJcbiAgbmFtZTogc3RyaW5nLFxyXG4gIHZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQsXHJcbiAgbmV4dFN0ZXA6IHN0cmluZ1xyXG4pIHtcclxuICBjb25zdCBwZXJzb24gPSB0YXNrLnNoYXJlZERhdGEuY29udHJhY3RzW3Rhc2suc2hhcmVkRGF0YS5jb250cmFjdHNJZHNbMF1dO1xyXG5cclxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgYWxlcnQoXHJcbiAgICAgIGBBdWN1bmUgdmFsZXVyIGZvdXJuaWUgcG91ciAke25hbWV9LlxcbmAgK1xyXG4gICAgICAgIGBcclxuICAgICAgRW50cmV6IGxhIGRvbm7DqWUgbWFudWVsbGVtZW50IGV0IGNvbnRpbnVleiBsYSB0w6JjaGVcXG5gICtcclxuICAgICAgICBgUGVyc29ubmU6IFske3BlcnNvbltcImUgaWRcIl19XSAke3BlcnNvbltcImUgcHJlbm9tXCJdfSAke3BlcnNvbltcImUgbm9tXCJdfWBcclxuICAgICk7XHJcbiAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKG5leHRTdGVwLCB0YXNrLCB0cnVlKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihgQXVjdW5lIHZhbGV1ciBmb3VybmllIHBvdXIgJHtuYW1lfS4gcC5pZDogJHtwZXJzb25bXCJlIGlkXCJdfWApO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGFibGVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MVGFibGVFbGVtZW50PihcIiN0aGVLbEZvcm0gPiB0YWJsZS5zb3J0YWJsZVwiKTtcclxuICBsZXQgc2VsZWN0OiBIVE1MU2VsZWN0RWxlbWVudCB8IHVuZGVmaW5lZDtcclxuICBsZXQgc2F2ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQgfCB1bmRlZmluZWQ7XHJcblxyXG4gIGZvciAobGV0IHRhYmxlSW5kZXggPSAwOyB0YWJsZUluZGV4IDwgdGFibGVzLmxlbmd0aDsgdGFibGVJbmRleCsrKSB7XHJcbiAgICBjb25zdCB0YWJsZSA9IHRhYmxlc1t0YWJsZUluZGV4XTtcclxuXHJcbiAgICBjb25zdCBUUkxpc3QgPSB0YWJsZS5xdWVyeVNlbGVjdG9yQWxsPEhUTUxUYWJsZVJvd0VsZW1lbnQ+KFxyXG4gICAgICBcInRhYmxlID4gdGhlYWQgPiB0ciwgdGFibGUgPiB0Ym9keSA+IHRyXCJcclxuICAgICk7XHJcbiAgICBjb25zdCBUUnMgPSBbLi4uVFJMaXN0XTtcclxuXHJcbiAgICBjb25zdCBuYW1lVFIgPSB0YWJsZUluZGV4ID09PSAwID8gVFJzWzFdIDogVFJzWzBdO1xyXG4gICAgY29uc3QgbmFtZUZyb21UUiA9IG5hbWVUUj8udGV4dENvbnRlbnQ/LnRyaW0oKTtcclxuICAgIGlmICghbmFtZUZyb21UUj8uaW5jbHVkZXMobmFtZSkpIGNvbnRpbnVlO1xyXG5cclxuICAgIGNvbnN0IGRhdGFUUiA9IHRhYmxlSW5kZXggPT09IDAgPyBUUnNbMl0gOiBUUnNbMV07XHJcblxyXG4gICAgc2VsZWN0ID1cclxuICAgICAgZGF0YVRSPy5xdWVyeVNlbGVjdG9yPEhUTUxTZWxlY3RFbGVtZW50PihcInRkID4gc3BhbiA+IHNlbGVjdC5pbnB1dE5vV2lkdGhcIikgPz8gdW5kZWZpbmVkO1xyXG4gICAgc2F2ZUJ1dHRvbiA9IGRhdGFUUj8ucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXCJ0ZCA+IGJ1dHRvbi5saW5rXCIpID8/IHVuZGVmaW5lZDtcclxuICAgIGlmIChcclxuICAgICAgIXNhdmVCdXR0b24/LmdldEF0dHJpYnV0ZShcIm9uY2xpY2tcIik/LmluY2x1ZGVzKFwiamF2YXNjcmlwdDpzYXZlRW50cnkoJ0tsYXNzaWZpemllcnVuZ0Zvcm0nXCIpXHJcbiAgICApXHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkltcG9zdGV1ciBkZSBib3V0b24gZGUgc2F1dmVnYXJkZSAoYnRuIHBhcyB0cm91dsOpKVwiKTtcclxuXHJcbiAgICBicmVhaztcclxuICB9XHJcblxyXG4gIG5hbWVkTG9nKHsgbmFtZSwgc2VsZWN0LCBzYXZlQnV0dG9uIH0pO1xyXG5cclxuICBpZiAoIXNlbGVjdCB8fCAhc2F2ZUJ1dHRvbikge1xyXG4gICAgYWxlcnQoXHJcbiAgICAgIGBMJ2VudHLDqWUgJHtuYW1lfSBlc3QgaW50cm91dmFibGUuIFbDqXJpZmlleiBldCBjcsOpZXogbGEgc2kgYmVzb2luLlxcbkVuc3VpdGUgcmVsYW5jZXogbGEgdMOiY2hlYFxyXG4gICAgKTtcclxuICAgIHRocm93IG5ldyBXYXJuaW5nKGBMaWduZSAke25hbWV9IGludHJvdXZhYmxlLmApO1xyXG4gIH1cclxuXHJcbiAgLy9BbHJlYWR5IGEgdmFsdWUgaW5zaWRlIHRoZSBzZWxlY3RcclxuICBpZiAoc2VsZWN0LnZhbHVlICE9PSBcIjBcIikge1xyXG4gICAgLy9Bc2sgdG8gb3ZlcndyaXRlXHJcbiAgICBpZiAoXHJcbiAgICAgIHRhc2suc2hhcmVkRGF0YS5leGlzdGluZ0RhdGFTdHJhdGVneSA9PT0gXCJhc2tcIiAmJlxyXG4gICAgICAhY29uZmlybShgJHtuYW1lfSBkw6lqw6AgcmVuc2VpZ27DqS5cXG5Tb3VoYWl0ZXogdm91cyBsJ8OpY3Jhc2VyP1xcbmAgKyBgVmFsZXVyOiAnJHt2YWx1ZX0nYClcclxuICAgICkge1xyXG4gICAgICBhbGVydChgVsOpcmlmaWV6L3JlbnNlaWduZXogbGUgY29sbMOoZ2UsIGVucmVnaXN0cmV6IHB1aXMgY29udGludWV6IGxhIHTDomNoZS5gKTtcclxuICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChuZXh0U3RlcCwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgIHRocm93IG5ldyBXYXJuaW5nKGBWw6lyaWZpZXIvUmVuc2VpZ25lciBtYW51ZWxsZW1lbnQgJHtuYW1lfWApO1xyXG4gICAgfVxyXG4gICAgLy9Ta2lwIHRvIG5leHQgc3RlcFxyXG4gICAgZWxzZSBpZiAodGFzay5zaGFyZWREYXRhLmV4aXN0aW5nRGF0YVN0cmF0ZWd5ID09PSBcInNraXBcIikge1xyXG4gICAgICBjb25zb2xlLmluZm8oXCJza2lwcGluZyB0byBuZXh0IHN0ZXAgYWNjb3JkaW5nIHRvIGV4aXN0aW5nRGF0YSBzdHJhdGVneVwiKTtcclxuICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChuZXh0U3RlcCwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vZmluZCBtYXRjaGluZyBuYW1lXHJcbiAgY29uc3Qgb3B0aW9uc1RvU2VsZWN0ID0gWy4uLnNlbGVjdC5vcHRpb25zXS5maWx0ZXIoKG9wKSA9PlxyXG4gICAgb3AudGV4dENvbnRlbnQ/LnRyaW0oKS5zcGxpdChcIicnXCIpLmpvaW4oXCInXCIpLmluY2x1ZGVzKHZhbHVlLnRyaW0oKS5zcGxpdChcIicnXCIpLmpvaW4oXCInXCIpKVxyXG4gICk7XHJcblxyXG4gIGxldCByZXNJbmRleENob3NlbiA9IDE7XHJcbiAgaWYgKCF0YXNrLnNoYXJlZERhdGEuc2hvdWxkU2VsZWN0Rmlyc3REYXRhICYmIG9wdGlvbnNUb1NlbGVjdC5sZW5ndGggPiAxKSB7XHJcbiAgICBkbyB7XHJcbiAgICAgIGNvbnN0IHR4dFJlcyA9IHByb21wdChcclxuICAgICAgICBgVmV1aWxsZXogY2hvaXNpciBsYSBib25uZSB2YWxldXIgcG91ciAnJHtuYW1lfScuXFxuXFxuYCArXHJcbiAgICAgICAgICBgVmFsZXVyIGNoZXJjaMOpZTogJyR7dmFsdWV9J1xcbmAgK1xyXG4gICAgICAgICAgYFBlcnNvbm5lOiAke3BlcnNvbltcImUgcHJlbm9tXCJdfSAke3BlcnNvbltcImUgbm9tXCJdfSBbJHtwZXJzb25bXCJlIGlkXCJdfV1cXG5cXG5gICtcclxuICAgICAgICAgIG9wdGlvbnNUb1NlbGVjdC5tYXAoKG8sIGkpID0+IGBbJHtpICsgMX1dICR7by50ZXh0Q29udGVudD8udHJpbSgpfWApLmpvaW4oXCJcXG5cIiksXHJcbiAgICAgICAgcmVzSW5kZXhDaG9zZW4udG9TdHJpbmcoKVxyXG4gICAgICApO1xyXG4gICAgICBpZiAodHh0UmVzID09PSBudWxsKSB7XHJcbiAgICAgICAgYWxlcnQoXHJcbiAgICAgICAgICBgRW50cmV6IG1hbnVlbGxlbWVudCBsYSB2YWxldXIgZGUgJHtuYW1lfS5cXG5WYWxldXIgZHUgZmljaGllcjogJHt2YWx1ZX1cXG5gICtcclxuICAgICAgICAgICAgYFBlcnNvbm5lOiBbJHtwZXJzb25bXCJlIGlkXCJdfV0gJHtwZXJzb25bXCJlIHByZW5vbVwiXX0gJHtwZXJzb25bXCJlIG5vbVwiXX1gXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKG5leHRTdGVwLCB0YXNrLCB0cnVlKTtcclxuICAgICAgICB0aHJvdyBuZXcgV2FybmluZyhgRW50cmVyIG1hbnVlbGxlbWVudDogJHtuYW1lfTogXCIke3ZhbHVlfVwiLiBwLmlkOiAke3BlcnNvbltcImUgaWRcIl19YCk7XHJcbiAgICAgIH1cclxuICAgICAgcmVzSW5kZXhDaG9zZW4gPSBwYXJzZUludCh0eHRSZXMpO1xyXG4gICAgfSB3aGlsZSAoXHJcbiAgICAgIGlzTmFOKHJlc0luZGV4Q2hvc2VuKSB8fFxyXG4gICAgICByZXNJbmRleENob3NlbiA8IDEgfHxcclxuICAgICAgcmVzSW5kZXhDaG9zZW4gPiBvcHRpb25zVG9TZWxlY3QubGVuZ3RoXHJcbiAgICApO1xyXG4gIH1cclxuXHJcbiAgY29uc3Qgb3B0aW9uVG9TZWxlY3QgPSBvcHRpb25zVG9TZWxlY3RbcmVzSW5kZXhDaG9zZW4gLSAxXTtcclxuXHJcbiAgaWYgKCFvcHRpb25Ub1NlbGVjdD8udmFsdWUpIHtcclxuICAgIGFsZXJ0KFxyXG4gICAgICBgJHtuYW1lfTogJyR7dmFsdWV9JzogaW50cm91dmFibGUgZGFucyBsZXMgbGlzdGVzLiBSZW5zZWlnbmV6IGxlIG1hbnVlbGxlbWVudCBwdWlzIGVucmVnaXN0cmV6LiBFbnN1aXRlIGNvbnRpbnVleiBsYSB0w6JjaGUuXFxuYCArXHJcbiAgICAgICAgYFBlcnNvbm5lOiBbJHtwZXJzb25bXCJlIGlkXCJdfV0gJHtwZXJzb25bXCJlIHByZW5vbVwiXX0gJHtwZXJzb25bXCJlIG5vbVwiXX1gXHJcbiAgICApO1xyXG4gICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChuZXh0U3RlcCwgdGFzaywgdHJ1ZSk7XHJcbiAgICB0aHJvdyBuZXcgV2FybmluZyhcclxuICAgICAgYCR7bmFtZX06ICcke3ZhbHVlfScgaW50cm91dmFibGUuIFJlbnNlaWduZXIgbWFudWVsbGVtZW50LiBwLmlkOiAke3BlcnNvbltcImUgaWRcIl19YFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIC8vc2tpcCBpZiBhbHJlYWR5IHJpZ2h0IHZhbHVlXHJcbiAgaWYgKHNlbGVjdC52YWx1ZSA9PT0gb3B0aW9uVG9TZWxlY3QudmFsdWUpIHtcclxuICAgIG5leHRUYXNrU3RlcChuZXh0U3RlcCwgdGFzayk7XHJcbiAgICByZXR1cm47XHJcbiAgfVxyXG5cclxuICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKG5leHRTdGVwLCB0YXNrLCB0cnVlKTtcclxuICBzZWxlY3QudmFsdWUgPSBvcHRpb25Ub1NlbGVjdC52YWx1ZTtcclxuICBzYXZlQnV0dG9uLmNsaWNrKCk7XHJcbn1cclxuIiwiaW1wb3J0IGxvY2FsZm9yYWdlIGZyb20gXCJsb2NhbGZvcmFnZVwiO1xyXG5pbXBvcnQgeyByZWZyZXNoVGFza1dpbmRvdyB9IGZyb20gXCIuLi9jb21wb25lbnRzL1Rhc2tXaW5kb3dcIjtcclxuaW1wb3J0IHsgYWRkT3RoZXJQcmVzdFRhc2tQYXJhbXMgfSBmcm9tIFwiLi4vdGFza3MvYWRkT3RoZXJQcmVzdHNcIjtcclxuaW1wb3J0IHsgYXBwbHlDb250cmFjdFRhc2tQYXJhbXMgfSBmcm9tIFwiLi4vdGFza3MvYXBwbHlDb250cmFjdFwiO1xyXG5pbXBvcnQgeyBhcHBseVBlcmNlbnRGYWN0dXJhdGlvblRhc2tQYXJhbXMgfSBmcm9tIFwiLi4vdGFza3MvYXBwbHlQZXJjZW50RmFjdHVyYXRpb25cIjtcclxuaW1wb3J0IHsgY2hhbmdlTW90aXZlVGFza1BhcmFtcyB9IGZyb20gXCIuLi90YXNrcy9jaGFuZ2VNb3RpdmVcIjtcclxuaW1wb3J0IHsgZmlsbENvbnRyYWN0Q2xhc3Nlc1Rhc2tQYXJhbXMgfSBmcm9tIFwiLi4vdGFza3MvZmlsbENvbnRyYWN0Q2xhc3Nlc1wiO1xyXG5pbXBvcnQgeyBnb1RvQ29udHJhY3RzVGFza1BhcmFtcyB9IGZyb20gXCIuLi90YXNrcy9nb1RvQ29udHJhY3RzXCI7XHJcbmltcG9ydCB7IHJlbW92ZURBQ1ByZXN0VGFza1BhcmFtcyB9IGZyb20gXCIuLi90YXNrcy9yZW1vdmVEQUNQcmVzdFwiO1xyXG5pbXBvcnQgeyB0ZXN0VGFza1BhcmFtcyB9IGZyb20gXCIuLi90YXNrcy90ZXN0XCI7XHJcbmltcG9ydCB7IFdhcm5pbmcgfSBmcm9tIFwiLi9lcnJvcnNcIjtcclxuaW1wb3J0IHsgSWNhcmVXaW5kb3cgfSBmcm9tIFwiLi9pY2FyZVR5cGVzXCI7XHJcbmltcG9ydCB7IHN0ZXBDb250cmFjdHNUYXNrUGFyYW1zIH0gZnJvbSBcIi4uL3Rhc2tzL3N0ZXBDb250cmFjdHNcIjtcclxuaW1wb3J0IHsgcmVtb3ZlRW5kRGF0ZVRhc2tQYXJhbXMgfSBmcm9tIFwiLi4vdGFza3MvcmVtb3ZlRW5kRGF0ZVwiO1xyXG5cclxuZXhwb3J0IHR5cGUgVGFzayA9IHtcclxuICBuYW1lOiBrZXlvZiB0eXBlb2YgdGFza01hcDtcclxuICBkZXNjcmlwdGlvbj86IHN0cmluZztcclxuICBpc1BhdXNlZDogYm9vbGVhbjtcclxuICBzdGVwTmFtZTogXCJzdGFydFwiIHwgXCJzdWNjZXNzXCIgfCBzdHJpbmc7XHJcbiAgc3RhcnRlZEF0OiBudW1iZXI7XHJcbiAgZW5kZWRBdD86IG51bWJlcjtcclxuICBzdGVwU3RhcnRlZEF0OiBudW1iZXI7XHJcbiAgbGFzdE1lc3NhZ2U/OiBzdHJpbmc7XHJcbiAgc2hhcmVkRGF0YTogYW55O1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgVGFza1BhcmFtcyA9IHtcclxuICB0YXNrRm46ICh0YXNrOiBUYXNrKSA9PiBQcm9taXNlPHZvaWQ+O1xyXG4gIGFjdGlvbnNFbGVtcz86IEVsZW1lbnRbXTtcclxuICB3aW5kb3dTZWN0aW9uQ29tcG9uZW50PygpOiBFbGVtZW50O1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHRhc2tNYXAgPSB7XHJcbiAgYXBwbHlDb250cmFjdDogYXBwbHlDb250cmFjdFRhc2tQYXJhbXMsXHJcbiAgdGVzdDogdGVzdFRhc2tQYXJhbXMsXHJcbiAgZmlsbENvbnRyYWN0Q2xhc3NlczogZmlsbENvbnRyYWN0Q2xhc3Nlc1Rhc2tQYXJhbXMsXHJcbiAgYXBwbHlQZXJjZW50RmFjdHVyYXRpb246IGFwcGx5UGVyY2VudEZhY3R1cmF0aW9uVGFza1BhcmFtcyxcclxuICBnb1RvQ29udHJhY3RzOiBnb1RvQ29udHJhY3RzVGFza1BhcmFtcyxcclxuICByZW1vdmVFbmREYXRlOiByZW1vdmVFbmREYXRlVGFza1BhcmFtcyxcclxuICBhZGRPdGhlclByZXN0OiBhZGRPdGhlclByZXN0VGFza1BhcmFtcyxcclxuICByZW1vdmVEQUNQcmVzdDogcmVtb3ZlREFDUHJlc3RUYXNrUGFyYW1zLFxyXG4gIGNoYW5nZU1vdGl2ZTogY2hhbmdlTW90aXZlVGFza1BhcmFtcyxcclxuICBzdGVwQ29udHJhY3RzOiBzdGVwQ29udHJhY3RzVGFza1BhcmFtcyxcclxufSBzYXRpc2ZpZXMgUmVjb3JkPHN0cmluZywgVGFza1BhcmFtcz47XHJcblxyXG4vLyBDT05GSUdcclxuLy8gY29uc3QgU1RFUF9CWV9TVEVQID0gdHJ1ZTtcclxuY29uc3QgU1RFUF9CWV9TVEVQID0gZmFsc2U7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlVGFza3MoKSB7XHJcbiAgY29uc3QgW3Rhc2ssIHNob3VsZEtpbGxUYXNrXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgIGdldEN1cnJlbnRUYXNrKCksXHJcbiAgICBsb2NhbGZvcmFnZS5nZXRJdGVtKFwiTFRTaG91bGRTdG9wVGFza1wiKSxcclxuICBdKTtcclxuXHJcbiAgLy9raWxsIHRhc2tcclxuICBpZiAoc2hvdWxkS2lsbFRhc2spIHtcclxuICAgIGF3YWl0IHJlbW92ZUN1cnJlbnRUYXNrKCk7XHJcbiAgICBhd2FpdCBsb2NhbGZvcmFnZS5yZW1vdmVJdGVtKFwiTFRTaG91bGRTdG9wVGFza1wiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIHJlZnJlc2hUYXNrV2luZG93KHRhc2spO1xyXG4gIGlmICghdGFzaykge1xyXG4gICAgY29uc29sZS5pbmZvKFwibm8gdGFza1wiKTtcclxuICAgIHJldHVybjtcclxuICB9XHJcblxyXG4gIGlmICh0YXNrLmlzUGF1c2VkKSB7XHJcbiAgICBjb25zb2xlLmluZm8oYHRhc2sgJHt0YXNrLm5hbWV9IGlzIHBhdXNlZGAsIHRhc2spO1xyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuXHJcbiAgY29uc29sZS5pbmZvKGBoYW5kbGluZyB0YXNrICR7dGFzay5uYW1lfSwgc3RlcCAke3Rhc2suc3RlcE5hbWV9YCwgdGFzayk7XHJcblxyXG4gIHRyeSB7XHJcbiAgICBhd2FpdCB0YXNrTWFwW3Rhc2submFtZV0udGFza0ZuKHRhc2spO1xyXG4gIH0gY2F0Y2ggKGU6IHVua25vd24gfCBFcnJvciB8IFdhcm5pbmcpIHtcclxuICAgIGNvbnN0IGJyb2tlblRhc2sgPSBhd2FpdCBnZXRDdXJyZW50VGFzaygpO1xyXG4gICAgY29uc29sZS5lcnJvcihcclxuICAgICAgYEFuIGVycm9yIG9jY3VyZWQgaW4gdGhlIHRhc2sgJHt0YXNrLm5hbWV9IGF0IHN0ZXAgJHt0YXNrLnN0ZXBOYW1lfS4gUGF1c2luZyB0aGUgdGFzay5gLFxyXG4gICAgICBlLFxyXG4gICAgICB0YXNrLFxyXG4gICAgICBicm9rZW5UYXNrXHJcbiAgICApO1xyXG4gICAgaWYgKGJyb2tlblRhc2spXHJcbiAgICAgIGF3YWl0IHNldEN1cnJlbnRUYXNrKHtcclxuICAgICAgICAuLi5icm9rZW5UYXNrLFxyXG4gICAgICAgIGlzUGF1c2VkOiB0cnVlLFxyXG4gICAgICAgIGxhc3RNZXNzYWdlOiBlPy50b1N0cmluZz8uKCksXHJcbiAgICAgIH0pO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNldEN1cnJlbnRUYXNrKHRhc2s6IFRhc2spIHtcclxuICBhd2FpdCBsb2NhbGZvcmFnZS5zZXRJdGVtKFwiTFRDdXJyZW50VGFza1wiLCB0YXNrKTtcclxuICByZWZyZXNoVGFza1dpbmRvdyh0YXNrKTtcclxuICByZXR1cm4gdGFzaztcclxufVxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q3VycmVudFRhc2soKTogUHJvbWlzZTxUYXNrIHwgbnVsbD4ge1xyXG4gIHJldHVybiBhd2FpdCBsb2NhbGZvcmFnZS5nZXRJdGVtKFwiTFRDdXJyZW50VGFza1wiKTtcclxufVxyXG5cclxuKHdpbmRvdyBhcyBJY2FyZVdpbmRvdykuZ2V0Q3VycmVudFRhc2sgPSBnZXRDdXJyZW50VGFzaztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVDdXJyZW50VGFzaygpIHtcclxuICBhd2FpdCBQcm9taXNlLmFsbChbbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbShcIkxUQ3VycmVudFRhc2tcIiksIHJlbW92ZUhlYXZ5RGF0YSgpXSk7XHJcbiAgcmVmcmVzaFRhc2tXaW5kb3cobnVsbCk7XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZXRIZWF2eURhdGEodmFsdWU6IGFueSkge1xyXG4gIGF3YWl0IGxvY2FsZm9yYWdlLnNldEl0ZW0oXCJMVEhlYXZ5RGF0YVwiLCB2YWx1ZSk7XHJcbn1cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEhlYXZ5RGF0YSgpIHtcclxuICByZXR1cm4gYXdhaXQgbG9jYWxmb3JhZ2UuZ2V0SXRlbShcIkxUSGVhdnlEYXRhXCIpO1xyXG59XHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW1vdmVIZWF2eURhdGEoKSB7XHJcbiAgYXdhaXQgbG9jYWxmb3JhZ2UucmVtb3ZlSXRlbShcIkxUSGVhdnlEYXRhXCIpO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0TmV3VGFzayhcclxuICBuYW1lOiBrZXlvZiB0eXBlb2YgdGFza01hcCxcclxuICBzaGFyZWREYXRhOiBhbnksXHJcbiAgaGVhdnlEYXRhPzogYW55LFxyXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nXHJcbikge1xyXG4gIGlmIChhd2FpdCBnZXRDdXJyZW50VGFzaygpKSB7XHJcbiAgICBhbGVydChcIkltcG9zc2libGUgZGUgZMOpbWFycmVyIHVuZSBub3V2ZWxsZSB0w6JjaGUuIFVuZSB0w6JjaGUgZXN0IGTDqWrDoCBlbiBjb3Vycy5cIik7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJhIHRhc2sgaXMgYWxyZWFkeSBydW5uaW5nXCIpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgdGFzazogVGFzayA9IHtcclxuICAgIG5hbWUsXHJcbiAgICBkZXNjcmlwdGlvbixcclxuICAgIHN0ZXBOYW1lOiBcInN0YXJ0XCIsXHJcbiAgICBzdGFydGVkQXQ6IERhdGUubm93KCksXHJcbiAgICBzdGVwU3RhcnRlZEF0OiBEYXRlLm5vdygpLFxyXG4gICAgaXNQYXVzZWQ6IGZhbHNlLFxyXG4gICAgc2hhcmVkRGF0YSxcclxuICB9O1xyXG4gIGF3YWl0IFByb21pc2UuYWxsKFtzZXRDdXJyZW50VGFzayh0YXNrKSwgc2V0SGVhdnlEYXRhKGhlYXZ5RGF0YSldKTtcclxuICBoYW5kbGVUYXNrcygpO1xyXG4gIHJldHVybiB0YXNrO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2V0U3RlcChzdGVwTmFtZTogc3RyaW5nKSB7XHJcbiAgY29uc3QgdGFzayA9IGF3YWl0IGdldEN1cnJlbnRUYXNrKCk7XHJcbiAgaWYgKCF0YXNrKSB0aHJvdyBuZXcgRXJyb3IoXCJObyBjdXJyZW50IHRhc2tcIik7XHJcbiAgcmV0dXJuIGF3YWl0IG5leHRUYXNrU3RlcChzdGVwTmFtZSwgdGFzayk7XHJcbn1cclxuXHJcbih3aW5kb3cgYXMgSWNhcmVXaW5kb3cpLmljYXJlVG9vbHMgPSB7XHJcbiAgLi4uKHdpbmRvdyBhcyBJY2FyZVdpbmRvdykuaWNhcmVUb29scyxcclxuICBzZXROZXdUYXNrLFxyXG4gIHNldFN0ZXAsXHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gbmV4dFRhc2tTdGVwKHN0ZXBOYW1lOiBzdHJpbmcsIHRhc2s6IFRhc2ssIHdpbGxSZWxvYWRQYWdlID0gZmFsc2UpIHtcclxuICB0YXNrID0geyAuLi50YXNrLCBzdGVwTmFtZSwgc3RlcFN0YXJ0ZWRBdDogRGF0ZS5ub3coKSB9O1xyXG5cclxuICBpZiAoU1RFUF9CWV9TVEVQKSB0YXNrID0geyAuLi50YXNrLCBpc1BhdXNlZDogdHJ1ZSwgbGFzdE1lc3NhZ2U6IFwiU3RlcCBieSBzdGVwLi4uXCIgfTtcclxuXHJcbiAgdGFzayA9IGF3YWl0IHNldEN1cnJlbnRUYXNrKHRhc2spO1xyXG5cclxuICBpZiAoIXdpbGxSZWxvYWRQYWdlKSBoYW5kbGVUYXNrcygpO1xyXG5cclxuICByZXR1cm4gdGFzaztcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gdXJsQ2hlY2tPckdvKHVybDogc3RyaW5nLCBleGNsdWRlPzogc3RyaW5nKSB7XHJcbiAgaWYgKHVybENoZWNrKHVybCwgZXhjbHVkZSkpIHJldHVybiB0cnVlO1xyXG4gIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gdXJsO1xyXG4gIHJldHVybiBmYWxzZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHVybENoZWNrKHVybDogc3RyaW5nIHwgc3RyaW5nW10sIGV4Y2x1ZGU/OiBzdHJpbmcpIHtcclxuICBpZiAodHlwZW9mIHVybCA9PT0gXCJzdHJpbmdcIikgdXJsID0gW3VybF07XHJcbiAgaWYgKGV4Y2x1ZGUgJiYgd2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoZXhjbHVkZSkpIHJldHVybiBmYWxzZTtcclxuICByZXR1cm4gdXJsLnNvbWUoKHUpID0+IHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluY2x1ZGVzKHUpKTtcclxufVxyXG4iLCJleHBvcnQgZnVuY3Rpb24gbmFtZWRMb2codmFsdWVzOiB7IFtuYW1lOiBzdHJpbmddOiBhbnkgfSkge1xyXG4gIE9iamVjdC5lbnRyaWVzKHZhbHVlcykuZm9yRWFjaCgoW24sIHZdKSA9PiBjb25zb2xlLmxvZyhuLCB2KSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBvYmplY3RDb250YWluc0tleXM8VCBleHRlbmRzIG9iamVjdD4oXHJcbiAgb2JqOiBULFxyXG4gIGtleXM6IChrZXlvZiBUKVtdXHJcbikge1xyXG4gIGNvbnN0IG9iaktleXMgPSBPYmplY3Qua2V5cyhvYmopO1xyXG4gIHJldHVybiBrZXlzLmV2ZXJ5KChrKSA9PiBvYmpLZXlzLmluY2x1ZGVzKGsudG9TdHJpbmcoKSkpO1xyXG59XHJcbiIsImltcG9ydCB7IFdpbmRvd0FkZE90aGVyUHJlc3RTZWN0aW9uIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvV2luZG93QWRkT3RoZXJQcmVzdFNlY3Rpb25cIjtcclxuaW1wb3J0IHsgYXN5bmNfc2V0VGltZW91dCwgd2FpdEZvclNlbGVjdG9yIH0gZnJvbSBcIi4uL2xpYi9hc3luY1wiO1xyXG5pbXBvcnQgeyBlcnJvcklmSWNhcmVUb29scyB9IGZyb20gXCIuLi9saWIvY2hlY2tzXCI7XHJcbmltcG9ydCB7IEljYXJlV2luZG93IH0gZnJvbSBcIi4uL2xpYi9pY2FyZVR5cGVzXCI7XHJcbmltcG9ydCB7IGdldEN1cnJlbnRUYXNrLCBuZXh0VGFza1N0ZXAsIHJlbW92ZUN1cnJlbnRUYXNrLCBUYXNrLCBUYXNrUGFyYW1zIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUVsZW0gfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuaW1wb3J0IHsgdXJsQ2hlY2ssIHVybENoZWNrT3JHbyB9IGZyb20gXCIuLi9saWIvdXJsXCI7XHJcbmltcG9ydCB7IG5hbWVkTG9nIH0gZnJvbSBcIi4uL2xpYi91dGlsc1wiO1xyXG5cclxuZXhwb3J0IHR5cGUgQWRkT3RoZXJQcmVzdENvbnRyYWN0ID0ge1xyXG4gIFwiYyBJRFwiOiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBBZGRPdGhlclByZXN0U2hhcmVkRGF0YSA9IHtcclxuICBjb250cmFjdHM6IHtcclxuICAgIFtpZDogbnVtYmVyXTogQWRkT3RoZXJQcmVzdENvbnRyYWN0O1xyXG4gIH07XHJcbiAgY29udHJhY3RJZHM6IG51bWJlcltdO1xyXG4gIGRvbmVDb250cmFjdHM6IEFkZE90aGVyUHJlc3RDb250cmFjdFtdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQWRkT3RoZXJQcmVzdFRhc2sgPSBPbWl0PFRhc2ssIFwic2hhcmVkRGF0YVwiPiAmIHtcclxuICBzaGFyZWREYXRhOiBBZGRPdGhlclByZXN0U2hhcmVkRGF0YTtcclxufTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGFkZE90aGVyUHJlc3RUYXNrKHRhc2s6IEFkZE90aGVyUHJlc3RUYXNrKSB7XHJcbiAgZXJyb3JJZkljYXJlVG9vbHMoKTtcclxuXHJcbiAgY29uc3QgY3VycmVudENvbnRyYWN0SWQgPSB0YXNrLnNoYXJlZERhdGEuY29udHJhY3RJZHNbMF07XHJcbiAgY29uc3QgY3VycmVudENvbnRyYWN0ID0gY3VycmVudENvbnRyYWN0SWRcclxuICAgID8gdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c1tjdXJyZW50Q29udHJhY3RJZF1cclxuICAgIDogdW5kZWZpbmVkO1xyXG5cclxuICBuYW1lZExvZyh7IGN1cnJlbnRDb250cmFjdCB9KTtcclxuXHJcbiAgc3dpdGNoICh0YXNrLnN0ZXBOYW1lKSB7XHJcbiAgICBjYXNlIFwic3RhcnRcIjoge1xyXG4gICAgICBpZiAodGFzay5zaGFyZWREYXRhLmNvbnRyYWN0SWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIG5leHRUYXNrU3RlcChcInN1Y2Nlc3NcIiwgdGFzayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICAgIGNvbnN0IHRvdGFsQ29udHJhY3RzID0gT2JqZWN0LmtleXModGFzay5zaGFyZWREYXRhLmNvbnRyYWN0cykubGVuZ3RoO1xyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJnb1RvQ29udHJhY3RcIiwge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgbGFzdE1lc3NhZ2U6IGBpZCBjb250cmF0OiAke2N1cnJlbnRDb250cmFjdElkfVxcbiR7XHJcbiAgICAgICAgICB0b3RhbENvbnRyYWN0cyAtIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkcy5sZW5ndGggKyAxXHJcbiAgICAgICAgfS8ke3RvdGFsQ29udHJhY3RzfWAsXHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcImdvVG9Db250cmFjdFwiOiB7XHJcbiAgICAgIC8vZ28gdG8gY29udHJhY3QgdXJsXHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdXJsQ2hlY2tPckdvKFxyXG4gICAgICAgICAgYC9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kbz9tZXRob2Q9bWFpbiZha3R1ZWxsZT10cnVlJnRoZVZlcklkPSR7Y3VycmVudENvbnRyYWN0SWR9YFxyXG4gICAgICAgIClcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjb25maXJtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcIiN0cm90emRlbVwiKTtcclxuICAgICAgaWYgKGNvbmZpcm1Cb3gpIHtcclxuICAgICAgICAvL2NvbmZpcm0gcGFnZVxyXG4gICAgICAgIGF3YWl0IG5leHRUYXNrU3RlcChcImFkZFByZXN0YXRpb25cIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgICAgY29uZmlybUJveC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICBjb25maXJtQm94LmZvcm0/LnN1Ym1pdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJhZGRQcmVzdGF0aW9uXCIsIHRhc2spO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjYXNlIFwiYWRkUHJlc3RhdGlvblwiOiB7XHJcbiAgICAgIC8vY2hlY2sgcGFnZSwgSSBkb24ndCBjaGVjayB0aGUgY29udHJhY3QgaWQgYmVjYXVzZSBJIGRvbid0IGhhdmUgYWxsIGRheS4gbWF5IGNhdXNlIGlzc3VlcyBpbiB0aGUgZnV0dXJlIMKvXFxfKOODhClfL8KvXHJcbiAgICAgIGlmICghdXJsQ2hlY2soYC9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kb2ApKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2NsaWNrIG9uIFwib3RoZXIgcHJlc3RhdGlvbnNcIiB0YWJcclxuICAgICAgY29uc3QgdGFiVGl0bGU6IEhUTUxFbGVtZW50ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yKFwiI3VpLWlkLTlcIik7XHJcbiAgICAgIHRhYlRpdGxlLmNsaWNrKCk7XHJcblxyXG4gICAgICAvL3Nob3cgcHJlc3QgZm9ybVxyXG4gICAgICBjb25zdCBuZXdQcmVzdFNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3IoXHJcbiAgICAgICAgXCIjdWktaWQtMTAgZm9ybVtuYW1lPVBsYXR6aWVydW5nTmV3Rm9ybV0gI2FsLXBsYXR6aWVydW5nc3R5cC1uZXdcIlxyXG4gICAgICApO1xyXG4gICAgICBuZXdQcmVzdFNlbGVjdC52YWx1ZSA9IFwiMTI4MlwiOyAvL0FpZGUgaW5kaXZpZHVlbGxlIEIgKDEyNS4tKVxyXG4gICAgICBuZXdQcmVzdFNlbGVjdC5vbmNoYW5nZT8uY2FsbChuZXdQcmVzdFNlbGVjdCwge30gYXMgRXZlbnQpOyAvL3RoZSBldmVudCBoYW5kbGVyIGRvZXNuJ3QgdXNlIHRoZSBldmVudCBwYXJhbWV0ZXJcclxuXHJcbiAgICAgIGNvbnN0IG5ld1ByZXN0Rm9ybTogSFRNTEZvcm1FbGVtZW50ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yKFwiI3VpLWlkLTEwIGZvcm0jYWwtZm9ybVwiKTtcclxuICAgICAgYXdhaXQgYXN5bmNfc2V0VGltZW91dCgxMDApOyAvL3RvIGFsbG93IHRoZSBmb3JtIHRvIGxvYWRcclxuXHJcbiAgICAgIC8vc2V0IHN0YXJ0IGRhdGVcclxuICAgICAgY29uc3Qgc3RhcnREYXRlSW5wdXQgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3IoKCkgPT5cclxuICAgICAgICBuZXdQcmVzdEZvcm0ucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcIiNhbC1iZWdpbm5cIilcclxuICAgICAgKTtcclxuICAgICAgc3RhcnREYXRlSW5wdXQudmFsdWUgPSBcIjAxLjExLjIwMjJcIjtcclxuXHJcbiAgICAgIC8vc2V0IGVuZCBkYXRlXHJcbiAgICAgIGNvbnN0IGVuZERhdGVJbnB1dCA9IGF3YWl0IHdhaXRGb3JTZWxlY3RvcigoKSA9PlxyXG4gICAgICAgIG5ld1ByZXN0Rm9ybS5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI2FsLWVuZGVcIilcclxuICAgICAgKTtcclxuICAgICAgZW5kRGF0ZUlucHV0LnZhbHVlID0gXCIzMC4xMS4yMDIyXCI7XHJcblxyXG4gICAgICAvL2NsaWNrIG9uIHNhdmVcclxuICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IGF3YWl0IHdhaXRGb3JTZWxlY3RvcigoKSA9PlxyXG4gICAgICAgIG5ld1ByZXN0Rm9ybS5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiYnV0dG9uW3R5cGU9c3VibWl0XS5idG4tc3VjY2Vzc1wiKVxyXG4gICAgICApO1xyXG4gICAgICBzYXZlQnV0dG9uLmNsaWNrKCk7XHJcblxyXG4gICAgICAvL3dhaXQgZm9yIHN1Y2Nlc3MgbWVzc2FnZVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHdhaXRGb3JTZWxlY3RvcigoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzYXZlZEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiI3NhdmVkXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHNhdmVkQm94Py5zdHlsZS52aXNpYmlsaXR5ID09PSBcInZpc2libGVcIiA/IHNhdmVkQm94IDogbnVsbDtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgIGBMJ2VucmVnaXN0cmVtZW50IGF1dG9tYXRpcXVlIGRlICR7Y3VycmVudENvbnRyYWN0SWR9IG4nYSBwYXMgZm9uY3Rpb25uw6ksIGNvbnRpbnVleiBsYSB0w6JjaGUgcG91ciByw6llc3NheWVyIG91IGZhaXRlcyBsZSBtYW51ZWxsZW1lbnQgZXQgcGFzc2V6IGF1IGNvbnRyYXQgc3VpdmFudGBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgdGFzayk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcImVuZE9mTG9vcFwiOiB7XHJcbiAgICAgIGNvbnN0IG5ld1Rhc2s6IEFkZE90aGVyUHJlc3RUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgY29udHJhY3RJZHM6IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkcy5zbGljZSgxKSxcclxuICAgICAgICAgIGRvbmVDb250cmFjdHM6IFtcclxuICAgICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLmRvbmVDb250cmFjdHMsXHJcbiAgICAgICAgICAgIC4uLihjdXJyZW50Q29udHJhY3QgPyBbY3VycmVudENvbnRyYWN0XSA6IFtdKSxcclxuICAgICAgICAgIF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgICAgbmV4dFRhc2tTdGVwKFwic3RhcnRcIiwgbmV3VGFzayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcclxuICAgICAgYWxlcnQoXCJUw6JjaGUgdGVybWluw6llIVwiKTtcclxuICAgICAgY29uc29sZS5sb2coXCJjb250cmF0cyB0ZXJtaW7DqXNcIiwgdGFzay5zaGFyZWREYXRhLmRvbmVDb250cmFjdHMpO1xyXG4gICAgICBhd2FpdCByZW1vdmVDdXJyZW50VGFzaygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYWRkT3RoZXJQcmVzdFRhc2tQYXJhbXM6IFRhc2tQYXJhbXMgPSB7XHJcbiAgdGFza0ZuOiBhZGRPdGhlclByZXN0VGFzayxcclxuICB3aW5kb3dTZWN0aW9uQ29tcG9uZW50OiBXaW5kb3dBZGRPdGhlclByZXN0U2VjdGlvbixcclxuICBhY3Rpb25zRWxlbXM6IFtcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiYnV0dG9uXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYyBvbmNsaWNrKGUpIHtcclxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICBpZiAoIWNvbmZpcm0oXCLDinRlcyB2b3VzIHPDu3IgZGUgdm91bG9pciBwYXNzZXIgYXUgY29udHJhdCBzdWl2YW50P1wiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgY29uc3QgdGFzayA9IGF3YWl0IGdldEN1cnJlbnRUYXNrKCk7XHJcbiAgICAgICAgICBpZiAoIXRhc2spIHJldHVybjtcclxuICAgICAgICAgIG5leHRUYXNrU3RlcChcImVuZE9mTG9vcFwiLCB7IC4uLnRhc2ssIGlzUGF1c2VkOiBmYWxzZSB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIlBhc3NlciBhdSBjb250cmF0IHN1aXZhbnRcIlxyXG4gICAgKSxcclxuICBdLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBXaW5kb3dBcHBseUNvbnRyYWN0U2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1dpbmRvd0FwcGx5Q29udHJhY3RTZWN0aW9uXCI7XHJcbmltcG9ydCB7IHdhaXRGb3JTZWxlY3RvciB9IGZyb20gXCIuLi9saWIvYXN5bmNcIjtcclxuaW1wb3J0IHsgZXJyb3JJZkljYXJlVG9vbHMgfSBmcm9tIFwiLi4vbGliL2NoZWNrc1wiO1xyXG5pbXBvcnQge1xyXG4gIGdldEN1cnJlbnRUYXNrLFxyXG4gIG5leHRUYXNrU3RlcCxcclxuICByZW1vdmVDdXJyZW50VGFzayxcclxuICBzZXRDdXJyZW50VGFzayxcclxuICBUYXNrLFxyXG4gIFRhc2tQYXJhbXMsXHJcbn0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IGNyZWF0ZUVsZW0gfSBmcm9tIFwiLi4vbGliL1VJVG9vbHNcIjtcclxuaW1wb3J0IHsgdXJsQ2hlY2ssIHVybENoZWNrT3JHbyB9IGZyb20gXCIuLi9saWIvdXJsXCI7XHJcblxyXG5leHBvcnQgdHlwZSBBcHBseWFibGVDb250cmFjdCA9IHsgXCJjIElEXCI6IG51bWJlcjsgXCJjIGZpblwiPzogc3RyaW5nIH07XHJcblxyXG5leHBvcnQgdHlwZSBBcHBseUNvbnRyYWN0U2hhcmVkRGF0YSA9IHtcclxuICBjb250cmFjdElkc1RvSGFuZGxlOiBudW1iZXJbXTtcclxuICBjb250cmFjdHM6IFJlY29yZDxudW1iZXIsIEFwcGx5YWJsZUNvbnRyYWN0PjtcclxuICBmYWlsZWRTYXZlc0lkczogbnVtYmVyW107XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBBcHBseUNvbnRyYWN0VGFzayA9IE9taXQ8VGFzaywgXCJzaGFyZWREYXRhXCI+ICYge1xyXG4gIHNoYXJlZERhdGE6IEFwcGx5Q29udHJhY3RTaGFyZWREYXRhO1xyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlDb250cmFjdHNUYXNrRm4odGFzazogQXBwbHlDb250cmFjdFRhc2spIHtcclxuICBlcnJvcklmSWNhcmVUb29scygpO1xyXG4gIGNvbnN0IGN1cnJlbnRJZCA9IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkc1RvSGFuZGxlWzBdO1xyXG4gIHN3aXRjaCAodGFzay5zdGVwTmFtZSkge1xyXG4gICAgY2FzZSBcInN0YXJ0XCI6IHtcclxuICAgICAgaWYgKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkc1RvSGFuZGxlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIG5leHRUYXNrU3RlcChcInN1Y2Nlc3NcIiwgdGFzayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjb250cmFjdHNDb3VudCA9IE9iamVjdC5rZXlzKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMpLmxlbmd0aDtcclxuXHJcbiAgICAgIG5leHRUYXNrU3RlcChcInRhc2tDb250cmFjdFBhZ2VTdGFydFwiLCB7XHJcbiAgICAgICAgLi4udGFzayxcclxuICAgICAgICBsYXN0TWVzc2FnZTogYGlkIGNvbnRyYXQ6ICR7Y3VycmVudElkfVxcbiR7XHJcbiAgICAgICAgICBjb250cmFjdHNDb3VudCAtIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkc1RvSGFuZGxlLmxlbmd0aCArIDFcclxuICAgICAgICB9LyR7Y29udHJhY3RzQ291bnR9YCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcInRhc2tDb250cmFjdFBhZ2VTdGFydFwiOiB7XHJcbiAgICAgIGNvbnN0IGNvbnRyYWN0VG9BcHBseSA9IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNbY3VycmVudElkXTtcclxuICAgICAgaWYgKGNvbnRyYWN0VG9BcHBseVtcImMgZmluXCJdID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvL25leHQgc3RlcFxyXG4gICAgICAgIG5leHRUYXNrU3RlcChcImVuZE9mTG9vcFwiLCB0YXNrKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vZ28gdG8gY29udHJhY3QgdXJsXHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdXJsQ2hlY2tPckdvKGAvaWNhcmUvQmUvVmVydHJhZ0VkaXQuZG8/bWV0aG9kPW1haW4mYWt0dWVsbGU9dHJ1ZSZ0aGVWZXJJZD0ke2N1cnJlbnRJZH1gKVxyXG4gICAgICApIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNvbmZpcm1Cb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI3Ryb3R6ZGVtXCIpO1xyXG4gICAgICBpZiAoY29uZmlybUJveCkge1xyXG4gICAgICAgIC8vY29uZmlybSBwYWdlXHJcbiAgICAgICAgYXdhaXQgbmV4dFRhc2tTdGVwKFwiY29udHJhY3RQYWdlRmlsbEZvcm1cIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgICAgY29uZmlybUJveC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICBjb25maXJtQm94LmZvcm0/LnN1Ym1pdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJjb250cmFjdFBhZ2VGaWxsRm9ybVwiLCB0YXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiY29udHJhY3RQYWdlRmlsbEZvcm1cIjoge1xyXG4gICAgICAvL2NoZWNrIHBhZ2UsIEkgZG9uJ3QgY2hlY2sgdGhlIGNvbnRyYWN0IGlkIGJlY2F1c2UgSSBkb24ndCBoYXZlIGFsbCBkYXkuIG1heSBjYXVzZSBpc3N1ZXMgaW4gdGhlIGZ1dHVyZSDCr1xcXyjjg4QpXy/Cr1xyXG4gICAgICBpZiAoIXVybENoZWNrKGAvaWNhcmUvQmUvVmVydHJhZ0VkaXQuZG9gKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY3VycmVudENvbnRyYWN0ID0gdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c1tjdXJyZW50SWRdO1xyXG5cclxuICAgICAgbGV0IHNob3VsZFNhdmUgPSBmYWxzZTtcclxuXHJcbiAgICAgIGlmIChjdXJyZW50Q29udHJhY3RbXCJjIGZpblwiXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgc2hvdWxkU2F2ZSA9IHRydWU7XHJcbiAgICAgICAgLy9jaGFuZ2UgZW5kIGRhdGVcclxuICAgICAgICBjb25zdCBlbmREYXRlSW5wdXQgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCJpbnB1dCN2ZXJFbmRlXCIpO1xyXG4gICAgICAgIGVuZERhdGVJbnB1dC52YWx1ZSA9IGN1cnJlbnRDb250cmFjdFtcImMgZmluXCJdO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBpZiAoc2hvdWxkU2F2ZSkge1xyXG4gICAgICAgIC8vQVNZTkMgR0FSQkFHRTogd2FpdCBmb3Igc3VjY2VzcyBvbiB0aGUgc2FtZSBwYWdlXHJcbiAgICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChcImNvbnRyYWN0UGFnZUNvbmZpcm1TYXZlXCIsIHRhc2ssIHRydWUpOyAvL0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBXHJcblxyXG4gICAgICAgIC8vY2xpY2sgb24gc2F2ZVxyXG4gICAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGF3YWl0IHdhaXRGb3JTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXHJcbiAgICAgICAgICBcImZvcm1bbmFtZT1WZXJ0cmFnRWRpdEZvcm1dIGJ1dHRvblt0eXBlPXN1Ym1pdF0uYnRuLXN1Y2Nlc3NcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgc3VibWl0QnV0dG9uLmNsaWNrKCk7XHJcblxyXG4gICAgICAgIC8vIHdhaXQgZm9yIHN1Y2Nlc3MgbWVzc2FnZVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBhd2FpdCB3YWl0Rm9yU2VsZWN0b3IoXHJcbiAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICBjb25zdCBzYXZlZEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiI3NhdmVkXCIpO1xyXG4gICAgICAgICAgICAgIHJldHVybiBzYXZlZEJveD8uc3R5bGUudmlzaWJpbGl0eSA9PT0gXCJ2aXNpYmxlXCIgPyBzYXZlZEJveCA6IG51bGw7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDEwLFxyXG4gICAgICAgICAgICA1MDBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgLy9qdXN0IHNhdmUgdGhlIGVycm9yXHJcbiAgICAgICAgICB0YXNrID0gYXdhaXQgc2V0Q3VycmVudFRhc2soPEFwcGx5Q29udHJhY3RUYXNrPntcclxuICAgICAgICAgICAgLi4udGFzayxcclxuICAgICAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YSxcclxuICAgICAgICAgICAgICBmYWlsZWRTYXZlc0lkczogWy4uLih0YXNrLnNoYXJlZERhdGEuZmFpbGVkU2F2ZXNJZHMgPz8gW10pLCBjdXJyZW50SWRdLFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgLy8gICBgTCdlbnJlZ2lzdHJlbWVudCBhdXRvbWF0aXF1ZSBkZSAke2N1cnJlbnRJZH0gbidhIHBhcyBmb25jdGlvbm7DqSwgY29udGludWV6IGxhIHTDomNoZSBwb3VyIHLDqWVzc2F5ZXIgb3UgZmFpdGVzIGxlIG1hbnVlbGxlbWVudCBldCBwYXNzZXogYXUgY29udHJhdCBzdWl2YW50YFxyXG4gICAgICAgICAgLy8gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgdGFzayk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcImNvbnRyYWN0UGFnZUNvbmZpcm1TYXZlXCI6IHtcclxuICAgICAgLy9XQVJOSU5HOiBhc3luY2hyb25vdXMgc3RlcCwgZG9uJ3QgdXBkYXRlIHRoZSB0YXNrIGhlcmUhXHJcbiAgICAgIGlmICghdXJsQ2hlY2soXCIvaWNhcmUvQmUvUGxhdHppZXJ1bmdWZXJ0cmFnUHJlcGFyZS5kb1wiKSkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3Qgb2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxyXG4gICAgICAgIFwiZm9ybVtuYW1lPVZlcnRyYWdFZGl0Rm9ybV0gaW5wdXQuYnRuLmJ0bi1wcmltYXJ5XCJcclxuICAgICAgKTtcclxuICAgICAgb2tCdXR0b24/LmNsaWNrKCk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcImVuZE9mTG9vcFwiOiB7XHJcbiAgICAgIGNvbnN0IG5ld1Rhc2s6IEFwcGx5Q29udHJhY3RUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgY29udHJhY3RJZHNUb0hhbmRsZTogdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0SWRzVG9IYW5kbGUuc2xpY2UoMSksXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgICAgbmV4dFRhc2tTdGVwKFwic3RhcnRcIiwgbmV3VGFzayk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xyXG4gICAgICBjb25zb2xlLmluZm8oXCJmYWlsZWQgc2F2ZXM6XCIsIHRhc2suc2hhcmVkRGF0YS5mYWlsZWRTYXZlc0lkcyk7XHJcbiAgICAgIGFsZXJ0KFwiVMOiY2hlIHRlcm1pbsOpZSFcIik7XHJcbiAgICAgIGF3YWl0IHJlbW92ZUN1cnJlbnRUYXNrKCk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgYXBwbHlDb250cmFjdFRhc2tQYXJhbXM6IFRhc2tQYXJhbXMgPSB7XHJcbiAgdGFza0ZuOiBhcHBseUNvbnRyYWN0c1Rhc2tGbixcclxuICB3aW5kb3dTZWN0aW9uQ29tcG9uZW50OiBXaW5kb3dBcHBseUNvbnRyYWN0U2VjdGlvbixcclxuICBhY3Rpb25zRWxlbXM6IFtcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiYnV0dG9uXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYyBvbmNsaWNrKGUpIHtcclxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICBpZiAoIWNvbmZpcm0oXCLDinRlcyB2b3VzIHPDu3IgZGUgdm91bG9pciBwYXNzZXIgYXUgY29udHJhdCBzdWl2YW50P1wiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgY29uc3QgdGFzayA9IGF3YWl0IGdldEN1cnJlbnRUYXNrKCk7XHJcbiAgICAgICAgICBpZiAoIXRhc2spIHJldHVybjtcclxuICAgICAgICAgIG5leHRUYXNrU3RlcChcImVuZE9mTG9vcFwiLCB7IC4uLnRhc2ssIGlzUGF1c2VkOiBmYWxzZSB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIlBhc3NlciBhdSBjb250cmF0IHN1aXZhbnRcIlxyXG4gICAgKSxcclxuICBdLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBXaW5kb3dBcHBseVBlcmNlbnRGYWN0dXJhdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1dpbmRvd0FwcGx5UGVyY2VudEZhY3R1cmF0aW9uXCI7XHJcbmltcG9ydCB7IFdhcm5pbmcgfSBmcm9tIFwiLi4vbGliL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBJY2FyZVdpbmRvdyB9IGZyb20gXCIuLi9saWIvaWNhcmVUeXBlc1wiO1xyXG5pbXBvcnQgeyBuZXh0VGFza1N0ZXAsIHJlbW92ZUN1cnJlbnRUYXNrLCBUYXNrLCBUYXNrUGFyYW1zIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IHVybENoZWNrLCB1cmxDaGVja09yR28gfSBmcm9tIFwiLi4vbGliL3VybFwiO1xyXG5cclxudHlwZSBPcmRlciA9IHtcclxuICBudW1iZXI6IG51bWJlcjtcclxuICB0ZXh0OiBzdHJpbmc7XHJcbiAgY29tcHRlRGViOiBzdHJpbmc7XHJcbiAgY3RyQ29zdERlYjogc3RyaW5nO1xyXG4gIGNvbXB0ZUNyZWQ6IHN0cmluZztcclxuICBjdHJDb3N0Q3JlZDogc3RyaW5nO1xyXG4gIHByaWNlQXNDZW50czogbnVtYmVyO1xyXG59O1xyXG5cclxudHlwZSBGYWN0dXJlID0ge1xyXG4gIGlkOiBzdHJpbmc7XHJcbiAgaHJlZjogc3RyaW5nO1xyXG4gIG9yZGVycz86IE9yZGVyW107XHJcbiAgbmV3T3JkZXJzPzogT3JkZXJbXTtcclxuICBuZXdPcmRlckluZGV4PzogbnVtYmVyO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQXBwbHlQZXJjZW50RmFjdHVyYXRpb25TaGFyZWREYXRhID0ge1xyXG4gIGZhY3R1cmVzOiB7XHJcbiAgICBbaWQ6IHN0cmluZ106IEZhY3R1cmU7XHJcbiAgfTtcclxuICBpZHNUb0hhbmRsZTogc3RyaW5nW107XHJcbiAgdGV4dDogc3RyaW5nO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQXBwbHlQZXJjZW50RmFjdHVyYXRpb25UYXNrID0gT21pdDxUYXNrLCBcInNoYXJlZERhdGFcIj4gJiB7XHJcbiAgc2hhcmVkRGF0YTogQXBwbHlQZXJjZW50RmFjdHVyYXRpb25TaGFyZWREYXRhO1xyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlQZXJjZW50RmFjdHVyYXRpb25UYXNrRm4odGFzazogQXBwbHlQZXJjZW50RmFjdHVyYXRpb25UYXNrKSB7XHJcbiAgY29uc3QgbG9jYWxlID0gKHdpbmRvdyBhcyBJY2FyZVdpbmRvdykubG9jYWxlO1xyXG4gIGlmIChsb2NhbGUgJiYgbG9jYWxlLnN1YnN0cmluZygwLCAyKSAhPT0gXCJmclwiKSB7XHJcbiAgICBhbGVydChcclxuICAgICAgXCJDZXR0ZSB0w6JjaGUgc3VwcG9ydGUgdW5pcXVlbWVudCBsZSBzaXRlIGVuIGZyYW7Dp2Fpcy5cXG5cIiArXHJcbiAgICAgICAgXCJDaGFuZ2V6IGxhIGxhbmd1ZSBldCBjb250aW51ZXogbGEgdMOiY2hlXCJcclxuICAgICk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDZXR0ZSB0w6JjaGUgc3VwcG9ydGUgdW5pcXVlbWVudCBsZSBzaXRlIGVuIGZyYW7Dp2Fpcy5cIik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBmYWN0dXJlSWQgPSB0YXNrLnNoYXJlZERhdGEuaWRzVG9IYW5kbGVbMF07XHJcbiAgY29uc3QgY3VycmVudEZhY3R1cmUgPSB0YXNrLnNoYXJlZERhdGEuZmFjdHVyZXNbZmFjdHVyZUlkXTtcclxuXHJcbiAgc3dpdGNoICh0YXNrLnN0ZXBOYW1lKSB7XHJcbiAgICBjYXNlIFwic3RhcnRcIjoge1xyXG4gICAgICBpZiAoIXVybENoZWNrKFwiL2ljYXJlL0FkL0ZqRWRpdC5kb1wiKSkge1xyXG4gICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgXCJNYXV2YWlzZSBwYWdlIGRlIGTDqXBhcnQsIG5hdmlndWV6IHN1ciBsYSBsaXN0ZSBkZXMgZmFjdHVyYXRpb24gcHVpcyBjb250aW51ZXogbGEgdMOiY2hlXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKFwiTWF1dmFpc2UgcGFnZSBkZSBkw6lwYXJ0LlwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy9nZXQgZmFjdHVyZXMgZnJvbSBsaXN0XHJcbiAgICAgIGNvbnN0IFRScyA9IFtcclxuICAgICAgICAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsPEhUTUxUYWJsZVJvd0VsZW1lbnQ+KFwiI2pxRmpEaXNwbGF5VGFibGUgPiB0Ym9keSA+IHRyXCIpLFxyXG4gICAgICBdO1xyXG5cclxuICAgICAgY29uc3QgZmFjdHVyZXMgPSBPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgICAgVFJzLm1hcCgodHIpID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNlbGxzID0gdHIucXVlcnlTZWxlY3RvckFsbChcInRkXCIpO1xyXG4gICAgICAgICAgY29uc3QgbnVtYmVyTGluayA9IGNlbGxzWzFdLnF1ZXJ5U2VsZWN0b3I8SFRNTEFuY2hvckVsZW1lbnQ+KFwiYVwiKTtcclxuICAgICAgICAgIGlmICghbnVtYmVyTGluaykgdGhyb3cgbmV3IEVycm9yKFwiSW1wb3N0ZXVyIGRlIGxpZW4uLi5cIik7XHJcbiAgICAgICAgICBjb25zdCBpZCA9IG51bWJlckxpbmsudGV4dENvbnRlbnQ/LnRyaW0oKSA/PyBcIlwiO1xyXG4gICAgICAgICAgY29uc3QgaHJlZiA9IG51bWJlckxpbmsuaHJlZjtcclxuICAgICAgICAgIGNvbnN0IGZhY3R1cmU6IEZhY3R1cmUgPSB7IGlkLCBocmVmIH07XHJcbiAgICAgICAgICByZXR1cm4gW2lkLCBmYWN0dXJlXTtcclxuICAgICAgICB9KVxyXG4gICAgICApO1xyXG5cclxuICAgICAgY29uc3QgaWRzVG9IYW5kbGUgPSBPYmplY3Qua2V5cyhmYWN0dXJlcyk7XHJcblxyXG4gICAgICBjb25zdCBuZXdUYXNrOiBBcHBseVBlcmNlbnRGYWN0dXJhdGlvblRhc2sgPSB7XHJcbiAgICAgICAgLi4udGFzayxcclxuICAgICAgICBzaGFyZWREYXRhOiB7XHJcbiAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEsXHJcbiAgICAgICAgICBmYWN0dXJlcyxcclxuICAgICAgICAgIGlkc1RvSGFuZGxlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJzdGFydE9mTG9vcFwiLCBuZXdUYXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwic3RhcnRPZkxvb3BcIjoge1xyXG4gICAgICBpZiAodGFzay5zaGFyZWREYXRhLmlkc1RvSGFuZGxlLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIG5leHRUYXNrU3RlcChcInN1Y2Nlc3NcIiwgdGFzayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmYWN0dXJlc0NvdW50ID0gT2JqZWN0LmtleXModGFzay5zaGFyZWREYXRhLmZhY3R1cmVzKS5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGZhY3R1cmVzQ291bnQgLSB0YXNrLnNoYXJlZERhdGEuaWRzVG9IYW5kbGUubGVuZ3RoICsgMTtcclxuXHJcbiAgICAgIGNvbnN0IHRhc2tXaXRoTWVzc2FnZTogQXBwbHlQZXJjZW50RmFjdHVyYXRpb25UYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgbGFzdE1lc3NhZ2U6IGBJbmZvOiBGYWN0dXJlIGNvdXJhbnRlOiAke2ZhY3R1cmVJZH0gKCR7Y3VycmVudEluZGV4fS8ke2ZhY3R1cmVzQ291bnR9KWAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJjb2xsZWN0T3JkZXJzXCIsIHRhc2tXaXRoTWVzc2FnZSk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiY29sbGVjdE9yZGVyc1wiOiB7XHJcbiAgICAgIGlmICghdXJsQ2hlY2tPckdvKGN1cnJlbnRGYWN0dXJlLmhyZWYpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCB0Ym9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZmFrUG9zVGFibGUgPiB0Ym9keVwiKTtcclxuICAgICAgY29uc3Qgcm93cyA9IFsuLi4odGJvZHk/LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0cltjbGFzcz1ldmVuXSwgdHJbY2xhc3M9b2RkXVwiKSA/PyBbXSldO1xyXG4gICAgICBjb25zdCBvcmRlcnMgPSByb3dzLm1hcCgocm93KSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW5wdXRzID0gZ2V0RmFjSW5wdXRzKHJvdyk7XHJcblxyXG4gICAgICAgIGNvbnN0IHByaWNlQXNDZW50cyA9IE1hdGgucm91bmQocGFyc2VGbG9hdChpbnB1dHMucHJpY2UudmFsdWUpICogMTAwKTtcclxuICAgICAgICBpZiAoaXNOYU4ocHJpY2VBc0NlbnRzKSkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBwcmljZVwiKTtcclxuXHJcbiAgICAgICAgY29uc3Qgb3JkZXJOdW1iZXIgPSBwYXJzZUludChpbnB1dHMub3JkZXJJZC52YWx1ZSk7XHJcbiAgICAgICAgaWYgKGlzTmFOKG9yZGVyTnVtYmVyKSlcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIm9yZGVyIG51bWJlciBpcyBub3QgYSBudW1iZXIgXCIgKyBpbnB1dHMub3JkZXJJZC52YWx1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9yZGVyID0ge1xyXG4gICAgICAgICAgbnVtYmVyOiBvcmRlck51bWJlcixcclxuICAgICAgICAgIHRleHQ6IGlucHV0cy50ZXh0LnZhbHVlLFxyXG4gICAgICAgICAgY29tcHRlRGViOiBpbnB1dHMuY29tcHRlRGViLnZhbHVlLFxyXG4gICAgICAgICAgY3RyQ29zdERlYjogaW5wdXRzLmN0ckNvc3REZWIudmFsdWUsXHJcbiAgICAgICAgICBjb21wdGVDcmVkOiBpbnB1dHMuY29tcHRlQ3JlZC52YWx1ZSxcclxuICAgICAgICAgIGN0ckNvc3RDcmVkOiBpbnB1dHMuY3RyQ29zdENyZWQudmFsdWUsXHJcbiAgICAgICAgICBwcmljZUFzQ2VudHMsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG9yZGVyO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIC8vVE9ETzogdXNlIGEgcmVhbCBhbGdvcnl0aG0gaGVyZVxyXG4gICAgICBjb25zdCBncm91cHNPZk9yZGVycyA9IFtvcmRlcnNdO1xyXG4gICAgICBjb25zdCBuZXdPcmRlcnMgPSBncm91cHNPZk9yZGVycy5tYXAoKG9yZGVyR3JvdXApID0+IHtcclxuICAgICAgICBjb25zdCBsYXN0T3JkZXIgPSBvcmRlckdyb3VwLmF0KC0xKTtcclxuICAgICAgICBpZiAoIWxhc3RPcmRlcikgdGhyb3cgbmV3IEVycm9yKFwibWlzc2luZyBvcmRlclwiKTtcclxuXHJcbiAgICAgICAgY29uc3Qgc3VtQXNDZW50cyA9IG9yZGVyR3JvdXAucmVkdWNlKChzLCBvKSA9PiBzICsgby5wcmljZUFzQ2VudHMsIDApO1xyXG4gICAgICAgIGNvbnN0IHByaWNlV2l0aFBlcmNlbnRBc0NlbnRzID0gc3VtQXNDZW50cyAqIDAuMjsgLy9BUFBMWSAyMCVcclxuXHJcbiAgICAgICAgY29uc3Qgb3JkZXI6IE9yZGVyID0ge1xyXG4gICAgICAgICAgbnVtYmVyOiBsYXN0T3JkZXIubnVtYmVyICsgMSxcclxuICAgICAgICAgIHRleHQ6IHRhc2suc2hhcmVkRGF0YS50ZXh0LFxyXG4gICAgICAgICAgY29tcHRlRGViOiBsYXN0T3JkZXIuY29tcHRlRGViLFxyXG4gICAgICAgICAgY3RyQ29zdERlYjogbGFzdE9yZGVyLmN0ckNvc3REZWIsXHJcbiAgICAgICAgICBjb21wdGVDcmVkOiBsYXN0T3JkZXIuY29tcHRlQ3JlZCxcclxuICAgICAgICAgIGN0ckNvc3RDcmVkOiBsYXN0T3JkZXIuY3RyQ29zdENyZWQsXHJcbiAgICAgICAgICBwcmljZUFzQ2VudHM6IHByaWNlV2l0aFBlcmNlbnRBc0NlbnRzLFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmV0dXJuIG9yZGVyO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGNvbnN0IG5ld1Rhc2s6IEFwcGx5UGVyY2VudEZhY3R1cmF0aW9uVGFzayA9IHtcclxuICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgIHNoYXJlZERhdGE6IHtcclxuICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YSxcclxuICAgICAgICAgIGZhY3R1cmVzOiB7XHJcbiAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5mYWN0dXJlcyxcclxuICAgICAgICAgICAgW2ZhY3R1cmVJZF06IHtcclxuICAgICAgICAgICAgICAuLi5jdXJyZW50RmFjdHVyZSxcclxuICAgICAgICAgICAgICBvcmRlcnMsXHJcbiAgICAgICAgICAgICAgbmV3T3JkZXJzOiBuZXdPcmRlcnMsXHJcbiAgICAgICAgICAgICAgbmV3T3JkZXJJbmRleDogMCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIC8vIG5leHRUYXNrU3RlcChcIm5ld09yZGVyX3N0YXJ0T2ZMb29wXCIsIG5ld1Rhc2spO1xyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJkdW1teVN0ZXBcIiwgbmV3VGFzayk7IC8vVE9ETzogaWdub3JlIGNyZWF0aW9uIGZvciBub3dcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwibmV3T3JkZXJfc3RhcnRPZkxvb3BcIjoge1xyXG4gICAgICBpZiAoKGN1cnJlbnRGYWN0dXJlLm5ld09yZGVySW5kZXggPz8gSW5maW5pdHkpID49IChjdXJyZW50RmFjdHVyZS5uZXdPcmRlcnM/Lmxlbmd0aCA/PyAwKSkge1xyXG4gICAgICAgIG5leHRUYXNrU3RlcChcImR1bW15U3RlcFwiLCB0YXNrKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgbmV4dFRhc2tTdGVwKFwibmV3T3JkZXJfZmlsbE9yZGVyXCIsIHRhc2spO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcIm5ld09yZGVyX2ZpbGxPcmRlclwiOiB7XHJcbiAgICAgIGNvbnN0IG9yZGVyVG9GaWxsID0gY3VycmVudEZhY3R1cmUubmV3T3JkZXJzPy5bY3VycmVudEZhY3R1cmUubmV3T3JkZXJJbmRleCA/PyBJbmZpbml0eV07XHJcbiAgICAgIGlmICghb3JkZXJUb0ZpbGwpIHRocm93IG5ldyBFcnJvcihcIm5vIG9yZGVyIHRvIGZpbGxcIik7XHJcbiAgICAgIGNvbnN0IHRhYmxlID0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjZmFrUG9zVGFibGVcIildLmF0KC0xKTtcclxuICAgICAgaWYgKCF0YWJsZSkgdGhyb3cgbmV3IEVycm9yKFwidGFibGUgbm90IGZvdW5kXCIpO1xyXG5cclxuICAgICAgY29uc3QgaW5wdXRzID0gZ2V0RmFjSW5wdXRzKHRhYmxlKTtcclxuXHJcbiAgICAgIGlucHV0cy5vcmRlcklkLnZhbHVlID0gb3JkZXJUb0ZpbGwubnVtYmVyLnRvU3RyaW5nKCk7XHJcbiAgICAgIGlucHV0cy50ZXh0LnZhbHVlID0gb3JkZXJUb0ZpbGwudGV4dDtcclxuICAgICAgaW5wdXRzLmNvbXB0ZURlYi52YWx1ZSA9IG9yZGVyVG9GaWxsLmNvbXB0ZURlYjtcclxuICAgICAgaW5wdXRzLmN0ckNvc3REZWIudmFsdWUgPSBvcmRlclRvRmlsbC5jdHJDb3N0RGViO1xyXG4gICAgICBpbnB1dHMuY29tcHRlQ3JlZC52YWx1ZSA9IG9yZGVyVG9GaWxsLmNvbXB0ZUNyZWQ7XHJcbiAgICAgIGlucHV0cy5jdHJDb3N0Q3JlZC52YWx1ZSA9IG9yZGVyVG9GaWxsLmN0ckNvc3RDcmVkO1xyXG4gICAgICBpbnB1dHMucHJpY2UudmFsdWUgPSAob3JkZXJUb0ZpbGwucHJpY2VBc0NlbnRzIC8gMTAwKS50b1N0cmluZygpO1xyXG5cclxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXHJcbiAgICAgICAgXCJkaXYuY29sID4gZGl2ID4gYnV0dG9uW3R5cGU9YnV0dG9uXVtvbmNsaWNrXS5idG4tc3VjY2Vzc1wiXHJcbiAgICAgICk7XHJcbiAgICAgIGlmICghc3VibWl0QnV0dG9uKSB0aHJvdyBuZXcgRXJyb3IoXCJubyBzdWJtaXQgYnV0dG9uXCIpO1xyXG4gICAgICBzdWJtaXRCdXR0b24uY2xpY2soKTtcclxuXHJcbiAgICAgIC8vVE9ETzogaW5zdGFudCBleGVjdXRpb24gbWF5IGNhdXNlIHByb2JsZW1zIHdpdGggc2F2aW5nLlxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJuZXdPcmRlcl9lbmRPZkxvb3BcIiwgdGFzayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwibmV3T3JkZXJfZW5kT2ZMb29wXCI6IHtcclxuICAgICAgY29uc3QgbmV3VGFzazogQXBwbHlQZXJjZW50RmFjdHVyYXRpb25UYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgZmFjdHVyZXM6IHtcclxuICAgICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLmZhY3R1cmVzLFxyXG4gICAgICAgICAgICBbZmFjdHVyZUlkXToge1xyXG4gICAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5mYWN0dXJlc1tmYWN0dXJlSWRdLFxyXG4gICAgICAgICAgICAgIG5ld09yZGVySW5kZXg6ICh0YXNrLnNoYXJlZERhdGEuZmFjdHVyZXNbZmFjdHVyZUlkXS5uZXdPcmRlckluZGV4ID8/IDApICsgMSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG5leHRUYXNrU3RlcChcIm5ld09yZGVyX3N0YXJ0T2ZMb29wXCIsIG5ld1Rhc2spO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcImR1bW15U3RlcFwiOiB7XHJcbiAgICAgIG5leHRUYXNrU3RlcChcImVuZE9mTG9vcFwiLCB0YXNrKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJlbmRPZkxvb3BcIjoge1xyXG4gICAgICBjb25zdCBuZXdUYXNrOiBBcHBseVBlcmNlbnRGYWN0dXJhdGlvblRhc2sgPSB7XHJcbiAgICAgICAgLi4udGFzayxcclxuICAgICAgICBzaGFyZWREYXRhOiB7XHJcbiAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEsXHJcbiAgICAgICAgICBpZHNUb0hhbmRsZTogdGFzay5zaGFyZWREYXRhLmlkc1RvSGFuZGxlLnNsaWNlKDEpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJzdGFydE9mTG9vcFwiLCBuZXdUYXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwic3VjY2Vzc1wiOiB7XHJcbiAgICAgIGFsZXJ0KFwiVGVybWluw6khXCIpO1xyXG4gICAgICBjb25zdCBhbGxPcmRlcnMgPSBPYmplY3QuZnJvbUVudHJpZXMoXHJcbiAgICAgICAgT2JqZWN0LmVudHJpZXModGFzay5zaGFyZWREYXRhLmZhY3R1cmVzKS5mbGF0TWFwKChbZmFjSWQsIGZhY10pID0+XHJcbiAgICAgICAgICAoZmFjLm9yZGVycyA/PyBbXSkubWFwKChvcikgPT4gW29yLm51bWJlciwgb3JdKVxyXG4gICAgICAgIClcclxuICAgICAgKTtcclxuICAgICAgY29uc29sZS50YWJsZShhbGxPcmRlcnMpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcImRvbmVcIiwgdGFzay5zaGFyZWREYXRhKTtcclxuXHJcbiAgICAgIHJlbW92ZUN1cnJlbnRUYXNrKCk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRGYWNJbnB1dHMocGFyZW50OiBFbGVtZW50KSB7XHJcbiAgY29uc3QgVERzID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZFt2YWxpZ25dXCIpO1xyXG4gIGNvbnN0IG9yZGVySWQgPSBURHNbMF0ucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcclxuICAgIFwiZm9ybVtuYW1lPUZha3R1cmFQb3NpdGlvbkVkaXRGb3JtXSA+IGlucHV0LmlucHV0W25hbWU9ZnBSZWloZW5mb2xnZV1cIlxyXG4gICk7XHJcbiAgY29uc3QgdGV4dCA9IFREc1sxXS5xdWVyeVNlbGVjdG9yPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KFwidGV4dGFyZWFbbmFtZT1mcFRleHRdXCIpO1xyXG4gIGNvbnN0IGNvbXB0ZURlYiA9IFREc1syXS5xdWVyeVNlbGVjdG9yPEhUTUxUZXh0QXJlYUVsZW1lbnQ+KFwidGV4dGFyZWFbbmFtZT1mcEtvbnRvXVwiKTtcclxuICBjb25zdCBjdHJDb3N0RGViID0gVERzWzNdLnF1ZXJ5U2VsZWN0b3I8SFRNTFRleHRBcmVhRWxlbWVudD4oXCJ0ZXh0YXJlYVtuYW1lPWZwS29zdFN0XVwiKTtcclxuICBjb25zdCBjb21wdGVDcmVkID0gVERzWzRdLnF1ZXJ5U2VsZWN0b3I8SFRNTFRleHRBcmVhRWxlbWVudD4oXCJ0ZXh0YXJlYVtuYW1lPWZwS29udG9IYWJlbl1cIik7XHJcbiAgY29uc3QgY3RyQ29zdENyZWQgPSBURHNbNV0ucXVlcnlTZWxlY3RvcjxIVE1MVGV4dEFyZWFFbGVtZW50PihcInRleHRhcmVhW25hbWU9ZnBLb3N0U3RIYWJlbl1cIik7XHJcbiAgY29uc3QgcHJpY2UgPSBURHNbOV0ucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcImlucHV0W25hbWU9ZnBQcmVpc11cIik7XHJcblxyXG4gIGlmICghb3JkZXJJZCB8fCAhdGV4dCB8fCAhY29tcHRlRGViIHx8ICFjdHJDb3N0RGViIHx8ICFjb21wdGVDcmVkIHx8ICFjdHJDb3N0Q3JlZCB8fCAhcHJpY2UpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIlZhbGV1cnMgaW50cm91dmFibGVzXCIpO1xyXG4gIH1cclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIG9yZGVySWQsXHJcbiAgICB0ZXh0LFxyXG4gICAgY29tcHRlRGViLFxyXG4gICAgY3RyQ29zdERlYixcclxuICAgIGNvbXB0ZUNyZWQsXHJcbiAgICBjdHJDb3N0Q3JlZCxcclxuICAgIHByaWNlLFxyXG4gIH07XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBhcHBseVBlcmNlbnRGYWN0dXJhdGlvblRhc2tQYXJhbXM6IFRhc2tQYXJhbXMgPSB7XHJcbiAgdGFza0ZuOiBhcHBseVBlcmNlbnRGYWN0dXJhdGlvblRhc2tGbixcclxuICB3aW5kb3dTZWN0aW9uQ29tcG9uZW50OiBXaW5kb3dBcHBseVBlcmNlbnRGYWN0dXJhdGlvbixcclxufTtcclxuIiwiaW1wb3J0IHsgV2luZG93Q2hhbmdlTW90aXZlU2VjdGlvbiB9IGZyb20gXCIuLi9jb21wb25lbnRzL1dpbmRvd0NoYW5nZU1vdGl2ZVNlY3Rpb25cIjtcclxuaW1wb3J0IHsgd2FpdEZvclNlbGVjdG9yIH0gZnJvbSBcIi4uL2xpYi9hc3luY1wiO1xyXG5pbXBvcnQgeyBlcnJvcklmSWNhcmVUb29scyB9IGZyb20gXCIuLi9saWIvY2hlY2tzXCI7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Q3VycmVudFRhc2ssXHJcbiAgbmV4dFRhc2tTdGVwLFxyXG4gIHJlbW92ZUN1cnJlbnRUYXNrLFxyXG4gIHNldEN1cnJlbnRUYXNrLFxyXG4gIFRhc2ssXHJcbiAgVGFza1BhcmFtcyxcclxufSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgY3JlYXRlRWxlbSB9IGZyb20gXCIuLi9saWIvVUlUb29sc1wiO1xyXG5pbXBvcnQgeyB1cmxDaGVjaywgdXJsQ2hlY2tPckdvIH0gZnJvbSBcIi4uL2xpYi91cmxcIjtcclxuXHJcbmV4cG9ydCB0eXBlIENoYW5nZU1vdGl2ZUNvbnRyYWN0ID0geyBcImMgSURcIjogbnVtYmVyIH07XHJcblxyXG5leHBvcnQgdHlwZSBDaGFuZ2VNb3RpdmVTaGFyZWREYXRhID0ge1xyXG4gIGNvbnRyYWN0SWRzOiBudW1iZXJbXTtcclxuICBjb250cmFjdHNDb3VudDogbnVtYmVyO1xyXG4gIG1vdGl2ZVZhbHVlOiBudW1iZXI7XHJcbiAgZmFpbGVkU2F2ZXNJZHM6IG51bWJlcltdO1xyXG59O1xyXG5cclxuZXhwb3J0IHR5cGUgQ2hhbmdlTW90aXZlVGFzayA9IE9taXQ8VGFzaywgXCJzaGFyZWREYXRhXCI+ICYge1xyXG4gIHNoYXJlZERhdGE6IENoYW5nZU1vdGl2ZVNoYXJlZERhdGE7XHJcbn07XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2hhbmdlTW90aXZlVGFza0ZuKHRhc2s6IENoYW5nZU1vdGl2ZVRhc2spIHtcclxuICBlcnJvcklmSWNhcmVUb29scygpO1xyXG4gIGNvbnN0IGN1cnJlbnRJZCA9IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkc1swXTtcclxuICBzd2l0Y2ggKHRhc2suc3RlcE5hbWUpIHtcclxuICAgIGNhc2UgXCJzdGFydFwiOiB7XHJcbiAgICAgIGlmICh0YXNrLnNoYXJlZERhdGEuY29udHJhY3RJZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgbmV4dFRhc2tTdGVwKFwic3VjY2Vzc1wiLCB0YXNrKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgbmV4dFRhc2tTdGVwKFwiZ29Ub0NvbnRyYWN0XCIsIHtcclxuICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgIGxhc3RNZXNzYWdlOiBgaWQgY29udHJhdDogJHtjdXJyZW50SWR9XFxuJHtcclxuICAgICAgICAgIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNDb3VudCAtIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkcy5sZW5ndGggKyAxXHJcbiAgICAgICAgfS8ke3Rhc2suc2hhcmVkRGF0YS5jb250cmFjdHNDb3VudH1gLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiZ29Ub0NvbnRyYWN0XCI6IHtcclxuICAgICAgLy9nbyB0byBjb250cmFjdCB1cmxcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF1cmxDaGVja09yR28oYC9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kbz9tZXRob2Q9bWFpbiZha3R1ZWxsZT10cnVlJnRoZVZlcklkPSR7Y3VycmVudElkfWApXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY29uZmlybUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjdHJvdHpkZW1cIik7XHJcbiAgICAgIGlmIChjb25maXJtQm94KSB7XHJcbiAgICAgICAgLy9jb25maXJtIHBhZ2VcclxuICAgICAgICBhd2FpdCBuZXh0VGFza1N0ZXAoXCJ1cGRhdGVNb3RpdmVcIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgICAgY29uZmlybUJveC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICBjb25maXJtQm94LmZvcm0/LnN1Ym1pdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJ1cGRhdGVNb3RpdmVcIiwgdGFzayk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcInVwZGF0ZU1vdGl2ZVwiOiB7XHJcbiAgICAgIC8vY2hlY2sgcGFnZSwgSSBkb24ndCBjaGVjayB0aGUgY29udHJhY3QgaWQgYmVjYXVzZSBJIGRvbid0IGhhdmUgYWxsIGRheS4gbWF5IGNhdXNlIGlzc3VlcyBpbiB0aGUgZnV0dXJlIMKvXFxfKOODhClfL8KvXHJcbiAgICAgIGlmICghdXJsQ2hlY2soYC9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kb2ApKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvL2NoYW5nZSBtb3RpdmVcclxuICAgICAgY29uc3QgbW90aXZlU2VsZWN0ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yPEhUTUxTZWxlY3RFbGVtZW50PihcInNlbGVjdCNtb3RpdklkXCIpO1xyXG4gICAgICBtb3RpdmVTZWxlY3QudmFsdWUgPSB0YXNrLnNoYXJlZERhdGEubW90aXZlVmFsdWUudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgIC8vQVNZTkMgR0FSQkFHRTogd2FpdCBmb3Igc3VjY2VzcyBvbiB0aGUgc2FtZSBwYWdlXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJjb25maXJtU2F2ZVwiLCB0YXNrLCB0cnVlKTsgLy9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVxyXG4gICAgICAvL2NsaWNrIG9uIHNhdmVcclxuICAgICAgY29uc3Qgc3VibWl0QnV0dG9uID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcclxuICAgICAgICBcImZvcm1bbmFtZT1WZXJ0cmFnRWRpdEZvcm1dIGJ1dHRvblt0eXBlPXN1Ym1pdF0uYnRuLXN1Y2Nlc3NcIlxyXG4gICAgICApO1xyXG4gICAgICBzdWJtaXRCdXR0b24uY2xpY2soKTtcclxuXHJcbiAgICAgIC8vd2FpdCBmb3Igc3VjY2VzcyBtZXNzYWdlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgd2FpdEZvclNlbGVjdG9yKFxyXG4gICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzYXZlZEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiI3NhdmVkXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gc2F2ZWRCb3g/LnN0eWxlLnZpc2liaWxpdHkgPT09IFwidmlzaWJsZVwiID8gc2F2ZWRCb3ggOiBudWxsO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHVuZGVmaW5lZCxcclxuICAgICAgICAgIDEwMFxyXG4gICAgICAgICk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvL2p1c3Qgc2F2ZSB0aGUgZXJyb3JcclxuICAgICAgICB0YXNrID0gYXdhaXQgc2V0Q3VycmVudFRhc2soPENoYW5nZU1vdGl2ZVRhc2s+e1xyXG4gICAgICAgICAgLi4udGFzayxcclxuICAgICAgICAgIHNoYXJlZERhdGE6IHtcclxuICAgICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgICBmYWlsZWRTYXZlc0lkczogWy4uLih0YXNrLnNoYXJlZERhdGEuZmFpbGVkU2F2ZXNJZHMgPz8gW10pLCBjdXJyZW50SWRdLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgIC8vICAgYEwnZW5yZWdpc3RyZW1lbnQgYXV0b21hdGlxdWUgZGUgJHtjdXJyZW50SWR9IG4nYSBwYXMgZm9uY3Rpb25uw6ksIGNvbnRpbnVleiBsYSB0w6JjaGUgcG91ciByw6llc3NheWVyIG91IGZhaXRlcyBsZSBtYW51ZWxsZW1lbnQgZXQgcGFzc2V6IGF1IGNvbnRyYXQgc3VpdmFudGBcclxuICAgICAgICAvLyApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBhd2FpdCBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgdGFzayk7XHJcbiAgICAgIC8vICAgdGhyb3cgbmV3IFdhcm5pbmcoXCJ3YWl0XCIpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJjb25maXJtU2F2ZVwiOiB7XHJcbiAgICAgIC8vV0FSTklORzogYXN5bmNocm9ub3VzIHN0ZXAsIGRvbid0IHVwZGF0ZSB0aGUgdGFzayBoZXJlIVxyXG4gICAgICBpZiAoIXVybENoZWNrKFwiL2ljYXJlL0JlL1BsYXR6aWVydW5nVmVydHJhZ1ByZXBhcmUuZG9cIikpIHJldHVybjtcclxuXHJcbiAgICAgIGNvbnN0IG9rQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcclxuICAgICAgICBcImZvcm1bbmFtZT1WZXJ0cmFnRWRpdEZvcm1dIGlucHV0LmJ0bi5idG4tcHJpbWFyeVwiXHJcbiAgICAgICk7XHJcbiAgICAgIG9rQnV0dG9uPy5jbGljaygpO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJlbmRPZkxvb3BcIjoge1xyXG4gICAgICBjb25zdCBuZXdUYXNrOiBDaGFuZ2VNb3RpdmVUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgY29udHJhY3RJZHM6IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkcy5zbGljZSgxKSxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJzdGFydFwiLCBuZXdUYXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwic3VjY2Vzc1wiOiB7XHJcbiAgICAgIGNvbnNvbGUuaW5mbyhcImZhaWxlZCBzYXZlczpcIiwgdGFzay5zaGFyZWREYXRhLmZhaWxlZFNhdmVzSWRzKTtcclxuICAgICAgYWxlcnQoXCJUw6JjaGUgdGVybWluw6llIVwiKTtcclxuICAgICAgYXdhaXQgcmVtb3ZlQ3VycmVudFRhc2soKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBjaGFuZ2VNb3RpdmVUYXNrUGFyYW1zOiBUYXNrUGFyYW1zID0ge1xyXG4gIHRhc2tGbjogY2hhbmdlTW90aXZlVGFza0ZuLFxyXG4gIHdpbmRvd1NlY3Rpb25Db21wb25lbnQ6IFdpbmRvd0NoYW5nZU1vdGl2ZVNlY3Rpb24sXHJcbiAgYWN0aW9uc0VsZW1zOiBbXHJcbiAgICBjcmVhdGVFbGVtKFxyXG4gICAgICBcImJ1dHRvblwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmMgb25jbGljayhlKSB7XHJcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgaWYgKCFjb25maXJtKFwiw4p0ZXMgdm91cyBzw7tyIGRlIHZvdWxvaXIgcGFzc2VyIGF1IGNvbnRyYXQgc3VpdmFudD9cIikpIHJldHVybjtcclxuICAgICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBnZXRDdXJyZW50VGFzaygpO1xyXG4gICAgICAgICAgaWYgKCF0YXNrKSByZXR1cm47XHJcbiAgICAgICAgICBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgeyAuLi50YXNrLCBpc1BhdXNlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCJQYXNzZXIgYXUgY29udHJhdCBzdWl2YW50XCJcclxuICAgICksXHJcbiAgXSxcclxufTtcclxuIiwiaW1wb3J0IGxvY2FsZm9yYWdlIGZyb20gXCJsb2NhbGZvcmFnZVwiO1xyXG5pbXBvcnQgeyBXaW5kb3dGaWxsQ29udHJhY3RzQ2xhc3Nlc1NlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9XaW5kb3dGaWxsQ29udHJhY3RzQ2xhc3Nlc1NlY3Rpb25cIjtcclxuaW1wb3J0IHsgd2FpdEZvclNlbGVjdG9yLCB3YWl0Rm9yVmFsdWUgfSBmcm9tIFwiLi4vbGliL2FzeW5jXCI7XHJcbmltcG9ydCB7IFdhcm5pbmcgfSBmcm9tIFwiLi4vbGliL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBmaWxsQ29udHJhY3REYXRhIH0gZnJvbSBcIi4uL2xpYi9pY2FyZUludGVyYWN0aW9uc1wiO1xyXG5pbXBvcnQgeyBJY2FyZVdpbmRvdyB9IGZyb20gXCIuLi9saWIvaWNhcmVUeXBlc1wiO1xyXG5pbXBvcnQge1xyXG4gIGdldEN1cnJlbnRUYXNrLFxyXG4gIGdldEhlYXZ5RGF0YSxcclxuICBuZXh0VGFza1N0ZXAsXHJcbiAgcmVtb3ZlQ3VycmVudFRhc2ssXHJcbiAgc2V0Q3VycmVudFRhc2ssXHJcbiAgVGFzayxcclxuICBUYXNrUGFyYW1zLFxyXG59IGZyb20gXCIuLi9saWIvdGFza1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVFbGVtLCBwcm9tcHRJbmRleCB9IGZyb20gXCIuLi9saWIvVUlUb29sc1wiO1xyXG5pbXBvcnQgeyB1cmxDaGVjaywgdXJsQ2hlY2tPckdvIH0gZnJvbSBcIi4uL2xpYi91cmxcIjtcclxuXHJcbmV4cG9ydCB0eXBlIEZpbGxDb250cmFjdHNDbGFzc2VDb250cmFjdCA9IHtcclxuICBcImUgaWRcIjogbnVtYmVyO1xyXG4gIFwiaW5zdGl0dXRpb24gaWRcIjogbnVtYmVyO1xyXG4gIGluc3RpdHV0aW9uOiBzdHJpbmc7XHJcbiAgXCJlIG5vbVwiOiBzdHJpbmc7XHJcbiAgXCJlIHByZW5vbVwiOiBzdHJpbmc7XHJcbiAgXCJlIG5haXNzYW5jZVwiPzogc3RyaW5nO1xyXG4gIHNjaG9vbENsYXNzPzogc3RyaW5nO1xyXG4gIHNjaG9vbE5hbWU/OiBzdHJpbmc7XHJcbn07XHJcbmV4cG9ydCB0eXBlIEZpbGxDb250cmFjdHNDbGFzc2VQZXJzb24gPSB7XHJcbiAgTm9tOiBzdHJpbmc7XHJcbiAgUHJlbm9tOiBzdHJpbmc7XHJcbiAgRGF0ZU5haXNzYW5jZTogc3RyaW5nO1xyXG4gIENsYXNzZUNvdXJhbnRlOiBzdHJpbmc7XHJcbiAgQmF0aW1lbnROb21PZmZpY2llbDogc3RyaW5nO1xyXG59O1xyXG5leHBvcnQgdHlwZSBFeGlzdGluZ0RhdGFTdHJhdGVneSA9IFwiYXNrXCIgfCBcInNraXBcIiB8IFwiZm9yY2VcIjtcclxudHlwZSBGaWxsQ29udHJhY3RDbGFzc2VzSGVhdnlEYXRhID0gRmlsbENvbnRyYWN0c0NsYXNzZVBlcnNvbltdO1xyXG5leHBvcnQgdHlwZSBGaWxsQ29udHJhY3RDbGFzc2VzU2hhcmVkRGF0YSA9IHtcclxuICBjb250cmFjdHM6IHtcclxuICAgIFtpZDogc3RyaW5nXTogRmlsbENvbnRyYWN0c0NsYXNzZUNvbnRyYWN0O1xyXG4gIH07XHJcbiAgY29udHJhY3RzSWRzOiBzdHJpbmdbXTtcclxuICBzaG91bGRTZWxlY3RGaXJzdERhdGE6IGJvb2xlYW47XHJcbiAgc2hvdWxkU2tpcENvbnRyYWN0Tm90Rm91bmQ6IGJvb2xlYW47XHJcbiAgc2hvdWxkU2VsZWN0TGFzdENvbnRyYWN0Tm90Rm91bmQ6IGJvb2xlYW47XHJcbiAgZXhpc3RpbmdEYXRhU3RyYXRlZ3k6IEV4aXN0aW5nRGF0YVN0cmF0ZWd5O1xyXG4gIGNvbnRyYWN0c05vdEZvdW5kOiB7XHJcbiAgICBbaWQ6IHN0cmluZ106IHsgZm5hbWU6IHN0cmluZzsgbG5hbWU6IHN0cmluZzsgY291bnQ6IG51bWJlciB9O1xyXG4gIH07XHJcbiAgY29udHJhY3RzRHVwbGljYXRlczoge1xyXG4gICAgW2lkOiBzdHJpbmddOiB7IGZuYW1lOiBzdHJpbmc7IGxuYW1lOiBzdHJpbmc7IGNvdW50OiBudW1iZXIgfTtcclxuICB9O1xyXG4gIGNvbnRyYWN0QnlDb250cmFjdE1vZGU6IGJvb2xlYW47XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBGaWxsQ29udHJhY3RDbGFzc2VUYXNrID0gT21pdDxUYXNrLCBcInNoYXJlZERhdGFcIj4gJiB7XHJcbiAgc2hhcmVkRGF0YTogRmlsbENvbnRyYWN0Q2xhc3Nlc1NoYXJlZERhdGE7XHJcbn07XHJcblxyXG50eXBlIEZpbGxDb250cmFjdENsYXNzZXNXaW5kb3cgPSBJY2FyZVdpbmRvdyAmIHtcclxuICBjYmM/OiAobW9kZT86IGJvb2xlYW4pID0+IFByb21pc2U8dm9pZD47XHJcbn07XHJcblxyXG5hc3luYyBmdW5jdGlvbiBmaWxsQ29udHJhY3RDbGFzc2VzVGFza0ZuKHRhc2s6IEZpbGxDb250cmFjdENsYXNzZVRhc2spIHtcclxuICBjb25zdCBsb2NhbGUgPSAod2luZG93IGFzIEljYXJlV2luZG93KS5sb2NhbGU7XHJcbiAgaWYgKGxvY2FsZSAmJiBsb2NhbGUuc3Vic3RyaW5nKDAsIDIpICE9PSBcImZyXCIpIHtcclxuICAgIGFsZXJ0KFxyXG4gICAgICBcIkNldHRlIHTDomNoZSBzdXBwb3J0ZSB1bmlxdWVtZW50IGxlIHNpdGUgZW4gZnJhbsOnYWlzLlxcblwiICtcclxuICAgICAgICBcIkNoYW5nZXogbGEgbGFuZ3VlIGV0IGNvbnRpbnVleiBsYSB0w6JjaGVcIlxyXG4gICAgKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkNldHRlIHTDomNoZSBzdXBwb3J0ZSB1bmlxdWVtZW50IGxlIHNpdGUgZW4gZnJhbsOnYWlzLlwiKTtcclxuICB9XHJcblxyXG4gIGlmICgod2luZG93IGFzIEljYXJlV2luZG93KS5IQVNfSUNBUkVfSEVMUEVSU19MT0FERUQpIHtcclxuICAgIGFsZXJ0KFxyXG4gICAgICBcIkNldHRlIHTDomNoZSBuZSBwZXV0IHBhcyBmb25jdGlvbm5lciBxdWFuZCBsZSBzY3JpcHQgJ2ljYXJlLWhlbHBlcnMnIGVzdCBjaGFyZ8OpLiBEw6lzYWN0aXZleiBsZSBkJ2Fib3JkLlwiXHJcbiAgICApO1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiQ2V0dGUgdMOiY2hlIG5lIHN1cHBvcnRlIHBhcyBsZSBzY3JpcHQgJ2ljYXJlLWhlbHBlcnMnXCIpO1xyXG4gIH1cclxuXHJcbiAgaWYgKCEod2luZG93IGFzIEZpbGxDb250cmFjdENsYXNzZXNXaW5kb3cpLmNiYylcclxuICAgICh3aW5kb3cgYXMgRmlsbENvbnRyYWN0Q2xhc3Nlc1dpbmRvdykuY2JjID0gYXN5bmMgKG1vZGUgPSB0cnVlKSA9PiB7XHJcbiAgICAgIGNvbnN0IGxhdGVUYXNrID0gYXdhaXQgZ2V0Q3VycmVudFRhc2soKTtcclxuICAgICAgaWYgKCFsYXRlVGFzaykgcmV0dXJuO1xyXG4gICAgICBjb25zdCBuZXdUYXNrOiBGaWxsQ29udHJhY3RDbGFzc2VUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgY29udHJhY3RCeUNvbnRyYWN0TW9kZTogbW9kZSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxhc3RNZXNzYWdlOiBcIk1vZGUgQ0JDIGFjdGl2w6khXCIsXHJcbiAgICAgIH07XHJcbiAgICAgIHRhc2sgPSBhd2FpdCBzZXRDdXJyZW50VGFzayhuZXdUYXNrKTtcclxuICAgIH07XHJcblxyXG4gIGNvbnN0IHBlcnNvbklkID0gdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c0lkc1swXTtcclxuICBjb25zdCBwZXJzb24gPSB0YXNrLnNoYXJlZERhdGEuY29udHJhY3RzW3BlcnNvbklkXTtcclxuICBzd2l0Y2ggKHRhc2suc3RlcE5hbWUpIHtcclxuICAgIGNhc2UgXCJzdGFydFwiOiB7XHJcbiAgICAgIGlmICh0YXNrLnNoYXJlZERhdGEuY29udHJhY3RzSWRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIG5leHRUYXNrU3RlcChcInN1Y2Nlc3NcIiwgdGFzayk7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjb250cmFjdHNDb3VudCA9IE9iamVjdC5rZXlzKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMpLmxlbmd0aDtcclxuICAgICAgY29uc3QgY3VycmVudENvbnRyYWN0SW5kZXggPSBjb250cmFjdHNDb3VudCAtIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNJZHMubGVuZ3RoICsgMTtcclxuICAgICAgY29uc3QgdGFza1dpdGhNZXNzYWdlOiBGaWxsQ29udHJhY3RDbGFzc2VUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgbGFzdE1lc3NhZ2U6IGBJbmZvOiBQZXJzb25uZSBjb3VyYW50ZTogJHtwZXJzb25JZH0gKCR7Y3VycmVudENvbnRyYWN0SW5kZXh9LyR7Y29udHJhY3RzQ291bnR9KWAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgICAvL3NraXAgdG8gc3RlcCBpZiBwZXJzb24gYWxyZWFkeSBrbm93blxyXG4gICAgICBpZiAocGVyc29uW1wiZSBuYWlzc2FuY2VcIl0pIG5leHRUYXNrU3RlcChcInVzZURhdGFGcm9tQWxsUGVvcGxlXCIsIHRhc2tXaXRoTWVzc2FnZSk7XHJcbiAgICAgIGVsc2UgbmV4dFRhc2tTdGVwKFwic2VhcmNoUGVyc29uXCIsIHRhc2tXaXRoTWVzc2FnZSk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcInNlYXJjaFBlcnNvblwiOiB7XHJcbiAgICAgIGlmICghdXJsQ2hlY2tPckdvKFwiL2ljYXJlL0JlL1BlcnNvbmVuTGlzdC5kbz9zdWNoZW49Zmlyc3RTZWFyY2hcIikpIHJldHVybjtcclxuXHJcbiAgICAgIGNvbnN0IHJlc2V0RmlsdGVyQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MRWxlbWVudD4oXCJidXR0b24uYnRuLWRhbmdlci5mbG9hdC1sZWZ0XCIpO1xyXG4gICAgICByZXNldEZpbHRlckJ0bj8uY2xpY2soKTtcclxuXHJcbiAgICAgIGNvbnN0IHBlcnNvbklkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiI3BlcnNvbmVudHlwW25hbWU9cGVySWRdXCIpO1xyXG4gICAgICBpZiAoIXBlcnNvbklkSW5wdXQpIHRocm93IG5ldyBFcnJvcihcInBlcnNvbiBpbnB1dCBub3QgZm91bmRcIik7XHJcbiAgICAgIHBlcnNvbklkSW5wdXQudmFsdWUgPSBwZXJzb25JZDtcclxuXHJcbiAgICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KFxyXG4gICAgICAgIFwiZm9ybSNmaWx0ZXJGb3JtIC5mbG9hdC1yaWdodCBidXR0b25bdHlwZT1zdWJtaXRdXCJcclxuICAgICAgKTtcclxuXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJmaW5kUGVyc29uXCIsIHRhc2ssIHRydWUpO1xyXG5cclxuICAgICAgc3VibWl0QnV0dG9uPy5jbGljaygpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJmaW5kUGVyc29uXCI6IHtcclxuICAgICAgaWYgKCF1cmxDaGVjayhcIi9pY2FyZS9CZS9QZXJzb25lbkxpc3QuZG9cIiwgXCI/c3VjaGVuPWZpcnN0U2VhcmNoXCIpKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCBwZXJzb25MaW5lcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTFRhYmxlUm93RWxlbWVudD4oXHJcbiAgICAgICAgXCIuZGF0YVRhYmxlLmpxUmVzdWx0TGlzdCA+IHRib2R5ID4gdHJcIlxyXG4gICAgICApO1xyXG4gICAgICBpZiAocGVyc29uTGluZXMubGVuZ3RoICE9PSAxKVxyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKFxyXG4gICAgICAgICAgYFBlcnNvbm5lIHByw6ljaXNlIGludHJvdXZhYmxlLiBpZDoke3BlcnNvbklkfS4gJHtwZXJzb25MaW5lcy5sZW5ndGh9IHLDqXN1bHRhdChzKWBcclxuICAgICAgICApO1xyXG5cclxuICAgICAgY29uc3QgcGVyc29uSW5mb3NURHMgPSBwZXJzb25MaW5lc1swXS5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpO1xyXG5cclxuICAgICAgY29uc3QgZm91bmRJZCA9IHBlcnNvbkluZm9zVERzWzJdLnRleHRDb250ZW50Py50cmltKCk7XHJcbiAgICAgIGNvbnN0IGZvdW5kQmlydGhkYXkgPSBwZXJzb25JbmZvc1REc1s5XS50ZXh0Q29udGVudD8udHJpbSgpO1xyXG5cclxuICAgICAgaWYgKGZvdW5kSWQgIT09IHBlcnNvbklkKSB7XHJcbiAgICAgICAgY29uc29sZS5pbmZvKHsgZm91bmRJZCB9KTtcclxuICAgICAgICB0aHJvdyBuZXcgV2FybmluZyhgUGVyc29ubmUgYXZlYyBpZCAke3BlcnNvbklkfSBpbnRyb3V2YWJsZWApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBuZXdUYXNrOiBGaWxsQ29udHJhY3RDbGFzc2VUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgY29udHJhY3RzOiB7XHJcbiAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMsXHJcbiAgICAgICAgICAgIFtwZXJzb25JZF06IHtcclxuICAgICAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEuY29udHJhY3RzW3BlcnNvbklkXSxcclxuICAgICAgICAgICAgICBcImUgbmFpc3NhbmNlXCI6IGZvdW5kQmlydGhkYXksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcblxyXG4gICAgICBhd2FpdCBuZXh0VGFza1N0ZXAoXCJ1c2VEYXRhRnJvbUFsbFBlb3BsZVwiLCBuZXdUYXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwidXNlRGF0YUZyb21BbGxQZW9wbGVcIjoge1xyXG4gICAgICBjb25zdCBhbGxQZW9wbGUgPSAoYXdhaXQgZ2V0SGVhdnlEYXRhKCkpIGFzIEZpbGxDb250cmFjdENsYXNzZXNIZWF2eURhdGE7XHJcbiAgICAgIC8vZmluZCBwZXJzb24gaW4gcGVvcGxlIGxpc3RcclxuICAgICAgbGV0IGZvdW5kUGVvcGxlID0gYWxsUGVvcGxlLmZpbHRlcihcclxuICAgICAgICAocCkgPT5cclxuICAgICAgICAgIHBlcnNvbltcImUgbm9tXCJdLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMocC5Ob20udHJpbSgpLnRvTG93ZXJDYXNlKCkpICYmXHJcbiAgICAgICAgICBwZXJzb25bXCJlIG5haXNzYW5jZVwiXSA9PT0gcC5EYXRlTmFpc3NhbmNlXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBpZiAoZm91bmRQZW9wbGUubGVuZ3RoID09PSAwKVxyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKGAke3BlcnNvbltcImUgbm9tXCJdfSAke3BlcnNvbltcImUgcHJlbm9tXCJdfSBpbnRyb3V2YWJsZSBkYW5zIGxlIGZpY2hpZXJgKTtcclxuXHJcbiAgICAgIGxldCBwZXJzb25JbmRleCA9IDA7XHJcbiAgICAgIGlmIChmb3VuZFBlb3BsZS5sZW5ndGggPiAxKSB7XHJcbiAgICAgICAgLy9zZWFyY2ggYnkgZmlyc3QgbmFtZVxyXG4gICAgICAgIGNvbnN0IGZvdW5kQnlGaXJzdE5hbWUgPSBmb3VuZFBlb3BsZS5maWx0ZXIoKHApID0+XHJcbiAgICAgICAgICBwZXJzb25bXCJlIHByZW5vbVwiXS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHAuUHJlbm9tLnRyaW0oKS50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKGZvdW5kQnlGaXJzdE5hbWUubGVuZ3RoID4gMCkgZm91bmRQZW9wbGUgPSBmb3VuZEJ5Rmlyc3ROYW1lO1xyXG5cclxuICAgICAgICAvL3Byb21wdCBpZiBzdGlsbCBub3QgZm91bmRcclxuICAgICAgICBpZiAoZm91bmRQZW9wbGUubGVuZ3RoID4gMSkge1xyXG4gICAgICAgICAgcGVyc29uSW5kZXggPVxyXG4gICAgICAgICAgICBwcm9tcHRJbmRleChcclxuICAgICAgICAgICAgICBcIlBlcnNvbm5lIGV4YWN0ZSBpbnRyb3V2YWJsZS5cXG5cIiArXHJcbiAgICAgICAgICAgICAgICBgUmVjaGVyY2hlOiAke3BlcnNvbltcImUgcHJlbm9tXCJdfSAke3BlcnNvbltcImUgbm9tXCJdfSBbJHtwZXJzb25JZH1dYCArXHJcbiAgICAgICAgICAgICAgICBcIlZldWlsbGV6IHPDqWxlY3Rpb25uZXIgbGEgYm9ubmUgcGVyc29ubmU6XCIsXHJcbiAgICAgICAgICAgICAgZm91bmRQZW9wbGUubWFwKChwKSA9PiBgJHtwLlByZW5vbX0gJHtwLk5vbX0gJHtwLkRhdGVOYWlzc2FuY2V9YClcclxuICAgICAgICAgICAgKSA/PyAwO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZm91bmRQZXJzb24gPSBmb3VuZFBlb3BsZVtwZXJzb25JbmRleF07XHJcblxyXG4gICAgICBjb25zdCBuZXdUYXNrOiBGaWxsQ29udHJhY3RDbGFzc2VUYXNrID0ge1xyXG4gICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgY29udHJhY3RzOiB7XHJcbiAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMsXHJcbiAgICAgICAgICAgIFtwZXJzb25JZF06IHtcclxuICAgICAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEuY29udHJhY3RzW3BlcnNvbklkXSxcclxuICAgICAgICAgICAgICBzY2hvb2xDbGFzczogZm91bmRQZXJzb24uQ2xhc3NlQ291cmFudGUsXHJcbiAgICAgICAgICAgICAgc2Nob29sTmFtZTogZm91bmRQZXJzb24uQmF0aW1lbnROb21PZmZpY2llbCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgfTtcclxuICAgICAgdGFzayA9IGF3YWl0IHNldEN1cnJlbnRUYXNrKG5ld1Rhc2spO1xyXG5cclxuICAgICAgbmV4dFRhc2tTdGVwKFwic2VhcmNoQ29udHJhY3RcIiwgdGFzayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwic2VhcmNoQ29udHJhY3RcIjoge1xyXG4gICAgICBpZiAoIXVybENoZWNrT3JHbyhcIi9pY2FyZS9CZS9WZXJ0cmFnTGlzdC5kbz9yZXNldD10cnVlXCIpKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCBjb250cmFjdElkSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiaW5wdXRbbmFtZT12ZXJOcl1cIik7XHJcbiAgICAgIGlmICghY29udHJhY3RJZElucHV0KSB0aHJvdyBuZXcgRXJyb3IoXCJjb250cmFjdCBpbnB1dCBub3QgZm91bmRcIik7XHJcbiAgICAgIGNvbnRyYWN0SWRJbnB1dC52YWx1ZSA9IHBlcnNvbklkO1xyXG5cclxuICAgICAgY29uc3QgaW5zdGl0dXRpb25JZFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTFNlbGVjdEVsZW1lbnQ+KFxyXG4gICAgICAgIFwic2VsZWN0W25hbWU9bWFuZGFudGdydXBwZV0uc2VsZWN0Mi1vZmZzY3JlZW5cIlxyXG4gICAgICApO1xyXG4gICAgICBpZiAoIWluc3RpdHV0aW9uSWRTZWxlY3QpIHRocm93IG5ldyBFcnJvcihcImluc3RpdHV0aW9uIGlucHV0IG5vdCBmb3VuZFwiKTtcclxuXHJcbiAgICAgIGNvbnN0IGluc3RpdHV0aW9uSWQgPSBwZXJzb25bXCJpbnN0aXR1dGlvbiBpZFwiXS50b1N0cmluZygpO1xyXG5cclxuICAgICAgaW5zdGl0dXRpb25JZFNlbGVjdC52YWx1ZSA9IGluc3RpdHV0aW9uSWQ7XHJcbiAgICAgIGlmIChpbnN0aXR1dGlvbklkU2VsZWN0LnZhbHVlICE9PSBpbnN0aXR1dGlvbklkKSB7XHJcbiAgICAgICAgLy9zdG9yZSBjb250cmFjdCBub3QgZm91bmRcclxuICAgICAgICB0YXNrID0gYXdhaXQgc2V0Q3VycmVudFRhc2soe1xyXG4gICAgICAgICAgLi4udGFzayxcclxuICAgICAgICAgIHNoYXJlZERhdGE6IHtcclxuICAgICAgICAgICAgLi4udGFzay5zaGFyZWREYXRhLFxyXG4gICAgICAgICAgICBjb250cmFjdHNOb3RGb3VuZDoge1xyXG4gICAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNOb3RGb3VuZCxcclxuICAgICAgICAgICAgICBbcGVyc29uSWRdOiB7XHJcbiAgICAgICAgICAgICAgICBmbmFtZTogcGVyc29uW1wiZSBwcmVub21cIl0sXHJcbiAgICAgICAgICAgICAgICBsbmFtZTogcGVyc29uW1wiZSBub21cIl0sXHJcbiAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmICh0YXNrLnNoYXJlZERhdGEuc2hvdWxkU2tpcENvbnRyYWN0Tm90Rm91bmQpIHtcclxuICAgICAgICAgIGNvbnNvbGUuaW5mbyhcInNraXBwaW5nIGNvbnRyYWN0IGJlY2F1c2UgdGhlIGluc3RpdHV0aW9uIHdhcyBub3QgZm91bmRcIik7XHJcbiAgICAgICAgICBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgdGFzayk7XHJcbiAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgXCJMYSByZWNoZXJjaGUgbmUgcGV1dCBwYXMgw6p0cmUgZWZmZWN0dcOpZSBjYXIgbCdpbnN0aXR1dGlvbiBuJ2VzdCBwYXMgZGlzcG9uaWJsZS5cXG5cIiArXHJcbiAgICAgICAgICAgIFwiVHJvdXZleiBldCBuYXZpZ3VleiBtYW51ZWxsZW1lbnQgc3VyIGxlIGNvbnRyYXQgcHVpcyBjb250aW51ZXogbGEgdMOiY2hlLlxcblwiICtcclxuICAgICAgICAgICAgYEluc3RpdHV0aW9uOiBbJHtwZXJzb25bXCJpbnN0aXR1dGlvbiBpZFwiXX1dICR7cGVyc29uLmluc3RpdHV0aW9ufSBcXG5gICtcclxuICAgICAgICAgICAgYFBvdXI6ICR7cGVyc29uW1wiZSBwcmVub21cIl19ICR7cGVyc29uW1wiZSBub21cIl19IFske3BlcnNvbklkfV1gXHJcbiAgICAgICAgKTtcclxuICAgICAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKFwib3BlbkNvbnRyYWN0RWRpdFBhZ2VcIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IFdhcm5pbmcoXHJcbiAgICAgICAgICBgSW5zdGl0dXRpb24gaW50cm91dmFibGU6WyR7aW5zdGl0dXRpb25JZH1dIFwiJHtwZXJzb24uaW5zdGl0dXRpb259XCIsIHAtaWQ6JHtwZXJzb25JZH0uYFxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNvbnRyYWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEZvcm1FbGVtZW50PihcImZvcm1bbmFtZT1WZXJ0cmFnTGlzdGVGb3JtXVwiKTtcclxuICAgICAgaWYgKCFjb250cmFjdEZvcm0pIHRocm93IG5ldyBFcnJvcihcImNvbnRyYWN0IGZvcm0gbm90IGZvdW5kXCIpO1xyXG5cclxuICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChcImZpbmRDb250cmFjdFwiLCB0YXNrLCB0cnVlKTtcclxuXHJcbiAgICAgIGNvbnRyYWN0Rm9ybS5zdWJtaXQoKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiZmluZENvbnRyYWN0XCI6IHtcclxuICAgICAgaWYgKCF1cmxDaGVjayhcIi9pY2FyZS9CZS9WZXJ0cmFnTGlzdC5kb1wiLCBcIj9yZXNldD10cnVlXCIpKSByZXR1cm47XHJcblxyXG4gICAgICBjb25zdCBjb250cmFjdExpbmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MVGFibGVSb3dFbGVtZW50PihcclxuICAgICAgICBcIiN2ZXIuZGF0YVRhYmxlID4gdGJvZHkgPiB0clwiXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBmdW5jdGlvbiBnZXRDb250cmFjdExpbmVDZWxscyh0cjogSFRNTFRhYmxlUm93RWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHRkcyA9IHRyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGRcIik7XHJcbiAgICAgICAgY29uc3QgW2lkLCBuYW1lLCBpbnN0aXR1dGlvbiwgZ3JvdXAsIGRhdGVzLCBjbGllbnRHcm91cCwgaW50ZXJuYWxNZXNzYWdlLCBkZWxldGVEYXRlXSA9IHRkcztcclxuXHJcbiAgICAgICAgY29uc3QgW3N0YXJ0RGF0ZSwgZW5kRGF0ZV0gPSBkYXRlcy50ZXh0Q29udGVudD8udHJpbSgpPy5zcGxpdChcIiAtIFwiKSA/PyBbXTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIGlkLFxyXG4gICAgICAgICAgbmFtZSxcclxuICAgICAgICAgIGluc3RpdHV0aW9uLFxyXG4gICAgICAgICAgZ3JvdXAsXHJcbiAgICAgICAgICBkYXRlcyxcclxuICAgICAgICAgIHN0YXJ0RGF0ZSxcclxuICAgICAgICAgIGVuZERhdGUsXHJcbiAgICAgICAgICBjbGllbnRHcm91cCxcclxuICAgICAgICAgIGludGVybmFsTWVzc2FnZSxcclxuICAgICAgICAgIGRlbGV0ZURhdGUsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG5cclxuICAgICAgbGV0IGNvbnRyYWN0Q2VsbHM6IFJldHVyblR5cGU8dHlwZW9mIGdldENvbnRyYWN0TGluZUNlbGxzPiB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgIC8vUHJlY2lzZSBjb250cmFjdCBub3QgZm91bmRcclxuICAgICAgaWYgKGNvbnRyYWN0TGluZXMubGVuZ3RoICE9PSAxKSB7XHJcbiAgICAgICAgLy9TdG9yZSBjb250cmFjdCB0aGF0IHdhc24ndCBmb3VuZFxyXG4gICAgICAgIGNvbnN0IG5ld1Rhc2s6IEZpbGxDb250cmFjdENsYXNzZVRhc2sgPSB7XHJcbiAgICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEsXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKGNvbnRyYWN0TGluZXMubGVuZ3RoID09PSAwKVxyXG4gICAgICAgICAgbmV3VGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c05vdEZvdW5kID0ge1xyXG4gICAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEuY29udHJhY3RzTm90Rm91bmQsXHJcbiAgICAgICAgICAgIFtwZXJzb25JZF06IHtcclxuICAgICAgICAgICAgICBmbmFtZTogcGVyc29uW1wiZSBwcmVub21cIl0sXHJcbiAgICAgICAgICAgICAgbG5hbWU6IHBlcnNvbltcImUgbm9tXCJdLFxyXG4gICAgICAgICAgICAgIGNvdW50OiBjb250cmFjdExpbmVzLmxlbmd0aCxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH07XHJcbiAgICAgICAgZWxzZVxyXG4gICAgICAgICAgbmV3VGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c0R1cGxpY2F0ZXMgPSB7XHJcbiAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNEdXBsaWNhdGVzLFxyXG4gICAgICAgICAgICBbcGVyc29uSWRdOiB7XHJcbiAgICAgICAgICAgICAgZm5hbWU6IHBlcnNvbltcImUgcHJlbm9tXCJdLFxyXG4gICAgICAgICAgICAgIGxuYW1lOiBwZXJzb25bXCJlIG5vbVwiXSxcclxuICAgICAgICAgICAgICBjb3VudDogY29udHJhY3RMaW5lcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9O1xyXG5cclxuICAgICAgICB0YXNrID0gYXdhaXQgc2V0Q3VycmVudFRhc2sobmV3VGFzayk7XHJcblxyXG4gICAgICAgIC8vYXV0byBza2lwIGlmIG5vIGNvbnRyYWN0IGZvdW5kXHJcbiAgICAgICAgaWYgKHRhc2suc2hhcmVkRGF0YS5zaG91bGRTa2lwQ29udHJhY3ROb3RGb3VuZCAmJiBjb250cmFjdExpbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgY29uc29sZS5pbmZvKFwic2tpcHBpbmcgY29udHJhY3QgYmVjYXVzZSBpdCB3YXNuJ3QgZm91bmQuXCIpO1xyXG4gICAgICAgICAgbmV4dFRhc2tTdGVwKFwiZW5kT2ZMb29wXCIsIHRhc2spO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9zZWxlY3QgbGFzdCBpZiBtdWx0aXBsZSByZXN1bHRzXHJcbiAgICAgICAgaWYgKHRhc2suc2hhcmVkRGF0YS5zaG91bGRTZWxlY3RMYXN0Q29udHJhY3ROb3RGb3VuZCkge1xyXG4gICAgICAgICAgY29udHJhY3RDZWxscyA9IFsuLi5jb250cmFjdExpbmVzXS5tYXAoZ2V0Q29udHJhY3RMaW5lQ2VsbHMpLnJlZHVjZSgocHJldiwgY3VycikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyRGF0ZSA9IG5ldyBEYXRlKGN1cnIuc3RhcnREYXRlLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCkuam9pbihcIi1cIikpO1xyXG4gICAgICAgICAgICBjb25zdCBwcmV2RGF0ZSA9IG5ldyBEYXRlKHByZXYuc3RhcnREYXRlLnNwbGl0KFwiLlwiKS5yZXZlcnNlKCkuam9pbihcIi1cIikpO1xyXG4gICAgICAgICAgICByZXR1cm4gY3VyckRhdGUgPiBwcmV2RGF0ZSA/IGN1cnIgOiBwcmV2O1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vcHJvbXB0IHVzZXIgdG8gY2hvb3NlIGNvcnJlY3QgY29udHJhY3RcclxuICAgICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgICBcIkNvbnRyYXQgcHLDqWNpcyBpbnRyb3V2YWJsZS5cXG5cIiArXHJcbiAgICAgICAgICAgICAgXCJOYXZpZ3VleiBzdXIgbGUgY29udHJhdCBjb25jZXJuw6kgZXQvb3UgY29udGludWV6IGxhIHTDomNoZS5cXG5cIiArXHJcbiAgICAgICAgICAgICAgYEluc3RpdHV0aW9uOiBbJHtwZXJzb25bXCJpbnN0aXR1dGlvbiBpZFwiXX1dICR7cGVyc29uLmluc3RpdHV0aW9ufSBcXG5gICtcclxuICAgICAgICAgICAgICBgUG91cjogJHtwZXJzb25bXCJlIHByZW5vbVwiXX0gJHtwZXJzb25bXCJlIG5vbVwiXX0gWyR7cGVyc29uSWR9XWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKFwib3BlbkNvbnRyYWN0RWRpdFBhZ2VcIiwgdGFzaywgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgdGhyb3cgbmV3IFdhcm5pbmcoXHJcbiAgICAgICAgICAgIGBDb250cmF0IHByw6ljaXMgaW50cm91dmFibGUuIHAtaWQ6JHtwZXJzb25JZH0uICR7Y29udHJhY3RMaW5lcy5sZW5ndGh9IHLDqXN1bHRhdChzKWBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnRyYWN0Q2VsbHMgPSBnZXRDb250cmFjdExpbmVDZWxscyhjb250cmFjdExpbmVzWzBdKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgZm91bmRDb250cmFjdElkID0gY29udHJhY3RDZWxscy5pZC50ZXh0Q29udGVudD8udHJpbSgpO1xyXG4gICAgICBpZiAoIWZvdW5kQ29udHJhY3RJZD8uaW5jbHVkZXMocGVyc29uSWQpKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgIGBDb250cmF0IGRlIGxhIHBlcnNvbm5lICR7cGVyc29uSWR9IGludHJvdXZhYmxlLiBDb250cmF0IGZhdXggJHtmb3VuZENvbnRyYWN0SWR9IHRyb3V2w6kuYFxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICBjb25zdCBjb250cmFjdExpbmsgPSBjb250cmFjdENlbGxzLmlkLnF1ZXJ5U2VsZWN0b3IoXCJhXCIpO1xyXG4gICAgICBpZiAoIWNvbnRyYWN0TGluaykgdGhyb3cgbmV3IEVycm9yKFwiY29udHJhY3QgbGluayBub3QgZm91bmRcIik7XHJcblxyXG4gICAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKFwib3BlbkNvbnRyYWN0RWRpdFBhZ2VcIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgIGNvbnRyYWN0TGluay5jbGljaygpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcIm9wZW5Db250cmFjdEVkaXRQYWdlXCI6IHtcclxuICAgICAgaWYgKCF1cmxDaGVjayhcIi9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kbz9tZXRob2Q9bWFpbiZha3R1ZWxsZT10cnVlJnRoZVZlcklkPVwiKSkgcmV0dXJuO1xyXG5cclxuICAgICAgLy9jaGVjayBpZiBpZCBpcyBzdGlsbCB0aGUgc2FtZVxyXG4gICAgICBjb25zdCBuYW1lQW5kSWRIMiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZGF0YSBoMlwiKTtcclxuICAgICAgaWYgKCFuYW1lQW5kSWRIMj8udGV4dENvbnRlbnQ/LmluY2x1ZGVzKHBlcnNvbklkKSlcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJMJ2lkIGR1IGNvbnRyYXQgbmUgY29ycmVzcG9uZCBwYXMuXCIpO1xyXG5cclxuICAgICAgY29uc3QgaWZyYW1lOiBIVE1MSUZyYW1lRWxlbWVudCA9IGF3YWl0IHdhaXRGb3JTZWxlY3RvcihcImlmcmFtZVtuYW1lPWtsYXNzaWZpemllcnVuZ2ZyYW1lXVwiKTtcclxuICAgICAgaWYgKCFpZnJhbWUpIHRocm93IG5ldyBFcnJvcihcImlmcmFtZSBkZSBjb250cmF0IGludHJvdXZhYmxlXCIpO1xyXG4gICAgICBjb25zdCBpZnJhbWVTcmMgPSBhd2FpdCB3YWl0Rm9yVmFsdWUoKCkgPT4gaWZyYW1lLnNyYyB8fCB1bmRlZmluZWQpO1xyXG4gICAgICBpZiAoIWlmcmFtZVNyYykge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKFwiaWZyYW1lIHNyY1wiLCBpZnJhbWUuc3JjLCBpZnJhbWUpO1xyXG4gICAgICAgIGFsZXJ0KFxyXG4gICAgICAgICAgXCJJbXBvc3NpYmxlIGQnYWNjw6lkZXIgYXV4IG1vZGlmaWNhdGlvbnMuIEVzc2F5ZXogZGUgcmVjaGFyZ2VyIGxhIHBhZ2UgcHVpcyBjb250aW51ZXogbGEgdMOiY2hlXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcInVybCBkZSBsJ2lmcmFtZSBpbnRyb3V2YWJsZS4gaWQ6XCIgKyBwZXJzb25JZCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJmaWxsQ29udHJhY3RDb2xsZWdlXCIsIHRhc2ssIHRydWUpO1xyXG5cclxuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBpZnJhbWUuc3JjO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJmaWxsQ29udHJhY3RDb2xsZWdlXCI6IHtcclxuICAgICAgaWYgKCF1cmxDaGVjayhbXCIvaWNhcmUvS2xhc3NpZml6aWVydW5nU2F2ZS5kb1wiLCBcIi9pY2FyZS9QcmVwYXJlS2xhc3NpZml6aWVydW5nLmRvXCJdKSkgcmV0dXJuO1xyXG5cclxuICAgICAgYXdhaXQgZmlsbENvbnRyYWN0RGF0YSh0YXNrLCBcIkNvbGzDqGdlXCIsIHBlcnNvbi5zY2hvb2xOYW1lLCBcImZpbGxDb250cmFjdENsYXNzXCIpO1xyXG5cclxuICAgICAgLy8vIG5leHRUYXNrU3RlcChcImZpbGxDb250cmFjdENsYXNzXCIsIHRhc2ssIHRydWUpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJmaWxsQ29udHJhY3RDbGFzc1wiOiB7XHJcbiAgICAgIGlmICghdXJsQ2hlY2soW1wiL2ljYXJlL0tsYXNzaWZpemllcnVuZ1NhdmUuZG9cIiwgXCIvaWNhcmUvUHJlcGFyZUtsYXNzaWZpemllcnVuZy5kb1wiXSkpIHJldHVybjtcclxuXHJcbiAgICAgIGF3YWl0IGZpbGxDb250cmFjdERhdGEodGFzaywgXCJDbGFzc2UgZXQgZW5zZWlnbmFudFwiLCBwZXJzb24uc2Nob29sQ2xhc3MsIFwiZW5kT2ZMb29wXCIpO1xyXG5cclxuICAgICAgLy8vIG5leHRUYXNrU3RlcChcImVuZE9mTG9vcFwiLCB0YXNrLCB0cnVlKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiZW5kT2ZMb29wXCI6IHtcclxuICAgICAgY29uc3QgbmV3VGFzazogRmlsbENvbnRyYWN0Q2xhc3NlVGFzayA9IHtcclxuICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgIHNoYXJlZERhdGE6IHtcclxuICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YSxcclxuICAgICAgICAgIGNvbnRyYWN0c0lkczogdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c0lkcy5zbGljZSgxKSxcclxuICAgICAgICB9LFxyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy9zdGVwIGJ5IHN0ZXAgY2hlY2tcclxuICAgICAgaWYgKG5ld1Rhc2suc2hhcmVkRGF0YS5jb250cmFjdEJ5Q29udHJhY3RNb2RlKSB7XHJcbiAgICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChcInN0YXJ0XCIsIG5ld1Rhc2ssIHRydWUpO1xyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKFwiTW9kZSBwYXMgw6AgcGFzXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJzdGFydFwiLCBuZXdUYXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcclxuICAgICAgY29uc29sZS5pbmZvKFwiQ09OVFJBVFMgSU5UUk9VVkFCTEVTOlwiKTtcclxuICAgICAgY29uc29sZS50YWJsZSh0YXNrLnNoYXJlZERhdGEuY29udHJhY3RzTm90Rm91bmQpO1xyXG4gICAgICBjb25zb2xlLmluZm8oXCJDT05UUkFUUyBNVUxUSVBMRVM6XCIpO1xyXG4gICAgICBjb25zb2xlLnRhYmxlKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNEdXBsaWNhdGVzKTtcclxuXHJcbiAgICAgIC8vc3RvcmUgZW5kIHRpbWVcclxuICAgICAgY29uc3QgZW5kZWRBdCA9IERhdGUubm93KCk7XHJcbiAgICAgIHRhc2sgPSBhd2FpdCBzZXRDdXJyZW50VGFzayh7IC4uLnRhc2ssIGVuZGVkQXQgfSk7XHJcblxyXG4gICAgICAvL3N0b3JlIGZpbmlzaGVkIHRhc2tcclxuICAgICAgKGFzeW5jICgpID0+IHtcclxuICAgICAgICBjb25zdCBmaW5pc2hlZFRhc2tzID1cclxuICAgICAgICAgIChhd2FpdCBsb2NhbGZvcmFnZS5nZXRJdGVtPEZpbGxDb250cmFjdENsYXNzZVRhc2tbXT4oXCJMVEZpbmlzaGVkVGFza3NcIikpID8/IFtdO1xyXG4gICAgICAgIGNvbnN0IGNsZWFuVGFzazogRmlsbENvbnRyYWN0Q2xhc3NlVGFzayA9IHtcclxuICAgICAgICAgIC4uLnRhc2ssXHJcbiAgICAgICAgICBzaGFyZWREYXRhOiB7XHJcbiAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YSxcclxuICAgICAgICAgICAgY29udHJhY3RzOiB7fSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICBhd2FpdCBsb2NhbGZvcmFnZS5zZXRJdGVtKFwiTFRGaW5pc2hlZFRhc2tzXCIsIFsuLi5maW5pc2hlZFRhc2tzLCBjbGVhblRhc2tdKTtcclxuICAgICAgfSkoKTtcclxuXHJcbiAgICAgIGNvbnN0IGVsYXBzZWRUaW1lU3RyaW5nID0gbmV3IERhdGUoZW5kZWRBdCAtIHRhc2suc3RhcnRlZEF0KS50b0lTT1N0cmluZygpLnN1YnN0cmluZygxMSwgMTkpO1xyXG5cclxuICAgICAgY29uc3QgY29udHJhY3RzTm90Rm91bmRFbnRyaWVzID0gT2JqZWN0LmVudHJpZXModGFzay5zaGFyZWREYXRhLmNvbnRyYWN0c05vdEZvdW5kKTtcclxuICAgICAgY29uc3QgY29udHJhY3REdXBsaWNhdGVzRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNEdXBsaWNhdGVzKTtcclxuICAgICAgLy9kaXNwbGF5IGVuZCBvZiB0YXNrIGluZm9zXHJcbiAgICAgIGFsZXJ0KFxyXG4gICAgICAgIGBUw6JjaGUgdGVybWluw6llISAoZW4gJHtlbGFwc2VkVGltZVN0cmluZ30pIFxcbmAgK1xyXG4gICAgICAgICAgYFtGMTJdIExpc3RlcyBjb21wbMOqdGVzIGFmZmljaMOpZXMgZGFucyBsYSBjb25zb2xlXFxuYCArXHJcbiAgICAgICAgICBgJHtjb250cmFjdHNOb3RGb3VuZEVudHJpZXMubGVuZ3RofSBjb250cmF0cyBwYXMgdHJvdXbDqXMgc3VyICR7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMpLmxlbmd0aFxyXG4gICAgICAgICAgfS5cXG5gICtcclxuICAgICAgICAgIGNvbnRyYWN0c05vdEZvdW5kRW50cmllc1xyXG4gICAgICAgICAgICAubWFwKChbaWQsIHsgZm5hbWUsIGxuYW1lIH1dLCBpKSA9PiBgJHtpfS4gWyR7aWR9XSAke2ZuYW1lfSAke2xuYW1lfWApXHJcbiAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpICtcclxuICAgICAgICAgIGAke2NvbnRyYWN0RHVwbGljYXRlc0VudHJpZXMubGVuZ3RofSBjb250cmF0cyBtdWx0aXBsZXMgc3VyICR7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMpLmxlbmd0aFxyXG4gICAgICAgICAgfS5cXG5gICtcclxuICAgICAgICAgIGNvbnRyYWN0RHVwbGljYXRlc0VudHJpZXNcclxuICAgICAgICAgICAgLm1hcCgoW2lkLCB7IGZuYW1lLCBsbmFtZSB9XSwgaSkgPT4gYCR7aX0uIFske2lkfV0gJHtmbmFtZX0gJHtsbmFtZX1gKVxyXG4gICAgICAgICAgICAuam9pbihcIlxcblwiKVxyXG4gICAgICApO1xyXG5cclxuICAgICAgYXdhaXQgcmVtb3ZlQ3VycmVudFRhc2soKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgZGVmYXVsdDoge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCLDiXRhcGUgaW50cm91dmFibGVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZmlsbENvbnRyYWN0Q2xhc3Nlc1Rhc2tQYXJhbXM6IFRhc2tQYXJhbXMgPSB7XHJcbiAgdGFza0ZuOiBmaWxsQ29udHJhY3RDbGFzc2VzVGFza0ZuLFxyXG4gIHdpbmRvd1NlY3Rpb25Db21wb25lbnQ6IFdpbmRvd0ZpbGxDb250cmFjdHNDbGFzc2VzU2VjdGlvbixcclxuICBhY3Rpb25zRWxlbXM6IFtcclxuICAgIGNyZWF0ZUVsZW0oXHJcbiAgICAgIFwiYnV0dG9uXCIsXHJcbiAgICAgIHtcclxuICAgICAgICBhc3luYyBvbmNsaWNrKGUpIHtcclxuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICBpZiAoIWNvbmZpcm0oXCLDinRlcyB2b3VzIHPDu3IgZGUgdm91bG9pciBwYXNzZXIgYXUgY29udHJhdCBzdWl2YW50P1wiKSkgcmV0dXJuO1xyXG4gICAgICAgICAgY29uc3QgdGFzayA9IGF3YWl0IGdldEN1cnJlbnRUYXNrKCk7XHJcbiAgICAgICAgICBpZiAoIXRhc2spIHJldHVybjtcclxuICAgICAgICAgIG5leHRUYXNrU3RlcChcImVuZE9mTG9vcFwiLCB7IC4uLnRhc2ssIGlzUGF1c2VkOiBmYWxzZSB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIlBhc3NlciBhdSBjb250cmF0IHN1aXZhbnRcIlxyXG4gICAgKSxcclxuICBdLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBuZXh0VGFza1N0ZXAsIHJlbW92ZUN1cnJlbnRUYXNrLCBUYXNrLCBUYXNrUGFyYW1zIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IHVybENoZWNrT3JHbyB9IGZyb20gXCIuLi9saWIvdXJsXCI7XHJcblxyXG50eXBlIEdvVG9Db250cmFjdHNUYXNrID0gT21pdDxUYXNrLCBcInNoYXJlZERhdGFcIj4gJiB7XHJcbiAgc2hhcmVkRGF0YToge1xyXG4gICAgcGVyc29uSWQ6IG51bWJlcjtcclxuICB9O1xyXG59O1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gZ29Ub0NvbnRyYWN0c1Rhc2tGbih0YXNrOiBHb1RvQ29udHJhY3RzVGFzaykge1xyXG4gIHN3aXRjaCAodGFzay5zdGVwTmFtZSkge1xyXG4gICAgY2FzZSBcInN0YXJ0XCI6IHtcclxuICAgICAgaWYgKCF1cmxDaGVja09yR28oXCIvaWNhcmUvQmUvVmVydHJhZ0xpc3QuZG8/c3VjaGVuPWZpcnN0U2VhcmNoJnJlc2V0PXRydWVcIikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGNvbnRyYWN0Rm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEZvcm1FbGVtZW50PihcImZvcm1bbmFtZT1WZXJ0cmFnTGlzdGVGb3JtXVwiKTtcclxuICAgICAgaWYgKCFjb250cmFjdEZvcm0pIHJldHVybjtcclxuXHJcbiAgICAgIGNvbnN0IGNvbnRyYWN0SWRJbnB1dCA9IGNvbnRyYWN0Rm9ybS5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiaW5wdXRbbmFtZT12ZXJOcl1cIik7XHJcbiAgICAgIGlmICghY29udHJhY3RJZElucHV0KSByZXR1cm47XHJcblxyXG4gICAgICBjb250cmFjdElkSW5wdXQudmFsdWUgPSB0YXNrLnNoYXJlZERhdGEucGVyc29uSWQudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJzdWNjZXNzXCIsIHRhc2ssIHRydWUpO1xyXG5cclxuICAgICAgY29udHJhY3RGb3JtLnN1Ym1pdCgpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJzdWNjZXNzXCI6IHtcclxuICAgICAgY29uc29sZS5pbmZvKFwiZ28gdG8gY29udHJhY3RzIHRhc2sgc3VjY2Vzc1wiKTtcclxuXHJcbiAgICAgIGF3YWl0IHJlbW92ZUN1cnJlbnRUYXNrKCk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgZ29Ub0NvbnRyYWN0c1Rhc2tQYXJhbXM6IFRhc2tQYXJhbXMgPSB7XHJcbiAgdGFza0ZuOiBnb1RvQ29udHJhY3RzVGFza0ZuLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBXaW5kb3dSZW1vdmVEQUNQcmVzdFNlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9XaW5kb3dSZW1vdmVEQUNQcmVzdFNlY3Rpb25cIjtcclxuaW1wb3J0IHsgYXN5bmNfc2V0VGltZW91dCwgd2FpdEZvclNlbGVjdG9yLCB3YWl0Rm9yU2VsZWN0b3JBbGwsIHdhaXRGb3JWYWx1ZSB9IGZyb20gXCIuLi9saWIvYXN5bmNcIjtcclxuaW1wb3J0IHsgV2FybmluZyB9IGZyb20gXCIuLi9saWIvZXJyb3JzXCI7XHJcbmltcG9ydCB7IEljYXJlV2luZG93IH0gZnJvbSBcIi4uL2xpYi9pY2FyZVR5cGVzXCI7XHJcbmltcG9ydCB7XHJcbiAgZ2V0Q3VycmVudFRhc2ssXHJcbiAgbmV4dFRhc2tTdGVwLFxyXG4gIHJlbW92ZUN1cnJlbnRUYXNrLFxyXG4gIHNldEN1cnJlbnRUYXNrLFxyXG4gIFRhc2ssXHJcbiAgVGFza1BhcmFtcyxcclxufSBmcm9tIFwiLi4vbGliL3Rhc2tcIjtcclxuaW1wb3J0IHsgY3JlYXRlRWxlbSB9IGZyb20gXCIuLi9saWIvVUlUb29sc1wiO1xyXG5pbXBvcnQgeyB1cmxDaGVjaywgdXJsQ2hlY2tPckdvIH0gZnJvbSBcIi4uL2xpYi91cmxcIjtcclxuaW1wb3J0IHsgbmFtZWRMb2cgfSBmcm9tIFwiLi4vbGliL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgdHlwZSBSZW1vdmVEQUNQcmVzdENvbnRyYWN0ID0ge1xyXG4gIFwiYyBJRFwiOiBudW1iZXI7XHJcbiAgXCJpbnN0aXR1dGlvbiBpZFwiOiBudW1iZXI7XHJcbiAgXCJwcCBpZFwiOiBudW1iZXI7XHJcbiAgXCJGYWN0dXJhdGlvbiBEQUMgw6Agc3VwcHJpbWVyXCI/OiBudW1iZXI7XHJcbn07XHJcblxyXG5leHBvcnQgdHlwZSBSZW1vdmVEQUNQcmVzdFNoYXJlZERhdGEgPSB7XHJcbiAgY29udHJhY3RzOiB7XHJcbiAgICBbaWQ6IG51bWJlcl06IFJlbW92ZURBQ1ByZXN0Q29udHJhY3Q7XHJcbiAgfTtcclxuICBjb250cmFjdElkczogbnVtYmVyW107XHJcbiAgZG9uZUNvbnRyYWN0czogUmVtb3ZlREFDUHJlc3RDb250cmFjdFtdO1xyXG4gIHN0cmFuZ2VDb250cmFjdHM6IFJlbW92ZURBQ1ByZXN0Q29udHJhY3RbXTtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFJlbW92ZURBQ1ByZXN0VGFzayA9IE9taXQ8VGFzaywgXCJzaGFyZWREYXRhXCI+ICYge1xyXG4gIHNoYXJlZERhdGE6IFJlbW92ZURBQ1ByZXN0U2hhcmVkRGF0YTtcclxufTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZURBQ1ByZXN0VGFzayh0YXNrOiBSZW1vdmVEQUNQcmVzdFRhc2spIHtcclxuICAvL2NoZWNrIGZvciBjb21wYXRpYmlsaXR5XHJcbiAgY29uc3QgbG9jYWxlID0gKHdpbmRvdyBhcyBJY2FyZVdpbmRvdykubG9jYWxlO1xyXG4gIGlmIChsb2NhbGUgJiYgbG9jYWxlLnN1YnN0cmluZygwLCAyKSAhPT0gXCJmclwiKSB7XHJcbiAgICBhbGVydChcclxuICAgICAgXCJDZXR0ZSB0w6JjaGUgc3VwcG9ydGUgdW5pcXVlbWVudCBsZSBzaXRlIGVuIGZyYW7Dp2Fpcy5cXG5cIiArXHJcbiAgICAgICAgXCJDaGFuZ2V6IGxhIGxhbmd1ZSBldCBjb250aW51ZXogbGEgdMOiY2hlXCJcclxuICAgICk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJDZXR0ZSB0w6JjaGUgc3VwcG9ydGUgdW5pcXVlbWVudCBsZSBzaXRlIGVuIGZyYW7Dp2Fpcy5cIik7XHJcbiAgfVxyXG5cclxuICBpZiAoKHdpbmRvdyBhcyBJY2FyZVdpbmRvdykuSEFTX0lDQVJFX0hFTFBFUlNfTE9BREVEKSB7XHJcbiAgICBhbGVydChcclxuICAgICAgXCJDZXR0ZSB0w6JjaGUgbmUgcGV1dCBwYXMgZm9uY3Rpb25uZXIgcXVhbmQgbGUgc2NyaXB0ICdpY2FyZS1oZWxwZXJzJyBlc3QgY2hhcmfDqS4gRMOpc2FjdGl2ZXogbGUgZCdhYm9yZC5cIlxyXG4gICAgKTtcclxuICAgIHRocm93IG5ldyBFcnJvcihcIkNldHRlIHTDomNoZSBuZSBzdXBwb3J0ZSBwYXMgbGUgc2NyaXB0ICdpY2FyZS1oZWxwZXJzJ1wiKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGN1cnJlbnRDb250cmFjdElkID0gdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0SWRzWzBdO1xyXG4gIGNvbnN0IGN1cnJlbnRDb250cmFjdCA9IGN1cnJlbnRDb250cmFjdElkXHJcbiAgICA/IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNbY3VycmVudENvbnRyYWN0SWRdXHJcbiAgICA6IHVuZGVmaW5lZDtcclxuXHJcbiAgbmFtZWRMb2coeyBjdXJyZW50Q29udHJhY3QgfSk7XHJcblxyXG4gIHN3aXRjaCAodGFzay5zdGVwTmFtZSkge1xyXG4gICAgY2FzZSBcInN0YXJ0XCI6IHtcclxuICAgICAgaWYgKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBuZXh0VGFza1N0ZXAoXCJzdWNjZXNzXCIsIHRhc2spO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBjb25zdCB0b3RhbENvbnRyYWN0cyA9IE9iamVjdC5rZXlzKHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHMpLmxlbmd0aDtcclxuICAgICAgbmV4dFRhc2tTdGVwKFwiZ29Ub0NvbnRyYWN0XCIsIHtcclxuICAgICAgICAvLyAvL1RPRE86IHN0YXJ0IHdpdGggZ29Ub0NvbnRyYWN0IGluc3RlYWRcclxuICAgICAgICAvLyBuZXh0VGFza1N0ZXAoXCJzZWFyY2hGYWN0Sm91cm5hbFwiLCB7XHJcbiAgICAgICAgLi4udGFzayxcclxuICAgICAgICBsYXN0TWVzc2FnZTogYGlkIGNvbnRyYXQ6ICR7Y3VycmVudENvbnRyYWN0SWR9XFxuJHtcclxuICAgICAgICAgIHRvdGFsQ29udHJhY3RzIC0gdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0SWRzLmxlbmd0aCArIDFcclxuICAgICAgICB9LyR7dG90YWxDb250cmFjdHN9YCxcclxuICAgICAgfSk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcImdvVG9Db250cmFjdFwiOiB7XHJcbiAgICAgIC8vZ28gdG8gY29udHJhY3QgdXJsXHJcbiAgICAgIGlmIChcclxuICAgICAgICAhdXJsQ2hlY2tPckdvKFxyXG4gICAgICAgICAgYC9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kbz9tZXRob2Q9bWFpbiZha3R1ZWxsZT10cnVlJnRoZVZlcklkPSR7Y3VycmVudENvbnRyYWN0SWR9YFxyXG4gICAgICAgIClcclxuICAgICAgKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjb25maXJtQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcIiN0cm90emRlbVwiKTtcclxuICAgICAgaWYgKGNvbmZpcm1Cb3gpIHtcclxuICAgICAgICAvL2NvbmZpcm0gcGFnZVxyXG4gICAgICAgIGF3YWl0IG5leHRUYXNrU3RlcChcInJlbW92ZVByZXN0YXRpb25cIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgICAgY29uZmlybUJveC5jaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICBjb25maXJtQm94LmZvcm0/LnN1Ym1pdCgpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJyZW1vdmVQcmVzdGF0aW9uXCIsIHRhc2spO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJyZW1vdmVQcmVzdGF0aW9uXCI6IHtcclxuICAgICAgLy9jaGVjayBwYWdlLCBJIGRvbid0IGNoZWNrIHRoZSBjb250cmFjdCBpZCBiZWNhdXNlIEkgZG9uJ3QgaGF2ZSBhbGwgZGF5LiBtYXkgY2F1c2UgaXNzdWVzIGluIHRoZSBmdXR1cmUgwq9cXF8o44OEKV8vwq9cclxuICAgICAgaWYgKCF1cmxDaGVjayhgL2ljYXJlL0JlL1ZlcnRyYWdFZGl0LmRvYCkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vc2VlbXMgdG8gcHJldmVudCBzb21lIGZ1Y2t1cHNcclxuICAgICAgYXdhaXQgYXN5bmNfc2V0VGltZW91dCgyMDApO1xyXG4gICAgICAvL2Nsb3NlIGljYXJlIGVycm9yIGRpYWxvZ1xyXG4gICAgICBkb2N1bWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI2FqYXhFcnJvckRpYWxvZ1wiKVxyXG4gICAgICAgID8ucGFyZW50RWxlbWVudD8ucXVlcnlTZWxlY3RvcjxIVE1MQnV0dG9uRWxlbWVudD4oXCIudWktZGlhbG9nLWJ1dHRvbnBhbmUgYnV0dG9uXCIpXHJcbiAgICAgICAgPy5jbGljaygpO1xyXG5cclxuICAgICAgLy9jbGljayBvbiBcIm90aGVyIHByZXN0YXRpb25zXCIgdGFiXHJcbiAgICAgIC8vaWRrIGJ1dCBpdCB3b3Jrc1xyXG4gICAgICBjb25zdCB0YWJUaXRsZTogSFRNTEVsZW1lbnQgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3IoXCIjdWktaWQtOVwiKTtcclxuICAgICAgdGFiVGl0bGUuY2xpY2soKTtcclxuXHJcbiAgICAgIGNvbnN0IGNsaWNrT25BbGwgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgLy9jbGljayBvbiBcImFsbFwiXHJcbiAgICAgICAgY29uc3QgYnV0dG9uQWxsID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yKFwiI3VpLWlkLTEwIGlucHV0W3R5cGU9YnV0dG9uXVtuYW1lPWFsbGVdXCIpO1xyXG4gICAgICAgIGJ1dHRvbkFsbC5jbGljaygpO1xyXG4gICAgICB9O1xyXG5cclxuICAgICAgLy9maW5kIHByZXN0YXRpb24gdG8gZGVsZXRlXHJcbiAgICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgZGVsZXRlQnV0dG9uID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yKFxyXG4gICAgICAgICAgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCBjbGlja09uQWxsKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFsbFBvdGVudGlhbExpbmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MRWxlbWVudD4oXHJcbiAgICAgICAgICAgICAgXCIjdWktaWQtMTAgLmRhdGFUYWJsZSB0YWJsZSB0Ym9keVwiXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGJvZHkgb2YgYWxsUG90ZW50aWFsTGluZXMpIHtcclxuICAgICAgICAgICAgICBjb25zdCBuYW1lSW5wdXQgPSB0Ym9keS5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiaW5wdXQuaW5wdXREZXNhYmxlXCIpO1xyXG4gICAgICAgICAgICAgIGlmIChuYW1lSW5wdXQ/LnZhbHVlICE9PSBcIlJlZGV2YW5jZSBEZXZvaXJzIGFjY29tcGFnbsOpc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgY29uc3QgdHJhc2hJY29uID0gdGJvZHkucXVlcnlTZWxlY3RvcihcImkuZmFzLmZhLXRyYXNoLWFsdFwiKTtcclxuICAgICAgICAgICAgICByZXR1cm4gdHJhc2hJY29uPy5wYXJlbnRFbGVtZW50ID8/IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgMTAwLFxyXG4gICAgICAgICAgMjAgLy9+MnNlY1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGRlbGV0ZUJ1dHRvbi5jbGljaygpO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChcInNlYXJjaEZhY3RKb3VybmFsXCIsIHRhc2ssIHRydWUpO1xyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKFxyXG4gICAgICAgICAgXCJQcmVzdGF0aW9uIGludHJvdXZhYmxlLCBzdXBwcmltZXogbGEgbWFudWVsbGVtZW50IGV0IGNvbnRpbnVleiBsYSB0w6JjaGVcIlxyXG4gICAgICAgICk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJjb25maXJtUHJlc3REZWxldGVcIiwgdGFzaywgdHJ1ZSk7XHJcblxyXG4gICAgICAvL0FTWU5DIEdBUkJBR0U6IHdhaXQgZm9yIHN1Y2Nlc3Mgb24gdGhlIHNhbWUgcGFnZSAoYnkgY291bnRpbmcgdGhlIHRyYXNoIGNhbiBpY29ucylcclxuXHJcbiAgICAgIGNvbnN0IGdldEVsZW1zQ291bnQgPSAoKSA9PiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI3VpLWlkLTEwIGkuZmFzLmZhLXRyYXNoLWFsdFwiKS5sZW5ndGg7XHJcbiAgICAgIGNvbnN0IGJhc2VFbGVtc0NvdW50ID0gZ2V0RWxlbXNDb3VudCgpO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IHdhaXRGb3JWYWx1ZTx0cnVlPigoKSA9PiAoZ2V0RWxlbXNDb3VudCgpIDwgYmFzZUVsZW1zQ291bnQgPyB0cnVlIDogdW5kZWZpbmVkKSk7XHJcbiAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKFwic2VhcmNoRmFjdEpvdXJuYWxcIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgYExhIHN1cHJlc3Npb24gYXV0b21hdGlxdWUgZGUgbGEgcHJlc3RhdGlvbiBkdSBjb250cmF0ICR7Y3VycmVudENvbnRyYWN0SWR9IG4nYSBwYXMgZm9uY3Rpb25uw6ksXFxuIHbDqXJpZmllei9zdXBwcmltZXogbGEgbWFudWVsbGVtZW50IGV0IGNvbnRpbnVleiBsYSB0w6JjaGVgXHJcbiAgICAgICAgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChcInNlYXJjaEZhY3RKb3VybmFsXCIsIHRhc2spO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJjb25maXJtUHJlc3REZWxldGVcIjoge1xyXG4gICAgICAvL1dBUk5JTkc6IGFzeW5jaHJvbm91cyBzdGVwLCBkb24ndCB1cGRhdGUgdGhlIHRhc2sgaGVyZSFcclxuXHJcbiAgICAgIGlmICghdXJsQ2hlY2soXCIvaWNhcmUvQWQvUGxhdHppZXJ1bmdMb2VzY2hlbi5kb1wiKSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3Qgb2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxCdXR0b25FbGVtZW50PihcImJ1dHRvbi5idG4uYnRuLXN1Y2Nlc3NcIik7XHJcbiAgICAgIG9rQnV0dG9uPy5jbGljaygpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcInNlYXJjaEZhY3RKb3VybmFsXCI6IHtcclxuICAgICAgaWYgKCF1cmxDaGVja09yR28oXCIvaWNhcmUvQWQvRmpVZWJlcnNpY2h0LmRvP25ldWVTdWNoZT1uZXVlU3VjaGVcIikpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIGNvbnN0IGluc3RpdHV0aW9uU2VsZWN0ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yPEhUTUxTZWxlY3RFbGVtZW50PihcInNlbGVjdCNmak1hbmRhbnRcIik7XHJcbiAgICAgIGluc3RpdHV0aW9uU2VsZWN0LnZhbHVlID0gY3VycmVudENvbnRyYWN0IVtcImluc3RpdHV0aW9uIGlkXCJdLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgICBjb25zdCB5ZWFySW5wdXQgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCJpbnB1dCNmakphaHJcIik7XHJcbiAgICAgIHllYXJJbnB1dC52YWx1ZSA9ICgyMDIyKS50b1N0cmluZygpO1xyXG5cclxuICAgICAgY29uc3QgbmFtZUlucHV0ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFwiaW5wdXQjZmpCZXplaWNobnVuZ1wiKTtcclxuICAgICAgbmFtZUlucHV0LnZhbHVlID0gXCJEQUMgYXV0b21uZSAyMDIyXCI7XHJcblxyXG4gICAgICBjb25zdCBzdWJtaXRCdXR0b24gPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3I8SFRNTEJ1dHRvbkVsZW1lbnQ+KFwiYnV0dG9uI3NlYXJjaEJ1dHRvblwiKTtcclxuXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJmaW5kRmFjdEpvdXJuYWxcIiwgdGFzaywgdHJ1ZSk7XHJcbiAgICAgIHN1Ym1pdEJ1dHRvbi5jbGljaygpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcImZpbmRGYWN0Sm91cm5hbFwiOiB7XHJcbiAgICAgIGlmICghdXJsQ2hlY2soXCIvaWNhcmUvQWQvRmpVZWJlcnNpY2h0LmRvXCIpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBmakxpbmsgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3JBbGw8SFRNTEFuY2hvckVsZW1lbnQ+KFxyXG4gICAgICAgIFwidGFibGUjZmogPiB0Ym9keSA+IHRyID4gdGQubGluayA+IGFcIixcclxuICAgICAgICAyXHJcbiAgICAgICk7XHJcblxyXG4gICAgICB0YXNrID0gYXdhaXQgbmV4dFRhc2tTdGVwKFwiZGVsZXRlRmFjdFwiLCB0YXNrLCB0cnVlKTtcclxuICAgICAgaWYgKGZqTGluay5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFdhcm5pbmcoXCJUcm9wIGRlIHLDqXN1bHRhdHMhIG5hdmlndWV6IHN1ciBsZSBib24gZXQgY29udGludWV6IGxhIHTDomNoZVwiKTtcclxuICAgICAgfVxyXG4gICAgICBmakxpbmtbMF0uY2xpY2soKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNhc2UgXCJkZWxldGVGYWN0XCI6IHtcclxuICAgICAgY29uc3QgZmFjdExpbmVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbDxIVE1MVGFibGVSb3dFbGVtZW50PihcclxuICAgICAgICBcInRhYmxlI2pxRmpEaXNwbGF5VGFibGUgPiB0Ym9keSA+IHRyXCJcclxuICAgICAgKTtcclxuICAgICAgY29uc3QgZm91bmRMaW5lcyA9IFsuLi5mYWN0TGluZXNdLmZpbHRlcigobGluZSkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGxpbmtSb3cgPSBsaW5lLnF1ZXJ5U2VsZWN0b3JBbGw8SFRNTFRhYmxlQ2VsbEVsZW1lbnQ+KFwidGQubGlua1wiKVsxXTtcclxuICAgICAgICByZXR1cm4gbGlua1Jvdy50ZXh0Q29udGVudD8uaW5jbHVkZXMoYCgke2N1cnJlbnRDb250cmFjdD8uW1wicHAgaWRcIl19KWApO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIGlmIChmb3VuZExpbmVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKFxyXG4gICAgICAgICAgYEZhY3R1cmUgJHtjdXJyZW50Q29udHJhY3Q/LltcInBwIGlkXCJdfSBpbnRyb3V2YWJsZSwgc3VwcHJpbWV6IGxhIG1hbnVlbGxlbWVudCBldCBwYXNzZXogYXUgY29udHJhdCBzdWl2YW50LmBcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChmb3VuZExpbmVzLmxlbmd0aCA+IDEpIHtcclxuICAgICAgICB0YXNrID0gYXdhaXQgc2V0Q3VycmVudFRhc2soPFJlbW92ZURBQ1ByZXN0VGFzaz57XHJcbiAgICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgICAgc2hhcmVkRGF0YToge1xyXG4gICAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEsXHJcbiAgICAgICAgICAgIHN0cmFuZ2VDb250cmFjdHM6IFsuLi50YXNrLnNoYXJlZERhdGEuc3RyYW5nZUNvbnRyYWN0cywgY3VycmVudENvbnRyYWN0XSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhyb3cgbmV3IFdhcm5pbmcoXHJcbiAgICAgICAgICBcIlBsdXNpZXVycyBmYWN0dXJlcyB0cm91dsOpZXMsIGxhIHN1cHJlc3Npb24gbmUgc2VyYSBwYXMgZWZmZWN0dcOpZS5cXG5QYXNzZXogYXUgY29udHJhdCBzdWl2YW50XCJcclxuICAgICAgICApO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBjb25zdCBjaGVja2JveCA9IGZvdW5kTGluZXNbMF0ucXVlcnlTZWxlY3RvcjxIVE1MSW5wdXRFbGVtZW50PihcImlucHV0W3R5cGU9Y2hlY2tib3hdXCIpO1xyXG4gICAgICBpZiAoIWNoZWNrYm94KSB0aHJvdyBuZXcgRXJyb3IoXCJjaGVja2JveCBpbnRyb3V2YWJsZVwiKTtcclxuICAgICAgY2hlY2tib3guY2hlY2tlZCA9IHRydWU7XHJcblxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUxpbmsgPSBhd2FpdCB3YWl0Rm9yU2VsZWN0b3I8SFRNTEFuY2hvckVsZW1lbnQ+KFxyXG4gICAgICAgICAgXCIjanFGakRpc3BsYXlUYWJsZSAjanFGakF1c3dhaGxVbCBsaS5kZWxldGUgPiBhW2hyZWY9J2phdmFzY3JpcHQ6ZGVsZXRlU2VsZWN0ZWRGYWtzKCk7J11cIlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgdGFzaywgdHJ1ZSk7XHJcblxyXG4gICAgICAgIGNvbnN0IG9sZENvbmZpcm0gPSB3aW5kb3cuY29uZmlybTtcclxuICAgICAgICB3aW5kb3cuY29uZmlybSA9ICgpID0+IHRydWU7IC8vZm9yY2UgY29uZmlybSB0byB0cnVlXHJcbiAgICAgICAgZGVsZXRlTGluay5jbGljaygpO1xyXG4gICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBib3V0b24gZGUgc3VwcmVzc2lvbiBpbnRyb3V2YWJsZSAoJHtjdXJyZW50Q29udHJhY3Q/LltcInBwIGlkXCJdfSlgKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY2FzZSBcImVuZE9mTG9vcFwiOiB7XHJcbiAgICAgIGNvbnN0IG5ld1Rhc2s6IFJlbW92ZURBQ1ByZXN0VGFzayA9IHtcclxuICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgIHNoYXJlZERhdGE6IHtcclxuICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YSxcclxuICAgICAgICAgIGNvbnRyYWN0SWRzOiB0YXNrLnNoYXJlZERhdGEuY29udHJhY3RJZHMuc2xpY2UoMSksXHJcbiAgICAgICAgICBkb25lQ29udHJhY3RzOiBbXHJcbiAgICAgICAgICAgIC4uLnRhc2suc2hhcmVkRGF0YS5kb25lQ29udHJhY3RzLFxyXG4gICAgICAgICAgICAuLi4oY3VycmVudENvbnRyYWN0ID8gW2N1cnJlbnRDb250cmFjdF0gOiBbXSksXHJcbiAgICAgICAgICBdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIG5leHRUYXNrU3RlcChcInN0YXJ0XCIsIG5ld1Rhc2spO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjYXNlIFwic3VjY2Vzc1wiOiB7XHJcbiAgICAgIGFsZXJ0KFwiVMOiY2hlIHRlcm1pbsOpZSFcIik7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY29udHJhdHMgdGVybWluw6lzXCIsIHRhc2suc2hhcmVkRGF0YS5kb25lQ29udHJhY3RzKTtcclxuICAgICAgY29uc29sZS5sb2coXCJjb250cmF0cyBpZ25vcsOpc1wiLCB0YXNrLnNoYXJlZERhdGEuc3RyYW5nZUNvbnRyYWN0cyk7XHJcbiAgICAgIGF3YWl0IHJlbW92ZUN1cnJlbnRUYXNrKCk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGRlZmF1bHQ6IHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGDDqXRhcGUgJHt0YXNrLnN0ZXBOYW1lfSBpbmNvbm51ZWApO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHJlbW92ZURBQ1ByZXN0VGFza1BhcmFtczogVGFza1BhcmFtcyA9IHtcclxuICB0YXNrRm46IHJlbW92ZURBQ1ByZXN0VGFzayxcclxuICB3aW5kb3dTZWN0aW9uQ29tcG9uZW50OiBXaW5kb3dSZW1vdmVEQUNQcmVzdFNlY3Rpb24sXHJcbiAgYWN0aW9uc0VsZW1zOiBbXHJcbiAgICBjcmVhdGVFbGVtKFxyXG4gICAgICBcImJ1dHRvblwiLFxyXG4gICAgICB7XHJcbiAgICAgICAgYXN5bmMgb25jbGljayhlKSB7XHJcbiAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgaWYgKCFjb25maXJtKFwiw4p0ZXMgdm91cyBzw7tyIGRlIHZvdWxvaXIgcGFzc2VyIGF1IGNvbnRyYXQgc3VpdmFudD9cIikpIHJldHVybjtcclxuICAgICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCBnZXRDdXJyZW50VGFzaygpO1xyXG4gICAgICAgICAgaWYgKCF0YXNrKSByZXR1cm47XHJcbiAgICAgICAgICBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BcIiwgeyAuLi50YXNrLCBpc1BhdXNlZDogZmFsc2UgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCJQYXNzZXIgYXUgY29udHJhdCBzdWl2YW50XCJcclxuICAgICksXHJcbiAgXSxcclxufTtcclxuIiwiaW1wb3J0IHsgYXN5bmNfc2V0VGltZW91dCwgd2FpdEZvclNlbGVjdG9yLCB3YWl0Rm9yU2VsZWN0b3JBbGwgfSBmcm9tIFwiLi4vbGliL2FzeW5jXCI7XHJcbmltcG9ydCB7IFdhcm5pbmcgfSBmcm9tIFwiLi4vbGliL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBuZXh0VGFza1N0ZXAsIHJlbW92ZUN1cnJlbnRUYXNrLCBUYXNrLCBUYXNrUGFyYW1zIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IHVybENoZWNrIH0gZnJvbSBcIi4uL2xpYi91cmxcIjtcclxuaW1wb3J0IHsgbmFtZWRMb2cgfSBmcm9tIFwiLi4vbGliL3V0aWxzXCI7XHJcblxyXG50eXBlIFJlbW92ZUVuZERhdGVUYXNrID0gT21pdDxUYXNrLCBcInNoYXJlZERhdGFcIj4gJiB7XHJcbiAgc2hhcmVkRGF0YToge1xyXG4gICAgZGF0ZVRvUmVtb3ZlOiBzdHJpbmc7XHJcbiAgICBuZXdFbmREYXRlOiBzdHJpbmc7XHJcbiAgfTtcclxufTtcclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZUVuZERhdGVUYXNrRm4odGFzazogUmVtb3ZlRW5kRGF0ZVRhc2spIHtcclxuICBzd2l0Y2ggKHRhc2suc3RlcE5hbWUpIHtcclxuICAgIGNhc2UgXCJzdGFydFwiOiB7XHJcbiAgICAgIGlmICghdXJsQ2hlY2soXCJpY2FyZS9CZS9WZXJ0cmFnRWRpdC5kb1wiKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBXYXJuaW5nKFwiRMOpbWFycmVyIGxhIHTDomNoZSBkZXB1aXMgdW5lIHBhZ2UgZGUgY29udHJhdFwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gd2FpdCBmb3Igc3Bpbm5lciBlbmRcclxuICAgICAgYXdhaXQgd2FpdEZvclNwaW5uZXJIaWRkZW4oKTtcclxuXHJcbiAgICAgIC8vZ28gdG8gY29udHJhY3QgdGFiXHJcbiAgICAgIChhd2FpdCB3YWl0Rm9yU2VsZWN0b3IoXCJhI3VpLWlkLTVcIikpLmNsaWNrKCk7XHJcblxyXG4gICAgICAvL2dldCByZW1vdmFsIGRhdGVcclxuICAgICAgY29uc3QgZW5kRGF0ZUlucHV0ID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxyXG4gICAgICAgIFwiI3VpLWlkLTYgPiBmb3JtID4gdGFibGUgPiB0Ym9keSA+IHRyID4gdGQgPiBpbnB1dCN2ZXJFbmRlXCJcclxuICAgICAgKTtcclxuXHJcbiAgICAgIGlmICh0YXNrLnNoYXJlZERhdGEuZGF0ZVRvUmVtb3ZlICE9PSBlbmREYXRlSW5wdXQudmFsdWUpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ3ZWlyZCBkYXRlIG1pc21hdGNoXCIpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBlbmREYXRlSW5wdXQudmFsdWUgPSBcIlwiO1xyXG5cclxuICAgICAgLy9zYXZlXHJcbiAgICAgIC8vQVNZTkMgR0FSQkFHRTogd2FpdCBmb3Igc3VjY2VzcyBvbiB0aGUgc2FtZSBwYWdlXHJcbiAgICAgIHRhc2sgPSBhd2FpdCBuZXh0VGFza1N0ZXAoXCJjb25maXJtU2F2ZVwiLCB0YXNrLCB0cnVlKTsgLy9BQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQVxyXG5cclxuICAgICAgZW5kRGF0ZUlucHV0LmZvcm0/LnN1Ym1pdCgpO1xyXG5cclxuICAgICAgLy8gd2FpdCBmb3Igc3VjY2VzcyBtZXNzYWdlXHJcbiAgICAgIGF3YWl0IHdhaXRGb3JTdWNjZXNzKCk7XHJcblxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJ1cGRhdGVQcmVzdHNcIiwgdGFzayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwidXBkYXRlUHJlc3RzXCI6IHtcclxuICAgICAgLy9nbyB0byBwcmVzdHMgdGFiXHJcbiAgICAgIChhd2FpdCB3YWl0Rm9yU2VsZWN0b3IoXCJhI3VpLWlkLTdcIikpLmNsaWNrKCk7XHJcblxyXG4gICAgICAvLyB3YWl0IGZvciBzcGlubmVyIGVuZFxyXG4gICAgICBhd2FpdCB3YWl0Rm9yU3Bpbm5lckhpZGRlbigpO1xyXG5cclxuICAgICAgY29uc3QgaW5wdXRzID0gYXdhaXQgd2FpdEZvclNlbGVjdG9yQWxsPEhUTUxJbnB1dEVsZW1lbnQ+KFxyXG4gICAgICAgIFwiI3VpLWlkLTggI2NvbnRyYWN0dWVsU2F2ZSBpbnB1dC5hdXRvRGF0ZVwiXHJcbiAgICAgICk7XHJcblxyXG4gICAgICBuYW1lZExvZyh7IGlucHV0cyB9KTtcclxuICAgICAgLy9zZXQgaW5wdXRzIHRvIGVuZCBkYXRlXHJcbiAgICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICAgIGlmIChpbnB1dC52YWx1ZSA9PT0gdGFzay5zaGFyZWREYXRhLmRhdGVUb1JlbW92ZSkge1xyXG4gICAgICAgICAgaW5wdXQudmFsdWUgPSB0YXNrLnNoYXJlZERhdGEubmV3RW5kRGF0ZTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgLy93YWl0IGZvciBzdWNjZXNzIG1lc3NhZ2UgdG8gYmUgaGlkZGVuXHJcbiAgICAgIGF3YWl0IHdhaXRGb3JTZWxlY3RvcihcclxuICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCBzYXZlZEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTEVsZW1lbnQ+KFwiI3NhdmVkXCIpO1xyXG4gICAgICAgICAgcmV0dXJuIHNhdmVkQm94Py5zdHlsZS52aXNpYmlsaXR5ICE9PSBcInZpc2libGVcIiA/IHNhdmVkQm94IDogbnVsbDtcclxuICAgICAgICB9LFxyXG4gICAgICAgIDEwLFxyXG4gICAgICAgIDUwMFxyXG4gICAgICApO1xyXG5cclxuICAgICAgLy9BU1lOQyBHQVJCQUdFOiB3YWl0IGZvciBzdWNjZXNzIG9uIHRoZSBzYW1lIHBhZ2VcclxuICAgICAgdGFzayA9IGF3YWl0IG5leHRUYXNrU3RlcChcImNvbmZpcm1TYXZlXCIsIHRhc2ssIHRydWUpOyAvL0FBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBXHJcblxyXG4gICAgICAvL3NhdmVcclxuICAgICAgKGF3YWl0IHdhaXRGb3JTZWxlY3RvcihcIiN1aS1pZC04IC5qcVNhdmVQbGdzQnV0dG9uXCIpKS5jbGljaygpO1xyXG5cclxuICAgICAgLy8gd2FpdCBmb3Igc3VjY2VzcyBtZXNzYWdlXHJcbiAgICAgIGF3YWl0IHdhaXRGb3JTdWNjZXNzKCk7XHJcblxyXG4gICAgICBuZXh0VGFza1N0ZXAoXCJiYWNrVG9Db250cmFjdFRhYlwiLCB0YXNrKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGNhc2UgXCJiYWNrVG9Db250cmFjdFRhYlwiOiB7XHJcbiAgICAgIC8vYmFjayB0byBjb250cmFjdCB0YWJcclxuICAgICAgKGF3YWl0IHdhaXRGb3JTZWxlY3RvcihcImEjdWktaWQtNVwiKSkuY2xpY2soKTtcclxuXHJcbiAgICAgIGF3YWl0IHdhaXRGb3JTcGlubmVySGlkZGVuKCk7XHJcbiAgICAgIGF3YWl0IGFzeW5jX3NldFRpbWVvdXQoMjAwKTtcclxuICAgICAgLy9mb2N1cyBjb3B5IGJ1dHRvblxyXG4gICAgICAoXHJcbiAgICAgICAgYXdhaXQgd2FpdEZvclNlbGVjdG9yKFxyXG4gICAgICAgICAgXCIjdWktaWQtNiA+IFtuYW1lPVZlcnRyYWdFZGl0Rm9ybV0gPiB0YWJsZSA+IHRib2R5ID4gdHIgPiB0ZCA+IHRhYmxlID4gdGJvZHkgPiB0ciA+IHRkID4gYnV0dG9uLmJ0bi5idG4tcHJpbWFyeVwiLFxyXG4gICAgICAgICAgMjUwLFxyXG4gICAgICAgICAgSW5maW5pdHlcclxuICAgICAgICApXHJcbiAgICAgICkuZm9jdXMoKTtcclxuXHJcbiAgICAgIG5leHRUYXNrU3RlcChcInN1Y2Nlc3NcIiwgdGFzayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiY29uZmlybVNhdmVcIjoge1xyXG4gICAgICAvL1dBUk5JTkc6IGFzeW5jaHJvbm91cyBzdGVwICh1c2VkIG11bHRpcGxlIHRpbWVzKSwgZG9uJ3QgdXBkYXRlIHRoZSB0YXNrIGhlcmUhXHJcbiAgICAgIGlmICghdXJsQ2hlY2soXCIvaWNhcmUvQmUvUGxhdHppZXJ1bmdWZXJ0cmFnUHJlcGFyZS5kb1wiKSkgcmV0dXJuO1xyXG5cclxuICAgICAgY29uc3Qgb2tCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxJbnB1dEVsZW1lbnQ+KFxyXG4gICAgICAgIFwiZm9ybVtuYW1lPVZlcnRyYWdFZGl0Rm9ybV0gaW5wdXQuYnRuLmJ0bi1wcmltYXJ5XCJcclxuICAgICAgKTtcclxuICAgICAgb2tCdXR0b24/LmNsaWNrKCk7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xyXG4gICAgICBjb25zb2xlLmluZm8oXCJyZW1vdmUgZW5kIGRhdGUgdGFzayBzdWNjZXNzXCIpO1xyXG5cclxuICAgICAgYXdhaXQgcmVtb3ZlQ3VycmVudFRhc2soKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCByZW1vdmVFbmREYXRlVGFza1BhcmFtczogVGFza1BhcmFtcyA9IHtcclxuICB0YXNrRm46IHJlbW92ZUVuZERhdGVUYXNrRm4sXHJcbn07XHJcblxyXG5hc3luYyBmdW5jdGlvbiB3YWl0Rm9yU3Bpbm5lckhpZGRlbigpIHtcclxuICAvLyB3YWl0IGZvciBzcGlubmVyIGVuZFxyXG4gIGF3YWl0IHdhaXRGb3JTZWxlY3RvcihcclxuICAgICgpID0+IHtcclxuICAgICAgY29uc3Qgc2F2ZWRCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIi5zcGlubmVyLWNvbnRhaW5lclwiKTtcclxuICAgICAgcmV0dXJuIHNhdmVkQm94Py5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiA/IHNhdmVkQm94IDogbnVsbDtcclxuICAgIH0sXHJcbiAgICAxMCxcclxuICAgIDUwMFxyXG4gICk7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JTdWNjZXNzKCkge1xyXG4gIC8vIHdhaXQgZm9yIHN1Y2Nlc3MgbWVzc2FnZVxyXG4gIGF3YWl0IHdhaXRGb3JTZWxlY3RvcihcclxuICAgICgpID0+IHtcclxuICAgICAgY29uc3Qgc2F2ZWRCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yPEhUTUxFbGVtZW50PihcIiNzYXZlZFwiKTtcclxuICAgICAgcmV0dXJuIHNhdmVkQm94Py5zdHlsZS52aXNpYmlsaXR5ID09PSBcInZpc2libGVcIiA/IHNhdmVkQm94IDogbnVsbDtcclxuICAgIH0sXHJcbiAgICAxMCxcclxuICAgIDUwMFxyXG4gICk7XHJcbn1cclxuIiwiaW1wb3J0IHsgV2luZG93U3RlcENvbnRyYWN0c1NlY3Rpb24gfSBmcm9tIFwiLi4vY29tcG9uZW50cy9XaW5kb3dTdGVwQ29udHJhY3RzU2VjdGlvblwiO1xyXG5pbXBvcnQgeyBlcnJvcklmSWNhcmVUb29scyB9IGZyb20gXCIuLi9saWIvY2hlY2tzXCI7XHJcbmltcG9ydCB7IFdhcm5pbmcgfSBmcm9tIFwiLi4vbGliL2Vycm9yc1wiO1xyXG5pbXBvcnQgeyBuZXh0VGFza1N0ZXAsIHJlbW92ZUN1cnJlbnRUYXNrLCBUYXNrLCBUYXNrUGFyYW1zIH0gZnJvbSBcIi4uL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7IHVybENoZWNrT3JHbyB9IGZyb20gXCIuLi9saWIvdXJsXCI7XHJcblxyXG5leHBvcnQgdHlwZSBCYXNpY0NvbnRyYWN0ID0geyBcImMgSURcIjogbnVtYmVyIH07XHJcblxyXG5leHBvcnQgdHlwZSBTdGVwQ29udHJhY3RzU2hhcmVkRGF0YSA9IHtcclxuICBjb250cmFjdElkczogbnVtYmVyW107XHJcbiAgY29udHJhY3RzQ291bnQ6IG51bWJlcjtcclxufTtcclxuXHJcbmV4cG9ydCB0eXBlIFN0ZXBDb250YWN0c1Rhc2sgPSBPbWl0PFRhc2ssIFwic2hhcmVkRGF0YVwiPiAmIHtcclxuICBzaGFyZWREYXRhOiBTdGVwQ29udHJhY3RzU2hhcmVkRGF0YTtcclxufTtcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzdGVwQ29udHJhY3RzVGFza0ZuKHRhc2s6IFN0ZXBDb250YWN0c1Rhc2spIHtcclxuICBlcnJvcklmSWNhcmVUb29scygpO1xyXG4gIGNvbnN0IGN1cnJlbnRJZCA9IHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkc1swXTtcclxuICBzd2l0Y2ggKHRhc2suc3RlcE5hbWUpIHtcclxuICAgIGNhc2UgXCJzdGFydFwiOiB7XHJcbiAgICAgIGlmICh0YXNrLnNoYXJlZERhdGEuY29udHJhY3RJZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgbmV4dFRhc2tTdGVwKFwic3VjY2Vzc1wiLCB0YXNrKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgbmV4dFRhc2tTdGVwKFwiZ29Ub0NvbnRyYWN0XCIsIHtcclxuICAgICAgICAuLi50YXNrLFxyXG4gICAgICAgIGxhc3RNZXNzYWdlOiBgaWQgY29udHJhdDogJHtjdXJyZW50SWR9XFxuJHtcclxuICAgICAgICAgIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdHNDb3VudCAtIHRhc2suc2hhcmVkRGF0YS5jb250cmFjdElkcy5sZW5ndGggKyAxXHJcbiAgICAgICAgfS8ke3Rhc2suc2hhcmVkRGF0YS5jb250cmFjdHNDb3VudH1gLFxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiZ29Ub0NvbnRyYWN0XCI6IHtcclxuICAgICAgLy9nbyB0byBjb250cmFjdCB1cmxcclxuICAgICAgaWYgKFxyXG4gICAgICAgICF1cmxDaGVja09yR28oYC9pY2FyZS9CZS9WZXJ0cmFnRWRpdC5kbz9tZXRob2Q9bWFpbiZha3R1ZWxsZT10cnVlJnRoZVZlcklkPSR7Y3VycmVudElkfWApXHJcbiAgICAgICkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG5cclxuICAgICAgY29uc3QgY29uZmlybUJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTElucHV0RWxlbWVudD4oXCIjdHJvdHpkZW1cIik7XHJcbiAgICAgIGlmIChjb25maXJtQm94KSB7XHJcbiAgICAgICAgLy9jb25maXJtIHBhZ2VcclxuICAgICAgICBhd2FpdCBuZXh0VGFza1N0ZXAoXCJlbmRPZkxvb3BDb25maXJtXCIsIHRhc2ssIHRydWUpO1xyXG4gICAgICAgIGNvbmZpcm1Cb3guY2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgY29uZmlybUJveC5mb3JtPy5zdWJtaXQoKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgbmV4dFRhc2tTdGVwKFwiZW5kT2ZMb29wQ29uZmlybVwiLCB0YXNrKTtcclxuXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBjYXNlIFwiZW5kT2ZMb29wQ29uZmlybVwiOiB7XHJcbiAgICAgIGNvbnN0IG5ld1Rhc2s6IFN0ZXBDb250YWN0c1Rhc2sgPSB7XHJcbiAgICAgICAgLi4udGFzayxcclxuICAgICAgICBzaGFyZWREYXRhOiB7XHJcbiAgICAgICAgICAuLi50YXNrLnNoYXJlZERhdGEsXHJcbiAgICAgICAgICBjb250cmFjdElkczogdGFzay5zaGFyZWREYXRhLmNvbnRyYWN0SWRzLnNsaWNlKDEpLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH07XHJcbiAgICAgIGF3YWl0IG5leHRUYXNrU3RlcChcInN0YXJ0XCIsIG5ld1Rhc2ssIHRydWUpO1xyXG5cclxuICAgICAgdGhyb3cgbmV3IFdhcm5pbmcoXCJ3YWl0aW5nIGZvciBjb250aW51ZSAobmV4dCBjb250cmFjdClcIik7XHJcblxyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY2FzZSBcInN1Y2Nlc3NcIjoge1xyXG4gICAgICBhbGVydChcIlTDomNoZSB0ZXJtaW7DqWUhXCIpO1xyXG4gICAgICBhd2FpdCByZW1vdmVDdXJyZW50VGFzaygpO1xyXG5cclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHN0ZXBDb250cmFjdHNUYXNrUGFyYW1zOiBUYXNrUGFyYW1zID0ge1xyXG4gIHRhc2tGbjogc3RlcENvbnRyYWN0c1Rhc2tGbixcclxuICB3aW5kb3dTZWN0aW9uQ29tcG9uZW50OiBXaW5kb3dTdGVwQ29udHJhY3RzU2VjdGlvbixcclxufTtcclxuIiwiaW1wb3J0IHsgbmV4dFRhc2tTdGVwLCByZW1vdmVDdXJyZW50VGFzaywgVGFzaywgVGFza1BhcmFtcyB9IGZyb20gXCIuLi9saWIvdGFza1wiO1xyXG5cclxuYXN5bmMgZnVuY3Rpb24gdGVzdFRhc2sodGFzazogVGFzaykge1xyXG4gIHN3aXRjaCAodGFzay5zdGVwTmFtZSkge1xyXG4gICAgY2FzZSBcInN0YXJ0XCI6XHJcbiAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvaWNhcmUvQmUvT3ZlcnZpZXcuZG9cIjtcclxuICAgICAgbmV4dFRhc2tTdGVwKFwic2F5SGVsbG9cIiwgdGFzayk7XHJcbiAgICAgIHJldHVybjtcclxuICAgIGNhc2UgXCJzYXlIZWxsb1wiOlxyXG4gICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoXCIvaWNhcmUvQmUvT3ZlcnZpZXcuZG9cIikpIHtcclxuICAgICAgICBhbGVydCh0YXNrLnNoYXJlZERhdGEpO1xyXG4gICAgICAgIG5leHRUYXNrU3RlcChcInN1Y2Nlc3NcIiwgdGFzayk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuO1xyXG4gICAgY2FzZSBcInN1Y2Nlc3NcIjpcclxuICAgICAgYWxlcnQoXCJUYXNrIHN1Y2Nlc3MhXCIpO1xyXG4gICAgICBhd2FpdCByZW1vdmVDdXJyZW50VGFzaygpO1xyXG4gICAgICBicmVhaztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCB0ZXN0VGFza1BhcmFtczogVGFza1BhcmFtcyA9IHtcclxuICB0YXNrRm46IHRlc3RUYXNrLFxyXG59O1xyXG4iLCIvKiEgeGxzeC5qcyAoQykgMjAxMy1wcmVzZW50IFNoZWV0SlMgLS0gaHR0cDovL3NoZWV0anMuY29tICovXG4vKiB2aW06IHNldCB0cz0yOiAqL1xuLypleHBvcnRlZCBYTFNYICovXG4vKmdsb2JhbCBwcm9jZXNzOmZhbHNlLCBCdWZmZXI6ZmFsc2UsIEFycmF5QnVmZmVyOmZhbHNlLCBEYXRhVmlldzpmYWxzZSwgRGVubzpmYWxzZSAqL1xudmFyIFhMU1ggPSB7fTtcblhMU1gudmVyc2lvbiA9ICcwLjE4LjUnO1xudmFyIGN1cnJlbnRfY29kZXBhZ2UgPSAxMjAwLCBjdXJyZW50X2Fuc2kgPSAxMjUyO1xuXG52YXIgVkFMSURfQU5TSSA9IFsgODc0LCA5MzIsIDkzNiwgOTQ5LCA5NTAsIDEyNTAsIDEyNTEsIDEyNTIsIDEyNTMsIDEyNTQsIDEyNTUsIDEyNTYsIDEyNTcsIDEyNTgsIDEwMDAwIF07XG4vKiBFQ01BLTM3NiBQYXJ0IEkgMTguNC4xIGNoYXJzZXQgdG8gY29kZXBhZ2UgbWFwcGluZyAqL1xudmFyIENTMkNQID0gKHtcblx0Lyo6OlsqLzAvKjo6XSovOiAgICAxMjUyLCAvKiBBTlNJICovXG5cdC8qOjpbKi8xLyo6Ol0qLzogICA2NTAwMSwgLyogREVGQVVMVCAqL1xuXHQvKjo6WyovMi8qOjpdKi86ICAgNjUwMDEsIC8qIFNZTUJPTCAqL1xuXHQvKjo6WyovNzcvKjo6XSovOiAgMTAwMDAsIC8qIE1BQyAqL1xuXHQvKjo6WyovMTI4Lyo6Ol0qLzogICA5MzIsIC8qIFNISUZUSklTICovXG5cdC8qOjpbKi8xMjkvKjo6XSovOiAgIDk0OSwgLyogSEFOR1VMICovXG5cdC8qOjpbKi8xMzAvKjo6XSovOiAgMTM2MSwgLyogSk9IQUIgKi9cblx0Lyo6OlsqLzEzNC8qOjpdKi86ICAgOTM2LCAvKiBHQjIzMTIgKi9cblx0Lyo6OlsqLzEzNi8qOjpdKi86ICAgOTUwLCAvKiBDSElORVNFQklHNSAqL1xuXHQvKjo6WyovMTYxLyo6Ol0qLzogIDEyNTMsIC8qIEdSRUVLICovXG5cdC8qOjpbKi8xNjIvKjo6XSovOiAgMTI1NCwgLyogVFVSS0lTSCAqL1xuXHQvKjo6WyovMTYzLyo6Ol0qLzogIDEyNTgsIC8qIFZJRVROQU1FU0UgKi9cblx0Lyo6OlsqLzE3Ny8qOjpdKi86ICAxMjU1LCAvKiBIRUJSRVcgKi9cblx0Lyo6OlsqLzE3OC8qOjpdKi86ICAxMjU2LCAvKiBBUkFCSUMgKi9cblx0Lyo6OlsqLzE4Ni8qOjpdKi86ICAxMjU3LCAvKiBCQUxUSUMgKi9cblx0Lyo6OlsqLzIwNC8qOjpdKi86ICAxMjUxLCAvKiBSVVNTSUFOICovXG5cdC8qOjpbKi8yMjIvKjo6XSovOiAgIDg3NCwgLyogVEhBSSAqL1xuXHQvKjo6WyovMjM4Lyo6Ol0qLzogIDEyNTAsIC8qIEVBU1RFVVJPUEUgKi9cblx0Lyo6OlsqLzI1NS8qOjpdKi86ICAxMjUyLCAvKiBPRU0gKi9cblx0Lyo6OlsqLzY5Lyo6Ol0qLzogICA2OTY5ICAvKiBNSVNDICovXG59Lyo6YW55Ki8pO1xuXG52YXIgc2V0X2Fuc2kgPSBmdW5jdGlvbihjcC8qOm51bWJlciovKSB7IGlmKFZBTElEX0FOU0kuaW5kZXhPZihjcCkgPT0gLTEpIHJldHVybjsgY3VycmVudF9hbnNpID0gQ1MyQ1BbMF0gPSBjcDsgfTtcbmZ1bmN0aW9uIHJlc2V0X2Fuc2koKSB7IHNldF9hbnNpKDEyNTIpOyB9XG5cbnZhciBzZXRfY3AgPSBmdW5jdGlvbihjcC8qOm51bWJlciovKSB7IGN1cnJlbnRfY29kZXBhZ2UgPSBjcDsgc2V0X2Fuc2koY3ApOyB9O1xuZnVuY3Rpb24gcmVzZXRfY3AoKSB7IHNldF9jcCgxMjAwKTsgcmVzZXRfYW5zaSgpOyB9XG5cbmZ1bmN0aW9uIGNoYXJfY29kZXMoZGF0YS8qOnN0cmluZyovKS8qOkFycmF5PG51bWJlcj4qLyB7IHZhciBvLyo6QXJyYXk8bnVtYmVyPiovID0gW107IGZvcih2YXIgaSA9IDAsIGxlbiA9IGRhdGEubGVuZ3RoOyBpIDwgbGVuOyArK2kpIG9baV0gPSBkYXRhLmNoYXJDb2RlQXQoaSk7IHJldHVybiBvOyB9XG5cbmZ1bmN0aW9uIHV0ZjE2bGVyZWFkKGRhdGEvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdGZvcih2YXIgaSA9IDA7IGkgPCAoZGF0YS5sZW5ndGg+PjEpOyArK2kpIG9baV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGEuY2hhckNvZGVBdCgyKmkpICsgKGRhdGEuY2hhckNvZGVBdCgyKmkrMSk8PDgpKTtcblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIHV0ZjE2YmVyZWFkKGRhdGEvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdGZvcih2YXIgaSA9IDA7IGkgPCAoZGF0YS5sZW5ndGg+PjEpOyArK2kpIG9baV0gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGRhdGEuY2hhckNvZGVBdCgyKmkrMSkgKyAoZGF0YS5jaGFyQ29kZUF0KDIqaSk8PDgpKTtcblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cblxudmFyIGRlYm9tID0gZnVuY3Rpb24oZGF0YS8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0dmFyIGMxID0gZGF0YS5jaGFyQ29kZUF0KDApLCBjMiA9IGRhdGEuY2hhckNvZGVBdCgxKTtcblx0aWYoYzEgPT0gMHhGRiAmJiBjMiA9PSAweEZFKSByZXR1cm4gdXRmMTZsZXJlYWQoZGF0YS5zbGljZSgyKSk7XG5cdGlmKGMxID09IDB4RkUgJiYgYzIgPT0gMHhGRikgcmV0dXJuIHV0ZjE2YmVyZWFkKGRhdGEuc2xpY2UoMikpO1xuXHRpZihjMSA9PSAweEZFRkYpIHJldHVybiBkYXRhLnNsaWNlKDEpO1xuXHRyZXR1cm4gZGF0YTtcbn07XG5cbnZhciBfZ2V0Y2hhciA9IGZ1bmN0aW9uIF9nYzEoeC8qOm51bWJlciovKS8qOnN0cmluZyovIHsgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoeCk7IH07XG52YXIgX2dldGFuc2kgPSBmdW5jdGlvbiBfZ2ExKHgvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHgpOyB9O1xuXG52YXIgJGNwdGFibGU7XG5mdW5jdGlvbiBzZXRfY3B0YWJsZShjcHRhYmxlKSB7XG5cdCRjcHRhYmxlID0gY3B0YWJsZTtcblx0c2V0X2NwID0gZnVuY3Rpb24oY3AvKjpudW1iZXIqLykgeyBjdXJyZW50X2NvZGVwYWdlID0gY3A7IHNldF9hbnNpKGNwKTsgfTtcblx0ZGVib20gPSBmdW5jdGlvbihkYXRhLyo6c3RyaW5nKi8pIHtcblx0XHRpZihkYXRhLmNoYXJDb2RlQXQoMCkgPT09IDB4RkYgJiYgZGF0YS5jaGFyQ29kZUF0KDEpID09PSAweEZFKSB7IHJldHVybiAkY3B0YWJsZS51dGlscy5kZWNvZGUoMTIwMCwgY2hhcl9jb2RlcyhkYXRhLnNsaWNlKDIpKSk7IH1cblx0XHRyZXR1cm4gZGF0YTtcblx0fTtcblx0X2dldGNoYXIgPSBmdW5jdGlvbiBfZ2MyKHgvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7XG5cdFx0aWYoY3VycmVudF9jb2RlcGFnZSA9PT0gMTIwMCkgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoeCk7XG5cdFx0cmV0dXJuICRjcHRhYmxlLnV0aWxzLmRlY29kZShjdXJyZW50X2NvZGVwYWdlLCBbeCYyNTUseD4+OF0pWzBdO1xuXHR9O1xuXHRfZ2V0YW5zaSA9IGZ1bmN0aW9uIF9nYTIoeC8qOm51bWJlciovKS8qOnN0cmluZyovIHtcblx0XHRyZXR1cm4gJGNwdGFibGUudXRpbHMuZGVjb2RlKGN1cnJlbnRfYW5zaSwgW3hdKVswXTtcblx0fTtcblx0Y3Bkb2l0KCk7XG59XG5leHBvcnQgeyBzZXRfY3B0YWJsZSB9O1xudmFyIERFTlNFID0gbnVsbDtcbnZhciBESUZfWEwgPSB0cnVlO1xudmFyIEJhc2U2NF9tYXAgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5Ky89XCI7XG5mdW5jdGlvbiBCYXNlNjRfZW5jb2RlKGlucHV0KSB7XG4gIHZhciBvID0gXCJcIjtcbiAgdmFyIGMxID0gMCwgYzIgPSAwLCBjMyA9IDAsIGUxID0gMCwgZTIgPSAwLCBlMyA9IDAsIGU0ID0gMDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7ICkge1xuICAgIGMxID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuICAgIGUxID0gYzEgPj4gMjtcbiAgICBjMiA9IGlucHV0LmNoYXJDb2RlQXQoaSsrKTtcbiAgICBlMiA9IChjMSAmIDMpIDw8IDQgfCBjMiA+PiA0O1xuICAgIGMzID0gaW5wdXQuY2hhckNvZGVBdChpKyspO1xuICAgIGUzID0gKGMyICYgMTUpIDw8IDIgfCBjMyA+PiA2O1xuICAgIGU0ID0gYzMgJiA2MztcbiAgICBpZiAoaXNOYU4oYzIpKSB7XG4gICAgICBlMyA9IGU0ID0gNjQ7XG4gICAgfSBlbHNlIGlmIChpc05hTihjMykpIHtcbiAgICAgIGU0ID0gNjQ7XG4gICAgfVxuICAgIG8gKz0gQmFzZTY0X21hcC5jaGFyQXQoZTEpICsgQmFzZTY0X21hcC5jaGFyQXQoZTIpICsgQmFzZTY0X21hcC5jaGFyQXQoZTMpICsgQmFzZTY0X21hcC5jaGFyQXQoZTQpO1xuICB9XG4gIHJldHVybiBvO1xufVxuZnVuY3Rpb24gQmFzZTY0X2RlY29kZShpbnB1dCkge1xuICB2YXIgbyA9IFwiXCI7XG4gIHZhciBjMSA9IDAsIGMyID0gMCwgYzMgPSAwLCBlMSA9IDAsIGUyID0gMCwgZTMgPSAwLCBlNCA9IDA7XG4gIGlucHV0ID0gaW5wdXQucmVwbGFjZSgvW15cXHdcXCtcXC9cXD1dL2csIFwiXCIpO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgKSB7XG4gICAgZTEgPSBCYXNlNjRfbWFwLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuICAgIGUyID0gQmFzZTY0X21hcC5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcbiAgICBjMSA9IGUxIDw8IDIgfCBlMiA+PiA0O1xuICAgIG8gKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjMSk7XG4gICAgZTMgPSBCYXNlNjRfbWFwLmluZGV4T2YoaW5wdXQuY2hhckF0KGkrKykpO1xuICAgIGMyID0gKGUyICYgMTUpIDw8IDQgfCBlMyA+PiAyO1xuICAgIGlmIChlMyAhPT0gNjQpIHtcbiAgICAgIG8gKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjMik7XG4gICAgfVxuICAgIGU0ID0gQmFzZTY0X21hcC5pbmRleE9mKGlucHV0LmNoYXJBdChpKyspKTtcbiAgICBjMyA9IChlMyAmIDMpIDw8IDYgfCBlNDtcbiAgICBpZiAoZTQgIT09IDY0KSB7XG4gICAgICBvICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYzMpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbztcbn1cbnZhciBoYXNfYnVmID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpIHsgcmV0dXJuIHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucyAhPT0gJ3VuZGVmaW5lZCcgJiYgISFwcm9jZXNzLnZlcnNpb25zLm5vZGU7IH0pKCk7XG5cbnZhciBCdWZmZXJfZnJvbSA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdGlmKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0dmFyIG5iZnMgPSAhQnVmZmVyLmZyb207XG5cdFx0aWYoIW5iZnMpIHRyeSB7IEJ1ZmZlci5mcm9tKFwiZm9vXCIsIFwidXRmOFwiKTsgfSBjYXRjaChlKSB7IG5iZnMgPSB0cnVlOyB9XG5cdFx0cmV0dXJuIG5iZnMgPyBmdW5jdGlvbihidWYsIGVuYykgeyByZXR1cm4gKGVuYykgPyBuZXcgQnVmZmVyKGJ1ZiwgZW5jKSA6IG5ldyBCdWZmZXIoYnVmKTsgfSA6IEJ1ZmZlci5mcm9tLmJpbmQoQnVmZmVyKTtcblx0fVxuXHRyZXR1cm4gZnVuY3Rpb24oKSB7fTtcbn0pKCk7XG5cblxuZnVuY3Rpb24gbmV3X3Jhd19idWYobGVuLyo6bnVtYmVyKi8pIHtcblx0LyoganNoaW50IC1XMDU2ICovXG5cdGlmKGhhc19idWYpIHJldHVybiBCdWZmZXIuYWxsb2MgPyBCdWZmZXIuYWxsb2MobGVuKSA6IG5ldyBCdWZmZXIobGVuKTtcblx0cmV0dXJuIHR5cGVvZiBVaW50OEFycmF5ICE9IFwidW5kZWZpbmVkXCIgPyBuZXcgVWludDhBcnJheShsZW4pIDogbmV3IEFycmF5KGxlbik7XG5cdC8qIGpzaGludCArVzA1NiAqL1xufVxuXG5mdW5jdGlvbiBuZXdfdW5zYWZlX2J1ZihsZW4vKjpudW1iZXIqLykge1xuXHQvKiBqc2hpbnQgLVcwNTYgKi9cblx0aWYoaGFzX2J1ZikgcmV0dXJuIEJ1ZmZlci5hbGxvY1Vuc2FmZSA/IEJ1ZmZlci5hbGxvY1Vuc2FmZShsZW4pIDogbmV3IEJ1ZmZlcihsZW4pO1xuXHRyZXR1cm4gdHlwZW9mIFVpbnQ4QXJyYXkgIT0gXCJ1bmRlZmluZWRcIiA/IG5ldyBVaW50OEFycmF5KGxlbikgOiBuZXcgQXJyYXkobGVuKTtcblx0LyoganNoaW50ICtXMDU2ICovXG59XG5cbnZhciBzMmEgPSBmdW5jdGlvbiBzMmEocy8qOnN0cmluZyovKS8qOmFueSovIHtcblx0aWYoaGFzX2J1ZikgcmV0dXJuIEJ1ZmZlcl9mcm9tKHMsIFwiYmluYXJ5XCIpO1xuXHRyZXR1cm4gcy5zcGxpdChcIlwiKS5tYXAoZnVuY3Rpb24oeC8qOnN0cmluZyovKS8qOm51bWJlcioveyByZXR1cm4geC5jaGFyQ29kZUF0KDApICYgMHhmZjsgfSk7XG59O1xuXG5mdW5jdGlvbiBzMmFiKHMvKjpzdHJpbmcqLykvKjphbnkqLyB7XG5cdGlmKHR5cGVvZiBBcnJheUJ1ZmZlciA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybiBzMmEocyk7XG5cdHZhciBidWYgPSBuZXcgQXJyYXlCdWZmZXIocy5sZW5ndGgpLCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmKTtcblx0Zm9yICh2YXIgaT0wOyBpIT1zLmxlbmd0aDsgKytpKSB2aWV3W2ldID0gcy5jaGFyQ29kZUF0KGkpICYgMHhGRjtcblx0cmV0dXJuIGJ1Zjtcbn1cblxuZnVuY3Rpb24gYTJzKGRhdGEvKjphbnkqLykvKjpzdHJpbmcqLyB7XG5cdGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHJldHVybiBkYXRhLm1hcChmdW5jdGlvbihjKSB7IHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpOyB9KS5qb2luKFwiXCIpO1xuXHR2YXIgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdOyBmb3IodmFyIGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgb1tpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZGF0YVtpXSk7IHJldHVybiBvLmpvaW4oXCJcIik7XG59XG5cbmZ1bmN0aW9uIGEydShkYXRhLyo6QXJyYXk8bnVtYmVyPiovKS8qOlVpbnQ4QXJyYXkqLyB7XG5cdGlmKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJykgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWRcIik7XG5cdHJldHVybiBuZXcgVWludDhBcnJheShkYXRhKTtcbn1cblxuZnVuY3Rpb24gYWIyYShkYXRhLyo6QXJyYXlCdWZmZXJ8VWludDhBcnJheSovKS8qOkFycmF5PG51bWJlcj4qLyB7XG5cdGlmKHR5cGVvZiBBcnJheUJ1ZmZlciA9PSAndW5kZWZpbmVkJykgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWRcIik7XG5cdGlmKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgcmV0dXJuIGFiMmEobmV3IFVpbnQ4QXJyYXkoZGF0YSkpO1xuXHQvKjo6IGlmKGRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgdGhyb3cgbmV3IEVycm9yKFwidW5yZWFjaGFibGVcIik7ICovXG5cdHZhciBvID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIG9baV0gPSBkYXRhW2ldO1xuXHRyZXR1cm4gbztcbn1cblxudmFyIGJjb25jYXQgPSBoYXNfYnVmID8gZnVuY3Rpb24oYnVmcykgeyByZXR1cm4gQnVmZmVyLmNvbmNhdChidWZzLm1hcChmdW5jdGlvbihidWYpIHsgcmV0dXJuIEJ1ZmZlci5pc0J1ZmZlcihidWYpID8gYnVmIDogQnVmZmVyX2Zyb20oYnVmKTsgfSkpOyB9IDogZnVuY3Rpb24oYnVmcykge1xuXHRpZih0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdHZhciBpID0gMCwgbWF4bGVuID0gMDtcblx0XHRmb3IoaSA9IDA7IGkgPCBidWZzLmxlbmd0aDsgKytpKSBtYXhsZW4gKz0gYnVmc1tpXS5sZW5ndGg7XG5cdFx0dmFyIG8gPSBuZXcgVWludDhBcnJheShtYXhsZW4pO1xuXHRcdHZhciBsZW4gPSAwO1xuXHRcdGZvcihpID0gMCwgbWF4bGVuID0gMDsgaSA8IGJ1ZnMubGVuZ3RoOyBtYXhsZW4gKz0gbGVuLCArK2kpIHtcblx0XHRcdGxlbiA9IGJ1ZnNbaV0ubGVuZ3RoO1xuXHRcdFx0aWYoYnVmc1tpXSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpIG8uc2V0KGJ1ZnNbaV0sIG1heGxlbik7XG5cdFx0XHRlbHNlIGlmKHR5cGVvZiBidWZzW2ldID09IFwic3RyaW5nXCIpIHsgdGhyb3cgXCJ3dGZcIjsgfVxuXHRcdFx0ZWxzZSBvLnNldChuZXcgVWludDhBcnJheShidWZzW2ldKSwgbWF4bGVuKTtcblx0XHR9XG5cdFx0cmV0dXJuIG87XG5cdH1cblx0cmV0dXJuIFtdLmNvbmNhdC5hcHBseShbXSwgYnVmcy5tYXAoZnVuY3Rpb24oYnVmKSB7IHJldHVybiBBcnJheS5pc0FycmF5KGJ1ZikgPyBidWYgOiBbXS5zbGljZS5jYWxsKGJ1Zik7IH0pKTtcbn07XG5cbmZ1bmN0aW9uIHV0ZjhkZWNvZGUoY29udGVudC8qOnN0cmluZyovKSB7XG5cdHZhciBvdXQgPSBbXSwgd2lkeCA9IDAsIEwgPSBjb250ZW50Lmxlbmd0aCArIDI1MDtcblx0dmFyIG8gPSBuZXdfcmF3X2J1Zihjb250ZW50Lmxlbmd0aCArIDI1NSk7XG5cdGZvcih2YXIgcmlkeCA9IDA7IHJpZHggPCBjb250ZW50Lmxlbmd0aDsgKytyaWR4KSB7XG5cdFx0dmFyIGMgPSBjb250ZW50LmNoYXJDb2RlQXQocmlkeCk7XG5cdFx0aWYoYyA8IDB4ODApIG9bd2lkeCsrXSA9IGM7XG5cdFx0ZWxzZSBpZihjIDwgMHg4MDApIHtcblx0XHRcdG9bd2lkeCsrXSA9ICgxOTJ8KChjPj42KSYzMSkpO1xuXHRcdFx0b1t3aWR4KytdID0gKDEyOHwoYyY2MykpO1xuXHRcdH0gZWxzZSBpZihjID49IDB4RDgwMCAmJiBjIDwgMHhFMDAwKSB7XG5cdFx0XHRjID0gKGMmMTAyMykrNjQ7XG5cdFx0XHR2YXIgZCA9IGNvbnRlbnQuY2hhckNvZGVBdCgrK3JpZHgpJjEwMjM7XG5cdFx0XHRvW3dpZHgrK10gPSAoMjQwfCgoYz4+OCkmNykpO1xuXHRcdFx0b1t3aWR4KytdID0gKDEyOHwoKGM+PjIpJjYzKSk7XG5cdFx0XHRvW3dpZHgrK10gPSAoMTI4fCgoZD4+NikmMTUpfCgoYyYzKTw8NCkpO1xuXHRcdFx0b1t3aWR4KytdID0gKDEyOHwoZCY2MykpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRvW3dpZHgrK10gPSAoMjI0fCgoYz4+MTIpJjE1KSk7XG5cdFx0XHRvW3dpZHgrK10gPSAoMTI4fCgoYz4+NikmNjMpKTtcblx0XHRcdG9bd2lkeCsrXSA9ICgxMjh8KGMmNjMpKTtcblx0XHR9XG5cdFx0aWYod2lkeCA+IEwpIHtcblx0XHRcdG91dC5wdXNoKG8uc2xpY2UoMCwgd2lkeCkpO1xuXHRcdFx0d2lkeCA9IDA7XG5cdFx0XHRvID0gbmV3X3Jhd19idWYoNjU1MzUpO1xuXHRcdFx0TCA9IDY1NTMwO1xuXHRcdH1cblx0fVxuXHRvdXQucHVzaChvLnNsaWNlKDAsIHdpZHgpKTtcblx0cmV0dXJuIGJjb25jYXQob3V0KTtcbn1cblxudmFyIGNocjAgPSAvXFx1MDAwMC9nLCBjaHIxID0gL1tcXHUwMDAxLVxcdTAwMDZdL2c7XG4vKjo6XG5kZWNsYXJlIHR5cGUgQmxvY2sgPSBhbnk7XG5kZWNsYXJlIHR5cGUgQnVmQXJyYXkgPSB7XG5cdG5ld2JsayhzejpudW1iZXIpOkJsb2NrO1xuXHRuZXh0KHN6Om51bWJlcik6QmxvY2s7XG5cdGVuZCgpOmFueTtcblx0cHVzaChidWY6QmxvY2spOnZvaWQ7XG59O1xuXG50eXBlIFJlY29yZEhvcHBlckNCID0geyhkOmFueSwgUm46c3RyaW5nLCBSVDpudW1iZXIpOj9ib29sZWFuO307XG5cbnR5cGUgRXZlcnRUeXBlID0ge1tzdHJpbmddOnN0cmluZ307XG50eXBlIEV2ZXJ0TnVtVHlwZSA9IHtbc3RyaW5nXTpudW1iZXJ9O1xudHlwZSBFdmVydEFyclR5cGUgPSB7W3N0cmluZ106QXJyYXk8c3RyaW5nPn07XG5cbnR5cGUgU3RyaW5nQ29udiA9IHsoc3RyaW5nKTpzdHJpbmd9O1xuXG4qL1xuLyogc3NmLmpzIChDKSAyMDEzLXByZXNlbnQgU2hlZXRKUyAtLSBodHRwOi8vc2hlZXRqcy5jb20gKi9cbi8qanNoaW50IC1XMDQxICovXG5mdW5jdGlvbiBfc3RycmV2KHgvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7IHZhciBvID0gXCJcIiwgaSA9IHgubGVuZ3RoLTE7IHdoaWxlKGk+PTApIG8gKz0geC5jaGFyQXQoaS0tKTsgcmV0dXJuIG87IH1cbmZ1bmN0aW9uIHBhZDAodi8qOmFueSovLGQvKjpudW1iZXIqLykvKjpzdHJpbmcqL3t2YXIgdD1cIlwiK3Y7IHJldHVybiB0Lmxlbmd0aD49ZD90OmZpbGwoJzAnLGQtdC5sZW5ndGgpK3Q7fVxuZnVuY3Rpb24gcGFkXyh2Lyo6YW55Ki8sZC8qOm51bWJlciovKS8qOnN0cmluZyove3ZhciB0PVwiXCIrdjtyZXR1cm4gdC5sZW5ndGg+PWQ/dDpmaWxsKCcgJyxkLXQubGVuZ3RoKSt0O31cbmZ1bmN0aW9uIHJwYWRfKHYvKjphbnkqLyxkLyo6bnVtYmVyKi8pLyo6c3RyaW5nKi97dmFyIHQ9XCJcIit2OyByZXR1cm4gdC5sZW5ndGg+PWQ/dDp0K2ZpbGwoJyAnLGQtdC5sZW5ndGgpO31cbmZ1bmN0aW9uIHBhZDByMSh2Lyo6YW55Ki8sZC8qOm51bWJlciovKS8qOnN0cmluZyove3ZhciB0PVwiXCIrTWF0aC5yb3VuZCh2KTsgcmV0dXJuIHQubGVuZ3RoPj1kP3Q6ZmlsbCgnMCcsZC10Lmxlbmd0aCkrdDt9XG5mdW5jdGlvbiBwYWQwcjIodi8qOmFueSovLGQvKjpudW1iZXIqLykvKjpzdHJpbmcqL3t2YXIgdD1cIlwiK3Y7IHJldHVybiB0Lmxlbmd0aD49ZD90OmZpbGwoJzAnLGQtdC5sZW5ndGgpK3Q7fVxudmFyIHAyXzMyID0gLyojX19QVVJFX18qL01hdGgucG93KDIsMzIpO1xuZnVuY3Rpb24gcGFkMHIodi8qOmFueSovLGQvKjpudW1iZXIqLykvKjpzdHJpbmcqL3tpZih2PnAyXzMyfHx2PC1wMl8zMikgcmV0dXJuIHBhZDByMSh2LGQpOyB2YXIgaSA9IE1hdGgucm91bmQodik7IHJldHVybiBwYWQwcjIoaSxkKTsgfVxuLyogeWVzLCBpbiAyMDIyIHRoaXMgaXMgc3RpbGwgZmFzdGVyIHRoYW4gc3RyaW5nIGNvbXBhcmUgKi9cbmZ1bmN0aW9uIFNTRl9pc2dlbmVyYWwocy8qOnN0cmluZyovLCBpLyo6P251bWJlciovKS8qOmJvb2xlYW4qLyB7IGkgPSBpIHx8IDA7IHJldHVybiBzLmxlbmd0aCA+PSA3ICsgaSAmJiAocy5jaGFyQ29kZUF0KGkpfDMyKSA9PT0gMTAzICYmIChzLmNoYXJDb2RlQXQoaSsxKXwzMikgPT09IDEwMSAmJiAocy5jaGFyQ29kZUF0KGkrMil8MzIpID09PSAxMTAgJiYgKHMuY2hhckNvZGVBdChpKzMpfDMyKSA9PT0gMTAxICYmIChzLmNoYXJDb2RlQXQoaSs0KXwzMikgPT09IDExNCAmJiAocy5jaGFyQ29kZUF0KGkrNSl8MzIpID09PSA5NyAmJiAocy5jaGFyQ29kZUF0KGkrNil8MzIpID09PSAxMDg7IH1cbnZhciBkYXlzLyo6QXJyYXk8QXJyYXk8c3RyaW5nPiA+Ki8gPSBbXG5cdFsnU3VuJywgJ1N1bmRheSddLFxuXHRbJ01vbicsICdNb25kYXknXSxcblx0WydUdWUnLCAnVHVlc2RheSddLFxuXHRbJ1dlZCcsICdXZWRuZXNkYXknXSxcblx0WydUaHUnLCAnVGh1cnNkYXknXSxcblx0WydGcmknLCAnRnJpZGF5J10sXG5cdFsnU2F0JywgJ1NhdHVyZGF5J11cbl07XG52YXIgbW9udGhzLyo6QXJyYXk8QXJyYXk8c3RyaW5nPiA+Ki8gPSBbXG5cdFsnSicsICdKYW4nLCAnSmFudWFyeSddLFxuXHRbJ0YnLCAnRmViJywgJ0ZlYnJ1YXJ5J10sXG5cdFsnTScsICdNYXInLCAnTWFyY2gnXSxcblx0WydBJywgJ0FwcicsICdBcHJpbCddLFxuXHRbJ00nLCAnTWF5JywgJ01heSddLFxuXHRbJ0onLCAnSnVuJywgJ0p1bmUnXSxcblx0WydKJywgJ0p1bCcsICdKdWx5J10sXG5cdFsnQScsICdBdWcnLCAnQXVndXN0J10sXG5cdFsnUycsICdTZXAnLCAnU2VwdGVtYmVyJ10sXG5cdFsnTycsICdPY3QnLCAnT2N0b2JlciddLFxuXHRbJ04nLCAnTm92JywgJ05vdmVtYmVyJ10sXG5cdFsnRCcsICdEZWMnLCAnRGVjZW1iZXInXVxuXTtcbmZ1bmN0aW9uIFNTRl9pbml0X3RhYmxlKHQvKjphbnkqLykge1xuXHRpZighdCkgdCA9IHt9O1xuXHR0WzBdPSAgJ0dlbmVyYWwnO1xuXHR0WzFdPSAgJzAnO1xuXHR0WzJdPSAgJzAuMDAnO1xuXHR0WzNdPSAgJyMsIyMwJztcblx0dFs0XT0gICcjLCMjMC4wMCc7XG5cdHRbOV09ICAnMCUnO1xuXHR0WzEwXT0gJzAuMDAlJztcblx0dFsxMV09ICcwLjAwRSswMCc7XG5cdHRbMTJdPSAnIyA/Lz8nO1xuXHR0WzEzXT0gJyMgPz8vPz8nO1xuXHR0WzE0XT0gJ20vZC95eSc7XG5cdHRbMTVdPSAnZC1tbW0teXknO1xuXHR0WzE2XT0gJ2QtbW1tJztcblx0dFsxN109ICdtbW0teXknO1xuXHR0WzE4XT0gJ2g6bW0gQU0vUE0nO1xuXHR0WzE5XT0gJ2g6bW06c3MgQU0vUE0nO1xuXHR0WzIwXT0gJ2g6bW0nO1xuXHR0WzIxXT0gJ2g6bW06c3MnO1xuXHR0WzIyXT0gJ20vZC95eSBoOm1tJztcblx0dFszN109ICcjLCMjMCA7KCMsIyMwKSc7XG5cdHRbMzhdPSAnIywjIzAgO1tSZWRdKCMsIyMwKSc7XG5cdHRbMzldPSAnIywjIzAuMDA7KCMsIyMwLjAwKSc7XG5cdHRbNDBdPSAnIywjIzAuMDA7W1JlZF0oIywjIzAuMDApJztcblx0dFs0NV09ICdtbTpzcyc7XG5cdHRbNDZdPSAnW2hdOm1tOnNzJztcblx0dFs0N109ICdtbXNzLjAnO1xuXHR0WzQ4XT0gJyMjMC4wRSswJztcblx0dFs0OV09ICdAJztcblx0dFs1Nl09ICdcIuS4iuWNiC/kuIvljYggXCJoaFwi5pmCXCJtbVwi5YiGXCJzc1wi56eSIFwiJztcblx0cmV0dXJuIHQ7XG59XG4vKiByZXBlYXRlZCB0byBzYXRpYXRlIHdlYnBhY2sgKi9cbnZhciB0YWJsZV9mbXQgPSB7XG5cdDA6ICAnR2VuZXJhbCcsXG5cdDE6ICAnMCcsXG5cdDI6ICAnMC4wMCcsXG5cdDM6ICAnIywjIzAnLFxuXHQ0OiAgJyMsIyMwLjAwJyxcblx0OTogICcwJScsXG5cdDEwOiAnMC4wMCUnLFxuXHQxMTogJzAuMDBFKzAwJyxcblx0MTI6ICcjID8vPycsXG5cdDEzOiAnIyA/Py8/PycsXG5cdDE0OiAnbS9kL3l5Jyxcblx0MTU6ICdkLW1tbS15eScsXG5cdDE2OiAnZC1tbW0nLFxuXHQxNzogJ21tbS15eScsXG5cdDE4OiAnaDptbSBBTS9QTScsXG5cdDE5OiAnaDptbTpzcyBBTS9QTScsXG5cdDIwOiAnaDptbScsXG5cdDIxOiAnaDptbTpzcycsXG5cdDIyOiAnbS9kL3l5IGg6bW0nLFxuXHQzNzogJyMsIyMwIDsoIywjIzApJyxcblx0Mzg6ICcjLCMjMCA7W1JlZF0oIywjIzApJyxcblx0Mzk6ICcjLCMjMC4wMDsoIywjIzAuMDApJyxcblx0NDA6ICcjLCMjMC4wMDtbUmVkXSgjLCMjMC4wMCknLFxuXHQ0NTogJ21tOnNzJyxcblx0NDY6ICdbaF06bW06c3MnLFxuXHQ0NzogJ21tc3MuMCcsXG5cdDQ4OiAnIyMwLjBFKzAnLFxuXHQ0OTogJ0AnLFxuXHQ1NjogJ1wi5LiK5Y2IL+S4i+WNiCBcImhoXCLmmYJcIm1tXCLliIZcInNzXCLnp5IgXCInXG59O1xuXG4vKiBEZWZhdWx0cyBkZXRlcm1pbmVkIGJ5IHN5c3RlbWF0aWNhbGx5IHRlc3RpbmcgaW4gRXhjZWwgMjAxOSAqL1xuXG4vKiBUaGVzZSBmb3JtYXRzIGFwcGVhciB0byBkZWZhdWx0IHRvIG90aGVyIGZvcm1hdHMgaW4gdGhlIHRhYmxlICovXG52YXIgU1NGX2RlZmF1bHRfbWFwID0ge1xuXHQ1OiAgMzcsIDY6ICAzOCwgNzogIDM5LCA4OiAgNDAsICAgICAgICAgLy8gIDUgLT4gMzcgLi4uICA4IC0+IDQwXG5cblx0MjM6ICAwLCAyNDogIDAsIDI1OiAgMCwgMjY6ICAwLCAgICAgICAgIC8vIDIzIC0+ICAwIC4uLiAyNiAtPiAgMFxuXG5cdDI3OiAxNCwgMjg6IDE0LCAyOTogMTQsIDMwOiAxNCwgMzE6IDE0LCAvLyAyNyAtPiAxNCAuLi4gMzEgLT4gMTRcblxuXHQ1MDogMTQsIDUxOiAxNCwgNTI6IDE0LCA1MzogMTQsIDU0OiAxNCwgLy8gNTAgLT4gMTQgLi4uIDU4IC0+IDE0XG5cdDU1OiAxNCwgNTY6IDE0LCA1NzogMTQsIDU4OiAxNCxcblx0NTk6ICAxLCA2MDogIDIsIDYxOiAgMywgNjI6ICA0LCAgICAgICAgIC8vIDU5IC0+ICAxIC4uLiA2MiAtPiAgNFxuXG5cdDY3OiAgOSwgNjg6IDEwLCAgICAgICAgICAgICAgICAgICAgICAgICAvLyA2NyAtPiAgOSAuLi4gNjggLT4gMTBcblx0Njk6IDEyLCA3MDogMTMsIDcxOiAxNCwgICAgICAgICAgICAgICAgIC8vIDY5IC0+IDEyIC4uLiA3MSAtPiAxNFxuXHQ3MjogMTQsIDczOiAxNSwgNzQ6IDE2LCA3NTogMTcsICAgICAgICAgLy8gNzIgLT4gMTQgLi4uIDc1IC0+IDE3XG5cdDc2OiAyMCwgNzc6IDIxLCA3ODogMjIsICAgICAgICAgICAgICAgICAvLyA3NiAtPiAyMCAuLi4gNzggLT4gMjJcblx0Nzk6IDQ1LCA4MDogNDYsIDgxOiA0NywgICAgICAgICAgICAgICAgIC8vIDc5IC0+IDQ1IC4uLiA4MSAtPiA0N1xuXHQ4MjogMCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gODIgLT4gIDAgLi4uIDY1NTM2IC0+IDAgKG9taXR0ZWQpXG59O1xuXG5cbi8qIFRoZXNlIGZvcm1hdHMgdGVjaG5pY2FsbHkgcmVmZXIgdG8gQWNjb3VudGluZyBmb3JtYXRzIHdpdGggbm8gZXF1aXZhbGVudCAqL1xudmFyIFNTRl9kZWZhdWx0X3N0ciA9IHtcblx0Ly8gIDUgLS0gQ3VycmVuY3ksICAgMCBkZWNpbWFsLCBibGFjayBuZWdhdGl2ZVxuXHQ1OiAgJ1wiJFwiIywjIzBfKTtcXFxcKFwiJFwiIywjIzBcXFxcKScsXG5cdDYzOiAnXCIkXCIjLCMjMF8pO1xcXFwoXCIkXCIjLCMjMFxcXFwpJyxcblxuXHQvLyAgNiAtLSBDdXJyZW5jeSwgICAwIGRlY2ltYWwsIHJlZCAgIG5lZ2F0aXZlXG5cdDY6ICAnXCIkXCIjLCMjMF8pO1tSZWRdXFxcXChcIiRcIiMsIyMwXFxcXCknLFxuXHQ2NDogJ1wiJFwiIywjIzBfKTtbUmVkXVxcXFwoXCIkXCIjLCMjMFxcXFwpJyxcblxuXHQvLyAgNyAtLSBDdXJyZW5jeSwgICAyIGRlY2ltYWwsIGJsYWNrIG5lZ2F0aXZlXG5cdDc6ICAnXCIkXCIjLCMjMC4wMF8pO1xcXFwoXCIkXCIjLCMjMC4wMFxcXFwpJyxcblx0NjU6ICdcIiRcIiMsIyMwLjAwXyk7XFxcXChcIiRcIiMsIyMwLjAwXFxcXCknLFxuXG5cdC8vICA4IC0tIEN1cnJlbmN5LCAgIDIgZGVjaW1hbCwgcmVkICAgbmVnYXRpdmVcblx0ODogICdcIiRcIiMsIyMwLjAwXyk7W1JlZF1cXFxcKFwiJFwiIywjIzAuMDBcXFxcKScsXG5cdDY2OiAnXCIkXCIjLCMjMC4wMF8pO1tSZWRdXFxcXChcIiRcIiMsIyMwLjAwXFxcXCknLFxuXG5cdC8vIDQxIC0tIEFjY291bnRpbmcsIDAgZGVjaW1hbCwgTm8gU3ltYm9sXG5cdDQxOiAnXygqICMsIyMwXyk7XygqIFxcXFwoIywjIzBcXFxcKTtfKCogXCItXCJfKTtfKEBfKScsXG5cblx0Ly8gNDIgLS0gQWNjb3VudGluZywgMCBkZWNpbWFsLCAkICBTeW1ib2xcblx0NDI6ICdfKFwiJFwiKiAjLCMjMF8pO18oXCIkXCIqIFxcXFwoIywjIzBcXFxcKTtfKFwiJFwiKiBcIi1cIl8pO18oQF8pJyxcblxuXHQvLyA0MyAtLSBBY2NvdW50aW5nLCAyIGRlY2ltYWwsIE5vIFN5bWJvbFxuXHQ0MzogJ18oKiAjLCMjMC4wMF8pO18oKiBcXFxcKCMsIyMwLjAwXFxcXCk7XygqIFwiLVwiPz9fKTtfKEBfKScsXG5cblx0Ly8gNDQgLS0gQWNjb3VudGluZywgMiBkZWNpbWFsLCAkICBTeW1ib2xcblx0NDQ6ICdfKFwiJFwiKiAjLCMjMC4wMF8pO18oXCIkXCIqIFxcXFwoIywjIzAuMDBcXFxcKTtfKFwiJFwiKiBcIi1cIj8/Xyk7XyhAXyknXG59O1xuXG5mdW5jdGlvbiBTU0ZfZnJhYyh4Lyo6bnVtYmVyKi8sIEQvKjpudW1iZXIqLywgbWl4ZWQvKjo/Ym9vbGVhbiovKS8qOkFycmF5PG51bWJlcj4qLyB7XG5cdHZhciBzZ24gPSB4IDwgMCA/IC0xIDogMTtcblx0dmFyIEIgPSB4ICogc2duO1xuXHR2YXIgUF8yID0gMCwgUF8xID0gMSwgUCA9IDA7XG5cdHZhciBRXzIgPSAxLCBRXzEgPSAwLCBRID0gMDtcblx0dmFyIEEgPSBNYXRoLmZsb29yKEIpO1xuXHR3aGlsZShRXzEgPCBEKSB7XG5cdFx0QSA9IE1hdGguZmxvb3IoQik7XG5cdFx0UCA9IEEgKiBQXzEgKyBQXzI7XG5cdFx0USA9IEEgKiBRXzEgKyBRXzI7XG5cdFx0aWYoKEIgLSBBKSA8IDAuMDAwMDAwMDUpIGJyZWFrO1xuXHRcdEIgPSAxIC8gKEIgLSBBKTtcblx0XHRQXzIgPSBQXzE7IFBfMSA9IFA7XG5cdFx0UV8yID0gUV8xOyBRXzEgPSBRO1xuXHR9XG5cdGlmKFEgPiBEKSB7IGlmKFFfMSA+IEQpIHsgUSA9IFFfMjsgUCA9IFBfMjsgfSBlbHNlIHsgUSA9IFFfMTsgUCA9IFBfMTsgfSB9XG5cdGlmKCFtaXhlZCkgcmV0dXJuIFswLCBzZ24gKiBQLCBRXTtcblx0dmFyIHEgPSBNYXRoLmZsb29yKHNnbiAqIFAvUSk7XG5cdHJldHVybiBbcSwgc2duKlAgLSBxKlEsIFFdO1xufVxuZnVuY3Rpb24gU1NGX3BhcnNlX2RhdGVfY29kZSh2Lyo6bnVtYmVyKi8sb3B0cy8qOj9hbnkqLyxiMi8qOj9ib29sZWFuKi8pIHtcblx0aWYodiA+IDI5NTg0NjUgfHwgdiA8IDApIHJldHVybiBudWxsO1xuXHR2YXIgZGF0ZSA9ICh2fDApLCB0aW1lID0gTWF0aC5mbG9vcig4NjQwMCAqICh2IC0gZGF0ZSkpLCBkb3c9MDtcblx0dmFyIGRvdXQ9W107XG5cdHZhciBvdXQ9e0Q6ZGF0ZSwgVDp0aW1lLCB1Ojg2NDAwKih2LWRhdGUpLXRpbWUseTowLG06MCxkOjAsSDowLE06MCxTOjAscTowfTtcblx0aWYoTWF0aC5hYnMob3V0LnUpIDwgMWUtNikgb3V0LnUgPSAwO1xuXHRpZihvcHRzICYmIG9wdHMuZGF0ZTE5MDQpIGRhdGUgKz0gMTQ2Mjtcblx0aWYob3V0LnUgPiAwLjk5OTkpIHtcblx0XHRvdXQudSA9IDA7XG5cdFx0aWYoKyt0aW1lID09IDg2NDAwKSB7IG91dC5UID0gdGltZSA9IDA7ICsrZGF0ZTsgKytvdXQuRDsgfVxuXHR9XG5cdGlmKGRhdGUgPT09IDYwKSB7ZG91dCA9IGIyID8gWzEzMTcsMTAsMjldIDogWzE5MDAsMiwyOV07IGRvdz0zO31cblx0ZWxzZSBpZihkYXRlID09PSAwKSB7ZG91dCA9IGIyID8gWzEzMTcsOCwyOV0gOiBbMTkwMCwxLDBdOyBkb3c9Njt9XG5cdGVsc2Uge1xuXHRcdGlmKGRhdGUgPiA2MCkgLS1kYXRlO1xuXHRcdC8qIDEgPSBKYW4gMSAxOTAwIGluIEdyZWdvcmlhbiAqL1xuXHRcdHZhciBkID0gbmV3IERhdGUoMTkwMCwgMCwgMSk7XG5cdFx0ZC5zZXREYXRlKGQuZ2V0RGF0ZSgpICsgZGF0ZSAtIDEpO1xuXHRcdGRvdXQgPSBbZC5nZXRGdWxsWWVhcigpLCBkLmdldE1vbnRoKCkrMSxkLmdldERhdGUoKV07XG5cdFx0ZG93ID0gZC5nZXREYXkoKTtcblx0XHRpZihkYXRlIDwgNjApIGRvdyA9IChkb3cgKyA2KSAlIDc7XG5cdFx0aWYoYjIpIGRvdyA9IFNTRl9maXhfaGlqcmkoZCwgZG91dCk7XG5cdH1cblx0b3V0LnkgPSBkb3V0WzBdOyBvdXQubSA9IGRvdXRbMV07IG91dC5kID0gZG91dFsyXTtcblx0b3V0LlMgPSB0aW1lICUgNjA7IHRpbWUgPSBNYXRoLmZsb29yKHRpbWUgLyA2MCk7XG5cdG91dC5NID0gdGltZSAlIDYwOyB0aW1lID0gTWF0aC5mbG9vcih0aW1lIC8gNjApO1xuXHRvdXQuSCA9IHRpbWU7XG5cdG91dC5xID0gZG93O1xuXHRyZXR1cm4gb3V0O1xufVxudmFyIFNTRmJhc2VkYXRlID0gLyojX19QVVJFX18qL25ldyBEYXRlKDE4OTksIDExLCAzMSwgMCwgMCwgMCk7XG52YXIgU1NGZG50aHJlc2ggPSAvKiNfX1BVUkVfXyovU1NGYmFzZWRhdGUuZ2V0VGltZSgpO1xudmFyIFNTRmJhc2UxOTA0ID0gLyojX19QVVJFX18qL25ldyBEYXRlKDE5MDAsIDIsIDEsIDAsIDAsIDApO1xuZnVuY3Rpb24gZGF0ZW51bV9sb2NhbCh2Lyo6RGF0ZSovLCBkYXRlMTkwNC8qOj9ib29sZWFuKi8pLyo6bnVtYmVyKi8ge1xuXHR2YXIgZXBvY2ggPSAvKiNfX1BVUkVfXyovdi5nZXRUaW1lKCk7XG5cdGlmKGRhdGUxOTA0KSBlcG9jaCAtPSAxNDYxKjI0KjYwKjYwKjEwMDA7XG5cdGVsc2UgaWYodiA+PSBTU0ZiYXNlMTkwNCkgZXBvY2ggKz0gMjQqNjAqNjAqMTAwMDtcblx0cmV0dXJuIChlcG9jaCAtIChTU0ZkbnRocmVzaCArICgvKiNfX1BVUkVfXyovdi5nZXRUaW1lem9uZU9mZnNldCgpIC0gLyojX19QVVJFX18qL1NTRmJhc2VkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkpICogNjAwMDApKSAvICgyNCAqIDYwICogNjAgKiAxMDAwKTtcbn1cbi8qIEVDTUEtMzc2IDE4LjguMzAgbnVtRm10Ki9cbi8qIE5vdGU6IGB0b1ByZWNpc2lvbmAgdXNlcyBzdGFuZGFyZCBmb3JtIHdoZW4gcHJlYyA+IEUgYW5kIEUgPj0gLTYgKi9cbi8qIGV4cG9uZW50ID49IC05IGFuZCA8PSA5ICovXG5mdW5jdGlvbiBTU0Zfc3RyaXBfZGVjaW1hbChvLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRyZXR1cm4gKG8uaW5kZXhPZihcIi5cIikgPT0gLTEpID8gbyA6IG8ucmVwbGFjZSgvKD86XFwuMCp8KFxcLlxcZCpbMS05XSkwKykkLywgXCIkMVwiKTtcbn1cblxuLyogR2VuZXJhbCBFeHBvbmVudGlhbCBhbHdheXMgc2hvd3MgMiBkaWdpdHMgZXhwIGFuZCB0cmltcyB0aGUgbWFudGlzc2EgKi9cbmZ1bmN0aW9uIFNTRl9ub3JtYWxpemVfZXhwKG8vKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdGlmKG8uaW5kZXhPZihcIkVcIikgPT0gLTEpIHJldHVybiBvO1xuXHRyZXR1cm4gby5yZXBsYWNlKC8oPzpcXC4wKnwoXFwuXFxkKlsxLTldKTArKVtFZV0vLFwiJDFFXCIpLnJlcGxhY2UoLyhFWystXSkoXFxkKSQvLFwiJDEwJDJcIik7XG59XG5cbi8qIGV4cG9uZW50ID49IC05IGFuZCA8PSA5ICovXG5mdW5jdGlvbiBTU0Zfc21hbGxfZXhwKHYvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7XG5cdHZhciB3ID0gKHY8MD8xMjoxMSk7XG5cdHZhciBvID0gU1NGX3N0cmlwX2RlY2ltYWwodi50b0ZpeGVkKDEyKSk7IGlmKG8ubGVuZ3RoIDw9IHcpIHJldHVybiBvO1xuXHRvID0gdi50b1ByZWNpc2lvbigxMCk7IGlmKG8ubGVuZ3RoIDw9IHcpIHJldHVybiBvO1xuXHRyZXR1cm4gdi50b0V4cG9uZW50aWFsKDUpO1xufVxuXG4vKiBleHBvbmVudCA+PSAxMSBvciA8PSAtMTAgbGlrZWx5IGV4cG9uZW50aWFsICovXG5mdW5jdGlvbiBTU0ZfbGFyZ2VfZXhwKHYvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvID0gU1NGX3N0cmlwX2RlY2ltYWwodi50b0ZpeGVkKDExKSk7XG5cdHJldHVybiAoby5sZW5ndGggPiAodjwwPzEyOjExKSB8fCBvID09PSBcIjBcIiB8fCBvID09PSBcIi0wXCIpID8gdi50b1ByZWNpc2lvbig2KSA6IG87XG59XG5cbmZ1bmN0aW9uIFNTRl9nZW5lcmFsX251bSh2Lyo6bnVtYmVyKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgViA9IE1hdGguZmxvb3IoTWF0aC5sb2coTWF0aC5hYnModikpKk1hdGguTE9HMTBFKSwgbztcblxuXHRpZihWID49IC00ICYmIFYgPD0gLTEpIG8gPSB2LnRvUHJlY2lzaW9uKDEwK1YpO1xuXHRlbHNlIGlmKE1hdGguYWJzKFYpIDw9IDkpIG8gPSBTU0Zfc21hbGxfZXhwKHYpO1xuXHRlbHNlIGlmKFYgPT09IDEwKSBvID0gdi50b0ZpeGVkKDEwKS5zdWJzdHIoMCwxMik7XG5cdGVsc2UgbyA9IFNTRl9sYXJnZV9leHAodik7XG5cblx0cmV0dXJuIFNTRl9zdHJpcF9kZWNpbWFsKFNTRl9ub3JtYWxpemVfZXhwKG8udG9VcHBlckNhc2UoKSkpO1xufVxuXG5cbi8qXG5cdFwiR2VuZXJhbFwiIHJ1bGVzOlxuXHQtIHRleHQgaXMgcGFzc2VkIHRocm91Z2ggKFwiQFwiKVxuXHQtIGJvb2xlYW5zIGFyZSByZW5kZXJlZCBhcyBUUlVFL0ZBTFNFXG5cdC0gXCJ1cCB0byAxMSBjaGFyYWN0ZXJzXCIgZGlzcGxheWVkIGZvciBudW1iZXJzXG5cdC0gRGVmYXVsdCBkYXRlIGZvcm1hdCAoY29kZSAxNCkgdXNlZCBmb3IgRGF0ZXNcblxuXHRUaGUgbG9uZ2VzdCAzMi1iaXQgaW50ZWdlciB0ZXh0IGlzIFwiLTIxNDc0ODM2NDhcIiwgZXhhY3RseSAxMSBjaGFyc1xuXHRUT0RPOiB0ZWNobmljYWxseSB0aGUgZGlzcGxheSBkZXBlbmRzIG9uIHRoZSB3aWR0aCBvZiB0aGUgY2VsbFxuKi9cbmZ1bmN0aW9uIFNTRl9nZW5lcmFsKHYvKjphbnkqLywgb3B0cy8qOmFueSovKSB7XG5cdHN3aXRjaCh0eXBlb2Ygdikge1xuXHRcdGNhc2UgJ3N0cmluZyc6IHJldHVybiB2O1xuXHRcdGNhc2UgJ2Jvb2xlYW4nOiByZXR1cm4gdiA/IFwiVFJVRVwiIDogXCJGQUxTRVwiO1xuXHRcdGNhc2UgJ251bWJlcic6IHJldHVybiAodnwwKSA9PT0gdiA/IHYudG9TdHJpbmcoMTApIDogU1NGX2dlbmVyYWxfbnVtKHYpO1xuXHRcdGNhc2UgJ3VuZGVmaW5lZCc6IHJldHVybiBcIlwiO1xuXHRcdGNhc2UgJ29iamVjdCc6XG5cdFx0XHRpZih2ID09IG51bGwpIHJldHVybiBcIlwiO1xuXHRcdFx0aWYodiBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBTU0ZfZm9ybWF0KDE0LCBkYXRlbnVtX2xvY2FsKHYsIG9wdHMgJiYgb3B0cy5kYXRlMTkwNCksIG9wdHMpO1xuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIHZhbHVlIGluIEdlbmVyYWwgZm9ybWF0OiBcIiArIHYpO1xufVxuXG5mdW5jdGlvbiBTU0ZfZml4X2hpanJpKGRhdGUvKjpEYXRlKi8sIG8vKjpbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0qLykge1xuICAvKiBUT0RPOiBwcm9wZXJseSBhZGp1c3QgeS9tL2QgYW5kICAqL1xuICBvWzBdIC09IDU4MTtcbiAgdmFyIGRvdyA9IGRhdGUuZ2V0RGF5KCk7XG4gIGlmKGRhdGUgPCA2MCkgZG93ID0gKGRvdyArIDYpICUgNztcbiAgcmV0dXJuIGRvdztcbn1cbi8vdmFyIFRIQUlfRElHSVRTID0gXCJcXHUwRTUwXFx1MEU1MVxcdTBFNTJcXHUwRTUzXFx1MEU1NFxcdTBFNTVcXHUwRTU2XFx1MEU1N1xcdTBFNThcXHUwRTU5XCIuc3BsaXQoXCJcIik7XG5mdW5jdGlvbiBTU0Zfd3JpdGVfZGF0ZSh0eXBlLyo6bnVtYmVyKi8sIGZtdC8qOnN0cmluZyovLCB2YWwsIHNzMC8qOj9udW1iZXIqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvPVwiXCIsIHNzPTAsIHR0PTAsIHkgPSB2YWwueSwgb3V0LCBvdXRsID0gMDtcblx0c3dpdGNoKHR5cGUpIHtcblx0XHRjYXNlIDk4OiAvKiAnYicgYnVkZGhpc3QgeWVhciAqL1xuXHRcdFx0eSA9IHZhbC55ICsgNTQzO1xuXHRcdFx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdGNhc2UgMTIxOiAvKiAneScgeWVhciAqL1xuXHRcdHN3aXRjaChmbXQubGVuZ3RoKSB7XG5cdFx0XHRjYXNlIDE6IGNhc2UgMjogb3V0ID0geSAlIDEwMDsgb3V0bCA9IDI7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogb3V0ID0geSAlIDEwMDAwOyBvdXRsID0gNDsgYnJlYWs7XG5cdFx0fSBicmVhaztcblx0XHRjYXNlIDEwOTogLyogJ20nIG1vbnRoICovXG5cdFx0c3dpdGNoKGZtdC5sZW5ndGgpIHtcblx0XHRcdGNhc2UgMTogY2FzZSAyOiBvdXQgPSB2YWwubTsgb3V0bCA9IGZtdC5sZW5ndGg7IGJyZWFrO1xuXHRcdFx0Y2FzZSAzOiByZXR1cm4gbW9udGhzW3ZhbC5tLTFdWzFdO1xuXHRcdFx0Y2FzZSA1OiByZXR1cm4gbW9udGhzW3ZhbC5tLTFdWzBdO1xuXHRcdFx0ZGVmYXVsdDogcmV0dXJuIG1vbnRoc1t2YWwubS0xXVsyXTtcblx0XHR9IGJyZWFrO1xuXHRcdGNhc2UgMTAwOiAvKiAnZCcgZGF5ICovXG5cdFx0c3dpdGNoKGZtdC5sZW5ndGgpIHtcblx0XHRcdGNhc2UgMTogY2FzZSAyOiBvdXQgPSB2YWwuZDsgb3V0bCA9IGZtdC5sZW5ndGg7IGJyZWFrO1xuXHRcdFx0Y2FzZSAzOiByZXR1cm4gZGF5c1t2YWwucV1bMF07XG5cdFx0XHRkZWZhdWx0OiByZXR1cm4gZGF5c1t2YWwucV1bMV07XG5cdFx0fSBicmVhaztcblx0XHRjYXNlIDEwNDogLyogJ2gnIDEyLWhvdXIgKi9cblx0XHRzd2l0Y2goZm10Lmxlbmd0aCkge1xuXHRcdFx0Y2FzZSAxOiBjYXNlIDI6IG91dCA9IDErKHZhbC5IKzExKSUxMjsgb3V0bCA9IGZtdC5sZW5ndGg7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgJ2JhZCBob3VyIGZvcm1hdDogJyArIGZtdDtcblx0XHR9IGJyZWFrO1xuXHRcdGNhc2UgNzI6IC8qICdIJyAyNC1ob3VyICovXG5cdFx0c3dpdGNoKGZtdC5sZW5ndGgpIHtcblx0XHRcdGNhc2UgMTogY2FzZSAyOiBvdXQgPSB2YWwuSDsgb3V0bCA9IGZtdC5sZW5ndGg7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgJ2JhZCBob3VyIGZvcm1hdDogJyArIGZtdDtcblx0XHR9IGJyZWFrO1xuXHRcdGNhc2UgNzc6IC8qICdNJyBtaW51dGVzICovXG5cdFx0c3dpdGNoKGZtdC5sZW5ndGgpIHtcblx0XHRcdGNhc2UgMTogY2FzZSAyOiBvdXQgPSB2YWwuTTsgb3V0bCA9IGZtdC5sZW5ndGg7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgJ2JhZCBtaW51dGUgZm9ybWF0OiAnICsgZm10O1xuXHRcdH0gYnJlYWs7XG5cdFx0Y2FzZSAxMTU6IC8qICdzJyBzZWNvbmRzICovXG5cdFx0XHRpZihmbXQgIT0gJ3MnICYmIGZtdCAhPSAnc3MnICYmIGZtdCAhPSAnLjAnICYmIGZtdCAhPSAnLjAwJyAmJiBmbXQgIT0gJy4wMDAnKSB0aHJvdyAnYmFkIHNlY29uZCBmb3JtYXQ6ICcgKyBmbXQ7XG5cdFx0XHRpZih2YWwudSA9PT0gMCAmJiAoZm10ID09IFwic1wiIHx8IGZtdCA9PSBcInNzXCIpKSByZXR1cm4gcGFkMCh2YWwuUywgZm10Lmxlbmd0aCk7XG5cdFx0XHQvKjo6aWYoIXNzMCkgc3MwID0gMDsgKi9cblx0XHRcdGlmKHNzMCA+PSAyKSB0dCA9IHNzMCA9PT0gMyA/IDEwMDAgOiAxMDA7XG5cdFx0XHRlbHNlIHR0ID0gc3MwID09PSAxID8gMTAgOiAxO1xuXHRcdFx0c3MgPSBNYXRoLnJvdW5kKCh0dCkqKHZhbC5TICsgdmFsLnUpKTtcblx0XHRcdGlmKHNzID49IDYwKnR0KSBzcyA9IDA7XG5cdFx0XHRpZihmbXQgPT09ICdzJykgcmV0dXJuIHNzID09PSAwID8gXCIwXCIgOiBcIlwiK3NzL3R0O1xuXHRcdFx0byA9IHBhZDAoc3MsMiArIHNzMCk7XG5cdFx0XHRpZihmbXQgPT09ICdzcycpIHJldHVybiBvLnN1YnN0cigwLDIpO1xuXHRcdFx0cmV0dXJuIFwiLlwiICsgby5zdWJzdHIoMixmbXQubGVuZ3RoLTEpO1xuXHRcdGNhc2UgOTA6IC8qICdaJyBhYnNvbHV0ZSB0aW1lICovXG5cdFx0c3dpdGNoKGZtdCkge1xuXHRcdFx0Y2FzZSAnW2hdJzogY2FzZSAnW2hoXSc6IG91dCA9IHZhbC5EKjI0K3ZhbC5IOyBicmVhaztcblx0XHRcdGNhc2UgJ1ttXSc6IGNhc2UgJ1ttbV0nOiBvdXQgPSAodmFsLkQqMjQrdmFsLkgpKjYwK3ZhbC5NOyBicmVhaztcblx0XHRcdGNhc2UgJ1tzXSc6IGNhc2UgJ1tzc10nOiBvdXQgPSAoKHZhbC5EKjI0K3ZhbC5IKSo2MCt2YWwuTSkqNjArTWF0aC5yb3VuZCh2YWwuUyt2YWwudSk7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgJ2JhZCBhYnN0aW1lIGZvcm1hdDogJyArIGZtdDtcblx0XHR9IG91dGwgPSBmbXQubGVuZ3RoID09PSAzID8gMSA6IDI7IGJyZWFrO1xuXHRcdGNhc2UgMTAxOiAvKiAnZScgZXJhICovXG5cdFx0XHRvdXQgPSB5OyBvdXRsID0gMTsgYnJlYWs7XG5cdH1cblx0dmFyIG91dHN0ciA9IG91dGwgPiAwID8gcGFkMChvdXQsIG91dGwpIDogXCJcIjtcblx0cmV0dXJuIG91dHN0cjtcbn1cblxuXG4vKmpzaGludCAtVzA4NiAqL1xuLypqc2hpbnQgK1cwODYgKi9cbmZ1bmN0aW9uIGNvbW1haWZ5KHMvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdHZhciB3ID0gMztcblx0aWYocy5sZW5ndGggPD0gdykgcmV0dXJuIHM7XG5cdHZhciBqID0gKHMubGVuZ3RoICUgdyksIG8gPSBzLnN1YnN0cigwLGopO1xuXHRmb3IoOyBqIT1zLmxlbmd0aDsgais9dykgbys9KG8ubGVuZ3RoID4gMCA/IFwiLFwiIDogXCJcIikgKyBzLnN1YnN0cihqLHcpO1xuXHRyZXR1cm4gbztcbn1cbnZhciBwY3QxID0gLyUvZztcbmZ1bmN0aW9uIHdyaXRlX251bV9wY3QodHlwZS8qOnN0cmluZyovLCBmbXQvKjpzdHJpbmcqLywgdmFsLyo6bnVtYmVyKi8pLyo6c3RyaW5nKi97XG5cdHZhciBzZm10ID0gZm10LnJlcGxhY2UocGN0MSxcIlwiKSwgbXVsID0gZm10Lmxlbmd0aCAtIHNmbXQubGVuZ3RoO1xuXHRyZXR1cm4gd3JpdGVfbnVtKHR5cGUsIHNmbXQsIHZhbCAqIE1hdGgucG93KDEwLDIqbXVsKSkgKyBmaWxsKFwiJVwiLG11bCk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX251bV9jbSh0eXBlLyo6c3RyaW5nKi8sIGZtdC8qOnN0cmluZyovLCB2YWwvKjpudW1iZXIqLykvKjpzdHJpbmcqL3tcblx0dmFyIGlkeCA9IGZtdC5sZW5ndGggLSAxO1xuXHR3aGlsZShmbXQuY2hhckNvZGVBdChpZHgtMSkgPT09IDQ0KSAtLWlkeDtcblx0cmV0dXJuIHdyaXRlX251bSh0eXBlLCBmbXQuc3Vic3RyKDAsaWR4KSwgdmFsIC8gTWF0aC5wb3coMTAsMyooZm10Lmxlbmd0aC1pZHgpKSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX251bV9leHAoZm10Lyo6c3RyaW5nKi8sIHZhbC8qOm51bWJlciovKS8qOnN0cmluZyove1xuXHR2YXIgby8qOnN0cmluZyovO1xuXHR2YXIgaWR4ID0gZm10LmluZGV4T2YoXCJFXCIpIC0gZm10LmluZGV4T2YoXCIuXCIpIC0gMTtcblx0aWYoZm10Lm1hdGNoKC9eIyswLjBFXFwrMCQvKSkge1xuXHRcdGlmKHZhbCA9PSAwKSByZXR1cm4gXCIwLjBFKzBcIjtcblx0XHRlbHNlIGlmKHZhbCA8IDApIHJldHVybiBcIi1cIiArIHdyaXRlX251bV9leHAoZm10LCAtdmFsKTtcblx0XHR2YXIgcGVyaW9kID0gZm10LmluZGV4T2YoXCIuXCIpOyBpZihwZXJpb2QgPT09IC0xKSBwZXJpb2Q9Zm10LmluZGV4T2YoJ0UnKTtcblx0XHR2YXIgZWUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbCkqTWF0aC5MT0cxMEUpJXBlcmlvZDtcblx0XHRpZihlZSA8IDApIGVlICs9IHBlcmlvZDtcblx0XHRvID0gKHZhbC9NYXRoLnBvdygxMCxlZSkpLnRvUHJlY2lzaW9uKGlkeCsxKyhwZXJpb2QrZWUpJXBlcmlvZCk7XG5cdFx0aWYoby5pbmRleE9mKFwiZVwiKSA9PT0gLTEpIHtcblx0XHRcdHZhciBmYWtlZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsKSpNYXRoLkxPRzEwRSk7XG5cdFx0XHRpZihvLmluZGV4T2YoXCIuXCIpID09PSAtMSkgbyA9IG8uY2hhckF0KDApICsgXCIuXCIgKyBvLnN1YnN0cigxKSArIFwiRStcIiArIChmYWtlZSAtIG8ubGVuZ3RoK2VlKTtcblx0XHRcdGVsc2UgbyArPSBcIkUrXCIgKyAoZmFrZWUgLSBlZSk7XG5cdFx0XHR3aGlsZShvLnN1YnN0cigwLDIpID09PSBcIjAuXCIpIHtcblx0XHRcdFx0byA9IG8uY2hhckF0KDApICsgby5zdWJzdHIoMixwZXJpb2QpICsgXCIuXCIgKyBvLnN1YnN0cigyK3BlcmlvZCk7XG5cdFx0XHRcdG8gPSBvLnJlcGxhY2UoL14wKyhbMS05XSkvLFwiJDFcIikucmVwbGFjZSgvXjArXFwuLyxcIjAuXCIpO1xuXHRcdFx0fVxuXHRcdFx0byA9IG8ucmVwbGFjZSgvXFwrLS8sXCItXCIpO1xuXHRcdH1cblx0XHRvID0gby5yZXBsYWNlKC9eKFsrLV0/KShcXGQqKVxcLihcXGQqKVtFZV0vLGZ1bmN0aW9uKCQkLCQxLCQyLCQzKSB7IHJldHVybiAkMSArICQyICsgJDMuc3Vic3RyKDAsKHBlcmlvZCtlZSklcGVyaW9kKSArIFwiLlwiICsgJDMuc3Vic3RyKGVlKSArIFwiRVwiOyB9KTtcblx0fSBlbHNlIG8gPSB2YWwudG9FeHBvbmVudGlhbChpZHgpO1xuXHRpZihmbXQubWF0Y2goL0VcXCswMCQvKSAmJiBvLm1hdGNoKC9lWystXVxcZCQvKSkgbyA9IG8uc3Vic3RyKDAsby5sZW5ndGgtMSkgKyBcIjBcIiArIG8uY2hhckF0KG8ubGVuZ3RoLTEpO1xuXHRpZihmbXQubWF0Y2goL0VcXC0vKSAmJiBvLm1hdGNoKC9lXFwrLykpIG8gPSBvLnJlcGxhY2UoL2VcXCsvLFwiZVwiKTtcblx0cmV0dXJuIG8ucmVwbGFjZShcImVcIixcIkVcIik7XG59XG52YXIgZnJhYzEgPSAvIyAoXFw/KykoID8pXFwvKCA/KShcXGQrKS87XG5mdW5jdGlvbiB3cml0ZV9udW1fZjEoci8qOkFycmF5PHN0cmluZz4qLywgYXZhbC8qOm51bWJlciovLCBzaWduLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgZGVuID0gcGFyc2VJbnQocls0XSwxMCksIHJyID0gTWF0aC5yb3VuZChhdmFsICogZGVuKSwgYmFzZSA9IE1hdGguZmxvb3IocnIvZGVuKTtcblx0dmFyIG15biA9IChyciAtIGJhc2UqZGVuKSwgbXlkID0gZGVuO1xuXHRyZXR1cm4gc2lnbiArIChiYXNlID09PSAwID8gXCJcIiA6IFwiXCIrYmFzZSkgKyBcIiBcIiArIChteW4gPT09IDAgPyBmaWxsKFwiIFwiLCByWzFdLmxlbmd0aCArIDEgKyByWzRdLmxlbmd0aCkgOiBwYWRfKG15bixyWzFdLmxlbmd0aCkgKyByWzJdICsgXCIvXCIgKyByWzNdICsgcGFkMChteWQscls0XS5sZW5ndGgpKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX251bV9mMihyLyo6QXJyYXk8c3RyaW5nPiovLCBhdmFsLyo6bnVtYmVyKi8sIHNpZ24vKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdHJldHVybiBzaWduICsgKGF2YWwgPT09IDAgPyBcIlwiIDogXCJcIithdmFsKSArIGZpbGwoXCIgXCIsIHJbMV0ubGVuZ3RoICsgMiArIHJbNF0ubGVuZ3RoKTtcbn1cbnZhciBkZWMxID0gL14jKjAqXFwuKFswI10rKS87XG52YXIgY2xvc2VwYXJlbiA9IC9cXCkuKlswI10vO1xudmFyIHBob25lID0gL1xcKCMjI1xcKSAjIyNcXFxcPy0jIyMjLztcbmZ1bmN0aW9uIGhhc2hxKHN0ci8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0dmFyIG8gPSBcIlwiLCBjYztcblx0Zm9yKHZhciBpID0gMDsgaSAhPSBzdHIubGVuZ3RoOyArK2kpIHN3aXRjaCgoY2M9c3RyLmNoYXJDb2RlQXQoaSkpKSB7XG5cdFx0Y2FzZSAzNTogYnJlYWs7XG5cdFx0Y2FzZSA2Mzogbys9IFwiIFwiOyBicmVhaztcblx0XHRjYXNlIDQ4OiBvKz0gXCIwXCI7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IG8rPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNjKTtcblx0fVxuXHRyZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHJuZCh2YWwvKjpudW1iZXIqLywgZC8qOm51bWJlciovKS8qOnN0cmluZyovIHsgdmFyIGRkID0gTWF0aC5wb3coMTAsZCk7IHJldHVybiBcIlwiKyhNYXRoLnJvdW5kKHZhbCAqIGRkKS9kZCk7IH1cbmZ1bmN0aW9uIGRlYyh2YWwvKjpudW1iZXIqLywgZC8qOm51bWJlciovKS8qOm51bWJlciovIHtcblx0dmFyIF9mcmFjID0gdmFsIC0gTWF0aC5mbG9vcih2YWwpLCBkZCA9IE1hdGgucG93KDEwLGQpO1xuXHRpZiAoZCA8ICgnJyArIE1hdGgucm91bmQoX2ZyYWMgKiBkZCkpLmxlbmd0aCkgcmV0dXJuIDA7XG5cdHJldHVybiBNYXRoLnJvdW5kKF9mcmFjICogZGQpO1xufVxuZnVuY3Rpb24gY2FycnkodmFsLyo6bnVtYmVyKi8sIGQvKjpudW1iZXIqLykvKjpudW1iZXIqLyB7XG5cdGlmIChkIDwgKCcnICsgTWF0aC5yb3VuZCgodmFsLU1hdGguZmxvb3IodmFsKSkqTWF0aC5wb3coMTAsZCkpKS5sZW5ndGgpIHtcblx0XHRyZXR1cm4gMTtcblx0fVxuXHRyZXR1cm4gMDtcbn1cbmZ1bmN0aW9uIGZscih2YWwvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7XG5cdGlmKHZhbCA8IDIxNDc0ODM2NDcgJiYgdmFsID4gLTIxNDc0ODM2NDgpIHJldHVybiBcIlwiKyh2YWwgPj0gMCA/ICh2YWx8MCkgOiAodmFsLTF8MCkpO1xuXHRyZXR1cm4gXCJcIitNYXRoLmZsb29yKHZhbCk7XG59XG5mdW5jdGlvbiB3cml0ZV9udW1fZmx0KHR5cGUvKjpzdHJpbmcqLywgZm10Lyo6c3RyaW5nKi8sIHZhbC8qOm51bWJlciovKS8qOnN0cmluZyovIHtcblx0aWYodHlwZS5jaGFyQ29kZUF0KDApID09PSA0MCAmJiAhZm10Lm1hdGNoKGNsb3NlcGFyZW4pKSB7XG5cdFx0dmFyIGZmbXQgPSBmbXQucmVwbGFjZSgvXFwoICovLFwiXCIpLnJlcGxhY2UoLyBcXCkvLFwiXCIpLnJlcGxhY2UoL1xcKS8sXCJcIik7XG5cdFx0aWYodmFsID49IDApIHJldHVybiB3cml0ZV9udW1fZmx0KCduJywgZmZtdCwgdmFsKTtcblx0XHRyZXR1cm4gJygnICsgd3JpdGVfbnVtX2ZsdCgnbicsIGZmbXQsIC12YWwpICsgJyknO1xuXHR9XG5cdGlmKGZtdC5jaGFyQ29kZUF0KGZtdC5sZW5ndGggLSAxKSA9PT0gNDQpIHJldHVybiB3cml0ZV9udW1fY20odHlwZSwgZm10LCB2YWwpO1xuXHRpZihmbXQuaW5kZXhPZignJScpICE9PSAtMSkgcmV0dXJuIHdyaXRlX251bV9wY3QodHlwZSwgZm10LCB2YWwpO1xuXHRpZihmbXQuaW5kZXhPZignRScpICE9PSAtMSkgcmV0dXJuIHdyaXRlX251bV9leHAoZm10LCB2YWwpO1xuXHRpZihmbXQuY2hhckNvZGVBdCgwKSA9PT0gMzYpIHJldHVybiBcIiRcIit3cml0ZV9udW1fZmx0KHR5cGUsZm10LnN1YnN0cihmbXQuY2hhckF0KDEpPT0nICc/MjoxKSx2YWwpO1xuXHR2YXIgbztcblx0dmFyIHIvKjo/QXJyYXk8c3RyaW5nPiovLCByaSwgZmYsIGF2YWwgPSBNYXRoLmFicyh2YWwpLCBzaWduID0gdmFsIDwgMCA/IFwiLVwiIDogXCJcIjtcblx0aWYoZm10Lm1hdGNoKC9eMDArJC8pKSByZXR1cm4gc2lnbiArIHBhZDByKGF2YWwsZm10Lmxlbmd0aCk7XG5cdGlmKGZtdC5tYXRjaCgvXlsjP10rJC8pKSB7XG5cdFx0byA9IHBhZDByKHZhbCwwKTsgaWYobyA9PT0gXCIwXCIpIG8gPSBcIlwiO1xuXHRcdHJldHVybiBvLmxlbmd0aCA+IGZtdC5sZW5ndGggPyBvIDogaGFzaHEoZm10LnN1YnN0cigwLGZtdC5sZW5ndGgtby5sZW5ndGgpKSArIG87XG5cdH1cblx0aWYoKHIgPSBmbXQubWF0Y2goZnJhYzEpKSkgcmV0dXJuIHdyaXRlX251bV9mMShyLCBhdmFsLCBzaWduKTtcblx0aWYoZm10Lm1hdGNoKC9eIyswKyQvKSkgcmV0dXJuIHNpZ24gKyBwYWQwcihhdmFsLGZtdC5sZW5ndGggLSBmbXQuaW5kZXhPZihcIjBcIikpO1xuXHRpZigociA9IGZtdC5tYXRjaChkZWMxKSkpIHtcblx0XHRvID0gcm5kKHZhbCwgclsxXS5sZW5ndGgpLnJlcGxhY2UoL14oW15cXC5dKykkLyxcIiQxLlwiK2hhc2hxKHJbMV0pKS5yZXBsYWNlKC9cXC4kLyxcIi5cIitoYXNocShyWzFdKSkucmVwbGFjZSgvXFwuKFxcZCopJC8sZnVuY3Rpb24oJCQsICQxKSB7IHJldHVybiBcIi5cIiArICQxICsgZmlsbChcIjBcIiwgaGFzaHEoLyo6OigqL3IvKjo6fHxbXCJcIl0pKi9bMV0pLmxlbmd0aC0kMS5sZW5ndGgpOyB9KTtcblx0XHRyZXR1cm4gZm10LmluZGV4T2YoXCIwLlwiKSAhPT0gLTEgPyBvIDogby5yZXBsYWNlKC9eMFxcLi8sXCIuXCIpO1xuXHR9XG5cdGZtdCA9IGZtdC5yZXBsYWNlKC9eIysoWzAuXSkvLCBcIiQxXCIpO1xuXHRpZigociA9IGZtdC5tYXRjaCgvXigwKilcXC4oIyopJC8pKSkge1xuXHRcdHJldHVybiBzaWduICsgcm5kKGF2YWwsIHJbMl0ubGVuZ3RoKS5yZXBsYWNlKC9cXC4oXFxkKlsxLTldKTAqJC8sXCIuJDFcIikucmVwbGFjZSgvXigtP1xcZCopJC8sXCIkMS5cIikucmVwbGFjZSgvXjBcXC4vLHJbMV0ubGVuZ3RoP1wiMC5cIjpcIi5cIik7XG5cdH1cblx0aWYoKHIgPSBmbXQubWF0Y2goL14jezEsM30sIyMwKFxcLj8pJC8pKSkgcmV0dXJuIHNpZ24gKyBjb21tYWlmeShwYWQwcihhdmFsLDApKTtcblx0aWYoKHIgPSBmbXQubWF0Y2goL14jLCMjMFxcLihbIzBdKjApJC8pKSkge1xuXHRcdHJldHVybiB2YWwgPCAwID8gXCItXCIgKyB3cml0ZV9udW1fZmx0KHR5cGUsIGZtdCwgLXZhbCkgOiBjb21tYWlmeShcIlwiKyhNYXRoLmZsb29yKHZhbCkgKyBjYXJyeSh2YWwsIHJbMV0ubGVuZ3RoKSkpICsgXCIuXCIgKyBwYWQwKGRlYyh2YWwsIHJbMV0ubGVuZ3RoKSxyWzFdLmxlbmd0aCk7XG5cdH1cblx0aWYoKHIgPSBmbXQubWF0Y2goL14jLCMqLCMwLykpKSByZXR1cm4gd3JpdGVfbnVtX2ZsdCh0eXBlLGZtdC5yZXBsYWNlKC9eIywjKiwvLFwiXCIpLHZhbCk7XG5cdGlmKChyID0gZm10Lm1hdGNoKC9eKFswI10rKShcXFxcPy0oWzAjXSspKSskLykpKSB7XG5cdFx0byA9IF9zdHJyZXYod3JpdGVfbnVtX2ZsdCh0eXBlLCBmbXQucmVwbGFjZSgvW1xcXFwtXS9nLFwiXCIpLCB2YWwpKTtcblx0XHRyaSA9IDA7XG5cdFx0cmV0dXJuIF9zdHJyZXYoX3N0cnJldihmbXQucmVwbGFjZSgvXFxcXC9nLFwiXCIpKS5yZXBsYWNlKC9bMCNdL2csZnVuY3Rpb24oeCl7cmV0dXJuIHJpPG8ubGVuZ3RoP28uY2hhckF0KHJpKyspOng9PT0nMCc/JzAnOlwiXCI7fSkpO1xuXHR9XG5cdGlmKGZtdC5tYXRjaChwaG9uZSkpIHtcblx0XHRvID0gd3JpdGVfbnVtX2ZsdCh0eXBlLCBcIiMjIyMjIyMjIyNcIiwgdmFsKTtcblx0XHRyZXR1cm4gXCIoXCIgKyBvLnN1YnN0cigwLDMpICsgXCIpIFwiICsgby5zdWJzdHIoMywgMykgKyBcIi1cIiArIG8uc3Vic3RyKDYpO1xuXHR9XG5cdHZhciBvYSA9IFwiXCI7XG5cdGlmKChyID0gZm10Lm1hdGNoKC9eKFsjMD9dKykoID8pXFwvKCA/KShbIzA/XSspLykpKSB7XG5cdFx0cmkgPSBNYXRoLm1pbigvKjo6U3RyaW5nKCovcls0XS8qOjopKi8ubGVuZ3RoLDcpO1xuXHRcdGZmID0gU1NGX2ZyYWMoYXZhbCwgTWF0aC5wb3coMTAscmkpLTEsIGZhbHNlKTtcblx0XHRvID0gXCJcIiArIHNpZ247XG5cdFx0b2EgPSB3cml0ZV9udW0oXCJuXCIsIC8qOjpTdHJpbmcoKi9yWzFdLyo6OikqLywgZmZbMV0pO1xuXHRcdGlmKG9hLmNoYXJBdChvYS5sZW5ndGgtMSkgPT0gXCIgXCIpIG9hID0gb2Euc3Vic3RyKDAsb2EubGVuZ3RoLTEpICsgXCIwXCI7XG5cdFx0byArPSBvYSArIC8qOjpTdHJpbmcoKi9yWzJdLyo6OikqLyArIFwiL1wiICsgLyo6OlN0cmluZygqL3JbM10vKjo6KSovO1xuXHRcdG9hID0gcnBhZF8oZmZbMl0scmkpO1xuXHRcdGlmKG9hLmxlbmd0aCA8IHJbNF0ubGVuZ3RoKSBvYSA9IGhhc2hxKHJbNF0uc3Vic3RyKHJbNF0ubGVuZ3RoLW9hLmxlbmd0aCkpICsgb2E7XG5cdFx0byArPSBvYTtcblx0XHRyZXR1cm4gbztcblx0fVxuXHRpZigociA9IGZtdC5tYXRjaCgvXiMgKFsjMD9dKykoID8pXFwvKCA/KShbIzA/XSspLykpKSB7XG5cdFx0cmkgPSBNYXRoLm1pbihNYXRoLm1heChyWzFdLmxlbmd0aCwgcls0XS5sZW5ndGgpLDcpO1xuXHRcdGZmID0gU1NGX2ZyYWMoYXZhbCwgTWF0aC5wb3coMTAscmkpLTEsIHRydWUpO1xuXHRcdHJldHVybiBzaWduICsgKGZmWzBdfHwoZmZbMV0gPyBcIlwiIDogXCIwXCIpKSArIFwiIFwiICsgKGZmWzFdID8gcGFkXyhmZlsxXSxyaSkgKyByWzJdICsgXCIvXCIgKyByWzNdICsgcnBhZF8oZmZbMl0scmkpOiBmaWxsKFwiIFwiLCAyKnJpKzEgKyByWzJdLmxlbmd0aCArIHJbM10ubGVuZ3RoKSk7XG5cdH1cblx0aWYoKHIgPSBmbXQubWF0Y2goL15bIzA/XSskLykpKSB7XG5cdFx0byA9IHBhZDByKHZhbCwgMCk7XG5cdFx0aWYoZm10Lmxlbmd0aCA8PSBvLmxlbmd0aCkgcmV0dXJuIG87XG5cdFx0cmV0dXJuIGhhc2hxKGZtdC5zdWJzdHIoMCxmbXQubGVuZ3RoLW8ubGVuZ3RoKSkgKyBvO1xuXHR9XG5cdGlmKChyID0gZm10Lm1hdGNoKC9eKFsjMD9dKylcXC4oWyMwXSspJC8pKSkge1xuXHRcdG8gPSBcIlwiICsgdmFsLnRvRml4ZWQoTWF0aC5taW4oclsyXS5sZW5ndGgsMTApKS5yZXBsYWNlKC8oW14wXSkwKyQvLFwiJDFcIik7XG5cdFx0cmkgPSBvLmluZGV4T2YoXCIuXCIpO1xuXHRcdHZhciBscmVzID0gZm10LmluZGV4T2YoXCIuXCIpIC0gcmksIHJyZXMgPSBmbXQubGVuZ3RoIC0gby5sZW5ndGggLSBscmVzO1xuXHRcdHJldHVybiBoYXNocShmbXQuc3Vic3RyKDAsbHJlcykgKyBvICsgZm10LnN1YnN0cihmbXQubGVuZ3RoLXJyZXMpKTtcblx0fVxuXHRpZigociA9IGZtdC5tYXRjaCgvXjAwLDAwMFxcLihbIzBdKjApJC8pKSkge1xuXHRcdHJpID0gZGVjKHZhbCwgclsxXS5sZW5ndGgpO1xuXHRcdHJldHVybiB2YWwgPCAwID8gXCItXCIgKyB3cml0ZV9udW1fZmx0KHR5cGUsIGZtdCwgLXZhbCkgOiBjb21tYWlmeShmbHIodmFsKSkucmVwbGFjZSgvXlxcZCxcXGR7M30kLyxcIjAkJlwiKS5yZXBsYWNlKC9eXFxkKiQvLGZ1bmN0aW9uKCQkKSB7IHJldHVybiBcIjAwLFwiICsgKCQkLmxlbmd0aCA8IDMgPyBwYWQwKDAsMy0kJC5sZW5ndGgpIDogXCJcIikgKyAkJDsgfSkgKyBcIi5cIiArIHBhZDAocmksclsxXS5sZW5ndGgpO1xuXHR9XG5cdHN3aXRjaChmbXQpIHtcblx0XHRjYXNlIFwiIyMjLCMjMC4wMFwiOiByZXR1cm4gd3JpdGVfbnVtX2ZsdCh0eXBlLCBcIiMsIyMwLjAwXCIsIHZhbCk7XG5cdFx0Y2FzZSBcIiMjIywjIyNcIjpcblx0XHRjYXNlIFwiIyMsIyMjXCI6XG5cdFx0Y2FzZSBcIiMsIyMjXCI6IHZhciB4ID0gY29tbWFpZnkocGFkMHIoYXZhbCwwKSk7IHJldHVybiB4ICE9PSBcIjBcIiA/IHNpZ24gKyB4IDogXCJcIjtcblx0XHRjYXNlIFwiIyMjLCMjIy4wMFwiOiByZXR1cm4gd3JpdGVfbnVtX2ZsdCh0eXBlLCBcIiMjIywjIzAuMDBcIix2YWwpLnJlcGxhY2UoL14wXFwuLyxcIi5cIik7XG5cdFx0Y2FzZSBcIiMsIyMjLjAwXCI6IHJldHVybiB3cml0ZV9udW1fZmx0KHR5cGUsIFwiIywjIzAuMDBcIix2YWwpLnJlcGxhY2UoL14wXFwuLyxcIi5cIik7XG5cdFx0ZGVmYXVsdDpcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBmb3JtYXQgfFwiICsgZm10ICsgXCJ8XCIpO1xufVxuZnVuY3Rpb24gd3JpdGVfbnVtX2NtMih0eXBlLyo6c3RyaW5nKi8sIGZtdC8qOnN0cmluZyovLCB2YWwvKjpudW1iZXIqLykvKjpzdHJpbmcqL3tcblx0dmFyIGlkeCA9IGZtdC5sZW5ndGggLSAxO1xuXHR3aGlsZShmbXQuY2hhckNvZGVBdChpZHgtMSkgPT09IDQ0KSAtLWlkeDtcblx0cmV0dXJuIHdyaXRlX251bSh0eXBlLCBmbXQuc3Vic3RyKDAsaWR4KSwgdmFsIC8gTWF0aC5wb3coMTAsMyooZm10Lmxlbmd0aC1pZHgpKSk7XG59XG5mdW5jdGlvbiB3cml0ZV9udW1fcGN0Mih0eXBlLyo6c3RyaW5nKi8sIGZtdC8qOnN0cmluZyovLCB2YWwvKjpudW1iZXIqLykvKjpzdHJpbmcqL3tcblx0dmFyIHNmbXQgPSBmbXQucmVwbGFjZShwY3QxLFwiXCIpLCBtdWwgPSBmbXQubGVuZ3RoIC0gc2ZtdC5sZW5ndGg7XG5cdHJldHVybiB3cml0ZV9udW0odHlwZSwgc2ZtdCwgdmFsICogTWF0aC5wb3coMTAsMiptdWwpKSArIGZpbGwoXCIlXCIsbXVsKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX251bV9leHAyKGZtdC8qOnN0cmluZyovLCB2YWwvKjpudW1iZXIqLykvKjpzdHJpbmcqL3tcblx0dmFyIG8vKjpzdHJpbmcqLztcblx0dmFyIGlkeCA9IGZtdC5pbmRleE9mKFwiRVwiKSAtIGZtdC5pbmRleE9mKFwiLlwiKSAtIDE7XG5cdGlmKGZtdC5tYXRjaCgvXiMrMC4wRVxcKzAkLykpIHtcblx0XHRpZih2YWwgPT0gMCkgcmV0dXJuIFwiMC4wRSswXCI7XG5cdFx0ZWxzZSBpZih2YWwgPCAwKSByZXR1cm4gXCItXCIgKyB3cml0ZV9udW1fZXhwMihmbXQsIC12YWwpO1xuXHRcdHZhciBwZXJpb2QgPSBmbXQuaW5kZXhPZihcIi5cIik7IGlmKHBlcmlvZCA9PT0gLTEpIHBlcmlvZD1mbXQuaW5kZXhPZignRScpO1xuXHRcdHZhciBlZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsKSpNYXRoLkxPRzEwRSklcGVyaW9kO1xuXHRcdGlmKGVlIDwgMCkgZWUgKz0gcGVyaW9kO1xuXHRcdG8gPSAodmFsL01hdGgucG93KDEwLGVlKSkudG9QcmVjaXNpb24oaWR4KzErKHBlcmlvZCtlZSklcGVyaW9kKTtcblx0XHRpZighby5tYXRjaCgvW0VlXS8pKSB7XG5cdFx0XHR2YXIgZmFrZWUgPSBNYXRoLmZsb29yKE1hdGgubG9nKHZhbCkqTWF0aC5MT0cxMEUpO1xuXHRcdFx0aWYoby5pbmRleE9mKFwiLlwiKSA9PT0gLTEpIG8gPSBvLmNoYXJBdCgwKSArIFwiLlwiICsgby5zdWJzdHIoMSkgKyBcIkUrXCIgKyAoZmFrZWUgLSBvLmxlbmd0aCtlZSk7XG5cdFx0XHRlbHNlIG8gKz0gXCJFK1wiICsgKGZha2VlIC0gZWUpO1xuXHRcdFx0byA9IG8ucmVwbGFjZSgvXFwrLS8sXCItXCIpO1xuXHRcdH1cblx0XHRvID0gby5yZXBsYWNlKC9eKFsrLV0/KShcXGQqKVxcLihcXGQqKVtFZV0vLGZ1bmN0aW9uKCQkLCQxLCQyLCQzKSB7IHJldHVybiAkMSArICQyICsgJDMuc3Vic3RyKDAsKHBlcmlvZCtlZSklcGVyaW9kKSArIFwiLlwiICsgJDMuc3Vic3RyKGVlKSArIFwiRVwiOyB9KTtcblx0fSBlbHNlIG8gPSB2YWwudG9FeHBvbmVudGlhbChpZHgpO1xuXHRpZihmbXQubWF0Y2goL0VcXCswMCQvKSAmJiBvLm1hdGNoKC9lWystXVxcZCQvKSkgbyA9IG8uc3Vic3RyKDAsby5sZW5ndGgtMSkgKyBcIjBcIiArIG8uY2hhckF0KG8ubGVuZ3RoLTEpO1xuXHRpZihmbXQubWF0Y2goL0VcXC0vKSAmJiBvLm1hdGNoKC9lXFwrLykpIG8gPSBvLnJlcGxhY2UoL2VcXCsvLFwiZVwiKTtcblx0cmV0dXJuIG8ucmVwbGFjZShcImVcIixcIkVcIik7XG59XG5mdW5jdGlvbiB3cml0ZV9udW1faW50KHR5cGUvKjpzdHJpbmcqLywgZm10Lyo6c3RyaW5nKi8sIHZhbC8qOm51bWJlciovKS8qOnN0cmluZyovIHtcblx0aWYodHlwZS5jaGFyQ29kZUF0KDApID09PSA0MCAmJiAhZm10Lm1hdGNoKGNsb3NlcGFyZW4pKSB7XG5cdFx0dmFyIGZmbXQgPSBmbXQucmVwbGFjZSgvXFwoICovLFwiXCIpLnJlcGxhY2UoLyBcXCkvLFwiXCIpLnJlcGxhY2UoL1xcKS8sXCJcIik7XG5cdFx0aWYodmFsID49IDApIHJldHVybiB3cml0ZV9udW1faW50KCduJywgZmZtdCwgdmFsKTtcblx0XHRyZXR1cm4gJygnICsgd3JpdGVfbnVtX2ludCgnbicsIGZmbXQsIC12YWwpICsgJyknO1xuXHR9XG5cdGlmKGZtdC5jaGFyQ29kZUF0KGZtdC5sZW5ndGggLSAxKSA9PT0gNDQpIHJldHVybiB3cml0ZV9udW1fY20yKHR5cGUsIGZtdCwgdmFsKTtcblx0aWYoZm10LmluZGV4T2YoJyUnKSAhPT0gLTEpIHJldHVybiB3cml0ZV9udW1fcGN0Mih0eXBlLCBmbXQsIHZhbCk7XG5cdGlmKGZtdC5pbmRleE9mKCdFJykgIT09IC0xKSByZXR1cm4gd3JpdGVfbnVtX2V4cDIoZm10LCB2YWwpO1xuXHRpZihmbXQuY2hhckNvZGVBdCgwKSA9PT0gMzYpIHJldHVybiBcIiRcIit3cml0ZV9udW1faW50KHR5cGUsZm10LnN1YnN0cihmbXQuY2hhckF0KDEpPT0nICc/MjoxKSx2YWwpO1xuXHR2YXIgbztcblx0dmFyIHIvKjo/QXJyYXk8c3RyaW5nPiovLCByaSwgZmYsIGF2YWwgPSBNYXRoLmFicyh2YWwpLCBzaWduID0gdmFsIDwgMCA/IFwiLVwiIDogXCJcIjtcblx0aWYoZm10Lm1hdGNoKC9eMDArJC8pKSByZXR1cm4gc2lnbiArIHBhZDAoYXZhbCxmbXQubGVuZ3RoKTtcblx0aWYoZm10Lm1hdGNoKC9eWyM/XSskLykpIHtcblx0XHRvID0gKFwiXCIrdmFsKTsgaWYodmFsID09PSAwKSBvID0gXCJcIjtcblx0XHRyZXR1cm4gby5sZW5ndGggPiBmbXQubGVuZ3RoID8gbyA6IGhhc2hxKGZtdC5zdWJzdHIoMCxmbXQubGVuZ3RoLW8ubGVuZ3RoKSkgKyBvO1xuXHR9XG5cdGlmKChyID0gZm10Lm1hdGNoKGZyYWMxKSkpIHJldHVybiB3cml0ZV9udW1fZjIociwgYXZhbCwgc2lnbik7XG5cdGlmKGZtdC5tYXRjaCgvXiMrMCskLykpIHJldHVybiBzaWduICsgcGFkMChhdmFsLGZtdC5sZW5ndGggLSBmbXQuaW5kZXhPZihcIjBcIikpO1xuXHRpZigociA9IGZtdC5tYXRjaChkZWMxKSkpIHtcblx0XHQvKjo6IGlmKCFBcnJheS5pc0FycmF5KHIpKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0XHRvID0gKFwiXCIrdmFsKS5yZXBsYWNlKC9eKFteXFwuXSspJC8sXCIkMS5cIitoYXNocShyWzFdKSkucmVwbGFjZSgvXFwuJC8sXCIuXCIraGFzaHEoclsxXSkpO1xuXHRcdG8gPSBvLnJlcGxhY2UoL1xcLihcXGQqKSQvLGZ1bmN0aW9uKCQkLCAkMSkge1xuXHRcdC8qOjogaWYoIUFycmF5LmlzQXJyYXkocikpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdFx0cmV0dXJuIFwiLlwiICsgJDEgKyBmaWxsKFwiMFwiLCBoYXNocShyWzFdKS5sZW5ndGgtJDEubGVuZ3RoKTsgfSk7XG5cdFx0cmV0dXJuIGZtdC5pbmRleE9mKFwiMC5cIikgIT09IC0xID8gbyA6IG8ucmVwbGFjZSgvXjBcXC4vLFwiLlwiKTtcblx0fVxuXHRmbXQgPSBmbXQucmVwbGFjZSgvXiMrKFswLl0pLywgXCIkMVwiKTtcblx0aWYoKHIgPSBmbXQubWF0Y2goL14oMCopXFwuKCMqKSQvKSkpIHtcblx0XHRyZXR1cm4gc2lnbiArIChcIlwiK2F2YWwpLnJlcGxhY2UoL1xcLihcXGQqWzEtOV0pMCokLyxcIi4kMVwiKS5yZXBsYWNlKC9eKC0/XFxkKikkLyxcIiQxLlwiKS5yZXBsYWNlKC9eMFxcLi8sclsxXS5sZW5ndGg/XCIwLlwiOlwiLlwiKTtcblx0fVxuXHRpZigociA9IGZtdC5tYXRjaCgvXiN7MSwzfSwjIzAoXFwuPykkLykpKSByZXR1cm4gc2lnbiArIGNvbW1haWZ5KChcIlwiK2F2YWwpKTtcblx0aWYoKHIgPSBmbXQubWF0Y2goL14jLCMjMFxcLihbIzBdKjApJC8pKSkge1xuXHRcdHJldHVybiB2YWwgPCAwID8gXCItXCIgKyB3cml0ZV9udW1faW50KHR5cGUsIGZtdCwgLXZhbCkgOiBjb21tYWlmeSgoXCJcIit2YWwpKSArIFwiLlwiICsgZmlsbCgnMCcsclsxXS5sZW5ndGgpO1xuXHR9XG5cdGlmKChyID0gZm10Lm1hdGNoKC9eIywjKiwjMC8pKSkgcmV0dXJuIHdyaXRlX251bV9pbnQodHlwZSxmbXQucmVwbGFjZSgvXiMsIyosLyxcIlwiKSx2YWwpO1xuXHRpZigociA9IGZtdC5tYXRjaCgvXihbMCNdKykoXFxcXD8tKFswI10rKSkrJC8pKSkge1xuXHRcdG8gPSBfc3RycmV2KHdyaXRlX251bV9pbnQodHlwZSwgZm10LnJlcGxhY2UoL1tcXFxcLV0vZyxcIlwiKSwgdmFsKSk7XG5cdFx0cmkgPSAwO1xuXHRcdHJldHVybiBfc3RycmV2KF9zdHJyZXYoZm10LnJlcGxhY2UoL1xcXFwvZyxcIlwiKSkucmVwbGFjZSgvWzAjXS9nLGZ1bmN0aW9uKHgpe3JldHVybiByaTxvLmxlbmd0aD9vLmNoYXJBdChyaSsrKTp4PT09JzAnPycwJzpcIlwiO30pKTtcblx0fVxuXHRpZihmbXQubWF0Y2gocGhvbmUpKSB7XG5cdFx0byA9IHdyaXRlX251bV9pbnQodHlwZSwgXCIjIyMjIyMjIyMjXCIsIHZhbCk7XG5cdFx0cmV0dXJuIFwiKFwiICsgby5zdWJzdHIoMCwzKSArIFwiKSBcIiArIG8uc3Vic3RyKDMsIDMpICsgXCItXCIgKyBvLnN1YnN0cig2KTtcblx0fVxuXHR2YXIgb2EgPSBcIlwiO1xuXHRpZigociA9IGZtdC5tYXRjaCgvXihbIzA/XSspKCA/KVxcLyggPykoWyMwP10rKS8pKSkge1xuXHRcdHJpID0gTWF0aC5taW4oLyo6OlN0cmluZygqL3JbNF0vKjo6KSovLmxlbmd0aCw3KTtcblx0XHRmZiA9IFNTRl9mcmFjKGF2YWwsIE1hdGgucG93KDEwLHJpKS0xLCBmYWxzZSk7XG5cdFx0byA9IFwiXCIgKyBzaWduO1xuXHRcdG9hID0gd3JpdGVfbnVtKFwiblwiLCAvKjo6U3RyaW5nKCovclsxXS8qOjopKi8sIGZmWzFdKTtcblx0XHRpZihvYS5jaGFyQXQob2EubGVuZ3RoLTEpID09IFwiIFwiKSBvYSA9IG9hLnN1YnN0cigwLG9hLmxlbmd0aC0xKSArIFwiMFwiO1xuXHRcdG8gKz0gb2EgKyAvKjo6U3RyaW5nKCovclsyXS8qOjopKi8gKyBcIi9cIiArIC8qOjpTdHJpbmcoKi9yWzNdLyo6OikqLztcblx0XHRvYSA9IHJwYWRfKGZmWzJdLHJpKTtcblx0XHRpZihvYS5sZW5ndGggPCByWzRdLmxlbmd0aCkgb2EgPSBoYXNocShyWzRdLnN1YnN0cihyWzRdLmxlbmd0aC1vYS5sZW5ndGgpKSArIG9hO1xuXHRcdG8gKz0gb2E7XG5cdFx0cmV0dXJuIG87XG5cdH1cblx0aWYoKHIgPSBmbXQubWF0Y2goL14jIChbIzA/XSspKCA/KVxcLyggPykoWyMwP10rKS8pKSkge1xuXHRcdHJpID0gTWF0aC5taW4oTWF0aC5tYXgoclsxXS5sZW5ndGgsIHJbNF0ubGVuZ3RoKSw3KTtcblx0XHRmZiA9IFNTRl9mcmFjKGF2YWwsIE1hdGgucG93KDEwLHJpKS0xLCB0cnVlKTtcblx0XHRyZXR1cm4gc2lnbiArIChmZlswXXx8KGZmWzFdID8gXCJcIiA6IFwiMFwiKSkgKyBcIiBcIiArIChmZlsxXSA/IHBhZF8oZmZbMV0scmkpICsgclsyXSArIFwiL1wiICsgclszXSArIHJwYWRfKGZmWzJdLHJpKTogZmlsbChcIiBcIiwgMipyaSsxICsgclsyXS5sZW5ndGggKyByWzNdLmxlbmd0aCkpO1xuXHR9XG5cdGlmKChyID0gZm10Lm1hdGNoKC9eWyMwP10rJC8pKSkge1xuXHRcdG8gPSBcIlwiICsgdmFsO1xuXHRcdGlmKGZtdC5sZW5ndGggPD0gby5sZW5ndGgpIHJldHVybiBvO1xuXHRcdHJldHVybiBoYXNocShmbXQuc3Vic3RyKDAsZm10Lmxlbmd0aC1vLmxlbmd0aCkpICsgbztcblx0fVxuXHRpZigociA9IGZtdC5tYXRjaCgvXihbIzBdKylcXC4oWyMwXSspJC8pKSkge1xuXHRcdG8gPSBcIlwiICsgdmFsLnRvRml4ZWQoTWF0aC5taW4oclsyXS5sZW5ndGgsMTApKS5yZXBsYWNlKC8oW14wXSkwKyQvLFwiJDFcIik7XG5cdFx0cmkgPSBvLmluZGV4T2YoXCIuXCIpO1xuXHRcdHZhciBscmVzID0gZm10LmluZGV4T2YoXCIuXCIpIC0gcmksIHJyZXMgPSBmbXQubGVuZ3RoIC0gby5sZW5ndGggLSBscmVzO1xuXHRcdHJldHVybiBoYXNocShmbXQuc3Vic3RyKDAsbHJlcykgKyBvICsgZm10LnN1YnN0cihmbXQubGVuZ3RoLXJyZXMpKTtcblx0fVxuXHRpZigociA9IGZtdC5tYXRjaCgvXjAwLDAwMFxcLihbIzBdKjApJC8pKSkge1xuXHRcdHJldHVybiB2YWwgPCAwID8gXCItXCIgKyB3cml0ZV9udW1faW50KHR5cGUsIGZtdCwgLXZhbCkgOiBjb21tYWlmeShcIlwiK3ZhbCkucmVwbGFjZSgvXlxcZCxcXGR7M30kLyxcIjAkJlwiKS5yZXBsYWNlKC9eXFxkKiQvLGZ1bmN0aW9uKCQkKSB7IHJldHVybiBcIjAwLFwiICsgKCQkLmxlbmd0aCA8IDMgPyBwYWQwKDAsMy0kJC5sZW5ndGgpIDogXCJcIikgKyAkJDsgfSkgKyBcIi5cIiArIHBhZDAoMCxyWzFdLmxlbmd0aCk7XG5cdH1cblx0c3dpdGNoKGZtdCkge1xuXHRcdGNhc2UgXCIjIyMsIyMjXCI6XG5cdFx0Y2FzZSBcIiMjLCMjI1wiOlxuXHRcdGNhc2UgXCIjLCMjI1wiOiB2YXIgeCA9IGNvbW1haWZ5KFwiXCIrYXZhbCk7IHJldHVybiB4ICE9PSBcIjBcIiA/IHNpZ24gKyB4IDogXCJcIjtcblx0XHRkZWZhdWx0OlxuXHRcdFx0aWYoZm10Lm1hdGNoKC9cXC5bMCM/XSokLykpIHJldHVybiB3cml0ZV9udW1faW50KHR5cGUsIGZtdC5zbGljZSgwLGZtdC5sYXN0SW5kZXhPZihcIi5cIikpLCB2YWwpICsgaGFzaHEoZm10LnNsaWNlKGZtdC5sYXN0SW5kZXhPZihcIi5cIikpKTtcblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBmb3JtYXQgfFwiICsgZm10ICsgXCJ8XCIpO1xufVxuZnVuY3Rpb24gd3JpdGVfbnVtKHR5cGUvKjpzdHJpbmcqLywgZm10Lyo6c3RyaW5nKi8sIHZhbC8qOm51bWJlciovKS8qOnN0cmluZyovIHtcblx0cmV0dXJuICh2YWx8MCkgPT09IHZhbCA/IHdyaXRlX251bV9pbnQodHlwZSwgZm10LCB2YWwpIDogd3JpdGVfbnVtX2ZsdCh0eXBlLCBmbXQsIHZhbCk7XG59XG5mdW5jdGlvbiBTU0Zfc3BsaXRfZm10KGZtdC8qOnN0cmluZyovKS8qOkFycmF5PHN0cmluZz4qLyB7XG5cdHZhciBvdXQvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0dmFyIGluX3N0ciA9IGZhbHNlLyosIGNjKi87XG5cdGZvcih2YXIgaSA9IDAsIGogPSAwOyBpIDwgZm10Lmxlbmd0aDsgKytpKSBzd2l0Y2goKC8qY2M9Ki9mbXQuY2hhckNvZGVBdChpKSkpIHtcblx0XHRjYXNlIDM0OiAvKiAnXCInICovXG5cdFx0XHRpbl9zdHIgPSAhaW5fc3RyOyBicmVhaztcblx0XHRjYXNlIDk1OiBjYXNlIDQyOiBjYXNlIDkyOiAvKiAnXycgJyonICdcXFxcJyAqL1xuXHRcdFx0KytpOyBicmVhaztcblx0XHRjYXNlIDU5OiAvKiAnOycgKi9cblx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IGZtdC5zdWJzdHIoaixpLWopO1xuXHRcdFx0aiA9IGkrMTtcblx0fVxuXHRvdXRbb3V0Lmxlbmd0aF0gPSBmbXQuc3Vic3RyKGopO1xuXHRpZihpbl9zdHIgPT09IHRydWUpIHRocm93IG5ldyBFcnJvcihcIkZvcm1hdCB8XCIgKyBmbXQgKyBcInwgdW50ZXJtaW5hdGVkIHN0cmluZyBcIik7XG5cdHJldHVybiBvdXQ7XG59XG5cbnZhciBTU0ZfYWJzdGltZSA9IC9cXFtbSGhNbVNzXFx1MEUwQVxcdTBFMTlcXHUwRTE3XSpcXF0vO1xuZnVuY3Rpb24gZm10X2lzX2RhdGUoZm10Lyo6c3RyaW5nKi8pLyo6Ym9vbGVhbiovIHtcblx0dmFyIGkgPSAwLCAvKmNjID0gMCwqLyBjID0gXCJcIiwgbyA9IFwiXCI7XG5cdHdoaWxlKGkgPCBmbXQubGVuZ3RoKSB7XG5cdFx0c3dpdGNoKChjID0gZm10LmNoYXJBdChpKSkpIHtcblx0XHRcdGNhc2UgJ0cnOiBpZihTU0ZfaXNnZW5lcmFsKGZtdCwgaSkpIGkrPSA2OyBpKys7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnXCInOiBmb3IoOygvKmNjPSovZm10LmNoYXJDb2RlQXQoKytpKSkgIT09IDM0ICYmIGkgPCBmbXQubGVuZ3RoOyl7LyplbXB0eSovfSArK2k7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnXFxcXCc6IGkrPTI7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnXyc6IGkrPTI7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnQCc6ICsraTsgYnJlYWs7XG5cdFx0XHRjYXNlICdCJzogY2FzZSAnYic6XG5cdFx0XHRcdGlmKGZtdC5jaGFyQXQoaSsxKSA9PT0gXCIxXCIgfHwgZm10LmNoYXJBdChpKzEpID09PSBcIjJcIikgcmV0dXJuIHRydWU7XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJ00nOiBjYXNlICdEJzogY2FzZSAnWSc6IGNhc2UgJ0gnOiBjYXNlICdTJzogY2FzZSAnRSc6XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJ20nOiBjYXNlICdkJzogY2FzZSAneSc6IGNhc2UgJ2gnOiBjYXNlICdzJzogY2FzZSAnZSc6IGNhc2UgJ2cnOiByZXR1cm4gdHJ1ZTtcblx0XHRcdGNhc2UgJ0EnOiBjYXNlICdhJzogY2FzZSAn5LiKJzpcblx0XHRcdFx0aWYoZm10LnN1YnN0cihpLCAzKS50b1VwcGVyQ2FzZSgpID09PSBcIkEvUFwiKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0aWYoZm10LnN1YnN0cihpLCA1KS50b1VwcGVyQ2FzZSgpID09PSBcIkFNL1BNXCIpIHJldHVybiB0cnVlO1xuXHRcdFx0XHRpZihmbXQuc3Vic3RyKGksIDUpLnRvVXBwZXJDYXNlKCkgPT09IFwi5LiK5Y2IL+S4i+WNiFwiKSByZXR1cm4gdHJ1ZTtcblx0XHRcdFx0KytpOyBicmVhaztcblx0XHRcdGNhc2UgJ1snOlxuXHRcdFx0XHRvID0gYztcblx0XHRcdFx0d2hpbGUoZm10LmNoYXJBdChpKyspICE9PSAnXScgJiYgaSA8IGZtdC5sZW5ndGgpIG8gKz0gZm10LmNoYXJBdChpKTtcblx0XHRcdFx0aWYoby5tYXRjaChTU0ZfYWJzdGltZSkpIHJldHVybiB0cnVlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJy4nOlxuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICcwJzogY2FzZSAnIyc6XG5cdFx0XHRcdHdoaWxlKGkgPCBmbXQubGVuZ3RoICYmIChcIjAjPy4sRSstJVwiLmluZGV4T2YoYz1mbXQuY2hhckF0KCsraSkpID4gLTEgfHwgKGM9PSdcXFxcJyAmJiBmbXQuY2hhckF0KGkrMSkgPT0gXCItXCIgJiYgXCIwI1wiLmluZGV4T2YoZm10LmNoYXJBdChpKzIpKT4tMSkpKXsvKiBlbXB0eSAqL31cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc/Jzogd2hpbGUoZm10LmNoYXJBdCgrK2kpID09PSBjKXsvKiBlbXB0eSAqL30gYnJlYWs7XG5cdFx0XHRjYXNlICcqJzogKytpOyBpZihmbXQuY2hhckF0KGkpID09ICcgJyB8fCBmbXQuY2hhckF0KGkpID09ICcqJykgKytpOyBicmVhaztcblx0XHRcdGNhc2UgJygnOiBjYXNlICcpJzogKytpOyBicmVhaztcblx0XHRcdGNhc2UgJzEnOiBjYXNlICcyJzogY2FzZSAnMyc6IGNhc2UgJzQnOiBjYXNlICc1JzogY2FzZSAnNic6IGNhc2UgJzcnOiBjYXNlICc4JzogY2FzZSAnOSc6XG5cdFx0XHRcdHdoaWxlKGkgPCBmbXQubGVuZ3RoICYmIFwiMDEyMzQ1Njc4OVwiLmluZGV4T2YoZm10LmNoYXJBdCgrK2kpKSA+IC0xKXsvKiBlbXB0eSAqL30gYnJlYWs7XG5cdFx0XHRjYXNlICcgJzogKytpOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6ICsraTsgYnJlYWs7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gZXZhbF9mbXQoZm10Lyo6c3RyaW5nKi8sIHYvKjphbnkqLywgb3B0cy8qOmFueSovLCBmbGVuLyo6bnVtYmVyKi8pIHtcblx0dmFyIG91dCA9IFtdLCBvID0gXCJcIiwgaSA9IDAsIGMgPSBcIlwiLCBsc3Q9J3QnLCBkdCwgaiwgY2M7XG5cdHZhciBocj0nSCc7XG5cdC8qIFRva2VuaXplICovXG5cdHdoaWxlKGkgPCBmbXQubGVuZ3RoKSB7XG5cdFx0c3dpdGNoKChjID0gZm10LmNoYXJBdChpKSkpIHtcblx0XHRcdGNhc2UgJ0cnOiAvKiBHZW5lcmFsICovXG5cdFx0XHRcdGlmKCFTU0ZfaXNnZW5lcmFsKGZtdCwgaSkpIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIGNoYXJhY3RlciAnICsgYyArICcgaW4gJyArZm10KTtcblx0XHRcdFx0b3V0W291dC5sZW5ndGhdID0ge3Q6J0cnLCB2OidHZW5lcmFsJ307IGkrPTc7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnXCInOiAvKiBMaXRlcmFsIHRleHQgKi9cblx0XHRcdFx0Zm9yKG89XCJcIjsoY2M9Zm10LmNoYXJDb2RlQXQoKytpKSkgIT09IDM0ICYmIGkgPCBmbXQubGVuZ3RoOykgbyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNjKTtcblx0XHRcdFx0b3V0W291dC5sZW5ndGhdID0ge3Q6J3QnLCB2Om99OyArK2k7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnXFxcXCc6IHZhciB3ID0gZm10LmNoYXJBdCgrK2kpLCB0ID0gKHcgPT09IFwiKFwiIHx8IHcgPT09IFwiKVwiKSA/IHcgOiAndCc7XG5cdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0OnQsIHY6d307ICsraTsgYnJlYWs7XG5cdFx0XHRjYXNlICdfJzogb3V0W291dC5sZW5ndGhdID0ge3Q6J3QnLCB2OlwiIFwifTsgaSs9MjsgYnJlYWs7XG5cdFx0XHRjYXNlICdAJzogLyogVGV4dCBQbGFjZWhvbGRlciAqL1xuXHRcdFx0XHRvdXRbb3V0Lmxlbmd0aF0gPSB7dDonVCcsIHY6dn07ICsraTsgYnJlYWs7XG5cdFx0XHRjYXNlICdCJzogY2FzZSAnYic6XG5cdFx0XHRcdGlmKGZtdC5jaGFyQXQoaSsxKSA9PT0gXCIxXCIgfHwgZm10LmNoYXJBdChpKzEpID09PSBcIjJcIikge1xuXHRcdFx0XHRcdGlmKGR0PT1udWxsKSB7IGR0PVNTRl9wYXJzZV9kYXRlX2NvZGUodiwgb3B0cywgZm10LmNoYXJBdChpKzEpID09PSBcIjJcIik7IGlmKGR0PT1udWxsKSByZXR1cm4gXCJcIjsgfVxuXHRcdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0OidYJywgdjpmbXQuc3Vic3RyKGksMil9OyBsc3QgPSBjOyBpKz0yOyBicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICdNJzogY2FzZSAnRCc6IGNhc2UgJ1knOiBjYXNlICdIJzogY2FzZSAnUyc6IGNhc2UgJ0UnOlxuXHRcdFx0XHRjID0gYy50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICdtJzogY2FzZSAnZCc6IGNhc2UgJ3knOiBjYXNlICdoJzogY2FzZSAncyc6IGNhc2UgJ2UnOiBjYXNlICdnJzpcblx0XHRcdFx0aWYodiA8IDApIHJldHVybiBcIlwiO1xuXHRcdFx0XHRpZihkdD09bnVsbCkgeyBkdD1TU0ZfcGFyc2VfZGF0ZV9jb2RlKHYsIG9wdHMpOyBpZihkdD09bnVsbCkgcmV0dXJuIFwiXCI7IH1cblx0XHRcdFx0byA9IGM7IHdoaWxlKCsraSA8IGZtdC5sZW5ndGggJiYgZm10LmNoYXJBdChpKS50b0xvd2VyQ2FzZSgpID09PSBjKSBvKz1jO1xuXHRcdFx0XHRpZihjID09PSAnbScgJiYgbHN0LnRvTG93ZXJDYXNlKCkgPT09ICdoJykgYyA9ICdNJztcblx0XHRcdFx0aWYoYyA9PT0gJ2gnKSBjID0gaHI7XG5cdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0OmMsIHY6b307IGxzdCA9IGM7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnQSc6IGNhc2UgJ2EnOiBjYXNlICfkuIonOlxuXHRcdFx0XHR2YXIgcT17dDpjLCB2OmN9O1xuXHRcdFx0XHRpZihkdD09bnVsbCkgZHQ9U1NGX3BhcnNlX2RhdGVfY29kZSh2LCBvcHRzKTtcblx0XHRcdFx0aWYoZm10LnN1YnN0cihpLCAzKS50b1VwcGVyQ2FzZSgpID09PSBcIkEvUFwiKSB7IGlmKGR0IT1udWxsKSBxLnYgPSBkdC5IID49IDEyID8gXCJQXCIgOiBcIkFcIjsgcS50ID0gJ1QnOyBocj0naCc7aSs9Mzt9XG5cdFx0XHRcdGVsc2UgaWYoZm10LnN1YnN0cihpLDUpLnRvVXBwZXJDYXNlKCkgPT09IFwiQU0vUE1cIikgeyBpZihkdCE9bnVsbCkgcS52ID0gZHQuSCA+PSAxMiA/IFwiUE1cIiA6IFwiQU1cIjsgcS50ID0gJ1QnOyBpKz01OyBocj0naCc7IH1cblx0XHRcdFx0ZWxzZSBpZihmbXQuc3Vic3RyKGksNSkudG9VcHBlckNhc2UoKSA9PT0gXCLkuIrljYgv5LiL5Y2IXCIpIHsgaWYoZHQhPW51bGwpIHEudiA9IGR0LkggPj0gMTIgPyBcIuS4i+WNiFwiIDogXCLkuIrljYhcIjsgcS50ID0gJ1QnOyBpKz01OyBocj0naCc7IH1cblx0XHRcdFx0ZWxzZSB7IHEudCA9IFwidFwiOyArK2k7IH1cblx0XHRcdFx0aWYoZHQ9PW51bGwgJiYgcS50ID09PSAnVCcpIHJldHVybiBcIlwiO1xuXHRcdFx0XHRvdXRbb3V0Lmxlbmd0aF0gPSBxOyBsc3QgPSBjOyBicmVhaztcblx0XHRcdGNhc2UgJ1snOlxuXHRcdFx0XHRvID0gYztcblx0XHRcdFx0d2hpbGUoZm10LmNoYXJBdChpKyspICE9PSAnXScgJiYgaSA8IGZtdC5sZW5ndGgpIG8gKz0gZm10LmNoYXJBdChpKTtcblx0XHRcdFx0aWYoby5zbGljZSgtMSkgIT09ICddJykgdGhyb3cgJ3VudGVybWluYXRlZCBcIltcIiBibG9jazogfCcgKyBvICsgJ3wnO1xuXHRcdFx0XHRpZihvLm1hdGNoKFNTRl9hYnN0aW1lKSkge1xuXHRcdFx0XHRcdGlmKGR0PT1udWxsKSB7IGR0PVNTRl9wYXJzZV9kYXRlX2NvZGUodiwgb3B0cyk7IGlmKGR0PT1udWxsKSByZXR1cm4gXCJcIjsgfVxuXHRcdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0OidaJywgdjpvLnRvTG93ZXJDYXNlKCl9O1xuXHRcdFx0XHRcdGxzdCA9IG8uY2hhckF0KDEpO1xuXHRcdFx0XHR9IGVsc2UgaWYoby5pbmRleE9mKFwiJFwiKSA+IC0xKSB7XG5cdFx0XHRcdFx0byA9IChvLm1hdGNoKC9cXCQoW14tXFxbXFxdXSopLyl8fFtdKVsxXXx8XCIkXCI7XG5cdFx0XHRcdFx0aWYoIWZtdF9pc19kYXRlKGZtdCkpIG91dFtvdXQubGVuZ3RoXSA9IHt0Oid0Jyx2Om99O1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0LyogTnVtYmVycyAqL1xuXHRcdFx0Y2FzZSAnLic6XG5cdFx0XHRcdGlmKGR0ICE9IG51bGwpIHtcblx0XHRcdFx0XHRvID0gYzsgd2hpbGUoKytpIDwgZm10Lmxlbmd0aCAmJiAoYz1mbXQuY2hhckF0KGkpKSA9PT0gXCIwXCIpIG8gKz0gYztcblx0XHRcdFx0XHRvdXRbb3V0Lmxlbmd0aF0gPSB7dDoncycsIHY6b307IGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJzAnOiBjYXNlICcjJzpcblx0XHRcdFx0byA9IGM7IHdoaWxlKCsraSA8IGZtdC5sZW5ndGggJiYgXCIwIz8uLEUrLSVcIi5pbmRleE9mKGM9Zm10LmNoYXJBdChpKSkgPiAtMSkgbyArPSBjO1xuXHRcdFx0XHRvdXRbb3V0Lmxlbmd0aF0gPSB7dDonbicsIHY6b307IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPyc6XG5cdFx0XHRcdG8gPSBjOyB3aGlsZShmbXQuY2hhckF0KCsraSkgPT09IGMpIG8rPWM7XG5cdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0OmMsIHY6b307IGxzdCA9IGM7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnKic6ICsraTsgaWYoZm10LmNoYXJBdChpKSA9PSAnICcgfHwgZm10LmNoYXJBdChpKSA9PSAnKicpICsraTsgYnJlYWs7IC8vICoqXG5cdFx0XHRjYXNlICcoJzogY2FzZSAnKSc6IG91dFtvdXQubGVuZ3RoXSA9IHt0OihmbGVuPT09MT8ndCc6YyksIHY6Y307ICsraTsgYnJlYWs7XG5cdFx0XHRjYXNlICcxJzogY2FzZSAnMic6IGNhc2UgJzMnOiBjYXNlICc0JzogY2FzZSAnNSc6IGNhc2UgJzYnOiBjYXNlICc3JzogY2FzZSAnOCc6IGNhc2UgJzknOlxuXHRcdFx0XHRvID0gYzsgd2hpbGUoaSA8IGZtdC5sZW5ndGggJiYgXCIwMTIzNDU2Nzg5XCIuaW5kZXhPZihmbXQuY2hhckF0KCsraSkpID4gLTEpIG8rPWZtdC5jaGFyQXQoaSk7XG5cdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0OidEJywgdjpvfTsgYnJlYWs7XG5cdFx0XHRjYXNlICcgJzogb3V0W291dC5sZW5ndGhdID0ge3Q6YywgdjpjfTsgKytpOyBicmVhaztcblx0XHRcdGNhc2UgJyQnOiBvdXRbb3V0Lmxlbmd0aF0gPSB7dDondCcsIHY6JyQnfTsgKytpOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmKFwiLCQtKy8oKTohXiYnfnt9PD494oKsYWNmaWprbG9wcXJ0dXZ3eHpQXCIuaW5kZXhPZihjKSA9PT0gLTEpIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIGNoYXJhY3RlciAnICsgYyArICcgaW4gJyArIGZtdCk7XG5cdFx0XHRcdG91dFtvdXQubGVuZ3RoXSA9IHt0Oid0JywgdjpjfTsgKytpOyBicmVhaztcblx0XHR9XG5cdH1cblxuXHQvKiBTY2FuIGZvciBkYXRlL3RpbWUgcGFydHMgKi9cblx0dmFyIGJ0ID0gMCwgc3MwID0gMCwgc3NtO1xuXHRmb3IoaT1vdXQubGVuZ3RoLTEsIGxzdD0ndCc7IGkgPj0gMDsgLS1pKSB7XG5cdFx0c3dpdGNoKG91dFtpXS50KSB7XG5cdFx0XHRjYXNlICdoJzogY2FzZSAnSCc6IG91dFtpXS50ID0gaHI7IGxzdD0naCc7IGlmKGJ0IDwgMSkgYnQgPSAxOyBicmVhaztcblx0XHRcdGNhc2UgJ3MnOlxuXHRcdFx0XHRpZigoc3NtPW91dFtpXS52Lm1hdGNoKC9cXC4wKyQvKSkpIHNzMD1NYXRoLm1heChzczAsc3NtWzBdLmxlbmd0aC0xKTtcblx0XHRcdFx0aWYoYnQgPCAzKSBidCA9IDM7XG5cdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICdkJzogY2FzZSAneSc6IGNhc2UgJ00nOiBjYXNlICdlJzogbHN0PW91dFtpXS50OyBicmVhaztcblx0XHRcdGNhc2UgJ20nOiBpZihsc3QgPT09ICdzJykgeyBvdXRbaV0udCA9ICdNJzsgaWYoYnQgPCAyKSBidCA9IDI7IH0gYnJlYWs7XG5cdFx0XHRjYXNlICdYJzogLyppZihvdXRbaV0udiA9PT0gXCJCMlwiKTsqL1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ1onOlxuXHRcdFx0XHRpZihidCA8IDEgJiYgb3V0W2ldLnYubWF0Y2goL1tIaF0vKSkgYnQgPSAxO1xuXHRcdFx0XHRpZihidCA8IDIgJiYgb3V0W2ldLnYubWF0Y2goL1tNbV0vKSkgYnQgPSAyO1xuXHRcdFx0XHRpZihidCA8IDMgJiYgb3V0W2ldLnYubWF0Y2goL1tTc10vKSkgYnQgPSAzO1xuXHRcdH1cblx0fVxuXHQvKiB0aW1lIHJvdW5kaW5nIGRlcGVuZHMgb24gcHJlc2VuY2Ugb2YgbWludXRlIC8gc2Vjb25kIC8gdXNlYyBmaWVsZHMgKi9cblx0c3dpdGNoKGJ0KSB7XG5cdFx0Y2FzZSAwOiBicmVhaztcblx0XHRjYXNlIDE6XG5cdFx0XHQvKjo6aWYoIWR0KSBicmVhazsqL1xuXHRcdFx0aWYoZHQudSA+PSAwLjUpIHsgZHQudSA9IDA7ICsrZHQuUzsgfVxuXHRcdFx0aWYoZHQuUyA+PSAgNjApIHsgZHQuUyA9IDA7ICsrZHQuTTsgfVxuXHRcdFx0aWYoZHQuTSA+PSAgNjApIHsgZHQuTSA9IDA7ICsrZHQuSDsgfVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAyOlxuXHRcdFx0Lyo6OmlmKCFkdCkgYnJlYWs7Ki9cblx0XHRcdGlmKGR0LnUgPj0gMC41KSB7IGR0LnUgPSAwOyArK2R0LlM7IH1cblx0XHRcdGlmKGR0LlMgPj0gIDYwKSB7IGR0LlMgPSAwOyArK2R0Lk07IH1cblx0XHRcdGJyZWFrO1xuXHR9XG5cblx0LyogcmVwbGFjZSBmaWVsZHMgKi9cblx0dmFyIG5zdHIgPSBcIlwiLCBqajtcblx0Zm9yKGk9MDsgaSA8IG91dC5sZW5ndGg7ICsraSkge1xuXHRcdHN3aXRjaChvdXRbaV0udCkge1xuXHRcdFx0Y2FzZSAndCc6IGNhc2UgJ1QnOiBjYXNlICcgJzogY2FzZSAnRCc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnWCc6IG91dFtpXS52ID0gXCJcIjsgb3V0W2ldLnQgPSBcIjtcIjsgYnJlYWs7XG5cdFx0XHRjYXNlICdkJzogY2FzZSAnbSc6IGNhc2UgJ3knOiBjYXNlICdoJzogY2FzZSAnSCc6IGNhc2UgJ00nOiBjYXNlICdzJzogY2FzZSAnZSc6IGNhc2UgJ2InOiBjYXNlICdaJzpcblx0XHRcdFx0Lyo6OmlmKCFkdCkgdGhyb3cgXCJ1bnJlYWNoYWJsZVwiOyAqL1xuXHRcdFx0XHRvdXRbaV0udiA9IFNTRl93cml0ZV9kYXRlKG91dFtpXS50LmNoYXJDb2RlQXQoMCksIG91dFtpXS52LCBkdCwgc3MwKTtcblx0XHRcdFx0b3V0W2ldLnQgPSAndCc7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnbic6IGNhc2UgJz8nOlxuXHRcdFx0XHRqaiA9IGkrMTtcblx0XHRcdFx0d2hpbGUob3V0W2pqXSAhPSBudWxsICYmIChcblx0XHRcdFx0XHQoYz1vdXRbampdLnQpID09PSBcIj9cIiB8fCBjID09PSBcIkRcIiB8fFxuXHRcdFx0XHRcdCgoYyA9PT0gXCIgXCIgfHwgYyA9PT0gXCJ0XCIpICYmIG91dFtqaisxXSAhPSBudWxsICYmIChvdXRbamorMV0udCA9PT0gJz8nIHx8IG91dFtqaisxXS50ID09PSBcInRcIiAmJiBvdXRbamorMV0udiA9PT0gJy8nKSkgfHxcblx0XHRcdFx0XHQob3V0W2ldLnQgPT09ICcoJyAmJiAoYyA9PT0gJyAnIHx8IGMgPT09ICduJyB8fCBjID09PSAnKScpKSB8fFxuXHRcdFx0XHRcdChjID09PSAndCcgJiYgKG91dFtqal0udiA9PT0gJy8nIHx8IG91dFtqal0udiA9PT0gJyAnICYmIG91dFtqaisxXSAhPSBudWxsICYmIG91dFtqaisxXS50ID09ICc/JykpXG5cdFx0XHRcdCkpIHtcblx0XHRcdFx0XHRvdXRbaV0udiArPSBvdXRbampdLnY7XG5cdFx0XHRcdFx0b3V0W2pqXSA9IHt2OlwiXCIsIHQ6XCI7XCJ9OyArK2pqO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5zdHIgKz0gb3V0W2ldLnY7XG5cdFx0XHRcdGkgPSBqai0xOyBicmVhaztcblx0XHRcdGNhc2UgJ0cnOiBvdXRbaV0udCA9ICd0Jzsgb3V0W2ldLnYgPSBTU0ZfZ2VuZXJhbCh2LG9wdHMpOyBicmVhaztcblx0XHR9XG5cdH1cblx0dmFyIHZ2ID0gXCJcIiwgbXl2LCBvc3RyO1xuXHRpZihuc3RyLmxlbmd0aCA+IDApIHtcblx0XHRpZihuc3RyLmNoYXJDb2RlQXQoMCkgPT0gNDApIC8qICcoJyAqLyB7XG5cdFx0XHRteXYgPSAodjwwJiZuc3RyLmNoYXJDb2RlQXQoMCkgPT09IDQ1ID8gLXYgOiB2KTtcblx0XHRcdG9zdHIgPSB3cml0ZV9udW0oJ24nLCBuc3RyLCBteXYpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRteXYgPSAodjwwICYmIGZsZW4gPiAxID8gLXYgOiB2KTtcblx0XHRcdG9zdHIgPSB3cml0ZV9udW0oJ24nLCBuc3RyLCBteXYpO1xuXHRcdFx0aWYobXl2IDwgMCAmJiBvdXRbMF0gJiYgb3V0WzBdLnQgPT0gJ3QnKSB7XG5cdFx0XHRcdG9zdHIgPSBvc3RyLnN1YnN0cigxKTtcblx0XHRcdFx0b3V0WzBdLnYgPSBcIi1cIiArIG91dFswXS52O1xuXHRcdFx0fVxuXHRcdH1cblx0XHRqaj1vc3RyLmxlbmd0aC0xO1xuXHRcdHZhciBkZWNwdCA9IG91dC5sZW5ndGg7XG5cdFx0Zm9yKGk9MDsgaSA8IG91dC5sZW5ndGg7ICsraSkgaWYob3V0W2ldICE9IG51bGwgJiYgb3V0W2ldLnQgIT0gJ3QnICYmIG91dFtpXS52LmluZGV4T2YoXCIuXCIpID4gLTEpIHsgZGVjcHQgPSBpOyBicmVhazsgfVxuXHRcdHZhciBsYXN0aT1vdXQubGVuZ3RoO1xuXHRcdGlmKGRlY3B0ID09PSBvdXQubGVuZ3RoICYmIG9zdHIuaW5kZXhPZihcIkVcIikgPT09IC0xKSB7XG5cdFx0XHRmb3IoaT1vdXQubGVuZ3RoLTE7IGk+PSAwOy0taSkge1xuXHRcdFx0XHRpZihvdXRbaV0gPT0gbnVsbCB8fCAnbj8nLmluZGV4T2Yob3V0W2ldLnQpID09PSAtMSkgY29udGludWU7XG5cdFx0XHRcdGlmKGpqPj1vdXRbaV0udi5sZW5ndGgtMSkgeyBqaiAtPSBvdXRbaV0udi5sZW5ndGg7IG91dFtpXS52ID0gb3N0ci5zdWJzdHIoamorMSwgb3V0W2ldLnYubGVuZ3RoKTsgfVxuXHRcdFx0XHRlbHNlIGlmKGpqIDwgMCkgb3V0W2ldLnYgPSBcIlwiO1xuXHRcdFx0XHRlbHNlIHsgb3V0W2ldLnYgPSBvc3RyLnN1YnN0cigwLCBqaisxKTsgamogPSAtMTsgfVxuXHRcdFx0XHRvdXRbaV0udCA9ICd0Jztcblx0XHRcdFx0bGFzdGkgPSBpO1xuXHRcdFx0fVxuXHRcdFx0aWYoamo+PTAgJiYgbGFzdGk8b3V0Lmxlbmd0aCkgb3V0W2xhc3RpXS52ID0gb3N0ci5zdWJzdHIoMCxqaisxKSArIG91dFtsYXN0aV0udjtcblx0XHR9XG5cdFx0ZWxzZSBpZihkZWNwdCAhPT0gb3V0Lmxlbmd0aCAmJiBvc3RyLmluZGV4T2YoXCJFXCIpID09PSAtMSkge1xuXHRcdFx0amogPSBvc3RyLmluZGV4T2YoXCIuXCIpLTE7XG5cdFx0XHRmb3IoaT1kZWNwdDsgaT49IDA7IC0taSkge1xuXHRcdFx0XHRpZihvdXRbaV0gPT0gbnVsbCB8fCAnbj8nLmluZGV4T2Yob3V0W2ldLnQpID09PSAtMSkgY29udGludWU7XG5cdFx0XHRcdGo9b3V0W2ldLnYuaW5kZXhPZihcIi5cIik+LTEmJmk9PT1kZWNwdD9vdXRbaV0udi5pbmRleE9mKFwiLlwiKS0xOm91dFtpXS52Lmxlbmd0aC0xO1xuXHRcdFx0XHR2diA9IG91dFtpXS52LnN1YnN0cihqKzEpO1xuXHRcdFx0XHRmb3IoOyBqPj0wOyAtLWopIHtcblx0XHRcdFx0XHRpZihqaj49MCAmJiAob3V0W2ldLnYuY2hhckF0KGopID09PSBcIjBcIiB8fCBvdXRbaV0udi5jaGFyQXQoaikgPT09IFwiI1wiKSkgdnYgPSBvc3RyLmNoYXJBdChqai0tKSArIHZ2O1xuXHRcdFx0XHR9XG5cdFx0XHRcdG91dFtpXS52ID0gdnY7XG5cdFx0XHRcdG91dFtpXS50ID0gJ3QnO1xuXHRcdFx0XHRsYXN0aSA9IGk7XG5cdFx0XHR9XG5cdFx0XHRpZihqaj49MCAmJiBsYXN0aTxvdXQubGVuZ3RoKSBvdXRbbGFzdGldLnYgPSBvc3RyLnN1YnN0cigwLGpqKzEpICsgb3V0W2xhc3RpXS52O1xuXHRcdFx0amogPSBvc3RyLmluZGV4T2YoXCIuXCIpKzE7XG5cdFx0XHRmb3IoaT1kZWNwdDsgaTxvdXQubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0aWYob3V0W2ldID09IG51bGwgfHwgKCduPygnLmluZGV4T2Yob3V0W2ldLnQpID09PSAtMSAmJiBpICE9PSBkZWNwdCkpIGNvbnRpbnVlO1xuXHRcdFx0XHRqPW91dFtpXS52LmluZGV4T2YoXCIuXCIpPi0xJiZpPT09ZGVjcHQ/b3V0W2ldLnYuaW5kZXhPZihcIi5cIikrMTowO1xuXHRcdFx0XHR2diA9IG91dFtpXS52LnN1YnN0cigwLGopO1xuXHRcdFx0XHRmb3IoOyBqPG91dFtpXS52Lmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0aWYoamo8b3N0ci5sZW5ndGgpIHZ2ICs9IG9zdHIuY2hhckF0KGpqKyspO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG91dFtpXS52ID0gdnY7XG5cdFx0XHRcdG91dFtpXS50ID0gJ3QnO1xuXHRcdFx0XHRsYXN0aSA9IGk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGZvcihpPTA7IGk8b3V0Lmxlbmd0aDsgKytpKSBpZihvdXRbaV0gIT0gbnVsbCAmJiAnbj8nLmluZGV4T2Yob3V0W2ldLnQpPi0xKSB7XG5cdFx0bXl2ID0gKGZsZW4gPjEgJiYgdiA8IDAgJiYgaT4wICYmIG91dFtpLTFdLnYgPT09IFwiLVwiID8gLXY6dik7XG5cdFx0b3V0W2ldLnYgPSB3cml0ZV9udW0ob3V0W2ldLnQsIG91dFtpXS52LCBteXYpO1xuXHRcdG91dFtpXS50ID0gJ3QnO1xuXHR9XG5cdHZhciByZXR2YWwgPSBcIlwiO1xuXHRmb3IoaT0wOyBpICE9PSBvdXQubGVuZ3RoOyArK2kpIGlmKG91dFtpXSAhPSBudWxsKSByZXR2YWwgKz0gb3V0W2ldLnY7XG5cdHJldHVybiByZXR2YWw7XG59XG5cbnZhciBjZnJlZ2V4MiA9IC9cXFsoPXw+Wz1dP3w8Wz49XT8pKC0/XFxkKyg/OlxcLlxcZCopPylcXF0vO1xuZnVuY3Rpb24gY2hrY29uZCh2LCBycikge1xuXHRpZihyciA9PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cdHZhciB0aHJlc2ggPSBwYXJzZUZsb2F0KHJyWzJdKTtcblx0c3dpdGNoKHJyWzFdKSB7XG5cdFx0Y2FzZSBcIj1cIjogIGlmKHYgPT0gdGhyZXNoKSByZXR1cm4gdHJ1ZTsgYnJlYWs7XG5cdFx0Y2FzZSBcIj5cIjogIGlmKHYgPiAgdGhyZXNoKSByZXR1cm4gdHJ1ZTsgYnJlYWs7XG5cdFx0Y2FzZSBcIjxcIjogIGlmKHYgPCAgdGhyZXNoKSByZXR1cm4gdHJ1ZTsgYnJlYWs7XG5cdFx0Y2FzZSBcIjw+XCI6IGlmKHYgIT0gdGhyZXNoKSByZXR1cm4gdHJ1ZTsgYnJlYWs7XG5cdFx0Y2FzZSBcIj49XCI6IGlmKHYgPj0gdGhyZXNoKSByZXR1cm4gdHJ1ZTsgYnJlYWs7XG5cdFx0Y2FzZSBcIjw9XCI6IGlmKHYgPD0gdGhyZXNoKSByZXR1cm4gdHJ1ZTsgYnJlYWs7XG5cdH1cblx0cmV0dXJuIGZhbHNlO1xufVxuZnVuY3Rpb24gY2hvb3NlX2ZtdChmLyo6c3RyaW5nKi8sIHYvKjphbnkqLykge1xuXHR2YXIgZm10ID0gU1NGX3NwbGl0X2ZtdChmKTtcblx0dmFyIGwgPSBmbXQubGVuZ3RoLCBsYXQgPSBmbXRbbC0xXS5pbmRleE9mKFwiQFwiKTtcblx0aWYobDw0ICYmIGxhdD4tMSkgLS1sO1xuXHRpZihmbXQubGVuZ3RoID4gNCkgdGhyb3cgbmV3IEVycm9yKFwiY2Fubm90IGZpbmQgcmlnaHQgZm9ybWF0IGZvciB8XCIgKyBmbXQuam9pbihcInxcIikgKyBcInxcIik7XG5cdGlmKHR5cGVvZiB2ICE9PSBcIm51bWJlclwiKSByZXR1cm4gWzQsIGZtdC5sZW5ndGggPT09IDQgfHwgbGF0Pi0xP2ZtdFtmbXQubGVuZ3RoLTFdOlwiQFwiXTtcblx0c3dpdGNoKGZtdC5sZW5ndGgpIHtcblx0XHRjYXNlIDE6IGZtdCA9IGxhdD4tMSA/IFtcIkdlbmVyYWxcIiwgXCJHZW5lcmFsXCIsIFwiR2VuZXJhbFwiLCBmbXRbMF1dIDogW2ZtdFswXSwgZm10WzBdLCBmbXRbMF0sIFwiQFwiXTsgYnJlYWs7XG5cdFx0Y2FzZSAyOiBmbXQgPSBsYXQ+LTEgPyBbZm10WzBdLCBmbXRbMF0sIGZtdFswXSwgZm10WzFdXSA6IFtmbXRbMF0sIGZtdFsxXSwgZm10WzBdLCBcIkBcIl07IGJyZWFrO1xuXHRcdGNhc2UgMzogZm10ID0gbGF0Pi0xID8gW2ZtdFswXSwgZm10WzFdLCBmbXRbMF0sIGZtdFsyXV0gOiBbZm10WzBdLCBmbXRbMV0sIGZtdFsyXSwgXCJAXCJdOyBicmVhaztcblx0XHRjYXNlIDQ6IGJyZWFrO1xuXHR9XG5cdHZhciBmZiA9IHYgPiAwID8gZm10WzBdIDogdiA8IDAgPyBmbXRbMV0gOiBmbXRbMl07XG5cdGlmKGZtdFswXS5pbmRleE9mKFwiW1wiKSA9PT0gLTEgJiYgZm10WzFdLmluZGV4T2YoXCJbXCIpID09PSAtMSkgcmV0dXJuIFtsLCBmZl07XG5cdGlmKGZtdFswXS5tYXRjaCgvXFxbWz08Pl0vKSAhPSBudWxsIHx8IGZtdFsxXS5tYXRjaCgvXFxbWz08Pl0vKSAhPSBudWxsKSB7XG5cdFx0dmFyIG0xID0gZm10WzBdLm1hdGNoKGNmcmVnZXgyKTtcblx0XHR2YXIgbTIgPSBmbXRbMV0ubWF0Y2goY2ZyZWdleDIpO1xuXHRcdHJldHVybiBjaGtjb25kKHYsIG0xKSA/IFtsLCBmbXRbMF1dIDogY2hrY29uZCh2LCBtMikgPyBbbCwgZm10WzFdXSA6IFtsLCBmbXRbbTEgIT0gbnVsbCAmJiBtMiAhPSBudWxsID8gMiA6IDFdXTtcblx0fVxuXHRyZXR1cm4gW2wsIGZmXTtcbn1cbmZ1bmN0aW9uIFNTRl9mb3JtYXQoZm10Lyo6c3RyaW5nfG51bWJlciovLHYvKjphbnkqLyxvLyo6P2FueSovKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IHt9O1xuXHR2YXIgc2ZtdCA9IFwiXCI7XG5cdHN3aXRjaCh0eXBlb2YgZm10KSB7XG5cdFx0Y2FzZSBcInN0cmluZ1wiOlxuXHRcdFx0aWYoZm10ID09IFwibS9kL3l5XCIgJiYgby5kYXRlTkYpIHNmbXQgPSBvLmRhdGVORjtcblx0XHRcdGVsc2Ugc2ZtdCA9IGZtdDtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgXCJudW1iZXJcIjpcblx0XHRcdGlmKGZtdCA9PSAxNCAmJiBvLmRhdGVORikgc2ZtdCA9IG8uZGF0ZU5GO1xuXHRcdFx0ZWxzZSBzZm10ID0gKG8udGFibGUgIT0gbnVsbCA/IChvLnRhYmxlLyo6YW55Ki8pIDogdGFibGVfZm10KVtmbXRdO1xuXHRcdFx0aWYoc2ZtdCA9PSBudWxsKSBzZm10ID0gKG8udGFibGUgJiYgby50YWJsZVtTU0ZfZGVmYXVsdF9tYXBbZm10XV0pIHx8IHRhYmxlX2ZtdFtTU0ZfZGVmYXVsdF9tYXBbZm10XV07XG5cdFx0XHRpZihzZm10ID09IG51bGwpIHNmbXQgPSBTU0ZfZGVmYXVsdF9zdHJbZm10XSB8fCBcIkdlbmVyYWxcIjtcblx0XHRcdGJyZWFrO1xuXHR9XG5cdGlmKFNTRl9pc2dlbmVyYWwoc2ZtdCwwKSkgcmV0dXJuIFNTRl9nZW5lcmFsKHYsIG8pO1xuXHRpZih2IGluc3RhbmNlb2YgRGF0ZSkgdiA9IGRhdGVudW1fbG9jYWwodiwgby5kYXRlMTkwNCk7XG5cdHZhciBmID0gY2hvb3NlX2ZtdChzZm10LCB2KTtcblx0aWYoU1NGX2lzZ2VuZXJhbChmWzFdKSkgcmV0dXJuIFNTRl9nZW5lcmFsKHYsIG8pO1xuXHRpZih2ID09PSB0cnVlKSB2ID0gXCJUUlVFXCI7IGVsc2UgaWYodiA9PT0gZmFsc2UpIHYgPSBcIkZBTFNFXCI7XG5cdGVsc2UgaWYodiA9PT0gXCJcIiB8fCB2ID09IG51bGwpIHJldHVybiBcIlwiO1xuXHRyZXR1cm4gZXZhbF9mbXQoZlsxXSwgdiwgbywgZlswXSk7XG59XG5mdW5jdGlvbiBTU0ZfbG9hZChmbXQvKjpzdHJpbmcqLywgaWR4Lyo6P251bWJlciovKS8qOm51bWJlciovIHtcblx0aWYodHlwZW9mIGlkeCAhPSAnbnVtYmVyJykge1xuXHRcdGlkeCA9ICtpZHggfHwgLTE7XG4vKjo6aWYodHlwZW9mIGlkeCAhPSAnbnVtYmVyJykgcmV0dXJuIDB4MTg4OyAqL1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCAweDAxODg7ICsraSkge1xuLyo6OmlmKHR5cGVvZiBpZHggIT0gJ251bWJlcicpIHJldHVybiAweDE4ODsgKi9cblx0XHRcdGlmKHRhYmxlX2ZtdFtpXSA9PSB1bmRlZmluZWQpIHsgaWYoaWR4IDwgMCkgaWR4ID0gaTsgY29udGludWU7IH1cblx0XHRcdGlmKHRhYmxlX2ZtdFtpXSA9PSBmbXQpIHsgaWR4ID0gaTsgYnJlYWs7IH1cblx0XHR9XG4vKjo6aWYodHlwZW9mIGlkeCAhPSAnbnVtYmVyJykgcmV0dXJuIDB4MTg4OyAqL1xuXHRcdGlmKGlkeCA8IDApIGlkeCA9IDB4MTg3O1xuXHR9XG4vKjo6aWYodHlwZW9mIGlkeCAhPSAnbnVtYmVyJykgcmV0dXJuIDB4MTg4OyAqL1xuXHR0YWJsZV9mbXRbaWR4XSA9IGZtdDtcblx0cmV0dXJuIGlkeDtcbn1cbmZ1bmN0aW9uIFNTRl9sb2FkX3RhYmxlKHRibC8qOlNTRlRhYmxlKi8pLyo6dm9pZCovIHtcblx0Zm9yKHZhciBpPTA7IGkhPTB4MDE4ODsgKytpKVxuXHRcdGlmKHRibFtpXSAhPT0gdW5kZWZpbmVkKSBTU0ZfbG9hZCh0YmxbaV0sIGkpO1xufVxuXG5mdW5jdGlvbiBtYWtlX3NzZigpIHtcblx0dGFibGVfZm10ID0gU1NGX2luaXRfdGFibGUoKTtcbn1cblxudmFyIFNTRiA9IHtcblx0Zm9ybWF0OiBTU0ZfZm9ybWF0LFxuXHRsb2FkOiBTU0ZfbG9hZCxcblx0X3RhYmxlOiB0YWJsZV9mbXQsXG5cdGxvYWRfdGFibGU6IFNTRl9sb2FkX3RhYmxlLFxuXHRwYXJzZV9kYXRlX2NvZGU6IFNTRl9wYXJzZV9kYXRlX2NvZGUsXG5cdGlzX2RhdGU6IGZtdF9pc19kYXRlLFxuXHRnZXRfdGFibGU6IGZ1bmN0aW9uIGdldF90YWJsZSgpIHsgcmV0dXJuIFNTRi5fdGFibGUgPSB0YWJsZV9mbXQ7IH1cbn07XG5cbnZhciBTU0ZJbXBsaWNpdC8qe1tudW1iZXJdOnN0cmluZ30qLyA9ICh7XG5cdFwiNVwiOiAnXCIkXCIjLCMjMF8pO1xcXFwoXCIkXCIjLCMjMFxcXFwpJyxcblx0XCI2XCI6ICdcIiRcIiMsIyMwXyk7W1JlZF1cXFxcKFwiJFwiIywjIzBcXFxcKScsXG5cdFwiN1wiOiAnXCIkXCIjLCMjMC4wMF8pO1xcXFwoXCIkXCIjLCMjMC4wMFxcXFwpJyxcblx0XCI4XCI6ICdcIiRcIiMsIyMwLjAwXyk7W1JlZF1cXFxcKFwiJFwiIywjIzAuMDBcXFxcKScsXG5cdFwiMjNcIjogJ0dlbmVyYWwnLCBcIjI0XCI6ICdHZW5lcmFsJywgXCIyNVwiOiAnR2VuZXJhbCcsIFwiMjZcIjogJ0dlbmVyYWwnLFxuXHRcIjI3XCI6ICdtL2QveXknLCBcIjI4XCI6ICdtL2QveXknLCBcIjI5XCI6ICdtL2QveXknLCBcIjMwXCI6ICdtL2QveXknLCBcIjMxXCI6ICdtL2QveXknLFxuXHRcIjMyXCI6ICdoOm1tOnNzJywgXCIzM1wiOiAnaDptbTpzcycsIFwiMzRcIjogJ2g6bW06c3MnLCBcIjM1XCI6ICdoOm1tOnNzJyxcblx0XCIzNlwiOiAnbS9kL3l5Jyxcblx0XCI0MVwiOiAnXygqICMsIyMwXyk7XygqIFxcKCMsIyMwXFwpO18oKiBcIi1cIl8pO18oQF8pJyxcblx0XCI0MlwiOiAnXyhcIiRcIiogIywjIzBfKTtfKFwiJFwiKiBcXCgjLCMjMFxcKTtfKFwiJFwiKiBcIi1cIl8pO18oQF8pJyxcblx0XCI0M1wiOiAnXygqICMsIyMwLjAwXyk7XygqIFxcKCMsIyMwLjAwXFwpO18oKiBcIi1cIj8/Xyk7XyhAXyknLFxuXHRcIjQ0XCI6ICdfKFwiJFwiKiAjLCMjMC4wMF8pO18oXCIkXCIqIFxcKCMsIyMwLjAwXFwpO18oXCIkXCIqIFwiLVwiPz9fKTtfKEBfKScsXG5cdFwiNTBcIjogJ20vZC95eScsIFwiNTFcIjogJ20vZC95eScsIFwiNTJcIjogJ20vZC95eScsIFwiNTNcIjogJ20vZC95eScsIFwiNTRcIjogJ20vZC95eScsXG5cdFwiNTVcIjogJ20vZC95eScsIFwiNTZcIjogJ20vZC95eScsIFwiNTdcIjogJ20vZC95eScsIFwiNThcIjogJ20vZC95eScsXG5cdFwiNTlcIjogJzAnLFxuXHRcIjYwXCI6ICcwLjAwJyxcblx0XCI2MVwiOiAnIywjIzAnLFxuXHRcIjYyXCI6ICcjLCMjMC4wMCcsXG5cdFwiNjNcIjogJ1wiJFwiIywjIzBfKTtcXFxcKFwiJFwiIywjIzBcXFxcKScsXG5cdFwiNjRcIjogJ1wiJFwiIywjIzBfKTtbUmVkXVxcXFwoXCIkXCIjLCMjMFxcXFwpJyxcblx0XCI2NVwiOiAnXCIkXCIjLCMjMC4wMF8pO1xcXFwoXCIkXCIjLCMjMC4wMFxcXFwpJyxcblx0XCI2NlwiOiAnXCIkXCIjLCMjMC4wMF8pO1tSZWRdXFxcXChcIiRcIiMsIyMwLjAwXFxcXCknLFxuXHRcIjY3XCI6ICcwJScsXG5cdFwiNjhcIjogJzAuMDAlJyxcblx0XCI2OVwiOiAnIyA/Lz8nLFxuXHRcIjcwXCI6ICcjID8/Lz8/Jyxcblx0XCI3MVwiOiAnbS9kL3l5Jyxcblx0XCI3MlwiOiAnbS9kL3l5Jyxcblx0XCI3M1wiOiAnZC1tbW0teXknLFxuXHRcIjc0XCI6ICdkLW1tbScsXG5cdFwiNzVcIjogJ21tbS15eScsXG5cdFwiNzZcIjogJ2g6bW0nLFxuXHRcIjc3XCI6ICdoOm1tOnNzJyxcblx0XCI3OFwiOiAnbS9kL3l5IGg6bW0nLFxuXHRcIjc5XCI6ICdtbTpzcycsXG5cdFwiODBcIjogJ1toXTptbTpzcycsXG5cdFwiODFcIjogJ21tc3MuMCdcbn0vKjphbnkqLyk7XG5cbi8qIGRhdGVORiBwYXJzZSBUT0RPOiBtb3ZlIHRvIFNTRiAqL1xudmFyIGRhdGVORnJlZ2V4ID0gL1tkRF0rfFttTV0rfFt5WWVFXSt8W0hoXSt8W1NzXSsvZztcbmZ1bmN0aW9uIGRhdGVORl9yZWdleChkYXRlTkYvKjpzdHJpbmd8bnVtYmVyKi8pLyo6UmVnRXhwKi8ge1xuXHR2YXIgZm10ID0gdHlwZW9mIGRhdGVORiA9PSBcIm51bWJlclwiID8gdGFibGVfZm10W2RhdGVORl0gOiBkYXRlTkY7XG5cdGZtdCA9IGZtdC5yZXBsYWNlKGRhdGVORnJlZ2V4LCBcIihcXFxcZCspXCIpO1xuXHRyZXR1cm4gbmV3IFJlZ0V4cChcIl5cIiArIGZtdCArIFwiJFwiKTtcbn1cbmZ1bmN0aW9uIGRhdGVORl9maXgoc3RyLyo6c3RyaW5nKi8sIGRhdGVORi8qOnN0cmluZyovLCBtYXRjaC8qOkFycmF5PHN0cmluZz4qLykvKjpzdHJpbmcqLyB7XG5cdHZhciBZID0gLTEsIG0gPSAtMSwgZCA9IC0xLCBIID0gLTEsIE0gPSAtMSwgUyA9IC0xO1xuXHQoZGF0ZU5GLm1hdGNoKGRhdGVORnJlZ2V4KXx8W10pLmZvckVhY2goZnVuY3Rpb24obiwgaSkge1xuXHRcdHZhciB2ID0gcGFyc2VJbnQobWF0Y2hbaSsxXSwgMTApO1xuXHRcdHN3aXRjaChuLnRvTG93ZXJDYXNlKCkuY2hhckF0KDApKSB7XG5cdFx0XHRjYXNlICd5JzogWSA9IHY7IGJyZWFrOyBjYXNlICdkJzogZCA9IHY7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnaCc6IEggPSB2OyBicmVhazsgY2FzZSAncyc6IFMgPSB2OyBicmVhaztcblx0XHRcdGNhc2UgJ20nOiBpZihIID49IDApIE0gPSB2OyBlbHNlIG0gPSB2OyBicmVhaztcblx0XHR9XG5cdH0pO1xuXHRpZihTID49IDAgJiYgTSA9PSAtMSAmJiBtID49IDApIHsgTSA9IG07IG0gPSAtMTsgfVxuXHR2YXIgZGF0ZXN0ciA9ICgoXCJcIiArIChZPj0wP1k6IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKSkpLnNsaWNlKC00KSArIFwiLVwiICsgKFwiMDBcIiArIChtPj0xP206MSkpLnNsaWNlKC0yKSArIFwiLVwiICsgKFwiMDBcIiArIChkPj0xP2Q6MSkpLnNsaWNlKC0yKSk7XG5cdGlmKGRhdGVzdHIubGVuZ3RoID09IDcpIGRhdGVzdHIgPSBcIjBcIiArIGRhdGVzdHI7XG5cdGlmKGRhdGVzdHIubGVuZ3RoID09IDgpIGRhdGVzdHIgPSBcIjIwXCIgKyBkYXRlc3RyO1xuXHR2YXIgdGltZXN0ciA9ICgoXCIwMFwiICsgKEg+PTA/SDowKSkuc2xpY2UoLTIpICsgXCI6XCIgKyAoXCIwMFwiICsgKE0+PTA/TTowKSkuc2xpY2UoLTIpICsgXCI6XCIgKyAoXCIwMFwiICsgKFM+PTA/UzowKSkuc2xpY2UoLTIpKTtcblx0aWYoSCA9PSAtMSAmJiBNID09IC0xICYmIFMgPT0gLTEpIHJldHVybiBkYXRlc3RyO1xuXHRpZihZID09IC0xICYmIG0gPT0gLTEgJiYgZCA9PSAtMSkgcmV0dXJuIHRpbWVzdHI7XG5cdHJldHVybiBkYXRlc3RyICsgXCJUXCIgKyB0aW1lc3RyO1xufVxuXG4vKjo6XG5kZWNsYXJlIHZhciBSZWFkU2hpZnQ6YW55O1xuZGVjbGFyZSB2YXIgQ2hlY2tGaWVsZDphbnk7XG5kZWNsYXJlIHZhciBwcmVwX2Jsb2I6YW55O1xuZGVjbGFyZSB2YXIgX19yZWFkVUludDMyTEU6YW55O1xuZGVjbGFyZSB2YXIgX19yZWFkSW50MzJMRTphbnk7XG5kZWNsYXJlIHZhciBfX3RvQnVmZmVyOmFueTtcbmRlY2xhcmUgdmFyIF9fdXRmMTZsZTphbnk7XG5kZWNsYXJlIHZhciBiY29uY2F0OmFueTtcbmRlY2xhcmUgdmFyIHMyYTphbnk7XG5kZWNsYXJlIHZhciBjaHIwOmFueTtcbmRlY2xhcmUgdmFyIGNocjE6YW55O1xuZGVjbGFyZSB2YXIgaGFzX2J1Zjpib29sZWFuO1xuZGVjbGFyZSB2YXIgbmV3X2J1Zjphbnk7XG5kZWNsYXJlIHZhciBuZXdfcmF3X2J1Zjphbnk7XG5kZWNsYXJlIHZhciBuZXdfdW5zYWZlX2J1Zjphbnk7XG5kZWNsYXJlIHZhciBCdWZmZXJfZnJvbTphbnk7XG4qL1xuLyogY2ZiLmpzIChDKSAyMDEzLXByZXNlbnQgU2hlZXRKUyAtLSBodHRwOi8vc2hlZXRqcy5jb20gKi9cbi8qIHZpbTogc2V0IHRzPTI6ICovXG4vKmpzaGludCBlcW51bGw6dHJ1ZSAqL1xuLypleHBvcnRlZCBDRkIgKi9cbi8qZ2xvYmFsIFVpbnQ4QXJyYXk6ZmFsc2UsIFVpbnQxNkFycmF5OmZhbHNlICovXG5cbi8qOjpcbnR5cGUgU2VjdG9yRW50cnkgPSB7XG5cdG5hbWU/OnN0cmluZztcblx0bm9kZXM/OkFycmF5PG51bWJlcj47XG5cdGRhdGE6UmF3Qnl0ZXM7XG59O1xudHlwZSBTZWN0b3JMaXN0ID0ge1xuXHRbazpzdHJpbmd8bnVtYmVyXTpTZWN0b3JFbnRyeTtcblx0bmFtZTo/c3RyaW5nO1xuXHRmYXRfYWRkcnM6QXJyYXk8bnVtYmVyPjtcblx0c3N6Om51bWJlcjtcbn1cbnR5cGUgQ0ZCRmlsZXMgPSB7W246c3RyaW5nXTpDRkJFbnRyeX07XG4qL1xuLyogY3JjMzIuanMgKEMpIDIwMTQtcHJlc2VudCBTaGVldEpTIC0tIGh0dHA6Ly9zaGVldGpzLmNvbSAqL1xuLyogdmltOiBzZXQgdHM9MjogKi9cbi8qZXhwb3J0ZWQgQ1JDMzIgKi9cbnZhciBDUkMzMiA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG52YXIgQ1JDMzIgPSB7fTtcbkNSQzMyLnZlcnNpb24gPSAnMS4yLjAnO1xuLyogc2VlIHBlcmYvY3JjMzJ0YWJsZS5qcyAqL1xuLypnbG9iYWwgSW50MzJBcnJheSAqL1xuZnVuY3Rpb24gc2lnbmVkX2NyY190YWJsZSgpLyo6YW55Ki8ge1xuXHR2YXIgYyA9IDAsIHRhYmxlLyo6QXJyYXk8bnVtYmVyPiovID0gbmV3IEFycmF5KDI1Nik7XG5cblx0Zm9yKHZhciBuID0wOyBuICE9IDI1NjsgKytuKXtcblx0XHRjID0gbjtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHRjID0gKChjJjEpID8gKC0zMDY2NzQ5MTIgXiAoYyA+Pj4gMSkpIDogKGMgPj4+IDEpKTtcblx0XHR0YWJsZVtuXSA9IGM7XG5cdH1cblxuXHRyZXR1cm4gdHlwZW9mIEludDMyQXJyYXkgIT09ICd1bmRlZmluZWQnID8gbmV3IEludDMyQXJyYXkodGFibGUpIDogdGFibGU7XG59XG5cbnZhciBUMCA9IHNpZ25lZF9jcmNfdGFibGUoKTtcbmZ1bmN0aW9uIHNsaWNlX2J5XzE2X3RhYmxlcyhUKSB7XG5cdHZhciBjID0gMCwgdiA9IDAsIG4gPSAwLCB0YWJsZS8qOkFycmF5PG51bWJlcj4qLyA9IHR5cGVvZiBJbnQzMkFycmF5ICE9PSAndW5kZWZpbmVkJyA/IG5ldyBJbnQzMkFycmF5KDQwOTYpIDogbmV3IEFycmF5KDQwOTYpIDtcblxuXHRmb3IobiA9IDA7IG4gIT0gMjU2OyArK24pIHRhYmxlW25dID0gVFtuXTtcblx0Zm9yKG4gPSAwOyBuICE9IDI1NjsgKytuKSB7XG5cdFx0diA9IFRbbl07XG5cdFx0Zm9yKGMgPSAyNTYgKyBuOyBjIDwgNDA5NjsgYyArPSAyNTYpIHYgPSB0YWJsZVtjXSA9ICh2ID4+PiA4KSBeIFRbdiAmIDB4RkZdO1xuXHR9XG5cdHZhciBvdXQgPSBbXTtcblx0Zm9yKG4gPSAxOyBuICE9IDE2OyArK24pIG91dFtuIC0gMV0gPSB0eXBlb2YgSW50MzJBcnJheSAhPT0gJ3VuZGVmaW5lZCcgPyB0YWJsZS5zdWJhcnJheShuICogMjU2LCBuICogMjU2ICsgMjU2KSA6IHRhYmxlLnNsaWNlKG4gKiAyNTYsIG4gKiAyNTYgKyAyNTYpO1xuXHRyZXR1cm4gb3V0O1xufVxudmFyIFRUID0gc2xpY2VfYnlfMTZfdGFibGVzKFQwKTtcbnZhciBUMSA9IFRUWzBdLCAgVDIgPSBUVFsxXSwgIFQzID0gVFRbMl0sICBUNCA9IFRUWzNdLCAgVDUgPSBUVFs0XTtcbnZhciBUNiA9IFRUWzVdLCAgVDcgPSBUVFs2XSwgIFQ4ID0gVFRbN10sICBUOSA9IFRUWzhdLCAgVGEgPSBUVFs5XTtcbnZhciBUYiA9IFRUWzEwXSwgVGMgPSBUVFsxMV0sIFRkID0gVFRbMTJdLCBUZSA9IFRUWzEzXSwgVGYgPSBUVFsxNF07XG5mdW5jdGlvbiBjcmMzMl9ic3RyKGJzdHIvKjpzdHJpbmcqLywgc2VlZC8qOm51bWJlciovKS8qOm51bWJlciovIHtcblx0dmFyIEMgPSBzZWVkLyo6OiA/IDAgOiAwICovIF4gLTE7XG5cdGZvcih2YXIgaSA9IDAsIEwgPSBic3RyLmxlbmd0aDsgaSA8IEw7KSBDID0gKEM+Pj44KSBeIFQwWyhDXmJzdHIuY2hhckNvZGVBdChpKyspKSYweEZGXTtcblx0cmV0dXJuIH5DO1xufVxuXG5mdW5jdGlvbiBjcmMzMl9idWYoQi8qOlVpbnQ4QXJyYXl8QXJyYXk8bnVtYmVyPiovLCBzZWVkLyo6bnVtYmVyKi8pLyo6bnVtYmVyKi8ge1xuXHR2YXIgQyA9IHNlZWQvKjo6ID8gMCA6IDAgKi8gXiAtMSwgTCA9IEIubGVuZ3RoIC0gMTUsIGkgPSAwO1xuXHRmb3IoOyBpIDwgTDspIEMgPVxuXHRcdFRmW0JbaSsrXSBeIChDICYgMjU1KV0gXlxuXHRcdFRlW0JbaSsrXSBeICgoQyA+PiA4KSAmIDI1NSldIF5cblx0XHRUZFtCW2krK10gXiAoKEMgPj4gMTYpICYgMjU1KV0gXlxuXHRcdFRjW0JbaSsrXSBeIChDID4+PiAyNCldIF5cblx0XHRUYltCW2krK11dIF4gVGFbQltpKytdXSBeIFQ5W0JbaSsrXV0gXiBUOFtCW2krK11dIF5cblx0XHRUN1tCW2krK11dIF4gVDZbQltpKytdXSBeIFQ1W0JbaSsrXV0gXiBUNFtCW2krK11dIF5cblx0XHRUM1tCW2krK11dIF4gVDJbQltpKytdXSBeIFQxW0JbaSsrXV0gXiBUMFtCW2krK11dO1xuXHRMICs9IDE1O1xuXHR3aGlsZShpIDwgTCkgQyA9IChDPj4+OCkgXiBUMFsoQ15CW2krK10pJjB4RkZdO1xuXHRyZXR1cm4gfkM7XG59XG5cbmZ1bmN0aW9uIGNyYzMyX3N0cihzdHIvKjpzdHJpbmcqLywgc2VlZC8qOm51bWJlciovKS8qOm51bWJlciovIHtcblx0dmFyIEMgPSBzZWVkIF4gLTE7XG5cdGZvcih2YXIgaSA9IDAsIEwgPSBzdHIubGVuZ3RoLCBjID0gMCwgZCA9IDA7IGkgPCBMOykge1xuXHRcdGMgPSBzdHIuY2hhckNvZGVBdChpKyspO1xuXHRcdGlmKGMgPCAweDgwKSB7XG5cdFx0XHRDID0gKEM+Pj44KSBeIFQwWyhDXmMpJjB4RkZdO1xuXHRcdH0gZWxzZSBpZihjIDwgMHg4MDApIHtcblx0XHRcdEMgPSAoQz4+PjgpIF4gVDBbKEMgXiAoMTkyfCgoYz4+NikmMzEpKSkmMHhGRl07XG5cdFx0XHRDID0gKEM+Pj44KSBeIFQwWyhDIF4gKDEyOHwoYyY2MykpKSYweEZGXTtcblx0XHR9IGVsc2UgaWYoYyA+PSAweEQ4MDAgJiYgYyA8IDB4RTAwMCkge1xuXHRcdFx0YyA9IChjJjEwMjMpKzY0OyBkID0gc3RyLmNoYXJDb2RlQXQoaSsrKSYxMDIzO1xuXHRcdFx0QyA9IChDPj4+OCkgXiBUMFsoQyBeICgyNDB8KChjPj44KSY3KSkpJjB4RkZdO1xuXHRcdFx0QyA9IChDPj4+OCkgXiBUMFsoQyBeICgxMjh8KChjPj4yKSY2MykpKSYweEZGXTtcblx0XHRcdEMgPSAoQz4+PjgpIF4gVDBbKEMgXiAoMTI4fCgoZD4+NikmMTUpfCgoYyYzKTw8NCkpKSYweEZGXTtcblx0XHRcdEMgPSAoQz4+PjgpIF4gVDBbKEMgXiAoMTI4fChkJjYzKSkpJjB4RkZdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRDID0gKEM+Pj44KSBeIFQwWyhDIF4gKDIyNHwoKGM+PjEyKSYxNSkpKSYweEZGXTtcblx0XHRcdEMgPSAoQz4+PjgpIF4gVDBbKEMgXiAoMTI4fCgoYz4+NikmNjMpKSkmMHhGRl07XG5cdFx0XHRDID0gKEM+Pj44KSBeIFQwWyhDIF4gKDEyOHwoYyY2MykpKSYweEZGXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIH5DO1xufVxuQ1JDMzIudGFibGUgPSBUMDtcbkNSQzMyLmJzdHIgPSBjcmMzMl9ic3RyO1xuQ1JDMzIuYnVmID0gY3JjMzJfYnVmO1xuQ1JDMzIuc3RyID0gY3JjMzJfc3RyO1xucmV0dXJuIENSQzMyO1xufSkoKTtcbi8qIFtNUy1DRkJdIHYyMDE3MTIwMSAqL1xudmFyIENGQiA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24gX0NGQigpe1xudmFyIGV4cG9ydHMgPSB7fTtcbmV4cG9ydHMudmVyc2lvbiA9ICcxLjIuMSc7XG4vKiBbTVMtQ0ZCXSAyLjYuNCAqL1xuZnVuY3Rpb24gbmFtZWNtcChsLyo6c3RyaW5nKi8sIHIvKjpzdHJpbmcqLykvKjpudW1iZXIqLyB7XG5cdHZhciBMID0gbC5zcGxpdChcIi9cIiksIFIgPSByLnNwbGl0KFwiL1wiKTtcblx0Zm9yKHZhciBpID0gMCwgYyA9IDAsIFogPSBNYXRoLm1pbihMLmxlbmd0aCwgUi5sZW5ndGgpOyBpIDwgWjsgKytpKSB7XG5cdFx0aWYoKGMgPSBMW2ldLmxlbmd0aCAtIFJbaV0ubGVuZ3RoKSkgcmV0dXJuIGM7XG5cdFx0aWYoTFtpXSAhPSBSW2ldKSByZXR1cm4gTFtpXSA8IFJbaV0gPyAtMSA6IDE7XG5cdH1cblx0cmV0dXJuIEwubGVuZ3RoIC0gUi5sZW5ndGg7XG59XG5mdW5jdGlvbiBkaXJuYW1lKHAvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdGlmKHAuY2hhckF0KHAubGVuZ3RoIC0gMSkgPT0gXCIvXCIpIHJldHVybiAocC5zbGljZSgwLC0xKS5pbmRleE9mKFwiL1wiKSA9PT0gLTEpID8gcCA6IGRpcm5hbWUocC5zbGljZSgwLCAtMSkpO1xuXHR2YXIgYyA9IHAubGFzdEluZGV4T2YoXCIvXCIpO1xuXHRyZXR1cm4gKGMgPT09IC0xKSA/IHAgOiBwLnNsaWNlKDAsIGMrMSk7XG59XG5cbmZ1bmN0aW9uIGZpbGVuYW1lKHAvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdGlmKHAuY2hhckF0KHAubGVuZ3RoIC0gMSkgPT0gXCIvXCIpIHJldHVybiBmaWxlbmFtZShwLnNsaWNlKDAsIC0xKSk7XG5cdHZhciBjID0gcC5sYXN0SW5kZXhPZihcIi9cIik7XG5cdHJldHVybiAoYyA9PT0gLTEpID8gcCA6IHAuc2xpY2UoYysxKTtcbn1cbi8qIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG4vKiBET1MgRGF0ZSBmb3JtYXQ6XG4gICBoaWdofFlZWVlZWVltLm1tbWRkZGRkLkhISEhITU1NLk1NTVNTU1NTfGxvd1xuICAgYWRkIDE5ODAgdG8gc3RvcmVkIHllYXJcbiAgIHN0b3JlZCBzZWNvbmQgc2hvdWxkIGJlIGRvdWJsZWRcbiovXG5cbi8qIHdyaXRlIEpTIGRhdGUgdG8gYnVmIGFzIGEgRE9TIGRhdGUgKi9cbmZ1bmN0aW9uIHdyaXRlX2Rvc19kYXRlKGJ1Zi8qOkNGQmxvYiovLCBkYXRlLyo6RGF0ZXxzdHJpbmcqLykge1xuXHRpZih0eXBlb2YgZGF0ZSA9PT0gXCJzdHJpbmdcIikgZGF0ZSA9IG5ldyBEYXRlKGRhdGUpO1xuXHR2YXIgaG1zLyo6bnVtYmVyKi8gPSBkYXRlLmdldEhvdXJzKCk7XG5cdGhtcyA9IGhtcyA8PCA2IHwgZGF0ZS5nZXRNaW51dGVzKCk7XG5cdGhtcyA9IGhtcyA8PCA1IHwgKGRhdGUuZ2V0U2Vjb25kcygpPj4+MSk7XG5cdGJ1Zi53cml0ZV9zaGlmdCgyLCBobXMpO1xuXHR2YXIgeW1kLyo6bnVtYmVyKi8gPSAoZGF0ZS5nZXRGdWxsWWVhcigpIC0gMTk4MCk7XG5cdHltZCA9IHltZCA8PCA0IHwgKGRhdGUuZ2V0TW9udGgoKSsxKTtcblx0eW1kID0geW1kIDw8IDUgfCBkYXRlLmdldERhdGUoKTtcblx0YnVmLndyaXRlX3NoaWZ0KDIsIHltZCk7XG59XG5cbi8qIHJlYWQgZm91ciBieXRlcyBmcm9tIGJ1ZiBhbmQgaW50ZXJwcmV0IGFzIGEgRE9TIGRhdGUgKi9cbmZ1bmN0aW9uIHBhcnNlX2Rvc19kYXRlKGJ1Zi8qOkNGQmxvYiovKS8qOkRhdGUqLyB7XG5cdHZhciBobXMgPSBidWYucmVhZF9zaGlmdCgyKSAmIDB4RkZGRjtcblx0dmFyIHltZCA9IGJ1Zi5yZWFkX3NoaWZ0KDIpICYgMHhGRkZGO1xuXHR2YXIgdmFsID0gbmV3IERhdGUoKTtcblx0dmFyIGQgPSB5bWQgJiAweDFGOyB5bWQgPj4+PSA1O1xuXHR2YXIgbSA9IHltZCAmIDB4MEY7IHltZCA+Pj49IDQ7XG5cdHZhbC5zZXRNaWxsaXNlY29uZHMoMCk7XG5cdHZhbC5zZXRGdWxsWWVhcih5bWQgKyAxOTgwKTtcblx0dmFsLnNldE1vbnRoKG0tMSk7XG5cdHZhbC5zZXREYXRlKGQpO1xuXHR2YXIgUyA9IGhtcyAmIDB4MUY7IGhtcyA+Pj49IDU7XG5cdHZhciBNID0gaG1zICYgMHgzRjsgaG1zID4+Pj0gNjtcblx0dmFsLnNldEhvdXJzKGhtcyk7XG5cdHZhbC5zZXRNaW51dGVzKE0pO1xuXHR2YWwuc2V0U2Vjb25kcyhTPDwxKTtcblx0cmV0dXJuIHZhbDtcbn1cbmZ1bmN0aW9uIHBhcnNlX2V4dHJhX2ZpZWxkKGJsb2IvKjpDRkJsb2IqLykvKjphbnkqLyB7XG5cdHByZXBfYmxvYihibG9iLCAwKTtcblx0dmFyIG8gPSAvKjo6KCove30vKjo6IDphbnkpKi87XG5cdHZhciBmbGFncyA9IDA7XG5cdHdoaWxlKGJsb2IubCA8PSBibG9iLmxlbmd0aCAtIDQpIHtcblx0XHR2YXIgdHlwZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHR2YXIgc3ogPSBibG9iLnJlYWRfc2hpZnQoMiksIHRndCA9IGJsb2IubCArIHN6O1xuXHRcdHZhciBwID0ge307XG5cdFx0c3dpdGNoKHR5cGUpIHtcblx0XHRcdC8qIFVOSVgtc3R5bGUgVGltZXN0YW1wcyAqL1xuXHRcdFx0Y2FzZSAweDU0NTU6IHtcblx0XHRcdFx0ZmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdFx0XHRcdGlmKGZsYWdzICYgMSkgcC5tdGltZSA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0XHRcdFx0LyogZm9yIHNvbWUgcmVhc29uLCBDRCBmbGFnIGNvcnJlc3BvbmRzIHRvIExGSCAqL1xuXHRcdFx0XHRpZihzeiA+IDUpIHtcblx0XHRcdFx0XHRpZihmbGFncyAmIDIpIHAuYXRpbWUgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdFx0XHRcdFx0aWYoZmxhZ3MgJiA0KSBwLmN0aW1lID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmKHAubXRpbWUpIHAubXQgPSBuZXcgRGF0ZShwLm10aW1lKjEwMDApO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHRcdGJsb2IubCA9IHRndDtcblx0XHRvW3R5cGVdID0gcDtcblx0fVxuXHRyZXR1cm4gbztcbn1cbnZhciBmcy8qOjogPSByZXF1aXJlKCdmcycpOyAqLztcbmZ1bmN0aW9uIGdldF9mcygpIHsgcmV0dXJuIGZzIHx8IChmcyA9IHt9KTsgfVxuZnVuY3Rpb24gcGFyc2UoZmlsZS8qOlJhd0J5dGVzKi8sIG9wdGlvbnMvKjpDRkJSZWFkT3B0cyovKS8qOkNGQkNvbnRhaW5lciovIHtcbmlmKGZpbGVbMF0gPT0gMHg1MCAmJiBmaWxlWzFdID09IDB4NGIpIHJldHVybiBwYXJzZV96aXAoZmlsZSwgb3B0aW9ucyk7XG5pZigoZmlsZVswXSB8IDB4MjApID09IDB4NmQgJiYgKGZpbGVbMV18MHgyMCkgPT0gMHg2OSkgcmV0dXJuIHBhcnNlX21hZChmaWxlLCBvcHRpb25zKTtcbmlmKGZpbGUubGVuZ3RoIDwgNTEyKSB0aHJvdyBuZXcgRXJyb3IoXCJDRkIgZmlsZSBzaXplIFwiICsgZmlsZS5sZW5ndGggKyBcIiA8IDUxMlwiKTtcbnZhciBtdmVyID0gMztcbnZhciBzc3ogPSA1MTI7XG52YXIgbm1mcyA9IDA7IC8vIG51bWJlciBvZiBtaW5pIEZBVCBzZWN0b3JzXG52YXIgZGlmYXRfc2VjX2NudCA9IDA7XG52YXIgZGlyX3N0YXJ0ID0gMDtcbnZhciBtaW5pZmF0X3N0YXJ0ID0gMDtcbnZhciBkaWZhdF9zdGFydCA9IDA7XG5cbnZhciBmYXRfYWRkcnMvKjpBcnJheTxudW1iZXI+Ki8gPSBbXTsgLy8gbG9jYXRpb25zIG9mIEZBVCBzZWN0b3JzXG5cbi8qIFtNUy1DRkJdIDIuMiBDb21wb3VuZCBGaWxlIEhlYWRlciAqL1xudmFyIGJsb2IvKjpDRkJsb2IqLyA9IC8qOjooKi9maWxlLnNsaWNlKDAsNTEyKS8qOjogOmFueSkqLztcbnByZXBfYmxvYihibG9iLCAwKTtcblxuLyogbWFqb3IgdmVyc2lvbiAqL1xudmFyIG12ID0gY2hlY2tfZ2V0X212ZXIoYmxvYik7XG5tdmVyID0gbXZbMF07XG5zd2l0Y2gobXZlcikge1xuXHRjYXNlIDM6IHNzeiA9IDUxMjsgYnJlYWs7IGNhc2UgNDogc3N6ID0gNDA5NjsgYnJlYWs7XG5cdGNhc2UgMDogaWYobXZbMV0gPT0gMCkgcmV0dXJuIHBhcnNlX3ppcChmaWxlLCBvcHRpb25zKTtcblx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJNYWpvciBWZXJzaW9uOiBFeHBlY3RlZCAzIG9yIDQgc2F3IFwiICsgbXZlcik7XG59XG5cbi8qIHJlcHJvY2VzcyBoZWFkZXIgKi9cbmlmKHNzeiAhPT0gNTEyKSB7IGJsb2IgPSAvKjo6KCovZmlsZS5zbGljZSgwLHNzeikvKjo6IDphbnkpKi87IHByZXBfYmxvYihibG9iLCAyOCAvKiBibG9iLmwgKi8pOyB9XG4vKiBTYXZlIGhlYWRlciBmb3IgZmluYWwgb2JqZWN0ICovXG52YXIgaGVhZGVyLyo6UmF3Qnl0ZXMqLyA9IGZpbGUuc2xpY2UoMCxzc3opO1xuXG5jaGVja19zaGlmdHMoYmxvYiwgbXZlcik7XG5cbi8vIE51bWJlciBvZiBEaXJlY3RvcnkgU2VjdG9yc1xudmFyIGRpcl9jbnQvKjpudW1iZXIqLyA9IGJsb2IucmVhZF9zaGlmdCg0LCAnaScpO1xuaWYobXZlciA9PT0gMyAmJiBkaXJfY250ICE9PSAwKSB0aHJvdyBuZXcgRXJyb3IoJyMgRGlyZWN0b3J5IFNlY3RvcnM6IEV4cGVjdGVkIDAgc2F3ICcgKyBkaXJfY250KTtcblxuLy8gTnVtYmVyIG9mIEZBVCBTZWN0b3JzXG5ibG9iLmwgKz0gNDtcblxuLy8gRmlyc3QgRGlyZWN0b3J5IFNlY3RvciBMb2NhdGlvblxuZGlyX3N0YXJ0ID0gYmxvYi5yZWFkX3NoaWZ0KDQsICdpJyk7XG5cbi8vIFRyYW5zYWN0aW9uIFNpZ25hdHVyZVxuYmxvYi5sICs9IDQ7XG5cbi8vIE1pbmkgU3RyZWFtIEN1dG9mZiBTaXplXG5ibG9iLmNoaygnMDAxMDAwMDAnLCAnTWluaSBTdHJlYW0gQ3V0b2ZmIFNpemU6ICcpO1xuXG4vLyBGaXJzdCBNaW5pIEZBVCBTZWN0b3IgTG9jYXRpb25cbm1pbmlmYXRfc3RhcnQgPSBibG9iLnJlYWRfc2hpZnQoNCwgJ2knKTtcblxuLy8gTnVtYmVyIG9mIE1pbmkgRkFUIFNlY3RvcnNcbm5tZnMgPSBibG9iLnJlYWRfc2hpZnQoNCwgJ2knKTtcblxuLy8gRmlyc3QgRElGQVQgc2VjdG9yIGxvY2F0aW9uXG5kaWZhdF9zdGFydCA9IGJsb2IucmVhZF9zaGlmdCg0LCAnaScpO1xuXG4vLyBOdW1iZXIgb2YgRElGQVQgU2VjdG9yc1xuZGlmYXRfc2VjX2NudCA9IGJsb2IucmVhZF9zaGlmdCg0LCAnaScpO1xuXG4vLyBHcmFiIEZBVCBTZWN0b3IgTG9jYXRpb25zXG5mb3IodmFyIHEgPSAtMSwgaiA9IDA7IGogPCAxMDk7ICsraikgeyAvKiAxMDkgPSAoNTEyIC0gYmxvYi5sKT4+PjI7ICovXG5cdHEgPSBibG9iLnJlYWRfc2hpZnQoNCwgJ2knKTtcblx0aWYocTwwKSBicmVhaztcblx0ZmF0X2FkZHJzW2pdID0gcTtcbn1cblxuLyoqIEJyZWFrIHRoZSBmaWxlIHVwIGludG8gc2VjdG9ycyAqL1xudmFyIHNlY3RvcnMvKjpBcnJheTxSYXdCeXRlcz4qLyA9IHNlY3RvcmlmeShmaWxlLCBzc3opO1xuXG5zbGV1dGhfZmF0KGRpZmF0X3N0YXJ0LCBkaWZhdF9zZWNfY250LCBzZWN0b3JzLCBzc3osIGZhdF9hZGRycyk7XG5cbi8qKiBDaGFpbnMgKi9cbnZhciBzZWN0b3JfbGlzdC8qOlNlY3Rvckxpc3QqLyA9IG1ha2Vfc2VjdG9yX2xpc3Qoc2VjdG9ycywgZGlyX3N0YXJ0LCBmYXRfYWRkcnMsIHNzeik7XG5cbnNlY3Rvcl9saXN0W2Rpcl9zdGFydF0ubmFtZSA9IFwiIURpcmVjdG9yeVwiO1xuaWYobm1mcyA+IDAgJiYgbWluaWZhdF9zdGFydCAhPT0gRU5ET0ZDSEFJTikgc2VjdG9yX2xpc3RbbWluaWZhdF9zdGFydF0ubmFtZSA9IFwiIU1pbmlGQVRcIjtcbnNlY3Rvcl9saXN0W2ZhdF9hZGRyc1swXV0ubmFtZSA9IFwiIUZBVFwiO1xuc2VjdG9yX2xpc3QuZmF0X2FkZHJzID0gZmF0X2FkZHJzO1xuc2VjdG9yX2xpc3Quc3N6ID0gc3N6O1xuXG4vKiBbTVMtQ0ZCXSAyLjYuMSBDb21wb3VuZCBGaWxlIERpcmVjdG9yeSBFbnRyeSAqL1xudmFyIGZpbGVzLyo6Q0ZCRmlsZXMqLyA9IHt9LCBQYXRocy8qOkFycmF5PHN0cmluZz4qLyA9IFtdLCBGaWxlSW5kZXgvKjpDRkJGaWxlSW5kZXgqLyA9IFtdLCBGdWxsUGF0aHMvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcbnJlYWRfZGlyZWN0b3J5KGRpcl9zdGFydCwgc2VjdG9yX2xpc3QsIHNlY3RvcnMsIFBhdGhzLCBubWZzLCBmaWxlcywgRmlsZUluZGV4LCBtaW5pZmF0X3N0YXJ0KTtcblxuYnVpbGRfZnVsbF9wYXRocyhGaWxlSW5kZXgsIEZ1bGxQYXRocywgUGF0aHMpO1xuUGF0aHMuc2hpZnQoKTtcblxudmFyIG8gPSB7XG5cdEZpbGVJbmRleDogRmlsZUluZGV4LFxuXHRGdWxsUGF0aHM6IEZ1bGxQYXRoc1xufTtcblxuLy8gJEZsb3dJZ25vcmVcbmlmKG9wdGlvbnMgJiYgb3B0aW9ucy5yYXcpIG8ucmF3ID0ge2hlYWRlcjogaGVhZGVyLCBzZWN0b3JzOiBzZWN0b3JzfTtcbnJldHVybiBvO1xufSAvLyBwYXJzZVxuXG4vKiBbTVMtQ0ZCXSAyLjIgQ29tcG91bmQgRmlsZSBIZWFkZXIgLS0gcmVhZCB1cCB0byBtYWpvciB2ZXJzaW9uICovXG5mdW5jdGlvbiBjaGVja19nZXRfbXZlcihibG9iLyo6Q0ZCbG9iKi8pLyo6W251bWJlciwgbnVtYmVyXSovIHtcblx0aWYoYmxvYltibG9iLmxdID09IDB4NTAgJiYgYmxvYltibG9iLmwgKyAxXSA9PSAweDRiKSByZXR1cm4gWzAsIDBdO1xuXHQvLyBoZWFkZXIgc2lnbmF0dXJlIDhcblx0YmxvYi5jaGsoSEVBREVSX1NJR05BVFVSRSwgJ0hlYWRlciBTaWduYXR1cmU6ICcpO1xuXG5cdC8vIGNsc2lkIDE2XG5cdC8vYmxvYi5jaGsoSEVBREVSX0NMU0lELCAnQ0xTSUQ6ICcpO1xuXHRibG9iLmwgKz0gMTY7XG5cblx0Ly8gbWlub3IgdmVyc2lvbiAyXG5cdHZhciBtdmVyLyo6bnVtYmVyKi8gPSBibG9iLnJlYWRfc2hpZnQoMiwgJ3UnKTtcblxuXHRyZXR1cm4gW2Jsb2IucmVhZF9zaGlmdCgyLCd1JyksIG12ZXJdO1xufVxuZnVuY3Rpb24gY2hlY2tfc2hpZnRzKGJsb2IvKjpDRkJsb2IqLywgbXZlci8qOm51bWJlciovKS8qOnZvaWQqLyB7XG5cdHZhciBzaGlmdCA9IDB4MDk7XG5cblx0Ly8gQnl0ZSBPcmRlclxuXHQvL2Jsb2IuY2hrKCdmZWZmJywgJ0J5dGUgT3JkZXI6ICcpOyAvLyBub3RlOiBzb21lIHdyaXRlcnMgcHV0IDB4ZmZmZlxuXHRibG9iLmwgKz0gMjtcblxuXHQvLyBTZWN0b3IgU2hpZnRcblx0c3dpdGNoKChzaGlmdCA9IGJsb2IucmVhZF9zaGlmdCgyKSkpIHtcblx0XHRjYXNlIDB4MDk6IGlmKG12ZXIgIT0gMykgdGhyb3cgbmV3IEVycm9yKCdTZWN0b3IgU2hpZnQ6IEV4cGVjdGVkIDkgc2F3ICcgKyBzaGlmdCk7IGJyZWFrO1xuXHRcdGNhc2UgMHgwYzogaWYobXZlciAhPSA0KSB0aHJvdyBuZXcgRXJyb3IoJ1NlY3RvciBTaGlmdDogRXhwZWN0ZWQgMTIgc2F3ICcgKyBzaGlmdCk7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcignU2VjdG9yIFNoaWZ0OiBFeHBlY3RlZCA5IG9yIDEyIHNhdyAnICsgc2hpZnQpO1xuXHR9XG5cblx0Ly8gTWluaSBTZWN0b3IgU2hpZnRcblx0YmxvYi5jaGsoJzA2MDAnLCAnTWluaSBTZWN0b3IgU2hpZnQ6ICcpO1xuXG5cdC8vIFJlc2VydmVkXG5cdGJsb2IuY2hrKCcwMDAwMDAwMDAwMDAnLCAnUmVzZXJ2ZWQ6ICcpO1xufVxuXG4vKiogQnJlYWsgdGhlIGZpbGUgdXAgaW50byBzZWN0b3JzICovXG5mdW5jdGlvbiBzZWN0b3JpZnkoZmlsZS8qOlJhd0J5dGVzKi8sIHNzei8qOm51bWJlciovKS8qOkFycmF5PFJhd0J5dGVzPiovIHtcblx0dmFyIG5zZWN0b3JzID0gTWF0aC5jZWlsKGZpbGUubGVuZ3RoL3NzeiktMTtcblx0dmFyIHNlY3RvcnMvKjpBcnJheTxSYXdCeXRlcz4qLyA9IFtdO1xuXHRmb3IodmFyIGk9MTsgaSA8IG5zZWN0b3JzOyArK2kpIHNlY3RvcnNbaS0xXSA9IGZpbGUuc2xpY2UoaSpzc3osKGkrMSkqc3N6KTtcblx0c2VjdG9yc1tuc2VjdG9ycy0xXSA9IGZpbGUuc2xpY2UobnNlY3RvcnMqc3N6KTtcblx0cmV0dXJuIHNlY3RvcnM7XG59XG5cbi8qIFtNUy1DRkJdIDIuNi40IFJlZC1CbGFjayBUcmVlICovXG5mdW5jdGlvbiBidWlsZF9mdWxsX3BhdGhzKEZJLyo6Q0ZCRmlsZUluZGV4Ki8sIEZQLyo6QXJyYXk8c3RyaW5nPiovLCBQYXRocy8qOkFycmF5PHN0cmluZz4qLykvKjp2b2lkKi8ge1xuXHR2YXIgaSA9IDAsIEwgPSAwLCBSID0gMCwgQyA9IDAsIGogPSAwLCBwbCA9IFBhdGhzLmxlbmd0aDtcblx0dmFyIGRhZC8qOkFycmF5PG51bWJlcj4qLyA9IFtdLCBxLyo6QXJyYXk8bnVtYmVyPiovID0gW107XG5cblx0Zm9yKDsgaSA8IHBsOyArK2kpIHsgZGFkW2ldPXFbaV09aTsgRlBbaV09UGF0aHNbaV07IH1cblxuXHRmb3IoOyBqIDwgcS5sZW5ndGg7ICsraikge1xuXHRcdGkgPSBxW2pdO1xuXHRcdEwgPSBGSVtpXS5MOyBSID0gRklbaV0uUjsgQyA9IEZJW2ldLkM7XG5cdFx0aWYoZGFkW2ldID09PSBpKSB7XG5cdFx0XHRpZihMICE9PSAtMSAvKk5PU1RSRUFNKi8gJiYgZGFkW0xdICE9PSBMKSBkYWRbaV0gPSBkYWRbTF07XG5cdFx0XHRpZihSICE9PSAtMSAmJiBkYWRbUl0gIT09IFIpIGRhZFtpXSA9IGRhZFtSXTtcblx0XHR9XG5cdFx0aWYoQyAhPT0gLTEgLypOT1NUUkVBTSovKSBkYWRbQ10gPSBpO1xuXHRcdGlmKEwgIT09IC0xICYmIGkgIT0gZGFkW2ldKSB7IGRhZFtMXSA9IGRhZFtpXTsgaWYocS5sYXN0SW5kZXhPZihMKSA8IGopIHEucHVzaChMKTsgfVxuXHRcdGlmKFIgIT09IC0xICYmIGkgIT0gZGFkW2ldKSB7IGRhZFtSXSA9IGRhZFtpXTsgaWYocS5sYXN0SW5kZXhPZihSKSA8IGopIHEucHVzaChSKTsgfVxuXHR9XG5cdGZvcihpPTE7IGkgPCBwbDsgKytpKSBpZihkYWRbaV0gPT09IGkpIHtcblx0XHRpZihSICE9PSAtMSAvKk5PU1RSRUFNKi8gJiYgZGFkW1JdICE9PSBSKSBkYWRbaV0gPSBkYWRbUl07XG5cdFx0ZWxzZSBpZihMICE9PSAtMSAmJiBkYWRbTF0gIT09IEwpIGRhZFtpXSA9IGRhZFtMXTtcblx0fVxuXG5cdGZvcihpPTE7IGkgPCBwbDsgKytpKSB7XG5cdFx0aWYoRklbaV0udHlwZSA9PT0gMCAvKiB1bmtub3duICovKSBjb250aW51ZTtcblx0XHRqID0gaTtcblx0XHRpZihqICE9IGRhZFtqXSkgZG8ge1xuXHRcdFx0aiA9IGRhZFtqXTtcblx0XHRcdEZQW2ldID0gRlBbal0gKyBcIi9cIiArIEZQW2ldO1xuXHRcdH0gd2hpbGUgKGogIT09IDAgJiYgLTEgIT09IGRhZFtqXSAmJiBqICE9IGRhZFtqXSk7XG5cdFx0ZGFkW2ldID0gLTE7XG5cdH1cblxuXHRGUFswXSArPSBcIi9cIjtcblx0Zm9yKGk9MTsgaSA8IHBsOyArK2kpIHtcblx0XHRpZihGSVtpXS50eXBlICE9PSAyIC8qIHN0cmVhbSAqLykgRlBbaV0gKz0gXCIvXCI7XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0X21mYXRfZW50cnkoZW50cnkvKjpDRkJFbnRyeSovLCBwYXlsb2FkLyo6UmF3Qnl0ZXMqLywgbWluaS8qOj9SYXdCeXRlcyovKS8qOkNGQmxvYiovIHtcblx0dmFyIHN0YXJ0ID0gZW50cnkuc3RhcnQsIHNpemUgPSBlbnRyeS5zaXplO1xuXHQvL3JldHVybiAocGF5bG9hZC5zbGljZShzdGFydCpNU1NaLCBzdGFydCpNU1NaICsgc2l6ZSkvKjphbnkqLyk7XG5cdHZhciBvID0gW107XG5cdHZhciBpZHggPSBzdGFydDtcblx0d2hpbGUobWluaSAmJiBzaXplID4gMCAmJiBpZHggPj0gMCkge1xuXHRcdG8ucHVzaChwYXlsb2FkLnNsaWNlKGlkeCAqIE1TU1osIGlkeCAqIE1TU1ogKyBNU1NaKSk7XG5cdFx0c2l6ZSAtPSBNU1NaO1xuXHRcdGlkeCA9IF9fcmVhZEludDMyTEUobWluaSwgaWR4ICogNCk7XG5cdH1cblx0aWYoby5sZW5ndGggPT09IDApIHJldHVybiAobmV3X2J1ZigwKS8qOmFueSovKTtcblx0cmV0dXJuIChiY29uY2F0KG8pLnNsaWNlKDAsIGVudHJ5LnNpemUpLyo6YW55Ki8pO1xufVxuXG4vKiogQ2hhc2UgZG93biB0aGUgcmVzdCBvZiB0aGUgRElGQVQgY2hhaW4gdG8gYnVpbGQgYSBjb21wcmVoZW5zaXZlIGxpc3RcbiAgICBESUZBVCBjaGFpbnMgYnkgc3RvcmluZyB0aGUgbmV4dCBzZWN0b3IgbnVtYmVyIGFzIHRoZSBsYXN0IDMyIGJpdHMgKi9cbmZ1bmN0aW9uIHNsZXV0aF9mYXQoaWR4Lyo6bnVtYmVyKi8sIGNudC8qOm51bWJlciovLCBzZWN0b3JzLyo6QXJyYXk8UmF3Qnl0ZXM+Ki8sIHNzei8qOm51bWJlciovLCBmYXRfYWRkcnMpLyo6dm9pZCovIHtcblx0dmFyIHEvKjpudW1iZXIqLyA9IEVORE9GQ0hBSU47XG5cdGlmKGlkeCA9PT0gRU5ET0ZDSEFJTikge1xuXHRcdGlmKGNudCAhPT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiRElGQVQgY2hhaW4gc2hvcnRlciB0aGFuIGV4cGVjdGVkXCIpO1xuXHR9IGVsc2UgaWYoaWR4ICE9PSAtMSAvKkZSRUVTRUNUKi8pIHtcblx0XHR2YXIgc2VjdG9yID0gc2VjdG9yc1tpZHhdLCBtID0gKHNzej4+PjIpLTE7XG5cdFx0aWYoIXNlY3RvcikgcmV0dXJuO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBtOyArK2kpIHtcblx0XHRcdGlmKChxID0gX19yZWFkSW50MzJMRShzZWN0b3IsaSo0KSkgPT09IEVORE9GQ0hBSU4pIGJyZWFrO1xuXHRcdFx0ZmF0X2FkZHJzLnB1c2gocSk7XG5cdFx0fVxuXHRcdHNsZXV0aF9mYXQoX19yZWFkSW50MzJMRShzZWN0b3Isc3N6LTQpLGNudCAtIDEsIHNlY3RvcnMsIHNzeiwgZmF0X2FkZHJzKTtcblx0fVxufVxuXG4vKiogRm9sbG93IHRoZSBsaW5rZWQgbGlzdCBvZiBzZWN0b3JzIGZvciBhIGdpdmVuIHN0YXJ0aW5nIHBvaW50ICovXG5mdW5jdGlvbiBnZXRfc2VjdG9yX2xpc3Qoc2VjdG9ycy8qOkFycmF5PFJhd0J5dGVzPiovLCBzdGFydC8qOm51bWJlciovLCBmYXRfYWRkcnMvKjpBcnJheTxudW1iZXI+Ki8sIHNzei8qOm51bWJlciovLCBjaGtkLyo6P0FycmF5PGJvb2xlYW4+Ki8pLyo6U2VjdG9yRW50cnkqLyB7XG5cdHZhciBidWYvKjpBcnJheTxudW1iZXI+Ki8gPSBbXSwgYnVmX2NoYWluLyo6QXJyYXk8YW55PiovID0gW107XG5cdGlmKCFjaGtkKSBjaGtkID0gW107XG5cdHZhciBtb2R1bHVzID0gc3N6IC0gMSwgaiA9IDAsIGpqID0gMDtcblx0Zm9yKGo9c3RhcnQ7IGo+PTA7KSB7XG5cdFx0Y2hrZFtqXSA9IHRydWU7XG5cdFx0YnVmW2J1Zi5sZW5ndGhdID0gajtcblx0XHRidWZfY2hhaW4ucHVzaChzZWN0b3JzW2pdKTtcblx0XHR2YXIgYWRkciA9IGZhdF9hZGRyc1tNYXRoLmZsb29yKGoqNC9zc3opXTtcblx0XHRqaiA9ICgoaio0KSAmIG1vZHVsdXMpO1xuXHRcdGlmKHNzeiA8IDQgKyBqaikgdGhyb3cgbmV3IEVycm9yKFwiRkFUIGJvdW5kYXJ5IGNyb3NzZWQ6IFwiICsgaiArIFwiIDQgXCIrc3N6KTtcblx0XHRpZighc2VjdG9yc1thZGRyXSkgYnJlYWs7XG5cdFx0aiA9IF9fcmVhZEludDMyTEUoc2VjdG9yc1thZGRyXSwgamopO1xuXHR9XG5cdHJldHVybiB7bm9kZXM6IGJ1ZiwgZGF0YTpfX3RvQnVmZmVyKFtidWZfY2hhaW5dKX07XG59XG5cbi8qKiBDaGFzZSBkb3duIHRoZSBzZWN0b3IgbGlua2VkIGxpc3RzICovXG5mdW5jdGlvbiBtYWtlX3NlY3Rvcl9saXN0KHNlY3RvcnMvKjpBcnJheTxSYXdCeXRlcz4qLywgZGlyX3N0YXJ0Lyo6bnVtYmVyKi8sIGZhdF9hZGRycy8qOkFycmF5PG51bWJlcj4qLywgc3N6Lyo6bnVtYmVyKi8pLyo6U2VjdG9yTGlzdCovIHtcblx0dmFyIHNsID0gc2VjdG9ycy5sZW5ndGgsIHNlY3Rvcl9saXN0Lyo6U2VjdG9yTGlzdCovID0gKFtdLyo6YW55Ki8pO1xuXHR2YXIgY2hrZC8qOkFycmF5PGJvb2xlYW4+Ki8gPSBbXSwgYnVmLyo6QXJyYXk8bnVtYmVyPiovID0gW10sIGJ1Zl9jaGFpbi8qOkFycmF5PFJhd0J5dGVzPiovID0gW107XG5cdHZhciBtb2R1bHVzID0gc3N6IC0gMSwgaT0wLCBqPTAsIGs9MCwgamo9MDtcblx0Zm9yKGk9MDsgaSA8IHNsOyArK2kpIHtcblx0XHRidWYgPSAoW10vKjpBcnJheTxudW1iZXI+Ki8pO1xuXHRcdGsgPSAoaSArIGRpcl9zdGFydCk7IGlmKGsgPj0gc2wpIGstPXNsO1xuXHRcdGlmKGNoa2Rba10pIGNvbnRpbnVlO1xuXHRcdGJ1Zl9jaGFpbiA9IFtdO1xuXHRcdHZhciBzZWVuID0gW107XG5cdFx0Zm9yKGo9azsgaj49MDspIHtcblx0XHRcdHNlZW5bal0gPSB0cnVlO1xuXHRcdFx0Y2hrZFtqXSA9IHRydWU7XG5cdFx0XHRidWZbYnVmLmxlbmd0aF0gPSBqO1xuXHRcdFx0YnVmX2NoYWluLnB1c2goc2VjdG9yc1tqXSk7XG5cdFx0XHR2YXIgYWRkci8qOm51bWJlciovID0gZmF0X2FkZHJzW01hdGguZmxvb3Ioaio0L3NzeildO1xuXHRcdFx0amogPSAoKGoqNCkgJiBtb2R1bHVzKTtcblx0XHRcdGlmKHNzeiA8IDQgKyBqaikgdGhyb3cgbmV3IEVycm9yKFwiRkFUIGJvdW5kYXJ5IGNyb3NzZWQ6IFwiICsgaiArIFwiIDQgXCIrc3N6KTtcblx0XHRcdGlmKCFzZWN0b3JzW2FkZHJdKSBicmVhaztcblx0XHRcdGogPSBfX3JlYWRJbnQzMkxFKHNlY3RvcnNbYWRkcl0sIGpqKTtcblx0XHRcdGlmKHNlZW5bal0pIGJyZWFrO1xuXHRcdH1cblx0XHRzZWN0b3JfbGlzdFtrXSA9ICh7bm9kZXM6IGJ1ZiwgZGF0YTpfX3RvQnVmZmVyKFtidWZfY2hhaW5dKX0vKjpTZWN0b3JFbnRyeSovKTtcblx0fVxuXHRyZXR1cm4gc2VjdG9yX2xpc3Q7XG59XG5cbi8qIFtNUy1DRkJdIDIuNi4xIENvbXBvdW5kIEZpbGUgRGlyZWN0b3J5IEVudHJ5ICovXG5mdW5jdGlvbiByZWFkX2RpcmVjdG9yeShkaXJfc3RhcnQvKjpudW1iZXIqLywgc2VjdG9yX2xpc3QvKjpTZWN0b3JMaXN0Ki8sIHNlY3RvcnMvKjpBcnJheTxSYXdCeXRlcz4qLywgUGF0aHMvKjpBcnJheTxzdHJpbmc+Ki8sIG5tZnMsIGZpbGVzLCBGaWxlSW5kZXgsIG1pbmkpIHtcblx0dmFyIG1pbmlmYXRfc3RvcmUgPSAwLCBwbCA9IChQYXRocy5sZW5ndGg/MjowKTtcblx0dmFyIHNlY3RvciA9IHNlY3Rvcl9saXN0W2Rpcl9zdGFydF0uZGF0YTtcblx0dmFyIGkgPSAwLCBuYW1lbGVuID0gMCwgbmFtZTtcblx0Zm9yKDsgaSA8IHNlY3Rvci5sZW5ndGg7IGkrPSAxMjgpIHtcblx0XHR2YXIgYmxvYi8qOkNGQmxvYiovID0gLyo6OigqL3NlY3Rvci5zbGljZShpLCBpKzEyOCkvKjo6IDphbnkpKi87XG5cdFx0cHJlcF9ibG9iKGJsb2IsIDY0KTtcblx0XHRuYW1lbGVuID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRcdG5hbWUgPSBfX3V0ZjE2bGUoYmxvYiwwLG5hbWVsZW4tcGwpO1xuXHRcdFBhdGhzLnB1c2gobmFtZSk7XG5cdFx0dmFyIG8vKjpDRkJFbnRyeSovID0gKHtcblx0XHRcdG5hbWU6ICBuYW1lLFxuXHRcdFx0dHlwZTogIGJsb2IucmVhZF9zaGlmdCgxKSxcblx0XHRcdGNvbG9yOiBibG9iLnJlYWRfc2hpZnQoMSksXG5cdFx0XHRMOiAgICAgYmxvYi5yZWFkX3NoaWZ0KDQsICdpJyksXG5cdFx0XHRSOiAgICAgYmxvYi5yZWFkX3NoaWZ0KDQsICdpJyksXG5cdFx0XHRDOiAgICAgYmxvYi5yZWFkX3NoaWZ0KDQsICdpJyksXG5cdFx0XHRjbHNpZDogYmxvYi5yZWFkX3NoaWZ0KDE2KSxcblx0XHRcdHN0YXRlOiBibG9iLnJlYWRfc2hpZnQoNCwgJ2knKSxcblx0XHRcdHN0YXJ0OiAwLFxuXHRcdFx0c2l6ZTogMFxuXHRcdH0pO1xuXHRcdHZhciBjdGltZS8qOm51bWJlciovID0gYmxvYi5yZWFkX3NoaWZ0KDIpICsgYmxvYi5yZWFkX3NoaWZ0KDIpICsgYmxvYi5yZWFkX3NoaWZ0KDIpICsgYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRcdGlmKGN0aW1lICE9PSAwKSBvLmN0ID0gcmVhZF9kYXRlKGJsb2IsIGJsb2IubC04KTtcblx0XHR2YXIgbXRpbWUvKjpudW1iZXIqLyA9IGJsb2IucmVhZF9zaGlmdCgyKSArIGJsb2IucmVhZF9zaGlmdCgyKSArIGJsb2IucmVhZF9zaGlmdCgyKSArIGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHRpZihtdGltZSAhPT0gMCkgby5tdCA9IHJlYWRfZGF0ZShibG9iLCBibG9iLmwtOCk7XG5cdFx0by5zdGFydCA9IGJsb2IucmVhZF9zaGlmdCg0LCAnaScpO1xuXHRcdG8uc2l6ZSA9IGJsb2IucmVhZF9zaGlmdCg0LCAnaScpO1xuXHRcdGlmKG8uc2l6ZSA8IDAgJiYgby5zdGFydCA8IDApIHsgby5zaXplID0gby50eXBlID0gMDsgby5zdGFydCA9IEVORE9GQ0hBSU47IG8ubmFtZSA9IFwiXCI7IH1cblx0XHRpZihvLnR5cGUgPT09IDUpIHsgLyogcm9vdCAqL1xuXHRcdFx0bWluaWZhdF9zdG9yZSA9IG8uc3RhcnQ7XG5cdFx0XHRpZihubWZzID4gMCAmJiBtaW5pZmF0X3N0b3JlICE9PSBFTkRPRkNIQUlOKSBzZWN0b3JfbGlzdFttaW5pZmF0X3N0b3JlXS5uYW1lID0gXCIhU3RyZWFtRGF0YVwiO1xuXHRcdFx0LyptaW5pZmF0X3NpemUgPSBvLnNpemU7Ki9cblx0XHR9IGVsc2UgaWYoby5zaXplID49IDQwOTYgLyogTVNDU1ogKi8pIHtcblx0XHRcdG8uc3RvcmFnZSA9ICdmYXQnO1xuXHRcdFx0aWYoc2VjdG9yX2xpc3Rbby5zdGFydF0gPT09IHVuZGVmaW5lZCkgc2VjdG9yX2xpc3Rbby5zdGFydF0gPSBnZXRfc2VjdG9yX2xpc3Qoc2VjdG9ycywgby5zdGFydCwgc2VjdG9yX2xpc3QuZmF0X2FkZHJzLCBzZWN0b3JfbGlzdC5zc3opO1xuXHRcdFx0c2VjdG9yX2xpc3Rbby5zdGFydF0ubmFtZSA9IG8ubmFtZTtcblx0XHRcdG8uY29udGVudCA9IChzZWN0b3JfbGlzdFtvLnN0YXJ0XS5kYXRhLnNsaWNlKDAsby5zaXplKS8qOmFueSovKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0by5zdG9yYWdlID0gJ21pbmlmYXQnO1xuXHRcdFx0aWYoby5zaXplIDwgMCkgby5zaXplID0gMDtcblx0XHRcdGVsc2UgaWYobWluaWZhdF9zdG9yZSAhPT0gRU5ET0ZDSEFJTiAmJiBvLnN0YXJ0ICE9PSBFTkRPRkNIQUlOICYmIHNlY3Rvcl9saXN0W21pbmlmYXRfc3RvcmVdKSB7XG5cdFx0XHRcdG8uY29udGVudCA9IGdldF9tZmF0X2VudHJ5KG8sIHNlY3Rvcl9saXN0W21pbmlmYXRfc3RvcmVdLmRhdGEsIChzZWN0b3JfbGlzdFttaW5pXXx8e30pLmRhdGEpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihvLmNvbnRlbnQpIHByZXBfYmxvYihvLmNvbnRlbnQsIDApO1xuXHRcdGZpbGVzW25hbWVdID0gbztcblx0XHRGaWxlSW5kZXgucHVzaChvKTtcblx0fVxufVxuXG5mdW5jdGlvbiByZWFkX2RhdGUoYmxvYi8qOlJhd0J5dGVzfENGQmxvYiovLCBvZmZzZXQvKjpudW1iZXIqLykvKjpEYXRlKi8ge1xuXHRyZXR1cm4gbmV3IERhdGUoKCAoIChfX3JlYWRVSW50MzJMRShibG9iLG9mZnNldCs0KS8xZTcpKk1hdGgucG93KDIsMzIpK19fcmVhZFVJbnQzMkxFKGJsb2Isb2Zmc2V0KS8xZTcgKSAtIDExNjQ0NDczNjAwKSoxMDAwKTtcbn1cblxuZnVuY3Rpb24gcmVhZF9maWxlKGZpbGVuYW1lLyo6c3RyaW5nKi8sIG9wdGlvbnMvKjpDRkJSZWFkT3B0cyovKSB7XG5cdGdldF9mcygpO1xuXHRyZXR1cm4gcGFyc2UoZnMucmVhZEZpbGVTeW5jKGZpbGVuYW1lKSwgb3B0aW9ucyk7XG59XG5cbmZ1bmN0aW9uIHJlYWQoYmxvYi8qOlJhd0J5dGVzfHN0cmluZyovLCBvcHRpb25zLyo6Q0ZCUmVhZE9wdHMqLykge1xuXHR2YXIgdHlwZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy50eXBlO1xuXHRpZighdHlwZSkge1xuXHRcdGlmKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGJsb2IpKSB0eXBlID0gXCJidWZmZXJcIjtcblx0fVxuXHRzd2l0Y2godHlwZSB8fCBcImJhc2U2NFwiKSB7XG5cdFx0Y2FzZSBcImZpbGVcIjogLyo6OiBpZih0eXBlb2YgYmxvYiAhPT0gJ3N0cmluZycpIHRocm93IFwiTXVzdCBwYXNzIGEgZmlsZW5hbWUgd2hlbiB0eXBlPSdmaWxlJ1wiOyAqL3JldHVybiByZWFkX2ZpbGUoYmxvYiwgb3B0aW9ucyk7XG5cdFx0Y2FzZSBcImJhc2U2NFwiOiAvKjo6IGlmKHR5cGVvZiBibG9iICE9PSAnc3RyaW5nJykgdGhyb3cgXCJNdXN0IHBhc3MgYSBiYXNlNjQtZW5jb2RlZCBiaW5hcnkgc3RyaW5nIHdoZW4gdHlwZT0nZmlsZSdcIjsgKi9yZXR1cm4gcGFyc2UoczJhKEJhc2U2NF9kZWNvZGUoYmxvYikpLCBvcHRpb25zKTtcblx0XHRjYXNlIFwiYmluYXJ5XCI6IC8qOjogaWYodHlwZW9mIGJsb2IgIT09ICdzdHJpbmcnKSB0aHJvdyBcIk11c3QgcGFzcyBhIGJpbmFyeSBzdHJpbmcgd2hlbiB0eXBlPSdmaWxlJ1wiOyAqL3JldHVybiBwYXJzZShzMmEoYmxvYiksIG9wdGlvbnMpO1xuXHR9XG5cdHJldHVybiBwYXJzZSgvKjo6dHlwZW9mIGJsb2IgPT0gJ3N0cmluZycgPyBuZXcgQnVmZmVyKGJsb2IsICd1dGYtOCcpIDogKi9ibG9iLCBvcHRpb25zKTtcbn1cblxuZnVuY3Rpb24gaW5pdF9jZmIoY2ZiLyo6Q0ZCQ29udGFpbmVyKi8sIG9wdHMvKjo/YW55Ki8pLyo6dm9pZCovIHtcblx0dmFyIG8gPSBvcHRzIHx8IHt9LCByb290ID0gby5yb290IHx8IFwiUm9vdCBFbnRyeVwiO1xuXHRpZighY2ZiLkZ1bGxQYXRocykgY2ZiLkZ1bGxQYXRocyA9IFtdO1xuXHRpZighY2ZiLkZpbGVJbmRleCkgY2ZiLkZpbGVJbmRleCA9IFtdO1xuXHRpZihjZmIuRnVsbFBhdGhzLmxlbmd0aCAhPT0gY2ZiLkZpbGVJbmRleC5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihcImluY29uc2lzdGVudCBDRkIgc3RydWN0dXJlXCIpO1xuXHRpZihjZmIuRnVsbFBhdGhzLmxlbmd0aCA9PT0gMCkge1xuXHRcdGNmYi5GdWxsUGF0aHNbMF0gPSByb290ICsgXCIvXCI7XG5cdFx0Y2ZiLkZpbGVJbmRleFswXSA9ICh7IG5hbWU6IHJvb3QsIHR5cGU6IDUgfS8qOmFueSovKTtcblx0fVxuXHRpZihvLkNMU0lEKSBjZmIuRmlsZUluZGV4WzBdLmNsc2lkID0gby5DTFNJRDtcblx0c2VlZF9jZmIoY2ZiKTtcbn1cbmZ1bmN0aW9uIHNlZWRfY2ZiKGNmYi8qOkNGQkNvbnRhaW5lciovKS8qOnZvaWQqLyB7XG5cdHZhciBubSA9IFwiXFx1MDAwMVNoMzN0SjVcIjtcblx0aWYoQ0ZCLmZpbmQoY2ZiLCBcIi9cIiArIG5tKSkgcmV0dXJuO1xuXHR2YXIgcCA9IG5ld19idWYoNCk7IHBbMF0gPSA1NTsgcFsxXSA9IHBbM10gPSA1MDsgcFsyXSA9IDU0O1xuXHRjZmIuRmlsZUluZGV4LnB1c2goKHsgbmFtZTogbm0sIHR5cGU6IDIsIGNvbnRlbnQ6cCwgc2l6ZTo0LCBMOjY5LCBSOjY5LCBDOjY5IH0vKjphbnkqLykpO1xuXHRjZmIuRnVsbFBhdGhzLnB1c2goY2ZiLkZ1bGxQYXRoc1swXSArIG5tKTtcblx0cmVidWlsZF9jZmIoY2ZiKTtcbn1cbmZ1bmN0aW9uIHJlYnVpbGRfY2ZiKGNmYi8qOkNGQkNvbnRhaW5lciovLCBmLyo6P2Jvb2xlYW4qLykvKjp2b2lkKi8ge1xuXHRpbml0X2NmYihjZmIpO1xuXHR2YXIgZ2MgPSBmYWxzZSwgcyA9IGZhbHNlO1xuXHRmb3IodmFyIGkgPSBjZmIuRnVsbFBhdGhzLmxlbmd0aCAtIDE7IGkgPj0gMDsgLS1pKSB7XG5cdFx0dmFyIF9maWxlID0gY2ZiLkZpbGVJbmRleFtpXTtcblx0XHRzd2l0Y2goX2ZpbGUudHlwZSkge1xuXHRcdFx0Y2FzZSAwOlxuXHRcdFx0XHRpZihzKSBnYyA9IHRydWU7XG5cdFx0XHRcdGVsc2UgeyBjZmIuRmlsZUluZGV4LnBvcCgpOyBjZmIuRnVsbFBhdGhzLnBvcCgpOyB9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAxOiBjYXNlIDI6IGNhc2UgNTpcblx0XHRcdFx0cyA9IHRydWU7XG5cdFx0XHRcdGlmKGlzTmFOKF9maWxlLlIgKiBfZmlsZS5MICogX2ZpbGUuQykpIGdjID0gdHJ1ZTtcblx0XHRcdFx0aWYoX2ZpbGUuUiA+IC0xICYmIF9maWxlLkwgPiAtMSAmJiBfZmlsZS5SID09IF9maWxlLkwpIGdjID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OiBnYyA9IHRydWU7IGJyZWFrO1xuXHRcdH1cblx0fVxuXHRpZighZ2MgJiYgIWYpIHJldHVybjtcblxuXHR2YXIgbm93ID0gbmV3IERhdGUoMTk4NywgMSwgMTkpLCBqID0gMDtcblx0Ly8gVHJhY2sgd2hpY2ggbmFtZXMgZXhpc3Rcblx0dmFyIGZ1bGxQYXRocyA9IE9iamVjdC5jcmVhdGUgPyBPYmplY3QuY3JlYXRlKG51bGwpIDoge307XG5cdHZhciBkYXRhLyo6QXJyYXk8W3N0cmluZywgQ0ZCRW50cnldPiovID0gW107XG5cdGZvcihpID0gMDsgaSA8IGNmYi5GdWxsUGF0aHMubGVuZ3RoOyArK2kpIHtcblx0XHRmdWxsUGF0aHNbY2ZiLkZ1bGxQYXRoc1tpXV0gPSB0cnVlO1xuXHRcdGlmKGNmYi5GaWxlSW5kZXhbaV0udHlwZSA9PT0gMCkgY29udGludWU7XG5cdFx0ZGF0YS5wdXNoKFtjZmIuRnVsbFBhdGhzW2ldLCBjZmIuRmlsZUluZGV4W2ldXSk7XG5cdH1cblx0Zm9yKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkge1xuXHRcdHZhciBkYWQgPSBkaXJuYW1lKGRhdGFbaV1bMF0pO1xuXHRcdHMgPSBmdWxsUGF0aHNbZGFkXTtcblx0XHRpZighcykge1xuXHRcdFx0ZGF0YS5wdXNoKFtkYWQsICh7XG5cdFx0XHRcdG5hbWU6IGZpbGVuYW1lKGRhZCkucmVwbGFjZShcIi9cIixcIlwiKSxcblx0XHRcdFx0dHlwZTogMSxcblx0XHRcdFx0Y2xzaWQ6IEhFQURFUl9DTFNJRCxcblx0XHRcdFx0Y3Q6IG5vdywgbXQ6IG5vdyxcblx0XHRcdFx0Y29udGVudDogbnVsbFxuXHRcdFx0fS8qOmFueSovKV0pO1xuXHRcdFx0Ly8gQWRkIG5hbWUgdG8gc2V0XG5cdFx0XHRmdWxsUGF0aHNbZGFkXSA9IHRydWU7XG5cdFx0fVxuXHR9XG5cblx0ZGF0YS5zb3J0KGZ1bmN0aW9uKHgseSkgeyByZXR1cm4gbmFtZWNtcCh4WzBdLCB5WzBdKTsgfSk7XG5cdGNmYi5GdWxsUGF0aHMgPSBbXTsgY2ZiLkZpbGVJbmRleCA9IFtdO1xuXHRmb3IoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgKytpKSB7IGNmYi5GdWxsUGF0aHNbaV0gPSBkYXRhW2ldWzBdOyBjZmIuRmlsZUluZGV4W2ldID0gZGF0YVtpXVsxXTsgfVxuXHRmb3IoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIGVsdCA9IGNmYi5GaWxlSW5kZXhbaV07XG5cdFx0dmFyIG5tID0gY2ZiLkZ1bGxQYXRoc1tpXTtcblxuXHRcdGVsdC5uYW1lID0gIGZpbGVuYW1lKG5tKS5yZXBsYWNlKFwiL1wiLFwiXCIpO1xuXHRcdGVsdC5MID0gZWx0LlIgPSBlbHQuQyA9IC0oZWx0LmNvbG9yID0gMSk7XG5cdFx0ZWx0LnNpemUgPSBlbHQuY29udGVudCA/IGVsdC5jb250ZW50Lmxlbmd0aCA6IDA7XG5cdFx0ZWx0LnN0YXJ0ID0gMDtcblx0XHRlbHQuY2xzaWQgPSAoZWx0LmNsc2lkIHx8IEhFQURFUl9DTFNJRCk7XG5cdFx0aWYoaSA9PT0gMCkge1xuXHRcdFx0ZWx0LkMgPSBkYXRhLmxlbmd0aCA+IDEgPyAxIDogLTE7XG5cdFx0XHRlbHQuc2l6ZSA9IDA7XG5cdFx0XHRlbHQudHlwZSA9IDU7XG5cdFx0fSBlbHNlIGlmKG5tLnNsaWNlKC0xKSA9PSBcIi9cIikge1xuXHRcdFx0Zm9yKGo9aSsxO2ogPCBkYXRhLmxlbmd0aDsgKytqKSBpZihkaXJuYW1lKGNmYi5GdWxsUGF0aHNbal0pPT1ubSkgYnJlYWs7XG5cdFx0XHRlbHQuQyA9IGogPj0gZGF0YS5sZW5ndGggPyAtMSA6IGo7XG5cdFx0XHRmb3Ioaj1pKzE7aiA8IGRhdGEubGVuZ3RoOyArK2opIGlmKGRpcm5hbWUoY2ZiLkZ1bGxQYXRoc1tqXSk9PWRpcm5hbWUobm0pKSBicmVhaztcblx0XHRcdGVsdC5SID0gaiA+PSBkYXRhLmxlbmd0aCA/IC0xIDogajtcblx0XHRcdGVsdC50eXBlID0gMTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYoZGlybmFtZShjZmIuRnVsbFBhdGhzW2krMV18fFwiXCIpID09IGRpcm5hbWUobm0pKSBlbHQuUiA9IGkgKyAxO1xuXHRcdFx0ZWx0LnR5cGUgPSAyO1xuXHRcdH1cblx0fVxuXG59XG5cbmZ1bmN0aW9uIF93cml0ZShjZmIvKjpDRkJDb250YWluZXIqLywgb3B0aW9ucy8qOkNGQldyaXRlT3B0cyovKS8qOlJhd0J5dGVzfHN0cmluZyovIHtcblx0dmFyIF9vcHRzID0gb3B0aW9ucyB8fCB7fTtcblx0LyogTUFEIGlzIG9yZGVyLXNlbnNpdGl2ZSwgc2tpcCByZWJ1aWxkIGFuZCBzb3J0ICovXG5cdGlmKF9vcHRzLmZpbGVUeXBlID09ICdtYWQnKSByZXR1cm4gd3JpdGVfbWFkKGNmYiwgX29wdHMpO1xuXHRyZWJ1aWxkX2NmYihjZmIpO1xuXHRzd2l0Y2goX29wdHMuZmlsZVR5cGUpIHtcblx0XHRjYXNlICd6aXAnOiByZXR1cm4gd3JpdGVfemlwKGNmYiwgX29wdHMpO1xuXHRcdC8vY2FzZSAnbWFkJzogcmV0dXJuIHdyaXRlX21hZChjZmIsIF9vcHRzKTtcblx0fVxuXHR2YXIgTCA9IChmdW5jdGlvbihjZmIvKjpDRkJDb250YWluZXIqLykvKjpBcnJheTxudW1iZXI+Ki97XG5cdFx0dmFyIG1pbmlfc2l6ZSA9IDAsIGZhdF9zaXplID0gMDtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgY2ZiLkZpbGVJbmRleC5sZW5ndGg7ICsraSkge1xuXHRcdFx0dmFyIGZpbGUgPSBjZmIuRmlsZUluZGV4W2ldO1xuXHRcdFx0aWYoIWZpbGUuY29udGVudCkgY29udGludWU7XG5cdFx0XHQvKjo6IGlmKGZpbGUuY29udGVudCA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0XHRcdHZhciBmbGVuID0gZmlsZS5jb250ZW50Lmxlbmd0aDtcblx0XHRcdGlmKGZsZW4gPiAwKXtcblx0XHRcdFx0aWYoZmxlbiA8IDB4MTAwMCkgbWluaV9zaXplICs9IChmbGVuICsgMHgzRikgPj4gNjtcblx0XHRcdFx0ZWxzZSBmYXRfc2l6ZSArPSAoZmxlbiArIDB4MDFGRikgPj4gOTtcblx0XHRcdH1cblx0XHR9XG5cdFx0dmFyIGRpcl9jbnQgPSAoY2ZiLkZ1bGxQYXRocy5sZW5ndGggKzMpID4+IDI7XG5cdFx0dmFyIG1pbmlfY250ID0gKG1pbmlfc2l6ZSArIDcpID4+IDM7XG5cdFx0dmFyIG1mYXRfY250ID0gKG1pbmlfc2l6ZSArIDB4N0YpID4+IDc7XG5cdFx0dmFyIGZhdF9iYXNlID0gbWluaV9jbnQgKyBmYXRfc2l6ZSArIGRpcl9jbnQgKyBtZmF0X2NudDtcblx0XHR2YXIgZmF0X2NudCA9IChmYXRfYmFzZSArIDB4N0YpID4+IDc7XG5cdFx0dmFyIGRpZmF0X2NudCA9IGZhdF9jbnQgPD0gMTA5ID8gMCA6IE1hdGguY2VpbCgoZmF0X2NudC0xMDkpLzB4N0YpO1xuXHRcdHdoaWxlKCgoZmF0X2Jhc2UgKyBmYXRfY250ICsgZGlmYXRfY250ICsgMHg3RikgPj4gNykgPiBmYXRfY250KSBkaWZhdF9jbnQgPSArK2ZhdF9jbnQgPD0gMTA5ID8gMCA6IE1hdGguY2VpbCgoZmF0X2NudC0xMDkpLzB4N0YpO1xuXHRcdHZhciBMID0gIFsxLCBkaWZhdF9jbnQsIGZhdF9jbnQsIG1mYXRfY250LCBkaXJfY250LCBmYXRfc2l6ZSwgbWluaV9zaXplLCAwXTtcblx0XHRjZmIuRmlsZUluZGV4WzBdLnNpemUgPSBtaW5pX3NpemUgPDwgNjtcblx0XHRMWzddID0gKGNmYi5GaWxlSW5kZXhbMF0uc3RhcnQ9TFswXStMWzFdK0xbMl0rTFszXStMWzRdK0xbNV0pKygoTFs2XSs3KSA+PiAzKTtcblx0XHRyZXR1cm4gTDtcblx0fSkoY2ZiKTtcblx0dmFyIG8gPSBuZXdfYnVmKExbN10gPDwgOSk7XG5cdHZhciBpID0gMCwgVCA9IDA7XG5cdHtcblx0XHRmb3IoaSA9IDA7IGkgPCA4OyArK2kpIG8ud3JpdGVfc2hpZnQoMSwgSEVBREVSX1NJR1tpXSk7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgODsgKytpKSBvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMHgwMDNFKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIDB4MDAwMyk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAweEZGRkUpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMHgwMDA5KTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIDB4MDAwNik7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgMzsgKytpKSBvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCg0LCBMWzJdKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIExbMF0gKyBMWzFdICsgTFsyXSArIExbM10gLSAxKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgMTw8MTIpO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgTFszXSA/IExbMF0gKyBMWzFdICsgTFsyXSAtIDE6IEVORE9GQ0hBSU4pO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgTFszXSk7XG5cdFx0by53cml0ZV9zaGlmdCgtNCwgTFsxXSA/IExbMF0gLSAxOiBFTkRPRkNIQUlOKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIExbMV0pO1xuXHRcdGZvcihpID0gMDsgaSA8IDEwOTsgKytpKSBvLndyaXRlX3NoaWZ0KC00LCBpIDwgTFsyXSA/IExbMV0gKyBpIDogLTEpO1xuXHR9XG5cdGlmKExbMV0pIHtcblx0XHRmb3IoVCA9IDA7IFQgPCBMWzFdOyArK1QpIHtcblx0XHRcdGZvcig7IGkgPCAyMzYgKyBUICogMTI3OyArK2kpIG8ud3JpdGVfc2hpZnQoLTQsIGkgPCBMWzJdID8gTFsxXSArIGkgOiAtMSk7XG5cdFx0XHRvLndyaXRlX3NoaWZ0KC00LCBUID09PSBMWzFdIC0gMSA/IEVORE9GQ0hBSU4gOiBUICsgMSk7XG5cdFx0fVxuXHR9XG5cdHZhciBjaGFpbml0ID0gZnVuY3Rpb24ody8qOm51bWJlciovKS8qOnZvaWQqLyB7XG5cdFx0Zm9yKFQgKz0gdzsgaTxULTE7ICsraSkgby53cml0ZV9zaGlmdCgtNCwgaSsxKTtcblx0XHRpZih3KSB7ICsraTsgby53cml0ZV9zaGlmdCgtNCwgRU5ET0ZDSEFJTik7IH1cblx0fTtcblx0VCA9IGkgPSAwO1xuXHRmb3IoVCs9TFsxXTsgaTxUOyArK2kpIG8ud3JpdGVfc2hpZnQoLTQsIGNvbnN0cy5ESUZTRUNUKTtcblx0Zm9yKFQrPUxbMl07IGk8VDsgKytpKSBvLndyaXRlX3NoaWZ0KC00LCBjb25zdHMuRkFUU0VDVCk7XG5cdGNoYWluaXQoTFszXSk7XG5cdGNoYWluaXQoTFs0XSk7XG5cdHZhciBqLyo6bnVtYmVyKi8gPSAwLCBmbGVuLyo6bnVtYmVyKi8gPSAwO1xuXHR2YXIgZmlsZS8qOkNGQkVudHJ5Ki8gPSBjZmIuRmlsZUluZGV4WzBdO1xuXHRmb3IoOyBqIDwgY2ZiLkZpbGVJbmRleC5sZW5ndGg7ICsraikge1xuXHRcdGZpbGUgPSBjZmIuRmlsZUluZGV4W2pdO1xuXHRcdGlmKCFmaWxlLmNvbnRlbnQpIGNvbnRpbnVlO1xuXHRcdC8qOjogaWYoZmlsZS5jb250ZW50ID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdGZsZW4gPSBmaWxlLmNvbnRlbnQubGVuZ3RoO1xuXHRcdGlmKGZsZW4gPCAweDEwMDApIGNvbnRpbnVlO1xuXHRcdGZpbGUuc3RhcnQgPSBUO1xuXHRcdGNoYWluaXQoKGZsZW4gKyAweDAxRkYpID4+IDkpO1xuXHR9XG5cdGNoYWluaXQoKExbNl0gKyA3KSA+PiAzKTtcblx0d2hpbGUoby5sICYgMHgxRkYpIG8ud3JpdGVfc2hpZnQoLTQsIGNvbnN0cy5FTkRPRkNIQUlOKTtcblx0VCA9IGkgPSAwO1xuXHRmb3IoaiA9IDA7IGogPCBjZmIuRmlsZUluZGV4Lmxlbmd0aDsgKytqKSB7XG5cdFx0ZmlsZSA9IGNmYi5GaWxlSW5kZXhbal07XG5cdFx0aWYoIWZpbGUuY29udGVudCkgY29udGludWU7XG5cdFx0Lyo6OiBpZihmaWxlLmNvbnRlbnQgPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwidW5yZWFjaGFibGVcIik7ICovXG5cdFx0ZmxlbiA9IGZpbGUuY29udGVudC5sZW5ndGg7XG5cdFx0aWYoIWZsZW4gfHwgZmxlbiA+PSAweDEwMDApIGNvbnRpbnVlO1xuXHRcdGZpbGUuc3RhcnQgPSBUO1xuXHRcdGNoYWluaXQoKGZsZW4gKyAweDNGKSA+PiA2KTtcblx0fVxuXHR3aGlsZShvLmwgJiAweDFGRikgby53cml0ZV9zaGlmdCgtNCwgY29uc3RzLkVORE9GQ0hBSU4pO1xuXHRmb3IoaSA9IDA7IGkgPCBMWzRdPDwyOyArK2kpIHtcblx0XHR2YXIgbm0gPSBjZmIuRnVsbFBhdGhzW2ldO1xuXHRcdGlmKCFubSB8fCBubS5sZW5ndGggPT09IDApIHtcblx0XHRcdGZvcihqID0gMDsgaiA8IDE3OyArK2opIG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0XHRmb3IoaiA9IDA7IGogPCAzOyArK2opIG8ud3JpdGVfc2hpZnQoNCwgLTEpO1xuXHRcdFx0Zm9yKGogPSAwOyBqIDwgMTI7ICsraikgby53cml0ZV9zaGlmdCg0LCAwKTtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHRmaWxlID0gY2ZiLkZpbGVJbmRleFtpXTtcblx0XHRpZihpID09PSAwKSBmaWxlLnN0YXJ0ID0gZmlsZS5zaXplID8gZmlsZS5zdGFydCAtIDEgOiBFTkRPRkNIQUlOO1xuXHRcdHZhciBfbm0vKjpzdHJpbmcqLyA9IChpID09PSAwICYmIF9vcHRzLnJvb3QpIHx8IGZpbGUubmFtZTtcblx0XHRmbGVuID0gMiooX25tLmxlbmd0aCsxKTtcblx0XHRvLndyaXRlX3NoaWZ0KDY0LCBfbm0sIFwidXRmMTZsZVwiKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIGZsZW4pO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgZmlsZS50eXBlKTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIGZpbGUuY29sb3IpO1xuXHRcdG8ud3JpdGVfc2hpZnQoLTQsIGZpbGUuTCk7XG5cdFx0by53cml0ZV9zaGlmdCgtNCwgZmlsZS5SKTtcblx0XHRvLndyaXRlX3NoaWZ0KC00LCBmaWxlLkMpO1xuXHRcdGlmKCFmaWxlLmNsc2lkKSBmb3IoaiA9IDA7IGogPCA0OyArK2opIG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0ZWxzZSBvLndyaXRlX3NoaWZ0KDE2LCBmaWxlLmNsc2lkLCBcImhleFwiKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIGZpbGUuc3RhdGUgfHwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCg0LCAwKTsgby53cml0ZV9zaGlmdCg0LCAwKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIDApOyBvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgZmlsZS5zdGFydCk7XG5cdFx0by53cml0ZV9zaGlmdCg0LCBmaWxlLnNpemUpOyBvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHR9XG5cdGZvcihpID0gMTsgaSA8IGNmYi5GaWxlSW5kZXgubGVuZ3RoOyArK2kpIHtcblx0XHRmaWxlID0gY2ZiLkZpbGVJbmRleFtpXTtcblx0XHQvKjo6IGlmKCFmaWxlLmNvbnRlbnQpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdGlmKGZpbGUuc2l6ZSA+PSAweDEwMDApIHtcblx0XHRcdG8ubCA9IChmaWxlLnN0YXJ0KzEpIDw8IDk7XG5cdFx0XHRpZiAoaGFzX2J1ZiAmJiBCdWZmZXIuaXNCdWZmZXIoZmlsZS5jb250ZW50KSkge1xuXHRcdFx0XHRmaWxlLmNvbnRlbnQuY29weShvLCBvLmwsIDAsIGZpbGUuc2l6ZSk7XG5cdFx0XHRcdC8vIG8gaXMgYSAwLWZpbGxlZCBCdWZmZXIgc28ganVzdCBzZXQgbmV4dCBvZmZzZXRcblx0XHRcdFx0by5sICs9IChmaWxlLnNpemUgKyA1MTEpICYgLTUxMjtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGZvcihqID0gMDsgaiA8IGZpbGUuc2l6ZTsgKytqKSBvLndyaXRlX3NoaWZ0KDEsIGZpbGUuY29udGVudFtqXSk7XG5cdFx0XHRcdGZvcig7IGogJiAweDFGRjsgKytqKSBvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRmb3IoaSA9IDE7IGkgPCBjZmIuRmlsZUluZGV4Lmxlbmd0aDsgKytpKSB7XG5cdFx0ZmlsZSA9IGNmYi5GaWxlSW5kZXhbaV07XG5cdFx0Lyo6OiBpZighZmlsZS5jb250ZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0XHRpZihmaWxlLnNpemUgPiAwICYmIGZpbGUuc2l6ZSA8IDB4MTAwMCkge1xuXHRcdFx0aWYgKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGZpbGUuY29udGVudCkpIHtcblx0XHRcdFx0ZmlsZS5jb250ZW50LmNvcHkobywgby5sLCAwLCBmaWxlLnNpemUpO1xuXHRcdFx0XHQvLyBvIGlzIGEgMC1maWxsZWQgQnVmZmVyIHNvIGp1c3Qgc2V0IG5leHQgb2Zmc2V0XG5cdFx0XHRcdG8ubCArPSAoZmlsZS5zaXplICsgNjMpICYgLTY0O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yKGogPSAwOyBqIDwgZmlsZS5zaXplOyArK2opIG8ud3JpdGVfc2hpZnQoMSwgZmlsZS5jb250ZW50W2pdKTtcblx0XHRcdFx0Zm9yKDsgaiAmIDB4M0Y7ICsraikgby53cml0ZV9zaGlmdCgxLCAwKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYgKGhhc19idWYpIHtcblx0XHRvLmwgPSBvLmxlbmd0aDtcblx0fSBlbHNlIHtcblx0XHQvLyBXaGVuIHVzaW5nIEJ1ZmZlciwgYWxyZWFkeSAwLWZpbGxlZFxuXHRcdHdoaWxlKG8ubCA8IG8ubGVuZ3RoKSBvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHR9XG5cdHJldHVybiBvO1xufVxuLyogW01TLUNGQl0gMi42LjQgKFVuaWNvZGUgMy4wLjEgY2FzZSBjb252ZXJzaW9uKSAqL1xuZnVuY3Rpb24gZmluZChjZmIvKjpDRkJDb250YWluZXIqLywgcGF0aC8qOnN0cmluZyovKS8qOj9DRkJFbnRyeSovIHtcblx0dmFyIFVDRnVsbFBhdGhzLyo6QXJyYXk8c3RyaW5nPiovID0gY2ZiLkZ1bGxQYXRocy5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4geC50b1VwcGVyQ2FzZSgpOyB9KTtcblx0dmFyIFVDUGF0aHMvKjpBcnJheTxzdHJpbmc+Ki8gPSBVQ0Z1bGxQYXRocy5tYXAoZnVuY3Rpb24oeCkgeyB2YXIgeSA9IHguc3BsaXQoXCIvXCIpOyByZXR1cm4geVt5Lmxlbmd0aCAtICh4LnNsaWNlKC0xKSA9PSBcIi9cIiA/IDIgOiAxKV07IH0pO1xuXHR2YXIgay8qOmJvb2xlYW4qLyA9IGZhbHNlO1xuXHRpZihwYXRoLmNoYXJDb2RlQXQoMCkgPT09IDQ3IC8qIFwiL1wiICovKSB7IGsgPSB0cnVlOyBwYXRoID0gVUNGdWxsUGF0aHNbMF0uc2xpY2UoMCwgLTEpICsgcGF0aDsgfVxuXHRlbHNlIGsgPSBwYXRoLmluZGV4T2YoXCIvXCIpICE9PSAtMTtcblx0dmFyIFVDUGF0aC8qOnN0cmluZyovID0gcGF0aC50b1VwcGVyQ2FzZSgpO1xuXHR2YXIgdy8qOm51bWJlciovID0gayA9PT0gdHJ1ZSA/IFVDRnVsbFBhdGhzLmluZGV4T2YoVUNQYXRoKSA6IFVDUGF0aHMuaW5kZXhPZihVQ1BhdGgpO1xuXHRpZih3ICE9PSAtMSkgcmV0dXJuIGNmYi5GaWxlSW5kZXhbd107XG5cblx0dmFyIG0gPSAhVUNQYXRoLm1hdGNoKGNocjEpO1xuXHRVQ1BhdGggPSBVQ1BhdGgucmVwbGFjZShjaHIwLCcnKTtcblx0aWYobSkgVUNQYXRoID0gVUNQYXRoLnJlcGxhY2UoY2hyMSwnIScpO1xuXHRmb3IodyA9IDA7IHcgPCBVQ0Z1bGxQYXRocy5sZW5ndGg7ICsrdykge1xuXHRcdGlmKChtID8gVUNGdWxsUGF0aHNbd10ucmVwbGFjZShjaHIxLCchJykgOiBVQ0Z1bGxQYXRoc1t3XSkucmVwbGFjZShjaHIwLCcnKSA9PSBVQ1BhdGgpIHJldHVybiBjZmIuRmlsZUluZGV4W3ddO1xuXHRcdGlmKChtID8gVUNQYXRoc1t3XS5yZXBsYWNlKGNocjEsJyEnKSA6IFVDUGF0aHNbd10pLnJlcGxhY2UoY2hyMCwnJykgPT0gVUNQYXRoKSByZXR1cm4gY2ZiLkZpbGVJbmRleFt3XTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cbi8qKiBDRkIgQ29uc3RhbnRzICovXG52YXIgTVNTWiA9IDY0OyAvKiBNaW5pIFNlY3RvciBTaXplID0gMTw8NiAqL1xuLy92YXIgTVNDU1ogPSA0MDk2OyAvKiBNaW5pIFN0cmVhbSBDdXRvZmYgU2l6ZSAqL1xuLyogMi4xIENvbXBvdW5kIEZpbGUgU2VjdG9yIE51bWJlcnMgYW5kIFR5cGVzICovXG52YXIgRU5ET0ZDSEFJTiA9IC0yO1xuLyogMi4yIENvbXBvdW5kIEZpbGUgSGVhZGVyICovXG52YXIgSEVBREVSX1NJR05BVFVSRSA9ICdkMGNmMTFlMGExYjExYWUxJztcbnZhciBIRUFERVJfU0lHID0gWzB4RDAsIDB4Q0YsIDB4MTEsIDB4RTAsIDB4QTEsIDB4QjEsIDB4MUEsIDB4RTFdO1xudmFyIEhFQURFUl9DTFNJRCA9ICcwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMCc7XG52YXIgY29uc3RzID0ge1xuXHQvKiAyLjEgQ29tcHVuZCBGaWxlIFNlY3RvciBOdW1iZXJzIGFuZCBUeXBlcyAqL1xuXHRNQVhSRUdTRUNUOiAtNixcblx0RElGU0VDVDogLTQsXG5cdEZBVFNFQ1Q6IC0zLFxuXHRFTkRPRkNIQUlOOiBFTkRPRkNIQUlOLFxuXHRGUkVFU0VDVDogLTEsXG5cdC8qIDIuMiBDb21wb3VuZCBGaWxlIEhlYWRlciAqL1xuXHRIRUFERVJfU0lHTkFUVVJFOiBIRUFERVJfU0lHTkFUVVJFLFxuXHRIRUFERVJfTUlOT1JfVkVSU0lPTjogJzNlMDAnLFxuXHRNQVhSRUdTSUQ6IC02LFxuXHROT1NUUkVBTTogLTEsXG5cdEhFQURFUl9DTFNJRDogSEVBREVSX0NMU0lELFxuXHQvKiAyLjYuMSBDb21wb3VuZCBGaWxlIERpcmVjdG9yeSBFbnRyeSAqL1xuXHRFbnRyeVR5cGVzOiBbJ3Vua25vd24nLCdzdG9yYWdlJywnc3RyZWFtJywnbG9ja2J5dGVzJywncHJvcGVydHknLCdyb290J11cbn07XG5cbmZ1bmN0aW9uIHdyaXRlX2ZpbGUoY2ZiLyo6Q0ZCQ29udGFpbmVyKi8sIGZpbGVuYW1lLyo6c3RyaW5nKi8sIG9wdGlvbnMvKjpDRkJXcml0ZU9wdHMqLykvKjp2b2lkKi8ge1xuXHRnZXRfZnMoKTtcblx0dmFyIG8gPSBfd3JpdGUoY2ZiLCBvcHRpb25zKTtcblx0Lyo6OiBpZih0eXBlb2YgQnVmZmVyID09ICd1bmRlZmluZWQnIHx8ICFCdWZmZXIuaXNCdWZmZXIobykgfHwgIShvIGluc3RhbmNlb2YgQnVmZmVyKSkgdGhyb3cgbmV3IEVycm9yKFwidW5yZWFjaGFibGVcIik7ICovXG5cdGZzLndyaXRlRmlsZVN5bmMoZmlsZW5hbWUsIG8pO1xufVxuXG5mdW5jdGlvbiBhMnMoby8qOlJhd0J5dGVzKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgb3V0ID0gbmV3IEFycmF5KG8ubGVuZ3RoKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IG8ubGVuZ3RoOyArK2kpIG91dFtpXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUob1tpXSk7XG5cdHJldHVybiBvdXQuam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gd3JpdGUoY2ZiLyo6Q0ZCQ29udGFpbmVyKi8sIG9wdGlvbnMvKjpDRkJXcml0ZU9wdHMqLykvKjpSYXdCeXRlc3xzdHJpbmcqLyB7XG5cdHZhciBvID0gX3dyaXRlKGNmYiwgb3B0aW9ucyk7XG5cdHN3aXRjaChvcHRpb25zICYmIG9wdGlvbnMudHlwZSB8fCBcImJ1ZmZlclwiKSB7XG5cdFx0Y2FzZSBcImZpbGVcIjogZ2V0X2ZzKCk7IGZzLndyaXRlRmlsZVN5bmMob3B0aW9ucy5maWxlbmFtZSwgKG8vKjphbnkqLykpOyByZXR1cm4gbztcblx0XHRjYXNlIFwiYmluYXJ5XCI6IHJldHVybiB0eXBlb2YgbyA9PSBcInN0cmluZ1wiID8gbyA6IGEycyhvKTtcblx0XHRjYXNlIFwiYmFzZTY0XCI6IHJldHVybiBCYXNlNjRfZW5jb2RlKHR5cGVvZiBvID09IFwic3RyaW5nXCIgPyBvIDogYTJzKG8pKTtcblx0XHRjYXNlIFwiYnVmZmVyXCI6IGlmKGhhc19idWYpIHJldHVybiBCdWZmZXIuaXNCdWZmZXIobykgPyBvIDogQnVmZmVyX2Zyb20obyk7XG5cdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0Y2FzZSBcImFycmF5XCI6IHJldHVybiB0eXBlb2YgbyA9PSBcInN0cmluZ1wiID8gczJhKG8pIDogbztcblx0fVxuXHRyZXR1cm4gbztcbn1cbi8qIG5vZGUgPCA4LjEgemxpYiBkb2VzIG5vdCBleHBvc2UgYnl0ZXNSZWFkLCBzbyBkZWZhdWx0IHRvIHB1cmUgSlMgKi9cbnZhciBfemxpYjtcbmZ1bmN0aW9uIHVzZV96bGliKHpsaWIpIHsgdHJ5IHtcblx0dmFyIEluZmxhdGVSYXcgPSB6bGliLkluZmxhdGVSYXc7XG5cdHZhciBJbmZsUmF3ID0gbmV3IEluZmxhdGVSYXcoKTtcblx0SW5mbFJhdy5fcHJvY2Vzc0NodW5rKG5ldyBVaW50OEFycmF5KFszLCAwXSksIEluZmxSYXcuX2ZpbmlzaEZsdXNoRmxhZyk7XG5cdGlmKEluZmxSYXcuYnl0ZXNSZWFkKSBfemxpYiA9IHpsaWI7XG5cdGVsc2UgdGhyb3cgbmV3IEVycm9yKFwiemxpYiBkb2VzIG5vdCBleHBvc2UgYnl0ZXNSZWFkXCIpO1xufSBjYXRjaChlKSB7Y29uc29sZS5lcnJvcihcImNhbm5vdCB1c2UgbmF0aXZlIHpsaWI6IFwiICsgKGUubWVzc2FnZSB8fCBlKSk7IH0gfVxuXG5mdW5jdGlvbiBfaW5mbGF0ZVJhd1N5bmMocGF5bG9hZCwgdXN6KSB7XG5cdGlmKCFfemxpYikgcmV0dXJuIF9pbmZsYXRlKHBheWxvYWQsIHVzeik7XG5cdHZhciBJbmZsYXRlUmF3ID0gX3psaWIuSW5mbGF0ZVJhdztcblx0dmFyIEluZmxSYXcgPSBuZXcgSW5mbGF0ZVJhdygpO1xuXHR2YXIgb3V0ID0gSW5mbFJhdy5fcHJvY2Vzc0NodW5rKHBheWxvYWQuc2xpY2UocGF5bG9hZC5sKSwgSW5mbFJhdy5fZmluaXNoRmx1c2hGbGFnKTtcblx0cGF5bG9hZC5sICs9IEluZmxSYXcuYnl0ZXNSZWFkO1xuXHRyZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBfZGVmbGF0ZVJhd1N5bmMocGF5bG9hZCkge1xuXHRyZXR1cm4gX3psaWIgPyBfemxpYi5kZWZsYXRlUmF3U3luYyhwYXlsb2FkKSA6IF9kZWZsYXRlKHBheWxvYWQpO1xufVxudmFyIENMRU5fT1JERVIgPSBbIDE2LCAxNywgMTgsIDAsIDgsIDcsIDksIDYsIDEwLCA1LCAxMSwgNCwgMTIsIDMsIDEzLCAyLCAxNCwgMSwgMTUgXTtcblxuLyogIExFTl9JRCA9IFsgMjU3LCAyNTgsIDI1OSwgMjYwLCAyNjEsIDI2MiwgMjYzLCAyNjQsIDI2NSwgMjY2LCAyNjcsIDI2OCwgMjY5LCAyNzAsIDI3MSwgMjcyLCAyNzMsIDI3NCwgMjc1LCAyNzYsIDI3NywgMjc4LCAyNzksIDI4MCwgMjgxLCAyODIsIDI4MywgMjg0LCAyODUgXTsgKi9cbnZhciBMRU5fTE4gPSBbICAgMywgICA0LCAgIDUsICAgNiwgICA3LCAgIDgsICAgOSwgIDEwLCAgMTEsICAxMyAsIDE1LCAgMTcsICAxOSwgIDIzLCAgMjcsICAzMSwgIDM1LCAgNDMsICA1MSwgIDU5LCAgNjcsICA4MywgIDk5LCAxMTUsIDEzMSwgMTYzLCAxOTUsIDIyNywgMjU4IF07XG5cbi8qICBEU1RfSUQgPSBbICAwLCAgMSwgIDIsICAzLCAgNCwgIDUsICA2LCAgNywgIDgsICA5LCAxMCwgMTEsIDEyLCAxMywgIDE0LCAgMTUsICAxNiwgIDE3LCAgMTgsICAxOSwgICAyMCwgICAyMSwgICAyMiwgICAyMywgICAyNCwgICAyNSwgICAyNiwgICAgMjcsICAgIDI4LCAgICAyOSBdOyAqL1xudmFyIERTVF9MTiA9IFsgIDEsICAyLCAgMywgIDQsICA1LCAgNywgIDksIDEzLCAxNywgMjUsIDMzLCA0OSwgNjUsIDk3LCAxMjksIDE5MywgMjU3LCAzODUsIDUxMywgNzY5LCAxMDI1LCAxNTM3LCAyMDQ5LCAzMDczLCA0MDk3LCA2MTQ1LCA4MTkzLCAxMjI4OSwgMTYzODUsIDI0NTc3IF07XG5cbmZ1bmN0aW9uIGJpdF9zd2FwXzgobikgeyB2YXIgdCA9ICgoKCgobjw8MSl8KG48PDExKSkgJiAweDIyMTEwKSB8ICgoKG48PDUpfChuPDwxNSkpICYgMHg4ODQ0MCkpKTsgcmV0dXJuICgodD4+MTYpIHwgKHQ+PjgpIHx0KSYweEZGOyB9XG5cbnZhciB1c2VfdHlwZWRfYXJyYXlzID0gdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnO1xuXG52YXIgYml0c3dhcDggPSB1c2VfdHlwZWRfYXJyYXlzID8gbmV3IFVpbnQ4QXJyYXkoMTw8OCkgOiBbXTtcbmZvcih2YXIgcSA9IDA7IHEgPCAoMTw8OCk7ICsrcSkgYml0c3dhcDhbcV0gPSBiaXRfc3dhcF84KHEpO1xuXG5mdW5jdGlvbiBiaXRfc3dhcF9uKG4sIGIpIHtcblx0dmFyIHJldiA9IGJpdHN3YXA4W24gJiAweEZGXTtcblx0aWYoYiA8PSA4KSByZXR1cm4gcmV2ID4+PiAoOC1iKTtcblx0cmV2ID0gKHJldiA8PCA4KSB8IGJpdHN3YXA4WyhuPj44KSYweEZGXTtcblx0aWYoYiA8PSAxNikgcmV0dXJuIHJldiA+Pj4gKDE2LWIpO1xuXHRyZXYgPSAocmV2IDw8IDgpIHwgYml0c3dhcDhbKG4+PjE2KSYweEZGXTtcblx0cmV0dXJuIHJldiA+Pj4gKDI0LWIpO1xufVxuXG4vKiBoZWxwZXJzIGZvciB1bmFsaWduZWQgYml0IHJlYWRzICovXG5mdW5jdGlvbiByZWFkX2JpdHNfMihidWYsIGJsKSB7IHZhciB3ID0gKGJsJjcpLCBoID0gKGJsPj4+Myk7IHJldHVybiAoKGJ1ZltoXXwodyA8PSA2ID8gMCA6IGJ1ZltoKzFdPDw4KSk+Pj53KSYgMHgwMzsgfVxuZnVuY3Rpb24gcmVhZF9iaXRzXzMoYnVmLCBibCkgeyB2YXIgdyA9IChibCY3KSwgaCA9IChibD4+PjMpOyByZXR1cm4gKChidWZbaF18KHcgPD0gNSA/IDAgOiBidWZbaCsxXTw8OCkpPj4+dykmIDB4MDc7IH1cbmZ1bmN0aW9uIHJlYWRfYml0c180KGJ1ZiwgYmwpIHsgdmFyIHcgPSAoYmwmNyksIGggPSAoYmw+Pj4zKTsgcmV0dXJuICgoYnVmW2hdfCh3IDw9IDQgPyAwIDogYnVmW2grMV08PDgpKT4+PncpJiAweDBGOyB9XG5mdW5jdGlvbiByZWFkX2JpdHNfNShidWYsIGJsKSB7IHZhciB3ID0gKGJsJjcpLCBoID0gKGJsPj4+Myk7IHJldHVybiAoKGJ1ZltoXXwodyA8PSAzID8gMCA6IGJ1ZltoKzFdPDw4KSk+Pj53KSYgMHgxRjsgfVxuZnVuY3Rpb24gcmVhZF9iaXRzXzcoYnVmLCBibCkgeyB2YXIgdyA9IChibCY3KSwgaCA9IChibD4+PjMpOyByZXR1cm4gKChidWZbaF18KHcgPD0gMSA/IDAgOiBidWZbaCsxXTw8OCkpPj4+dykmIDB4N0Y7IH1cblxuLyogd29ya3MgdXAgdG8gbiA9IDMgKiA4ICsgMSA9IDI1ICovXG5mdW5jdGlvbiByZWFkX2JpdHNfbihidWYsIGJsLCBuKSB7XG5cdHZhciB3ID0gKGJsJjcpLCBoID0gKGJsPj4+MyksIGYgPSAoKDE8PG4pLTEpO1xuXHR2YXIgdiA9IGJ1ZltoXSA+Pj4gdztcblx0aWYobiA8IDggLSB3KSByZXR1cm4gdiAmIGY7XG5cdHYgfD0gYnVmW2grMV08PCg4LXcpO1xuXHRpZihuIDwgMTYgLSB3KSByZXR1cm4gdiAmIGY7XG5cdHYgfD0gYnVmW2grMl08PCgxNi13KTtcblx0aWYobiA8IDI0IC0gdykgcmV0dXJuIHYgJiBmO1xuXHR2IHw9IGJ1ZltoKzNdPDwoMjQtdyk7XG5cdHJldHVybiB2ICYgZjtcbn1cblxuLyogaGVscGVycyBmb3IgdW5hbGlnbmVkIGJpdCB3cml0ZXMgKi9cbmZ1bmN0aW9uIHdyaXRlX2JpdHNfMyhidWYsIGJsLCB2KSB7IHZhciB3ID0gYmwgJiA3LCBoID0gYmwgPj4+IDM7XG5cdGlmKHcgPD0gNSkgYnVmW2hdIHw9ICh2ICYgNykgPDwgdztcblx0ZWxzZSB7XG5cdFx0YnVmW2hdIHw9ICh2IDw8IHcpICYgMHhGRjtcblx0XHRidWZbaCsxXSA9ICh2JjcpID4+ICg4LXcpO1xuXHR9XG5cdHJldHVybiBibCArIDM7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX2JpdHNfMShidWYsIGJsLCB2KSB7XG5cdHZhciB3ID0gYmwgJiA3LCBoID0gYmwgPj4+IDM7XG5cdHYgPSAodiYxKSA8PCB3O1xuXHRidWZbaF0gfD0gdjtcblx0cmV0dXJuIGJsICsgMTtcbn1cbmZ1bmN0aW9uIHdyaXRlX2JpdHNfOChidWYsIGJsLCB2KSB7XG5cdHZhciB3ID0gYmwgJiA3LCBoID0gYmwgPj4+IDM7XG5cdHYgPDw9IHc7XG5cdGJ1ZltoXSB8PSAgdiAmIDB4RkY7IHYgPj4+PSA4O1xuXHRidWZbaCsxXSA9IHY7XG5cdHJldHVybiBibCArIDg7XG59XG5mdW5jdGlvbiB3cml0ZV9iaXRzXzE2KGJ1ZiwgYmwsIHYpIHtcblx0dmFyIHcgPSBibCAmIDcsIGggPSBibCA+Pj4gMztcblx0diA8PD0gdztcblx0YnVmW2hdIHw9ICB2ICYgMHhGRjsgdiA+Pj49IDg7XG5cdGJ1ZltoKzFdID0gdiAmIDB4RkY7XG5cdGJ1ZltoKzJdID0gdiA+Pj4gODtcblx0cmV0dXJuIGJsICsgMTY7XG59XG5cbi8qIHVudGlsIEFycmF5QnVmZmVyI3JlYWxsb2MgaXMgYSB0aGluZywgZmFrZSBhIHJlYWxsb2MgKi9cbmZ1bmN0aW9uIHJlYWxsb2MoYiwgc3ovKjpudW1iZXIqLykge1xuXHR2YXIgTCA9IGIubGVuZ3RoLCBNID0gMipMID4gc3ogPyAyKkwgOiBzeiArIDUsIGkgPSAwO1xuXHRpZihMID49IHN6KSByZXR1cm4gYjtcblx0aWYoaGFzX2J1Zikge1xuXHRcdHZhciBvID0gbmV3X3Vuc2FmZV9idWYoTSk7XG5cdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRpZihiLmNvcHkpIGIuY29weShvKTtcblx0XHRlbHNlIGZvcig7IGkgPCBiLmxlbmd0aDsgKytpKSBvW2ldID0gYltpXTtcblx0XHRyZXR1cm4gbztcblx0fSBlbHNlIGlmKHVzZV90eXBlZF9hcnJheXMpIHtcblx0XHR2YXIgYSA9IG5ldyBVaW50OEFycmF5KE0pO1xuXHRcdGlmKGEuc2V0KSBhLnNldChiKTtcblx0XHRlbHNlIGZvcig7IGkgPCBMOyArK2kpIGFbaV0gPSBiW2ldO1xuXHRcdHJldHVybiBhO1xuXHR9XG5cdGIubGVuZ3RoID0gTTtcblx0cmV0dXJuIGI7XG59XG5cbi8qIHplcm8tZmlsbGVkIGFycmF5cyBmb3Igb2xkZXIgYnJvd3NlcnMgKi9cbmZ1bmN0aW9uIHplcm9fZmlsbF9hcnJheShuKSB7XG5cdHZhciBvID0gbmV3IEFycmF5KG4pO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgbjsgKytpKSBvW2ldID0gMDtcblx0cmV0dXJuIG87XG59XG5cbi8qIGJ1aWxkIHRyZWUgKHVzZWQgZm9yIGxpdGVyYWxzIGFuZCBsZW5ndGhzKSAqL1xuZnVuY3Rpb24gYnVpbGRfdHJlZShjbGVucywgY21hcCwgTUFYLyo6bnVtYmVyKi8pLyo6bnVtYmVyKi8ge1xuXHR2YXIgbWF4bGVuID0gMSwgdyA9IDAsIGkgPSAwLCBqID0gMCwgY2NvZGUgPSAwLCBMID0gY2xlbnMubGVuZ3RoO1xuXG5cdHZhciBibF9jb3VudCAgPSB1c2VfdHlwZWRfYXJyYXlzID8gbmV3IFVpbnQxNkFycmF5KDMyKSA6IHplcm9fZmlsbF9hcnJheSgzMik7XG5cdGZvcihpID0gMDsgaSA8IDMyOyArK2kpIGJsX2NvdW50W2ldID0gMDtcblxuXHRmb3IoaSA9IEw7IGkgPCBNQVg7ICsraSkgY2xlbnNbaV0gPSAwO1xuXHRMID0gY2xlbnMubGVuZ3RoO1xuXG5cdHZhciBjdHJlZSA9IHVzZV90eXBlZF9hcnJheXMgPyBuZXcgVWludDE2QXJyYXkoTCkgOiB6ZXJvX2ZpbGxfYXJyYXkoTCk7IC8vIFtdXG5cblx0LyogYnVpbGQgY29kZSB0cmVlICovXG5cdGZvcihpID0gMDsgaSA8IEw7ICsraSkge1xuXHRcdGJsX2NvdW50Wyh3ID0gY2xlbnNbaV0pXSsrO1xuXHRcdGlmKG1heGxlbiA8IHcpIG1heGxlbiA9IHc7XG5cdFx0Y3RyZWVbaV0gPSAwO1xuXHR9XG5cdGJsX2NvdW50WzBdID0gMDtcblx0Zm9yKGkgPSAxOyBpIDw9IG1heGxlbjsgKytpKSBibF9jb3VudFtpKzE2XSA9IChjY29kZSA9IChjY29kZSArIGJsX2NvdW50W2ktMV0pPDwxKTtcblx0Zm9yKGkgPSAwOyBpIDwgTDsgKytpKSB7XG5cdFx0Y2NvZGUgPSBjbGVuc1tpXTtcblx0XHRpZihjY29kZSAhPSAwKSBjdHJlZVtpXSA9IGJsX2NvdW50W2Njb2RlKzE2XSsrO1xuXHR9XG5cblx0LyogY21hcFttYXhsZW4gKyA0IGJpdHNdID0gKG9mZiYxNSkgKyAobGl0PDw0KSByZXZlcnNlIG1hcHBpbmcgKi9cblx0dmFyIGNsZW5pID0gMDtcblx0Zm9yKGkgPSAwOyBpIDwgTDsgKytpKSB7XG5cdFx0Y2xlbmkgPSBjbGVuc1tpXTtcblx0XHRpZihjbGVuaSAhPSAwKSB7XG5cdFx0XHRjY29kZSA9IGJpdF9zd2FwX24oY3RyZWVbaV0sIG1heGxlbik+PihtYXhsZW4tY2xlbmkpO1xuXHRcdFx0Zm9yKGogPSAoMTw8KG1heGxlbiArIDQgLSBjbGVuaSkpIC0gMTsgaj49MDsgLS1qKVxuXHRcdFx0XHRjbWFwW2Njb2RlfChqPDxjbGVuaSldID0gKGNsZW5pJjE1KSB8IChpPDw0KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG1heGxlbjtcbn1cblxuLyogRml4ZWQgSHVmZm1hbiAqL1xudmFyIGZpeF9sbWFwID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50MTZBcnJheSg1MTIpIDogemVyb19maWxsX2FycmF5KDUxMik7XG52YXIgZml4X2RtYXAgPSB1c2VfdHlwZWRfYXJyYXlzID8gbmV3IFVpbnQxNkFycmF5KDMyKSAgOiB6ZXJvX2ZpbGxfYXJyYXkoMzIpO1xuaWYoIXVzZV90eXBlZF9hcnJheXMpIHtcblx0Zm9yKHZhciBpID0gMDsgaSA8IDUxMjsgKytpKSBmaXhfbG1hcFtpXSA9IDA7XG5cdGZvcihpID0gMDsgaSA8IDMyOyArK2kpIGZpeF9kbWFwW2ldID0gMDtcbn1cbihmdW5jdGlvbigpIHtcblx0dmFyIGRsZW5zLyo6QXJyYXk8bnVtYmVyPiovID0gW107XG5cdHZhciBpID0gMDtcblx0Zm9yKDtpPDMyOyBpKyspIGRsZW5zLnB1c2goNSk7XG5cdGJ1aWxkX3RyZWUoZGxlbnMsIGZpeF9kbWFwLCAzMik7XG5cblx0dmFyIGNsZW5zLyo6QXJyYXk8bnVtYmVyPiovID0gW107XG5cdGkgPSAwO1xuXHRmb3IoOyBpPD0xNDM7IGkrKykgY2xlbnMucHVzaCg4KTtcblx0Zm9yKDsgaTw9MjU1OyBpKyspIGNsZW5zLnB1c2goOSk7XG5cdGZvcig7IGk8PTI3OTsgaSsrKSBjbGVucy5wdXNoKDcpO1xuXHRmb3IoOyBpPD0yODc7IGkrKykgY2xlbnMucHVzaCg4KTtcblx0YnVpbGRfdHJlZShjbGVucywgZml4X2xtYXAsIDI4OCk7XG59KSgpO3ZhciBfZGVmbGF0ZVJhdyA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24gX2RlZmxhdGVSYXdJSUZFKCkge1xuXHR2YXIgRFNUX0xOX1JFID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50OEFycmF5KDB4ODAwMCkgOiBbXTtcblx0dmFyIGogPSAwLCBrID0gMDtcblx0Zm9yKDsgaiA8IERTVF9MTi5sZW5ndGggLSAxOyArK2opIHtcblx0XHRmb3IoOyBrIDwgRFNUX0xOW2orMV07ICsraykgRFNUX0xOX1JFW2tdID0gajtcblx0fVxuXHRmb3IoO2sgPCAzMjc2ODsgKytrKSBEU1RfTE5fUkVba10gPSAyOTtcblxuXHR2YXIgTEVOX0xOX1JFID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50OEFycmF5KDB4MTAzKSA6IFtdO1xuXHRmb3IoaiA9IDAsIGsgPSAwOyBqIDwgTEVOX0xOLmxlbmd0aCAtIDE7ICsraikge1xuXHRcdGZvcig7IGsgPCBMRU5fTE5baisxXTsgKytrKSBMRU5fTE5fUkVba10gPSBqO1xuXHR9XG5cblx0ZnVuY3Rpb24gd3JpdGVfc3RvcmVkKGRhdGEsIG91dCkge1xuXHRcdHZhciBib2ZmID0gMDtcblx0XHR3aGlsZShib2ZmIDwgZGF0YS5sZW5ndGgpIHtcblx0XHRcdHZhciBMID0gTWF0aC5taW4oMHhGRkZGLCBkYXRhLmxlbmd0aCAtIGJvZmYpO1xuXHRcdFx0dmFyIGggPSBib2ZmICsgTCA9PSBkYXRhLmxlbmd0aDtcblx0XHRcdG91dC53cml0ZV9zaGlmdCgxLCAraCk7XG5cdFx0XHRvdXQud3JpdGVfc2hpZnQoMiwgTCk7XG5cdFx0XHRvdXQud3JpdGVfc2hpZnQoMiwgKH5MKSAmIDB4RkZGRik7XG5cdFx0XHR3aGlsZShMLS0gPiAwKSBvdXRbb3V0LmwrK10gPSBkYXRhW2JvZmYrK107XG5cdFx0fVxuXHRcdHJldHVybiBvdXQubDtcblx0fVxuXG5cdC8qIEZpeGVkIEh1ZmZtYW4gKi9cblx0ZnVuY3Rpb24gd3JpdGVfaHVmZl9maXhlZChkYXRhLCBvdXQpIHtcblx0XHR2YXIgYmwgPSAwO1xuXHRcdHZhciBib2ZmID0gMDtcblx0XHR2YXIgYWRkcnMgPSB1c2VfdHlwZWRfYXJyYXlzID8gbmV3IFVpbnQxNkFycmF5KDB4ODAwMCkgOiBbXTtcblx0XHR3aGlsZShib2ZmIDwgZGF0YS5sZW5ndGgpIHtcblx0XHRcdHZhciBMID0gLyogZGF0YS5sZW5ndGggLSBib2ZmOyAqLyBNYXRoLm1pbigweEZGRkYsIGRhdGEubGVuZ3RoIC0gYm9mZik7XG5cblx0XHRcdC8qIHdyaXRlIGEgc3RvcmVkIGJsb2NrIGZvciBzaG9ydCBkYXRhICovXG5cdFx0XHRpZihMIDwgMTApIHtcblx0XHRcdFx0YmwgPSB3cml0ZV9iaXRzXzMob3V0LCBibCwgKyEhKGJvZmYgKyBMID09IGRhdGEubGVuZ3RoKSk7IC8vIGpzaGludCBpZ25vcmU6bGluZVxuXHRcdFx0XHRpZihibCAmIDcpIGJsICs9IDggLSAoYmwgJiA3KTtcblx0XHRcdFx0b3V0LmwgPSAoYmwgLyA4KSB8IDA7XG5cdFx0XHRcdG91dC53cml0ZV9zaGlmdCgyLCBMKTtcblx0XHRcdFx0b3V0LndyaXRlX3NoaWZ0KDIsICh+TCkgJiAweEZGRkYpO1xuXHRcdFx0XHR3aGlsZShMLS0gPiAwKSBvdXRbb3V0LmwrK10gPSBkYXRhW2JvZmYrK107XG5cdFx0XHRcdGJsID0gb3V0LmwgKiA4O1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0YmwgPSB3cml0ZV9iaXRzXzMob3V0LCBibCwgKyEhKGJvZmYgKyBMID09IGRhdGEubGVuZ3RoKSArIDIpOyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcblx0XHRcdHZhciBoYXNoID0gMDtcblx0XHRcdHdoaWxlKEwtLSA+IDApIHtcblx0XHRcdFx0dmFyIGQgPSBkYXRhW2JvZmZdO1xuXHRcdFx0XHRoYXNoID0gKChoYXNoIDw8IDUpIF4gZCkgJiAweDdGRkY7XG5cblx0XHRcdFx0dmFyIG1hdGNoID0gLTEsIG1sZW4gPSAwO1xuXG5cdFx0XHRcdGlmKChtYXRjaCA9IGFkZHJzW2hhc2hdKSkge1xuXHRcdFx0XHRcdG1hdGNoIHw9IGJvZmYgJiB+MHg3RkZGO1xuXHRcdFx0XHRcdGlmKG1hdGNoID4gYm9mZikgbWF0Y2ggLT0gMHg4MDAwO1xuXHRcdFx0XHRcdGlmKG1hdGNoIDwgYm9mZikgd2hpbGUoZGF0YVttYXRjaCArIG1sZW5dID09IGRhdGFbYm9mZiArIG1sZW5dICYmIG1sZW4gPCAyNTApICsrbWxlbjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmKG1sZW4gPiAyKSB7XG5cdFx0XHRcdFx0LyogQ29weSBUb2tlbiAgKi9cblx0XHRcdFx0XHRkID0gTEVOX0xOX1JFW21sZW5dO1xuXHRcdFx0XHRcdGlmKGQgPD0gMjIpIGJsID0gd3JpdGVfYml0c184KG91dCwgYmwsIGJpdHN3YXA4W2QrMV0+PjEpIC0gMTtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHdyaXRlX2JpdHNfOChvdXQsIGJsLCAzKTtcblx0XHRcdFx0XHRcdGJsICs9IDU7XG5cdFx0XHRcdFx0XHR3cml0ZV9iaXRzXzgob3V0LCBibCwgYml0c3dhcDhbZC0yM10+PjUpO1xuXHRcdFx0XHRcdFx0YmwgKz0gMztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dmFyIGxlbl9lYiA9IChkIDwgOCkgPyAwIDogKChkIC0gNCk+PjIpO1xuXHRcdFx0XHRcdGlmKGxlbl9lYiA+IDApIHtcblx0XHRcdFx0XHRcdHdyaXRlX2JpdHNfMTYob3V0LCBibCwgbWxlbiAtIExFTl9MTltkXSk7XG5cdFx0XHRcdFx0XHRibCArPSBsZW5fZWI7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZCA9IERTVF9MTl9SRVtib2ZmIC0gbWF0Y2hdO1xuXHRcdFx0XHRcdGJsID0gd3JpdGVfYml0c184KG91dCwgYmwsIGJpdHN3YXA4W2RdPj4zKTtcblx0XHRcdFx0XHRibCAtPSAzO1xuXG5cdFx0XHRcdFx0dmFyIGRzdF9lYiA9IGQgPCA0ID8gMCA6IChkLTIpPj4xO1xuXHRcdFx0XHRcdGlmKGRzdF9lYiA+IDApIHtcblx0XHRcdFx0XHRcdHdyaXRlX2JpdHNfMTYob3V0LCBibCwgYm9mZiAtIG1hdGNoIC0gRFNUX0xOW2RdKTtcblx0XHRcdFx0XHRcdGJsICs9IGRzdF9lYjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Zm9yKHZhciBxID0gMDsgcSA8IG1sZW47ICsrcSkge1xuXHRcdFx0XHRcdFx0YWRkcnNbaGFzaF0gPSBib2ZmICYgMHg3RkZGO1xuXHRcdFx0XHRcdFx0aGFzaCA9ICgoaGFzaCA8PCA1KSBeIGRhdGFbYm9mZl0pICYgMHg3RkZGO1xuXHRcdFx0XHRcdFx0Kytib2ZmO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRMLT0gbWxlbiAtIDE7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0LyogTGl0ZXJhbCBUb2tlbiAqL1xuXHRcdFx0XHRcdGlmKGQgPD0gMTQzKSBkID0gZCArIDQ4O1xuXHRcdFx0XHRcdGVsc2UgYmwgPSB3cml0ZV9iaXRzXzEob3V0LCBibCwgMSk7XG5cdFx0XHRcdFx0YmwgPSB3cml0ZV9iaXRzXzgob3V0LCBibCwgYml0c3dhcDhbZF0pO1xuXHRcdFx0XHRcdGFkZHJzW2hhc2hdID0gYm9mZiAmIDB4N0ZGRjtcblx0XHRcdFx0XHQrK2JvZmY7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0YmwgPSB3cml0ZV9iaXRzXzgob3V0LCBibCwgMCkgLSAxO1xuXHRcdH1cblx0XHRvdXQubCA9ICgoYmwgKyA3KS84KXwwO1xuXHRcdHJldHVybiBvdXQubDtcblx0fVxuXHRyZXR1cm4gZnVuY3Rpb24gX2RlZmxhdGVSYXcoZGF0YSwgb3V0KSB7XG5cdFx0aWYoZGF0YS5sZW5ndGggPCA4KSByZXR1cm4gd3JpdGVfc3RvcmVkKGRhdGEsIG91dCk7XG5cdFx0cmV0dXJuIHdyaXRlX2h1ZmZfZml4ZWQoZGF0YSwgb3V0KTtcblx0fTtcbn0pKCk7XG5cbmZ1bmN0aW9uIF9kZWZsYXRlKGRhdGEpIHtcblx0dmFyIGJ1ZiA9IG5ld19idWYoNTArTWF0aC5mbG9vcihkYXRhLmxlbmd0aCoxLjEpKTtcblx0dmFyIG9mZiA9IF9kZWZsYXRlUmF3KGRhdGEsIGJ1Zik7XG5cdHJldHVybiBidWYuc2xpY2UoMCwgb2ZmKTtcbn1cbi8qIG1vZGlmaWVkIGluZmxhdGUgZnVuY3Rpb24gYWxzbyBtb3ZlcyBvcmlnaW5hbCByZWFkIGhlYWQgKi9cblxudmFyIGR5bl9sbWFwID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50MTZBcnJheSgzMjc2OCkgOiB6ZXJvX2ZpbGxfYXJyYXkoMzI3NjgpO1xudmFyIGR5bl9kbWFwID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50MTZBcnJheSgzMjc2OCkgOiB6ZXJvX2ZpbGxfYXJyYXkoMzI3NjgpO1xudmFyIGR5bl9jbWFwID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50MTZBcnJheSgxMjgpICAgOiB6ZXJvX2ZpbGxfYXJyYXkoMTI4KTtcbnZhciBkeW5fbGVuXzEgPSAxLCBkeW5fbGVuXzIgPSAxO1xuXG4vKiA1LjUuMyBFeHBhbmRpbmcgSHVmZm1hbiBDb2RlcyAqL1xuZnVuY3Rpb24gZHluKGRhdGEsIGJvZmYvKjpudW1iZXIqLykge1xuXHQvKiBub21lbmNsYXR1cmUgZnJvbSBSRkMxOTUxIHJlZmVycyB0byBiaXQgdmFsdWVzOyB0aGVzZSBhcmUgb2Zmc2V0IGJ5IHRoZSBpbXBsaWNpdCBjb25zdGFudCAqL1xuXHR2YXIgX0hMSVQgPSByZWFkX2JpdHNfNShkYXRhLCBib2ZmKSArIDI1NzsgYm9mZiArPSA1O1xuXHR2YXIgX0hESVNUID0gcmVhZF9iaXRzXzUoZGF0YSwgYm9mZikgKyAxOyBib2ZmICs9IDU7XG5cdHZhciBfSENMRU4gPSByZWFkX2JpdHNfNChkYXRhLCBib2ZmKSArIDQ7IGJvZmYgKz0gNDtcblx0dmFyIHcgPSAwO1xuXG5cdC8qIGdyYWIgYW5kIHN0b3JlIGNvZGUgbGVuZ3RocyAqL1xuXHR2YXIgY2xlbnMgPSB1c2VfdHlwZWRfYXJyYXlzID8gbmV3IFVpbnQ4QXJyYXkoMTkpIDogemVyb19maWxsX2FycmF5KDE5KTtcblx0dmFyIGN0cmVlID0gWyAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwLCAwIF07XG5cdHZhciBtYXhsZW4gPSAxO1xuXHR2YXIgYmxfY291bnQgPSAgdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50OEFycmF5KDgpIDogemVyb19maWxsX2FycmF5KDgpO1xuXHR2YXIgbmV4dF9jb2RlID0gdXNlX3R5cGVkX2FycmF5cyA/IG5ldyBVaW50OEFycmF5KDgpIDogemVyb19maWxsX2FycmF5KDgpO1xuXHR2YXIgTCA9IGNsZW5zLmxlbmd0aDsgLyogMTkgKi9cblx0Zm9yKHZhciBpID0gMDsgaSA8IF9IQ0xFTjsgKytpKSB7XG5cdFx0Y2xlbnNbQ0xFTl9PUkRFUltpXV0gPSB3ID0gcmVhZF9iaXRzXzMoZGF0YSwgYm9mZik7XG5cdFx0aWYobWF4bGVuIDwgdykgbWF4bGVuID0gdztcblx0XHRibF9jb3VudFt3XSsrO1xuXHRcdGJvZmYgKz0gMztcblx0fVxuXG5cdC8qIGJ1aWxkIGNvZGUgdHJlZSAqL1xuXHR2YXIgY2NvZGUgPSAwO1xuXHRibF9jb3VudFswXSA9IDA7XG5cdGZvcihpID0gMTsgaSA8PSBtYXhsZW47ICsraSkgbmV4dF9jb2RlW2ldID0gY2NvZGUgPSAoY2NvZGUgKyBibF9jb3VudFtpLTFdKTw8MTtcblx0Zm9yKGkgPSAwOyBpIDwgTDsgKytpKSBpZigoY2NvZGUgPSBjbGVuc1tpXSkgIT0gMCkgY3RyZWVbaV0gPSBuZXh0X2NvZGVbY2NvZGVdKys7XG5cdC8qIGNtYXBbNyBiaXRzIGZyb20gc3RyZWFtXSA9IChvZmYmNykgKyAobGl0PDwzKSAqL1xuXHR2YXIgY2xlbmkgPSAwO1xuXHRmb3IoaSA9IDA7IGkgPCBMOyArK2kpIHtcblx0XHRjbGVuaSA9IGNsZW5zW2ldO1xuXHRcdGlmKGNsZW5pICE9IDApIHtcblx0XHRcdGNjb2RlID0gYml0c3dhcDhbY3RyZWVbaV1dPj4oOC1jbGVuaSk7XG5cdFx0XHRmb3IodmFyIGogPSAoMTw8KDctY2xlbmkpKS0xOyBqPj0wOyAtLWopIGR5bl9jbWFwW2Njb2RlfChqPDxjbGVuaSldID0gKGNsZW5pJjcpIHwgKGk8PDMpO1xuXHRcdH1cblx0fVxuXG5cdC8qIHJlYWQgbGl0ZXJhbCBhbmQgZGlzdCBjb2RlcyBhdCBvbmNlICovXG5cdHZhciBoY29kZXMvKjpBcnJheTxudW1iZXI+Ki8gPSBbXTtcblx0bWF4bGVuID0gMTtcblx0Zm9yKDsgaGNvZGVzLmxlbmd0aCA8IF9ITElUICsgX0hESVNUOykge1xuXHRcdGNjb2RlID0gZHluX2NtYXBbcmVhZF9iaXRzXzcoZGF0YSwgYm9mZildO1xuXHRcdGJvZmYgKz0gY2NvZGUgJiA3O1xuXHRcdHN3aXRjaCgoY2NvZGUgPj4+PSAzKSkge1xuXHRcdFx0Y2FzZSAxNjpcblx0XHRcdFx0dyA9IDMgKyByZWFkX2JpdHNfMihkYXRhLCBib2ZmKTsgYm9mZiArPSAyO1xuXHRcdFx0XHRjY29kZSA9IGhjb2Rlc1toY29kZXMubGVuZ3RoIC0gMV07XG5cdFx0XHRcdHdoaWxlKHctLSA+IDApIGhjb2Rlcy5wdXNoKGNjb2RlKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDE3OlxuXHRcdFx0XHR3ID0gMyArIHJlYWRfYml0c18zKGRhdGEsIGJvZmYpOyBib2ZmICs9IDM7XG5cdFx0XHRcdHdoaWxlKHctLSA+IDApIGhjb2Rlcy5wdXNoKDApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMTg6XG5cdFx0XHRcdHcgPSAxMSArIHJlYWRfYml0c183KGRhdGEsIGJvZmYpOyBib2ZmICs9IDc7XG5cdFx0XHRcdHdoaWxlKHcgLS0gPiAwKSBoY29kZXMucHVzaCgwKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRoY29kZXMucHVzaChjY29kZSk7XG5cdFx0XHRcdGlmKG1heGxlbiA8IGNjb2RlKSBtYXhsZW4gPSBjY29kZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0LyogYnVpbGQgbGl0ZXJhbCAvIGxlbmd0aCB0cmVlcyAqL1xuXHR2YXIgaDEgPSBoY29kZXMuc2xpY2UoMCwgX0hMSVQpLCBoMiA9IGhjb2Rlcy5zbGljZShfSExJVCk7XG5cdGZvcihpID0gX0hMSVQ7IGkgPCAyODY7ICsraSkgaDFbaV0gPSAwO1xuXHRmb3IoaSA9IF9IRElTVDsgaSA8IDMwOyArK2kpIGgyW2ldID0gMDtcblx0ZHluX2xlbl8xID0gYnVpbGRfdHJlZShoMSwgZHluX2xtYXAsIDI4Nik7XG5cdGR5bl9sZW5fMiA9IGJ1aWxkX3RyZWUoaDIsIGR5bl9kbWFwLCAzMCk7XG5cdHJldHVybiBib2ZmO1xufVxuXG4vKiByZXR1cm4gWyBkYXRhLCBieXRlc1JlYWQgXSAqL1xuZnVuY3Rpb24gaW5mbGF0ZShkYXRhLCB1c3ovKjpudW1iZXIqLykge1xuXHQvKiBzaG9ydGNpcmN1aXQgZm9yIGVtcHR5IGJ1ZmZlciBbMHgwMywgMHgwMF0gKi9cblx0aWYoZGF0YVswXSA9PSAzICYmICEoZGF0YVsxXSAmIDB4MykpIHsgcmV0dXJuIFtuZXdfcmF3X2J1Zih1c3opLCAyXTsgfVxuXG5cdC8qIGJpdCBvZmZzZXQgKi9cblx0dmFyIGJvZmYgPSAwO1xuXG5cdC8qIGhlYWRlciBpbmNsdWRlcyBmaW5hbCBiaXQgYW5kIHR5cGUgYml0cyAqL1xuXHR2YXIgaGVhZGVyID0gMDtcblxuXHR2YXIgb3V0YnVmID0gbmV3X3Vuc2FmZV9idWYodXN6ID8gdXN6IDogKDE8PDE4KSk7XG5cdHZhciB3b2ZmID0gMDtcblx0dmFyIE9MID0gb3V0YnVmLmxlbmd0aD4+PjA7XG5cdHZhciBtYXhfbGVuXzEgPSAwLCBtYXhfbGVuXzIgPSAwO1xuXG5cdHdoaWxlKChoZWFkZXImMSkgPT0gMCkge1xuXHRcdGhlYWRlciA9IHJlYWRfYml0c18zKGRhdGEsIGJvZmYpOyBib2ZmICs9IDM7XG5cdFx0aWYoKGhlYWRlciA+Pj4gMSkgPT0gMCkge1xuXHRcdFx0LyogU3RvcmVkIGJsb2NrICovXG5cdFx0XHRpZihib2ZmICYgNykgYm9mZiArPSA4IC0gKGJvZmYmNyk7XG5cdFx0XHQvKiAyIGJ5dGVzIHN6LCAyIGJ5dGVzIGJpdCBpbnZlcnNlICovXG5cdFx0XHR2YXIgc3ogPSBkYXRhW2JvZmY+Pj4zXSB8IGRhdGFbKGJvZmY+Pj4zKSsxXTw8ODtcblx0XHRcdGJvZmYgKz0gMzI7XG5cdFx0XHQvKiBwdXNoIHN6IGJ5dGVzICovXG5cdFx0XHRpZihzeiA+IDApIHtcblx0XHRcdFx0aWYoIXVzeiAmJiBPTCA8IHdvZmYgKyBzeikgeyBvdXRidWYgPSByZWFsbG9jKG91dGJ1Ziwgd29mZiArIHN6KTsgT0wgPSBvdXRidWYubGVuZ3RoOyB9XG5cdFx0XHRcdHdoaWxlKHN6LS0gPiAwKSB7IG91dGJ1Zlt3b2ZmKytdID0gZGF0YVtib2ZmPj4+M107IGJvZmYgKz0gODsgfVxuXHRcdFx0fVxuXHRcdFx0Y29udGludWU7XG5cdFx0fSBlbHNlIGlmKChoZWFkZXIgPj4gMSkgPT0gMSkge1xuXHRcdFx0LyogRml4ZWQgSHVmZm1hbiAqL1xuXHRcdFx0bWF4X2xlbl8xID0gOTsgbWF4X2xlbl8yID0gNTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0LyogRHluYW1pYyBIdWZmbWFuICovXG5cdFx0XHRib2ZmID0gZHluKGRhdGEsIGJvZmYpO1xuXHRcdFx0bWF4X2xlbl8xID0gZHluX2xlbl8xOyBtYXhfbGVuXzIgPSBkeW5fbGVuXzI7XG5cdFx0fVxuXHRcdGZvcig7OykgeyAvLyB3aGlsZSh0cnVlKSBpcyBhcHBhcmVudGx5IG91dCBvZiB2b2d1ZSBpbiBtb2Rlcm4gSlMgY2lyY2xlc1xuXHRcdFx0aWYoIXVzeiAmJiAoT0wgPCB3b2ZmICsgMzI3NjcpKSB7IG91dGJ1ZiA9IHJlYWxsb2Mob3V0YnVmLCB3b2ZmICsgMzI3NjcpOyBPTCA9IG91dGJ1Zi5sZW5ndGg7IH1cblx0XHRcdC8qIGluZ2VzdCBjb2RlIGFuZCBtb3ZlIHJlYWQgaGVhZCAqL1xuXHRcdFx0dmFyIGJpdHMgPSByZWFkX2JpdHNfbihkYXRhLCBib2ZmLCBtYXhfbGVuXzEpO1xuXHRcdFx0dmFyIGNvZGUgPSAoaGVhZGVyPj4+MSkgPT0gMSA/IGZpeF9sbWFwW2JpdHNdIDogZHluX2xtYXBbYml0c107XG5cdFx0XHRib2ZmICs9IGNvZGUgJiAxNTsgY29kZSA+Pj49IDQ7XG5cdFx0XHQvKiAwLTI1NSBhcmUgbGl0ZXJhbHMsIDI1NiBpcyBlbmQgb2YgYmxvY2sgdG9rZW4sIDI1NysgYXJlIGNvcHkgdG9rZW5zICovXG5cdFx0XHRpZigoKGNvZGU+Pj44KSYweEZGKSA9PT0gMCkgb3V0YnVmW3dvZmYrK10gPSBjb2RlO1xuXHRcdFx0ZWxzZSBpZihjb2RlID09IDI1NikgYnJlYWs7XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0Y29kZSAtPSAyNTc7XG5cdFx0XHRcdHZhciBsZW5fZWIgPSAoY29kZSA8IDgpID8gMCA6ICgoY29kZS00KT4+Mik7IGlmKGxlbl9lYiA+IDUpIGxlbl9lYiA9IDA7XG5cdFx0XHRcdHZhciB0Z3QgPSB3b2ZmICsgTEVOX0xOW2NvZGVdO1xuXHRcdFx0XHQvKiBsZW5ndGggZXh0cmEgYml0cyAqL1xuXHRcdFx0XHRpZihsZW5fZWIgPiAwKSB7XG5cdFx0XHRcdFx0dGd0ICs9IHJlYWRfYml0c19uKGRhdGEsIGJvZmYsIGxlbl9lYik7XG5cdFx0XHRcdFx0Ym9mZiArPSBsZW5fZWI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKiBkaXN0IGNvZGUgKi9cblx0XHRcdFx0Yml0cyA9IHJlYWRfYml0c19uKGRhdGEsIGJvZmYsIG1heF9sZW5fMik7XG5cdFx0XHRcdGNvZGUgPSAoaGVhZGVyPj4+MSkgPT0gMSA/IGZpeF9kbWFwW2JpdHNdIDogZHluX2RtYXBbYml0c107XG5cdFx0XHRcdGJvZmYgKz0gY29kZSAmIDE1OyBjb2RlID4+Pj0gNDtcblx0XHRcdFx0dmFyIGRzdF9lYiA9IChjb2RlIDwgNCA/IDAgOiAoY29kZS0yKT4+MSk7XG5cdFx0XHRcdHZhciBkc3QgPSBEU1RfTE5bY29kZV07XG5cdFx0XHRcdC8qIGRpc3QgZXh0cmEgYml0cyAqL1xuXHRcdFx0XHRpZihkc3RfZWIgPiAwKSB7XG5cdFx0XHRcdFx0ZHN0ICs9IHJlYWRfYml0c19uKGRhdGEsIGJvZmYsIGRzdF9lYik7XG5cdFx0XHRcdFx0Ym9mZiArPSBkc3RfZWI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKiBpbiB0aGUgY29tbW9uIGNhc2UsIG1hbnVhbCBieXRlIGNvcHkgaXMgZmFzdGVyIHRoYW4gVEEgc2V0IC8gQnVmZmVyIGNvcHkgKi9cblx0XHRcdFx0aWYoIXVzeiAmJiBPTCA8IHRndCkgeyBvdXRidWYgPSByZWFsbG9jKG91dGJ1ZiwgdGd0ICsgMTAwKTsgT0wgPSBvdXRidWYubGVuZ3RoOyB9XG5cdFx0XHRcdHdoaWxlKHdvZmYgPCB0Z3QpIHsgb3V0YnVmW3dvZmZdID0gb3V0YnVmW3dvZmYgLSBkc3RdOyArK3dvZmY7IH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYodXN6KSByZXR1cm4gW291dGJ1ZiwgKGJvZmYrNyk+Pj4zXTtcblx0cmV0dXJuIFtvdXRidWYuc2xpY2UoMCwgd29mZiksIChib2ZmKzcpPj4+M107XG59XG5cbmZ1bmN0aW9uIF9pbmZsYXRlKHBheWxvYWQsIHVzeikge1xuXHR2YXIgZGF0YSA9IHBheWxvYWQuc2xpY2UocGF5bG9hZC5sfHwwKTtcblx0dmFyIG91dCA9IGluZmxhdGUoZGF0YSwgdXN6KTtcblx0cGF5bG9hZC5sICs9IG91dFsxXTtcblx0cmV0dXJuIG91dFswXTtcbn1cblxuZnVuY3Rpb24gd2Fybl9vcl90aHJvdyh3cm4sIG1zZykge1xuXHRpZih3cm4pIHsgaWYodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSBjb25zb2xlLmVycm9yKG1zZyk7IH1cblx0ZWxzZSB0aHJvdyBuZXcgRXJyb3IobXNnKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VfemlwKGZpbGUvKjpSYXdCeXRlcyovLCBvcHRpb25zLyo6Q0ZCUmVhZE9wdHMqLykvKjpDRkJDb250YWluZXIqLyB7XG5cdHZhciBibG9iLyo6Q0ZCbG9iKi8gPSAvKjo6KCovZmlsZS8qOjogOmFueSkqLztcblx0cHJlcF9ibG9iKGJsb2IsIDApO1xuXG5cdHZhciBGaWxlSW5kZXgvKjpDRkJGaWxlSW5kZXgqLyA9IFtdLCBGdWxsUGF0aHMvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0dmFyIG8gPSB7XG5cdFx0RmlsZUluZGV4OiBGaWxlSW5kZXgsXG5cdFx0RnVsbFBhdGhzOiBGdWxsUGF0aHNcblx0fTtcblx0aW5pdF9jZmIobywgeyByb290OiBvcHRpb25zLnJvb3QgfSk7XG5cblx0LyogZmluZCBlbmQgb2YgY2VudHJhbCBkaXJlY3RvcnksIHN0YXJ0IGp1c3QgYWZ0ZXIgc2lnbmF0dXJlICovXG5cdHZhciBpID0gYmxvYi5sZW5ndGggLSA0O1xuXHR3aGlsZSgoYmxvYltpXSAhPSAweDUwIHx8IGJsb2JbaSsxXSAhPSAweDRiIHx8IGJsb2JbaSsyXSAhPSAweDA1IHx8IGJsb2JbaSszXSAhPSAweDA2KSAmJiBpID49IDApIC0taTtcblx0YmxvYi5sID0gaSArIDQ7XG5cblx0LyogcGFyc2UgZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5ICovXG5cdGJsb2IubCArPSA0O1xuXHR2YXIgZmNudCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDY7XG5cdHZhciBzdGFydF9jZCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblxuXHQvKiBwYXJzZSBjZW50cmFsIGRpcmVjdG9yeSAqL1xuXHRibG9iLmwgPSBzdGFydF9jZDtcblxuXHRmb3IoaSA9IDA7IGkgPCBmY250OyArK2kpIHtcblx0XHQvKiB0cnVzdCBsb2NhbCBmaWxlIGhlYWRlciBpbnN0ZWFkIG9mIENEIGVudHJ5ICovXG5cdFx0YmxvYi5sICs9IDIwO1xuXHRcdHZhciBjc3ogPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdFx0dmFyIHVzeiA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0XHR2YXIgbmFtZWxlbiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHR2YXIgZWZzeiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHR2YXIgZmNzeiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHRibG9iLmwgKz0gODtcblx0XHR2YXIgb2Zmc2V0ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRcdHZhciBFRiA9IHBhcnNlX2V4dHJhX2ZpZWxkKC8qOjooKi9ibG9iLnNsaWNlKGJsb2IubCtuYW1lbGVuLCBibG9iLmwrbmFtZWxlbitlZnN6KS8qOjogOmFueSkqLyk7XG5cdFx0YmxvYi5sICs9IG5hbWVsZW4gKyBlZnN6ICsgZmNzejtcblxuXHRcdHZhciBMID0gYmxvYi5sO1xuXHRcdGJsb2IubCA9IG9mZnNldCArIDQ7XG5cdFx0cGFyc2VfbG9jYWxfZmlsZShibG9iLCBjc3osIHVzeiwgbywgRUYpO1xuXHRcdGJsb2IubCA9IEw7XG5cdH1cblx0cmV0dXJuIG87XG59XG5cblxuLyogaGVhZCBzdGFydHMganVzdCBhZnRlciBsb2NhbCBmaWxlIGhlYWRlciBzaWduYXR1cmUgKi9cbmZ1bmN0aW9uIHBhcnNlX2xvY2FsX2ZpbGUoYmxvYi8qOkNGQmxvYiovLCBjc3ovKjpudW1iZXIqLywgdXN6Lyo6bnVtYmVyKi8sIG8vKjpDRkJDb250YWluZXIqLywgRUYpIHtcblx0LyogW2xvY2FsIGZpbGUgaGVhZGVyXSAqL1xuXHRibG9iLmwgKz0gMjtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgbWV0aCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGRhdGUgPSBwYXJzZV9kb3NfZGF0ZShibG9iKTtcblxuXHRpZihmbGFncyAmIDB4MjA0MSkgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgWklQIGVuY3J5cHRpb25cIik7XG5cdHZhciBjcmMzMiA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIF9jc3ogPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciBfdXN6ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXG5cdHZhciBuYW1lbGVuID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgZWZzeiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblxuXHQvLyBUT0RPOiBmbGFncyAmICgxPDwxMSkgLy8gVVRGOFxuXHR2YXIgbmFtZSA9IFwiXCI7IGZvcih2YXIgaSA9IDA7IGkgPCBuYW1lbGVuOyArK2kpIG5hbWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShibG9iW2Jsb2IubCsrXSk7XG5cdGlmKGVmc3opIHtcblx0XHR2YXIgZWYgPSBwYXJzZV9leHRyYV9maWVsZCgvKjo6KCovYmxvYi5zbGljZShibG9iLmwsIGJsb2IubCArIGVmc3opLyo6OiA6YW55KSovKTtcblx0XHRpZigoZWZbMHg1NDU1XXx8e30pLm10KSBkYXRlID0gZWZbMHg1NDU1XS5tdDtcblx0XHRpZigoKEVGfHx7fSlbMHg1NDU1XXx8e30pLm10KSBkYXRlID0gRUZbMHg1NDU1XS5tdDtcblx0fVxuXHRibG9iLmwgKz0gZWZzejtcblxuXHQvKiBbZW5jcnlwdGlvbiBoZWFkZXJdICovXG5cblx0LyogW2ZpbGUgZGF0YV0gKi9cblx0dmFyIGRhdGEgPSBibG9iLnNsaWNlKGJsb2IubCwgYmxvYi5sICsgX2Nzeik7XG5cdHN3aXRjaChtZXRoKSB7XG5cdFx0Y2FzZSA4OiBkYXRhID0gX2luZmxhdGVSYXdTeW5jKGJsb2IsIF91c3opOyBicmVhaztcblx0XHRjYXNlIDA6IGJyZWFrOyAvLyBUT0RPOiBzY2FuIGZvciBtYWdpYyBudW1iZXJcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBaSVAgQ29tcHJlc3Npb24gbWV0aG9kIFwiICsgbWV0aCk7XG5cdH1cblxuXHQvKiBbZGF0YSBkZXNjcmlwdG9yXSAqL1xuXHR2YXIgd3JuID0gZmFsc2U7XG5cdGlmKGZsYWdzICYgOCkge1xuXHRcdGNyYzMyID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRcdGlmKGNyYzMyID09IDB4MDgwNzRiNTApIHsgY3JjMzIgPSBibG9iLnJlYWRfc2hpZnQoNCk7IHdybiA9IHRydWU7IH1cblx0XHRfY3N6ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRcdF91c3ogPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdH1cblxuXHRpZihfY3N6ICE9IGNzeikgd2Fybl9vcl90aHJvdyh3cm4sIFwiQmFkIGNvbXByZXNzZWQgc2l6ZTogXCIgKyBjc3ogKyBcIiAhPSBcIiArIF9jc3opO1xuXHRpZihfdXN6ICE9IHVzeikgd2Fybl9vcl90aHJvdyh3cm4sIFwiQmFkIHVuY29tcHJlc3NlZCBzaXplOiBcIiArIHVzeiArIFwiICE9IFwiICsgX3Vzeik7XG5cdC8vdmFyIF9jcmMzMiA9IENSQzMyLmJ1ZihkYXRhLCAwKTtcblx0Ly9pZigoY3JjMzI+PjApICE9IChfY3JjMzI+PjApKSB3YXJuX29yX3Rocm93KHdybiwgXCJCYWQgQ1JDMzIgY2hlY2tzdW06IFwiICsgY3JjMzIgKyBcIiAhPSBcIiArIF9jcmMzMik7XG5cdGNmYl9hZGQobywgbmFtZSwgZGF0YSwge3Vuc2FmZTogdHJ1ZSwgbXQ6IGRhdGV9KTtcbn1cbmZ1bmN0aW9uIHdyaXRlX3ppcChjZmIvKjpDRkJDb250YWluZXIqLywgb3B0aW9ucy8qOkNGQldyaXRlT3B0cyovKS8qOlJhd0J5dGVzKi8ge1xuXHR2YXIgX29wdHMgPSBvcHRpb25zIHx8IHt9O1xuXHR2YXIgb3V0ID0gW10sIGNkaXJzID0gW107XG5cdHZhciBvLyo6Q0ZCbG9iKi8gPSBuZXdfYnVmKDEpO1xuXHR2YXIgbWV0aG9kID0gKF9vcHRzLmNvbXByZXNzaW9uID8gOCA6IDApLCBmbGFncyA9IDA7XG5cdHZhciBkZXNjID0gZmFsc2U7XG5cdGlmKGRlc2MpIGZsYWdzIHw9IDg7XG5cdHZhciBpID0gMCwgaiA9IDA7XG5cblx0dmFyIHN0YXJ0X2NkID0gMCwgZmNudCA9IDA7XG5cdHZhciByb290ID0gY2ZiLkZ1bGxQYXRoc1swXSwgZnAgPSByb290LCBmaSA9IGNmYi5GaWxlSW5kZXhbMF07XG5cdHZhciBjcmNzID0gW107XG5cdHZhciBzel9jZCA9IDA7XG5cblx0Zm9yKGkgPSAxOyBpIDwgY2ZiLkZ1bGxQYXRocy5sZW5ndGg7ICsraSkge1xuXHRcdGZwID0gY2ZiLkZ1bGxQYXRoc1tpXS5zbGljZShyb290Lmxlbmd0aCk7IGZpID0gY2ZiLkZpbGVJbmRleFtpXTtcblx0XHRpZighZmkuc2l6ZSB8fCAhZmkuY29udGVudCB8fCBmcCA9PSBcIlxcdTAwMDFTaDMzdEo1XCIpIGNvbnRpbnVlO1xuXHRcdHZhciBzdGFydCA9IHN0YXJ0X2NkO1xuXG5cdFx0LyogVE9ETzogQ1A0MzcgZmlsZW5hbWUgKi9cblx0XHR2YXIgbmFtZWJ1ZiA9IG5ld19idWYoZnAubGVuZ3RoKTtcblx0XHRmb3IoaiA9IDA7IGogPCBmcC5sZW5ndGg7ICsraikgbmFtZWJ1Zi53cml0ZV9zaGlmdCgxLCBmcC5jaGFyQ29kZUF0KGopICYgMHg3Rik7XG5cdFx0bmFtZWJ1ZiA9IG5hbWVidWYuc2xpY2UoMCwgbmFtZWJ1Zi5sKTtcblx0XHRjcmNzW2ZjbnRdID0gQ1JDMzIuYnVmKC8qOjooKCovZmkuY29udGVudC8qOjp8fFtdKTphbnkpKi8sIDApO1xuXG5cdFx0dmFyIG91dGJ1ZiA9IGZpLmNvbnRlbnQvKjo6fHxbXSovO1xuXHRcdGlmKG1ldGhvZCA9PSA4KSBvdXRidWYgPSBfZGVmbGF0ZVJhd1N5bmMob3V0YnVmKTtcblxuXHRcdC8qIGxvY2FsIGZpbGUgaGVhZGVyICovXG5cdFx0byA9IG5ld19idWYoMzApO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgMHgwNDAzNGI1MCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAyMCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBmbGFncyk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBtZXRob2QpO1xuXHRcdC8qIFRPRE86IGxhc3QgbW9kIGZpbGUgdGltZS9kYXRlICovXG5cdFx0aWYoZmkubXQpIHdyaXRlX2Rvc19kYXRlKG8sIGZpLm10KTtcblx0XHRlbHNlIG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCgtNCwgKGZsYWdzICYgOCkgPyAwIDogY3Jjc1tmY250XSk7XG5cdFx0by53cml0ZV9zaGlmdCg0LCAgKGZsYWdzICYgOCkgPyAwIDogb3V0YnVmLmxlbmd0aCk7XG5cdFx0by53cml0ZV9zaGlmdCg0LCAgKGZsYWdzICYgOCkgPyAwIDogLyo6OigqL2ZpLmNvbnRlbnQvKjo6fHxbXSkqLy5sZW5ndGgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgbmFtZWJ1Zi5sZW5ndGgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cblx0XHRzdGFydF9jZCArPSBvLmxlbmd0aDtcblx0XHRvdXQucHVzaChvKTtcblx0XHRzdGFydF9jZCArPSBuYW1lYnVmLmxlbmd0aDtcblx0XHRvdXQucHVzaChuYW1lYnVmKTtcblxuXHRcdC8qIFRPRE86IGV4dHJhIGZpZWxkcz8gKi9cblxuXHRcdC8qIFRPRE86IGVuY3J5cHRpb24gaGVhZGVyID8gKi9cblxuXHRcdHN0YXJ0X2NkICs9IG91dGJ1Zi5sZW5ndGg7XG5cdFx0b3V0LnB1c2gob3V0YnVmKTtcblxuXHRcdC8qIGRhdGEgZGVzY3JpcHRvciAqL1xuXHRcdGlmKGZsYWdzICYgOCkge1xuXHRcdFx0byA9IG5ld19idWYoMTIpO1xuXHRcdFx0by53cml0ZV9zaGlmdCgtNCwgY3Jjc1tmY250XSk7XG5cdFx0XHRvLndyaXRlX3NoaWZ0KDQsIG91dGJ1Zi5sZW5ndGgpO1xuXHRcdFx0by53cml0ZV9zaGlmdCg0LCAvKjo6KCovZmkuY29udGVudC8qOjp8fFtdKSovLmxlbmd0aCk7XG5cdFx0XHRzdGFydF9jZCArPSBvLmw7XG5cdFx0XHRvdXQucHVzaChvKTtcblx0XHR9XG5cblx0XHQvKiBjZW50cmFsIGRpcmVjdG9yeSAqL1xuXHRcdG8gPSBuZXdfYnVmKDQ2KTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIDB4MDIwMTRiNTApO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAyMCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBmbGFncyk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBtZXRob2QpO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgMCk7IC8qIFRPRE86IGxhc3QgbW9kIGZpbGUgdGltZS9kYXRlICovXG5cdFx0by53cml0ZV9zaGlmdCgtNCwgY3Jjc1tmY250XSk7XG5cblx0XHRvLndyaXRlX3NoaWZ0KDQsIG91dGJ1Zi5sZW5ndGgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgLyo6OigqL2ZpLmNvbnRlbnQvKjo6fHxbXSkqLy5sZW5ndGgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgbmFtZWJ1Zi5sZW5ndGgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCg0LCAwKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIHN0YXJ0KTtcblxuXHRcdHN6X2NkICs9IG8ubDtcblx0XHRjZGlycy5wdXNoKG8pO1xuXHRcdHN6X2NkICs9IG5hbWVidWYubGVuZ3RoO1xuXHRcdGNkaXJzLnB1c2gobmFtZWJ1Zik7XG5cdFx0KytmY250O1xuXHR9XG5cblx0LyogZW5kIG9mIGNlbnRyYWwgZGlyZWN0b3J5ICovXG5cdG8gPSBuZXdfYnVmKDIyKTtcblx0by53cml0ZV9zaGlmdCg0LCAweDA2MDU0YjUwKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCBmY250KTtcblx0by53cml0ZV9zaGlmdCgyLCBmY250KTtcblx0by53cml0ZV9zaGlmdCg0LCBzel9jZCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgc3RhcnRfY2QpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXG5cdHJldHVybiBiY29uY2F0KChbYmNvbmNhdCgob3V0Lyo6YW55Ki8pKSwgYmNvbmNhdChjZGlycyksIG9dLyo6YW55Ki8pKTtcbn1cbnZhciBDb250ZW50VHlwZU1hcCA9ICh7XG5cdFwiaHRtXCI6IFwidGV4dC9odG1sXCIsXG5cdFwieG1sXCI6IFwidGV4dC94bWxcIixcblxuXHRcImdpZlwiOiBcImltYWdlL2dpZlwiLFxuXHRcImpwZ1wiOiBcImltYWdlL2pwZWdcIixcblx0XCJwbmdcIjogXCJpbWFnZS9wbmdcIixcblxuXHRcIm1zb1wiOiBcImFwcGxpY2F0aW9uL3gtbXNvXCIsXG5cdFwidGhteFwiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1vZmZpY2V0aGVtZVwiLFxuXHRcInNoMzN0ajVcIjogXCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIlxufS8qOmFueSovKTtcblxuZnVuY3Rpb24gZ2V0X2NvbnRlbnRfdHlwZShmaS8qOkNGQkVudHJ5Ki8sIGZwLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRpZihmaS5jdHlwZSkgcmV0dXJuIGZpLmN0eXBlO1xuXG5cdHZhciBleHQgPSBmaS5uYW1lIHx8IFwiXCIsIG0gPSBleHQubWF0Y2goL1xcLihbXlxcLl0rKSQvKTtcblx0aWYobSAmJiBDb250ZW50VHlwZU1hcFttWzFdXSkgcmV0dXJuIENvbnRlbnRUeXBlTWFwW21bMV1dO1xuXG5cdGlmKGZwKSB7XG5cdFx0bSA9IChleHQgPSBmcCkubWF0Y2goL1tcXC5cXFxcXShbXlxcLlxcXFxdKSskLyk7XG5cdFx0aWYobSAmJiBDb250ZW50VHlwZU1hcFttWzFdXSkgcmV0dXJuIENvbnRlbnRUeXBlTWFwW21bMV1dO1xuXHR9XG5cblx0cmV0dXJuIFwiYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtXCI7XG59XG5cbi8qIDc2IGNoYXJhY3RlciBjaHVua3MgVE9ETzogaW50ZXJ0d2luZSBlbmNvZGluZyAqL1xuZnVuY3Rpb24gd3JpdGVfYmFzZTY0Xzc2KGJzdHIvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBkYXRhID0gQmFzZTY0X2VuY29kZShic3RyKTtcblx0dmFyIG8gPSBbXTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKz0gNzYpIG8ucHVzaChkYXRhLnNsaWNlKGksIGkrNzYpKTtcblx0cmV0dXJuIG8uam9pbihcIlxcclxcblwiKSArIFwiXFxyXFxuXCI7XG59XG5cbi8qXG5SdWxlcyBmb3IgUVA6XG5cdC0gZXNjYXBlID0jIyBhcHBsaWVzIGZvciBhbGwgbm9uLWRpc3BsYXkgY2hhcmFjdGVycyBhbmQgbGl0ZXJhbCBcIj1cIlxuXHQtIHNwYWNlIG9yIHRhYiBhdCBlbmQgb2YgbGluZSBtdXN0IGJlIGVuY29kZWRcblx0LSBcXHJcXG4gbmV3bGluZXMgY2FuIGJlIHByZXNlcnZlZCwgYnV0IGJhcmUgXFxyIGFuZCBcXG4gbXVzdCBiZSBlc2NhcGVkXG5cdC0gbGluZXMgbXVzdCBub3QgZXhjZWVkIDc2IGNoYXJhY3RlcnMsIHVzZSBzb2Z0IGJyZWFrcyA9XFxyXFxuXG5cblRPRE86IFNvbWUgZmlsZXMgZnJvbSB3b3JkIGFwcGVhciB0byB3cml0ZSBsaW5lIGV4dGVuc2lvbnMgd2l0aCBiYXJlIGVxdWFsczpcblxuYGBgXG48dGFibGUgY2xhc3M9M0RNc29UYWJsZUdyaWQgYm9yZGVyPTNEMSBjZWxsc3BhY2luZz0zRDAgY2VsbHBhZGRpbmc9M0QwIHdpZHRoPVxuPVwiNzAlXCJcbmBgYFxuKi9cbmZ1bmN0aW9uIHdyaXRlX3F1b3RlZF9wcmludGFibGUodGV4dC8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0dmFyIGVuY29kZWQgPSB0ZXh0LnJlcGxhY2UoL1tcXHgwMC1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDdFLVxceEZGPV0vZywgZnVuY3Rpb24oYykge1xuXHRcdHZhciB3ID0gYy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHRcdHJldHVybiBcIj1cIiArICh3Lmxlbmd0aCA9PSAxID8gXCIwXCIgKyB3IDogdyk7XG5cdH0pO1xuXG5cdGVuY29kZWQgPSBlbmNvZGVkLnJlcGxhY2UoLyAkL21nLCBcIj0yMFwiKS5yZXBsYWNlKC9cXHQkL21nLCBcIj0wOVwiKTtcblxuXHRpZihlbmNvZGVkLmNoYXJBdCgwKSA9PSBcIlxcblwiKSBlbmNvZGVkID0gXCI9MERcIiArIGVuY29kZWQuc2xpY2UoMSk7XG5cdGVuY29kZWQgPSBlbmNvZGVkLnJlcGxhY2UoL1xccig/IVxcbikvbWcsIFwiPTBEXCIpLnJlcGxhY2UoL1xcblxcbi9tZywgXCJcXG49MEFcIikucmVwbGFjZSgvKFteXFxyXFxuXSlcXG4vbWcsIFwiJDE9MEFcIik7XG5cblx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXSwgc3BsaXQgPSBlbmNvZGVkLnNwbGl0KFwiXFxyXFxuXCIpO1xuXHRmb3IodmFyIHNpID0gMDsgc2kgPCBzcGxpdC5sZW5ndGg7ICsrc2kpIHtcblx0XHR2YXIgc3RyID0gc3BsaXRbc2ldO1xuXHRcdGlmKHN0ci5sZW5ndGggPT0gMCkgeyBvLnB1c2goXCJcIik7IGNvbnRpbnVlOyB9XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7KSB7XG5cdFx0XHR2YXIgZW5kID0gNzY7XG5cdFx0XHR2YXIgdG1wID0gc3RyLnNsaWNlKGksIGkgKyBlbmQpO1xuXHRcdFx0aWYodG1wLmNoYXJBdChlbmQgLSAxKSA9PSBcIj1cIikgZW5kIC0tO1xuXHRcdFx0ZWxzZSBpZih0bXAuY2hhckF0KGVuZCAtIDIpID09IFwiPVwiKSBlbmQgLT0gMjtcblx0XHRcdGVsc2UgaWYodG1wLmNoYXJBdChlbmQgLSAzKSA9PSBcIj1cIikgZW5kIC09IDM7XG5cdFx0XHR0bXAgPSBzdHIuc2xpY2UoaSwgaSArIGVuZCk7XG5cdFx0XHRpICs9IGVuZDtcblx0XHRcdGlmKGkgPCBzdHIubGVuZ3RoKSB0bXAgKz0gXCI9XCI7XG5cdFx0XHRvLnB1c2godG1wKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gby5qb2luKFwiXFxyXFxuXCIpO1xufVxuZnVuY3Rpb24gcGFyc2VfcXVvdGVkX3ByaW50YWJsZShkYXRhLyo6QXJyYXk8c3RyaW5nPiovKS8qOlJhd0J5dGVzKi8ge1xuXHR2YXIgbyA9IFtdO1xuXG5cdC8qIHVuaWZ5IGxvbmcgbGluZXMgKi9cblx0Zm9yKHZhciBkaSA9IDA7IGRpIDwgZGF0YS5sZW5ndGg7ICsrZGkpIHtcblx0XHR2YXIgbGluZSA9IGRhdGFbZGldO1xuXHRcdHdoaWxlKGRpIDw9IGRhdGEubGVuZ3RoICYmIGxpbmUuY2hhckF0KGxpbmUubGVuZ3RoIC0gMSkgPT0gXCI9XCIpIGxpbmUgPSBsaW5lLnNsaWNlKDAsIGxpbmUubGVuZ3RoIC0gMSkgKyBkYXRhWysrZGldO1xuXHRcdG8ucHVzaChsaW5lKTtcblx0fVxuXG5cdC8qIGRlY29kZSAqL1xuXHRmb3IodmFyIG9pID0gMDsgb2kgPCBvLmxlbmd0aDsgKytvaSkgb1tvaV0gPSBvW29pXS5yZXBsYWNlKC9bPV1bMC05QS1GYS1mXXsyfS9nLCBmdW5jdGlvbigkJCkgeyByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShwYXJzZUludCgkJC5zbGljZSgxKSwgMTYpKTsgfSk7XG5cdHJldHVybiBzMmEoby5qb2luKFwiXFxyXFxuXCIpKTtcbn1cblxuXG5mdW5jdGlvbiBwYXJzZV9taW1lKGNmYi8qOkNGQkNvbnRhaW5lciovLCBkYXRhLyo6QXJyYXk8c3RyaW5nPiovLCByb290Lyo6c3RyaW5nKi8pLyo6dm9pZCovIHtcblx0dmFyIGZuYW1lID0gXCJcIiwgY3RlID0gXCJcIiwgY3R5cGUgPSBcIlwiLCBmZGF0YTtcblx0dmFyIGRpID0gMDtcblx0Zm9yKDtkaSA8IDEwOyArK2RpKSB7XG5cdFx0dmFyIGxpbmUgPSBkYXRhW2RpXTtcblx0XHRpZighbGluZSB8fCBsaW5lLm1hdGNoKC9eXFxzKiQvKSkgYnJlYWs7XG5cdFx0dmFyIG0gPSBsaW5lLm1hdGNoKC9eKC4qPyk6XFxzKihbXlxcc10uKikkLyk7XG5cdFx0aWYobSkgc3dpdGNoKG1bMV0udG9Mb3dlckNhc2UoKSkge1xuXHRcdFx0Y2FzZSBcImNvbnRlbnQtbG9jYXRpb25cIjogZm5hbWUgPSBtWzJdLnRyaW0oKTsgYnJlYWs7XG5cdFx0XHRjYXNlIFwiY29udGVudC10eXBlXCI6IGN0eXBlID0gbVsyXS50cmltKCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcImNvbnRlbnQtdHJhbnNmZXItZW5jb2RpbmdcIjogY3RlID0gbVsyXS50cmltKCk7IGJyZWFrO1xuXHRcdH1cblx0fVxuXHQrK2RpO1xuXHRzd2l0Y2goY3RlLnRvTG93ZXJDYXNlKCkpIHtcblx0XHRjYXNlICdiYXNlNjQnOiBmZGF0YSA9IHMyYShCYXNlNjRfZGVjb2RlKGRhdGEuc2xpY2UoZGkpLmpvaW4oXCJcIikpKTsgYnJlYWs7XG5cdFx0Y2FzZSAncXVvdGVkLXByaW50YWJsZSc6IGZkYXRhID0gcGFyc2VfcXVvdGVkX3ByaW50YWJsZShkYXRhLnNsaWNlKGRpKSk7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIENvbnRlbnQtVHJhbnNmZXItRW5jb2RpbmcgXCIgKyBjdGUpO1xuXHR9XG5cdHZhciBmaWxlID0gY2ZiX2FkZChjZmIsIGZuYW1lLnNsaWNlKHJvb3QubGVuZ3RoKSwgZmRhdGEsIHt1bnNhZmU6IHRydWV9KTtcblx0aWYoY3R5cGUpIGZpbGUuY3R5cGUgPSBjdHlwZTtcbn1cblxuZnVuY3Rpb24gcGFyc2VfbWFkKGZpbGUvKjpSYXdCeXRlcyovLCBvcHRpb25zLyo6Q0ZCUmVhZE9wdHMqLykvKjpDRkJDb250YWluZXIqLyB7XG5cdGlmKGEycyhmaWxlLnNsaWNlKDAsMTMpKS50b0xvd2VyQ2FzZSgpICE9IFwibWltZS12ZXJzaW9uOlwiKSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBNQUQgaGVhZGVyXCIpO1xuXHR2YXIgcm9vdCA9IChvcHRpb25zICYmIG9wdGlvbnMucm9vdCB8fCBcIlwiKTtcblx0Ly8gJEZsb3dJZ25vcmVcblx0dmFyIGRhdGEgPSAoaGFzX2J1ZiAmJiBCdWZmZXIuaXNCdWZmZXIoZmlsZSkgPyBmaWxlLnRvU3RyaW5nKFwiYmluYXJ5XCIpIDogYTJzKGZpbGUpKS5zcGxpdChcIlxcclxcblwiKTtcblx0dmFyIGRpID0gMCwgcm93ID0gXCJcIjtcblxuXHQvKiBpZiByb290IGlzIG5vdCBzcGVjaWZpZWQsIHNjYW4gZm9yIHRoZSBjb21tb24gcHJlZml4ICovXG5cdGZvcihkaSA9IDA7IGRpIDwgZGF0YS5sZW5ndGg7ICsrZGkpIHtcblx0XHRyb3cgPSBkYXRhW2RpXTtcblx0XHRpZighL15Db250ZW50LUxvY2F0aW9uOi9pLnRlc3Qocm93KSkgY29udGludWU7XG5cdFx0cm93ID0gcm93LnNsaWNlKHJvdy5pbmRleE9mKFwiZmlsZVwiKSk7XG5cdFx0aWYoIXJvb3QpIHJvb3QgPSByb3cuc2xpY2UoMCwgcm93Lmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuXHRcdGlmKHJvdy5zbGljZSgwLCByb290Lmxlbmd0aCkgPT0gcm9vdCkgY29udGludWU7XG5cdFx0d2hpbGUocm9vdC5sZW5ndGggPiAwKSB7XG5cdFx0XHRyb290ID0gcm9vdC5zbGljZSgwLCByb290Lmxlbmd0aCAtIDEpO1xuXHRcdFx0cm9vdCA9IHJvb3Quc2xpY2UoMCwgcm9vdC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcblx0XHRcdGlmKHJvdy5zbGljZSgwLHJvb3QubGVuZ3RoKSA9PSByb290KSBicmVhaztcblx0XHR9XG5cdH1cblxuXHR2YXIgbWJvdW5kYXJ5ID0gKGRhdGFbMV0gfHwgXCJcIikubWF0Y2goL2JvdW5kYXJ5PVwiKC4qPylcIi8pO1xuXHRpZighbWJvdW5kYXJ5KSB0aHJvdyBuZXcgRXJyb3IoXCJNQUQgY2Fubm90IGZpbmQgYm91bmRhcnlcIik7XG5cdHZhciBib3VuZGFyeSA9IFwiLS1cIiArIChtYm91bmRhcnlbMV0gfHwgXCJcIik7XG5cblx0dmFyIEZpbGVJbmRleC8qOkNGQkZpbGVJbmRleCovID0gW10sIEZ1bGxQYXRocy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgbyA9IHtcblx0XHRGaWxlSW5kZXg6IEZpbGVJbmRleCxcblx0XHRGdWxsUGF0aHM6IEZ1bGxQYXRoc1xuXHR9O1xuXHRpbml0X2NmYihvKTtcblx0dmFyIHN0YXJ0X2RpLCBmY250ID0gMDtcblx0Zm9yKGRpID0gMDsgZGkgPCBkYXRhLmxlbmd0aDsgKytkaSkge1xuXHRcdHZhciBsaW5lID0gZGF0YVtkaV07XG5cdFx0aWYobGluZSAhPT0gYm91bmRhcnkgJiYgbGluZSAhPT0gYm91bmRhcnkgKyBcIi0tXCIpIGNvbnRpbnVlO1xuXHRcdGlmKGZjbnQrKykgcGFyc2VfbWltZShvLCBkYXRhLnNsaWNlKHN0YXJ0X2RpLCBkaSksIHJvb3QpO1xuXHRcdHN0YXJ0X2RpID0gZGk7XG5cdH1cblx0cmV0dXJuIG87XG59XG5cbmZ1bmN0aW9uIHdyaXRlX21hZChjZmIvKjpDRkJDb250YWluZXIqLywgb3B0aW9ucy8qOkNGQldyaXRlT3B0cyovKS8qOnN0cmluZyovIHtcblx0dmFyIG9wdHMgPSBvcHRpb25zIHx8IHt9O1xuXHR2YXIgYm91bmRhcnkgPSBvcHRzLmJvdW5kYXJ5IHx8IFwiU2hlZXRKU1wiO1xuXHRib3VuZGFyeSA9ICctLS0tLS09JyArIGJvdW5kYXJ5O1xuXG5cdHZhciBvdXQgPSBbXG5cdFx0J01JTUUtVmVyc2lvbjogMS4wJyxcblx0XHQnQ29udGVudC1UeXBlOiBtdWx0aXBhcnQvcmVsYXRlZDsgYm91bmRhcnk9XCInICsgYm91bmRhcnkuc2xpY2UoMikgKyAnXCInLFxuXHRcdCcnLFxuXHRcdCcnLFxuXHRcdCcnXG5cdF07XG5cblx0dmFyIHJvb3QgPSBjZmIuRnVsbFBhdGhzWzBdLCBmcCA9IHJvb3QsIGZpID0gY2ZiLkZpbGVJbmRleFswXTtcblx0Zm9yKHZhciBpID0gMTsgaSA8IGNmYi5GdWxsUGF0aHMubGVuZ3RoOyArK2kpIHtcblx0XHRmcCA9IGNmYi5GdWxsUGF0aHNbaV0uc2xpY2Uocm9vdC5sZW5ndGgpO1xuXHRcdGZpID0gY2ZiLkZpbGVJbmRleFtpXTtcblx0XHRpZighZmkuc2l6ZSB8fCAhZmkuY29udGVudCB8fCBmcCA9PSBcIlxcdTAwMDFTaDMzdEo1XCIpIGNvbnRpbnVlO1xuXG5cdFx0LyogTm9ybWFsaXplIGZpbGVuYW1lICovXG5cdFx0ZnAgPSBmcC5yZXBsYWNlKC9bXFx4MDAtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHg3RS1cXHhGRl0vZywgZnVuY3Rpb24oYykge1xuXHRcdFx0cmV0dXJuIFwiX3hcIiArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikgKyBcIl9cIjtcblx0XHR9KS5yZXBsYWNlKC9bXFx1MDA4MC1cXHVGRkZGXS9nLCBmdW5jdGlvbih1KSB7XG5cdFx0XHRyZXR1cm4gXCJfdVwiICsgdS5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSArIFwiX1wiO1xuXHRcdH0pO1xuXG5cdFx0LyogRXh0cmFjdCBjb250ZW50IGFzIGJpbmFyeSBzdHJpbmcgKi9cblx0XHR2YXIgY2EgPSBmaS5jb250ZW50O1xuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0dmFyIGNzdHIgPSBoYXNfYnVmICYmIEJ1ZmZlci5pc0J1ZmZlcihjYSkgPyBjYS50b1N0cmluZyhcImJpbmFyeVwiKSA6IGEycyhjYSk7XG5cblx0XHQvKiA0LzUgb2YgZmlyc3QgMTAyNCBjaGFycyBhc2NpaSAtPiBxdW90ZWQgcHJpbnRhYmxlLCBlbHNlIGJhc2U2NCAqL1xuXHRcdHZhciBkaXNwY250ID0gMCwgTCA9IE1hdGgubWluKDEwMjQsIGNzdHIubGVuZ3RoKSwgY2MgPSAwO1xuXHRcdGZvcih2YXIgY3NsID0gMDsgY3NsIDw9IEw7ICsrY3NsKSBpZigoY2M9Y3N0ci5jaGFyQ29kZUF0KGNzbCkpID49IDB4MjAgJiYgY2MgPCAweDgwKSArK2Rpc3BjbnQ7XG5cdFx0dmFyIHFwID0gZGlzcGNudCA+PSBMICogNCAvIDU7XG5cblx0XHRvdXQucHVzaChib3VuZGFyeSk7XG5cdFx0b3V0LnB1c2goJ0NvbnRlbnQtTG9jYXRpb246ICcgKyAob3B0cy5yb290IHx8ICdmaWxlOi8vL0M6L1NoZWV0SlMvJykgKyBmcCk7XG5cdFx0b3V0LnB1c2goJ0NvbnRlbnQtVHJhbnNmZXItRW5jb2Rpbmc6ICcgKyAocXAgPyAncXVvdGVkLXByaW50YWJsZScgOiAnYmFzZTY0JykpO1xuXHRcdG91dC5wdXNoKCdDb250ZW50LVR5cGU6ICcgKyBnZXRfY29udGVudF90eXBlKGZpLCBmcCkpO1xuXHRcdG91dC5wdXNoKCcnKTtcblxuXHRcdG91dC5wdXNoKHFwID8gd3JpdGVfcXVvdGVkX3ByaW50YWJsZShjc3RyKSA6IHdyaXRlX2Jhc2U2NF83Nihjc3RyKSk7XG5cdH1cblx0b3V0LnB1c2goYm91bmRhcnkgKyAnLS1cXHJcXG4nKTtcblx0cmV0dXJuIG91dC5qb2luKFwiXFxyXFxuXCIpO1xufVxuZnVuY3Rpb24gY2ZiX25ldyhvcHRzLyo6P2FueSovKS8qOkNGQkNvbnRhaW5lciovIHtcblx0dmFyIG8vKjpDRkJDb250YWluZXIqLyA9ICh7fS8qOmFueSovKTtcblx0aW5pdF9jZmIobywgb3B0cyk7XG5cdHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBjZmJfYWRkKGNmYi8qOkNGQkNvbnRhaW5lciovLCBuYW1lLyo6c3RyaW5nKi8sIGNvbnRlbnQvKjo/UmF3Qnl0ZXMqLywgb3B0cy8qOj9hbnkqLykvKjpDRkJFbnRyeSovIHtcblx0dmFyIHVuc2FmZSA9IG9wdHMgJiYgb3B0cy51bnNhZmU7XG5cdGlmKCF1bnNhZmUpIGluaXRfY2ZiKGNmYik7XG5cdHZhciBmaWxlID0gIXVuc2FmZSAmJiBDRkIuZmluZChjZmIsIG5hbWUpO1xuXHRpZighZmlsZSkge1xuXHRcdHZhciBmcGF0aC8qOnN0cmluZyovID0gY2ZiLkZ1bGxQYXRoc1swXTtcblx0XHRpZihuYW1lLnNsaWNlKDAsIGZwYXRoLmxlbmd0aCkgPT0gZnBhdGgpIGZwYXRoID0gbmFtZTtcblx0XHRlbHNlIHtcblx0XHRcdGlmKGZwYXRoLnNsaWNlKC0xKSAhPSBcIi9cIikgZnBhdGggKz0gXCIvXCI7XG5cdFx0XHRmcGF0aCA9IChmcGF0aCArIG5hbWUpLnJlcGxhY2UoXCIvL1wiLFwiL1wiKTtcblx0XHR9XG5cdFx0ZmlsZSA9ICh7bmFtZTogZmlsZW5hbWUobmFtZSksIHR5cGU6IDJ9Lyo6YW55Ki8pO1xuXHRcdGNmYi5GaWxlSW5kZXgucHVzaChmaWxlKTtcblx0XHRjZmIuRnVsbFBhdGhzLnB1c2goZnBhdGgpO1xuXHRcdGlmKCF1bnNhZmUpIENGQi51dGlscy5jZmJfZ2MoY2ZiKTtcblx0fVxuXHQvKjo6IGlmKCFmaWxlKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0ZmlsZS5jb250ZW50ID0gKGNvbnRlbnQvKjphbnkqLyk7XG5cdGZpbGUuc2l6ZSA9IGNvbnRlbnQgPyBjb250ZW50Lmxlbmd0aCA6IDA7XG5cdGlmKG9wdHMpIHtcblx0XHRpZihvcHRzLkNMU0lEKSBmaWxlLmNsc2lkID0gb3B0cy5DTFNJRDtcblx0XHRpZihvcHRzLm10KSBmaWxlLm10ID0gb3B0cy5tdDtcblx0XHRpZihvcHRzLmN0KSBmaWxlLmN0ID0gb3B0cy5jdDtcblx0fVxuXHRyZXR1cm4gZmlsZTtcbn1cblxuZnVuY3Rpb24gY2ZiX2RlbChjZmIvKjpDRkJDb250YWluZXIqLywgbmFtZS8qOnN0cmluZyovKS8qOmJvb2xlYW4qLyB7XG5cdGluaXRfY2ZiKGNmYik7XG5cdHZhciBmaWxlID0gQ0ZCLmZpbmQoY2ZiLCBuYW1lKTtcblx0aWYoZmlsZSkgZm9yKHZhciBqID0gMDsgaiA8IGNmYi5GaWxlSW5kZXgubGVuZ3RoOyArK2opIGlmKGNmYi5GaWxlSW5kZXhbal0gPT0gZmlsZSkge1xuXHRcdGNmYi5GaWxlSW5kZXguc3BsaWNlKGosIDEpO1xuXHRcdGNmYi5GdWxsUGF0aHMuc3BsaWNlKGosIDEpO1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gY2ZiX21vdihjZmIvKjpDRkJDb250YWluZXIqLywgb2xkX25hbWUvKjpzdHJpbmcqLywgbmV3X25hbWUvKjpzdHJpbmcqLykvKjpib29sZWFuKi8ge1xuXHRpbml0X2NmYihjZmIpO1xuXHR2YXIgZmlsZSA9IENGQi5maW5kKGNmYiwgb2xkX25hbWUpO1xuXHRpZihmaWxlKSBmb3IodmFyIGogPSAwOyBqIDwgY2ZiLkZpbGVJbmRleC5sZW5ndGg7ICsraikgaWYoY2ZiLkZpbGVJbmRleFtqXSA9PSBmaWxlKSB7XG5cdFx0Y2ZiLkZpbGVJbmRleFtqXS5uYW1lID0gZmlsZW5hbWUobmV3X25hbWUpO1xuXHRcdGNmYi5GdWxsUGF0aHNbal0gPSBuZXdfbmFtZTtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNmYl9nYyhjZmIvKjpDRkJDb250YWluZXIqLykvKjp2b2lkKi8geyByZWJ1aWxkX2NmYihjZmIsIHRydWUpOyB9XG5cbmV4cG9ydHMuZmluZCA9IGZpbmQ7XG5leHBvcnRzLnJlYWQgPSByZWFkO1xuZXhwb3J0cy5wYXJzZSA9IHBhcnNlO1xuZXhwb3J0cy53cml0ZSA9IHdyaXRlO1xuZXhwb3J0cy53cml0ZUZpbGUgPSB3cml0ZV9maWxlO1xuZXhwb3J0cy51dGlscyA9IHtcblx0Y2ZiX25ldzogY2ZiX25ldyxcblx0Y2ZiX2FkZDogY2ZiX2FkZCxcblx0Y2ZiX2RlbDogY2ZiX2RlbCxcblx0Y2ZiX21vdjogY2ZiX21vdixcblx0Y2ZiX2djOiBjZmJfZ2MsXG5cdFJlYWRTaGlmdDogUmVhZFNoaWZ0LFxuXHRDaGVja0ZpZWxkOiBDaGVja0ZpZWxkLFxuXHRwcmVwX2Jsb2I6IHByZXBfYmxvYixcblx0YmNvbmNhdDogYmNvbmNhdCxcblx0dXNlX3psaWI6IHVzZV96bGliLFxuXHRfZGVmbGF0ZVJhdzogX2RlZmxhdGUsXG5cdF9pbmZsYXRlUmF3OiBfaW5mbGF0ZSxcblx0Y29uc3RzOiBjb25zdHNcbn07XG5cbnJldHVybiBleHBvcnRzO1xufSkoKTtcblxubGV0IF9mcyA9IHZvaWQgMDtcbmZ1bmN0aW9uIHNldF9mcyhmcykgeyBfZnMgPSBmczsgfVxuZXhwb3J0IHsgc2V0X2ZzIH07XG5cbi8qIG5vcm1hbGl6ZSBkYXRhIGZvciBibG9iIGN0b3IgKi9cbmZ1bmN0aW9uIGJsb2JpZnkoZGF0YSkge1xuXHRpZih0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIHMyYWIoZGF0YSk7XG5cdGlmKEFycmF5LmlzQXJyYXkoZGF0YSkpIHJldHVybiBhMnUoZGF0YSk7XG5cdHJldHVybiBkYXRhO1xufVxuLyogd3JpdGUgb3IgZG93bmxvYWQgZmlsZSAqL1xuZnVuY3Rpb24gd3JpdGVfZGwoZm5hbWUvKjpzdHJpbmcqLywgcGF5bG9hZC8qOmFueSovLCBlbmMvKjo/c3RyaW5nKi8pIHtcblx0LypnbG9iYWwgSUVfU2F2ZUZpbGUsIEJsb2IsIG5hdmlnYXRvciwgc2F2ZUFzLCBkb2N1bWVudCwgRmlsZSwgY2hyb21lICovXG5cdGlmKHR5cGVvZiBfZnMgIT09ICd1bmRlZmluZWQnICYmIF9mcy53cml0ZUZpbGVTeW5jKSByZXR1cm4gZW5jID8gX2ZzLndyaXRlRmlsZVN5bmMoZm5hbWUsIHBheWxvYWQsIGVuYykgOiBfZnMud3JpdGVGaWxlU3luYyhmbmFtZSwgcGF5bG9hZCk7XG5cdGlmKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJykge1xuXHRcdC8qIGluIHRoaXMgc3BvdCwgaXQncyBzYWZlIHRvIGFzc3VtZSB0eXBlZCBhcnJheXMgYW5kIFRleHRFbmNvZGVyL1RleHREZWNvZGVyIGV4aXN0ICovXG5cdFx0aWYoZW5jICYmIHR5cGVvZiBwYXlsb2FkID09IFwic3RyaW5nXCIpIHN3aXRjaChlbmMpIHtcblx0XHRcdGNhc2UgXCJ1dGY4XCI6IHBheWxvYWQgPSBuZXcgVGV4dEVuY29kZXIoZW5jKS5lbmNvZGUocGF5bG9hZCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcImJpbmFyeVwiOiBwYXlsb2FkID0gczJhYihwYXlsb2FkKTsgYnJlYWs7XG5cdFx0XHQvKiBUT0RPOiBiaW5hcnkgZXF1aXZhbGVudCAqL1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgZW5jb2RpbmcgXCIgKyBlbmMpO1xuXHRcdH1cblx0XHRyZXR1cm4gRGVuby53cml0ZUZpbGVTeW5jKGZuYW1lLCBwYXlsb2FkKTtcblx0fVxuXHR2YXIgZGF0YSA9IChlbmMgPT0gXCJ1dGY4XCIpID8gdXRmOHdyaXRlKHBheWxvYWQpIDogcGF5bG9hZDtcblx0Lyo6OiBkZWNsYXJlIHZhciBJRV9TYXZlRmlsZTogYW55OyAqL1xuXHRpZih0eXBlb2YgSUVfU2F2ZUZpbGUgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gSUVfU2F2ZUZpbGUoZGF0YSwgZm5hbWUpO1xuXHRpZih0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHR2YXIgYmxvYiA9IG5ldyBCbG9iKFtibG9iaWZ5KGRhdGEpXSwge3R5cGU6XCJhcHBsaWNhdGlvbi9vY3RldC1zdHJlYW1cIn0pO1xuXHRcdC8qOjogZGVjbGFyZSB2YXIgbmF2aWdhdG9yOiBhbnk7ICovXG5cdFx0aWYodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiYgbmF2aWdhdG9yLm1zU2F2ZUJsb2IpIHJldHVybiBuYXZpZ2F0b3IubXNTYXZlQmxvYihibG9iLCBmbmFtZSk7XG5cdFx0Lyo6OiBkZWNsYXJlIHZhciBzYXZlQXM6IGFueTsgKi9cblx0XHRpZih0eXBlb2Ygc2F2ZUFzICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIHNhdmVBcyhibG9iLCBmbmFtZSk7XG5cdFx0aWYodHlwZW9mIFVSTCAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJyAmJiBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICYmIFVSTC5jcmVhdGVPYmplY3RVUkwpIHtcblx0XHRcdHZhciB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuXHRcdFx0Lyo6OiBkZWNsYXJlIHZhciBjaHJvbWU6IGFueTsgKi9cblx0XHRcdGlmKHR5cGVvZiBjaHJvbWUgPT09ICdvYmplY3QnICYmIHR5cGVvZiAoY2hyb21lLmRvd25sb2Fkc3x8e30pLmRvd25sb2FkID09IFwiZnVuY3Rpb25cIikge1xuXHRcdFx0XHRpZihVUkwucmV2b2tlT2JqZWN0VVJMICYmIHR5cGVvZiBzZXRUaW1lb3V0ICE9PSAndW5kZWZpbmVkJykgc2V0VGltZW91dChmdW5jdGlvbigpIHsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOyB9LCA2MDAwMCk7XG5cdFx0XHRcdHJldHVybiBjaHJvbWUuZG93bmxvYWRzLmRvd25sb2FkKHsgdXJsOiB1cmwsIGZpbGVuYW1lOiBmbmFtZSwgc2F2ZUFzOiB0cnVlfSk7XG5cdFx0XHR9XG5cdFx0XHR2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO1xuXHRcdFx0aWYoYS5kb3dubG9hZCAhPSBudWxsKSB7XG5cdFx0XHRcdC8qOjogaWYoZG9jdW1lbnQuYm9keSA9PSBudWxsKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0XHRcdFx0YS5kb3dubG9hZCA9IGZuYW1lOyBhLmhyZWYgPSB1cmw7IGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYSk7IGEuY2xpY2soKTtcblx0XHRcdFx0Lyo6OiBpZihkb2N1bWVudC5ib2R5ID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqLyBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGEpO1xuXHRcdFx0XHRpZihVUkwucmV2b2tlT2JqZWN0VVJMICYmIHR5cGVvZiBzZXRUaW1lb3V0ICE9PSAndW5kZWZpbmVkJykgc2V0VGltZW91dChmdW5jdGlvbigpIHsgVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpOyB9LCA2MDAwMCk7XG5cdFx0XHRcdHJldHVybiB1cmw7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdC8vICRGbG93SWdub3JlXG5cdGlmKHR5cGVvZiAkICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgRmlsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEZvbGRlciAhPT0gJ3VuZGVmaW5lZCcpIHRyeSB7IC8vIGV4dGVuZHNjcmlwdFxuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0dmFyIG91dCA9IEZpbGUoZm5hbWUpOyBvdXQub3BlbihcIndcIik7IG91dC5lbmNvZGluZyA9IFwiYmluYXJ5XCI7XG5cdFx0aWYoQXJyYXkuaXNBcnJheShwYXlsb2FkKSkgcGF5bG9hZCA9IGEycyhwYXlsb2FkKTtcblx0XHRvdXQud3JpdGUocGF5bG9hZCk7IG91dC5jbG9zZSgpOyByZXR1cm4gcGF5bG9hZDtcblx0fSBjYXRjaChlKSB7IGlmKCFlLm1lc3NhZ2UgfHwgIWUubWVzc2FnZS5tYXRjaCgvb25zdHJ1Y3QvKSkgdGhyb3cgZTsgfVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJjYW5ub3Qgc2F2ZSBmaWxlIFwiICsgZm5hbWUpO1xufVxuXG4vKiByZWFkIGJpbmFyeSBkYXRhIGZyb20gZmlsZSAqL1xuZnVuY3Rpb24gcmVhZF9iaW5hcnkocGF0aC8qOnN0cmluZyovKSB7XG5cdGlmKHR5cGVvZiBfZnMgIT09ICd1bmRlZmluZWQnKSByZXR1cm4gX2ZzLnJlYWRGaWxlU3luYyhwYXRoKTtcblx0aWYodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnKSByZXR1cm4gRGVuby5yZWFkRmlsZVN5bmMocGF0aCk7XG5cdC8vICRGbG93SWdub3JlXG5cdGlmKHR5cGVvZiAkICE9PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgRmlsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIEZvbGRlciAhPT0gJ3VuZGVmaW5lZCcpIHRyeSB7IC8vIGV4dGVuZHNjcmlwdFxuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0dmFyIGluZmlsZSA9IEZpbGUocGF0aCk7IGluZmlsZS5vcGVuKFwiclwiKTsgaW5maWxlLmVuY29kaW5nID0gXCJiaW5hcnlcIjtcblx0XHR2YXIgZGF0YSA9IGluZmlsZS5yZWFkKCk7IGluZmlsZS5jbG9zZSgpO1xuXHRcdHJldHVybiBkYXRhO1xuXHR9IGNhdGNoKGUpIHsgaWYoIWUubWVzc2FnZSB8fCAhZS5tZXNzYWdlLm1hdGNoKC9vbnN0cnVjdC8pKSB0aHJvdyBlOyB9XG5cdHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBhY2Nlc3MgZmlsZSBcIiArIHBhdGgpO1xufVxuZnVuY3Rpb24ga2V5cyhvLyo6YW55Ki8pLyo6QXJyYXk8YW55PiovIHtcblx0dmFyIGtzID0gT2JqZWN0LmtleXMobyksIG8yID0gW107XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBrcy5sZW5ndGg7ICsraSkgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIGtzW2ldKSkgbzIucHVzaChrc1tpXSk7XG5cdHJldHVybiBvMjtcbn1cblxuZnVuY3Rpb24gZXZlcnRfa2V5KG9iai8qOmFueSovLCBrZXkvKjpzdHJpbmcqLykvKjpFdmVydFR5cGUqLyB7XG5cdHZhciBvID0gKFtdLyo6YW55Ki8pLCBLID0ga2V5cyhvYmopO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9PSBLLmxlbmd0aDsgKytpKSBpZihvW29ialtLW2ldXVtrZXldXSA9PSBudWxsKSBvW29ialtLW2ldXVtrZXldXSA9IEtbaV07XG5cdHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBldmVydChvYmovKjphbnkqLykvKjpFdmVydFR5cGUqLyB7XG5cdHZhciBvID0gKFtdLyo6YW55Ki8pLCBLID0ga2V5cyhvYmopO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9PSBLLmxlbmd0aDsgKytpKSBvW29ialtLW2ldXV0gPSBLW2ldO1xuXHRyZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gZXZlcnRfbnVtKG9iai8qOmFueSovKS8qOkV2ZXJ0TnVtVHlwZSovIHtcblx0dmFyIG8gPSAoW10vKjphbnkqLyksIEsgPSBrZXlzKG9iaik7XG5cdGZvcih2YXIgaSA9IDA7IGkgIT09IEsubGVuZ3RoOyArK2kpIG9bb2JqW0tbaV1dXSA9IHBhcnNlSW50KEtbaV0sMTApO1xuXHRyZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gZXZlcnRfYXJyKG9iai8qOmFueSovKS8qOkV2ZXJ0QXJyVHlwZSovIHtcblx0dmFyIG8vKjpFdmVydEFyclR5cGUqLyA9IChbXS8qOmFueSovKSwgSyA9IGtleXMob2JqKTtcblx0Zm9yKHZhciBpID0gMDsgaSAhPT0gSy5sZW5ndGg7ICsraSkge1xuXHRcdGlmKG9bb2JqW0tbaV1dXSA9PSBudWxsKSBvW29ialtLW2ldXV0gPSBbXTtcblx0XHRvW29ialtLW2ldXV0ucHVzaChLW2ldKTtcblx0fVxuXHRyZXR1cm4gbztcbn1cblxudmFyIGJhc2VkYXRlID0gLyojX19QVVJFX18qL25ldyBEYXRlKDE4OTksIDExLCAzMCwgMCwgMCwgMCk7IC8vIDIyMDkxNjE2MDAwMDBcbmZ1bmN0aW9uIGRhdGVudW0odi8qOkRhdGUqLywgZGF0ZTE5MDQvKjo/Ym9vbGVhbiovKS8qOm51bWJlciovIHtcblx0dmFyIGVwb2NoID0gLyojX19QVVJFX18qL3YuZ2V0VGltZSgpO1xuXHRpZihkYXRlMTkwNCkgZXBvY2ggLT0gMTQ2MioyNCo2MCo2MCoxMDAwO1xuXHR2YXIgZG50aHJlc2ggPSAvKiNfX1BVUkVfXyovYmFzZWRhdGUuZ2V0VGltZSgpICsgKC8qI19fUFVSRV9fKi92LmdldFRpbWV6b25lT2Zmc2V0KCkgLSAvKiNfX1BVUkVfXyovYmFzZWRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSkgKiA2MDAwMDtcblx0cmV0dXJuIChlcG9jaCAtIGRudGhyZXNoKSAvICgyNCAqIDYwICogNjAgKiAxMDAwKTtcbn1cbnZhciByZWZkYXRlID0gLyojX19QVVJFX18qL25ldyBEYXRlKCk7XG52YXIgZG50aHJlc2ggPSAvKiNfX1BVUkVfXyovYmFzZWRhdGUuZ2V0VGltZSgpICsgKC8qI19fUFVSRV9fKi9yZWZkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkgLSAvKiNfX1BVUkVfXyovYmFzZWRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSkgKiA2MDAwMDtcbnZhciByZWZvZmZzZXQgPSAvKiNfX1BVUkVfXyovcmVmZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO1xuZnVuY3Rpb24gbnVtZGF0ZSh2Lyo6bnVtYmVyKi8pLyo6RGF0ZSovIHtcblx0dmFyIG91dCA9IG5ldyBEYXRlKCk7XG5cdG91dC5zZXRUaW1lKHYgKiAyNCAqIDYwICogNjAgKiAxMDAwICsgZG50aHJlc2gpO1xuXHRpZiAob3V0LmdldFRpbWV6b25lT2Zmc2V0KCkgIT09IHJlZm9mZnNldCkge1xuXHRcdG91dC5zZXRUaW1lKG91dC5nZXRUaW1lKCkgKyAob3V0LmdldFRpbWV6b25lT2Zmc2V0KCkgLSByZWZvZmZzZXQpICogNjAwMDApO1xuXHR9XG5cdHJldHVybiBvdXQ7XG59XG5cbi8qIElTTyA4NjAxIER1cmF0aW9uICovXG5mdW5jdGlvbiBwYXJzZV9pc29kdXIocykge1xuXHR2YXIgc2VjID0gMCwgbXQgPSAwLCB0aW1lID0gZmFsc2U7XG5cdHZhciBtID0gcy5tYXRjaCgvUChbMC05XFwuXStZKT8oWzAtOVxcLl0rTSk/KFswLTlcXC5dK0QpP1QoWzAtOVxcLl0rSCk/KFswLTlcXC5dK00pPyhbMC05XFwuXStTKT8vKTtcblx0aWYoIW0pIHRocm93IG5ldyBFcnJvcihcInxcIiArIHMgKyBcInwgaXMgbm90IGFuIElTTzg2MDEgRHVyYXRpb25cIik7XG5cdGZvcih2YXIgaSA9IDE7IGkgIT0gbS5sZW5ndGg7ICsraSkge1xuXHRcdGlmKCFtW2ldKSBjb250aW51ZTtcblx0XHRtdCA9IDE7XG5cdFx0aWYoaSA+IDMpIHRpbWUgPSB0cnVlO1xuXHRcdHN3aXRjaChtW2ldLnNsaWNlKG1baV0ubGVuZ3RoLTEpKSB7XG5cdFx0XHRjYXNlICdZJzpcblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgSVNPIER1cmF0aW9uIEZpZWxkOiBcIiArIG1baV0uc2xpY2UobVtpXS5sZW5ndGgtMSkpO1xuXHRcdFx0Y2FzZSAnRCc6IG10ICo9IDI0O1xuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICdIJzogbXQgKj0gNjA7XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJ00nOlxuXHRcdFx0XHRpZighdGltZSkgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgSVNPIER1cmF0aW9uIEZpZWxkOiBNXCIpO1xuXHRcdFx0XHRlbHNlIG10ICo9IDYwO1xuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICdTJzogYnJlYWs7XG5cdFx0fVxuXHRcdHNlYyArPSBtdCAqIHBhcnNlSW50KG1baV0sIDEwKTtcblx0fVxuXHRyZXR1cm4gc2VjO1xufVxuXG52YXIgZ29vZF9wZF9kYXRlXzEgPSAvKiNfX1BVUkVfXyovbmV3IERhdGUoJzIwMTctMDItMTlUMTk6MDY6MDkuMDAwWicpO1xudmFyIGdvb2RfcGRfZGF0ZSA9IC8qI19fUFVSRV9fKi9pc05hTigvKiNfX1BVUkVfXyovZ29vZF9wZF9kYXRlXzEuZ2V0RnVsbFllYXIoKSkgPyAvKiNfX1BVUkVfXyovbmV3IERhdGUoJzIvMTkvMTcnKSA6IGdvb2RfcGRfZGF0ZV8xO1xudmFyIGdvb2RfcGQgPSAvKiNfX1BVUkVfXyovZ29vZF9wZF9kYXRlLmdldEZ1bGxZZWFyKCkgPT0gMjAxNztcbi8qIHBhcnNlcyBhIGRhdGUgYXMgYSBsb2NhbCBkYXRlICovXG5mdW5jdGlvbiBwYXJzZURhdGUoc3RyLyo6c3RyaW5nfERhdGUqLywgZml4ZGF0ZS8qOj9udW1iZXIqLykvKjpEYXRlKi8ge1xuXHR2YXIgZCA9IG5ldyBEYXRlKHN0cik7XG5cdGlmKGdvb2RfcGQpIHtcblx0XHQvKjo6IGlmKGZpeGRhdGUgPT0gbnVsbCkgZml4ZGF0ZSA9IDA7ICovXG5cdFx0aWYoZml4ZGF0ZSA+IDApIGQuc2V0VGltZShkLmdldFRpbWUoKSArIGQuZ2V0VGltZXpvbmVPZmZzZXQoKSAqIDYwICogMTAwMCk7XG5cdFx0ZWxzZSBpZihmaXhkYXRlIDwgMCkgZC5zZXRUaW1lKGQuZ2V0VGltZSgpIC0gZC5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwKTtcblx0XHRyZXR1cm4gZDtcblx0fVxuXHRpZihzdHIgaW5zdGFuY2VvZiBEYXRlKSByZXR1cm4gc3RyO1xuXHRpZihnb29kX3BkX2RhdGUuZ2V0RnVsbFllYXIoKSA9PSAxOTE3ICYmICFpc05hTihkLmdldEZ1bGxZZWFyKCkpKSB7XG5cdFx0dmFyIHMgPSBkLmdldEZ1bGxZZWFyKCk7XG5cdFx0aWYoc3RyLmluZGV4T2YoXCJcIiArIHMpID4gLTEpIHJldHVybiBkO1xuXHRcdGQuc2V0RnVsbFllYXIoZC5nZXRGdWxsWWVhcigpICsgMTAwKTsgcmV0dXJuIGQ7XG5cdH1cblx0dmFyIG4gPSBzdHIubWF0Y2goL1xcZCsvZyl8fFtcIjIwMTdcIixcIjJcIixcIjE5XCIsXCIwXCIsXCIwXCIsXCIwXCJdO1xuXHR2YXIgb3V0ID0gbmV3IERhdGUoK25bMF0sICtuWzFdIC0gMSwgK25bMl0sICgrblszXXx8MCksICgrbls0XXx8MCksICgrbls1XXx8MCkpO1xuXHRpZihzdHIuaW5kZXhPZihcIlpcIikgPiAtMSkgb3V0ID0gbmV3IERhdGUob3V0LmdldFRpbWUoKSAtIG91dC5nZXRUaW1lem9uZU9mZnNldCgpICogNjAgKiAxMDAwKTtcblx0cmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gY2Myc3RyKGFyci8qOkFycmF5PG51bWJlcj4qLywgZGVib21pdCkvKjpzdHJpbmcqLyB7XG5cdGlmKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGFycikpIHtcblx0XHRpZihkZWJvbWl0KSB7XG5cdFx0XHRpZihhcnJbMF0gPT0gMHhGRiAmJiBhcnJbMV0gPT0gMHhGRSkgcmV0dXJuIHV0Zjh3cml0ZShhcnIuc2xpY2UoMikudG9TdHJpbmcoXCJ1dGYxNmxlXCIpKTtcblx0XHRcdGlmKGFyclsxXSA9PSAweEZFICYmIGFyclsyXSA9PSAweEZGKSByZXR1cm4gdXRmOHdyaXRlKHV0ZjE2YmVyZWFkKGFyci5zbGljZSgyKS50b1N0cmluZyhcImJpbmFyeVwiKSkpO1xuXHRcdH1cblx0XHRyZXR1cm4gYXJyLnRvU3RyaW5nKFwiYmluYXJ5XCIpO1xuXHR9XG5cblx0aWYodHlwZW9mIFRleHREZWNvZGVyICE9PSBcInVuZGVmaW5lZFwiKSB0cnkge1xuXHRcdGlmKGRlYm9taXQpIHtcblx0XHRcdGlmKGFyclswXSA9PSAweEZGICYmIGFyclsxXSA9PSAweEZFKSByZXR1cm4gdXRmOHdyaXRlKG5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNmxlXCIpLmRlY29kZShhcnIuc2xpY2UoMikpKTtcblx0XHRcdGlmKGFyclswXSA9PSAweEZFICYmIGFyclsxXSA9PSAweEZGKSByZXR1cm4gdXRmOHdyaXRlKG5ldyBUZXh0RGVjb2RlcihcInV0Zi0xNmJlXCIpLmRlY29kZShhcnIuc2xpY2UoMikpKTtcblx0XHR9XG5cdFx0dmFyIHJldiA9IHtcblx0XHRcdFwiXFx1MjBhY1wiOiBcIlxceDgwXCIsIFwiXFx1MjAxYVwiOiBcIlxceDgyXCIsIFwiXFx1MDE5MlwiOiBcIlxceDgzXCIsIFwiXFx1MjAxZVwiOiBcIlxceDg0XCIsXG5cdFx0XHRcIlxcdTIwMjZcIjogXCJcXHg4NVwiLCBcIlxcdTIwMjBcIjogXCJcXHg4NlwiLCBcIlxcdTIwMjFcIjogXCJcXHg4N1wiLCBcIlxcdTAyYzZcIjogXCJcXHg4OFwiLFxuXHRcdFx0XCJcXHUyMDMwXCI6IFwiXFx4ODlcIiwgXCJcXHUwMTYwXCI6IFwiXFx4OGFcIiwgXCJcXHUyMDM5XCI6IFwiXFx4OGJcIiwgXCJcXHUwMTUyXCI6IFwiXFx4OGNcIixcblx0XHRcdFwiXFx1MDE3ZFwiOiBcIlxceDhlXCIsIFwiXFx1MjAxOFwiOiBcIlxceDkxXCIsIFwiXFx1MjAxOVwiOiBcIlxceDkyXCIsIFwiXFx1MjAxY1wiOiBcIlxceDkzXCIsXG5cdFx0XHRcIlxcdTIwMWRcIjogXCJcXHg5NFwiLCBcIlxcdTIwMjJcIjogXCJcXHg5NVwiLCBcIlxcdTIwMTNcIjogXCJcXHg5NlwiLCBcIlxcdTIwMTRcIjogXCJcXHg5N1wiLFxuXHRcdFx0XCJcXHUwMmRjXCI6IFwiXFx4OThcIiwgXCJcXHUyMTIyXCI6IFwiXFx4OTlcIiwgXCJcXHUwMTYxXCI6IFwiXFx4OWFcIiwgXCJcXHUyMDNhXCI6IFwiXFx4OWJcIixcblx0XHRcdFwiXFx1MDE1M1wiOiBcIlxceDljXCIsIFwiXFx1MDE3ZVwiOiBcIlxceDllXCIsIFwiXFx1MDE3OFwiOiBcIlxceDlmXCJcblx0XHR9O1xuXHRcdGlmKEFycmF5LmlzQXJyYXkoYXJyKSkgYXJyID0gbmV3IFVpbnQ4QXJyYXkoYXJyKTtcblx0XHRyZXR1cm4gbmV3IFRleHREZWNvZGVyKFwibGF0aW4xXCIpLmRlY29kZShhcnIpLnJlcGxhY2UoL1vigqzigJrGkuKAnuKApuKAoOKAocuG4oCwxaDigLnFksW94oCY4oCZ4oCc4oCd4oCi4oCT4oCUy5zihKLFoeKAusWTxb7FuF0vZywgZnVuY3Rpb24oYykgeyByZXR1cm4gcmV2W2NdIHx8IGM7IH0pO1xuXHR9IGNhdGNoKGUpIHt9XG5cblx0dmFyIG8gPSBbXTtcblx0Zm9yKHZhciBpID0gMDsgaSAhPSBhcnIubGVuZ3RoOyArK2kpIG8ucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKGFycltpXSkpO1xuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuXG5mdW5jdGlvbiBkdXAoby8qOmFueSovKS8qOmFueSovIHtcblx0aWYodHlwZW9mIEpTT04gIT0gJ3VuZGVmaW5lZCcgJiYgIUFycmF5LmlzQXJyYXkobykpIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG8pKTtcblx0aWYodHlwZW9mIG8gIT0gJ29iamVjdCcgfHwgbyA9PSBudWxsKSByZXR1cm4gbztcblx0aWYobyBpbnN0YW5jZW9mIERhdGUpIHJldHVybiBuZXcgRGF0ZShvLmdldFRpbWUoKSk7XG5cdHZhciBvdXQgPSB7fTtcblx0Zm9yKHZhciBrIGluIG8pIGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvLCBrKSkgb3V0W2tdID0gZHVwKG9ba10pO1xuXHRyZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBmaWxsKGMvKjpzdHJpbmcqLyxsLyo6bnVtYmVyKi8pLyo6c3RyaW5nKi8geyB2YXIgbyA9IFwiXCI7IHdoaWxlKG8ubGVuZ3RoIDwgbCkgbys9YzsgcmV0dXJuIG87IH1cblxuLyogVE9ETzogc3RyZXNzIHRlc3QgKi9cbmZ1bmN0aW9uIGZ1enp5bnVtKHMvKjpzdHJpbmcqLykvKjpudW1iZXIqLyB7XG5cdHZhciB2Lyo6bnVtYmVyKi8gPSBOdW1iZXIocyk7XG5cdGlmKCFpc05hTih2KSkgcmV0dXJuIGlzRmluaXRlKHYpID8gdiA6IE5hTjtcblx0aWYoIS9cXGQvLnRlc3QocykpIHJldHVybiB2O1xuXHR2YXIgd3QgPSAxO1xuXHR2YXIgc3MgPSBzLnJlcGxhY2UoLyhbXFxkXSksKFtcXGRdKS9nLFwiJDEkMlwiKS5yZXBsYWNlKC9bJF0vZyxcIlwiKS5yZXBsYWNlKC9bJV0vZywgZnVuY3Rpb24oKSB7IHd0ICo9IDEwMDsgcmV0dXJuIFwiXCI7fSk7XG5cdGlmKCFpc05hTih2ID0gTnVtYmVyKHNzKSkpIHJldHVybiB2IC8gd3Q7XG5cdHNzID0gc3MucmVwbGFjZSgvWyhdKC4qKVspXS8sZnVuY3Rpb24oJCQsICQxKSB7IHd0ID0gLXd0OyByZXR1cm4gJDE7fSk7XG5cdGlmKCFpc05hTih2ID0gTnVtYmVyKHNzKSkpIHJldHVybiB2IC8gd3Q7XG5cdHJldHVybiB2O1xufVxudmFyIGxvd2VyX21vbnRocyA9IFsnamFudWFyeScsICdmZWJydWFyeScsICdtYXJjaCcsICdhcHJpbCcsICdtYXknLCAnanVuZScsICdqdWx5JywgJ2F1Z3VzdCcsICdzZXB0ZW1iZXInLCAnb2N0b2JlcicsICdub3ZlbWJlcicsICdkZWNlbWJlciddO1xuZnVuY3Rpb24gZnV6enlkYXRlKHMvKjpzdHJpbmcqLykvKjpEYXRlKi8ge1xuXHR2YXIgbyA9IG5ldyBEYXRlKHMpLCBuID0gbmV3IERhdGUoTmFOKTtcblx0dmFyIHkgPSBvLmdldFllYXIoKSwgbSA9IG8uZ2V0TW9udGgoKSwgZCA9IG8uZ2V0RGF0ZSgpO1xuXHRpZihpc05hTihkKSkgcmV0dXJuIG47XG5cdHZhciBsb3dlciA9IHMudG9Mb3dlckNhc2UoKTtcblx0aWYobG93ZXIubWF0Y2goL2phbnxmZWJ8bWFyfGFwcnxtYXl8anVufGp1bHxhdWd8c2VwfG9jdHxub3Z8ZGVjLykpIHtcblx0XHRsb3dlciA9IGxvd2VyLnJlcGxhY2UoL1teYS16XS9nLFwiXCIpLnJlcGxhY2UoLyhbXmEtel18XilbYXBdbT8oW15hLXpdfCQpLyxcIlwiKTtcblx0XHRpZihsb3dlci5sZW5ndGggPiAzICYmIGxvd2VyX21vbnRocy5pbmRleE9mKGxvd2VyKSA9PSAtMSkgcmV0dXJuIG47XG5cdH0gZWxzZSBpZihsb3dlci5tYXRjaCgvW2Etel0vKSkgcmV0dXJuIG47XG5cdGlmKHkgPCAwIHx8IHkgPiA4MDk5KSByZXR1cm4gbjtcblx0aWYoKG0gPiAwIHx8IGQgPiAxKSAmJiB5ICE9IDEwMSkgcmV0dXJuIG87XG5cdGlmKHMubWF0Y2goL1teLTAtOTosXFwvXFxcXF0vKSkgcmV0dXJuIG47XG5cdHJldHVybiBvO1xufVxuXG52YXIgc3BsaXRfcmVnZXggPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCkge1xuXHR2YXIgc2FmZV9zcGxpdF9yZWdleCA9IFwiYWJhY2FiYVwiLnNwbGl0KC8oOj9iKS9pKS5sZW5ndGggPT0gNTtcblx0cmV0dXJuIGZ1bmN0aW9uIHNwbGl0X3JlZ2V4KHN0ci8qOnN0cmluZyovLCByZSwgZGVmLyo6c3RyaW5nKi8pLyo6QXJyYXk8c3RyaW5nPiovIHtcblx0XHRpZihzYWZlX3NwbGl0X3JlZ2V4IHx8IHR5cGVvZiByZSA9PSBcInN0cmluZ1wiKSByZXR1cm4gc3RyLnNwbGl0KHJlKTtcblx0XHR2YXIgcCA9IHN0ci5zcGxpdChyZSksIG8gPSBbcFswXV07XG5cdFx0Zm9yKHZhciBpID0gMTsgaSA8IHAubGVuZ3RoOyArK2kpIHsgby5wdXNoKGRlZik7IG8ucHVzaChwW2ldKTsgfVxuXHRcdHJldHVybiBvO1xuXHR9O1xufSkoKTtcbmZ1bmN0aW9uIGdldGRhdGFzdHIoZGF0YSkvKjo/c3RyaW5nKi8ge1xuXHRpZighZGF0YSkgcmV0dXJuIG51bGw7XG5cdGlmKGRhdGEuY29udGVudCAmJiBkYXRhLnR5cGUpIHJldHVybiBjYzJzdHIoZGF0YS5jb250ZW50LCB0cnVlKTtcblx0aWYoZGF0YS5kYXRhKSByZXR1cm4gZGVib20oZGF0YS5kYXRhKTtcblx0aWYoZGF0YS5hc05vZGVCdWZmZXIgJiYgaGFzX2J1ZikgcmV0dXJuIGRlYm9tKGRhdGEuYXNOb2RlQnVmZmVyKCkudG9TdHJpbmcoJ2JpbmFyeScpKTtcblx0aWYoZGF0YS5hc0JpbmFyeSkgcmV0dXJuIGRlYm9tKGRhdGEuYXNCaW5hcnkoKSk7XG5cdGlmKGRhdGEuX2RhdGEgJiYgZGF0YS5fZGF0YS5nZXRDb250ZW50KSByZXR1cm4gZGVib20oY2Myc3RyKEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRhdGEuX2RhdGEuZ2V0Q29udGVudCgpLDApKSk7XG5cdHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXRkYXRhYmluKGRhdGEpIHtcblx0aWYoIWRhdGEpIHJldHVybiBudWxsO1xuXHRpZihkYXRhLmRhdGEpIHJldHVybiBjaGFyX2NvZGVzKGRhdGEuZGF0YSk7XG5cdGlmKGRhdGEuYXNOb2RlQnVmZmVyICYmIGhhc19idWYpIHJldHVybiBkYXRhLmFzTm9kZUJ1ZmZlcigpO1xuXHRpZihkYXRhLl9kYXRhICYmIGRhdGEuX2RhdGEuZ2V0Q29udGVudCkge1xuXHRcdHZhciBvID0gZGF0YS5fZGF0YS5nZXRDb250ZW50KCk7XG5cdFx0aWYodHlwZW9mIG8gPT0gXCJzdHJpbmdcIikgcmV0dXJuIGNoYXJfY29kZXMobyk7XG5cdFx0cmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG8pO1xuXHR9XG5cdGlmKGRhdGEuY29udGVudCAmJiBkYXRhLnR5cGUpIHJldHVybiBkYXRhLmNvbnRlbnQ7XG5cdHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBnZXRkYXRhKGRhdGEpIHsgcmV0dXJuIChkYXRhICYmIGRhdGEubmFtZS5zbGljZSgtNCkgPT09IFwiLmJpblwiKSA/IGdldGRhdGFiaW4oZGF0YSkgOiBnZXRkYXRhc3RyKGRhdGEpOyB9XG5cbi8qIFBhcnQgMiBTZWN0aW9uIDEwLjEuMiBcIk1hcHBpbmcgQ29udGVudCBUeXBlc1wiIE5hbWVzIGFyZSBjYXNlLWluc2Vuc2l0aXZlICovXG4vKiBPQVNJUyBkb2VzIG5vdCBjb21tZW50IG9uIGZpbGVuYW1lIGNhc2Ugc2Vuc2l0aXZpdHkgKi9cbmZ1bmN0aW9uIHNhZmVnZXR6aXBmaWxlKHppcCwgZmlsZS8qOnN0cmluZyovKSB7XG5cdHZhciBrID0gemlwLkZ1bGxQYXRocyB8fCBrZXlzKHppcC5maWxlcyk7XG5cdHZhciBmID0gZmlsZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1tcXC9dL2csICdcXFxcJyksIGcgPSBmLnJlcGxhY2UoL1xcXFwvZywnXFwvJyk7XG5cdGZvcih2YXIgaT0wOyBpPGsubGVuZ3RoOyArK2kpIHtcblx0XHR2YXIgbiA9IGtbaV0ucmVwbGFjZSgvXlJvb3QgRW50cnlbXFwvXS8sXCJcIikudG9Mb3dlckNhc2UoKTtcblx0XHRpZihmID09IG4gfHwgZyA9PSBuKSByZXR1cm4gemlwLmZpbGVzID8gemlwLmZpbGVzW2tbaV1dIDogemlwLkZpbGVJbmRleFtpXTtcblx0fVxuXHRyZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gZ2V0emlwZmlsZSh6aXAsIGZpbGUvKjpzdHJpbmcqLykge1xuXHR2YXIgbyA9IHNhZmVnZXR6aXBmaWxlKHppcCwgZmlsZSk7XG5cdGlmKG8gPT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgZmlsZSBcIiArIGZpbGUgKyBcIiBpbiB6aXBcIik7XG5cdHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBnZXR6aXBkYXRhKHppcCwgZmlsZS8qOnN0cmluZyovLCBzYWZlLyo6P2Jvb2xlYW4qLykvKjphbnkqLyB7XG5cdGlmKCFzYWZlKSByZXR1cm4gZ2V0ZGF0YShnZXR6aXBmaWxlKHppcCwgZmlsZSkpO1xuXHRpZighZmlsZSkgcmV0dXJuIG51bGw7XG5cdHRyeSB7IHJldHVybiBnZXR6aXBkYXRhKHppcCwgZmlsZSk7IH0gY2F0Y2goZSkgeyByZXR1cm4gbnVsbDsgfVxufVxuXG5mdW5jdGlvbiBnZXR6aXBzdHIoemlwLCBmaWxlLyo6c3RyaW5nKi8sIHNhZmUvKjo/Ym9vbGVhbiovKS8qOj9zdHJpbmcqLyB7XG5cdGlmKCFzYWZlKSByZXR1cm4gZ2V0ZGF0YXN0cihnZXR6aXBmaWxlKHppcCwgZmlsZSkpO1xuXHRpZighZmlsZSkgcmV0dXJuIG51bGw7XG5cdHRyeSB7IHJldHVybiBnZXR6aXBzdHIoemlwLCBmaWxlKTsgfSBjYXRjaChlKSB7IHJldHVybiBudWxsOyB9XG59XG5cbmZ1bmN0aW9uIGdldHppcGJpbih6aXAsIGZpbGUvKjpzdHJpbmcqLywgc2FmZS8qOj9ib29sZWFuKi8pLyo6YW55Ki8ge1xuXHRpZighc2FmZSkgcmV0dXJuIGdldGRhdGFiaW4oZ2V0emlwZmlsZSh6aXAsIGZpbGUpKTtcblx0aWYoIWZpbGUpIHJldHVybiBudWxsO1xuXHR0cnkgeyByZXR1cm4gZ2V0emlwYmluKHppcCwgZmlsZSk7IH0gY2F0Y2goZSkgeyByZXR1cm4gbnVsbDsgfVxufVxuXG5mdW5jdGlvbiB6aXBlbnRyaWVzKHppcCkge1xuXHR2YXIgayA9IHppcC5GdWxsUGF0aHMgfHwga2V5cyh6aXAuZmlsZXMpLCBvID0gW107XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBrLmxlbmd0aDsgKytpKSBpZihrW2ldLnNsaWNlKC0xKSAhPSAnLycpIG8ucHVzaChrW2ldLnJlcGxhY2UoL15Sb290IEVudHJ5W1xcL10vLCBcIlwiKSk7XG5cdHJldHVybiBvLnNvcnQoKTtcbn1cblxuZnVuY3Rpb24gemlwX2FkZF9maWxlKHppcCwgcGF0aCwgY29udGVudCkge1xuXHRpZih6aXAuRnVsbFBhdGhzKSB7XG5cdFx0aWYodHlwZW9mIGNvbnRlbnQgPT0gXCJzdHJpbmdcIikge1xuXHRcdFx0dmFyIHJlcztcblx0XHRcdGlmKGhhc19idWYpIHJlcyA9IEJ1ZmZlcl9mcm9tKGNvbnRlbnQpO1xuXHRcdFx0LyogVE9ETzogaW52ZXN0aWdhdGUgcGVyZm9ybWFuY2UgaW4gRWRnZSAxMyAqL1xuXHRcdFx0Ly9lbHNlIGlmKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gXCJ1bmRlZmluZWRcIikgcmVzID0gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKGNvbnRlbnQpO1xuXHRcdFx0ZWxzZSByZXMgPSB1dGY4ZGVjb2RlKGNvbnRlbnQpO1xuXHRcdFx0cmV0dXJuIENGQi51dGlscy5jZmJfYWRkKHppcCwgcGF0aCwgcmVzKTtcblx0XHR9XG5cdFx0Q0ZCLnV0aWxzLmNmYl9hZGQoemlwLCBwYXRoLCBjb250ZW50KTtcblx0fVxuXHRlbHNlIHppcC5maWxlKHBhdGgsIGNvbnRlbnQpO1xufVxuXG5mdW5jdGlvbiB6aXBfbmV3KCkgeyByZXR1cm4gQ0ZCLnV0aWxzLmNmYl9uZXcoKTsgfVxuXG5mdW5jdGlvbiB6aXBfcmVhZChkLCBvKSB7XG5cdHN3aXRjaChvLnR5cGUpIHtcblx0XHRjYXNlIFwiYmFzZTY0XCI6IHJldHVybiBDRkIucmVhZChkLCB7IHR5cGU6IFwiYmFzZTY0XCIgfSk7XG5cdFx0Y2FzZSBcImJpbmFyeVwiOiByZXR1cm4gQ0ZCLnJlYWQoZCwgeyB0eXBlOiBcImJpbmFyeVwiIH0pO1xuXHRcdGNhc2UgXCJidWZmZXJcIjogY2FzZSBcImFycmF5XCI6IHJldHVybiBDRkIucmVhZChkLCB7IHR5cGU6IFwiYnVmZmVyXCIgfSk7XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvLnR5cGUpO1xufVxuXG5mdW5jdGlvbiByZXNvbHZlX3BhdGgocGF0aC8qOnN0cmluZyovLCBiYXNlLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRpZihwYXRoLmNoYXJBdCgwKSA9PSBcIi9cIikgcmV0dXJuIHBhdGguc2xpY2UoMSk7XG5cdHZhciByZXN1bHQgPSBiYXNlLnNwbGl0KCcvJyk7XG5cdGlmKGJhc2Uuc2xpY2UoLTEpICE9IFwiL1wiKSByZXN1bHQucG9wKCk7IC8vIGZvbGRlciBwYXRoXG5cdHZhciB0YXJnZXQgPSBwYXRoLnNwbGl0KCcvJyk7XG5cdHdoaWxlICh0YXJnZXQubGVuZ3RoICE9PSAwKSB7XG5cdFx0dmFyIHN0ZXAgPSB0YXJnZXQuc2hpZnQoKTtcblx0XHRpZiAoc3RlcCA9PT0gJy4uJykgcmVzdWx0LnBvcCgpO1xuXHRcdGVsc2UgaWYgKHN0ZXAgIT09ICcuJykgcmVzdWx0LnB1c2goc3RlcCk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdC5qb2luKCcvJyk7XG59XG52YXIgWE1MX0hFQURFUiA9ICc8P3htbCB2ZXJzaW9uPVwiMS4wXCIgZW5jb2Rpbmc9XCJVVEYtOFwiIHN0YW5kYWxvbmU9XCJ5ZXNcIj8+XFxyXFxuJztcbnZhciBhdHRyZWdleGc9LyhbXlwiXFxzPz5cXC9dKylcXHMqPVxccyooKD86XCIpKFteXCJdKikoPzpcIil8KD86JykoW14nXSopKD86Jyl8KFteJ1wiPlxcc10rKSkvZztcbnZhciB0YWdyZWdleDE9LzxbXFwvXFw/XT9bYS16QS1aMC05Ol8tXSsoPzpcXHMrW15cIlxccz8+XFwvXStcXHMqPVxccyooPzpcIlteXCJdKlwifCdbXiddKid8W14nXCI+XFxzPV0rKSkqXFxzKltcXC9cXD9dPz4vbWcsIHRhZ3JlZ2V4MiA9IC88W14+XSo+L2c7XG52YXIgdGFncmVnZXggPSAvKiNfX1BVUkVfXyovWE1MX0hFQURFUi5tYXRjaCh0YWdyZWdleDEpID8gdGFncmVnZXgxIDogdGFncmVnZXgyO1xudmFyIG5zcmVnZXg9LzxcXHcqOi8sIG5zcmVnZXgyID0gLzwoXFwvPylcXHcrOi87XG5mdW5jdGlvbiBwYXJzZXhtbHRhZyh0YWcvKjpzdHJpbmcqLywgc2tpcF9yb290Lyo6P2Jvb2xlYW4qLywgc2tpcF9MQy8qOj9ib29sZWFuKi8pLyo6YW55Ki8ge1xuXHR2YXIgeiA9ICh7fS8qOmFueSovKTtcblx0dmFyIGVxID0gMCwgYyA9IDA7XG5cdGZvcig7IGVxICE9PSB0YWcubGVuZ3RoOyArK2VxKSBpZigoYyA9IHRhZy5jaGFyQ29kZUF0KGVxKSkgPT09IDMyIHx8IGMgPT09IDEwIHx8IGMgPT09IDEzKSBicmVhaztcblx0aWYoIXNraXBfcm9vdCkgelswXSA9IHRhZy5zbGljZSgwLCBlcSk7XG5cdGlmKGVxID09PSB0YWcubGVuZ3RoKSByZXR1cm4gejtcblx0dmFyIG0gPSB0YWcubWF0Y2goYXR0cmVnZXhnKSwgaj0wLCB2PVwiXCIsIGk9MCwgcT1cIlwiLCBjYz1cIlwiLCBxdW90ID0gMTtcblx0aWYobSkgZm9yKGkgPSAwOyBpICE9IG0ubGVuZ3RoOyArK2kpIHtcblx0XHRjYyA9IG1baV07XG5cdFx0Zm9yKGM9MDsgYyAhPSBjYy5sZW5ndGg7ICsrYykgaWYoY2MuY2hhckNvZGVBdChjKSA9PT0gNjEpIGJyZWFrO1xuXHRcdHEgPSBjYy5zbGljZSgwLGMpLnRyaW0oKTtcblx0XHR3aGlsZShjYy5jaGFyQ29kZUF0KGMrMSkgPT0gMzIpICsrYztcblx0XHRxdW90ID0gKChlcT1jYy5jaGFyQ29kZUF0KGMrMSkpID09IDM0IHx8IGVxID09IDM5KSA/IDEgOiAwO1xuXHRcdHYgPSBjYy5zbGljZShjKzErcXVvdCwgY2MubGVuZ3RoLXF1b3QpO1xuXHRcdGZvcihqPTA7aiE9cS5sZW5ndGg7KytqKSBpZihxLmNoYXJDb2RlQXQoaikgPT09IDU4KSBicmVhaztcblx0XHRpZihqPT09cS5sZW5ndGgpIHtcblx0XHRcdGlmKHEuaW5kZXhPZihcIl9cIikgPiAwKSBxID0gcS5zbGljZSgwLCBxLmluZGV4T2YoXCJfXCIpKTsgLy8gZnJvbSBvZHNcblx0XHRcdHpbcV0gPSB2O1xuXHRcdFx0aWYoIXNraXBfTEMpIHpbcS50b0xvd2VyQ2FzZSgpXSA9IHY7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIGsgPSAoaj09PTUgJiYgcS5zbGljZSgwLDUpPT09XCJ4bWxuc1wiP1wieG1sbnNcIjpcIlwiKStxLnNsaWNlKGorMSk7XG5cdFx0XHRpZih6W2tdICYmIHEuc2xpY2Uoai0zLGopID09IFwiZXh0XCIpIGNvbnRpbnVlOyAvLyBmcm9tIG9kc1xuXHRcdFx0eltrXSA9IHY7XG5cdFx0XHRpZighc2tpcF9MQykgeltrLnRvTG93ZXJDYXNlKCldID0gdjtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHo7XG59XG5mdW5jdGlvbiBzdHJpcF9ucyh4Lyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8geyByZXR1cm4geC5yZXBsYWNlKG5zcmVnZXgyLCBcIjwkMVwiKTsgfVxuXG52YXIgZW5jb2RpbmdzID0ge1xuXHQnJnF1b3Q7JzogJ1wiJyxcblx0JyZhcG9zOyc6IFwiJ1wiLFxuXHQnJmd0Oyc6ICc+Jyxcblx0JyZsdDsnOiAnPCcsXG5cdCcmYW1wOyc6ICcmJ1xufTtcbnZhciByZW5jb2RpbmcgPSAvKiNfX1BVUkVfXyovZXZlcnQoZW5jb2RpbmdzKTtcbi8vdmFyIHJlbmNzdHIgPSBcIiY8PidcXFwiXCIuc3BsaXQoXCJcIik7XG5cbi8vIFRPRE86IENQIHJlbWFwIChuZWVkIHRvIHJlYWQgZmlsZSB2ZXJzaW9uIHRvIGRldGVybWluZSBPUylcbnZhciB1bmVzY2FwZXhtbC8qOlN0cmluZ0NvbnYqLyA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdC8qIDIyLjQuMi40IGJzdHIgKEJhc2ljIFN0cmluZykgKi9cblx0dmFyIGVuY3JlZ2V4ID0gLyYoPzpxdW90fGFwb3N8Z3R8bHR8YW1wfCN4PyhbXFxkYS1mQS1GXSspKTsvaWcsIGNvZGVyZWdleCA9IC9feChbXFxkYS1mQS1GXXs0fSlfL2lnO1xuXHRyZXR1cm4gZnVuY3Rpb24gdW5lc2NhcGV4bWwodGV4dC8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0XHR2YXIgcyA9IHRleHQgKyAnJywgaSA9IHMuaW5kZXhPZihcIjwhW0NEQVRBW1wiKTtcblx0XHRpZihpID09IC0xKSByZXR1cm4gcy5yZXBsYWNlKGVuY3JlZ2V4LCBmdW5jdGlvbigkJCwgJDEpIHsgcmV0dXJuIGVuY29kaW5nc1skJF18fFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoJDEsJCQuaW5kZXhPZihcInhcIik+LTE/MTY6MTApKXx8JCQ7IH0pLnJlcGxhY2UoY29kZXJlZ2V4LGZ1bmN0aW9uKG0sYykge3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGMsMTYpKTt9KTtcblx0XHR2YXIgaiA9IHMuaW5kZXhPZihcIl1dPlwiKTtcblx0XHRyZXR1cm4gdW5lc2NhcGV4bWwocy5zbGljZSgwLCBpKSkgKyBzLnNsaWNlKGkrOSxqKSArIHVuZXNjYXBleG1sKHMuc2xpY2UoaiszKSk7XG5cdH07XG59KSgpO1xuXG52YXIgZGVjcmVnZXg9L1smPD4nXCJdL2csIGNoYXJlZ2V4ID0gL1tcXHUwMDAwLVxcdTAwMDhcXHUwMDBiLVxcdTAwMWZdL2c7XG5mdW5jdGlvbiBlc2NhcGV4bWwodGV4dC8qOnN0cmluZyovKS8qOnN0cmluZyove1xuXHR2YXIgcyA9IHRleHQgKyAnJztcblx0cmV0dXJuIHMucmVwbGFjZShkZWNyZWdleCwgZnVuY3Rpb24oeSkgeyByZXR1cm4gcmVuY29kaW5nW3ldOyB9KS5yZXBsYWNlKGNoYXJlZ2V4LGZ1bmN0aW9uKHMpIHsgcmV0dXJuIFwiX3hcIiArIChcIjAwMFwiK3MuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC00KSArIFwiX1wiO30pO1xufVxuZnVuY3Rpb24gZXNjYXBleG1sdGFnKHRleHQvKjpzdHJpbmcqLykvKjpzdHJpbmcqL3sgcmV0dXJuIGVzY2FwZXhtbCh0ZXh0KS5yZXBsYWNlKC8gL2csXCJfeDAwMjBfXCIpOyB9XG5cbnZhciBodG1sY2hhcmVnZXggPSAvW1xcdTAwMDAtXFx1MDAxZl0vZztcbmZ1bmN0aW9uIGVzY2FwZWh0bWwodGV4dC8qOnN0cmluZyovKS8qOnN0cmluZyove1xuXHR2YXIgcyA9IHRleHQgKyAnJztcblx0cmV0dXJuIHMucmVwbGFjZShkZWNyZWdleCwgZnVuY3Rpb24oeSkgeyByZXR1cm4gcmVuY29kaW5nW3ldOyB9KS5yZXBsYWNlKC9cXG4vZywgXCI8YnIvPlwiKS5yZXBsYWNlKGh0bWxjaGFyZWdleCxmdW5jdGlvbihzKSB7IHJldHVybiBcIiYjeFwiICsgKFwiMDAwXCIrcy5jaGFyQ29kZUF0KDApLnRvU3RyaW5nKDE2KSkuc2xpY2UoLTQpICsgXCI7XCI7IH0pO1xufVxuXG5mdW5jdGlvbiBlc2NhcGV4bG1sKHRleHQvKjpzdHJpbmcqLykvKjpzdHJpbmcqL3tcblx0dmFyIHMgPSB0ZXh0ICsgJyc7XG5cdHJldHVybiBzLnJlcGxhY2UoZGVjcmVnZXgsIGZ1bmN0aW9uKHkpIHsgcmV0dXJuIHJlbmNvZGluZ1t5XTsgfSkucmVwbGFjZShodG1sY2hhcmVnZXgsZnVuY3Rpb24ocykgeyByZXR1cm4gXCImI3hcIiArIChzLmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpKS50b1VwcGVyQ2FzZSgpICsgXCI7XCI7IH0pO1xufVxuXG4vKiBUT0RPOiBoYW5kbGUgY29kZXBhZ2VzICovXG52YXIgeGxtbF9maXhzdHIvKjpTdHJpbmdDb252Ki8gPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCkge1xuXHR2YXIgZW50cmVnZXggPSAvJiMoXFxkKyk7L2c7XG5cdGZ1bmN0aW9uIGVudHJlcGwoJCQvKjpzdHJpbmcqLywkMS8qOnN0cmluZyovKS8qOnN0cmluZyovIHsgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoJDEsMTApKTsgfVxuXHRyZXR1cm4gZnVuY3Rpb24geGxtbF9maXhzdHIoc3RyLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8geyByZXR1cm4gc3RyLnJlcGxhY2UoZW50cmVnZXgsZW50cmVwbCk7IH07XG59KSgpO1xuZnVuY3Rpb24geGxtbF91bmZpeHN0cihzdHIvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7IHJldHVybiBzdHIucmVwbGFjZSgvKFxcclxcbnxbXFxyXFxuXSkvZyxcIlxcJiMxMDtcIik7IH1cblxuZnVuY3Rpb24gcGFyc2V4bWxib29sKHZhbHVlLyo6YW55Ki8pLyo6Ym9vbGVhbiovIHtcblx0c3dpdGNoKHZhbHVlKSB7XG5cdFx0Y2FzZSAxOiBjYXNlIHRydWU6IGNhc2UgJzEnOiBjYXNlICd0cnVlJzogY2FzZSAnVFJVRSc6IHJldHVybiB0cnVlO1xuXHRcdC8qIGNhc2UgJzAnOiBjYXNlICdmYWxzZSc6IGNhc2UgJ0ZBTFNFJzoqL1xuXHRcdGRlZmF1bHQ6IHJldHVybiBmYWxzZTtcblx0fVxufVxuXG5mdW5jdGlvbiB1dGY4cmVhZGEob3JpZy8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0dmFyIG91dCA9IFwiXCIsIGkgPSAwLCBjID0gMCwgZCA9IDAsIGUgPSAwLCBmID0gMCwgdyA9IDA7XG5cdHdoaWxlIChpIDwgb3JpZy5sZW5ndGgpIHtcblx0XHRjID0gb3JpZy5jaGFyQ29kZUF0KGkrKyk7XG5cdFx0aWYgKGMgPCAxMjgpIHsgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYyk7IGNvbnRpbnVlOyB9XG5cdFx0ZCA9IG9yaWcuY2hhckNvZGVBdChpKyspO1xuXHRcdGlmIChjPjE5MSAmJiBjPDIyNCkgeyBmID0gKChjICYgMzEpIDw8IDYpOyBmIHw9IChkICYgNjMpOyBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShmKTsgY29udGludWU7IH1cblx0XHRlID0gb3JpZy5jaGFyQ29kZUF0KGkrKyk7XG5cdFx0aWYgKGMgPCAyNDApIHsgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMTUpIDw8IDEyKSB8ICgoZCAmIDYzKSA8PCA2KSB8IChlICYgNjMpKTsgY29udGludWU7IH1cblx0XHRmID0gb3JpZy5jaGFyQ29kZUF0KGkrKyk7XG5cdFx0dyA9ICgoKGMgJiA3KSA8PCAxOCkgfCAoKGQgJiA2MykgPDwgMTIpIHwgKChlICYgNjMpIDw8IDYpIHwgKGYgJiA2MykpLTY1NTM2O1xuXHRcdG91dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4RDgwMCArICgodz4+PjEwKSYxMDIzKSk7XG5cdFx0b3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhEQzAwICsgKHcmMTAyMykpO1xuXHR9XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHV0ZjhyZWFkYihkYXRhKSB7XG5cdHZhciBvdXQgPSBuZXdfcmF3X2J1ZigyKmRhdGEubGVuZ3RoKSwgdywgaSwgaiA9IDEsIGsgPSAwLCB3dz0wLCBjO1xuXHRmb3IoaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSs9aikge1xuXHRcdGogPSAxO1xuXHRcdGlmKChjPWRhdGEuY2hhckNvZGVBdChpKSkgPCAxMjgpIHcgPSBjO1xuXHRcdGVsc2UgaWYoYyA8IDIyNCkgeyB3ID0gKGMmMzEpKjY0KyhkYXRhLmNoYXJDb2RlQXQoaSsxKSY2Myk7IGo9MjsgfVxuXHRcdGVsc2UgaWYoYyA8IDI0MCkgeyB3PShjJjE1KSo0MDk2KyhkYXRhLmNoYXJDb2RlQXQoaSsxKSY2MykqNjQrKGRhdGEuY2hhckNvZGVBdChpKzIpJjYzKTsgaj0zOyB9XG5cdFx0ZWxzZSB7IGogPSA0O1xuXHRcdFx0dyA9IChjICYgNykqMjYyMTQ0KyhkYXRhLmNoYXJDb2RlQXQoaSsxKSY2MykqNDA5NisoZGF0YS5jaGFyQ29kZUF0KGkrMikmNjMpKjY0KyhkYXRhLmNoYXJDb2RlQXQoaSszKSY2Myk7XG5cdFx0XHR3IC09IDY1NTM2OyB3dyA9IDB4RDgwMCArICgodz4+PjEwKSYxMDIzKTsgdyA9IDB4REMwMCArICh3JjEwMjMpO1xuXHRcdH1cblx0XHRpZih3dyAhPT0gMCkgeyBvdXRbaysrXSA9IHd3JjI1NTsgb3V0W2srK10gPSB3dz4+Pjg7IHd3ID0gMDsgfVxuXHRcdG91dFtrKytdID0gdyUyNTY7IG91dFtrKytdID0gdz4+Pjg7XG5cdH1cblx0cmV0dXJuIG91dC5zbGljZSgwLGspLnRvU3RyaW5nKCd1Y3MyJyk7XG59XG5cbmZ1bmN0aW9uIHV0ZjhyZWFkYyhkYXRhKSB7IHJldHVybiBCdWZmZXJfZnJvbShkYXRhLCAnYmluYXJ5JykudG9TdHJpbmcoJ3V0ZjgnKTsgfVxuXG52YXIgdXRmOGNvcnB1cyA9IFwiZm9vIGJhciBiYXpcXHUwMGUyXFx1MDA5OFxcdTAwODNcXHUwMGYwXFx1MDA5ZlxcdTAwOGRcXHUwMGEzXCI7XG52YXIgdXRmOHJlYWQgPSBoYXNfYnVmICYmICgvKiNfX1BVUkVfXyovdXRmOHJlYWRjKHV0Zjhjb3JwdXMpID09IC8qI19fUFVSRV9fKi91dGY4cmVhZGEodXRmOGNvcnB1cykgJiYgdXRmOHJlYWRjIHx8IC8qI19fUFVSRV9fKi91dGY4cmVhZGIodXRmOGNvcnB1cykgPT0gLyojX19QVVJFX18qL3V0ZjhyZWFkYSh1dGY4Y29ycHVzKSAmJiB1dGY4cmVhZGIpIHx8IHV0ZjhyZWFkYTtcblxudmFyIHV0Zjh3cml0ZS8qOlN0cmluZ0NvbnYqLyA9IGhhc19idWYgPyBmdW5jdGlvbihkYXRhKSB7IHJldHVybiBCdWZmZXJfZnJvbShkYXRhLCAndXRmOCcpLnRvU3RyaW5nKFwiYmluYXJ5XCIpOyB9IDogZnVuY3Rpb24ob3JpZy8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0dmFyIG91dC8qOkFycmF5PHN0cmluZz4qLyA9IFtdLCBpID0gMCwgYyA9IDAsIGQgPSAwO1xuXHR3aGlsZShpIDwgb3JpZy5sZW5ndGgpIHtcblx0XHRjID0gb3JpZy5jaGFyQ29kZUF0KGkrKyk7XG5cdFx0c3dpdGNoKHRydWUpIHtcblx0XHRcdGNhc2UgYyA8IDEyODogb3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShjKSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBjIDwgMjA0ODpcblx0XHRcdFx0b3V0LnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZSgxOTIgKyAoYyA+PiA2KSkpO1xuXHRcdFx0XHRvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDEyOCArIChjICYgNjMpKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBjID49IDU1Mjk2ICYmIGMgPCA1NzM0NDpcblx0XHRcdFx0YyAtPSA1NTI5NjsgZCA9IG9yaWcuY2hhckNvZGVBdChpKyspIC0gNTYzMjAgKyAoYzw8MTApO1xuXHRcdFx0XHRvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDI0MCArICgoZCA+PjE4KSAmIDcpKSk7XG5cdFx0XHRcdG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMTQ0ICsgKChkID4+MTIpICYgNjMpKSk7XG5cdFx0XHRcdG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMTI4ICsgKChkID4+IDYpICYgNjMpKSk7XG5cdFx0XHRcdG91dC5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoMTI4ICsgKGQgJiA2MykpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDIyNCArIChjID4+IDEyKSkpO1xuXHRcdFx0XHRvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDEyOCArICgoYyA+PiA2KSAmIDYzKSkpO1xuXHRcdFx0XHRvdXQucHVzaChTdHJpbmcuZnJvbUNoYXJDb2RlKDEyOCArIChjICYgNjMpKSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBvdXQuam9pbihcIlwiKTtcbn07XG5cbi8vIG1hdGNoZXMgPGZvbz4uLi48L2Zvbz4gZXh0cmFjdHMgY29udGVudFxudmFyIG1hdGNodGFnID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpIHtcblx0dmFyIG10Y2FjaGUvKjp7W2s6c3RyaW5nXTpSZWdFeHB9Ki8gPSAoe30vKjphbnkqLyk7XG5cdHJldHVybiBmdW5jdGlvbiBtYXRjaHRhZyhmLyo6c3RyaW5nKi8sZy8qOj9zdHJpbmcqLykvKjpSZWdFeHAqLyB7XG5cdFx0dmFyIHQgPSBmK1wifFwiKyhnfHxcIlwiKTtcblx0XHRpZihtdGNhY2hlW3RdKSByZXR1cm4gbXRjYWNoZVt0XTtcblx0XHRyZXR1cm4gKG10Y2FjaGVbdF0gPSBuZXcgUmVnRXhwKCc8KD86XFxcXHcrOik/JytmKycoPzogeG1sOnNwYWNlPVwicHJlc2VydmVcIik/KD86W14+XSopPihbXFxcXHNcXFxcU10qPyk8Lyg/OlxcXFx3KzopPycrZisnPicsKChnfHxcIlwiKS8qOmFueSovKSkpO1xuXHR9O1xufSkoKTtcblxudmFyIGh0bWxkZWNvZGUvKjp7KHM6c3RyaW5nKTpzdHJpbmd9Ki8gPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCkge1xuXHR2YXIgZW50aXRpZXMvKjpBcnJheTxbUmVnRXhwLCBzdHJpbmddPiovID0gW1xuXHRcdFsnbmJzcCcsICcgJ10sIFsnbWlkZG90JywgJ8K3J10sXG5cdFx0WydxdW90JywgJ1wiJ10sIFsnYXBvcycsIFwiJ1wiXSwgWydndCcsICAgJz4nXSwgWydsdCcsICAgJzwnXSwgWydhbXAnLCAgJyYnXVxuXHRdLm1hcChmdW5jdGlvbih4Lyo6W3N0cmluZywgc3RyaW5nXSovKSB7IHJldHVybiBbbmV3IFJlZ0V4cCgnJicgKyB4WzBdICsgJzsnLCBcImlnXCIpLCB4WzFdXTsgfSk7XG5cdHJldHVybiBmdW5jdGlvbiBodG1sZGVjb2RlKHN0ci8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0XHR2YXIgbyA9IHN0clxuXHRcdFx0XHQvLyBSZW1vdmUgbmV3IGxpbmVzIGFuZCBzcGFjZXMgZnJvbSBzdGFydCBvZiBjb250ZW50XG5cdFx0XHRcdC5yZXBsYWNlKC9eW1xcdFxcblxcciBdKy8sIFwiXCIpXG5cdFx0XHRcdC8vIFJlbW92ZSBuZXcgbGluZXMgYW5kIHNwYWNlcyBmcm9tIGVuZCBvZiBjb250ZW50XG5cdFx0XHRcdC5yZXBsYWNlKC9bXFx0XFxuXFxyIF0rJC8sXCJcIilcblx0XHRcdFx0Ly8gQWRkZWQgbGluZSB3aGljaCByZW1vdmVzIGFueSB3aGl0ZSBzcGFjZSBjaGFyYWN0ZXJzIGFmdGVyIGFuZCBiZWZvcmUgaHRtbCB0YWdzXG5cdFx0XHRcdC5yZXBsYWNlKC8+XFxzKy9nLFwiPlwiKS5yZXBsYWNlKC9cXHMrPC9nLFwiPFwiKVxuXHRcdFx0XHQvLyBSZXBsYWNlIHJlbWFpbmluZyBuZXcgbGluZXMgYW5kIHNwYWNlcyB3aXRoIHNwYWNlXG5cdFx0XHRcdC5yZXBsYWNlKC9bXFx0XFxuXFxyIF0rL2csIFwiIFwiKVxuXHRcdFx0XHQvLyBSZXBsYWNlIDxicj4gdGFncyB3aXRoIG5ldyBsaW5lc1xuXHRcdFx0XHQucmVwbGFjZSgvPFxccypbYkJdW3JSXVxccypcXC8/Pi9nLFwiXFxuXCIpXG5cdFx0XHRcdC8vIFN0cmlwIEhUTUwgZWxlbWVudHNcblx0XHRcdFx0LnJlcGxhY2UoLzxbXj5dKj4vZyxcIlwiKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZW50aXRpZXMubGVuZ3RoOyArK2kpIG8gPSBvLnJlcGxhY2UoZW50aXRpZXNbaV1bMF0sIGVudGl0aWVzW2ldWzFdKTtcblx0XHRyZXR1cm4gbztcblx0fTtcbn0pKCk7XG5cbnZhciB2dHJlZ2V4ID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpeyB2YXIgdnRfY2FjaGUgPSB7fTtcblx0cmV0dXJuIGZ1bmN0aW9uIHZ0X3JlZ2V4KGJ0KSB7XG5cdFx0aWYodnRfY2FjaGVbYnRdICE9PSB1bmRlZmluZWQpIHJldHVybiB2dF9jYWNoZVtidF07XG5cdFx0cmV0dXJuICh2dF9jYWNoZVtidF0gPSBuZXcgUmVnRXhwKFwiPCg/OnZ0Oik/XCIgKyBidCArIFwiPihbXFxcXHNcXFxcU10qPyk8Lyg/OnZ0Oik/XCIgKyBidCArIFwiPlwiLCAnZycpICk7XG59O30pKCk7XG52YXIgdnR2cmVnZXggPSAvPFxcLz8oPzp2dDopP3ZhcmlhbnQ+L2csIHZ0bXJlZ2V4ID0gLzwoPzp2dDopKFtePl0qKT4oW1xcc1xcU10qKTwvO1xuZnVuY3Rpb24gcGFyc2VWZWN0b3IoZGF0YS8qOnN0cmluZyovLCBvcHRzKS8qOkFycmF5PHt2OnN0cmluZyx0OnN0cmluZ30+Ki8ge1xuXHR2YXIgaCA9IHBhcnNleG1sdGFnKGRhdGEpO1xuXG5cdHZhciBtYXRjaGVzLyo6QXJyYXk8c3RyaW5nPiovID0gZGF0YS5tYXRjaCh2dHJlZ2V4KGguYmFzZVR5cGUpKXx8W107XG5cdHZhciByZXMvKjpBcnJheTxhbnk+Ki8gPSBbXTtcblx0aWYobWF0Y2hlcy5sZW5ndGggIT0gaC5zaXplKSB7XG5cdFx0aWYob3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcihcInVuZXhwZWN0ZWQgdmVjdG9yIGxlbmd0aCBcIiArIG1hdGNoZXMubGVuZ3RoICsgXCIgIT0gXCIgKyBoLnNpemUpO1xuXHRcdHJldHVybiByZXM7XG5cdH1cblx0bWF0Y2hlcy5mb3JFYWNoKGZ1bmN0aW9uKHgvKjpzdHJpbmcqLykge1xuXHRcdHZhciB2ID0geC5yZXBsYWNlKHZ0dnJlZ2V4LFwiXCIpLm1hdGNoKHZ0bXJlZ2V4KTtcblx0XHRpZih2KSByZXMucHVzaCh7djp1dGY4cmVhZCh2WzJdKSwgdDp2WzFdfSk7XG5cdH0pO1xuXHRyZXR1cm4gcmVzO1xufVxuXG52YXIgd3RyZWdleCA9IC8oXlxcc3xcXHMkfFxcbikvO1xuZnVuY3Rpb24gd3JpdGV0YWcoZi8qOnN0cmluZyovLGcvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7IHJldHVybiAnPCcgKyBmICsgKGcubWF0Y2god3RyZWdleCk/JyB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiJyA6IFwiXCIpICsgJz4nICsgZyArICc8LycgKyBmICsgJz4nOyB9XG5cbmZ1bmN0aW9uIHd4dF9oZWxwZXIoaCkvKjpzdHJpbmcqLyB7IHJldHVybiBrZXlzKGgpLm1hcChmdW5jdGlvbihrKSB7IHJldHVybiBcIiBcIiArIGsgKyAnPVwiJyArIGhba10gKyAnXCInO30pLmpvaW4oXCJcIik7IH1cbmZ1bmN0aW9uIHdyaXRleHRhZyhmLyo6c3RyaW5nKi8sZy8qOj9zdHJpbmcqLyxoKSB7IHJldHVybiAnPCcgKyBmICsgKChoICE9IG51bGwpID8gd3h0X2hlbHBlcihoKSA6IFwiXCIpICsgKChnICE9IG51bGwpID8gKGcubWF0Y2god3RyZWdleCk/JyB4bWw6c3BhY2U9XCJwcmVzZXJ2ZVwiJyA6IFwiXCIpICsgJz4nICsgZyArICc8LycgKyBmIDogXCIvXCIpICsgJz4nO31cblxuZnVuY3Rpb24gd3JpdGVfdzNjZHRmKGQvKjpEYXRlKi8sIHQvKjo/Ym9vbGVhbiovKS8qOnN0cmluZyovIHsgdHJ5IHsgcmV0dXJuIGQudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqLyxcIlwiKTsgfSBjYXRjaChlKSB7IGlmKHQpIHRocm93IGU7IH0gcmV0dXJuIFwiXCI7IH1cblxuZnVuY3Rpb24gd3JpdGVfdnQocywgeGxzeC8qOj9ib29sZWFuKi8pLyo6c3RyaW5nKi8ge1xuXHRzd2l0Y2godHlwZW9mIHMpIHtcblx0XHRjYXNlICdzdHJpbmcnOlxuXHRcdFx0dmFyIG8gPSB3cml0ZXh0YWcoJ3Z0Omxwd3N0cicsIGVzY2FwZXhtbChzKSk7XG5cdFx0XHRpZih4bHN4KSBvID0gby5yZXBsYWNlKC8mcXVvdDsvZywgXCJfeDAwMjJfXCIpO1xuXHRcdFx0cmV0dXJuIG87XG5cdFx0Y2FzZSAnbnVtYmVyJzogcmV0dXJuIHdyaXRleHRhZygoc3wwKT09cz8ndnQ6aTQnOid2dDpyOCcsIGVzY2FwZXhtbChTdHJpbmcocykpKTtcblx0XHRjYXNlICdib29sZWFuJzogcmV0dXJuIHdyaXRleHRhZygndnQ6Ym9vbCcscz8ndHJ1ZSc6J2ZhbHNlJyk7XG5cdH1cblx0aWYocyBpbnN0YW5jZW9mIERhdGUpIHJldHVybiB3cml0ZXh0YWcoJ3Z0OmZpbGV0aW1lJywgd3JpdGVfdzNjZHRmKHMpKTtcblx0dGhyb3cgbmV3IEVycm9yKFwiVW5hYmxlIHRvIHNlcmlhbGl6ZSBcIiArIHMpO1xufVxuXG5mdW5jdGlvbiB4bG1sX25vcm1hbGl6ZShkKS8qOnN0cmluZyovIHtcblx0aWYoaGFzX2J1ZiAmJi8qOjp0eXBlb2YgQnVmZmVyICE9PSBcInVuZGVmaW5lZFwiICYmIGQgIT0gbnVsbCAmJiBkIGluc3RhbmNlb2YgQnVmZmVyICYmKi8gQnVmZmVyLmlzQnVmZmVyKGQpKSByZXR1cm4gZC50b1N0cmluZygndXRmOCcpO1xuXHRpZih0eXBlb2YgZCA9PT0gJ3N0cmluZycpIHJldHVybiBkO1xuXHQvKiBkdWt0YXBlICovXG5cdGlmKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiBkIGluc3RhbmNlb2YgVWludDhBcnJheSkgcmV0dXJuIHV0ZjhyZWFkKGEycyhhYjJhKGQpKSk7XG5cdHRocm93IG5ldyBFcnJvcihcIkJhZCBpbnB1dCBmb3JtYXQ6IGV4cGVjdGVkIEJ1ZmZlciBvciBzdHJpbmdcIik7XG59XG4vKiBVT1MgdXNlcyBDSksgaW4gdGFncyAqL1xudmFyIHhsbWxyZWdleCA9IC88KFxcLz8pKFteXFxzPz48IVxcLzpdKjp8KShbXlxccz88PjpcXC9dKykoPzpbXFxzPzpcXC9dW14+XSopPz4vbWc7XG4vL3ZhciB4bG1scmVnZXggPSAvPChcXC8/KShbYS16MC05XSo6fCkoXFx3KylbXj5dKj4vbWc7XG5cbnZhciBYTUxOUyA9ICh7XG5cdENPUkVfUFJPUFM6ICdodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L21ldGFkYXRhL2NvcmUtcHJvcGVydGllcycsXG5cdENVU1RfUFJPUFM6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvY3VzdG9tLXByb3BlcnRpZXNcIixcblx0RVhUX1BST1BTOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L2V4dGVuZGVkLXByb3BlcnRpZXNcIixcblx0Q1Q6ICdodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvcGFja2FnZS8yMDA2L2NvbnRlbnQtdHlwZXMnLFxuXHRSRUxTOiAnaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzJyxcblx0VENNTlQ6ICdodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9zcHJlYWRzaGVldG1sLzIwMTgvdGhyZWFkZWRjb21tZW50cycsXG5cdCdkYyc6ICdodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLycsXG5cdCdkY3Rlcm1zJzogJ2h0dHA6Ly9wdXJsLm9yZy9kYy90ZXJtcy8nLFxuXHQnZGNtaXR5cGUnOiAnaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlLycsXG5cdCdteCc6ICdodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9tYWMvZXhjZWwvMjAwOC9tYWluJyxcblx0J3InOiAnaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcycsXG5cdCdzanMnOiAnaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9zaGVldGpzL2NvcmUtcHJvcGVydGllcycsXG5cdCd2dCc6ICdodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9kb2NQcm9wc1ZUeXBlcycsXG5cdCd4c2knOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEtaW5zdGFuY2UnLFxuXHQneHNkJzogJ2h0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hJ1xufS8qOmFueSovKTtcblxudmFyIFhNTE5TX21haW4gPSBbXG5cdCdodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW4nLFxuXHQnaHR0cDovL3B1cmwub2NsYy5vcmcvb294bWwvc3ByZWFkc2hlZXRtbC9tYWluJyxcblx0J2h0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlL2V4Y2VsLzIwMDYvbWFpbicsXG5cdCdodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS9leGNlbC8yMDA2LzInXG5dO1xuXG52YXIgWExNTE5TID0gKHtcblx0J28nOiAgICAndXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6b2ZmaWNlJyxcblx0J3gnOiAgICAndXJuOnNjaGVtYXMtbWljcm9zb2Z0LWNvbTpvZmZpY2U6ZXhjZWwnLFxuXHQnc3MnOiAgICd1cm46c2NoZW1hcy1taWNyb3NvZnQtY29tOm9mZmljZTpzcHJlYWRzaGVldCcsXG5cdCdkdCc6ICAgJ3V1aWQ6QzJGNDEwMTAtNjVCMy0xMWQxLUEyOUYtMDBBQTAwQzE0ODgyJyxcblx0J212JzogICAnaHR0cDovL21hY1ZtbFNjaGVtYVVyaScsXG5cdCd2JzogICAgJ3VybjpzY2hlbWFzLW1pY3Jvc29mdC1jb206dm1sJyxcblx0J2h0bWwnOiAnaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MCdcbn0vKjphbnkqLyk7XG5mdW5jdGlvbiByZWFkX2RvdWJsZV9sZShiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8sIGlkeC8qOm51bWJlciovKS8qOm51bWJlciovIHtcblx0dmFyIHMgPSAxIC0gMiAqIChiW2lkeCArIDddID4+PiA3KTtcblx0dmFyIGUgPSAoKGJbaWR4ICsgN10gJiAweDdmKSA8PCA0KSArICgoYltpZHggKyA2XSA+Pj4gNCkgJiAweDBmKTtcblx0dmFyIG0gPSAoYltpZHgrNl0mMHgwZik7XG5cdGZvcih2YXIgaSA9IDU7IGkgPj0gMDsgLS1pKSBtID0gbSAqIDI1NiArIGJbaWR4ICsgaV07XG5cdGlmKGUgPT0gMHg3ZmYpIHJldHVybiBtID09IDAgPyAocyAqIEluZmluaXR5KSA6IE5hTjtcblx0aWYoZSA9PSAwKSBlID0gLTEwMjI7XG5cdGVsc2UgeyBlIC09IDEwMjM7IG0gKz0gTWF0aC5wb3coMiw1Mik7IH1cblx0cmV0dXJuIHMgKiBNYXRoLnBvdygyLCBlIC0gNTIpICogbTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfZG91YmxlX2xlKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgdi8qOm51bWJlciovLCBpZHgvKjpudW1iZXIqLykge1xuXHR2YXIgYnMgPSAoKCgodiA8IDApIHx8ICgxL3YgPT0gLUluZmluaXR5KSkgPyAxIDogMCkgPDwgNyksIGUgPSAwLCBtID0gMDtcblx0dmFyIGF2ID0gYnMgPyAoLXYpIDogdjtcblx0aWYoIWlzRmluaXRlKGF2KSkgeyBlID0gMHg3ZmY7IG0gPSBpc05hTih2KSA/IDB4Njk2OSA6IDA7IH1cblx0ZWxzZSBpZihhdiA9PSAwKSBlID0gbSA9IDA7XG5cdGVsc2Uge1xuXHRcdGUgPSBNYXRoLmZsb29yKE1hdGgubG9nKGF2KSAvIE1hdGguTE4yKTtcblx0XHRtID0gYXYgKiBNYXRoLnBvdygyLCA1MiAtIGUpO1xuXHRcdGlmKChlIDw9IC0xMDIzKSAmJiAoIWlzRmluaXRlKG0pIHx8IChtIDwgTWF0aC5wb3coMiw1MikpKSkgeyBlID0gLTEwMjI7IH1cblx0XHRlbHNlIHsgbSAtPSBNYXRoLnBvdygyLDUyKTsgZSs9MTAyMzsgfVxuXHR9XG5cdGZvcih2YXIgaSA9IDA7IGkgPD0gNTsgKytpLCBtLz0yNTYpIGJbaWR4ICsgaV0gPSBtICYgMHhmZjtcblx0YltpZHggKyA2XSA9ICgoZSAmIDB4MGYpIDw8IDQpIHwgKG0gJiAweGYpO1xuXHRiW2lkeCArIDddID0gKGUgPj4gNCkgfCBicztcbn1cblxudmFyIF9fX3RvQnVmZmVyID0gZnVuY3Rpb24oYnVmcy8qOkFycmF5PEFycmF5PFJhd0J5dGVzPiA+Ki8pLyo6UmF3Qnl0ZXMqLyB7IHZhciB4PVtdLHc9MTAyNDA7IGZvcih2YXIgaT0wO2k8YnVmc1swXS5sZW5ndGg7KytpKSBpZihidWZzWzBdW2ldKSBmb3IodmFyIGo9MCxMPWJ1ZnNbMF1baV0ubGVuZ3RoO2o8TDtqKz13KSB4LnB1c2guYXBwbHkoeCwgYnVmc1swXVtpXS5zbGljZShqLGordykpOyByZXR1cm4geDsgfTtcbnZhciBfX3RvQnVmZmVyID0gaGFzX2J1ZiA/IGZ1bmN0aW9uKGJ1ZnMpIHsgcmV0dXJuIChidWZzWzBdLmxlbmd0aCA+IDAgJiYgQnVmZmVyLmlzQnVmZmVyKGJ1ZnNbMF1bMF0pKSA/IEJ1ZmZlci5jb25jYXQoYnVmc1swXS5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKHgpID8geCA6IEJ1ZmZlcl9mcm9tKHgpOyB9KSkgOiBfX190b0J1ZmZlcihidWZzKTt9IDogX19fdG9CdWZmZXI7XG5cbnZhciBfX191dGYxNmxlID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLHMvKjpudW1iZXIqLyxlLyo6bnVtYmVyKi8pLyo6c3RyaW5nKi8geyB2YXIgc3MvKjpBcnJheTxzdHJpbmc+Ki89W107IGZvcih2YXIgaT1zOyBpPGU7IGkrPTIpIHNzLnB1c2goU3RyaW5nLmZyb21DaGFyQ29kZShfX3JlYWRVSW50MTZMRShiLGkpKSk7IHJldHVybiBzcy5qb2luKFwiXCIpLnJlcGxhY2UoY2hyMCwnJyk7IH07XG52YXIgX191dGYxNmxlID0gaGFzX2J1ZiA/IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLyxzLyo6bnVtYmVyKi8sZS8qOm51bWJlciovKS8qOnN0cmluZyovIHsgaWYoIUJ1ZmZlci5pc0J1ZmZlcihiKS8qOjogfHwgIShiIGluc3RhbmNlb2YgQnVmZmVyKSovKSByZXR1cm4gX19fdXRmMTZsZShiLHMsZSk7IHJldHVybiBiLnRvU3RyaW5nKCd1dGYxNmxlJyxzLGUpLnJlcGxhY2UoY2hyMCwnJykvKi5yZXBsYWNlKGNocjEsJyEnKSovOyB9IDogX19fdXRmMTZsZTtcblxudmFyIF9fX2hleGxpZnkgPSBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8scy8qOm51bWJlciovLGwvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7IHZhciBzcy8qOkFycmF5PHN0cmluZz4qLz1bXTsgZm9yKHZhciBpPXM7IGk8cytsOyArK2kpIHNzLnB1c2goKFwiMFwiICsgYltpXS50b1N0cmluZygxNikpLnNsaWNlKC0yKSk7IHJldHVybiBzcy5qb2luKFwiXCIpOyB9O1xudmFyIF9faGV4bGlmeSA9IGhhc19idWYgPyBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8scy8qOm51bWJlciovLGwvKjpudW1iZXIqLykvKjpzdHJpbmcqLyB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYikvKjo6ICYmIGIgaW5zdGFuY2VvZiBCdWZmZXIqLyA/IGIudG9TdHJpbmcoJ2hleCcscyxzK2wpIDogX19faGV4bGlmeShiLHMsbCk7IH0gOiBfX19oZXhsaWZ5O1xuXG52YXIgX19fdXRmOCA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLyxzLyo6bnVtYmVyKi8sZS8qOm51bWJlciovKSB7IHZhciBzcz1bXTsgZm9yKHZhciBpPXM7IGk8ZTsgaSsrKSBzcy5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUoX19yZWFkVUludDgoYixpKSkpOyByZXR1cm4gc3Muam9pbihcIlwiKTsgfTtcbnZhciBfX3V0ZjggPSBoYXNfYnVmID8gZnVuY3Rpb24gdXRmOF9iKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgcy8qOm51bWJlciovLCBlLyo6bnVtYmVyKi8pIHsgcmV0dXJuIChCdWZmZXIuaXNCdWZmZXIoYikvKjo6ICYmIChiIGluc3RhbmNlb2YgQnVmZmVyKSovKSA/IGIudG9TdHJpbmcoJ3V0ZjgnLHMsZSkgOiBfX191dGY4KGIscyxlKTsgfSA6IF9fX3V0Zjg7XG5cbnZhciBfX19scHN0ciA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLyxpLyo6bnVtYmVyKi8pIHsgdmFyIGxlbiA9IF9fcmVhZFVJbnQzMkxFKGIsaSk7IHJldHVybiBsZW4gPiAwID8gX191dGY4KGIsIGkrNCxpKzQrbGVuLTEpIDogXCJcIjt9O1xudmFyIF9fbHBzdHIgPSBfX19scHN0cjtcblxudmFyIF9fX2Nwc3RyID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLGkvKjpudW1iZXIqLykgeyB2YXIgbGVuID0gX19yZWFkVUludDMyTEUoYixpKTsgcmV0dXJuIGxlbiA+IDAgPyBfX3V0ZjgoYiwgaSs0LGkrNCtsZW4tMSkgOiBcIlwiO307XG52YXIgX19jcHN0ciA9IF9fX2Nwc3RyO1xuXG52YXIgX19fbHB3c3RyID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLGkvKjpudW1iZXIqLykgeyB2YXIgbGVuID0gMipfX3JlYWRVSW50MzJMRShiLGkpOyByZXR1cm4gbGVuID4gMCA/IF9fdXRmOChiLCBpKzQsaSs0K2xlbi0xKSA6IFwiXCI7fTtcbnZhciBfX2xwd3N0ciA9IF9fX2xwd3N0cjtcblxudmFyIF9fX2xwcDQgPSBmdW5jdGlvbiBscHA0XyhiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8saS8qOm51bWJlciovKSB7IHZhciBsZW4gPSBfX3JlYWRVSW50MzJMRShiLGkpOyByZXR1cm4gbGVuID4gMCA/IF9fdXRmMTZsZShiLCBpKzQsaSs0K2xlbikgOiBcIlwiO307XG52YXIgX19scHA0ID0gX19fbHBwNDtcblxudmFyIF9fXzhscHA0ID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLGkvKjpudW1iZXIqLykgeyB2YXIgbGVuID0gX19yZWFkVUludDMyTEUoYixpKTsgcmV0dXJuIGxlbiA+IDAgPyBfX3V0ZjgoYiwgaSs0LGkrNCtsZW4pIDogXCJcIjt9O1xudmFyIF9fOGxwcDQgPSBfX184bHBwNDtcblxudmFyIF9fX2RvdWJsZSA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaWR4Lyo6bnVtYmVyKi8pIHsgcmV0dXJuIHJlYWRfZG91YmxlX2xlKGIsIGlkeCk7fTtcbnZhciBfX2RvdWJsZSA9IF9fX2RvdWJsZTtcblxudmFyIGlzX2J1ZiA9IGZ1bmN0aW9uIGlzX2J1Zl9hKGEpIHsgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSkgfHwgKHR5cGVvZiBVaW50OEFycmF5ICE9PSBcInVuZGVmaW5lZFwiICYmIGEgaW5zdGFuY2VvZiBVaW50OEFycmF5KTsgfTtcblxuaWYoaGFzX2J1Zi8qOjogJiYgdHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcqLykge1xuXHRfX2xwc3RyID0gZnVuY3Rpb24gbHBzdHJfYihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8sIGkvKjpudW1iZXIqLykgeyBpZighQnVmZmVyLmlzQnVmZmVyKGIpLyo6OiB8fCAhKGIgaW5zdGFuY2VvZiBCdWZmZXIpKi8pIHJldHVybiBfX19scHN0cihiLCBpKTsgdmFyIGxlbiA9IGIucmVhZFVJbnQzMkxFKGkpOyByZXR1cm4gbGVuID4gMCA/IGIudG9TdHJpbmcoJ3V0ZjgnLGkrNCxpKzQrbGVuLTEpIDogXCJcIjt9O1xuXHRfX2Nwc3RyID0gZnVuY3Rpb24gY3BzdHJfYihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8sIGkvKjpudW1iZXIqLykgeyBpZighQnVmZmVyLmlzQnVmZmVyKGIpLyo6OiB8fCAhKGIgaW5zdGFuY2VvZiBCdWZmZXIpKi8pIHJldHVybiBfX19jcHN0cihiLCBpKTsgdmFyIGxlbiA9IGIucmVhZFVJbnQzMkxFKGkpOyByZXR1cm4gbGVuID4gMCA/IGIudG9TdHJpbmcoJ3V0ZjgnLGkrNCxpKzQrbGVuLTEpIDogXCJcIjt9O1xuXHRfX2xwd3N0ciA9IGZ1bmN0aW9uIGxwd3N0cl9iKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaS8qOm51bWJlciovKSB7IGlmKCFCdWZmZXIuaXNCdWZmZXIoYikvKjo6IHx8ICEoYiBpbnN0YW5jZW9mIEJ1ZmZlcikqLykgcmV0dXJuIF9fX2xwd3N0cihiLCBpKTsgdmFyIGxlbiA9IDIqYi5yZWFkVUludDMyTEUoaSk7IHJldHVybiBiLnRvU3RyaW5nKCd1dGYxNmxlJyxpKzQsaSs0K2xlbi0xKTt9O1xuXHRfX2xwcDQgPSBmdW5jdGlvbiBscHA0X2IoYi8qOlJhd0J5dGVzfENGQmxvYiovLCBpLyo6bnVtYmVyKi8pIHsgaWYoIUJ1ZmZlci5pc0J1ZmZlcihiKS8qOjogfHwgIShiIGluc3RhbmNlb2YgQnVmZmVyKSovKSByZXR1cm4gX19fbHBwNChiLCBpKTsgdmFyIGxlbiA9IGIucmVhZFVJbnQzMkxFKGkpOyByZXR1cm4gYi50b1N0cmluZygndXRmMTZsZScsaSs0LGkrNCtsZW4pO307XG5cdF9fOGxwcDQgPSBmdW5jdGlvbiBscHA0XzhiKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaS8qOm51bWJlciovKSB7IGlmKCFCdWZmZXIuaXNCdWZmZXIoYikvKjo6IHx8ICEoYiBpbnN0YW5jZW9mIEJ1ZmZlcikqLykgcmV0dXJuIF9fXzhscHA0KGIsIGkpOyB2YXIgbGVuID0gYi5yZWFkVUludDMyTEUoaSk7IHJldHVybiBiLnRvU3RyaW5nKCd1dGY4JyxpKzQsaSs0K2xlbik7fTtcblx0X19kb3VibGUgPSBmdW5jdGlvbiBkb3VibGVfKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaS8qOm51bWJlciovKSB7IGlmKEJ1ZmZlci5pc0J1ZmZlcihiKS8qOjomJiBiIGluc3RhbmNlb2YgQnVmZmVyKi8pIHJldHVybiBiLnJlYWREb3VibGVMRShpKTsgcmV0dXJuIF9fX2RvdWJsZShiLGkpOyB9O1xuXHRpc19idWYgPSBmdW5jdGlvbiBpc19idWZfYihhKSB7IHJldHVybiBCdWZmZXIuaXNCdWZmZXIoYSkgfHwgQXJyYXkuaXNBcnJheShhKSB8fCAodHlwZW9mIFVpbnQ4QXJyYXkgIT09IFwidW5kZWZpbmVkXCIgJiYgYSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpOyB9O1xufVxuXG4vKiBmcm9tIGpzLXhscyAqL1xuZnVuY3Rpb24gY3Bkb2l0KCkge1xuXHRfX3V0ZjE2bGUgPSBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8scy8qOm51bWJlciovLGUvKjpudW1iZXIqLykgeyByZXR1cm4gJGNwdGFibGUudXRpbHMuZGVjb2RlKDEyMDAsIGIuc2xpY2UocyxlKSkucmVwbGFjZShjaHIwLCAnJyk7IH07XG5cdF9fdXRmOCA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLyxzLyo6bnVtYmVyKi8sZS8qOm51bWJlciovKSB7IHJldHVybiAkY3B0YWJsZS51dGlscy5kZWNvZGUoNjUwMDEsIGIuc2xpY2UocyxlKSk7IH07XG5cdF9fbHBzdHIgPSBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8saS8qOm51bWJlciovKSB7IHZhciBsZW4gPSBfX3JlYWRVSW50MzJMRShiLGkpOyByZXR1cm4gbGVuID4gMCA/ICRjcHRhYmxlLnV0aWxzLmRlY29kZShjdXJyZW50X2Fuc2ksIGIuc2xpY2UoaSs0LCBpKzQrbGVuLTEpKSA6IFwiXCI7fTtcblx0X19jcHN0ciA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLyxpLyo6bnVtYmVyKi8pIHsgdmFyIGxlbiA9IF9fcmVhZFVJbnQzMkxFKGIsaSk7IHJldHVybiBsZW4gPiAwID8gJGNwdGFibGUudXRpbHMuZGVjb2RlKGN1cnJlbnRfY29kZXBhZ2UsIGIuc2xpY2UoaSs0LCBpKzQrbGVuLTEpKSA6IFwiXCI7fTtcblx0X19scHdzdHIgPSBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8saS8qOm51bWJlciovKSB7IHZhciBsZW4gPSAyKl9fcmVhZFVJbnQzMkxFKGIsaSk7IHJldHVybiBsZW4gPiAwID8gJGNwdGFibGUudXRpbHMuZGVjb2RlKDEyMDAsIGIuc2xpY2UoaSs0LGkrNCtsZW4tMSkpIDogXCJcIjt9O1xuXHRfX2xwcDQgPSBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8saS8qOm51bWJlciovKSB7IHZhciBsZW4gPSBfX3JlYWRVSW50MzJMRShiLGkpOyByZXR1cm4gbGVuID4gMCA/ICRjcHRhYmxlLnV0aWxzLmRlY29kZSgxMjAwLCBiLnNsaWNlKGkrNCxpKzQrbGVuKSkgOiBcIlwiO307XG5cdF9fOGxwcDQgPSBmdW5jdGlvbihiLyo6UmF3Qnl0ZXN8Q0ZCbG9iKi8saS8qOm51bWJlciovKSB7IHZhciBsZW4gPSBfX3JlYWRVSW50MzJMRShiLGkpOyByZXR1cm4gbGVuID4gMCA/ICRjcHRhYmxlLnV0aWxzLmRlY29kZSg2NTAwMSwgYi5zbGljZShpKzQsaSs0K2xlbikpIDogXCJcIjt9O1xufVxuaWYodHlwZW9mICRjcHRhYmxlICE9PSAndW5kZWZpbmVkJykgY3Bkb2l0KCk7XG5cbnZhciBfX3JlYWRVSW50OCA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaWR4Lyo6bnVtYmVyKi8pLyo6bnVtYmVyKi8geyByZXR1cm4gYltpZHhdOyB9O1xudmFyIF9fcmVhZFVJbnQxNkxFID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLCBpZHgvKjpudW1iZXIqLykvKjpudW1iZXIqLyB7IHJldHVybiAoYltpZHgrMV0qKDE8PDgpKStiW2lkeF07IH07XG52YXIgX19yZWFkSW50MTZMRSA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaWR4Lyo6bnVtYmVyKi8pLyo6bnVtYmVyKi8geyB2YXIgdSA9IChiW2lkeCsxXSooMTw8OCkpK2JbaWR4XTsgcmV0dXJuICh1IDwgMHg4MDAwKSA/IHUgOiAoKDB4ZmZmZiAtIHUgKyAxKSAqIC0xKTsgfTtcbnZhciBfX3JlYWRVSW50MzJMRSA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgaWR4Lyo6bnVtYmVyKi8pLyo6bnVtYmVyKi8geyByZXR1cm4gYltpZHgrM10qKDE8PDI0KSsoYltpZHgrMl08PDE2KSsoYltpZHgrMV08PDgpK2JbaWR4XTsgfTtcbnZhciBfX3JlYWRJbnQzMkxFID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLCBpZHgvKjpudW1iZXIqLykvKjpudW1iZXIqLyB7IHJldHVybiAoYltpZHgrM108PDI0KXwoYltpZHgrMl08PDE2KXwoYltpZHgrMV08PDgpfGJbaWR4XTsgfTtcbnZhciBfX3JlYWRJbnQzMkJFID0gZnVuY3Rpb24oYi8qOlJhd0J5dGVzfENGQmxvYiovLCBpZHgvKjpudW1iZXIqLykvKjpudW1iZXIqLyB7IHJldHVybiAoYltpZHhdPDwyNCl8KGJbaWR4KzFdPDwxNil8KGJbaWR4KzJdPDw4KXxiW2lkeCszXTsgfTtcblxuZnVuY3Rpb24gUmVhZFNoaWZ0KHNpemUvKjpudW1iZXIqLywgdC8qOj9zdHJpbmcqLykvKjpudW1iZXJ8c3RyaW5nKi8ge1xuXHR2YXIgbz1cIlwiLCBvSS8qOjogOm51bWJlciA9IDAqLywgb1IsIG9vPVtdLCB3LCB2diwgaSwgbG9jO1xuXHRzd2l0Y2godCkge1xuXHRcdGNhc2UgJ2RiY3MnOlxuXHRcdFx0bG9jID0gdGhpcy5sO1xuXHRcdFx0aWYoaGFzX2J1ZiAmJiBCdWZmZXIuaXNCdWZmZXIodGhpcykpIG8gPSB0aGlzLnNsaWNlKHRoaXMubCwgdGhpcy5sKzIqc2l6ZSkudG9TdHJpbmcoXCJ1dGYxNmxlXCIpO1xuXHRcdFx0ZWxzZSBmb3IoaSA9IDA7IGkgPCBzaXplOyArK2kpIHsgbys9U3RyaW5nLmZyb21DaGFyQ29kZShfX3JlYWRVSW50MTZMRSh0aGlzLCBsb2MpKTsgbG9jKz0yOyB9XG5cdFx0XHRzaXplICo9IDI7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ3V0ZjgnOiBvID0gX191dGY4KHRoaXMsIHRoaXMubCwgdGhpcy5sICsgc2l6ZSk7IGJyZWFrO1xuXHRcdGNhc2UgJ3V0ZjE2bGUnOiBzaXplICo9IDI7IG8gPSBfX3V0ZjE2bGUodGhpcywgdGhpcy5sLCB0aGlzLmwgKyBzaXplKTsgYnJlYWs7XG5cblx0XHRjYXNlICd3c3RyJzpcblx0XHRcdGlmKHR5cGVvZiAkY3B0YWJsZSAhPT0gJ3VuZGVmaW5lZCcpIG8gPSAkY3B0YWJsZS51dGlscy5kZWNvZGUoY3VycmVudF9jb2RlcGFnZSwgdGhpcy5zbGljZSh0aGlzLmwsIHRoaXMubCsyKnNpemUpKTtcblx0XHRcdGVsc2UgcmV0dXJuIFJlYWRTaGlmdC5jYWxsKHRoaXMsIHNpemUsICdkYmNzJyk7XG5cdFx0XHRzaXplID0gMiAqIHNpemU7IGJyZWFrO1xuXG5cdFx0LyogW01TLU9MRURTXSAyLjEuNCBMZW5ndGhQcmVmaXhlZEFuc2lTdHJpbmcgKi9cblx0XHRjYXNlICdscHN0ci1hbnNpJzogbyA9IF9fbHBzdHIodGhpcywgdGhpcy5sKTsgc2l6ZSA9IDQgKyBfX3JlYWRVSW50MzJMRSh0aGlzLCB0aGlzLmwpOyBicmVhaztcblx0XHRjYXNlICdscHN0ci1jcCc6IG8gPSBfX2Nwc3RyKHRoaXMsIHRoaXMubCk7IHNpemUgPSA0ICsgX19yZWFkVUludDMyTEUodGhpcywgdGhpcy5sKTsgYnJlYWs7XG5cdFx0LyogW01TLU9MRURTXSAyLjEuNSBMZW5ndGhQcmVmaXhlZFVuaWNvZGVTdHJpbmcgKi9cblx0XHRjYXNlICdscHdzdHInOiBvID0gX19scHdzdHIodGhpcywgdGhpcy5sKTsgc2l6ZSA9IDQgKyAyICogX19yZWFkVUludDMyTEUodGhpcywgdGhpcy5sKTsgYnJlYWs7XG5cdFx0LyogW01TLU9GRkNSWVBUT10gMi4xLjIgTGVuZ3RoLVByZWZpeGVkIFBhZGRlZCBVbmljb2RlIFN0cmluZyAoVU5JQ09ERS1MUC1QNCkgKi9cblx0XHRjYXNlICdscHA0Jzogc2l6ZSA9IDQgKyAgX19yZWFkVUludDMyTEUodGhpcywgdGhpcy5sKTsgbyA9IF9fbHBwNCh0aGlzLCB0aGlzLmwpOyBpZihzaXplICYgMHgwMikgc2l6ZSArPSAyOyBicmVhaztcblx0XHQvKiBbTVMtT0ZGQ1JZUFRPXSAyLjEuMyBMZW5ndGgtUHJlZml4ZWQgVVRGLTggU3RyaW5nIChVVEYtOC1MUC1QNCkgKi9cblx0XHRjYXNlICc4bHBwNCc6IHNpemUgPSA0ICsgIF9fcmVhZFVJbnQzMkxFKHRoaXMsIHRoaXMubCk7IG8gPSBfXzhscHA0KHRoaXMsIHRoaXMubCk7IGlmKHNpemUgJiAweDAzKSBzaXplICs9IDQgLSAoc2l6ZSAmIDB4MDMpOyBicmVhaztcblxuXHRcdGNhc2UgJ2NzdHInOiBzaXplID0gMDsgbyA9IFwiXCI7XG5cdFx0XHR3aGlsZSgodz1fX3JlYWRVSW50OCh0aGlzLCB0aGlzLmwgKyBzaXplKyspKSE9PTApIG9vLnB1c2goX2dldGNoYXIodykpO1xuXHRcdFx0byA9IG9vLmpvaW4oXCJcIik7IGJyZWFrO1xuXHRcdGNhc2UgJ193c3RyJzogc2l6ZSA9IDA7IG8gPSBcIlwiO1xuXHRcdFx0d2hpbGUoKHc9X19yZWFkVUludDE2TEUodGhpcyx0aGlzLmwgK3NpemUpKSE9PTApe29vLnB1c2goX2dldGNoYXIodykpO3NpemUrPTI7fVxuXHRcdFx0c2l6ZSs9MjsgbyA9IG9vLmpvaW4oXCJcIik7IGJyZWFrO1xuXG5cdFx0Lyogc2JjcyBhbmQgZGJjcyBzdXBwb3J0IGNvbnRpbnVlIHJlY29yZHMgaW4gdGhlIFNTVCB3YXkgVE9ETyBjb2RlcGFnZXMgKi9cblx0XHRjYXNlICdkYmNzLWNvbnQnOiBvID0gXCJcIjsgbG9jID0gdGhpcy5sO1xuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XG5cdFx0XHRcdGlmKHRoaXMubGVucyAmJiB0aGlzLmxlbnMuaW5kZXhPZihsb2MpICE9PSAtMSkge1xuXHRcdFx0XHRcdHcgPSBfX3JlYWRVSW50OCh0aGlzLCBsb2MpO1xuXHRcdFx0XHRcdHRoaXMubCA9IGxvYyArIDE7XG5cdFx0XHRcdFx0dnYgPSBSZWFkU2hpZnQuY2FsbCh0aGlzLCBzaXplLWksIHcgPyAnZGJjcy1jb250JyA6ICdzYmNzLWNvbnQnKTtcblx0XHRcdFx0XHRyZXR1cm4gb28uam9pbihcIlwiKSArIHZ2O1xuXHRcdFx0XHR9XG5cdFx0XHRcdG9vLnB1c2goX2dldGNoYXIoX19yZWFkVUludDE2TEUodGhpcywgbG9jKSkpO1xuXHRcdFx0XHRsb2MrPTI7XG5cdFx0XHR9IG8gPSBvby5qb2luKFwiXCIpOyBzaXplICo9IDI7IGJyZWFrO1xuXG5cdFx0Y2FzZSAnY3BzdHInOlxuXHRcdFx0aWYodHlwZW9mICRjcHRhYmxlICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRvID0gJGNwdGFibGUudXRpbHMuZGVjb2RlKGN1cnJlbnRfY29kZXBhZ2UsIHRoaXMuc2xpY2UodGhpcy5sLCB0aGlzLmwgKyBzaXplKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRjYXNlICdzYmNzLWNvbnQnOiBvID0gXCJcIjsgbG9jID0gdGhpcy5sO1xuXHRcdFx0Zm9yKGkgPSAwOyBpICE9IHNpemU7ICsraSkge1xuXHRcdFx0XHRpZih0aGlzLmxlbnMgJiYgdGhpcy5sZW5zLmluZGV4T2YobG9jKSAhPT0gLTEpIHtcblx0XHRcdFx0XHR3ID0gX19yZWFkVUludDgodGhpcywgbG9jKTtcblx0XHRcdFx0XHR0aGlzLmwgPSBsb2MgKyAxO1xuXHRcdFx0XHRcdHZ2ID0gUmVhZFNoaWZ0LmNhbGwodGhpcywgc2l6ZS1pLCB3ID8gJ2RiY3MtY29udCcgOiAnc2Jjcy1jb250Jyk7XG5cdFx0XHRcdFx0cmV0dXJuIG9vLmpvaW4oXCJcIikgKyB2djtcblx0XHRcdFx0fVxuXHRcdFx0XHRvby5wdXNoKF9nZXRjaGFyKF9fcmVhZFVJbnQ4KHRoaXMsIGxvYykpKTtcblx0XHRcdFx0bG9jKz0xO1xuXHRcdFx0fSBvID0gb28uam9pbihcIlwiKTsgYnJlYWs7XG5cblx0XHRkZWZhdWx0OlxuXHRzd2l0Y2goc2l6ZSkge1xuXHRcdGNhc2UgMTogb0kgPSBfX3JlYWRVSW50OCh0aGlzLCB0aGlzLmwpOyB0aGlzLmwrKzsgcmV0dXJuIG9JO1xuXHRcdGNhc2UgMjogb0kgPSAodCA9PT0gJ2knID8gX19yZWFkSW50MTZMRSA6IF9fcmVhZFVJbnQxNkxFKSh0aGlzLCB0aGlzLmwpOyB0aGlzLmwgKz0gMjsgcmV0dXJuIG9JO1xuXHRcdGNhc2UgNDogY2FzZSAtNDpcblx0XHRcdGlmKHQgPT09ICdpJyB8fCAoKHRoaXNbdGhpcy5sKzNdICYgMHg4MCk9PT0wKSkgeyBvSSA9ICgoc2l6ZSA+IDApID8gX19yZWFkSW50MzJMRSA6IF9fcmVhZEludDMyQkUpKHRoaXMsIHRoaXMubCk7IHRoaXMubCArPSA0OyByZXR1cm4gb0k7IH1cblx0XHRcdGVsc2UgeyBvUiA9IF9fcmVhZFVJbnQzMkxFKHRoaXMsIHRoaXMubCk7IHRoaXMubCArPSA0OyB9IHJldHVybiBvUjtcblx0XHRjYXNlIDg6IGNhc2UgLTg6XG5cdFx0XHRpZih0ID09PSAnZicpIHtcblx0XHRcdFx0aWYoc2l6ZSA9PSA4KSBvUiA9IF9fZG91YmxlKHRoaXMsIHRoaXMubCk7XG5cdFx0XHRcdGVsc2Ugb1IgPSBfX2RvdWJsZShbdGhpc1t0aGlzLmwrN10sdGhpc1t0aGlzLmwrNl0sdGhpc1t0aGlzLmwrNV0sdGhpc1t0aGlzLmwrNF0sdGhpc1t0aGlzLmwrM10sdGhpc1t0aGlzLmwrMl0sdGhpc1t0aGlzLmwrMV0sdGhpc1t0aGlzLmwrMF1dLCAwKTtcblx0XHRcdFx0dGhpcy5sICs9IDg7IHJldHVybiBvUjtcblx0XHRcdH0gZWxzZSBzaXplID0gODtcblx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0Y2FzZSAxNjogbyA9IF9faGV4bGlmeSh0aGlzLCB0aGlzLmwsIHNpemUpOyBicmVhaztcblx0fX1cblx0dGhpcy5sKz1zaXplOyByZXR1cm4gbztcbn1cblxudmFyIF9fd3JpdGVVSW50MzJMRSA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgdmFsLyo6bnVtYmVyKi8sIGlkeC8qOm51bWJlciovKS8qOnZvaWQqLyB7IGJbaWR4XSA9ICh2YWwgJiAweEZGKTsgYltpZHgrMV0gPSAoKHZhbCA+Pj4gOCkgJiAweEZGKTsgYltpZHgrMl0gPSAoKHZhbCA+Pj4gMTYpICYgMHhGRik7IGJbaWR4KzNdID0gKCh2YWwgPj4+IDI0KSAmIDB4RkYpOyB9O1xudmFyIF9fd3JpdGVJbnQzMkxFICA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgdmFsLyo6bnVtYmVyKi8sIGlkeC8qOm51bWJlciovKS8qOnZvaWQqLyB7IGJbaWR4XSA9ICh2YWwgJiAweEZGKTsgYltpZHgrMV0gPSAoKHZhbCA+PiA4KSAmIDB4RkYpOyBiW2lkeCsyXSA9ICgodmFsID4+IDE2KSAmIDB4RkYpOyBiW2lkeCszXSA9ICgodmFsID4+IDI0KSAmIDB4RkYpOyB9O1xudmFyIF9fd3JpdGVVSW50MTZMRSA9IGZ1bmN0aW9uKGIvKjpSYXdCeXRlc3xDRkJsb2IqLywgdmFsLyo6bnVtYmVyKi8sIGlkeC8qOm51bWJlciovKS8qOnZvaWQqLyB7IGJbaWR4XSA9ICh2YWwgJiAweEZGKTsgYltpZHgrMV0gPSAoKHZhbCA+Pj4gOCkgJiAweEZGKTsgfTtcblxuZnVuY3Rpb24gV3JpdGVTaGlmdCh0Lyo6bnVtYmVyKi8sIHZhbC8qOnN0cmluZ3xudW1iZXIqLywgZi8qOj9zdHJpbmcqLykvKjphbnkqLyB7XG5cdHZhciBzaXplID0gMCwgaSA9IDA7XG5cdGlmKGYgPT09ICdkYmNzJykge1xuXHRcdC8qOjogaWYodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdGZvcihpID0gMDsgaSAhPSB2YWwubGVuZ3RoOyArK2kpIF9fd3JpdGVVSW50MTZMRSh0aGlzLCB2YWwuY2hhckNvZGVBdChpKSwgdGhpcy5sICsgMiAqIGkpO1xuXHRcdHNpemUgPSAyICogdmFsLmxlbmd0aDtcblx0fSBlbHNlIGlmKGYgPT09ICdzYmNzJykge1xuXHRcdGlmKHR5cGVvZiAkY3B0YWJsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY3VycmVudF9hbnNpID09IDg3NCkge1xuXHRcdFx0LyogVE9ETzogdXNlIHRhYmxlcyBkaXJlY3RseSwgZG9uJ3QgZW5jb2RlICovXG5cdFx0XHQvKjo6IGlmKHR5cGVvZiB2YWwgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdFx0Zm9yKGkgPSAwOyBpICE9IHZhbC5sZW5ndGg7ICsraSkge1xuXHRcdFx0XHR2YXIgY3BwYXlsb2FkID0gJGNwdGFibGUudXRpbHMuZW5jb2RlKGN1cnJlbnRfYW5zaSwgdmFsLmNoYXJBdChpKSk7XG5cdFx0XHRcdHRoaXNbdGhpcy5sICsgaV0gPSBjcHBheWxvYWRbMF07XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8qOjogaWYodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdFx0dmFsID0gdmFsLnJlcGxhY2UoL1teXFx4MDAtXFx4N0ZdL2csIFwiX1wiKTtcblx0XHRcdC8qOjogaWYodHlwZW9mIHZhbCAhPT0gJ3N0cmluZycpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdFx0Zm9yKGkgPSAwOyBpICE9IHZhbC5sZW5ndGg7ICsraSkgdGhpc1t0aGlzLmwgKyBpXSA9ICh2YWwuY2hhckNvZGVBdChpKSAmIDB4RkYpO1xuXHRcdH1cblx0XHRzaXplID0gdmFsLmxlbmd0aDtcblx0fSBlbHNlIGlmKGYgPT09ICdoZXgnKSB7XG5cdFx0Zm9yKDsgaSA8IHQ7ICsraSkge1xuXHRcdFx0Lyo6OiBpZih0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0XHRcdHRoaXNbdGhpcy5sKytdID0gKHBhcnNlSW50KHZhbC5zbGljZSgyKmksIDIqaSsyKSwgMTYpfHwwKTtcblx0XHR9IHJldHVybiB0aGlzO1xuXHR9IGVsc2UgaWYoZiA9PT0gJ3V0ZjE2bGUnKSB7XG5cdFx0XHQvKjo6IGlmKHR5cGVvZiB2YWwgIT09IFwic3RyaW5nXCIpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHRcdFx0dmFyIGVuZC8qOm51bWJlciovID0gTWF0aC5taW4odGhpcy5sICsgdCwgdGhpcy5sZW5ndGgpO1xuXHRcdFx0Zm9yKGkgPSAwOyBpIDwgTWF0aC5taW4odmFsLmxlbmd0aCwgdCk7ICsraSkge1xuXHRcdFx0XHR2YXIgY2MgPSB2YWwuY2hhckNvZGVBdChpKTtcblx0XHRcdFx0dGhpc1t0aGlzLmwrK10gPSAoY2MgJiAweGZmKTtcblx0XHRcdFx0dGhpc1t0aGlzLmwrK10gPSAoY2MgPj4gOCk7XG5cdFx0XHR9XG5cdFx0XHR3aGlsZSh0aGlzLmwgPCBlbmQpIHRoaXNbdGhpcy5sKytdID0gMDtcblx0XHRcdHJldHVybiB0aGlzO1xuXHR9IGVsc2UgLyo6OiBpZih0eXBlb2YgdmFsID09PSAnbnVtYmVyJykgKi8gc3dpdGNoKHQpIHtcblx0XHRjYXNlICAxOiBzaXplID0gMTsgdGhpc1t0aGlzLmxdID0gdmFsJjB4RkY7IGJyZWFrO1xuXHRcdGNhc2UgIDI6IHNpemUgPSAyOyB0aGlzW3RoaXMubF0gPSB2YWwmMHhGRjsgdmFsID4+Pj0gODsgdGhpc1t0aGlzLmwrMV0gPSB2YWwmMHhGRjsgYnJlYWs7XG5cdFx0Y2FzZSAgMzogc2l6ZSA9IDM7IHRoaXNbdGhpcy5sXSA9IHZhbCYweEZGOyB2YWwgPj4+PSA4OyB0aGlzW3RoaXMubCsxXSA9IHZhbCYweEZGOyB2YWwgPj4+PSA4OyB0aGlzW3RoaXMubCsyXSA9IHZhbCYweEZGOyBicmVhaztcblx0XHRjYXNlICA0OiBzaXplID0gNDsgX193cml0ZVVJbnQzMkxFKHRoaXMsIHZhbCwgdGhpcy5sKTsgYnJlYWs7XG5cdFx0Y2FzZSAgODogc2l6ZSA9IDg7IGlmKGYgPT09ICdmJykgeyB3cml0ZV9kb3VibGVfbGUodGhpcywgdmFsLCB0aGlzLmwpOyBicmVhazsgfVxuXHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRjYXNlIDE2OiBicmVhaztcblx0XHRjYXNlIC00OiBzaXplID0gNDsgX193cml0ZUludDMyTEUodGhpcywgdmFsLCB0aGlzLmwpOyBicmVhaztcblx0fVxuXHR0aGlzLmwgKz0gc2l6ZTsgcmV0dXJuIHRoaXM7XG59XG5cbmZ1bmN0aW9uIENoZWNrRmllbGQoaGV4c3RyLyo6c3RyaW5nKi8sIGZsZC8qOnN0cmluZyovKS8qOnZvaWQqLyB7XG5cdHZhciBtID0gX19oZXhsaWZ5KHRoaXMsdGhpcy5sLGhleHN0ci5sZW5ndGg+PjEpO1xuXHRpZihtICE9PSBoZXhzdHIpIHRocm93IG5ldyBFcnJvcihmbGQgKyAnRXhwZWN0ZWQgJyArIGhleHN0ciArICcgc2F3ICcgKyBtKTtcblx0dGhpcy5sICs9IGhleHN0ci5sZW5ndGg+PjE7XG59XG5cbmZ1bmN0aW9uIHByZXBfYmxvYihibG9iLCBwb3MvKjpudW1iZXIqLykvKjp2b2lkKi8ge1xuXHRibG9iLmwgPSBwb3M7XG5cdGJsb2IucmVhZF9zaGlmdCA9IC8qOjooKi9SZWFkU2hpZnQvKjo6IDphbnkpKi87XG5cdGJsb2IuY2hrID0gQ2hlY2tGaWVsZDtcblx0YmxvYi53cml0ZV9zaGlmdCA9IFdyaXRlU2hpZnQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlbm9vcChibG9iLCBsZW5ndGgvKjo6IDpudW1iZXIsIG9wdHM/OmFueSAqLykgeyBibG9iLmwgKz0gbGVuZ3RoOyB9XG5cbmZ1bmN0aW9uIG5ld19idWYoc3ovKjpudW1iZXIqLykvKjpCbG9jayovIHtcblx0dmFyIG8gPSBuZXdfcmF3X2J1Zihzeik7XG5cdHByZXBfYmxvYihvLCAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjEuNCBSZWNvcmQgKi9cbmZ1bmN0aW9uIHJlY29yZGhvcHBlcihkYXRhLCBjYi8qOlJlY29yZEhvcHBlckNCKi8sIG9wdHMvKjo/YW55Ki8pIHtcblx0aWYoIWRhdGEpIHJldHVybjtcblx0dmFyIHRtcGJ5dGUsIGNudGJ5dGUsIGxlbmd0aDtcblx0cHJlcF9ibG9iKGRhdGEsIGRhdGEubCB8fCAwKTtcblx0dmFyIEwgPSBkYXRhLmxlbmd0aCwgUlQgPSAwLCB0Z3QgPSAwO1xuXHR3aGlsZShkYXRhLmwgPCBMKSB7XG5cdFx0UlQgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cdFx0aWYoUlQgJiAweDgwKSBSVCA9IChSVCAmIDB4N0YpICsgKChkYXRhLnJlYWRfc2hpZnQoMSkgJiAweDdGKTw8Nyk7XG5cdFx0dmFyIFIgPSBYTFNCUmVjb3JkRW51bVtSVF0gfHwgWExTQlJlY29yZEVudW1bMHhGRkZGXTtcblx0XHR0bXBieXRlID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHRcdGxlbmd0aCA9IHRtcGJ5dGUgJiAweDdGO1xuXHRcdGZvcihjbnRieXRlID0gMTsgY250Ynl0ZSA8NCAmJiAodG1wYnl0ZSAmIDB4ODApOyArK2NudGJ5dGUpIGxlbmd0aCArPSAoKHRtcGJ5dGUgPSBkYXRhLnJlYWRfc2hpZnQoMSkpICYgMHg3Rik8PCg3KmNudGJ5dGUpO1xuXHRcdHRndCA9IGRhdGEubCArIGxlbmd0aDtcblx0XHR2YXIgZCA9IFIuZiAmJiBSLmYoZGF0YSwgbGVuZ3RoLCBvcHRzKTtcblx0XHRkYXRhLmwgPSB0Z3Q7XG5cdFx0aWYoY2IoZCwgUiwgUlQpKSByZXR1cm47XG5cdH1cbn1cblxuLyogY29udHJvbCBidWZmZXIgdXNhZ2UgZm9yIGZpeGVkLWxlbmd0aCBidWZmZXJzICovXG5mdW5jdGlvbiBidWZfYXJyYXkoKS8qOkJ1ZkFycmF5Ki8ge1xuXHR2YXIgYnVmcy8qOkFycmF5PEJsb2NrPiovID0gW10sIGJsa3N6ID0gaGFzX2J1ZiA/IDI1NiA6IDIwNDg7XG5cdHZhciBuZXdibGsgPSBmdW5jdGlvbiBiYV9uZXdibGsoc3ovKjpudW1iZXIqLykvKjpCbG9jayovIHtcblx0XHR2YXIgby8qOkJsb2NrKi8gPSAobmV3X2J1ZihzeikvKjphbnkqLyk7XG5cdFx0cHJlcF9ibG9iKG8sIDApO1xuXHRcdHJldHVybiBvO1xuXHR9O1xuXG5cdHZhciBjdXJidWYvKjpCbG9jayovID0gbmV3YmxrKGJsa3N6KTtcblxuXHR2YXIgZW5kYnVmID0gZnVuY3Rpb24gYmFfZW5kYnVmKCkge1xuXHRcdGlmKCFjdXJidWYpIHJldHVybjtcblx0XHRpZihjdXJidWYubGVuZ3RoID4gY3VyYnVmLmwpIHsgY3VyYnVmID0gY3VyYnVmLnNsaWNlKDAsIGN1cmJ1Zi5sKTsgY3VyYnVmLmwgPSBjdXJidWYubGVuZ3RoOyB9XG5cdFx0aWYoY3VyYnVmLmxlbmd0aCA+IDApIGJ1ZnMucHVzaChjdXJidWYpO1xuXHRcdGN1cmJ1ZiA9IG51bGw7XG5cdH07XG5cblx0dmFyIG5leHQgPSBmdW5jdGlvbiBiYV9uZXh0KHN6Lyo6bnVtYmVyKi8pLyo6QmxvY2sqLyB7XG5cdFx0aWYoY3VyYnVmICYmIChzeiA8IChjdXJidWYubGVuZ3RoIC0gY3VyYnVmLmwpKSkgcmV0dXJuIGN1cmJ1Zjtcblx0XHRlbmRidWYoKTtcblx0XHRyZXR1cm4gKGN1cmJ1ZiA9IG5ld2JsayhNYXRoLm1heChzeisxLCBibGtzeikpKTtcblx0fTtcblxuXHR2YXIgZW5kID0gZnVuY3Rpb24gYmFfZW5kKCkge1xuXHRcdGVuZGJ1ZigpO1xuXHRcdHJldHVybiBiY29uY2F0KGJ1ZnMpO1xuXHR9O1xuXG5cdHZhciBwdXNoID0gZnVuY3Rpb24gYmFfcHVzaChidWYpIHsgZW5kYnVmKCk7IGN1cmJ1ZiA9IGJ1ZjsgaWYoY3VyYnVmLmwgPT0gbnVsbCkgY3VyYnVmLmwgPSBjdXJidWYubGVuZ3RoOyBuZXh0KGJsa3N6KTsgfTtcblxuXHRyZXR1cm4gKHsgbmV4dDpuZXh0LCBwdXNoOnB1c2gsIGVuZDplbmQsIF9idWZzOmJ1ZnMgfS8qOmFueSovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfcmVjb3JkKGJhLyo6QnVmQXJyYXkqLywgdHlwZS8qOm51bWJlciovLCBwYXlsb2FkLCBsZW5ndGgvKjo/bnVtYmVyKi8pIHtcblx0dmFyIHQvKjpudW1iZXIqLyA9ICt0eXBlLCBsO1xuXHRpZihpc05hTih0KSkgcmV0dXJuOyAvLyBUT0RPOiB0aHJvdyBzb21ldGhpbmcgaGVyZT9cblx0aWYoIWxlbmd0aCkgbGVuZ3RoID0gWExTQlJlY29yZEVudW1bdF0ucCB8fCAocGF5bG9hZHx8W10pLmxlbmd0aCB8fCAwO1xuXHRsID0gMSArICh0ID49IDB4ODAgPyAxIDogMCkgKyAxLyogKyBsZW5ndGgqLztcblx0aWYobGVuZ3RoID49IDB4ODApICsrbDsgaWYobGVuZ3RoID49IDB4NDAwMCkgKytsOyBpZihsZW5ndGggPj0gMHgyMDAwMDApICsrbDtcblx0dmFyIG8gPSBiYS5uZXh0KGwpO1xuXHRpZih0IDw9IDB4N0YpIG8ud3JpdGVfc2hpZnQoMSwgdCk7XG5cdGVsc2Uge1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgKHQgJiAweDdGKSArIDB4ODApO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgKHQgPj4gNykpO1xuXHR9XG5cdGZvcih2YXIgaSA9IDA7IGkgIT0gNDsgKytpKSB7XG5cdFx0aWYobGVuZ3RoID49IDB4ODApIHsgby53cml0ZV9zaGlmdCgxLCAobGVuZ3RoICYgMHg3RikrMHg4MCk7IGxlbmd0aCA+Pj0gNzsgfVxuXHRcdGVsc2UgeyBvLndyaXRlX3NoaWZ0KDEsIGxlbmd0aCk7IGJyZWFrOyB9XG5cdH1cblx0aWYoLyo6OiBsZW5ndGggIT0gbnVsbCAmJiovbGVuZ3RoID4gMCAmJiBpc19idWYocGF5bG9hZCkpIGJhLnB1c2gocGF5bG9hZCk7XG59XG4vKiBYTFMgcmFuZ2VzIGVuZm9yY2VkICovXG5mdW5jdGlvbiBzaGlmdF9jZWxsX3hscyhjZWxsLyo6Q2VsbEFkZHJlc3MqLywgdGd0Lyo6YW55Ki8sIG9wdHMvKjo/YW55Ki8pLyo6Q2VsbEFkZHJlc3MqLyB7XG5cdHZhciBvdXQgPSBkdXAoY2VsbCk7XG5cdGlmKHRndC5zKSB7XG5cdFx0aWYob3V0LmNSZWwpIG91dC5jICs9IHRndC5zLmM7XG5cdFx0aWYob3V0LnJSZWwpIG91dC5yICs9IHRndC5zLnI7XG5cdH0gZWxzZSB7XG5cdFx0aWYob3V0LmNSZWwpIG91dC5jICs9IHRndC5jO1xuXHRcdGlmKG91dC5yUmVsKSBvdXQuciArPSB0Z3Qucjtcblx0fVxuXHRpZighb3B0cyB8fCBvcHRzLmJpZmYgPCAxMikge1xuXHRcdHdoaWxlKG91dC5jID49IDB4MTAwKSBvdXQuYyAtPSAweDEwMDtcblx0XHR3aGlsZShvdXQuciA+PSAweDEwMDAwKSBvdXQuciAtPSAweDEwMDAwO1xuXHR9XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHNoaWZ0X3JhbmdlX3hscyhjZWxsLCByYW5nZSwgb3B0cykge1xuXHR2YXIgb3V0ID0gZHVwKGNlbGwpO1xuXHRvdXQucyA9IHNoaWZ0X2NlbGxfeGxzKG91dC5zLCByYW5nZS5zLCBvcHRzKTtcblx0b3V0LmUgPSBzaGlmdF9jZWxsX3hscyhvdXQuZSwgcmFuZ2Uucywgb3B0cyk7XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGVuY29kZV9jZWxsX3hscyhjLyo6Q2VsbEFkZHJlc3MqLywgYmlmZi8qOm51bWJlciovKS8qOnN0cmluZyovIHtcblx0aWYoYy5jUmVsICYmIGMuYyA8IDApIHsgYyA9IGR1cChjKTsgd2hpbGUoYy5jIDwgMCkgYy5jICs9IChiaWZmID4gOCkgPyAweDQwMDAgOiAweDEwMDsgfVxuXHRpZihjLnJSZWwgJiYgYy5yIDwgMCkgeyBjID0gZHVwKGMpOyB3aGlsZShjLnIgPCAwKSBjLnIgKz0gKGJpZmYgPiA4KSA/IDB4MTAwMDAwIDogKChiaWZmID4gNSkgPyAweDEwMDAwIDogMHg0MDAwKTsgfVxuXHR2YXIgcyA9IGVuY29kZV9jZWxsKGMpO1xuXHRpZighYy5jUmVsICYmIGMuY1JlbCAhPSBudWxsKSBzID0gZml4X2NvbChzKTtcblx0aWYoIWMuclJlbCAmJiBjLnJSZWwgIT0gbnVsbCkgcyA9IGZpeF9yb3cocyk7XG5cdHJldHVybiBzO1xufVxuXG5mdW5jdGlvbiBlbmNvZGVfcmFuZ2VfeGxzKHIsIG9wdHMpLyo6c3RyaW5nKi8ge1xuXHRpZihyLnMuciA9PSAwICYmICFyLnMuclJlbCkge1xuXHRcdGlmKHIuZS5yID09IChvcHRzLmJpZmYgPj0gMTIgPyAweEZGRkZGIDogKG9wdHMuYmlmZiA+PSA4ID8gMHgxMDAwMCA6IDB4NDAwMCkpICYmICFyLmUuclJlbCkge1xuXHRcdFx0cmV0dXJuIChyLnMuY1JlbCA/IFwiXCIgOiBcIiRcIikgKyBlbmNvZGVfY29sKHIucy5jKSArIFwiOlwiICsgKHIuZS5jUmVsID8gXCJcIiA6IFwiJFwiKSArIGVuY29kZV9jb2woci5lLmMpO1xuXHRcdH1cblx0fVxuXHRpZihyLnMuYyA9PSAwICYmICFyLnMuY1JlbCkge1xuXHRcdGlmKHIuZS5jID09IChvcHRzLmJpZmYgPj0gMTIgPyAweDNGRkYgOiAweEZGKSAmJiAhci5lLmNSZWwpIHtcblx0XHRcdHJldHVybiAoci5zLnJSZWwgPyBcIlwiIDogXCIkXCIpICsgZW5jb2RlX3JvdyhyLnMucikgKyBcIjpcIiArIChyLmUuclJlbCA/IFwiXCIgOiBcIiRcIikgKyBlbmNvZGVfcm93KHIuZS5yKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGVuY29kZV9jZWxsX3hscyhyLnMsIG9wdHMuYmlmZikgKyBcIjpcIiArIGVuY29kZV9jZWxsX3hscyhyLmUsIG9wdHMuYmlmZik7XG59XG5mdW5jdGlvbiBkZWNvZGVfcm93KHJvd3N0ci8qOnN0cmluZyovKS8qOm51bWJlciovIHsgcmV0dXJuIHBhcnNlSW50KHVuZml4X3Jvdyhyb3dzdHIpLDEwKSAtIDE7IH1cbmZ1bmN0aW9uIGVuY29kZV9yb3cocm93Lyo6bnVtYmVyKi8pLyo6c3RyaW5nKi8geyByZXR1cm4gXCJcIiArIChyb3cgKyAxKTsgfVxuZnVuY3Rpb24gZml4X3Jvdyhjc3RyLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8geyByZXR1cm4gY3N0ci5yZXBsYWNlKC8oW0EtWl18XikoXFxkKykkLyxcIiQxJCQkMlwiKTsgfVxuZnVuY3Rpb24gdW5maXhfcm93KGNzdHIvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7IHJldHVybiBjc3RyLnJlcGxhY2UoL1xcJChcXGQrKSQvLFwiJDFcIik7IH1cblxuZnVuY3Rpb24gZGVjb2RlX2NvbChjb2xzdHIvKjpzdHJpbmcqLykvKjpudW1iZXIqLyB7IHZhciBjID0gdW5maXhfY29sKGNvbHN0ciksIGQgPSAwLCBpID0gMDsgZm9yKDsgaSAhPT0gYy5sZW5ndGg7ICsraSkgZCA9IDI2KmQgKyBjLmNoYXJDb2RlQXQoaSkgLSA2NDsgcmV0dXJuIGQgLSAxOyB9XG5mdW5jdGlvbiBlbmNvZGVfY29sKGNvbC8qOm51bWJlciovKS8qOnN0cmluZyovIHsgaWYoY29sIDwgMCkgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCBjb2x1bW4gXCIgKyBjb2wpOyB2YXIgcz1cIlwiOyBmb3IoKytjb2w7IGNvbDsgY29sPU1hdGguZmxvb3IoKGNvbC0xKS8yNikpIHMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoY29sLTEpJTI2KSArIDY1KSArIHM7IHJldHVybiBzOyB9XG5mdW5jdGlvbiBmaXhfY29sKGNzdHIvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7IHJldHVybiBjc3RyLnJlcGxhY2UoL14oW0EtWl0pLyxcIiQkJDFcIik7IH1cbmZ1bmN0aW9uIHVuZml4X2NvbChjc3RyLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8geyByZXR1cm4gY3N0ci5yZXBsYWNlKC9eXFwkKFtBLVpdKS8sXCIkMVwiKTsgfVxuXG5mdW5jdGlvbiBzcGxpdF9jZWxsKGNzdHIvKjpzdHJpbmcqLykvKjpBcnJheTxzdHJpbmc+Ki8geyByZXR1cm4gY3N0ci5yZXBsYWNlKC8oXFwkP1tBLVpdKikoXFwkP1xcZCopLyxcIiQxLCQyXCIpLnNwbGl0KFwiLFwiKTsgfVxuLy9mdW5jdGlvbiBkZWNvZGVfY2VsbChjc3RyLyo6c3RyaW5nKi8pLyo6Q2VsbEFkZHJlc3MqLyB7IHZhciBzcGx0ID0gc3BsaXRfY2VsbChjc3RyKTsgcmV0dXJuIHsgYzpkZWNvZGVfY29sKHNwbHRbMF0pLCByOmRlY29kZV9yb3coc3BsdFsxXSkgfTsgfVxuZnVuY3Rpb24gZGVjb2RlX2NlbGwoY3N0ci8qOnN0cmluZyovKS8qOkNlbGxBZGRyZXNzKi8ge1xuXHR2YXIgUiA9IDAsIEMgPSAwO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgY3N0ci5sZW5ndGg7ICsraSkge1xuXHRcdHZhciBjYyA9IGNzdHIuY2hhckNvZGVBdChpKTtcblx0XHRpZihjYyA+PSA0OCAmJiBjYyA8PSA1NykgUiA9IDEwICogUiArIChjYyAtIDQ4KTtcblx0XHRlbHNlIGlmKGNjID49IDY1ICYmIGNjIDw9IDkwKSBDID0gMjYgKiBDICsgKGNjIC0gNjQpO1xuXHR9XG5cdHJldHVybiB7IGM6IEMgLSAxLCByOlIgLSAxIH07XG59XG4vL2Z1bmN0aW9uIGVuY29kZV9jZWxsKGNlbGwvKjpDZWxsQWRkcmVzcyovKS8qOnN0cmluZyovIHsgcmV0dXJuIGVuY29kZV9jb2woY2VsbC5jKSArIGVuY29kZV9yb3coY2VsbC5yKTsgfVxuZnVuY3Rpb24gZW5jb2RlX2NlbGwoY2VsbC8qOkNlbGxBZGRyZXNzKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgY29sID0gY2VsbC5jICsgMTtcblx0dmFyIHM9XCJcIjtcblx0Zm9yKDsgY29sOyBjb2w9KChjb2wtMSkvMjYpfDApIHMgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKCgoY29sLTEpJTI2KSArIDY1KSArIHM7XG5cdHJldHVybiBzICsgKGNlbGwuciArIDEpO1xufVxuZnVuY3Rpb24gZGVjb2RlX3JhbmdlKHJhbmdlLyo6c3RyaW5nKi8pLyo6UmFuZ2UqLyB7XG5cdHZhciBpZHggPSByYW5nZS5pbmRleE9mKFwiOlwiKTtcblx0aWYoaWR4ID09IC0xKSByZXR1cm4geyBzOiBkZWNvZGVfY2VsbChyYW5nZSksIGU6IGRlY29kZV9jZWxsKHJhbmdlKSB9O1xuXHRyZXR1cm4geyBzOiBkZWNvZGVfY2VsbChyYW5nZS5zbGljZSgwLCBpZHgpKSwgZTogZGVjb2RlX2NlbGwocmFuZ2Uuc2xpY2UoaWR4ICsgMSkpIH07XG59XG4vKiMgaWYgb25seSBvbmUgYXJnLCBpdCBpcyBhc3N1bWVkIHRvIGJlIGEgUmFuZ2UuICBJZiAyIGFyZ3MsIGJvdGggYXJlIGNlbGwgYWRkcmVzc2VzICovXG5mdW5jdGlvbiBlbmNvZGVfcmFuZ2UoY3MvKjpDZWxsQWRkclNwZWN8UmFuZ2UqLyxjZS8qOj9DZWxsQWRkclNwZWMqLykvKjpzdHJpbmcqLyB7XG5cdGlmKHR5cGVvZiBjZSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGNlID09PSAnbnVtYmVyJykge1xuLyo6OiBpZighKGNzIGluc3RhbmNlb2YgUmFuZ2UpKSB0aHJvdyBcInVucmVhY2hhYmxlXCI7ICovXG5cdFx0cmV0dXJuIGVuY29kZV9yYW5nZShjcy5zLCBjcy5lKTtcblx0fVxuLyo6OiBpZigoY3MgaW5zdGFuY2VvZiBSYW5nZSkpIHRocm93IFwidW5yZWFjaGFibGVcIjsgKi9cblx0aWYodHlwZW9mIGNzICE9PSAnc3RyaW5nJykgY3MgPSBlbmNvZGVfY2VsbCgoY3MvKjphbnkqLykpO1xuXHRpZih0eXBlb2YgY2UgIT09ICdzdHJpbmcnKSBjZSA9IGVuY29kZV9jZWxsKChjZS8qOmFueSovKSk7XG4vKjo6IGlmKHR5cGVvZiBjcyAhPT0gJ3N0cmluZycpIHRocm93IFwidW5yZWFjaGFibGVcIjsgKi9cbi8qOjogaWYodHlwZW9mIGNlICE9PSAnc3RyaW5nJykgdGhyb3cgXCJ1bnJlYWNoYWJsZVwiOyAqL1xuXHRyZXR1cm4gY3MgPT0gY2UgPyBjcyA6IGNzICsgXCI6XCIgKyBjZTtcbn1cblxuZnVuY3Rpb24gc2FmZV9kZWNvZGVfcmFuZ2UocmFuZ2UvKjpzdHJpbmcqLykvKjpSYW5nZSovIHtcblx0dmFyIG8gPSB7czp7YzowLHI6MH0sZTp7YzowLHI6MH19O1xuXHR2YXIgaWR4ID0gMCwgaSA9IDAsIGNjID0gMDtcblx0dmFyIGxlbiA9IHJhbmdlLmxlbmd0aDtcblx0Zm9yKGlkeCA9IDA7IGkgPCBsZW47ICsraSkge1xuXHRcdGlmKChjYz1yYW5nZS5jaGFyQ29kZUF0KGkpLTY0KSA8IDEgfHwgY2MgPiAyNikgYnJlYWs7XG5cdFx0aWR4ID0gMjYqaWR4ICsgY2M7XG5cdH1cblx0by5zLmMgPSAtLWlkeDtcblxuXHRmb3IoaWR4ID0gMDsgaSA8IGxlbjsgKytpKSB7XG5cdFx0aWYoKGNjPXJhbmdlLmNoYXJDb2RlQXQoaSktNDgpIDwgMCB8fCBjYyA+IDkpIGJyZWFrO1xuXHRcdGlkeCA9IDEwKmlkeCArIGNjO1xuXHR9XG5cdG8ucy5yID0gLS1pZHg7XG5cblx0aWYoaSA9PT0gbGVuIHx8IGNjICE9IDEwKSB7IG8uZS5jPW8ucy5jOyBvLmUucj1vLnMucjsgcmV0dXJuIG87IH1cblx0KytpO1xuXG5cdGZvcihpZHggPSAwOyBpICE9IGxlbjsgKytpKSB7XG5cdFx0aWYoKGNjPXJhbmdlLmNoYXJDb2RlQXQoaSktNjQpIDwgMSB8fCBjYyA+IDI2KSBicmVhaztcblx0XHRpZHggPSAyNippZHggKyBjYztcblx0fVxuXHRvLmUuYyA9IC0taWR4O1xuXG5cdGZvcihpZHggPSAwOyBpICE9IGxlbjsgKytpKSB7XG5cdFx0aWYoKGNjPXJhbmdlLmNoYXJDb2RlQXQoaSktNDgpIDwgMCB8fCBjYyA+IDkpIGJyZWFrO1xuXHRcdGlkeCA9IDEwKmlkeCArIGNjO1xuXHR9XG5cdG8uZS5yID0gLS1pZHg7XG5cdHJldHVybiBvO1xufVxuXG5mdW5jdGlvbiBzYWZlX2Zvcm1hdF9jZWxsKGNlbGwvKjpDZWxsKi8sIHYvKjphbnkqLykge1xuXHR2YXIgcSA9IChjZWxsLnQgPT0gJ2QnICYmIHYgaW5zdGFuY2VvZiBEYXRlKTtcblx0aWYoY2VsbC56ICE9IG51bGwpIHRyeSB7IHJldHVybiAoY2VsbC53ID0gU1NGX2Zvcm1hdChjZWxsLnosIHEgPyBkYXRlbnVtKHYpIDogdikpOyB9IGNhdGNoKGUpIHsgfVxuXHR0cnkgeyByZXR1cm4gKGNlbGwudyA9IFNTRl9mb3JtYXQoKGNlbGwuWEZ8fHt9KS5udW1GbXRJZHx8KHEgPyAxNCA6IDApLCAgcSA/IGRhdGVudW0odikgOiB2KSk7IH0gY2F0Y2goZSkgeyByZXR1cm4gJycrdjsgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRfY2VsbChjZWxsLyo6Q2VsbCovLCB2Lyo6YW55Ki8sIG8vKjphbnkqLykge1xuXHRpZihjZWxsID09IG51bGwgfHwgY2VsbC50ID09IG51bGwgfHwgY2VsbC50ID09ICd6JykgcmV0dXJuIFwiXCI7XG5cdGlmKGNlbGwudyAhPT0gdW5kZWZpbmVkKSByZXR1cm4gY2VsbC53O1xuXHRpZihjZWxsLnQgPT0gJ2QnICYmICFjZWxsLnogJiYgbyAmJiBvLmRhdGVORikgY2VsbC56ID0gby5kYXRlTkY7XG5cdGlmKGNlbGwudCA9PSBcImVcIikgcmV0dXJuIEJFcnJbY2VsbC52XSB8fCBjZWxsLnY7XG5cdGlmKHYgPT0gdW5kZWZpbmVkKSByZXR1cm4gc2FmZV9mb3JtYXRfY2VsbChjZWxsLCBjZWxsLnYpO1xuXHRyZXR1cm4gc2FmZV9mb3JtYXRfY2VsbChjZWxsLCB2KTtcbn1cblxuZnVuY3Rpb24gc2hlZXRfdG9fd29ya2Jvb2soc2hlZXQvKjpXb3Jrc2hlZXQqLywgb3B0cykvKjpXb3JrYm9vayovIHtcblx0dmFyIG4gPSBvcHRzICYmIG9wdHMuc2hlZXQgPyBvcHRzLnNoZWV0IDogXCJTaGVldDFcIjtcblx0dmFyIHNoZWV0cyA9IHt9OyBzaGVldHNbbl0gPSBzaGVldDtcblx0cmV0dXJuIHsgU2hlZXROYW1lczogW25dLCBTaGVldHM6IHNoZWV0cyB9O1xufVxuXG5mdW5jdGlvbiBzaGVldF9hZGRfYW9hKF93cy8qOj9Xb3Jrc2hlZXQqLywgZGF0YS8qOkFPQSovLCBvcHRzLyo6P2FueSovKS8qOldvcmtzaGVldCovIHtcblx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHR2YXIgZGVuc2UgPSBfd3MgPyBBcnJheS5pc0FycmF5KF93cykgOiBvLmRlbnNlO1xuXHRpZihERU5TRSAhPSBudWxsICYmIGRlbnNlID09IG51bGwpIGRlbnNlID0gREVOU0U7XG5cdHZhciB3cy8qOldvcmtzaGVldCovID0gX3dzIHx8IChkZW5zZSA/IChbXS8qOmFueSovKSA6ICh7fS8qOmFueSovKSk7XG5cdHZhciBfUiA9IDAsIF9DID0gMDtcblx0aWYod3MgJiYgby5vcmlnaW4gIT0gbnVsbCkge1xuXHRcdGlmKHR5cGVvZiBvLm9yaWdpbiA9PSAnbnVtYmVyJykgX1IgPSBvLm9yaWdpbjtcblx0XHRlbHNlIHtcblx0XHRcdHZhciBfb3JpZ2luLyo6Q2VsbEFkZHJlc3MqLyA9IHR5cGVvZiBvLm9yaWdpbiA9PSBcInN0cmluZ1wiID8gZGVjb2RlX2NlbGwoby5vcmlnaW4pIDogby5vcmlnaW47XG5cdFx0XHRfUiA9IF9vcmlnaW4ucjsgX0MgPSBfb3JpZ2luLmM7XG5cdFx0fVxuXHRcdGlmKCF3c1tcIiFyZWZcIl0pIHdzW1wiIXJlZlwiXSA9IFwiQTE6QTFcIjtcblx0fVxuXHR2YXIgcmFuZ2UvKjpSYW5nZSovID0gKHtzOiB7YzoxMDAwMDAwMCwgcjoxMDAwMDAwMH0sIGU6IHtjOjAsIHI6MH19Lyo6YW55Ki8pO1xuXHRpZih3c1snIXJlZiddKSB7XG5cdFx0dmFyIF9yYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHRcdHJhbmdlLnMuYyA9IF9yYW5nZS5zLmM7XG5cdFx0cmFuZ2Uucy5yID0gX3JhbmdlLnMucjtcblx0XHRyYW5nZS5lLmMgPSBNYXRoLm1heChyYW5nZS5lLmMsIF9yYW5nZS5lLmMpO1xuXHRcdHJhbmdlLmUuciA9IE1hdGgubWF4KHJhbmdlLmUuciwgX3JhbmdlLmUucik7XG5cdFx0aWYoX1IgPT0gLTEpIHJhbmdlLmUuciA9IF9SID0gX3JhbmdlLmUuciArIDE7XG5cdH1cblx0Zm9yKHZhciBSID0gMDsgUiAhPSBkYXRhLmxlbmd0aDsgKytSKSB7XG5cdFx0aWYoIWRhdGFbUl0pIGNvbnRpbnVlO1xuXHRcdGlmKCFBcnJheS5pc0FycmF5KGRhdGFbUl0pKSB0aHJvdyBuZXcgRXJyb3IoXCJhb2FfdG9fc2hlZXQgZXhwZWN0cyBhbiBhcnJheSBvZiBhcnJheXNcIik7XG5cdFx0Zm9yKHZhciBDID0gMDsgQyAhPSBkYXRhW1JdLmxlbmd0aDsgKytDKSB7XG5cdFx0XHRpZih0eXBlb2YgZGF0YVtSXVtDXSA9PT0gJ3VuZGVmaW5lZCcpIGNvbnRpbnVlO1xuXHRcdFx0dmFyIGNlbGwvKjpDZWxsKi8gPSAoe3Y6IGRhdGFbUl1bQ10gfS8qOmFueSovKTtcblx0XHRcdHZhciBfX1IgPSBfUiArIFIsIF9fQyA9IF9DICsgQztcblx0XHRcdGlmKHJhbmdlLnMuciA+IF9fUikgcmFuZ2Uucy5yID0gX19SO1xuXHRcdFx0aWYocmFuZ2Uucy5jID4gX19DKSByYW5nZS5zLmMgPSBfX0M7XG5cdFx0XHRpZihyYW5nZS5lLnIgPCBfX1IpIHJhbmdlLmUuciA9IF9fUjtcblx0XHRcdGlmKHJhbmdlLmUuYyA8IF9fQykgcmFuZ2UuZS5jID0gX19DO1xuXHRcdFx0aWYoZGF0YVtSXVtDXSAmJiB0eXBlb2YgZGF0YVtSXVtDXSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoZGF0YVtSXVtDXSkgJiYgIShkYXRhW1JdW0NdIGluc3RhbmNlb2YgRGF0ZSkpIGNlbGwgPSBkYXRhW1JdW0NdO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGlmKEFycmF5LmlzQXJyYXkoY2VsbC52KSkgeyBjZWxsLmYgPSBkYXRhW1JdW0NdWzFdOyBjZWxsLnYgPSBjZWxsLnZbMF07IH1cblx0XHRcdFx0aWYoY2VsbC52ID09PSBudWxsKSB7XG5cdFx0XHRcdFx0aWYoY2VsbC5mKSBjZWxsLnQgPSAnbic7XG5cdFx0XHRcdFx0ZWxzZSBpZihvLm51bGxFcnJvcikgeyBjZWxsLnQgPSAnZSc7IGNlbGwudiA9IDA7IH1cblx0XHRcdFx0XHRlbHNlIGlmKCFvLnNoZWV0U3R1YnMpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdGVsc2UgY2VsbC50ID0gJ3onO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYodHlwZW9mIGNlbGwudiA9PT0gJ251bWJlcicpIGNlbGwudCA9ICduJztcblx0XHRcdFx0ZWxzZSBpZih0eXBlb2YgY2VsbC52ID09PSAnYm9vbGVhbicpIGNlbGwudCA9ICdiJztcblx0XHRcdFx0ZWxzZSBpZihjZWxsLnYgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdFx0XHRcdFx0Y2VsbC56ID0gby5kYXRlTkYgfHwgdGFibGVfZm10WzE0XTtcblx0XHRcdFx0XHRpZihvLmNlbGxEYXRlcykgeyBjZWxsLnQgPSAnZCc7IGNlbGwudyA9IFNTRl9mb3JtYXQoY2VsbC56LCBkYXRlbnVtKGNlbGwudikpOyB9XG5cdFx0XHRcdFx0ZWxzZSB7IGNlbGwudCA9ICduJzsgY2VsbC52ID0gZGF0ZW51bShjZWxsLnYpOyBjZWxsLncgPSBTU0ZfZm9ybWF0KGNlbGwueiwgY2VsbC52KTsgfVxuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgY2VsbC50ID0gJ3MnO1xuXHRcdFx0fVxuXHRcdFx0aWYoZGVuc2UpIHtcblx0XHRcdFx0aWYoIXdzW19fUl0pIHdzW19fUl0gPSBbXTtcblx0XHRcdFx0aWYod3NbX19SXVtfX0NdICYmIHdzW19fUl1bX19DXS56KSBjZWxsLnogPSB3c1tfX1JdW19fQ10uejtcblx0XHRcdFx0d3NbX19SXVtfX0NdID0gY2VsbDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBjZWxsX3JlZiA9IGVuY29kZV9jZWxsKCh7YzpfX0MscjpfX1J9Lyo6YW55Ki8pKTtcblx0XHRcdFx0aWYod3NbY2VsbF9yZWZdICYmIHdzW2NlbGxfcmVmXS56KSBjZWxsLnogPSB3c1tjZWxsX3JlZl0uejtcblx0XHRcdFx0d3NbY2VsbF9yZWZdID0gY2VsbDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0aWYocmFuZ2Uucy5jIDwgMTAwMDAwMDApIHdzWychcmVmJ10gPSBlbmNvZGVfcmFuZ2UocmFuZ2UpO1xuXHRyZXR1cm4gd3M7XG59XG5mdW5jdGlvbiBhb2FfdG9fc2hlZXQoZGF0YS8qOkFPQSovLCBvcHRzLyo6P2FueSovKS8qOldvcmtzaGVldCovIHsgcmV0dXJuIHNoZWV0X2FkZF9hb2EobnVsbCwgZGF0YSwgb3B0cyk7IH1cblxuZnVuY3Rpb24gcGFyc2VfSW50MzJMRShkYXRhKSB7XG5cdHJldHVybiBkYXRhLnJlYWRfc2hpZnQoNCwgJ2knKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX1VJbnQzMkxFKHgvKjpudW1iZXIqLywgbykge1xuXHRpZiAoIW8pIG8gPSBuZXdfYnVmKDQpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIHgpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU0JdIDIuNS4xNjggKi9cbmZ1bmN0aW9uIHBhcnNlX1hMV2lkZVN0cmluZyhkYXRhLyo6OiwgbGVuZ3RoKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgY2NoQ2hhcmFjdGVycyA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0cmV0dXJuIGNjaENoYXJhY3RlcnMgPT09IDAgPyBcIlwiIDogZGF0YS5yZWFkX3NoaWZ0KGNjaENoYXJhY3RlcnMsICdkYmNzJyk7XG59XG5mdW5jdGlvbiB3cml0ZV9YTFdpZGVTdHJpbmcoZGF0YS8qOnN0cmluZyovLCBvKSB7XG5cdHZhciBfbnVsbCA9IGZhbHNlOyBpZiAobyA9PSBudWxsKSB7IF9udWxsID0gdHJ1ZTsgbyA9IG5ld19idWYoNCArIDIgKiBkYXRhLmxlbmd0aCk7IH1cblx0by53cml0ZV9zaGlmdCg0LCBkYXRhLmxlbmd0aCk7XG5cdGlmIChkYXRhLmxlbmd0aCA+IDApIG8ud3JpdGVfc2hpZnQoMCwgZGF0YSwgJ2RiY3MnKTtcblx0cmV0dXJuIF9udWxsID8gby5zbGljZSgwLCBvLmwpIDogbztcbn1cblxuLyogW01TLVhMU0JdIDIuNS45MSAqL1xuLy9mdW5jdGlvbiBwYXJzZV9MUFdpZGVTdHJpbmcoZGF0YS8qOjosIGxlbmd0aCovKS8qOnN0cmluZyovIHtcbi8vXHR2YXIgY2NoQ2hhcmFjdGVycyA9IGRhdGEucmVhZF9zaGlmdCgyKTtcbi8vXHRyZXR1cm4gY2NoQ2hhcmFjdGVycyA9PT0gMCA/IFwiXCIgOiBkYXRhLnJlYWRfc2hpZnQoY2NoQ2hhcmFjdGVycywgXCJ1dGYxNmxlXCIpO1xuLy99XG5cbi8qIFtNUy1YTFNCXSAyLjUuMTQzICovXG5mdW5jdGlvbiBwYXJzZV9TdHJSdW4oZGF0YSkge1xuXHRyZXR1cm4geyBpY2g6IGRhdGEucmVhZF9zaGlmdCgyKSwgaWZudDogZGF0YS5yZWFkX3NoaWZ0KDIpIH07XG59XG5mdW5jdGlvbiB3cml0ZV9TdHJSdW4ocnVuLCBvKSB7XG5cdGlmICghbykgbyA9IG5ld19idWYoNCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgcnVuLmljaCB8fCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCBydW4uaWZudCB8fCAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjUuMTIxICovXG5mdW5jdGlvbiBwYXJzZV9SaWNoU3RyKGRhdGEsIGxlbmd0aC8qOm51bWJlciovKS8qOlhMU3RyaW5nKi8ge1xuXHR2YXIgc3RhcnQgPSBkYXRhLmw7XG5cdHZhciBmbGFncyA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0dmFyIHN0ciA9IHBhcnNlX1hMV2lkZVN0cmluZyhkYXRhKTtcblx0dmFyIHJnc1N0clJ1biA9IFtdO1xuXHR2YXIgeiA9ICh7IHQ6IHN0ciwgaDogc3RyIH0vKjphbnkqLyk7XG5cdGlmICgoZmxhZ3MgJiAxKSAhPT0gMCkgeyAvKiBmUmljaFN0ciAqL1xuXHRcdC8qIFRPRE86IGZvcm1hdHRlZCBzdHJpbmcgKi9cblx0XHR2YXIgZHdTaXplU3RyUnVuID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHRcdGZvciAodmFyIGkgPSAwOyBpICE9IGR3U2l6ZVN0clJ1bjsgKytpKSByZ3NTdHJSdW4ucHVzaChwYXJzZV9TdHJSdW4oZGF0YSkpO1xuXHRcdHouciA9IHJnc1N0clJ1bjtcblx0fVxuXHRlbHNlIHouciA9IFt7IGljaDogMCwgaWZudDogMCB9XTtcblx0Ly9pZigoZmxhZ3MgJiAyKSAhPT0gMCkgeyAvKiBmRXh0U3RyICovXG5cdC8vXHQvKiBUT0RPOiBwaG9uZXRpYyBzdHJpbmcgKi9cblx0Ly99XG5cdGRhdGEubCA9IHN0YXJ0ICsgbGVuZ3RoO1xuXHRyZXR1cm4gejtcbn1cbmZ1bmN0aW9uIHdyaXRlX1JpY2hTdHIoc3RyLyo6WExTdHJpbmcqLywgby8qOj9CbG9jayovKS8qOkJsb2NrKi8ge1xuXHQvKiBUT0RPOiBmb3JtYXR0ZWQgc3RyaW5nICovXG5cdHZhciBfbnVsbCA9IGZhbHNlOyBpZiAobyA9PSBudWxsKSB7IF9udWxsID0gdHJ1ZTsgbyA9IG5ld19idWYoMTUgKyA0ICogc3RyLnQubGVuZ3RoKTsgfVxuXHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcoc3RyLnQsIG8pO1xuXHRyZXR1cm4gX251bGwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuLyogW01TLVhMU0JdIDIuNC4zMjggQnJ0Q29tbWVudFRleHQgKFJpY2hTdHIgdy8xIHJ1bikgKi9cbnZhciBwYXJzZV9CcnRDb21tZW50VGV4dCA9IHBhcnNlX1JpY2hTdHI7XG5mdW5jdGlvbiB3cml0ZV9CcnRDb21tZW50VGV4dChzdHIvKjpYTFN0cmluZyovLCBvLyo6P0Jsb2NrKi8pLyo6QmxvY2sqLyB7XG5cdC8qIFRPRE86IGZvcm1hdHRlZCBzdHJpbmcgKi9cblx0dmFyIF9udWxsID0gZmFsc2U7IGlmIChvID09IG51bGwpIHsgX251bGwgPSB0cnVlOyBvID0gbmV3X2J1ZigyMyArIDQgKiBzdHIudC5sZW5ndGgpOyB9XG5cdG8ud3JpdGVfc2hpZnQoMSwgMSk7XG5cdHdyaXRlX1hMV2lkZVN0cmluZyhzdHIudCwgbyk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgMSk7XG5cdHdyaXRlX1N0clJ1bih7IGljaDogMCwgaWZudDogMCB9LCBvKTtcblx0cmV0dXJuIF9udWxsID8gby5zbGljZSgwLCBvLmwpIDogbztcbn1cblxuLyogW01TLVhMU0JdIDIuNS45ICovXG5mdW5jdGlvbiBwYXJzZV9YTFNCQ2VsbChkYXRhKS8qOmFueSovIHtcblx0dmFyIGNvbCA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0dmFyIGlTdHlsZVJlZiA9IGRhdGEucmVhZF9zaGlmdCgyKTtcblx0aVN0eWxlUmVmICs9IGRhdGEucmVhZF9zaGlmdCgxKSA8PCAxNjtcblx0ZGF0YS5sKys7IC8vdmFyIGZQaFNob3cgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cdHJldHVybiB7IGM6IGNvbCwgaVN0eWxlUmVmOiBpU3R5bGVSZWYgfTtcbn1cbmZ1bmN0aW9uIHdyaXRlX1hMU0JDZWxsKGNlbGwvKjphbnkqLywgby8qOj9CbG9jayovKSB7XG5cdGlmIChvID09IG51bGwpIG8gPSBuZXdfYnVmKDgpO1xuXHRvLndyaXRlX3NoaWZ0KC00LCBjZWxsLmMpO1xuXHRvLndyaXRlX3NoaWZ0KDMsIGNlbGwuaVN0eWxlUmVmIHx8IGNlbGwucyk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7IC8qIGZQaFNob3cgKi9cblx0cmV0dXJuIG87XG59XG5cbi8qIFNob3J0IFhMU0IgQ2VsbCBkb2VzIG5vdCBpbmNsdWRlIGNvbHVtbiAqL1xuZnVuY3Rpb24gcGFyc2VfWExTQlNob3J0Q2VsbChkYXRhKS8qOmFueSovIHtcblx0dmFyIGlTdHlsZVJlZiA9IGRhdGEucmVhZF9zaGlmdCgyKTtcblx0aVN0eWxlUmVmICs9IGRhdGEucmVhZF9zaGlmdCgxKSA8PDE2O1xuXHRkYXRhLmwrKzsgLy92YXIgZlBoU2hvdyA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0cmV0dXJuIHsgYzotMSwgaVN0eWxlUmVmOiBpU3R5bGVSZWYgfTtcbn1cbmZ1bmN0aW9uIHdyaXRlX1hMU0JTaG9ydENlbGwoY2VsbC8qOmFueSovLCBvLyo6P0Jsb2NrKi8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1Zig0KTtcblx0by53cml0ZV9zaGlmdCgzLCBjZWxsLmlTdHlsZVJlZiB8fCBjZWxsLnMpO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApOyAvKiBmUGhTaG93ICovXG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi41LjIxICovXG52YXIgcGFyc2VfWExTQkNvZGVOYW1lID0gcGFyc2VfWExXaWRlU3RyaW5nO1xudmFyIHdyaXRlX1hMU0JDb2RlTmFtZSA9IHdyaXRlX1hMV2lkZVN0cmluZztcblxuLyogW01TLVhMU0JdIDIuNS4xNjYgKi9cbmZ1bmN0aW9uIHBhcnNlX1hMTnVsbGFibGVXaWRlU3RyaW5nKGRhdGEvKjo6LCBsZW5ndGgqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBjY2hDaGFyYWN0ZXJzID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHRyZXR1cm4gY2NoQ2hhcmFjdGVycyA9PT0gMCB8fCBjY2hDaGFyYWN0ZXJzID09PSAweEZGRkZGRkZGID8gXCJcIiA6IGRhdGEucmVhZF9zaGlmdChjY2hDaGFyYWN0ZXJzLCAnZGJjcycpO1xufVxuZnVuY3Rpb24gd3JpdGVfWExOdWxsYWJsZVdpZGVTdHJpbmcoZGF0YS8qOnN0cmluZyovLCBvKSB7XG5cdHZhciBfbnVsbCA9IGZhbHNlOyBpZiAobyA9PSBudWxsKSB7IF9udWxsID0gdHJ1ZTsgbyA9IG5ld19idWYoMTI3KTsgfVxuXHRvLndyaXRlX3NoaWZ0KDQsIGRhdGEubGVuZ3RoID4gMCA/IGRhdGEubGVuZ3RoIDogMHhGRkZGRkZGRik7XG5cdGlmIChkYXRhLmxlbmd0aCA+IDApIG8ud3JpdGVfc2hpZnQoMCwgZGF0YSwgJ2RiY3MnKTtcblx0cmV0dXJuIF9udWxsID8gby5zbGljZSgwLCBvLmwpIDogbztcbn1cblxuLyogW01TLVhMU0JdIDIuNS4xNjUgKi9cbnZhciBwYXJzZV9YTE5hbWVXaWRlU3RyaW5nID0gcGFyc2VfWExXaWRlU3RyaW5nO1xuLy92YXIgd3JpdGVfWExOYW1lV2lkZVN0cmluZyA9IHdyaXRlX1hMV2lkZVN0cmluZztcblxuLyogW01TLVhMU0JdIDIuNS4xMTQgKi9cbnZhciBwYXJzZV9SZWxJRCA9IHBhcnNlX1hMTnVsbGFibGVXaWRlU3RyaW5nO1xudmFyIHdyaXRlX1JlbElEID0gd3JpdGVfWExOdWxsYWJsZVdpZGVTdHJpbmc7XG5cblxuLyogW01TLVhMU10gMi41LjIxNyA7IFtNUy1YTFNCXSAyLjUuMTIyICovXG5mdW5jdGlvbiBwYXJzZV9Sa051bWJlcihkYXRhKS8qOm51bWJlciovIHtcblx0dmFyIGIgPSBkYXRhLnNsaWNlKGRhdGEubCwgZGF0YS5sICsgNCk7XG5cdHZhciBmWDEwMCA9IChiWzBdICYgMSksIGZJbnQgPSAoYlswXSAmIDIpO1xuXHRkYXRhLmwgKz0gNDtcblx0dmFyIFJLID0gZkludCA9PT0gMCA/IF9fZG91YmxlKFswLCAwLCAwLCAwLCAoYlswXSAmIDB4RkMpLCBiWzFdLCBiWzJdLCBiWzNdXSwgMCkgOiBfX3JlYWRJbnQzMkxFKGIsIDApID4+IDI7XG5cdHJldHVybiBmWDEwMCA/IChSSyAvIDEwMCkgOiBSSztcbn1cbmZ1bmN0aW9uIHdyaXRlX1JrTnVtYmVyKGRhdGEvKjpudW1iZXIqLywgbykge1xuXHRpZiAobyA9PSBudWxsKSBvID0gbmV3X2J1Zig0KTtcblx0dmFyIGZYMTAwID0gMCwgZkludCA9IDAsIGQxMDAgPSBkYXRhICogMTAwO1xuXHRpZiAoKGRhdGEgPT0gKGRhdGEgfCAwKSkgJiYgKGRhdGEgPj0gLSgxIDw8IDI5KSkgJiYgKGRhdGEgPCAoMSA8PCAyOSkpKSB7IGZJbnQgPSAxOyB9XG5cdGVsc2UgaWYgKChkMTAwID09IChkMTAwIHwgMCkpICYmIChkMTAwID49IC0oMSA8PCAyOSkpICYmIChkMTAwIDwgKDEgPDwgMjkpKSkgeyBmSW50ID0gMTsgZlgxMDAgPSAxOyB9XG5cdGlmIChmSW50KSBvLndyaXRlX3NoaWZ0KC00LCAoKGZYMTAwID8gZDEwMCA6IGRhdGEpIDw8IDIpICsgKGZYMTAwICsgMikpO1xuXHRlbHNlIHRocm93IG5ldyBFcnJvcihcInVuc3VwcG9ydGVkIFJrTnVtYmVyIFwiICsgZGF0YSk7IC8vIFRPRE9cbn1cblxuXG4vKiBbTVMtWExTQl0gMi41LjExNyBSZlggKi9cbmZ1bmN0aW9uIHBhcnNlX1JmWChkYXRhIC8qOjosIGxlbmd0aCovKS8qOlJhbmdlKi8ge1xuXHR2YXIgY2VsbC8qOlJhbmdlKi8gPSAoeyBzOiB7fSwgZToge30gfS8qOmFueSovKTtcblx0Y2VsbC5zLnIgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdGNlbGwuZS5yID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHRjZWxsLnMuYyA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0Y2VsbC5lLmMgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdHJldHVybiBjZWxsO1xufVxuZnVuY3Rpb24gd3JpdGVfUmZYKHIvKjpSYW5nZSovLCBvKSB7XG5cdGlmICghbykgbyA9IG5ld19idWYoMTYpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIHIucy5yKTtcblx0by53cml0ZV9zaGlmdCg0LCByLmUucik7XG5cdG8ud3JpdGVfc2hpZnQoNCwgci5zLmMpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIHIuZS5jKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjUuMTUzIFVuY2hlY2tlZFJmWCAqL1xudmFyIHBhcnNlX1VuY2hlY2tlZFJmWCA9IHBhcnNlX1JmWDtcbnZhciB3cml0ZV9VbmNoZWNrZWRSZlggPSB3cml0ZV9SZlg7XG5cbi8qIFtNUy1YTFNCXSAyLjUuMTU1IFVuY2hlY2tlZFNxUmZYICovXG4vL2Z1bmN0aW9uIHBhcnNlX1VuY2hlY2tlZFNxUmZYKGRhdGEpIHtcbi8vXHR2YXIgY250ID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuLy9cdHZhciBvdXQgPSBbXTtcbi8vXHRmb3IodmFyIGkgPSAwOyBpIDwgY250OyArK2kpIHtcbi8vXHRcdHZhciBybmcgPSBwYXJzZV9VbmNoZWNrZWRSZlgoZGF0YSk7XG4vL1x0XHRvdXQucHVzaChlbmNvZGVfcmFuZ2Uocm5nKSk7XG4vL1x0fVxuLy9cdHJldHVybiBvdXQuam9pbihcIixcIik7XG4vL31cbi8vZnVuY3Rpb24gd3JpdGVfVW5jaGVja2VkU3FSZlgoc3FyZngvKjpzdHJpbmcqLykge1xuLy9cdHZhciBwYXJ0cyA9IHNxcmZ4LnNwbGl0KC9cXHMqLFxccyovKTtcbi8vXHR2YXIgbyA9IG5ld19idWYoNCk7IG8ud3JpdGVfc2hpZnQoNCwgcGFydHMubGVuZ3RoKTtcbi8vXHR2YXIgb3V0ID0gW29dO1xuLy9cdHBhcnRzLmZvckVhY2goZnVuY3Rpb24ocm5nKSB7XG4vL1x0XHRvdXQucHVzaCh3cml0ZV9VbmNoZWNrZWRSZlgoc2FmZV9kZWNvZGVfcmFuZ2Uocm5nKSkpO1xuLy9cdH0pO1xuLy9cdHJldHVybiBiY29uY2F0KG91dCk7XG4vL31cblxuLyogW01TLVhMU10gMi41LjM0MiA7IFtNUy1YTFNCXSAyLjUuMTcxICovXG4vKiBUT0RPOiBlcnJvciBjaGVja2luZywgTmFOIGFuZCBJbmZpbml0eSB2YWx1ZXMgYXJlIG5vdCB2YWxpZCBYbnVtICovXG5mdW5jdGlvbiBwYXJzZV9YbnVtKGRhdGEvKjo6LCBsZW5ndGgqLykge1xuXHRpZihkYXRhLmxlbmd0aCAtIGRhdGEubCA8IDgpIHRocm93IFwiWExTIFhudW0gQnVmZmVyIHVuZGVyZmxvd1wiO1xuXHRyZXR1cm4gZGF0YS5yZWFkX3NoaWZ0KDgsICdmJyk7XG59XG5mdW5jdGlvbiB3cml0ZV9YbnVtKGRhdGEsIG8pIHsgcmV0dXJuIChvIHx8IG5ld19idWYoOCkpLndyaXRlX3NoaWZ0KDgsIGRhdGEsICdmJyk7IH1cblxuLyogW01TLVhMU0JdIDIuNC4zMjQgQnJ0Q29sb3IgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydENvbG9yKGRhdGEvKjo6LCBsZW5ndGgqLykge1xuXHR2YXIgb3V0ID0ge307XG5cdHZhciBkID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXG5cdC8vdmFyIGZWYWxpZFJHQiA9IGQgJiAxO1xuXHR2YXIgeENvbG9yVHlwZSA9IGQgPj4+IDE7XG5cblx0dmFyIGluZGV4ID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHR2YXIgblRTID0gZGF0YS5yZWFkX3NoaWZ0KDIsICdpJyk7XG5cdHZhciBiUiA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0dmFyIGJHID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHR2YXIgYkIgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cdGRhdGEubCsrOyAvL3ZhciBiQWxwaGEgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cblx0c3dpdGNoICh4Q29sb3JUeXBlKSB7XG5cdFx0Y2FzZSAwOiBvdXQuYXV0byA9IDE7IGJyZWFrO1xuXHRcdGNhc2UgMTpcblx0XHRcdG91dC5pbmRleCA9IGluZGV4O1xuXHRcdFx0dmFyIGljdiA9IFhMU0ljdltpbmRleF07XG5cdFx0XHQvKiBhdXRvbWF0aWMgcHNldWRvIGluZGV4IDgxICovXG5cdFx0XHRpZiAoaWN2KSBvdXQucmdiID0gcmdiMkhleChpY3YpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAyOlxuXHRcdFx0LyogaWYoIWZWYWxpZFJHQikgdGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZFwiKTsgKi9cblx0XHRcdG91dC5yZ2IgPSByZ2IySGV4KFtiUiwgYkcsIGJCXSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDM6IG91dC50aGVtZSA9IGluZGV4OyBicmVhaztcblx0fVxuXHRpZiAoblRTICE9IDApIG91dC50aW50ID0gblRTID4gMCA/IG5UUyAvIDMyNzY3IDogblRTIC8gMzI3Njg7XG5cblx0cmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydENvbG9yKGNvbG9yLCBvKSB7XG5cdGlmICghbykgbyA9IG5ld19idWYoOCk7XG5cdGlmICghY29sb3IgfHwgY29sb3IuYXV0bykgeyBvLndyaXRlX3NoaWZ0KDQsIDApOyBvLndyaXRlX3NoaWZ0KDQsIDApOyByZXR1cm4gbzsgfVxuXHRpZiAoY29sb3IuaW5kZXggIT0gbnVsbCkge1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMHgwMik7XG5cdFx0by53cml0ZV9zaGlmdCgxLCBjb2xvci5pbmRleCk7XG5cdH0gZWxzZSBpZiAoY29sb3IudGhlbWUgIT0gbnVsbCkge1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMHgwNik7XG5cdFx0by53cml0ZV9zaGlmdCgxLCBjb2xvci50aGVtZSk7XG5cdH0gZWxzZSB7XG5cdFx0by53cml0ZV9zaGlmdCgxLCAweDA1KTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHR9XG5cdHZhciBuVFMgPSBjb2xvci50aW50IHx8IDA7XG5cdGlmIChuVFMgPiAwKSBuVFMgKj0gMzI3Njc7XG5cdGVsc2UgaWYgKG5UUyA8IDApIG5UUyAqPSAzMjc2ODtcblx0by53cml0ZV9zaGlmdCgyLCBuVFMpO1xuXHRpZiAoIWNvbG9yLnJnYiB8fCBjb2xvci50aGVtZSAhPSBudWxsKSB7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMCk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIHJnYiA9IChjb2xvci5yZ2IgfHwgJ0ZGRkZGRicpO1xuXHRcdGlmICh0eXBlb2YgcmdiID09ICdudW1iZXInKSByZ2IgPSAoXCIwMDAwMDBcIiArIHJnYi50b1N0cmluZygxNikpLnNsaWNlKC02KTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIHBhcnNlSW50KHJnYi5zbGljZSgwLCAyKSwgMTYpKTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIHBhcnNlSW50KHJnYi5zbGljZSgyLCA0KSwgMTYpKTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIHBhcnNlSW50KHJnYi5zbGljZSg0LCA2KSwgMTYpKTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIDB4RkYpO1xuXHR9XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi41LjUyICovXG5mdW5jdGlvbiBwYXJzZV9Gb250RmxhZ3MoZGF0YS8qOjosIGxlbmd0aCwgb3B0cyovKSB7XG5cdHZhciBkID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHRkYXRhLmwrKztcblx0dmFyIG91dCA9IHtcblx0XHRmQm9sZDogZCAmIDB4MDEsXG5cdFx0Zkl0YWxpYzogZCAmIDB4MDIsXG5cdFx0ZlVuZGVybGluZTogZCAmIDB4MDQsXG5cdFx0ZlN0cmlrZW91dDogZCAmIDB4MDgsXG5cdFx0Zk91dGxpbmU6IGQgJiAweDEwLFxuXHRcdGZTaGFkb3c6IGQgJiAweDIwLFxuXHRcdGZDb25kZW5zZTogZCAmIDB4NDAsXG5cdFx0ZkV4dGVuZDogZCAmIDB4ODBcblx0fTtcblx0cmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0ZvbnRGbGFncyhmb250LCBvKSB7XG5cdGlmICghbykgbyA9IG5ld19idWYoMik7XG5cdHZhciBncmJpdCA9XG5cdFx0KGZvbnQuaXRhbGljID8gMHgwMiA6IDApIHxcblx0XHQoZm9udC5zdHJpa2UgPyAweDA4IDogMCkgfFxuXHRcdChmb250Lm91dGxpbmUgPyAweDEwIDogMCkgfFxuXHRcdChmb250LnNoYWRvdyA/IDB4MjAgOiAwKSB8XG5cdFx0KGZvbnQuY29uZGVuc2UgPyAweDQwIDogMCkgfFxuXHRcdChmb250LmV4dGVuZCA/IDB4ODAgOiAwKTtcblx0by53cml0ZV9zaGlmdCgxLCBncmJpdCk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtT0xFRFNdIDIuMy4xIGFuZCAyLjMuMiAqL1xuZnVuY3Rpb24gcGFyc2VfQ2xpcGJvYXJkRm9ybWF0T3JTdHJpbmcobywgdy8qOm51bWJlciovKS8qOnN0cmluZyovIHtcblx0Ly8gJEZsb3dJZ25vcmVcblx0dmFyIENsaXBGbXQgPSB7IDI6IFwiQklUTUFQXCIsIDM6IFwiTUVUQUZJTEVQSUNUXCIsIDg6IFwiRElCXCIsIDE0OiBcIkVOSE1FVEFGSUxFXCIgfTtcblx0dmFyIG0vKjpudW1iZXIqLyA9IG8ucmVhZF9zaGlmdCg0KTtcblx0c3dpdGNoIChtKSB7XG5cdFx0Y2FzZSAweDAwMDAwMDAwOiByZXR1cm4gXCJcIjtcblx0XHRjYXNlIDB4ZmZmZmZmZmY6IGNhc2UgMHhmZmZmZmZmZTogcmV0dXJuIENsaXBGbXRbby5yZWFkX3NoaWZ0KDQpXSB8fCBcIlwiO1xuXHR9XG5cdGlmIChtID4gMHgxOTApIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIENsaXBib2FyZDogXCIgKyBtLnRvU3RyaW5nKDE2KSk7XG5cdG8ubCAtPSA0O1xuXHRyZXR1cm4gby5yZWFkX3NoaWZ0KDAsIHcgPT0gMSA/IFwibHBzdHJcIiA6IFwibHB3c3RyXCIpO1xufVxuZnVuY3Rpb24gcGFyc2VfQ2xpcGJvYXJkRm9ybWF0T3JBbnNpU3RyaW5nKG8pIHsgcmV0dXJuIHBhcnNlX0NsaXBib2FyZEZvcm1hdE9yU3RyaW5nKG8sIDEpOyB9XG5mdW5jdGlvbiBwYXJzZV9DbGlwYm9hcmRGb3JtYXRPclVuaWNvZGVTdHJpbmcobykgeyByZXR1cm4gcGFyc2VfQ2xpcGJvYXJkRm9ybWF0T3JTdHJpbmcobywgMik7IH1cblxuLyogW01TLU9MRVBTXSAyLjIgUHJvcGVydHlUeXBlICovXG4vLyBOb3RlOiBzb21lIHRyZWUgc2hha2VycyBjYW5ub3QgaGFuZGxlIFZUX1ZFQ1RPUiB8ICRDT05TVCwgaGVuY2UgZXh0cmEgdmFyc1xuLy92YXIgVlRfRU1QVFkgICAgPSAweDAwMDA7XG4vL3ZhciBWVF9OVUxMICAgICA9IDB4MDAwMTtcbnZhciBWVF9JMiAgICAgICA9IDB4MDAwMjtcbnZhciBWVF9JNCAgICAgICA9IDB4MDAwMztcbi8vdmFyIFZUX1I0ICAgICAgID0gMHgwMDA0O1xuLy92YXIgVlRfUjggICAgICAgPSAweDAwMDU7XG4vL3ZhciBWVF9DWSAgICAgICA9IDB4MDAwNjtcbi8vdmFyIFZUX0RBVEUgICAgID0gMHgwMDA3O1xuLy92YXIgVlRfQlNUUiAgICAgPSAweDAwMDg7XG4vL3ZhciBWVF9FUlJPUiAgICA9IDB4MDAwQTtcbnZhciBWVF9CT09MICAgICA9IDB4MDAwQjtcbnZhciBWVF9WQVJJQU5UICA9IDB4MDAwQztcbi8vdmFyIFZUX0RFQ0lNQUwgID0gMHgwMDBFO1xuLy92YXIgVlRfSTEgICAgICAgPSAweDAwMTA7XG4vL3ZhciBWVF9VSTEgICAgICA9IDB4MDAxMTtcbi8vdmFyIFZUX1VJMiAgICAgID0gMHgwMDEyO1xudmFyIFZUX1VJNCAgICAgID0gMHgwMDEzO1xuLy92YXIgVlRfSTggICAgICAgPSAweDAwMTQ7XG4vL3ZhciBWVF9VSTggICAgICA9IDB4MDAxNTtcbi8vdmFyIFZUX0lOVCAgICAgID0gMHgwMDE2O1xuLy92YXIgVlRfVUlOVCAgICAgPSAweDAwMTc7XG52YXIgVlRfTFBTVFIgICAgPSAweDAwMUU7XG4vL3ZhciBWVF9MUFdTVFIgICA9IDB4MDAxRjtcbnZhciBWVF9GSUxFVElNRSA9IDB4MDA0MDtcbnZhciBWVF9CTE9CICAgICA9IDB4MDA0MTtcbi8vdmFyIFZUX1NUUkVBTSAgID0gMHgwMDQyO1xuLy92YXIgVlRfU1RPUkFHRSAgPSAweDAwNDM7XG4vL3ZhciBWVF9TVFJFQU1FRF9PYmplY3QgID0gMHgwMDQ0O1xuLy92YXIgVlRfU1RPUkVEX09iamVjdCAgICA9IDB4MDA0NTtcbi8vdmFyIFZUX0JMT0JfT2JqZWN0ICAgICAgPSAweDAwNDY7XG52YXIgVlRfQ0YgICAgICAgPSAweDAwNDc7XG4vL3ZhciBWVF9DTFNJRCAgICA9IDB4MDA0ODtcbi8vdmFyIFZUX1ZFUlNJT05FRF9TVFJFQU0gPSAweDAwNDk7XG52YXIgVlRfVkVDVE9SICAgPSAweDEwMDA7XG52YXIgVlRfVkVDVE9SX1ZBUklBTlQgPSAweDEwMEM7XG52YXIgVlRfVkVDVE9SX0xQU1RSICAgPSAweDEwMUU7XG4vL3ZhciBWVF9BUlJBWSAgICA9IDB4MjAwMDtcblxudmFyIFZUX1NUUklORyAgID0gMHgwMDUwOyAvLyAyLjMuMy4xLjExIFZ0U3RyaW5nXG52YXIgVlRfVVNUUiAgICAgPSAweDAwNTE7IC8vIDIuMy4zLjEuMTIgVnRVbmFsaWduZWRTdHJpbmdcbnZhciBWVF9DVVNUT00gICA9IFtWVF9TVFJJTkcsIFZUX1VTVFJdO1xuXG4vKiBbTVMtT1NIQVJFRF0gMi4zLjMuMi4yLjEgRG9jdW1lbnQgU3VtbWFyeSBJbmZvcm1hdGlvbiBQSUREU0kgKi9cbnZhciBEb2NTdW1tYXJ5UElERFNJID0ge1xuXHQvKjo6WyovMHgwMS8qOjpdKi86IHsgbjogJ0NvZGVQYWdlJywgdDogVlRfSTIgfSxcblx0Lyo6OlsqLzB4MDIvKjo6XSovOiB7IG46ICdDYXRlZ29yeScsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgwMy8qOjpdKi86IHsgbjogJ1ByZXNlbnRhdGlvbkZvcm1hdCcsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgwNC8qOjpdKi86IHsgbjogJ0J5dGVDb3VudCcsIHQ6IFZUX0k0IH0sXG5cdC8qOjpbKi8weDA1Lyo6Ol0qLzogeyBuOiAnTGluZUNvdW50JywgdDogVlRfSTQgfSxcblx0Lyo6OlsqLzB4MDYvKjo6XSovOiB7IG46ICdQYXJhZ3JhcGhDb3VudCcsIHQ6IFZUX0k0IH0sXG5cdC8qOjpbKi8weDA3Lyo6Ol0qLzogeyBuOiAnU2xpZGVDb3VudCcsIHQ6IFZUX0k0IH0sXG5cdC8qOjpbKi8weDA4Lyo6Ol0qLzogeyBuOiAnTm90ZUNvdW50JywgdDogVlRfSTQgfSxcblx0Lyo6OlsqLzB4MDkvKjo6XSovOiB7IG46ICdIaWRkZW5Db3VudCcsIHQ6IFZUX0k0IH0sXG5cdC8qOjpbKi8weDBhLyo6Ol0qLzogeyBuOiAnTXVsdGltZWRpYUNsaXBDb3VudCcsIHQ6IFZUX0k0IH0sXG5cdC8qOjpbKi8weDBiLyo6Ol0qLzogeyBuOiAnU2NhbGVDcm9wJywgdDogVlRfQk9PTCB9LFxuXHQvKjo6WyovMHgwYy8qOjpdKi86IHsgbjogJ0hlYWRpbmdQYWlycycsIHQ6IFZUX1ZFQ1RPUl9WQVJJQU5UIC8qIFZUX1ZFQ1RPUiB8IFZUX1ZBUklBTlQgKi8gfSxcblx0Lyo6OlsqLzB4MGQvKjo6XSovOiB7IG46ICdUaXRsZXNPZlBhcnRzJywgdDogVlRfVkVDVE9SX0xQU1RSIC8qIFZUX1ZFQ1RPUiB8IFZUX0xQU1RSICovIH0sXG5cdC8qOjpbKi8weDBlLyo6Ol0qLzogeyBuOiAnTWFuYWdlcicsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgwZi8qOjpdKi86IHsgbjogJ0NvbXBhbnknLCB0OiBWVF9TVFJJTkcgfSxcblx0Lyo6OlsqLzB4MTAvKjo6XSovOiB7IG46ICdMaW5rc1VwVG9EYXRlJywgdDogVlRfQk9PTCB9LFxuXHQvKjo6WyovMHgxMS8qOjpdKi86IHsgbjogJ0NoYXJhY3RlckNvdW50JywgdDogVlRfSTQgfSxcblx0Lyo6OlsqLzB4MTMvKjo6XSovOiB7IG46ICdTaGFyZWREb2MnLCB0OiBWVF9CT09MIH0sXG5cdC8qOjpbKi8weDE2Lyo6Ol0qLzogeyBuOiAnSHlwZXJsaW5rc0NoYW5nZWQnLCB0OiBWVF9CT09MIH0sXG5cdC8qOjpbKi8weDE3Lyo6Ol0qLzogeyBuOiAnQXBwVmVyc2lvbicsIHQ6IFZUX0k0LCBwOiAndmVyc2lvbicgfSxcblx0Lyo6OlsqLzB4MTgvKjo6XSovOiB7IG46ICdEaWdTaWcnLCB0OiBWVF9CTE9CIH0sXG5cdC8qOjpbKi8weDFBLyo6Ol0qLzogeyBuOiAnQ29udGVudFR5cGUnLCB0OiBWVF9TVFJJTkcgfSxcblx0Lyo6OlsqLzB4MUIvKjo6XSovOiB7IG46ICdDb250ZW50U3RhdHVzJywgdDogVlRfU1RSSU5HIH0sXG5cdC8qOjpbKi8weDFDLyo6Ol0qLzogeyBuOiAnTGFuZ3VhZ2UnLCB0OiBWVF9TVFJJTkcgfSxcblx0Lyo6OlsqLzB4MUQvKjo6XSovOiB7IG46ICdWZXJzaW9uJywgdDogVlRfU1RSSU5HIH0sXG5cdC8qOjpbKi8weEZGLyo6Ol0qLzoge30sXG5cdC8qIFtNUy1PTEVQU10gMi4xOCAqL1xuXHQvKjo6WyovMHg4MDAwMDAwMC8qOjpdKi86IHsgbjogJ0xvY2FsZScsIHQ6IFZUX1VJNCB9LFxuXHQvKjo6WyovMHg4MDAwMDAwMy8qOjpdKi86IHsgbjogJ0JlaGF2aW9yJywgdDogVlRfVUk0IH0sXG5cdC8qOjpbKi8weDcyNjI3MjYyLyo6Ol0qLzoge31cbn07XG5cbi8qIFtNUy1PU0hBUkVEXSAyLjMuMy4yLjEuMSBTdW1tYXJ5IEluZm9ybWF0aW9uIFByb3BlcnR5IFNldCBQSURTSSAqL1xudmFyIFN1bW1hcnlQSURTSSA9IHtcblx0Lyo6OlsqLzB4MDEvKjo6XSovOiB7IG46ICdDb2RlUGFnZScsIHQ6IFZUX0kyIH0sXG5cdC8qOjpbKi8weDAyLyo6Ol0qLzogeyBuOiAnVGl0bGUnLCB0OiBWVF9TVFJJTkcgfSxcblx0Lyo6OlsqLzB4MDMvKjo6XSovOiB7IG46ICdTdWJqZWN0JywgdDogVlRfU1RSSU5HIH0sXG5cdC8qOjpbKi8weDA0Lyo6Ol0qLzogeyBuOiAnQXV0aG9yJywgdDogVlRfU1RSSU5HIH0sXG5cdC8qOjpbKi8weDA1Lyo6Ol0qLzogeyBuOiAnS2V5d29yZHMnLCB0OiBWVF9TVFJJTkcgfSxcblx0Lyo6OlsqLzB4MDYvKjo6XSovOiB7IG46ICdDb21tZW50cycsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgwNy8qOjpdKi86IHsgbjogJ1RlbXBsYXRlJywgdDogVlRfU1RSSU5HIH0sXG5cdC8qOjpbKi8weDA4Lyo6Ol0qLzogeyBuOiAnTGFzdEF1dGhvcicsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgwOS8qOjpdKi86IHsgbjogJ1Jldk51bWJlcicsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgwQS8qOjpdKi86IHsgbjogJ0VkaXRUaW1lJywgdDogVlRfRklMRVRJTUUgfSxcblx0Lyo6OlsqLzB4MEIvKjo6XSovOiB7IG46ICdMYXN0UHJpbnRlZCcsIHQ6IFZUX0ZJTEVUSU1FIH0sXG5cdC8qOjpbKi8weDBDLyo6Ol0qLzogeyBuOiAnQ3JlYXRlZERhdGUnLCB0OiBWVF9GSUxFVElNRSB9LFxuXHQvKjo6WyovMHgwRC8qOjpdKi86IHsgbjogJ01vZGlmaWVkRGF0ZScsIHQ6IFZUX0ZJTEVUSU1FIH0sXG5cdC8qOjpbKi8weDBFLyo6Ol0qLzogeyBuOiAnUGFnZUNvdW50JywgdDogVlRfSTQgfSxcblx0Lyo6OlsqLzB4MEYvKjo6XSovOiB7IG46ICdXb3JkQ291bnQnLCB0OiBWVF9JNCB9LFxuXHQvKjo6WyovMHgxMC8qOjpdKi86IHsgbjogJ0NoYXJDb3VudCcsIHQ6IFZUX0k0IH0sXG5cdC8qOjpbKi8weDExLyo6Ol0qLzogeyBuOiAnVGh1bWJuYWlsJywgdDogVlRfQ0YgfSxcblx0Lyo6OlsqLzB4MTIvKjo6XSovOiB7IG46ICdBcHBsaWNhdGlvbicsIHQ6IFZUX1NUUklORyB9LFxuXHQvKjo6WyovMHgxMy8qOjpdKi86IHsgbjogJ0RvY1NlY3VyaXR5JywgdDogVlRfSTQgfSxcblx0Lyo6OlsqLzB4RkYvKjo6XSovOiB7fSxcblx0LyogW01TLU9MRVBTXSAyLjE4ICovXG5cdC8qOjpbKi8weDgwMDAwMDAwLyo6Ol0qLzogeyBuOiAnTG9jYWxlJywgdDogVlRfVUk0IH0sXG5cdC8qOjpbKi8weDgwMDAwMDAzLyo6Ol0qLzogeyBuOiAnQmVoYXZpb3InLCB0OiBWVF9VSTQgfSxcblx0Lyo6OlsqLzB4NzI2MjcyNjIvKjo6XSovOiB7fVxufTtcblxuLyogW01TLVhMU10gMi40LjYzIENvdW50cnkvUmVnaW9uIGNvZGVzICovXG52YXIgQ291bnRyeUVudW0gPSB7XG5cdC8qOjpbKi8weDAwMDEvKjo6XSovOiBcIlVTXCIsIC8vIFVuaXRlZCBTdGF0ZXNcblx0Lyo6OlsqLzB4MDAwMi8qOjpdKi86IFwiQ0FcIiwgLy8gQ2FuYWRhXG5cdC8qOjpbKi8weDAwMDMvKjo6XSovOiBcIlwiLCAvLyBMYXRpbiBBbWVyaWNhIChleGNlcHQgQnJhemlsKVxuXHQvKjo6WyovMHgwMDA3Lyo6Ol0qLzogXCJSVVwiLCAvLyBSdXNzaWFcblx0Lyo6OlsqLzB4MDAxNC8qOjpdKi86IFwiRUdcIiwgLy8gRWd5cHRcblx0Lyo6OlsqLzB4MDAxRS8qOjpdKi86IFwiR1JcIiwgLy8gR3JlZWNlXG5cdC8qOjpbKi8weDAwMUYvKjo6XSovOiBcIk5MXCIsIC8vIE5ldGhlcmxhbmRzXG5cdC8qOjpbKi8weDAwMjAvKjo6XSovOiBcIkJFXCIsIC8vIEJlbGdpdW1cblx0Lyo6OlsqLzB4MDAyMS8qOjpdKi86IFwiRlJcIiwgLy8gRnJhbmNlXG5cdC8qOjpbKi8weDAwMjIvKjo6XSovOiBcIkVTXCIsIC8vIFNwYWluXG5cdC8qOjpbKi8weDAwMjQvKjo6XSovOiBcIkhVXCIsIC8vIEh1bmdhcnlcblx0Lyo6OlsqLzB4MDAyNy8qOjpdKi86IFwiSVRcIiwgLy8gSXRhbHlcblx0Lyo6OlsqLzB4MDAyOS8qOjpdKi86IFwiQ0hcIiwgLy8gU3dpdHplcmxhbmRcblx0Lyo6OlsqLzB4MDAyQi8qOjpdKi86IFwiQVRcIiwgLy8gQXVzdHJpYVxuXHQvKjo6WyovMHgwMDJDLyo6Ol0qLzogXCJHQlwiLCAvLyBVbml0ZWQgS2luZ2RvbVxuXHQvKjo6WyovMHgwMDJELyo6Ol0qLzogXCJES1wiLCAvLyBEZW5tYXJrXG5cdC8qOjpbKi8weDAwMkUvKjo6XSovOiBcIlNFXCIsIC8vIFN3ZWRlblxuXHQvKjo6WyovMHgwMDJGLyo6Ol0qLzogXCJOT1wiLCAvLyBOb3J3YXlcblx0Lyo6OlsqLzB4MDAzMC8qOjpdKi86IFwiUExcIiwgLy8gUG9sYW5kXG5cdC8qOjpbKi8weDAwMzEvKjo6XSovOiBcIkRFXCIsIC8vIEdlcm1hbnlcblx0Lyo6OlsqLzB4MDAzNC8qOjpdKi86IFwiTVhcIiwgLy8gTWV4aWNvXG5cdC8qOjpbKi8weDAwMzcvKjo6XSovOiBcIkJSXCIsIC8vIEJyYXppbFxuXHQvKjo6WyovMHgwMDNkLyo6Ol0qLzogXCJBVVwiLCAvLyBBdXN0cmFsaWFcblx0Lyo6OlsqLzB4MDA0MC8qOjpdKi86IFwiTlpcIiwgLy8gTmV3IFplYWxhbmRcblx0Lyo6OlsqLzB4MDA0Mi8qOjpdKi86IFwiVEhcIiwgLy8gVGhhaWxhbmRcblx0Lyo6OlsqLzB4MDA1MS8qOjpdKi86IFwiSlBcIiwgLy8gSmFwYW5cblx0Lyo6OlsqLzB4MDA1Mi8qOjpdKi86IFwiS1JcIiwgLy8gS29yZWFcblx0Lyo6OlsqLzB4MDA1NC8qOjpdKi86IFwiVk5cIiwgLy8gVmlldCBOYW1cblx0Lyo6OlsqLzB4MDA1Ni8qOjpdKi86IFwiQ05cIiwgLy8gQ2hpbmFcblx0Lyo6OlsqLzB4MDA1QS8qOjpdKi86IFwiVFJcIiwgLy8gVHVya2V5XG5cdC8qOjpbKi8weDAwNjkvKjo6XSovOiBcIkpTXCIsIC8vIFJhbWFzdGFuXG5cdC8qOjpbKi8weDAwRDUvKjo6XSovOiBcIkRaXCIsIC8vIEFsZ2VyaWFcblx0Lyo6OlsqLzB4MDBEOC8qOjpdKi86IFwiTUFcIiwgLy8gTW9yb2Njb1xuXHQvKjo6WyovMHgwMERBLyo6Ol0qLzogXCJMWVwiLCAvLyBMaWJ5YVxuXHQvKjo6WyovMHgwMTVGLyo6Ol0qLzogXCJQVFwiLCAvLyBQb3J0dWdhbFxuXHQvKjo6WyovMHgwMTYyLyo6Ol0qLzogXCJJU1wiLCAvLyBJY2VsYW5kXG5cdC8qOjpbKi8weDAxNjYvKjo6XSovOiBcIkZJXCIsIC8vIEZpbmxhbmRcblx0Lyo6OlsqLzB4MDFBNC8qOjpdKi86IFwiQ1pcIiwgLy8gQ3plY2ggUmVwdWJsaWNcblx0Lyo6OlsqLzB4MDM3Ni8qOjpdKi86IFwiVFdcIiwgLy8gVGFpd2FuXG5cdC8qOjpbKi8weDAzQzEvKjo6XSovOiBcIkxCXCIsIC8vIExlYmFub25cblx0Lyo6OlsqLzB4MDNDMi8qOjpdKi86IFwiSk9cIiwgLy8gSm9yZGFuXG5cdC8qOjpbKi8weDAzQzMvKjo6XSovOiBcIlNZXCIsIC8vIFN5cmlhXG5cdC8qOjpbKi8weDAzQzQvKjo6XSovOiBcIklRXCIsIC8vIElyYXFcblx0Lyo6OlsqLzB4MDNDNS8qOjpdKi86IFwiS1dcIiwgLy8gS3V3YWl0XG5cdC8qOjpbKi8weDAzQzYvKjo6XSovOiBcIlNBXCIsIC8vIFNhdWRpIEFyYWJpYVxuXHQvKjo6WyovMHgwM0NCLyo6Ol0qLzogXCJBRVwiLCAvLyBVbml0ZWQgQXJhYiBFbWlyYXRlc1xuXHQvKjo6WyovMHgwM0NDLyo6Ol0qLzogXCJJTFwiLCAvLyBJc3JhZWxcblx0Lyo6OlsqLzB4MDNDRS8qOjpdKi86IFwiUUFcIiwgLy8gUWF0YXJcblx0Lyo6OlsqLzB4MDNENS8qOjpdKi86IFwiSVJcIiwgLy8gSXJhblxuXHQvKjo6WyovMHhGRkZGLyo6Ol0qLzogXCJVU1wiICAvLyBVbml0ZWQgU3RhdGVzXG59O1xuXG4vKiBbTVMtWExTXSAyLjUuMTI3ICovXG52YXIgWExTRmlsbFBhdHRlcm4gPSBbXG5cdG51bGwsXG5cdCdzb2xpZCcsXG5cdCdtZWRpdW1HcmF5Jyxcblx0J2RhcmtHcmF5Jyxcblx0J2xpZ2h0R3JheScsXG5cdCdkYXJrSG9yaXpvbnRhbCcsXG5cdCdkYXJrVmVydGljYWwnLFxuXHQnZGFya0Rvd24nLFxuXHQnZGFya1VwJyxcblx0J2RhcmtHcmlkJyxcblx0J2RhcmtUcmVsbGlzJyxcblx0J2xpZ2h0SG9yaXpvbnRhbCcsXG5cdCdsaWdodFZlcnRpY2FsJyxcblx0J2xpZ2h0RG93bicsXG5cdCdsaWdodFVwJyxcblx0J2xpZ2h0R3JpZCcsXG5cdCdsaWdodFRyZWxsaXMnLFxuXHQnZ3JheTEyNScsXG5cdCdncmF5MDYyNSdcbl07XG5cbmZ1bmN0aW9uIHJnYmlmeShhcnIvKjpBcnJheTxudW1iZXI+Ki8pLyo6QXJyYXk8W251bWJlciwgbnVtYmVyLCBudW1iZXJdPiovIHsgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4gWyh4Pj4xNikmMjU1LCh4Pj44KSYyNTUseCYyNTVdOyB9KTsgfVxuXG4vKiBbTVMtWExTXSAyLjUuMTYxICovXG4vKiBbTVMtWExTQl0gMi41Ljc1IEljdiAqL1xudmFyIF9YTFNJY3YgPSAvKiNfX1BVUkVfXyovIHJnYmlmeShbXG5cdC8qIENvbG9yIENvbnN0YW50cyAqL1xuXHQweDAwMDAwMCxcblx0MHhGRkZGRkYsXG5cdDB4RkYwMDAwLFxuXHQweDAwRkYwMCxcblx0MHgwMDAwRkYsXG5cdDB4RkZGRjAwLFxuXHQweEZGMDBGRixcblx0MHgwMEZGRkYsXG5cblx0LyogT3ZlcnJpZGFibGUgRGVmYXVsdHMgKi9cblx0MHgwMDAwMDAsXG5cdDB4RkZGRkZGLFxuXHQweEZGMDAwMCxcblx0MHgwMEZGMDAsXG5cdDB4MDAwMEZGLFxuXHQweEZGRkYwMCxcblx0MHhGRjAwRkYsXG5cdDB4MDBGRkZGLFxuXG5cdDB4ODAwMDAwLFxuXHQweDAwODAwMCxcblx0MHgwMDAwODAsXG5cdDB4ODA4MDAwLFxuXHQweDgwMDA4MCxcblx0MHgwMDgwODAsXG5cdDB4QzBDMEMwLFxuXHQweDgwODA4MCxcblx0MHg5OTk5RkYsXG5cdDB4OTkzMzY2LFxuXHQweEZGRkZDQyxcblx0MHhDQ0ZGRkYsXG5cdDB4NjYwMDY2LFxuXHQweEZGODA4MCxcblx0MHgwMDY2Q0MsXG5cdDB4Q0NDQ0ZGLFxuXG5cdDB4MDAwMDgwLFxuXHQweEZGMDBGRixcblx0MHhGRkZGMDAsXG5cdDB4MDBGRkZGLFxuXHQweDgwMDA4MCxcblx0MHg4MDAwMDAsXG5cdDB4MDA4MDgwLFxuXHQweDAwMDBGRixcblx0MHgwMENDRkYsXG5cdDB4Q0NGRkZGLFxuXHQweENDRkZDQyxcblx0MHhGRkZGOTksXG5cdDB4OTlDQ0ZGLFxuXHQweEZGOTlDQyxcblx0MHhDQzk5RkYsXG5cdDB4RkZDQzk5LFxuXG5cdDB4MzM2NkZGLFxuXHQweDMzQ0NDQyxcblx0MHg5OUNDMDAsXG5cdDB4RkZDQzAwLFxuXHQweEZGOTkwMCxcblx0MHhGRjY2MDAsXG5cdDB4NjY2Njk5LFxuXHQweDk2OTY5Nixcblx0MHgwMDMzNjYsXG5cdDB4MzM5OTY2LFxuXHQweDAwMzMwMCxcblx0MHgzMzMzMDAsXG5cdDB4OTkzMzAwLFxuXHQweDk5MzM2Nixcblx0MHgzMzMzOTksXG5cdDB4MzMzMzMzLFxuXG5cdC8qIE90aGVyIGVudHJpZXMgdG8gYXBwZWFzZSBCSUZGOC8xMiAqL1xuXHQweEZGRkZGRiwgLyogMHg0MCBpY3ZGb3JlZ3JvdW5kID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDQxIGljdkJhY2tncm91bmQgPz8gKi9cblx0MHgwMDAwMDAsIC8qIDB4NDIgaWN2RnJhbWUgPz8gKi9cblx0MHgwMDAwMDAsIC8qIDB4NDMgaWN2M0QgPz8gKi9cblx0MHgwMDAwMDAsIC8qIDB4NDQgaWN2M0RUZXh0ID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDQ1IGljdjNESGlsaXRlID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDQ2IGljdjNEU2hhZG93ID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDQ3IGljdkhpbGl0ZSA/PyAqL1xuXHQweDAwMDAwMCwgLyogMHg0OCBpY3ZDdGxUZXh0ID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDQ5IGljdkN0bFNjcmwgPz8gKi9cblx0MHgwMDAwMDAsIC8qIDB4NEEgaWN2Q3RsSW52ID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDRCIGljdkN0bEJvZHkgPz8gKi9cblx0MHgwMDAwMDAsIC8qIDB4NEMgaWN2Q3RsRnJhbWUgPz8gKi9cblx0MHgwMDAwMDAsIC8qIDB4NEQgaWN2Q3RsRm9yZSA/PyAqL1xuXHQweDAwMDAwMCwgLyogMHg0RSBpY3ZDdGxCYWNrID8/ICovXG5cdDB4MDAwMDAwLCAvKiAweDRGIGljdkN0bE5ldXRyYWwgKi9cblx0MHgwMDAwMDAsIC8qIDB4NTAgaWN2SW5mb0JrID8/ICovXG5cdDB4MDAwMDAwIC8qIDB4NTEgaWN2SW5mb1RleHQgPz8gKi9cbl0pO1xudmFyIFhMU0ljdiA9IC8qI19fUFVSRV9fKi9kdXAoX1hMU0ljdik7XG5cbi8qIFtNUy1YTFNCXSAyLjUuOTcuMiAqL1xudmFyIEJFcnIgPSB7XG5cdC8qOjpbKi8weDAwLyo6Ol0qLzogXCIjTlVMTCFcIixcblx0Lyo6OlsqLzB4MDcvKjo6XSovOiBcIiNESVYvMCFcIixcblx0Lyo6OlsqLzB4MEYvKjo6XSovOiBcIiNWQUxVRSFcIixcblx0Lyo6OlsqLzB4MTcvKjo6XSovOiBcIiNSRUYhXCIsXG5cdC8qOjpbKi8weDFELyo6Ol0qLzogXCIjTkFNRT9cIixcblx0Lyo6OlsqLzB4MjQvKjo6XSovOiBcIiNOVU0hXCIsXG5cdC8qOjpbKi8weDJBLyo6Ol0qLzogXCIjTi9BXCIsXG5cdC8qOjpbKi8weDJCLyo6Ol0qLzogXCIjR0VUVElOR19EQVRBXCIsXG5cdC8qOjpbKi8weEZGLyo6Ol0qLzogXCIjV1RGP1wiXG59O1xuLy92YXIgUkJFcnIgPSBldmVydF9udW0oQkVycik7XG52YXIgUkJFcnIgPSB7XG5cdFwiI05VTEwhXCI6ICAgICAgICAweDAwLFxuXHRcIiNESVYvMCFcIjogICAgICAgMHgwNyxcblx0XCIjVkFMVUUhXCI6ICAgICAgIDB4MEYsXG5cdFwiI1JFRiFcIjogICAgICAgICAweDE3LFxuXHRcIiNOQU1FP1wiOiAgICAgICAgMHgxRCxcblx0XCIjTlVNIVwiOiAgICAgICAgIDB4MjQsXG5cdFwiI04vQVwiOiAgICAgICAgICAweDJBLFxuXHRcIiNHRVRUSU5HX0RBVEFcIjogMHgyQixcblx0XCIjV1RGP1wiOiAgICAgICAgIDB4RkZcbn07XG5cbi8qIFBhcnRzIGVudW1lcmF0ZWQgaW4gT1BDIHNwZWMsIE1TLVhMU0IgYW5kIE1TLVhMU1ggKi9cbi8qIDEyLjMgUGFydCBTdW1tYXJ5IDxTcHJlYWRzaGVldE1MPiAqL1xuLyogMTQuMiBQYXJ0IFN1bW1hcnkgPERyYXdpbmdNTD4gKi9cbi8qIFtNUy1YTFNYXSAyLjEgUGFydCBFbnVtZXJhdGlvbnMgOyBbTVMtWExTQl0gMi4xLjcgUGFydCBFbnVtZXJhdGlvbiAqL1xudmFyIGN0MnR5cGUvKntbc3RyaW5nXTpzdHJpbmd9Ki8gPSAoe1xuXHQvKiBXb3JrYm9vayAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0Lm1haW4reG1sXCI6IFwid29ya2Jvb2tzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnNoZWV0Lm1hY3JvRW5hYmxlZC5tYWluK3htbFwiOiBcIndvcmtib29rc1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5iaW5hcnkubWFjcm9FbmFibGVkLm1haW5cIjogXCJ3b3JrYm9va3NcIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuYWRkaW4ubWFjcm9FbmFibGVkLm1haW4reG1sXCI6IFwid29ya2Jvb2tzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwudGVtcGxhdGUubWFpbit4bWxcIjogXCJ3b3JrYm9va3NcIixcblxuXHQvKiBXb3Jrc2hlZXQgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC53b3Jrc2hlZXQreG1sXCI6IFwic2hlZXRzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLndvcmtzaGVldFwiOiBcInNoZWV0c1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5iaW5JbmRleFdzXCI6IFwiVE9ET1wiLCAvKiBCaW5hcnkgSW5kZXggKi9cblxuXHQvKiBDaGFydHNoZWV0ICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuY2hhcnRzaGVldCt4bWxcIjogXCJjaGFydHNcIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuY2hhcnRzaGVldFwiOiBcImNoYXJ0c1wiLFxuXG5cdC8qIE1hY3Jvc2hlZXQgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwubWFjcm9zaGVldCt4bWxcIjogXCJtYWNyb3NcIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwubWFjcm9zaGVldFwiOiBcIm1hY3Jvc1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5pbnRsbWFjcm9zaGVldFwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuYmluSW5kZXhNc1wiOiBcIlRPRE9cIiwgLyogQmluYXJ5IEluZGV4ICovXG5cblx0LyogRGlhbG9nc2hlZXQgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5kaWFsb2dzaGVldCt4bWxcIjogXCJkaWFsb2dzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmRpYWxvZ3NoZWV0XCI6IFwiZGlhbG9nc1wiLFxuXG5cdC8qIFNoYXJlZCBTdHJpbmdzICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hhcmVkU3RyaW5ncyt4bWxcIjogXCJzdHJzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnNoYXJlZFN0cmluZ3NcIjogXCJzdHJzXCIsXG5cblx0LyogU3R5bGVzICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc3R5bGVzK3htbFwiOiBcInN0eWxlc1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zdHlsZXNcIjogXCJzdHlsZXNcIixcblxuXHQvKiBGaWxlIFByb3BlcnRpZXMgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5jb3JlLXByb3BlcnRpZXMreG1sXCI6IFwiY29yZXByb3BzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LmN1c3RvbS1wcm9wZXJ0aWVzK3htbFwiOiBcImN1c3Rwcm9wc1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5leHRlbmRlZC1wcm9wZXJ0aWVzK3htbFwiOiBcImV4dHByb3BzXCIsXG5cblx0LyogQ3VzdG9tIERhdGEgUHJvcGVydGllcyAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5jdXN0b21YbWxQcm9wZXJ0aWVzK3htbFwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5jdXN0b21Qcm9wZXJ0eVwiOiBcIlRPRE9cIixcblxuXHQvKiBDb21tZW50cyAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLmNvbW1lbnRzK3htbFwiOiBcImNvbW1lbnRzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmNvbW1lbnRzXCI6IFwiY29tbWVudHNcIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwudGhyZWFkZWRjb21tZW50cyt4bWxcIjogXCJ0aHJlYWRlZGNvbW1lbnRzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnBlcnNvbit4bWxcIjogXCJwZW9wbGVcIixcblxuXHQvKiBNZXRhZGF0YSAoU3RvY2svR2VvZ3JhcGh5IGFuZCBEeW5hbWljIEFycmF5KSAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0TWV0YWRhdGEreG1sXCI6IFwibWV0YWRhdGFcIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuc2hlZXRNZXRhZGF0YVwiOiBcIm1ldGFkYXRhXCIsXG5cblx0LyogUGl2b3RUYWJsZSAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5waXZvdFRhYmxlXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnBpdm90VGFibGUreG1sXCI6IFwiVE9ET1wiLFxuXG5cdC8qIENoYXJ0IE9iamVjdHMgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuZHJhd2luZ21sLmNoYXJ0K3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBDaGFydCBDb2xvcnMgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtb2ZmaWNlLmNoYXJ0Y29sb3JzdHlsZSt4bWxcIjogXCJUT0RPXCIsXG5cblx0LyogQ2hhcnQgU3R5bGUgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtb2ZmaWNlLmNoYXJ0c3R5bGUreG1sXCI6IFwiVE9ET1wiLFxuXG5cdC8qIENoYXJ0IEFkdmFuY2VkICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLW9mZmljZS5jaGFydGV4K3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBDYWxjdWxhdGlvbiBDaGFpbiAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5jYWxjQ2hhaW5cIjogXCJjYWxjY2hhaW5zXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuY2FsY0NoYWluK3htbFwiOiBcImNhbGNjaGFpbnNcIixcblxuXHQvKiBQcmludGVyIFNldHRpbmdzICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwucHJpbnRlclNldHRpbmdzXCI6IFwiVE9ET1wiLFxuXG5cdC8qIEFjdGl2ZVggKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtb2ZmaWNlLmFjdGl2ZVhcIjogXCJUT0RPXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLW9mZmljZS5hY3RpdmVYK3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBDdXN0b20gVG9vbGJhcnMgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuYXR0YWNoZWRUb29sYmFyc1wiOiBcIlRPRE9cIixcblxuXHQvKiBFeHRlcm5hbCBEYXRhIENvbm5lY3Rpb25zICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmNvbm5lY3Rpb25zXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLmNvbm5lY3Rpb25zK3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBFeHRlcm5hbCBMaW5rcyAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5leHRlcm5hbExpbmtcIjogXCJsaW5rc1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLmV4dGVybmFsTGluayt4bWxcIjogXCJsaW5rc1wiLFxuXG5cdC8qIFBpdm90Q2FjaGUgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwucGl2b3RDYWNoZURlZmluaXRpb25cIjogXCJUT0RPXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnBpdm90Q2FjaGVSZWNvcmRzXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnBpdm90Q2FjaGVEZWZpbml0aW9uK3htbFwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5waXZvdENhY2hlUmVjb3Jkcyt4bWxcIjogXCJUT0RPXCIsXG5cblx0LyogUXVlcnkgVGFibGUgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwucXVlcnlUYWJsZVwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5xdWVyeVRhYmxlK3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBTaGFyZWQgV29ya2Jvb2sgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwudXNlck5hbWVzXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5yZXZpc2lvbkhlYWRlcnNcIjogXCJUT0RPXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnJldmlzaW9uTG9nXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnJldmlzaW9uSGVhZGVycyt4bWxcIjogXCJUT0RPXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwucmV2aXNpb25Mb2creG1sXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnVzZXJOYW1lcyt4bWxcIjogXCJUT0RPXCIsXG5cblx0LyogU2luZ2xlIENlbGwgVGFibGUgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwudGFibGVTaW5nbGVDZWxsc1wiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC50YWJsZVNpbmdsZUNlbGxzK3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBTbGljZXIgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuc2xpY2VyXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zbGljZXJDYWNoZVwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuc2xpY2VyK3htbFwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuc2xpY2VyQ2FjaGUreG1sXCI6IFwiVE9ET1wiLFxuXG5cdC8qIFNvcnQgTWFwICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLndzU29ydE1hcFwiOiBcIlRPRE9cIixcblxuXHQvKiBUYWJsZSAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC50YWJsZVwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC50YWJsZSt4bWxcIjogXCJUT0RPXCIsXG5cblx0LyogVGhlbWVzICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnRoZW1lK3htbFwiOiBcInRoZW1lc1wiLFxuXG5cdC8qIFRoZW1lIE92ZXJyaWRlICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnRoZW1lT3ZlcnJpZGUreG1sXCI6IFwiVE9ET1wiLFxuXG5cdC8qIFRpbWVsaW5lICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLlRpbWVsaW5lK3htbFwiOiBcIlRPRE9cIiwgLyogdmVyaWZ5ICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLlRpbWVsaW5lQ2FjaGUreG1sXCI6IFwiVE9ET1wiLCAvKiB2ZXJpZnkgKi9cblxuXHQvKiBWQkEgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQubXMtb2ZmaWNlLnZiYVByb2plY3RcIjogXCJ2YmFcIixcblx0XCJhcHBsaWNhdGlvbi92bmQubXMtb2ZmaWNlLnZiYVByb2plY3RTaWduYXR1cmVcIjogXCJUT0RPXCIsXG5cblx0LyogVm9sYXRpbGUgRGVwZW5kZW5jaWVzICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLW9mZmljZS52b2xhdGlsZURlcGVuZGVuY2llc1wiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC52b2xhdGlsZURlcGVuZGVuY2llcyt4bWxcIjogXCJUT0RPXCIsXG5cblx0LyogQ29udHJvbCBQcm9wZXJ0aWVzICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmNvbnRyb2xwcm9wZXJ0aWVzK3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBEYXRhIE1vZGVsICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50Lm1vZGVsK2RhdGFcIjogXCJUT0RPXCIsXG5cblx0LyogU3VydmV5ICovXG5cdFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLlN1cnZleSt4bWxcIjogXCJUT0RPXCIsXG5cblx0LyogRHJhd2luZyAqL1xuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5kcmF3aW5nK3htbFwiOiBcImRyYXdpbmdzXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LmRyYXdpbmdtbC5jaGFydHNoYXBlcyt4bWxcIjogXCJUT0RPXCIsXG5cdFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LmRyYXdpbmdtbC5kaWFncmFtQ29sb3JzK3htbFwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuZHJhd2luZ21sLmRpYWdyYW1EYXRhK3htbFwiOiBcIlRPRE9cIixcblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuZHJhd2luZ21sLmRpYWdyYW1MYXlvdXQreG1sXCI6IFwiVE9ET1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5kcmF3aW5nbWwuZGlhZ3JhbVN0eWxlK3htbFwiOiBcIlRPRE9cIixcblxuXHQvKiBWTUwgKi9cblx0XCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQudm1sRHJhd2luZ1wiOiBcIlRPRE9cIixcblxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1wYWNrYWdlLnJlbGF0aW9uc2hpcHMreG1sXCI6IFwicmVsc1wiLFxuXHRcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5vbGVPYmplY3RcIjogXCJUT0RPXCIsXG5cblx0LyogSW1hZ2UgKi9cblx0XCJpbWFnZS9wbmdcIjogXCJUT0RPXCIsXG5cblx0XCJzaGVldFwiOiBcImpzXCJcbn0vKjphbnkqLyk7XG5cbnZhciBDVF9MSVNUID0ge1xuXHRcdHdvcmtib29rczoge1xuXHRcdFx0eGxzeDogXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zaGVldC5tYWluK3htbFwiLFxuXHRcdFx0eGxzbTogXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuc2hlZXQubWFjcm9FbmFibGVkLm1haW4reG1sXCIsXG5cdFx0XHR4bHNiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5iaW5hcnkubWFjcm9FbmFibGVkLm1haW5cIixcblx0XHRcdHhsYW06IFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmFkZGluLm1hY3JvRW5hYmxlZC5tYWluK3htbFwiLFxuXHRcdFx0eGx0eDogXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC50ZW1wbGF0ZS5tYWluK3htbFwiXG5cdFx0fSxcblx0XHRzdHJzOiB7IC8qIFNoYXJlZCBTdHJpbmdzICovXG5cdFx0XHR4bHN4OiBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoYXJlZFN0cmluZ3MreG1sXCIsXG5cdFx0XHR4bHNiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGFyZWRTdHJpbmdzXCJcblx0XHR9LFxuXHRcdGNvbW1lbnRzOiB7IC8qIENvbW1lbnRzICovXG5cdFx0XHR4bHN4OiBcImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLmNvbW1lbnRzK3htbFwiLFxuXHRcdFx0eGxzYjogXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwuY29tbWVudHNcIlxuXHRcdH0sXG5cdFx0c2hlZXRzOiB7IC8qIFdvcmtzaGVldCAqL1xuXHRcdFx0eGxzeDogXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC53b3Jrc2hlZXQreG1sXCIsXG5cdFx0XHR4bHNiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC53b3Jrc2hlZXRcIlxuXHRcdH0sXG5cdFx0Y2hhcnRzOiB7IC8qIENoYXJ0c2hlZXQgKi9cblx0XHRcdHhsc3g6IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuY2hhcnRzaGVldCt4bWxcIixcblx0XHRcdHhsc2I6IFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmNoYXJ0c2hlZXRcIlxuXHRcdH0sXG5cdFx0ZGlhbG9nczogeyAvKiBEaWFsb2dzaGVldCAqL1xuXHRcdFx0eGxzeDogXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5kaWFsb2dzaGVldCt4bWxcIixcblx0XHRcdHhsc2I6IFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLmRpYWxvZ3NoZWV0XCJcblx0XHR9LFxuXHRcdG1hY3JvczogeyAvKiBNYWNyb3NoZWV0IChFeGNlbCA0LjAgTWFjcm9zKSAqL1xuXHRcdFx0eGxzeDogXCJhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwubWFjcm9zaGVldCt4bWxcIixcblx0XHRcdHhsc2I6IFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLm1hY3Jvc2hlZXRcIlxuXHRcdH0sXG5cdFx0bWV0YWRhdGE6IHsgLyogTWV0YWRhdGEgKFN0b2NrL0dlb2dyYXBoeSBhbmQgRHluYW1pYyBBcnJheSkgKi9cblx0XHRcdHhsc3g6IFwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXRNZXRhZGF0YSt4bWxcIixcblx0XHRcdHhsc2I6IFwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsLnNoZWV0TWV0YWRhdGFcIlxuXHRcdH0sXG5cdFx0c3R5bGVzOiB7IC8qIFN0eWxlcyAqL1xuXHRcdFx0eGxzeDogXCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQuc3ByZWFkc2hlZXRtbC5zdHlsZXMreG1sXCIsXG5cdFx0XHR4bHNiOiBcImFwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zdHlsZXNcIlxuXHRcdH1cbn07XG5cbmZ1bmN0aW9uIG5ld19jdCgpLyo6YW55Ki8ge1xuXHRyZXR1cm4gKHtcblx0XHR3b3JrYm9va3M6W10sIHNoZWV0czpbXSwgY2hhcnRzOltdLCBkaWFsb2dzOltdLCBtYWNyb3M6W10sXG5cdFx0cmVsczpbXSwgc3RyczpbXSwgY29tbWVudHM6W10sIHRocmVhZGVkY29tbWVudHM6W10sIGxpbmtzOltdLFxuXHRcdGNvcmVwcm9wczpbXSwgZXh0cHJvcHM6W10sIGN1c3Rwcm9wczpbXSwgdGhlbWVzOltdLCBzdHlsZXM6W10sXG5cdFx0Y2FsY2NoYWluczpbXSwgdmJhOiBbXSwgZHJhd2luZ3M6IFtdLCBtZXRhZGF0YTogW10sIHBlb3BsZTpbXSxcblx0XHRUT0RPOltdLCB4bWxuczogXCJcIiB9Lyo6YW55Ki8pO1xufVxuXG5mdW5jdGlvbiBwYXJzZV9jdChkYXRhLyo6P3N0cmluZyovKSB7XG5cdHZhciBjdCA9IG5ld19jdCgpO1xuXHRpZighZGF0YSB8fCAhZGF0YS5tYXRjaCkgcmV0dXJuIGN0O1xuXHR2YXIgY3RleHQgPSB7fTtcblx0KGRhdGEubWF0Y2godGFncmVnZXgpfHxbXSkuZm9yRWFjaChmdW5jdGlvbih4KSB7XG5cdFx0dmFyIHkgPSBwYXJzZXhtbHRhZyh4KTtcblx0XHRzd2l0Y2goeVswXS5yZXBsYWNlKG5zcmVnZXgsXCI8XCIpKSB7XG5cdFx0XHRjYXNlICc8P3htbCc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPFR5cGVzJzogY3QueG1sbnMgPSB5Wyd4bWxucycgKyAoeVswXS5tYXRjaCgvPChcXHcrKTovKXx8W1wiXCIsXCJcIl0pWzFdIF07IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPERlZmF1bHQnOiBjdGV4dFt5LkV4dGVuc2lvbl0gPSB5LkNvbnRlbnRUeXBlOyBicmVhaztcblx0XHRcdGNhc2UgJzxPdmVycmlkZSc6XG5cdFx0XHRcdGlmKGN0W2N0MnR5cGVbeS5Db250ZW50VHlwZV1dICE9PSB1bmRlZmluZWQpIGN0W2N0MnR5cGVbeS5Db250ZW50VHlwZV1dLnB1c2goeS5QYXJ0TmFtZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fSk7XG5cdGlmKGN0LnhtbG5zICE9PSBYTUxOUy5DVCkgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBOYW1lc3BhY2U6IFwiICsgY3QueG1sbnMpO1xuXHRjdC5jYWxjY2hhaW4gPSBjdC5jYWxjY2hhaW5zLmxlbmd0aCA+IDAgPyBjdC5jYWxjY2hhaW5zWzBdIDogXCJcIjtcblx0Y3Quc3N0ID0gY3Quc3Rycy5sZW5ndGggPiAwID8gY3Quc3Ryc1swXSA6IFwiXCI7XG5cdGN0LnN0eWxlID0gY3Quc3R5bGVzLmxlbmd0aCA+IDAgPyBjdC5zdHlsZXNbMF0gOiBcIlwiO1xuXHRjdC5kZWZhdWx0cyA9IGN0ZXh0O1xuXHRkZWxldGUgY3QuY2FsY2NoYWlucztcblx0cmV0dXJuIGN0O1xufVxuXG5mdW5jdGlvbiB3cml0ZV9jdChjdCwgb3B0cykvKjpzdHJpbmcqLyB7XG5cdHZhciB0eXBlMmN0Lyp7W3N0cmluZ106QXJyYXk8c3RyaW5nPn0qLyA9IGV2ZXJ0X2FycihjdDJ0eXBlKTtcblxuXHR2YXIgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdLCB2O1xuXHRvW28ubGVuZ3RoXSA9IChYTUxfSEVBREVSKTtcblx0b1tvLmxlbmd0aF0gPSB3cml0ZXh0YWcoJ1R5cGVzJywgbnVsbCwge1xuXHRcdCd4bWxucyc6IFhNTE5TLkNULFxuXHRcdCd4bWxuczp4c2QnOiBYTUxOUy54c2QsXG5cdFx0J3htbG5zOnhzaSc6IFhNTE5TLnhzaVxuXHR9KTtcblxuXHRvID0gby5jb25jYXQoW1xuXHRcdFsneG1sJywgJ2FwcGxpY2F0aW9uL3htbCddLFxuXHRcdFsnYmluJywgJ2FwcGxpY2F0aW9uL3ZuZC5tcy1leGNlbC5zaGVldC5iaW5hcnkubWFjcm9FbmFibGVkLm1haW4nXSxcblx0XHRbJ3ZtbCcsICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQudm1sRHJhd2luZyddLFxuXHRcdFsnZGF0YScsICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQubW9kZWwrZGF0YSddLFxuXHRcdC8qIGZyb20gdGVzdCBmaWxlcyAqL1xuXHRcdFsnYm1wJywgJ2ltYWdlL2JtcCddLFxuXHRcdFsncG5nJywgJ2ltYWdlL3BuZyddLFxuXHRcdFsnZ2lmJywgJ2ltYWdlL2dpZiddLFxuXHRcdFsnZW1mJywgJ2ltYWdlL3gtZW1mJ10sXG5cdFx0Wyd3bWYnLCAnaW1hZ2UveC13bWYnXSxcblx0XHRbJ2pwZycsICdpbWFnZS9qcGVnJ10sIFsnanBlZycsICdpbWFnZS9qcGVnJ10sXG5cdFx0Wyd0aWYnLCAnaW1hZ2UvdGlmZiddLCBbJ3RpZmYnLCAnaW1hZ2UvdGlmZiddLFxuXHRcdFsncGRmJywgJ2FwcGxpY2F0aW9uL3BkZiddLFxuXHRcdFsncmVscycsICdhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtcGFja2FnZS5yZWxhdGlvbnNoaXBzK3htbCddXG5cdF0ubWFwKGZ1bmN0aW9uKHgpIHtcblx0XHRyZXR1cm4gd3JpdGV4dGFnKCdEZWZhdWx0JywgbnVsbCwgeydFeHRlbnNpb24nOnhbMF0sICdDb250ZW50VHlwZSc6IHhbMV19KTtcblx0fSkpO1xuXG5cdC8qIG9ubHkgd3JpdGUgZmlyc3QgaW5zdGFuY2UgKi9cblx0dmFyIGYxID0gZnVuY3Rpb24odykge1xuXHRcdGlmKGN0W3ddICYmIGN0W3ddLmxlbmd0aCA+IDApIHtcblx0XHRcdHYgPSBjdFt3XVswXTtcblx0XHRcdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnT3ZlcnJpZGUnLCBudWxsLCB7XG5cdFx0XHRcdCdQYXJ0TmFtZSc6ICh2WzBdID09ICcvJyA/IFwiXCI6XCIvXCIpICsgdixcblx0XHRcdFx0J0NvbnRlbnRUeXBlJzogQ1RfTElTVFt3XVtvcHRzLmJvb2tUeXBlXSB8fCBDVF9MSVNUW3ddWyd4bHN4J11cblx0XHRcdH0pKTtcblx0XHR9XG5cdH07XG5cblx0LyogYm9vayB0eXBlLXNwZWNpZmljICovXG5cdHZhciBmMiA9IGZ1bmN0aW9uKHcpIHtcblx0XHQoY3Rbd118fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcblx0XHRcdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnT3ZlcnJpZGUnLCBudWxsLCB7XG5cdFx0XHRcdCdQYXJ0TmFtZSc6ICh2WzBdID09ICcvJyA/IFwiXCI6XCIvXCIpICsgdixcblx0XHRcdFx0J0NvbnRlbnRUeXBlJzogQ1RfTElTVFt3XVtvcHRzLmJvb2tUeXBlXSB8fCBDVF9MSVNUW3ddWyd4bHN4J11cblx0XHRcdH0pKTtcblx0XHR9KTtcblx0fTtcblxuXHQvKiBzdGFuZGFyZCB0eXBlICovXG5cdHZhciBmMyA9IGZ1bmN0aW9uKHQpIHtcblx0XHQoY3RbdF18fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcblx0XHRcdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnT3ZlcnJpZGUnLCBudWxsLCB7XG5cdFx0XHRcdCdQYXJ0TmFtZSc6ICh2WzBdID09ICcvJyA/IFwiXCI6XCIvXCIpICsgdixcblx0XHRcdFx0J0NvbnRlbnRUeXBlJzogdHlwZTJjdFt0XVswXVxuXHRcdFx0fSkpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGYxKCd3b3JrYm9va3MnKTtcblx0ZjIoJ3NoZWV0cycpO1xuXHRmMignY2hhcnRzJyk7XG5cdGYzKCd0aGVtZXMnKTtcblx0WydzdHJzJywgJ3N0eWxlcyddLmZvckVhY2goZjEpO1xuXHRbJ2NvcmVwcm9wcycsICdleHRwcm9wcycsICdjdXN0cHJvcHMnXS5mb3JFYWNoKGYzKTtcblx0ZjMoJ3ZiYScpO1xuXHRmMygnY29tbWVudHMnKTtcblx0ZjMoJ3RocmVhZGVkY29tbWVudHMnKTtcblx0ZjMoJ2RyYXdpbmdzJyk7XG5cdGYyKCdtZXRhZGF0YScpO1xuXHRmMygncGVvcGxlJyk7XG5cdGlmKG8ubGVuZ3RoPjIpeyBvW28ubGVuZ3RoXSA9ICgnPC9UeXBlcz4nKTsgb1sxXT1vWzFdLnJlcGxhY2UoXCIvPlwiLFwiPlwiKTsgfVxuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuLyogOS4zIFJlbGF0aW9uc2hpcHMgKi9cbnZhciBSRUxTID0gKHtcblx0V0I6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9vZmZpY2VEb2N1bWVudFwiLFxuXHRTSEVFVDogXCJodHRwOi8vc2hlZXRqcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL29mZmljZURvY3VtZW50XCIsXG5cdEhMSU5LOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvaHlwZXJsaW5rXCIsXG5cdFZNTDogXCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3ZtbERyYXdpbmdcIixcblx0WFBBVEg6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9leHRlcm5hbExpbmtQYXRoXCIsXG5cdFhNSVNTOiBcImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlLzIwMDYvcmVsYXRpb25zaGlwcy94bEV4dGVybmFsTGlua1BhdGgveGxQYXRoTWlzc2luZ1wiLFxuXHRYTElOSzogXCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2V4dGVybmFsTGlua1wiLFxuXHRDWE1MOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvY3VzdG9tWG1sXCIsXG5cdENYTUxQOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvY3VzdG9tWG1sUHJvcHNcIixcblx0Q01OVDogXCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2NvbW1lbnRzXCIsXG5cdENPUkVfUFJPUFM6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL3BhY2thZ2UvMjAwNi9yZWxhdGlvbnNoaXBzL21ldGFkYXRhL2NvcmUtcHJvcGVydGllc1wiLFxuXHRFWFRfUFJPUFM6ICdodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2V4dGVuZGVkLXByb3BlcnRpZXMnLFxuXHRDVVNUX1BST1BTOiAnaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9jdXN0b20tcHJvcGVydGllcycsXG5cdFNTVDogXCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3NoYXJlZFN0cmluZ3NcIixcblx0U1RZOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvc3R5bGVzXCIsXG5cdFRIRU1FOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvdGhlbWVcIixcblx0Q0hBUlQ6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9jaGFydFwiLFxuXHRDSEFSVEVYOiBcImh0dHA6Ly9zY2hlbWFzLm1pY3Jvc29mdC5jb20vb2ZmaWNlLzIwMTQvcmVsYXRpb25zaGlwcy9jaGFydEV4XCIsXG5cdENTOiBcImh0dHA6Ly9zY2hlbWFzLm9wZW54bWxmb3JtYXRzLm9yZy9vZmZpY2VEb2N1bWVudC8yMDA2L3JlbGF0aW9uc2hpcHMvY2hhcnRzaGVldFwiLFxuXHRXUzogW1xuXHRcdFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy93b3Jrc2hlZXRcIixcblx0XHRcImh0dHA6Ly9wdXJsLm9jbGMub3JnL29veG1sL29mZmljZURvY3VtZW50L3JlbGF0aW9uc2hpcHMvd29ya3NoZWV0XCJcblx0XSxcblx0RFM6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9kaWFsb2dzaGVldFwiLFxuXHRNUzogXCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL29mZmljZS8yMDA2L3JlbGF0aW9uc2hpcHMveGxNYWNyb3NoZWV0XCIsXG5cdElNRzogXCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL2ltYWdlXCIsXG5cdERSQVc6IFwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL29mZmljZURvY3VtZW50LzIwMDYvcmVsYXRpb25zaGlwcy9kcmF3aW5nXCIsXG5cdFhMTUVUQTogXCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvb2ZmaWNlRG9jdW1lbnQvMjAwNi9yZWxhdGlvbnNoaXBzL3NoZWV0TWV0YWRhdGFcIixcblx0VENNTlQ6IFwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvMjAxNy8xMC9yZWxhdGlvbnNoaXBzL3RocmVhZGVkQ29tbWVudFwiLFxuXHRQRU9QTEU6IFwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvMjAxNy8xMC9yZWxhdGlvbnNoaXBzL3BlcnNvblwiLFxuXHRWQkE6IFwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2UvMjAwNi9yZWxhdGlvbnNoaXBzL3ZiYVByb2plY3RcIlxufS8qOmFueSovKTtcblxuXG4vKiA5LjMuMyBSZXByZXNlbnRpbmcgUmVsYXRpb25zaGlwcyAqL1xuZnVuY3Rpb24gZ2V0X3JlbHNfcGF0aChmaWxlLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgbiA9IGZpbGUubGFzdEluZGV4T2YoXCIvXCIpO1xuXHRyZXR1cm4gZmlsZS5zbGljZSgwLG4rMSkgKyAnX3JlbHMvJyArIGZpbGUuc2xpY2UobisxKSArIFwiLnJlbHNcIjtcbn1cblxuZnVuY3Rpb24gcGFyc2VfcmVscyhkYXRhLyo6P3N0cmluZyovLCBjdXJyZW50RmlsZVBhdGgvKjpzdHJpbmcqLykge1xuXHR2YXIgcmVscyA9IHtcIiFpZFwiOnt9fTtcblx0aWYgKCFkYXRhKSByZXR1cm4gcmVscztcblx0aWYgKGN1cnJlbnRGaWxlUGF0aC5jaGFyQXQoMCkgIT09ICcvJykge1xuXHRcdGN1cnJlbnRGaWxlUGF0aCA9ICcvJytjdXJyZW50RmlsZVBhdGg7XG5cdH1cblx0dmFyIGhhc2ggPSB7fTtcblxuXHQoZGF0YS5tYXRjaCh0YWdyZWdleCl8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcblx0XHR2YXIgeSA9IHBhcnNleG1sdGFnKHgpO1xuXHRcdC8qIDkuMy4yLjIgT1BDX1JlbGF0aW9uc2hpcHMgKi9cblx0XHRpZiAoeVswXSA9PT0gJzxSZWxhdGlvbnNoaXAnKSB7XG5cdFx0XHR2YXIgcmVsID0ge307IHJlbC5UeXBlID0geS5UeXBlOyByZWwuVGFyZ2V0ID0geS5UYXJnZXQ7IHJlbC5JZCA9IHkuSWQ7IGlmKHkuVGFyZ2V0TW9kZSkgcmVsLlRhcmdldE1vZGUgPSB5LlRhcmdldE1vZGU7XG5cdFx0XHR2YXIgY2Fub25pY3RhcmdldCA9IHkuVGFyZ2V0TW9kZSA9PT0gJ0V4dGVybmFsJyA/IHkuVGFyZ2V0IDogcmVzb2x2ZV9wYXRoKHkuVGFyZ2V0LCBjdXJyZW50RmlsZVBhdGgpO1xuXHRcdFx0cmVsc1tjYW5vbmljdGFyZ2V0XSA9IHJlbDtcblx0XHRcdGhhc2hbeS5JZF0gPSByZWw7XG5cdFx0fVxuXHR9KTtcblx0cmVsc1tcIiFpZFwiXSA9IGhhc2g7XG5cdHJldHVybiByZWxzO1xufVxuXG5cbi8qIFRPRE8gKi9cbmZ1bmN0aW9uIHdyaXRlX3JlbHMocmVscykvKjpzdHJpbmcqLyB7XG5cdHZhciBvID0gW1hNTF9IRUFERVIsIHdyaXRleHRhZygnUmVsYXRpb25zaGlwcycsIG51bGwsIHtcblx0XHQvLyd4bWxuczpuczAnOiBYTUxOUy5SRUxTLFxuXHRcdCd4bWxucyc6IFhNTE5TLlJFTFNcblx0fSldO1xuXHRrZXlzKHJlbHNbJyFpZCddKS5mb3JFYWNoKGZ1bmN0aW9uKHJpZCkge1xuXHRcdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnUmVsYXRpb25zaGlwJywgbnVsbCwgcmVsc1snIWlkJ11bcmlkXSkpO1xuXHR9KTtcblx0aWYoby5sZW5ndGg+Mil7IG9bby5sZW5ndGhdID0gKCc8L1JlbGF0aW9uc2hpcHM+Jyk7IG9bMV09b1sxXS5yZXBsYWNlKFwiLz5cIixcIj5cIik7IH1cblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gYWRkX3JlbHMocmVscywgcklkLyo6bnVtYmVyKi8sIGYsIHR5cGUsIHJlbG9iaiwgdGFyZ2V0bW9kZS8qOj9zdHJpbmcqLykvKjpudW1iZXIqLyB7XG5cdGlmKCFyZWxvYmopIHJlbG9iaiA9IHt9O1xuXHRpZighcmVsc1snIWlkJ10pIHJlbHNbJyFpZCddID0ge307XG5cdGlmKCFyZWxzWychaWR4J10pIHJlbHNbJyFpZHgnXSA9IDE7XG5cdGlmKHJJZCA8IDApIGZvcihySWQgPSByZWxzWychaWR4J107IHJlbHNbJyFpZCddWydySWQnICsgcklkXTsgKytySWQpey8qIGVtcHR5ICovfVxuXHRyZWxzWychaWR4J10gPSBySWQgKyAxO1xuXHRyZWxvYmouSWQgPSAncklkJyArIHJJZDtcblx0cmVsb2JqLlR5cGUgPSB0eXBlO1xuXHRyZWxvYmouVGFyZ2V0ID0gZjtcblx0aWYodGFyZ2V0bW9kZSkgcmVsb2JqLlRhcmdldE1vZGUgPSB0YXJnZXRtb2RlO1xuXHRlbHNlIGlmKFtSRUxTLkhMSU5LLCBSRUxTLlhQQVRILCBSRUxTLlhNSVNTXS5pbmRleE9mKHJlbG9iai5UeXBlKSA+IC0xKSByZWxvYmouVGFyZ2V0TW9kZSA9IFwiRXh0ZXJuYWxcIjtcblx0aWYocmVsc1snIWlkJ11bcmVsb2JqLklkXSkgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHJld3JpdGUgcklkIFwiICsgcklkKTtcblx0cmVsc1snIWlkJ11bcmVsb2JqLklkXSA9IHJlbG9iajtcblx0cmVsc1soJy8nICsgcmVsb2JqLlRhcmdldCkucmVwbGFjZShcIi8vXCIsXCIvXCIpXSA9IHJlbG9iajtcblx0cmV0dXJuIHJJZDtcbn1cbi8qIE9wZW4gRG9jdW1lbnQgRm9ybWF0IGZvciBPZmZpY2UgQXBwbGljYXRpb25zIChPcGVuRG9jdW1lbnQpIFZlcnNpb24gMS4yICovXG4vKiBQYXJ0IDMgU2VjdGlvbiA0IE1hbmlmZXN0IEZpbGUgKi9cbnZhciBDVF9PRFMgPSBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQuc3ByZWFkc2hlZXRcIjtcbmZ1bmN0aW9uIHBhcnNlX21hbmlmZXN0KGQsIG9wdHMpIHtcblx0dmFyIHN0ciA9IHhsbWxfbm9ybWFsaXplKGQpO1xuXHR2YXIgUm47XG5cdHZhciBGRXRhZztcblx0d2hpbGUoKFJuID0geGxtbHJlZ2V4LmV4ZWMoc3RyKSkpIHN3aXRjaChSblszXSkge1xuXHRcdGNhc2UgJ21hbmlmZXN0JzogYnJlYWs7IC8vIDQuMiA8bWFuaWZlc3Q6bWFuaWZlc3Q+XG5cdFx0Y2FzZSAnZmlsZS1lbnRyeSc6IC8vIDQuMyA8bWFuaWZlc3Q6ZmlsZS1lbnRyeT5cblx0XHRcdEZFdGFnID0gcGFyc2V4bWx0YWcoUm5bMF0sIGZhbHNlKTtcblx0XHRcdGlmKEZFdGFnLnBhdGggPT0gJy8nICYmIEZFdGFnLnR5cGUgIT09IENUX09EUykgdGhyb3cgbmV3IEVycm9yKFwiVGhpcyBPcGVuRG9jdW1lbnQgaXMgbm90IGEgc3ByZWFkc2hlZXRcIik7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdlbmNyeXB0aW9uLWRhdGEnOiAvLyA0LjQgPG1hbmlmZXN0OmVuY3J5cHRpb24tZGF0YT5cblx0XHRjYXNlICdhbGdvcml0aG0nOiAvLyA0LjUgPG1hbmlmZXN0OmFsZ29yaXRobT5cblx0XHRjYXNlICdzdGFydC1rZXktZ2VuZXJhdGlvbic6IC8vIDQuNiA8bWFuaWZlc3Q6c3RhcnQta2V5LWdlbmVyYXRpb24+XG5cdFx0Y2FzZSAna2V5LWRlcml2YXRpb24nOiAvLyA0LjcgPG1hbmlmZXN0OmtleS1kZXJpdmF0aW9uPlxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgT0RTIEVuY3J5cHRpb25cIik7XG5cdFx0ZGVmYXVsdDogaWYob3B0cyAmJiBvcHRzLldURikgdGhyb3cgUm47XG5cdH1cbn1cblxuZnVuY3Rpb24gd3JpdGVfbWFuaWZlc3QobWFuaWZlc3QvKjpBcnJheTxBcnJheTxzdHJpbmc+ID4qLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvID0gW1hNTF9IRUFERVJdO1xuXHRvLnB1c2goJzxtYW5pZmVzdDptYW5pZmVzdCB4bWxuczptYW5pZmVzdD1cInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6bWFuaWZlc3Q6MS4wXCIgbWFuaWZlc3Q6dmVyc2lvbj1cIjEuMlwiPlxcbicpO1xuXHRvLnB1c2goJyAgPG1hbmlmZXN0OmZpbGUtZW50cnkgbWFuaWZlc3Q6ZnVsbC1wYXRoPVwiL1wiIG1hbmlmZXN0OnZlcnNpb249XCIxLjJcIiBtYW5pZmVzdDptZWRpYS10eXBlPVwiYXBwbGljYXRpb24vdm5kLm9hc2lzLm9wZW5kb2N1bWVudC5zcHJlYWRzaGVldFwiLz5cXG4nKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IG1hbmlmZXN0Lmxlbmd0aDsgKytpKSBvLnB1c2goJyAgPG1hbmlmZXN0OmZpbGUtZW50cnkgbWFuaWZlc3Q6ZnVsbC1wYXRoPVwiJyArIG1hbmlmZXN0W2ldWzBdICsgJ1wiIG1hbmlmZXN0Om1lZGlhLXR5cGU9XCInICsgbWFuaWZlc3RbaV1bMV0gKyAnXCIvPlxcbicpO1xuXHRvLnB1c2goJzwvbWFuaWZlc3Q6bWFuaWZlc3Q+Jyk7XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG5cbi8qIFBhcnQgMyBTZWN0aW9uIDYgTWV0YWRhdGEgTWFuaWZlc3QgRmlsZSAqL1xuZnVuY3Rpb24gd3JpdGVfcmRmX3R5cGUoZmlsZS8qOnN0cmluZyovLCByZXMvKjpzdHJpbmcqLywgdGFnLyo6P3N0cmluZyovKSB7XG5cdHJldHVybiBbXG5cdFx0JyAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9XCInICsgZmlsZSArICdcIj5cXG4nLFxuXHRcdCcgICAgPHJkZjp0eXBlIHJkZjpyZXNvdXJjZT1cImh0dHA6Ly9kb2NzLm9hc2lzLW9wZW4ub3JnL25zL29mZmljZS8xLjIvbWV0YS8nICsgKHRhZyB8fCBcIm9kZlwiKSArICcjJyArIHJlcyArICdcIi8+XFxuJyxcblx0XHQnICA8L3JkZjpEZXNjcmlwdGlvbj5cXG4nXG5cdF0uam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX3JkZl9oYXMoYmFzZS8qOnN0cmluZyovLCBmaWxlLyo6c3RyaW5nKi8pIHtcblx0cmV0dXJuIFtcblx0XHQnICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD1cIicgKyBiYXNlICsgJ1wiPlxcbicsXG5cdFx0JyAgICA8bnMwOmhhc1BhcnQgeG1sbnM6bnMwPVwiaHR0cDovL2RvY3Mub2FzaXMtb3Blbi5vcmcvbnMvb2ZmaWNlLzEuMi9tZXRhL3BrZyNcIiByZGY6cmVzb3VyY2U9XCInICsgZmlsZSArICdcIi8+XFxuJyxcblx0XHQnICA8L3JkZjpEZXNjcmlwdGlvbj5cXG4nXG5cdF0uam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX3JkZihyZGYpIHtcblx0dmFyIG8gPSBbWE1MX0hFQURFUl07XG5cdG8ucHVzaCgnPHJkZjpSREYgeG1sbnM6cmRmPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zI1wiPlxcbicpO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9IHJkZi5sZW5ndGg7ICsraSkge1xuXHRcdG8ucHVzaCh3cml0ZV9yZGZfdHlwZShyZGZbaV1bMF0sIHJkZltpXVsxXSkpO1xuXHRcdG8ucHVzaCh3cml0ZV9yZGZfaGFzKFwiXCIscmRmW2ldWzBdKSk7XG5cdH1cblx0by5wdXNoKHdyaXRlX3JkZl90eXBlKFwiXCIsXCJEb2N1bWVudFwiLCBcInBrZ1wiKSk7XG5cdG8ucHVzaCgnPC9yZGY6UkRGPicpO1xuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuLyogVE9ETzogcHVsbCBwcm9wZXJ0aWVzICovXG5mdW5jdGlvbiB3cml0ZV9tZXRhX29kcygvKjo6IHdiOiBXb3JrYm9vaywgb3B0czogYW55Ki8pLyo6c3RyaW5nKi8ge1xuXHRyZXR1cm4gJzxvZmZpY2U6ZG9jdW1lbnQtbWV0YSB4bWxuczpvZmZpY2U9XCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOm9mZmljZToxLjBcIiB4bWxuczptZXRhPVwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDp4bWxuczptZXRhOjEuMFwiIHhtbG5zOmRjPVwiaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS9cIiB4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiBvZmZpY2U6dmVyc2lvbj1cIjEuMlwiPjxvZmZpY2U6bWV0YT48bWV0YTpnZW5lcmF0b3I+U2hlZXQnICsgJ0pTICcgKyBYTFNYLnZlcnNpb24gKyAnPC9tZXRhOmdlbmVyYXRvcj48L29mZmljZTptZXRhPjwvb2ZmaWNlOmRvY3VtZW50LW1ldGE+Jztcbn1cblxuLyogRUNNQS0zNzYgUGFydCBJSSAxMS4xIENvcmUgUHJvcGVydGllcyBQYXJ0ICovXG4vKiBbTVMtT1NIQVJFRF0gMi4zLjMuMi5bMS0yXS4xIChQSURTSS9QSUREU0kpICovXG52YXIgQ09SRV9QUk9QUy8qOkFycmF5PEFycmF5PHN0cmluZz4gPiovID0gW1xuXHRbXCJjcDpjYXRlZ29yeVwiLCBcIkNhdGVnb3J5XCJdLFxuXHRbXCJjcDpjb250ZW50U3RhdHVzXCIsIFwiQ29udGVudFN0YXR1c1wiXSxcblx0W1wiY3A6a2V5d29yZHNcIiwgXCJLZXl3b3Jkc1wiXSxcblx0W1wiY3A6bGFzdE1vZGlmaWVkQnlcIiwgXCJMYXN0QXV0aG9yXCJdLFxuXHRbXCJjcDpsYXN0UHJpbnRlZFwiLCBcIkxhc3RQcmludGVkXCJdLFxuXHRbXCJjcDpyZXZpc2lvblwiLCBcIlJldk51bWJlclwiXSxcblx0W1wiY3A6dmVyc2lvblwiLCBcIlZlcnNpb25cIl0sXG5cdFtcImRjOmNyZWF0b3JcIiwgXCJBdXRob3JcIl0sXG5cdFtcImRjOmRlc2NyaXB0aW9uXCIsIFwiQ29tbWVudHNcIl0sXG5cdFtcImRjOmlkZW50aWZpZXJcIiwgXCJJZGVudGlmaWVyXCJdLFxuXHRbXCJkYzpsYW5ndWFnZVwiLCBcIkxhbmd1YWdlXCJdLFxuXHRbXCJkYzpzdWJqZWN0XCIsIFwiU3ViamVjdFwiXSxcblx0W1wiZGM6dGl0bGVcIiwgXCJUaXRsZVwiXSxcblx0W1wiZGN0ZXJtczpjcmVhdGVkXCIsIFwiQ3JlYXRlZERhdGVcIiwgJ2RhdGUnXSxcblx0W1wiZGN0ZXJtczptb2RpZmllZFwiLCBcIk1vZGlmaWVkRGF0ZVwiLCAnZGF0ZSddXG5dO1xuXG52YXIgQ09SRV9QUk9QU19SRUdFWC8qOkFycmF5PFJlZ0V4cD4qLyA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdHZhciByID0gbmV3IEFycmF5KENPUkVfUFJPUFMubGVuZ3RoKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IENPUkVfUFJPUFMubGVuZ3RoOyArK2kpIHtcblx0XHR2YXIgZiA9IENPUkVfUFJPUFNbaV07XG5cdFx0dmFyIGcgPSBcIig/OlwiKyBmWzBdLnNsaWNlKDAsZlswXS5pbmRleE9mKFwiOlwiKSkgK1wiOilcIisgZlswXS5zbGljZShmWzBdLmluZGV4T2YoXCI6XCIpKzEpO1xuXHRcdHJbaV0gPSBuZXcgUmVnRXhwKFwiPFwiICsgZyArIFwiW14+XSo+KFtcXFxcc1xcXFxTXSo/KTxcXC9cIiArIGcgKyBcIj5cIik7XG5cdH1cblx0cmV0dXJuIHI7XG59KSgpO1xuXG5mdW5jdGlvbiBwYXJzZV9jb3JlX3Byb3BzKGRhdGEpIHtcblx0dmFyIHAgPSB7fTtcblx0ZGF0YSA9IHV0ZjhyZWFkKGRhdGEpO1xuXG5cdGZvcih2YXIgaSA9IDA7IGkgPCBDT1JFX1BST1BTLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIGYgPSBDT1JFX1BST1BTW2ldLCBjdXIgPSBkYXRhLm1hdGNoKENPUkVfUFJPUFNfUkVHRVhbaV0pO1xuXHRcdGlmKGN1ciAhPSBudWxsICYmIGN1ci5sZW5ndGggPiAwKSBwW2ZbMV1dID0gdW5lc2NhcGV4bWwoY3VyWzFdKTtcblx0XHRpZihmWzJdID09PSAnZGF0ZScgJiYgcFtmWzFdXSkgcFtmWzFdXSA9IHBhcnNlRGF0ZShwW2ZbMV1dKTtcblx0fVxuXG5cdHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiBjcF9kb2l0KGYsIGcsIGgsIG8sIHApIHtcblx0aWYocFtmXSAhPSBudWxsIHx8IGcgPT0gbnVsbCB8fCBnID09PSBcIlwiKSByZXR1cm47XG5cdHBbZl0gPSBnO1xuXHRnID0gZXNjYXBleG1sKGcpO1xuXHRvW28ubGVuZ3RoXSA9IChoID8gd3JpdGV4dGFnKGYsZyxoKSA6IHdyaXRldGFnKGYsZykpO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9jb3JlX3Byb3BzKGNwLCBfb3B0cykge1xuXHR2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuXHR2YXIgbyA9IFtYTUxfSEVBREVSLCB3cml0ZXh0YWcoJ2NwOmNvcmVQcm9wZXJ0aWVzJywgbnVsbCwge1xuXHRcdC8vJ3htbG5zJzogWE1MTlMuQ09SRV9QUk9QUyxcblx0XHQneG1sbnM6Y3AnOiBYTUxOUy5DT1JFX1BST1BTLFxuXHRcdCd4bWxuczpkYyc6IFhNTE5TLmRjLFxuXHRcdCd4bWxuczpkY3Rlcm1zJzogWE1MTlMuZGN0ZXJtcyxcblx0XHQneG1sbnM6ZGNtaXR5cGUnOiBYTUxOUy5kY21pdHlwZSxcblx0XHQneG1sbnM6eHNpJzogWE1MTlMueHNpXG5cdH0pXSwgcCA9IHt9O1xuXHRpZighY3AgJiYgIW9wdHMuUHJvcHMpIHJldHVybiBvLmpvaW4oXCJcIik7XG5cblx0aWYoY3ApIHtcblx0XHRpZihjcC5DcmVhdGVkRGF0ZSAhPSBudWxsKSBjcF9kb2l0KFwiZGN0ZXJtczpjcmVhdGVkXCIsIHR5cGVvZiBjcC5DcmVhdGVkRGF0ZSA9PT0gXCJzdHJpbmdcIiA/IGNwLkNyZWF0ZWREYXRlIDogd3JpdGVfdzNjZHRmKGNwLkNyZWF0ZWREYXRlLCBvcHRzLldURiksIHtcInhzaTp0eXBlXCI6XCJkY3Rlcm1zOlczQ0RURlwifSwgbywgcCk7XG5cdFx0aWYoY3AuTW9kaWZpZWREYXRlICE9IG51bGwpIGNwX2RvaXQoXCJkY3Rlcm1zOm1vZGlmaWVkXCIsIHR5cGVvZiBjcC5Nb2RpZmllZERhdGUgPT09IFwic3RyaW5nXCIgPyBjcC5Nb2RpZmllZERhdGUgOiB3cml0ZV93M2NkdGYoY3AuTW9kaWZpZWREYXRlLCBvcHRzLldURiksIHtcInhzaTp0eXBlXCI6XCJkY3Rlcm1zOlczQ0RURlwifSwgbywgcCk7XG5cdH1cblxuXHRmb3IodmFyIGkgPSAwOyBpICE9IENPUkVfUFJPUFMubGVuZ3RoOyArK2kpIHtcblx0XHR2YXIgZiA9IENPUkVfUFJPUFNbaV07XG5cdFx0dmFyIHYgPSBvcHRzLlByb3BzICYmIG9wdHMuUHJvcHNbZlsxXV0gIT0gbnVsbCA/IG9wdHMuUHJvcHNbZlsxXV0gOiBjcCA/IGNwW2ZbMV1dIDogbnVsbDtcblx0XHRpZih2ID09PSB0cnVlKSB2ID0gXCIxXCI7XG5cdFx0ZWxzZSBpZih2ID09PSBmYWxzZSkgdiA9IFwiMFwiO1xuXHRcdGVsc2UgaWYodHlwZW9mIHYgPT0gXCJudW1iZXJcIikgdiA9IFN0cmluZyh2KTtcblx0XHRpZih2ICE9IG51bGwpIGNwX2RvaXQoZlswXSwgdiwgbnVsbCwgbywgcCk7XG5cdH1cblx0aWYoby5sZW5ndGg+Mil7IG9bby5sZW5ndGhdID0gKCc8L2NwOmNvcmVQcm9wZXJ0aWVzPicpOyBvWzFdPW9bMV0ucmVwbGFjZShcIi8+XCIsXCI+XCIpOyB9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG4vKiAxNS4yLjEyLjMgRXh0ZW5kZWQgRmlsZSBQcm9wZXJ0aWVzIFBhcnQgKi9cbi8qIFtNUy1PU0hBUkVEXSAyLjMuMy4yLlsxLTJdLjEgKFBJRFNJL1BJRERTSSkgKi9cbnZhciBFWFRfUFJPUFMvKjpBcnJheTxBcnJheTxzdHJpbmc+ID4qLyA9IFtcblx0W1wiQXBwbGljYXRpb25cIiwgXCJBcHBsaWNhdGlvblwiLCBcInN0cmluZ1wiXSxcblx0W1wiQXBwVmVyc2lvblwiLCBcIkFwcFZlcnNpb25cIiwgXCJzdHJpbmdcIl0sXG5cdFtcIkNvbXBhbnlcIiwgXCJDb21wYW55XCIsIFwic3RyaW5nXCJdLFxuXHRbXCJEb2NTZWN1cml0eVwiLCBcIkRvY1NlY3VyaXR5XCIsIFwic3RyaW5nXCJdLFxuXHRbXCJNYW5hZ2VyXCIsIFwiTWFuYWdlclwiLCBcInN0cmluZ1wiXSxcblx0W1wiSHlwZXJsaW5rc0NoYW5nZWRcIiwgXCJIeXBlcmxpbmtzQ2hhbmdlZFwiLCBcImJvb2xcIl0sXG5cdFtcIlNoYXJlZERvY1wiLCBcIlNoYXJlZERvY1wiLCBcImJvb2xcIl0sXG5cdFtcIkxpbmtzVXBUb0RhdGVcIiwgXCJMaW5rc1VwVG9EYXRlXCIsIFwiYm9vbFwiXSxcblx0W1wiU2NhbGVDcm9wXCIsIFwiU2NhbGVDcm9wXCIsIFwiYm9vbFwiXSxcblx0W1wiSGVhZGluZ1BhaXJzXCIsIFwiSGVhZGluZ1BhaXJzXCIsIFwicmF3XCJdLFxuXHRbXCJUaXRsZXNPZlBhcnRzXCIsIFwiVGl0bGVzT2ZQYXJ0c1wiLCBcInJhd1wiXVxuXTtcblxudmFyIFBzZXVkb1Byb3BzUGFpcnMgPSBbXG5cdFwiV29ya3NoZWV0c1wiLCAgXCJTaGVldE5hbWVzXCIsXG5cdFwiTmFtZWRSYW5nZXNcIiwgXCJEZWZpbmVkTmFtZXNcIixcblx0XCJDaGFydHNoZWV0c1wiLCBcIkNoYXJ0TmFtZXNcIlxuXTtcbmZ1bmN0aW9uIGxvYWRfcHJvcHNfcGFpcnMoSFAvKjpzdHJpbmd8QXJyYXk8QXJyYXk8YW55Pj4qLywgVE9QLCBwcm9wcywgb3B0cykge1xuXHR2YXIgdiA9IFtdO1xuXHRpZih0eXBlb2YgSFAgPT0gXCJzdHJpbmdcIikgdiA9IHBhcnNlVmVjdG9yKEhQLCBvcHRzKTtcblx0ZWxzZSBmb3IodmFyIGogPSAwOyBqIDwgSFAubGVuZ3RoOyArK2opIHYgPSB2LmNvbmNhdChIUFtqXS5tYXAoZnVuY3Rpb24oaHApIHsgcmV0dXJuIHt2OmhwfTsgfSkpO1xuXHR2YXIgcGFydHMgPSAodHlwZW9mIFRPUCA9PSBcInN0cmluZ1wiKSA/IHBhcnNlVmVjdG9yKFRPUCwgb3B0cykubWFwKGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnY7IH0pIDogVE9QO1xuXHR2YXIgaWR4ID0gMCwgbGVuID0gMDtcblx0aWYocGFydHMubGVuZ3RoID4gMCkgZm9yKHZhciBpID0gMDsgaSAhPT0gdi5sZW5ndGg7IGkgKz0gMikge1xuXHRcdGxlbiA9ICsodltpKzFdLnYpO1xuXHRcdHN3aXRjaCh2W2ldLnYpIHtcblx0XHRcdGNhc2UgXCJXb3Jrc2hlZXRzXCI6XG5cdFx0XHRjYXNlIFwi5bel5L2c6KGoXCI6XG5cdFx0XHRjYXNlIFwi0JvQuNGB0YLRi1wiOlxuXHRcdFx0Y2FzZSBcItij2YjYsdin2YIg2KfZhNi52YXZhFwiOlxuXHRcdFx0Y2FzZSBcIuODr+ODvOOCr+OCt+ODvOODiFwiOlxuXHRcdFx0Y2FzZSBcIteS15zXmdeV16DXldeqINei15HXldeT15RcIjpcblx0XHRcdGNhc2UgXCJBcmJlaXRzYmzDpHR0ZXJcIjpcblx0XHRcdGNhc2UgXCLDh2FsxLHFn21hIFNheWZhbGFyxLFcIjpcblx0XHRcdGNhc2UgXCJGZXVpbGxlcyBkZSBjYWxjdWxcIjpcblx0XHRcdGNhc2UgXCJGb2dsaSBkaSBsYXZvcm9cIjpcblx0XHRcdGNhc2UgXCJGb2xoYXMgZGUgY8OhbGN1bG9cIjpcblx0XHRcdGNhc2UgXCJQbGFuaWxoYXNcIjpcblx0XHRcdGNhc2UgXCJSZWduZWFya1wiOlxuXHRcdFx0Y2FzZSBcIkhvamFzIGRlIGPDoWxjdWxvXCI6XG5cdFx0XHRjYXNlIFwiV2Vya2JsYWRlblwiOlxuXHRcdFx0XHRwcm9wcy5Xb3Jrc2hlZXRzID0gbGVuO1xuXHRcdFx0XHRwcm9wcy5TaGVldE5hbWVzID0gcGFydHMuc2xpY2UoaWR4LCBpZHggKyBsZW4pO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSBcIk5hbWVkIFJhbmdlc1wiOlxuXHRcdFx0Y2FzZSBcIlJhbmdvcyBjb24gbm9tYnJlXCI6XG5cdFx0XHRjYXNlIFwi5ZCN5YmN5LuY44GN5LiA6KanXCI6XG5cdFx0XHRjYXNlIFwiQmVuYW5udGUgQmVyZWljaGVcIjpcblx0XHRcdGNhc2UgXCJOYXZuZ2l2bmUgb21yw6VkZXJcIjpcblx0XHRcdFx0cHJvcHMuTmFtZWRSYW5nZXMgPSBsZW47XG5cdFx0XHRcdHByb3BzLkRlZmluZWROYW1lcyA9IHBhcnRzLnNsaWNlKGlkeCwgaWR4ICsgbGVuKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgXCJDaGFydHNcIjpcblx0XHRcdGNhc2UgXCJEaWFncmFtbWVcIjpcblx0XHRcdFx0cHJvcHMuQ2hhcnRzaGVldHMgPSBsZW47XG5cdFx0XHRcdHByb3BzLkNoYXJ0TmFtZXMgPSBwYXJ0cy5zbGljZShpZHgsIGlkeCArIGxlbik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0XHRpZHggKz0gbGVuO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHBhcnNlX2V4dF9wcm9wcyhkYXRhLCBwLCBvcHRzKSB7XG5cdHZhciBxID0ge307IGlmKCFwKSBwID0ge307XG5cdGRhdGEgPSB1dGY4cmVhZChkYXRhKTtcblxuXHRFWFRfUFJPUFMuZm9yRWFjaChmdW5jdGlvbihmKSB7XG5cdFx0dmFyIHhtbCA9IChkYXRhLm1hdGNoKG1hdGNodGFnKGZbMF0pKXx8W10pWzFdO1xuXHRcdHN3aXRjaChmWzJdKSB7XG5cdFx0XHRjYXNlIFwic3RyaW5nXCI6IGlmKHhtbCkgcFtmWzFdXSA9IHVuZXNjYXBleG1sKHhtbCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcImJvb2xcIjogcFtmWzFdXSA9IHhtbCA9PT0gXCJ0cnVlXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcInJhd1wiOlxuXHRcdFx0XHR2YXIgY3VyID0gZGF0YS5tYXRjaChuZXcgUmVnRXhwKFwiPFwiICsgZlswXSArIFwiW14+XSo+KFtcXFxcc1xcXFxTXSo/KTxcXC9cIiArIGZbMF0gKyBcIj5cIikpO1xuXHRcdFx0XHRpZihjdXIgJiYgY3VyLmxlbmd0aCA+IDApIHFbZlsxXV0gPSBjdXJbMV07XG5cdFx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fSk7XG5cblx0aWYocS5IZWFkaW5nUGFpcnMgJiYgcS5UaXRsZXNPZlBhcnRzKSBsb2FkX3Byb3BzX3BhaXJzKHEuSGVhZGluZ1BhaXJzLCBxLlRpdGxlc09mUGFydHMsIHAsIG9wdHMpO1xuXG5cdHJldHVybiBwO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9leHRfcHJvcHMoY3AvKjo6LCBvcHRzKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdLCBXID0gd3JpdGV4dGFnO1xuXHRpZighY3ApIGNwID0ge307XG5cdGNwLkFwcGxpY2F0aW9uID0gXCJTaGVldEpTXCI7XG5cdG9bby5sZW5ndGhdID0gKFhNTF9IRUFERVIpO1xuXHRvW28ubGVuZ3RoXSA9ICh3cml0ZXh0YWcoJ1Byb3BlcnRpZXMnLCBudWxsLCB7XG5cdFx0J3htbG5zJzogWE1MTlMuRVhUX1BST1BTLFxuXHRcdCd4bWxuczp2dCc6IFhNTE5TLnZ0XG5cdH0pKTtcblxuXHRFWFRfUFJPUFMuZm9yRWFjaChmdW5jdGlvbihmKSB7XG5cdFx0aWYoY3BbZlsxXV0gPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHRcdHZhciB2O1xuXHRcdHN3aXRjaChmWzJdKSB7XG5cdFx0XHRjYXNlICdzdHJpbmcnOiB2ID0gZXNjYXBleG1sKFN0cmluZyhjcFtmWzFdXSkpOyBicmVhaztcblx0XHRcdGNhc2UgJ2Jvb2wnOiB2ID0gY3BbZlsxXV0gPyAndHJ1ZScgOiAnZmFsc2UnOyBicmVhaztcblx0XHR9XG5cdFx0aWYodiAhPT0gdW5kZWZpbmVkKSBvW28ubGVuZ3RoXSA9IChXKGZbMF0sIHYpKTtcblx0fSk7XG5cblx0LyogVE9ETzogSGVhZGluZ1BhaXJzLCBUaXRsZXNPZlBhcnRzICovXG5cdG9bby5sZW5ndGhdID0gKFcoJ0hlYWRpbmdQYWlycycsIFcoJ3Z0OnZlY3RvcicsIFcoJ3Z0OnZhcmlhbnQnLCAnPHZ0Omxwc3RyPldvcmtzaGVldHM8L3Z0Omxwc3RyPicpK1coJ3Z0OnZhcmlhbnQnLCBXKCd2dDppNCcsIFN0cmluZyhjcC5Xb3Jrc2hlZXRzKSkpLCB7c2l6ZToyLCBiYXNlVHlwZTpcInZhcmlhbnRcIn0pKSk7XG5cdG9bby5sZW5ndGhdID0gKFcoJ1RpdGxlc09mUGFydHMnLCBXKCd2dDp2ZWN0b3InLCBjcC5TaGVldE5hbWVzLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBcIjx2dDpscHN0cj5cIiArIGVzY2FwZXhtbChzKSArIFwiPC92dDpscHN0cj5cIjsgfSkuam9pbihcIlwiKSwge3NpemU6IGNwLldvcmtzaGVldHMsIGJhc2VUeXBlOlwibHBzdHJcIn0pKSk7XG5cdGlmKG8ubGVuZ3RoPjIpeyBvW28ubGVuZ3RoXSA9ICgnPC9Qcm9wZXJ0aWVzPicpOyBvWzFdPW9bMV0ucmVwbGFjZShcIi8+XCIsXCI+XCIpOyB9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG4vKiAxNS4yLjEyLjIgQ3VzdG9tIEZpbGUgUHJvcGVydGllcyBQYXJ0ICovXG52YXIgY3VzdHJlZ2V4ID0gLzxbXj5dKz5bXjxdKi9nO1xuZnVuY3Rpb24gcGFyc2VfY3VzdF9wcm9wcyhkYXRhLyo6c3RyaW5nKi8sIG9wdHMpIHtcblx0dmFyIHAgPSB7fSwgbmFtZSA9IFwiXCI7XG5cdHZhciBtID0gZGF0YS5tYXRjaChjdXN0cmVnZXgpO1xuXHRpZihtKSBmb3IodmFyIGkgPSAwOyBpICE9IG0ubGVuZ3RoOyArK2kpIHtcblx0XHR2YXIgeCA9IG1baV0sIHkgPSBwYXJzZXhtbHRhZyh4KTtcblx0XHRzd2l0Y2goeVswXSkge1xuXHRcdFx0Y2FzZSAnPD94bWwnOiBicmVhaztcblx0XHRcdGNhc2UgJzxQcm9wZXJ0aWVzJzogYnJlYWs7XG5cdFx0XHRjYXNlICc8cHJvcGVydHknOiBuYW1lID0gdW5lc2NhcGV4bWwoeS5uYW1lKTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L3Byb3BlcnR5Pic6IG5hbWUgPSBudWxsOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6IGlmICh4LmluZGV4T2YoJzx2dDonKSA9PT0gMCkge1xuXHRcdFx0XHR2YXIgdG9rcyA9IHguc3BsaXQoJz4nKTtcblx0XHRcdFx0dmFyIHR5cGUgPSB0b2tzWzBdLnNsaWNlKDQpLCB0ZXh0ID0gdG9rc1sxXTtcblx0XHRcdFx0LyogMjIuNC4yLjMyIChDVF9WYXJpYW50KS4gT21pdCB0aGUgYmluYXJ5IHR5cGVzIGZyb20gMjIuNCAoVmFyaWFudCBUeXBlcykgKi9cblx0XHRcdFx0c3dpdGNoKHR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdscHN0cic6IGNhc2UgJ2JzdHInOiBjYXNlICdscHdzdHInOlxuXHRcdFx0XHRcdFx0cFtuYW1lXSA9IHVuZXNjYXBleG1sKHRleHQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYm9vbCc6XG5cdFx0XHRcdFx0XHRwW25hbWVdID0gcGFyc2V4bWxib29sKHRleHQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaTEnOiBjYXNlICdpMic6IGNhc2UgJ2k0JzogY2FzZSAnaTgnOiBjYXNlICdpbnQnOiBjYXNlICd1aW50Jzpcblx0XHRcdFx0XHRcdHBbbmFtZV0gPSBwYXJzZUludCh0ZXh0LCAxMCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdyNCc6IGNhc2UgJ3I4JzogY2FzZSAnZGVjaW1hbCc6XG5cdFx0XHRcdFx0XHRwW25hbWVdID0gcGFyc2VGbG9hdCh0ZXh0KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2ZpbGV0aW1lJzogY2FzZSAnZGF0ZSc6XG5cdFx0XHRcdFx0XHRwW25hbWVdID0gcGFyc2VEYXRlKHRleHQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY3knOiBjYXNlICdlcnJvcic6XG5cdFx0XHRcdFx0XHRwW25hbWVdID0gdW5lc2NhcGV4bWwodGV4dCk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0aWYodHlwZS5zbGljZSgtMSkgPT0gJy8nKSBicmVhaztcblx0XHRcdFx0XHRcdGlmKG9wdHMuV1RGICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykgY29uc29sZS53YXJuKCdVbmV4cGVjdGVkJywgeCwgdHlwZSwgdG9rcyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZih4LnNsaWNlKDAsMikgPT09IFwiPC9cIikgey8qIGVtcHR5ICovXG5cdFx0XHR9IGVsc2UgaWYob3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcih4KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHA7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX2N1c3RfcHJvcHMoY3AvKjo6LCBvcHRzKi8pLyo6c3RyaW5nKi8ge1xuXHR2YXIgbyA9IFtYTUxfSEVBREVSLCB3cml0ZXh0YWcoJ1Byb3BlcnRpZXMnLCBudWxsLCB7XG5cdFx0J3htbG5zJzogWE1MTlMuQ1VTVF9QUk9QUyxcblx0XHQneG1sbnM6dnQnOiBYTUxOUy52dFxuXHR9KV07XG5cdGlmKCFjcCkgcmV0dXJuIG8uam9pbihcIlwiKTtcblx0dmFyIHBpZCA9IDE7XG5cdGtleXMoY3ApLmZvckVhY2goZnVuY3Rpb24gY3VzdHByb3AoaykgeyArK3BpZDtcblx0XHRvW28ubGVuZ3RoXSA9ICh3cml0ZXh0YWcoJ3Byb3BlcnR5Jywgd3JpdGVfdnQoY3Bba10sIHRydWUpLCB7XG5cdFx0XHQnZm10aWQnOiAne0Q1Q0RENTA1LTJFOUMtMTAxQi05Mzk3LTA4MDAyQjJDRjlBRX0nLFxuXHRcdFx0J3BpZCc6IHBpZCxcblx0XHRcdCduYW1lJzogZXNjYXBleG1sKGspXG5cdFx0fSkpO1xuXHR9KTtcblx0aWYoby5sZW5ndGg+Mil7IG9bby5sZW5ndGhdID0gJzwvUHJvcGVydGllcz4nOyBvWzFdPW9bMV0ucmVwbGFjZShcIi8+XCIsXCI+XCIpOyB9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG4vKiBDb21tb24gTmFtZSAtPiBYTE1MIE5hbWUgKi9cbnZhciBYTE1MRG9jUHJvcHNNYXAgPSB7XG5cdFRpdGxlOiAnVGl0bGUnLFxuXHRTdWJqZWN0OiAnU3ViamVjdCcsXG5cdEF1dGhvcjogJ0F1dGhvcicsXG5cdEtleXdvcmRzOiAnS2V5d29yZHMnLFxuXHRDb21tZW50czogJ0Rlc2NyaXB0aW9uJyxcblx0TGFzdEF1dGhvcjogJ0xhc3RBdXRob3InLFxuXHRSZXZOdW1iZXI6ICdSZXZpc2lvbicsXG5cdEFwcGxpY2F0aW9uOiAnQXBwTmFtZScsXG5cdC8qIFRvdGFsVGltZTogJ1RvdGFsVGltZScsICovXG5cdExhc3RQcmludGVkOiAnTGFzdFByaW50ZWQnLFxuXHRDcmVhdGVkRGF0ZTogJ0NyZWF0ZWQnLFxuXHRNb2RpZmllZERhdGU6ICdMYXN0U2F2ZWQnLFxuXHQvKiBQYWdlcyAqL1xuXHQvKiBXb3JkcyAqL1xuXHQvKiBDaGFyYWN0ZXJzICovXG5cdENhdGVnb3J5OiAnQ2F0ZWdvcnknLFxuXHQvKiBQcmVzZW50YXRpb25Gb3JtYXQgKi9cblx0TWFuYWdlcjogJ01hbmFnZXInLFxuXHRDb21wYW55OiAnQ29tcGFueScsXG5cdC8qIEd1aWQgKi9cblx0LyogSHlwZXJsaW5rQmFzZSAqL1xuXHQvKiBCeXRlcyAqL1xuXHQvKiBMaW5lcyAqL1xuXHQvKiBQYXJhZ3JhcGhzICovXG5cdC8qIENoYXJhY3RlcnNXaXRoU3BhY2VzICovXG5cdEFwcFZlcnNpb246ICdWZXJzaW9uJyxcblxuXHRDb250ZW50U3RhdHVzOiAnQ29udGVudFN0YXR1cycsIC8qIE5PVEU6IG1pc3NpbmcgZnJvbSBzY2hlbWEgKi9cblx0SWRlbnRpZmllcjogJ0lkZW50aWZpZXInLCAvKiBOT1RFOiBtaXNzaW5nIGZyb20gc2NoZW1hICovXG5cdExhbmd1YWdlOiAnTGFuZ3VhZ2UnIC8qIE5PVEU6IG1pc3NpbmcgZnJvbSBzY2hlbWEgKi9cbn07XG52YXIgZXZlcnRfWExNTERQTTtcblxuZnVuY3Rpb24geGxtbF9zZXRfcHJvcChQcm9wcywgdGFnLyo6c3RyaW5nKi8sIHZhbCkge1xuXHRpZighZXZlcnRfWExNTERQTSkgZXZlcnRfWExNTERQTSA9IGV2ZXJ0KFhMTUxEb2NQcm9wc01hcCk7XG5cdHRhZyA9IGV2ZXJ0X1hMTUxEUE1bdGFnXSB8fCB0YWc7XG5cdFByb3BzW3RhZ10gPSB2YWw7XG59XG5cbmZ1bmN0aW9uIHhsbWxfd3JpdGVfZG9jcHJvcHMoUHJvcHMsIG9wdHMpIHtcblx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0a2V5cyhYTE1MRG9jUHJvcHNNYXApLm1hcChmdW5jdGlvbihtKSB7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IENPUkVfUFJPUFMubGVuZ3RoOyArK2kpIGlmKENPUkVfUFJPUFNbaV1bMV0gPT0gbSkgcmV0dXJuIENPUkVfUFJPUFNbaV07XG5cdFx0Zm9yKGkgPSAwOyBpIDwgRVhUX1BST1BTLmxlbmd0aDsgKytpKSBpZihFWFRfUFJPUFNbaV1bMV0gPT0gbSkgcmV0dXJuIEVYVF9QUk9QU1tpXTtcblx0XHR0aHJvdyBtO1xuXHR9KS5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcblx0XHRpZihQcm9wc1twWzFdXSA9PSBudWxsKSByZXR1cm47XG5cdFx0dmFyIG0gPSBvcHRzICYmIG9wdHMuUHJvcHMgJiYgb3B0cy5Qcm9wc1twWzFdXSAhPSBudWxsID8gb3B0cy5Qcm9wc1twWzFdXSA6IFByb3BzW3BbMV1dO1xuXHRcdHN3aXRjaChwWzJdKSB7XG5cdFx0XHRjYXNlICdkYXRlJzogbSA9IG5ldyBEYXRlKG0pLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXFwuXFxkKlovLFwiWlwiKTsgYnJlYWs7XG5cdFx0fVxuXHRcdGlmKHR5cGVvZiBtID09ICdudW1iZXInKSBtID0gU3RyaW5nKG0pO1xuXHRcdGVsc2UgaWYobSA9PT0gdHJ1ZSB8fCBtID09PSBmYWxzZSkgeyBtID0gbSA/IFwiMVwiIDogXCIwXCI7IH1cblx0XHRlbHNlIGlmKG0gaW5zdGFuY2VvZiBEYXRlKSBtID0gbmV3IERhdGUobSkudG9JU09TdHJpbmcoKS5yZXBsYWNlKC9cXC5cXGQqWi8sXCJcIik7XG5cdFx0by5wdXNoKHdyaXRldGFnKFhMTUxEb2NQcm9wc01hcFtwWzFdXSB8fCBwWzFdLCBtKSk7XG5cdH0pO1xuXHRyZXR1cm4gd3JpdGV4dGFnKCdEb2N1bWVudFByb3BlcnRpZXMnLCBvLmpvaW4oXCJcIiksIHt4bWxuczpYTE1MTlMubyB9KTtcbn1cbmZ1bmN0aW9uIHhsbWxfd3JpdGVfY3VzdHByb3BzKFByb3BzLCBDdXN0cHJvcHMvKjo6LCBvcHRzKi8pIHtcblx0dmFyIEJMQUNLTElTVCA9IFtcIldvcmtzaGVldHNcIixcIlNoZWV0TmFtZXNcIl07XG5cdHZhciBUID0gJ0N1c3RvbURvY3VtZW50UHJvcGVydGllcyc7XG5cdHZhciBvLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdGlmKFByb3BzKSBrZXlzKFByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcblx0XHQvKjo6IGlmKCFQcm9wcykgcmV0dXJuOyAqL1xuXHRcdGlmKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoUHJvcHMsIGspKSByZXR1cm47XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IENPUkVfUFJPUFMubGVuZ3RoOyArK2kpIGlmKGsgPT0gQ09SRV9QUk9QU1tpXVsxXSkgcmV0dXJuO1xuXHRcdGZvcihpID0gMDsgaSA8IEVYVF9QUk9QUy5sZW5ndGg7ICsraSkgaWYoayA9PSBFWFRfUFJPUFNbaV1bMV0pIHJldHVybjtcblx0XHRmb3IoaSA9IDA7IGkgPCBCTEFDS0xJU1QubGVuZ3RoOyArK2kpIGlmKGsgPT0gQkxBQ0tMSVNUW2ldKSByZXR1cm47XG5cblx0XHR2YXIgbSA9IFByb3BzW2tdO1xuXHRcdHZhciB0ID0gXCJzdHJpbmdcIjtcblx0XHRpZih0eXBlb2YgbSA9PSAnbnVtYmVyJykgeyB0ID0gXCJmbG9hdFwiOyBtID0gU3RyaW5nKG0pOyB9XG5cdFx0ZWxzZSBpZihtID09PSB0cnVlIHx8IG0gPT09IGZhbHNlKSB7IHQgPSBcImJvb2xlYW5cIjsgbSA9IG0gPyBcIjFcIiA6IFwiMFwiOyB9XG5cdFx0ZWxzZSBtID0gU3RyaW5nKG0pO1xuXHRcdG8ucHVzaCh3cml0ZXh0YWcoZXNjYXBleG1sdGFnKGspLCBtLCB7XCJkdDpkdFwiOnR9KSk7XG5cdH0pO1xuXHRpZihDdXN0cHJvcHMpIGtleXMoQ3VzdHByb3BzKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcblx0XHQvKjo6IGlmKCFDdXN0cHJvcHMpIHJldHVybjsgKi9cblx0XHRpZighT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKEN1c3Rwcm9wcywgaykpIHJldHVybjtcblx0XHRpZihQcm9wcyAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoUHJvcHMsIGspKSByZXR1cm47XG5cdFx0dmFyIG0gPSBDdXN0cHJvcHNba107XG5cdFx0dmFyIHQgPSBcInN0cmluZ1wiO1xuXHRcdGlmKHR5cGVvZiBtID09ICdudW1iZXInKSB7IHQgPSBcImZsb2F0XCI7IG0gPSBTdHJpbmcobSk7IH1cblx0XHRlbHNlIGlmKG0gPT09IHRydWUgfHwgbSA9PT0gZmFsc2UpIHsgdCA9IFwiYm9vbGVhblwiOyBtID0gbSA/IFwiMVwiIDogXCIwXCI7IH1cblx0XHRlbHNlIGlmKG0gaW5zdGFuY2VvZiBEYXRlKSB7IHQgPSBcImRhdGVUaW1lLnR6XCI7IG0gPSBtLnRvSVNPU3RyaW5nKCk7IH1cblx0XHRlbHNlIG0gPSBTdHJpbmcobSk7XG5cdFx0by5wdXNoKHdyaXRleHRhZyhlc2NhcGV4bWx0YWcoayksIG0sIHtcImR0OmR0XCI6dH0pKTtcblx0fSk7XG5cdHJldHVybiAnPCcgKyBUICsgJyB4bWxucz1cIicgKyBYTE1MTlMubyArICdcIj4nICsgby5qb2luKFwiXCIpICsgJzwvJyArIFQgKyAnPic7XG59XG4vKiBbTVMtRFRZUF0gMi4zLjMgRklMRVRJTUUgKi9cbi8qIFtNUy1PTEVEU10gMi4xLjMgRklMRVRJTUUgKFBhY2tldCBWZXJzaW9uKSAqL1xuLyogW01TLU9MRVBTXSAyLjggRklMRVRJTUUgKFBhY2tldCBWZXJzaW9uKSAqL1xuZnVuY3Rpb24gcGFyc2VfRklMRVRJTUUoYmxvYikge1xuXHR2YXIgZHdMb3dEYXRlVGltZSA9IGJsb2IucmVhZF9zaGlmdCg0KSwgZHdIaWdoRGF0ZVRpbWUgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHJldHVybiBuZXcgRGF0ZSgoKGR3SGlnaERhdGVUaW1lLzFlNypNYXRoLnBvdygyLDMyKSArIGR3TG93RGF0ZVRpbWUvMWU3KSAtIDExNjQ0NDczNjAwKSoxMDAwKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLjAwMC8sXCJcIik7XG59XG5mdW5jdGlvbiB3cml0ZV9GSUxFVElNRSh0aW1lLyo6c3RyaW5nfERhdGUqLykge1xuXHR2YXIgZGF0ZSA9ICh0eXBlb2YgdGltZSA9PSBcInN0cmluZ1wiKSA/IG5ldyBEYXRlKERhdGUucGFyc2UodGltZSkpIDogdGltZTtcblx0dmFyIHQgPSBkYXRlLmdldFRpbWUoKSAvIDEwMDAgKyAxMTY0NDQ3MzYwMDtcblx0dmFyIGwgPSB0ICUgTWF0aC5wb3coMiwzMiksIGggPSAodCAtIGwpIC8gTWF0aC5wb3coMiwzMik7XG5cdGwgKj0gMWU3OyBoICo9IDFlNztcblx0dmFyIHcgPSAobCAvIE1hdGgucG93KDIsMzIpKSB8IDA7XG5cdGlmKHcgPiAwKSB7IGwgPSBsICUgTWF0aC5wb3coMiwzMik7IGggKz0gdzsgfVxuXHR2YXIgbyA9IG5ld19idWYoOCk7IG8ud3JpdGVfc2hpZnQoNCwgbCk7IG8ud3JpdGVfc2hpZnQoNCwgaCk7IHJldHVybiBvO1xufVxuXG4vKiBbTVMtT1NIQVJFRF0gMi4zLjMuMS40IExwc3RyICovXG5mdW5jdGlvbiBwYXJzZV9scHN0cihibG9iLCB0eXBlLCBwYWQvKjo/bnVtYmVyKi8pIHtcblx0dmFyIHN0YXJ0ID0gYmxvYi5sO1xuXHR2YXIgc3RyID0gYmxvYi5yZWFkX3NoaWZ0KDAsICdscHN0ci1jcCcpO1xuXHRpZihwYWQpIHdoaWxlKChibG9iLmwgLSBzdGFydCkgJiAzKSArK2Jsb2IubDtcblx0cmV0dXJuIHN0cjtcbn1cblxuLyogW01TLU9TSEFSRURdIDIuMy4zLjEuNiBMcHdzdHIgKi9cbmZ1bmN0aW9uIHBhcnNlX2xwd3N0cihibG9iLCB0eXBlLCBwYWQpIHtcblx0dmFyIHN0ciA9IGJsb2IucmVhZF9zaGlmdCgwLCAnbHB3c3RyJyk7XG5cdGlmKHBhZCkgYmxvYi5sICs9ICg0IC0gKChzdHIubGVuZ3RoKzEpICYgMykpICYgMztcblx0cmV0dXJuIHN0cjtcbn1cblxuXG4vKiBbTVMtT1NIQVJFRF0gMi4zLjMuMS4xMSBWdFN0cmluZyAqL1xuLyogW01TLU9TSEFSRURdIDIuMy4zLjEuMTIgVnRVbmFsaWduZWRTdHJpbmcgKi9cbmZ1bmN0aW9uIHBhcnNlX1Z0U3RyaW5nQmFzZShibG9iLCBzdHJpbmdUeXBlLCBwYWQpIHtcblx0aWYoc3RyaW5nVHlwZSA9PT0gMHgxRiAvKlZUX0xQV1NUUiovKSByZXR1cm4gcGFyc2VfbHB3c3RyKGJsb2IpO1xuXHRyZXR1cm4gcGFyc2VfbHBzdHIoYmxvYiwgc3RyaW5nVHlwZSwgcGFkKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VfVnRTdHJpbmcoYmxvYiwgdC8qOm51bWJlciovLCBwYWQvKjo/Ym9vbGVhbiovKSB7IHJldHVybiBwYXJzZV9WdFN0cmluZ0Jhc2UoYmxvYiwgdCwgcGFkID09PSBmYWxzZSA/IDA6IDQpOyB9XG5mdW5jdGlvbiBwYXJzZV9WdFVuYWxpZ25lZFN0cmluZyhibG9iLCB0Lyo6bnVtYmVyKi8pIHsgaWYoIXQpIHRocm93IG5ldyBFcnJvcihcIlZ0VW5hbGlnbmVkU3RyaW5nIG11c3QgaGF2ZSBwb3NpdGl2ZSBsZW5ndGhcIik7IHJldHVybiBwYXJzZV9WdFN0cmluZ0Jhc2UoYmxvYiwgdCwgMCk7IH1cblxuLyogW01TLU9TSEFSRURdIDIuMy4zLjEuNyBWdFZlY0xwd3N0clZhbHVlICovXG5mdW5jdGlvbiBwYXJzZV9WdFZlY0xwd3N0clZhbHVlKGJsb2IpLyo6QXJyYXk8c3RyaW5nPiovIHtcblx0dmFyIGxlbmd0aCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIHJldC8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9IGxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIHN0YXJ0ID0gYmxvYi5sO1xuXHRcdHJldFtpXSA9IGJsb2IucmVhZF9zaGlmdCgwLCAnbHB3c3RyJykucmVwbGFjZShjaHIwLCcnKTtcblx0XHRpZigoYmxvYi5sIC0gc3RhcnQpICYgMHgwMikgYmxvYi5sICs9IDI7XG5cdH1cblx0cmV0dXJuIHJldDtcbn1cblxuLyogW01TLU9TSEFSRURdIDIuMy4zLjEuOSBWdFZlY1VuYWxpZ25lZExwc3RyVmFsdWUgKi9cbmZ1bmN0aW9uIHBhcnNlX1Z0VmVjVW5hbGlnbmVkTHBzdHJWYWx1ZShibG9iKS8qOkFycmF5PHN0cmluZz4qLyB7XG5cdHZhciBsZW5ndGggPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciByZXQvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0Zm9yKHZhciBpID0gMDsgaSAhPSBsZW5ndGg7ICsraSkgcmV0W2ldID0gYmxvYi5yZWFkX3NoaWZ0KDAsICdscHN0ci1jcCcpLnJlcGxhY2UoY2hyMCwnJyk7XG5cdHJldHVybiByZXQ7XG59XG5cblxuLyogW01TLU9TSEFSRURdIDIuMy4zLjEuMTMgVnRIZWFkaW5nUGFpciAqL1xuZnVuY3Rpb24gcGFyc2VfVnRIZWFkaW5nUGFpcihibG9iKSB7XG5cdHZhciBzdGFydCA9IGJsb2IubDtcblx0dmFyIGhlYWRpbmdTdHJpbmcgPSBwYXJzZV9UeXBlZFByb3BlcnR5VmFsdWUoYmxvYiwgVlRfVVNUUik7XG5cdGlmKGJsb2JbYmxvYi5sXSA9PSAweDAwICYmIGJsb2JbYmxvYi5sKzFdID09IDB4MDAgJiYgKChibG9iLmwgLSBzdGFydCkgJiAweDAyKSkgYmxvYi5sICs9IDI7XG5cdHZhciBoZWFkZXJQYXJ0cyA9IHBhcnNlX1R5cGVkUHJvcGVydHlWYWx1ZShibG9iLCBWVF9JNCk7XG5cdHJldHVybiBbaGVhZGluZ1N0cmluZywgaGVhZGVyUGFydHNdO1xufVxuXG4vKiBbTVMtT1NIQVJFRF0gMi4zLjMuMS4xNCBWdFZlY0hlYWRpbmdQYWlyVmFsdWUgKi9cbmZ1bmN0aW9uIHBhcnNlX1Z0VmVjSGVhZGluZ1BhaXJWYWx1ZShibG9iKSB7XG5cdHZhciBjRWxlbWVudHMgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciBvdXQgPSBbXTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGNFbGVtZW50cyAvIDI7ICsraSkgb3V0LnB1c2gocGFyc2VfVnRIZWFkaW5nUGFpcihibG9iKSk7XG5cdHJldHVybiBvdXQ7XG59XG5cbi8qIFtNUy1PTEVQU10gMi4xOC4xIERpY3Rpb25hcnkgKHVzZXMgMi4xNywgMi4xNikgKi9cbmZ1bmN0aW9uIHBhcnNlX2RpY3Rpb25hcnkoYmxvYixDb2RlUGFnZSkge1xuXHR2YXIgY250ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgZGljdC8qOntbbnVtYmVyXTpzdHJpbmd9Ki8gPSAoe30vKjphbnkqLyk7XG5cdGZvcih2YXIgaiA9IDA7IGogIT0gY250OyArK2opIHtcblx0XHR2YXIgcGlkID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRcdHZhciBsZW4gPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdFx0ZGljdFtwaWRdID0gYmxvYi5yZWFkX3NoaWZ0KGxlbiwgKENvZGVQYWdlID09PSAweDRCMCA/J3V0ZjE2bGUnOid1dGY4JykpLnJlcGxhY2UoY2hyMCwnJykucmVwbGFjZShjaHIxLCchJyk7XG5cdFx0aWYoQ29kZVBhZ2UgPT09IDB4NEIwICYmIChsZW4gJSAyKSkgYmxvYi5sICs9IDI7XG5cdH1cblx0aWYoYmxvYi5sICYgMykgYmxvYi5sID0gKGJsb2IubD4+MisxKTw8Mjtcblx0cmV0dXJuIGRpY3Q7XG59XG5cbi8qIFtNUy1PTEVQU10gMi45IEJMT0IgKi9cbmZ1bmN0aW9uIHBhcnNlX0JMT0IoYmxvYikge1xuXHR2YXIgc2l6ZSA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIGJ5dGVzID0gYmxvYi5zbGljZShibG9iLmwsYmxvYi5sK3NpemUpO1xuXHRibG9iLmwgKz0gc2l6ZTtcblx0aWYoKHNpemUgJiAzKSA+IDApIGJsb2IubCArPSAoNCAtIChzaXplICYgMykpICYgMztcblx0cmV0dXJuIGJ5dGVzO1xufVxuXG4vKiBbTVMtT0xFUFNdIDIuMTEgQ2xpcGJvYXJkRGF0YSAqL1xuZnVuY3Rpb24gcGFyc2VfQ2xpcGJvYXJkRGF0YShibG9iKSB7XG5cdC8vIFRPRE9cblx0dmFyIG8gPSB7fTtcblx0by5TaXplID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHQvL28uRm9ybWF0ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRibG9iLmwgKz0gby5TaXplICsgMyAtIChvLlNpemUgLSAxKSAlIDQ7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtT0xFUFNdIDIuMTUgVHlwZWRQcm9wZXJ0eVZhbHVlICovXG5mdW5jdGlvbiBwYXJzZV9UeXBlZFByb3BlcnR5VmFsdWUoYmxvYiwgdHlwZS8qOm51bWJlciovLCBfb3B0cykvKjphbnkqLyB7XG5cdHZhciB0ID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCByZXQsIG9wdHMgPSBfb3B0c3x8e307XG5cdGJsb2IubCArPSAyO1xuXHRpZih0eXBlICE9PSBWVF9WQVJJQU5UKVxuXHRpZih0ICE9PSB0eXBlICYmIFZUX0NVU1RPTS5pbmRleE9mKHR5cGUpPT09LTEgJiYgISgodHlwZSAmIDB4RkZGRSkgPT0gMHgxMDFFICYmICh0ICYgMHhGRkZFKSA9PSAweDEwMUUpKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHR5cGUgJyArIHR5cGUgKyAnIHNhdyAnICsgdCk7XG5cdHN3aXRjaCh0eXBlID09PSBWVF9WQVJJQU5UID8gdCA6IHR5cGUpIHtcblx0XHRjYXNlIDB4MDIgLypWVF9JMiovOiByZXQgPSBibG9iLnJlYWRfc2hpZnQoMiwgJ2knKTsgaWYoIW9wdHMucmF3KSBibG9iLmwgKz0gMjsgcmV0dXJuIHJldDtcblx0XHRjYXNlIDB4MDMgLypWVF9JNCovOiByZXQgPSBibG9iLnJlYWRfc2hpZnQoNCwgJ2knKTsgcmV0dXJuIHJldDtcblx0XHRjYXNlIDB4MEIgLypWVF9CT09MKi86IHJldHVybiBibG9iLnJlYWRfc2hpZnQoNCkgIT09IDB4MDtcblx0XHRjYXNlIDB4MTMgLypWVF9VSTQqLzogcmV0ID0gYmxvYi5yZWFkX3NoaWZ0KDQpOyByZXR1cm4gcmV0O1xuXHRcdGNhc2UgMHgxRSAvKlZUX0xQU1RSKi86IHJldHVybiBwYXJzZV9scHN0cihibG9iLCB0LCA0KS5yZXBsYWNlKGNocjAsJycpO1xuXHRcdGNhc2UgMHgxRiAvKlZUX0xQV1NUUiovOiByZXR1cm4gcGFyc2VfbHB3c3RyKGJsb2IpO1xuXHRcdGNhc2UgMHg0MCAvKlZUX0ZJTEVUSU1FKi86IHJldHVybiBwYXJzZV9GSUxFVElNRShibG9iKTtcblx0XHRjYXNlIDB4NDEgLypWVF9CTE9CKi86IHJldHVybiBwYXJzZV9CTE9CKGJsb2IpO1xuXHRcdGNhc2UgMHg0NyAvKlZUX0NGKi86IHJldHVybiBwYXJzZV9DbGlwYm9hcmREYXRhKGJsb2IpO1xuXHRcdGNhc2UgMHg1MCAvKlZUX1NUUklORyovOiByZXR1cm4gcGFyc2VfVnRTdHJpbmcoYmxvYiwgdCwgIW9wdHMucmF3KS5yZXBsYWNlKGNocjAsJycpO1xuXHRcdGNhc2UgMHg1MSAvKlZUX1VTVFIqLzogcmV0dXJuIHBhcnNlX1Z0VW5hbGlnbmVkU3RyaW5nKGJsb2IsIHQvKiwgNCovKS5yZXBsYWNlKGNocjAsJycpO1xuXHRcdGNhc2UgMHgxMDBDIC8qVlRfVkVDVE9SfFZUX1ZBUklBTlQqLzogcmV0dXJuIHBhcnNlX1Z0VmVjSGVhZGluZ1BhaXJWYWx1ZShibG9iKTtcblx0XHRjYXNlIDB4MTAxRSAvKlZUX1ZFQ1RPUnxWVF9MUFNUUiovOlxuXHRcdGNhc2UgMHgxMDFGIC8qVlRfVkVDVE9SfFZUX0xQV1NUUiovOlxuXHRcdFx0cmV0dXJuIHQgPT0gMHgxMDFGID8gcGFyc2VfVnRWZWNMcHdzdHJWYWx1ZShibG9iKSA6IHBhcnNlX1Z0VmVjVW5hbGlnbmVkTHBzdHJWYWx1ZShibG9iKTtcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJUeXBlZFByb3BlcnR5VmFsdWUgdW5yZWNvZ25pemVkIHR5cGUgXCIgKyB0eXBlICsgXCIgXCIgKyB0KTtcblx0fVxufVxuZnVuY3Rpb24gd3JpdGVfVHlwZWRQcm9wZXJ0eVZhbHVlKHR5cGUvKjpudW1iZXIqLywgdmFsdWUpIHtcblx0dmFyIG8gPSBuZXdfYnVmKDQpLCBwID0gbmV3X2J1Zig0KTtcblx0by53cml0ZV9zaGlmdCg0LCB0eXBlID09IDB4NTAgPyAweDFGIDogdHlwZSk7XG5cdHN3aXRjaCh0eXBlKSB7XG5cdFx0Y2FzZSAweDAzIC8qVlRfSTQqLzogcC53cml0ZV9zaGlmdCgtNCwgdmFsdWUpOyBicmVhaztcblx0XHRjYXNlIDB4MDUgLypWVF9JNCovOiBwID0gbmV3X2J1Zig4KTsgcC53cml0ZV9zaGlmdCg4LCB2YWx1ZSwgJ2YnKTsgYnJlYWs7XG5cdFx0Y2FzZSAweDBCIC8qVlRfQk9PTCovOiBwLndyaXRlX3NoaWZ0KDQsIHZhbHVlID8gMHgwMSA6IDB4MDApOyBicmVhaztcblx0XHRjYXNlIDB4NDAgLypWVF9GSUxFVElNRSovOiAvKjo6IGlmKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIiAmJiAhKHZhbHVlIGluc3RhbmNlb2YgRGF0ZSkpIHRocm93IFwidW5yZWFjaGFibGVcIjsgKi8gcCA9IHdyaXRlX0ZJTEVUSU1FKHZhbHVlKTsgYnJlYWs7XG5cdFx0Y2FzZSAweDFGIC8qVlRfTFBXU1RSKi86XG5cdFx0Y2FzZSAweDUwIC8qVlRfU1RSSU5HKi86XG5cdFx0XHQvKjo6IGlmKHR5cGVvZiB2YWx1ZSAhPT0gXCJzdHJpbmdcIikgdGhyb3cgXCJ1bnJlYWNoYWJsZVwiOyAqL1xuXHRcdFx0cCA9IG5ld19idWYoNCArIDIgKiAodmFsdWUubGVuZ3RoICsgMSkgKyAodmFsdWUubGVuZ3RoICUgMiA/IDAgOiAyKSk7XG5cdFx0XHRwLndyaXRlX3NoaWZ0KDQsIHZhbHVlLmxlbmd0aCArIDEpO1xuXHRcdFx0cC53cml0ZV9zaGlmdCgwLCB2YWx1ZSwgXCJkYmNzXCIpO1xuXHRcdFx0d2hpbGUocC5sICE9IHAubGVuZ3RoKSBwLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRcdFx0YnJlYWs7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVHlwZWRQcm9wZXJ0eVZhbHVlIHVucmVjb2duaXplZCB0eXBlIFwiICsgdHlwZSArIFwiIFwiICsgdmFsdWUpO1xuXHR9XG5cdHJldHVybiBiY29uY2F0KFtvLCBwXSk7XG59XG5cbi8qIFtNUy1PTEVQU10gMi4yMCBQcm9wZXJ0eVNldCAqL1xuZnVuY3Rpb24gcGFyc2VfUHJvcGVydHlTZXQoYmxvYiwgUElEU0kpIHtcblx0dmFyIHN0YXJ0X2FkZHIgPSBibG9iLmw7XG5cdHZhciBzaXplID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgTnVtUHJvcHMgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciBQcm9wcyA9IFtdLCBpID0gMDtcblx0dmFyIENvZGVQYWdlID0gMDtcblx0dmFyIERpY3Rpb25hcnkgPSAtMSwgRGljdE9iai8qOntbbnVtYmVyXTpzdHJpbmd9Ki8gPSAoe30vKjphbnkqLyk7XG5cdGZvcihpID0gMDsgaSAhPSBOdW1Qcm9wczsgKytpKSB7XG5cdFx0dmFyIFByb3BJRCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0XHR2YXIgT2Zmc2V0ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRcdFByb3BzW2ldID0gW1Byb3BJRCwgT2Zmc2V0ICsgc3RhcnRfYWRkcl07XG5cdH1cblx0UHJvcHMuc29ydChmdW5jdGlvbih4LHkpIHsgcmV0dXJuIHhbMV0gLSB5WzFdOyB9KTtcblx0dmFyIFByb3BIID0ge307XG5cdGZvcihpID0gMDsgaSAhPSBOdW1Qcm9wczsgKytpKSB7XG5cdFx0aWYoYmxvYi5sICE9PSBQcm9wc1tpXVsxXSkge1xuXHRcdFx0dmFyIGZhaWwgPSB0cnVlO1xuXHRcdFx0aWYoaT4wICYmIFBJRFNJKSBzd2l0Y2goUElEU0lbUHJvcHNbaS0xXVswXV0udCkge1xuXHRcdFx0XHRjYXNlIDB4MDIgLypWVF9JMiovOiBpZihibG9iLmwrMiA9PT0gUHJvcHNbaV1bMV0pIHsgYmxvYi5sKz0yOyBmYWlsID0gZmFsc2U7IH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHg1MCAvKlZUX1NUUklORyovOiBpZihibG9iLmwgPD0gUHJvcHNbaV1bMV0pIHsgYmxvYi5sPVByb3BzW2ldWzFdOyBmYWlsID0gZmFsc2U7IH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgxMDBDIC8qVlRfVkVDVE9SfFZUX1ZBUklBTlQqLzogaWYoYmxvYi5sIDw9IFByb3BzW2ldWzFdKSB7IGJsb2IubD1Qcm9wc1tpXVsxXTsgZmFpbCA9IGZhbHNlOyB9IGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYoKCFQSURTSXx8aT09MCkgJiYgYmxvYi5sIDw9IFByb3BzW2ldWzFdKSB7IGZhaWw9ZmFsc2U7IGJsb2IubCA9IFByb3BzW2ldWzFdOyB9XG5cdFx0XHRpZihmYWlsKSB0aHJvdyBuZXcgRXJyb3IoXCJSZWFkIEVycm9yOiBFeHBlY3RlZCBhZGRyZXNzIFwiICsgUHJvcHNbaV1bMV0gKyAnIGF0ICcgKyBibG9iLmwgKyAnIDonICsgaSk7XG5cdFx0fVxuXHRcdGlmKFBJRFNJKSB7XG5cdFx0XHR2YXIgcGlkZHNpID0gUElEU0lbUHJvcHNbaV1bMF1dO1xuXHRcdFx0UHJvcEhbcGlkZHNpLm5dID0gcGFyc2VfVHlwZWRQcm9wZXJ0eVZhbHVlKGJsb2IsIHBpZGRzaS50LCB7cmF3OnRydWV9KTtcblx0XHRcdGlmKHBpZGRzaS5wID09PSAndmVyc2lvbicpIFByb3BIW3BpZGRzaS5uXSA9IFN0cmluZyhQcm9wSFtwaWRkc2kubl0gPj4gMTYpICsgXCIuXCIgKyAoXCIwMDAwXCIgKyBTdHJpbmcoUHJvcEhbcGlkZHNpLm5dICYgMHhGRkZGKSkuc2xpY2UoLTQpO1xuXHRcdFx0aWYocGlkZHNpLm4gPT0gXCJDb2RlUGFnZVwiKSBzd2l0Y2goUHJvcEhbcGlkZHNpLm5dKSB7XG5cdFx0XHRcdGNhc2UgMDogUHJvcEhbcGlkZHNpLm5dID0gMTI1Mjtcblx0XHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRcdGNhc2UgODc0OlxuXHRcdFx0XHRjYXNlIDkzMjpcblx0XHRcdFx0Y2FzZSA5MzY6XG5cdFx0XHRcdGNhc2UgOTQ5OlxuXHRcdFx0XHRjYXNlIDk1MDpcblx0XHRcdFx0Y2FzZSAxMjUwOlxuXHRcdFx0XHRjYXNlIDEyNTE6XG5cdFx0XHRcdGNhc2UgMTI1Mzpcblx0XHRcdFx0Y2FzZSAxMjU0OlxuXHRcdFx0XHRjYXNlIDEyNTU6XG5cdFx0XHRcdGNhc2UgMTI1Njpcblx0XHRcdFx0Y2FzZSAxMjU3OlxuXHRcdFx0XHRjYXNlIDEyNTg6XG5cdFx0XHRcdGNhc2UgMTAwMDA6XG5cdFx0XHRcdGNhc2UgMTIwMDpcblx0XHRcdFx0Y2FzZSAxMjAxOlxuXHRcdFx0XHRjYXNlIDEyNTI6XG5cdFx0XHRcdGNhc2UgNjUwMDA6IGNhc2UgLTUzNjpcblx0XHRcdFx0Y2FzZSA2NTAwMTogY2FzZSAtNTM1OlxuXHRcdFx0XHRcdHNldF9jcChDb2RlUGFnZSA9IChQcm9wSFtwaWRkc2kubl0+Pj4wKSAmIDB4RkZGRik7IGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBDb2RlUGFnZTogXCIgKyBQcm9wSFtwaWRkc2kubl0pO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZihQcm9wc1tpXVswXSA9PT0gMHgxKSB7XG5cdFx0XHRcdENvZGVQYWdlID0gUHJvcEguQ29kZVBhZ2UgPSAocGFyc2VfVHlwZWRQcm9wZXJ0eVZhbHVlKGJsb2IsIFZUX0kyKS8qOm51bWJlciovKTtcblx0XHRcdFx0c2V0X2NwKENvZGVQYWdlKTtcblx0XHRcdFx0aWYoRGljdGlvbmFyeSAhPT0gLTEpIHtcblx0XHRcdFx0XHR2YXIgb2xkcG9zID0gYmxvYi5sO1xuXHRcdFx0XHRcdGJsb2IubCA9IFByb3BzW0RpY3Rpb25hcnldWzFdO1xuXHRcdFx0XHRcdERpY3RPYmogPSBwYXJzZV9kaWN0aW9uYXJ5KGJsb2IsQ29kZVBhZ2UpO1xuXHRcdFx0XHRcdGJsb2IubCA9IG9sZHBvcztcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmKFByb3BzW2ldWzBdID09PSAwKSB7XG5cdFx0XHRcdGlmKENvZGVQYWdlID09PSAwKSB7IERpY3Rpb25hcnkgPSBpOyBibG9iLmwgPSBQcm9wc1tpKzFdWzFdOyBjb250aW51ZTsgfVxuXHRcdFx0XHREaWN0T2JqID0gcGFyc2VfZGljdGlvbmFyeShibG9iLENvZGVQYWdlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHZhciBuYW1lID0gRGljdE9ialtQcm9wc1tpXVswXV07XG5cdFx0XHRcdHZhciB2YWw7XG5cdFx0XHRcdC8qIFtNUy1PU0hBUkVEXSAyLjMuMy4yLjMuMS4yICsgUFJPUFZBUklBTlQgKi9cblx0XHRcdFx0c3dpdGNoKGJsb2JbYmxvYi5sXSkge1xuXHRcdFx0XHRcdGNhc2UgMHg0MSAvKlZUX0JMT0IqLzogYmxvYi5sICs9IDQ7IHZhbCA9IHBhcnNlX0JMT0IoYmxvYik7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgMHgxRSAvKlZUX0xQU1RSKi86IGJsb2IubCArPSA0OyB2YWwgPSBwYXJzZV9WdFN0cmluZyhibG9iLCBibG9iW2Jsb2IubC00XSkucmVwbGFjZSgvXFx1MDAwMCskLyxcIlwiKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAweDFGIC8qVlRfTFBXU1RSKi86IGJsb2IubCArPSA0OyB2YWwgPSBwYXJzZV9WdFN0cmluZyhibG9iLCBibG9iW2Jsb2IubC00XSkucmVwbGFjZSgvXFx1MDAwMCskLyxcIlwiKTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAweDAzIC8qVlRfSTQqLzogYmxvYi5sICs9IDQ7IHZhbCA9IGJsb2IucmVhZF9zaGlmdCg0LCAnaScpOyBicmVhaztcblx0XHRcdFx0XHRjYXNlIDB4MTMgLypWVF9VSTQqLzogYmxvYi5sICs9IDQ7IHZhbCA9IGJsb2IucmVhZF9zaGlmdCg0KTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAweDA1IC8qVlRfUjgqLzogYmxvYi5sICs9IDQ7IHZhbCA9IGJsb2IucmVhZF9zaGlmdCg4LCAnZicpOyBicmVhaztcblx0XHRcdFx0XHRjYXNlIDB4MEIgLypWVF9CT09MKi86IGJsb2IubCArPSA0OyB2YWwgPSBwYXJzZWJvb2woYmxvYiwgNCk7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgMHg0MCAvKlZUX0ZJTEVUSU1FKi86IGJsb2IubCArPSA0OyB2YWwgPSBwYXJzZURhdGUocGFyc2VfRklMRVRJTUUoYmxvYikpOyBicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJ1bnBhcnNlZCB2YWx1ZTogXCIgKyBibG9iW2Jsb2IubF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFByb3BIW25hbWVdID0gdmFsO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRibG9iLmwgPSBzdGFydF9hZGRyICsgc2l6ZTsgLyogc3RlcCBhaGVhZCB0byBza2lwIHBhZGRpbmcgKi9cblx0cmV0dXJuIFByb3BIO1xufVxudmFyIFhMU1BTU2tpcCA9IFsgXCJDb2RlUGFnZVwiLCBcIlRodW1ibmFpbFwiLCBcIl9QSURfTElOS0JBU0VcIiwgXCJfUElEX0hMSU5LU1wiLCBcIlN5c3RlbUlkZW50aWZpZXJcIiwgXCJGTVRJRFwiIF07IC8vLmNvbmNhdChQc2V1ZG9Qcm9wc1BhaXJzKTtcbmZ1bmN0aW9uIGd1ZXNzX3Byb3BlcnR5X3R5cGUodmFsLyo6YW55Ki8pLyo6bnVtYmVyKi8ge1xuXHRzd2l0Y2godHlwZW9mIHZhbCkge1xuXHRcdGNhc2UgXCJib29sZWFuXCI6IHJldHVybiAweDBCO1xuXHRcdGNhc2UgXCJudW1iZXJcIjogcmV0dXJuICgodmFsfDApPT12YWwpID8gMHgwMyA6IDB4MDU7XG5cdFx0Y2FzZSBcInN0cmluZ1wiOiByZXR1cm4gMHgxRjtcblx0XHRjYXNlIFwib2JqZWN0XCI6IGlmKHZhbCBpbnN0YW5jZW9mIERhdGUpIHJldHVybiAweDQwOyBicmVhaztcblx0fVxuXHRyZXR1cm4gLTE7XG59XG5mdW5jdGlvbiB3cml0ZV9Qcm9wZXJ0eVNldChlbnRyaWVzLCBSRSwgUElEU0kpIHtcblx0dmFyIGhkciA9IG5ld19idWYoOCksIHBpYW8gPSBbXSwgcHJvcCA9IFtdO1xuXHR2YXIgc3ogPSA4LCBpID0gMDtcblxuXHR2YXIgcHIgPSBuZXdfYnVmKDgpLCBwaW8gPSBuZXdfYnVmKDgpO1xuXHRwci53cml0ZV9zaGlmdCg0LCAweDAwMDIpO1xuXHRwci53cml0ZV9zaGlmdCg0LCAweDA0QjApO1xuXHRwaW8ud3JpdGVfc2hpZnQoNCwgMHgwMDAxKTtcblx0cHJvcC5wdXNoKHByKTsgcGlhby5wdXNoKHBpbyk7XG5cdHN6ICs9IDggKyBwci5sZW5ndGg7XG5cblx0aWYoIVJFKSB7XG5cdFx0cGlvID0gbmV3X2J1Zig4KTtcblx0XHRwaW8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0cGlhby51bnNoaWZ0KHBpbyk7XG5cblx0XHR2YXIgYnVmcyA9IFtuZXdfYnVmKDQpXTtcblx0XHRidWZzWzBdLndyaXRlX3NoaWZ0KDQsIGVudHJpZXMubGVuZ3RoKTtcblx0XHRmb3IoaSA9IDA7IGkgPCBlbnRyaWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHR2YXIgdmFsdWUgPSBlbnRyaWVzW2ldWzBdO1xuXHRcdFx0cHIgPSBuZXdfYnVmKDQgKyA0ICsgMiAqICh2YWx1ZS5sZW5ndGggKyAxKSArICh2YWx1ZS5sZW5ndGggJSAyID8gMCA6IDIpKTtcblx0XHRcdHByLndyaXRlX3NoaWZ0KDQsIGkrMik7XG5cdFx0XHRwci53cml0ZV9zaGlmdCg0LCB2YWx1ZS5sZW5ndGggKyAxKTtcblx0XHRcdHByLndyaXRlX3NoaWZ0KDAsIHZhbHVlLCBcImRiY3NcIik7XG5cdFx0XHR3aGlsZShwci5sICE9IHByLmxlbmd0aCkgcHIud3JpdGVfc2hpZnQoMSwgMCk7XG5cdFx0XHRidWZzLnB1c2gocHIpO1xuXHRcdH1cblx0XHRwciA9IGJjb25jYXQoYnVmcyk7XG5cdFx0cHJvcC51bnNoaWZ0KHByKTtcblx0XHRzeiArPSA4ICsgcHIubGVuZ3RoO1xuXHR9XG5cblx0Zm9yKGkgPSAwOyBpIDwgZW50cmllcy5sZW5ndGg7ICsraSkge1xuXHRcdGlmKFJFICYmICFSRVtlbnRyaWVzW2ldWzBdXSkgY29udGludWU7XG5cdFx0aWYoWExTUFNTa2lwLmluZGV4T2YoZW50cmllc1tpXVswXSkgPiAtMSB8fCBQc2V1ZG9Qcm9wc1BhaXJzLmluZGV4T2YoZW50cmllc1tpXVswXSkgPiAtMSkgY29udGludWU7XG5cdFx0aWYoZW50cmllc1tpXVsxXSA9PSBudWxsKSBjb250aW51ZTtcblxuXHRcdHZhciB2YWwgPSBlbnRyaWVzW2ldWzFdLCBpZHggPSAwO1xuXHRcdGlmKFJFKSB7XG5cdFx0XHRpZHggPSArUkVbZW50cmllc1tpXVswXV07XG5cdFx0XHR2YXIgcGluZm8gPSAoUElEU0kvKjo6IHx8IHt9Ki8pW2lkeF0vKjo6IHx8IHt9ICovO1xuXHRcdFx0aWYocGluZm8ucCA9PSBcInZlcnNpb25cIiAmJiB0eXBlb2YgdmFsID09IFwic3RyaW5nXCIpIHtcblx0XHRcdFx0Lyo6OiBpZih0eXBlb2YgdmFsICE9PSBcInN0cmluZ1wiKSB0aHJvdyBcInVucmVhY2hhYmxlXCI7ICovXG5cdFx0XHRcdHZhciBhcnIgPSB2YWwuc3BsaXQoXCIuXCIpO1xuXHRcdFx0XHR2YWwgPSAoKCthcnJbMF0pPDwxNikgKyAoKCthcnJbMV0pfHwwKTtcblx0XHRcdH1cblx0XHRcdHByID0gd3JpdGVfVHlwZWRQcm9wZXJ0eVZhbHVlKHBpbmZvLnQsIHZhbCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBUID0gZ3Vlc3NfcHJvcGVydHlfdHlwZSh2YWwpO1xuXHRcdFx0aWYoVCA9PSAtMSkgeyBUID0gMHgxRjsgdmFsID0gU3RyaW5nKHZhbCk7IH1cblx0XHRcdHByID0gd3JpdGVfVHlwZWRQcm9wZXJ0eVZhbHVlKFQsIHZhbCk7XG5cdFx0fVxuXHRcdHByb3AucHVzaChwcik7XG5cblx0XHRwaW8gPSBuZXdfYnVmKDgpO1xuXHRcdHBpby53cml0ZV9zaGlmdCg0LCAhUkUgPyAyK2kgOiBpZHgpO1xuXHRcdHBpYW8ucHVzaChwaW8pO1xuXG5cdFx0c3ogKz0gOCArIHByLmxlbmd0aDtcblx0fVxuXG5cdHZhciB3ID0gOCAqIChwcm9wLmxlbmd0aCArIDEpO1xuXHRmb3IoaSA9IDA7IGkgPCBwcm9wLmxlbmd0aDsgKytpKSB7IHBpYW9baV0ud3JpdGVfc2hpZnQoNCwgdyk7IHcgKz0gcHJvcFtpXS5sZW5ndGg7IH1cblx0aGRyLndyaXRlX3NoaWZ0KDQsIHN6KTtcblx0aGRyLndyaXRlX3NoaWZ0KDQsIHByb3AubGVuZ3RoKTtcblx0cmV0dXJuIGJjb25jYXQoW2hkcl0uY29uY2F0KHBpYW8pLmNvbmNhdChwcm9wKSk7XG59XG5cbi8qIFtNUy1PTEVQU10gMi4yMSBQcm9wZXJ0eVNldFN0cmVhbSAqL1xuZnVuY3Rpb24gcGFyc2VfUHJvcGVydHlTZXRTdHJlYW0oZmlsZSwgUElEU0ksIGNsc2lkKSB7XG5cdHZhciBibG9iID0gZmlsZS5jb250ZW50O1xuXHRpZighYmxvYikgcmV0dXJuICh7fS8qOmFueSovKTtcblx0cHJlcF9ibG9iKGJsb2IsIDApO1xuXG5cdHZhciBOdW1TZXRzLCBGTVRJRDAsIEZNVElEMSwgT2Zmc2V0MCwgT2Zmc2V0MSA9IDA7XG5cdGJsb2IuY2hrKCdmZWZmJywgJ0J5dGUgT3JkZXI6ICcpO1xuXG5cdC8qdmFyIHZlcnMgPSAqL2Jsb2IucmVhZF9zaGlmdCgyKTsgLy8gVE9ETzogY2hlY2sgdmVyc2lvblxuXHR2YXIgU3lzdGVtSWRlbnRpZmllciA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIENMU0lEID0gYmxvYi5yZWFkX3NoaWZ0KDE2KTtcblx0aWYoQ0xTSUQgIT09IENGQi51dGlscy5jb25zdHMuSEVBREVSX0NMU0lEICYmIENMU0lEICE9PSBjbHNpZCkgdGhyb3cgbmV3IEVycm9yKFwiQmFkIFByb3BlcnR5U2V0IENMU0lEIFwiICsgQ0xTSUQpO1xuXHROdW1TZXRzID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRpZihOdW1TZXRzICE9PSAxICYmIE51bVNldHMgIT09IDIpIHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCAjU2V0czogXCIgKyBOdW1TZXRzKTtcblx0Rk1USUQwID0gYmxvYi5yZWFkX3NoaWZ0KDE2KTsgT2Zmc2V0MCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblxuXHRpZihOdW1TZXRzID09PSAxICYmIE9mZnNldDAgIT09IGJsb2IubCkgdGhyb3cgbmV3IEVycm9yKFwiTGVuZ3RoIG1pc21hdGNoOiBcIiArIE9mZnNldDAgKyBcIiAhPT0gXCIgKyBibG9iLmwpO1xuXHRlbHNlIGlmKE51bVNldHMgPT09IDIpIHsgRk1USUQxID0gYmxvYi5yZWFkX3NoaWZ0KDE2KTsgT2Zmc2V0MSA9IGJsb2IucmVhZF9zaGlmdCg0KTsgfVxuXHR2YXIgUFNldDAgPSBwYXJzZV9Qcm9wZXJ0eVNldChibG9iLCBQSURTSSk7XG5cblx0dmFyIHJ2YWwgPSAoeyBTeXN0ZW1JZGVudGlmaWVyOiBTeXN0ZW1JZGVudGlmaWVyIH0vKjphbnkqLyk7XG5cdGZvcih2YXIgeSBpbiBQU2V0MCkgcnZhbFt5XSA9IFBTZXQwW3ldO1xuXHQvL3J2YWwuYmxvYiA9IGJsb2I7XG5cdHJ2YWwuRk1USUQgPSBGTVRJRDA7XG5cdC8vcnZhbC5QU2V0MCA9IFBTZXQwO1xuXHRpZihOdW1TZXRzID09PSAxKSByZXR1cm4gcnZhbDtcblx0aWYoT2Zmc2V0MSAtIGJsb2IubCA9PSAyKSBibG9iLmwgKz0gMjtcblx0aWYoYmxvYi5sICE9PSBPZmZzZXQxKSB0aHJvdyBuZXcgRXJyb3IoXCJMZW5ndGggbWlzbWF0Y2ggMjogXCIgKyBibG9iLmwgKyBcIiAhPT0gXCIgKyBPZmZzZXQxKTtcblx0dmFyIFBTZXQxO1xuXHR0cnkgeyBQU2V0MSA9IHBhcnNlX1Byb3BlcnR5U2V0KGJsb2IsIG51bGwpOyB9IGNhdGNoKGUpIHsvKiBlbXB0eSAqL31cblx0Zm9yKHkgaW4gUFNldDEpIHJ2YWxbeV0gPSBQU2V0MVt5XTtcblx0cnZhbC5GTVRJRCA9IFtGTVRJRDAsIEZNVElEMV07IC8vIFRPRE86IHZlcmlmeSBGTVRJRDAvMVxuXHRyZXR1cm4gcnZhbDtcbn1cbmZ1bmN0aW9uIHdyaXRlX1Byb3BlcnR5U2V0U3RyZWFtKGVudHJpZXMsIGNsc2lkLCBSRSwgUElEU0kvKjp7W2tleTpzdHJpbmd8bnVtYmVyXTphbnl9Ki8sIGVudHJpZXMyLyo6P2FueSovLCBjbHNpZDIvKjo/YW55Ki8pIHtcblx0dmFyIGhkciA9IG5ld19idWYoZW50cmllczIgPyA2OCA6IDQ4KTtcblx0dmFyIGJ1ZnMgPSBbaGRyXTtcblx0aGRyLndyaXRlX3NoaWZ0KDIsIDB4RkZGRSk7XG5cdGhkci53cml0ZV9zaGlmdCgyLCAweDAwMDApOyAvKiBUT0RPOiB0eXBlIDEgcHJvcHMgKi9cblx0aGRyLndyaXRlX3NoaWZ0KDQsIDB4MzIzNjMyMzcpO1xuXHRoZHIud3JpdGVfc2hpZnQoMTYsIENGQi51dGlscy5jb25zdHMuSEVBREVSX0NMU0lELCBcImhleFwiKTtcblx0aGRyLndyaXRlX3NoaWZ0KDQsIChlbnRyaWVzMiA/IDIgOiAxKSk7XG5cdGhkci53cml0ZV9zaGlmdCgxNiwgY2xzaWQsIFwiaGV4XCIpO1xuXHRoZHIud3JpdGVfc2hpZnQoNCwgKGVudHJpZXMyID8gNjggOiA0OCkpO1xuXHR2YXIgcHMwID0gd3JpdGVfUHJvcGVydHlTZXQoZW50cmllcywgUkUsIFBJRFNJKTtcblx0YnVmcy5wdXNoKHBzMCk7XG5cblx0aWYoZW50cmllczIpIHtcblx0XHR2YXIgcHMxID0gd3JpdGVfUHJvcGVydHlTZXQoZW50cmllczIsIG51bGwsIG51bGwpO1xuXHRcdGhkci53cml0ZV9zaGlmdCgxNiwgY2xzaWQyLCBcImhleFwiKTtcblx0XHRoZHIud3JpdGVfc2hpZnQoNCwgNjggKyBwczAubGVuZ3RoKTtcblx0XHRidWZzLnB1c2gocHMxKTtcblx0fVxuXHRyZXR1cm4gYmNvbmNhdChidWZzKTtcbn1cblxuZnVuY3Rpb24gcGFyc2Vub29wMihibG9iLCBsZW5ndGgpIHsgYmxvYi5yZWFkX3NoaWZ0KGxlbmd0aCk7IHJldHVybiBudWxsOyB9XG5mdW5jdGlvbiB3cml0ZXplcm9lcyhuLCBvKSB7IGlmKCFvKSBvPW5ld19idWYobik7IGZvcih2YXIgaj0wOyBqPG47ICsraikgby53cml0ZV9zaGlmdCgxLCAwKTsgcmV0dXJuIG87IH1cblxuZnVuY3Rpb24gcGFyc2x1cnAoYmxvYiwgbGVuZ3RoLCBjYikge1xuXHR2YXIgYXJyID0gW10sIHRhcmdldCA9IGJsb2IubCArIGxlbmd0aDtcblx0d2hpbGUoYmxvYi5sIDwgdGFyZ2V0KSBhcnIucHVzaChjYihibG9iLCB0YXJnZXQgLSBibG9iLmwpKTtcblx0aWYodGFyZ2V0ICE9PSBibG9iLmwpIHRocm93IG5ldyBFcnJvcihcIlNsdXJwIGVycm9yXCIpO1xuXHRyZXR1cm4gYXJyO1xufVxuXG5mdW5jdGlvbiBwYXJzZWJvb2woYmxvYiwgbGVuZ3RoLyo6bnVtYmVyKi8pIHsgcmV0dXJuIGJsb2IucmVhZF9zaGlmdChsZW5ndGgpID09PSAweDE7IH1cbmZ1bmN0aW9uIHdyaXRlYm9vbCh2Lyo6YW55Ki8sIG8pIHsgaWYoIW8pIG89bmV3X2J1ZigyKTsgby53cml0ZV9zaGlmdCgyLCArISF2KTsgcmV0dXJuIG87IH1cblxuZnVuY3Rpb24gcGFyc2V1aW50MTYoYmxvYi8qOjosIGxlbmd0aDo/bnVtYmVyLCBvcHRzOj9hbnkqLykgeyByZXR1cm4gYmxvYi5yZWFkX3NoaWZ0KDIsICd1Jyk7IH1cbmZ1bmN0aW9uIHdyaXRldWludDE2KHYvKjpudW1iZXIqLywgbykgeyBpZighbykgbz1uZXdfYnVmKDIpOyBvLndyaXRlX3NoaWZ0KDIsIHYpOyByZXR1cm4gbzsgfVxuZnVuY3Rpb24gcGFyc2V1aW50MTZhKGJsb2IsIGxlbmd0aC8qOjogOj9udW1iZXIsIG9wdHM6P2FueSovKSB7IHJldHVybiBwYXJzbHVycChibG9iLGxlbmd0aCxwYXJzZXVpbnQxNik7fVxuXG4vKiAtLS0gMi41IFN0cnVjdHVyZXMgLS0tICovXG5cbi8qIFtNUy1YTFNdIDIuNS4xMCBCZXMgKGJvb2xlYW4gb3IgZXJyb3IpICovXG5mdW5jdGlvbiBwYXJzZV9CZXMoYmxvYi8qOjosIGxlbmd0aCovKSB7XG5cdHZhciB2ID0gYmxvYi5yZWFkX3NoaWZ0KDEpLCB0ID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRyZXR1cm4gdCA9PT0gMHgwMSA/IHYgOiB2ID09PSAweDAxO1xufVxuZnVuY3Rpb24gd3JpdGVfQmVzKHYsIHQvKjpzdHJpbmcqLywgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoMik7XG5cdG8ud3JpdGVfc2hpZnQoMSwgKCh0ID09ICdlJykgPyArdiA6ICshIXYpKTtcblx0by53cml0ZV9zaGlmdCgxLCAoKHQgPT0gJ2UnKSA/IDEgOiAwKSk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMjQwIFNob3J0WExVbmljb2RlU3RyaW5nICovXG5mdW5jdGlvbiBwYXJzZV9TaG9ydFhMVW5pY29kZVN0cmluZyhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGNjaCA9IGJsb2IucmVhZF9zaGlmdChvcHRzICYmIG9wdHMuYmlmZiA+PSAxMiA/IDIgOiAxKTtcblx0dmFyIGVuY29kaW5nID0gJ3NiY3MtY29udCc7XG5cdHZhciBjcCA9IGN1cnJlbnRfY29kZXBhZ2U7XG5cdGlmKG9wdHMgJiYgb3B0cy5iaWZmID49IDgpIGN1cnJlbnRfY29kZXBhZ2UgPSAxMjAwO1xuXHRpZighb3B0cyB8fCBvcHRzLmJpZmYgPT0gOCApIHtcblx0XHR2YXIgZkhpZ2hCeXRlID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRcdGlmKGZIaWdoQnl0ZSkgeyBlbmNvZGluZyA9ICdkYmNzLWNvbnQnOyB9XG5cdH0gZWxzZSBpZihvcHRzLmJpZmYgPT0gMTIpIHtcblx0XHRlbmNvZGluZyA9ICd3c3RyJztcblx0fVxuXHRpZihvcHRzLmJpZmYgPj0gMiAmJiBvcHRzLmJpZmYgPD0gNSkgZW5jb2RpbmcgPSAnY3BzdHInO1xuXHR2YXIgbyA9IGNjaCA/IGJsb2IucmVhZF9zaGlmdChjY2gsIGVuY29kaW5nKSA6IFwiXCI7XG5cdGN1cnJlbnRfY29kZXBhZ2UgPSBjcDtcblx0cmV0dXJuIG87XG59XG5cbi8qIDIuNS4yOTMgWExVbmljb2RlUmljaEV4dGVuZGVkU3RyaW5nICovXG5mdW5jdGlvbiBwYXJzZV9YTFVuaWNvZGVSaWNoRXh0ZW5kZWRTdHJpbmcoYmxvYikge1xuXHR2YXIgY3AgPSBjdXJyZW50X2NvZGVwYWdlO1xuXHRjdXJyZW50X2NvZGVwYWdlID0gMTIwMDtcblx0dmFyIGNjaCA9IGJsb2IucmVhZF9zaGlmdCgyKSwgZmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdHZhciAvKmZIaWdoQnl0ZSA9IGZsYWdzICYgMHgxLCovIGZFeHRTdCA9IGZsYWdzICYgMHg0LCBmUmljaFN0ID0gZmxhZ3MgJiAweDg7XG5cdHZhciB3aWR0aCA9IDEgKyAoZmxhZ3MgJiAweDEpOyAvLyAweDAgLT4gdXRmOCwgMHgxIC0+IGRiY3Ncblx0dmFyIGNSdW4gPSAwLCBjYkV4dFJzdDtcblx0dmFyIHogPSB7fTtcblx0aWYoZlJpY2hTdCkgY1J1biA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0aWYoZkV4dFN0KSBjYkV4dFJzdCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIGVuY29kaW5nID0gd2lkdGggPT0gMiA/ICdkYmNzLWNvbnQnIDogJ3NiY3MtY29udCc7XG5cdHZhciBtc2cgPSBjY2ggPT09IDAgPyBcIlwiIDogYmxvYi5yZWFkX3NoaWZ0KGNjaCwgZW5jb2RpbmcpO1xuXHRpZihmUmljaFN0KSBibG9iLmwgKz0gNCAqIGNSdW47IC8vVE9ETzogcGFyc2UgdGhpc1xuXHRpZihmRXh0U3QpIGJsb2IubCArPSBjYkV4dFJzdDsgLy9UT0RPOiBwYXJzZSB0aGlzXG5cdHoudCA9IG1zZztcblx0aWYoIWZSaWNoU3QpIHsgei5yYXcgPSBcIjx0PlwiICsgei50ICsgXCI8L3Q+XCI7IHouciA9IHoudDsgfVxuXHRjdXJyZW50X2NvZGVwYWdlID0gY3A7XG5cdHJldHVybiB6O1xufVxuZnVuY3Rpb24gd3JpdGVfWExVbmljb2RlUmljaEV4dGVuZGVkU3RyaW5nKHhsc3RyLyo6OiA6WExTdHJpbmcsIG9wdHMqLykge1xuXHR2YXIgc3RyID0gKHhsc3RyLnR8fFwiXCIpLCBuZm10cyA9IDE7XG5cblx0dmFyIGhkciA9IG5ld19idWYoMyArIChuZm10cyA+IDEgPyAyIDogMCkpO1xuXHRoZHIud3JpdGVfc2hpZnQoMiwgc3RyLmxlbmd0aCk7XG5cdGhkci53cml0ZV9zaGlmdCgxLCAobmZtdHMgPiAxID8gMHgwOCA6IDB4MDApIHwgMHgwMSk7XG5cdGlmKG5mbXRzID4gMSkgaGRyLndyaXRlX3NoaWZ0KDIsIG5mbXRzKTtcblxuXHR2YXIgb3RleHQgPSBuZXdfYnVmKDIgKiBzdHIubGVuZ3RoKTtcblx0b3RleHQud3JpdGVfc2hpZnQoMiAqIHN0ci5sZW5ndGgsIHN0ciwgJ3V0ZjE2bGUnKTtcblxuXHR2YXIgb3V0ID0gW2hkciwgb3RleHRdO1xuXG5cdHJldHVybiBiY29uY2F0KG91dCk7XG59XG5cbi8qIDIuNS4yOTYgWExVbmljb2RlU3RyaW5nTm9DY2ggKi9cbmZ1bmN0aW9uIHBhcnNlX1hMVW5pY29kZVN0cmluZ05vQ2NoKGJsb2IsIGNjaCwgb3B0cykge1xuXHR2YXIgcmV0dmFsO1xuXHRpZihvcHRzKSB7XG5cdFx0aWYob3B0cy5iaWZmID49IDIgJiYgb3B0cy5iaWZmIDw9IDUpIHJldHVybiBibG9iLnJlYWRfc2hpZnQoY2NoLCAnY3BzdHInKTtcblx0XHRpZihvcHRzLmJpZmYgPj0gMTIpIHJldHVybiBibG9iLnJlYWRfc2hpZnQoY2NoLCAnZGJjcy1jb250Jyk7XG5cdH1cblx0dmFyIGZIaWdoQnl0ZSA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0aWYoZkhpZ2hCeXRlPT09MCkgeyByZXR2YWwgPSBibG9iLnJlYWRfc2hpZnQoY2NoLCAnc2Jjcy1jb250Jyk7IH1cblx0ZWxzZSB7IHJldHZhbCA9IGJsb2IucmVhZF9zaGlmdChjY2gsICdkYmNzLWNvbnQnKTsgfVxuXHRyZXR1cm4gcmV0dmFsO1xufVxuXG4vKiAyLjUuMjk0IFhMVW5pY29kZVN0cmluZyAqL1xuZnVuY3Rpb24gcGFyc2VfWExVbmljb2RlU3RyaW5nKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgY2NoID0gYmxvYi5yZWFkX3NoaWZ0KG9wdHMgJiYgb3B0cy5iaWZmID09IDIgPyAxIDogMik7XG5cdGlmKGNjaCA9PT0gMCkgeyBibG9iLmwrKzsgcmV0dXJuIFwiXCI7IH1cblx0cmV0dXJuIHBhcnNlX1hMVW5pY29kZVN0cmluZ05vQ2NoKGJsb2IsIGNjaCwgb3B0cyk7XG59XG4vKiBCSUZGNSBvdmVycmlkZSAqL1xuZnVuY3Rpb24gcGFyc2VfWExVbmljb2RlU3RyaW5nMihibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0aWYob3B0cy5iaWZmID4gNSkgcmV0dXJuIHBhcnNlX1hMVW5pY29kZVN0cmluZyhibG9iLCBsZW5ndGgsIG9wdHMpO1xuXHR2YXIgY2NoID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRpZihjY2ggPT09IDApIHsgYmxvYi5sKys7IHJldHVybiBcIlwiOyB9XG5cdHJldHVybiBibG9iLnJlYWRfc2hpZnQoY2NoLCAob3B0cy5iaWZmIDw9IDQgfHwgIWJsb2IubGVucyApID8gJ2Nwc3RyJyA6ICdzYmNzLWNvbnQnKTtcbn1cbi8qIFRPRE86IEJJRkY1IGFuZCBsb3dlciwgY29kZXBhZ2UgYXdhcmVuZXNzICovXG5mdW5jdGlvbiB3cml0ZV9YTFVuaWNvZGVTdHJpbmcoc3RyLCBvcHRzLCBvKSB7XG5cdGlmKCFvKSBvID0gbmV3X2J1ZigzICsgMiAqIHN0ci5sZW5ndGgpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIHN0ci5sZW5ndGgpO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDEpO1xuXHRvLndyaXRlX3NoaWZ0KDMxLCBzdHIsICd1dGYxNmxlJyk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuNjEgQ29udHJvbEluZm8gKi9cbmZ1bmN0aW9uIHBhcnNlX0NvbnRyb2xJbmZvKGJsb2IvKjo6LCBsZW5ndGgsIG9wdHMqLykge1xuXHR2YXIgZmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdGJsb2IubCsrO1xuXHR2YXIgYWNjZWwgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSAyO1xuXHRyZXR1cm4gW2ZsYWdzLCBhY2NlbF07XG59XG5cbi8qIFtNUy1PU0hBUkVEXSAyLjMuNy42IFVSTE1vbmlrZXIgVE9ETzogZmxhZ3MgKi9cbmZ1bmN0aW9uIHBhcnNlX1VSTE1vbmlrZXIoYmxvYi8qOjosIGxlbmd0aCwgb3B0cyovKSB7XG5cdHZhciBsZW4gPSBibG9iLnJlYWRfc2hpZnQoNCksIHN0YXJ0ID0gYmxvYi5sO1xuXHR2YXIgZXh0cmEgPSBmYWxzZTtcblx0aWYobGVuID4gMjQpIHtcblx0XHQvKiBsb29rIGFoZWFkICovXG5cdFx0YmxvYi5sICs9IGxlbiAtIDI0O1xuXHRcdGlmKGJsb2IucmVhZF9zaGlmdCgxNikgPT09IFwiNzk1ODgxZjQzYjFkN2Y0OGFmMmM4MjVkYzQ4NTI3NjNcIikgZXh0cmEgPSB0cnVlO1xuXHRcdGJsb2IubCA9IHN0YXJ0O1xuXHR9XG5cdHZhciB1cmwgPSBibG9iLnJlYWRfc2hpZnQoKGV4dHJhP2xlbi0yNDpsZW4pPj4xLCAndXRmMTZsZScpLnJlcGxhY2UoY2hyMCxcIlwiKTtcblx0aWYoZXh0cmEpIGJsb2IubCArPSAyNDtcblx0cmV0dXJuIHVybDtcbn1cblxuLyogW01TLU9TSEFSRURdIDIuMy43LjggRmlsZU1vbmlrZXIgVE9ETzogYWxsIGZpZWxkcyAqL1xuZnVuY3Rpb24gcGFyc2VfRmlsZU1vbmlrZXIoYmxvYi8qOjosIGxlbmd0aCovKSB7XG5cdHZhciBjQW50aSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIHByZWFtYmxlID0gXCJcIjsgd2hpbGUoY0FudGktLSA+IDApIHByZWFtYmxlICs9IFwiLi4vXCI7XG5cdHZhciBhbnNpUGF0aCA9IGJsb2IucmVhZF9zaGlmdCgwLCAnbHBzdHItYW5zaScpO1xuXHRibG9iLmwgKz0gMjsgLy92YXIgZW5kU2VydmVyID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRpZihibG9iLnJlYWRfc2hpZnQoMikgIT0gMHhERUFEKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgRmlsZU1vbmlrZXJcIik7XG5cdHZhciBzeiA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0aWYoc3ogPT09IDApIHJldHVybiBwcmVhbWJsZSArIGFuc2lQYXRoLnJlcGxhY2UoL1xcXFwvZyxcIi9cIik7XG5cdHZhciBieXRlcyA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0aWYoYmxvYi5yZWFkX3NoaWZ0KDIpICE9IDMpIHRocm93IG5ldyBFcnJvcihcIkJhZCBGaWxlTW9uaWtlclwiKTtcblx0dmFyIHVuaWNvZGVQYXRoID0gYmxvYi5yZWFkX3NoaWZ0KGJ5dGVzPj4xLCAndXRmMTZsZScpLnJlcGxhY2UoY2hyMCxcIlwiKTtcblx0cmV0dXJuIHByZWFtYmxlICsgdW5pY29kZVBhdGg7XG59XG5cbi8qIFtNUy1PU0hBUkVEXSAyLjMuNy4yIEh5cGVybGlua01vbmlrZXIgVE9ETzogYWxsIHRoZSBtb25pa2VycyAqL1xuZnVuY3Rpb24gcGFyc2VfSHlwZXJsaW5rTW9uaWtlcihibG9iLCBsZW5ndGgpIHtcblx0dmFyIGNsc2lkID0gYmxvYi5yZWFkX3NoaWZ0KDE2KTsgbGVuZ3RoIC09IDE2O1xuXHRzd2l0Y2goY2xzaWQpIHtcblx0XHRjYXNlIFwiZTBjOWVhNzlmOWJhY2UxMThjODIwMGFhMDA0YmE5MGJcIjogcmV0dXJuIHBhcnNlX1VSTE1vbmlrZXIoYmxvYiwgbGVuZ3RoKTtcblx0XHRjYXNlIFwiMDMwMzAwMDAwMDAwMDAwMGMwMDAwMDAwMDAwMDAwNDZcIjogcmV0dXJuIHBhcnNlX0ZpbGVNb25pa2VyKGJsb2IsIGxlbmd0aCk7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgTW9uaWtlciBcIiArIGNsc2lkKTtcblx0fVxufVxuXG4vKiBbTVMtT1NIQVJFRF0gMi4zLjcuOSBIeXBlcmxpbmtTdHJpbmcgKi9cbmZ1bmN0aW9uIHBhcnNlX0h5cGVybGlua1N0cmluZyhibG9iLyo6OiwgbGVuZ3RoKi8pIHtcblx0dmFyIGxlbiA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIG8gPSBsZW4gPiAwID8gYmxvYi5yZWFkX3NoaWZ0KGxlbiwgJ3V0ZjE2bGUnKS5yZXBsYWNlKGNocjAsIFwiXCIpIDogXCJcIjtcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiB3cml0ZV9IeXBlcmxpbmtTdHJpbmcoc3RyLyo6c3RyaW5nKi8sIG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDYgKyBzdHIubGVuZ3RoICogMik7XG5cdG8ud3JpdGVfc2hpZnQoNCwgMSArIHN0ci5sZW5ndGgpO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSBvLndyaXRlX3NoaWZ0KDIsIHN0ci5jaGFyQ29kZUF0KGkpKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PU0hBUkVEXSAyLjMuNy4xIEh5cGVybGluayBPYmplY3QgKi9cbmZ1bmN0aW9uIHBhcnNlX0h5cGVybGluayhibG9iLCBsZW5ndGgpLyo6SHlwZXJsaW5rKi8ge1xuXHR2YXIgZW5kID0gYmxvYi5sICsgbGVuZ3RoO1xuXHR2YXIgc1ZlciA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0aWYoc1ZlciAhPT0gMikgdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHN0cmVhbVZlcnNpb246IFwiICsgc1Zlcik7XG5cdHZhciBmbGFncyA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDI7XG5cdHZhciBkaXNwbGF5TmFtZSwgdGFyZ2V0RnJhbWVOYW1lLCBtb25pa2VyLCBvbGVNb25pa2VyLCBMb2M9XCJcIiwgZ3VpZCwgZmlsZVRpbWU7XG5cdGlmKGZsYWdzICYgMHgwMDEwKSBkaXNwbGF5TmFtZSA9IHBhcnNlX0h5cGVybGlua1N0cmluZyhibG9iLCBlbmQgLSBibG9iLmwpO1xuXHRpZihmbGFncyAmIDB4MDA4MCkgdGFyZ2V0RnJhbWVOYW1lID0gcGFyc2VfSHlwZXJsaW5rU3RyaW5nKGJsb2IsIGVuZCAtIGJsb2IubCk7XG5cdGlmKChmbGFncyAmIDB4MDEwMSkgPT09IDB4MDEwMSkgbW9uaWtlciA9IHBhcnNlX0h5cGVybGlua1N0cmluZyhibG9iLCBlbmQgLSBibG9iLmwpO1xuXHRpZigoZmxhZ3MgJiAweDAxMDEpID09PSAweDAwMDEpIG9sZU1vbmlrZXIgPSBwYXJzZV9IeXBlcmxpbmtNb25pa2VyKGJsb2IsIGVuZCAtIGJsb2IubCk7XG5cdGlmKGZsYWdzICYgMHgwMDA4KSBMb2MgPSBwYXJzZV9IeXBlcmxpbmtTdHJpbmcoYmxvYiwgZW5kIC0gYmxvYi5sKTtcblx0aWYoZmxhZ3MgJiAweDAwMjApIGd1aWQgPSBibG9iLnJlYWRfc2hpZnQoMTYpO1xuXHRpZihmbGFncyAmIDB4MDA0MCkgZmlsZVRpbWUgPSBwYXJzZV9GSUxFVElNRShibG9iLyosIDgqLyk7XG5cdGJsb2IubCA9IGVuZDtcblx0dmFyIHRhcmdldCA9IHRhcmdldEZyYW1lTmFtZXx8bW9uaWtlcnx8b2xlTW9uaWtlcnx8XCJcIjtcblx0aWYodGFyZ2V0ICYmIExvYykgdGFyZ2V0Kz1cIiNcIitMb2M7XG5cdGlmKCF0YXJnZXQpIHRhcmdldCA9IFwiI1wiICsgTG9jO1xuXHRpZigoZmxhZ3MgJiAweDAwMDIpICYmIHRhcmdldC5jaGFyQXQoMCkgPT0gXCIvXCIgJiYgdGFyZ2V0LmNoYXJBdCgxKSAhPSBcIi9cIikgdGFyZ2V0ID0gXCJmaWxlOi8vXCIgKyB0YXJnZXQ7XG5cdHZhciBvdXQgPSAoe1RhcmdldDp0YXJnZXR9Lyo6YW55Ki8pO1xuXHRpZihndWlkKSBvdXQuZ3VpZCA9IGd1aWQ7XG5cdGlmKGZpbGVUaW1lKSBvdXQudGltZSA9IGZpbGVUaW1lO1xuXHRpZihkaXNwbGF5TmFtZSkgb3V0LlRvb2x0aXAgPSBkaXNwbGF5TmFtZTtcblx0cmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0h5cGVybGluayhobCkge1xuXHR2YXIgb3V0ID0gbmV3X2J1Zig1MTIpLCBpID0gMDtcblx0dmFyIFRhcmdldCA9IGhsLlRhcmdldDtcblx0aWYoVGFyZ2V0LnNsaWNlKDAsNykgPT0gXCJmaWxlOi8vXCIpIFRhcmdldCA9IFRhcmdldC5zbGljZSg3KTtcblx0dmFyIGhhc2hpZHggPSBUYXJnZXQuaW5kZXhPZihcIiNcIik7XG5cdHZhciBGID0gaGFzaGlkeCA+IC0xID8gMHgxZiA6IDB4MTc7XG5cdHN3aXRjaChUYXJnZXQuY2hhckF0KDApKSB7IGNhc2UgXCIjXCI6IEY9MHgxYzsgYnJlYWs7IGNhc2UgXCIuXCI6IEYmPX4yOyBicmVhazsgfVxuXHRvdXQud3JpdGVfc2hpZnQoNCwyKTsgb3V0LndyaXRlX3NoaWZ0KDQsIEYpO1xuXHR2YXIgZGF0YSA9IFs4LDY4MTU4MjcsNjYxOTIzNyw0ODQ5NzgwLDgzXTsgZm9yKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgb3V0LndyaXRlX3NoaWZ0KDQsIGRhdGFbaV0pO1xuXHRpZihGID09IDB4MUMpIHtcblx0XHRUYXJnZXQgPSBUYXJnZXQuc2xpY2UoMSk7XG5cdFx0d3JpdGVfSHlwZXJsaW5rU3RyaW5nKFRhcmdldCwgb3V0KTtcblx0fSBlbHNlIGlmKEYgJiAweDAyKSB7XG5cdFx0ZGF0YSA9IFwiZTAgYzkgZWEgNzkgZjkgYmEgY2UgMTEgOGMgODIgMDAgYWEgMDAgNGIgYTkgMGJcIi5zcGxpdChcIiBcIik7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgb3V0LndyaXRlX3NoaWZ0KDEsIHBhcnNlSW50KGRhdGFbaV0sIDE2KSk7XG5cdFx0dmFyIFByZXRhcmdldCA9IGhhc2hpZHggPiAtMSA/IFRhcmdldC5zbGljZSgwLCBoYXNoaWR4KSA6IFRhcmdldDtcblx0XHRvdXQud3JpdGVfc2hpZnQoNCwgMiooUHJldGFyZ2V0Lmxlbmd0aCArIDEpKTtcblx0XHRmb3IoaSA9IDA7IGkgPCBQcmV0YXJnZXQubGVuZ3RoOyArK2kpIG91dC53cml0ZV9zaGlmdCgyLCBQcmV0YXJnZXQuY2hhckNvZGVBdChpKSk7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDIsIDApO1xuXHRcdGlmKEYgJiAweDA4KSB3cml0ZV9IeXBlcmxpbmtTdHJpbmcoaGFzaGlkeCA+IC0xID8gVGFyZ2V0LnNsaWNlKGhhc2hpZHgrMSk6IFwiXCIsIG91dCk7XG5cdH0gZWxzZSB7XG5cdFx0ZGF0YSA9IFwiMDMgMDMgMDAgMDAgMDAgMDAgMDAgMDAgYzAgMDAgMDAgMDAgMDAgMDAgMDAgNDZcIi5zcGxpdChcIiBcIik7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7ICsraSkgb3V0LndyaXRlX3NoaWZ0KDEsIHBhcnNlSW50KGRhdGFbaV0sIDE2KSk7XG5cdFx0dmFyIFAgPSAwO1xuXHRcdHdoaWxlKFRhcmdldC5zbGljZShQKjMsUCozKzMpPT1cIi4uL1wifHxUYXJnZXQuc2xpY2UoUCozLFAqMyszKT09XCIuLlxcXFxcIikgKytQO1xuXHRcdG91dC53cml0ZV9zaGlmdCgyLCBQKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoNCwgVGFyZ2V0Lmxlbmd0aCAtIDMgKiBQICsgMSk7XG5cdFx0Zm9yKGkgPSAwOyBpIDwgVGFyZ2V0Lmxlbmd0aCAtIDMgKiBQOyArK2kpIG91dC53cml0ZV9zaGlmdCgxLCBUYXJnZXQuY2hhckNvZGVBdChpICsgMyAqIFApICYgMHhGRik7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDEsIDApO1xuXHRcdG91dC53cml0ZV9zaGlmdCgyLCAweEZGRkYpO1xuXHRcdG91dC53cml0ZV9zaGlmdCgyLCAweERFQUQpO1xuXHRcdGZvcihpID0gMDsgaSA8IDY7ICsraSkgb3V0LndyaXRlX3NoaWZ0KDQsIDApO1xuXHR9XG5cdHJldHVybiBvdXQuc2xpY2UoMCwgb3V0LmwpO1xufVxuXG4vKiAyLjUuMTc4IExvbmdSR0JBICovXG5mdW5jdGlvbiBwYXJzZV9Mb25nUkdCQShibG9iLyo6OiwgbGVuZ3RoKi8pIHsgdmFyIHIgPSBibG9iLnJlYWRfc2hpZnQoMSksIGcgPSBibG9iLnJlYWRfc2hpZnQoMSksIGIgPSBibG9iLnJlYWRfc2hpZnQoMSksIGEgPSBibG9iLnJlYWRfc2hpZnQoMSk7IHJldHVybiBbcixnLGIsYV07IH1cblxuLyogMi41LjE3NyBMb25nUkdCICovXG5mdW5jdGlvbiBwYXJzZV9Mb25nUkdCKGJsb2IsIGxlbmd0aCkgeyB2YXIgeCA9IHBhcnNlX0xvbmdSR0JBKGJsb2IsIGxlbmd0aCk7IHhbM10gPSAwOyByZXR1cm4geDsgfVxuXG5cbi8qIFtNUy1YTFNdIDIuNS4xOSAqL1xuZnVuY3Rpb24gcGFyc2VfWExTQ2VsbChibG9iLyo6OiwgbGVuZ3RoKi8pLyo6Q2VsbCovIHtcblx0dmFyIHJ3ID0gYmxvYi5yZWFkX3NoaWZ0KDIpOyAvLyAwLWluZGV4ZWRcblx0dmFyIGNvbCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGl4ZmUgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHJldHVybiAoe3I6cncsIGM6Y29sLCBpeGZlOml4ZmV9Lyo6YW55Ki8pO1xufVxuZnVuY3Rpb24gd3JpdGVfWExTQ2VsbChSLyo6bnVtYmVyKi8sIEMvKjpudW1iZXIqLywgaXhmZS8qOj9udW1iZXIqLywgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoNik7XG5cdG8ud3JpdGVfc2hpZnQoMiwgUik7XG5cdG8ud3JpdGVfc2hpZnQoMiwgQyk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgaXhmZXx8MCk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTM0ICovXG5mdW5jdGlvbiBwYXJzZV9mcnRIZWFkZXIoYmxvYikge1xuXHR2YXIgcnQgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBmbGFncyA9IGJsb2IucmVhZF9zaGlmdCgyKTsgLy8gVE9ETzogcGFyc2UgdGhlc2UgZmxhZ3Ncblx0YmxvYi5sICs9IDg7XG5cdHJldHVybiB7dHlwZTogcnQsIGZsYWdzOiBmbGFnc307XG59XG5cblxuXG5mdW5jdGlvbiBwYXJzZV9PcHRYTFVuaWNvZGVTdHJpbmcoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7IHJldHVybiBsZW5ndGggPT09IDAgPyBcIlwiIDogcGFyc2VfWExVbmljb2RlU3RyaW5nMihibG9iLCBsZW5ndGgsIG9wdHMpOyB9XG5cbi8qIFtNUy1YTFNdIDIuNS4zNDQgKi9cbmZ1bmN0aW9uIHBhcnNlX1hUSShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHcgPSBvcHRzLmJpZmYgPiA4ID8gNCA6IDI7XG5cdHZhciBpU3VwQm9vayA9IGJsb2IucmVhZF9zaGlmdCh3KSwgaXRhYkZpcnN0ID0gYmxvYi5yZWFkX3NoaWZ0KHcsJ2knKSwgaXRhYkxhc3QgPSBibG9iLnJlYWRfc2hpZnQodywnaScpO1xuXHRyZXR1cm4gW2lTdXBCb29rLCBpdGFiRmlyc3QsIGl0YWJMYXN0XTtcbn1cblxuLyogW01TLVhMU10gMi41LjIxOCAqL1xuZnVuY3Rpb24gcGFyc2VfUmtSZWMoYmxvYikge1xuXHR2YXIgaXhmZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIFJLID0gcGFyc2VfUmtOdW1iZXIoYmxvYik7XG5cdHJldHVybiBbaXhmZSwgUktdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMSAqL1xuZnVuY3Rpb24gcGFyc2VfQWRkaW5VZGYoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGJsb2IubCArPSA0OyBsZW5ndGggLT0gNDtcblx0dmFyIGwgPSBibG9iLmwgKyBsZW5ndGg7XG5cdHZhciB1ZGZOYW1lID0gcGFyc2VfU2hvcnRYTFVuaWNvZGVTdHJpbmcoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0dmFyIGNiID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRsIC09IGJsb2IubDtcblx0aWYoY2IgIT09IGwpIHRocm93IG5ldyBFcnJvcihcIk1hbGZvcm1lZCBBZGRpblVkZjogcGFkZGluZyA9IFwiICsgbCArIFwiICE9IFwiICsgY2IpO1xuXHRibG9iLmwgKz0gY2I7XG5cdHJldHVybiB1ZGZOYW1lO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMjA5IFRPRE86IENoZWNrIHNpemVzICovXG5mdW5jdGlvbiBwYXJzZV9SZWY4VShibG9iLyo6OiwgbGVuZ3RoKi8pIHtcblx0dmFyIHJ3Rmlyc3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciByd0xhc3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBjb2xGaXJzdCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGNvbExhc3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHJldHVybiB7czp7Yzpjb2xGaXJzdCwgcjpyd0ZpcnN0fSwgZTp7Yzpjb2xMYXN0LHI6cndMYXN0fX07XG59XG5mdW5jdGlvbiB3cml0ZV9SZWY4VShyLyo6UmFuZ2UqLywgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoOCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgci5zLnIpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIHIuZS5yKTtcblx0by53cml0ZV9zaGlmdCgyLCByLnMuYyk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgci5lLmMpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi41LjIxMSAqL1xuZnVuY3Rpb24gcGFyc2VfUmVmVShibG9iLyo6OiwgbGVuZ3RoKi8pIHtcblx0dmFyIHJ3Rmlyc3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciByd0xhc3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBjb2xGaXJzdCA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0dmFyIGNvbExhc3QgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdHJldHVybiB7czp7Yzpjb2xGaXJzdCwgcjpyd0ZpcnN0fSwgZTp7Yzpjb2xMYXN0LHI6cndMYXN0fX07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4yMDcgKi9cbnZhciBwYXJzZV9SZWYgPSBwYXJzZV9SZWZVO1xuXG4vKiBbTVMtWExTXSAyLjUuMTQzICovXG5mdW5jdGlvbiBwYXJzZV9GdENtbyhibG9iLyo6OiwgbGVuZ3RoKi8pIHtcblx0YmxvYi5sICs9IDQ7XG5cdHZhciBvdCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGlkID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgZmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCs9MTI7XG5cdHJldHVybiBbaWQsIG90LCBmbGFnc107XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xNDkgKi9cbmZ1bmN0aW9uIHBhcnNlX0Z0TnRzKGJsb2IpIHtcblx0dmFyIG91dCA9IHt9O1xuXHRibG9iLmwgKz0gNDtcblx0YmxvYi5sICs9IDE2OyAvLyBHVUlEIFRPRE9cblx0b3V0LmZTaGFyZWROb3RlID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRibG9iLmwgKz0gNDtcblx0cmV0dXJuIG91dDtcbn1cblxuLyogW01TLVhMU10gMi41LjE0MiAqL1xuZnVuY3Rpb24gcGFyc2VfRnRDZihibG9iKSB7XG5cdHZhciBvdXQgPSB7fTtcblx0YmxvYi5sICs9IDQ7XG5cdGJsb2IuY2YgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHJldHVybiBvdXQ7XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xNDAgLSAyLjUuMTU0IGFuZCBmcmllbmRzICovXG5mdW5jdGlvbiBwYXJzZV9GdFNraXAoYmxvYikgeyBibG9iLmwgKz0gMjsgYmxvYi5sICs9IGJsb2IucmVhZF9zaGlmdCgyKTsgfVxudmFyIEZ0VGFiID0ge1xuXHQvKjo6WyovMHgwMC8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdEVuZCAqL1xuXHQvKjo6WyovMHgwNC8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdE1hY3JvICovXG5cdC8qOjpbKi8weDA1Lyo6Ol0qLzogcGFyc2VfRnRTa2lwLCAgICAgIC8qIEZ0QnV0dG9uICovXG5cdC8qOjpbKi8weDA2Lyo6Ol0qLzogcGFyc2VfRnRTa2lwLCAgICAgIC8qIEZ0R21vICovXG5cdC8qOjpbKi8weDA3Lyo6Ol0qLzogcGFyc2VfRnRDZiwgICAgICAgIC8qIEZ0Q2YgKi9cblx0Lyo6OlsqLzB4MDgvKjo6XSovOiBwYXJzZV9GdFNraXAsICAgICAgLyogRnRQaW9HcmJpdCAqL1xuXHQvKjo6WyovMHgwOS8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdFBpY3RGbWxhICovXG5cdC8qOjpbKi8weDBBLyo6Ol0qLzogcGFyc2VfRnRTa2lwLCAgICAgIC8qIEZ0Q2JscyAqL1xuXHQvKjo6WyovMHgwQi8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdFJibyAqL1xuXHQvKjo6WyovMHgwQy8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdFNicyAqL1xuXHQvKjo6WyovMHgwRC8qOjpdKi86IHBhcnNlX0Z0TnRzLCAgICAgICAvKiBGdE50cyAqL1xuXHQvKjo6WyovMHgwRS8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdFNic0ZtbGEgKi9cblx0Lyo6OlsqLzB4MEYvKjo6XSovOiBwYXJzZV9GdFNraXAsICAgICAgLyogRnRHYm9EYXRhICovXG5cdC8qOjpbKi8weDEwLyo6Ol0qLzogcGFyc2VfRnRTa2lwLCAgICAgIC8qIEZ0RWRvRGF0YSAqL1xuXHQvKjo6WyovMHgxMS8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdFJib0RhdGEgKi9cblx0Lyo6OlsqLzB4MTIvKjo6XSovOiBwYXJzZV9GdFNraXAsICAgICAgLyogRnRDYmxzRGF0YSAqL1xuXHQvKjo6WyovMHgxMy8qOjpdKi86IHBhcnNlX0Z0U2tpcCwgICAgICAvKiBGdExic0RhdGEgKi9cblx0Lyo6OlsqLzB4MTQvKjo6XSovOiBwYXJzZV9GdFNraXAsICAgICAgLyogRnRDYmxzRm1sYSAqL1xuXHQvKjo6WyovMHgxNS8qOjpdKi86IHBhcnNlX0Z0Q21vXG59O1xuZnVuY3Rpb24gcGFyc2VfRnRBcnJheShibG9iLCBsZW5ndGgvKjo6LCBvdCovKSB7XG5cdHZhciB0Z3QgPSBibG9iLmwgKyBsZW5ndGg7XG5cdHZhciBmdHMgPSBbXTtcblx0d2hpbGUoYmxvYi5sIDwgdGd0KSB7XG5cdFx0dmFyIGZ0ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRcdGJsb2IubC09Mjtcblx0XHR0cnkge1xuXHRcdFx0ZnRzLnB1c2goRnRUYWJbZnRdKGJsb2IsIHRndCAtIGJsb2IubCkpO1xuXHRcdH0gY2F0Y2goZSkgeyBibG9iLmwgPSB0Z3Q7IHJldHVybiBmdHM7IH1cblx0fVxuXHRpZihibG9iLmwgIT0gdGd0KSBibG9iLmwgPSB0Z3Q7IC8vdGhyb3cgbmV3IEVycm9yKFwiYmFkIE9iamVjdCBGdC1zZXF1ZW5jZVwiKTtcblx0cmV0dXJuIGZ0cztcbn1cblxuLyogLS0tIDIuNCBSZWNvcmRzIC0tLSAqL1xuXG4vKiBbTVMtWExTXSAyLjQuMjEgKi9cbmZ1bmN0aW9uIHBhcnNlX0JPRihibG9iLCBsZW5ndGgpIHtcblx0dmFyIG8gPSB7QklGRlZlcjowLCBkdDowfTtcblx0by5CSUZGVmVyID0gYmxvYi5yZWFkX3NoaWZ0KDIpOyBsZW5ndGggLT0gMjtcblx0aWYobGVuZ3RoID49IDIpIHsgby5kdCA9IGJsb2IucmVhZF9zaGlmdCgyKTsgYmxvYi5sIC09IDI7IH1cblx0c3dpdGNoKG8uQklGRlZlcikge1xuXHRcdGNhc2UgMHgwNjAwOiAvKiBCSUZGOCAqL1xuXHRcdGNhc2UgMHgwNTAwOiAvKiBCSUZGNSAqL1xuXHRcdGNhc2UgMHgwNDAwOiAvKiBCSUZGNCAqL1xuXHRcdGNhc2UgMHgwMzAwOiAvKiBCSUZGMyAqL1xuXHRcdGNhc2UgMHgwMjAwOiAvKiBCSUZGMiAqL1xuXHRcdGNhc2UgMHgwMDAyOiBjYXNlIDB4MDAwNzogLyogQklGRjIgKi9cblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6IGlmKGxlbmd0aCA+IDYpIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgQklGRiBWZXIgXCIgKyBvLkJJRkZWZXIpO1xuXHR9XG5cblx0YmxvYi5yZWFkX3NoaWZ0KGxlbmd0aCk7XG5cdHJldHVybiBvO1xufVxuZnVuY3Rpb24gd3JpdGVfQk9GKHdiLyo6V29ya2Jvb2sqLywgdC8qOm51bWJlciovLCBvKSB7XG5cdHZhciBoID0gMHgwNjAwLCB3ID0gMTY7XG5cdHN3aXRjaChvLmJvb2tUeXBlKSB7XG5cdFx0Y2FzZSAnYmlmZjgnOiBicmVhaztcblx0XHRjYXNlICdiaWZmNSc6IGggPSAweDA1MDA7IHcgPSA4OyBicmVhaztcblx0XHRjYXNlICdiaWZmNCc6IGggPSAweDAwMDQ7IHcgPSA2OyBicmVhaztcblx0XHRjYXNlICdiaWZmMyc6IGggPSAweDAwMDM7IHcgPSA2OyBicmVhaztcblx0XHRjYXNlICdiaWZmMic6IGggPSAweDAwMDI7IHcgPSA0OyBicmVhaztcblx0XHRjYXNlICd4bGEnOiBicmVhaztcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCBCSUZGIHZlcnNpb25cIik7XG5cdH1cblx0dmFyIG91dCA9IG5ld19idWYodyk7XG5cdG91dC53cml0ZV9zaGlmdCgyLCBoKTtcblx0b3V0LndyaXRlX3NoaWZ0KDIsIHQpO1xuXHRpZih3ID4gNCkgb3V0LndyaXRlX3NoaWZ0KDIsIDB4NzI2Mik7XG5cdGlmKHcgPiA2KSBvdXQud3JpdGVfc2hpZnQoMiwgMHgwN0NEKTtcblx0aWYodyA+IDgpIHtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHhDMDA5KTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHgwMDAxKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHgwNzA2KTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHgwMDAwKTtcblx0fVxuXHRyZXR1cm4gb3V0O1xufVxuXG5cbi8qIFtNUy1YTFNdIDIuNC4xNDYgKi9cbmZ1bmN0aW9uIHBhcnNlX0ludGVyZmFjZUhkcihibG9iLCBsZW5ndGgpIHtcblx0aWYobGVuZ3RoID09PSAwKSByZXR1cm4gMHgwNGIwO1xuXHRpZigoYmxvYi5yZWFkX3NoaWZ0KDIpKSE9PTB4MDRiMCl7LyogZW1wdHkgKi99XG5cdHJldHVybiAweDA0YjA7XG59XG5cblxuLyogW01TLVhMU10gMi40LjM0OSAqL1xuZnVuY3Rpb24gcGFyc2VfV3JpdGVBY2Nlc3MoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGlmKG9wdHMuZW5jKSB7IGJsb2IubCArPSBsZW5ndGg7IHJldHVybiBcIlwiOyB9XG5cdHZhciBsID0gYmxvYi5sO1xuXHQvLyBUT0RPOiBtYWtlIHN1cmUgWExVbmljb2RlU3RyaW5nIGRvZXNudCBvdmVycnVuXG5cdHZhciBVc2VyTmFtZSA9IHBhcnNlX1hMVW5pY29kZVN0cmluZzIoYmxvYiwgMCwgb3B0cyk7XG5cdGJsb2IucmVhZF9zaGlmdChsZW5ndGggKyBsIC0gYmxvYi5sKTtcblx0cmV0dXJuIFVzZXJOYW1lO1xufVxuZnVuY3Rpb24gd3JpdGVfV3JpdGVBY2Nlc3Mocy8qOnN0cmluZyovLCBvcHRzKSB7XG5cdHZhciBiOCA9ICFvcHRzIHx8IG9wdHMuYmlmZiA9PSA4O1xuXHR2YXIgbyA9IG5ld19idWYoYjggPyAxMTIgOiA1NCk7XG5cdG8ud3JpdGVfc2hpZnQob3B0cy5iaWZmID09IDggPyAyIDogMSwgNyk7XG5cdGlmKGI4KSBvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDB4MzMzMzY4NTMpO1xuXHRvLndyaXRlX3NoaWZ0KDQsICgweDAwNTM0QTc0IHwgKGI4ID8gMCA6IDB4MjAwMDAwMDApKSk7XG5cdHdoaWxlKG8ubCA8IG8ubGVuZ3RoKSBvLndyaXRlX3NoaWZ0KDEsIChiOCA/IDAgOiAzMikpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi40LjM1MSAqL1xuZnVuY3Rpb24gcGFyc2VfV3NCb29sKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgZmxhZ3MgPSBvcHRzICYmIG9wdHMuYmlmZiA9PSA4IHx8IGxlbmd0aCA9PSAyID8gYmxvYi5yZWFkX3NoaWZ0KDIpIDogKGJsb2IubCArPSBsZW5ndGgsIDApO1xuXHRyZXR1cm4geyBmRGlhbG9nOiBmbGFncyAmIDB4MTAsIGZCZWxvdzogZmxhZ3MgJiAweDQwLCBmUmlnaHQ6IGZsYWdzICYgMHg4MCB9O1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMjggKi9cbmZ1bmN0aW9uIHBhcnNlX0JvdW5kU2hlZXQ4KGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgcG9zID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgaGlkZGVuID0gYmxvYi5yZWFkX3NoaWZ0KDEpICYgMHgwMztcblx0dmFyIGR0ID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRzd2l0Y2goZHQpIHtcblx0XHRjYXNlIDA6IGR0ID0gJ1dvcmtzaGVldCc7IGJyZWFrO1xuXHRcdGNhc2UgMTogZHQgPSAnTWFjcm9zaGVldCc7IGJyZWFrO1xuXHRcdGNhc2UgMjogZHQgPSAnQ2hhcnRzaGVldCc7IGJyZWFrO1xuXHRcdGNhc2UgNjogZHQgPSAnVkJBTW9kdWxlJzsgYnJlYWs7XG5cdH1cblx0dmFyIG5hbWUgPSBwYXJzZV9TaG9ydFhMVW5pY29kZVN0cmluZyhibG9iLCAwLCBvcHRzKTtcblx0aWYobmFtZS5sZW5ndGggPT09IDApIG5hbWUgPSBcIlNoZWV0MVwiO1xuXHRyZXR1cm4geyBwb3M6cG9zLCBoczpoaWRkZW4sIGR0OmR0LCBuYW1lOm5hbWUgfTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JvdW5kU2hlZXQ4KGRhdGEsIG9wdHMpIHtcblx0dmFyIHcgPSAoIW9wdHMgfHwgb3B0cy5iaWZmID49IDggPyAyIDogMSk7XG5cdHZhciBvID0gbmV3X2J1Zig4ICsgdyAqIGRhdGEubmFtZS5sZW5ndGgpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIGRhdGEucG9zKTtcblx0by53cml0ZV9zaGlmdCgxLCBkYXRhLmhzIHx8IDApO1xuXHRvLndyaXRlX3NoaWZ0KDEsIGRhdGEuZHQpO1xuXHRvLndyaXRlX3NoaWZ0KDEsIGRhdGEubmFtZS5sZW5ndGgpO1xuXHRpZihvcHRzLmJpZmYgPj0gOCkgby53cml0ZV9zaGlmdCgxLCAxKTtcblx0by53cml0ZV9zaGlmdCh3ICogZGF0YS5uYW1lLmxlbmd0aCwgZGF0YS5uYW1lLCBvcHRzLmJpZmYgPCA4ID8gJ3NiY3MnIDogJ3V0ZjE2bGUnKTtcblx0dmFyIG91dCA9IG8uc2xpY2UoMCwgby5sKTtcblx0b3V0LmwgPSBvLmw7IHJldHVybiBvdXQ7XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4yNjUgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfU1NUKGJsb2IsIGxlbmd0aCkvKjpTU1QqLyB7XG5cdHZhciBlbmQgPSBibG9iLmwgKyBsZW5ndGg7XG5cdHZhciBjbnQgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciB1Y250ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgc3Rycy8qOlNTVCovID0gKFtdLyo6YW55Ki8pO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9IHVjbnQgJiYgYmxvYi5sIDwgZW5kOyArK2kpIHtcblx0XHRzdHJzLnB1c2gocGFyc2VfWExVbmljb2RlUmljaEV4dGVuZGVkU3RyaW5nKGJsb2IpKTtcblx0fVxuXHRzdHJzLkNvdW50ID0gY250OyBzdHJzLlVuaXF1ZSA9IHVjbnQ7XG5cdHJldHVybiBzdHJzO1xufVxuZnVuY3Rpb24gd3JpdGVfU1NUKHNzdCwgb3B0cykge1xuXHR2YXIgaGVhZGVyID0gbmV3X2J1Zig4KTtcblx0aGVhZGVyLndyaXRlX3NoaWZ0KDQsIHNzdC5Db3VudCk7XG5cdGhlYWRlci53cml0ZV9zaGlmdCg0LCBzc3QuVW5pcXVlKTtcblx0dmFyIHN0cnMgPSBbXTtcblx0Zm9yKHZhciBqID0gMDsgaiA8IHNzdC5sZW5ndGg7ICsraikgc3Ryc1tqXSA9IHdyaXRlX1hMVW5pY29kZVJpY2hFeHRlbmRlZFN0cmluZyhzc3Rbal0sIG9wdHMpO1xuXHR2YXIgbyA9IGJjb25jYXQoW2hlYWRlcl0uY29uY2F0KHN0cnMpKTtcblx0Lyo6OigqL28vKjo6IDphbnkpKi8ucGFydHMgPSBbaGVhZGVyLmxlbmd0aF0uY29uY2F0KHN0cnMubWFwKGZ1bmN0aW9uKHN0cikgeyByZXR1cm4gc3RyLmxlbmd0aDsgfSkpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi40LjEwNyAqL1xuZnVuY3Rpb24gcGFyc2VfRXh0U1NUKGJsb2IsIGxlbmd0aCkge1xuXHR2YXIgZXh0c3N0ID0ge307XG5cdGV4dHNzdC5kc3N0ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRibG9iLmwgKz0gbGVuZ3RoLTI7XG5cdHJldHVybiBleHRzc3Q7XG59XG5cblxuLyogW01TLVhMU10gMi40LjIyMSBUT0RPOiBjaGVjayBCSUZGMi00ICovXG5mdW5jdGlvbiBwYXJzZV9Sb3coYmxvYikge1xuXHR2YXIgeiA9ICh7fS8qOmFueSovKTtcblx0ei5yID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR6LmMgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHouY250ID0gYmxvYi5yZWFkX3NoaWZ0KDIpIC0gei5jO1xuXHR2YXIgbWl5UncgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSA0OyAvLyByZXNlcnZlZCgyKSwgdW51c2VkKDIpXG5cdHZhciBmbGFncyA9IGJsb2IucmVhZF9zaGlmdCgxKTsgLy8gdmFyaW91cyBmbGFnc1xuXHRibG9iLmwgKz0gMzsgLy8gcmVzZXJ2ZWQoOCksIGl4ZmUoMTIpLCBmbGFncyg0KVxuXHRpZihmbGFncyAmIDB4MDcpIHoubGV2ZWwgPSBmbGFncyAmIDB4MDc7XG5cdC8vIGNvbGxhcHNlZDogZmxhZ3MgJiAweDEwXG5cdGlmKGZsYWdzICYgMHgyMCkgei5oaWRkZW4gPSB0cnVlO1xuXHRpZihmbGFncyAmIDB4NDApIHouaHB0ID0gbWl5UncgLyAyMDtcblx0cmV0dXJuIHo7XG59XG5cblxuLyogW01TLVhMU10gMi40LjEyNSAqL1xuZnVuY3Rpb24gcGFyc2VfRm9yY2VGdWxsQ2FsY3VsYXRpb24oYmxvYikge1xuXHR2YXIgaGVhZGVyID0gcGFyc2VfZnJ0SGVhZGVyKGJsb2IpO1xuXHRpZihoZWFkZXIudHlwZSAhPSAweDA4QTMpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgRnV0dXJlIFJlY29yZCBcIiArIGhlYWRlci50eXBlKTtcblx0dmFyIGZ1bGxjYWxjID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRyZXR1cm4gZnVsbGNhbGMgIT09IDB4MDtcbn1cblxuXG5cblxuXG4vKiBbTVMtWExTXSAyLjQuMjE1IHJ0ICovXG5mdW5jdGlvbiBwYXJzZV9SZWNhbGNJZChibG9iKSB7XG5cdGJsb2IucmVhZF9zaGlmdCgyKTtcblx0cmV0dXJuIGJsb2IucmVhZF9zaGlmdCg0KTtcbn1cblxuLyogW01TLVhMU10gMi40Ljg3ICovXG5mdW5jdGlvbiBwYXJzZV9EZWZhdWx0Um93SGVpZ2h0KGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgZiA9IDA7XG5cdGlmKCEob3B0cyAmJiBvcHRzLmJpZmYgPT0gMikpIHtcblx0XHRmID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR9XG5cdHZhciBtaXlSdyA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0aWYoKG9wdHMgJiYgb3B0cy5iaWZmID09IDIpKSB7XG5cdFx0ZiA9IDEgLSAobWl5UncgPj4gMTUpOyBtaXlSdyAmPSAweDdmZmY7XG5cdH1cblx0dmFyIGZsID0ge1Vuc3luY2VkOmYmMSxEeVplcm86KGYmMik+PjEsRXhBc2M6KGYmNCk+PjIsRXhEc2M6KGYmOCk+PjN9O1xuXHRyZXR1cm4gW2ZsLCBtaXlSd107XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4zNDUgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfV2luZG93MShibG9iKSB7XG5cdHZhciB4V24gPSBibG9iLnJlYWRfc2hpZnQoMiksIHlXbiA9IGJsb2IucmVhZF9zaGlmdCgyKSwgZHhXbiA9IGJsb2IucmVhZF9zaGlmdCgyKSwgZHlXbiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCBpVGFiQ3VyID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCBpVGFiRmlyc3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBjdGFiU2VsID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCB3VGFiUmF0aW8gPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHJldHVybiB7IFBvczogW3hXbiwgeVduXSwgRGltOiBbZHhXbiwgZHlXbl0sIEZsYWdzOiBmbGFncywgQ3VyVGFiOiBpVGFiQ3VyLFxuXHRcdEZpcnN0VGFiOiBpVGFiRmlyc3QsIFNlbGVjdGVkOiBjdGFiU2VsLCBUYWJSYXRpbzogd1RhYlJhdGlvIH07XG59XG5mdW5jdGlvbiB3cml0ZV9XaW5kb3cxKC8qOjpvcHRzKi8pIHtcblx0dmFyIG8gPSBuZXdfYnVmKDE4KTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAweDcyNjApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDB4NDRjMCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMHgzOCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMSk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMHgwMWY0KTtcblx0cmV0dXJuIG87XG59XG4vKiBbTVMtWExTXSAyLjQuMzQ2IFRPRE8gKi9cbmZ1bmN0aW9uIHBhcnNlX1dpbmRvdzIoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGlmKG9wdHMgJiYgb3B0cy5iaWZmID49IDIgJiYgb3B0cy5iaWZmIDwgNSkgcmV0dXJuIHt9O1xuXHR2YXIgZiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0cmV0dXJuIHsgUlRMOiBmICYgMHg0MCB9O1xufVxuZnVuY3Rpb24gd3JpdGVfV2luZG93Mih2aWV3KSB7XG5cdHZhciBvID0gbmV3X2J1ZigxOCksIGYgPSAweDZiNjtcblx0aWYodmlldyAmJiB2aWV3LlJUTCkgZiB8PSAweDQwO1xuXHRvLndyaXRlX3NoaWZ0KDIsIGYpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDY0KTtcblx0by53cml0ZV9zaGlmdCg0LCAwKTtcblx0by53cml0ZV9zaGlmdCg0LCAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xODkgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfUGFuZSgvKmJsb2IsIGxlbmd0aCwgb3B0cyovKSB7XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xMjIgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfRm9udChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIG8vKjphbnkqLyA9IHtcblx0XHRkeUhlaWdodDogYmxvYi5yZWFkX3NoaWZ0KDIpLFxuXHRcdGZsOiBibG9iLnJlYWRfc2hpZnQoMilcblx0fTtcblx0c3dpdGNoKChvcHRzICYmIG9wdHMuYmlmZikgfHwgOCkge1xuXHRcdGNhc2UgMjogYnJlYWs7XG5cdFx0Y2FzZSAzOiBjYXNlIDQ6IGJsb2IubCArPSAyOyBicmVhaztcblx0XHRkZWZhdWx0OiBibG9iLmwgKz0gMTA7IGJyZWFrO1xuXHR9XG5cdG8ubmFtZSA9IHBhcnNlX1Nob3J0WExVbmljb2RlU3RyaW5nKGJsb2IsIDAsIG9wdHMpO1xuXHRyZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHdyaXRlX0ZvbnQoZGF0YSwgb3B0cykge1xuXHR2YXIgbmFtZSA9IGRhdGEubmFtZSB8fCBcIkFyaWFsXCI7XG5cdHZhciBiNSA9IChvcHRzICYmIChvcHRzLmJpZmYgPT0gNSkpLCB3ID0gKGI1ID8gKDE1ICsgbmFtZS5sZW5ndGgpIDogKDE2ICsgMiAqIG5hbWUubGVuZ3RoKSk7XG5cdHZhciBvID0gbmV3X2J1Zih3KTtcblx0by53cml0ZV9zaGlmdCgyLCAoZGF0YS5zeiB8fCAxMikgKiAyMCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgNDAwKTtcblx0by53cml0ZV9zaGlmdCg0LCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgxLCBuYW1lLmxlbmd0aCk7XG5cdGlmKCFiNSkgby53cml0ZV9zaGlmdCgxLCAxKTtcblx0by53cml0ZV9zaGlmdCgoYjUgPyAxIDogMikgKiBuYW1lLmxlbmd0aCwgbmFtZSwgKGI1ID8gXCJzYmNzXCIgOiBcInV0ZjE2bGVcIikpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi40LjE0OSAqL1xuZnVuY3Rpb24gcGFyc2VfTGFiZWxTc3QoYmxvYikge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0NlbGwoYmxvYik7XG5cdGNlbGwuaXNzdCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0cmV0dXJuIGNlbGw7XG59XG5mdW5jdGlvbiB3cml0ZV9MYWJlbFNzdChSLyo6bnVtYmVyKi8sIEMvKjpudW1iZXIqLywgdi8qOm51bWJlciovLCBvcy8qOm51bWJlciovIC8qOjosIG9wdHMqLykge1xuXHR2YXIgbyA9IG5ld19idWYoMTApO1xuXHR3cml0ZV9YTFNDZWxsKFIsIEMsIG9zLCBvKTtcblx0by53cml0ZV9zaGlmdCg0LCB2KTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xNDggKi9cbmZ1bmN0aW9uIHBhcnNlX0xhYmVsKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZihvcHRzLmJpZmZndWVzcyAmJiBvcHRzLmJpZmYgPT0gMikgb3B0cy5iaWZmID0gNTtcblx0dmFyIHRhcmdldCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNDZWxsKGJsb2IsIDYpO1xuXHRpZihvcHRzLmJpZmYgPT0gMikgYmxvYi5sKys7XG5cdHZhciBzdHIgPSBwYXJzZV9YTFVuaWNvZGVTdHJpbmcoYmxvYiwgdGFyZ2V0IC0gYmxvYi5sLCBvcHRzKTtcblx0Y2VsbC52YWwgPSBzdHI7XG5cdHJldHVybiBjZWxsO1xufVxuZnVuY3Rpb24gd3JpdGVfTGFiZWwoUi8qOm51bWJlciovLCBDLyo6bnVtYmVyKi8sIHYvKjpzdHJpbmcqLywgb3MvKjpudW1iZXIqLywgb3B0cykge1xuXHR2YXIgYjggPSAhb3B0cyB8fCBvcHRzLmJpZmYgPT0gODtcblx0dmFyIG8gPSBuZXdfYnVmKDYgKyAyICsgKCtiOCkgKyAoMSArIGI4KSAqIHYubGVuZ3RoKTtcblx0d3JpdGVfWExTQ2VsbChSLCBDLCBvcywgbyk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgdi5sZW5ndGgpO1xuXHRpZihiOCkgby53cml0ZV9zaGlmdCgxLCAxKTtcblx0by53cml0ZV9zaGlmdCgoMSArIGI4KSAqIHYubGVuZ3RoLCB2LCBiOCA/ICd1dGYxNmxlJyA6ICdzYmNzJyk7XG5cdHJldHVybiBvO1xufVxuXG5cbi8qIFtNUy1YTFNdIDIuNC4xMjYgTnVtYmVyIEZvcm1hdHMgKi9cbmZ1bmN0aW9uIHBhcnNlX0Zvcm1hdChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIG51bUZtdElkID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgZm10c3RyID0gcGFyc2VfWExVbmljb2RlU3RyaW5nMihibG9iLCAwLCBvcHRzKTtcblx0cmV0dXJuIFtudW1GbXRJZCwgZm10c3RyXTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0Zvcm1hdChpLyo6bnVtYmVyKi8sIGYvKjpzdHJpbmcqLywgb3B0cywgbykge1xuXHR2YXIgYjUgPSAob3B0cyAmJiAob3B0cy5iaWZmID09IDUpKTtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKGI1ID8gKDMgKyBmLmxlbmd0aCkgOiAoNSArIDIgKiBmLmxlbmd0aCkpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIGkpO1xuXHRvLndyaXRlX3NoaWZ0KChiNSA/IDEgOiAyKSwgZi5sZW5ndGgpO1xuXHRpZighYjUpIG8ud3JpdGVfc2hpZnQoMSwgMSk7XG5cdG8ud3JpdGVfc2hpZnQoKGI1ID8gMSA6IDIpICogZi5sZW5ndGgsIGYsIChiNSA/ICdzYmNzJyA6ICd1dGYxNmxlJykpO1xuXHR2YXIgb3V0ID0gKG8ubGVuZ3RoID4gby5sKSA/IG8uc2xpY2UoMCwgby5sKSA6IG87XG5cdGlmKG91dC5sID09IG51bGwpIG91dC5sID0gb3V0Lmxlbmd0aDtcblx0cmV0dXJuIG91dDtcbn1cbnZhciBwYXJzZV9CSUZGMkZvcm1hdCA9IHBhcnNlX1hMVW5pY29kZVN0cmluZzI7XG5cbi8qIFtNUy1YTFNdIDIuNC45MCAqL1xuZnVuY3Rpb24gcGFyc2VfRGltZW5zaW9ucyhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIHcgPSBvcHRzLmJpZmYgPT0gOCB8fCAhb3B0cy5iaWZmID8gNCA6IDI7XG5cdHZhciByID0gYmxvYi5yZWFkX3NoaWZ0KHcpLCBSID0gYmxvYi5yZWFkX3NoaWZ0KHcpO1xuXHR2YXIgYyA9IGJsb2IucmVhZF9zaGlmdCgyKSwgQyA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sID0gZW5kO1xuXHRyZXR1cm4ge3M6IHtyOnIsIGM6Y30sIGU6IHtyOlIsIGM6Q319O1xufVxuZnVuY3Rpb24gd3JpdGVfRGltZW5zaW9ucyhyYW5nZSwgb3B0cykge1xuXHR2YXIgdyA9IG9wdHMuYmlmZiA9PSA4IHx8ICFvcHRzLmJpZmYgPyA0IDogMjtcblx0dmFyIG8gPSBuZXdfYnVmKDIqdyArIDYpO1xuXHRvLndyaXRlX3NoaWZ0KHcsIHJhbmdlLnMucik7XG5cdG8ud3JpdGVfc2hpZnQodywgcmFuZ2UuZS5yICsgMSk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgcmFuZ2Uucy5jKTtcblx0by53cml0ZV9zaGlmdCgyLCByYW5nZS5lLmMgKyAxKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4yMjAgKi9cbmZ1bmN0aW9uIHBhcnNlX1JLKGJsb2IpIHtcblx0dmFyIHJ3ID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCBjb2wgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBya3JlYyA9IHBhcnNlX1JrUmVjKGJsb2IpO1xuXHRyZXR1cm4ge3I6cncsIGM6Y29sLCBpeGZlOnJrcmVjWzBdLCBya251bTpya3JlY1sxXX07XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xNzUgKi9cbmZ1bmN0aW9uIHBhcnNlX011bFJrKGJsb2IsIGxlbmd0aCkge1xuXHR2YXIgdGFyZ2V0ID0gYmxvYi5sICsgbGVuZ3RoIC0gMjtcblx0dmFyIHJ3ID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCBjb2wgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBya3JlY3MgPSBbXTtcblx0d2hpbGUoYmxvYi5sIDwgdGFyZ2V0KSBya3JlY3MucHVzaChwYXJzZV9Sa1JlYyhibG9iKSk7XG5cdGlmKGJsb2IubCAhPT0gdGFyZ2V0KSB0aHJvdyBuZXcgRXJyb3IoXCJNdWxSSyByZWFkIGVycm9yXCIpO1xuXHR2YXIgbGFzdGNvbCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0aWYocmtyZWNzLmxlbmd0aCAhPSBsYXN0Y29sIC0gY29sICsgMSkgdGhyb3cgbmV3IEVycm9yKFwiTXVsUksgbGVuZ3RoIG1pc21hdGNoXCIpO1xuXHRyZXR1cm4ge3I6cncsIGM6Y29sLCBDOmxhc3Rjb2wsIHJrcmVjOnJrcmVjc307XG59XG4vKiBbTVMtWExTXSAyLjQuMTc0ICovXG5mdW5jdGlvbiBwYXJzZV9NdWxCbGFuayhibG9iLCBsZW5ndGgpIHtcblx0dmFyIHRhcmdldCA9IGJsb2IubCArIGxlbmd0aCAtIDI7XG5cdHZhciBydyA9IGJsb2IucmVhZF9zaGlmdCgyKSwgY29sID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgaXhmZXMgPSBbXTtcblx0d2hpbGUoYmxvYi5sIDwgdGFyZ2V0KSBpeGZlcy5wdXNoKGJsb2IucmVhZF9zaGlmdCgyKSk7XG5cdGlmKGJsb2IubCAhPT0gdGFyZ2V0KSB0aHJvdyBuZXcgRXJyb3IoXCJNdWxCbGFuayByZWFkIGVycm9yXCIpO1xuXHR2YXIgbGFzdGNvbCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0aWYoaXhmZXMubGVuZ3RoICE9IGxhc3Rjb2wgLSBjb2wgKyAxKSB0aHJvdyBuZXcgRXJyb3IoXCJNdWxCbGFuayBsZW5ndGggbWlzbWF0Y2hcIik7XG5cdHJldHVybiB7cjpydywgYzpjb2wsIEM6bGFzdGNvbCwgaXhmZTppeGZlc307XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4yMCAyLjUuMjQ5IFRPRE86IGludGVycHJldCB2YWx1ZXMgaGVyZSAqL1xuZnVuY3Rpb24gcGFyc2VfQ2VsbFN0eWxlWEYoYmxvYiwgbGVuZ3RoLCBzdHlsZSwgb3B0cykge1xuXHR2YXIgbyA9IHt9O1xuXHR2YXIgYSA9IGJsb2IucmVhZF9zaGlmdCg0KSwgYiA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIGMgPSBibG9iLnJlYWRfc2hpZnQoNCksIGQgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdG8ucGF0dGVyblR5cGUgPSBYTFNGaWxsUGF0dGVybltjID4+IDI2XTtcblxuXHRpZighb3B0cy5jZWxsU3R5bGVzKSByZXR1cm4gbztcblx0by5hbGMgPSBhICYgMHgwNztcblx0by5mV3JhcCA9IChhID4+IDMpICYgMHgwMTtcblx0by5hbGNWID0gKGEgPj4gNCkgJiAweDA3O1xuXHRvLmZKdXN0TGFzdCA9IChhID4+IDcpICYgMHgwMTtcblx0by50cm90ID0gKGEgPj4gOCkgJiAweEZGO1xuXHRvLmNJbmRlbnQgPSAoYSA+PiAxNikgJiAweDBGO1xuXHRvLmZTaHJpbmtUb0ZpdCA9IChhID4+IDIwKSAmIDB4MDE7XG5cdG8uaVJlYWRPcmRlciA9IChhID4+IDIyKSAmIDB4MDI7XG5cdG8uZkF0ck51bSA9IChhID4+IDI2KSAmIDB4MDE7XG5cdG8uZkF0ckZudCA9IChhID4+IDI3KSAmIDB4MDE7XG5cdG8uZkF0ckFsYyA9IChhID4+IDI4KSAmIDB4MDE7XG5cdG8uZkF0ckJkciA9IChhID4+IDI5KSAmIDB4MDE7XG5cdG8uZkF0clBhdCA9IChhID4+IDMwKSAmIDB4MDE7XG5cdG8uZkF0clByb3QgPSAoYSA+PiAzMSkgJiAweDAxO1xuXG5cdG8uZGdMZWZ0ID0gYiAmIDB4MEY7XG5cdG8uZGdSaWdodCA9IChiID4+IDQpICYgMHgwRjtcblx0by5kZ1RvcCA9IChiID4+IDgpICYgMHgwRjtcblx0by5kZ0JvdHRvbSA9IChiID4+IDEyKSAmIDB4MEY7XG5cdG8uaWN2TGVmdCA9IChiID4+IDE2KSAmIDB4N0Y7XG5cdG8uaWN2UmlnaHQgPSAoYiA+PiAyMykgJiAweDdGO1xuXHRvLmdyYml0RGlhZyA9IChiID4+IDMwKSAmIDB4MDM7XG5cblx0by5pY3ZUb3AgPSBjICYgMHg3Rjtcblx0by5pY3ZCb3R0b20gPSAoYyA+PiA3KSAmIDB4N0Y7XG5cdG8uaWN2RGlhZyA9IChjID4+IDE0KSAmIDB4N0Y7XG5cdG8uZGdEaWFnID0gKGMgPj4gMjEpICYgMHgwRjtcblxuXHRvLmljdkZvcmUgPSBkICYgMHg3Rjtcblx0by5pY3ZCYWNrID0gKGQgPj4gNykgJiAweDdGO1xuXHRvLmZzeEJ1dHRvbiA9IChkID4+IDE0KSAmIDB4MDE7XG5cdHJldHVybiBvO1xufVxuLy9mdW5jdGlvbiBwYXJzZV9DZWxsWEYoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7cmV0dXJuIHBhcnNlX0NlbGxTdHlsZVhGKGJsb2IsbGVuZ3RoLDAsIG9wdHMpO31cbi8vZnVuY3Rpb24gcGFyc2VfU3R5bGVYRihibG9iLCBsZW5ndGgsIG9wdHMpIHtyZXR1cm4gcGFyc2VfQ2VsbFN0eWxlWEYoYmxvYixsZW5ndGgsMSwgb3B0cyk7fVxuXG4vKiBbTVMtWExTXSAyLjQuMzUzIFRPRE86IGFjdHVhbGx5IGRvIHRoaXMgcmlnaHQgKi9cbmZ1bmN0aW9uIHBhcnNlX1hGKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgbyA9IHt9O1xuXHRvLmlmbnQgPSBibG9iLnJlYWRfc2hpZnQoMik7IG8ubnVtRm10SWQgPSBibG9iLnJlYWRfc2hpZnQoMik7IG8uZmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdG8uZlN0eWxlID0gKG8uZmxhZ3MgPj4gMikgJiAweDAxO1xuXHRsZW5ndGggLT0gNjtcblx0by5kYXRhID0gcGFyc2VfQ2VsbFN0eWxlWEYoYmxvYiwgbGVuZ3RoLCBvLmZTdHlsZSwgb3B0cyk7XG5cdHJldHVybiBvO1xufVxuZnVuY3Rpb24gd3JpdGVfWEYoZGF0YSwgaXhmZVAsIG9wdHMsIG8pIHtcblx0dmFyIGI1ID0gKG9wdHMgJiYgKG9wdHMuYmlmZiA9PSA1KSk7XG5cdGlmKCFvKSBvID0gbmV3X2J1ZihiNSA/IDE2IDogMjApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRpZihkYXRhLnN0eWxlKSB7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAoZGF0YS5udW1GbXRJZHx8MCkpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMHhGRkY0KTtcblx0fSBlbHNlIHtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIChkYXRhLm51bUZtdElkfHwwKSk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAoaXhmZVA8PDQpKTtcblx0fVxuXHR2YXIgZiA9IDA7XG5cdGlmKGRhdGEubnVtRm10SWQgPiAwICYmIGI1KSBmIHw9IDB4MDQwMDtcblx0by53cml0ZV9zaGlmdCg0LCBmKTtcblx0by53cml0ZV9zaGlmdCg0LCAwKTtcblx0aWYoIWI1KSBvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi40LjEzNCAqL1xuZnVuY3Rpb24gcGFyc2VfR3V0cyhibG9iKSB7XG5cdGJsb2IubCArPSA0O1xuXHR2YXIgb3V0ID0gW2Jsb2IucmVhZF9zaGlmdCgyKSwgYmxvYi5yZWFkX3NoaWZ0KDIpXTtcblx0aWYob3V0WzBdICE9PSAwKSBvdXRbMF0tLTtcblx0aWYob3V0WzFdICE9PSAwKSBvdXRbMV0tLTtcblx0aWYob3V0WzBdID4gNyB8fCBvdXRbMV0gPiA3KSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgR3V0dGVyczogXCIgKyBvdXQuam9pbihcInxcIikpO1xuXHRyZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gd3JpdGVfR3V0cyhndXRzLyo6QXJyYXk8bnVtYmVyPiovKSB7XG5cdHZhciBvID0gbmV3X2J1Zig4KTtcblx0by53cml0ZV9zaGlmdCg0LCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCBndXRzWzBdID8gZ3V0c1swXSArIDEgOiAwKTtcblx0by53cml0ZV9zaGlmdCgyLCBndXRzWzFdID8gZ3V0c1sxXSArIDEgOiAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4yNCAqL1xuZnVuY3Rpb24gcGFyc2VfQm9vbEVycihibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNDZWxsKGJsb2IsIDYpO1xuXHRpZihvcHRzLmJpZmYgPT0gMiB8fCBsZW5ndGggPT0gOSkgKytibG9iLmw7XG5cdHZhciB2YWwgPSBwYXJzZV9CZXMoYmxvYiwgMik7XG5cdGNlbGwudmFsID0gdmFsO1xuXHRjZWxsLnQgPSAodmFsID09PSB0cnVlIHx8IHZhbCA9PT0gZmFsc2UpID8gJ2InIDogJ2UnO1xuXHRyZXR1cm4gY2VsbDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0Jvb2xFcnIoUi8qOm51bWJlciovLCBDLyo6bnVtYmVyKi8sIHYsIG9zLyo6bnVtYmVyKi8sIG9wdHMsIHQvKjpzdHJpbmcqLykge1xuXHR2YXIgbyA9IG5ld19idWYoOCk7XG5cdHdyaXRlX1hMU0NlbGwoUiwgQywgb3MsIG8pO1xuXHR3cml0ZV9CZXModiwgdCwgbyk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMTgwIE51bWJlciAqL1xuZnVuY3Rpb24gcGFyc2VfTnVtYmVyKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZihvcHRzLmJpZmZndWVzcyAmJiBvcHRzLmJpZmYgPT0gMikgb3B0cy5iaWZmID0gNTtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNDZWxsKGJsb2IsIDYpO1xuXHR2YXIgeG51bSA9IHBhcnNlX1hudW0oYmxvYiwgOCk7XG5cdGNlbGwudmFsID0geG51bTtcblx0cmV0dXJuIGNlbGw7XG59XG5mdW5jdGlvbiB3cml0ZV9OdW1iZXIoUi8qOm51bWJlciovLCBDLyo6bnVtYmVyKi8sIHYsIG9zLyo6OiA6bnVtYmVyLCBvcHRzKi8pIHtcblx0dmFyIG8gPSBuZXdfYnVmKDE0KTtcblx0d3JpdGVfWExTQ2VsbChSLCBDLCBvcywgbyk7XG5cdHdyaXRlX1hudW0odiwgbyk7XG5cdHJldHVybiBvO1xufVxuXG52YXIgcGFyc2VfWExIZWFkZXJGb290ZXIgPSBwYXJzZV9PcHRYTFVuaWNvZGVTdHJpbmc7IC8vIFRPRE86IHBhcnNlIDIuNC4xMzZcblxuLyogW01TLVhMU10gMi40LjI3MSAqL1xuZnVuY3Rpb24gcGFyc2VfU3VwQm9vayhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIGN0YWIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBjY2ggPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdG9wdHMuc2JjY2ggPSBjY2g7XG5cdGlmKGNjaCA9PSAweDA0MDEgfHwgY2NoID09IDB4M0EwMSkgcmV0dXJuIFtjY2gsIGN0YWJdO1xuXHRpZihjY2ggPCAweDAxIHx8IGNjaCA+MHhmZikgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBTdXBCb29rIHR5cGU6IFwiK2NjaCk7XG5cdHZhciB2aXJ0UGF0aCA9IHBhcnNlX1hMVW5pY29kZVN0cmluZ05vQ2NoKGJsb2IsIGNjaCk7XG5cdC8qIFRPRE86IDIuNS4yNzcgVmlydHVhbCBQYXRoICovXG5cdHZhciByZ3N0ID0gW107XG5cdHdoaWxlKGVuZCA+IGJsb2IubCkgcmdzdC5wdXNoKHBhcnNlX1hMVW5pY29kZVN0cmluZyhibG9iKSk7XG5cdHJldHVybiBbY2NoLCBjdGFiLCB2aXJ0UGF0aCwgcmdzdF07XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xMDUgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfRXh0ZXJuTmFtZShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgYm9keTtcblx0dmFyIG8gPSAoe1xuXHRcdGZCdWlsdEluOiBmbGFncyAmIDB4MDEsXG5cdFx0ZldhbnRBZHZpc2U6IChmbGFncyA+Pj4gMSkgJiAweDAxLFxuXHRcdGZXYW50UGljdDogKGZsYWdzID4+PiAyKSAmIDB4MDEsXG5cdFx0Zk9sZTogKGZsYWdzID4+PiAzKSAmIDB4MDEsXG5cdFx0Zk9sZUxpbms6IChmbGFncyA+Pj4gNCkgJiAweDAxLFxuXHRcdGNmOiAoZmxhZ3MgPj4+IDUpICYgMHgzRkYsXG5cdFx0Zkljb246IGZsYWdzID4+PiAxNSAmIDB4MDFcblx0fS8qOmFueSovKTtcblx0aWYob3B0cy5zYmNjaCA9PT0gMHgzQTAxKSBib2R5ID0gcGFyc2VfQWRkaW5VZGYoYmxvYiwgbGVuZ3RoLTIsIG9wdHMpO1xuXHQvL2Vsc2UgdGhyb3cgbmV3IEVycm9yKFwidW5zdXBwb3J0ZWQgU3VwQm9vayBjY2g6IFwiICsgb3B0cy5zYmNjaCk7XG5cdG8uYm9keSA9IGJvZHkgfHwgYmxvYi5yZWFkX3NoaWZ0KGxlbmd0aC0yKTtcblx0aWYodHlwZW9mIGJvZHkgPT09IFwic3RyaW5nXCIpIG8uTmFtZSA9IGJvZHk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMTUwIFRPRE8gKi9cbnZhciBYTFNMYmxCdWlsdEluID0gW1xuXHRcIl94bG5tLkNvbnNvbGlkYXRlX0FyZWFcIixcblx0XCJfeGxubS5BdXRvX09wZW5cIixcblx0XCJfeGxubS5BdXRvX0Nsb3NlXCIsXG5cdFwiX3hsbm0uRXh0cmFjdFwiLFxuXHRcIl94bG5tLkRhdGFiYXNlXCIsXG5cdFwiX3hsbm0uQ3JpdGVyaWFcIixcblx0XCJfeGxubS5QcmludF9BcmVhXCIsXG5cdFwiX3hsbm0uUHJpbnRfVGl0bGVzXCIsXG5cdFwiX3hsbm0uUmVjb3JkZXJcIixcblx0XCJfeGxubS5EYXRhX0Zvcm1cIixcblx0XCJfeGxubS5BdXRvX0FjdGl2YXRlXCIsXG5cdFwiX3hsbm0uQXV0b19EZWFjdGl2YXRlXCIsXG5cdFwiX3hsbm0uU2hlZXRfVGl0bGVcIixcblx0XCJfeGxubS5fRmlsdGVyRGF0YWJhc2VcIlxuXTtcbmZ1bmN0aW9uIHBhcnNlX0xibChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHRhcmdldCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgY2hLZXkgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdHZhciBjY2ggPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdHZhciBjY2UgPSBibG9iLnJlYWRfc2hpZnQob3B0cyAmJiBvcHRzLmJpZmYgPT0gMiA/IDEgOiAyKTtcblx0dmFyIGl0YWIgPSAwO1xuXHRpZighb3B0cyB8fCBvcHRzLmJpZmYgPj0gNSkge1xuXHRcdGlmKG9wdHMuYmlmZiAhPSA1KSBibG9iLmwgKz0gMjtcblx0XHRpdGFiID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRcdGlmKG9wdHMuYmlmZiA9PSA1KSBibG9iLmwgKz0gMjtcblx0XHRibG9iLmwgKz0gNDtcblx0fVxuXHR2YXIgbmFtZSA9IHBhcnNlX1hMVW5pY29kZVN0cmluZ05vQ2NoKGJsb2IsIGNjaCwgb3B0cyk7XG5cdGlmKGZsYWdzICYgMHgyMCkgbmFtZSA9IFhMU0xibEJ1aWx0SW5bbmFtZS5jaGFyQ29kZUF0KDApXTtcblx0dmFyIG5wZmxlbiA9IHRhcmdldCAtIGJsb2IubDsgaWYob3B0cyAmJiBvcHRzLmJpZmYgPT0gMikgLS1ucGZsZW47XG5cdC8qanNoaW50IC1XMDE4ICovXG5cdHZhciByZ2NlID0gKHRhcmdldCA9PSBibG9iLmwgfHwgY2NlID09PSAwIHx8ICEobnBmbGVuID4gMCkpID8gW10gOiBwYXJzZV9OYW1lUGFyc2VkRm9ybXVsYShibG9iLCBucGZsZW4sIG9wdHMsIGNjZSk7XG5cdC8qanNoaW50ICtXMDE4ICovXG5cdHJldHVybiB7XG5cdFx0Y2hLZXk6IGNoS2V5LFxuXHRcdE5hbWU6IG5hbWUsXG5cdFx0aXRhYjogaXRhYixcblx0XHRyZ2NlOiByZ2NlXG5cdH07XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xMDYgVE9ETzogdmVyaWZ5IGZpbGVuYW1lIGVuY29kaW5nICovXG5mdW5jdGlvbiBwYXJzZV9FeHRlcm5TaGVldChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0aWYob3B0cy5iaWZmIDwgOCkgcmV0dXJuIHBhcnNlX0JJRkY1RXh0ZXJuU2hlZXQoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0dmFyIG8gPSBbXSwgdGFyZ2V0ID0gYmxvYi5sICsgbGVuZ3RoLCBsZW4gPSBibG9iLnJlYWRfc2hpZnQob3B0cy5iaWZmID4gOCA/IDQgOiAyKTtcblx0d2hpbGUobGVuLS0gIT09IDApIG8ucHVzaChwYXJzZV9YVEkoYmxvYiwgb3B0cy5iaWZmID4gOCA/IDEyIDogNiwgb3B0cykpO1xuXHRcdC8vIFtpU3VwQm9vaywgaXRhYkZpcnN0LCBpdGFiTGFzdF07XG5cdGlmKGJsb2IubCAhPSB0YXJnZXQpIHRocm93IG5ldyBFcnJvcihcIkJhZCBFeHRlcm5TaGVldDogXCIgKyBibG9iLmwgKyBcIiAhPSBcIiArIHRhcmdldCk7XG5cdHJldHVybiBvO1xufVxuZnVuY3Rpb24gcGFyc2VfQklGRjVFeHRlcm5TaGVldChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0aWYoYmxvYltibG9iLmwgKyAxXSA9PSAweDAzKSBibG9iW2Jsb2IubF0rKztcblx0dmFyIG8gPSBwYXJzZV9TaG9ydFhMVW5pY29kZVN0cmluZyhibG9iLCBsZW5ndGgsIG9wdHMpO1xuXHRyZXR1cm4gby5jaGFyQ29kZUF0KDApID09IDB4MDMgPyBvLnNsaWNlKDEpIDogbztcbn1cblxuLyogW01TLVhMU10gMi40LjE3NiBUT0RPOiBjaGVjayBvbGRlciBiaWZmICovXG5mdW5jdGlvbiBwYXJzZV9OYW1lQ210KGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZihvcHRzLmJpZmYgPCA4KSB7IGJsb2IubCArPSBsZW5ndGg7IHJldHVybjsgfVxuXHR2YXIgY2NoTmFtZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGNjaENvbW1lbnQgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBuYW1lID0gcGFyc2VfWExVbmljb2RlU3RyaW5nTm9DY2goYmxvYiwgY2NoTmFtZSwgb3B0cyk7XG5cdHZhciBjb21tZW50ID0gcGFyc2VfWExVbmljb2RlU3RyaW5nTm9DY2goYmxvYiwgY2NoQ29tbWVudCwgb3B0cyk7XG5cdHJldHVybiBbbmFtZSwgY29tbWVudF07XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4yNjAgKi9cbmZ1bmN0aW9uIHBhcnNlX1NockZtbGEoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciByZWYgPSBwYXJzZV9SZWZVKGJsb2IsIDYpO1xuXHRibG9iLmwrKztcblx0dmFyIGNVc2UgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdGxlbmd0aCAtPSA4O1xuXHRyZXR1cm4gW3BhcnNlX1NoYXJlZFBhcnNlZEZvcm11bGEoYmxvYiwgbGVuZ3RoLCBvcHRzKSwgY1VzZSwgcmVmXTtcbn1cblxuLyogW01TLVhMU10gMi40LjQgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfQXJyYXkoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciByZWYgPSBwYXJzZV9SZWYoYmxvYiwgNik7XG5cdC8qIFRPRE86IGZBbHdheXNDYWxjICovXG5cdHN3aXRjaChvcHRzLmJpZmYpIHtcblx0XHRjYXNlIDI6IGJsb2IubCArKzsgbGVuZ3RoIC09IDc7IGJyZWFrO1xuXHRcdGNhc2UgMzogY2FzZSA0OiBibG9iLmwgKz0gMjsgbGVuZ3RoIC09IDg7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IGJsb2IubCArPSA2OyBsZW5ndGggLT0gMTI7XG5cdH1cblx0cmV0dXJuIFtyZWYsIHBhcnNlX0FycmF5UGFyc2VkRm9ybXVsYShibG9iLCBsZW5ndGgsIG9wdHMsIHJlZildO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMTczICovXG5mdW5jdGlvbiBwYXJzZV9NVFJTZXR0aW5ncyhibG9iKSB7XG5cdHZhciBmTVRSRW5hYmxlZCA9IGJsb2IucmVhZF9zaGlmdCg0KSAhPT0gMHgwMDtcblx0dmFyIGZVc2VyU2V0VGhyZWFkQ291bnQgPSBibG9iLnJlYWRfc2hpZnQoNCkgIT09IDB4MDA7XG5cdHZhciBjVXNlclRocmVhZENvdW50ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRyZXR1cm4gW2ZNVFJFbmFibGVkLCBmVXNlclNldFRocmVhZENvdW50LCBjVXNlclRocmVhZENvdW50XTtcbn1cblxuLyogW01TLVhMU10gMi41LjE4NiBUT0RPOiBCSUZGNSAqL1xuZnVuY3Rpb24gcGFyc2VfTm90ZVNoKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZihvcHRzLmJpZmYgPCA4KSByZXR1cm47XG5cdHZhciByb3cgPSBibG9iLnJlYWRfc2hpZnQoMiksIGNvbCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDIpLCBpZE9iaiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIHN0QXV0aG9yID0gcGFyc2VfWExVbmljb2RlU3RyaW5nMihibG9iLCAwLCBvcHRzKTtcblx0aWYob3B0cy5iaWZmIDwgOCkgYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRyZXR1cm4gW3tyOnJvdyxjOmNvbH0sIHN0QXV0aG9yLCBpZE9iaiwgZmxhZ3NdO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMTc5ICovXG5mdW5jdGlvbiBwYXJzZV9Ob3RlKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHQvKiBUT0RPOiBTdXBwb3J0IHJldmlzaW9ucyAqL1xuXHRyZXR1cm4gcGFyc2VfTm90ZVNoKGJsb2IsIGxlbmd0aCwgb3B0cyk7XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xNjggKi9cbmZ1bmN0aW9uIHBhcnNlX01lcmdlQ2VsbHMoYmxvYiwgbGVuZ3RoKS8qOkFycmF5PFJhbmdlPiovIHtcblx0dmFyIG1lcmdlcy8qOkFycmF5PFJhbmdlPiovID0gW107XG5cdHZhciBjbWNzID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR3aGlsZSAoY21jcy0tKSBtZXJnZXMucHVzaChwYXJzZV9SZWY4VShibG9iLGxlbmd0aCkpO1xuXHRyZXR1cm4gbWVyZ2VzO1xufVxuZnVuY3Rpb24gd3JpdGVfTWVyZ2VDZWxscyhtZXJnZXMvKjpBcnJheTxSYW5nZT4qLykge1xuXHR2YXIgbyA9IG5ld19idWYoMiArIG1lcmdlcy5sZW5ndGggKiA4KTtcblx0by53cml0ZV9zaGlmdCgyLCBtZXJnZXMubGVuZ3RoKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IG1lcmdlcy5sZW5ndGg7ICsraSkgd3JpdGVfUmVmOFUobWVyZ2VzW2ldLCBvKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xODEgVE9ETzogcGFyc2UgYWxsIHRoZSB0aGluZ3MhICovXG5mdW5jdGlvbiBwYXJzZV9PYmooYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGlmKG9wdHMgJiYgb3B0cy5iaWZmIDwgOCkgcmV0dXJuIHBhcnNlX0JJRkY1T2JqKGJsb2IsIGxlbmd0aCwgb3B0cyk7XG5cdHZhciBjbW8gPSBwYXJzZV9GdENtbyhibG9iLCAyMik7IC8vIGlkLCBvdCwgZmxhZ3Ncblx0dmFyIGZ0cyA9IHBhcnNlX0Z0QXJyYXkoYmxvYiwgbGVuZ3RoLTIyLCBjbW9bMV0pO1xuXHRyZXR1cm4geyBjbW86IGNtbywgZnQ6ZnRzIH07XG59XG4vKiBmcm9tIG9sZGVyIHNwZWMgKi9cbnZhciBwYXJzZV9CSUZGNU9UID0ge1xuMHgwODogZnVuY3Rpb24oYmxvYiwgbGVuZ3RoKSB7XG5cdHZhciB0Z3QgPSBibG9iLmwgKyBsZW5ndGg7XG5cdGJsb2IubCArPSAxMDsgLy8gdG9kb1xuXHR2YXIgY2YgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSA0O1xuXHRibG9iLmwgKz0gMjsgLy92YXIgY2JQaWN0Rm1sYSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDI7XG5cdGJsb2IubCArPSAyOyAvL3ZhciBncmJpdCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDQ7XG5cdHZhciBjY2hOYW1lID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRibG9iLmwgKz0gY2NoTmFtZTsgLy8gVE9ETzogc3ROYW1lXG5cdGJsb2IubCA9IHRndDsgLy8gVE9ETzogZm1sYVxuXHRyZXR1cm4geyBmbXQ6Y2YgfTtcbn1cbn07XG5cbmZ1bmN0aW9uIHBhcnNlX0JJRkY1T2JqKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRibG9iLmwgKz0gNDsgLy92YXIgY250ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgb3QgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBpZCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGdyYml0ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRibG9iLmwgKz0gMjsgLy92YXIgY29sTCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDI7IC8vdmFyIGR4TCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDI7IC8vdmFyIHJ3VCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDI7IC8vdmFyIGR5VCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDI7IC8vdmFyIGNvbFIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSAyOyAvL3ZhciBkeFIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSAyOyAvL3ZhciByd0IgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSAyOyAvL3ZhciBkeUIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGJsb2IubCArPSAyOyAvL3ZhciBjYk1hY3JvID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRibG9iLmwgKz0gNjtcblx0bGVuZ3RoIC09IDM2O1xuXHR2YXIgZnRzID0gW107XG5cdGZ0cy5wdXNoKChwYXJzZV9CSUZGNU9UW290XXx8cGFyc2Vub29wKShibG9iLCBsZW5ndGgsIG9wdHMpKTtcblx0cmV0dXJuIHsgY21vOiBbaWQsIG90LCBncmJpdF0sIGZ0OmZ0cyB9O1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMzI5IFRPRE86IHBhcnNlIHByb3Blcmx5ICovXG5mdW5jdGlvbiBwYXJzZV9UeE8oYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciBzID0gYmxvYi5sO1xuXHR2YXIgdGV4dHMgPSBcIlwiO1xudHJ5IHtcblx0YmxvYi5sICs9IDQ7XG5cdHZhciBvdCA9IChvcHRzLmxhc3RvYmp8fHtjbW86WzAsMF19KS5jbW9bMV07XG5cdHZhciBjb250cm9sSW5mbzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXHRpZihbMCw1LDcsMTEsMTIsMTRdLmluZGV4T2Yob3QpID09IC0xKSBibG9iLmwgKz0gNjtcblx0ZWxzZSBjb250cm9sSW5mbyA9IHBhcnNlX0NvbnRyb2xJbmZvKGJsb2IsIDYsIG9wdHMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdHZhciBjY2hUZXh0ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHQvKnZhciBjYlJ1bnMgPSAqL2Jsb2IucmVhZF9zaGlmdCgyKTtcblx0Lyp2YXIgaWZudEVtcHR5ID0gKi9wYXJzZXVpbnQxNihibG9iLCAyKTtcblx0dmFyIGxlbiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IGxlbjtcblx0Ly92YXIgZm1sYSA9IHBhcnNlX09iakZtbGEoYmxvYiwgcyArIGxlbmd0aCAtIGJsb2IubCk7XG5cblx0Zm9yKHZhciBpID0gMTsgaSA8IGJsb2IubGVucy5sZW5ndGgtMTsgKytpKSB7XG5cdFx0aWYoYmxvYi5sLXMgIT0gYmxvYi5sZW5zW2ldKSB0aHJvdyBuZXcgRXJyb3IoXCJUeE86IGJhZCBjb250aW51ZSByZWNvcmRcIik7XG5cdFx0dmFyIGhkciA9IGJsb2JbYmxvYi5sXTtcblx0XHR2YXIgdCA9IHBhcnNlX1hMVW5pY29kZVN0cmluZ05vQ2NoKGJsb2IsIGJsb2IubGVuc1tpKzFdLWJsb2IubGVuc1tpXS0xKTtcblx0XHR0ZXh0cyArPSB0O1xuXHRcdGlmKHRleHRzLmxlbmd0aCA+PSAoaGRyID8gY2NoVGV4dCA6IDIqY2NoVGV4dCkpIGJyZWFrO1xuXHR9XG5cdGlmKHRleHRzLmxlbmd0aCAhPT0gY2NoVGV4dCAmJiB0ZXh0cy5sZW5ndGggIT09IGNjaFRleHQqMikge1xuXHRcdHRocm93IG5ldyBFcnJvcihcImNjaFRleHQ6IFwiICsgY2NoVGV4dCArIFwiICE9IFwiICsgdGV4dHMubGVuZ3RoKTtcblx0fVxuXG5cdGJsb2IubCA9IHMgKyBsZW5ndGg7XG5cdC8qIFtNUy1YTFNdIDIuNS4yNzIgVHhPUnVucyAqL1xuLy9cdHZhciByZ1R4b1J1bnMgPSBbXTtcbi8vXHRmb3IodmFyIGogPSAwOyBqICE9IGNiUnVucy84LTE7ICsraikgYmxvYi5sICs9IDg7XG4vL1x0dmFyIGNjaFRleHQyID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuLy9cdGlmKGNjaFRleHQyICE9PSBjY2hUZXh0KSB0aHJvdyBuZXcgRXJyb3IoXCJUeE9MYXN0UnVuIG1pc21hdGNoOiBcIiArIGNjaFRleHQyICsgXCIgXCIgKyBjY2hUZXh0KTtcbi8vXHRibG9iLmwgKz0gNjtcbi8vXHRpZihzICsgbGVuZ3RoICE9IGJsb2IubCkgdGhyb3cgbmV3IEVycm9yKFwiVHhPIFwiICsgKHMgKyBsZW5ndGgpICsgXCIsIGF0IFwiICsgYmxvYi5sKTtcblx0cmV0dXJuIHsgdDogdGV4dHMgfTtcbn0gY2F0Y2goZSkgeyBibG9iLmwgPSBzICsgbGVuZ3RoOyByZXR1cm4geyB0OiB0ZXh0cyB9OyB9XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xNDAgKi9cbmZ1bmN0aW9uIHBhcnNlX0hMaW5rKGJsb2IsIGxlbmd0aCkge1xuXHR2YXIgcmVmID0gcGFyc2VfUmVmOFUoYmxvYiwgOCk7XG5cdGJsb2IubCArPSAxNjsgLyogQ0xTSUQgKi9cblx0dmFyIGhsaW5rID0gcGFyc2VfSHlwZXJsaW5rKGJsb2IsIGxlbmd0aC0yNCk7XG5cdHJldHVybiBbcmVmLCBobGlua107XG59XG5mdW5jdGlvbiB3cml0ZV9ITGluayhobCkge1xuXHR2YXIgTyA9IG5ld19idWYoMjQpO1xuXHR2YXIgcmVmID0gZGVjb2RlX2NlbGwoaGxbMF0pO1xuXHRPLndyaXRlX3NoaWZ0KDIsIHJlZi5yKTsgTy53cml0ZV9zaGlmdCgyLCByZWYucik7XG5cdE8ud3JpdGVfc2hpZnQoMiwgcmVmLmMpOyBPLndyaXRlX3NoaWZ0KDIsIHJlZi5jKTtcblx0dmFyIGNsc2lkID0gXCJkMCBjOSBlYSA3OSBmOSBiYSBjZSAxMSA4YyA4MiAwMCBhYSAwMCA0YiBhOSAwYlwiLnNwbGl0KFwiIFwiKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IDE2OyArK2kpIE8ud3JpdGVfc2hpZnQoMSwgcGFyc2VJbnQoY2xzaWRbaV0sIDE2KSk7XG5cdHJldHVybiBiY29uY2F0KFtPLCB3cml0ZV9IeXBlcmxpbmsoaGxbMV0pXSk7XG59XG5cblxuLyogW01TLVhMU10gMi40LjE0MSAqL1xuZnVuY3Rpb24gcGFyc2VfSExpbmtUb29sdGlwKGJsb2IsIGxlbmd0aCkge1xuXHRibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciByZWYgPSBwYXJzZV9SZWY4VShibG9iLCA4KTtcblx0dmFyIHd6VG9vbHRpcCA9IGJsb2IucmVhZF9zaGlmdCgobGVuZ3RoLTEwKS8yLCAnZGJjcy1jb250Jyk7XG5cdHd6VG9vbHRpcCA9IHd6VG9vbHRpcC5yZXBsYWNlKGNocjAsXCJcIik7XG5cdHJldHVybiBbcmVmLCB3elRvb2x0aXBdO1xufVxuZnVuY3Rpb24gd3JpdGVfSExpbmtUb29sdGlwKGhsKSB7XG5cdHZhciBUVCA9IGhsWzFdLlRvb2x0aXA7XG5cdHZhciBPID0gbmV3X2J1ZigxMCArIDIgKiAoVFQubGVuZ3RoICsgMSkpO1xuXHRPLndyaXRlX3NoaWZ0KDIsIDB4MDgwMCk7XG5cdHZhciByZWYgPSBkZWNvZGVfY2VsbChobFswXSk7XG5cdE8ud3JpdGVfc2hpZnQoMiwgcmVmLnIpOyBPLndyaXRlX3NoaWZ0KDIsIHJlZi5yKTtcblx0Ty53cml0ZV9zaGlmdCgyLCByZWYuYyk7IE8ud3JpdGVfc2hpZnQoMiwgcmVmLmMpO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgVFQubGVuZ3RoOyArK2kpIE8ud3JpdGVfc2hpZnQoMiwgVFQuY2hhckNvZGVBdChpKSk7XG5cdE8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdHJldHVybiBPO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuNjMgKi9cbmZ1bmN0aW9uIHBhcnNlX0NvdW50cnkoYmxvYikvKjpbc3RyaW5nfG51bWJlciwgc3RyaW5nfG51bWJlcl0qLyB7XG5cdHZhciBvID0gWzAsMF0sIGQ7XG5cdGQgPSBibG9iLnJlYWRfc2hpZnQoMik7IG9bMF0gPSBDb3VudHJ5RW51bVtkXSB8fCBkO1xuXHRkID0gYmxvYi5yZWFkX3NoaWZ0KDIpOyBvWzFdID0gQ291bnRyeUVudW1bZF0gfHwgZDtcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiB3cml0ZV9Db3VudHJ5KG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDQpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDB4MDEpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDB4MDEpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi40LjUwIENscnRDbGllbnQgKi9cbmZ1bmN0aW9uIHBhcnNlX0NscnRDbGllbnQoYmxvYikge1xuXHR2YXIgY2N2ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgbyA9IFtdO1xuXHR3aGlsZShjY3YtLT4wKSBvLnB1c2gocGFyc2VfTG9uZ1JHQihibG9iLCA4KSk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMTg4ICovXG5mdW5jdGlvbiBwYXJzZV9QYWxldHRlKGJsb2IpIHtcblx0dmFyIGNjdiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIG8gPSBbXTtcblx0d2hpbGUoY2N2LS0+MCkgby5wdXNoKHBhcnNlX0xvbmdSR0IoYmxvYiwgOCkpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi40LjM1NCAqL1xuZnVuY3Rpb24gcGFyc2VfWEZDUkMoYmxvYikge1xuXHRibG9iLmwgKz0gMjtcblx0dmFyIG8gPSB7Y3hmczowLCBjcmM6MH07XG5cdG8uY3hmcyA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0by5jcmMgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuNTMgVE9ETzogcGFyc2UgZmxhZ3MgKi9cbi8qIFtNUy1YTFNCXSAyLjQuMzIzIFRPRE86IHBhcnNlIGZsYWdzICovXG5mdW5jdGlvbiBwYXJzZV9Db2xJbmZvKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZighb3B0cy5jZWxsU3R5bGVzKSByZXR1cm4gcGFyc2Vub29wKGJsb2IsIGxlbmd0aCk7XG5cdHZhciB3ID0gb3B0cyAmJiBvcHRzLmJpZmYgPj0gMTIgPyA0IDogMjtcblx0dmFyIGNvbEZpcnN0ID0gYmxvYi5yZWFkX3NoaWZ0KHcpO1xuXHR2YXIgY29sTGFzdCA9IGJsb2IucmVhZF9zaGlmdCh3KTtcblx0dmFyIGNvbGR4ID0gYmxvYi5yZWFkX3NoaWZ0KHcpO1xuXHR2YXIgaXhmZSA9IGJsb2IucmVhZF9zaGlmdCh3KTtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRpZih3ID09IDIpIGJsb2IubCArPSAyO1xuXHR2YXIgbyA9ICh7czpjb2xGaXJzdCwgZTpjb2xMYXN0LCB3OmNvbGR4LCBpeGZlOml4ZmUsIGZsYWdzOmZsYWdzfS8qOmFueSovKTtcblx0aWYob3B0cy5iaWZmID49IDUgfHwgIW9wdHMuYmlmZikgby5sZXZlbCA9IChmbGFncyA+PiA4KSAmIDB4Nztcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiB3cml0ZV9Db2xJbmZvKGNvbCwgaWR4KSB7XG5cdHZhciBvID0gbmV3X2J1ZigxMik7XG5cdG8ud3JpdGVfc2hpZnQoMiwgaWR4KTtcblx0by53cml0ZV9zaGlmdCgyLCBpZHgpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIGNvbC53aWR0aCAqIDI1Nik7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdHZhciBmID0gMDtcblx0aWYoY29sLmhpZGRlbikgZiB8PSAxO1xuXHRvLndyaXRlX3NoaWZ0KDEsIGYpO1xuXHRmID0gY29sLmxldmVsIHx8IDA7XG5cdG8ud3JpdGVfc2hpZnQoMSwgZik7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMjU3ICovXG5mdW5jdGlvbiBwYXJzZV9TZXR1cChibG9iLCBsZW5ndGgpIHtcblx0dmFyIG8gPSB7fTtcblx0aWYobGVuZ3RoIDwgMzIpIHJldHVybiBvO1xuXHRibG9iLmwgKz0gMTY7XG5cdG8uaGVhZGVyID0gcGFyc2VfWG51bShibG9iLCA4KTtcblx0by5mb290ZXIgPSBwYXJzZV9YbnVtKGJsb2IsIDgpO1xuXHRibG9iLmwgKz0gMjtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4yNjEgKi9cbmZ1bmN0aW9uIHBhcnNlX1NodFByb3BzKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgZGVmID0ge2FyZWE6ZmFsc2V9O1xuXHRpZihvcHRzLmJpZmYgIT0gNSkgeyBibG9iLmwgKz0gbGVuZ3RoOyByZXR1cm4gZGVmOyB9XG5cdHZhciBkID0gYmxvYi5yZWFkX3NoaWZ0KDEpOyBibG9iLmwgKz0gMztcblx0aWYoKGQgJiAweDEwKSkgZGVmLmFyZWEgPSB0cnVlO1xuXHRyZXR1cm4gZGVmO1xufVxuXG4vKiBbTVMtWExTXSAyLjQuMjQxICovXG5mdW5jdGlvbiB3cml0ZV9SUlRhYklkKG4vKjpudW1iZXIqLykge1xuXHR2YXIgb3V0ID0gbmV3X2J1ZigyICogbik7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBuOyArK2kpIG91dC53cml0ZV9zaGlmdCgyLCBpKzEpO1xuXHRyZXR1cm4gb3V0O1xufVxuXG52YXIgcGFyc2VfQmxhbmsgPSBwYXJzZV9YTFNDZWxsOyAvKiBbTVMtWExTXSAyLjQuMjAgSnVzdCB0aGUgY2VsbCAqL1xudmFyIHBhcnNlX1NjbCA9IHBhcnNldWludDE2YTsgLyogW01TLVhMU10gMi40LjI0NyBudW0sIGRlbiAqL1xudmFyIHBhcnNlX1N0cmluZyA9IHBhcnNlX1hMVW5pY29kZVN0cmluZzsgLyogW01TLVhMU10gMi40LjI2OCAqL1xuXG4vKiAtLS0gU3BlY2lmaWMgdG8gdmVyc2lvbnMgYmVmb3JlIEJJRkY4IC0tLSAqL1xuZnVuY3Rpb24gcGFyc2VfSW1EYXRhKGJsb2IpIHtcblx0dmFyIGNmID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgZW52ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgbGNiID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgbyA9IHtmbXQ6Y2YsIGVudjplbnYsIGxlbjpsY2IsIGRhdGE6YmxvYi5zbGljZShibG9iLmwsYmxvYi5sK2xjYil9O1xuXHRibG9iLmwgKz0gbGNiO1xuXHRyZXR1cm4gbztcbn1cblxuLyogQklGRjJfPz8/IHdoZXJlID8/PyBpcyB0aGUgbmFtZSBmcm9tIFtYTFNdICovXG5mdW5jdGlvbiBwYXJzZV9CSUZGMlNUUihibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0aWYob3B0cy5iaWZmZ3Vlc3MgJiYgb3B0cy5iaWZmID09IDUpIG9wdHMuYmlmZiA9IDI7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQ2VsbChibG9iLCA2KTtcblx0KytibG9iLmw7XG5cdHZhciBzdHIgPSBwYXJzZV9YTFVuaWNvZGVTdHJpbmcyKGJsb2IsIGxlbmd0aC03LCBvcHRzKTtcblx0Y2VsbC50ID0gJ3N0cic7XG5cdGNlbGwudmFsID0gc3RyO1xuXHRyZXR1cm4gY2VsbDtcbn1cblxuZnVuY3Rpb24gcGFyc2VfQklGRjJOVU0oYmxvYi8qOjosIGxlbmd0aCovKSB7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQ2VsbChibG9iLCA2KTtcblx0KytibG9iLmw7XG5cdHZhciBudW0gPSBwYXJzZV9YbnVtKGJsb2IsIDgpO1xuXHRjZWxsLnQgPSAnbic7XG5cdGNlbGwudmFsID0gbnVtO1xuXHRyZXR1cm4gY2VsbDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JJRkYyTlVNKHIvKjpudW1iZXIqLywgYy8qOm51bWJlciovLCB2YWwvKjpudW1iZXIqLykge1xuXHR2YXIgb3V0ID0gbmV3X2J1ZigxNSk7XG5cdHdyaXRlX0JJRkYyQ2VsbChvdXQsIHIsIGMpO1xuXHRvdXQud3JpdGVfc2hpZnQoOCwgdmFsLCAnZicpO1xuXHRyZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiBwYXJzZV9CSUZGMklOVChibG9iKSB7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQ2VsbChibG9iLCA2KTtcblx0KytibG9iLmw7XG5cdHZhciBudW0gPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdGNlbGwudCA9ICduJztcblx0Y2VsbC52YWwgPSBudW07XG5cdHJldHVybiBjZWxsO1xufVxuZnVuY3Rpb24gd3JpdGVfQklGRjJJTlQoci8qOm51bWJlciovLCBjLyo6bnVtYmVyKi8sIHZhbC8qOm51bWJlciovKSB7XG5cdHZhciBvdXQgPSBuZXdfYnVmKDkpO1xuXHR3cml0ZV9CSUZGMkNlbGwob3V0LCByLCBjKTtcblx0b3V0LndyaXRlX3NoaWZ0KDIsIHZhbCk7XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX0JJRkYyU1RSSU5HKGJsb2IpIHtcblx0dmFyIGNjaCA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0aWYoY2NoID09PSAwKSB7IGJsb2IubCsrOyByZXR1cm4gXCJcIjsgfVxuXHRyZXR1cm4gYmxvYi5yZWFkX3NoaWZ0KGNjaCwgJ3NiY3MtY29udCcpO1xufVxuXG4vKiBUT0RPOiBjb252ZXJ0IHRvIEJJRkY4IGZvbnQgc3RydWN0ICovXG5mdW5jdGlvbiBwYXJzZV9CSUZGMkZPTlRYVFJBKGJsb2IsIGxlbmd0aCkge1xuXHRibG9iLmwgKz0gNjsgLy8gdW5rbm93blxuXHRibG9iLmwgKz0gMjsgLy8gZm9udCB3ZWlnaHQgXCJibHNcIlxuXHRibG9iLmwgKz0gMTsgLy8gY2hhcnNldFxuXHRibG9iLmwgKz0gMzsgLy8gdW5rbm93blxuXHRibG9iLmwgKz0gMTsgLy8gZm9udCBmYW1pbHlcblx0YmxvYi5sICs9IGxlbmd0aCAtIDEzO1xufVxuXG4vKiBUT0RPOiBwYXJzZSByaWNoIHRleHQgcnVucyAqL1xuZnVuY3Rpb24gcGFyc2VfUlN0cmluZyhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNDZWxsKGJsb2IsIDYpO1xuXHR2YXIgY2NoID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgc3RyID0gcGFyc2VfWExVbmljb2RlU3RyaW5nTm9DY2goYmxvYiwgY2NoLCBvcHRzKTtcblx0YmxvYi5sID0gZW5kO1xuXHRjZWxsLnQgPSAnc3RyJztcblx0Y2VsbC52YWwgPSBzdHI7XG5cdHJldHVybiBjZWxsO1xufVxuLyogZnJvbSBqcy1oYXJiIChDKSAyMDE0LXByZXNlbnQgIFNoZWV0SlMgKi9cbnZhciBEQkZfU1VQUE9SVEVEX1ZFUlNJT05TID0gWzB4MDIsIDB4MDMsIDB4MzAsIDB4MzEsIDB4ODMsIDB4OEIsIDB4OEMsIDB4RjVdO1xudmFyIERCRiA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG52YXIgZGJmX2NvZGVwYWdlX21hcCA9IHtcblx0LyogQ29kZSBQYWdlcyBTdXBwb3J0ZWQgYnkgVmlzdWFsIEZveFBybyAqL1xuXHQvKjo6WyovMHgwMS8qOjpdKi86ICAgNDM3LCAgICAgICAgICAgLyo6OlsqLzB4MDIvKjo6XSovOiAgIDg1MCxcblx0Lyo6OlsqLzB4MDMvKjo6XSovOiAgMTI1MiwgICAgICAgICAgIC8qOjpbKi8weDA0Lyo6Ol0qLzogMTAwMDAsXG5cdC8qOjpbKi8weDY0Lyo6Ol0qLzogICA4NTIsICAgICAgICAgICAvKjo6WyovMHg2NS8qOjpdKi86ICAgODY2LFxuXHQvKjo6WyovMHg2Ni8qOjpdKi86ICAgODY1LCAgICAgICAgICAgLyo6OlsqLzB4NjcvKjo6XSovOiAgIDg2MSxcblx0Lyo6OlsqLzB4NjgvKjo6XSovOiAgIDg5NSwgICAgICAgICAgIC8qOjpbKi8weDY5Lyo6Ol0qLzogICA2MjAsXG5cdC8qOjpbKi8weDZBLyo6Ol0qLzogICA3MzcsICAgICAgICAgICAvKjo6WyovMHg2Qi8qOjpdKi86ICAgODU3LFxuXHQvKjo6WyovMHg3OC8qOjpdKi86ICAgOTUwLCAgICAgICAgICAgLyo6OlsqLzB4NzkvKjo6XSovOiAgIDk0OSxcblx0Lyo6OlsqLzB4N0EvKjo6XSovOiAgIDkzNiwgICAgICAgICAgIC8qOjpbKi8weDdCLyo6Ol0qLzogICA5MzIsXG5cdC8qOjpbKi8weDdDLyo6Ol0qLzogICA4NzQsICAgICAgICAgICAvKjo6WyovMHg3RC8qOjpdKi86ICAxMjU1LFxuXHQvKjo6WyovMHg3RS8qOjpdKi86ICAxMjU2LCAgICAgICAgICAgLyo6OlsqLzB4OTYvKjo6XSovOiAxMDAwNyxcblx0Lyo6OlsqLzB4OTcvKjo6XSovOiAxMDAyOSwgICAgICAgICAgIC8qOjpbKi8weDk4Lyo6Ol0qLzogMTAwMDYsXG5cdC8qOjpbKi8weEM4Lyo6Ol0qLzogIDEyNTAsICAgICAgICAgICAvKjo6WyovMHhDOS8qOjpdKi86ICAxMjUxLFxuXHQvKjo6WyovMHhDQS8qOjpdKi86ICAxMjU0LCAgICAgICAgICAgLyo6OlsqLzB4Q0IvKjo6XSovOiAgMTI1MyxcblxuXHQvKiBzaGFwZWZpbGUgREJGIGV4dGVuc2lvbiAqL1xuXHQvKjo6WyovMHgwMC8qOjpdKi86IDIwMTI3LCAgICAgICAgICAgLyo6OlsqLzB4MDgvKjo6XSovOiAgIDg2NSxcblx0Lyo6OlsqLzB4MDkvKjo6XSovOiAgIDQzNywgICAgICAgICAgIC8qOjpbKi8weDBBLyo6Ol0qLzogICA4NTAsXG5cdC8qOjpbKi8weDBCLyo6Ol0qLzogICA0MzcsICAgICAgICAgICAvKjo6WyovMHgwRC8qOjpdKi86ICAgNDM3LFxuXHQvKjo6WyovMHgwRS8qOjpdKi86ICAgODUwLCAgICAgICAgICAgLyo6OlsqLzB4MEYvKjo6XSovOiAgIDQzNyxcblx0Lyo6OlsqLzB4MTAvKjo6XSovOiAgIDg1MCwgICAgICAgICAgIC8qOjpbKi8weDExLyo6Ol0qLzogICA0MzcsXG5cdC8qOjpbKi8weDEyLyo6Ol0qLzogICA4NTAsICAgICAgICAgICAvKjo6WyovMHgxMy8qOjpdKi86ICAgOTMyLFxuXHQvKjo6WyovMHgxNC8qOjpdKi86ICAgODUwLCAgICAgICAgICAgLyo6OlsqLzB4MTUvKjo6XSovOiAgIDQzNyxcblx0Lyo6OlsqLzB4MTYvKjo6XSovOiAgIDg1MCwgICAgICAgICAgIC8qOjpbKi8weDE3Lyo6Ol0qLzogICA4NjUsXG5cdC8qOjpbKi8weDE4Lyo6Ol0qLzogICA0MzcsICAgICAgICAgICAvKjo6WyovMHgxOS8qOjpdKi86ICAgNDM3LFxuXHQvKjo6WyovMHgxQS8qOjpdKi86ICAgODUwLCAgICAgICAgICAgLyo6OlsqLzB4MUIvKjo6XSovOiAgIDQzNyxcblx0Lyo6OlsqLzB4MUMvKjo6XSovOiAgIDg2MywgICAgICAgICAgIC8qOjpbKi8weDFELyo6Ol0qLzogICA4NTAsXG5cdC8qOjpbKi8weDFGLyo6Ol0qLzogICA4NTIsICAgICAgICAgICAvKjo6WyovMHgyMi8qOjpdKi86ICAgODUyLFxuXHQvKjo6WyovMHgyMy8qOjpdKi86ICAgODUyLCAgICAgICAgICAgLyo6OlsqLzB4MjQvKjo6XSovOiAgIDg2MCxcblx0Lyo6OlsqLzB4MjUvKjo6XSovOiAgIDg1MCwgICAgICAgICAgIC8qOjpbKi8weDI2Lyo6Ol0qLzogICA4NjYsXG5cdC8qOjpbKi8weDM3Lyo6Ol0qLzogICA4NTAsICAgICAgICAgICAvKjo6WyovMHg0MC8qOjpdKi86ICAgODUyLFxuXHQvKjo6WyovMHg0RC8qOjpdKi86ICAgOTM2LCAgICAgICAgICAgLyo6OlsqLzB4NEUvKjo6XSovOiAgIDk0OSxcblx0Lyo6OlsqLzB4NEYvKjo6XSovOiAgIDk1MCwgICAgICAgICAgIC8qOjpbKi8weDUwLyo6Ol0qLzogICA4NzQsXG5cdC8qOjpbKi8weDU3Lyo6Ol0qLzogIDEyNTIsICAgICAgICAgICAvKjo6WyovMHg1OC8qOjpdKi86ICAxMjUyLFxuXHQvKjo6WyovMHg1OS8qOjpdKi86ICAxMjUyLCAgICAgICAgICAgLyo6OlsqLzB4NkMvKjo6XSovOiAgIDg2Myxcblx0Lyo6OlsqLzB4ODYvKjo6XSovOiAgIDczNywgICAgICAgICAgIC8qOjpbKi8weDg3Lyo6Ol0qLzogICA4NTIsXG5cdC8qOjpbKi8weDg4Lyo6Ol0qLzogICA4NTcsICAgICAgICAgICAvKjo6WyovMHhDQy8qOjpdKi86ICAxMjU3LFxuXG5cdC8qOjpbKi8weEZGLyo6Ol0qLzogMTY5Njlcbn07XG52YXIgZGJmX3JldmVyc2VfbWFwID0gZXZlcnQoe1xuXHQvKjo6WyovMHgwMS8qOjpdKi86ICAgNDM3LCAgICAgICAgICAgLyo6OlsqLzB4MDIvKjo6XSovOiAgIDg1MCxcblx0Lyo6OlsqLzB4MDMvKjo6XSovOiAgMTI1MiwgICAgICAgICAgIC8qOjpbKi8weDA0Lyo6Ol0qLzogMTAwMDAsXG5cdC8qOjpbKi8weDY0Lyo6Ol0qLzogICA4NTIsICAgICAgICAgICAvKjo6WyovMHg2NS8qOjpdKi86ICAgODY2LFxuXHQvKjo6WyovMHg2Ni8qOjpdKi86ICAgODY1LCAgICAgICAgICAgLyo6OlsqLzB4NjcvKjo6XSovOiAgIDg2MSxcblx0Lyo6OlsqLzB4NjgvKjo6XSovOiAgIDg5NSwgICAgICAgICAgIC8qOjpbKi8weDY5Lyo6Ol0qLzogICA2MjAsXG5cdC8qOjpbKi8weDZBLyo6Ol0qLzogICA3MzcsICAgICAgICAgICAvKjo6WyovMHg2Qi8qOjpdKi86ICAgODU3LFxuXHQvKjo6WyovMHg3OC8qOjpdKi86ICAgOTUwLCAgICAgICAgICAgLyo6OlsqLzB4NzkvKjo6XSovOiAgIDk0OSxcblx0Lyo6OlsqLzB4N0EvKjo6XSovOiAgIDkzNiwgICAgICAgICAgIC8qOjpbKi8weDdCLyo6Ol0qLzogICA5MzIsXG5cdC8qOjpbKi8weDdDLyo6Ol0qLzogICA4NzQsICAgICAgICAgICAvKjo6WyovMHg3RC8qOjpdKi86ICAxMjU1LFxuXHQvKjo6WyovMHg3RS8qOjpdKi86ICAxMjU2LCAgICAgICAgICAgLyo6OlsqLzB4OTYvKjo6XSovOiAxMDAwNyxcblx0Lyo6OlsqLzB4OTcvKjo6XSovOiAxMDAyOSwgICAgICAgICAgIC8qOjpbKi8weDk4Lyo6Ol0qLzogMTAwMDYsXG5cdC8qOjpbKi8weEM4Lyo6Ol0qLzogIDEyNTAsICAgICAgICAgICAvKjo6WyovMHhDOS8qOjpdKi86ICAxMjUxLFxuXHQvKjo6WyovMHhDQS8qOjpdKi86ICAxMjU0LCAgICAgICAgICAgLyo6OlsqLzB4Q0IvKjo6XSovOiAgMTI1Myxcblx0Lyo6OlsqLzB4MDAvKjo6XSovOiAyMDEyN1xufSk7XG4vKiBUT0RPOiBmaW5kIGFuIGFjdHVhbCBzcGVjaWZpY2F0aW9uICovXG5mdW5jdGlvbiBkYmZfdG9fYW9hKGJ1Ziwgb3B0cykvKjpBT0EqLyB7XG5cdHZhciBvdXQvKjpBT0EqLyA9IFtdO1xuXHR2YXIgZC8qOkJsb2NrKi8gPSAobmV3X3Jhd19idWYoMSkvKjphbnkqLyk7XG5cdHN3aXRjaChvcHRzLnR5cGUpIHtcblx0XHRjYXNlICdiYXNlNjQnOiBkID0gczJhKEJhc2U2NF9kZWNvZGUoYnVmKSk7IGJyZWFrO1xuXHRcdGNhc2UgJ2JpbmFyeSc6IGQgPSBzMmEoYnVmKTsgYnJlYWs7XG5cdFx0Y2FzZSAnYnVmZmVyJzpcblx0XHRjYXNlICdhcnJheSc6IGQgPSBidWY7IGJyZWFrO1xuXHR9XG5cdHByZXBfYmxvYihkLCAwKTtcblxuXHQvKiBoZWFkZXIgKi9cblx0dmFyIGZ0ID0gZC5yZWFkX3NoaWZ0KDEpO1xuXHR2YXIgbWVtbyA9ICEhKGZ0ICYgMHg4OCk7XG5cdHZhciB2ZnAgPSBmYWxzZSwgbDcgPSBmYWxzZTtcblx0c3dpdGNoKGZ0KSB7XG5cdFx0Y2FzZSAweDAyOiBicmVhazsgLy8gZEJBU0UgSUlcblx0XHRjYXNlIDB4MDM6IGJyZWFrOyAvLyBkQkFTRSBJSUlcblx0XHRjYXNlIDB4MzA6IHZmcCA9IHRydWU7IG1lbW8gPSB0cnVlOyBicmVhazsgLy8gVkZQXG5cdFx0Y2FzZSAweDMxOiB2ZnAgPSB0cnVlOyBtZW1vID0gdHJ1ZTsgYnJlYWs7IC8vIFZGUCB3aXRoIGF1dG9pbmNyZW1lbnRcblx0XHQvLyAweDQzIGRCQVNFIElWIFNRTCB0YWJsZSBmaWxlc1xuXHRcdC8vIDB4NjMgZEJBU0UgSVYgU1FMIHN5c3RlbSBmaWxlc1xuXHRcdGNhc2UgMHg4MzogYnJlYWs7IC8vIGRCQVNFIElJSSB3aXRoIG1lbW9cblx0XHRjYXNlIDB4OEI6IGJyZWFrOyAvLyBkQkFTRSBJViB3aXRoIG1lbW9cblx0XHRjYXNlIDB4OEM6IGw3ID0gdHJ1ZTsgYnJlYWs7IC8vIGRCQVNFIExldmVsIDcgd2l0aCBtZW1vXG5cdFx0Ly8gY2FzZSAweENCIGRCQVNFIElWIFNRTCB0YWJsZSBmaWxlcyB3aXRoIG1lbW9cblx0XHRjYXNlIDB4RjU6IGJyZWFrOyAvLyBGb3hQcm8gMi54IHdpdGggbWVtb1xuXHRcdC8vIGNhc2UgMHhGQiBGb3hCQVNFXG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiREJGIFVuc3VwcG9ydGVkIFZlcnNpb246IFwiICsgZnQudG9TdHJpbmcoMTYpKTtcblx0fVxuXG5cdHZhciBucm93ID0gMCwgZnBvcyA9IDB4MDIwOTtcblx0aWYoZnQgPT0gMHgwMikgbnJvdyA9IGQucmVhZF9zaGlmdCgyKTtcblx0ZC5sICs9IDM7IC8vIGRCQVNFIElJIHN0b3JlcyBERE1NWVkgZGF0ZSwgb3RoZXJzIHVzZSBZWU1NRERcblx0aWYoZnQgIT0gMHgwMikgbnJvdyA9IGQucmVhZF9zaGlmdCg0KTtcblx0aWYobnJvdyA+IDEwNDg1NzYpIG5yb3cgPSAxZTY7XG5cblx0aWYoZnQgIT0gMHgwMikgZnBvcyA9IGQucmVhZF9zaGlmdCgyKTsgLy8gaGVhZGVyIGxlbmd0aFxuXHR2YXIgcmxlbiA9IGQucmVhZF9zaGlmdCgyKTsgLy8gcmVjb3JkIGxlbmd0aFxuXG5cdHZhciAvKmZsYWdzID0gMCwqLyBjdXJyZW50X2NwID0gb3B0cy5jb2RlcGFnZSB8fCAxMjUyO1xuXHRpZihmdCAhPSAweDAyKSB7IC8vIDIwIHJlc2VydmVkIGJ5dGVzXG5cdFx0ZC5sKz0xNjtcblx0XHQvKmZsYWdzID0gKi9kLnJlYWRfc2hpZnQoMSk7XG5cdFx0Ly9pZihtZW1vICYmICgoZmxhZ3MgJiAweDAyKSA9PT0gMCkpIHRocm93IG5ldyBFcnJvcihcIkRCRiBGbGFncyBcIiArIGZsYWdzLnRvU3RyaW5nKDE2KSArIFwiIGZ0IFwiICsgZnQudG9TdHJpbmcoMTYpKTtcblxuXHRcdC8qIGNvZGVwYWdlIHByZXNlbnQgaW4gRm94UHJvIGFuZCBkQkFTRSBMZXZlbCA3ICovXG5cdFx0aWYoZFtkLmxdICE9PSAwKSBjdXJyZW50X2NwID0gZGJmX2NvZGVwYWdlX21hcFtkW2QubF1dO1xuXHRcdGQubCs9MTtcblxuXHRcdGQubCs9Mjtcblx0fVxuXHRpZihsNykgZC5sICs9IDM2OyAvLyBMZXZlbCA3OiAzMiBieXRlIFwiTGFuZ3VhZ2UgZHJpdmVyIG5hbWVcIiwgNCBieXRlIHJlc2VydmVkXG5cbi8qOjogdHlwZSBEQkZGaWVsZCA9IHsgbmFtZTpzdHJpbmc7IGxlbjpudW1iZXI7IHR5cGU6c3RyaW5nOyB9ICovXG5cdHZhciBmaWVsZHMvKjpBcnJheTxEQkZGaWVsZD4qLyA9IFtdLCBmaWVsZC8qOkRCRkZpZWxkKi8gPSAoe30vKjphbnkqLyk7XG5cdHZhciBoZW5kID0gTWF0aC5taW4oZC5sZW5ndGgsIChmdCA9PSAweDAyID8gMHgyMDkgOiAoZnBvcyAtIDEwIC0gKHZmcCA/IDI2NCA6IDApKSkpO1xuXHR2YXIgd3cgPSBsNyA/IDMyIDogMTE7XG5cdHdoaWxlKGQubCA8IGhlbmQgJiYgZFtkLmxdICE9IDB4MGQpIHtcblx0XHRmaWVsZCA9ICh7fS8qOmFueSovKTtcblx0XHRmaWVsZC5uYW1lID0gJGNwdGFibGUudXRpbHMuZGVjb2RlKGN1cnJlbnRfY3AsIGQuc2xpY2UoZC5sLCBkLmwrd3cpKS5yZXBsYWNlKC9bXFx1MDAwMFxcclxcbl0uKiQvZyxcIlwiKTtcblx0XHRkLmwgKz0gd3c7XG5cdFx0ZmllbGQudHlwZSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoZC5yZWFkX3NoaWZ0KDEpKTtcblx0XHRpZihmdCAhPSAweDAyICYmICFsNykgZmllbGQub2Zmc2V0ID0gZC5yZWFkX3NoaWZ0KDQpO1xuXHRcdGZpZWxkLmxlbiA9IGQucmVhZF9zaGlmdCgxKTtcblx0XHRpZihmdCA9PSAweDAyKSBmaWVsZC5vZmZzZXQgPSBkLnJlYWRfc2hpZnQoMik7XG5cdFx0ZmllbGQuZGVjID0gZC5yZWFkX3NoaWZ0KDEpO1xuXHRcdGlmKGZpZWxkLm5hbWUubGVuZ3RoKSBmaWVsZHMucHVzaChmaWVsZCk7XG5cdFx0aWYoZnQgIT0gMHgwMikgZC5sICs9IGw3ID8gMTMgOiAxNDtcblx0XHRzd2l0Y2goZmllbGQudHlwZSkge1xuXHRcdFx0Y2FzZSAnQic6IC8vIERvdWJsZSAoVkZQKSAvIEJpbmFyeSAoZEJBU0UgTDcpXG5cdFx0XHRcdGlmKCghdmZwIHx8IGZpZWxkLmxlbiAhPSA4KSAmJiBvcHRzLldURikgY29uc29sZS5sb2coJ1NraXBwaW5nICcgKyBmaWVsZC5uYW1lICsgJzonICsgZmllbGQudHlwZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnRyc6IC8vIEdlbmVyYWwgKEZveFBybyBhbmQgZEJBU0UgTDcpXG5cdFx0XHRjYXNlICdQJzogLy8gUGljdHVyZSAoRm94UHJvIGFuZCBkQkFTRSBMNylcblx0XHRcdFx0aWYob3B0cy5XVEYpIGNvbnNvbGUubG9nKCdTa2lwcGluZyAnICsgZmllbGQubmFtZSArICc6JyArIGZpZWxkLnR5cGUpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJysnOiAvLyBBdXRvaW5jcmVtZW50IChkQkFTRSBMNyBvbmx5KVxuXHRcdFx0Y2FzZSAnMCc6IC8vIF9OdWxsRmxhZ3MgKFZGUCBvbmx5KVxuXHRcdFx0Y2FzZSAnQCc6IC8vIFRpbWVzdGFtcCAoZEJBU0UgTDcgb25seSlcblx0XHRcdGNhc2UgJ0MnOiAvLyBDaGFyYWN0ZXIgKGRCQVNFIElJKVxuXHRcdFx0Y2FzZSAnRCc6IC8vIERhdGUgKGRCQVNFIElJSSlcblx0XHRcdGNhc2UgJ0YnOiAvLyBGbG9hdCAoZEJBU0UgSVYpXG5cdFx0XHRjYXNlICdJJzogLy8gTG9uZyAoVkZQIGFuZCBkQkFTRSBMNylcblx0XHRcdGNhc2UgJ0wnOiAvLyBMb2dpY2FsIChkQkFTRSBJSSlcblx0XHRcdGNhc2UgJ00nOiAvLyBNZW1vIChkQkFTRSBJSUkpXG5cdFx0XHRjYXNlICdOJzogLy8gTnVtYmVyIChkQkFTRSBJSSlcblx0XHRcdGNhc2UgJ08nOiAvLyBEb3VibGUgKGRCQVNFIEw3IG9ubHkpXG5cdFx0XHRjYXNlICdUJzogLy8gRGF0ZXRpbWUgKFZGUCBvbmx5KVxuXHRcdFx0Y2FzZSAnWSc6IC8vIEN1cnJlbmN5IChWRlAgb25seSlcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gRmllbGQgVHlwZTogJyArIGZpZWxkLnR5cGUpO1xuXHRcdH1cblx0fVxuXG5cdGlmKGRbZC5sXSAhPT0gMHgwRCkgZC5sID0gZnBvcy0xO1xuXHRpZihkLnJlYWRfc2hpZnQoMSkgIT09IDB4MEQpIHRocm93IG5ldyBFcnJvcihcIkRCRiBUZXJtaW5hdG9yIG5vdCBmb3VuZCBcIiArIGQubCArIFwiIFwiICsgZFtkLmxdKTtcblx0ZC5sID0gZnBvcztcblxuXHQvKiBkYXRhICovXG5cdHZhciBSID0gMCwgQyA9IDA7XG5cdG91dFswXSA9IFtdO1xuXHRmb3IoQyA9IDA7IEMgIT0gZmllbGRzLmxlbmd0aDsgKytDKSBvdXRbMF1bQ10gPSBmaWVsZHNbQ10ubmFtZTtcblx0d2hpbGUobnJvdy0tID4gMCkge1xuXHRcdGlmKGRbZC5sXSA9PT0gMHgyQSkge1xuXHRcdFx0Ly8gVE9ETzogcmVjb3JkIG1hcmtlZCBhcyBkZWxldGVkIC0tIGNyZWF0ZSBhIGhpZGRlbiByb3c/XG5cdFx0XHRkLmwrPXJsZW47XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0KytkLmw7XG5cdFx0b3V0WysrUl0gPSBbXTsgQyA9IDA7XG5cdFx0Zm9yKEMgPSAwOyBDICE9IGZpZWxkcy5sZW5ndGg7ICsrQykge1xuXHRcdFx0dmFyIGRkID0gZC5zbGljZShkLmwsIGQubCtmaWVsZHNbQ10ubGVuKTsgZC5sKz1maWVsZHNbQ10ubGVuO1xuXHRcdFx0cHJlcF9ibG9iKGRkLCAwKTtcblx0XHRcdHZhciBzID0gJGNwdGFibGUudXRpbHMuZGVjb2RlKGN1cnJlbnRfY3AsIGRkKTtcblx0XHRcdHN3aXRjaChmaWVsZHNbQ10udHlwZSkge1xuXHRcdFx0XHRjYXNlICdDJzpcblx0XHRcdFx0XHQvLyBOT1RFOiBpdCBpcyBjb252ZW50aW9uYWwgdG8gd3JpdGUgJyAgLyAgLyAgJyBmb3IgZW1wdHkgZGF0ZXNcblx0XHRcdFx0XHRpZihzLnRyaW0oKS5sZW5ndGgpIG91dFtSXVtDXSA9IHMucmVwbGFjZSgvXFxzKyQvLFwiXCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdEJzpcblx0XHRcdFx0XHRpZihzLmxlbmd0aCA9PT0gOCkgb3V0W1JdW0NdID0gbmV3IERhdGUoK3Muc2xpY2UoMCw0KSwgK3Muc2xpY2UoNCw2KS0xLCArcy5zbGljZSg2LDgpKTtcblx0XHRcdFx0XHRlbHNlIG91dFtSXVtDXSA9IHM7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0YnOiBvdXRbUl1bQ10gPSBwYXJzZUZsb2F0KHMudHJpbSgpKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJysnOiBjYXNlICdJJzogb3V0W1JdW0NdID0gbDcgPyBkZC5yZWFkX3NoaWZ0KC00LCAnaScpIF4gMHg4MDAwMDAwMCA6IGRkLnJlYWRfc2hpZnQoNCwgJ2knKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0wnOiBzd2l0Y2gocy50cmltKCkudG9VcHBlckNhc2UoKSkge1xuXHRcdFx0XHRcdGNhc2UgJ1knOiBjYXNlICdUJzogb3V0W1JdW0NdID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnTic6IGNhc2UgJ0YnOiBvdXRbUl1bQ10gPSBmYWxzZTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnJzogY2FzZSAnPyc6IGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIkRCRiBVbnJlY29nbml6ZWQgTDp8XCIgKyBzICsgXCJ8XCIpO1xuXHRcdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ00nOiAvKiBUT0RPOiBoYW5kbGUgbWVtbyBmaWxlcyAqL1xuXHRcdFx0XHRcdGlmKCFtZW1vKSB0aHJvdyBuZXcgRXJyb3IoXCJEQkYgVW5leHBlY3RlZCBNRU1PIGZvciB0eXBlIFwiICsgZnQudG9TdHJpbmcoMTYpKTtcblx0XHRcdFx0XHRvdXRbUl1bQ10gPSBcIiMjTUVNTyMjXCIgKyAobDcgPyBwYXJzZUludChzLnRyaW0oKSwgMTApOiBkZC5yZWFkX3NoaWZ0KDQpKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnTic6XG5cdFx0XHRcdFx0cyA9IHMucmVwbGFjZSgvXFx1MDAwMC9nLFwiXCIpLnRyaW0oKTtcblx0XHRcdFx0XHQvLyBOT1RFOiBkQkFTRSBJSSBpbnRlcnByZXRzIFwiICAuICBcIiBhcyAwXG5cdFx0XHRcdFx0aWYocyAmJiBzICE9IFwiLlwiKSBvdXRbUl1bQ10gPSArcyB8fCAwOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnQCc6XG5cdFx0XHRcdFx0Ly8gTk9URTogZEJBU0Ugc3BlY3MgYXBwZWFyIHRvIGJlIGluY29ycmVjdFxuXHRcdFx0XHRcdG91dFtSXVtDXSA9IG5ldyBEYXRlKGRkLnJlYWRfc2hpZnQoLTgsICdmJykgLSAweDM4ODMxNzUzMzQwMCk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1QnOiBvdXRbUl1bQ10gPSBuZXcgRGF0ZSgoZGQucmVhZF9zaGlmdCg0KSAtIDB4MjUzRDhDKSAqIDB4NTI2NUMwMCArIGRkLnJlYWRfc2hpZnQoNCkpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnWSc6IG91dFtSXVtDXSA9IGRkLnJlYWRfc2hpZnQoNCwnaScpLzFlNCArIChkZC5yZWFkX3NoaWZ0KDQsICdpJykvMWU0KSpNYXRoLnBvdygyLDMyKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ08nOiBvdXRbUl1bQ10gPSAtZGQucmVhZF9zaGlmdCgtOCwgJ2YnKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0InOiBpZih2ZnAgJiYgZmllbGRzW0NdLmxlbiA9PSA4KSB7IG91dFtSXVtDXSA9IGRkLnJlYWRfc2hpZnQoOCwnZicpOyBicmVhazsgfVxuXHRcdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdFx0Y2FzZSAnRyc6IGNhc2UgJ1AnOiBkZC5sICs9IGZpZWxkc1tDXS5sZW47IGJyZWFrO1xuXHRcdFx0XHRjYXNlICcwJzpcblx0XHRcdFx0XHRpZihmaWVsZHNbQ10ubmFtZSA9PT0gJ19OdWxsRmxhZ3MnKSBicmVhaztcblx0XHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIkRCRiBVbnN1cHBvcnRlZCBkYXRhIHR5cGUgXCIgKyBmaWVsZHNbQ10udHlwZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdGlmKGZ0ICE9IDB4MDIpIGlmKGQubCA8IGQubGVuZ3RoICYmIGRbZC5sKytdICE9IDB4MUEpIHRocm93IG5ldyBFcnJvcihcIkRCRiBFT0YgTWFya2VyIG1pc3NpbmcgXCIgKyAoZC5sLTEpICsgXCIgb2YgXCIgKyBkLmxlbmd0aCArIFwiIFwiICsgZFtkLmwtMV0udG9TdHJpbmcoMTYpKTtcblx0aWYob3B0cyAmJiBvcHRzLnNoZWV0Um93cykgb3V0ID0gb3V0LnNsaWNlKDAsIG9wdHMuc2hlZXRSb3dzKTtcblx0b3B0cy5EQkYgPSBmaWVsZHM7XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIGRiZl90b19zaGVldChidWYsIG9wdHMpLyo6V29ya3NoZWV0Ki8ge1xuXHR2YXIgbyA9IG9wdHMgfHwge307XG5cdGlmKCFvLmRhdGVORikgby5kYXRlTkYgPSBcInl5eXltbWRkXCI7XG5cdHZhciB3cyA9IGFvYV90b19zaGVldChkYmZfdG9fYW9hKGJ1ZiwgbyksIG8pO1xuXHR3c1tcIiFjb2xzXCJdID0gby5EQkYubWFwKGZ1bmN0aW9uKGZpZWxkKSB7IHJldHVybiB7XG5cdFx0d2NoOiBmaWVsZC5sZW4sXG5cdFx0REJGOiBmaWVsZFxuXHR9O30pO1xuXHRkZWxldGUgby5EQkY7XG5cdHJldHVybiB3cztcbn1cblxuZnVuY3Rpb24gZGJmX3RvX3dvcmtib29rKGJ1Ziwgb3B0cykvKjpXb3JrYm9vayovIHtcblx0dHJ5IHsgcmV0dXJuIHNoZWV0X3RvX3dvcmtib29rKGRiZl90b19zaGVldChidWYsIG9wdHMpLCBvcHRzKTsgfVxuXHRjYXRjaChlKSB7IGlmKG9wdHMgJiYgb3B0cy5XVEYpIHRocm93IGU7IH1cblx0cmV0dXJuICh7U2hlZXROYW1lczpbXSxTaGVldHM6e319KTtcbn1cblxudmFyIF9STEVOID0geyAnQic6IDgsICdDJzogMjUwLCAnTCc6IDEsICdEJzogOCwgJz8nOiAwLCAnJzogMCB9O1xuZnVuY3Rpb24gc2hlZXRfdG9fZGJmKHdzLyo6V29ya3NoZWV0Ki8sIG9wdHMvKjpXcml0ZU9wdHMqLykge1xuXHR2YXIgbyA9IG9wdHMgfHwge307XG5cdGlmKCtvLmNvZGVwYWdlID49IDApIHNldF9jcCgrby5jb2RlcGFnZSk7XG5cdGlmKG8udHlwZSA9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgd3JpdGUgREJGIHRvIEpTIHN0cmluZ1wiKTtcblx0dmFyIGJhID0gYnVmX2FycmF5KCk7XG5cdHZhciBhb2EvKjpBT0EqLyA9IHNoZWV0X3RvX2pzb24od3MsIHtoZWFkZXI6MSwgcmF3OnRydWUsIGNlbGxEYXRlczp0cnVlfSk7XG5cdHZhciBoZWFkZXJzID0gYW9hWzBdLCBkYXRhID0gYW9hLnNsaWNlKDEpLCBjb2xzID0gd3NbXCIhY29sc1wiXSB8fCBbXTtcblx0dmFyIGkgPSAwLCBqID0gMCwgaGNudCA9IDAsIHJsZW4gPSAxO1xuXHRmb3IoaSA9IDA7IGkgPCBoZWFkZXJzLmxlbmd0aDsgKytpKSB7XG5cdFx0aWYoKChjb2xzW2ldfHx7fSkuREJGfHx7fSkubmFtZSkgeyBoZWFkZXJzW2ldID0gY29sc1tpXS5EQkYubmFtZTsgKytoY250OyBjb250aW51ZTsgfVxuXHRcdGlmKGhlYWRlcnNbaV0gPT0gbnVsbCkgY29udGludWU7XG5cdFx0KytoY250O1xuXHRcdGlmKHR5cGVvZiBoZWFkZXJzW2ldID09PSAnbnVtYmVyJykgaGVhZGVyc1tpXSA9IGhlYWRlcnNbaV0udG9TdHJpbmcoMTApO1xuXHRcdGlmKHR5cGVvZiBoZWFkZXJzW2ldICE9PSAnc3RyaW5nJykgdGhyb3cgbmV3IEVycm9yKFwiREJGIEludmFsaWQgY29sdW1uIG5hbWUgXCIgKyBoZWFkZXJzW2ldICsgXCIgfFwiICsgKHR5cGVvZiBoZWFkZXJzW2ldKSArIFwifFwiKTtcblx0XHRpZihoZWFkZXJzLmluZGV4T2YoaGVhZGVyc1tpXSkgIT09IGkpIGZvcihqPTA7IGo8MTAyNDsrK2opXG5cdFx0XHRpZihoZWFkZXJzLmluZGV4T2YoaGVhZGVyc1tpXSArIFwiX1wiICsgaikgPT0gLTEpIHsgaGVhZGVyc1tpXSArPSBcIl9cIiArIGo7IGJyZWFrOyB9XG5cdH1cblx0dmFyIHJhbmdlID0gc2FmZV9kZWNvZGVfcmFuZ2Uod3NbJyFyZWYnXSk7XG5cdHZhciBjb2x0eXBlcy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgY29sd2lkdGhzLyo6QXJyYXk8bnVtYmVyPiovID0gW107XG5cdHZhciBjb2xkZWNpbWFscy8qOkFycmF5PG51bWJlcj4qLyA9IFtdO1xuXHRmb3IoaSA9IDA7IGkgPD0gcmFuZ2UuZS5jIC0gcmFuZ2Uucy5jOyArK2kpIHtcblx0XHR2YXIgZ3Vlc3MgPSAnJywgX2d1ZXNzID0gJycsIG1heGxlbiA9IDA7XG5cdFx0dmFyIGNvbC8qOkFycmF5PGFueT4qLyA9IFtdO1xuXHRcdGZvcihqPTA7IGogPCBkYXRhLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRpZihkYXRhW2pdW2ldICE9IG51bGwpIGNvbC5wdXNoKGRhdGFbal1baV0pO1xuXHRcdH1cblx0XHRpZihjb2wubGVuZ3RoID09IDAgfHwgaGVhZGVyc1tpXSA9PSBudWxsKSB7IGNvbHR5cGVzW2ldID0gJz8nOyBjb250aW51ZTsgfVxuXHRcdGZvcihqID0gMDsgaiA8IGNvbC5sZW5ndGg7ICsraikge1xuXHRcdFx0c3dpdGNoKHR5cGVvZiBjb2xbal0pIHtcblx0XHRcdFx0LyogVE9ETzogY2hlY2sgaWYgTDIgY29tcGF0IGlzIGRlc2lyZWQgKi9cblx0XHRcdFx0Y2FzZSAnbnVtYmVyJzogX2d1ZXNzID0gJ0InOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnc3RyaW5nJzogX2d1ZXNzID0gJ0MnOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnYm9vbGVhbic6IF9ndWVzcyA9ICdMJzsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ29iamVjdCc6IF9ndWVzcyA9IGNvbFtqXSBpbnN0YW5jZW9mIERhdGUgPyAnRCcgOiAnQyc7IGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OiBfZ3Vlc3MgPSAnQyc7XG5cdFx0XHR9XG5cdFx0XHRtYXhsZW4gPSBNYXRoLm1heChtYXhsZW4sIFN0cmluZyhjb2xbal0pLmxlbmd0aCk7XG5cdFx0XHRndWVzcyA9IGd1ZXNzICYmIGd1ZXNzICE9IF9ndWVzcyA/ICdDJyA6IF9ndWVzcztcblx0XHRcdC8vaWYoZ3Vlc3MgPT0gJ0MnKSBicmVhaztcblx0XHR9XG5cdFx0aWYobWF4bGVuID4gMjUwKSBtYXhsZW4gPSAyNTA7XG5cdFx0X2d1ZXNzID0gKChjb2xzW2ldfHx7fSkuREJGfHx7fSkudHlwZTtcblx0XHQvKiBUT0RPOiBtb3JlIGZpbmUgZ3JhaW5lZCBjb250cm9sIG92ZXIgREJGIHR5cGUgcmVzb2x1dGlvbiAqL1xuXHRcdGlmKF9ndWVzcyA9PSAnQycpIHtcblx0XHRcdGlmKGNvbHNbaV0uREJGLmxlbiA+IG1heGxlbikgbWF4bGVuID0gY29sc1tpXS5EQkYubGVuO1xuXHRcdH1cblx0XHRpZihndWVzcyA9PSAnQicgJiYgX2d1ZXNzID09ICdOJykge1xuXHRcdFx0Z3Vlc3MgPSAnTic7XG5cdFx0XHRjb2xkZWNpbWFsc1tpXSA9IGNvbHNbaV0uREJGLmRlYztcblx0XHRcdG1heGxlbiA9IGNvbHNbaV0uREJGLmxlbjtcblx0XHR9XG5cdFx0Y29sd2lkdGhzW2ldID0gZ3Vlc3MgPT0gJ0MnIHx8IF9ndWVzcyA9PSAnTicgPyBtYXhsZW4gOiAoX1JMRU5bZ3Vlc3NdIHx8IDApO1xuXHRcdHJsZW4gKz0gY29sd2lkdGhzW2ldO1xuXHRcdGNvbHR5cGVzW2ldID0gZ3Vlc3M7XG5cdH1cblxuXHR2YXIgaCA9IGJhLm5leHQoMzIpO1xuXHRoLndyaXRlX3NoaWZ0KDQsIDB4MTMwMjExMzApO1xuXHRoLndyaXRlX3NoaWZ0KDQsIGRhdGEubGVuZ3RoKTtcblx0aC53cml0ZV9zaGlmdCgyLCAyOTYgKyAzMiAqIGhjbnQpO1xuXHRoLndyaXRlX3NoaWZ0KDIsIHJsZW4pO1xuXHRmb3IoaT0wOyBpIDwgNDsgKytpKSBoLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRoLndyaXRlX3NoaWZ0KDQsIDB4MDAwMDAwMDAgfCAoKCtkYmZfcmV2ZXJzZV9tYXBbLyo6OlN0cmluZygqL2N1cnJlbnRfYW5zaS8qOjopKi9dIHx8IDB4MDMpPDw4KSk7XG5cblx0Zm9yKGkgPSAwLCBqID0gMDsgaSA8IGhlYWRlcnMubGVuZ3RoOyArK2kpIHtcblx0XHRpZihoZWFkZXJzW2ldID09IG51bGwpIGNvbnRpbnVlO1xuXHRcdHZhciBoZiA9IGJhLm5leHQoMzIpO1xuXHRcdHZhciBfZiA9IChoZWFkZXJzW2ldLnNsaWNlKC0xMCkgKyBcIlxceDAwXFx4MDBcXHgwMFxceDAwXFx4MDBcXHgwMFxceDAwXFx4MDBcXHgwMFxceDAwXFx4MDBcIikuc2xpY2UoMCwgMTEpO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDEsIF9mLCBcInNiY3NcIik7XG5cdFx0aGYud3JpdGVfc2hpZnQoMSwgY29sdHlwZXNbaV0gPT0gJz8nID8gJ0MnIDogY29sdHlwZXNbaV0sIFwic2Jjc1wiKTtcblx0XHRoZi53cml0ZV9zaGlmdCg0LCBqKTtcblx0XHRoZi53cml0ZV9zaGlmdCgxLCBjb2x3aWR0aHNbaV0gfHwgX1JMRU5bY29sdHlwZXNbaV1dIHx8IDApO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDEsIGNvbGRlY2ltYWxzW2ldIHx8IDApO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDEsIDB4MDIpO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdGhmLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdGogKz0gKGNvbHdpZHRoc1tpXSB8fCBfUkxFTltjb2x0eXBlc1tpXV0gfHwgMCk7XG5cdH1cblxuXHR2YXIgaGIgPSBiYS5uZXh0KDI2NCk7XG5cdGhiLndyaXRlX3NoaWZ0KDQsIDB4MDAwMDAwMEQpO1xuXHRmb3IoaT0wOyBpIDwgNjU7KytpKSBoYi53cml0ZV9zaGlmdCg0LCAweDAwMDAwMDAwKTtcblx0Zm9yKGk9MDsgaSA8IGRhdGEubGVuZ3RoOyArK2kpIHtcblx0XHR2YXIgcm91dCA9IGJhLm5leHQocmxlbik7XG5cdFx0cm91dC53cml0ZV9zaGlmdCgxLCAwKTtcblx0XHRmb3Ioaj0wOyBqPGhlYWRlcnMubGVuZ3RoOyArK2opIHtcblx0XHRcdGlmKGhlYWRlcnNbal0gPT0gbnVsbCkgY29udGludWU7XG5cdFx0XHRzd2l0Y2goY29sdHlwZXNbal0pIHtcblx0XHRcdFx0Y2FzZSAnTCc6IHJvdXQud3JpdGVfc2hpZnQoMSwgZGF0YVtpXVtqXSA9PSBudWxsID8gMHgzRiA6IGRhdGFbaV1bal0gPyAweDU0IDogMHg0Nik7IGJyZWFrO1xuXHRcdFx0XHRjYXNlICdCJzogcm91dC53cml0ZV9zaGlmdCg4LCBkYXRhW2ldW2pdfHwwLCAnZicpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnTic6XG5cdFx0XHRcdFx0dmFyIF9uID0gXCIwXCI7XG5cdFx0XHRcdFx0aWYodHlwZW9mIGRhdGFbaV1bal0gPT0gXCJudW1iZXJcIikgX24gPSBkYXRhW2ldW2pdLnRvRml4ZWQoY29sZGVjaW1hbHNbal18fDApO1xuXHRcdFx0XHRcdGZvcihoY250PTA7IGhjbnQgPCBjb2x3aWR0aHNbal0tX24ubGVuZ3RoOyArK2hjbnQpIHJvdXQud3JpdGVfc2hpZnQoMSwgMHgyMCk7XG5cdFx0XHRcdFx0cm91dC53cml0ZV9zaGlmdCgxLCBfbiwgXCJzYmNzXCIpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdEJzpcblx0XHRcdFx0XHRpZighZGF0YVtpXVtqXSkgcm91dC53cml0ZV9zaGlmdCg4LCBcIjAwMDAwMDAwXCIsIFwic2Jjc1wiKTtcblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdHJvdXQud3JpdGVfc2hpZnQoNCwgKFwiMDAwMFwiK2RhdGFbaV1bal0uZ2V0RnVsbFllYXIoKSkuc2xpY2UoLTQpLCBcInNiY3NcIik7XG5cdFx0XHRcdFx0XHRyb3V0LndyaXRlX3NoaWZ0KDIsIChcIjAwXCIrKGRhdGFbaV1bal0uZ2V0TW9udGgoKSsxKSkuc2xpY2UoLTIpLCBcInNiY3NcIik7XG5cdFx0XHRcdFx0XHRyb3V0LndyaXRlX3NoaWZ0KDIsIChcIjAwXCIrZGF0YVtpXVtqXS5nZXREYXRlKCkpLnNsaWNlKC0yKSwgXCJzYmNzXCIpO1xuXHRcdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0MnOlxuXHRcdFx0XHRcdHZhciBfcyA9IFN0cmluZyhkYXRhW2ldW2pdICE9IG51bGwgPyBkYXRhW2ldW2pdIDogXCJcIikuc2xpY2UoMCwgY29sd2lkdGhzW2pdKTtcblx0XHRcdFx0XHRyb3V0LndyaXRlX3NoaWZ0KDEsIF9zLCBcInNiY3NcIik7XG5cdFx0XHRcdFx0Zm9yKGhjbnQ9MDsgaGNudCA8IGNvbHdpZHRoc1tqXS1fcy5sZW5ndGg7ICsraGNudCkgcm91dC53cml0ZV9zaGlmdCgxLCAweDIwKTsgYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdC8vIGRhdGFcblx0fVxuXHRiYS5uZXh0KDEpLndyaXRlX3NoaWZ0KDEsIDB4MUEpO1xuXHRyZXR1cm4gYmEuZW5kKCk7XG59XG5cdHJldHVybiB7XG5cdFx0dG9fd29ya2Jvb2s6IGRiZl90b193b3JrYm9vayxcblx0XHR0b19zaGVldDogZGJmX3RvX3NoZWV0LFxuXHRcdGZyb21fc2hlZXQ6IHNoZWV0X3RvX2RiZlxuXHR9O1xufSkoKTtcblxudmFyIFNZTEsgPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCkge1xuXHQvKiBUT0RPOiBzdHJlc3MgdGVzdCBzZXF1ZW5jZXMgKi9cblx0dmFyIHN5bGtfZXNjYXBlcyA9ICh7XG5cdFx0QUE6J8OAJywgQkE6J8OBJywgQ0E6J8OCJywgREE6MTk1LCBIQTonw4QnLCBKQToxOTcsXG5cdFx0QUU6J8OIJywgQkU6J8OJJywgQ0U6J8OKJywgICAgICAgICBIRTonw4snLFxuXHRcdEFJOifDjCcsIEJJOifDjScsIENJOifDjicsICAgICAgICAgSEk6J8OPJyxcblx0XHRBTzonw5InLCBCTzonw5MnLCBDTzonw5QnLCBETzoyMTMsIEhPOifDlicsXG5cdFx0QVU6J8OZJywgQlU6J8OaJywgQ1U6J8ObJywgICAgICAgICBIVTonw5wnLFxuXHRcdEFhOifDoCcsIEJhOifDoScsIENhOifDoicsIERhOjIyNywgSGE6J8OkJywgSmE6MjI5LFxuXHRcdEFlOifDqCcsIEJlOifDqScsIENlOifDqicsICAgICAgICAgSGU6J8OrJyxcblx0XHRBaTonw6wnLCBCaTonw60nLCBDaTonw64nLCAgICAgICAgIEhpOifDrycsXG5cdFx0QW86J8OyJywgQm86J8OzJywgQ286J8O0JywgRG86MjQ1LCBIbzonw7YnLFxuXHRcdEF1OifDuScsIEJ1OifDuicsIEN1OifDuycsICAgICAgICAgSHU6J8O8Jyxcblx0XHRLQzonw4cnLCBLYzonw6cnLCBxOifDpicsICB6OifFkycsICBhOifDhicsICBqOifFkicsXG5cdFx0RE46MjA5LCBEbjoyNDEsIEh5OjI1NSxcblx0XHRTOjE2OSwgIGM6MTcwLCAgUjoxNzQsICBcIkIgXCI6MTgwLFxuXHRcdC8qOjpbKi8wLyo6Ol0qLzoxNzYsICAgIC8qOjpbKi8xLyo6Ol0qLzoxNzcsICAvKjo6WyovMi8qOjpdKi86MTc4LFxuXHRcdC8qOjpbKi8zLyo6Ol0qLzoxNzksICAgIC8qOjpbKi81Lyo6Ol0qLzoxODEsICAvKjo6WyovNi8qOjpdKi86MTgyLFxuXHRcdC8qOjpbKi83Lyo6Ol0qLzoxODMsICAgIFE6MTg1LCAgazoxODYsICBiOjIwOCwgIGk6MjE2LCAgbDoyMjIsICBzOjI0MCwgIHk6MjQ4LFxuXHRcdFwiIVwiOjE2MSwgJ1wiJzoxNjIsIFwiI1wiOjE2MywgXCIoXCI6MTY0LCBcIiVcIjoxNjUsIFwiJ1wiOjE2NywgXCJIIFwiOjE2OCxcblx0XHRcIitcIjoxNzEsIFwiO1wiOjE4NywgXCI8XCI6MTg4LCBcIj1cIjoxODksIFwiPlwiOjE5MCwgXCI/XCI6MTkxLCBcIntcIjoyMjNcblx0fS8qOmFueSovKTtcblx0dmFyIHN5bGtfY2hhcl9yZWdleCA9IG5ldyBSZWdFeHAoXCJcXHUwMDFCTihcIiArIGtleXMoc3lsa19lc2NhcGVzKS5qb2luKFwifFwiKS5yZXBsYWNlKC9cXHxcXHxcXHwvLCBcInxcXFxcfHxcIikucmVwbGFjZSgvKFs/KCkrXSkvZyxcIlxcXFwkMVwiKSArIFwifFxcXFx8KVwiLCBcImdtXCIpO1xuXHR2YXIgc3lsa19jaGFyX2ZuID0gZnVuY3Rpb24oXywgJDEpeyB2YXIgbyA9IHN5bGtfZXNjYXBlc1skMV07IHJldHVybiB0eXBlb2YgbyA9PSBcIm51bWJlclwiID8gX2dldGFuc2kobykgOiBvOyB9O1xuXHR2YXIgZGVjb2RlX3N5bGtfY2hhciA9IGZ1bmN0aW9uKCQkLCAkMSwgJDIpIHsgdmFyIG5ld2NjID0gKCgkMS5jaGFyQ29kZUF0KDApIC0gMHgyMCk8PDQpIHwgKCQyLmNoYXJDb2RlQXQoMCkgLSAweDMwKTsgcmV0dXJuIG5ld2NjID09IDU5ID8gJCQgOiBfZ2V0YW5zaShuZXdjYyk7IH07XG5cdHN5bGtfZXNjYXBlc1tcInxcIl0gPSAyNTQ7XG5cdC8qIFRPRE86IGZpbmQgYW4gYWN0dWFsIHNwZWNpZmljYXRpb24gKi9cblx0ZnVuY3Rpb24gc3lsa190b19hb2EoZC8qOlJhd0RhdGEqLywgb3B0cykvKjpbQU9BLCBXb3Jrc2hlZXRdKi8ge1xuXHRcdHN3aXRjaChvcHRzLnR5cGUpIHtcblx0XHRcdGNhc2UgJ2Jhc2U2NCc6IHJldHVybiBzeWxrX3RvX2FvYV9zdHIoQmFzZTY0X2RlY29kZShkKSwgb3B0cyk7XG5cdFx0XHRjYXNlICdiaW5hcnknOiByZXR1cm4gc3lsa190b19hb2Ffc3RyKGQsIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYnVmZmVyJzogcmV0dXJuIHN5bGtfdG9fYW9hX3N0cihoYXNfYnVmICYmIEJ1ZmZlci5pc0J1ZmZlcihkKSA/IGQudG9TdHJpbmcoJ2JpbmFyeScpIDogYTJzKGQpLCBvcHRzKTtcblx0XHRcdGNhc2UgJ2FycmF5JzogcmV0dXJuIHN5bGtfdG9fYW9hX3N0cihjYzJzdHIoZCksIG9wdHMpO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgdHlwZSBcIiArIG9wdHMudHlwZSk7XG5cdH1cblx0ZnVuY3Rpb24gc3lsa190b19hb2Ffc3RyKHN0ci8qOnN0cmluZyovLCBvcHRzKS8qOltBT0EsIFdvcmtzaGVldF0qLyB7XG5cdFx0dmFyIHJlY29yZHMgPSBzdHIuc3BsaXQoL1tcXG5cXHJdKy8pLCBSID0gLTEsIEMgPSAtMSwgcmkgPSAwLCByaiA9IDAsIGFyci8qOkFPQSovID0gW107XG5cdFx0dmFyIGZvcm1hdHMvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0XHR2YXIgbmV4dF9jZWxsX2Zvcm1hdC8qOnN0cmluZ3xudWxsKi8gPSBudWxsO1xuXHRcdHZhciBzaHQgPSB7fSwgcm93aW5mby8qOkFycmF5PFJvd0luZm8+Ki8gPSBbXSwgY29saW5mby8qOkFycmF5PENvbEluZm8+Ki8gPSBbXSwgY3cvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0XHR2YXIgTXZhbCA9IDAsIGo7XG5cdFx0aWYoK29wdHMuY29kZXBhZ2UgPj0gMCkgc2V0X2NwKCtvcHRzLmNvZGVwYWdlKTtcblx0XHRmb3IgKDsgcmkgIT09IHJlY29yZHMubGVuZ3RoOyArK3JpKSB7XG5cdFx0XHRNdmFsID0gMDtcblx0XHRcdHZhciByc3RyPXJlY29yZHNbcmldLnRyaW0oKS5yZXBsYWNlKC9cXHgxQihbXFx4MjAtXFx4MkZdKShbXFx4MzAtXFx4M0ZdKS9nLCBkZWNvZGVfc3lsa19jaGFyKS5yZXBsYWNlKHN5bGtfY2hhcl9yZWdleCwgc3lsa19jaGFyX2ZuKTtcblx0XHRcdHZhciByZWNvcmQ9cnN0ci5yZXBsYWNlKC87Oy9nLCBcIlxcdTAwMDBcIikuc3BsaXQoXCI7XCIpLm1hcChmdW5jdGlvbih4KSB7IHJldHVybiB4LnJlcGxhY2UoL1xcdTAwMDAvZywgXCI7XCIpOyB9KTtcblx0XHRcdHZhciBSVD1yZWNvcmRbMF0sIHZhbDtcblx0XHRcdGlmKHJzdHIubGVuZ3RoID4gMCkgc3dpdGNoKFJUKSB7XG5cdFx0XHRjYXNlICdJRCc6IGJyZWFrOyAvKiBoZWFkZXIgKi9cblx0XHRcdGNhc2UgJ0UnOiBicmVhazsgLyogRU9GICovXG5cdFx0XHRjYXNlICdCJzogYnJlYWs7IC8qIGRpbWVuc2lvbnMgKi9cblx0XHRcdGNhc2UgJ08nOiBicmVhazsgLyogb3B0aW9ucz8gKi9cblx0XHRcdGNhc2UgJ1cnOiBicmVhazsgLyogd2luZG93PyAqL1xuXHRcdFx0Y2FzZSAnUCc6XG5cdFx0XHRcdGlmKHJlY29yZFsxXS5jaGFyQXQoMCkgPT0gJ1AnKVxuXHRcdFx0XHRcdGZvcm1hdHMucHVzaChyc3RyLnNsaWNlKDMpLnJlcGxhY2UoLzs7L2csIFwiO1wiKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnQyc6XG5cdFx0XHR2YXIgQ19zZWVuX0sgPSBmYWxzZSwgQ19zZWVuX1ggPSBmYWxzZSwgQ19zZWVuX1MgPSBmYWxzZSwgQ19zZWVuX0UgPSBmYWxzZSwgX1IgPSAtMSwgX0MgPSAtMTtcblx0XHRcdGZvcihyaj0xOyByajxyZWNvcmQubGVuZ3RoOyArK3JqKSBzd2l0Y2gocmVjb3JkW3JqXS5jaGFyQXQoMCkpIHtcblx0XHRcdFx0Y2FzZSAnQSc6IGJyZWFrOyAvLyBUT0RPOiBjb21tZW50XG5cdFx0XHRcdGNhc2UgJ1gnOiBDID0gcGFyc2VJbnQocmVjb3JkW3JqXS5zbGljZSgxKSktMTsgQ19zZWVuX1ggPSB0cnVlOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnWSc6XG5cdFx0XHRcdFx0UiA9IHBhcnNlSW50KHJlY29yZFtyal0uc2xpY2UoMSkpLTE7IGlmKCFDX3NlZW5fWCkgQyA9IDA7XG5cdFx0XHRcdFx0Zm9yKGogPSBhcnIubGVuZ3RoOyBqIDw9IFI7ICsraikgYXJyW2pdID0gW107XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0snOlxuXHRcdFx0XHRcdHZhbCA9IHJlY29yZFtyal0uc2xpY2UoMSk7XG5cdFx0XHRcdFx0aWYodmFsLmNoYXJBdCgwKSA9PT0gJ1wiJykgdmFsID0gdmFsLnNsaWNlKDEsdmFsLmxlbmd0aCAtIDEpO1xuXHRcdFx0XHRcdGVsc2UgaWYodmFsID09PSAnVFJVRScpIHZhbCA9IHRydWU7XG5cdFx0XHRcdFx0ZWxzZSBpZih2YWwgPT09ICdGQUxTRScpIHZhbCA9IGZhbHNlO1xuXHRcdFx0XHRcdGVsc2UgaWYoIWlzTmFOKGZ1enp5bnVtKHZhbCkpKSB7XG5cdFx0XHRcdFx0XHR2YWwgPSBmdXp6eW51bSh2YWwpO1xuXHRcdFx0XHRcdFx0aWYobmV4dF9jZWxsX2Zvcm1hdCAhPT0gbnVsbCAmJiBmbXRfaXNfZGF0ZShuZXh0X2NlbGxfZm9ybWF0KSkgdmFsID0gbnVtZGF0ZSh2YWwpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZighaXNOYU4oZnV6enlkYXRlKHZhbCkuZ2V0RGF0ZSgpKSkge1xuXHRcdFx0XHRcdFx0dmFsID0gcGFyc2VEYXRlKHZhbCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKHR5cGVvZiAkY3B0YWJsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHZhbCA9PSBcInN0cmluZ1wiICYmICgob3B0c3x8e30pLnR5cGUgIT0gXCJzdHJpbmdcIikgJiYgKG9wdHN8fHt9KS5jb2RlcGFnZSkgdmFsID0gJGNwdGFibGUudXRpbHMuZGVjb2RlKG9wdHMuY29kZXBhZ2UsIHZhbCk7XG5cdFx0XHRcdFx0Q19zZWVuX0sgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdFJzpcblx0XHRcdFx0XHRDX3NlZW5fRSA9IHRydWU7XG5cdFx0XHRcdFx0dmFyIGZvcm11bGEgPSByY190b19hMShyZWNvcmRbcmpdLnNsaWNlKDEpLCB7cjpSLGM6Q30pO1xuXHRcdFx0XHRcdGFycltSXVtDXSA9IFthcnJbUl1bQ10sIGZvcm11bGFdO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdTJzpcblx0XHRcdFx0XHRDX3NlZW5fUyA9IHRydWU7XG5cdFx0XHRcdFx0YXJyW1JdW0NdID0gW2FycltSXVtDXSwgXCJTNVNcIl07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0cnOiBicmVhazsgLy8gdW5rbm93blxuXHRcdFx0XHRjYXNlICdSJzogX1IgPSBwYXJzZUludChyZWNvcmRbcmpdLnNsaWNlKDEpKS0xOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnQyc6IF9DID0gcGFyc2VJbnQocmVjb3JkW3JqXS5zbGljZSgxKSktMTsgYnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6IGlmKG9wdHMgJiYgb3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcihcIlNZTEsgYmFkIHJlY29yZCBcIiArIHJzdHIpO1xuXHRcdFx0fVxuXHRcdFx0aWYoQ19zZWVuX0spIHtcblx0XHRcdFx0aWYoYXJyW1JdW0NdICYmIGFycltSXVtDXS5sZW5ndGggPT0gMikgYXJyW1JdW0NdWzBdID0gdmFsO1xuXHRcdFx0XHRlbHNlIGFycltSXVtDXSA9IHZhbDtcblx0XHRcdFx0bmV4dF9jZWxsX2Zvcm1hdCA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHRpZihDX3NlZW5fUykge1xuXHRcdFx0XHRpZihDX3NlZW5fRSkgdGhyb3cgbmV3IEVycm9yKFwiU1lMSyBzaGFyZWQgZm9ybXVsYSBjYW5ub3QgaGF2ZSBvd24gZm9ybXVsYVwiKTtcblx0XHRcdFx0dmFyIHNocmJhc2UgPSBfUiA+IC0xICYmIGFycltfUl1bX0NdO1xuXHRcdFx0XHRpZighc2hyYmFzZSB8fCAhc2hyYmFzZVsxXSkgdGhyb3cgbmV3IEVycm9yKFwiU1lMSyBzaGFyZWQgZm9ybXVsYSBjYW5ub3QgZmluZCBiYXNlXCIpO1xuXHRcdFx0XHRhcnJbUl1bQ11bMV0gPSBzaGlmdF9mb3JtdWxhX3N0cihzaHJiYXNlWzFdLCB7cjogUiAtIF9SLCBjOiBDIC0gX0N9KTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnRic6XG5cdFx0XHR2YXIgRl9zZWVuID0gMDtcblx0XHRcdGZvcihyaj0xOyByajxyZWNvcmQubGVuZ3RoOyArK3JqKSBzd2l0Y2gocmVjb3JkW3JqXS5jaGFyQXQoMCkpIHtcblx0XHRcdFx0Y2FzZSAnWCc6IEMgPSBwYXJzZUludChyZWNvcmRbcmpdLnNsaWNlKDEpKS0xOyArK0Zfc2VlbjsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1knOlxuXHRcdFx0XHRcdFIgPSBwYXJzZUludChyZWNvcmRbcmpdLnNsaWNlKDEpKS0xOyAvKkMgPSAwOyovXG5cdFx0XHRcdFx0Zm9yKGogPSBhcnIubGVuZ3RoOyBqIDw9IFI7ICsraikgYXJyW2pdID0gW107XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ00nOiBNdmFsID0gcGFyc2VJbnQocmVjb3JkW3JqXS5zbGljZSgxKSkgLyAyMDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ0YnOiBicmVhazsgLyogPz8/ICovXG5cdFx0XHRcdGNhc2UgJ0cnOiBicmVhazsgLyogaGlkZSBncmlkICovXG5cdFx0XHRcdGNhc2UgJ1AnOlxuXHRcdFx0XHRcdG5leHRfY2VsbF9mb3JtYXQgPSBmb3JtYXRzW3BhcnNlSW50KHJlY29yZFtyal0uc2xpY2UoMSkpXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnUyc6IGJyZWFrOyAvKiBjZWxsIHN0eWxlICovXG5cdFx0XHRcdGNhc2UgJ0QnOiBicmVhazsgLyogY29sdW1uICovXG5cdFx0XHRcdGNhc2UgJ04nOiBicmVhazsgLyogZm9udCAqL1xuXHRcdFx0XHRjYXNlICdXJzpcblx0XHRcdFx0XHRjdyA9IHJlY29yZFtyal0uc2xpY2UoMSkuc3BsaXQoXCIgXCIpO1xuXHRcdFx0XHRcdGZvcihqID0gcGFyc2VJbnQoY3dbMF0sIDEwKTsgaiA8PSBwYXJzZUludChjd1sxXSwgMTApOyArK2opIHtcblx0XHRcdFx0XHRcdE12YWwgPSBwYXJzZUludChjd1syXSwgMTApO1xuXHRcdFx0XHRcdFx0Y29saW5mb1tqLTFdID0gTXZhbCA9PT0gMCA/IHtoaWRkZW46dHJ1ZX06IHt3Y2g6TXZhbH07IHByb2Nlc3NfY29sKGNvbGluZm9bai0xXSk7XG5cdFx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAnQyc6IC8qIGRlZmF1bHQgY29sdW1uIGZvcm1hdCAqL1xuXHRcdFx0XHRcdEMgPSBwYXJzZUludChyZWNvcmRbcmpdLnNsaWNlKDEpKS0xO1xuXHRcdFx0XHRcdGlmKCFjb2xpbmZvW0NdKSBjb2xpbmZvW0NdID0ge307XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ1InOiAvKiByb3cgcHJvcGVydGllcyAqL1xuXHRcdFx0XHRcdFIgPSBwYXJzZUludChyZWNvcmRbcmpdLnNsaWNlKDEpKS0xO1xuXHRcdFx0XHRcdGlmKCFyb3dpbmZvW1JdKSByb3dpbmZvW1JdID0ge307XG5cdFx0XHRcdFx0aWYoTXZhbCA+IDApIHsgcm93aW5mb1tSXS5ocHQgPSBNdmFsOyByb3dpbmZvW1JdLmhweCA9IHB0MnB4KE12YWwpOyB9XG5cdFx0XHRcdFx0ZWxzZSBpZihNdmFsID09PSAwKSByb3dpbmZvW1JdLmhpZGRlbiA9IHRydWU7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6IGlmKG9wdHMgJiYgb3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcihcIlNZTEsgYmFkIHJlY29yZCBcIiArIHJzdHIpO1xuXHRcdFx0fVxuXHRcdFx0aWYoRl9zZWVuIDwgMSkgbmV4dF9jZWxsX2Zvcm1hdCA9IG51bGw7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogaWYob3B0cyAmJiBvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKFwiU1lMSyBiYWQgcmVjb3JkIFwiICsgcnN0cik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGlmKHJvd2luZm8ubGVuZ3RoID4gMCkgc2h0Wychcm93cyddID0gcm93aW5mbztcblx0XHRpZihjb2xpbmZvLmxlbmd0aCA+IDApIHNodFsnIWNvbHMnXSA9IGNvbGluZm87XG5cdFx0aWYob3B0cyAmJiBvcHRzLnNoZWV0Um93cykgYXJyID0gYXJyLnNsaWNlKDAsIG9wdHMuc2hlZXRSb3dzKTtcblx0XHRyZXR1cm4gW2Fyciwgc2h0XTtcblx0fVxuXG5cdGZ1bmN0aW9uIHN5bGtfdG9fc2hlZXQoZC8qOlJhd0RhdGEqLywgb3B0cykvKjpXb3Jrc2hlZXQqLyB7XG5cdFx0dmFyIGFvYXNodCA9IHN5bGtfdG9fYW9hKGQsIG9wdHMpO1xuXHRcdHZhciBhb2EgPSBhb2FzaHRbMF0sIHdzID0gYW9hc2h0WzFdO1xuXHRcdHZhciBvID0gYW9hX3RvX3NoZWV0KGFvYSwgb3B0cyk7XG5cdFx0a2V5cyh3cykuZm9yRWFjaChmdW5jdGlvbihrKSB7IG9ba10gPSB3c1trXTsgfSk7XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBzeWxrX3RvX3dvcmtib29rKGQvKjpSYXdEYXRhKi8sIG9wdHMpLyo6V29ya2Jvb2sqLyB7IHJldHVybiBzaGVldF90b193b3JrYm9vayhzeWxrX3RvX3NoZWV0KGQsIG9wdHMpLCBvcHRzKTsgfVxuXG5cdGZ1bmN0aW9uIHdyaXRlX3dzX2NlbGxfc3lsayhjZWxsLyo6Q2VsbCovLCB3cy8qOldvcmtzaGVldCovLCBSLyo6bnVtYmVyKi8sIEMvKjpudW1iZXIqLy8qOjosIG9wdHMqLykvKjpzdHJpbmcqLyB7XG5cdFx0dmFyIG8gPSBcIkM7WVwiICsgKFIrMSkgKyBcIjtYXCIgKyAoQysxKSArIFwiO0tcIjtcblx0XHRzd2l0Y2goY2VsbC50KSB7XG5cdFx0XHRjYXNlICduJzpcblx0XHRcdFx0byArPSAoY2VsbC52fHwwKTtcblx0XHRcdFx0aWYoY2VsbC5mICYmICFjZWxsLkYpIG8gKz0gXCI7RVwiICsgYTFfdG9fcmMoY2VsbC5mLCB7cjpSLCBjOkN9KTsgYnJlYWs7XG5cdFx0XHRjYXNlICdiJzogbyArPSBjZWxsLnYgPyBcIlRSVUVcIiA6IFwiRkFMU0VcIjsgYnJlYWs7XG5cdFx0XHRjYXNlICdlJzogbyArPSBjZWxsLncgfHwgY2VsbC52OyBicmVhaztcblx0XHRcdGNhc2UgJ2QnOiBvICs9ICdcIicgKyAoY2VsbC53IHx8IGNlbGwudikgKyAnXCInOyBicmVhaztcblx0XHRcdGNhc2UgJ3MnOiBvICs9ICdcIicgKyBjZWxsLnYucmVwbGFjZSgvXCIvZyxcIlwiKS5yZXBsYWNlKC87L2csIFwiOztcIikgKyAnXCInOyBicmVhaztcblx0XHR9XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiB3cml0ZV93c19jb2xzX3N5bGsob3V0LCBjb2xzKSB7XG5cdFx0Y29scy5mb3JFYWNoKGZ1bmN0aW9uKGNvbCwgaSkge1xuXHRcdFx0dmFyIHJlYyA9IFwiRjtXXCIgKyAoaSsxKSArIFwiIFwiICsgKGkrMSkgKyBcIiBcIjtcblx0XHRcdGlmKGNvbC5oaWRkZW4pIHJlYyArPSBcIjBcIjtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRpZih0eXBlb2YgY29sLndpZHRoID09ICdudW1iZXInICYmICFjb2wud3B4KSBjb2wud3B4ID0gd2lkdGgycHgoY29sLndpZHRoKTtcblx0XHRcdFx0aWYodHlwZW9mIGNvbC53cHggPT0gJ251bWJlcicgJiYgIWNvbC53Y2gpIGNvbC53Y2ggPSBweDJjaGFyKGNvbC53cHgpO1xuXHRcdFx0XHRpZih0eXBlb2YgY29sLndjaCA9PSAnbnVtYmVyJykgcmVjICs9IE1hdGgucm91bmQoY29sLndjaCk7XG5cdFx0XHR9XG5cdFx0XHRpZihyZWMuY2hhckF0KHJlYy5sZW5ndGggLSAxKSAhPSBcIiBcIikgb3V0LnB1c2gocmVjKTtcblx0XHR9KTtcblx0fVxuXG5cdGZ1bmN0aW9uIHdyaXRlX3dzX3Jvd3Nfc3lsayhvdXQvKjpBcnJheTxzdHJpbmc+Ki8sIHJvd3MvKjpBcnJheTxSb3dJbmZvPiovKSB7XG5cdFx0cm93cy5mb3JFYWNoKGZ1bmN0aW9uKHJvdywgaSkge1xuXHRcdFx0dmFyIHJlYyA9IFwiRjtcIjtcblx0XHRcdGlmKHJvdy5oaWRkZW4pIHJlYyArPSBcIk0wO1wiO1xuXHRcdFx0ZWxzZSBpZihyb3cuaHB0KSByZWMgKz0gXCJNXCIgKyAyMCAqIHJvdy5ocHQgKyBcIjtcIjtcblx0XHRcdGVsc2UgaWYocm93LmhweCkgcmVjICs9IFwiTVwiICsgMjAgKiBweDJwdChyb3cuaHB4KSArIFwiO1wiO1xuXHRcdFx0aWYocmVjLmxlbmd0aCA+IDIpIG91dC5wdXNoKHJlYyArIFwiUlwiICsgKGkrMSkpO1xuXHRcdH0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gc2hlZXRfdG9fc3lsayh3cy8qOldvcmtzaGVldCovLCBvcHRzLyo6P2FueSovKS8qOnN0cmluZyovIHtcblx0XHR2YXIgcHJlYW1ibGUvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXCJJRDtQV1hMO047RVwiXSwgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRcdHZhciByID0gc2FmZV9kZWNvZGVfcmFuZ2Uod3NbJyFyZWYnXSksIGNlbGwvKjpDZWxsKi87XG5cdFx0dmFyIGRlbnNlID0gQXJyYXkuaXNBcnJheSh3cyk7XG5cdFx0dmFyIFJTID0gXCJcXHJcXG5cIjtcblxuXHRcdHByZWFtYmxlLnB1c2goXCJQO1BHZW5lcmFsXCIpO1xuXHRcdHByZWFtYmxlLnB1c2goXCJGO1AwO0RHMEc4O00yNTVcIik7XG5cdFx0aWYod3NbJyFjb2xzJ10pIHdyaXRlX3dzX2NvbHNfc3lsayhwcmVhbWJsZSwgd3NbJyFjb2xzJ10pO1xuXHRcdGlmKHdzWychcm93cyddKSB3cml0ZV93c19yb3dzX3N5bGsocHJlYW1ibGUsIHdzWychcm93cyddKTtcblxuXHRcdHByZWFtYmxlLnB1c2goXCJCO1lcIiArIChyLmUuciAtIHIucy5yICsgMSkgKyBcIjtYXCIgKyAoci5lLmMgLSByLnMuYyArIDEpICsgXCI7RFwiICsgW3Iucy5jLHIucy5yLHIuZS5jLHIuZS5yXS5qb2luKFwiIFwiKSk7XG5cdFx0Zm9yKHZhciBSID0gci5zLnI7IFIgPD0gci5lLnI7ICsrUikge1xuXHRcdFx0Zm9yKHZhciBDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykge1xuXHRcdFx0XHR2YXIgY29vcmQgPSBlbmNvZGVfY2VsbCh7cjpSLGM6Q30pO1xuXHRcdFx0XHRjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXTogd3NbY29vcmRdO1xuXHRcdFx0XHRpZighY2VsbCB8fCAoY2VsbC52ID09IG51bGwgJiYgKCFjZWxsLmYgfHwgY2VsbC5GKSkpIGNvbnRpbnVlO1xuXHRcdFx0XHRvLnB1c2god3JpdGVfd3NfY2VsbF9zeWxrKGNlbGwsIHdzLCBSLCBDLCBvcHRzKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBwcmVhbWJsZS5qb2luKFJTKSArIFJTICsgby5qb2luKFJTKSArIFJTICsgXCJFXCIgKyBSUztcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dG9fd29ya2Jvb2s6IHN5bGtfdG9fd29ya2Jvb2ssXG5cdFx0dG9fc2hlZXQ6IHN5bGtfdG9fc2hlZXQsXG5cdFx0ZnJvbV9zaGVldDogc2hlZXRfdG9fc3lsa1xuXHR9O1xufSkoKTtcblxudmFyIERJRiA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdGZ1bmN0aW9uIGRpZl90b19hb2EoZC8qOlJhd0RhdGEqLywgb3B0cykvKjpBT0EqLyB7XG5cdFx0c3dpdGNoKG9wdHMudHlwZSkge1xuXHRcdFx0Y2FzZSAnYmFzZTY0JzogcmV0dXJuIGRpZl90b19hb2Ffc3RyKEJhc2U2NF9kZWNvZGUoZCksIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYmluYXJ5JzogcmV0dXJuIGRpZl90b19hb2Ffc3RyKGQsIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYnVmZmVyJzogcmV0dXJuIGRpZl90b19hb2Ffc3RyKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGQpID8gZC50b1N0cmluZygnYmluYXJ5JykgOiBhMnMoZCksIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYXJyYXknOiByZXR1cm4gZGlmX3RvX2FvYV9zdHIoY2Myc3RyKGQpLCBvcHRzKTtcblx0XHR9XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvcHRzLnR5cGUpO1xuXHR9XG5cdGZ1bmN0aW9uIGRpZl90b19hb2Ffc3RyKHN0ci8qOnN0cmluZyovLCBvcHRzKS8qOkFPQSovIHtcblx0XHR2YXIgcmVjb3JkcyA9IHN0ci5zcGxpdCgnXFxuJyksIFIgPSAtMSwgQyA9IC0xLCByaSA9IDAsIGFyci8qOkFPQSovID0gW107XG5cdFx0Zm9yICg7IHJpICE9PSByZWNvcmRzLmxlbmd0aDsgKytyaSkge1xuXHRcdFx0aWYgKHJlY29yZHNbcmldLnRyaW0oKSA9PT0gJ0JPVCcpIHsgYXJyWysrUl0gPSBbXTsgQyA9IDA7IGNvbnRpbnVlOyB9XG5cdFx0XHRpZiAoUiA8IDApIGNvbnRpbnVlO1xuXHRcdFx0dmFyIG1ldGFkYXRhID0gcmVjb3Jkc1tyaV0udHJpbSgpLnNwbGl0KFwiLFwiKTtcblx0XHRcdHZhciB0eXBlID0gbWV0YWRhdGFbMF0sIHZhbHVlID0gbWV0YWRhdGFbMV07XG5cdFx0XHQrK3JpO1xuXHRcdFx0dmFyIGRhdGEgPSByZWNvcmRzW3JpXSB8fCBcIlwiO1xuXHRcdFx0d2hpbGUoKChkYXRhLm1hdGNoKC9bXCJdL2cpfHxbXSkubGVuZ3RoICYgMSkgJiYgcmkgPCByZWNvcmRzLmxlbmd0aCAtIDEpIGRhdGEgKz0gXCJcXG5cIiArIHJlY29yZHNbKytyaV07XG5cdFx0XHRkYXRhID0gZGF0YS50cmltKCk7XG5cdFx0XHRzd2l0Y2ggKCt0eXBlKSB7XG5cdFx0XHRcdGNhc2UgLTE6XG5cdFx0XHRcdFx0aWYgKGRhdGEgPT09ICdCT1QnKSB7IGFyclsrK1JdID0gW107IEMgPSAwOyBjb250aW51ZTsgfVxuXHRcdFx0XHRcdGVsc2UgaWYgKGRhdGEgIT09ICdFT0QnKSB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgRElGIHNwZWNpYWwgY29tbWFuZCBcIiArIGRhdGEpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDA6XG5cdFx0XHRcdFx0aWYoZGF0YSA9PT0gJ1RSVUUnKSBhcnJbUl1bQ10gPSB0cnVlO1xuXHRcdFx0XHRcdGVsc2UgaWYoZGF0YSA9PT0gJ0ZBTFNFJykgYXJyW1JdW0NdID0gZmFsc2U7XG5cdFx0XHRcdFx0ZWxzZSBpZighaXNOYU4oZnV6enludW0odmFsdWUpKSkgYXJyW1JdW0NdID0gZnV6enludW0odmFsdWUpO1xuXHRcdFx0XHRcdGVsc2UgaWYoIWlzTmFOKGZ1enp5ZGF0ZSh2YWx1ZSkuZ2V0RGF0ZSgpKSkgYXJyW1JdW0NdID0gcGFyc2VEYXRlKHZhbHVlKTtcblx0XHRcdFx0XHRlbHNlIGFycltSXVtDXSA9IHZhbHVlO1xuXHRcdFx0XHRcdCsrQzsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHRkYXRhID0gZGF0YS5zbGljZSgxLGRhdGEubGVuZ3RoLTEpO1xuXHRcdFx0XHRcdGRhdGEgPSBkYXRhLnJlcGxhY2UoL1wiXCIvZywgJ1wiJyk7XG5cdFx0XHRcdFx0aWYoRElGX1hMICYmIGRhdGEgJiYgZGF0YS5tYXRjaCgvXj1cIi4qXCIkLykpIGRhdGEgPSBkYXRhLnNsaWNlKDIsIC0xKTtcblx0XHRcdFx0XHRhcnJbUl1bQysrXSA9IGRhdGEgIT09ICcnID8gZGF0YSA6IG51bGw7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoZGF0YSA9PT0gJ0VPRCcpIGJyZWFrO1xuXHRcdH1cblx0XHRpZihvcHRzICYmIG9wdHMuc2hlZXRSb3dzKSBhcnIgPSBhcnIuc2xpY2UoMCwgb3B0cy5zaGVldFJvd3MpO1xuXHRcdHJldHVybiBhcnI7XG5cdH1cblxuXHRmdW5jdGlvbiBkaWZfdG9fc2hlZXQoc3RyLyo6c3RyaW5nKi8sIG9wdHMpLyo6V29ya3NoZWV0Ki8geyByZXR1cm4gYW9hX3RvX3NoZWV0KGRpZl90b19hb2Eoc3RyLCBvcHRzKSwgb3B0cyk7IH1cblx0ZnVuY3Rpb24gZGlmX3RvX3dvcmtib29rKHN0ci8qOnN0cmluZyovLCBvcHRzKS8qOldvcmtib29rKi8geyByZXR1cm4gc2hlZXRfdG9fd29ya2Jvb2soZGlmX3RvX3NoZWV0KHN0ciwgb3B0cyksIG9wdHMpOyB9XG5cblx0dmFyIHNoZWV0X3RvX2RpZiA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdFx0dmFyIHB1c2hfZmllbGQgPSBmdW5jdGlvbiBwZihvLyo6QXJyYXk8c3RyaW5nPiovLCB0b3BpYy8qOnN0cmluZyovLCB2Lyo6bnVtYmVyKi8sIG4vKjpudW1iZXIqLywgcy8qOnN0cmluZyovKSB7XG5cdFx0XHRvLnB1c2godG9waWMpO1xuXHRcdFx0by5wdXNoKHYgKyBcIixcIiArIG4pO1xuXHRcdFx0by5wdXNoKCdcIicgKyBzLnJlcGxhY2UoL1wiL2csJ1wiXCInKSArICdcIicpO1xuXHRcdH07XG5cdFx0dmFyIHB1c2hfdmFsdWUgPSBmdW5jdGlvbiBwbyhvLyo6QXJyYXk8c3RyaW5nPiovLCB0eXBlLyo6bnVtYmVyKi8sIHYvKjphbnkqLywgcy8qOnN0cmluZyovKSB7XG5cdFx0XHRvLnB1c2godHlwZSArIFwiLFwiICsgdik7XG5cdFx0XHRvLnB1c2godHlwZSA9PSAxID8gJ1wiJyArIHMucmVwbGFjZSgvXCIvZywnXCJcIicpICsgJ1wiJyA6IHMpO1xuXHRcdH07XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHNoZWV0X3RvX2RpZih3cy8qOldvcmtzaGVldCovLyo6Oiwgb3B0czo/YW55Ki8pLyo6c3RyaW5nKi8ge1xuXHRcdFx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0XHRcdHZhciByID0gc2FmZV9kZWNvZGVfcmFuZ2Uod3NbJyFyZWYnXSksIGNlbGwvKjpDZWxsKi87XG5cdFx0XHR2YXIgZGVuc2UgPSBBcnJheS5pc0FycmF5KHdzKTtcblx0XHRcdHB1c2hfZmllbGQobywgXCJUQUJMRVwiLCAwLCAxLCBcInNoZWV0anNcIik7XG5cdFx0XHRwdXNoX2ZpZWxkKG8sIFwiVkVDVE9SU1wiLCAwLCByLmUuciAtIHIucy5yICsgMSxcIlwiKTtcblx0XHRcdHB1c2hfZmllbGQobywgXCJUVVBMRVNcIiwgMCwgci5lLmMgLSByLnMuYyArIDEsXCJcIik7XG5cdFx0XHRwdXNoX2ZpZWxkKG8sIFwiREFUQVwiLCAwLCAwLFwiXCIpO1xuXHRcdFx0Zm9yKHZhciBSID0gci5zLnI7IFIgPD0gci5lLnI7ICsrUikge1xuXHRcdFx0XHRwdXNoX3ZhbHVlKG8sIC0xLCAwLCBcIkJPVFwiKTtcblx0XHRcdFx0Zm9yKHZhciBDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykge1xuXHRcdFx0XHRcdHZhciBjb29yZCA9IGVuY29kZV9jZWxsKHtyOlIsYzpDfSk7XG5cdFx0XHRcdFx0Y2VsbCA9IGRlbnNlID8gKHdzW1JdfHxbXSlbQ10gOiB3c1tjb29yZF07XG5cdFx0XHRcdFx0aWYoIWNlbGwpIHsgcHVzaF92YWx1ZShvLCAxLCAwLCBcIlwiKTsgY29udGludWU7fVxuXHRcdFx0XHRcdHN3aXRjaChjZWxsLnQpIHtcblx0XHRcdFx0XHRcdGNhc2UgJ24nOlxuXHRcdFx0XHRcdFx0XHR2YXIgdmFsID0gRElGX1hMID8gY2VsbC53IDogY2VsbC52O1xuXHRcdFx0XHRcdFx0XHRpZighdmFsICYmIGNlbGwudiAhPSBudWxsKSB2YWwgPSBjZWxsLnY7XG5cdFx0XHRcdFx0XHRcdGlmKHZhbCA9PSBudWxsKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYoRElGX1hMICYmIGNlbGwuZiAmJiAhY2VsbC5GKSBwdXNoX3ZhbHVlKG8sIDEsIDAsIFwiPVwiICsgY2VsbC5mKTtcblx0XHRcdFx0XHRcdFx0XHRlbHNlIHB1c2hfdmFsdWUobywgMSwgMCwgXCJcIik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSBwdXNoX3ZhbHVlKG8sIDAsIHZhbCwgXCJWXCIpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2InOlxuXHRcdFx0XHRcdFx0XHRwdXNoX3ZhbHVlKG8sIDAsIGNlbGwudiA/IDEgOiAwLCBjZWxsLnYgPyBcIlRSVUVcIiA6IFwiRkFMU0VcIik7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAncyc6XG5cdFx0XHRcdFx0XHRcdHB1c2hfdmFsdWUobywgMSwgMCwgKCFESUZfWEwgfHwgaXNOYU4oY2VsbC52KSkgPyBjZWxsLnYgOiAnPVwiJyArIGNlbGwudiArICdcIicpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2QnOlxuXHRcdFx0XHRcdFx0XHRpZighY2VsbC53KSBjZWxsLncgPSBTU0ZfZm9ybWF0KGNlbGwueiB8fCB0YWJsZV9mbXRbMTRdLCBkYXRlbnVtKHBhcnNlRGF0ZShjZWxsLnYpKSk7XG5cdFx0XHRcdFx0XHRcdGlmKERJRl9YTCkgcHVzaF92YWx1ZShvLCAwLCBjZWxsLncsIFwiVlwiKTtcblx0XHRcdFx0XHRcdFx0ZWxzZSBwdXNoX3ZhbHVlKG8sIDEsIDAsIGNlbGwudyk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0ZGVmYXVsdDogcHVzaF92YWx1ZShvLCAxLCAwLCBcIlwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHB1c2hfdmFsdWUobywgLTEsIDAsIFwiRU9EXCIpO1xuXHRcdFx0dmFyIFJTID0gXCJcXHJcXG5cIjtcblx0XHRcdHZhciBvbyA9IG8uam9pbihSUyk7XG5cdFx0XHQvL3doaWxlKChvby5sZW5ndGggJiAweDdGKSAhPSAwKSBvbyArPSBcIlxcMFwiO1xuXHRcdFx0cmV0dXJuIG9vO1xuXHRcdH07XG5cdH0pKCk7XG5cdHJldHVybiB7XG5cdFx0dG9fd29ya2Jvb2s6IGRpZl90b193b3JrYm9vayxcblx0XHR0b19zaGVldDogZGlmX3RvX3NoZWV0LFxuXHRcdGZyb21fc2hlZXQ6IHNoZWV0X3RvX2RpZlxuXHR9O1xufSkoKTtcblxudmFyIEVUSCA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdGZ1bmN0aW9uIGRlY29kZShzLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8geyByZXR1cm4gcy5yZXBsYWNlKC9cXFxcYi9nLFwiXFxcXFwiKS5yZXBsYWNlKC9cXFxcYy9nLFwiOlwiKS5yZXBsYWNlKC9cXFxcbi9nLFwiXFxuXCIpOyB9XG5cdGZ1bmN0aW9uIGVuY29kZShzLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8geyByZXR1cm4gcy5yZXBsYWNlKC9cXFxcL2csIFwiXFxcXGJcIikucmVwbGFjZSgvOi9nLCBcIlxcXFxjXCIpLnJlcGxhY2UoL1xcbi9nLFwiXFxcXG5cIik7IH1cblxuXHRmdW5jdGlvbiBldGhfdG9fYW9hKHN0ci8qOnN0cmluZyovLCBvcHRzKS8qOkFPQSovIHtcblx0XHR2YXIgcmVjb3JkcyA9IHN0ci5zcGxpdCgnXFxuJyksIFIgPSAtMSwgQyA9IC0xLCByaSA9IDAsIGFyci8qOkFPQSovID0gW107XG5cdFx0Zm9yICg7IHJpICE9PSByZWNvcmRzLmxlbmd0aDsgKytyaSkge1xuXHRcdFx0dmFyIHJlY29yZCA9IHJlY29yZHNbcmldLnRyaW0oKS5zcGxpdChcIjpcIik7XG5cdFx0XHRpZihyZWNvcmRbMF0gIT09ICdjZWxsJykgY29udGludWU7XG5cdFx0XHR2YXIgYWRkciA9IGRlY29kZV9jZWxsKHJlY29yZFsxXSk7XG5cdFx0XHRpZihhcnIubGVuZ3RoIDw9IGFkZHIucikgZm9yKFIgPSBhcnIubGVuZ3RoOyBSIDw9IGFkZHIucjsgKytSKSBpZighYXJyW1JdKSBhcnJbUl0gPSBbXTtcblx0XHRcdFIgPSBhZGRyLnI7IEMgPSBhZGRyLmM7XG5cdFx0XHRzd2l0Y2gocmVjb3JkWzJdKSB7XG5cdFx0XHRcdGNhc2UgJ3QnOiBhcnJbUl1bQ10gPSBkZWNvZGUocmVjb3JkWzNdKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3YnOiBhcnJbUl1bQ10gPSArcmVjb3JkWzNdOyBicmVhaztcblx0XHRcdFx0Y2FzZSAndnRmJzogdmFyIF9mID0gcmVjb3JkW3JlY29yZC5sZW5ndGggLSAxXTtcblx0XHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRcdGNhc2UgJ3Z0Yyc6XG5cdFx0XHRcdFx0c3dpdGNoKHJlY29yZFszXSkge1xuXHRcdFx0XHRcdFx0Y2FzZSAnbmwnOiBhcnJbUl1bQ10gPSArcmVjb3JkWzRdID8gdHJ1ZSA6IGZhbHNlOyBicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6IGFycltSXVtDXSA9ICtyZWNvcmRbNF07IGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihyZWNvcmRbMl0gPT0gJ3Z0ZicpIGFycltSXVtDXSA9IFthcnJbUl1bQ10sIF9mXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYob3B0cyAmJiBvcHRzLnNoZWV0Um93cykgYXJyID0gYXJyLnNsaWNlKDAsIG9wdHMuc2hlZXRSb3dzKTtcblx0XHRyZXR1cm4gYXJyO1xuXHR9XG5cblx0ZnVuY3Rpb24gZXRoX3RvX3NoZWV0KGQvKjpzdHJpbmcqLywgb3B0cykvKjpXb3Jrc2hlZXQqLyB7IHJldHVybiBhb2FfdG9fc2hlZXQoZXRoX3RvX2FvYShkLCBvcHRzKSwgb3B0cyk7IH1cblx0ZnVuY3Rpb24gZXRoX3RvX3dvcmtib29rKGQvKjpzdHJpbmcqLywgb3B0cykvKjpXb3JrYm9vayovIHsgcmV0dXJuIHNoZWV0X3RvX3dvcmtib29rKGV0aF90b19zaGVldChkLCBvcHRzKSwgb3B0cyk7IH1cblxuXHR2YXIgaGVhZGVyID0gW1xuXHRcdFwic29jaWFsY2FsYzp2ZXJzaW9uOjEuNVwiLFxuXHRcdFwiTUlNRS1WZXJzaW9uOiAxLjBcIixcblx0XHRcIkNvbnRlbnQtVHlwZTogbXVsdGlwYXJ0L21peGVkOyBib3VuZGFyeT1Tb2NpYWxDYWxjU3ByZWFkc2hlZXRDb250cm9sU2F2ZVwiXG5cdF0uam9pbihcIlxcblwiKTtcblxuXHR2YXIgc2VwID0gW1xuXHRcdFwiLS1Tb2NpYWxDYWxjU3ByZWFkc2hlZXRDb250cm9sU2F2ZVwiLFxuXHRcdFwiQ29udGVudC10eXBlOiB0ZXh0L3BsYWluOyBjaGFyc2V0PVVURi04XCJcblx0XS5qb2luKFwiXFxuXCIpICsgXCJcXG5cIjtcblxuXHQvKiBUT0RPOiB0aGUgb3RoZXIgcGFydHMgKi9cblx0dmFyIG1ldGEgPSBbXG5cdFx0XCIjIFNvY2lhbENhbGMgU3ByZWFkc2hlZXQgQ29udHJvbCBTYXZlXCIsXG5cdFx0XCJwYXJ0OnNoZWV0XCJcblx0XS5qb2luKFwiXFxuXCIpO1xuXG5cdHZhciBlbmQgPSBcIi0tU29jaWFsQ2FsY1NwcmVhZHNoZWV0Q29udHJvbFNhdmUtLVwiO1xuXG5cdGZ1bmN0aW9uIHNoZWV0X3RvX2V0aF9kYXRhKHdzLyo6V29ya3NoZWV0Ki8pLyo6c3RyaW5nKi8ge1xuXHRcdGlmKCF3cyB8fCAhd3NbJyFyZWYnXSkgcmV0dXJuIFwiXCI7XG5cdFx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXSwgb28vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXSwgY2VsbCwgY29vcmQgPSBcIlwiO1xuXHRcdHZhciByID0gZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHRcdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkod3MpO1xuXHRcdGZvcih2YXIgUiA9IHIucy5yOyBSIDw9IHIuZS5yOyArK1IpIHtcblx0XHRcdGZvcih2YXIgQyA9IHIucy5jOyBDIDw9IHIuZS5jOyArK0MpIHtcblx0XHRcdFx0Y29vcmQgPSBlbmNvZGVfY2VsbCh7cjpSLGM6Q30pO1xuXHRcdFx0XHRjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXSA6IHdzW2Nvb3JkXTtcblx0XHRcdFx0aWYoIWNlbGwgfHwgY2VsbC52ID09IG51bGwgfHwgY2VsbC50ID09PSAneicpIGNvbnRpbnVlO1xuXHRcdFx0XHRvbyA9IFtcImNlbGxcIiwgY29vcmQsICd0J107XG5cdFx0XHRcdHN3aXRjaChjZWxsLnQpIHtcblx0XHRcdFx0XHRjYXNlICdzJzogY2FzZSAnc3RyJzogb28ucHVzaChlbmNvZGUoY2VsbC52KSk7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ24nOlxuXHRcdFx0XHRcdFx0aWYoIWNlbGwuZikgeyBvb1syXT0ndic7IG9vWzNdPWNlbGwudjsgfVxuXHRcdFx0XHRcdFx0ZWxzZSB7IG9vWzJdPSd2dGYnOyBvb1szXT0nbic7IG9vWzRdPWNlbGwudjsgb29bNV09ZW5jb2RlKGNlbGwuZik7IH1cblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2InOlxuXHRcdFx0XHRcdFx0b29bMl0gPSAndnQnKyhjZWxsLmY/J2YnOidjJyk7IG9vWzNdPSdubCc7IG9vWzRdPWNlbGwudj9cIjFcIjpcIjBcIjtcblx0XHRcdFx0XHRcdG9vWzVdID0gZW5jb2RlKGNlbGwuZnx8KGNlbGwudj8nVFJVRSc6J0ZBTFNFJykpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRcdFx0XHR2YXIgdCA9IGRhdGVudW0ocGFyc2VEYXRlKGNlbGwudikpO1xuXHRcdFx0XHRcdFx0b29bMl0gPSAndnRjJzsgb29bM10gPSAnbmQnOyBvb1s0XSA9IFwiXCIrdDtcblx0XHRcdFx0XHRcdG9vWzVdID0gY2VsbC53IHx8IFNTRl9mb3JtYXQoY2VsbC56IHx8IHRhYmxlX2ZtdFsxNF0sIHQpO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZSc6IGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG8ucHVzaChvby5qb2luKFwiOlwiKSk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdG8ucHVzaChcInNoZWV0OmM6XCIgKyAoci5lLmMtci5zLmMrMSkgKyBcIjpyOlwiICsgKHIuZS5yLXIucy5yKzEpICsgXCI6dHZmOjFcIik7XG5cdFx0by5wdXNoKFwidmFsdWVmb3JtYXQ6MTp0ZXh0LXdpa2lcIik7XG5cdFx0Ly9vLnB1c2goXCJjb3BpZWRmcm9tOlwiICsgd3NbJyFyZWYnXSk7IC8vIGNsaXBib2FyZCBvbmx5XG5cdFx0cmV0dXJuIG8uam9pbihcIlxcblwiKTtcblx0fVxuXG5cdGZ1bmN0aW9uIHNoZWV0X3RvX2V0aCh3cy8qOldvcmtzaGVldCovLyo6Oiwgb3B0czo/YW55Ki8pLyo6c3RyaW5nKi8ge1xuXHRcdHJldHVybiBbaGVhZGVyLCBzZXAsIG1ldGEsIHNlcCwgc2hlZXRfdG9fZXRoX2RhdGEod3MpLCBlbmRdLmpvaW4oXCJcXG5cIik7XG5cdFx0Ly8gcmV0dXJuIFtcInZlcnNpb246MS41XCIsIHNoZWV0X3RvX2V0aF9kYXRhKHdzKV0uam9pbihcIlxcblwiKTsgLy8gY2xpcGJvYXJkIGZvcm1cblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dG9fd29ya2Jvb2s6IGV0aF90b193b3JrYm9vayxcblx0XHR0b19zaGVldDogZXRoX3RvX3NoZWV0LFxuXHRcdGZyb21fc2hlZXQ6IHNoZWV0X3RvX2V0aFxuXHR9O1xufSkoKTtcblxudmFyIFBSTiA9IC8qI19fUFVSRV9fKi8oZnVuY3Rpb24oKSB7XG5cdGZ1bmN0aW9uIHNldF90ZXh0X2FycihkYXRhLyo6c3RyaW5nKi8sIGFyci8qOkFPQSovLCBSLyo6bnVtYmVyKi8sIEMvKjpudW1iZXIqLywgby8qOmFueSovKSB7XG5cdFx0aWYoby5yYXcpIGFycltSXVtDXSA9IGRhdGE7XG5cdFx0ZWxzZSBpZihkYXRhID09PSBcIlwiKXsvKiBlbXB0eSAqL31cblx0XHRlbHNlIGlmKGRhdGEgPT09ICdUUlVFJykgYXJyW1JdW0NdID0gdHJ1ZTtcblx0XHRlbHNlIGlmKGRhdGEgPT09ICdGQUxTRScpIGFycltSXVtDXSA9IGZhbHNlO1xuXHRcdGVsc2UgaWYoIWlzTmFOKGZ1enp5bnVtKGRhdGEpKSkgYXJyW1JdW0NdID0gZnV6enludW0oZGF0YSk7XG5cdFx0ZWxzZSBpZighaXNOYU4oZnV6enlkYXRlKGRhdGEpLmdldERhdGUoKSkpIGFycltSXVtDXSA9IHBhcnNlRGF0ZShkYXRhKTtcblx0XHRlbHNlIGFycltSXVtDXSA9IGRhdGE7XG5cdH1cblxuXHRmdW5jdGlvbiBwcm5fdG9fYW9hX3N0cihmLyo6c3RyaW5nKi8sIG9wdHMpLyo6QU9BKi8ge1xuXHRcdHZhciBvID0gb3B0cyB8fCB7fTtcblx0XHR2YXIgYXJyLyo6QU9BKi8gPSAoW10vKjphbnkqLyk7XG5cdFx0aWYoIWYgfHwgZi5sZW5ndGggPT09IDApIHJldHVybiBhcnI7XG5cdFx0dmFyIGxpbmVzID0gZi5zcGxpdCgvW1xcclxcbl0vKTtcblx0XHR2YXIgTCA9IGxpbmVzLmxlbmd0aCAtIDE7XG5cdFx0d2hpbGUoTCA+PSAwICYmIGxpbmVzW0xdLmxlbmd0aCA9PT0gMCkgLS1MO1xuXHRcdHZhciBzdGFydCA9IDEwLCBpZHggPSAwO1xuXHRcdHZhciBSID0gMDtcblx0XHRmb3IoOyBSIDw9IEw7ICsrUikge1xuXHRcdFx0aWR4ID0gbGluZXNbUl0uaW5kZXhPZihcIiBcIik7XG5cdFx0XHRpZihpZHggPT0gLTEpIGlkeCA9IGxpbmVzW1JdLmxlbmd0aDsgZWxzZSBpZHgrKztcblx0XHRcdHN0YXJ0ID0gTWF0aC5tYXgoc3RhcnQsIGlkeCk7XG5cdFx0fVxuXHRcdGZvcihSID0gMDsgUiA8PSBMOyArK1IpIHtcblx0XHRcdGFycltSXSA9IFtdO1xuXHRcdFx0LyogVE9ETzogY29uZmlybSB0aGF0IHdpZHRocyBhcmUgYWx3YXlzIDEwICovXG5cdFx0XHR2YXIgQyA9IDA7XG5cdFx0XHRzZXRfdGV4dF9hcnIobGluZXNbUl0uc2xpY2UoMCwgc3RhcnQpLnRyaW0oKSwgYXJyLCBSLCBDLCBvKTtcblx0XHRcdGZvcihDID0gMTsgQyA8PSAobGluZXNbUl0ubGVuZ3RoIC0gc3RhcnQpLzEwICsgMTsgKytDKVxuXHRcdFx0XHRzZXRfdGV4dF9hcnIobGluZXNbUl0uc2xpY2Uoc3RhcnQrKEMtMSkqMTAsc3RhcnQrQyoxMCkudHJpbSgpLGFycixSLEMsbyk7XG5cdFx0fVxuXHRcdGlmKG8uc2hlZXRSb3dzKSBhcnIgPSBhcnIuc2xpY2UoMCwgby5zaGVldFJvd3MpO1xuXHRcdHJldHVybiBhcnI7XG5cdH1cblxuXHQvLyBMaXN0IG9mIGFjY2VwdGVkIENTViBzZXBhcmF0b3JzXG5cdHZhciBndWVzc19zZXBzID0ge1xuXHRcdC8qOjpbKi8weDJDLyo6Ol0qLzogJywnLFxuXHRcdC8qOjpbKi8weDA5Lyo6Ol0qLzogXCJcXHRcIixcblx0XHQvKjo6WyovMHgzQi8qOjpdKi86ICc7Jyxcblx0XHQvKjo6WyovMHg3Qy8qOjpdKi86ICd8J1xuXHR9O1xuXG5cdC8vIENTViBzZXBhcmF0b3Igd2VpZ2h0cyB0byBiZSB1c2VkIGluIGNhc2Ugb2YgZXF1YWwgbnVtYmVyc1xuXHR2YXIgZ3Vlc3Nfc2VwX3dlaWdodHMgPSB7XG5cdFx0Lyo6OlsqLzB4MkMvKjo6XSovOiAzLFxuXHRcdC8qOjpbKi8weDA5Lyo6Ol0qLzogMixcblx0XHQvKjo6WyovMHgzQi8qOjpdKi86IDEsXG5cdFx0Lyo6OlsqLzB4N0MvKjo6XSovOiAwXG5cdH07XG5cblx0ZnVuY3Rpb24gZ3Vlc3Nfc2VwKHN0cikge1xuXHRcdHZhciBjbnQgPSB7fSwgaW5zdHIgPSBmYWxzZSwgZW5kID0gMCwgY2MgPSAwO1xuXHRcdGZvcig7ZW5kIDwgc3RyLmxlbmd0aDsrK2VuZCkge1xuXHRcdFx0aWYoKGNjPXN0ci5jaGFyQ29kZUF0KGVuZCkpID09IDB4MjIpIGluc3RyID0gIWluc3RyO1xuXHRcdFx0ZWxzZSBpZighaW5zdHIgJiYgY2MgaW4gZ3Vlc3Nfc2VwcykgY250W2NjXSA9IChjbnRbY2NdfHwwKSsxO1xuXHRcdH1cblxuXHRcdGNjID0gW107XG5cdFx0Zm9yKGVuZCBpbiBjbnQpIGlmICggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNudCwgZW5kKSApIHtcblx0XHRcdGNjLnB1c2goWyBjbnRbZW5kXSwgZW5kIF0pO1xuXHRcdH1cblxuXHRcdGlmICggIWNjLmxlbmd0aCApIHtcblx0XHRcdGNudCA9IGd1ZXNzX3NlcF93ZWlnaHRzO1xuXHRcdFx0Zm9yKGVuZCBpbiBjbnQpIGlmICggT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGNudCwgZW5kKSApIHtcblx0XHRcdFx0Y2MucHVzaChbIGNudFtlbmRdLCBlbmQgXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Y2Muc29ydChmdW5jdGlvbihhLCBiKSB7IHJldHVybiBhWzBdIC0gYlswXSB8fCBndWVzc19zZXBfd2VpZ2h0c1thWzFdXSAtIGd1ZXNzX3NlcF93ZWlnaHRzW2JbMV1dOyB9KTtcblxuXHRcdHJldHVybiBndWVzc19zZXBzW2NjLnBvcCgpWzFdXSB8fCAweDJDO1xuXHR9XG5cblx0ZnVuY3Rpb24gZHN2X3RvX3NoZWV0X3N0cihzdHIvKjpzdHJpbmcqLywgb3B0cykvKjpXb3Jrc2hlZXQqLyB7XG5cdFx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHRcdHZhciBzZXAgPSBcIlwiO1xuXHRcdGlmKERFTlNFICE9IG51bGwgJiYgby5kZW5zZSA9PSBudWxsKSBvLmRlbnNlID0gREVOU0U7XG5cdFx0dmFyIHdzLyo6V29ya3NoZWV0Ki8gPSBvLmRlbnNlID8gKFtdLyo6YW55Ki8pIDogKHt9Lyo6YW55Ki8pO1xuXHRcdHZhciByYW5nZS8qOlJhbmdlKi8gPSAoe3M6IHtjOjAsIHI6MH0sIGU6IHtjOjAsIHI6MH19Lyo6YW55Ki8pO1xuXG5cdFx0aWYoc3RyLnNsaWNlKDAsNCkgPT0gXCJzZXA9XCIpIHtcblx0XHRcdC8vIElmIHRoZSBsaW5lIGVuZHMgaW4gXFxyXFxuXG5cdFx0XHRpZihzdHIuY2hhckNvZGVBdCg1KSA9PSAxMyAmJiBzdHIuY2hhckNvZGVBdCg2KSA9PSAxMCApIHtcblx0XHRcdFx0c2VwID0gc3RyLmNoYXJBdCg0KTsgc3RyID0gc3RyLnNsaWNlKDcpO1xuXHRcdFx0fVxuXHRcdFx0Ly8gSWYgbGluZSBlbmRzIGluIFxcciBPUiBcXG5cblx0XHRcdGVsc2UgaWYoc3RyLmNoYXJDb2RlQXQoNSkgPT0gMTMgfHwgc3RyLmNoYXJDb2RlQXQoNSkgPT0gMTAgKSB7XG5cdFx0XHRcdHNlcCA9IHN0ci5jaGFyQXQoNCk7IHN0ciA9IHN0ci5zbGljZSg2KTtcblx0XHRcdH1cblx0XHRcdGVsc2Ugc2VwID0gZ3Vlc3Nfc2VwKHN0ci5zbGljZSgwLDEwMjQpKTtcblx0XHR9XG5cdFx0ZWxzZSBpZihvICYmIG8uRlMpIHNlcCA9IG8uRlM7XG5cdFx0ZWxzZSBzZXAgPSBndWVzc19zZXAoc3RyLnNsaWNlKDAsMTAyNCkpO1xuXHRcdHZhciBSID0gMCwgQyA9IDAsIHYgPSAwO1xuXHRcdHZhciBzdGFydCA9IDAsIGVuZCA9IDAsIHNlcGNjID0gc2VwLmNoYXJDb2RlQXQoMCksIGluc3RyID0gZmFsc2UsIGNjPTAsIHN0YXJ0Y2M9c3RyLmNoYXJDb2RlQXQoMCk7XG5cdFx0c3RyID0gc3RyLnJlcGxhY2UoL1xcclxcbi9tZywgXCJcXG5cIik7XG5cdFx0dmFyIF9yZS8qOj9SZWdFeHAqLyA9IG8uZGF0ZU5GICE9IG51bGwgPyBkYXRlTkZfcmVnZXgoby5kYXRlTkYpIDogbnVsbDtcblx0XHRmdW5jdGlvbiBmaW5pc2hfY2VsbCgpIHtcblx0XHRcdHZhciBzID0gc3RyLnNsaWNlKHN0YXJ0LCBlbmQpO1xuXHRcdFx0dmFyIGNlbGwgPSAoe30vKjphbnkqLyk7XG5cdFx0XHRpZihzLmNoYXJBdCgwKSA9PSAnXCInICYmIHMuY2hhckF0KHMubGVuZ3RoIC0gMSkgPT0gJ1wiJykgcyA9IHMuc2xpY2UoMSwtMSkucmVwbGFjZSgvXCJcIi9nLCdcIicpO1xuXHRcdFx0aWYocy5sZW5ndGggPT09IDApIGNlbGwudCA9ICd6Jztcblx0XHRcdGVsc2UgaWYoby5yYXcpIHsgY2VsbC50ID0gJ3MnOyBjZWxsLnYgPSBzOyB9XG5cdFx0XHRlbHNlIGlmKHMudHJpbSgpLmxlbmd0aCA9PT0gMCkgeyBjZWxsLnQgPSAncyc7IGNlbGwudiA9IHM7IH1cblx0XHRcdGVsc2UgaWYocy5jaGFyQ29kZUF0KDApID09IDB4M0QpIHtcblx0XHRcdFx0aWYocy5jaGFyQ29kZUF0KDEpID09IDB4MjIgJiYgcy5jaGFyQ29kZUF0KHMubGVuZ3RoIC0gMSkgPT0gMHgyMikgeyBjZWxsLnQgPSAncyc7IGNlbGwudiA9IHMuc2xpY2UoMiwtMSkucmVwbGFjZSgvXCJcIi9nLCdcIicpOyB9XG5cdFx0XHRcdGVsc2UgaWYoZnV6enlmbWxhKHMpKSB7IGNlbGwudCA9ICduJzsgY2VsbC5mID0gcy5zbGljZSgxKTsgfVxuXHRcdFx0XHRlbHNlIHsgY2VsbC50ID0gJ3MnOyBjZWxsLnYgPSBzOyB9IH1cblx0XHRcdGVsc2UgaWYocyA9PSBcIlRSVUVcIikgeyBjZWxsLnQgPSAnYic7IGNlbGwudiA9IHRydWU7IH1cblx0XHRcdGVsc2UgaWYocyA9PSBcIkZBTFNFXCIpIHsgY2VsbC50ID0gJ2InOyBjZWxsLnYgPSBmYWxzZTsgfVxuXHRcdFx0ZWxzZSBpZighaXNOYU4odiA9IGZ1enp5bnVtKHMpKSkgeyBjZWxsLnQgPSAnbic7IGlmKG8uY2VsbFRleHQgIT09IGZhbHNlKSBjZWxsLncgPSBzOyBjZWxsLnYgPSB2OyB9XG5cdFx0XHRlbHNlIGlmKCFpc05hTihmdXp6eWRhdGUocykuZ2V0RGF0ZSgpKSB8fCBfcmUgJiYgcy5tYXRjaChfcmUpKSB7XG5cdFx0XHRcdGNlbGwueiA9IG8uZGF0ZU5GIHx8IHRhYmxlX2ZtdFsxNF07XG5cdFx0XHRcdHZhciBrID0gMDtcblx0XHRcdFx0aWYoX3JlICYmIHMubWF0Y2goX3JlKSl7IHM9ZGF0ZU5GX2ZpeChzLCBvLmRhdGVORiwgKHMubWF0Y2goX3JlKXx8W10pKTsgaz0xOyB9XG5cdFx0XHRcdGlmKG8uY2VsbERhdGVzKSB7IGNlbGwudCA9ICdkJzsgY2VsbC52ID0gcGFyc2VEYXRlKHMsIGspOyB9XG5cdFx0XHRcdGVsc2UgeyBjZWxsLnQgPSAnbic7IGNlbGwudiA9IGRhdGVudW0ocGFyc2VEYXRlKHMsIGspKTsgfVxuXHRcdFx0XHRpZihvLmNlbGxUZXh0ICE9PSBmYWxzZSkgY2VsbC53ID0gU1NGX2Zvcm1hdChjZWxsLnosIGNlbGwudiBpbnN0YW5jZW9mIERhdGUgPyBkYXRlbnVtKGNlbGwudik6Y2VsbC52KTtcblx0XHRcdFx0aWYoIW8uY2VsbE5GKSBkZWxldGUgY2VsbC56O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2VsbC50ID0gJ3MnO1xuXHRcdFx0XHRjZWxsLnYgPSBzO1xuXHRcdFx0fVxuXHRcdFx0aWYoY2VsbC50ID09ICd6Jyl7fVxuXHRcdFx0ZWxzZSBpZihvLmRlbnNlKSB7IGlmKCF3c1tSXSkgd3NbUl0gPSBbXTsgd3NbUl1bQ10gPSBjZWxsOyB9XG5cdFx0XHRlbHNlIHdzW2VuY29kZV9jZWxsKHtjOkMscjpSfSldID0gY2VsbDtcblx0XHRcdHN0YXJ0ID0gZW5kKzE7IHN0YXJ0Y2MgPSBzdHIuY2hhckNvZGVBdChzdGFydCk7XG5cdFx0XHRpZihyYW5nZS5lLmMgPCBDKSByYW5nZS5lLmMgPSBDO1xuXHRcdFx0aWYocmFuZ2UuZS5yIDwgUikgcmFuZ2UuZS5yID0gUjtcblx0XHRcdGlmKGNjID09IHNlcGNjKSArK0M7IGVsc2UgeyBDID0gMDsgKytSOyBpZihvLnNoZWV0Um93cyAmJiBvLnNoZWV0Um93cyA8PSBSKSByZXR1cm4gdHJ1ZTsgfVxuXHRcdH1cblx0XHRvdXRlcjogZm9yKDtlbmQgPCBzdHIubGVuZ3RoOysrZW5kKSBzd2l0Y2goKGNjPXN0ci5jaGFyQ29kZUF0KGVuZCkpKSB7XG5cdFx0XHRjYXNlIDB4MjI6IGlmKHN0YXJ0Y2MgPT09IDB4MjIpIGluc3RyID0gIWluc3RyOyBicmVhaztcblx0XHRcdGNhc2Ugc2VwY2M6IGNhc2UgMHgwYTogY2FzZSAweDBkOiBpZighaW5zdHIgJiYgZmluaXNoX2NlbGwoKSkgYnJlYWsgb3V0ZXI7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogYnJlYWs7XG5cdFx0fVxuXHRcdGlmKGVuZCAtIHN0YXJ0ID4gMCkgZmluaXNoX2NlbGwoKTtcblxuXHRcdHdzWychcmVmJ10gPSBlbmNvZGVfcmFuZ2UocmFuZ2UpO1xuXHRcdHJldHVybiB3cztcblx0fVxuXG5cdGZ1bmN0aW9uIHBybl90b19zaGVldF9zdHIoc3RyLyo6c3RyaW5nKi8sIG9wdHMpLyo6V29ya3NoZWV0Ki8ge1xuXHRcdGlmKCEob3B0cyAmJiBvcHRzLlBSTikpIHJldHVybiBkc3ZfdG9fc2hlZXRfc3RyKHN0ciwgb3B0cyk7XG5cdFx0aWYob3B0cy5GUykgcmV0dXJuIGRzdl90b19zaGVldF9zdHIoc3RyLCBvcHRzKTtcblx0XHRpZihzdHIuc2xpY2UoMCw0KSA9PSBcInNlcD1cIikgcmV0dXJuIGRzdl90b19zaGVldF9zdHIoc3RyLCBvcHRzKTtcblx0XHRpZihzdHIuaW5kZXhPZihcIlxcdFwiKSA+PSAwIHx8IHN0ci5pbmRleE9mKFwiLFwiKSA+PSAwIHx8IHN0ci5pbmRleE9mKFwiO1wiKSA+PSAwKSByZXR1cm4gZHN2X3RvX3NoZWV0X3N0cihzdHIsIG9wdHMpO1xuXHRcdHJldHVybiBhb2FfdG9fc2hlZXQocHJuX3RvX2FvYV9zdHIoc3RyLCBvcHRzKSwgb3B0cyk7XG5cdH1cblxuXHRmdW5jdGlvbiBwcm5fdG9fc2hlZXQoZC8qOlJhd0RhdGEqLywgb3B0cykvKjpXb3Jrc2hlZXQqLyB7XG5cdFx0dmFyIHN0ciA9IFwiXCIsIGJ5dGVzID0gb3B0cy50eXBlID09ICdzdHJpbmcnID8gWzAsMCwwLDBdIDogZmlyc3RieXRlKGQsIG9wdHMpO1xuXHRcdHN3aXRjaChvcHRzLnR5cGUpIHtcblx0XHRcdGNhc2UgJ2Jhc2U2NCc6IHN0ciA9IEJhc2U2NF9kZWNvZGUoZCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnYmluYXJ5Jzogc3RyID0gZDsgYnJlYWs7XG5cdFx0XHRjYXNlICdidWZmZXInOlxuXHRcdFx0XHRpZihvcHRzLmNvZGVwYWdlID09IDY1MDAxKSBzdHIgPSBkLnRvU3RyaW5nKCd1dGY4Jyk7IC8vIFRPRE86IHRlc3QgaWYgYnVmXG5cdFx0XHRcdGVsc2UgaWYob3B0cy5jb2RlcGFnZSAmJiB0eXBlb2YgJGNwdGFibGUgIT09ICd1bmRlZmluZWQnKSBzdHIgPSAkY3B0YWJsZS51dGlscy5kZWNvZGUob3B0cy5jb2RlcGFnZSwgZCk7XG5cdFx0XHRcdGVsc2Ugc3RyID0gaGFzX2J1ZiAmJiBCdWZmZXIuaXNCdWZmZXIoZCkgPyBkLnRvU3RyaW5nKCdiaW5hcnknKSA6IGEycyhkKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdhcnJheSc6IHN0ciA9IGNjMnN0cihkKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdzdHJpbmcnOiBzdHIgPSBkOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCB0eXBlIFwiICsgb3B0cy50eXBlKTtcblx0XHR9XG5cdFx0aWYoYnl0ZXNbMF0gPT0gMHhFRiAmJiBieXRlc1sxXSA9PSAweEJCICYmIGJ5dGVzWzJdID09IDB4QkYpIHN0ciA9IHV0ZjhyZWFkKHN0ci5zbGljZSgzKSk7XG5cdFx0ZWxzZSBpZihvcHRzLnR5cGUgIT0gJ3N0cmluZycgJiYgb3B0cy50eXBlICE9ICdidWZmZXInICYmIG9wdHMuY29kZXBhZ2UgPT0gNjUwMDEpIHN0ciA9IHV0ZjhyZWFkKHN0cik7XG5cdFx0ZWxzZSBpZigob3B0cy50eXBlID09ICdiaW5hcnknKSAmJiB0eXBlb2YgJGNwdGFibGUgIT09ICd1bmRlZmluZWQnICYmIG9wdHMuY29kZXBhZ2UpICBzdHIgPSAkY3B0YWJsZS51dGlscy5kZWNvZGUob3B0cy5jb2RlcGFnZSwgJGNwdGFibGUudXRpbHMuZW5jb2RlKDI4NTkxLHN0cikpO1xuXHRcdGlmKHN0ci5zbGljZSgwLDE5KSA9PSBcInNvY2lhbGNhbGM6dmVyc2lvbjpcIikgcmV0dXJuIEVUSC50b19zaGVldChvcHRzLnR5cGUgPT0gJ3N0cmluZycgPyBzdHIgOiB1dGY4cmVhZChzdHIpLCBvcHRzKTtcblx0XHRyZXR1cm4gcHJuX3RvX3NoZWV0X3N0cihzdHIsIG9wdHMpO1xuXHR9XG5cblx0ZnVuY3Rpb24gcHJuX3RvX3dvcmtib29rKGQvKjpSYXdEYXRhKi8sIG9wdHMpLyo6V29ya2Jvb2sqLyB7IHJldHVybiBzaGVldF90b193b3JrYm9vayhwcm5fdG9fc2hlZXQoZCwgb3B0cyksIG9wdHMpOyB9XG5cblx0ZnVuY3Rpb24gc2hlZXRfdG9fcHJuKHdzLyo6V29ya3NoZWV0Ki8vKjo6LCBvcHRzOj9hbnkqLykvKjpzdHJpbmcqLyB7XG5cdFx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0XHR2YXIgciA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pLCBjZWxsLyo6Q2VsbCovO1xuXHRcdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkod3MpO1xuXHRcdGZvcih2YXIgUiA9IHIucy5yOyBSIDw9IHIuZS5yOyArK1IpIHtcblx0XHRcdHZhciBvby8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRcdFx0Zm9yKHZhciBDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykge1xuXHRcdFx0XHR2YXIgY29vcmQgPSBlbmNvZGVfY2VsbCh7cjpSLGM6Q30pO1xuXHRcdFx0XHRjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXSA6IHdzW2Nvb3JkXTtcblx0XHRcdFx0aWYoIWNlbGwgfHwgY2VsbC52ID09IG51bGwpIHsgb28ucHVzaChcIiAgICAgICAgICBcIik7IGNvbnRpbnVlOyB9XG5cdFx0XHRcdHZhciB3ID0gKGNlbGwudyB8fCAoZm9ybWF0X2NlbGwoY2VsbCksIGNlbGwudykgfHwgXCJcIikuc2xpY2UoMCwxMCk7XG5cdFx0XHRcdHdoaWxlKHcubGVuZ3RoIDwgMTApIHcgKz0gXCIgXCI7XG5cdFx0XHRcdG9vLnB1c2godyArIChDID09PSAwID8gXCIgXCIgOiBcIlwiKSk7XG5cdFx0XHR9XG5cdFx0XHRvLnB1c2gob28uam9pbihcIlwiKSk7XG5cdFx0fVxuXHRcdHJldHVybiBvLmpvaW4oXCJcXG5cIik7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdHRvX3dvcmtib29rOiBwcm5fdG9fd29ya2Jvb2ssXG5cdFx0dG9fc2hlZXQ6IHBybl90b19zaGVldCxcblx0XHRmcm9tX3NoZWV0OiBzaGVldF90b19wcm5cblx0fTtcbn0pKCk7XG5cbi8qIEV4Y2VsIGRlZmF1bHRzIHRvIFNZTEsgYnV0IHdhcm5zIGlmIGRhdGEgaXMgbm90IHZhbGlkICovXG5mdW5jdGlvbiByZWFkX3diX0lEKGQsIG9wdHMpIHtcblx0dmFyIG8gPSBvcHRzIHx8IHt9LCBPTERfV1RGID0gISFvLldURjsgby5XVEYgPSB0cnVlO1xuXHR0cnkge1xuXHRcdHZhciBvdXQgPSBTWUxLLnRvX3dvcmtib29rKGQsIG8pO1xuXHRcdG8uV1RGID0gT0xEX1dURjtcblx0XHRyZXR1cm4gb3V0O1xuXHR9IGNhdGNoKGUpIHtcblx0XHRvLldURiA9IE9MRF9XVEY7XG5cdFx0aWYoIWUubWVzc2FnZS5tYXRjaCgvU1lMSyBiYWQgcmVjb3JkIElELykgJiYgT0xEX1dURikgdGhyb3cgZTtcblx0XHRyZXR1cm4gUFJOLnRvX3dvcmtib29rKGQsIG9wdHMpO1xuXHR9XG59XG5cbnZhciBXS18gPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCkge1xuXHRmdW5jdGlvbiBsb3R1c2hvcHBlcihkYXRhLCBjYi8qOlJlY29yZEhvcHBlckNCKi8sIG9wdHMvKjphbnkqLykge1xuXHRcdGlmKCFkYXRhKSByZXR1cm47XG5cdFx0cHJlcF9ibG9iKGRhdGEsIGRhdGEubCB8fCAwKTtcblx0XHR2YXIgRW51bSA9IG9wdHMuRW51bSB8fCBXSzFFbnVtO1xuXHRcdHdoaWxlKGRhdGEubCA8IGRhdGEubGVuZ3RoKSB7XG5cdFx0XHR2YXIgUlQgPSBkYXRhLnJlYWRfc2hpZnQoMik7XG5cdFx0XHR2YXIgUiA9IEVudW1bUlRdIHx8IEVudW1bMHhGRkZGXTtcblx0XHRcdHZhciBsZW5ndGggPSBkYXRhLnJlYWRfc2hpZnQoMik7XG5cdFx0XHR2YXIgdGd0ID0gZGF0YS5sICsgbGVuZ3RoO1xuXHRcdFx0dmFyIGQgPSBSLmYgJiYgUi5mKGRhdGEsIGxlbmd0aCwgb3B0cyk7XG5cdFx0XHRkYXRhLmwgPSB0Z3Q7XG5cdFx0XHRpZihjYihkLCBSLCBSVCkpIHJldHVybjtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBsb3R1c190b193b3JrYm9vayhkLyo6UmF3RGF0YSovLCBvcHRzKSB7XG5cdFx0c3dpdGNoKG9wdHMudHlwZSkge1xuXHRcdFx0Y2FzZSAnYmFzZTY0JzogcmV0dXJuIGxvdHVzX3RvX3dvcmtib29rX2J1ZihzMmEoQmFzZTY0X2RlY29kZShkKSksIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYmluYXJ5JzogcmV0dXJuIGxvdHVzX3RvX3dvcmtib29rX2J1ZihzMmEoZCksIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYnVmZmVyJzpcblx0XHRcdGNhc2UgJ2FycmF5JzogcmV0dXJuIGxvdHVzX3RvX3dvcmtib29rX2J1ZihkLCBvcHRzKTtcblx0XHR9XG5cdFx0dGhyb3cgXCJVbnN1cHBvcnRlZCB0eXBlIFwiICsgb3B0cy50eXBlO1xuXHR9XG5cblx0ZnVuY3Rpb24gbG90dXNfdG9fd29ya2Jvb2tfYnVmKGQsIG9wdHMpLyo6V29ya2Jvb2sqLyB7XG5cdFx0aWYoIWQpIHJldHVybiBkO1xuXHRcdHZhciBvID0gb3B0cyB8fCB7fTtcblx0XHRpZihERU5TRSAhPSBudWxsICYmIG8uZGVuc2UgPT0gbnVsbCkgby5kZW5zZSA9IERFTlNFO1xuXHRcdHZhciBzLyo6V29ya3NoZWV0Ki8gPSAoKG8uZGVuc2UgPyBbXSA6IHt9KS8qOmFueSovKSwgbiA9IFwiU2hlZXQxXCIsIG5leHRfbiA9IFwiXCIsIHNpZHggPSAwO1xuXHRcdHZhciBzaGVldHMgPSB7fSwgc25hbWVzID0gW10sIHJlYWxuYW1lcyA9IFtdO1xuXG5cdFx0dmFyIHJlZmd1ZXNzID0ge3M6IHtyOjAsIGM6MH0sIGU6IHtyOjAsIGM6MH0gfTtcblx0XHR2YXIgc2hlZXRSb3dzID0gby5zaGVldFJvd3MgfHwgMDtcblxuXHRcdGlmKGRbMl0gPT0gMHgwMCkge1xuXHRcdFx0aWYoZFszXSA9PSAweDA4IHx8IGRbM10gPT0gMHgwOSkge1xuXHRcdFx0XHRpZihkLmxlbmd0aCA+PSAxNiAmJiBkWzE0XSA9PSAweDA1ICYmIGRbMTVdID09PSAweDZjKSB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBXb3JrcyAzIGZvciBNYWMgZmlsZVwiKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZihkWzJdID09IDB4MDIpIHtcblx0XHRcdG8uRW51bSA9IFdLMUVudW07XG5cdFx0XHRsb3R1c2hvcHBlcihkLCBmdW5jdGlvbih2YWwsIFIsIFJUKSB7IHN3aXRjaChSVCkge1xuXHRcdFx0XHRjYXNlIDB4MDA6IC8qIEJPRiAqL1xuXHRcdFx0XHRcdG8udmVycyA9IHZhbDtcblx0XHRcdFx0XHRpZih2YWwgPj0gMHgxMDAwKSBvLnFwcm8gPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDY6IHJlZmd1ZXNzID0gdmFsOyBicmVhazsgLyogUkFOR0UgKi9cblx0XHRcdFx0Y2FzZSAweENDOiBpZih2YWwpIG5leHRfbiA9IHZhbDsgYnJlYWs7IC8qIFNIRUVUTkFNRUNTICovXG5cdFx0XHRcdGNhc2UgMHhERTogbmV4dF9uID0gdmFsOyBicmVhazsgLyogU0hFRVROQU1FTFAgKi9cblx0XHRcdFx0Y2FzZSAweDBGOiAvKiBMQUJFTCAqL1xuXHRcdFx0XHRjYXNlIDB4MzM6IC8qIFNUUklORyAqL1xuXHRcdFx0XHRcdGlmKCFvLnFwcm8pIHZhbFsxXS52ID0gdmFsWzFdLnYuc2xpY2UoMSk7XG5cdFx0XHRcdFx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdFx0XHRjYXNlIDB4MEQ6IC8qIElOVEVHRVIgKi9cblx0XHRcdFx0Y2FzZSAweDBFOiAvKiBOVU1CRVIgKi9cblx0XHRcdFx0Y2FzZSAweDEwOiAvKiBGT1JNVUxBICovXG5cdFx0XHRcdFx0LyogVE9ETzogYWN0dWFsIHRyYW5zbGF0aW9uIG9mIHRoZSBmb3JtYXQgY29kZSAqL1xuXHRcdFx0XHRcdGlmKFJUID09IDB4MEUgJiYgKHZhbFsyXSAmIDB4NzApID09IDB4NzAgJiYgKHZhbFsyXSAmIDB4MEYpID4gMSAmJiAodmFsWzJdICYgMHgwRikgPCAxNSkge1xuXHRcdFx0XHRcdFx0dmFsWzFdLnogPSBvLmRhdGVORiB8fCB0YWJsZV9mbXRbMTRdO1xuXHRcdFx0XHRcdFx0aWYoby5jZWxsRGF0ZXMpIHsgdmFsWzFdLnQgPSAnZCc7IHZhbFsxXS52ID0gbnVtZGF0ZSh2YWxbMV0udik7IH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihvLnFwcm8pIHtcblx0XHRcdFx0XHRcdGlmKHZhbFszXSA+IHNpZHgpIHtcblx0XHRcdFx0XHRcdFx0c1tcIiFyZWZcIl0gPSBlbmNvZGVfcmFuZ2UocmVmZ3Vlc3MpO1xuXHRcdFx0XHRcdFx0XHRzaGVldHNbbl0gPSBzO1xuXHRcdFx0XHRcdFx0XHRzbmFtZXMucHVzaChuKTtcblx0XHRcdFx0XHRcdFx0cyA9IChvLmRlbnNlID8gW10gOiB7fSk7XG5cdFx0XHRcdFx0XHRcdHJlZmd1ZXNzID0ge3M6IHtyOjAsIGM6MH0sIGU6IHtyOjAsIGM6MH0gfTtcblx0XHRcdFx0XHRcdFx0c2lkeCA9IHZhbFszXTsgbiA9IG5leHRfbiB8fCBcIlNoZWV0XCIgKyAoc2lkeCArIDEpOyBuZXh0X24gPSBcIlwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciB0bXBjZWxsID0gby5kZW5zZSA/IChzW3ZhbFswXS5yXXx8W10pW3ZhbFswXS5jXSA6IHNbZW5jb2RlX2NlbGwodmFsWzBdKV07XG5cdFx0XHRcdFx0aWYodG1wY2VsbCkge1xuXHRcdFx0XHRcdFx0dG1wY2VsbC50ID0gdmFsWzFdLnQ7IHRtcGNlbGwudiA9IHZhbFsxXS52O1xuXHRcdFx0XHRcdFx0aWYodmFsWzFdLnogIT0gbnVsbCkgdG1wY2VsbC56ID0gdmFsWzFdLno7XG5cdFx0XHRcdFx0XHRpZih2YWxbMV0uZiAhPSBudWxsKSB0bXBjZWxsLmYgPSB2YWxbMV0uZjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihvLmRlbnNlKSB7XG5cdFx0XHRcdFx0XHRpZighc1t2YWxbMF0ucl0pIHNbdmFsWzBdLnJdID0gW107XG5cdFx0XHRcdFx0XHRzW3ZhbFswXS5yXVt2YWxbMF0uY10gPSB2YWxbMV07XG5cdFx0XHRcdFx0fSBlbHNlIHNbZW5jb2RlX2NlbGwodmFsWzBdKV0gPSB2YWxbMV07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHR9fSwgbyk7XG5cdFx0fSBlbHNlIGlmKGRbMl0gPT0gMHgxQSB8fCBkWzJdID09IDB4MEUpIHtcblx0XHRcdG8uRW51bSA9IFdLM0VudW07XG5cdFx0XHRpZihkWzJdID09IDB4MEUpIHsgby5xcHJvID0gdHJ1ZTsgZC5sID0gMDsgfVxuXHRcdFx0bG90dXNob3BwZXIoZCwgZnVuY3Rpb24odmFsLCBSLCBSVCkgeyBzd2l0Y2goUlQpIHtcblx0XHRcdFx0Y2FzZSAweENDOiBuID0gdmFsOyBicmVhazsgLyogU0hFRVROQU1FQ1MgKi9cblx0XHRcdFx0Y2FzZSAweDE2OiAvKiBMQUJFTDE2ICovXG5cdFx0XHRcdFx0dmFsWzFdLnYgPSB2YWxbMV0udi5zbGljZSgxKTtcblx0XHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRcdGNhc2UgMHgxNzogLyogTlVNQkVSMTcgKi9cblx0XHRcdFx0Y2FzZSAweDE4OiAvKiBOVU1CRVIxOCAqL1xuXHRcdFx0XHRjYXNlIDB4MTk6IC8qIEZPUk1VTEExOSAqL1xuXHRcdFx0XHRjYXNlIDB4MjU6IC8qIE5VTUJFUjI1ICovXG5cdFx0XHRcdGNhc2UgMHgyNzogLyogTlVNQkVSMjcgKi9cblx0XHRcdFx0Y2FzZSAweDI4OiAvKiBGT1JNVUxBMjggKi9cblx0XHRcdFx0XHRpZih2YWxbM10gPiBzaWR4KSB7XG5cdFx0XHRcdFx0XHRzW1wiIXJlZlwiXSA9IGVuY29kZV9yYW5nZShyZWZndWVzcyk7XG5cdFx0XHRcdFx0XHRzaGVldHNbbl0gPSBzO1xuXHRcdFx0XHRcdFx0c25hbWVzLnB1c2gobik7XG5cdFx0XHRcdFx0XHRzID0gKG8uZGVuc2UgPyBbXSA6IHt9KTtcblx0XHRcdFx0XHRcdHJlZmd1ZXNzID0ge3M6IHtyOjAsIGM6MH0sIGU6IHtyOjAsIGM6MH0gfTtcblx0XHRcdFx0XHRcdHNpZHggPSB2YWxbM107IG4gPSBcIlNoZWV0XCIgKyAoc2lkeCArIDEpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihzaGVldFJvd3MgPiAwICYmIHZhbFswXS5yID49IHNoZWV0Um93cykgYnJlYWs7XG5cdFx0XHRcdFx0aWYoby5kZW5zZSkge1xuXHRcdFx0XHRcdFx0aWYoIXNbdmFsWzBdLnJdKSBzW3ZhbFswXS5yXSA9IFtdO1xuXHRcdFx0XHRcdFx0c1t2YWxbMF0ucl1bdmFsWzBdLmNdID0gdmFsWzFdO1xuXHRcdFx0XHRcdH0gZWxzZSBzW2VuY29kZV9jZWxsKHZhbFswXSldID0gdmFsWzFdO1xuXHRcdFx0XHRcdGlmKHJlZmd1ZXNzLmUuYyA8IHZhbFswXS5jKSByZWZndWVzcy5lLmMgPSB2YWxbMF0uYztcblx0XHRcdFx0XHRpZihyZWZndWVzcy5lLnIgPCB2YWxbMF0ucikgcmVmZ3Vlc3MuZS5yID0gdmFsWzBdLnI7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgxQjogLyogWEZPUk1BVCAqL1xuXHRcdFx0XHRcdGlmKHZhbFsweDM2YjBdKSByZWFsbmFtZXNbdmFsWzB4MzZiMF1bMF1dID0gdmFsWzB4MzZiMF1bMV07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwNjAxOiAvKiBTSEVFVElORk9RUCAqL1xuXHRcdFx0XHRcdHJlYWxuYW1lc1t2YWxbMF1dID0gdmFsWzFdOyBpZih2YWxbMF0gPT0gc2lkeCkgbiA9IHZhbFsxXTsgYnJlYWs7XG5cdFx0XHRcdGRlZmF1bHQ6IGJyZWFrO1xuXHRcdFx0fX0sIG8pO1xuXHRcdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgTE9UVVMgQk9GIFwiICsgZFsyXSk7XG5cdFx0c1tcIiFyZWZcIl0gPSBlbmNvZGVfcmFuZ2UocmVmZ3Vlc3MpO1xuXHRcdHNoZWV0c1tuZXh0X24gfHwgbl0gPSBzO1xuXHRcdHNuYW1lcy5wdXNoKG5leHRfbiB8fCBuKTtcblx0XHRpZighcmVhbG5hbWVzLmxlbmd0aCkgcmV0dXJuIHsgU2hlZXROYW1lczogc25hbWVzLCBTaGVldHM6IHNoZWV0cyB9O1xuXHRcdHZhciBvc2hlZXRzID0ge30sIHJuYW1lcyA9IFtdO1xuXHRcdC8qIFRPRE86IHZlcmlmeSBubyBjb2xsaXNpb25zICovXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHJlYWxuYW1lcy5sZW5ndGg7ICsraSkgaWYoc2hlZXRzW3NuYW1lc1tpXV0pIHtcblx0XHRcdHJuYW1lcy5wdXNoKHJlYWxuYW1lc1tpXSB8fCBzbmFtZXNbaV0pO1xuXHRcdFx0b3NoZWV0c1tyZWFsbmFtZXNbaV1dID0gc2hlZXRzW3JlYWxuYW1lc1tpXV0gfHwgc2hlZXRzW3NuYW1lc1tpXV07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHJuYW1lcy5wdXNoKHJlYWxuYW1lc1tpXSk7XG5cdFx0XHRvc2hlZXRzW3JlYWxuYW1lc1tpXV0gPSAoeyBcIiFyZWZcIjogXCJBMVwiIH0pO1xuXHRcdH1cblx0XHRyZXR1cm4geyBTaGVldE5hbWVzOiBybmFtZXMsIFNoZWV0czogb3NoZWV0cyB9O1xuXHR9XG5cblx0ZnVuY3Rpb24gc2hlZXRfdG9fd2sxKHdzLyo6V29ya3NoZWV0Ki8sIG9wdHMvKjpXcml0ZU9wdHMqLykge1xuXHRcdHZhciBvID0gb3B0cyB8fCB7fTtcblx0XHRpZigrby5jb2RlcGFnZSA+PSAwKSBzZXRfY3AoK28uY29kZXBhZ2UpO1xuXHRcdGlmKG8udHlwZSA9PSBcInN0cmluZ1wiKSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3Qgd3JpdGUgV0sxIHRvIEpTIHN0cmluZ1wiKTtcblx0XHR2YXIgYmEgPSBidWZfYXJyYXkoKTtcblx0XHR2YXIgcmFuZ2UgPSBzYWZlX2RlY29kZV9yYW5nZSh3c1tcIiFyZWZcIl0pO1xuXHRcdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkod3MpO1xuXHRcdHZhciBjb2xzID0gW107XG5cblx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMCwgd3JpdGVfQk9GX1dLMSgweDA0MDYpKTtcblx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwNiwgd3JpdGVfUkFOR0UocmFuZ2UpKTtcblx0XHR2YXIgbWF4X1IgPSBNYXRoLm1pbihyYW5nZS5lLnIsIDgxOTEpO1xuXHRcdGZvcih2YXIgUiA9IHJhbmdlLnMucjsgUiA8PSBtYXhfUjsgKytSKSB7XG5cdFx0XHR2YXIgcnIgPSBlbmNvZGVfcm93KFIpO1xuXHRcdFx0Zm9yKHZhciBDID0gcmFuZ2Uucy5jOyBDIDw9IHJhbmdlLmUuYzsgKytDKSB7XG5cdFx0XHRcdGlmKFIgPT09IHJhbmdlLnMucikgY29sc1tDXSA9IGVuY29kZV9jb2woQyk7XG5cdFx0XHRcdHZhciByZWYgPSBjb2xzW0NdICsgcnI7XG5cdFx0XHRcdHZhciBjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXSA6IHdzW3JlZl07XG5cdFx0XHRcdGlmKCFjZWxsIHx8IGNlbGwudCA9PSBcInpcIikgY29udGludWU7XG5cdFx0XHRcdC8qIFRPRE86IGZvcm11bGEgcmVjb3JkcyAqL1xuXHRcdFx0XHRpZihjZWxsLnQgPT0gXCJuXCIpIHtcblx0XHRcdFx0XHRpZigoY2VsbC52fDApPT1jZWxsLnYgJiYgY2VsbC52ID49IC0zMjc2OCAmJiBjZWxsLnYgPD0gMzI3NjcpIHdyaXRlX2JpZmZfcmVjKGJhLCAweDBkLCB3cml0ZV9JTlRFR0VSKFIsIEMsIGNlbGwudikpO1xuXHRcdFx0XHRcdGVsc2Ugd3JpdGVfYmlmZl9yZWMoYmEsIDB4MGUsIHdyaXRlX05VTUJFUihSLCBDLCBjZWxsLnYpKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgc3RyID0gZm9ybWF0X2NlbGwoY2VsbCk7XG5cdFx0XHRcdFx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MEYsIHdyaXRlX0xBQkVMKFIsIEMsIHN0ci5zbGljZSgwLCAyMzkpKSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMSk7XG5cdFx0cmV0dXJuIGJhLmVuZCgpO1xuXHR9XG5cblx0ZnVuY3Rpb24gYm9va190b193azMod2IvKjpXb3JrYm9vayovLCBvcHRzLyo6V3JpdGVPcHRzKi8pIHtcblx0XHR2YXIgbyA9IG9wdHMgfHwge307XG5cdFx0aWYoK28uY29kZXBhZ2UgPj0gMCkgc2V0X2NwKCtvLmNvZGVwYWdlKTtcblx0XHRpZihvLnR5cGUgPT0gXCJzdHJpbmdcIikgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IHdyaXRlIFdLMyB0byBKUyBzdHJpbmdcIik7XG5cdFx0dmFyIGJhID0gYnVmX2FycmF5KCk7XG5cblx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMCwgd3JpdGVfQk9GX1dLMyh3YikpO1xuXG5cdFx0Zm9yKHZhciBpID0gMCwgY250ID0gMDsgaSA8IHdiLlNoZWV0TmFtZXMubGVuZ3RoOyArK2kpIGlmKCh3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1tpXV0gfHwge30pW1wiIXJlZlwiXSkgd3JpdGVfYmlmZl9yZWMoYmEsIDB4MWIsIHdyaXRlX1hGT1JNQVRfU0hFRVROQU1FKHdiLlNoZWV0TmFtZXNbaV0sIGNudCsrKSk7XG5cblx0XHR2YXIgd3NpZHggPSAwO1xuXHRcdGZvcihpID0gMDsgaSA8IHdiLlNoZWV0TmFtZXMubGVuZ3RoOyArK2kpIHtcblx0XHRcdHZhciB3cyA9IHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2ldXTtcblx0XHRcdGlmKCF3cyB8fCAhd3NbXCIhcmVmXCJdKSBjb250aW51ZTtcblx0XHRcdHZhciByYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzW1wiIXJlZlwiXSk7XG5cdFx0XHR2YXIgZGVuc2UgPSBBcnJheS5pc0FycmF5KHdzKTtcblx0XHRcdHZhciBjb2xzID0gW107XG5cdFx0XHR2YXIgbWF4X1IgPSBNYXRoLm1pbihyYW5nZS5lLnIsIDgxOTEpO1xuXHRcdFx0Zm9yKHZhciBSID0gcmFuZ2Uucy5yOyBSIDw9IG1heF9SOyArK1IpIHtcblx0XHRcdFx0dmFyIHJyID0gZW5jb2RlX3JvdyhSKTtcblx0XHRcdFx0Zm9yKHZhciBDID0gcmFuZ2Uucy5jOyBDIDw9IHJhbmdlLmUuYzsgKytDKSB7XG5cdFx0XHRcdFx0aWYoUiA9PT0gcmFuZ2Uucy5yKSBjb2xzW0NdID0gZW5jb2RlX2NvbChDKTtcblx0XHRcdFx0XHR2YXIgcmVmID0gY29sc1tDXSArIHJyO1xuXHRcdFx0XHRcdHZhciBjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXSA6IHdzW3JlZl07XG5cdFx0XHRcdFx0aWYoIWNlbGwgfHwgY2VsbC50ID09IFwielwiKSBjb250aW51ZTtcblx0XHRcdFx0XHQvKiBUT0RPOiBGT1JNVUxBMTkgTlVNQkVSMTggcmVjb3JkcyAqL1xuXHRcdFx0XHRcdGlmKGNlbGwudCA9PSBcIm5cIikge1xuXHRcdFx0XHRcdFx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MTcsIHdyaXRlX05VTUJFUl8xNyhSLCBDLCB3c2lkeCwgY2VsbC52KSk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHZhciBzdHIgPSBmb3JtYXRfY2VsbChjZWxsKTtcblx0XHRcdFx0XHRcdC8qIFRPRE86IG1heCBsZW4/ICovXG5cdFx0XHRcdFx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgxNiwgd3JpdGVfTEFCRUxfMTYoUiwgQywgd3NpZHgsIHN0ci5zbGljZSgwLCAyMzkpKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHQrK3dzaWR4O1xuXHRcdH1cblxuXHRcdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAxKTtcblx0XHRyZXR1cm4gYmEuZW5kKCk7XG5cdH1cblxuXG5cdGZ1bmN0aW9uIHdyaXRlX0JPRl9XSzEodi8qOm51bWJlciovKSB7XG5cdFx0dmFyIG91dCA9IG5ld19idWYoMik7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDIsIHYpO1xuXHRcdHJldHVybiBvdXQ7XG5cdH1cblxuXHRmdW5jdGlvbiB3cml0ZV9CT0ZfV0szKHdiLyo6V29ya2Jvb2sqLykge1xuXHRcdHZhciBvdXQgPSBuZXdfYnVmKDI2KTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHgxMDAwKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHgwMDA0KTtcblx0XHRvdXQud3JpdGVfc2hpZnQoNCwgMHgwMDAwKTtcblx0XHR2YXIgcm93cyA9IDAsIGNvbHMgPSAwLCB3c2NudCA9IDA7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHdiLlNoZWV0TmFtZXMubGVuZ3RoOyArK2kpIHtcblx0XHRcdHZhciBuYW1lID0gd2IuU2hlZXROYW1lc1tpXTtcblx0XHRcdHZhciB3cyA9IHdiLlNoZWV0c1tuYW1lXTtcblx0XHRcdGlmKCF3cyB8fCAhd3NbXCIhcmVmXCJdKSBjb250aW51ZTtcblx0XHRcdCsrd3NjbnQ7XG5cdFx0XHR2YXIgcmFuZ2UgPSBkZWNvZGVfcmFuZ2Uod3NbXCIhcmVmXCJdKTtcblx0XHRcdGlmKHJvd3MgPCByYW5nZS5lLnIpIHJvd3MgPSByYW5nZS5lLnI7XG5cdFx0XHRpZihjb2xzIDwgcmFuZ2UuZS5jKSBjb2xzID0gcmFuZ2UuZS5jO1xuXHRcdH1cblx0XHRpZihyb3dzID4gODE5MSkgcm93cyA9IDgxOTE7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDIsIHJvd3MpO1xuXHRcdG91dC53cml0ZV9zaGlmdCgxLCB3c2NudCk7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDEsIGNvbHMpO1xuXHRcdG91dC53cml0ZV9zaGlmdCgyLCAweDAwKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgMHgwMCk7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDEsIDB4MDEpO1xuXHRcdG91dC53cml0ZV9zaGlmdCgxLCAweDAyKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0b3V0LndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdHJldHVybiBvdXQ7XG5cdH1cblxuXHRmdW5jdGlvbiBwYXJzZV9SQU5HRShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0XHR2YXIgbyA9IHtzOntjOjAscjowfSxlOntjOjAscjowfX07XG5cdFx0aWYobGVuZ3RoID09IDggJiYgb3B0cy5xcHJvKSB7XG5cdFx0XHRvLnMuYyA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0XHRcdGJsb2IubCsrO1xuXHRcdFx0by5zLnIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0XHRvLmUuYyA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0XHRcdGJsb2IubCsrO1xuXHRcdFx0by5lLnIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0XHRyZXR1cm4gbztcblx0XHR9XG5cdFx0by5zLmMgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0by5zLnIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0aWYobGVuZ3RoID09IDEyICYmIG9wdHMucXBybykgYmxvYi5sICs9IDI7XG5cdFx0by5lLmMgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0by5lLnIgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0aWYobGVuZ3RoID09IDEyICYmIG9wdHMucXBybykgYmxvYi5sICs9IDI7XG5cdFx0aWYoby5zLmMgPT0gMHhGRkZGKSBvLnMuYyA9IG8uZS5jID0gby5zLnIgPSBvLmUuciA9IDA7XG5cdFx0cmV0dXJuIG87XG5cdH1cblx0ZnVuY3Rpb24gd3JpdGVfUkFOR0UocmFuZ2UpIHtcblx0XHR2YXIgb3V0ID0gbmV3X2J1Zig4KTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgcmFuZ2Uucy5jKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgcmFuZ2Uucy5yKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgcmFuZ2UuZS5jKTtcblx0XHRvdXQud3JpdGVfc2hpZnQoMiwgcmFuZ2UuZS5yKTtcblx0XHRyZXR1cm4gb3V0O1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFyc2VfY2VsbChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0XHR2YXIgbyA9IFt7YzowLHI6MH0sIHt0OiduJyx2OjB9LCAwLCAwXTtcblx0XHRpZihvcHRzLnFwcm8gJiYgb3B0cy52ZXJzICE9IDB4NTEyMCkge1xuXHRcdFx0b1swXS5jID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRcdFx0b1szXSA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0XHRcdG9bMF0uciA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHRcdGJsb2IubCs9Mjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0b1syXSA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0XHRcdG9bMF0uYyA9IGJsb2IucmVhZF9zaGlmdCgyKTsgb1swXS5yID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRcdH1cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX0xBQkVMKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRcdHZhciB0Z3QgPSBibG9iLmwgKyBsZW5ndGg7XG5cdFx0dmFyIG8gPSBwYXJzZV9jZWxsKGJsb2IsIGxlbmd0aCwgb3B0cyk7XG5cdFx0b1sxXS50ID0gJ3MnO1xuXHRcdGlmKG9wdHMudmVycyA9PSAweDUxMjApIHtcblx0XHRcdGJsb2IubCsrO1xuXHRcdFx0dmFyIGxlbiA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0XHRcdG9bMV0udiA9IGJsb2IucmVhZF9zaGlmdChsZW4sICd1dGY4Jyk7XG5cdFx0XHRyZXR1cm4gbztcblx0XHR9XG5cdFx0aWYob3B0cy5xcHJvKSBibG9iLmwrKztcblx0XHRvWzFdLnYgPSBibG9iLnJlYWRfc2hpZnQodGd0IC0gYmxvYi5sLCAnY3N0cicpO1xuXHRcdHJldHVybiBvO1xuXHR9XG5cdGZ1bmN0aW9uIHdyaXRlX0xBQkVMKFIsIEMsIHMpIHtcblx0XHQvKiBUT0RPOiBlbmNvZGluZyAqL1xuXHRcdHZhciBvID0gbmV3X2J1Zig3ICsgcy5sZW5ndGgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMHhGRik7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBDKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIFIpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMHgyNyk7IC8vID8/XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG8ubGVuZ3RoOyArK2kpIHtcblx0XHRcdHZhciBjYyA9IHMuY2hhckNvZGVBdChpKTtcblx0XHRcdG8ud3JpdGVfc2hpZnQoMSwgY2MgPj0gMHg4MCA/IDB4NUYgOiBjYyk7XG5cdFx0fVxuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMCk7XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBwYXJzZV9JTlRFR0VSKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRcdHZhciBvID0gcGFyc2VfY2VsbChibG9iLCBsZW5ndGgsIG9wdHMpO1xuXHRcdG9bMV0udiA9IGJsb2IucmVhZF9zaGlmdCgyLCAnaScpO1xuXHRcdHJldHVybiBvO1xuXHR9XG5cdGZ1bmN0aW9uIHdyaXRlX0lOVEVHRVIoUiwgQywgdikge1xuXHRcdHZhciBvID0gbmV3X2J1Zig3KTtcblx0XHRvLndyaXRlX3NoaWZ0KDEsIDB4RkYpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgQyk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBSKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIHYsICdpJyk7XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRmdW5jdGlvbiBwYXJzZV9OVU1CRVIoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdFx0dmFyIG8gPSBwYXJzZV9jZWxsKGJsb2IsIGxlbmd0aCwgb3B0cyk7XG5cdFx0b1sxXS52ID0gYmxvYi5yZWFkX3NoaWZ0KDgsICdmJyk7XG5cdFx0cmV0dXJuIG87XG5cdH1cblx0ZnVuY3Rpb24gd3JpdGVfTlVNQkVSKFIsIEMsIHYpIHtcblx0XHR2YXIgbyA9IG5ld19idWYoMTMpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMHhGRik7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBDKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIFIpO1xuXHRcdG8ud3JpdGVfc2hpZnQoOCwgdiwgJ2YnKTtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX0ZPUk1VTEEoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdFx0dmFyIHRndCA9IGJsb2IubCArIGxlbmd0aDtcblx0XHR2YXIgbyA9IHBhcnNlX2NlbGwoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0XHQvKiBUT0RPOiBmb3JtdWxhICovXG5cdFx0b1sxXS52ID0gYmxvYi5yZWFkX3NoaWZ0KDgsICdmJyk7XG5cdFx0aWYob3B0cy5xcHJvKSBibG9iLmwgPSB0Z3Q7XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgZmxlbiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHRcdHdrMV9mbWxhX3RvX2NzZihibG9iLnNsaWNlKGJsb2IubCwgYmxvYi5sICsgZmxlbiksIG8pO1xuXHRcdFx0YmxvYi5sICs9IGZsZW47XG5cdFx0fVxuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gd2sxX3BhcnNlX3JjKEIsIFYsIGNvbCkge1xuXHRcdHZhciByZWwgPSBWICYgMHg4MDAwO1xuXHRcdFYgJj0gfjB4ODAwMDtcblx0XHRWID0gKHJlbCA/IEIgOiAwKSArICgoViA+PSAweDIwMDApID8gViAtIDB4NDAwMCA6IFYpO1xuXHRcdHJldHVybiAocmVsID8gXCJcIiA6IFwiJFwiKSArIChjb2wgPyBlbmNvZGVfY29sKFYpIDogZW5jb2RlX3JvdyhWKSk7XG5cdH1cblx0LyogdmFyIG9wcmVjID0gW1xuXHRcdDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDYsIDQsIDQsIDUsIDUsIDcsIDMsIDMsXG5cdFx0MywgMywgMywgMywgMSwgMSwgMiwgNiwgOCwgOCwgOCwgOCwgOCwgOCwgOCwgOFxuXHRdOyAqL1xuXHQvKiBUT0RPOiBmbGVzaCBvdXQgKi9cblx0dmFyIEZ1bmNUYWIgPSB7XG5cdFx0MHgzMzogW1wiRkFMU0VcIiwgMF0sXG5cdFx0MHgzNDogW1wiVFJVRVwiLCAwXSxcblx0XHQweDQ2OiBbXCJMRU5cIiwgMV0sXG5cdFx0MHg1MDogW1wiU1VNXCIsIDY5XSxcblx0XHQweDUxOiBbXCJBVkVSQUdFQVwiLCA2OV0sXG5cdFx0MHg1MjogW1wiQ09VTlRBXCIsIDY5XSxcblx0XHQweDUzOiBbXCJNSU5BXCIsIDY5XSxcblx0XHQweDU0OiBbXCJNQVhBXCIsIDY5XSxcblx0XHQweDZGOiBbXCJUXCIsIDFdXG5cdH07XG5cdHZhciBCaW5PcFRhYiA9IFtcblx0XHQgIFwiXCIsICAgXCJcIiwgICBcIlwiLCAgIFwiXCIsICAgXCJcIiwgICBcIlwiLCAgIFwiXCIsICAgXCJcIiwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1taXhlZC1zcGFjZXMtYW5kLXRhYnNcblx0XHQgIFwiXCIsICBcIitcIiwgIFwiLVwiLCAgXCIqXCIsICBcIi9cIiwgIFwiXlwiLCAgXCI9XCIsIFwiPD5cIiwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1taXhlZC1zcGFjZXMtYW5kLXRhYnNcblx0XHRcIjw9XCIsIFwiPj1cIiwgIFwiPFwiLCAgXCI+XCIsICAgXCJcIiwgICBcIlwiLCAgIFwiXCIsICAgXCJcIiwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1taXhlZC1zcGFjZXMtYW5kLXRhYnNcblx0XHQgXCImXCIsICAgXCJcIiwgICBcIlwiLCAgIFwiXCIsICAgXCJcIiwgICBcIlwiLCAgIFwiXCIsICAgXCJcIiAgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1taXhlZC1zcGFjZXMtYW5kLXRhYnNcblx0XTtcblxuXHRmdW5jdGlvbiB3azFfZm1sYV90b19jc2YoYmxvYiwgbykge1xuXHRcdHByZXBfYmxvYihibG9iLCAwKTtcblx0XHR2YXIgb3V0ID0gW10sIGFyZ2MgPSAwLCBSID0gXCJcIiwgQyA9IFwiXCIsIGFyZ0wgPSBcIlwiLCBhcmdSID0gXCJcIjtcblx0XHR3aGlsZShibG9iLmwgPCBibG9iLmxlbmd0aCkge1xuXHRcdFx0dmFyIGNjID0gYmxvYltibG9iLmwrK107XG5cdFx0XHRzd2l0Y2goY2MpIHtcblx0XHRcdFx0Y2FzZSAweDAwOiBvdXQucHVzaChibG9iLnJlYWRfc2hpZnQoOCwgJ2YnKSk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDE6IHtcblx0XHRcdFx0XHRDID0gd2sxX3BhcnNlX3JjKG9bMF0uYywgYmxvYi5yZWFkX3NoaWZ0KDIpLCB0cnVlKTtcblx0XHRcdFx0XHRSID0gd2sxX3BhcnNlX3JjKG9bMF0uciwgYmxvYi5yZWFkX3NoaWZ0KDIpLCBmYWxzZSk7XG5cdFx0XHRcdFx0b3V0LnB1c2goQyArIFIpO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDI6IHtcblx0XHRcdFx0XHR2YXIgYyA9IHdrMV9wYXJzZV9yYyhvWzBdLmMsIGJsb2IucmVhZF9zaGlmdCgyKSwgdHJ1ZSk7XG5cdFx0XHRcdFx0dmFyIHIgPSB3azFfcGFyc2VfcmMob1swXS5yLCBibG9iLnJlYWRfc2hpZnQoMiksIGZhbHNlKTtcblx0XHRcdFx0XHRDID0gd2sxX3BhcnNlX3JjKG9bMF0uYywgYmxvYi5yZWFkX3NoaWZ0KDIpLCB0cnVlKTtcblx0XHRcdFx0XHRSID0gd2sxX3BhcnNlX3JjKG9bMF0uciwgYmxvYi5yZWFkX3NoaWZ0KDIpLCBmYWxzZSk7XG5cdFx0XHRcdFx0b3V0LnB1c2goYyArIHIgKyBcIjpcIiArIEMgKyBSKTtcblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAzOlxuXHRcdFx0XHRcdGlmKGJsb2IubCA8IGJsb2IubGVuZ3RoKSB7IGNvbnNvbGUuZXJyb3IoXCJXSzEgcHJlbWF0dXJlIGZvcm11bGEgZW5kXCIpOyByZXR1cm47IH1cblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDA0OiBvdXQucHVzaChcIihcIiArIG91dC5wb3AoKSArIFwiKVwiKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwNTogb3V0LnB1c2goYmxvYi5yZWFkX3NoaWZ0KDIpKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwNjoge1xuXHRcdFx0XHRcdC8qIFRPRE86IHRleHQgZW5jb2RpbmcgKi9cblx0XHRcdFx0XHR2YXIgWiA9IFwiXCI7IHdoaWxlKChjYyA9IGJsb2JbYmxvYi5sKytdKSkgWiArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGNjKTtcblx0XHRcdFx0XHRvdXQucHVzaCgnXCInICsgWi5yZXBsYWNlKC9cIi9nLCAnXCJcIicpICsgJ1wiJyk7XG5cdFx0XHRcdH0gYnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAweDA4OiBvdXQucHVzaChcIi1cIiArIG91dC5wb3AoKSk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MTc6IG91dC5wdXNoKFwiK1wiICsgb3V0LnBvcCgpKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgxNjogb3V0LnB1c2goXCJOT1QoXCIgKyBvdXQucG9wKCkgKyBcIilcIik7IGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgMHgxNDogY2FzZSAweDE1OiB7XG5cdFx0XHRcdFx0YXJnUiA9IG91dC5wb3AoKTsgYXJnTCA9IG91dC5wb3AoKTtcblx0XHRcdFx0XHRvdXQucHVzaChbXCJBTkRcIiwgXCJPUlwiXVtjYyAtIDB4MTRdICsgXCIoXCIgKyBhcmdMICsgXCIsXCIgKyBhcmdSICsgXCIpXCIpO1xuXHRcdFx0XHR9IGJyZWFrO1xuXG5cdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0aWYoY2MgPCAweDIwICYmIEJpbk9wVGFiW2NjXSkge1xuXHRcdFx0XHRcdFx0YXJnUiA9IG91dC5wb3AoKTsgYXJnTCA9IG91dC5wb3AoKTtcblx0XHRcdFx0XHRcdG91dC5wdXNoKGFyZ0wgKyBCaW5PcFRhYltjY10gKyBhcmdSKTtcblx0XHRcdFx0XHR9IGVsc2UgaWYoRnVuY1RhYltjY10pIHtcblx0XHRcdFx0XHRcdGFyZ2MgPSBGdW5jVGFiW2NjXVsxXTtcblx0XHRcdFx0XHRcdGlmKGFyZ2MgPT0gNjkpIGFyZ2MgPSBibG9iW2Jsb2IubCsrXTtcblx0XHRcdFx0XHRcdGlmKGFyZ2MgPiBvdXQubGVuZ3RoKSB7IGNvbnNvbGUuZXJyb3IoXCJXSzEgYmFkIGZvcm11bGEgcGFyc2UgMHhcIiArIGNjLnRvU3RyaW5nKDE2KSArIFwiOnxcIiArIG91dC5qb2luKFwifFwiKSArIFwifFwiKTsgcmV0dXJuOyB9XG5cdFx0XHRcdFx0XHR2YXIgYXJncyA9IG91dC5zbGljZSgtYXJnYyk7XG5cdFx0XHRcdFx0XHRvdXQubGVuZ3RoIC09IGFyZ2M7XG5cdFx0XHRcdFx0XHRvdXQucHVzaChGdW5jVGFiW2NjXVswXSArIFwiKFwiICsgYXJncy5qb2luKFwiLFwiKSArIFwiKVwiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZWxzZSBpZihjYyA8PSAweDA3KSByZXR1cm4gY29uc29sZS5lcnJvcihcIldLMSBpbnZhbGlkIG9wY29kZSBcIiArIGNjLnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRcdFx0ZWxzZSBpZihjYyA8PSAweDE4KSByZXR1cm4gY29uc29sZS5lcnJvcihcIldLMSB1bnN1cHBvcnRlZCBvcCBcIiArIGNjLnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRcdFx0ZWxzZSBpZihjYyA8PSAweDFFKSByZXR1cm4gY29uc29sZS5lcnJvcihcIldLMSBpbnZhbGlkIG9wY29kZSBcIiArIGNjLnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRcdFx0ZWxzZSBpZihjYyA8PSAweDczKSByZXR1cm4gY29uc29sZS5lcnJvcihcIldLMSB1bnN1cHBvcnRlZCBmdW5jdGlvbiBvcGNvZGUgXCIgKyBjYy50b1N0cmluZygxNikpO1xuXHRcdFx0XHRcdC8vIHBvc3NpYmxlIGZ1dHVyZSBmdW5jdGlvbnMgPz9cblx0XHRcdFx0XHRlbHNlIHJldHVybiBjb25zb2xlLmVycm9yKFwiV0sxIHVucmVjb2duaXplZCBvcGNvZGUgXCIgKyBjYy50b1N0cmluZygxNikpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZihvdXQubGVuZ3RoID09IDEpIG9bMV0uZiA9IFwiXCIgKyBvdXRbMF07XG5cdFx0ZWxzZSBjb25zb2xlLmVycm9yKFwiV0sxIGJhZCBmb3JtdWxhIHBhcnNlIHxcIiArIG91dC5qb2luKFwifFwiKSArIFwifFwiKTtcblx0fVxuXG5cblx0ZnVuY3Rpb24gcGFyc2VfY2VsbF8zKGJsb2IvKjo6LCBsZW5ndGgqLykge1xuXHRcdHZhciBvID0gW3tjOjAscjowfSwge3Q6J24nLHY6MH0sIDBdO1xuXHRcdG9bMF0uciA9IGJsb2IucmVhZF9zaGlmdCgyKTsgb1szXSA9IGJsb2JbYmxvYi5sKytdOyBvWzBdLmMgPSBibG9iW2Jsb2IubCsrXTtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX0xBQkVMXzE2KGJsb2IsIGxlbmd0aCkge1xuXHRcdHZhciBvID0gcGFyc2VfY2VsbF8zKGJsb2IsIGxlbmd0aCk7XG5cdFx0b1sxXS50ID0gJ3MnO1xuXHRcdG9bMV0udiA9IGJsb2IucmVhZF9zaGlmdChsZW5ndGggLSA0LCAnY3N0cicpO1xuXHRcdHJldHVybiBvO1xuXHR9XG5cdGZ1bmN0aW9uIHdyaXRlX0xBQkVMXzE2KFIsIEMsIHdzaWR4LCBzKSB7XG5cdFx0LyogVE9ETzogZW5jb2RpbmcgKi9cblx0XHR2YXIgbyA9IG5ld19idWYoNiArIHMubGVuZ3RoKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIFIpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgd3NpZHgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgQyk7XG5cdFx0by53cml0ZV9zaGlmdCgxLCAweDI3KTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgcy5sZW5ndGg7ICsraSkge1xuXHRcdFx0dmFyIGNjID0gcy5jaGFyQ29kZUF0KGkpO1xuXHRcdFx0by53cml0ZV9zaGlmdCgxLCBjYyA+PSAweDgwID8gMHg1RiA6IGNjKTtcblx0XHR9XG5cdFx0by53cml0ZV9zaGlmdCgxLCAwKTtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX05VTUJFUl8xOChibG9iLCBsZW5ndGgpIHtcblx0XHR2YXIgbyA9IHBhcnNlX2NlbGxfMyhibG9iLCBsZW5ndGgpO1xuXHRcdG9bMV0udiA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHR2YXIgdiA9IG9bMV0udiA+PiAxO1xuXHRcdGlmKG9bMV0udiAmIDB4MSkge1xuXHRcdFx0c3dpdGNoKHYgJiAweDA3KSB7XG5cdFx0XHRcdGNhc2UgMDogdiA9ICh2ID4+IDMpICogNTAwMDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMTogdiA9ICh2ID4+IDMpICogNTAwOyBicmVhaztcblx0XHRcdFx0Y2FzZSAyOiB2ID0gKHYgPj4gMykgLyAyMDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMzogdiA9ICh2ID4+IDMpIC8gMjAwOyBicmVhaztcblx0XHRcdFx0Y2FzZSA0OiB2ID0gKHYgPj4gMykgLyAyMDAwOyBicmVhaztcblx0XHRcdFx0Y2FzZSA1OiB2ID0gKHYgPj4gMykgLyAyMDAwMDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgNjogdiA9ICh2ID4+IDMpIC8gMTY7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDc6IHYgPSAodiA+PiAzKSAvIDY0OyBicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0b1sxXS52ID0gdjtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX05VTUJFUl8xNyhibG9iLCBsZW5ndGgpIHtcblx0XHR2YXIgbyA9IHBhcnNlX2NlbGxfMyhibG9iLCBsZW5ndGgpO1xuXHRcdHZhciB2MSA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0XHR2YXIgdjIgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdFx0dmFyIGUgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdFx0aWYoZSA9PSAweEZGRkYpIHtcblx0XHRcdGlmKHYxID09PSAwICYmIHYyID09PSAweEMwMDAwMDAwKSB7IG9bMV0udCA9IFwiZVwiOyBvWzFdLnYgPSAweDBGOyB9IC8vIEVSUiAtPiAjVkFMVUUhXG5cdFx0XHRlbHNlIGlmKHYxID09PSAwICYmIHYyID09PSAweEQwMDAwMDAwKSB7IG9bMV0udCA9IFwiZVwiOyBvWzFdLnYgPSAweDJBOyB9IC8vIE5BIC0+ICNOL0Fcblx0XHRcdGVsc2Ugb1sxXS52ID0gMDtcblx0XHRcdHJldHVybiBvO1xuXHRcdH1cblx0XHR2YXIgcyA9IGUgJiAweDgwMDA7IGUgPSAoZSYweDdGRkYpIC0gMTY0NDY7XG5cdFx0b1sxXS52ID0gKDEgLSBzKjIpICogKHYyICogTWF0aC5wb3coMiwgZSszMikgKyB2MSAqIE1hdGgucG93KDIsIGUpKTtcblx0XHRyZXR1cm4gbztcblx0fVxuXHRmdW5jdGlvbiB3cml0ZV9OVU1CRVJfMTcoUiwgQywgd3NpZHgsIHYpIHtcblx0XHR2YXIgbyA9IG5ld19idWYoMTQpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgUik7XG5cdFx0by53cml0ZV9zaGlmdCgxLCB3c2lkeCk7XG5cdFx0by53cml0ZV9zaGlmdCgxLCBDKTtcblx0XHRpZih2ID09IDApIHtcblx0XHRcdG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdFx0XHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRcdFx0by53cml0ZV9zaGlmdCgyLCAweEZGRkYpO1xuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHRcdHZhciBzID0gMCwgZSA9IDAsIHYxID0gMCwgdjIgPSAwO1xuXHRcdGlmKHYgPCAwKSB7IHMgPSAxOyB2ID0gLXY7IH1cblx0XHRlID0gTWF0aC5sb2cyKHYpIHwgMDtcblx0XHR2IC89IE1hdGgucG93KDIsIGUtMzEpO1xuXHRcdHYyID0gKHYpPj4+MDtcblx0XHRpZigodjImMHg4MDAwMDAwMCkgPT0gMCkgeyB2Lz0yOyArK2U7IHYyID0gdiA+Pj4gMDsgfVxuXHRcdHYgLT0gdjI7XG5cdFx0djIgfD0gMHg4MDAwMDAwMDtcblx0XHR2MiA+Pj49IDA7XG5cdFx0diAqPSBNYXRoLnBvdygyLCAzMik7XG5cdFx0djEgPSB2Pj4+MDtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIHYxKTtcblx0XHRvLndyaXRlX3NoaWZ0KDQsIHYyKTtcblx0XHRlICs9IDB4M0ZGRiArIChzID8gMHg4MDAwIDogMCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCBlKTtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX0ZPUk1VTEFfMTkoYmxvYiwgbGVuZ3RoKSB7XG5cdFx0dmFyIG8gPSBwYXJzZV9OVU1CRVJfMTcoYmxvYiwgMTQpO1xuXHRcdGJsb2IubCArPSBsZW5ndGggLSAxNDsgLyogVE9ETzogV0szIGZvcm11bGEgKi9cblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX05VTUJFUl8yNShibG9iLCBsZW5ndGgpIHtcblx0XHR2YXIgbyA9IHBhcnNlX2NlbGxfMyhibG9iLCBsZW5ndGgpO1xuXHRcdHZhciB2MSA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0XHRvWzFdLnYgPSB2MSA+PiA2O1xuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFyc2VfTlVNQkVSXzI3KGJsb2IsIGxlbmd0aCkge1xuXHRcdHZhciBvID0gcGFyc2VfY2VsbF8zKGJsb2IsIGxlbmd0aCk7XG5cdFx0dmFyIHYxID0gYmxvYi5yZWFkX3NoaWZ0KDgsJ2YnKTtcblx0XHRvWzFdLnYgPSB2MTtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX0ZPUk1VTEFfMjgoYmxvYiwgbGVuZ3RoKSB7XG5cdFx0dmFyIG8gPSBwYXJzZV9OVU1CRVJfMjcoYmxvYiwgMTQpO1xuXHRcdGJsb2IubCArPSBsZW5ndGggLSAxMDsgLyogVE9ETzogZm9ybXVsYSAqL1xuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFyc2VfU0hFRVROQU1FQ1MoYmxvYiwgbGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGJsb2JbYmxvYi5sICsgbGVuZ3RoIC0gMV0gPT0gMCA/IGJsb2IucmVhZF9zaGlmdChsZW5ndGgsICdjc3RyJykgOiBcIlwiO1xuXHR9XG5cblx0ZnVuY3Rpb24gcGFyc2VfU0hFRVROQU1FTFAoYmxvYiwgbGVuZ3RoKSB7XG5cdFx0dmFyIGxlbiA9IGJsb2JbYmxvYi5sKytdO1xuXHRcdGlmKGxlbiA+IGxlbmd0aCAtIDEpIGxlbiA9IGxlbmd0aCAtIDE7XG5cdFx0dmFyIG8gPSBcIlwiOyB3aGlsZShvLmxlbmd0aCA8IGxlbikgbyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJsb2JbYmxvYi5sKytdKTtcblx0XHRyZXR1cm4gbztcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX1NIRUVUSU5GT1FQKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRcdGlmKCFvcHRzLnFwcm8gfHwgbGVuZ3RoIDwgMjEpIHJldHVybjtcblx0XHR2YXIgaWQgPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdFx0YmxvYi5sICs9IDE3O1xuXHRcdGJsb2IubCArPSAxOyAvL3ZhciBsZW4gPSBibG9iLnJlYWRfc2hpZnQoMSk7XG5cdFx0YmxvYi5sICs9IDI7XG5cdFx0dmFyIG5tID0gYmxvYi5yZWFkX3NoaWZ0KGxlbmd0aCAtIDIxLCAnY3N0cicpO1xuXHRcdHJldHVybiBbaWQsIG5tXTtcblx0fVxuXG5cdGZ1bmN0aW9uIHBhcnNlX1hGT1JNQVQoYmxvYiwgbGVuZ3RoKSB7XG5cdFx0dmFyIG8gPSB7fSwgdGd0ID0gYmxvYi5sICsgbGVuZ3RoO1xuXHRcdHdoaWxlKGJsb2IubCA8IHRndCkge1xuXHRcdFx0dmFyIGR0ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRcdFx0aWYoZHQgPT0gMHgzNmIwKSB7XG5cdFx0XHRcdG9bZHRdID0gWzAsIFwiXCJdO1xuXHRcdFx0XHRvW2R0XVswXSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHRcdFx0d2hpbGUoYmxvYltibG9iLmxdKSB7IG9bZHRdWzFdICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYmxvYltibG9iLmxdKTsgYmxvYi5sKys7IH0gYmxvYi5sKys7XG5cdFx0XHR9XG5cdFx0XHQvLyBUT0RPOiAweDNhOTkgPz9cblx0XHR9XG5cdFx0cmV0dXJuIG87XG5cdH1cblx0ZnVuY3Rpb24gd3JpdGVfWEZPUk1BVF9TSEVFVE5BTUUobmFtZSwgd3NpZHgpIHtcblx0XHR2YXIgb3V0ID0gbmV3X2J1Zig1ICsgbmFtZS5sZW5ndGgpO1xuXHRcdG91dC53cml0ZV9zaGlmdCgyLCAweDM2YjApO1xuXHRcdG91dC53cml0ZV9zaGlmdCgyLCB3c2lkeCk7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IG5hbWUubGVuZ3RoOyArK2kpIHtcblx0XHRcdHZhciBjYyA9IG5hbWUuY2hhckNvZGVBdChpKTtcblx0XHRcdG91dFtvdXQubCsrXSA9IGNjID4gMHg3RiA/IDB4NUYgOiBjYztcblx0XHR9XG5cdFx0b3V0W291dC5sKytdID0gMDtcblx0XHRyZXR1cm4gb3V0O1xuXHR9XG5cblx0dmFyIFdLMUVudW0gPSB7XG5cdFx0Lyo6OlsqLzB4MDAwMC8qOjpdKi86IHsgbjpcIkJPRlwiLCBmOnBhcnNldWludDE2IH0sXG5cdFx0Lyo6OlsqLzB4MDAwMS8qOjpdKi86IHsgbjpcIkVPRlwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwMi8qOjpdKi86IHsgbjpcIkNBTENNT0RFXCIgfSxcblx0XHQvKjo6WyovMHgwMDAzLyo6Ol0qLzogeyBuOlwiQ0FMQ09SREVSXCIgfSxcblx0XHQvKjo6WyovMHgwMDA0Lyo6Ol0qLzogeyBuOlwiU1BMSVRcIiB9LFxuXHRcdC8qOjpbKi8weDAwMDUvKjo6XSovOiB7IG46XCJTWU5DXCIgfSxcblx0XHQvKjo6WyovMHgwMDA2Lyo6Ol0qLzogeyBuOlwiUkFOR0VcIiwgZjpwYXJzZV9SQU5HRSB9LFxuXHRcdC8qOjpbKi8weDAwMDcvKjo6XSovOiB7IG46XCJXSU5ET1cxXCIgfSxcblx0XHQvKjo6WyovMHgwMDA4Lyo6Ol0qLzogeyBuOlwiQ09MVzFcIiB9LFxuXHRcdC8qOjpbKi8weDAwMDkvKjo6XSovOiB7IG46XCJXSU5UV09cIiB9LFxuXHRcdC8qOjpbKi8weDAwMEEvKjo6XSovOiB7IG46XCJDT0xXMlwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwQi8qOjpdKi86IHsgbjpcIk5BTUVcIiB9LFxuXHRcdC8qOjpbKi8weDAwMEMvKjo6XSovOiB7IG46XCJCTEFOS1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwRC8qOjpdKi86IHsgbjpcIklOVEVHRVJcIiwgZjpwYXJzZV9JTlRFR0VSIH0sXG5cdFx0Lyo6OlsqLzB4MDAwRS8qOjpdKi86IHsgbjpcIk5VTUJFUlwiLCBmOnBhcnNlX05VTUJFUiB9LFxuXHRcdC8qOjpbKi8weDAwMEYvKjo6XSovOiB7IG46XCJMQUJFTFwiLCBmOnBhcnNlX0xBQkVMIH0sXG5cdFx0Lyo6OlsqLzB4MDAxMC8qOjpdKi86IHsgbjpcIkZPUk1VTEFcIiwgZjpwYXJzZV9GT1JNVUxBIH0sXG5cdFx0Lyo6OlsqLzB4MDAxOC8qOjpdKi86IHsgbjpcIlRBQkxFXCIgfSxcblx0XHQvKjo6WyovMHgwMDE5Lyo6Ol0qLzogeyBuOlwiT1JBTkdFXCIgfSxcblx0XHQvKjo6WyovMHgwMDFBLyo6Ol0qLzogeyBuOlwiUFJBTkdFXCIgfSxcblx0XHQvKjo6WyovMHgwMDFCLyo6Ol0qLzogeyBuOlwiU1JBTkdFXCIgfSxcblx0XHQvKjo6WyovMHgwMDFDLyo6Ol0qLzogeyBuOlwiRlJBTkdFXCIgfSxcblx0XHQvKjo6WyovMHgwMDFELyo6Ol0qLzogeyBuOlwiS1JBTkdFMVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyMC8qOjpdKi86IHsgbjpcIkhSQU5HRVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyMy8qOjpdKi86IHsgbjpcIktSQU5HRTJcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjQvKjo6XSovOiB7IG46XCJQUk9URUNcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjUvKjo6XSovOiB7IG46XCJGT09URVJcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjYvKjo6XSovOiB7IG46XCJIRUFERVJcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjcvKjo6XSovOiB7IG46XCJTRVRVUFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyOC8qOjpdKi86IHsgbjpcIk1BUkdJTlNcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjkvKjo6XSovOiB7IG46XCJMQUJFTEZNVFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyQS8qOjpdKi86IHsgbjpcIlRJVExFU1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyQi8qOjpdKi86IHsgbjpcIlNIRUVUSlNcIiB9LFxuXHRcdC8qOjpbKi8weDAwMkQvKjo6XSovOiB7IG46XCJHUkFQSFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyRS8qOjpdKi86IHsgbjpcIk5HUkFQSFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyRi8qOjpdKi86IHsgbjpcIkNBTENDT1VOVFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAzMC8qOjpdKi86IHsgbjpcIlVORk9STUFUVEVEXCIgfSxcblx0XHQvKjo6WyovMHgwMDMxLyo6Ol0qLzogeyBuOlwiQ1VSU09SVzEyXCIgfSxcblx0XHQvKjo6WyovMHgwMDMyLyo6Ol0qLzogeyBuOlwiV0lORE9XXCIgfSxcblx0XHQvKjo6WyovMHgwMDMzLyo6Ol0qLzogeyBuOlwiU1RSSU5HXCIsIGY6cGFyc2VfTEFCRUwgfSxcblx0XHQvKjo6WyovMHgwMDM3Lyo6Ol0qLzogeyBuOlwiUEFTU1dPUkRcIiB9LFxuXHRcdC8qOjpbKi8weDAwMzgvKjo6XSovOiB7IG46XCJMT0NLRURcIiB9LFxuXHRcdC8qOjpbKi8weDAwM0MvKjo6XSovOiB7IG46XCJRVUVSWVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAzRC8qOjpdKi86IHsgbjpcIlFVRVJZTkFNRVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAzRS8qOjpdKi86IHsgbjpcIlBSSU5UXCIgfSxcblx0XHQvKjo6WyovMHgwMDNGLyo6Ol0qLzogeyBuOlwiUFJJTlROQU1FXCIgfSxcblx0XHQvKjo6WyovMHgwMDQwLyo6Ol0qLzogeyBuOlwiR1JBUEgyXCIgfSxcblx0XHQvKjo6WyovMHgwMDQxLyo6Ol0qLzogeyBuOlwiR1JBUEhOQU1FXCIgfSxcblx0XHQvKjo6WyovMHgwMDQyLyo6Ol0qLzogeyBuOlwiWk9PTVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDA0My8qOjpdKi86IHsgbjpcIlNZTVNQTElUXCIgfSxcblx0XHQvKjo6WyovMHgwMDQ0Lyo6Ol0qLzogeyBuOlwiTlNST1dTXCIgfSxcblx0XHQvKjo6WyovMHgwMDQ1Lyo6Ol0qLzogeyBuOlwiTlNDT0xTXCIgfSxcblx0XHQvKjo6WyovMHgwMDQ2Lyo6Ol0qLzogeyBuOlwiUlVMRVJcIiB9LFxuXHRcdC8qOjpbKi8weDAwNDcvKjo6XSovOiB7IG46XCJOTkFNRVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDA0OC8qOjpdKi86IHsgbjpcIkFDT01NXCIgfSxcblx0XHQvKjo6WyovMHgwMDQ5Lyo6Ol0qLzogeyBuOlwiQU1BQ1JPXCIgfSxcblx0XHQvKjo6WyovMHgwMDRBLyo6Ol0qLzogeyBuOlwiUEFSU0VcIiB9LFxuXHRcdC8qOjpbKi8weDAwNjYvKjo6XSovOiB7IG46XCJQUkFOR0VTPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwNjcvKjo6XSovOiB7IG46XCJSUkFOR0VTPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwNjgvKjo6XSovOiB7IG46XCJGTkFNRT8/XCIgfSxcblx0XHQvKjo6WyovMHgwMDY5Lyo6Ol0qLzogeyBuOlwiTVJBTkdFUz8/XCIgfSxcblx0XHQvKjo6WyovMHgwMENDLyo6Ol0qLzogeyBuOlwiU0hFRVROQU1FQ1NcIiwgZjpwYXJzZV9TSEVFVE5BTUVDUyB9LFxuXHRcdC8qOjpbKi8weDAwREUvKjo6XSovOiB7IG46XCJTSEVFVE5BTUVMUFwiLCBmOnBhcnNlX1NIRUVUTkFNRUxQIH0sXG5cdFx0Lyo6OlsqLzB4RkZGRi8qOjpdKi86IHsgbjpcIlwiIH1cblx0fTtcblxuXHR2YXIgV0szRW51bSA9IHtcblx0XHQvKjo6WyovMHgwMDAwLyo6Ol0qLzogeyBuOlwiQk9GXCIgfSxcblx0XHQvKjo6WyovMHgwMDAxLyo6Ol0qLzogeyBuOlwiRU9GXCIgfSxcblx0XHQvKjo6WyovMHgwMDAyLyo6Ol0qLzogeyBuOlwiUEFTU1dPUkRcIiB9LFxuXHRcdC8qOjpbKi8weDAwMDMvKjo6XSovOiB7IG46XCJDQUxDU0VUXCIgfSxcblx0XHQvKjo6WyovMHgwMDA0Lyo6Ol0qLzogeyBuOlwiV0lORE9XU0VUXCIgfSxcblx0XHQvKjo6WyovMHgwMDA1Lyo6Ol0qLzogeyBuOlwiU0hFRVRDRUxMUFRSXCIgfSxcblx0XHQvKjo6WyovMHgwMDA2Lyo6Ol0qLzogeyBuOlwiU0hFRVRMQVlPVVRcIiB9LFxuXHRcdC8qOjpbKi8weDAwMDcvKjo6XSovOiB7IG46XCJDT0xVTU5XSURUSFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwOC8qOjpdKi86IHsgbjpcIkhJRERFTkNPTFVNTlwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwOS8qOjpdKi86IHsgbjpcIlVTRVJSQU5HRVwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwQS8qOjpdKi86IHsgbjpcIlNZU1RFTVJBTkdFXCIgfSxcblx0XHQvKjo6WyovMHgwMDBCLyo6Ol0qLzogeyBuOlwiWkVST0ZPUkNFXCIgfSxcblx0XHQvKjo6WyovMHgwMDBDLyo6Ol0qLzogeyBuOlwiU09SVEtFWURJUlwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAwRC8qOjpdKi86IHsgbjpcIkZJTEVTRUFMXCIgfSxcblx0XHQvKjo6WyovMHgwMDBFLyo6Ol0qLzogeyBuOlwiREFUQUZJTExOVU1TXCIgfSxcblx0XHQvKjo6WyovMHgwMDBGLyo6Ol0qLzogeyBuOlwiUFJJTlRNQUlOXCIgfSxcblx0XHQvKjo6WyovMHgwMDEwLyo6Ol0qLzogeyBuOlwiUFJJTlRTVFJJTkdcIiB9LFxuXHRcdC8qOjpbKi8weDAwMTEvKjo6XSovOiB7IG46XCJHUkFQSE1BSU5cIiB9LFxuXHRcdC8qOjpbKi8weDAwMTIvKjo6XSovOiB7IG46XCJHUkFQSFNUUklOR1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDAxMy8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMDE0Lyo6Ol0qLzogeyBuOlwiRVJSQ0VMTFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAxNS8qOjpdKi86IHsgbjpcIk5BQ0VMTFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAxNi8qOjpdKi86IHsgbjpcIkxBQkVMMTZcIiwgZjpwYXJzZV9MQUJFTF8xNn0sXG5cdFx0Lyo6OlsqLzB4MDAxNy8qOjpdKi86IHsgbjpcIk5VTUJFUjE3XCIsIGY6cGFyc2VfTlVNQkVSXzE3IH0sXG5cdFx0Lyo6OlsqLzB4MDAxOC8qOjpdKi86IHsgbjpcIk5VTUJFUjE4XCIsIGY6cGFyc2VfTlVNQkVSXzE4IH0sXG5cdFx0Lyo6OlsqLzB4MDAxOS8qOjpdKi86IHsgbjpcIkZPUk1VTEExOVwiLCBmOnBhcnNlX0ZPUk1VTEFfMTl9LFxuXHRcdC8qOjpbKi8weDAwMUEvKjo6XSovOiB7IG46XCJGT1JNVUxBMUFcIiB9LFxuXHRcdC8qOjpbKi8weDAwMUIvKjo6XSovOiB7IG46XCJYRk9STUFUXCIsIGY6cGFyc2VfWEZPUk1BVCB9LFxuXHRcdC8qOjpbKi8weDAwMUMvKjo6XSovOiB7IG46XCJEVExBQkVMTUlTQ1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDAxRC8qOjpdKi86IHsgbjpcIkRUTEFCRUxDRUxMXCIgfSxcblx0XHQvKjo6WyovMHgwMDFFLyo6Ol0qLzogeyBuOlwiR1JBUEhXSU5ET1dcIiB9LFxuXHRcdC8qOjpbKi8weDAwMUYvKjo6XSovOiB7IG46XCJDUEFcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjAvKjo6XSovOiB7IG46XCJMUExBVVRPXCIgfSxcblx0XHQvKjo6WyovMHgwMDIxLyo6Ol0qLzogeyBuOlwiUVVFUllcIiB9LFxuXHRcdC8qOjpbKi8weDAwMjIvKjo6XSovOiB7IG46XCJISURERU5TSEVFVFwiIH0sXG5cdFx0Lyo6OlsqLzB4MDAyMy8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMDI1Lyo6Ol0qLzogeyBuOlwiTlVNQkVSMjVcIiwgZjpwYXJzZV9OVU1CRVJfMjUgfSxcblx0XHQvKjo6WyovMHgwMDI2Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwMjcvKjo6XSovOiB7IG46XCJOVU1CRVIyN1wiLCBmOnBhcnNlX05VTUJFUl8yNyB9LFxuXHRcdC8qOjpbKi8weDAwMjgvKjo6XSovOiB7IG46XCJGT1JNVUxBMjhcIiwgZjpwYXJzZV9GT1JNVUxBXzI4IH0sXG5cdFx0Lyo6OlsqLzB4MDA4RS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMDkzLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwOTYvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDA5Ny8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMDk4Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwOTkvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDA5QS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMDlCLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwOUMvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDBBMy8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMEFFLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwQUYvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDBCMC8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMEIxLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwQjgvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDBCOS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMEJBLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwQkIvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDBCQy8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMEMzLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwQzkvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDBDQy8qOjpdKi86IHsgbjpcIlNIRUVUTkFNRUNTXCIsIGY6cGFyc2VfU0hFRVROQU1FQ1MgfSxcblx0XHQvKjo6WyovMHgwMENELyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAwQ0UvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDBDRi8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMEQwLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAxMDAvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDEwMy8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMTA0Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAxMDUvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDEwNi8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMTA3Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAxMDkvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDEwQS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMTBCLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAxMEMvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDEwRS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMTBGLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAxODAvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDE4NS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMTg2Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAxODkvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDE4Qy8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjAwLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyMDIvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDIwMS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjA0Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyMDUvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDI4MC8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjgxLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyODIvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDI4My8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjg0Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyODUvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDI4Ni8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjg3Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyODgvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDI5Mi8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjkzLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyOTQvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDI5NS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMjk2Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAyOTkvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDI5QS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwMzAwLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDAzMDQvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDYwMS8qOjpdKi86IHsgbjpcIlNIRUVUSU5GT1FQXCIsIGY6cGFyc2VfU0hFRVRJTkZPUVAgfSxcblx0XHQvKjo6WyovMHgwNjQwLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDA2NDIvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDcwMS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwNzAyLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDA3MDMvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDcwNC8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwNzgwLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDA4MDAvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MDgwMS8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgwODA0Lyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDBBODAvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4MkFGNi8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHgzMjMxLyo6Ol0qLzogeyBuOlwiPz9cIiB9LFxuXHRcdC8qOjpbKi8weDZFNDkvKjo6XSovOiB7IG46XCI/P1wiIH0sXG5cdFx0Lyo6OlsqLzB4NkY0NC8qOjpdKi86IHsgbjpcIj8/XCIgfSxcblx0XHQvKjo6WyovMHhGRkZGLyo6Ol0qLzogeyBuOlwiXCIgfVxuXHR9O1xuXHRyZXR1cm4ge1xuXHRcdHNoZWV0X3RvX3drMTogc2hlZXRfdG9fd2sxLFxuXHRcdGJvb2tfdG9fd2szOiBib29rX3RvX3drMyxcblx0XHR0b193b3JrYm9vazogbG90dXNfdG9fd29ya2Jvb2tcblx0fTtcbn0pKCk7XG4vKiAxOC40LjcgclByIENUX1JQckVsdCAqL1xuZnVuY3Rpb24gcGFyc2VfcnByKHJwcikge1xuXHR2YXIgZm9udCA9IHt9LCBtID0gcnByLm1hdGNoKHRhZ3JlZ2V4KSwgaSA9IDA7XG5cdHZhciBwYXNzID0gZmFsc2U7XG5cdGlmKG0pIGZvcig7aSE9bS5sZW5ndGg7ICsraSkge1xuXHRcdHZhciB5ID0gcGFyc2V4bWx0YWcobVtpXSk7XG5cdFx0c3dpdGNoKHlbMF0ucmVwbGFjZSgvXFx3KjovZyxcIlwiKSkge1xuXHRcdFx0LyogMTguOC4xMiBjb25kZW5zZSBDVF9Cb29sZWFuUHJvcGVydHkgKi9cblx0XHRcdC8qICoqIG5vdCByZXF1aXJlZCAuICovXG5cdFx0XHRjYXNlICc8Y29uZGVuc2UnOiBicmVhaztcblx0XHRcdC8qIDE4LjguMTcgZXh0ZW5kIENUX0Jvb2xlYW5Qcm9wZXJ0eSAqL1xuXHRcdFx0LyogKiogbm90IHJlcXVpcmVkIC4gKi9cblx0XHRcdGNhc2UgJzxleHRlbmQnOiBicmVhaztcblx0XHRcdC8qIDE4LjguMzYgc2hhZG93IENUX0Jvb2xlYW5Qcm9wZXJ0eSAqL1xuXHRcdFx0LyogKiogbm90IHJlcXVpcmVkIC4gKi9cblx0XHRcdGNhc2UgJzxzaGFkb3cnOlxuXHRcdFx0XHRpZigheS52YWwpIGJyZWFrO1xuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICc8c2hhZG93Pic6XG5cdFx0XHRjYXNlICc8c2hhZG93Lz4nOiBmb250LnNoYWRvdyA9IDE7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9zaGFkb3c+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjQuMSBjaGFyc2V0IENUX0ludFByb3BlcnR5IFRPRE8gKi9cblx0XHRcdGNhc2UgJzxjaGFyc2V0Jzpcblx0XHRcdFx0aWYoeS52YWwgPT0gJzEnKSBicmVhaztcblx0XHRcdFx0Zm9udC5jcCA9IENTMkNQW3BhcnNlSW50KHkudmFsLCAxMCldO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0LyogMTguNC4yIG91dGxpbmUgQ1RfQm9vbGVhblByb3BlcnR5IFRPRE8gKi9cblx0XHRcdGNhc2UgJzxvdXRsaW5lJzpcblx0XHRcdFx0aWYoIXkudmFsKSBicmVhaztcblx0XHRcdFx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdFx0Y2FzZSAnPG91dGxpbmU+Jzpcblx0XHRcdGNhc2UgJzxvdXRsaW5lLz4nOiBmb250Lm91dGxpbmUgPSAxOyBicmVhaztcblx0XHRcdGNhc2UgJzwvb3V0bGluZT4nOiBicmVhaztcblxuXHRcdFx0LyogMTguNC41IHJGb250IENUX0ZvbnROYW1lICovXG5cdFx0XHRjYXNlICc8ckZvbnQnOiBmb250Lm5hbWUgPSB5LnZhbDsgYnJlYWs7XG5cblx0XHRcdC8qIDE4LjQuMTEgc3ogQ1RfRm9udFNpemUgKi9cblx0XHRcdGNhc2UgJzxzeic6IGZvbnQuc3ogPSB5LnZhbDsgYnJlYWs7XG5cblx0XHRcdC8qIDE4LjQuMTAgc3RyaWtlIENUX0Jvb2xlYW5Qcm9wZXJ0eSAqL1xuXHRcdFx0Y2FzZSAnPHN0cmlrZSc6XG5cdFx0XHRcdGlmKCF5LnZhbCkgYnJlYWs7XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJzxzdHJpa2U+Jzpcblx0XHRcdGNhc2UgJzxzdHJpa2UvPic6IGZvbnQuc3RyaWtlID0gMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L3N0cmlrZT4nOiBicmVhaztcblxuXHRcdFx0LyogMTguNC4xMyB1IENUX1VuZGVybGluZVByb3BlcnR5ICovXG5cdFx0XHRjYXNlICc8dSc6XG5cdFx0XHRcdGlmKCF5LnZhbCkgYnJlYWs7XG5cdFx0XHRcdHN3aXRjaCh5LnZhbCkge1xuXHRcdFx0XHRcdGNhc2UgJ2RvdWJsZSc6IGZvbnQudXZhbCA9IFwiZG91YmxlXCI7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NpbmdsZUFjY291bnRpbmcnOiBmb250LnV2YWwgPSBcInNpbmdsZS1hY2NvdW50aW5nXCI7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2RvdWJsZUFjY291bnRpbmcnOiBmb250LnV2YWwgPSBcImRvdWJsZS1hY2NvdW50aW5nXCI7IGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJzx1Pic6XG5cdFx0XHRjYXNlICc8dS8+JzogZm9udC51ID0gMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L3U+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMiBiICovXG5cdFx0XHRjYXNlICc8Yic6XG5cdFx0XHRcdGlmKHkudmFsID09ICcwJykgYnJlYWs7XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdGNhc2UgJzxiPic6XG5cdFx0XHRjYXNlICc8Yi8+JzogZm9udC5iID0gMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L2I+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMjYgaSAqL1xuXHRcdFx0Y2FzZSAnPGknOlxuXHRcdFx0XHRpZih5LnZhbCA9PSAnMCcpIGJyZWFrO1xuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRjYXNlICc8aT4nOlxuXHRcdFx0Y2FzZSAnPGkvPic6IGZvbnQuaSA9IDE7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9pPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4zLjEuMTUgY29sb3IgQ1RfQ29sb3IgVE9ETzogdGludCwgdGhlbWUsIGF1dG8sIGluZGV4ZWQgKi9cblx0XHRcdGNhc2UgJzxjb2xvcic6XG5cdFx0XHRcdGlmKHkucmdiKSBmb250LmNvbG9yID0geS5yZ2Iuc2xpY2UoMiw4KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc8Y29sb3I+JzogY2FzZSAnPGNvbG9yLz4nOiBjYXNlICc8L2NvbG9yPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjE4IGZhbWlseSBTVF9Gb250RmFtaWx5ICovXG5cdFx0XHRjYXNlICc8ZmFtaWx5JzogZm9udC5mYW1pbHkgPSB5LnZhbDsgYnJlYWs7XG5cdFx0XHRjYXNlICc8ZmFtaWx5Pic6IGNhc2UgJzxmYW1pbHkvPic6IGNhc2UgJzwvZmFtaWx5Pic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC40LjE0IHZlcnRBbGlnbiBDVF9WZXJ0aWNhbEFsaWduRm9udFByb3BlcnR5IFRPRE8gKi9cblx0XHRcdGNhc2UgJzx2ZXJ0QWxpZ24nOiBmb250LnZhbGlnbiA9IHkudmFsOyBicmVhaztcblx0XHRcdGNhc2UgJzx2ZXJ0QWxpZ24+JzogY2FzZSAnPHZlcnRBbGlnbi8+JzogY2FzZSAnPC92ZXJ0QWxpZ24+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMzUgc2NoZW1lIENUX0ZvbnRTY2hlbWUgVE9ETyAqL1xuXHRcdFx0Y2FzZSAnPHNjaGVtZSc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPHNjaGVtZT4nOiBjYXNlICc8c2NoZW1lLz4nOiBjYXNlICc8L3NjaGVtZT4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4xMCBleHRMc3QgQ1RfRXh0ZW5zaW9uTGlzdCA/ICovXG5cdFx0XHRjYXNlICc8ZXh0THN0JzogY2FzZSAnPGV4dExzdD4nOiBjYXNlICc8L2V4dExzdD4nOiBicmVhaztcblx0XHRcdGNhc2UgJzxleHQnOiBwYXNzID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L2V4dD4nOiBwYXNzID0gZmFsc2U7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYoeVswXS5jaGFyQ29kZUF0KDEpICE9PSA0NyAmJiAhcGFzcykgdGhyb3cgbmV3IEVycm9yKCdVbnJlY29nbml6ZWQgcmljaCBmb3JtYXQgJyArIHlbMF0pO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZm9udDtcbn1cblxudmFyIHBhcnNlX3JzID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpIHtcblx0dmFyIHRyZWdleCA9IG1hdGNodGFnKFwidFwiKSwgcnByZWdleCA9IG1hdGNodGFnKFwiclByXCIpO1xuXHQvKiAxOC40LjQgciBDVF9SRWx0ICovXG5cdGZ1bmN0aW9uIHBhcnNlX3Iocikge1xuXHRcdC8qIDE4LjQuMTIgdCBTVF9Yc3RyaW5nICovXG5cdFx0dmFyIHQgPSByLm1hdGNoKHRyZWdleCkvKiwgY3AgPSA2NTAwMSovO1xuXHRcdGlmKCF0KSByZXR1cm4ge3Q6XCJzXCIsIHY6XCJcIn07XG5cblx0XHR2YXIgby8qOkNlbGwqLyA9ICh7dDoncycsIHY6dW5lc2NhcGV4bWwodFsxXSl9Lyo6YW55Ki8pO1xuXHRcdHZhciBycHIgPSByLm1hdGNoKHJwcmVnZXgpO1xuXHRcdGlmKHJwcikgby5zID0gcGFyc2VfcnByKHJwclsxXSk7XG5cdFx0cmV0dXJuIG87XG5cdH1cblx0dmFyIHJyZWdleCA9IC88KD86XFx3KzopP3I+L2csIHJlbmQgPSAvPFxcLyg/Olxcdys6KT9yPi87XG5cdHJldHVybiBmdW5jdGlvbiBwYXJzZV9ycyhycykge1xuXHRcdHJldHVybiBycy5yZXBsYWNlKHJyZWdleCxcIlwiKS5zcGxpdChyZW5kKS5tYXAocGFyc2VfcikuZmlsdGVyKGZ1bmN0aW9uKHIpIHsgcmV0dXJuIHIudjsgfSk7XG5cdH07XG59KSgpO1xuXG5cbi8qIFBhcnNlIGEgbGlzdCBvZiA8cj4gdGFncyAqL1xudmFyIHJzX3RvX2h0bWwgPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uIHBhcnNlX3JzX2ZhY3RvcnkoKSB7XG5cdHZhciBubHJlZ2V4ID0gLyhcXHJcXG58XFxuKS9nO1xuXHRmdW5jdGlvbiBwYXJzZV9ycHIyKGZvbnQsIGludHJvLCBvdXRybykge1xuXHRcdHZhciBzdHlsZS8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXG5cdFx0aWYoZm9udC51KSBzdHlsZS5wdXNoKFwidGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XCIpO1xuXHRcdGlmKGZvbnQudXZhbCkgc3R5bGUucHVzaChcInRleHQtdW5kZXJsaW5lLXN0eWxlOlwiICsgZm9udC51dmFsICsgXCI7XCIpO1xuXHRcdGlmKGZvbnQuc3opIHN0eWxlLnB1c2goXCJmb250LXNpemU6XCIgKyBmb250LnN6ICsgXCJwdDtcIik7XG5cdFx0aWYoZm9udC5vdXRsaW5lKSBzdHlsZS5wdXNoKFwidGV4dC1lZmZlY3Q6IG91dGxpbmU7XCIpO1xuXHRcdGlmKGZvbnQuc2hhZG93KSBzdHlsZS5wdXNoKFwidGV4dC1zaGFkb3c6IGF1dG87XCIpO1xuXHRcdGludHJvLnB1c2goJzxzcGFuIHN0eWxlPVwiJyArIHN0eWxlLmpvaW4oXCJcIikgKyAnXCI+Jyk7XG5cblx0XHRpZihmb250LmIpIHsgaW50cm8ucHVzaChcIjxiPlwiKTsgb3V0cm8ucHVzaChcIjwvYj5cIik7IH1cblx0XHRpZihmb250LmkpIHsgaW50cm8ucHVzaChcIjxpPlwiKTsgb3V0cm8ucHVzaChcIjwvaT5cIik7IH1cblx0XHRpZihmb250LnN0cmlrZSkgeyBpbnRyby5wdXNoKFwiPHM+XCIpOyBvdXRyby5wdXNoKFwiPC9zPlwiKTsgfVxuXG5cdFx0dmFyIGFsaWduID0gZm9udC52YWxpZ24gfHwgXCJcIjtcblx0XHRpZihhbGlnbiA9PSBcInN1cGVyc2NyaXB0XCIgfHwgYWxpZ24gPT0gXCJzdXBlclwiKSBhbGlnbiA9IFwic3VwXCI7XG5cdFx0ZWxzZSBpZihhbGlnbiA9PSBcInN1YnNjcmlwdFwiKSBhbGlnbiA9IFwic3ViXCI7XG5cdFx0aWYoYWxpZ24gIT0gXCJcIikgeyBpbnRyby5wdXNoKFwiPFwiICsgYWxpZ24gKyBcIj5cIik7IG91dHJvLnB1c2goXCI8L1wiICsgYWxpZ24gKyBcIj5cIik7IH1cblxuXHRcdG91dHJvLnB1c2goXCI8L3NwYW4+XCIpO1xuXHRcdHJldHVybiBmb250O1xuXHR9XG5cblx0LyogMTguNC40IHIgQ1RfUkVsdCAqL1xuXHRmdW5jdGlvbiByX3RvX2h0bWwocikge1xuXHRcdHZhciB0ZXJtcy8qOltBcnJheTxzdHJpbmc+LCBzdHJpbmcsIEFycmF5PHN0cmluZz5dKi8gPSBbW10sci52LFtdXTtcblx0XHRpZighci52KSByZXR1cm4gXCJcIjtcblxuXHRcdGlmKHIucykgcGFyc2VfcnByMihyLnMsIHRlcm1zWzBdLCB0ZXJtc1syXSk7XG5cblx0XHRyZXR1cm4gdGVybXNbMF0uam9pbihcIlwiKSArIHRlcm1zWzFdLnJlcGxhY2UobmxyZWdleCwnPGJyLz4nKSArIHRlcm1zWzJdLmpvaW4oXCJcIik7XG5cdH1cblxuXHRyZXR1cm4gZnVuY3Rpb24gcGFyc2VfcnMocnMpIHtcblx0XHRyZXR1cm4gcnMubWFwKHJfdG9faHRtbCkuam9pbihcIlwiKTtcblx0fTtcbn0pKCk7XG5cbi8qIDE4LjQuOCBzaSBDVF9Sc3QgKi9cbnZhciBzaXRyZWdleCA9IC88KD86XFx3KzopP3RbXj5dKj4oW148XSopPFxcLyg/Olxcdys6KT90Pi9nLCBzaXJyZWdleCA9IC88KD86XFx3KzopP3I+LztcbnZhciBzaXJwaHJlZ2V4ID0gLzwoPzpcXHcrOik/clBoLio/PihbXFxzXFxTXSo/KTxcXC8oPzpcXHcrOik/clBoPi9nO1xuZnVuY3Rpb24gcGFyc2Vfc2koeCwgb3B0cykge1xuXHR2YXIgaHRtbCA9IG9wdHMgPyBvcHRzLmNlbGxIVE1MIDogdHJ1ZTtcblx0dmFyIHogPSB7fTtcblx0aWYoIXgpIHJldHVybiB7IHQ6IFwiXCIgfTtcblx0Ly92YXIgeTtcblx0LyogMTguNC4xMiB0IFNUX1hzdHJpbmcgKFBsYWludGV4dCBTdHJpbmcpICovXG5cdC8vIFRPRE86IGlzIHdoaXRlc3BhY2UgYWN0dWFsbHkgdmFsaWQgaGVyZT9cblx0aWYoeC5tYXRjaCgvXlxccyo8KD86XFx3KzopP3RbXj5dKj4vKSkge1xuXHRcdHoudCA9IHVuZXNjYXBleG1sKHV0ZjhyZWFkKHguc2xpY2UoeC5pbmRleE9mKFwiPlwiKSsxKS5zcGxpdCgvPFxcLyg/Olxcdys6KT90Pi8pWzBdfHxcIlwiKSk7XG5cdFx0ei5yID0gdXRmOHJlYWQoeCk7XG5cdFx0aWYoaHRtbCkgei5oID0gZXNjYXBlaHRtbCh6LnQpO1xuXHR9XG5cdC8qIDE4LjQuNCByIENUX1JFbHQgKFJpY2ggVGV4dCBSdW4pICovXG5cdGVsc2UgaWYoKC8qeSA9ICoveC5tYXRjaChzaXJyZWdleCkpKSB7XG5cdFx0ei5yID0gdXRmOHJlYWQoeCk7XG5cdFx0ei50ID0gdW5lc2NhcGV4bWwodXRmOHJlYWQoKHgucmVwbGFjZShzaXJwaHJlZ2V4LCAnJykubWF0Y2goc2l0cmVnZXgpfHxbXSkuam9pbihcIlwiKS5yZXBsYWNlKHRhZ3JlZ2V4LFwiXCIpKSk7XG5cdFx0aWYoaHRtbCkgei5oID0gcnNfdG9faHRtbChwYXJzZV9ycyh6LnIpKTtcblx0fVxuXHQvKiAxOC40LjMgcGhvbmV0aWNQciBDVF9QaG9uZXRpY1ByIChUT0RPOiBuZWVkZWQgZm9yIEFzaWFuIHN1cHBvcnQpICovXG5cdC8qIDE4LjQuNiByUGggQ1RfUGhvbmV0aWNSdW4gKFRPRE86IG5lZWRlZCBmb3IgQXNpYW4gc3VwcG9ydCkgKi9cblx0cmV0dXJuIHo7XG59XG5cbi8qIDE4LjQgU2hhcmVkIFN0cmluZyBUYWJsZSAqL1xudmFyIHNzdHIwID0gLzwoPzpcXHcrOik/c3N0KFtePl0qKT4oW1xcc1xcU10qKTxcXC8oPzpcXHcrOik/c3N0Pi87XG52YXIgc3N0cjEgPSAvPCg/Olxcdys6KT8oPzpzaXxzc3RJdGVtKT4vZztcbnZhciBzc3RyMiA9IC88XFwvKD86XFx3KzopPyg/OnNpfHNzdEl0ZW0pPi87XG5mdW5jdGlvbiBwYXJzZV9zc3RfeG1sKGRhdGEvKjpzdHJpbmcqLywgb3B0cykvKjpTU1QqLyB7XG5cdHZhciBzLyo6U1NUKi8gPSAoW10vKjphbnkqLyksIHNzID0gXCJcIjtcblx0aWYoIWRhdGEpIHJldHVybiBzO1xuXHQvKiAxOC40Ljkgc3N0IENUX1NzdCAqL1xuXHR2YXIgc3N0ID0gZGF0YS5tYXRjaChzc3RyMCk7XG5cdGlmKHNzdCkge1xuXHRcdHNzID0gc3N0WzJdLnJlcGxhY2Uoc3N0cjEsXCJcIikuc3BsaXQoc3N0cjIpO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgIT0gc3MubGVuZ3RoOyArK2kpIHtcblx0XHRcdHZhciBvID0gcGFyc2Vfc2koc3NbaV0udHJpbSgpLCBvcHRzKTtcblx0XHRcdGlmKG8gIT0gbnVsbCkgc1tzLmxlbmd0aF0gPSBvO1xuXHRcdH1cblx0XHRzc3QgPSBwYXJzZXhtbHRhZyhzc3RbMV0pOyBzLkNvdW50ID0gc3N0LmNvdW50OyBzLlVuaXF1ZSA9IHNzdC51bmlxdWVDb3VudDtcblx0fVxuXHRyZXR1cm4gcztcbn1cblxudmFyIHN0cmF5d3NyZWdleCA9IC9eXFxzfFxccyR8W1xcdFxcblxccl0vO1xuZnVuY3Rpb24gd3JpdGVfc3N0X3htbChzc3QvKjpTU1QqLywgb3B0cykvKjpzdHJpbmcqLyB7XG5cdGlmKCFvcHRzLmJvb2tTU1QpIHJldHVybiBcIlwiO1xuXHR2YXIgbyA9IFtYTUxfSEVBREVSXTtcblx0b1tvLmxlbmd0aF0gPSAod3JpdGV4dGFnKCdzc3QnLCBudWxsLCB7XG5cdFx0eG1sbnM6IFhNTE5TX21haW5bMF0sXG5cdFx0Y291bnQ6IHNzdC5Db3VudCxcblx0XHR1bmlxdWVDb3VudDogc3N0LlVuaXF1ZVxuXHR9KSk7XG5cdGZvcih2YXIgaSA9IDA7IGkgIT0gc3N0Lmxlbmd0aDsgKytpKSB7IGlmKHNzdFtpXSA9PSBudWxsKSBjb250aW51ZTtcblx0XHR2YXIgcy8qOlhMU3RyaW5nKi8gPSBzc3RbaV07XG5cdFx0dmFyIHNpdGFnID0gXCI8c2k+XCI7XG5cdFx0aWYocy5yKSBzaXRhZyArPSBzLnI7XG5cdFx0ZWxzZSB7XG5cdFx0XHRzaXRhZyArPSBcIjx0XCI7XG5cdFx0XHRpZighcy50KSBzLnQgPSBcIlwiO1xuXHRcdFx0aWYocy50Lm1hdGNoKHN0cmF5d3NyZWdleCkpIHNpdGFnICs9ICcgeG1sOnNwYWNlPVwicHJlc2VydmVcIic7XG5cdFx0XHRzaXRhZyArPSBcIj5cIiArIGVzY2FwZXhtbChzLnQpICsgXCI8L3Q+XCI7XG5cdFx0fVxuXHRcdHNpdGFnICs9IFwiPC9zaT5cIjtcblx0XHRvW28ubGVuZ3RoXSA9IChzaXRhZyk7XG5cdH1cblx0aWYoby5sZW5ndGg+Mil7IG9bby5sZW5ndGhdID0gKCc8L3NzdD4nKTsgb1sxXT1vWzFdLnJlcGxhY2UoXCIvPlwiLFwiPlwiKTsgfVxuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuLyogW01TLVhMU0JdIDIuNC4yMjEgQnJ0QmVnaW5Tc3QgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydEJlZ2luU3N0KGRhdGEpIHtcblx0cmV0dXJuIFtkYXRhLnJlYWRfc2hpZnQoNCksIGRhdGEucmVhZF9zaGlmdCg0KV07XG59XG5cbi8qIFtNUy1YTFNCXSAyLjEuNy40NSBTaGFyZWQgU3RyaW5ncyAqL1xuZnVuY3Rpb24gcGFyc2Vfc3N0X2JpbihkYXRhLCBvcHRzKS8qOlNTVCovIHtcblx0dmFyIHMvKjpTU1QqLyA9IChbXS8qOmFueSovKTtcblx0dmFyIHBhc3MgPSBmYWxzZTtcblx0cmVjb3JkaG9wcGVyKGRhdGEsIGZ1bmN0aW9uIGhvcHBlcl9zc3QodmFsLCBSLCBSVCkge1xuXHRcdHN3aXRjaChSVCkge1xuXHRcdFx0Y2FzZSAweDAwOUY6IC8qIEJydEJlZ2luU3N0ICovXG5cdFx0XHRcdHMuQ291bnQgPSB2YWxbMF07IHMuVW5pcXVlID0gdmFsWzFdOyBicmVhaztcblx0XHRcdGNhc2UgMHgwMDEzOiAvKiBCcnRTU1RJdGVtICovXG5cdFx0XHRcdHMucHVzaCh2YWwpOyBicmVhaztcblx0XHRcdGNhc2UgMHgwMEEwOiAvKiBCcnRFbmRTc3QgKi9cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRcdGNhc2UgMHgwMDIzOiAvKiBCcnRGUlRCZWdpbiAqL1xuXHRcdFx0XHRwYXNzID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRjYXNlIDB4MDAyNDogLyogQnJ0RlJURW5kICovXG5cdFx0XHRcdHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmKFIuVCl7fVxuXHRcdFx0XHRpZighcGFzcyB8fCBvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZWNvcmQgMHhcIiArIFJULnRvU3RyaW5nKDE2KSk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIHM7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0JydEJlZ2luU3N0KHNzdCwgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoOCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgc3N0LkNvdW50KTtcblx0by53cml0ZV9zaGlmdCg0LCBzc3QuVW5pcXVlKTtcblx0cmV0dXJuIG87XG59XG5cbnZhciB3cml0ZV9CcnRTU1RJdGVtID0gd3JpdGVfUmljaFN0cjtcblxuZnVuY3Rpb24gd3JpdGVfc3N0X2Jpbihzc3QvKjo6LCBvcHRzKi8pIHtcblx0dmFyIGJhID0gYnVmX2FycmF5KCk7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDlGIC8qIEJydEJlZ2luU3N0ICovLCB3cml0ZV9CcnRCZWdpblNzdChzc3QpKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IHNzdC5sZW5ndGg7ICsraSkgd3JpdGVfcmVjb3JkKGJhLCAweDAwMTMgLyogQnJ0U1NUSXRlbSAqLywgd3JpdGVfQnJ0U1NUSXRlbShzc3RbaV0pKTtcblx0LyogRlJUU1NUICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMEEwIC8qIEJydEVuZFNzdCAqLyk7XG5cdHJldHVybiBiYS5lbmQoKTtcbn1cbmZ1bmN0aW9uIF9KUzJBTlNJKHN0ci8qOnN0cmluZyovKS8qOkFycmF5PG51bWJlcj4qLyB7XG5cdGlmKHR5cGVvZiAkY3B0YWJsZSAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiAkY3B0YWJsZS51dGlscy5lbmNvZGUoY3VycmVudF9hbnNpLCBzdHIpO1xuXHR2YXIgby8qOkFycmF5PG51bWJlcj4qLyA9IFtdLCBvbyA9IHN0ci5zcGxpdChcIlwiKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IG9vLmxlbmd0aDsgKytpKSBvW2ldID0gb29baV0uY2hhckNvZGVBdCgwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMS40IFZlcnNpb24gKi9cbmZ1bmN0aW9uIHBhcnNlX0NSWVBUT1ZlcnNpb24oYmxvYiwgbGVuZ3RoLyo6P251bWJlciovKSB7XG5cdHZhciBvLyo6YW55Ki8gPSB7fTtcblx0by5NYWpvciA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0by5NaW5vciA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0Lyo6OiBpZihsZW5ndGggPT0gbnVsbCkgcmV0dXJuIG87ICovXG5cdGlmKGxlbmd0aCA+PSA0KSBibG9iLmwgKz0gbGVuZ3RoIC0gNDtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMS41IERhdGFTcGFjZVZlcnNpb25JbmZvICovXG5mdW5jdGlvbiBwYXJzZV9EYXRhU3BhY2VWZXJzaW9uSW5mbyhibG9iKSB7XG5cdHZhciBvID0ge307XG5cdG8uaWQgPSBibG9iLnJlYWRfc2hpZnQoMCwgJ2xwcDQnKTtcblx0by5SID0gcGFyc2VfQ1JZUFRPVmVyc2lvbihibG9iLCA0KTtcblx0by5VID0gcGFyc2VfQ1JZUFRPVmVyc2lvbihibG9iLCA0KTtcblx0by5XID0gcGFyc2VfQ1JZUFRPVmVyc2lvbihibG9iLCA0KTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMS42LjEgRGF0YVNwYWNlTWFwRW50cnkgU3RydWN0dXJlICovXG5mdW5jdGlvbiBwYXJzZV9EYXRhU3BhY2VNYXBFbnRyeShibG9iKSB7XG5cdHZhciBsZW4gPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciBlbmQgPSBibG9iLmwgKyBsZW4gLSA0O1xuXHR2YXIgbyA9IHt9O1xuXHR2YXIgY250ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHR2YXIgY29tcHMvKjpBcnJheTx7dDpudW1iZXIsIHY6c3RyaW5nfT4qLyA9IFtdO1xuXHQvKiBbTVMtT0ZGQ1JZUFRPXSAyLjEuNi4yIERhdGFTcGFjZVJlZmVyZW5jZUNvbXBvbmVudCBTdHJ1Y3R1cmUgKi9cblx0d2hpbGUoY250LS0gPiAwKSBjb21wcy5wdXNoKHsgdDogYmxvYi5yZWFkX3NoaWZ0KDQpLCB2OiBibG9iLnJlYWRfc2hpZnQoMCwgJ2xwcDQnKSB9KTtcblx0by5uYW1lID0gYmxvYi5yZWFkX3NoaWZ0KDAsICdscHA0Jyk7XG5cdG8uY29tcHMgPSBjb21wcztcblx0aWYoYmxvYi5sICE9IGVuZCkgdGhyb3cgbmV3IEVycm9yKFwiQmFkIERhdGFTcGFjZU1hcEVudHJ5OiBcIiArIGJsb2IubCArIFwiICE9IFwiICsgZW5kKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMS42IERhdGFTcGFjZU1hcCAqL1xuZnVuY3Rpb24gcGFyc2VfRGF0YVNwYWNlTWFwKGJsb2IpIHtcblx0dmFyIG8gPSBbXTtcblx0YmxvYi5sICs9IDQ7IC8vIG11c3QgYmUgMHg4XG5cdHZhciBjbnQgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHdoaWxlKGNudC0tID4gMCkgby5wdXNoKHBhcnNlX0RhdGFTcGFjZU1hcEVudHJ5KGJsb2IpKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMS43IERhdGFTcGFjZURlZmluaXRpb24gKi9cbmZ1bmN0aW9uIHBhcnNlX0RhdGFTcGFjZURlZmluaXRpb24oYmxvYikvKjpBcnJheTxzdHJpbmc+Ki8ge1xuXHR2YXIgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRibG9iLmwgKz0gNDsgLy8gbXVzdCBiZSAweDhcblx0dmFyIGNudCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0d2hpbGUoY250LS0gPiAwKSBvLnB1c2goYmxvYi5yZWFkX3NoaWZ0KDAsICdscHA0JykpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLU9GRkNSWVBUT10gMi4xLjggRGF0YVNwYWNlRGVmaW5pdGlvbiAqL1xuZnVuY3Rpb24gcGFyc2VfVHJhbnNmb3JtSW5mb0hlYWRlcihibG9iKSB7XG5cdHZhciBvID0ge307XG5cdC8qdmFyIGxlbiA9ICovYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRibG9iLmwgKz0gNDsgLy8gbXVzdCBiZSAweDFcblx0by5pZCA9IGJsb2IucmVhZF9zaGlmdCgwLCAnbHBwNCcpO1xuXHRvLm5hbWUgPSBibG9iLnJlYWRfc2hpZnQoMCwgJ2xwcDQnKTtcblx0by5SID0gcGFyc2VfQ1JZUFRPVmVyc2lvbihibG9iLCA0KTtcblx0by5VID0gcGFyc2VfQ1JZUFRPVmVyc2lvbihibG9iLCA0KTtcblx0by5XID0gcGFyc2VfQ1JZUFRPVmVyc2lvbihibG9iLCA0KTtcblx0cmV0dXJuIG87XG59XG5cbmZ1bmN0aW9uIHBhcnNlX1ByaW1hcnkoYmxvYikge1xuXHQvKiBbTVMtT0ZGQ1JZUFRPXSAyLjIuNiBJUk1EU1RyYW5zZm9ybUluZm8gKi9cblx0dmFyIGhkciA9IHBhcnNlX1RyYW5zZm9ybUluZm9IZWFkZXIoYmxvYik7XG5cdC8qIFtNUy1PRkZDUllQVE9dIDIuMS45IEVuY3J5cHRpb25UcmFuc2Zvcm1JbmZvICovXG5cdGhkci5lbmFtZSA9IGJsb2IucmVhZF9zaGlmdCgwLCAnOGxwcDQnKTtcblx0aGRyLmJsa3N6ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRoZHIuY21vZGUgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdGlmKGJsb2IucmVhZF9zaGlmdCg0KSAhPSAweDA0KSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgIVByaW1hcnkgcmVjb3JkXCIpO1xuXHRyZXR1cm4gaGRyO1xufVxuXG4vKiBbTVMtT0ZGQ1JZUFRPXSAyLjMuMiBFbmNyeXB0aW9uIEhlYWRlciAqL1xuZnVuY3Rpb24gcGFyc2VfRW5jcnlwdGlvbkhlYWRlcihibG9iLCBsZW5ndGgvKjpudW1iZXIqLykge1xuXHR2YXIgdGd0ID0gYmxvYi5sICsgbGVuZ3RoO1xuXHR2YXIgbyA9IHt9O1xuXHRvLkZsYWdzID0gKGJsb2IucmVhZF9zaGlmdCg0KSAmIDB4M0YpO1xuXHRibG9iLmwgKz0gNDtcblx0by5BbGdJRCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0dmFyIHZhbGlkID0gZmFsc2U7XG5cdHN3aXRjaChvLkFsZ0lEKSB7XG5cdFx0Y2FzZSAweDY2MEU6IGNhc2UgMHg2NjBGOiBjYXNlIDB4NjYxMDogdmFsaWQgPSAoby5GbGFncyA9PSAweDI0KTsgYnJlYWs7XG5cdFx0Y2FzZSAweDY4MDE6IHZhbGlkID0gKG8uRmxhZ3MgPT0gMHgwNCk7IGJyZWFrO1xuXHRcdGNhc2UgMDogdmFsaWQgPSAoby5GbGFncyA9PSAweDEwIHx8IG8uRmxhZ3MgPT0gMHgwNCB8fCBvLkZsYWdzID09IDB4MjQpOyBicmVhaztcblx0XHRkZWZhdWx0OiB0aHJvdyAnVW5yZWNvZ25pemVkIGVuY3J5cHRpb24gYWxnb3JpdGhtOiAnICsgby5BbGdJRDtcblx0fVxuXHRpZighdmFsaWQpIHRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRpb24gRmxhZ3MvQWxnSUQgbWlzbWF0Y2hcIik7XG5cdG8uQWxnSURIYXNoID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRvLktleVNpemUgPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdG8uUHJvdmlkZXJUeXBlID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRibG9iLmwgKz0gODtcblx0by5DU1BOYW1lID0gYmxvYi5yZWFkX3NoaWZ0KCh0Z3QtYmxvYi5sKT4+MSwgJ3V0ZjE2bGUnKTtcblx0YmxvYi5sID0gdGd0O1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLU9GRkNSWVBUT10gMi4zLjMgRW5jcnlwdGlvbiBWZXJpZmllciAqL1xuZnVuY3Rpb24gcGFyc2VfRW5jcnlwdGlvblZlcmlmaWVyKGJsb2IsIGxlbmd0aC8qOm51bWJlciovKSB7XG5cdHZhciBvID0ge30sIHRndCA9IGJsb2IubCArIGxlbmd0aDtcblx0YmxvYi5sICs9IDQ7IC8vIFNhbHRTaXplIG11c3QgYmUgMHgxMFxuXHRvLlNhbHQgPSBibG9iLnNsaWNlKGJsb2IubCwgYmxvYi5sKzE2KTsgYmxvYi5sICs9IDE2O1xuXHRvLlZlcmlmaWVyID0gYmxvYi5zbGljZShibG9iLmwsIGJsb2IubCsxNik7IGJsb2IubCArPSAxNjtcblx0Lyp2YXIgc3ogPSAqL2Jsb2IucmVhZF9zaGlmdCg0KTtcblx0by5WZXJpZmllckhhc2ggPSBibG9iLnNsaWNlKGJsb2IubCwgdGd0KTsgYmxvYi5sID0gdGd0O1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLU9GRkNSWVBUT10gMi4zLjQuKiBFbmNyeXB0aW9uSW5mbyBTdHJlYW0gKi9cbmZ1bmN0aW9uIHBhcnNlX0VuY3J5cHRpb25JbmZvKGJsb2IpIHtcblx0dmFyIHZlcnMgPSBwYXJzZV9DUllQVE9WZXJzaW9uKGJsb2IpO1xuXHRzd2l0Y2godmVycy5NaW5vcikge1xuXHRcdGNhc2UgMHgwMjogcmV0dXJuIFt2ZXJzLk1pbm9yLCBwYXJzZV9FbmNJbmZvU3RkKGJsb2IsIHZlcnMpXTtcblx0XHRjYXNlIDB4MDM6IHJldHVybiBbdmVycy5NaW5vciwgcGFyc2VfRW5jSW5mb0V4dChibG9iLCB2ZXJzKV07XG5cdFx0Y2FzZSAweDA0OiByZXR1cm4gW3ZlcnMuTWlub3IsIHBhcnNlX0VuY0luZm9BZ2woYmxvYiwgdmVycyldO1xuXHR9XG5cdHRocm93IG5ldyBFcnJvcihcIkVDTUEtMzc2IEVuY3J5cHRlZCBmaWxlIHVucmVjb2duaXplZCBWZXJzaW9uOiBcIiArIHZlcnMuTWlub3IpO1xufVxuXG4vKiBbTVMtT0ZGQ1JZUFRPXSAyLjMuNC41ICBFbmNyeXB0aW9uSW5mbyBTdHJlYW0gKFN0YW5kYXJkIEVuY3J5cHRpb24pICovXG5mdW5jdGlvbiBwYXJzZV9FbmNJbmZvU3RkKGJsb2IvKjo6LCB2ZXJzKi8pIHtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRpZigoZmxhZ3MgJiAweDNGKSAhPSAweDI0KSB0aHJvdyBuZXcgRXJyb3IoXCJFbmNyeXB0aW9uSW5mbyBtaXNtYXRjaFwiKTtcblx0dmFyIHN6ID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHQvL3ZhciB0Z3QgPSBibG9iLmwgKyBzejtcblx0dmFyIGhkciA9IHBhcnNlX0VuY3J5cHRpb25IZWFkZXIoYmxvYiwgc3opO1xuXHR2YXIgdmVyaWZpZXIgPSBwYXJzZV9FbmNyeXB0aW9uVmVyaWZpZXIoYmxvYiwgYmxvYi5sZW5ndGggLSBibG9iLmwpO1xuXHRyZXR1cm4geyB0OlwiU3RkXCIsIGg6aGRyLCB2OnZlcmlmaWVyIH07XG59XG4vKiBbTVMtT0ZGQ1JZUFRPXSAyLjMuNC42ICBFbmNyeXB0aW9uSW5mbyBTdHJlYW0gKEV4dGVuc2libGUgRW5jcnlwdGlvbikgKi9cbmZ1bmN0aW9uIHBhcnNlX0VuY0luZm9FeHQoLyo6OmJsb2IsIHZlcnMqLykgeyB0aHJvdyBuZXcgRXJyb3IoXCJGaWxlIGlzIHBhc3N3b3JkLXByb3RlY3RlZDogRUNNQS0zNzYgRXh0ZW5zaWJsZVwiKTsgfVxuLyogW01TLU9GRkNSWVBUT10gMi4zLjQuMTAgRW5jcnlwdGlvbkluZm8gU3RyZWFtIChBZ2lsZSBFbmNyeXB0aW9uKSAqL1xuZnVuY3Rpb24gcGFyc2VfRW5jSW5mb0FnbChibG9iLyo6OiwgdmVycyovKSB7XG5cdHZhciBLZXlEYXRhID0gW1wic2FsdFNpemVcIixcImJsb2NrU2l6ZVwiLFwia2V5Qml0c1wiLFwiaGFzaFNpemVcIixcImNpcGhlckFsZ29yaXRobVwiLFwiY2lwaGVyQ2hhaW5pbmdcIixcImhhc2hBbGdvcml0aG1cIixcInNhbHRWYWx1ZVwiXTtcblx0YmxvYi5sKz00O1xuXHR2YXIgeG1sID0gYmxvYi5yZWFkX3NoaWZ0KGJsb2IubGVuZ3RoIC0gYmxvYi5sLCAndXRmOCcpO1xuXHR2YXIgbyA9IHt9O1xuXHR4bWwucmVwbGFjZSh0YWdyZWdleCwgZnVuY3Rpb24geG1sX2FnaWxlKHgpIHtcblx0XHR2YXIgeS8qOmFueSovID0gcGFyc2V4bWx0YWcoeCk7XG5cdFx0c3dpdGNoKHN0cmlwX25zKHlbMF0pKSB7XG5cdFx0XHRjYXNlICc8P3htbCc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGVuY3J5cHRpb24nOiBjYXNlICc8L2VuY3J5cHRpb24+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8a2V5RGF0YSc6IEtleURhdGEuZm9yRWFjaChmdW5jdGlvbihrKSB7IG9ba10gPSB5W2tdOyB9KTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8ZGF0YUludGVncml0eSc6IG8uZW5jcnlwdGVkSG1hY0tleSA9IHkuZW5jcnlwdGVkSG1hY0tleTsgby5lbmNyeXB0ZWRIbWFjVmFsdWUgPSB5LmVuY3J5cHRlZEhtYWNWYWx1ZTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8a2V5RW5jcnlwdG9ycz4nOiBjYXNlICc8a2V5RW5jcnlwdG9ycyc6IG8uZW5jcyA9IFtdOyBicmVhaztcblx0XHRcdGNhc2UgJzwva2V5RW5jcnlwdG9ycz4nOiBicmVhaztcblxuXHRcdFx0Y2FzZSAnPGtleUVuY3J5cHRvcic6IG8udXJpID0geS51cmk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9rZXlFbmNyeXB0b3I+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8ZW5jcnlwdGVkS2V5Jzogby5lbmNzLnB1c2goeSk7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogdGhyb3cgeVswXTtcblx0XHR9XG5cdH0pO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLU9GRkNSWVBUT10gMi4zLjUuMSBSQzQgQ3J5cHRvQVBJIEVuY3J5cHRpb24gSGVhZGVyICovXG5mdW5jdGlvbiBwYXJzZV9SQzRDcnlwdG9IZWFkZXIoYmxvYiwgbGVuZ3RoLyo6bnVtYmVyKi8pIHtcblx0dmFyIG8gPSB7fTtcblx0dmFyIHZlcnMgPSBvLkVuY3J5cHRpb25WZXJzaW9uSW5mbyA9IHBhcnNlX0NSWVBUT1ZlcnNpb24oYmxvYiwgNCk7IGxlbmd0aCAtPSA0O1xuXHRpZih2ZXJzLk1pbm9yICE9IDIpIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkIG1pbm9yIHZlcnNpb24gY29kZTogJyArIHZlcnMuTWlub3IpO1xuXHRpZih2ZXJzLk1ham9yID4gNCB8fCB2ZXJzLk1ham9yIDwgMikgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgbWFqb3IgdmVyc2lvbiBjb2RlOiAnICsgdmVycy5NYWpvcik7XG5cdG8uRmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoNCk7IGxlbmd0aCAtPSA0O1xuXHR2YXIgc3ogPSBibG9iLnJlYWRfc2hpZnQoNCk7IGxlbmd0aCAtPSA0O1xuXHRvLkVuY3J5cHRpb25IZWFkZXIgPSBwYXJzZV9FbmNyeXB0aW9uSGVhZGVyKGJsb2IsIHN6KTsgbGVuZ3RoIC09IHN6O1xuXHRvLkVuY3J5cHRpb25WZXJpZmllciA9IHBhcnNlX0VuY3J5cHRpb25WZXJpZmllcihibG9iLCBsZW5ndGgpO1xuXHRyZXR1cm4gbztcbn1cbi8qIFtNUy1PRkZDUllQVE9dIDIuMy42LjEgUkM0IEVuY3J5cHRpb24gSGVhZGVyICovXG5mdW5jdGlvbiBwYXJzZV9SQzRIZWFkZXIoYmxvYi8qOjosIGxlbmd0aCovKSB7XG5cdHZhciBvID0ge307XG5cdHZhciB2ZXJzID0gby5FbmNyeXB0aW9uVmVyc2lvbkluZm8gPSBwYXJzZV9DUllQVE9WZXJzaW9uKGJsb2IsIDQpO1xuXHRpZih2ZXJzLk1ham9yICE9IDEgfHwgdmVycy5NaW5vciAhPSAxKSB0aHJvdyAndW5yZWNvZ25pemVkIHZlcnNpb24gY29kZSAnICsgdmVycy5NYWpvciArICcgOiAnICsgdmVycy5NaW5vcjtcblx0by5TYWx0ID0gYmxvYi5yZWFkX3NoaWZ0KDE2KTtcblx0by5FbmNyeXB0ZWRWZXJpZmllciA9IGJsb2IucmVhZF9zaGlmdCgxNik7XG5cdG8uRW5jcnlwdGVkVmVyaWZpZXJIYXNoID0gYmxvYi5yZWFkX3NoaWZ0KDE2KTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMy43LjEgQmluYXJ5IERvY3VtZW50IFBhc3N3b3JkIFZlcmlmaWVyIERlcml2YXRpb24gKi9cbmZ1bmN0aW9uIGNyeXB0b19DcmVhdGVQYXNzd29yZFZlcmlmaWVyX01ldGhvZDEoUGFzc3dvcmQvKjpzdHJpbmcqLykge1xuXHR2YXIgVmVyaWZpZXIgPSAweDAwMDAsIFBhc3N3b3JkQXJyYXk7XG5cdHZhciBQYXNzd29yZERlY29kZWQgPSBfSlMyQU5TSShQYXNzd29yZCk7XG5cdHZhciBsZW4gPSBQYXNzd29yZERlY29kZWQubGVuZ3RoICsgMSwgaSwgUGFzc3dvcmRCeXRlO1xuXHR2YXIgSW50ZXJtZWRpYXRlMSwgSW50ZXJtZWRpYXRlMiwgSW50ZXJtZWRpYXRlMztcblx0UGFzc3dvcmRBcnJheSA9IG5ld19yYXdfYnVmKGxlbik7XG5cdFBhc3N3b3JkQXJyYXlbMF0gPSBQYXNzd29yZERlY29kZWQubGVuZ3RoO1xuXHRmb3IoaSA9IDE7IGkgIT0gbGVuOyArK2kpIFBhc3N3b3JkQXJyYXlbaV0gPSBQYXNzd29yZERlY29kZWRbaS0xXTtcblx0Zm9yKGkgPSBsZW4tMTsgaSA+PSAwOyAtLWkpIHtcblx0XHRQYXNzd29yZEJ5dGUgPSBQYXNzd29yZEFycmF5W2ldO1xuXHRcdEludGVybWVkaWF0ZTEgPSAoKFZlcmlmaWVyICYgMHg0MDAwKSA9PT0gMHgwMDAwKSA/IDAgOiAxO1xuXHRcdEludGVybWVkaWF0ZTIgPSAoVmVyaWZpZXIgPDwgMSkgJiAweDdGRkY7XG5cdFx0SW50ZXJtZWRpYXRlMyA9IEludGVybWVkaWF0ZTEgfCBJbnRlcm1lZGlhdGUyO1xuXHRcdFZlcmlmaWVyID0gSW50ZXJtZWRpYXRlMyBeIFBhc3N3b3JkQnl0ZTtcblx0fVxuXHRyZXR1cm4gVmVyaWZpZXIgXiAweENFNEI7XG59XG5cbi8qIFtNUy1PRkZDUllQVE9dIDIuMy43LjIgQmluYXJ5IERvY3VtZW50IFhPUiBBcnJheSBJbml0aWFsaXphdGlvbiAqL1xudmFyIGNyeXB0b19DcmVhdGVYb3JBcnJheV9NZXRob2QxID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpIHtcblx0dmFyIFBhZEFycmF5ID0gWzB4QkIsIDB4RkYsIDB4RkYsIDB4QkEsIDB4RkYsIDB4RkYsIDB4QjksIDB4ODAsIDB4MDAsIDB4QkUsIDB4MEYsIDB4MDAsIDB4QkYsIDB4MEYsIDB4MDBdO1xuXHR2YXIgSW5pdGlhbENvZGUgPSBbMHhFMUYwLCAweDFEMEYsIDB4Q0M5QywgMHg4NEMwLCAweDExMEMsIDB4MEUxMCwgMHhGMUNFLCAweDMxM0UsIDB4MTg3MiwgMHhFMTM5LCAweEQ0MEYsIDB4ODRGOSwgMHgyODBDLCAweEE5NkEsIDB4NEVDM107XG5cdHZhciBYb3JNYXRyaXggPSBbMHhBRUZDLCAweDRERDksIDB4OUJCMiwgMHgyNzQ1LCAweDRFOEEsIDB4OUQxNCwgMHgyQTA5LCAweDdCNjEsIDB4RjZDMiwgMHhGREE1LCAweEVCNkIsIDB4QzZGNywgMHg5RENGLCAweDJCQkYsIDB4NDU2MywgMHg4QUM2LCAweDA1QUQsIDB4MEI1QSwgMHgxNkI0LCAweDJENjgsIDB4NUFEMCwgMHgwMzc1LCAweDA2RUEsIDB4MERENCwgMHgxQkE4LCAweDM3NTAsIDB4NkVBMCwgMHhERDQwLCAweEQ4NDksIDB4QTBCMywgMHg1MTQ3LCAweEEyOEUsIDB4NTUzRCwgMHhBQTdBLCAweDQ0RDUsIDB4NkY0NSwgMHhERThBLCAweEFEMzUsIDB4NEE0QiwgMHg5NDk2LCAweDM5MEQsIDB4NzIxQSwgMHhFQjIzLCAweEM2NjcsIDB4OUNFRiwgMHgyOUZGLCAweDUzRkUsIDB4QTdGQywgMHg1RkQ5LCAweDQ3RDMsIDB4OEZBNiwgMHgwRjZELCAweDFFREEsIDB4M0RCNCwgMHg3QjY4LCAweEY2RDAsIDB4Qjg2MSwgMHg2MEUzLCAweEMxQzYsIDB4OTNBRCwgMHgzNzdCLCAweDZFRjYsIDB4RERFQywgMHg0NUEwLCAweDhCNDAsIDB4MDZBMSwgMHgwRDQyLCAweDFBODQsIDB4MzUwOCwgMHg2QTEwLCAweEFBNTEsIDB4NDQ4MywgMHg4OTA2LCAweDAyMkQsIDB4MDQ1QSwgMHgwOEI0LCAweDExNjgsIDB4NzZCNCwgMHhFRDY4LCAweENBRjEsIDB4ODVDMywgMHgxQkE3LCAweDM3NEUsIDB4NkU5QywgMHgzNzMwLCAweDZFNjAsIDB4RENDMCwgMHhBOUExLCAweDQzNjMsIDB4ODZDNiwgMHgxREFELCAweDMzMzEsIDB4NjY2MiwgMHhDQ0M0LCAweDg5QTksIDB4MDM3MywgMHgwNkU2LCAweDBEQ0MsIDB4MTAyMSwgMHgyMDQyLCAweDQwODQsIDB4ODEwOCwgMHgxMjMxLCAweDI0NjIsIDB4NDhDNF07XG5cdHZhciBSb3IgPSBmdW5jdGlvbihCeXRlKSB7IHJldHVybiAoKEJ5dGUvMikgfCAoQnl0ZSoxMjgpKSAmIDB4RkY7IH07XG5cdHZhciBYb3JSb3IgPSBmdW5jdGlvbihieXRlMSwgYnl0ZTIpIHsgcmV0dXJuIFJvcihieXRlMSBeIGJ5dGUyKTsgfTtcblx0dmFyIENyZWF0ZVhvcktleV9NZXRob2QxID0gZnVuY3Rpb24oUGFzc3dvcmQpIHtcblx0XHR2YXIgWG9yS2V5ID0gSW5pdGlhbENvZGVbUGFzc3dvcmQubGVuZ3RoIC0gMV07XG5cdFx0dmFyIEN1cnJlbnRFbGVtZW50ID0gMHg2ODtcblx0XHRmb3IodmFyIGkgPSBQYXNzd29yZC5sZW5ndGgtMTsgaSA+PSAwOyAtLWkpIHtcblx0XHRcdHZhciBDaGFyID0gUGFzc3dvcmRbaV07XG5cdFx0XHRmb3IodmFyIGogPSAwOyBqICE9IDc7ICsraikge1xuXHRcdFx0XHRpZihDaGFyICYgMHg0MCkgWG9yS2V5IF49IFhvck1hdHJpeFtDdXJyZW50RWxlbWVudF07XG5cdFx0XHRcdENoYXIgKj0gMjsgLS1DdXJyZW50RWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIFhvcktleTtcblx0fTtcblx0cmV0dXJuIGZ1bmN0aW9uKHBhc3N3b3JkLyo6c3RyaW5nKi8pIHtcblx0XHR2YXIgUGFzc3dvcmQgPSBfSlMyQU5TSShwYXNzd29yZCk7XG5cdFx0dmFyIFhvcktleSA9IENyZWF0ZVhvcktleV9NZXRob2QxKFBhc3N3b3JkKTtcblx0XHR2YXIgSW5kZXggPSBQYXNzd29yZC5sZW5ndGg7XG5cdFx0dmFyIE9iZnVzY2F0aW9uQXJyYXkgPSBuZXdfcmF3X2J1ZigxNik7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSAhPSAxNjsgKytpKSBPYmZ1c2NhdGlvbkFycmF5W2ldID0gMHgwMDtcblx0XHR2YXIgVGVtcCwgUGFzc3dvcmRMYXN0Q2hhciwgUGFkSW5kZXg7XG5cdFx0aWYoKEluZGV4ICYgMSkgPT09IDEpIHtcblx0XHRcdFRlbXAgPSBYb3JLZXkgPj4gODtcblx0XHRcdE9iZnVzY2F0aW9uQXJyYXlbSW5kZXhdID0gWG9yUm9yKFBhZEFycmF5WzBdLCBUZW1wKTtcblx0XHRcdC0tSW5kZXg7XG5cdFx0XHRUZW1wID0gWG9yS2V5ICYgMHhGRjtcblx0XHRcdFBhc3N3b3JkTGFzdENoYXIgPSBQYXNzd29yZFtQYXNzd29yZC5sZW5ndGggLSAxXTtcblx0XHRcdE9iZnVzY2F0aW9uQXJyYXlbSW5kZXhdID0gWG9yUm9yKFBhc3N3b3JkTGFzdENoYXIsIFRlbXApO1xuXHRcdH1cblx0XHR3aGlsZShJbmRleCA+IDApIHtcblx0XHRcdC0tSW5kZXg7XG5cdFx0XHRUZW1wID0gWG9yS2V5ID4+IDg7XG5cdFx0XHRPYmZ1c2NhdGlvbkFycmF5W0luZGV4XSA9IFhvclJvcihQYXNzd29yZFtJbmRleF0sIFRlbXApO1xuXHRcdFx0LS1JbmRleDtcblx0XHRcdFRlbXAgPSBYb3JLZXkgJiAweEZGO1xuXHRcdFx0T2JmdXNjYXRpb25BcnJheVtJbmRleF0gPSBYb3JSb3IoUGFzc3dvcmRbSW5kZXhdLCBUZW1wKTtcblx0XHR9XG5cdFx0SW5kZXggPSAxNTtcblx0XHRQYWRJbmRleCA9IDE1IC0gUGFzc3dvcmQubGVuZ3RoO1xuXHRcdHdoaWxlKFBhZEluZGV4ID4gMCkge1xuXHRcdFx0VGVtcCA9IFhvcktleSA+PiA4O1xuXHRcdFx0T2JmdXNjYXRpb25BcnJheVtJbmRleF0gPSBYb3JSb3IoUGFkQXJyYXlbUGFkSW5kZXhdLCBUZW1wKTtcblx0XHRcdC0tSW5kZXg7XG5cdFx0XHQtLVBhZEluZGV4O1xuXHRcdFx0VGVtcCA9IFhvcktleSAmIDB4RkY7XG5cdFx0XHRPYmZ1c2NhdGlvbkFycmF5W0luZGV4XSA9IFhvclJvcihQYXNzd29yZFtJbmRleF0sIFRlbXApO1xuXHRcdFx0LS1JbmRleDtcblx0XHRcdC0tUGFkSW5kZXg7XG5cdFx0fVxuXHRcdHJldHVybiBPYmZ1c2NhdGlvbkFycmF5O1xuXHR9O1xufSkoKTtcblxuLyogW01TLU9GRkNSWVBUT10gMi4zLjcuMyBCaW5hcnkgRG9jdW1lbnQgWE9SIERhdGEgVHJhbnNmb3JtYXRpb24gTWV0aG9kIDEgKi9cbnZhciBjcnlwdG9fRGVjcnlwdERhdGFfTWV0aG9kMSA9IGZ1bmN0aW9uKHBhc3N3b3JkLyo6c3RyaW5nKi8sIERhdGEsIFhvckFycmF5SW5kZXgsIFhvckFycmF5LCBPKSB7XG5cdC8qIElmIFhvckFycmF5IGlzIHNldCwgdXNlIGl0OyBpZiBPIGlzIG5vdCBzZXQsIG1ha2UgY2hhbmdlcyBpbi1wbGFjZSAqL1xuXHRpZighTykgTyA9IERhdGE7XG5cdGlmKCFYb3JBcnJheSkgWG9yQXJyYXkgPSBjcnlwdG9fQ3JlYXRlWG9yQXJyYXlfTWV0aG9kMShwYXNzd29yZCk7XG5cdHZhciBJbmRleCwgVmFsdWU7XG5cdGZvcihJbmRleCA9IDA7IEluZGV4ICE9IERhdGEubGVuZ3RoOyArK0luZGV4KSB7XG5cdFx0VmFsdWUgPSBEYXRhW0luZGV4XTtcblx0XHRWYWx1ZSBePSBYb3JBcnJheVtYb3JBcnJheUluZGV4XTtcblx0XHRWYWx1ZSA9ICgoVmFsdWU+PjUpIHwgKFZhbHVlPDwzKSkgJiAweEZGO1xuXHRcdE9bSW5kZXhdID0gVmFsdWU7XG5cdFx0KytYb3JBcnJheUluZGV4O1xuXHR9XG5cdHJldHVybiBbTywgWG9yQXJyYXlJbmRleCwgWG9yQXJyYXldO1xufTtcblxudmFyIGNyeXB0b19NYWtlWG9yRGVjcnlwdG9yID0gZnVuY3Rpb24ocGFzc3dvcmQvKjpzdHJpbmcqLykge1xuXHR2YXIgWG9yQXJyYXlJbmRleCA9IDAsIFhvckFycmF5ID0gY3J5cHRvX0NyZWF0ZVhvckFycmF5X01ldGhvZDEocGFzc3dvcmQpO1xuXHRyZXR1cm4gZnVuY3Rpb24oRGF0YSkge1xuXHRcdHZhciBPID0gY3J5cHRvX0RlY3J5cHREYXRhX01ldGhvZDEoXCJcIiwgRGF0YSwgWG9yQXJyYXlJbmRleCwgWG9yQXJyYXkpO1xuXHRcdFhvckFycmF5SW5kZXggPSBPWzFdO1xuXHRcdHJldHVybiBPWzBdO1xuXHR9O1xufTtcblxuLyogMi41LjM0MyAqL1xuZnVuY3Rpb24gcGFyc2VfWE9ST2JmdXNjYXRpb24oYmxvYiwgbGVuZ3RoLCBvcHRzLCBvdXQpIHtcblx0dmFyIG8gPSAoeyBrZXk6IHBhcnNldWludDE2KGJsb2IpLCB2ZXJpZmljYXRpb25CeXRlczogcGFyc2V1aW50MTYoYmxvYikgfS8qOmFueSovKTtcblx0aWYob3B0cy5wYXNzd29yZCkgby52ZXJpZmllciA9IGNyeXB0b19DcmVhdGVQYXNzd29yZFZlcmlmaWVyX01ldGhvZDEob3B0cy5wYXNzd29yZCk7XG5cdG91dC52YWxpZCA9IG8udmVyaWZpY2F0aW9uQnl0ZXMgPT09IG8udmVyaWZpZXI7XG5cdGlmKG91dC52YWxpZCkgb3V0Lmluc2l0dSA9IGNyeXB0b19NYWtlWG9yRGVjcnlwdG9yKG9wdHMucGFzc3dvcmQpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogMi40LjExNyAqL1xuZnVuY3Rpb24gcGFyc2VfRmlsZVBhc3NIZWFkZXIoYmxvYiwgbGVuZ3RoLyo6bnVtYmVyKi8sIG9vKSB7XG5cdHZhciBvID0gb28gfHwge307IG8uSW5mbyA9IGJsb2IucmVhZF9zaGlmdCgyKTsgYmxvYi5sIC09IDI7XG5cdGlmKG8uSW5mbyA9PT0gMSkgby5EYXRhID0gcGFyc2VfUkM0SGVhZGVyKGJsb2IsIGxlbmd0aCk7XG5cdGVsc2Ugby5EYXRhID0gcGFyc2VfUkM0Q3J5cHRvSGVhZGVyKGJsb2IsIGxlbmd0aCk7XG5cdHJldHVybiBvO1xufVxuZnVuY3Rpb24gcGFyc2VfRmlsZVBhc3MoYmxvYiwgbGVuZ3RoLyo6bnVtYmVyKi8sIG9wdHMpIHtcblx0dmFyIG8gPSAoeyBUeXBlOiBvcHRzLmJpZmYgPj0gOCA/IGJsb2IucmVhZF9zaGlmdCgyKSA6IDAgfS8qOmFueSovKTsgLyogd0VuY3J5cHRpb25UeXBlICovXG5cdGlmKG8uVHlwZSkgcGFyc2VfRmlsZVBhc3NIZWFkZXIoYmxvYiwgbGVuZ3RoLTIsIG8pO1xuXHRlbHNlIHBhcnNlX1hPUk9iZnVzY2F0aW9uKGJsb2IsIG9wdHMuYmlmZiA+PSA4ID8gbGVuZ3RoIDogbGVuZ3RoIC0gMiwgb3B0cywgbyk7XG5cdHJldHVybiBvO1xufVxuXG5cbnZhciBSVEYgPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCkge1xuXHRmdW5jdGlvbiBydGZfdG9fc2hlZXQoZC8qOlJhd0RhdGEqLywgb3B0cykvKjpXb3Jrc2hlZXQqLyB7XG5cdFx0c3dpdGNoKG9wdHMudHlwZSkge1xuXHRcdFx0Y2FzZSAnYmFzZTY0JzogcmV0dXJuIHJ0Zl90b19zaGVldF9zdHIoQmFzZTY0X2RlY29kZShkKSwgb3B0cyk7XG5cdFx0XHRjYXNlICdiaW5hcnknOiByZXR1cm4gcnRmX3RvX3NoZWV0X3N0cihkLCBvcHRzKTtcblx0XHRcdGNhc2UgJ2J1ZmZlcic6IHJldHVybiBydGZfdG9fc2hlZXRfc3RyKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGQpID8gZC50b1N0cmluZygnYmluYXJ5JykgOiBhMnMoZCksIG9wdHMpO1xuXHRcdFx0Y2FzZSAnYXJyYXknOiAgcmV0dXJuIHJ0Zl90b19zaGVldF9zdHIoY2Myc3RyKGQpLCBvcHRzKTtcblx0XHR9XG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvcHRzLnR5cGUpO1xuXHR9XG5cblx0LyogVE9ETzogdGhpcyBpcyBhIHN0dWIgKi9cblx0ZnVuY3Rpb24gcnRmX3RvX3NoZWV0X3N0cihzdHIvKjpzdHJpbmcqLywgb3B0cykvKjpXb3Jrc2hlZXQqLyB7XG5cdFx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHRcdHZhciB3cy8qOldvcmtzaGVldCovID0gby5kZW5zZSA/IChbXS8qOmFueSovKSA6ICh7fS8qOmFueSovKTtcblxuXHRcdHZhciByb3dzID0gc3RyLm1hdGNoKC9cXFxcdHJvd2QuKj9cXFxccm93XFxiL2cpO1xuXHRcdGlmKCFyb3dzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiUlRGIG1pc3NpbmcgdGFibGVcIik7XG5cdFx0dmFyIHJhbmdlLyo6UmFuZ2UqLyA9ICh7czoge2M6MCwgcjowfSwgZToge2M6MCwgcjpyb3dzLmxlbmd0aCAtIDF9fS8qOmFueSovKTtcblx0XHRyb3dzLmZvckVhY2goZnVuY3Rpb24ocm93dGYsIFIpIHtcblx0XHRcdGlmKEFycmF5LmlzQXJyYXkod3MpKSB3c1tSXSA9IFtdO1xuXHRcdFx0dmFyIHJ0ZnJlID0gL1xcXFxcXHcrXFxiL2c7XG5cdFx0XHR2YXIgbGFzdF9pbmRleCA9IDA7XG5cdFx0XHR2YXIgcmVzO1xuXHRcdFx0dmFyIEMgPSAtMTtcblx0XHRcdHdoaWxlKChyZXMgPSBydGZyZS5leGVjKHJvd3RmKSkpIHtcblx0XHRcdFx0c3dpdGNoKHJlc1swXSkge1xuXHRcdFx0XHRcdGNhc2UgXCJcXFxcY2VsbFwiOlxuXHRcdFx0XHRcdFx0dmFyIGRhdGEgPSByb3d0Zi5zbGljZShsYXN0X2luZGV4LCBydGZyZS5sYXN0SW5kZXggLSByZXNbMF0ubGVuZ3RoKTtcblx0XHRcdFx0XHRcdGlmKGRhdGFbMF0gPT0gXCIgXCIpIGRhdGEgPSBkYXRhLnNsaWNlKDEpO1xuXHRcdFx0XHRcdFx0KytDO1xuXHRcdFx0XHRcdFx0aWYoZGF0YS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Ly8gVE9ETzogdmFsdWUgcGFyc2luZywgaW5jbHVkaW5nIGNvZGVwYWdlIGFkanVzdG1lbnRzXG5cdFx0XHRcdFx0XHRcdHZhciBjZWxsID0ge3Y6IGRhdGEsIHQ6XCJzXCJ9O1xuXHRcdFx0XHRcdFx0XHRpZihBcnJheS5pc0FycmF5KHdzKSkgd3NbUl1bQ10gPSBjZWxsO1xuXHRcdFx0XHRcdFx0XHRlbHNlIHdzW2VuY29kZV9jZWxsKHtyOlIsIGM6Q30pXSA9IGNlbGw7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRsYXN0X2luZGV4ID0gcnRmcmUubGFzdEluZGV4O1xuXHRcdFx0fVxuXHRcdFx0aWYoQyA+IHJhbmdlLmUuYykgcmFuZ2UuZS5jID0gQztcblx0XHR9KTtcblx0XHR3c1snIXJlZiddID0gZW5jb2RlX3JhbmdlKHJhbmdlKTtcblx0XHRyZXR1cm4gd3M7XG5cdH1cblxuXHRmdW5jdGlvbiBydGZfdG9fd29ya2Jvb2soZC8qOlJhd0RhdGEqLywgb3B0cykvKjpXb3JrYm9vayovIHsgcmV0dXJuIHNoZWV0X3RvX3dvcmtib29rKHJ0Zl90b19zaGVldChkLCBvcHRzKSwgb3B0cyk7IH1cblxuXHQvKiBUT0RPOiB0aGlzIGlzIGEgc3R1YiAqL1xuXHRmdW5jdGlvbiBzaGVldF90b19ydGYod3MvKjpXb3Jrc2hlZXQqLy8qOjosIG9wdHMqLykvKjpzdHJpbmcqLyB7XG5cdFx0dmFyIG8gPSBbXCJ7XFxcXHJ0ZjFcXFxcYW5zaVwiXTtcblx0XHR2YXIgciA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pLCBjZWxsLyo6Q2VsbCovO1xuXHRcdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkod3MpO1xuXHRcdGZvcih2YXIgUiA9IHIucy5yOyBSIDw9IHIuZS5yOyArK1IpIHtcblx0XHRcdG8ucHVzaChcIlxcXFx0cm93ZFxcXFx0cmF1dG9maXQxXCIpO1xuXHRcdFx0Zm9yKHZhciBDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykgby5wdXNoKFwiXFxcXGNlbGx4XCIgKyAoQysxKSk7XG5cdFx0XHRvLnB1c2goXCJcXFxccGFyZFxcXFxpbnRibFwiKTtcblx0XHRcdGZvcihDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykge1xuXHRcdFx0XHR2YXIgY29vcmQgPSBlbmNvZGVfY2VsbCh7cjpSLGM6Q30pO1xuXHRcdFx0XHRjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXTogd3NbY29vcmRdO1xuXHRcdFx0XHRpZighY2VsbCB8fCBjZWxsLnYgPT0gbnVsbCAmJiAoIWNlbGwuZiB8fCBjZWxsLkYpKSBjb250aW51ZTtcblx0XHRcdFx0by5wdXNoKFwiIFwiICsgKGNlbGwudyB8fCAoZm9ybWF0X2NlbGwoY2VsbCksIGNlbGwudykpKTtcblx0XHRcdFx0by5wdXNoKFwiXFxcXGNlbGxcIik7XG5cdFx0XHR9XG5cdFx0XHRvLnB1c2goXCJcXFxccGFyZFxcXFxpbnRibFxcXFxyb3dcIik7XG5cdFx0fVxuXHRcdHJldHVybiBvLmpvaW4oXCJcIikgKyBcIn1cIjtcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0dG9fd29ya2Jvb2s6IHJ0Zl90b193b3JrYm9vayxcblx0XHR0b19zaGVldDogcnRmX3RvX3NoZWV0LFxuXHRcdGZyb21fc2hlZXQ6IHNoZWV0X3RvX3J0ZlxuXHR9O1xufSkoKTtcbmZ1bmN0aW9uIGhleDJSR0IoaCkge1xuXHR2YXIgbyA9IGguc2xpY2UoaFswXT09PVwiI1wiPzE6MCkuc2xpY2UoMCw2KTtcblx0cmV0dXJuIFtwYXJzZUludChvLnNsaWNlKDAsMiksMTYpLHBhcnNlSW50KG8uc2xpY2UoMiw0KSwxNikscGFyc2VJbnQoby5zbGljZSg0LDYpLDE2KV07XG59XG5mdW5jdGlvbiByZ2IySGV4KHJnYikge1xuXHRmb3IodmFyIGk9MCxvPTE7IGkhPTM7ICsraSkgbyA9IG8qMjU2ICsgKHJnYltpXT4yNTU/MjU1OnJnYltpXTwwPzA6cmdiW2ldKTtcblx0cmV0dXJuIG8udG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkuc2xpY2UoMSk7XG59XG5cbmZ1bmN0aW9uIHJnYjJIU0wocmdiKSB7XG5cdHZhciBSID0gcmdiWzBdLzI1NSwgRyA9IHJnYlsxXS8yNTUsIEI9cmdiWzJdLzI1NTtcblx0dmFyIE0gPSBNYXRoLm1heChSLCBHLCBCKSwgbSA9IE1hdGgubWluKFIsIEcsIEIpLCBDID0gTSAtIG07XG5cdGlmKEMgPT09IDApIHJldHVybiBbMCwgMCwgUl07XG5cblx0dmFyIEg2ID0gMCwgUyA9IDAsIEwyID0gKE0gKyBtKTtcblx0UyA9IEMgLyAoTDIgPiAxID8gMiAtIEwyIDogTDIpO1xuXHRzd2l0Y2goTSl7XG5cdFx0Y2FzZSBSOiBINiA9ICgoRyAtIEIpIC8gQyArIDYpJTY7IGJyZWFrO1xuXHRcdGNhc2UgRzogSDYgPSAoKEIgLSBSKSAvIEMgKyAyKTsgYnJlYWs7XG5cdFx0Y2FzZSBCOiBINiA9ICgoUiAtIEcpIC8gQyArIDQpOyBicmVhaztcblx0fVxuXHRyZXR1cm4gW0g2IC8gNiwgUywgTDIgLyAyXTtcbn1cblxuZnVuY3Rpb24gaHNsMlJHQihoc2wpe1xuXHR2YXIgSCA9IGhzbFswXSwgUyA9IGhzbFsxXSwgTCA9IGhzbFsyXTtcblx0dmFyIEMgPSBTICogMiAqIChMIDwgMC41ID8gTCA6IDEgLSBMKSwgbSA9IEwgLSBDLzI7XG5cdHZhciByZ2IgPSBbbSxtLG1dLCBoNiA9IDYqSDtcblxuXHR2YXIgWDtcblx0aWYoUyAhPT0gMCkgc3dpdGNoKGg2fDApIHtcblx0XHRjYXNlIDA6IGNhc2UgNjogWCA9IEMgKiBoNjsgcmdiWzBdICs9IEM7IHJnYlsxXSArPSBYOyBicmVhaztcblx0XHRjYXNlIDE6IFggPSBDICogKDIgLSBoNik7ICAgcmdiWzBdICs9IFg7IHJnYlsxXSArPSBDOyBicmVhaztcblx0XHRjYXNlIDI6IFggPSBDICogKGg2IC0gMik7ICAgcmdiWzFdICs9IEM7IHJnYlsyXSArPSBYOyBicmVhaztcblx0XHRjYXNlIDM6IFggPSBDICogKDQgLSBoNik7ICAgcmdiWzFdICs9IFg7IHJnYlsyXSArPSBDOyBicmVhaztcblx0XHRjYXNlIDQ6IFggPSBDICogKGg2IC0gNCk7ICAgcmdiWzJdICs9IEM7IHJnYlswXSArPSBYOyBicmVhaztcblx0XHRjYXNlIDU6IFggPSBDICogKDYgLSBoNik7ICAgcmdiWzJdICs9IFg7IHJnYlswXSArPSBDOyBicmVhaztcblx0fVxuXHRmb3IodmFyIGkgPSAwOyBpICE9IDM7ICsraSkgcmdiW2ldID0gTWF0aC5yb3VuZChyZ2JbaV0qMjU1KTtcblx0cmV0dXJuIHJnYjtcbn1cblxuLyogMTguOC4zIGJnQ29sb3IgdGludCBhbGdvcml0aG0gKi9cbmZ1bmN0aW9uIHJnYl90aW50KGhleCwgdGludCkge1xuXHRpZih0aW50ID09PSAwKSByZXR1cm4gaGV4O1xuXHR2YXIgaHNsID0gcmdiMkhTTChoZXgyUkdCKGhleCkpO1xuXHRpZiAodGludCA8IDApIGhzbFsyXSA9IGhzbFsyXSAqICgxICsgdGludCk7XG5cdGVsc2UgaHNsWzJdID0gMSAtICgxIC0gaHNsWzJdKSAqICgxIC0gdGludCk7XG5cdHJldHVybiByZ2IySGV4KGhzbDJSR0IoaHNsKSk7XG59XG5cbi8qIDE4LjMuMS4xMyB3aWR0aCBjYWxjdWxhdGlvbnMgKi9cbi8qIFtNUy1PSTI5NTAwXSAyLjEuNTk1IENvbHVtbiBXaWR0aCAmIEZvcm1hdHRpbmcgKi9cbnZhciBERUZfTURXID0gNiwgTUFYX01EVyA9IDE1LCBNSU5fTURXID0gMSwgTURXID0gREVGX01EVztcbmZ1bmN0aW9uIHdpZHRoMnB4KHdpZHRoKSB7IHJldHVybiBNYXRoLmZsb29yKCggd2lkdGggKyAoTWF0aC5yb3VuZCgxMjgvTURXKSkvMjU2ICkqIE1EVyApOyB9XG5mdW5jdGlvbiBweDJjaGFyKHB4KSB7IHJldHVybiAoTWF0aC5mbG9vcigocHggLSA1KS9NRFcgKiAxMDAgKyAwLjUpKS8xMDA7IH1cbmZ1bmN0aW9uIGNoYXIyd2lkdGgoY2hyKSB7IHJldHVybiAoTWF0aC5yb3VuZCgoY2hyICogTURXICsgNSkvTURXKjI1NikpLzI1NjsgfVxuLy9mdW5jdGlvbiBweDJjaGFyXyhweCkgeyByZXR1cm4gKCgocHggLSA1KS9NRFcgKiAxMDAgKyAwLjUpKS8xMDA7IH1cbi8vZnVuY3Rpb24gY2hhcjJ3aWR0aF8oY2hyKSB7IHJldHVybiAoKChjaHIgKiBNRFcgKyA1KS9NRFcqMjU2KSkvMjU2OyB9XG5mdW5jdGlvbiBjeWNsZV93aWR0aChjb2xsdykgeyByZXR1cm4gY2hhcjJ3aWR0aChweDJjaGFyKHdpZHRoMnB4KGNvbGx3KSkpOyB9XG4vKiBYTFNYL1hMU0IvWExTIHNwZWNpZnkgd2lkdGggaW4gdW5pdHMgb2YgTURXICovXG5mdW5jdGlvbiBmaW5kX21kd19jb2x3KGNvbGx3KSB7XG5cdHZhciBkZWx0YSA9IE1hdGguYWJzKGNvbGx3IC0gY3ljbGVfd2lkdGgoY29sbHcpKSwgX01EVyA9IE1EVztcblx0aWYoZGVsdGEgPiAwLjAwNSkgZm9yKE1EVz1NSU5fTURXOyBNRFc8TUFYX01EVzsgKytNRFcpIGlmKE1hdGguYWJzKGNvbGx3IC0gY3ljbGVfd2lkdGgoY29sbHcpKSA8PSBkZWx0YSkgeyBkZWx0YSA9IE1hdGguYWJzKGNvbGx3IC0gY3ljbGVfd2lkdGgoY29sbHcpKTsgX01EVyA9IE1EVzsgfVxuXHRNRFcgPSBfTURXO1xufVxuLyogWExNTCBzcGVjaWZpZXMgd2lkdGggaW4gdGVybXMgb2YgcGl4ZWxzICovXG4vKmZ1bmN0aW9uIGZpbmRfbWR3X3dweCh3cHgpIHtcblx0dmFyIGRlbHRhID0gSW5maW5pdHksIGd1ZXNzID0gMCwgX01EVyA9IE1JTl9NRFc7XG5cdGZvcihNRFc9TUlOX01EVzsgTURXPE1BWF9NRFc7ICsrTURXKSB7XG5cdFx0Z3Vlc3MgPSBjaGFyMndpZHRoXyhweDJjaGFyXyh3cHgpKSoyNTY7XG5cdFx0Z3Vlc3MgPSAoZ3Vlc3MpICUgMTtcblx0XHRpZihndWVzcyA+IDAuNSkgZ3Vlc3MtLTtcblx0XHRpZihNYXRoLmFicyhndWVzcykgPCBkZWx0YSkgeyBkZWx0YSA9IE1hdGguYWJzKGd1ZXNzKTsgX01EVyA9IE1EVzsgfVxuXHR9XG5cdE1EVyA9IF9NRFc7XG59Ki9cblxuZnVuY3Rpb24gcHJvY2Vzc19jb2woY29sbC8qOkNvbEluZm8qLykge1xuXHRpZihjb2xsLndpZHRoKSB7XG5cdFx0Y29sbC53cHggPSB3aWR0aDJweChjb2xsLndpZHRoKTtcblx0XHRjb2xsLndjaCA9IHB4MmNoYXIoY29sbC53cHgpO1xuXHRcdGNvbGwuTURXID0gTURXO1xuXHR9IGVsc2UgaWYoY29sbC53cHgpIHtcblx0XHRjb2xsLndjaCA9IHB4MmNoYXIoY29sbC53cHgpO1xuXHRcdGNvbGwud2lkdGggPSBjaGFyMndpZHRoKGNvbGwud2NoKTtcblx0XHRjb2xsLk1EVyA9IE1EVztcblx0fSBlbHNlIGlmKHR5cGVvZiBjb2xsLndjaCA9PSAnbnVtYmVyJykge1xuXHRcdGNvbGwud2lkdGggPSBjaGFyMndpZHRoKGNvbGwud2NoKTtcblx0XHRjb2xsLndweCA9IHdpZHRoMnB4KGNvbGwud2lkdGgpO1xuXHRcdGNvbGwuTURXID0gTURXO1xuXHR9XG5cdGlmKGNvbGwuY3VzdG9tV2lkdGgpIGRlbGV0ZSBjb2xsLmN1c3RvbVdpZHRoO1xufVxuXG52YXIgREVGX1BQSSA9IDk2LCBQUEkgPSBERUZfUFBJO1xuZnVuY3Rpb24gcHgycHQocHgpIHsgcmV0dXJuIHB4ICogOTYgLyBQUEk7IH1cbmZ1bmN0aW9uIHB0MnB4KHB0KSB7IHJldHVybiBwdCAqIFBQSSAvIDk2OyB9XG5cbi8qIFtNUy1FWFNQWE1MM10gMi40LjU0IFNUX2VubVBhdHRlcm4gKi9cbnZhciBYTE1MUGF0dGVyblR5cGVNYXAgPSB7XG5cdFwiTm9uZVwiOiBcIm5vbmVcIixcblx0XCJTb2xpZFwiOiBcInNvbGlkXCIsXG5cdFwiR3JheTUwXCI6IFwibWVkaXVtR3JheVwiLFxuXHRcIkdyYXk3NVwiOiBcImRhcmtHcmF5XCIsXG5cdFwiR3JheTI1XCI6IFwibGlnaHRHcmF5XCIsXG5cdFwiSG9yelN0cmlwZVwiOiBcImRhcmtIb3Jpem9udGFsXCIsXG5cdFwiVmVydFN0cmlwZVwiOiBcImRhcmtWZXJ0aWNhbFwiLFxuXHRcIlJldmVyc2VEaWFnU3RyaXBlXCI6IFwiZGFya0Rvd25cIixcblx0XCJEaWFnU3RyaXBlXCI6IFwiZGFya1VwXCIsXG5cdFwiRGlhZ0Nyb3NzXCI6IFwiZGFya0dyaWRcIixcblx0XCJUaGlja0RpYWdDcm9zc1wiOiBcImRhcmtUcmVsbGlzXCIsXG5cdFwiVGhpbkhvcnpTdHJpcGVcIjogXCJsaWdodEhvcml6b250YWxcIixcblx0XCJUaGluVmVydFN0cmlwZVwiOiBcImxpZ2h0VmVydGljYWxcIixcblx0XCJUaGluUmV2ZXJzZURpYWdTdHJpcGVcIjogXCJsaWdodERvd25cIixcblx0XCJUaGluSG9yekNyb3NzXCI6IFwibGlnaHRHcmlkXCJcbn07XG5cbi8qIDE4LjguNSBib3JkZXJzIENUX0JvcmRlcnMgKi9cbmZ1bmN0aW9uIHBhcnNlX2JvcmRlcnModCwgc3R5bGVzLCB0aGVtZXMsIG9wdHMpIHtcblx0c3R5bGVzLkJvcmRlcnMgPSBbXTtcblx0dmFyIGJvcmRlciA9IHt9O1xuXHR2YXIgcGFzcyA9IGZhbHNlO1xuXHQodFswXS5tYXRjaCh0YWdyZWdleCl8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcblx0XHR2YXIgeSA9IHBhcnNleG1sdGFnKHgpO1xuXHRcdHN3aXRjaChzdHJpcF9ucyh5WzBdKSkge1xuXHRcdFx0Y2FzZSAnPGJvcmRlcnMnOiBjYXNlICc8Ym9yZGVycz4nOiBjYXNlICc8L2JvcmRlcnM+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguNCBib3JkZXIgQ1RfQm9yZGVyICovXG5cdFx0XHRjYXNlICc8Ym9yZGVyJzogY2FzZSAnPGJvcmRlcj4nOiBjYXNlICc8Ym9yZGVyLz4nOlxuXHRcdFx0XHRib3JkZXIgPSAvKjo6KCove30vKjo6IDphbnkpKi87XG5cdFx0XHRcdGlmKHkuZGlhZ29uYWxVcCkgYm9yZGVyLmRpYWdvbmFsVXAgPSBwYXJzZXhtbGJvb2woeS5kaWFnb25hbFVwKTtcblx0XHRcdFx0aWYoeS5kaWFnb25hbERvd24pIGJvcmRlci5kaWFnb25hbERvd24gPSBwYXJzZXhtbGJvb2woeS5kaWFnb25hbERvd24pO1xuXHRcdFx0XHRzdHlsZXMuQm9yZGVycy5wdXNoKGJvcmRlcik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9ib3JkZXI+JzogYnJlYWs7XG5cblx0XHRcdC8qIG5vdGU6IG5vdCBpbiBzcGVjLCBhcHBlYXJzIHRvIGJlIENUX0JvcmRlclByICovXG5cdFx0XHRjYXNlICc8bGVmdC8+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8bGVmdCc6IGNhc2UgJzxsZWZ0Pic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9sZWZ0Pic6IGJyZWFrO1xuXG5cdFx0XHQvKiBub3RlOiBub3QgaW4gc3BlYywgYXBwZWFycyB0byBiZSBDVF9Cb3JkZXJQciAqL1xuXHRcdFx0Y2FzZSAnPHJpZ2h0Lz4nOiBicmVhaztcblx0XHRcdGNhc2UgJzxyaWdodCc6IGNhc2UgJzxyaWdodD4nOiBicmVhaztcblx0XHRcdGNhc2UgJzwvcmlnaHQ+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguNDMgdG9wIENUX0JvcmRlclByICovXG5cdFx0XHRjYXNlICc8dG9wLz4nOiBicmVhaztcblx0XHRcdGNhc2UgJzx0b3AnOiBjYXNlICc8dG9wPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC90b3A+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguNiBib3R0b20gQ1RfQm9yZGVyUHIgKi9cblx0XHRcdGNhc2UgJzxib3R0b20vPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGJvdHRvbSc6IGNhc2UgJzxib3R0b20+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8L2JvdHRvbT4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4xMyBkaWFnb25hbCBDVF9Cb3JkZXJQciAqL1xuXHRcdFx0Y2FzZSAnPGRpYWdvbmFsJzogY2FzZSAnPGRpYWdvbmFsPic6IGNhc2UgJzxkaWFnb25hbC8+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8L2RpYWdvbmFsPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjI1IGhvcml6b250YWwgQ1RfQm9yZGVyUHIgKi9cblx0XHRcdGNhc2UgJzxob3Jpem9udGFsJzogY2FzZSAnPGhvcml6b250YWw+JzogY2FzZSAnPGhvcml6b250YWwvPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9ob3Jpem9udGFsPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjQ0IHZlcnRpY2FsIENUX0JvcmRlclByICovXG5cdFx0XHRjYXNlICc8dmVydGljYWwnOiBjYXNlICc8dmVydGljYWw+JzogY2FzZSAnPHZlcnRpY2FsLz4nOiBicmVhaztcblx0XHRcdGNhc2UgJzwvdmVydGljYWw+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMzcgc3RhcnQgQ1RfQm9yZGVyUHIgKi9cblx0XHRcdGNhc2UgJzxzdGFydCc6IGNhc2UgJzxzdGFydD4nOiBjYXNlICc8c3RhcnQvPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9zdGFydD4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4xNiBlbmQgQ1RfQm9yZGVyUHIgKi9cblx0XHRcdGNhc2UgJzxlbmQnOiBjYXNlICc8ZW5kPic6IGNhc2UgJzxlbmQvPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9lbmQ+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguPyBjb2xvciBDVF9Db2xvciAqL1xuXHRcdFx0Y2FzZSAnPGNvbG9yJzogY2FzZSAnPGNvbG9yPic6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGNvbG9yLz4nOiBjYXNlICc8L2NvbG9yPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjEwIGV4dExzdCBDVF9FeHRlbnNpb25MaXN0ID8gKi9cblx0XHRcdGNhc2UgJzxleHRMc3QnOiBjYXNlICc8ZXh0THN0Pic6IGNhc2UgJzwvZXh0THN0Pic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGV4dCc6IHBhc3MgPSB0cnVlOyBicmVhaztcblx0XHRcdGNhc2UgJzwvZXh0Pic6IHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cdFx0XHRkZWZhdWx0OiBpZihvcHRzICYmIG9wdHMuV1RGKSB7XG5cdFx0XHRcdGlmKCFwYXNzKSB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCAnICsgeVswXSArICcgaW4gYm9yZGVycycpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbi8qIDE4LjguMjEgZmlsbHMgQ1RfRmlsbHMgKi9cbmZ1bmN0aW9uIHBhcnNlX2ZpbGxzKHQsIHN0eWxlcywgdGhlbWVzLCBvcHRzKSB7XG5cdHN0eWxlcy5GaWxscyA9IFtdO1xuXHR2YXIgZmlsbCA9IHt9O1xuXHR2YXIgcGFzcyA9IGZhbHNlO1xuXHQodFswXS5tYXRjaCh0YWdyZWdleCl8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcblx0XHR2YXIgeSA9IHBhcnNleG1sdGFnKHgpO1xuXHRcdHN3aXRjaChzdHJpcF9ucyh5WzBdKSkge1xuXHRcdFx0Y2FzZSAnPGZpbGxzJzogY2FzZSAnPGZpbGxzPic6IGNhc2UgJzwvZmlsbHM+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMjAgZmlsbCBDVF9GaWxsICovXG5cdFx0XHRjYXNlICc8ZmlsbD4nOiBjYXNlICc8ZmlsbCc6IGNhc2UgJzxmaWxsLz4nOlxuXHRcdFx0XHRmaWxsID0ge307IHN0eWxlcy5GaWxscy5wdXNoKGZpbGwpOyBicmVhaztcblx0XHRcdGNhc2UgJzwvZmlsbD4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4yNCBncmFkaWVudEZpbGwgQ1RfR3JhZGllbnRGaWxsICovXG5cdFx0XHRjYXNlICc8Z3JhZGllbnRGaWxsPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGdyYWRpZW50RmlsbCc6XG5cdFx0XHRjYXNlICc8L2dyYWRpZW50RmlsbD4nOiBzdHlsZXMuRmlsbHMucHVzaChmaWxsKTsgZmlsbCA9IHt9OyBicmVhaztcblxuXHRcdFx0LyogMTguOC4zMiBwYXR0ZXJuRmlsbCBDVF9QYXR0ZXJuRmlsbCAqL1xuXHRcdFx0Y2FzZSAnPHBhdHRlcm5GaWxsJzogY2FzZSAnPHBhdHRlcm5GaWxsPic6XG5cdFx0XHRcdGlmKHkucGF0dGVyblR5cGUpIGZpbGwucGF0dGVyblR5cGUgPSB5LnBhdHRlcm5UeXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzxwYXR0ZXJuRmlsbC8+JzogY2FzZSAnPC9wYXR0ZXJuRmlsbD4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4zIGJnQ29sb3IgQ1RfQ29sb3IgKi9cblx0XHRcdGNhc2UgJzxiZ0NvbG9yJzpcblx0XHRcdFx0aWYoIWZpbGwuYmdDb2xvcikgZmlsbC5iZ0NvbG9yID0ge307XG5cdFx0XHRcdGlmKHkuaW5kZXhlZCkgZmlsbC5iZ0NvbG9yLmluZGV4ZWQgPSBwYXJzZUludCh5LmluZGV4ZWQsIDEwKTtcblx0XHRcdFx0aWYoeS50aGVtZSkgZmlsbC5iZ0NvbG9yLnRoZW1lID0gcGFyc2VJbnQoeS50aGVtZSwgMTApO1xuXHRcdFx0XHRpZih5LnRpbnQpIGZpbGwuYmdDb2xvci50aW50ID0gcGFyc2VGbG9hdCh5LnRpbnQpO1xuXHRcdFx0XHQvKiBFeGNlbCB1c2VzIEFSR0Igc3RyaW5ncyAqL1xuXHRcdFx0XHRpZih5LnJnYikgZmlsbC5iZ0NvbG9yLnJnYiA9IHkucmdiLnNsaWNlKC02KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc8YmdDb2xvci8+JzogY2FzZSAnPC9iZ0NvbG9yPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjE5IGZnQ29sb3IgQ1RfQ29sb3IgKi9cblx0XHRcdGNhc2UgJzxmZ0NvbG9yJzpcblx0XHRcdFx0aWYoIWZpbGwuZmdDb2xvcikgZmlsbC5mZ0NvbG9yID0ge307XG5cdFx0XHRcdGlmKHkudGhlbWUpIGZpbGwuZmdDb2xvci50aGVtZSA9IHBhcnNlSW50KHkudGhlbWUsIDEwKTtcblx0XHRcdFx0aWYoeS50aW50KSBmaWxsLmZnQ29sb3IudGludCA9IHBhcnNlRmxvYXQoeS50aW50KTtcblx0XHRcdFx0LyogRXhjZWwgdXNlcyBBUkdCIHN0cmluZ3MgKi9cblx0XHRcdFx0aWYoeS5yZ2IgIT0gbnVsbCkgZmlsbC5mZ0NvbG9yLnJnYiA9IHkucmdiLnNsaWNlKC02KTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc8ZmdDb2xvci8+JzogY2FzZSAnPC9mZ0NvbG9yPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjM4IHN0b3AgQ1RfR3JhZGllbnRTdG9wICovXG5cdFx0XHRjYXNlICc8c3RvcCc6IGNhc2UgJzxzdG9wLz4nOiBicmVhaztcblx0XHRcdGNhc2UgJzwvc3RvcD4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4/IGNvbG9yIENUX0NvbG9yICovXG5cdFx0XHRjYXNlICc8Y29sb3InOiBjYXNlICc8Y29sb3IvPic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9jb2xvcj4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4xMCBleHRMc3QgQ1RfRXh0ZW5zaW9uTGlzdCA/ICovXG5cdFx0XHRjYXNlICc8ZXh0THN0JzogY2FzZSAnPGV4dExzdD4nOiBjYXNlICc8L2V4dExzdD4nOiBicmVhaztcblx0XHRcdGNhc2UgJzxleHQnOiBwYXNzID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L2V4dD4nOiBwYXNzID0gZmFsc2U7IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDogaWYob3B0cyAmJiBvcHRzLldURikge1xuXHRcdFx0XHRpZighcGFzcykgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgJyArIHlbMF0gKyAnIGluIGZpbGxzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuLyogMTguOC4yMyBmb250cyBDVF9Gb250cyAqL1xuZnVuY3Rpb24gcGFyc2VfZm9udHModCwgc3R5bGVzLCB0aGVtZXMsIG9wdHMpIHtcblx0c3R5bGVzLkZvbnRzID0gW107XG5cdHZhciBmb250ID0ge307XG5cdHZhciBwYXNzID0gZmFsc2U7XG5cdCh0WzBdLm1hdGNoKHRhZ3JlZ2V4KXx8W10pLmZvckVhY2goZnVuY3Rpb24oeCkge1xuXHRcdHZhciB5ID0gcGFyc2V4bWx0YWcoeCk7XG5cdFx0c3dpdGNoKHN0cmlwX25zKHlbMF0pKSB7XG5cdFx0XHRjYXNlICc8Zm9udHMnOiBjYXNlICc8Zm9udHM+JzogY2FzZSAnPC9mb250cz4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4yMiBmb250IENUX0ZvbnQgKi9cblx0XHRcdGNhc2UgJzxmb250JzogY2FzZSAnPGZvbnQ+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8L2ZvbnQ+JzogY2FzZSAnPGZvbnQvPic6XG5cdFx0XHRcdHN0eWxlcy5Gb250cy5wdXNoKGZvbnQpO1xuXHRcdFx0XHRmb250ID0ge307XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjI5IG5hbWUgQ1RfRm9udE5hbWUgKi9cblx0XHRcdGNhc2UgJzxuYW1lJzogaWYoeS52YWwpIGZvbnQubmFtZSA9IHV0ZjhyZWFkKHkudmFsKTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8bmFtZS8+JzogY2FzZSAnPC9uYW1lPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjIgIGIgQ1RfQm9vbGVhblByb3BlcnR5ICovXG5cdFx0XHRjYXNlICc8Yic6IGZvbnQuYm9sZCA9IHkudmFsID8gcGFyc2V4bWxib29sKHkudmFsKSA6IDE7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGIvPic6IGZvbnQuYm9sZCA9IDE7IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjI2IGkgQ1RfQm9vbGVhblByb3BlcnR5ICovXG5cdFx0XHRjYXNlICc8aSc6IGZvbnQuaXRhbGljID0geS52YWwgPyBwYXJzZXhtbGJvb2woeS52YWwpIDogMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8aS8+JzogZm9udC5pdGFsaWMgPSAxOyBicmVhaztcblxuXHRcdFx0LyogMTguNC4xMyB1IENUX1VuZGVybGluZVByb3BlcnR5ICovXG5cdFx0XHRjYXNlICc8dSc6XG5cdFx0XHRcdHN3aXRjaCh5LnZhbCkge1xuXHRcdFx0XHRcdGNhc2UgXCJub25lXCI6IGZvbnQudW5kZXJsaW5lID0gMHgwMDsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSBcInNpbmdsZVwiOiBmb250LnVuZGVybGluZSA9IDB4MDE7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJkb3VibGVcIjogZm9udC51bmRlcmxpbmUgPSAweDAyOyBicmVhaztcblx0XHRcdFx0XHRjYXNlIFwic2luZ2xlQWNjb3VudGluZ1wiOiBmb250LnVuZGVybGluZSA9IDB4MjE7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJkb3VibGVBY2NvdW50aW5nXCI6IGZvbnQudW5kZXJsaW5lID0gMHgyMjsgYnJlYWs7XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRjYXNlICc8dS8+JzogZm9udC51bmRlcmxpbmUgPSAxOyBicmVhaztcblxuXHRcdFx0LyogMTguNC4xMCBzdHJpa2UgQ1RfQm9vbGVhblByb3BlcnR5ICovXG5cdFx0XHRjYXNlICc8c3RyaWtlJzogZm9udC5zdHJpa2UgPSB5LnZhbCA/IHBhcnNleG1sYm9vbCh5LnZhbCkgOiAxOyBicmVhaztcblx0XHRcdGNhc2UgJzxzdHJpa2UvPic6IGZvbnQuc3RyaWtlID0gMTsgYnJlYWs7XG5cblx0XHRcdC8qIDE4LjQuMiAgb3V0bGluZSBDVF9Cb29sZWFuUHJvcGVydHkgKi9cblx0XHRcdGNhc2UgJzxvdXRsaW5lJzogZm9udC5vdXRsaW5lID0geS52YWwgPyBwYXJzZXhtbGJvb2woeS52YWwpIDogMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8b3V0bGluZS8+JzogZm9udC5vdXRsaW5lID0gMTsgYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMzYgc2hhZG93IENUX0Jvb2xlYW5Qcm9wZXJ0eSAqL1xuXHRcdFx0Y2FzZSAnPHNoYWRvdyc6IGZvbnQuc2hhZG93ID0geS52YWwgPyBwYXJzZXhtbGJvb2woeS52YWwpIDogMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8c2hhZG93Lz4nOiBmb250LnNoYWRvdyA9IDE7IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjEyIGNvbmRlbnNlIENUX0Jvb2xlYW5Qcm9wZXJ0eSAqL1xuXHRcdFx0Y2FzZSAnPGNvbmRlbnNlJzogZm9udC5jb25kZW5zZSA9IHkudmFsID8gcGFyc2V4bWxib29sKHkudmFsKSA6IDE7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGNvbmRlbnNlLz4nOiBmb250LmNvbmRlbnNlID0gMTsgYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguMTcgZXh0ZW5kIENUX0Jvb2xlYW5Qcm9wZXJ0eSAqL1xuXHRcdFx0Y2FzZSAnPGV4dGVuZCc6IGZvbnQuZXh0ZW5kID0geS52YWwgPyBwYXJzZXhtbGJvb2woeS52YWwpIDogMTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8ZXh0ZW5kLz4nOiBmb250LmV4dGVuZCA9IDE7IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC40LjExIHN6IENUX0ZvbnRTaXplICovXG5cdFx0XHRjYXNlICc8c3onOiBpZih5LnZhbCkgZm9udC5zeiA9ICt5LnZhbDsgYnJlYWs7XG5cdFx0XHRjYXNlICc8c3ovPic6IGNhc2UgJzwvc3o+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjQuMTQgdmVydEFsaWduIENUX1ZlcnRpY2FsQWxpZ25Gb250UHJvcGVydHkgKi9cblx0XHRcdGNhc2UgJzx2ZXJ0QWxpZ24nOiBpZih5LnZhbCkgZm9udC52ZXJ0QWxpZ24gPSB5LnZhbDsgYnJlYWs7XG5cdFx0XHRjYXNlICc8dmVydEFsaWduLz4nOiBjYXNlICc8L3ZlcnRBbGlnbj4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4xOCBmYW1pbHkgQ1RfRm9udEZhbWlseSAqL1xuXHRcdFx0Y2FzZSAnPGZhbWlseSc6IGlmKHkudmFsKSBmb250LmZhbWlseSA9IHBhcnNlSW50KHkudmFsLDEwKTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8ZmFtaWx5Lz4nOiBjYXNlICc8L2ZhbWlseT4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4zNSBzY2hlbWUgQ1RfRm9udFNjaGVtZSAqL1xuXHRcdFx0Y2FzZSAnPHNjaGVtZSc6IGlmKHkudmFsKSBmb250LnNjaGVtZSA9IHkudmFsOyBicmVhaztcblx0XHRcdGNhc2UgJzxzY2hlbWUvPic6IGNhc2UgJzwvc2NoZW1lPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC40LjEgY2hhcnNldCBDVF9JbnRQcm9wZXJ0eSAqL1xuXHRcdFx0Y2FzZSAnPGNoYXJzZXQnOlxuXHRcdFx0XHRpZih5LnZhbCA9PSAnMScpIGJyZWFrO1xuXHRcdFx0XHR5LmNvZGVwYWdlID0gQ1MyQ1BbcGFyc2VJbnQoeS52YWwsIDEwKV07XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4/Lj8gY29sb3IgQ1RfQ29sb3IgKi9cblx0XHRcdGNhc2UgJzxjb2xvcic6XG5cdFx0XHRcdGlmKCFmb250LmNvbG9yKSBmb250LmNvbG9yID0ge307XG5cdFx0XHRcdGlmKHkuYXV0bykgZm9udC5jb2xvci5hdXRvID0gcGFyc2V4bWxib29sKHkuYXV0byk7XG5cblx0XHRcdFx0aWYoeS5yZ2IpIGZvbnQuY29sb3IucmdiID0geS5yZ2Iuc2xpY2UoLTYpO1xuXHRcdFx0XHRlbHNlIGlmKHkuaW5kZXhlZCkge1xuXHRcdFx0XHRcdGZvbnQuY29sb3IuaW5kZXggPSBwYXJzZUludCh5LmluZGV4ZWQsIDEwKTtcblx0XHRcdFx0XHR2YXIgaWN2ID0gWExTSWN2W2ZvbnQuY29sb3IuaW5kZXhdO1xuXHRcdFx0XHRcdGlmKGZvbnQuY29sb3IuaW5kZXggPT0gODEpIGljdiA9IFhMU0ljdlsxXTtcblx0XHRcdFx0XHRpZighaWN2KSBpY3YgPSBYTFNJY3ZbMV07IC8vdGhyb3cgbmV3IEVycm9yKHgpOyAvLyBub3RlOiAyMDYgaXMgdmFsaWRcblx0XHRcdFx0XHRmb250LmNvbG9yLnJnYiA9IGljdlswXS50b1N0cmluZygxNikgKyBpY3ZbMV0udG9TdHJpbmcoMTYpICsgaWN2WzJdLnRvU3RyaW5nKDE2KTtcblx0XHRcdFx0fSBlbHNlIGlmKHkudGhlbWUpIHtcblx0XHRcdFx0XHRmb250LmNvbG9yLnRoZW1lID0gcGFyc2VJbnQoeS50aGVtZSwgMTApO1xuXHRcdFx0XHRcdGlmKHkudGludCkgZm9udC5jb2xvci50aW50ID0gcGFyc2VGbG9hdCh5LnRpbnQpO1xuXHRcdFx0XHRcdGlmKHkudGhlbWUgJiYgdGhlbWVzLnRoZW1lRWxlbWVudHMgJiYgdGhlbWVzLnRoZW1lRWxlbWVudHMuY2xyU2NoZW1lKSB7XG5cdFx0XHRcdFx0XHRmb250LmNvbG9yLnJnYiA9IHJnYl90aW50KHRoZW1lcy50aGVtZUVsZW1lbnRzLmNsclNjaGVtZVtmb250LmNvbG9yLnRoZW1lXS5yZ2IsIGZvbnQuY29sb3IudGludCB8fCAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzxjb2xvci8+JzogY2FzZSAnPC9jb2xvcj4nOiBicmVhaztcblxuXHRcdFx0Lyogbm90ZTogc29tZXRpbWVzIG1jOkFsdGVybmF0ZUNvbnRlbnQgYXBwZWFycyBiYXJlICovXG5cdFx0XHRjYXNlICc8QWx0ZXJuYXRlQ29udGVudCc6IHBhc3MgPSB0cnVlOyBicmVhaztcblx0XHRcdGNhc2UgJzwvQWx0ZXJuYXRlQ29udGVudD4nOiBwYXNzID0gZmFsc2U7IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjEwIGV4dExzdCBDVF9FeHRlbnNpb25MaXN0ID8gKi9cblx0XHRcdGNhc2UgJzxleHRMc3QnOiBjYXNlICc8ZXh0THN0Pic6IGNhc2UgJzwvZXh0THN0Pic6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGV4dCc6IHBhc3MgPSB0cnVlOyBicmVhaztcblx0XHRcdGNhc2UgJzwvZXh0Pic6IHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cdFx0XHRkZWZhdWx0OiBpZihvcHRzICYmIG9wdHMuV1RGKSB7XG5cdFx0XHRcdGlmKCFwYXNzKSB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCAnICsgeVswXSArICcgaW4gZm9udHMnKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG4vKiAxOC44LjMxIG51bUZtdHMgQ1RfTnVtRm10cyAqL1xuZnVuY3Rpb24gcGFyc2VfbnVtRm10cyh0LCBzdHlsZXMsIG9wdHMpIHtcblx0c3R5bGVzLk51bWJlckZtdCA9IFtdO1xuXHR2YXIgay8qQXJyYXk8bnVtYmVyPiovID0gKGtleXModGFibGVfZm10KS8qOmFueSovKTtcblx0Zm9yKHZhciBpPTA7IGkgPCBrLmxlbmd0aDsgKytpKSBzdHlsZXMuTnVtYmVyRm10W2tbaV1dID0gdGFibGVfZm10W2tbaV1dO1xuXHR2YXIgbSA9IHRbMF0ubWF0Y2godGFncmVnZXgpO1xuXHRpZighbSkgcmV0dXJuO1xuXHRmb3IoaT0wOyBpIDwgbS5sZW5ndGg7ICsraSkge1xuXHRcdHZhciB5ID0gcGFyc2V4bWx0YWcobVtpXSk7XG5cdFx0c3dpdGNoKHN0cmlwX25zKHlbMF0pKSB7XG5cdFx0XHRjYXNlICc8bnVtRm10cyc6IGNhc2UgJzwvbnVtRm10cz4nOiBjYXNlICc8bnVtRm10cy8+JzogY2FzZSAnPG51bUZtdHM+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8bnVtRm10Jzoge1xuXHRcdFx0XHR2YXIgZj11bmVzY2FwZXhtbCh1dGY4cmVhZCh5LmZvcm1hdENvZGUpKSwgaj1wYXJzZUludCh5Lm51bUZtdElkLDEwKTtcblx0XHRcdFx0c3R5bGVzLk51bWJlckZtdFtqXSA9IGY7XG5cdFx0XHRcdGlmKGo+MCkge1xuXHRcdFx0XHRcdGlmKGogPiAweDE4OCkge1xuXHRcdFx0XHRcdFx0Zm9yKGogPSAweDE4ODsgaiA+IDB4M2M7IC0taikgaWYoc3R5bGVzLk51bWJlckZtdFtqXSA9PSBudWxsKSBicmVhaztcblx0XHRcdFx0XHRcdHN0eWxlcy5OdW1iZXJGbXRbal0gPSBmO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRTU0ZfbG9hZChmLGopO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9udW1GbXQ+JzogYnJlYWs7XG5cdFx0XHRkZWZhdWx0OiBpZihvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKCd1bnJlY29nbml6ZWQgJyArIHlbMF0gKyAnIGluIG51bUZtdHMnKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gd3JpdGVfbnVtRm10cyhORi8qOntbbjpudW1iZXJ8c3RyaW5nXTpzdHJpbmd9Ki8vKjo6LCBvcHRzKi8pIHtcblx0dmFyIG8gPSBbXCI8bnVtRm10cz5cIl07XG5cdFtbNSw4XSxbMjMsMjZdLFs0MSw0NF0sWy8qNjMqLzUwLC8qNjZdLFsxNjQsKi8zOTJdXS5mb3JFYWNoKGZ1bmN0aW9uKHIpIHtcblx0XHRmb3IodmFyIGkgPSByWzBdOyBpIDw9IHJbMV07ICsraSkgaWYoTkZbaV0gIT0gbnVsbCkgb1tvLmxlbmd0aF0gPSAod3JpdGV4dGFnKCdudW1GbXQnLG51bGwse251bUZtdElkOmksZm9ybWF0Q29kZTplc2NhcGV4bWwoTkZbaV0pfSkpO1xuXHR9KTtcblx0aWYoby5sZW5ndGggPT09IDEpIHJldHVybiBcIlwiO1xuXHRvW28ubGVuZ3RoXSA9IChcIjwvbnVtRm10cz5cIik7XG5cdG9bMF0gPSB3cml0ZXh0YWcoJ251bUZtdHMnLCBudWxsLCB7IGNvdW50Om8ubGVuZ3RoLTIgfSkucmVwbGFjZShcIi8+XCIsIFwiPlwiKTtcblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cblxuLyogMTguOC4xMCBjZWxsWGZzIENUX0NlbGxYZnMgKi9cbnZhciBjZWxsWEZfdWludCA9IFsgXCJudW1GbXRJZFwiLCBcImZpbGxJZFwiLCBcImZvbnRJZFwiLCBcImJvcmRlcklkXCIsIFwieGZJZFwiIF07XG52YXIgY2VsbFhGX2Jvb2wgPSBbIFwiYXBwbHlBbGlnbm1lbnRcIiwgXCJhcHBseUJvcmRlclwiLCBcImFwcGx5RmlsbFwiLCBcImFwcGx5Rm9udFwiLCBcImFwcGx5TnVtYmVyRm9ybWF0XCIsIFwiYXBwbHlQcm90ZWN0aW9uXCIsIFwicGl2b3RCdXR0b25cIiwgXCJxdW90ZVByZWZpeFwiIF07XG5mdW5jdGlvbiBwYXJzZV9jZWxsWGZzKHQsIHN0eWxlcywgb3B0cykge1xuXHRzdHlsZXMuQ2VsbFhmID0gW107XG5cdHZhciB4Zjtcblx0dmFyIHBhc3MgPSBmYWxzZTtcblx0KHRbMF0ubWF0Y2godGFncmVnZXgpfHxbXSkuZm9yRWFjaChmdW5jdGlvbih4KSB7XG5cdFx0dmFyIHkgPSBwYXJzZXhtbHRhZyh4KSwgaSA9IDA7XG5cdFx0c3dpdGNoKHN0cmlwX25zKHlbMF0pKSB7XG5cdFx0XHRjYXNlICc8Y2VsbFhmcyc6IGNhc2UgJzxjZWxsWGZzPic6IGNhc2UgJzxjZWxsWGZzLz4nOiBjYXNlICc8L2NlbGxYZnM+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjguNDUgeGYgQ1RfWGYgKi9cblx0XHRcdGNhc2UgJzx4Zic6IGNhc2UgJzx4Zi8+Jzpcblx0XHRcdFx0eGYgPSB5O1xuXHRcdFx0XHRkZWxldGUgeGZbMF07XG5cdFx0XHRcdGZvcihpID0gMDsgaSA8IGNlbGxYRl91aW50Lmxlbmd0aDsgKytpKSBpZih4ZltjZWxsWEZfdWludFtpXV0pXG5cdFx0XHRcdFx0eGZbY2VsbFhGX3VpbnRbaV1dID0gcGFyc2VJbnQoeGZbY2VsbFhGX3VpbnRbaV1dLCAxMCk7XG5cdFx0XHRcdGZvcihpID0gMDsgaSA8IGNlbGxYRl9ib29sLmxlbmd0aDsgKytpKSBpZih4ZltjZWxsWEZfYm9vbFtpXV0pXG5cdFx0XHRcdFx0eGZbY2VsbFhGX2Jvb2xbaV1dID0gcGFyc2V4bWxib29sKHhmW2NlbGxYRl9ib29sW2ldXSk7XG5cdFx0XHRcdGlmKHN0eWxlcy5OdW1iZXJGbXQgJiYgeGYubnVtRm10SWQgPiAweDE4OCkge1xuXHRcdFx0XHRcdGZvcihpID0gMHgxODg7IGkgPiAweDNjOyAtLWkpIGlmKHN0eWxlcy5OdW1iZXJGbXRbeGYubnVtRm10SWRdID09IHN0eWxlcy5OdW1iZXJGbXRbaV0pIHsgeGYubnVtRm10SWQgPSBpOyBicmVhazsgfVxuXHRcdFx0XHR9XG5cdFx0XHRcdHN0eWxlcy5DZWxsWGYucHVzaCh4Zik7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC94Zj4nOiBicmVhaztcblxuXHRcdFx0LyogMTguOC4xIGFsaWdubWVudCBDVF9DZWxsQWxpZ25tZW50ICovXG5cdFx0XHRjYXNlICc8YWxpZ25tZW50JzogY2FzZSAnPGFsaWdubWVudC8+Jzpcblx0XHRcdFx0dmFyIGFsaWdubWVudCA9IHt9O1xuXHRcdFx0XHRpZih5LnZlcnRpY2FsKSBhbGlnbm1lbnQudmVydGljYWwgPSB5LnZlcnRpY2FsO1xuXHRcdFx0XHRpZih5Lmhvcml6b250YWwpIGFsaWdubWVudC5ob3Jpem9udGFsID0geS5ob3Jpem9udGFsO1xuXHRcdFx0XHRpZih5LnRleHRSb3RhdGlvbiAhPSBudWxsKSBhbGlnbm1lbnQudGV4dFJvdGF0aW9uID0geS50ZXh0Um90YXRpb247XG5cdFx0XHRcdGlmKHkuaW5kZW50KSBhbGlnbm1lbnQuaW5kZW50ID0geS5pbmRlbnQ7XG5cdFx0XHRcdGlmKHkud3JhcFRleHQpIGFsaWdubWVudC53cmFwVGV4dCA9IHBhcnNleG1sYm9vbCh5LndyYXBUZXh0KTtcblx0XHRcdFx0eGYuYWxpZ25tZW50ID0gYWxpZ25tZW50O1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJzwvYWxpZ25tZW50Pic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC44LjMzIHByb3RlY3Rpb24gQ1RfQ2VsbFByb3RlY3Rpb24gKi9cblx0XHRcdGNhc2UgJzxwcm90ZWN0aW9uJzpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc8L3Byb3RlY3Rpb24+JzogY2FzZSAnPHByb3RlY3Rpb24vPic6IGJyZWFrO1xuXG5cdFx0XHQvKiBub3RlOiBzb21ldGltZXMgbWM6QWx0ZXJuYXRlQ29udGVudCBhcHBlYXJzIGJhcmUgKi9cblx0XHRcdGNhc2UgJzxBbHRlcm5hdGVDb250ZW50JzogcGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9BbHRlcm5hdGVDb250ZW50Pic6IHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMTAgZXh0THN0IENUX0V4dGVuc2lvbkxpc3QgPyAqL1xuXHRcdFx0Y2FzZSAnPGV4dExzdCc6IGNhc2UgJzxleHRMc3Q+JzogY2FzZSAnPC9leHRMc3Q+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8ZXh0JzogcGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9leHQ+JzogcGFzcyA9IGZhbHNlOyBicmVhaztcblx0XHRcdGRlZmF1bHQ6IGlmKG9wdHMgJiYgb3B0cy5XVEYpIHtcblx0XHRcdFx0aWYoIXBhc3MpIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkICcgKyB5WzBdICsgJyBpbiBjZWxsWGZzJyk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfY2VsbFhmcyhjZWxsWGZzKS8qOnN0cmluZyovIHtcblx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0b1tvLmxlbmd0aF0gPSAod3JpdGV4dGFnKCdjZWxsWGZzJyxudWxsKSk7XG5cdGNlbGxYZnMuZm9yRWFjaChmdW5jdGlvbihjKSB7XG5cdFx0b1tvLmxlbmd0aF0gPSAod3JpdGV4dGFnKCd4ZicsIG51bGwsIGMpKTtcblx0fSk7XG5cdG9bby5sZW5ndGhdID0gKFwiPC9jZWxsWGZzPlwiKTtcblx0aWYoby5sZW5ndGggPT09IDIpIHJldHVybiBcIlwiO1xuXHRvWzBdID0gd3JpdGV4dGFnKCdjZWxsWGZzJyxudWxsLCB7Y291bnQ6by5sZW5ndGgtMn0pLnJlcGxhY2UoXCIvPlwiLFwiPlwiKTtcblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cblxuLyogMTguOCBTdHlsZXMgQ1RfU3R5bGVzaGVldCovXG52YXIgcGFyc2Vfc3R5X3htbD0gLyojX19QVVJFX18qLyhmdW5jdGlvbiBtYWtlX3BzdHl4KCkge1xudmFyIG51bUZtdFJlZ2V4ID0gLzwoPzpcXHcrOik/bnVtRm10cyhbXj5dKik+W1xcU1xcc10qPzxcXC8oPzpcXHcrOik/bnVtRm10cz4vO1xudmFyIGNlbGxYZlJlZ2V4ID0gLzwoPzpcXHcrOik/Y2VsbFhmcyhbXj5dKik+W1xcU1xcc10qPzxcXC8oPzpcXHcrOik/Y2VsbFhmcz4vO1xudmFyIGZpbGxzUmVnZXggPSAvPCg/Olxcdys6KT9maWxscyhbXj5dKik+W1xcU1xcc10qPzxcXC8oPzpcXHcrOik/ZmlsbHM+LztcbnZhciBmb250c1JlZ2V4ID0gLzwoPzpcXHcrOik/Zm9udHMoW14+XSopPltcXFNcXHNdKj88XFwvKD86XFx3KzopP2ZvbnRzPi87XG52YXIgYm9yZGVyc1JlZ2V4ID0gLzwoPzpcXHcrOik/Ym9yZGVycyhbXj5dKik+W1xcU1xcc10qPzxcXC8oPzpcXHcrOik/Ym9yZGVycz4vO1xuXG5yZXR1cm4gZnVuY3Rpb24gcGFyc2Vfc3R5X3htbChkYXRhLCB0aGVtZXMsIG9wdHMpIHtcblx0dmFyIHN0eWxlcyA9IHt9O1xuXHRpZighZGF0YSkgcmV0dXJuIHN0eWxlcztcblx0ZGF0YSA9IGRhdGEucmVwbGFjZSgvPCEtLShbXFxzXFxTXSo/KS0tPi9tZyxcIlwiKS5yZXBsYWNlKC88IURPQ1RZUEVbXlxcW10qXFxbW15cXF1dKlxcXT4vZ20sXCJcIik7XG5cdC8qIDE4LjguMzkgc3R5bGVTaGVldCBDVF9TdHlsZXNoZWV0ICovXG5cdHZhciB0O1xuXG5cdC8qIDE4LjguMzEgbnVtRm10cyBDVF9OdW1GbXRzID8gKi9cblx0aWYoKHQ9ZGF0YS5tYXRjaChudW1GbXRSZWdleCkpKSBwYXJzZV9udW1GbXRzKHQsIHN0eWxlcywgb3B0cyk7XG5cblx0LyogMTguOC4yMyBmb250cyBDVF9Gb250cyA/ICovXG5cdGlmKCh0PWRhdGEubWF0Y2goZm9udHNSZWdleCkpKSBwYXJzZV9mb250cyh0LCBzdHlsZXMsIHRoZW1lcywgb3B0cyk7XG5cblx0LyogMTguOC4yMSBmaWxscyBDVF9GaWxscyA/ICovXG5cdGlmKCh0PWRhdGEubWF0Y2goZmlsbHNSZWdleCkpKSBwYXJzZV9maWxscyh0LCBzdHlsZXMsIHRoZW1lcywgb3B0cyk7XG5cblx0LyogMTguOC41ICBib3JkZXJzIENUX0JvcmRlcnMgPyAqL1xuXHRpZigodD1kYXRhLm1hdGNoKGJvcmRlcnNSZWdleCkpKSBwYXJzZV9ib3JkZXJzKHQsIHN0eWxlcywgdGhlbWVzLCBvcHRzKTtcblxuXHQvKiAxOC44LjkgIGNlbGxTdHlsZVhmcyBDVF9DZWxsU3R5bGVYZnMgPyAqL1xuXHQvKiAxOC44LjggIGNlbGxTdHlsZXMgQ1RfQ2VsbFN0eWxlcyA/ICovXG5cblx0LyogMTguOC4xMCBjZWxsWGZzIENUX0NlbGxYZnMgPyAqL1xuXHRpZigodD1kYXRhLm1hdGNoKGNlbGxYZlJlZ2V4KSkpIHBhcnNlX2NlbGxYZnModCwgc3R5bGVzLCBvcHRzKTtcblxuXHQvKiAxOC44LjE1IGR4ZnMgQ1RfRHhmcyA/ICovXG5cdC8qIDE4LjguNDIgdGFibGVTdHlsZXMgQ1RfVGFibGVTdHlsZXMgPyAqL1xuXHQvKiAxOC44LjExIGNvbG9ycyBDVF9Db2xvcnMgPyAqL1xuXHQvKiAxOC4yLjEwIGV4dExzdCBDVF9FeHRlbnNpb25MaXN0ID8gKi9cblxuXHRyZXR1cm4gc3R5bGVzO1xufTtcbn0pKCk7XG5cbmZ1bmN0aW9uIHdyaXRlX3N0eV94bWwod2IvKjpXb3JrYm9vayovLCBvcHRzKS8qOnN0cmluZyovIHtcblx0dmFyIG8gPSBbWE1MX0hFQURFUiwgd3JpdGV4dGFnKCdzdHlsZVNoZWV0JywgbnVsbCwge1xuXHRcdCd4bWxucyc6IFhNTE5TX21haW5bMF0sXG5cdFx0J3htbG5zOnZ0JzogWE1MTlMudnRcblx0fSldLCB3O1xuXHRpZih3Yi5TU0YgJiYgKHcgPSB3cml0ZV9udW1GbXRzKHdiLlNTRikpICE9IG51bGwpIG9bby5sZW5ndGhdID0gdztcblx0b1tvLmxlbmd0aF0gPSAoJzxmb250cyBjb3VudD1cIjFcIj48Zm9udD48c3ogdmFsPVwiMTJcIi8+PGNvbG9yIHRoZW1lPVwiMVwiLz48bmFtZSB2YWw9XCJDYWxpYnJpXCIvPjxmYW1pbHkgdmFsPVwiMlwiLz48c2NoZW1lIHZhbD1cIm1pbm9yXCIvPjwvZm9udD48L2ZvbnRzPicpO1xuXHRvW28ubGVuZ3RoXSA9ICgnPGZpbGxzIGNvdW50PVwiMlwiPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cIm5vbmVcIi8+PC9maWxsPjxmaWxsPjxwYXR0ZXJuRmlsbCBwYXR0ZXJuVHlwZT1cImdyYXkxMjVcIi8+PC9maWxsPjwvZmlsbHM+Jyk7XG5cdG9bby5sZW5ndGhdID0gKCc8Ym9yZGVycyBjb3VudD1cIjFcIj48Ym9yZGVyPjxsZWZ0Lz48cmlnaHQvPjx0b3AvPjxib3R0b20vPjxkaWFnb25hbC8+PC9ib3JkZXI+PC9ib3JkZXJzPicpO1xuXHRvW28ubGVuZ3RoXSA9ICgnPGNlbGxTdHlsZVhmcyBjb3VudD1cIjFcIj48eGYgbnVtRm10SWQ9XCIwXCIgZm9udElkPVwiMFwiIGZpbGxJZD1cIjBcIiBib3JkZXJJZD1cIjBcIi8+PC9jZWxsU3R5bGVYZnM+Jyk7XG5cdGlmKCh3ID0gd3JpdGVfY2VsbFhmcyhvcHRzLmNlbGxYZnMpKSkgb1tvLmxlbmd0aF0gPSAodyk7XG5cdG9bby5sZW5ndGhdID0gKCc8Y2VsbFN0eWxlcyBjb3VudD1cIjFcIj48Y2VsbFN0eWxlIG5hbWU9XCJOb3JtYWxcIiB4ZklkPVwiMFwiIGJ1aWx0aW5JZD1cIjBcIi8+PC9jZWxsU3R5bGVzPicpO1xuXHRvW28ubGVuZ3RoXSA9ICgnPGR4ZnMgY291bnQ9XCIwXCIvPicpO1xuXHRvW28ubGVuZ3RoXSA9ICgnPHRhYmxlU3R5bGVzIGNvdW50PVwiMFwiIGRlZmF1bHRUYWJsZVN0eWxlPVwiVGFibGVTdHlsZU1lZGl1bTlcIiBkZWZhdWx0UGl2b3RTdHlsZT1cIlBpdm90U3R5bGVNZWRpdW00XCIvPicpO1xuXG5cdGlmKG8ubGVuZ3RoPjIpeyBvW28ubGVuZ3RoXSA9ICgnPC9zdHlsZVNoZWV0PicpOyBvWzFdPW9bMV0ucmVwbGFjZShcIi8+XCIsXCI+XCIpOyB9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG4vKiBbTVMtWExTQl0gMi40LjY1NyBCcnRGbXQgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydEZtdChkYXRhLCBsZW5ndGgvKjpudW1iZXIqLykge1xuXHR2YXIgbnVtRm10SWQgPSBkYXRhLnJlYWRfc2hpZnQoMik7XG5cdHZhciBzdEZtdENvZGUgPSBwYXJzZV9YTFdpZGVTdHJpbmcoZGF0YSxsZW5ndGgtMik7XG5cdHJldHVybiBbbnVtRm10SWQsIHN0Rm10Q29kZV07XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRGbXQoaS8qOm51bWJlciovLCBmLyo6c3RyaW5nKi8sIG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDYgKyA0ICogZi5sZW5ndGgpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIGkpO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcoZiwgbyk7XG5cdHZhciBvdXQgPSAoby5sZW5ndGggPiBvLmwpID8gby5zbGljZSgwLCBvLmwpIDogbztcblx0aWYoby5sID09IG51bGwpIG8ubCA9IG8ubGVuZ3RoO1xuXHRyZXR1cm4gb3V0O1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjY1OSBCcnRGb250IFRPRE8gKi9cbmZ1bmN0aW9uIHBhcnNlX0JydEZvbnQoZGF0YSwgbGVuZ3RoLyo6bnVtYmVyKi8sIG9wdHMpIHtcblx0dmFyIG91dCA9ICh7fS8qOmFueSovKTtcblxuXHRvdXQuc3ogPSBkYXRhLnJlYWRfc2hpZnQoMikgLyAyMDtcblxuXHR2YXIgZ3JiaXQgPSBwYXJzZV9Gb250RmxhZ3MoZGF0YSwgMiwgb3B0cyk7XG5cdGlmKGdyYml0LmZJdGFsaWMpIG91dC5pdGFsaWMgPSAxO1xuXHRpZihncmJpdC5mQ29uZGVuc2UpIG91dC5jb25kZW5zZSA9IDE7XG5cdGlmKGdyYml0LmZFeHRlbmQpIG91dC5leHRlbmQgPSAxO1xuXHRpZihncmJpdC5mU2hhZG93KSBvdXQuc2hhZG93ID0gMTtcblx0aWYoZ3JiaXQuZk91dGxpbmUpIG91dC5vdXRsaW5lID0gMTtcblx0aWYoZ3JiaXQuZlN0cmlrZW91dCkgb3V0LnN0cmlrZSA9IDE7XG5cblx0dmFyIGJscyA9IGRhdGEucmVhZF9zaGlmdCgyKTtcblx0aWYoYmxzID09PSAweDAyQkMpIG91dC5ib2xkID0gMTtcblxuXHRzd2l0Y2goZGF0YS5yZWFkX3NoaWZ0KDIpKSB7XG5cdFx0LyogY2FzZSAwOiBvdXQudmVydEFsaWduID0gXCJiYXNlbGluZVwiOyBicmVhazsgKi9cblx0XHRjYXNlIDE6IG91dC52ZXJ0QWxpZ24gPSBcInN1cGVyc2NyaXB0XCI7IGJyZWFrO1xuXHRcdGNhc2UgMjogb3V0LnZlcnRBbGlnbiA9IFwic3Vic2NyaXB0XCI7IGJyZWFrO1xuXHR9XG5cblx0dmFyIHVuZGVybGluZSA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0aWYodW5kZXJsaW5lICE9IDApIG91dC51bmRlcmxpbmUgPSB1bmRlcmxpbmU7XG5cblx0dmFyIGZhbWlseSA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0aWYoZmFtaWx5ID4gMCkgb3V0LmZhbWlseSA9IGZhbWlseTtcblxuXHR2YXIgYkNoYXJTZXQgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cdGlmKGJDaGFyU2V0ID4gMCkgb3V0LmNoYXJzZXQgPSBiQ2hhclNldDtcblxuXHRkYXRhLmwrKztcblx0b3V0LmNvbG9yID0gcGFyc2VfQnJ0Q29sb3IoZGF0YSwgOCk7XG5cblx0c3dpdGNoKGRhdGEucmVhZF9zaGlmdCgxKSkge1xuXHRcdC8qIGNhc2UgMDogb3V0LnNjaGVtZSA9IFwibm9uZVwiOiBicmVhazsgKi9cblx0XHRjYXNlIDE6IG91dC5zY2hlbWUgPSBcIm1ham9yXCI7IGJyZWFrO1xuXHRcdGNhc2UgMjogb3V0LnNjaGVtZSA9IFwibWlub3JcIjsgYnJlYWs7XG5cdH1cblxuXHRvdXQubmFtZSA9IHBhcnNlX1hMV2lkZVN0cmluZyhkYXRhLCBsZW5ndGggLSAyMSk7XG5cblx0cmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydEZvbnQoZm9udC8qOmFueSovLCBvKSB7XG5cdGlmKCFvKSBvID0gbmV3X2J1ZigyNSs0KjMyKTtcblx0by53cml0ZV9zaGlmdCgyLCBmb250LnN6ICogMjApO1xuXHR3cml0ZV9Gb250RmxhZ3MoZm9udCwgbyk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgZm9udC5ib2xkID8gMHgwMkJDIDogMHgwMTkwKTtcblx0dmFyIHNzcyA9IDA7XG5cdGlmKGZvbnQudmVydEFsaWduID09IFwic3VwZXJzY3JpcHRcIikgc3NzID0gMTtcblx0ZWxzZSBpZihmb250LnZlcnRBbGlnbiA9PSBcInN1YnNjcmlwdFwiKSBzc3MgPSAyO1xuXHRvLndyaXRlX3NoaWZ0KDIsIHNzcyk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgZm9udC51bmRlcmxpbmUgfHwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgZm9udC5mYW1pbHkgfHwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgZm9udC5jaGFyc2V0IHx8IDApO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHR3cml0ZV9CcnRDb2xvcihmb250LmNvbG9yLCBvKTtcblx0dmFyIHNjaGVtZSA9IDA7XG5cdGlmKGZvbnQuc2NoZW1lID09IFwibWFqb3JcIikgc2NoZW1lID0gMTtcblx0aWYoZm9udC5zY2hlbWUgPT0gXCJtaW5vclwiKSBzY2hlbWUgPSAyO1xuXHRvLndyaXRlX3NoaWZ0KDEsIHNjaGVtZSk7XG5cdHdyaXRlX1hMV2lkZVN0cmluZyhmb250Lm5hbWUsIG8pO1xuXHRyZXR1cm4gby5sZW5ndGggPiBvLmwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjY1MCBCcnRGaWxsICovXG52YXIgWExTQkZpbGxQVE5hbWVzID0gW1xuXHRcIm5vbmVcIixcblx0XCJzb2xpZFwiLFxuXHRcIm1lZGl1bUdyYXlcIixcblx0XCJkYXJrR3JheVwiLFxuXHRcImxpZ2h0R3JheVwiLFxuXHRcImRhcmtIb3Jpem9udGFsXCIsXG5cdFwiZGFya1ZlcnRpY2FsXCIsXG5cdFwiZGFya0Rvd25cIixcblx0XCJkYXJrVXBcIixcblx0XCJkYXJrR3JpZFwiLFxuXHRcImRhcmtUcmVsbGlzXCIsXG5cdFwibGlnaHRIb3Jpem9udGFsXCIsXG5cdFwibGlnaHRWZXJ0aWNhbFwiLFxuXHRcImxpZ2h0RG93blwiLFxuXHRcImxpZ2h0VXBcIixcblx0XCJsaWdodEdyaWRcIixcblx0XCJsaWdodFRyZWxsaXNcIixcblx0XCJncmF5MTI1XCIsXG5cdFwiZ3JheTA2MjVcIlxuXTtcbnZhciByZXZfWExTQkZpbGxQVE5hbWVzLyo6RXZlcnROdW1UeXBlKi87XG4vKiBUT0RPOiBncmFkaWVudCBmaWxsIHJlcHJlc2VudGF0aW9uICovXG52YXIgcGFyc2VfQnJ0RmlsbCA9IHBhcnNlbm9vcDtcbmZ1bmN0aW9uIHdyaXRlX0JydEZpbGwoZmlsbCwgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoNCozICsgOCo3ICsgMTYqMSk7XG5cdGlmKCFyZXZfWExTQkZpbGxQVE5hbWVzKSByZXZfWExTQkZpbGxQVE5hbWVzID0gKGV2ZXJ0KFhMU0JGaWxsUFROYW1lcykvKjphbnkqLyk7XG5cdHZhciBmbHMvKjpudW1iZXIqLyA9IHJldl9YTFNCRmlsbFBUTmFtZXNbZmlsbC5wYXR0ZXJuVHlwZV07XG5cdGlmKGZscyA9PSBudWxsKSBmbHMgPSAweDI4O1xuXHRvLndyaXRlX3NoaWZ0KDQsIGZscyk7XG5cdHZhciBqID0gMDtcblx0aWYoZmxzICE9IDB4MjgpIHtcblx0XHQvKiBUT0RPOiBjdXN0b20gRkcgQ29sb3IgKi9cblx0XHR3cml0ZV9CcnRDb2xvcih7YXV0bzoxfSwgbyk7XG5cdFx0LyogVE9ETzogY3VzdG9tIEJHIENvbG9yICovXG5cdFx0d3JpdGVfQnJ0Q29sb3Ioe2F1dG86MX0sIG8pO1xuXG5cdFx0Zm9yKDsgaiA8IDEyOyArK2opIG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdH0gZWxzZSB7XG5cdFx0Zm9yKDsgaiA8IDQ7ICsraikgby53cml0ZV9zaGlmdCg0LCAwKTtcblxuXHRcdGZvcig7IGogPCAxMjsgKytqKSBvLndyaXRlX3NoaWZ0KDQsIDApOyAvKiBUT0RPICovXG5cdFx0LyogaUdyYWRpZW50VHlwZSAqL1xuXHRcdC8qIHhudW1EZWdyZWUgKi9cblx0XHQvKiB4bnVtRmlsbFRvTGVmdCAqL1xuXHRcdC8qIHhudW1GaWxsVG9SaWdodCAqL1xuXHRcdC8qIHhudW1GaWxsVG9Ub3AgKi9cblx0XHQvKiB4bnVtRmlsbFRvQm90dG9tICovXG5cdFx0LyogY051bVN0b3AgKi9cblx0XHQvKiB4ZmlsbEdyYWRpZW50U3RvcCAqL1xuXHR9XG5cdHJldHVybiBvLmxlbmd0aCA+IG8ubCA/IG8uc2xpY2UoMCwgby5sKSA6IG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuODI0IEJydFhGICovXG5mdW5jdGlvbiBwYXJzZV9CcnRYRihkYXRhLCBsZW5ndGgvKjpudW1iZXIqLykge1xuXHR2YXIgdGd0ID0gZGF0YS5sICsgbGVuZ3RoO1xuXHR2YXIgaXhmZVBhcmVudCA9IGRhdGEucmVhZF9zaGlmdCgyKTtcblx0dmFyIGlmbXQgPSBkYXRhLnJlYWRfc2hpZnQoMik7XG5cdGRhdGEubCA9IHRndDtcblx0cmV0dXJuIHtpeGZlOml4ZmVQYXJlbnQsIG51bUZtdElkOmlmbXQgfTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydFhGKGRhdGEsIGl4ZmVQLCBvKSB7XG5cdGlmKCFvKSBvID0gbmV3X2J1ZigxNik7XG5cdG8ud3JpdGVfc2hpZnQoMiwgaXhmZVB8fDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIGRhdGEubnVtRm10SWR8fDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApOyAvKiBpRm9udCAqL1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApOyAvKiBpRmlsbCAqL1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApOyAvKiBpeEJvcmRlciAqL1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApOyAvKiB0cm90ICovXG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7IC8qIGluZGVudCAqL1xuXHR2YXIgZmxvdyA9IDA7XG5cdG8ud3JpdGVfc2hpZnQoMSwgZmxvdyk7IC8qIGZsYWdzICovXG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7IC8qIGZsYWdzICovXG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7IC8qIHhmR3JiaXRBdHIgKi9cblx0by53cml0ZV9zaGlmdCgxLCAwKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjUuNCBCbHhmIFRPRE8gKi9cbmZ1bmN0aW9uIHdyaXRlX0JseGYoZGF0YSwgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoMTApO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApOyAvKiBkZyAqL1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApOyAvKiBjb2xvciAqL1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApOyAvKiBjb2xvciAqL1xuXHRyZXR1cm4gbztcbn1cbi8qIFtNUy1YTFNCXSAyLjQuMzAyIEJydEJvcmRlciBUT0RPICovXG52YXIgcGFyc2VfQnJ0Qm9yZGVyID0gcGFyc2Vub29wO1xuZnVuY3Rpb24gd3JpdGVfQnJ0Qm9yZGVyKGJvcmRlciwgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoNTEpO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApOyAvKiBkaWFnb25hbCAqL1xuXHR3cml0ZV9CbHhmKG51bGwsIG8pOyAvKiB0b3AgKi9cblx0d3JpdGVfQmx4ZihudWxsLCBvKTsgLyogYm90dG9tICovXG5cdHdyaXRlX0JseGYobnVsbCwgbyk7IC8qIGxlZnQgKi9cblx0d3JpdGVfQmx4ZihudWxsLCBvKTsgLyogcmlnaHQgKi9cblx0d3JpdGVfQmx4ZihudWxsLCBvKTsgLyogZGlhZyAqL1xuXHRyZXR1cm4gby5sZW5ndGggPiBvLmwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40Ljc2MyBCcnRTdHlsZSBUT0RPICovXG5mdW5jdGlvbiB3cml0ZV9CcnRTdHlsZShzdHlsZSwgbykge1xuXHRpZighbykgbyA9IG5ld19idWYoMTIrNCoxMCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgc3R5bGUueGZJZCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgMSk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgK3N0eWxlLmJ1aWx0aW5JZCk7XG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7IC8qIGlMZXZlbCAqL1xuXHR3cml0ZV9YTE51bGxhYmxlV2lkZVN0cmluZyhzdHlsZS5uYW1lIHx8IFwiXCIsIG8pO1xuXHRyZXR1cm4gby5sZW5ndGggPiBvLmwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjI3MiBCcnRCZWdpblRhYmxlU3R5bGVzICovXG5mdW5jdGlvbiB3cml0ZV9CcnRCZWdpblRhYmxlU3R5bGVzKGNudCwgZGVmVGFibGVTdHlsZSwgZGVmUGl2b3RTdHlsZSkge1xuXHR2YXIgbyA9IG5ld19idWYoNCsyNTYqMio0KTtcblx0by53cml0ZV9zaGlmdCg0LCBjbnQpO1xuXHR3cml0ZV9YTE51bGxhYmxlV2lkZVN0cmluZyhkZWZUYWJsZVN0eWxlLCBvKTtcblx0d3JpdGVfWExOdWxsYWJsZVdpZGVTdHJpbmcoZGVmUGl2b3RTdHlsZSwgbyk7XG5cdHJldHVybiBvLmxlbmd0aCA+IG8ubCA/IG8uc2xpY2UoMCwgby5sKSA6IG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjEuNy41MCBTdHlsZXMgKi9cbmZ1bmN0aW9uIHBhcnNlX3N0eV9iaW4oZGF0YSwgdGhlbWVzLCBvcHRzKSB7XG5cdHZhciBzdHlsZXMgPSB7fTtcblx0c3R5bGVzLk51bWJlckZtdCA9IChbXS8qOmFueSovKTtcblx0Zm9yKHZhciB5IGluIHRhYmxlX2ZtdCkgc3R5bGVzLk51bWJlckZtdFt5XSA9IHRhYmxlX2ZtdFt5XTtcblxuXHRzdHlsZXMuQ2VsbFhmID0gW107XG5cdHN0eWxlcy5Gb250cyA9IFtdO1xuXHR2YXIgc3RhdGUvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0dmFyIHBhc3MgPSBmYWxzZTtcblx0cmVjb3JkaG9wcGVyKGRhdGEsIGZ1bmN0aW9uIGhvcHBlcl9zdHkodmFsLCBSLCBSVCkge1xuXHRcdHN3aXRjaChSVCkge1xuXHRcdFx0Y2FzZSAweDAwMkM6IC8qIEJydEZtdCAqL1xuXHRcdFx0XHRzdHlsZXMuTnVtYmVyRm10W3ZhbFswXV0gPSB2YWxbMV07IFNTRl9sb2FkKHZhbFsxXSwgdmFsWzBdKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDAyQjogLyogQnJ0Rm9udCAqL1xuXHRcdFx0XHRzdHlsZXMuRm9udHMucHVzaCh2YWwpO1xuXHRcdFx0XHRpZih2YWwuY29sb3IudGhlbWUgIT0gbnVsbCAmJiB0aGVtZXMgJiYgdGhlbWVzLnRoZW1lRWxlbWVudHMgJiYgdGhlbWVzLnRoZW1lRWxlbWVudHMuY2xyU2NoZW1lKSB7XG5cdFx0XHRcdFx0dmFsLmNvbG9yLnJnYiA9IHJnYl90aW50KHRoZW1lcy50aGVtZUVsZW1lbnRzLmNsclNjaGVtZVt2YWwuY29sb3IudGhlbWVdLnJnYiwgdmFsLmNvbG9yLnRpbnQgfHwgMCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDQwMTogLyogQnJ0S25vd25Gb250cyAqLyBicmVhaztcblx0XHRcdGNhc2UgMHgwMDJEOiAvKiBCcnRGaWxsICovXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMkU6IC8qIEJydEJvcmRlciAqL1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMHgwMDJGOiAvKiBCcnRYRiAqL1xuXHRcdFx0XHRpZihzdGF0ZVtzdGF0ZS5sZW5ndGggLSAxXSA9PSAweDAyNjkgLyogQnJ0QmVnaW5DZWxsWEZzICovKSB7XG5cdFx0XHRcdFx0c3R5bGVzLkNlbGxYZi5wdXNoKHZhbCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDAzMDogLyogQnJ0U3R5bGUgKi9cblx0XHRcdGNhc2UgMHgwMUZCOiAvKiBCcnREWEYgKi9cblx0XHRcdGNhc2UgMHgwMjNDOiAvKiBCcnRNUlVDb2xvciAqL1xuXHRcdFx0Y2FzZSAweDAxREI6IC8qIEJydEluZGV4ZWRDb2xvciAqL1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDA0OTM6IC8qIEJydERYRjE0ICovXG5cdFx0XHRjYXNlIDB4MDgzNjogLyogQnJ0RFhGMTUgKi9cblx0XHRcdGNhc2UgMHgwNDZBOiAvKiBCcnRTbGljZXJTdHlsZUVsZW1lbnQgKi9cblx0XHRcdGNhc2UgMHgwMjAwOiAvKiBCcnRUYWJsZVN0eWxlRWxlbWVudCAqL1xuXHRcdFx0Y2FzZSAweDA4MkY6IC8qIEJydFRpbWVsaW5lU3R5bGVFbGVtZW50ICovXG5cdFx0XHRjYXNlIDB4MEMwMDogLyogQnJ0VWlkICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDAyMzogLyogQnJ0RlJUQmVnaW4gKi9cblx0XHRcdFx0cGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjQ6IC8qIEJydEZSVEVuZCAqL1xuXHRcdFx0XHRwYXNzID0gZmFsc2U7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjU6IC8qIEJydEFDQmVnaW4gKi9cblx0XHRcdFx0c3RhdGUucHVzaChSVCk7IHBhc3MgPSB0cnVlOyBicmVhaztcblx0XHRcdGNhc2UgMHgwMDI2OiAvKiBCcnRBQ0VuZCAqL1xuXHRcdFx0XHRzdGF0ZS5wb3AoKTsgcGFzcyA9IGZhbHNlOyBicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYoUi5UID4gMCkgc3RhdGUucHVzaChSVCk7XG5cdFx0XHRcdGVsc2UgaWYoUi5UIDwgMCkgc3RhdGUucG9wKCk7XG5cdFx0XHRcdGVsc2UgaWYoIXBhc3MgfHwgKG9wdHMuV1RGICYmIHN0YXRlW3N0YXRlLmxlbmd0aC0xXSAhPSAweDAwMjUgLyogQnJ0QUNCZWdpbiAqLykpIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgcmVjb3JkIDB4XCIgKyBSVC50b1N0cmluZygxNikpO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBzdHlsZXM7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0ZNVFNfYmluKGJhLCBORi8qOj9TU0ZUYWJsZSovKSB7XG5cdGlmKCFORikgcmV0dXJuO1xuXHR2YXIgY250ID0gMDtcblx0W1s1LDhdLFsyMywyNl0sWzQxLDQ0XSxbLyo2MyovNTAsLyo2Nl0sWzE2NCwqLzM5Ml1dLmZvckVhY2goZnVuY3Rpb24ocikge1xuXHRcdC8qOjogaWYoIU5GKSByZXR1cm47ICovXG5cdFx0Zm9yKHZhciBpID0gclswXTsgaSA8PSByWzFdOyArK2kpIGlmKE5GW2ldICE9IG51bGwpICsrY250O1xuXHR9KTtcblxuXHRpZihjbnQgPT0gMCkgcmV0dXJuO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI2NyAvKiBCcnRCZWdpbkZtdHMgKi8sIHdyaXRlX1VJbnQzMkxFKGNudCkpO1xuXHRbWzUsOF0sWzIzLDI2XSxbNDEsNDRdLFsvKjYzKi81MCwvKjY2XSxbMTY0LCovMzkyXV0uZm9yRWFjaChmdW5jdGlvbihyKSB7XG5cdFx0Lyo6OiBpZighTkYpIHJldHVybjsgKi9cblx0XHRmb3IodmFyIGkgPSByWzBdOyBpIDw9IHJbMV07ICsraSkgaWYoTkZbaV0gIT0gbnVsbCkgd3JpdGVfcmVjb3JkKGJhLCAweDAwMkMgLyogQnJ0Rm10ICovLCB3cml0ZV9CcnRGbXQoaSwgTkZbaV0pKTtcblx0fSk7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjY4IC8qIEJydEVuZEZtdHMgKi8pO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9GT05UU19iaW4oYmEvKjo6LCBkYXRhKi8pIHtcblx0dmFyIGNudCA9IDE7XG5cblx0aWYoY250ID09IDApIHJldHVybjtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyNjMgLyogQnJ0QmVnaW5Gb250cyAqLywgd3JpdGVfVUludDMyTEUoY250KSk7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDJCIC8qIEJydEZvbnQgKi8sIHdyaXRlX0JydEZvbnQoe1xuXHRcdHN6OjEyLFxuXHRcdGNvbG9yOiB7dGhlbWU6MX0sXG5cdFx0bmFtZTogXCJDYWxpYnJpXCIsXG5cdFx0ZmFtaWx5OiAyLFxuXHRcdHNjaGVtZTogXCJtaW5vclwiXG5cdH0pKTtcblx0LyogMSo2NTQ5MUJydEZvbnQgW0FDRk9OVFNdICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjY0IC8qIEJydEVuZEZvbnRzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfRklMTFNfYmluKGJhLyo6OiwgZGF0YSovKSB7XG5cdHZhciBjbnQgPSAyO1xuXG5cdGlmKGNudCA9PSAwKSByZXR1cm47XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjVCIC8qIEJydEJlZ2luRmlsbHMgKi8sIHdyaXRlX1VJbnQzMkxFKGNudCkpO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDAyRCAvKiBCcnRGaWxsICovLCB3cml0ZV9CcnRGaWxsKHtwYXR0ZXJuVHlwZTpcIm5vbmVcIn0pKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwMkQgLyogQnJ0RmlsbCAqLywgd3JpdGVfQnJ0RmlsbCh7cGF0dGVyblR5cGU6XCJncmF5MTI1XCJ9KSk7XG5cdC8qIDEqNjU0MzFCcnRGaWxsICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjVDIC8qIEJydEVuZEZpbGxzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfQk9SREVSU19iaW4oYmEvKjo6LCBkYXRhKi8pIHtcblx0dmFyIGNudCA9IDE7XG5cblx0aWYoY250ID09IDApIHJldHVybjtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyNjUgLyogQnJ0QmVnaW5Cb3JkZXJzICovLCB3cml0ZV9VSW50MzJMRShjbnQpKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwMkUgLyogQnJ0Qm9yZGVyICovLCB3cml0ZV9CcnRCb3JkZXIoe30pKTtcblx0LyogMSo2NTQzMEJydEJvcmRlciAqL1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI2NiAvKiBCcnRFbmRCb3JkZXJzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfQ0VMTFNUWUxFWEZTX2JpbihiYS8qOjosIGRhdGEqLykge1xuXHR2YXIgY250ID0gMTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyNzIgLyogQnJ0QmVnaW5DZWxsU3R5bGVYRnMgKi8sIHdyaXRlX1VJbnQzMkxFKGNudCkpO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDAyRiAvKiBCcnRYRiAqLywgd3JpdGVfQnJ0WEYoe1xuXHRcdG51bUZtdElkOiAwLFxuXHRcdGZvbnRJZDogICAwLFxuXHRcdGZpbGxJZDogICAwLFxuXHRcdGJvcmRlcklkOiAwXG5cdH0sIDB4RkZGRikpO1xuXHQvKiAxKjY1NDMwKEJydFhGICpGUlQpICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjczIC8qIEJydEVuZENlbGxTdHlsZVhGcyAqLyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0NFTExYRlNfYmluKGJhLCBkYXRhKSB7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjY5IC8qIEJydEJlZ2luQ2VsbFhGcyAqLywgd3JpdGVfVUludDMyTEUoZGF0YS5sZW5ndGgpKTtcblx0ZGF0YS5mb3JFYWNoKGZ1bmN0aW9uKGMpIHsgd3JpdGVfcmVjb3JkKGJhLCAweDAwMkYgLyogQnJ0WEYgKi8sIHdyaXRlX0JydFhGKGMsMCkpOyB9KTtcblx0LyogMSo2NTQzMChCcnRYRiAqRlJUKSAqL1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI2QSAvKiBCcnRFbmRDZWxsWEZzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfU1RZTEVTX2JpbihiYS8qOjosIGRhdGEqLykge1xuXHR2YXIgY250ID0gMTtcblxuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI2QiAvKiBCcnRCZWdpblN0eWxlcyAqLywgd3JpdGVfVUludDMyTEUoY250KSk7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDMwIC8qIEJydFN0eWxlICovLCB3cml0ZV9CcnRTdHlsZSh7XG5cdFx0eGZJZDowLFxuXHRcdGJ1aWx0aW5JZDowLFxuXHRcdG5hbWU6XCJOb3JtYWxcIlxuXHR9KSk7XG5cdC8qIDEqNjU0MzAoQnJ0U3R5bGUgKkZSVCkgKi9cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyNkMgLyogQnJ0RW5kU3R5bGVzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfRFhGU19iaW4oYmEvKjo6LCBkYXRhKi8pIHtcblx0dmFyIGNudCA9IDA7XG5cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAxRjkgLyogQnJ0QmVnaW5EWEZzICovLCB3cml0ZV9VSW50MzJMRShjbnQpKTtcblx0LyogKjIxNDc0ODM2NDcoQnJ0RFhGICpGUlQpICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMUZBIC8qIEJydEVuZERYRnMgKi8pO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9UQUJMRVNUWUxFU19iaW4oYmEvKjo6LCBkYXRhKi8pIHtcblx0dmFyIGNudCA9IDA7XG5cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAxRkMgLyogQnJ0QmVnaW5UYWJsZVN0eWxlcyAqLywgd3JpdGVfQnJ0QmVnaW5UYWJsZVN0eWxlcyhjbnQsIFwiVGFibGVTdHlsZU1lZGl1bTlcIiwgXCJQaXZvdFN0eWxlTWVkaXVtNFwiKSk7XG5cdC8qICpUQUJMRVNUWUxFICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMUZEIC8qIEJydEVuZFRhYmxlU3R5bGVzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfQ09MT1JQQUxFVFRFX2JpbigvKjo6YmEsIGRhdGEqLykge1xuXHRyZXR1cm47XG5cdC8qIEJydEJlZ2luQ29sb3JQYWxldHRlIFtJTkRFWEVEQ09MT1JTXSBbTVJVQ09MT1JTXSBCcnRFbmRDb2xvclBhbGV0dGUgKi9cbn1cblxuLyogW01TLVhMU0JdIDIuMS43LjUwIFN0eWxlcyAqL1xuZnVuY3Rpb24gd3JpdGVfc3R5X2Jpbih3Yiwgb3B0cykge1xuXHR2YXIgYmEgPSBidWZfYXJyYXkoKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAxMTYgLyogQnJ0QmVnaW5TdHlsZVNoZWV0ICovKTtcblx0d3JpdGVfRk1UU19iaW4oYmEsIHdiLlNTRik7XG5cdHdyaXRlX0ZPTlRTX2JpbihiYSwgd2IpO1xuXHR3cml0ZV9GSUxMU19iaW4oYmEsIHdiKTtcblx0d3JpdGVfQk9SREVSU19iaW4oYmEsIHdiKTtcblx0d3JpdGVfQ0VMTFNUWUxFWEZTX2JpbihiYSwgd2IpO1xuXHR3cml0ZV9DRUxMWEZTX2JpbihiYSwgb3B0cy5jZWxsWGZzKTtcblx0d3JpdGVfU1RZTEVTX2JpbihiYSwgd2IpO1xuXHR3cml0ZV9EWEZTX2JpbihiYSwgd2IpO1xuXHR3cml0ZV9UQUJMRVNUWUxFU19iaW4oYmEsIHdiKTtcblx0d3JpdGVfQ09MT1JQQUxFVFRFX2JpbihiYSwgd2IpO1xuXHQvKiBGUlRTVFlMRVNIRUVUKi9cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAxMTcgLyogQnJ0RW5kU3R5bGVTaGVldCAqLyk7XG5cdHJldHVybiBiYS5lbmQoKTtcbn1cbi8qIEV2ZW4gdGhvdWdoIHRoZW1lIGxheW91dCBpcyBkazEgbHQxIGRrMiBsdDIsIHRydWUgb3JkZXIgaXMgbHQxIGRrMSBsdDIgZGsyICovXG52YXIgWExTWFRoZW1lQ2xyU2NoZW1lID0gW1xuXHQnPC9hOmx0MT4nLCAnPC9hOmRrMT4nLCAnPC9hOmx0Mj4nLCAnPC9hOmRrMj4nLFxuXHQnPC9hOmFjY2VudDE+JywgJzwvYTphY2NlbnQyPicsICc8L2E6YWNjZW50Mz4nLFxuXHQnPC9hOmFjY2VudDQ+JywgJzwvYTphY2NlbnQ1PicsICc8L2E6YWNjZW50Nj4nLFxuXHQnPC9hOmhsaW5rPicsICc8L2E6Zm9sSGxpbms+J1xuXTtcbi8qIDIwLjEuNi4yIGNsclNjaGVtZSBDVF9Db2xvclNjaGVtZSAqL1xuZnVuY3Rpb24gcGFyc2VfY2xyU2NoZW1lKHQsIHRoZW1lcywgb3B0cykge1xuXHR0aGVtZXMudGhlbWVFbGVtZW50cy5jbHJTY2hlbWUgPSBbXTtcblx0dmFyIGNvbG9yID0ge307XG5cdCh0WzBdLm1hdGNoKHRhZ3JlZ2V4KXx8W10pLmZvckVhY2goZnVuY3Rpb24oeCkge1xuXHRcdHZhciB5ID0gcGFyc2V4bWx0YWcoeCk7XG5cdFx0c3dpdGNoKHlbMF0pIHtcblx0XHRcdC8qIDIwLjEuNi4yIGNsclNjaGVtZSAoQ29sb3IgU2NoZW1lKSBDVF9Db2xvclNjaGVtZSAqL1xuXHRcdFx0Y2FzZSAnPGE6Y2xyU2NoZW1lJzogY2FzZSAnPC9hOmNsclNjaGVtZT4nOiBicmVhaztcblxuXHRcdFx0LyogMjAuMS4yLjMuMzIgc3JnYkNsciBDVF9TUmdiQ29sb3IgKi9cblx0XHRcdGNhc2UgJzxhOnNyZ2JDbHInOlxuXHRcdFx0XHRjb2xvci5yZ2IgPSB5LnZhbDsgYnJlYWs7XG5cblx0XHRcdC8qIDIwLjEuMi4zLjMzIHN5c0NsciBDVF9TeXN0ZW1Db2xvciAqL1xuXHRcdFx0Y2FzZSAnPGE6c3lzQ2xyJzpcblx0XHRcdFx0Y29sb3IucmdiID0geS5sYXN0Q2xyOyBicmVhaztcblxuXHRcdFx0LyogMjAuMS40LjEuMSBhY2NlbnQxIChBY2NlbnQgMSkgKi9cblx0XHRcdC8qIDIwLjEuNC4xLjIgYWNjZW50MiAoQWNjZW50IDIpICovXG5cdFx0XHQvKiAyMC4xLjQuMS4zIGFjY2VudDMgKEFjY2VudCAzKSAqL1xuXHRcdFx0LyogMjAuMS40LjEuNCBhY2NlbnQ0IChBY2NlbnQgNCkgKi9cblx0XHRcdC8qIDIwLjEuNC4xLjUgYWNjZW50NSAoQWNjZW50IDUpICovXG5cdFx0XHQvKiAyMC4xLjQuMS42IGFjY2VudDYgKEFjY2VudCA2KSAqL1xuXHRcdFx0LyogMjAuMS40LjEuOSBkazEgKERhcmsgMSkgKi9cblx0XHRcdC8qIDIwLjEuNC4xLjEwIGRrMiAoRGFyayAyKSAqL1xuXHRcdFx0LyogMjAuMS40LjEuMTUgZm9sSGxpbmsgKEZvbGxvd2VkIEh5cGVybGluaykgKi9cblx0XHRcdC8qIDIwLjEuNC4xLjE5IGhsaW5rIChIeXBlcmxpbmspICovXG5cdFx0XHQvKiAyMC4xLjQuMS4yMiBsdDEgKExpZ2h0IDEpICovXG5cdFx0XHQvKiAyMC4xLjQuMS4yMyBsdDIgKExpZ2h0IDIpICovXG5cdFx0XHRjYXNlICc8YTpkazE+JzogY2FzZSAnPC9hOmRrMT4nOlxuXHRcdFx0Y2FzZSAnPGE6bHQxPic6IGNhc2UgJzwvYTpsdDE+Jzpcblx0XHRcdGNhc2UgJzxhOmRrMj4nOiBjYXNlICc8L2E6ZGsyPic6XG5cdFx0XHRjYXNlICc8YTpsdDI+JzogY2FzZSAnPC9hOmx0Mj4nOlxuXHRcdFx0Y2FzZSAnPGE6YWNjZW50MT4nOiBjYXNlICc8L2E6YWNjZW50MT4nOlxuXHRcdFx0Y2FzZSAnPGE6YWNjZW50Mj4nOiBjYXNlICc8L2E6YWNjZW50Mj4nOlxuXHRcdFx0Y2FzZSAnPGE6YWNjZW50Mz4nOiBjYXNlICc8L2E6YWNjZW50Mz4nOlxuXHRcdFx0Y2FzZSAnPGE6YWNjZW50ND4nOiBjYXNlICc8L2E6YWNjZW50ND4nOlxuXHRcdFx0Y2FzZSAnPGE6YWNjZW50NT4nOiBjYXNlICc8L2E6YWNjZW50NT4nOlxuXHRcdFx0Y2FzZSAnPGE6YWNjZW50Nj4nOiBjYXNlICc8L2E6YWNjZW50Nj4nOlxuXHRcdFx0Y2FzZSAnPGE6aGxpbms+JzogY2FzZSAnPC9hOmhsaW5rPic6XG5cdFx0XHRjYXNlICc8YTpmb2xIbGluaz4nOiBjYXNlICc8L2E6Zm9sSGxpbms+Jzpcblx0XHRcdFx0aWYgKHlbMF0uY2hhckF0KDEpID09PSAnLycpIHtcblx0XHRcdFx0XHR0aGVtZXMudGhlbWVFbGVtZW50cy5jbHJTY2hlbWVbWExTWFRoZW1lQ2xyU2NoZW1lLmluZGV4T2YoeVswXSldID0gY29sb3I7XG5cdFx0XHRcdFx0Y29sb3IgPSB7fTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb2xvci5uYW1lID0geVswXS5zbGljZSgzLCB5WzBdLmxlbmd0aCAtIDEpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRkZWZhdWx0OiBpZihvcHRzICYmIG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCAnICsgeVswXSArICcgaW4gY2xyU2NoZW1lJyk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLyogMjAuMS40LjEuMTggZm9udFNjaGVtZSBDVF9Gb250U2NoZW1lICovXG5mdW5jdGlvbiBwYXJzZV9mb250U2NoZW1lKC8qOjp0LCB0aGVtZXMsIG9wdHMqLykgeyB9XG5cbi8qIDIwLjEuNC4xLjE1IGZtdFNjaGVtZSBDVF9TdHlsZU1hdHJpeCAqL1xuZnVuY3Rpb24gcGFyc2VfZm10U2NoZW1lKC8qOjp0LCB0aGVtZXMsIG9wdHMqLykgeyB9XG5cbnZhciBjbHJzcmVnZXggPSAvPGE6Y2xyU2NoZW1lKFtePl0qKT5bXFxzXFxTXSo8XFwvYTpjbHJTY2hlbWU+LztcbnZhciBmbnRzcmVnZXggPSAvPGE6Zm9udFNjaGVtZShbXj5dKik+W1xcc1xcU10qPFxcL2E6Zm9udFNjaGVtZT4vO1xudmFyIGZtdHNyZWdleCA9IC88YTpmbXRTY2hlbWUoW14+XSopPltcXHNcXFNdKjxcXC9hOmZtdFNjaGVtZT4vO1xuXG4vKiAyMC4xLjYuMTAgdGhlbWVFbGVtZW50cyBDVF9CYXNlU3R5bGVzICovXG5mdW5jdGlvbiBwYXJzZV90aGVtZUVsZW1lbnRzKGRhdGEsIHRoZW1lcywgb3B0cykge1xuXHR0aGVtZXMudGhlbWVFbGVtZW50cyA9IHt9O1xuXG5cdHZhciB0O1xuXG5cdFtcblx0XHQvKiBjbHJTY2hlbWUgQ1RfQ29sb3JTY2hlbWUgKi9cblx0XHRbJ2NsclNjaGVtZScsIGNscnNyZWdleCwgcGFyc2VfY2xyU2NoZW1lXSxcblx0XHQvKiBmb250U2NoZW1lIENUX0ZvbnRTY2hlbWUgKi9cblx0XHRbJ2ZvbnRTY2hlbWUnLCBmbnRzcmVnZXgsIHBhcnNlX2ZvbnRTY2hlbWVdLFxuXHRcdC8qIGZtdFNjaGVtZSBDVF9TdHlsZU1hdHJpeCAqL1xuXHRcdFsnZm10U2NoZW1lJywgZm10c3JlZ2V4LCBwYXJzZV9mbXRTY2hlbWVdXG5cdF0uZm9yRWFjaChmdW5jdGlvbihtKSB7XG5cdFx0aWYoISh0PWRhdGEubWF0Y2gobVsxXSkpKSB0aHJvdyBuZXcgRXJyb3IobVswXSArICcgbm90IGZvdW5kIGluIHRoZW1lRWxlbWVudHMnKTtcblx0XHRtWzJdKHQsIHRoZW1lcywgb3B0cyk7XG5cdH0pO1xufVxuXG52YXIgdGhlbWVsdHJlZ2V4ID0gLzxhOnRoZW1lRWxlbWVudHMoW14+XSopPltcXHNcXFNdKjxcXC9hOnRoZW1lRWxlbWVudHM+LztcblxuLyogMTQuMi43IFRoZW1lIFBhcnQgKi9cbmZ1bmN0aW9uIHBhcnNlX3RoZW1lX3htbChkYXRhLyo6c3RyaW5nKi8sIG9wdHMpIHtcblx0LyogMjAuMS42LjkgdGhlbWUgQ1RfT2ZmaWNlU3R5bGVTaGVldCAqL1xuXHRpZighZGF0YSB8fCBkYXRhLmxlbmd0aCA9PT0gMCkgZGF0YSA9IHdyaXRlX3RoZW1lKCk7XG5cblx0dmFyIHQ7XG5cdHZhciB0aGVtZXMgPSB7fTtcblxuXHQvKiB0aGVtZUVsZW1lbnRzIENUX0Jhc2VTdHlsZXMgKi9cblx0aWYoISh0PWRhdGEubWF0Y2godGhlbWVsdHJlZ2V4KSkpIHRocm93IG5ldyBFcnJvcigndGhlbWVFbGVtZW50cyBub3QgZm91bmQgaW4gdGhlbWUnKTtcblx0cGFyc2VfdGhlbWVFbGVtZW50cyh0WzBdLCB0aGVtZXMsIG9wdHMpO1xuXHR0aGVtZXMucmF3ID0gZGF0YTtcblx0cmV0dXJuIHRoZW1lcztcbn1cblxuZnVuY3Rpb24gd3JpdGVfdGhlbWUoVGhlbWVzLCBvcHRzKS8qOnN0cmluZyovIHtcblx0aWYob3B0cyAmJiBvcHRzLnRoZW1lWExTWCkgcmV0dXJuIG9wdHMudGhlbWVYTFNYO1xuXHRpZihUaGVtZXMgJiYgdHlwZW9mIFRoZW1lcy5yYXcgPT0gXCJzdHJpbmdcIikgcmV0dXJuIFRoZW1lcy5yYXc7XG5cdHZhciBvID0gW1hNTF9IRUFERVJdO1xuXHRvW28ubGVuZ3RoXSA9ICc8YTp0aGVtZSB4bWxuczphPVwiaHR0cDovL3NjaGVtYXMub3BlbnhtbGZvcm1hdHMub3JnL2RyYXdpbmdtbC8yMDA2L21haW5cIiBuYW1lPVwiT2ZmaWNlIFRoZW1lXCI+Jztcblx0b1tvLmxlbmd0aF0gPSAgJzxhOnRoZW1lRWxlbWVudHM+JztcblxuXHRvW28ubGVuZ3RoXSA9ICAgJzxhOmNsclNjaGVtZSBuYW1lPVwiT2ZmaWNlXCI+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6ZGsxPjxhOnN5c0NsciB2YWw9XCJ3aW5kb3dUZXh0XCIgbGFzdENscj1cIjAwMDAwMFwiLz48L2E6ZGsxPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmx0MT48YTpzeXNDbHIgdmFsPVwid2luZG93XCIgbGFzdENscj1cIkZGRkZGRlwiLz48L2E6bHQxPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmRrMj48YTpzcmdiQ2xyIHZhbD1cIjFGNDk3RFwiLz48L2E6ZGsyPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmx0Mj48YTpzcmdiQ2xyIHZhbD1cIkVFRUNFMVwiLz48L2E6bHQyPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmFjY2VudDE+PGE6c3JnYkNsciB2YWw9XCI0RjgxQkRcIi8+PC9hOmFjY2VudDE+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6YWNjZW50Mj48YTpzcmdiQ2xyIHZhbD1cIkMwNTA0RFwiLz48L2E6YWNjZW50Mj4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8YTphY2NlbnQzPjxhOnNyZ2JDbHIgdmFsPVwiOUJCQjU5XCIvPjwvYTphY2NlbnQzPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmFjY2VudDQ+PGE6c3JnYkNsciB2YWw9XCI4MDY0QTJcIi8+PC9hOmFjY2VudDQ+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6YWNjZW50NT48YTpzcmdiQ2xyIHZhbD1cIjRCQUNDNlwiLz48L2E6YWNjZW50NT4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8YTphY2NlbnQ2PjxhOnNyZ2JDbHIgdmFsPVwiRjc5NjQ2XCIvPjwvYTphY2NlbnQ2Pic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmhsaW5rPjxhOnNyZ2JDbHIgdmFsPVwiMDAwMEZGXCIvPjwvYTpobGluaz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8YTpmb2xIbGluaz48YTpzcmdiQ2xyIHZhbD1cIjgwMDA4MFwiLz48L2E6Zm9sSGxpbms+Jztcblx0b1tvLmxlbmd0aF0gPSAgICc8L2E6Y2xyU2NoZW1lPic7XG5cblx0b1tvLmxlbmd0aF0gPSAgICc8YTpmb250U2NoZW1lIG5hbWU9XCJPZmZpY2VcIj4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8YTptYWpvckZvbnQ+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmxhdGluIHR5cGVmYWNlPVwiQ2FtYnJpYVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6ZWEgdHlwZWZhY2U9XCJcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmNzIHR5cGVmYWNlPVwiXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkpwYW5cIiB0eXBlZmFjZT1cIu+8re+8syDvvLDjgrTjgrfjg4Pjgq9cIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiSGFuZ1wiIHR5cGVmYWNlPVwi66eR7J2AIOqzoOuUlVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJIYW5zXCIgdHlwZWZhY2U9XCLlrovkvZNcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiSGFudFwiIHR5cGVmYWNlPVwi5paw57Sw5piO6auUXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkFyYWJcIiB0eXBlZmFjZT1cIlRpbWVzIE5ldyBSb21hblwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJIZWJyXCIgdHlwZWZhY2U9XCJUaW1lcyBOZXcgUm9tYW5cIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiVGhhaVwiIHR5cGVmYWNlPVwiVGFob21hXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkV0aGlcIiB0eXBlZmFjZT1cIk55YWxhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkJlbmdcIiB0eXBlZmFjZT1cIlZyaW5kYVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJHdWpyXCIgdHlwZWZhY2U9XCJTaHJ1dGlcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiS2htclwiIHR5cGVmYWNlPVwiTW9vbEJvcmFuXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIktuZGFcIiB0eXBlZmFjZT1cIlR1bmdhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkd1cnVcIiB0eXBlZmFjZT1cIlJhYXZpXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkNhbnNcIiB0eXBlZmFjZT1cIkV1cGhlbWlhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkNoZXJcIiB0eXBlZmFjZT1cIlBsYW50YWdlbmV0IENoZXJva2VlXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIllpaWlcIiB0eXBlZmFjZT1cIk1pY3Jvc29mdCBZaSBCYWl0aVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJUaWJ0XCIgdHlwZWZhY2U9XCJNaWNyb3NvZnQgSGltYWxheWFcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiVGhhYVwiIHR5cGVmYWNlPVwiTVYgQm9saVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJEZXZhXCIgdHlwZWZhY2U9XCJNYW5nYWxcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiVGVsdVwiIHR5cGVmYWNlPVwiR2F1dGFtaVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJUYW1sXCIgdHlwZWZhY2U9XCJMYXRoYVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJTeXJjXCIgdHlwZWZhY2U9XCJFc3RyYW5nZWxvIEVkZXNzYVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJPcnlhXCIgdHlwZWZhY2U9XCJLYWxpbmdhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIk1seW1cIiB0eXBlZmFjZT1cIkthcnRpa2FcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiTGFvb1wiIHR5cGVmYWNlPVwiRG9rQ2hhbXBhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIlNpbmhcIiB0eXBlZmFjZT1cIklza29vbGEgUG90YVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJNb25nXCIgdHlwZWZhY2U9XCJNb25nb2xpYW4gQmFpdGlcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiVmlldFwiIHR5cGVmYWNlPVwiVGltZXMgTmV3IFJvbWFuXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIlVpZ2hcIiB0eXBlZmFjZT1cIk1pY3Jvc29mdCBVaWdodXJcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiR2VvclwiIHR5cGVmYWNlPVwiU3lsZmFlblwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8L2E6bWFqb3JGb250Pic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOm1pbm9yRm9udD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6bGF0aW4gdHlwZWZhY2U9XCJDYWxpYnJpXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTplYSB0eXBlZmFjZT1cIlwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Y3MgdHlwZWZhY2U9XCJcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiSnBhblwiIHR5cGVmYWNlPVwi77yt77yzIO+8sOOCtOOCt+ODg+OCr1wiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJIYW5nXCIgdHlwZWZhY2U9XCLrp5HsnYAg6rOg65SVXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkhhbnNcIiB0eXBlZmFjZT1cIuWui+S9k1wiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJIYW50XCIgdHlwZWZhY2U9XCLmlrDntLDmmI7pq5RcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiQXJhYlwiIHR5cGVmYWNlPVwiQXJpYWxcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiSGViclwiIHR5cGVmYWNlPVwiQXJpYWxcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiVGhhaVwiIHR5cGVmYWNlPVwiVGFob21hXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkV0aGlcIiB0eXBlZmFjZT1cIk55YWxhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkJlbmdcIiB0eXBlZmFjZT1cIlZyaW5kYVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJHdWpyXCIgdHlwZWZhY2U9XCJTaHJ1dGlcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiS2htclwiIHR5cGVmYWNlPVwiRGF1blBlbmhcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiS25kYVwiIHR5cGVmYWNlPVwiVHVuZ2FcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiR3VydVwiIHR5cGVmYWNlPVwiUmFhdmlcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiQ2Fuc1wiIHR5cGVmYWNlPVwiRXVwaGVtaWFcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiQ2hlclwiIHR5cGVmYWNlPVwiUGxhbnRhZ2VuZXQgQ2hlcm9rZWVcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiWWlpaVwiIHR5cGVmYWNlPVwiTWljcm9zb2Z0IFlpIEJhaXRpXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIlRpYnRcIiB0eXBlZmFjZT1cIk1pY3Jvc29mdCBIaW1hbGF5YVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJUaGFhXCIgdHlwZWZhY2U9XCJNViBCb2xpXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkRldmFcIiB0eXBlZmFjZT1cIk1hbmdhbFwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJUZWx1XCIgdHlwZWZhY2U9XCJHYXV0YW1pXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIlRhbWxcIiB0eXBlZmFjZT1cIkxhdGhhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIlN5cmNcIiB0eXBlZmFjZT1cIkVzdHJhbmdlbG8gRWRlc3NhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIk9yeWFcIiB0eXBlZmFjZT1cIkthbGluZ2FcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiTWx5bVwiIHR5cGVmYWNlPVwiS2FydGlrYVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJMYW9vXCIgdHlwZWZhY2U9XCJEb2tDaGFtcGFcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmZvbnQgc2NyaXB0PVwiU2luaFwiIHR5cGVmYWNlPVwiSXNrb29sYSBQb3RhXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIk1vbmdcIiB0eXBlZmFjZT1cIk1vbmdvbGlhbiBCYWl0aVwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJWaWV0XCIgdHlwZWZhY2U9XCJBcmlhbFwiLz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Zm9udCBzY3JpcHQ9XCJVaWdoXCIgdHlwZWZhY2U9XCJNaWNyb3NvZnQgVWlnaHVyXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpmb250IHNjcmlwdD1cIkdlb3JcIiB0eXBlZmFjZT1cIlN5bGZhZW5cIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPC9hOm1pbm9yRm9udD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgJzwvYTpmb250U2NoZW1lPic7XG5cblx0b1tvLmxlbmd0aF0gPSAgICc8YTpmbXRTY2hlbWUgbmFtZT1cIk9mZmljZVwiPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzxhOmZpbGxTdHlsZUxzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6c29saWRGaWxsPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiLz48L2E6c29saWRGaWxsPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpncmFkRmlsbCByb3RXaXRoU2hhcGU9XCIxXCI+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8YTpnc0xzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgICc8YTpncyBwb3M9XCIwXCI+PGE6c2NoZW1lQ2xyIHZhbD1cInBoQ2xyXCI+PGE6dGludCB2YWw9XCI1MDAwMFwiLz48YTpzYXRNb2QgdmFsPVwiMzAwMDAwXCIvPjwvYTpzY2hlbWVDbHI+PC9hOmdzPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAgJzxhOmdzIHBvcz1cIjM1MDAwXCI+PGE6c2NoZW1lQ2xyIHZhbD1cInBoQ2xyXCI+PGE6dGludCB2YWw9XCIzNzAwMFwiLz48YTpzYXRNb2QgdmFsPVwiMzAwMDAwXCIvPjwvYTpzY2hlbWVDbHI+PC9hOmdzPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAgJzxhOmdzIHBvcz1cIjEwMDAwMFwiPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiPjxhOnRpbnQgdmFsPVwiMTUwMDBcIi8+PGE6c2F0TW9kIHZhbD1cIjM1MDAwMFwiLz48L2E6c2NoZW1lQ2xyPjwvYTpncz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgJzwvYTpnc0xzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgJzxhOmxpbiBhbmc9XCIxNjIwMDAwMFwiIHNjYWxlZD1cIjFcIi8+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzwvYTpncmFkRmlsbD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Z3JhZEZpbGwgcm90V2l0aFNoYXBlPVwiMVwiPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPGE6Z3NMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICAnPGE6Z3MgcG9zPVwiMFwiPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiPjxhOnRpbnQgdmFsPVwiMTAwMDAwXCIvPjxhOnNoYWRlIHZhbD1cIjEwMDAwMFwiLz48YTpzYXRNb2QgdmFsPVwiMTMwMDAwXCIvPjwvYTpzY2hlbWVDbHI+PC9hOmdzPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAgJzxhOmdzIHBvcz1cIjEwMDAwMFwiPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiPjxhOnRpbnQgdmFsPVwiNTAwMDBcIi8+PGE6c2hhZGUgdmFsPVwiMTAwMDAwXCIvPjxhOnNhdE1vZCB2YWw9XCIzNTAwMDBcIi8+PC9hOnNjaGVtZUNscj48L2E6Z3M+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8L2E6Z3NMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8YTpsaW4gYW5nPVwiMTYyMDAwMDBcIiBzY2FsZWQ9XCIwXCIvPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8L2E6Z3JhZEZpbGw+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPC9hOmZpbGxTdHlsZUxzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8YTpsblN0eWxlTHN0Pic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpsbiB3PVwiOTUyNVwiIGNhcD1cImZsYXRcIiBjbXBkPVwic25nXCIgYWxnbj1cImN0clwiPjxhOnNvbGlkRmlsbD48YTpzY2hlbWVDbHIgdmFsPVwicGhDbHJcIj48YTpzaGFkZSB2YWw9XCI5NTAwMFwiLz48YTpzYXRNb2QgdmFsPVwiMTA1MDAwXCIvPjwvYTpzY2hlbWVDbHI+PC9hOnNvbGlkRmlsbD48YTpwcnN0RGFzaCB2YWw9XCJzb2xpZFwiLz48L2E6bG4+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmxuIHc9XCIyNTQwMFwiIGNhcD1cImZsYXRcIiBjbXBkPVwic25nXCIgYWxnbj1cImN0clwiPjxhOnNvbGlkRmlsbD48YTpzY2hlbWVDbHIgdmFsPVwicGhDbHJcIi8+PC9hOnNvbGlkRmlsbD48YTpwcnN0RGFzaCB2YWw9XCJzb2xpZFwiLz48L2E6bG4+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmxuIHc9XCIzODEwMFwiIGNhcD1cImZsYXRcIiBjbXBkPVwic25nXCIgYWxnbj1cImN0clwiPjxhOnNvbGlkRmlsbD48YTpzY2hlbWVDbHIgdmFsPVwicGhDbHJcIi8+PC9hOnNvbGlkRmlsbD48YTpwcnN0RGFzaCB2YWw9XCJzb2xpZFwiLz48L2E6bG4+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPC9hOmxuU3R5bGVMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6ZWZmZWN0U3R5bGVMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOmVmZmVjdFN0eWxlPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPGE6ZWZmZWN0THN0Pic7XG5cdG9bby5sZW5ndGhdID0gICAgICAgJzxhOm91dGVyU2hkdyBibHVyUmFkPVwiNDAwMDBcIiBkaXN0PVwiMjAwMDBcIiBkaXI9XCI1NDAwMDAwXCIgcm90V2l0aFNoYXBlPVwiMFwiPjxhOnNyZ2JDbHIgdmFsPVwiMDAwMDAwXCI+PGE6YWxwaGEgdmFsPVwiMzgwMDBcIi8+PC9hOnNyZ2JDbHI+PC9hOm91dGVyU2hkdz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgJzwvYTplZmZlY3RMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzwvYTplZmZlY3RTdHlsZT4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6ZWZmZWN0U3R5bGU+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8YTplZmZlY3RMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICAnPGE6b3V0ZXJTaGR3IGJsdXJSYWQ9XCI0MDAwMFwiIGRpc3Q9XCIyMzAwMFwiIGRpcj1cIjU0MDAwMDBcIiByb3RXaXRoU2hhcGU9XCIwXCI+PGE6c3JnYkNsciB2YWw9XCIwMDAwMDBcIj48YTphbHBoYSB2YWw9XCIzNTAwMFwiLz48L2E6c3JnYkNscj48L2E6b3V0ZXJTaGR3Pic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPC9hOmVmZmVjdExzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPC9hOmVmZmVjdFN0eWxlPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTplZmZlY3RTdHlsZT4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgJzxhOmVmZmVjdExzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgICc8YTpvdXRlclNoZHcgYmx1clJhZD1cIjQwMDAwXCIgZGlzdD1cIjIzMDAwXCIgZGlyPVwiNTQwMDAwMFwiIHJvdFdpdGhTaGFwZT1cIjBcIj48YTpzcmdiQ2xyIHZhbD1cIjAwMDAwMFwiPjxhOmFscGhhIHZhbD1cIjM1MDAwXCIvPjwvYTpzcmdiQ2xyPjwvYTpvdXRlclNoZHc+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8L2E6ZWZmZWN0THN0Pic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPGE6c2NlbmUzZD48YTpjYW1lcmEgcHJzdD1cIm9ydGhvZ3JhcGhpY0Zyb250XCI+PGE6cm90IGxhdD1cIjBcIiBsb249XCIwXCIgcmV2PVwiMFwiLz48L2E6Y2FtZXJhPjxhOmxpZ2h0UmlnIHJpZz1cInRocmVlUHRcIiBkaXI9XCJ0XCI+PGE6cm90IGxhdD1cIjBcIiBsb249XCIwXCIgcmV2PVwiMTIwMDAwMFwiLz48L2E6bGlnaHRSaWc+PC9hOnNjZW5lM2Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8YTpzcDNkPjxhOmJldmVsVCB3PVwiNjM1MDBcIiBoPVwiMjU0MDBcIi8+PC9hOnNwM2Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzwvYTplZmZlY3RTdHlsZT4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICc8L2E6ZWZmZWN0U3R5bGVMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6YmdGaWxsU3R5bGVMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgJzxhOnNvbGlkRmlsbD48YTpzY2hlbWVDbHIgdmFsPVwicGhDbHJcIi8+PC9hOnNvbGlkRmlsbD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPGE6Z3JhZEZpbGwgcm90V2l0aFNoYXBlPVwiMVwiPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPGE6Z3NMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICAnPGE6Z3MgcG9zPVwiMFwiPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiPjxhOnRpbnQgdmFsPVwiNDAwMDBcIi8+PGE6c2F0TW9kIHZhbD1cIjM1MDAwMFwiLz48L2E6c2NoZW1lQ2xyPjwvYTpncz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgICc8YTpncyBwb3M9XCI0MDAwMFwiPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiPjxhOnRpbnQgdmFsPVwiNDUwMDBcIi8+PGE6c2hhZGUgdmFsPVwiOTkwMDBcIi8+PGE6c2F0TW9kIHZhbD1cIjM1MDAwMFwiLz48L2E6c2NoZW1lQ2xyPjwvYTpncz4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgICc8YTpncyBwb3M9XCIxMDAwMDBcIj48YTpzY2hlbWVDbHIgdmFsPVwicGhDbHJcIj48YTpzaGFkZSB2YWw9XCIyMDAwMFwiLz48YTpzYXRNb2QgdmFsPVwiMjU1MDAwXCIvPjwvYTpzY2hlbWVDbHI+PC9hOmdzPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPC9hOmdzTHN0Pic7XG5cdG9bby5sZW5ndGhdID0gICAgICAnPGE6cGF0aCBwYXRoPVwiY2lyY2xlXCI+PGE6ZmlsbFRvUmVjdCBsPVwiNTAwMDBcIiB0PVwiLTgwMDAwXCIgcj1cIjUwMDAwXCIgYj1cIjE4MDAwMFwiLz48L2E6cGF0aD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPC9hOmdyYWRGaWxsPic7XG5cdG9bby5sZW5ndGhdID0gICAgICc8YTpncmFkRmlsbCByb3RXaXRoU2hhcGU9XCIxXCI+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8YTpnc0xzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAgICc8YTpncyBwb3M9XCIwXCI+PGE6c2NoZW1lQ2xyIHZhbD1cInBoQ2xyXCI+PGE6dGludCB2YWw9XCI4MDAwMFwiLz48YTpzYXRNb2QgdmFsPVwiMzAwMDAwXCIvPjwvYTpzY2hlbWVDbHI+PC9hOmdzPic7XG5cdG9bby5sZW5ndGhdID0gICAgICAgJzxhOmdzIHBvcz1cIjEwMDAwMFwiPjxhOnNjaGVtZUNsciB2YWw9XCJwaENsclwiPjxhOnNoYWRlIHZhbD1cIjMwMDAwXCIvPjxhOnNhdE1vZCB2YWw9XCIyMDAwMDBcIi8+PC9hOnNjaGVtZUNscj48L2E6Z3M+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8L2E6Z3NMc3Q+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAgICc8YTpwYXRoIHBhdGg9XCJjaXJjbGVcIj48YTpmaWxsVG9SZWN0IGw9XCI1MDAwMFwiIHQ9XCI1MDAwMFwiIHI9XCI1MDAwMFwiIGI9XCI1MDAwMFwiLz48L2E6cGF0aD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgICAnPC9hOmdyYWRGaWxsPic7XG5cdG9bby5sZW5ndGhdID0gICAgJzwvYTpiZ0ZpbGxTdHlsZUxzdD4nO1xuXHRvW28ubGVuZ3RoXSA9ICAgJzwvYTpmbXRTY2hlbWU+Jztcblx0b1tvLmxlbmd0aF0gPSAgJzwvYTp0aGVtZUVsZW1lbnRzPic7XG5cblx0b1tvLmxlbmd0aF0gPSAgJzxhOm9iamVjdERlZmF1bHRzPic7XG5cdG9bby5sZW5ndGhdID0gICAnPGE6c3BEZWY+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6c3BQci8+PGE6Ym9keVByLz48YTpsc3RTdHlsZS8+PGE6c3R5bGU+PGE6bG5SZWYgaWR4PVwiMVwiPjxhOnNjaGVtZUNsciB2YWw9XCJhY2NlbnQxXCIvPjwvYTpsblJlZj48YTpmaWxsUmVmIGlkeD1cIjNcIj48YTpzY2hlbWVDbHIgdmFsPVwiYWNjZW50MVwiLz48L2E6ZmlsbFJlZj48YTplZmZlY3RSZWYgaWR4PVwiMlwiPjxhOnNjaGVtZUNsciB2YWw9XCJhY2NlbnQxXCIvPjwvYTplZmZlY3RSZWY+PGE6Zm9udFJlZiBpZHg9XCJtaW5vclwiPjxhOnNjaGVtZUNsciB2YWw9XCJsdDFcIi8+PC9hOmZvbnRSZWY+PC9hOnN0eWxlPic7XG5cdG9bby5sZW5ndGhdID0gICAnPC9hOnNwRGVmPic7XG5cdG9bby5sZW5ndGhdID0gICAnPGE6bG5EZWY+Jztcblx0b1tvLmxlbmd0aF0gPSAgICAnPGE6c3BQci8+PGE6Ym9keVByLz48YTpsc3RTdHlsZS8+PGE6c3R5bGU+PGE6bG5SZWYgaWR4PVwiMlwiPjxhOnNjaGVtZUNsciB2YWw9XCJhY2NlbnQxXCIvPjwvYTpsblJlZj48YTpmaWxsUmVmIGlkeD1cIjBcIj48YTpzY2hlbWVDbHIgdmFsPVwiYWNjZW50MVwiLz48L2E6ZmlsbFJlZj48YTplZmZlY3RSZWYgaWR4PVwiMVwiPjxhOnNjaGVtZUNsciB2YWw9XCJhY2NlbnQxXCIvPjwvYTplZmZlY3RSZWY+PGE6Zm9udFJlZiBpZHg9XCJtaW5vclwiPjxhOnNjaGVtZUNsciB2YWw9XCJ0eDFcIi8+PC9hOmZvbnRSZWY+PC9hOnN0eWxlPic7XG5cdG9bby5sZW5ndGhdID0gICAnPC9hOmxuRGVmPic7XG5cdG9bby5sZW5ndGhdID0gICc8L2E6b2JqZWN0RGVmYXVsdHM+Jztcblx0b1tvLmxlbmd0aF0gPSAgJzxhOmV4dHJhQ2xyU2NoZW1lTHN0Lz4nO1xuXHRvW28ubGVuZ3RoXSA9ICc8L2E6dGhlbWU+Jztcblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cbi8qIFtNUy1YTFNdIDIuNC4zMjYgVE9ETzogcGF5bG9hZCBpcyBhIHppcCBmaWxlICovXG5mdW5jdGlvbiBwYXJzZV9UaGVtZShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIGR3VGhlbWVWZXJzaW9uID0gYmxvYi5yZWFkX3NoaWZ0KDQpO1xuXHRpZihkd1RoZW1lVmVyc2lvbiA9PT0gMTI0MjI2KSByZXR1cm47XG5cdGlmKCFvcHRzLmNlbGxTdHlsZXMpIHsgYmxvYi5sID0gZW5kOyByZXR1cm47IH1cblx0dmFyIGRhdGEgPSBibG9iLnNsaWNlKGJsb2IubCk7XG5cdGJsb2IubCA9IGVuZDtcblx0dmFyIHppcDsgdHJ5IHsgemlwID0gemlwX3JlYWQoZGF0YSwge3R5cGU6IFwiYXJyYXlcIn0pOyB9IGNhdGNoKGUpIHsgcmV0dXJuOyB9XG5cdHZhciB0aGVtZVhNTCA9IGdldHppcHN0cih6aXAsIFwidGhlbWUvdGhlbWUvdGhlbWUxLnhtbFwiLCB0cnVlKTtcblx0aWYoIXRoZW1lWE1MKSByZXR1cm47XG5cdHJldHVybiBwYXJzZV90aGVtZV94bWwodGhlbWVYTUwsIG9wdHMpO1xufVxuXG4vKiAyLjUuNDkgKi9cbmZ1bmN0aW9uIHBhcnNlX0NvbG9yVGhlbWUoYmxvYi8qOjosIGxlbmd0aCovKSB7IHJldHVybiBibG9iLnJlYWRfc2hpZnQoNCk7IH1cblxuLyogMi41LjE1NSAqL1xuZnVuY3Rpb24gcGFyc2VfRnVsbENvbG9yRXh0KGJsb2IvKjo6LCBsZW5ndGgqLykge1xuXHR2YXIgbyA9IHt9O1xuXHRvLnhjbHJUeXBlID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRvLm5UaW50U2hhZGUgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHN3aXRjaChvLnhjbHJUeXBlKSB7XG5cdFx0Y2FzZSAwOiBibG9iLmwgKz0gNDsgYnJlYWs7XG5cdFx0Y2FzZSAxOiBvLnhjbHJWYWx1ZSA9IHBhcnNlX0ljdlhGKGJsb2IsIDQpOyBicmVhaztcblx0XHRjYXNlIDI6IG8ueGNsclZhbHVlID0gcGFyc2VfTG9uZ1JHQkEoYmxvYiwgNCk7IGJyZWFrO1xuXHRcdGNhc2UgMzogby54Y2xyVmFsdWUgPSBwYXJzZV9Db2xvclRoZW1lKGJsb2IsIDQpOyBicmVhaztcblx0XHRjYXNlIDQ6IGJsb2IubCArPSA0OyBicmVhaztcblx0fVxuXHRibG9iLmwgKz0gODtcblx0cmV0dXJuIG87XG59XG5cbi8qIDIuNS4xNjQgVE9ETzogcmVhZCA3IGJpdHMqL1xuZnVuY3Rpb24gcGFyc2VfSWN2WEYoYmxvYiwgbGVuZ3RoKSB7XG5cdHJldHVybiBwYXJzZW5vb3AoYmxvYiwgbGVuZ3RoKTtcbn1cblxuLyogMi41LjI4MCAqL1xuZnVuY3Rpb24gcGFyc2VfWEZFeHRHcmFkaWVudChibG9iLCBsZW5ndGgpIHtcblx0cmV0dXJuIHBhcnNlbm9vcChibG9iLCBsZW5ndGgpO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTA4ICovXG5mdW5jdGlvbiBwYXJzZV9FeHRQcm9wKGJsb2IvKjo6LCBsZW5ndGgqLykvKjpBcnJheTxhbnk+Ki8ge1xuXHR2YXIgZXh0VHlwZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGNiID0gYmxvYi5yZWFkX3NoaWZ0KDIpIC0gNDtcblx0dmFyIG8gPSBbZXh0VHlwZV07XG5cdHN3aXRjaChleHRUeXBlKSB7XG5cdFx0Y2FzZSAweDA0OiBjYXNlIDB4MDU6IGNhc2UgMHgwNzogY2FzZSAweDA4OlxuXHRcdGNhc2UgMHgwOTogY2FzZSAweDBBOiBjYXNlIDB4MEI6IGNhc2UgMHgwRDpcblx0XHRcdG9bMV0gPSBwYXJzZV9GdWxsQ29sb3JFeHQoYmxvYiwgY2IpOyBicmVhaztcblx0XHRjYXNlIDB4MDY6IG9bMV0gPSBwYXJzZV9YRkV4dEdyYWRpZW50KGJsb2IsIGNiKTsgYnJlYWs7XG5cdFx0Y2FzZSAweDBFOiBjYXNlIDB4MEY6IG9bMV0gPSBibG9iLnJlYWRfc2hpZnQoY2IgPT09IDEgPyAxIDogMik7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCBFeHRQcm9wIHR5cGU6IFwiICsgZXh0VHlwZSArIFwiIFwiICsgY2IpO1xuXHR9XG5cdHJldHVybiBvO1xufVxuXG4vKiAyLjQuMzU1ICovXG5mdW5jdGlvbiBwYXJzZV9YRkV4dChibG9iLCBsZW5ndGgpIHtcblx0dmFyIGVuZCA9IGJsb2IubCArIGxlbmd0aDtcblx0YmxvYi5sICs9IDI7XG5cdHZhciBpeGZlID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRibG9iLmwgKz0gMjtcblx0dmFyIGNleHRzID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgZXh0Lyo6QU9BKi8gPSBbXTtcblx0d2hpbGUoY2V4dHMtLSA+IDApIGV4dC5wdXNoKHBhcnNlX0V4dFByb3AoYmxvYiwgZW5kLWJsb2IubCkpO1xuXHRyZXR1cm4ge2l4ZmU6aXhmZSwgZXh0OmV4dH07XG59XG5cbi8qIHhmIGlzIGFuIFhGLCBzZWUgcGFyc2VfWEZFeHQgZm9yIHhmZXh0ICovXG5mdW5jdGlvbiB1cGRhdGVfeGZleHQoeGYsIHhmZXh0KSB7XG5cdHhmZXh0LmZvckVhY2goZnVuY3Rpb24oeGZlKSB7XG5cdFx0c3dpdGNoKHhmZVswXSkgeyAvKiAyLjUuMTA4IGV4dFByb3BEYXRhICovXG5cdFx0XHRjYXNlIDB4MDQ6IGJyZWFrOyAvKiBmb3JlZ3JvdW5kIGNvbG9yICovXG5cdFx0XHRjYXNlIDB4MDU6IGJyZWFrOyAvKiBiYWNrZ3JvdW5kIGNvbG9yICovXG5cdFx0XHRjYXNlIDB4MDY6IGJyZWFrOyAvKiBncmFkaWVudCBmaWxsICovXG5cdFx0XHRjYXNlIDB4MDc6IGJyZWFrOyAvKiB0b3AgY2VsbCBib3JkZXIgY29sb3IgKi9cblx0XHRcdGNhc2UgMHgwODogYnJlYWs7IC8qIGJvdHRvbSBjZWxsIGJvcmRlciBjb2xvciAqL1xuXHRcdFx0Y2FzZSAweDA5OiBicmVhazsgLyogbGVmdCBjZWxsIGJvcmRlciBjb2xvciAqL1xuXHRcdFx0Y2FzZSAweDBhOiBicmVhazsgLyogcmlnaHQgY2VsbCBib3JkZXIgY29sb3IgKi9cblx0XHRcdGNhc2UgMHgwYjogYnJlYWs7IC8qIGRpYWdvbmFsIGNlbGwgYm9yZGVyIGNvbG9yICovXG5cdFx0XHRjYXNlIDB4MGQ6IC8qIHRleHQgY29sb3IgKi9cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MGU6IGJyZWFrOyAvKiBmb250IHNjaGVtZSAqL1xuXHRcdFx0Y2FzZSAweDBmOiBicmVhazsgLyogaW5kZW50YXRpb24gbGV2ZWwgKi9cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBwYXJzZV9CcnRNZHRpbmZvKGRhdGEsIGxlbmd0aCkge1xuICByZXR1cm4ge1xuICAgIGZsYWdzOiBkYXRhLnJlYWRfc2hpZnQoNCksXG4gICAgdmVyc2lvbjogZGF0YS5yZWFkX3NoaWZ0KDQpLFxuICAgIG5hbWU6IHBhcnNlX1hMV2lkZVN0cmluZyhkYXRhLCBsZW5ndGggLSA4KVxuICB9O1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0TWR0aW5mbyhkYXRhKSB7XG4gIHZhciBvID0gbmV3X2J1ZigxMiArIDIgKiBkYXRhLm5hbWUubGVuZ3RoKTtcbiAgby53cml0ZV9zaGlmdCg0LCBkYXRhLmZsYWdzKTtcbiAgby53cml0ZV9zaGlmdCg0LCBkYXRhLnZlcnNpb24pO1xuICB3cml0ZV9YTFdpZGVTdHJpbmcoZGF0YS5uYW1lLCBvKTtcbiAgcmV0dXJuIG8uc2xpY2UoMCwgby5sKTtcbn1cbmZ1bmN0aW9uIHBhcnNlX0JydE1kYihkYXRhKSB7XG4gIHZhciBvdXQgPSBbXTtcbiAgdmFyIGNudCA9IGRhdGEucmVhZF9zaGlmdCg0KTtcbiAgd2hpbGUgKGNudC0tID4gMClcbiAgICBvdXQucHVzaChbZGF0YS5yZWFkX3NoaWZ0KDQpLCBkYXRhLnJlYWRfc2hpZnQoNCldKTtcbiAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydE1kYihtZGIpIHtcbiAgdmFyIG8gPSBuZXdfYnVmKDQgKyA4ICogbWRiLmxlbmd0aCk7XG4gIG8ud3JpdGVfc2hpZnQoNCwgbWRiLmxlbmd0aCk7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbWRiLmxlbmd0aDsgKytpKSB7XG4gICAgby53cml0ZV9zaGlmdCg0LCBtZGJbaV1bMF0pO1xuICAgIG8ud3JpdGVfc2hpZnQoNCwgbWRiW2ldWzFdKTtcbiAgfVxuICByZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydEJlZ2luRXNmbWQoY250LCBuYW1lKSB7XG4gIHZhciBvID0gbmV3X2J1Zig4ICsgMiAqIG5hbWUubGVuZ3RoKTtcbiAgby53cml0ZV9zaGlmdCg0LCBjbnQpO1xuICB3cml0ZV9YTFdpZGVTdHJpbmcobmFtZSwgbyk7XG4gIHJldHVybiBvLnNsaWNlKDAsIG8ubCk7XG59XG5mdW5jdGlvbiBwYXJzZV9CcnRCZWdpbkVzbWRiKGRhdGEpIHtcbiAgZGF0YS5sICs9IDQ7XG4gIHJldHVybiBkYXRhLnJlYWRfc2hpZnQoNCkgIT0gMDtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydEJlZ2luRXNtZGIoY250LCBjbSkge1xuICB2YXIgbyA9IG5ld19idWYoOCk7XG4gIG8ud3JpdGVfc2hpZnQoNCwgY250KTtcbiAgby53cml0ZV9zaGlmdCg0LCBjbSA/IDEgOiAwKTtcbiAgcmV0dXJuIG87XG59XG5mdW5jdGlvbiBwYXJzZV94bG1ldGFfYmluKGRhdGEsIG5hbWUsIF9vcHRzKSB7XG4gIHZhciBvdXQgPSB7IFR5cGVzOiBbXSwgQ2VsbDogW10sIFZhbHVlOiBbXSB9O1xuICB2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuICB2YXIgc3RhdGUgPSBbXTtcbiAgdmFyIHBhc3MgPSBmYWxzZTtcbiAgdmFyIG1ldGF0eXBlID0gMjtcbiAgcmVjb3JkaG9wcGVyKGRhdGEsIGZ1bmN0aW9uKHZhbCwgUiwgUlQpIHtcbiAgICBzd2l0Y2ggKFJUKSB7XG4gICAgICBjYXNlIDMzNTpcbiAgICAgICAgb3V0LlR5cGVzLnB1c2goeyBuYW1lOiB2YWwubmFtZSB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDUxOlxuICAgICAgICB2YWwuZm9yRWFjaChmdW5jdGlvbihyKSB7XG4gICAgICAgICAgaWYgKG1ldGF0eXBlID09IDEpXG4gICAgICAgICAgICBvdXQuQ2VsbC5wdXNoKHsgdHlwZTogb3V0LlR5cGVzW3JbMF0gLSAxXS5uYW1lLCBpbmRleDogclsxXSB9KTtcbiAgICAgICAgICBlbHNlIGlmIChtZXRhdHlwZSA9PSAwKVxuICAgICAgICAgICAgb3V0LlZhbHVlLnB1c2goeyB0eXBlOiBvdXQuVHlwZXNbclswXSAtIDFdLm5hbWUsIGluZGV4OiByWzFdIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDMzNzpcbiAgICAgICAgbWV0YXR5cGUgPSB2YWwgPyAxIDogMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDMzODpcbiAgICAgICAgbWV0YXR5cGUgPSAyO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgMzU6XG4gICAgICAgIHN0YXRlLnB1c2goUlQpO1xuICAgICAgICBwYXNzID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDM2OlxuICAgICAgICBzdGF0ZS5wb3AoKTtcbiAgICAgICAgcGFzcyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIGlmIChSLlQpIHtcbiAgICAgICAgfSBlbHNlIGlmICghcGFzcyB8fCBvcHRzLldURiAmJiBzdGF0ZVtzdGF0ZS5sZW5ndGggLSAxXSAhPSAzNSlcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHJlY29yZCAweFwiICsgUlQudG9TdHJpbmcoMTYpKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gd3JpdGVfeGxtZXRhX2JpbigpIHtcbiAgdmFyIGJhID0gYnVmX2FycmF5KCk7XG4gIHdyaXRlX3JlY29yZChiYSwgMzMyKTtcbiAgd3JpdGVfcmVjb3JkKGJhLCAzMzQsIHdyaXRlX1VJbnQzMkxFKDEpKTtcbiAgd3JpdGVfcmVjb3JkKGJhLCAzMzUsIHdyaXRlX0JydE1kdGluZm8oe1xuICAgIG5hbWU6IFwiWExEQVBSXCIsXG4gICAgdmVyc2lvbjogMTJlNCxcbiAgICBmbGFnczogMzQ5NjY1NzA3MlxuICB9KSk7XG4gIHdyaXRlX3JlY29yZChiYSwgMzM2KTtcbiAgd3JpdGVfcmVjb3JkKGJhLCAzMzksIHdyaXRlX0JydEJlZ2luRXNmbWQoMSwgXCJYTERBUFJcIikpO1xuICB3cml0ZV9yZWNvcmQoYmEsIDUyKTtcbiAgd3JpdGVfcmVjb3JkKGJhLCAzNSwgd3JpdGVfVUludDMyTEUoNTE0KSk7XG4gIHdyaXRlX3JlY29yZChiYSwgNDA5Niwgd3JpdGVfVUludDMyTEUoMCkpO1xuICB3cml0ZV9yZWNvcmQoYmEsIDQwOTcsIHdyaXRldWludDE2KDEpKTtcbiAgd3JpdGVfcmVjb3JkKGJhLCAzNik7XG4gIHdyaXRlX3JlY29yZChiYSwgNTMpO1xuICB3cml0ZV9yZWNvcmQoYmEsIDM0MCk7XG4gIHdyaXRlX3JlY29yZChiYSwgMzM3LCB3cml0ZV9CcnRCZWdpbkVzbWRiKDEsIHRydWUpKTtcbiAgd3JpdGVfcmVjb3JkKGJhLCA1MSwgd3JpdGVfQnJ0TWRiKFtbMSwgMF1dKSk7XG4gIHdyaXRlX3JlY29yZChiYSwgMzM4KTtcbiAgd3JpdGVfcmVjb3JkKGJhLCAzMzMpO1xuICByZXR1cm4gYmEuZW5kKCk7XG59XG5mdW5jdGlvbiBwYXJzZV94bG1ldGFfeG1sKGRhdGEsIG5hbWUsIG9wdHMpIHtcbiAgdmFyIG91dCA9IHsgVHlwZXM6IFtdLCBDZWxsOiBbXSwgVmFsdWU6IFtdIH07XG4gIGlmICghZGF0YSlcbiAgICByZXR1cm4gb3V0O1xuICB2YXIgcGFzcyA9IGZhbHNlO1xuICB2YXIgbWV0YXR5cGUgPSAyO1xuICB2YXIgbGFzdG1ldGE7XG4gIGRhdGEucmVwbGFjZSh0YWdyZWdleCwgZnVuY3Rpb24oeCkge1xuICAgIHZhciB5ID0gcGFyc2V4bWx0YWcoeCk7XG4gICAgc3dpdGNoIChzdHJpcF9ucyh5WzBdKSkge1xuICAgICAgY2FzZSBcIjw/eG1sXCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjxtZXRhZGF0YVwiOlxuICAgICAgY2FzZSBcIjwvbWV0YWRhdGE+XCI6XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjxtZXRhZGF0YVR5cGVzXCI6XG4gICAgICBjYXNlIFwiPC9tZXRhZGF0YVR5cGVzPlwiOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8bWV0YWRhdGFUeXBlXCI6XG4gICAgICAgIG91dC5UeXBlcy5wdXNoKHsgbmFtZTogeS5uYW1lIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8L21ldGFkYXRhVHlwZT5cIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPGZ1dHVyZU1ldGFkYXRhXCI6XG4gICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgb3V0LlR5cGVzLmxlbmd0aDsgKytqKVxuICAgICAgICAgIGlmIChvdXQuVHlwZXNbal0ubmFtZSA9PSB5Lm5hbWUpXG4gICAgICAgICAgICBsYXN0bWV0YSA9IG91dC5UeXBlc1tqXTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPC9mdXR1cmVNZXRhZGF0YT5cIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPGJrPlwiOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8L2JrPlwiOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8cmNcIjpcbiAgICAgICAgaWYgKG1ldGF0eXBlID09IDEpXG4gICAgICAgICAgb3V0LkNlbGwucHVzaCh7IHR5cGU6IG91dC5UeXBlc1t5LnQgLSAxXS5uYW1lLCBpbmRleDogK3kudiB9KTtcbiAgICAgICAgZWxzZSBpZiAobWV0YXR5cGUgPT0gMClcbiAgICAgICAgICBvdXQuVmFsdWUucHVzaCh7IHR5cGU6IG91dC5UeXBlc1t5LnQgLSAxXS5uYW1lLCBpbmRleDogK3kudiB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPC9yYz5cIjpcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPGNlbGxNZXRhZGF0YVwiOlxuICAgICAgICBtZXRhdHlwZSA9IDE7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjwvY2VsbE1ldGFkYXRhPlwiOlxuICAgICAgICBtZXRhdHlwZSA9IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjx2YWx1ZU1ldGFkYXRhXCI6XG4gICAgICAgIG1ldGF0eXBlID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiPC92YWx1ZU1ldGFkYXRhPlwiOlxuICAgICAgICBtZXRhdHlwZSA9IDI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIjxleHRMc3RcIjpcbiAgICAgIGNhc2UgXCI8ZXh0THN0PlwiOlxuICAgICAgY2FzZSBcIjwvZXh0THN0PlwiOlxuICAgICAgY2FzZSBcIjxleHRMc3QvPlwiOlxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8ZXh0XCI6XG4gICAgICAgIHBhc3MgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8L2V4dD5cIjpcbiAgICAgICAgcGFzcyA9IGZhbHNlO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgXCI8cnZiXCI6XG4gICAgICAgIGlmICghbGFzdG1ldGEpXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGlmICghbGFzdG1ldGEub2Zmc2V0cylcbiAgICAgICAgICBsYXN0bWV0YS5vZmZzZXRzID0gW107XG4gICAgICAgIGxhc3RtZXRhLm9mZnNldHMucHVzaCgreS5pKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoIXBhc3MgJiYgb3B0cy5XVEYpXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5yZWNvZ25pemVkIFwiICsgeVswXSArIFwiIGluIG1ldGFkYXRhXCIpO1xuICAgIH1cbiAgICByZXR1cm4geDtcbiAgfSk7XG4gIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiB3cml0ZV94bG1ldGFfeG1sKCkge1xuICB2YXIgbyA9IFtYTUxfSEVBREVSXTtcbiAgby5wdXNoKCc8bWV0YWRhdGEgeG1sbnM9XCJodHRwOi8vc2NoZW1hcy5vcGVueG1sZm9ybWF0cy5vcmcvc3ByZWFkc2hlZXRtbC8yMDA2L21haW5cIiB4bWxuczp4bHJkPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDE3L3JpY2hkYXRhXCIgeG1sbnM6eGRhPVwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS9vZmZpY2Uvc3ByZWFkc2hlZXRtbC8yMDE3L2R5bmFtaWNhcnJheVwiPlxcbiAgPG1ldGFkYXRhVHlwZXMgY291bnQ9XCIxXCI+XFxuICAgIDxtZXRhZGF0YVR5cGUgbmFtZT1cIlhMREFQUlwiIG1pblN1cHBvcnRlZFZlcnNpb249XCIxMjAwMDBcIiBjb3B5PVwiMVwiIHBhc3RlQWxsPVwiMVwiIHBhc3RlVmFsdWVzPVwiMVwiIG1lcmdlPVwiMVwiIHNwbGl0Rmlyc3Q9XCIxXCIgcm93Q29sU2hpZnQ9XCIxXCIgY2xlYXJGb3JtYXRzPVwiMVwiIGNsZWFyQ29tbWVudHM9XCIxXCIgYXNzaWduPVwiMVwiIGNvZXJjZT1cIjFcIiBjZWxsTWV0YT1cIjFcIi8+XFxuICA8L21ldGFkYXRhVHlwZXM+XFxuICA8ZnV0dXJlTWV0YWRhdGEgbmFtZT1cIlhMREFQUlwiIGNvdW50PVwiMVwiPlxcbiAgICA8Yms+XFxuICAgICAgPGV4dExzdD5cXG4gICAgICAgIDxleHQgdXJpPVwie2JkYmI4Y2RjLWZhMWUtNDk2ZS1hODU3LTNjM2YzMGMwMjljM31cIj5cXG4gICAgICAgICAgPHhkYTpkeW5hbWljQXJyYXlQcm9wZXJ0aWVzIGZEeW5hbWljPVwiMVwiIGZDb2xsYXBzZWQ9XCIwXCIvPlxcbiAgICAgICAgPC9leHQ+XFxuICAgICAgPC9leHRMc3Q+XFxuICAgIDwvYms+XFxuICA8L2Z1dHVyZU1ldGFkYXRhPlxcbiAgPGNlbGxNZXRhZGF0YSBjb3VudD1cIjFcIj5cXG4gICAgPGJrPlxcbiAgICAgIDxyYyB0PVwiMVwiIHY9XCIwXCIvPlxcbiAgICA8L2JrPlxcbiAgPC9jZWxsTWV0YWRhdGE+XFxuPC9tZXRhZGF0YT4nKTtcbiAgcmV0dXJuIG8uam9pbihcIlwiKTtcbn1cbi8qIDE4LjYgQ2FsY3VsYXRpb24gQ2hhaW4gKi9cbmZ1bmN0aW9uIHBhcnNlX2NjX3htbChkYXRhLyo6OiwgbmFtZSwgb3B0cyovKS8qOkFycmF5PGFueT4qLyB7XG5cdHZhciBkID0gW107XG5cdGlmKCFkYXRhKSByZXR1cm4gZDtcblx0dmFyIGkgPSAxO1xuXHQoZGF0YS5tYXRjaCh0YWdyZWdleCl8fFtdKS5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcblx0XHR2YXIgeSA9IHBhcnNleG1sdGFnKHgpO1xuXHRcdHN3aXRjaCh5WzBdKSB7XG5cdFx0XHRjYXNlICc8P3htbCc6IGJyZWFrO1xuXHRcdFx0LyogMTguNi4yICBjYWxjQ2hhaW4gQ1RfQ2FsY0NoYWluIDEgKi9cblx0XHRcdGNhc2UgJzxjYWxjQ2hhaW4nOiBjYXNlICc8Y2FsY0NoYWluPic6IGNhc2UgJzwvY2FsY0NoYWluPic6IGJyZWFrO1xuXHRcdFx0LyogMTguNi4xICBjIENUX0NhbGNDZWxsIDEgKi9cblx0XHRcdGNhc2UgJzxjJzogZGVsZXRlIHlbMF07IGlmKHkuaSkgaSA9IHkuaTsgZWxzZSB5LmkgPSBpOyBkLnB1c2goeSk7IGJyZWFrO1xuXHRcdH1cblx0fSk7XG5cdHJldHVybiBkO1xufVxuXG4vL2Z1bmN0aW9uIHdyaXRlX2NjX3htbChkYXRhLCBvcHRzKSB7IH1cblxuLyogW01TLVhMU0JdIDIuNi40LjEgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydENhbGNDaGFpbkl0ZW0kKGRhdGEpIHtcblx0dmFyIG91dCA9IHt9O1xuXHRvdXQuaSA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0dmFyIGNlbGwgPSB7fTtcblx0Y2VsbC5yID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHRjZWxsLmMgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdG91dC5yID0gZW5jb2RlX2NlbGwoY2VsbCk7XG5cdHZhciBmbGFncyA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0aWYoZmxhZ3MgJiAweDIpIG91dC5sID0gJzEnO1xuXHRpZihmbGFncyAmIDB4OCkgb3V0LmEgPSAnMSc7XG5cdHJldHVybiBvdXQ7XG59XG5cbi8qIDE4LjYgQ2FsY3VsYXRpb24gQ2hhaW4gKi9cbmZ1bmN0aW9uIHBhcnNlX2NjX2JpbihkYXRhLCBuYW1lLCBvcHRzKSB7XG5cdHZhciBvdXQgPSBbXTtcblx0dmFyIHBhc3MgPSBmYWxzZTtcblx0cmVjb3JkaG9wcGVyKGRhdGEsIGZ1bmN0aW9uIGhvcHBlcl9jYyh2YWwsIFIsIFJUKSB7XG5cdFx0c3dpdGNoKFJUKSB7XG5cdFx0XHRjYXNlIDB4MDAzRjogLyogJ0JydENhbGNDaGFpbkl0ZW0kJyAqL1xuXHRcdFx0XHRvdXQucHVzaCh2YWwpOyBicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYoUi5UKXsvKiBlbXB0eSAqL31cblx0XHRcdFx0ZWxzZSBpZighcGFzcyB8fCBvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZWNvcmQgMHhcIiArIFJULnRvU3RyaW5nKDE2KSk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG91dDtcbn1cblxuLy9mdW5jdGlvbiB3cml0ZV9jY19iaW4oZGF0YSwgb3B0cykgeyB9XG4vKiAxOC4xNCBTdXBwbGVtZW50YXJ5IFdvcmtib29rIERhdGEgKi9cbmZ1bmN0aW9uIHBhcnNlX3hsaW5rX3htbCgvKjo6ZGF0YSwgcmVsLCBuYW1lOnN0cmluZywgX29wdHMqLykge1xuXHQvL3ZhciBvcHRzID0gX29wdHMgfHwge307XG5cdC8vaWYob3B0cy5XVEYpIHRocm93IFwiWExTWCBFeHRlcm5hbCBMaW5rXCI7XG59XG5cbi8qIFtNUy1YTFNCXSAyLjEuNy4yNSBFeHRlcm5hbCBMaW5rICovXG5mdW5jdGlvbiBwYXJzZV94bGlua19iaW4oZGF0YSwgcmVsLCBuYW1lLyo6c3RyaW5nKi8sIF9vcHRzKSB7XG5cdGlmKCFkYXRhKSByZXR1cm4gZGF0YTtcblx0dmFyIG9wdHMgPSBfb3B0cyB8fCB7fTtcblxuXHR2YXIgcGFzcyA9IGZhbHNlLCBlbmQgPSBmYWxzZTtcblxuXHRyZWNvcmRob3BwZXIoZGF0YSwgZnVuY3Rpb24geGxpbmtfcGFyc2UodmFsLCBSLCBSVCkge1xuXHRcdGlmKGVuZCkgcmV0dXJuO1xuXHRcdHN3aXRjaChSVCkge1xuXHRcdFx0Y2FzZSAweDAxNjc6IC8qICdCcnRTdXBUYWJzJyAqL1xuXHRcdFx0Y2FzZSAweDAxNkI6IC8qICdCcnRFeHRlcm5UYWJsZVN0YXJ0JyAqL1xuXHRcdFx0Y2FzZSAweDAxNkM6IC8qICdCcnRFeHRlcm5UYWJsZUVuZCcgKi9cblx0XHRcdGNhc2UgMHgwMTZFOiAvKiAnQnJ0RXh0ZXJuUm93SGRyJyAqL1xuXHRcdFx0Y2FzZSAweDAxNkY6IC8qICdCcnRFeHRlcm5DZWxsQmxhbmsnICovXG5cdFx0XHRjYXNlIDB4MDE3MDogLyogJ0JydEV4dGVybkNlbGxSZWFsJyAqL1xuXHRcdFx0Y2FzZSAweDAxNzE6IC8qICdCcnRFeHRlcm5DZWxsQm9vbCcgKi9cblx0XHRcdGNhc2UgMHgwMTcyOiAvKiAnQnJ0RXh0ZXJuQ2VsbEVycm9yJyAqL1xuXHRcdFx0Y2FzZSAweDAxNzM6IC8qICdCcnRFeHRlcm5DZWxsU3RyaW5nJyAqL1xuXHRcdFx0Y2FzZSAweDAxRDg6IC8qICdCcnRFeHRlcm5WYWx1ZU1ldGEnICovXG5cdFx0XHRjYXNlIDB4MDI0MTogLyogJ0JydFN1cE5hbWVTdGFydCcgKi9cblx0XHRcdGNhc2UgMHgwMjQyOiAvKiAnQnJ0U3VwTmFtZVZhbHVlU3RhcnQnICovXG5cdFx0XHRjYXNlIDB4MDI0MzogLyogJ0JydFN1cE5hbWVWYWx1ZUVuZCcgKi9cblx0XHRcdGNhc2UgMHgwMjQ0OiAvKiAnQnJ0U3VwTmFtZU51bScgKi9cblx0XHRcdGNhc2UgMHgwMjQ1OiAvKiAnQnJ0U3VwTmFtZUVycicgKi9cblx0XHRcdGNhc2UgMHgwMjQ2OiAvKiAnQnJ0U3VwTmFtZVN0JyAqL1xuXHRcdFx0Y2FzZSAweDAyNDc6IC8qICdCcnRTdXBOYW1lTmlsJyAqL1xuXHRcdFx0Y2FzZSAweDAyNDg6IC8qICdCcnRTdXBOYW1lQm9vbCcgKi9cblx0XHRcdGNhc2UgMHgwMjQ5OiAvKiAnQnJ0U3VwTmFtZUZtbGEnICovXG5cdFx0XHRjYXNlIDB4MDI0QTogLyogJ0JydFN1cE5hbWVCaXRzJyAqL1xuXHRcdFx0Y2FzZSAweDAyNEI6IC8qICdCcnRTdXBOYW1lRW5kJyAqL1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwMjM6IC8qICdCcnRGUlRCZWdpbicgKi9cblx0XHRcdFx0cGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjQ6IC8qICdCcnRGUlRFbmQnICovXG5cdFx0XHRcdHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmKFIuVCl7LyogZW1wdHkgKi99XG5cdFx0XHRcdGVsc2UgaWYoIXBhc3MgfHwgb3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgcmVjb3JkIDB4XCIgKyBSVC50b1N0cmluZygxNikpO1xuXHRcdH1cblx0fSwgb3B0cyk7XG59XG4vKiAyMC41IERyYXdpbmdNTCAtIFNwcmVhZHNoZWV0TUwgRHJhd2luZyAqL1xuLyogMjAuNS4yLjM1IHdzRHIgQ1RfRHJhd2luZyAqL1xuZnVuY3Rpb24gcGFyc2VfZHJhd2luZyhkYXRhLCByZWxzLyo6YW55Ki8pIHtcblx0aWYoIWRhdGEpIHJldHVybiBcIj8/XCI7XG5cdC8qXG5cdCAgQ2hhcnRzaGVldCBEcmF3aW5nOlxuXHQgICAtIDIwLjUuMi4zNSB3c0RyIENUX0RyYXdpbmdcblx0ICAgIC0gMjAuNS4yLjEgIGFic29sdXRlQW5jaG9yIENUX0Fic29sdXRlQW5jaG9yXG5cdCAgICAgLSAyMC41LjIuMTYgZ3JhcGhpY0ZyYW1lIENUX0dyYXBoaWNhbE9iamVjdEZyYW1lXG5cdCAgICAgIC0gMjAuMS4yLjIuMTYgZ3JhcGhpYyBDVF9HcmFwaGljYWxPYmplY3Rcblx0ICAgICAgIC0gMjAuMS4yLjIuMTcgZ3JhcGhpY0RhdGEgQ1RfR3JhcGhpY2FsT2JqZWN0RGF0YVxuICAgICAgICAgIC0gY2hhcnQgcmVmZXJlbmNlXG5cdCAgIHRoZSBhY3R1YWwgdHlwZSBpcyBiYXNlZCBvbiB0aGUgVVJJIG9mIHRoZSBncmFwaGljRGF0YVxuXHRcdFRPRE86IGhhbmRsZSBlbWJlZGRlZCBjaGFydHMgYW5kIG90aGVyIHR5cGVzIG9mIGdyYXBoaWNzXG5cdCovXG5cdHZhciBpZCA9IChkYXRhLm1hdGNoKC88YzpjaGFydCBbXj5dKnI6aWQ9XCIoW15cIl0qKVwiLyl8fFtcIlwiLFwiXCJdKVsxXTtcblxuXHRyZXR1cm4gcmVsc1snIWlkJ11baWRdLlRhcmdldDtcbn1cblxuLyogTC41LjUuMiBTcHJlYWRzaGVldE1MIENvbW1lbnRzICsgVk1MIFNjaGVtYSAqL1xudmFyIF9zaGFwZWlkID0gMTAyNDtcbmZ1bmN0aW9uIHdyaXRlX2NvbW1lbnRzX3ZtbChySWQvKjpudW1iZXIqLywgY29tbWVudHMpIHtcblx0dmFyIGNzaXplID0gWzIxNjAwLCAyMTYwMF07XG5cdC8qIEwuNS4yLjEuMiBQYXRoIEF0dHJpYnV0ZSAqL1xuXHR2YXIgYmJveCA9IFtcIm0wLDBsMFwiLGNzaXplWzFdLGNzaXplWzBdLGNzaXplWzFdLGNzaXplWzBdLFwiMHhlXCJdLmpvaW4oXCIsXCIpO1xuXHR2YXIgbyA9IFtcblx0XHR3cml0ZXh0YWcoXCJ4bWxcIiwgbnVsbCwgeyAneG1sbnM6dic6IFhMTUxOUy52LCAneG1sbnM6byc6IFhMTUxOUy5vLCAneG1sbnM6eCc6IFhMTUxOUy54LCAneG1sbnM6bXYnOiBYTE1MTlMubXYgfSkucmVwbGFjZSgvXFwvPi8sXCI+XCIpLFxuXHRcdHdyaXRleHRhZyhcIm86c2hhcGVsYXlvdXRcIiwgd3JpdGV4dGFnKFwibzppZG1hcFwiLCBudWxsLCB7J3Y6ZXh0JzpcImVkaXRcIiwgJ2RhdGEnOnJJZH0pLCB7J3Y6ZXh0JzpcImVkaXRcIn0pLFxuXHRcdHdyaXRleHRhZyhcInY6c2hhcGV0eXBlXCIsIFtcblx0XHRcdHdyaXRleHRhZyhcInY6c3Ryb2tlXCIsIG51bGwsIHtqb2luc3R5bGU6XCJtaXRlclwifSksXG5cdFx0XHR3cml0ZXh0YWcoXCJ2OnBhdGhcIiwgbnVsbCwge2dyYWRpZW50c2hhcGVvazpcInRcIiwgJ286Y29ubmVjdHR5cGUnOlwicmVjdFwifSlcblx0XHRdLmpvaW4oXCJcIiksIHtpZDpcIl94MDAwMF90MjAyXCIsICdvOnNwdCc6MjAyLCBjb29yZHNpemU6Y3NpemUuam9pbihcIixcIikscGF0aDpiYm94fSlcblx0XTtcblx0d2hpbGUoX3NoYXBlaWQgPCBySWQgKiAxMDAwKSBfc2hhcGVpZCArPSAxMDAwO1xuXG5cdGNvbW1lbnRzLmZvckVhY2goZnVuY3Rpb24oeCkge1xuXHR2YXIgYyA9IGRlY29kZV9jZWxsKHhbMF0pO1xuXHR2YXIgZmlsbG9wdHMgPSAvKjo6KCoveydjb2xvcjInOlwiI0JFRkY4MlwiLCAndHlwZSc6XCJncmFkaWVudFwifS8qOjogOmFueSkqLztcblx0aWYoZmlsbG9wdHMudHlwZSA9PSBcImdyYWRpZW50XCIpIGZpbGxvcHRzLmFuZ2xlID0gXCItMTgwXCI7XG5cdHZhciBmaWxscGFybSA9IGZpbGxvcHRzLnR5cGUgPT0gXCJncmFkaWVudFwiID8gd3JpdGV4dGFnKFwibzpmaWxsXCIsIG51bGwsIHt0eXBlOlwiZ3JhZGllbnRVbnNjYWxlZFwiLCAndjpleHQnOlwidmlld1wifSkgOiBudWxsO1xuXHR2YXIgZmlsbHhtbCA9IHdyaXRleHRhZygndjpmaWxsJywgZmlsbHBhcm0sIGZpbGxvcHRzKTtcblxuXHR2YXIgc2hhZGF0YSA9ICh7b246XCJ0XCIsICdvYnNjdXJlZCc6XCJ0XCJ9Lyo6YW55Ki8pO1xuXHQrK19zaGFwZWlkO1xuXG5cdG8gPSBvLmNvbmNhdChbXG5cdCc8djpzaGFwZScgKyB3eHRfaGVscGVyKHtcblx0XHRpZDonX3gwMDAwX3MnICsgX3NoYXBlaWQsXG5cdFx0dHlwZTpcIiNfeDAwMDBfdDIwMlwiLFxuXHRcdHN0eWxlOlwicG9zaXRpb246YWJzb2x1dGU7IG1hcmdpbi1sZWZ0OjgwcHQ7bWFyZ2luLXRvcDo1cHQ7d2lkdGg6MTA0cHQ7aGVpZ2h0OjY0cHQ7ei1pbmRleDoxMFwiICsgKHhbMV0uaGlkZGVuID8gXCI7dmlzaWJpbGl0eTpoaWRkZW5cIiA6IFwiXCIpICxcblx0XHRmaWxsY29sb3I6XCIjRUNGQUQ0XCIsXG5cdFx0c3Ryb2tlY29sb3I6XCIjZWRlYWExXCJcblx0fSkgKyAnPicsXG5cdFx0ZmlsbHhtbCxcblx0XHR3cml0ZXh0YWcoXCJ2OnNoYWRvd1wiLCBudWxsLCBzaGFkYXRhKSxcblx0XHR3cml0ZXh0YWcoXCJ2OnBhdGhcIiwgbnVsbCwgeydvOmNvbm5lY3R0eXBlJzpcIm5vbmVcIn0pLFxuXHRcdCc8djp0ZXh0Ym94PjxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOmxlZnRcIj48L2Rpdj48L3Y6dGV4dGJveD4nLFxuXHRcdCc8eDpDbGllbnREYXRhIE9iamVjdFR5cGU9XCJOb3RlXCI+Jyxcblx0XHRcdCc8eDpNb3ZlV2l0aENlbGxzLz4nLFxuXHRcdFx0Jzx4OlNpemVXaXRoQ2VsbHMvPicsXG5cdFx0XHQvKiBQYXJ0IDQgMTkuNC4yLjMgQW5jaG9yIChBbmNob3IpICovXG5cdFx0XHR3cml0ZXRhZygneDpBbmNob3InLCBbYy5jKzEsIDAsIGMucisxLCAwLCBjLmMrMywgMjAsIGMucis1LCAyMF0uam9pbihcIixcIikpLFxuXHRcdFx0d3JpdGV0YWcoJ3g6QXV0b0ZpbGwnLCBcIkZhbHNlXCIpLFxuXHRcdFx0d3JpdGV0YWcoJ3g6Um93JywgU3RyaW5nKGMucikpLFxuXHRcdFx0d3JpdGV0YWcoJ3g6Q29sdW1uJywgU3RyaW5nKGMuYykpLFxuXHRcdFx0eFsxXS5oaWRkZW4gPyAnJyA6ICc8eDpWaXNpYmxlLz4nLFxuXHRcdCc8L3g6Q2xpZW50RGF0YT4nLFxuXHQnPC92OnNoYXBlPidcblx0XSk7IH0pO1xuXHRvLnB1c2goJzwveG1sPicpO1xuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuZnVuY3Rpb24gc2hlZXRfaW5zZXJ0X2NvbW1lbnRzKHNoZWV0LCBjb21tZW50cy8qOkFycmF5PFJhd0NvbW1lbnQ+Ki8sIHRocmVhZGVkLyo6Ym9vbGVhbiovLCBwZW9wbGUvKjo/QXJyYXk8YW55PiovKSB7XG5cdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkoc2hlZXQpO1xuXHR2YXIgY2VsbC8qOkNlbGwqLztcblx0Y29tbWVudHMuZm9yRWFjaChmdW5jdGlvbihjb21tZW50KSB7XG5cdFx0dmFyIHIgPSBkZWNvZGVfY2VsbChjb21tZW50LnJlZik7XG5cdFx0aWYoZGVuc2UpIHtcblx0XHRcdGlmKCFzaGVldFtyLnJdKSBzaGVldFtyLnJdID0gW107XG5cdFx0XHRjZWxsID0gc2hlZXRbci5yXVtyLmNdO1xuXHRcdH0gZWxzZSBjZWxsID0gc2hlZXRbY29tbWVudC5yZWZdO1xuXHRcdGlmICghY2VsbCkge1xuXHRcdFx0Y2VsbCA9ICh7dDpcInpcIn0vKjphbnkqLyk7XG5cdFx0XHRpZihkZW5zZSkgc2hlZXRbci5yXVtyLmNdID0gY2VsbDtcblx0XHRcdGVsc2Ugc2hlZXRbY29tbWVudC5yZWZdID0gY2VsbDtcblx0XHRcdHZhciByYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHNoZWV0W1wiIXJlZlwiXXx8XCJCRFdHTzEwMDAwMDE6QTFcIik7XG5cdFx0XHRpZihyYW5nZS5zLnIgPiByLnIpIHJhbmdlLnMuciA9IHIucjtcblx0XHRcdGlmKHJhbmdlLmUuciA8IHIucikgcmFuZ2UuZS5yID0gci5yO1xuXHRcdFx0aWYocmFuZ2Uucy5jID4gci5jKSByYW5nZS5zLmMgPSByLmM7XG5cdFx0XHRpZihyYW5nZS5lLmMgPCByLmMpIHJhbmdlLmUuYyA9IHIuYztcblx0XHRcdHZhciBlbmNvZGVkID0gZW5jb2RlX3JhbmdlKHJhbmdlKTtcblx0XHRcdGlmIChlbmNvZGVkICE9PSBzaGVldFtcIiFyZWZcIl0pIHNoZWV0W1wiIXJlZlwiXSA9IGVuY29kZWQ7XG5cdFx0fVxuXG5cdFx0aWYgKCFjZWxsLmMpIGNlbGwuYyA9IFtdO1xuXHRcdHZhciBvLyo6Q29tbWVudCovID0gKHthOiBjb21tZW50LmF1dGhvciwgdDogY29tbWVudC50LCByOiBjb21tZW50LnIsIFQ6IHRocmVhZGVkfSk7XG5cdFx0aWYoY29tbWVudC5oKSBvLmggPSBjb21tZW50Lmg7XG5cblx0XHQvKiB0aHJlYWRlZCBjb21tZW50cyBhbHdheXMgb3ZlcnJpZGUgKi9cblx0XHRmb3IodmFyIGkgPSBjZWxsLmMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcblx0XHRcdGlmKCF0aHJlYWRlZCAmJiBjZWxsLmNbaV0uVCkgcmV0dXJuO1xuXHRcdFx0aWYodGhyZWFkZWQgJiYgIWNlbGwuY1tpXS5UKSBjZWxsLmMuc3BsaWNlKGksIDEpO1xuXHRcdH1cblx0XHRpZih0aHJlYWRlZCAmJiBwZW9wbGUpIGZvcihpID0gMDsgaSA8IHBlb3BsZS5sZW5ndGg7ICsraSkge1xuXHRcdFx0aWYoby5hID09IHBlb3BsZVtpXS5pZCkgeyBvLmEgPSBwZW9wbGVbaV0ubmFtZSB8fCBvLmE7IGJyZWFrOyB9XG5cdFx0fVxuXHRcdGNlbGwuYy5wdXNoKG8pO1xuXHR9KTtcbn1cblxuLyogMTguNyBDb21tZW50cyAqL1xuZnVuY3Rpb24gcGFyc2VfY29tbWVudHNfeG1sKGRhdGEvKjpzdHJpbmcqLywgb3B0cykvKjpBcnJheTxSYXdDb21tZW50PiovIHtcblx0LyogMTguNy42IENUX0NvbW1lbnRzICovXG5cdGlmKGRhdGEubWF0Y2goLzwoPzpcXHcrOik/Y29tbWVudHMgKlxcLz4vKSkgcmV0dXJuIFtdO1xuXHR2YXIgYXV0aG9ycy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgY29tbWVudExpc3QvKjpBcnJheTxSYXdDb21tZW50PiovID0gW107XG5cdHZhciBhdXRodGFnID0gZGF0YS5tYXRjaCgvPCg/Olxcdys6KT9hdXRob3JzPihbXFxzXFxTXSopPFxcLyg/Olxcdys6KT9hdXRob3JzPi8pO1xuXHRpZihhdXRodGFnICYmIGF1dGh0YWdbMV0pIGF1dGh0YWdbMV0uc3BsaXQoLzxcXC9cXHcqOj9hdXRob3I+LykuZm9yRWFjaChmdW5jdGlvbih4KSB7XG5cdFx0aWYoeCA9PT0gXCJcIiB8fCB4LnRyaW0oKSA9PT0gXCJcIikgcmV0dXJuO1xuXHRcdHZhciBhID0geC5tYXRjaCgvPCg/Olxcdys6KT9hdXRob3JbXj5dKj4oLiopLyk7XG5cdFx0aWYoYSkgYXV0aG9ycy5wdXNoKGFbMV0pO1xuXHR9KTtcblx0dmFyIGNtbnR0YWcgPSBkYXRhLm1hdGNoKC88KD86XFx3KzopP2NvbW1lbnRMaXN0PihbXFxzXFxTXSopPFxcLyg/Olxcdys6KT9jb21tZW50TGlzdD4vKTtcblx0aWYoY21udHRhZyAmJiBjbW50dGFnWzFdKSBjbW50dGFnWzFdLnNwbGl0KC88XFwvXFx3Kjo/Y29tbWVudD4vKS5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcblx0XHRpZih4ID09PSBcIlwiIHx8IHgudHJpbSgpID09PSBcIlwiKSByZXR1cm47XG5cdFx0dmFyIGNtID0geC5tYXRjaCgvPCg/Olxcdys6KT9jb21tZW50W14+XSo+Lyk7XG5cdFx0aWYoIWNtKSByZXR1cm47XG5cdFx0dmFyIHkgPSBwYXJzZXhtbHRhZyhjbVswXSk7XG5cdFx0dmFyIGNvbW1lbnQvKjpSYXdDb21tZW50Ki8gPSAoeyBhdXRob3I6IHkuYXV0aG9ySWQgJiYgYXV0aG9yc1t5LmF1dGhvcklkXSB8fCBcInNoZWV0anNnaG9zdFwiLCByZWY6IHkucmVmLCBndWlkOiB5Lmd1aWQgfS8qOmFueSovKTtcblx0XHR2YXIgY2VsbCA9IGRlY29kZV9jZWxsKHkucmVmKTtcblx0XHRpZihvcHRzLnNoZWV0Um93cyAmJiBvcHRzLnNoZWV0Um93cyA8PSBjZWxsLnIpIHJldHVybjtcblx0XHR2YXIgdGV4dE1hdGNoID0geC5tYXRjaCgvPCg/Olxcdys6KT90ZXh0PihbXFxzXFxTXSopPFxcLyg/Olxcdys6KT90ZXh0Pi8pO1xuXHRcdHZhciBydCA9ICEhdGV4dE1hdGNoICYmICEhdGV4dE1hdGNoWzFdICYmIHBhcnNlX3NpKHRleHRNYXRjaFsxXSkgfHwge3I6XCJcIix0OlwiXCIsaDpcIlwifTtcblx0XHRjb21tZW50LnIgPSBydC5yO1xuXHRcdGlmKHJ0LnIgPT0gXCI8dD48L3Q+XCIpIHJ0LnQgPSBydC5oID0gXCJcIjtcblx0XHRjb21tZW50LnQgPSAocnQudHx8XCJcIikucmVwbGFjZSgvXFxyXFxuL2csXCJcXG5cIikucmVwbGFjZSgvXFxyL2csXCJcXG5cIik7XG5cdFx0aWYob3B0cy5jZWxsSFRNTCkgY29tbWVudC5oID0gcnQuaDtcblx0XHRjb21tZW50TGlzdC5wdXNoKGNvbW1lbnQpO1xuXHR9KTtcblx0cmV0dXJuIGNvbW1lbnRMaXN0O1xufVxuXG5mdW5jdGlvbiB3cml0ZV9jb21tZW50c194bWwoZGF0YS8qOjosIG9wdHMqLykge1xuXHR2YXIgbyA9IFtYTUxfSEVBREVSLCB3cml0ZXh0YWcoJ2NvbW1lbnRzJywgbnVsbCwgeyAneG1sbnMnOiBYTUxOU19tYWluWzBdIH0pXTtcblxuXHR2YXIgaWF1dGhvci8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRvLnB1c2goXCI8YXV0aG9ycz5cIik7XG5cdGRhdGEuZm9yRWFjaChmdW5jdGlvbih4KSB7IHhbMV0uZm9yRWFjaChmdW5jdGlvbih3KSB7IHZhciBhID0gZXNjYXBleG1sKHcuYSk7XG5cdFx0aWYoaWF1dGhvci5pbmRleE9mKGEpID09IC0xKSB7XG5cdFx0XHRpYXV0aG9yLnB1c2goYSk7XG5cdFx0XHRvLnB1c2goXCI8YXV0aG9yPlwiICsgYSArIFwiPC9hdXRob3I+XCIpO1xuXHRcdH1cblx0XHRpZih3LlQgJiYgdy5JRCAmJiBpYXV0aG9yLmluZGV4T2YoXCJ0Yz1cIiArIHcuSUQpID09IC0xKSB7XG5cdFx0XHRpYXV0aG9yLnB1c2goXCJ0Yz1cIiArIHcuSUQpO1xuXHRcdFx0by5wdXNoKFwiPGF1dGhvcj5cIiArIFwidGM9XCIgKyB3LklEICsgXCI8L2F1dGhvcj5cIik7XG5cdFx0fVxuXHR9KTsgfSk7XG5cdGlmKGlhdXRob3IubGVuZ3RoID09IDApIHsgaWF1dGhvci5wdXNoKFwiU2hlZXRKNVwiKTsgby5wdXNoKFwiPGF1dGhvcj5TaGVldEo1PC9hdXRob3I+XCIpOyB9XG5cdG8ucHVzaChcIjwvYXV0aG9ycz5cIik7XG5cdG8ucHVzaChcIjxjb21tZW50TGlzdD5cIik7XG5cdGRhdGEuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cdFx0LyogMTguNy4zIENUX0NvbW1lbnQgKi9cblx0XHR2YXIgbGFzdGF1dGhvciA9IDAsIHRzID0gW107XG5cdFx0aWYoZFsxXVswXSAmJiBkWzFdWzBdLlQgJiYgZFsxXVswXS5JRCkgbGFzdGF1dGhvciA9IGlhdXRob3IuaW5kZXhPZihcInRjPVwiICsgZFsxXVswXS5JRCk7XG5cdFx0ZWxzZSBkWzFdLmZvckVhY2goZnVuY3Rpb24oYykge1xuXHRcdFx0aWYoYy5hKSBsYXN0YXV0aG9yID0gaWF1dGhvci5pbmRleE9mKGVzY2FwZXhtbChjLmEpKTtcblx0XHRcdHRzLnB1c2goYy50fHxcIlwiKTtcblx0XHR9KTtcblx0XHRvLnB1c2goJzxjb21tZW50IHJlZj1cIicgKyBkWzBdICsgJ1wiIGF1dGhvcklkPVwiJyArIGxhc3RhdXRob3IgKyAnXCI+PHRleHQ+Jyk7XG5cdFx0aWYodHMubGVuZ3RoIDw9IDEpIG8ucHVzaCh3cml0ZXRhZyhcInRcIiwgZXNjYXBleG1sKHRzWzBdfHxcIlwiKSkpO1xuXHRcdGVsc2Uge1xuXHRcdFx0LyogYmFzZWQgb24gVGhyZWFkZWQgQ29tbWVudHMgLT4gQ29tbWVudHMgcHJvamVjdGlvbiAqL1xuXHRcdFx0dmFyIHQgPSBcIkNvbW1lbnQ6XFxuICAgIFwiICsgKHRzWzBdKSArIFwiXFxuXCI7XG5cdFx0XHRmb3IodmFyIGkgPSAxOyBpIDwgdHMubGVuZ3RoOyArK2kpIHQgKz0gXCJSZXBseTpcXG4gICAgXCIgKyB0c1tpXSArIFwiXFxuXCI7XG5cdFx0XHRvLnB1c2god3JpdGV0YWcoXCJ0XCIsIGVzY2FwZXhtbCh0KSkpO1xuXHRcdH1cblx0XHRvLnB1c2goJzwvdGV4dD48L2NvbW1lbnQ+Jyk7XG5cdH0pO1xuXHRvLnB1c2goXCI8L2NvbW1lbnRMaXN0PlwiKTtcblx0aWYoby5sZW5ndGg+MikgeyBvW28ubGVuZ3RoXSA9ICgnPC9jb21tZW50cz4nKTsgb1sxXT1vWzFdLnJlcGxhY2UoXCIvPlwiLFwiPlwiKTsgfVxuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuXG4vKiBbTVMtWExTWF0gMi4xLjE3ICovXG5mdW5jdGlvbiBwYXJzZV90Y21udF94bWwoZGF0YS8qOnN0cmluZyovLCBvcHRzKS8qOkFycmF5PFJhd0NvbW1lbnQ+Ki8ge1xuXHR2YXIgb3V0ID0gW107XG5cdHZhciBwYXNzID0gZmFsc2UsIGNvbW1lbnQgPSB7fSwgdGlkeCA9IDA7XG5cdGRhdGEucmVwbGFjZSh0YWdyZWdleCwgZnVuY3Rpb24geG1sX3RjbW50KHgsIGlkeCkge1xuXHRcdHZhciB5Lyo6YW55Ki8gPSBwYXJzZXhtbHRhZyh4KTtcblx0XHRzd2l0Y2goc3RyaXBfbnMoeVswXSkpIHtcblx0XHRcdGNhc2UgJzw/eG1sJzogYnJlYWs7XG5cblx0XHRcdC8qIDIuNi4yMDcgVGhyZWFkZWRDb21tZW50cyBDVF9UaHJlYWRlZENvbW1lbnRzICovXG5cdFx0XHRjYXNlICc8VGhyZWFkZWRDb21tZW50cyc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9UaHJlYWRlZENvbW1lbnRzPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAyLjYuMjA1IHRocmVhZGVkQ29tbWVudCBDVF9UaHJlYWRlZENvbW1lbnQgKi9cblx0XHRcdGNhc2UgJzx0aHJlYWRlZENvbW1lbnQnOiBjb21tZW50ID0ge2F1dGhvcjogeS5wZXJzb25JZCwgZ3VpZDogeS5pZCwgcmVmOiB5LnJlZiwgVDogMX07IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC90aHJlYWRlZENvbW1lbnQ+JzogaWYoY29tbWVudC50ICE9IG51bGwpIG91dC5wdXNoKGNvbW1lbnQpOyBicmVhaztcblxuXHRcdFx0Y2FzZSAnPHRleHQ+JzogY2FzZSAnPHRleHQnOiB0aWR4ID0gaWR4ICsgeC5sZW5ndGg7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC90ZXh0Pic6IGNvbW1lbnQudCA9IGRhdGEuc2xpY2UodGlkeCwgaWR4KS5yZXBsYWNlKC9cXHJcXG4vZywgXCJcXG5cIikucmVwbGFjZSgvXFxyL2csIFwiXFxuXCIpOyBicmVhaztcblxuXHRcdFx0LyogMi42LjIwNiBtZW50aW9ucyBDVF9UaHJlYWRlZENvbW1lbnRNZW50aW9ucyBUT0RPICovXG5cdFx0XHRjYXNlICc8bWVudGlvbnMnOiBjYXNlICc8bWVudGlvbnM+JzogcGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9tZW50aW9ucz4nOiBwYXNzID0gZmFsc2U7IGJyZWFrO1xuXG5cdFx0XHQvKiAyLjYuMjAyIG1lbnRpb24gQ1RfTWVudGlvbiBUT0RPICovXG5cblx0XHRcdC8qIDE4LjIuMTAgZXh0THN0IENUX0V4dGVuc2lvbkxpc3QgPyAqL1xuXHRcdFx0Y2FzZSAnPGV4dExzdCc6IGNhc2UgJzxleHRMc3Q+JzogY2FzZSAnPC9leHRMc3Q+JzogY2FzZSAnPGV4dExzdC8+JzogYnJlYWs7XG5cdFx0XHQvKiAxOC4yLjcgIGV4dCBDVF9FeHRlbnNpb24gKyAqL1xuXHRcdFx0Y2FzZSAnPGV4dCc6IHBhc3M9dHJ1ZTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L2V4dD4nOiBwYXNzPWZhbHNlOyBicmVhaztcblxuXHRcdFx0ZGVmYXVsdDogaWYoIXBhc3MgJiYgb3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcigndW5yZWNvZ25pemVkICcgKyB5WzBdICsgJyBpbiB0aHJlYWRlZCBjb21tZW50cycpO1xuXHRcdH1cblx0XHRyZXR1cm4geDtcblx0fSk7XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3RjbW50X3htbChjb21tZW50cywgcGVvcGxlLCBvcHRzKSB7XG5cdHZhciBvID0gW1hNTF9IRUFERVIsIHdyaXRleHRhZygnVGhyZWFkZWRDb21tZW50cycsIG51bGwsIHsgJ3htbG5zJzogWE1MTlMuVENNTlQgfSkucmVwbGFjZSgvW1xcL10+LywgXCI+XCIpXTtcblx0Y29tbWVudHMuZm9yRWFjaChmdW5jdGlvbihjYXJyKSB7XG5cdFx0dmFyIHJvb3RpZCA9IFwiXCI7XG5cdFx0KGNhcnJbMV0gfHwgW10pLmZvckVhY2goZnVuY3Rpb24oYywgaWR4KSB7XG5cdFx0XHRpZighYy5UKSB7IGRlbGV0ZSBjLklEOyByZXR1cm47IH1cblx0XHRcdGlmKGMuYSAmJiBwZW9wbGUuaW5kZXhPZihjLmEpID09IC0xKSBwZW9wbGUucHVzaChjLmEpO1xuXHRcdFx0dmFyIHRjb3B0cyA9IHtcblx0XHRcdFx0cmVmOiBjYXJyWzBdLFxuXHRcdFx0XHRpZDogXCJ7NTRFRTc5NTEtNzI2Mi00MjAwLTY5NjktXCIgKyAoXCIwMDAwMDAwMDAwMDBcIiArIG9wdHMudGNpZCsrKS5zbGljZSgtMTIpICsgXCJ9XCJcblx0XHRcdH07XG5cdFx0XHRpZihpZHggPT0gMCkgcm9vdGlkID0gdGNvcHRzLmlkO1xuXHRcdFx0ZWxzZSB0Y29wdHMucGFyZW50SWQgPSByb290aWQ7XG5cdFx0XHRjLklEID0gdGNvcHRzLmlkO1xuXHRcdFx0aWYoYy5hKSB0Y29wdHMucGVyc29uSWQgPSBcIns1NEVFNzk1MC03MjYyLTQyMDAtNjk2OS1cIiArIChcIjAwMDAwMDAwMDAwMFwiICsgcGVvcGxlLmluZGV4T2YoYy5hKSkuc2xpY2UoLTEyKSArIFwifVwiO1xuXHRcdFx0by5wdXNoKHdyaXRleHRhZygndGhyZWFkZWRDb21tZW50Jywgd3JpdGV0YWcoJ3RleHQnLCBjLnR8fFwiXCIpLCB0Y29wdHMpKTtcblx0XHR9KTtcblx0fSk7XG5cdG8ucHVzaCgnPC9UaHJlYWRlZENvbW1lbnRzPicpO1xuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuXG4vKiBbTVMtWExTWF0gMi4xLjE4ICovXG5mdW5jdGlvbiBwYXJzZV9wZW9wbGVfeG1sKGRhdGEvKjpzdHJpbmcqLywgb3B0cykge1xuXHR2YXIgb3V0ID0gW107XG5cdHZhciBwYXNzID0gZmFsc2U7XG5cdGRhdGEucmVwbGFjZSh0YWdyZWdleCwgZnVuY3Rpb24geG1sX3RjbW50KHgpIHtcblx0XHR2YXIgeS8qOmFueSovID0gcGFyc2V4bWx0YWcoeCk7XG5cdFx0c3dpdGNoKHN0cmlwX25zKHlbMF0pKSB7XG5cdFx0XHRjYXNlICc8P3htbCc6IGJyZWFrO1xuXG5cdFx0XHQvKiAyLjQuODUgcGVyc29uTGlzdCBDVF9QZXJzb25MaXN0ICovXG5cdFx0XHRjYXNlICc8cGVyc29uTGlzdCc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9wZXJzb25MaXN0Pic6IGJyZWFrO1xuXG5cdFx0XHQvKiAyLjYuMjAzIHBlcnNvbiBDVF9QZXJzb24gVE9ETzogcHJvdmlkZXJzICovXG5cdFx0XHRjYXNlICc8cGVyc29uJzogb3V0LnB1c2goe25hbWU6IHkuZGlzcGxheW5hbWUsIGlkOiB5LmlkIH0pOyBicmVhaztcblx0XHRcdGNhc2UgJzwvcGVyc29uPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjEwIGV4dExzdCBDVF9FeHRlbnNpb25MaXN0ID8gKi9cblx0XHRcdGNhc2UgJzxleHRMc3QnOiBjYXNlICc8ZXh0THN0Pic6IGNhc2UgJzwvZXh0THN0Pic6IGNhc2UgJzxleHRMc3QvPic6IGJyZWFrO1xuXHRcdFx0LyogMTguMi43ICBleHQgQ1RfRXh0ZW5zaW9uICsgKi9cblx0XHRcdGNhc2UgJzxleHQnOiBwYXNzPXRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9leHQ+JzogcGFzcz1mYWxzZTsgYnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6IGlmKCFwYXNzICYmIG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCAnICsgeVswXSArICcgaW4gdGhyZWFkZWQgY29tbWVudHMnKTtcblx0XHR9XG5cdFx0cmV0dXJuIHg7XG5cdH0pO1xuXHRyZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gd3JpdGVfcGVvcGxlX3htbChwZW9wbGUvKiwgb3B0cyovKSB7XG5cdHZhciBvID0gW1hNTF9IRUFERVIsIHdyaXRleHRhZygncGVyc29uTGlzdCcsIG51bGwsIHtcblx0XHQneG1sbnMnOiBYTUxOUy5UQ01OVCxcblx0XHQneG1sbnM6eCc6IFhNTE5TX21haW5bMF1cblx0fSkucmVwbGFjZSgvW1xcL10+LywgXCI+XCIpXTtcblx0cGVvcGxlLmZvckVhY2goZnVuY3Rpb24ocGVyc29uLCBpZHgpIHtcblx0XHRvLnB1c2god3JpdGV4dGFnKCdwZXJzb24nLCBudWxsLCB7XG5cdFx0XHRkaXNwbGF5TmFtZTogcGVyc29uLFxuXHRcdFx0aWQ6IFwiezU0RUU3OTUwLTcyNjItNDIwMC02OTY5LVwiICsgKFwiMDAwMDAwMDAwMDAwXCIgKyBpZHgpLnNsaWNlKC0xMikgKyBcIn1cIixcblx0XHRcdHVzZXJJZDogcGVyc29uLFxuXHRcdFx0cHJvdmlkZXJJZDogXCJOb25lXCJcblx0XHR9KSk7XG5cdH0pO1xuXHRvLnB1c2goXCI8L3BlcnNvbkxpc3Q+XCIpO1xuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuLyogW01TLVhMU0JdIDIuNC4yOCBCcnRCZWdpbkNvbW1lbnQgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydEJlZ2luQ29tbWVudChkYXRhKSB7XG5cdHZhciBvdXQgPSB7fTtcblx0b3V0LmlhdXRob3IgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdHZhciByZnggPSBwYXJzZV9VbmNoZWNrZWRSZlgoZGF0YSwgMTYpO1xuXHRvdXQucmZ4ID0gcmZ4LnM7XG5cdG91dC5yZWYgPSBlbmNvZGVfY2VsbChyZngucyk7XG5cdGRhdGEubCArPSAxNjsgLyp2YXIgZ3VpZCA9IHBhcnNlX0dVSUQoZGF0YSk7ICovXG5cdHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRCZWdpbkNvbW1lbnQoZGF0YSwgbykge1xuXHRpZihvID09IG51bGwpIG8gPSBuZXdfYnVmKDM2KTtcblx0by53cml0ZV9zaGlmdCg0LCBkYXRhWzFdLmlhdXRob3IpO1xuXHR3cml0ZV9VbmNoZWNrZWRSZlgoKGRhdGFbMF0vKjphbnkqLyksIG8pO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU0JdIDIuNC4zMjcgQnJ0Q29tbWVudEF1dGhvciAqL1xudmFyIHBhcnNlX0JydENvbW1lbnRBdXRob3IgPSBwYXJzZV9YTFdpZGVTdHJpbmc7XG5mdW5jdGlvbiB3cml0ZV9CcnRDb21tZW50QXV0aG9yKGRhdGEpIHsgcmV0dXJuIHdyaXRlX1hMV2lkZVN0cmluZyhkYXRhLnNsaWNlKDAsIDU0KSk7IH1cblxuLyogW01TLVhMU0JdIDIuMS43LjggQ29tbWVudHMgKi9cbmZ1bmN0aW9uIHBhcnNlX2NvbW1lbnRzX2JpbihkYXRhLCBvcHRzKS8qOkFycmF5PFJhd0NvbW1lbnQ+Ki8ge1xuXHR2YXIgb3V0Lyo6QXJyYXk8UmF3Q29tbWVudD4qLyA9IFtdO1xuXHR2YXIgYXV0aG9ycy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgYyA9IHt9O1xuXHR2YXIgcGFzcyA9IGZhbHNlO1xuXHRyZWNvcmRob3BwZXIoZGF0YSwgZnVuY3Rpb24gaG9wcGVyX2NtbnQodmFsLCBSLCBSVCkge1xuXHRcdHN3aXRjaChSVCkge1xuXHRcdFx0Y2FzZSAweDAyNzg6IC8qICdCcnRDb21tZW50QXV0aG9yJyAqL1xuXHRcdFx0XHRhdXRob3JzLnB1c2godmFsKTsgYnJlYWs7XG5cdFx0XHRjYXNlIDB4MDI3QjogLyogJ0JydEJlZ2luQ29tbWVudCcgKi9cblx0XHRcdFx0YyA9IHZhbDsgYnJlYWs7XG5cdFx0XHRjYXNlIDB4MDI3RDogLyogJ0JydENvbW1lbnRUZXh0JyAqL1xuXHRcdFx0XHRjLnQgPSB2YWwudDsgYy5oID0gdmFsLmg7IGMuciA9IHZhbC5yOyBicmVhaztcblx0XHRcdGNhc2UgMHgwMjdDOiAvKiAnQnJ0RW5kQ29tbWVudCcgKi9cblx0XHRcdFx0Yy5hdXRob3IgPSBhdXRob3JzW2MuaWF1dGhvcl07XG5cdFx0XHRcdGRlbGV0ZSAoYy8qOmFueSovKS5pYXV0aG9yO1xuXHRcdFx0XHRpZihvcHRzLnNoZWV0Um93cyAmJiBjLnJmeCAmJiBvcHRzLnNoZWV0Um93cyA8PSBjLnJmeC5yKSBicmVhaztcblx0XHRcdFx0aWYoIWMudCkgYy50ID0gXCJcIjtcblx0XHRcdFx0ZGVsZXRlIGMucmZ4OyBvdXQucHVzaChjKTsgYnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwQzAwOiAvKiAnQnJ0VWlkJyAqL1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwMjM6IC8qICdCcnRGUlRCZWdpbicgKi9cblx0XHRcdFx0cGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjQ6IC8qICdCcnRGUlRFbmQnICovXG5cdFx0XHRcdHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cdFx0XHRjYXNlIDB4MDAyNTogLyogJ0JydEFDQmVnaW4nICovIGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjY6IC8qICdCcnRBQ0VuZCcgKi8gYnJlYWs7XG5cblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYoUi5UKXsvKiBlbXB0eSAqL31cblx0XHRcdFx0ZWxzZSBpZighcGFzcyB8fCBvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZWNvcmQgMHhcIiArIFJULnRvU3RyaW5nKDE2KSk7XG5cdFx0fVxuXHR9KTtcblx0cmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gd3JpdGVfY29tbWVudHNfYmluKGRhdGEvKjo6LCBvcHRzKi8pIHtcblx0dmFyIGJhID0gYnVmX2FycmF5KCk7XG5cdHZhciBpYXV0aG9yLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjc0IC8qIEJydEJlZ2luQ29tbWVudHMgKi8pO1xuXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjc2IC8qIEJydEJlZ2luQ29tbWVudEF1dGhvcnMgKi8pO1xuXHRkYXRhLmZvckVhY2goZnVuY3Rpb24oY29tbWVudCkge1xuXHRcdGNvbW1lbnRbMV0uZm9yRWFjaChmdW5jdGlvbihjKSB7XG5cdFx0XHRpZihpYXV0aG9yLmluZGV4T2YoYy5hKSA+IC0xKSByZXR1cm47XG5cdFx0XHRpYXV0aG9yLnB1c2goYy5hLnNsaWNlKDAsNTQpKTtcblx0XHRcdHdyaXRlX3JlY29yZChiYSwgMHgwMjc4IC8qIEJydENvbW1lbnRBdXRob3IgKi8sIHdyaXRlX0JydENvbW1lbnRBdXRob3IoYy5hKSk7XG5cdFx0fSk7XG5cdH0pO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI3NyAvKiBCcnRFbmRDb21tZW50QXV0aG9ycyAqLyk7XG5cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyNzkgLyogQnJ0QmVnaW5Db21tZW50TGlzdCAqLyk7XG5cdGRhdGEuZm9yRWFjaChmdW5jdGlvbihjb21tZW50KSB7XG5cdFx0Y29tbWVudFsxXS5mb3JFYWNoKGZ1bmN0aW9uKGMpIHtcblx0XHRcdGMuaWF1dGhvciA9IGlhdXRob3IuaW5kZXhPZihjLmEpO1xuXHRcdFx0dmFyIHJhbmdlID0ge3M6ZGVjb2RlX2NlbGwoY29tbWVudFswXSksZTpkZWNvZGVfY2VsbChjb21tZW50WzBdKX07XG5cdFx0XHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI3QiAvKiBCcnRCZWdpbkNvbW1lbnQgKi8sIHdyaXRlX0JydEJlZ2luQ29tbWVudChbcmFuZ2UsIGNdKSk7XG5cdFx0XHRpZihjLnQgJiYgYy50Lmxlbmd0aCA+IDApIHdyaXRlX3JlY29yZChiYSwgMHgwMjdEIC8qIEJydENvbW1lbnRUZXh0ICovLCB3cml0ZV9CcnRDb21tZW50VGV4dChjKSk7XG5cdFx0XHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI3QyAvKiBCcnRFbmRDb21tZW50ICovKTtcblx0XHRcdGRlbGV0ZSBjLmlhdXRob3I7XG5cdFx0fSk7XG5cdH0pO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDI3QSAvKiBCcnRFbmRDb21tZW50TGlzdCAqLyk7XG5cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyNzUgLyogQnJ0RW5kQ29tbWVudHMgKi8pO1xuXHRyZXR1cm4gYmEuZW5kKCk7XG59XG52YXIgQ1RfVkJBID0gXCJhcHBsaWNhdGlvbi92bmQubXMtb2ZmaWNlLnZiYVByb2plY3RcIjtcbmZ1bmN0aW9uIG1ha2VfdmJhX3hscyhjZmIpIHtcbiAgdmFyIG5ld2NmYiA9IENGQi51dGlscy5jZmJfbmV3KHsgcm9vdDogXCJSXCIgfSk7XG4gIGNmYi5GdWxsUGF0aHMuZm9yRWFjaChmdW5jdGlvbihwLCBpKSB7XG4gICAgaWYgKHAuc2xpY2UoLTEpID09PSBcIi9cIiB8fCAhcC5tYXRjaCgvX1ZCQV9QUk9KRUNUX0NVUi8pKVxuICAgICAgcmV0dXJuO1xuICAgIHZhciBuZXdwYXRoID0gcC5yZXBsYWNlKC9eW15cXC9dKi8sIFwiUlwiKS5yZXBsYWNlKC9cXC9fVkJBX1BST0pFQ1RfQ1VSXFx1MDAwMCovLCBcIlwiKTtcbiAgICBDRkIudXRpbHMuY2ZiX2FkZChuZXdjZmIsIG5ld3BhdGgsIGNmYi5GaWxlSW5kZXhbaV0uY29udGVudCk7XG4gIH0pO1xuICByZXR1cm4gQ0ZCLndyaXRlKG5ld2NmYik7XG59XG5mdW5jdGlvbiBmaWxsX3ZiYV94bHMoY2ZiLCB2YmEpIHtcbiAgdmJhLkZ1bGxQYXRocy5mb3JFYWNoKGZ1bmN0aW9uKHAsIGkpIHtcbiAgICBpZiAoaSA9PSAwKVxuICAgICAgcmV0dXJuO1xuICAgIHZhciBuZXdwYXRoID0gcC5yZXBsYWNlKC9bXlxcL10qW1xcL10vLCBcIi9fVkJBX1BST0pFQ1RfQ1VSL1wiKTtcbiAgICBpZiAobmV3cGF0aC5zbGljZSgtMSkgIT09IFwiL1wiKVxuICAgICAgQ0ZCLnV0aWxzLmNmYl9hZGQoY2ZiLCBuZXdwYXRoLCB2YmEuRmlsZUluZGV4W2ldLmNvbnRlbnQpO1xuICB9KTtcbn1cbnZhciBWQkFGTVRTID0gW1wieGxzYlwiLCBcInhsc21cIiwgXCJ4bGFtXCIsIFwiYmlmZjhcIiwgXCJ4bGFcIl07XG4vKiBtYWNybyBhbmQgZGlhbG9nIHNoZWV0IHN0dWJzICovXG5mdW5jdGlvbiBwYXJzZV9kc19iaW4oLyo6OmRhdGE6YW55LCBvcHRzLCBpZHg6bnVtYmVyLCByZWxzLCB3YiwgdGhlbWVzLCBzdHlsZXMqLykvKjpXb3Jrc2hlZXQqLyB7IHJldHVybiB7JyF0eXBlJzonZGlhbG9nJ307IH1cbmZ1bmN0aW9uIHBhcnNlX2RzX3htbCgvKjo6ZGF0YTphbnksIG9wdHMsIGlkeDpudW1iZXIsIHJlbHMsIHdiLCB0aGVtZXMsIHN0eWxlcyovKS8qOldvcmtzaGVldCovIHsgcmV0dXJuIHsnIXR5cGUnOidkaWFsb2cnfTsgfVxuZnVuY3Rpb24gcGFyc2VfbXNfYmluKC8qOjpkYXRhOmFueSwgb3B0cywgaWR4Om51bWJlciwgcmVscywgd2IsIHRoZW1lcywgc3R5bGVzKi8pLyo6V29ya3NoZWV0Ki8geyByZXR1cm4geychdHlwZSc6J21hY3JvJ307IH1cbmZ1bmN0aW9uIHBhcnNlX21zX3htbCgvKjo6ZGF0YTphbnksIG9wdHMsIGlkeDpudW1iZXIsIHJlbHMsIHdiLCB0aGVtZXMsIHN0eWxlcyovKS8qOldvcmtzaGVldCovIHsgcmV0dXJuIHsnIXR5cGUnOidtYWNybyd9OyB9XG4vKiBUT0RPOiBpdCB3aWxsIGJlIHVzZWZ1bCB0byBwYXJzZSB0aGUgZnVuY3Rpb24gc3RyICovXG52YXIgcmNfdG9fYTEgPSAvKiNfX1BVUkVfXyovKGZ1bmN0aW9uKCl7XG5cdHZhciByY3JlZ2V4ID0gLyhefFteQS1aYS16X10pUihcXFs/LT9cXGQrXFxdfFsxLTldXFxkKnwpQyhcXFs/LT9cXGQrXFxdfFsxLTldXFxkKnwpKD8hW0EtWmEtejAtOV9dKS9nO1xuXHR2YXIgcmNiYXNlLyo6Q2VsbCovID0gKHtyOjAsYzowfS8qOmFueSovKTtcblx0ZnVuY3Rpb24gcmNmdW5jKCQkLCQxLCQyLCQzKSB7XG5cdFx0dmFyIGNSZWwgPSBmYWxzZSwgclJlbCA9IGZhbHNlO1xuXG5cdFx0aWYoJDIubGVuZ3RoID09IDApIHJSZWwgPSB0cnVlO1xuXHRcdGVsc2UgaWYoJDIuY2hhckF0KDApID09IFwiW1wiKSB7IHJSZWwgPSB0cnVlOyAkMiA9ICQyLnNsaWNlKDEsIC0xKTsgfVxuXG5cdFx0aWYoJDMubGVuZ3RoID09IDApIGNSZWwgPSB0cnVlO1xuXHRcdGVsc2UgaWYoJDMuY2hhckF0KDApID09IFwiW1wiKSB7IGNSZWwgPSB0cnVlOyAkMyA9ICQzLnNsaWNlKDEsIC0xKTsgfVxuXG5cdFx0dmFyIFIgPSAkMi5sZW5ndGg+MD9wYXJzZUludCgkMiwxMCl8MDowLCBDID0gJDMubGVuZ3RoPjA/cGFyc2VJbnQoJDMsMTApfDA6MDtcblxuXHRcdGlmKGNSZWwpIEMgKz0gcmNiYXNlLmM7IGVsc2UgLS1DO1xuXHRcdGlmKHJSZWwpIFIgKz0gcmNiYXNlLnI7IGVsc2UgLS1SO1xuXHRcdHJldHVybiAkMSArIChjUmVsID8gXCJcIiA6IFwiJFwiKSArIGVuY29kZV9jb2woQykgKyAoclJlbCA/IFwiXCIgOiBcIiRcIikgKyBlbmNvZGVfcm93KFIpO1xuXHR9XG5cdHJldHVybiBmdW5jdGlvbiByY190b19hMShmc3RyLyo6c3RyaW5nKi8sIGJhc2UvKjpDZWxsKi8pLyo6c3RyaW5nKi8ge1xuXHRcdHJjYmFzZSA9IGJhc2U7XG5cdFx0cmV0dXJuIGZzdHIucmVwbGFjZShyY3JlZ2V4LCByY2Z1bmMpO1xuXHR9O1xufSkoKTtcblxudmFyIGNyZWZyZWdleCA9IC8oXnxbXi5fQS1aMC05XSkoWyRdPykoW0EtWl17MSwyfXxbQS1XXVtBLVpdezJ9fFhbQS1FXVtBLVpdfFhGW0EtRF0pKFskXT8pKDEwWzAtM11cXGR7NH18MTA0WzAtN11cXGR7M318MTA0OFswLTRdXFxkezJ9fDEwNDg1WzAtNl1cXGR8MTA0ODU3WzAtNl18WzEtOV1cXGR7MCw1fSkoPyFbXy5cXChBLVphLXowLTldKS9nO1xudmFyIGExX3RvX3JjID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpe1xuXHRyZXR1cm4gZnVuY3Rpb24gYTFfdG9fcmMoZnN0ci8qOnN0cmluZyovLCBiYXNlLyo6Q2VsbEFkZHJlc3MqLykge1xuXHRcdHJldHVybiBmc3RyLnJlcGxhY2UoY3JlZnJlZ2V4LCBmdW5jdGlvbigkMCwgJDEsICQyLCAkMywgJDQsICQ1KSB7XG5cdFx0XHR2YXIgYyA9IGRlY29kZV9jb2woJDMpIC0gKCQyID8gMCA6IGJhc2UuYyk7XG5cdFx0XHR2YXIgciA9IGRlY29kZV9yb3coJDUpIC0gKCQ0ID8gMCA6IGJhc2Uucik7XG5cdFx0XHR2YXIgUiA9IChyID09IDAgPyBcIlwiIDogISQ0ID8gXCJbXCIgKyByICsgXCJdXCIgOiAocisxKSk7XG5cdFx0XHR2YXIgQyA9IChjID09IDAgPyBcIlwiIDogISQyID8gXCJbXCIgKyBjICsgXCJdXCIgOiAoYysxKSk7XG5cdFx0XHRyZXR1cm4gJDEgKyBcIlJcIiArIFIgKyBcIkNcIiArIEM7XG5cdFx0fSk7XG5cdH07XG59KSgpO1xuXG4vKiBubyBkZWZpbmVkIG5hbWUgY2FuIGNvbGxpZGUgd2l0aCBhIHZhbGlkIGNlbGwgYWRkcmVzcyBBMTpYRkQxMDQ4NTc2IC4uLiBleGNlcHQgTE9HMTAhICovXG5mdW5jdGlvbiBzaGlmdF9mb3JtdWxhX3N0cihmLyo6c3RyaW5nKi8sIGRlbHRhLyo6Q2VsbCovKS8qOnN0cmluZyovIHtcblx0cmV0dXJuIGYucmVwbGFjZShjcmVmcmVnZXgsIGZ1bmN0aW9uKCQwLCAkMSwgJDIsICQzLCAkNCwgJDUpIHtcblx0XHRyZXR1cm4gJDErKCQyPT1cIiRcIiA/ICQyKyQzIDogZW5jb2RlX2NvbChkZWNvZGVfY29sKCQzKStkZWx0YS5jKSkrKCQ0PT1cIiRcIiA/ICQ0KyQ1IDogZW5jb2RlX3JvdyhkZWNvZGVfcm93KCQ1KSArIGRlbHRhLnIpKTtcblx0fSk7XG59XG5cbmZ1bmN0aW9uIHNoaWZ0X2Zvcm11bGFfeGxzeChmLyo6c3RyaW5nKi8sIHJhbmdlLyo6c3RyaW5nKi8sIGNlbGwvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7XG5cdHZhciByID0gZGVjb2RlX3JhbmdlKHJhbmdlKSwgcyA9IHIucywgYyA9IGRlY29kZV9jZWxsKGNlbGwpO1xuXHR2YXIgZGVsdGEgPSB7cjpjLnIgLSBzLnIsIGM6Yy5jIC0gcy5jfTtcblx0cmV0dXJuIHNoaWZ0X2Zvcm11bGFfc3RyKGYsIGRlbHRhKTtcbn1cblxuLyogVE9ETzogcGFyc2UgZm9ybXVsYSAqL1xuZnVuY3Rpb24gZnV6enlmbWxhKGYvKjpzdHJpbmcqLykvKjpib29sZWFuKi8ge1xuXHRpZihmLmxlbmd0aCA9PSAxKSByZXR1cm4gZmFsc2U7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBfeGxmbihmLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRyZXR1cm4gZi5yZXBsYWNlKC9feGxmblxcLi9nLFwiXCIpO1xufVxuZnVuY3Rpb24gcGFyc2VyZWFkMShibG9iKSB7IGJsb2IubCs9MTsgcmV0dXJuOyB9XG5cbi8qIFtNUy1YTFNdIDIuNS41MSAqL1xuZnVuY3Rpb24gcGFyc2VfQ29sUmVsVShibG9iLCBsZW5ndGgpIHtcblx0dmFyIGMgPSBibG9iLnJlYWRfc2hpZnQobGVuZ3RoID09IDEgPyAxIDogMik7XG5cdHJldHVybiBbYyAmIDB4M0ZGRiwgKGMgPj4gMTQpICYgMSwgKGMgPj4gMTUpICYgMV07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMTA1IDsgW01TLVhMU0JdIDIuNS45Ny44OSAqL1xuZnVuY3Rpb24gcGFyc2VfUmdjZUFyZWEoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciB3ID0gMjtcblx0aWYob3B0cykge1xuXHRcdGlmKG9wdHMuYmlmZiA+PSAyICYmIG9wdHMuYmlmZiA8PSA1KSByZXR1cm4gcGFyc2VfUmdjZUFyZWFfQklGRjIoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0XHRlbHNlIGlmKG9wdHMuYmlmZiA9PSAxMikgdyA9IDQ7XG5cdH1cblx0dmFyIHI9YmxvYi5yZWFkX3NoaWZ0KHcpLCBSPWJsb2IucmVhZF9zaGlmdCh3KTtcblx0dmFyIGM9cGFyc2VfQ29sUmVsVShibG9iLCAyKTtcblx0dmFyIEM9cGFyc2VfQ29sUmVsVShibG9iLCAyKTtcblx0cmV0dXJuIHsgczp7cjpyLCBjOmNbMF0sIGNSZWw6Y1sxXSwgclJlbDpjWzJdfSwgZTp7cjpSLCBjOkNbMF0sIGNSZWw6Q1sxXSwgclJlbDpDWzJdfSB9O1xufVxuLyogQklGRiAyLTUgZW5jb2RlcyBmbGFncyBpbiB0aGUgcm93IGZpZWxkICovXG5mdW5jdGlvbiBwYXJzZV9SZ2NlQXJlYV9CSUZGMihibG9iLyo6OiwgbGVuZ3RoLCBvcHRzKi8pIHtcblx0dmFyIHI9cGFyc2VfQ29sUmVsVShibG9iLCAyKSwgUj1wYXJzZV9Db2xSZWxVKGJsb2IsIDIpO1xuXHR2YXIgYz1ibG9iLnJlYWRfc2hpZnQoMSk7XG5cdHZhciBDPWJsb2IucmVhZF9zaGlmdCgxKTtcblx0cmV0dXJuIHsgczp7cjpyWzBdLCBjOmMsIGNSZWw6clsxXSwgclJlbDpyWzJdfSwgZTp7cjpSWzBdLCBjOkMsIGNSZWw6UlsxXSwgclJlbDpSWzJdfSB9O1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjEwNSA7IFtNUy1YTFNCXSAyLjUuOTcuOTAgKi9cbmZ1bmN0aW9uIHBhcnNlX1JnY2VBcmVhUmVsKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZihvcHRzLmJpZmYgPCA4KSByZXR1cm4gcGFyc2VfUmdjZUFyZWFfQklGRjIoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0dmFyIHI9YmxvYi5yZWFkX3NoaWZ0KG9wdHMuYmlmZiA9PSAxMiA/IDQgOiAyKSwgUj1ibG9iLnJlYWRfc2hpZnQob3B0cy5iaWZmID09IDEyID8gNCA6IDIpO1xuXHR2YXIgYz1wYXJzZV9Db2xSZWxVKGJsb2IsIDIpO1xuXHR2YXIgQz1wYXJzZV9Db2xSZWxVKGJsb2IsIDIpO1xuXHRyZXR1cm4geyBzOntyOnIsIGM6Y1swXSwgY1JlbDpjWzFdLCByUmVsOmNbMl19LCBlOntyOlIsIGM6Q1swXSwgY1JlbDpDWzFdLCByUmVsOkNbMl19IH07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMTA5IDsgW01TLVhMU0JdIDIuNS45Ny45MSAqL1xuZnVuY3Rpb24gcGFyc2VfUmdjZUxvYyhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0aWYob3B0cyAmJiBvcHRzLmJpZmYgPj0gMiAmJiBvcHRzLmJpZmYgPD0gNSkgcmV0dXJuIHBhcnNlX1JnY2VMb2NfQklGRjIoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0dmFyIHIgPSBibG9iLnJlYWRfc2hpZnQob3B0cyAmJiBvcHRzLmJpZmYgPT0gMTIgPyA0IDogMik7XG5cdHZhciBjID0gcGFyc2VfQ29sUmVsVShibG9iLCAyKTtcblx0cmV0dXJuIHtyOnIsIGM6Y1swXSwgY1JlbDpjWzFdLCByUmVsOmNbMl19O1xufVxuZnVuY3Rpb24gcGFyc2VfUmdjZUxvY19CSUZGMihibG9iLyo6OiwgbGVuZ3RoLCBvcHRzKi8pIHtcblx0dmFyIHIgPSBwYXJzZV9Db2xSZWxVKGJsb2IsIDIpO1xuXHR2YXIgYyA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0cmV0dXJuIHtyOnJbMF0sIGM6YywgY1JlbDpyWzFdLCByUmVsOnJbMl19O1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjEwNywgMi41LjQ3ICovXG5mdW5jdGlvbiBwYXJzZV9SZ2NlRWxmTG9jKGJsb2IvKjo6LCBsZW5ndGgsIG9wdHMqLykge1xuXHR2YXIgciA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIGMgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHJldHVybiB7cjpyLCBjOmMgJiAweEZGLCBmUXVvdGVkOiEhKGMgJiAweDQwMDApLCBjUmVsOmM+PjE1LCByUmVsOmM+PjE1IH07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMTExIDsgW01TLVhMU0JdIDIuNS45Ny45MiBUT0RPICovXG5mdW5jdGlvbiBwYXJzZV9SZ2NlTG9jUmVsKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgYmlmZiA9IG9wdHMgJiYgb3B0cy5iaWZmID8gb3B0cy5iaWZmIDogODtcblx0aWYoYmlmZiA+PSAyICYmIGJpZmYgPD0gNSkgcmV0dXJuIHBhcnNlX1JnY2VMb2NSZWxfQklGRjIoYmxvYiwgbGVuZ3RoLCBvcHRzKTtcblx0dmFyIHIgPSBibG9iLnJlYWRfc2hpZnQoYmlmZiA+PSAxMiA/IDQgOiAyKTtcblx0dmFyIGNsID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgY1JlbCA9IChjbCAmIDB4NDAwMCkgPj4gMTQsIHJSZWwgPSAoY2wgJiAweDgwMDApID4+IDE1O1xuXHRjbCAmPSAweDNGRkY7XG5cdGlmKHJSZWwgPT0gMSkgd2hpbGUociA+IDB4N0ZGRkYpIHIgLT0gMHgxMDAwMDA7XG5cdGlmKGNSZWwgPT0gMSkgd2hpbGUoY2wgPiAweDFGRkYpIGNsID0gY2wgLSAweDQwMDA7XG5cdHJldHVybiB7cjpyLGM6Y2wsY1JlbDpjUmVsLHJSZWw6clJlbH07XG59XG5mdW5jdGlvbiBwYXJzZV9SZ2NlTG9jUmVsX0JJRkYyKGJsb2IvKjo6LCBsZW5ndGg6bnVtYmVyLCBvcHRzKi8pIHtcblx0dmFyIHJsID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgYyA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0dmFyIHJSZWwgPSAocmwgJiAweDgwMDApID4+IDE1LCBjUmVsID0gKHJsICYgMHg0MDAwKSA+PiAxNDtcblx0cmwgJj0gMHgzRkZGO1xuXHRpZihyUmVsID09IDEgJiYgcmwgPj0gMHgyMDAwKSBybCA9IHJsIC0gMHg0MDAwO1xuXHRpZihjUmVsID09IDEgJiYgYyA+PSAweDgwKSBjID0gYyAtIDB4MTAwO1xuXHRyZXR1cm4ge3I6cmwsYzpjLGNSZWw6Y1JlbCxyUmVsOnJSZWx9O1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjI3IDsgW01TLVhMU0JdIDIuNS45Ny4xOCAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXJlYShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHR5cGUgPSAoYmxvYltibG9iLmwrK10gJiAweDYwKSA+PiA1O1xuXHR2YXIgYXJlYSA9IHBhcnNlX1JnY2VBcmVhKGJsb2IsIG9wdHMuYmlmZiA+PSAyICYmIG9wdHMuYmlmZiA8PSA1ID8gNiA6IDgsIG9wdHMpO1xuXHRyZXR1cm4gW3R5cGUsIGFyZWFdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjI4IDsgW01TLVhMU0JdIDIuNS45Ny4xOSAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXJlYTNkKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgdHlwZSA9IChibG9iW2Jsb2IubCsrXSAmIDB4NjApID4+IDU7XG5cdHZhciBpeHRpID0gYmxvYi5yZWFkX3NoaWZ0KDIsICdpJyk7XG5cdHZhciB3ID0gODtcblx0aWYob3B0cykgc3dpdGNoKG9wdHMuYmlmZikge1xuXHRcdGNhc2UgNTogYmxvYi5sICs9IDEyOyB3ID0gNjsgYnJlYWs7XG5cdFx0Y2FzZSAxMjogdyA9IDEyOyBicmVhaztcblx0fVxuXHR2YXIgYXJlYSA9IHBhcnNlX1JnY2VBcmVhKGJsb2IsIHcsIG9wdHMpO1xuXHRyZXR1cm4gW3R5cGUsIGl4dGksIGFyZWFdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjI5IDsgW01TLVhMU0JdIDIuNS45Ny4yMCAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXJlYUVycihibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHR5cGUgPSAoYmxvYltibG9iLmwrK10gJiAweDYwKSA+PiA1O1xuXHRibG9iLmwgKz0gb3B0cyAmJiAob3B0cy5iaWZmID4gOCkgPyAxMiA6IChvcHRzLmJpZmYgPCA4ID8gNiA6IDgpO1xuXHRyZXR1cm4gW3R5cGVdO1xufVxuLyogW01TLVhMU10gMi41LjE5OC4zMCA7IFtNUy1YTFNCXSAyLjUuOTcuMjEgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0FyZWFFcnIzZChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHR5cGUgPSAoYmxvYltibG9iLmwrK10gJiAweDYwKSA+PiA1O1xuXHR2YXIgaXh0aSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIHcgPSA4O1xuXHRpZihvcHRzKSBzd2l0Y2gob3B0cy5iaWZmKSB7XG5cdFx0Y2FzZSA1OiBibG9iLmwgKz0gMTI7IHcgPSA2OyBicmVhaztcblx0XHRjYXNlIDEyOiB3ID0gMTI7IGJyZWFrO1xuXHR9XG5cdGJsb2IubCArPSB3O1xuXHRyZXR1cm4gW3R5cGUsIGl4dGldO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjMxIDsgW01TLVhMU0JdIDIuNS45Ny4yMiAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXJlYU4oYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciB0eXBlID0gKGJsb2JbYmxvYi5sKytdICYgMHg2MCkgPj4gNTtcblx0dmFyIGFyZWEgPSBwYXJzZV9SZ2NlQXJlYVJlbChibG9iLCBsZW5ndGggLSAxLCBvcHRzKTtcblx0cmV0dXJuIFt0eXBlLCBhcmVhXTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC4zMiA7IFtNUy1YTFNCXSAyLjUuOTcuMjMgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0FycmF5KGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgdHlwZSA9IChibG9iW2Jsb2IubCsrXSAmIDB4NjApID4+IDU7XG5cdGJsb2IubCArPSBvcHRzLmJpZmYgPT0gMiA/IDYgOiBvcHRzLmJpZmYgPT0gMTIgPyAxNCA6IDc7XG5cdHJldHVybiBbdHlwZV07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMzMgOyBbTVMtWExTQl0gMi41Ljk3LjI0ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdBdHRyQmF4Y2VsKGJsb2IpIHtcblx0dmFyIGJpdFNlbWkgPSBibG9iW2Jsb2IubCsxXSAmIDB4MDE7IC8qIDEgPSB2b2xhdGlsZSAqL1xuXHR2YXIgYml0QmF4Y2VsID0gMTtcblx0YmxvYi5sICs9IDQ7XG5cdHJldHVybiBbYml0U2VtaSwgYml0QmF4Y2VsXTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC4zNCA7IFtNUy1YTFNCXSAyLjUuOTcuMjUgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0F0dHJDaG9vc2UoYmxvYiwgbGVuZ3RoLCBvcHRzKS8qOkFycmF5PG51bWJlcj4qLyB7XG5cdGJsb2IubCArPTI7XG5cdHZhciBvZmZzZXQgPSBibG9iLnJlYWRfc2hpZnQob3B0cyAmJiBvcHRzLmJpZmYgPT0gMiA/IDEgOiAyKTtcblx0dmFyIG8vKjpBcnJheTxudW1iZXI+Ki8gPSBbXTtcblx0Lyogb2Zmc2V0IGlzIDEgbGVzcyB0aGFuIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgKi9cblx0Zm9yKHZhciBpID0gMDsgaSA8PSBvZmZzZXQ7ICsraSkgby5wdXNoKGJsb2IucmVhZF9zaGlmdChvcHRzICYmIG9wdHMuYmlmZiA9PSAyID8gMSA6IDIpKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMzUgOyBbTVMtWExTQl0gMi41Ljk3LjI2ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdBdHRyR290byhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGJpdEdvdG8gPSAoYmxvYltibG9iLmwrMV0gJiAweEZGKSA/IDEgOiAwO1xuXHRibG9iLmwgKz0gMjtcblx0cmV0dXJuIFtiaXRHb3RvLCBibG9iLnJlYWRfc2hpZnQob3B0cyAmJiBvcHRzLmJpZmYgPT0gMiA/IDEgOiAyKV07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMzYgOyBbTVMtWExTQl0gMi41Ljk3LjI3ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdBdHRySWYoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciBiaXRJZiA9IChibG9iW2Jsb2IubCsxXSAmIDB4RkYpID8gMSA6IDA7XG5cdGJsb2IubCArPSAyO1xuXHRyZXR1cm4gW2JpdElmLCBibG9iLnJlYWRfc2hpZnQob3B0cyAmJiBvcHRzLmJpZmYgPT0gMiA/IDEgOiAyKV07XG59XG5cbi8qIFtNUy1YTFNCXSAyLjUuOTcuMjggKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0F0dHJJZkVycm9yKGJsb2IpIHtcblx0dmFyIGJpdElmID0gKGJsb2JbYmxvYi5sKzFdICYgMHhGRikgPyAxIDogMDtcblx0YmxvYi5sICs9IDI7XG5cdHJldHVybiBbYml0SWYsIGJsb2IucmVhZF9zaGlmdCgyKV07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguMzcgOyBbTVMtWExTQl0gMi41Ljk3LjI5ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdBdHRyU2VtaShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGJpdFNlbWkgPSAoYmxvYltibG9iLmwrMV0gJiAweEZGKSA/IDEgOiAwO1xuXHRibG9iLmwgKz0gb3B0cyAmJiBvcHRzLmJpZmYgPT0gMiA/IDMgOiA0O1xuXHRyZXR1cm4gW2JpdFNlbWldO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjQwIDsgW01TLVhMU0JdIDIuNS45Ny4zMiAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXR0clNwYWNlVHlwZShibG9iLyo6OiwgbGVuZ3RoKi8pIHtcblx0dmFyIHR5cGUgPSBibG9iLnJlYWRfc2hpZnQoMSksIGNjaCA9IGJsb2IucmVhZF9zaGlmdCgxKTtcblx0cmV0dXJuIFt0eXBlLCBjY2hdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjM4IDsgW01TLVhMU0JdIDIuNS45Ny4zMCAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXR0clNwYWNlKGJsb2IpIHtcblx0YmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHRyZXR1cm4gcGFyc2VfUHRnQXR0clNwYWNlVHlwZShibG9iLCAyKTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC4zOSA7IFtNUy1YTFNCXSAyLjUuOTcuMzEgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0F0dHJTcGFjZVNlbWkoYmxvYikge1xuXHRibG9iLnJlYWRfc2hpZnQoMik7XG5cdHJldHVybiBwYXJzZV9QdGdBdHRyU3BhY2VUeXBlKGJsb2IsIDIpO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4Ljg0IDsgW01TLVhMU0JdIDIuNS45Ny42OCBUT0RPICovXG5mdW5jdGlvbiBwYXJzZV9QdGdSZWYoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdC8vdmFyIHB0ZyA9IGJsb2JbYmxvYi5sXSAmIDB4MUY7XG5cdHZhciB0eXBlID0gKGJsb2JbYmxvYi5sXSAmIDB4NjApPj41O1xuXHRibG9iLmwgKz0gMTtcblx0dmFyIGxvYyA9IHBhcnNlX1JnY2VMb2MoYmxvYiwgMCwgb3B0cyk7XG5cdHJldHVybiBbdHlwZSwgbG9jXTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC44OCA7IFtNUy1YTFNCXSAyLjUuOTcuNzIgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnUmVmTihibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHR5cGUgPSAoYmxvYltibG9iLmxdICYgMHg2MCk+PjU7XG5cdGJsb2IubCArPSAxO1xuXHR2YXIgbG9jID0gcGFyc2VfUmdjZUxvY1JlbChibG9iLCAwLCBvcHRzKTtcblx0cmV0dXJuIFt0eXBlLCBsb2NdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4Ljg1IDsgW01TLVhMU0JdIDIuNS45Ny42OSBUT0RPICovXG5mdW5jdGlvbiBwYXJzZV9QdGdSZWYzZChibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHR5cGUgPSAoYmxvYltibG9iLmxdICYgMHg2MCk+PjU7XG5cdGJsb2IubCArPSAxO1xuXHR2YXIgaXh0aSA9IGJsb2IucmVhZF9zaGlmdCgyKTsgLy8gWHRpSW5kZXhcblx0aWYob3B0cyAmJiBvcHRzLmJpZmYgPT0gNSkgYmxvYi5sICs9IDEyO1xuXHR2YXIgbG9jID0gcGFyc2VfUmdjZUxvYyhibG9iLCAwLCBvcHRzKTsgLy8gVE9ETzogb3IgUmdjZUxvY1JlbFxuXHRyZXR1cm4gW3R5cGUsIGl4dGksIGxvY107XG59XG5cblxuLyogW01TLVhMU10gMi41LjE5OC42MiA7IFtNUy1YTFNCXSAyLjUuOTcuNDUgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnRnVuYyhibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0Ly92YXIgcHRnID0gYmxvYltibG9iLmxdICYgMHgxRjtcblx0dmFyIHR5cGUgPSAoYmxvYltibG9iLmxdICYgMHg2MCk+PjU7XG5cdGJsb2IubCArPSAxO1xuXHR2YXIgaWZ0YWIgPSBibG9iLnJlYWRfc2hpZnQob3B0cyAmJiBvcHRzLmJpZmYgPD0gMyA/IDEgOiAyKTtcblx0cmV0dXJuIFtGdGFiQXJnY1tpZnRhYl0sIEZ0YWJbaWZ0YWJdLCB0eXBlXTtcbn1cbi8qIFtNUy1YTFNdIDIuNS4xOTguNjMgOyBbTVMtWExTQl0gMi41Ljk3LjQ2IFRPRE8gKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0Z1bmNWYXIoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciB0eXBlID0gYmxvYltibG9iLmwrK107XG5cdHZhciBjcGFyYW1zID0gYmxvYi5yZWFkX3NoaWZ0KDEpLCB0YWIgPSBvcHRzICYmIG9wdHMuYmlmZiA8PSAzID8gWyh0eXBlID09IDB4NTggPyAtMSA6IDApLCBibG9iLnJlYWRfc2hpZnQoMSldOiBwYXJzZXRhYihibG9iKTtcblx0cmV0dXJuIFtjcGFyYW1zLCAodGFiWzBdID09PSAwID8gRnRhYiA6IENldGFiKVt0YWJbMV1dXTtcbn1cblxuZnVuY3Rpb24gcGFyc2V0YWIoYmxvYikge1xuXHRyZXR1cm4gW2Jsb2JbYmxvYi5sKzFdPj43LCBibG9iLnJlYWRfc2hpZnQoMikgJiAweDdGRkZdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjQxIDsgW01TLVhMU0JdIDIuNS45Ny4zMyAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnQXR0clN1bShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0YmxvYi5sICs9IG9wdHMgJiYgb3B0cy5iaWZmID09IDIgPyAzIDogNDsgcmV0dXJuO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjU4IDsgW01TLVhMU0JdIDIuNS45Ny40MCAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnRXhwKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRibG9iLmwrKztcblx0aWYob3B0cyAmJiBvcHRzLmJpZmYgPT0gMTIpIHJldHVybiBbYmxvYi5yZWFkX3NoaWZ0KDQsICdpJyksIDBdO1xuXHR2YXIgcm93ID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgY29sID0gYmxvYi5yZWFkX3NoaWZ0KG9wdHMgJiYgb3B0cy5iaWZmID09IDIgPyAxIDogMik7XG5cdHJldHVybiBbcm93LCBjb2xdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjU3IDsgW01TLVhMU0JdIDIuNS45Ny4zOSAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnRXJyKGJsb2IpIHsgYmxvYi5sKys7IHJldHVybiBCRXJyW2Jsb2IucmVhZF9zaGlmdCgxKV07IH1cblxuLyogW01TLVhMU10gMi41LjE5OC42NiA7IFtNUy1YTFNCXSAyLjUuOTcuNDkgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z0ludChibG9iKSB7IGJsb2IubCsrOyByZXR1cm4gYmxvYi5yZWFkX3NoaWZ0KDIpOyB9XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguNDIgOyBbTVMtWExTQl0gMi41Ljk3LjM0ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdCb29sKGJsb2IpIHsgYmxvYi5sKys7IHJldHVybiBibG9iLnJlYWRfc2hpZnQoMSkhPT0wO31cblxuLyogW01TLVhMU10gMi41LjE5OC43OSA7IFtNUy1YTFNCXSAyLjUuOTcuNjMgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z051bShibG9iKSB7IGJsb2IubCsrOyByZXR1cm4gcGFyc2VfWG51bShibG9iLCA4KTsgfVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4Ljg5IDsgW01TLVhMU0JdIDIuNS45Ny43NCAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnU3RyKGJsb2IsIGxlbmd0aCwgb3B0cykgeyBibG9iLmwrKzsgcmV0dXJuIHBhcnNlX1Nob3J0WExVbmljb2RlU3RyaW5nKGJsb2IsIGxlbmd0aC0xLCBvcHRzKTsgfVxuXG4vKiBbTVMtWExTXSAyLjUuMTkyLjExMiArIDIuNS4xOTIuMTF7Myw0LDUsNiw3fSAqL1xuLyogW01TLVhMU0JdIDIuNS45Ny45MyArIDIuNS45Ny45ezQsNSw2LDd9ICovXG5mdW5jdGlvbiBwYXJzZV9TZXJBcihibG9iLCBiaWZmLyo6bnVtYmVyKi8pIHtcblx0dmFyIHZhbCA9IFtibG9iLnJlYWRfc2hpZnQoMSldO1xuXHRpZihiaWZmID09IDEyKSBzd2l0Y2godmFsWzBdKSB7XG5cdFx0Y2FzZSAweDAyOiB2YWxbMF0gPSAweDA0OyBicmVhazsgLyogU2VyQm9vbCAqL1xuXHRcdGNhc2UgMHgwNDogdmFsWzBdID0gMHgxMDsgYnJlYWs7IC8qIFNlckVyciAqL1xuXHRcdGNhc2UgMHgwMDogdmFsWzBdID0gMHgwMTsgYnJlYWs7IC8qIFNlck51bSAqL1xuXHRcdGNhc2UgMHgwMTogdmFsWzBdID0gMHgwMjsgYnJlYWs7IC8qIFNlclN0ciAqL1xuXHR9XG5cdHN3aXRjaCh2YWxbMF0pIHtcblx0XHRjYXNlIDB4MDQ6IC8qIFNlckJvb2wgLS0gYm9vbGVhbiAqL1xuXHRcdFx0dmFsWzFdID0gcGFyc2Vib29sKGJsb2IsIDEpID8gJ1RSVUUnIDogJ0ZBTFNFJztcblx0XHRcdGlmKGJpZmYgIT0gMTIpIGJsb2IubCArPSA3OyBicmVhaztcblx0XHRjYXNlIDB4MjU6IC8qIGFwcGVhcnMgdG8gYmUgYW4gYWxpYXMgKi9cblx0XHRjYXNlIDB4MTA6IC8qIFNlckVyciAtLSBlcnJvciAqL1xuXHRcdFx0dmFsWzFdID0gQkVycltibG9iW2Jsb2IubF1dO1xuXHRcdFx0YmxvYi5sICs9ICgoYmlmZiA9PSAxMikgPyA0IDogOCk7IGJyZWFrO1xuXHRcdGNhc2UgMHgwMDogLyogU2VyTmlsIC0tIGhvbmVzdGx5LCBJJ20gbm90IHN1cmUgaG93IHRvIHJlcHJvZHVjZSB0aGlzICovXG5cdFx0XHRibG9iLmwgKz0gODsgYnJlYWs7XG5cdFx0Y2FzZSAweDAxOiAvKiBTZXJOdW0gLS0gWG51bSAqL1xuXHRcdFx0dmFsWzFdID0gcGFyc2VfWG51bShibG9iLCA4KTsgYnJlYWs7XG5cdFx0Y2FzZSAweDAyOiAvKiBTZXJTdHIgLS0gWExVbmljb2RlU3RyaW5nICg8MjU2IGNoYXJzKSAqL1xuXHRcdFx0dmFsWzFdID0gcGFyc2VfWExVbmljb2RlU3RyaW5nMihibG9iLCAwLCB7YmlmZjpiaWZmID4gMCAmJiBiaWZmIDwgOCA/IDIgOiBiaWZmfSk7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIkJhZCBTZXJBcjogXCIgKyB2YWxbMF0pOyAvKiBVbnJlYWNoYWJsZSAqL1xuXHR9XG5cdHJldHVybiB2YWw7XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguNjEgOyBbTVMtWExTQl0gMi41Ljk3LjQ0ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdFeHRyYU1lbShibG9iLCBjY2UsIG9wdHMpIHtcblx0dmFyIGNvdW50ID0gYmxvYi5yZWFkX3NoaWZ0KChvcHRzLmJpZmYgPT0gMTIpID8gNCA6IDIpO1xuXHR2YXIgb3V0Lyo6QXJyYXk8UmFuZ2U+Ki8gPSBbXTtcblx0Zm9yKHZhciBpID0gMDsgaSAhPSBjb3VudDsgKytpKSBvdXQucHVzaCgoKG9wdHMuYmlmZiA9PSAxMikgPyBwYXJzZV9VbmNoZWNrZWRSZlggOiBwYXJzZV9SZWY4VSkoYmxvYiwgOCkpO1xuXHRyZXR1cm4gb3V0O1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjU5IDsgW01TLVhMU0JdIDIuNS45Ny40MSAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnRXh0cmFBcnJheShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHJvd3MgPSAwLCBjb2xzID0gMDtcblx0aWYob3B0cy5iaWZmID09IDEyKSB7XG5cdFx0cm93cyA9IGJsb2IucmVhZF9zaGlmdCg0KTsgLy8gRFJ3XG5cdFx0Y29scyA9IGJsb2IucmVhZF9zaGlmdCg0KTsgLy8gRENvbFxuXHR9IGVsc2Uge1xuXHRcdGNvbHMgPSAxICsgYmxvYi5yZWFkX3NoaWZ0KDEpOyAvL0RDb2xCeXRlVVxuXHRcdHJvd3MgPSAxICsgYmxvYi5yZWFkX3NoaWZ0KDIpOyAvL0RSd1xuXHR9XG5cdGlmKG9wdHMuYmlmZiA+PSAyICYmIG9wdHMuYmlmZiA8IDgpIHsgLS1yb3dzOyBpZigtLWNvbHMgPT0gMCkgY29scyA9IDB4MTAwOyB9XG5cdC8vICRGbG93SWdub3JlXG5cdGZvcih2YXIgaSA9IDAsIG8vKjpBcnJheTxBcnJheTxhbnk+PiovID0gW107IGkgIT0gcm93cyAmJiAob1tpXSA9IFtdKTsgKytpKVxuXHRcdGZvcih2YXIgaiA9IDA7IGogIT0gY29sczsgKytqKSBvW2ldW2pdID0gcGFyc2VfU2VyQXIoYmxvYiwgb3B0cy5iaWZmKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguNzYgOyBbTVMtWExTQl0gMi41Ljk3LjYwICovXG5mdW5jdGlvbiBwYXJzZV9QdGdOYW1lKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgdHlwZSA9IChibG9iLnJlYWRfc2hpZnQoMSkgPj4+IDUpICYgMHgwMztcblx0dmFyIHcgPSAoIW9wdHMgfHwgKG9wdHMuYmlmZiA+PSA4KSkgPyA0IDogMjtcblx0dmFyIG5hbWVpbmRleCA9IGJsb2IucmVhZF9zaGlmdCh3KTtcblx0c3dpdGNoKG9wdHMuYmlmZikge1xuXHRcdGNhc2UgMjogYmxvYi5sICs9IDU7IGJyZWFrO1xuXHRcdGNhc2UgMzogY2FzZSA0OiBibG9iLmwgKz0gODsgYnJlYWs7XG5cdFx0Y2FzZSA1OiBibG9iLmwgKz0gMTI7IGJyZWFrO1xuXHR9XG5cdHJldHVybiBbdHlwZSwgMCwgbmFtZWluZGV4XTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC43NyA7IFtNUy1YTFNCXSAyLjUuOTcuNjEgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z05hbWVYKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHRpZihvcHRzLmJpZmYgPT0gNSkgcmV0dXJuIHBhcnNlX1B0Z05hbWVYX0JJRkY1KGJsb2IsIGxlbmd0aCwgb3B0cyk7XG5cdHZhciB0eXBlID0gKGJsb2IucmVhZF9zaGlmdCgxKSA+Pj4gNSkgJiAweDAzO1xuXHR2YXIgaXh0aSA9IGJsb2IucmVhZF9zaGlmdCgyKTsgLy8gWHRpSW5kZXhcblx0dmFyIG5hbWVpbmRleCA9IGJsb2IucmVhZF9zaGlmdCg0KTtcblx0cmV0dXJuIFt0eXBlLCBpeHRpLCBuYW1laW5kZXhdO1xufVxuZnVuY3Rpb24gcGFyc2VfUHRnTmFtZVhfQklGRjUoYmxvYi8qOjosIGxlbmd0aCwgb3B0cyovKSB7XG5cdHZhciB0eXBlID0gKGJsb2IucmVhZF9zaGlmdCgxKSA+Pj4gNSkgJiAweDAzO1xuXHR2YXIgaXh0aSA9IGJsb2IucmVhZF9zaGlmdCgyLCAnaScpOyAvLyBYdGlJbmRleFxuXHRibG9iLmwgKz0gODtcblx0dmFyIG5hbWVpbmRleCA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0YmxvYi5sICs9IDEyO1xuXHRyZXR1cm4gW3R5cGUsIGl4dGksIG5hbWVpbmRleF07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguNzAgOyBbTVMtWExTQl0gMi41Ljk3LjU0ICovXG5mdW5jdGlvbiBwYXJzZV9QdGdNZW1BcmVhKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgdHlwZSA9IChibG9iLnJlYWRfc2hpZnQoMSkgPj4+IDUpICYgMHgwMztcblx0YmxvYi5sICs9IChvcHRzICYmIG9wdHMuYmlmZiA9PSAyID8gMyA6IDQpO1xuXHR2YXIgY2NlID0gYmxvYi5yZWFkX3NoaWZ0KG9wdHMgJiYgb3B0cy5iaWZmID09IDIgPyAxIDogMik7XG5cdHJldHVybiBbdHlwZSwgY2NlXTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC43MiA7IFtNUy1YTFNCXSAyLjUuOTcuNTYgKi9cbmZ1bmN0aW9uIHBhcnNlX1B0Z01lbUZ1bmMoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciB0eXBlID0gKGJsb2IucmVhZF9zaGlmdCgxKSA+Pj4gNSkgJiAweDAzO1xuXHR2YXIgY2NlID0gYmxvYi5yZWFkX3NoaWZ0KG9wdHMgJiYgb3B0cy5iaWZmID09IDIgPyAxIDogMik7XG5cdHJldHVybiBbdHlwZSwgY2NlXTtcbn1cblxuXG4vKiBbTVMtWExTXSAyLjUuMTk4Ljg2IDsgW01TLVhMU0JdIDIuNS45Ny42OSAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnUmVmRXJyKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgdHlwZSA9IChibG9iLnJlYWRfc2hpZnQoMSkgPj4+IDUpICYgMHgwMztcblx0YmxvYi5sICs9IDQ7XG5cdGlmKG9wdHMuYmlmZiA8IDgpIGJsb2IubC0tO1xuXHRpZihvcHRzLmJpZmYgPT0gMTIpIGJsb2IubCArPSAyO1xuXHRyZXR1cm4gW3R5cGVdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4Ljg3IDsgW01TLVhMU0JdIDIuNS45Ny43MSAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnUmVmRXJyM2QoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciB0eXBlID0gKGJsb2JbYmxvYi5sKytdICYgMHg2MCkgPj4gNTtcblx0dmFyIGl4dGkgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciB3ID0gNDtcblx0aWYob3B0cykgc3dpdGNoKG9wdHMuYmlmZikge1xuXHRcdGNhc2UgNTogdyA9IDE1OyBicmVhaztcblx0XHRjYXNlIDEyOiB3ID0gNjsgYnJlYWs7XG5cdH1cblx0YmxvYi5sICs9IHc7XG5cdHJldHVybiBbdHlwZSwgaXh0aV07XG59XG5cbi8qIFtNUy1YTFNdIDIuNS4xOTguNzEgOyBbTVMtWExTQl0gMi41Ljk3LjU1ICovXG52YXIgcGFyc2VfUHRnTWVtRXJyID0gcGFyc2Vub29wO1xuLyogW01TLVhMU10gMi41LjE5OC43MyAgOyBbTVMtWExTQl0gMi41Ljk3LjU3ICovXG52YXIgcGFyc2VfUHRnTWVtTm9NZW0gPSBwYXJzZW5vb3A7XG4vKiBbTVMtWExTXSAyLjUuMTk4LjkyICovXG52YXIgcGFyc2VfUHRnVGJsID0gcGFyc2Vub29wO1xuXG5mdW5jdGlvbiBwYXJzZV9QdGdFbGZMb2MoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGJsb2IubCArPSAyO1xuXHRyZXR1cm4gW3BhcnNlX1JnY2VFbGZMb2MoYmxvYiwgNCwgb3B0cyldO1xufVxuZnVuY3Rpb24gcGFyc2VfUHRnRWxmTm9vcChibG9iLyo6OiwgbGVuZ3RoLCBvcHRzKi8pIHtcblx0YmxvYi5sICs9IDY7XG5cdHJldHVybiBbXTtcbn1cbi8qIFtNUy1YTFNdIDIuNS4xOTguNDYgKi9cbnZhciBwYXJzZV9QdGdFbGZDb2wgPSBwYXJzZV9QdGdFbGZMb2M7XG4vKiBbTVMtWExTXSAyLjUuMTk4LjQ3ICovXG52YXIgcGFyc2VfUHRnRWxmQ29sUyA9IHBhcnNlX1B0Z0VsZk5vb3A7XG4vKiBbTVMtWExTXSAyLjUuMTk4LjQ4ICovXG52YXIgcGFyc2VfUHRnRWxmQ29sU1YgPSBwYXJzZV9QdGdFbGZOb29wO1xuLyogW01TLVhMU10gMi41LjE5OC40OSAqL1xudmFyIHBhcnNlX1B0Z0VsZkNvbFYgPSBwYXJzZV9QdGdFbGZMb2M7XG4vKiBbTVMtWExTXSAyLjUuMTk4LjUwICovXG5mdW5jdGlvbiBwYXJzZV9QdGdFbGZMZWwoYmxvYi8qOjosIGxlbmd0aCwgb3B0cyovKSB7XG5cdGJsb2IubCArPSAyO1xuXHRyZXR1cm4gW3BhcnNldWludDE2KGJsb2IpLCBibG9iLnJlYWRfc2hpZnQoMikgJiAweDAxXTtcbn1cbi8qIFtNUy1YTFNdIDIuNS4xOTguNTEgKi9cbnZhciBwYXJzZV9QdGdFbGZSYWRpY2FsID0gcGFyc2VfUHRnRWxmTG9jO1xuLyogW01TLVhMU10gMi41LjE5OC41MiAqL1xudmFyIHBhcnNlX1B0Z0VsZlJhZGljYWxMZWwgPSBwYXJzZV9QdGdFbGZMZWw7XG4vKiBbTVMtWExTXSAyLjUuMTk4LjUzICovXG52YXIgcGFyc2VfUHRnRWxmUmFkaWNhbFMgPSBwYXJzZV9QdGdFbGZOb29wO1xuLyogW01TLVhMU10gMi41LjE5OC41NCAqL1xudmFyIHBhcnNlX1B0Z0VsZlJ3ID0gcGFyc2VfUHRnRWxmTG9jO1xuLyogW01TLVhMU10gMi41LjE5OC41NSAqL1xudmFyIHBhcnNlX1B0Z0VsZlJ3ViA9IHBhcnNlX1B0Z0VsZkxvYztcblxuLyogW01TLVhMU0JdIDIuNS45Ny41MiBUT0RPICovXG52YXIgUHRnTGlzdFJUID0gW1xuXHRcIkRhdGFcIixcblx0XCJBbGxcIixcblx0XCJIZWFkZXJzXCIsXG5cdFwiPz9cIixcblx0XCI/RGF0YTJcIixcblx0XCI/P1wiLFxuXHRcIj9EYXRhSGVhZGVyc1wiLFxuXHRcIj8/XCIsXG5cdFwiVG90YWxzXCIsXG5cdFwiPz9cIixcblx0XCI/P1wiLFxuXHRcIj8/XCIsXG5cdFwiP0RhdGFUb3RhbHNcIixcblx0XCI/P1wiLFxuXHRcIj8/XCIsXG5cdFwiPz9cIixcblx0XCI/Q3VycmVudFwiXG5dO1xuZnVuY3Rpb24gcGFyc2VfUHRnTGlzdChibG9iLyo6OiwgbGVuZ3RoLCBvcHRzKi8pIHtcblx0YmxvYi5sICs9IDI7XG5cdHZhciBpeHRpID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgZmxhZ3MgPSBibG9iLnJlYWRfc2hpZnQoMik7XG5cdHZhciBpZHggPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdHZhciBjID0gYmxvYi5yZWFkX3NoaWZ0KDIpO1xuXHR2YXIgQyA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0dmFyIHJ0ID0gUHRnTGlzdFJUWyhmbGFncyA+PiAyKSAmIDB4MUZdO1xuXHRyZXR1cm4ge2l4dGk6IGl4dGksIGNvbHR5cGU6KGZsYWdzJjB4MyksIHJ0OnJ0LCBpZHg6aWR4LCBjOmMsIEM6Q307XG59XG4vKiBbTVMtWExTXSAyLjUuMTk4LjkxIDsgW01TLVhMU0JdIDIuNS45Ny43NiAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnU3hOYW1lKGJsb2IvKjo6LCBsZW5ndGgsIG9wdHMqLykge1xuXHRibG9iLmwgKz0gMjtcblx0cmV0dXJuIFtibG9iLnJlYWRfc2hpZnQoNCldO1xufVxuXG4vKiBbWExTXSBvbGQgc3BlYyAqL1xuZnVuY3Rpb24gcGFyc2VfUHRnU2hlZXQoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGJsb2IubCArPSA1O1xuXHRibG9iLmwgKz0gMjtcblx0YmxvYi5sICs9IChvcHRzLmJpZmYgPT0gMiA/IDEgOiA0KTtcblx0cmV0dXJuIFtcIlBUR1NIRUVUXCJdO1xufVxuZnVuY3Rpb24gcGFyc2VfUHRnRW5kU2hlZXQoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdGJsb2IubCArPSAob3B0cy5iaWZmID09IDIgPyA0IDogNSk7XG5cdHJldHVybiBbXCJQVEdFTkRTSEVFVFwiXTtcbn1cbmZ1bmN0aW9uIHBhcnNlX1B0Z01lbUFyZWFOKGJsb2IvKjo6LCBsZW5ndGgsIG9wdHMqLykge1xuXHR2YXIgdHlwZSA9IChibG9iLnJlYWRfc2hpZnQoMSkgPj4+IDUpICYgMHgwMztcblx0dmFyIGNjZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0cmV0dXJuIFt0eXBlLCBjY2VdO1xufVxuZnVuY3Rpb24gcGFyc2VfUHRnTWVtTm9NZW1OKGJsb2IvKjo6LCBsZW5ndGgsIG9wdHMqLykge1xuXHR2YXIgdHlwZSA9IChibG9iLnJlYWRfc2hpZnQoMSkgPj4+IDUpICYgMHgwMztcblx0dmFyIGNjZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0cmV0dXJuIFt0eXBlLCBjY2VdO1xufVxuZnVuY3Rpb24gcGFyc2VfUHRnQXR0ck5vb3AoYmxvYi8qOjosIGxlbmd0aCwgb3B0cyovKSB7XG5cdGJsb2IubCArPSA0O1xuXHRyZXR1cm4gWzAsIDBdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjI1IDsgW01TLVhMU0JdIDIuNS45Ny4xNiAqL1xudmFyIFB0Z1R5cGVzID0ge1xuXHQvKjo6WyovMHgwMS8qOjpdKi86IHsgbjonUHRnRXhwJywgZjpwYXJzZV9QdGdFeHAgfSxcblx0Lyo6OlsqLzB4MDIvKjo6XSovOiB7IG46J1B0Z1RibCcsIGY6cGFyc2VfUHRnVGJsIH0sXG5cdC8qOjpbKi8weDAzLyo6Ol0qLzogeyBuOidQdGdBZGQnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MDQvKjo6XSovOiB7IG46J1B0Z1N1YicsIGY6cGFyc2VyZWFkMSB9LFxuXHQvKjo6WyovMHgwNS8qOjpdKi86IHsgbjonUHRnTXVsJywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDA2Lyo6Ol0qLzogeyBuOidQdGdEaXYnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MDcvKjo6XSovOiB7IG46J1B0Z1Bvd2VyJywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDA4Lyo6Ol0qLzogeyBuOidQdGdDb25jYXQnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MDkvKjo6XSovOiB7IG46J1B0Z0x0JywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDBBLyo6Ol0qLzogeyBuOidQdGdMZScsIGY6cGFyc2VyZWFkMSB9LFxuXHQvKjo6WyovMHgwQi8qOjpdKi86IHsgbjonUHRnRXEnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MEMvKjo6XSovOiB7IG46J1B0Z0dlJywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDBELyo6Ol0qLzogeyBuOidQdGdHdCcsIGY6cGFyc2VyZWFkMSB9LFxuXHQvKjo6WyovMHgwRS8qOjpdKi86IHsgbjonUHRnTmUnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MEYvKjo6XSovOiB7IG46J1B0Z0lzZWN0JywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDEwLyo6Ol0qLzogeyBuOidQdGdVbmlvbicsIGY6cGFyc2VyZWFkMSB9LFxuXHQvKjo6WyovMHgxMS8qOjpdKi86IHsgbjonUHRnUmFuZ2UnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MTIvKjo6XSovOiB7IG46J1B0Z1VwbHVzJywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDEzLyo6Ol0qLzogeyBuOidQdGdVbWludXMnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MTQvKjo6XSovOiB7IG46J1B0Z1BlcmNlbnQnLCBmOnBhcnNlcmVhZDEgfSxcblx0Lyo6OlsqLzB4MTUvKjo6XSovOiB7IG46J1B0Z1BhcmVuJywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDE2Lyo6Ol0qLzogeyBuOidQdGdNaXNzQXJnJywgZjpwYXJzZXJlYWQxIH0sXG5cdC8qOjpbKi8weDE3Lyo6Ol0qLzogeyBuOidQdGdTdHInLCBmOnBhcnNlX1B0Z1N0ciB9LFxuXHQvKjo6WyovMHgxQS8qOjpdKi86IHsgbjonUHRnU2hlZXQnLCBmOnBhcnNlX1B0Z1NoZWV0IH0sXG5cdC8qOjpbKi8weDFCLyo6Ol0qLzogeyBuOidQdGdFbmRTaGVldCcsIGY6cGFyc2VfUHRnRW5kU2hlZXQgfSxcblx0Lyo6OlsqLzB4MUMvKjo6XSovOiB7IG46J1B0Z0VycicsIGY6cGFyc2VfUHRnRXJyIH0sXG5cdC8qOjpbKi8weDFELyo6Ol0qLzogeyBuOidQdGdCb29sJywgZjpwYXJzZV9QdGdCb29sIH0sXG5cdC8qOjpbKi8weDFFLyo6Ol0qLzogeyBuOidQdGdJbnQnLCBmOnBhcnNlX1B0Z0ludCB9LFxuXHQvKjo6WyovMHgxRi8qOjpdKi86IHsgbjonUHRnTnVtJywgZjpwYXJzZV9QdGdOdW0gfSxcblx0Lyo6OlsqLzB4MjAvKjo6XSovOiB7IG46J1B0Z0FycmF5JywgZjpwYXJzZV9QdGdBcnJheSB9LFxuXHQvKjo6WyovMHgyMS8qOjpdKi86IHsgbjonUHRnRnVuYycsIGY6cGFyc2VfUHRnRnVuYyB9LFxuXHQvKjo6WyovMHgyMi8qOjpdKi86IHsgbjonUHRnRnVuY1ZhcicsIGY6cGFyc2VfUHRnRnVuY1ZhciB9LFxuXHQvKjo6WyovMHgyMy8qOjpdKi86IHsgbjonUHRnTmFtZScsIGY6cGFyc2VfUHRnTmFtZSB9LFxuXHQvKjo6WyovMHgyNC8qOjpdKi86IHsgbjonUHRnUmVmJywgZjpwYXJzZV9QdGdSZWYgfSxcblx0Lyo6OlsqLzB4MjUvKjo6XSovOiB7IG46J1B0Z0FyZWEnLCBmOnBhcnNlX1B0Z0FyZWEgfSxcblx0Lyo6OlsqLzB4MjYvKjo6XSovOiB7IG46J1B0Z01lbUFyZWEnLCBmOnBhcnNlX1B0Z01lbUFyZWEgfSxcblx0Lyo6OlsqLzB4MjcvKjo6XSovOiB7IG46J1B0Z01lbUVycicsIGY6cGFyc2VfUHRnTWVtRXJyIH0sXG5cdC8qOjpbKi8weDI4Lyo6Ol0qLzogeyBuOidQdGdNZW1Ob01lbScsIGY6cGFyc2VfUHRnTWVtTm9NZW0gfSxcblx0Lyo6OlsqLzB4MjkvKjo6XSovOiB7IG46J1B0Z01lbUZ1bmMnLCBmOnBhcnNlX1B0Z01lbUZ1bmMgfSxcblx0Lyo6OlsqLzB4MkEvKjo6XSovOiB7IG46J1B0Z1JlZkVycicsIGY6cGFyc2VfUHRnUmVmRXJyIH0sXG5cdC8qOjpbKi8weDJCLyo6Ol0qLzogeyBuOidQdGdBcmVhRXJyJywgZjpwYXJzZV9QdGdBcmVhRXJyIH0sXG5cdC8qOjpbKi8weDJDLyo6Ol0qLzogeyBuOidQdGdSZWZOJywgZjpwYXJzZV9QdGdSZWZOIH0sXG5cdC8qOjpbKi8weDJELyo6Ol0qLzogeyBuOidQdGdBcmVhTicsIGY6cGFyc2VfUHRnQXJlYU4gfSxcblx0Lyo6OlsqLzB4MkUvKjo6XSovOiB7IG46J1B0Z01lbUFyZWFOJywgZjpwYXJzZV9QdGdNZW1BcmVhTiB9LFxuXHQvKjo6WyovMHgyRi8qOjpdKi86IHsgbjonUHRnTWVtTm9NZW1OJywgZjpwYXJzZV9QdGdNZW1Ob01lbU4gfSxcblx0Lyo6OlsqLzB4MzkvKjo6XSovOiB7IG46J1B0Z05hbWVYJywgZjpwYXJzZV9QdGdOYW1lWCB9LFxuXHQvKjo6WyovMHgzQS8qOjpdKi86IHsgbjonUHRnUmVmM2QnLCBmOnBhcnNlX1B0Z1JlZjNkIH0sXG5cdC8qOjpbKi8weDNCLyo6Ol0qLzogeyBuOidQdGdBcmVhM2QnLCBmOnBhcnNlX1B0Z0FyZWEzZCB9LFxuXHQvKjo6WyovMHgzQy8qOjpdKi86IHsgbjonUHRnUmVmRXJyM2QnLCBmOnBhcnNlX1B0Z1JlZkVycjNkIH0sXG5cdC8qOjpbKi8weDNELyo6Ol0qLzogeyBuOidQdGdBcmVhRXJyM2QnLCBmOnBhcnNlX1B0Z0FyZWFFcnIzZCB9LFxuXHQvKjo6WyovMHhGRi8qOjpdKi86IHt9XG59O1xuLyogVGhlc2UgYXJlIGR1cGxpY2F0ZWQgaW4gdGhlIFB0Z1R5cGVzIHRhYmxlICovXG52YXIgUHRnRHVwZXMgPSB7XG5cdC8qOjpbKi8weDQwLyo6Ol0qLzogMHgyMCwgLyo6OlsqLzB4NjAvKjo6XSovOiAweDIwLFxuXHQvKjo6WyovMHg0MS8qOjpdKi86IDB4MjEsIC8qOjpbKi8weDYxLyo6Ol0qLzogMHgyMSxcblx0Lyo6OlsqLzB4NDIvKjo6XSovOiAweDIyLCAvKjo6WyovMHg2Mi8qOjpdKi86IDB4MjIsXG5cdC8qOjpbKi8weDQzLyo6Ol0qLzogMHgyMywgLyo6OlsqLzB4NjMvKjo6XSovOiAweDIzLFxuXHQvKjo6WyovMHg0NC8qOjpdKi86IDB4MjQsIC8qOjpbKi8weDY0Lyo6Ol0qLzogMHgyNCxcblx0Lyo6OlsqLzB4NDUvKjo6XSovOiAweDI1LCAvKjo6WyovMHg2NS8qOjpdKi86IDB4MjUsXG5cdC8qOjpbKi8weDQ2Lyo6Ol0qLzogMHgyNiwgLyo6OlsqLzB4NjYvKjo6XSovOiAweDI2LFxuXHQvKjo6WyovMHg0Ny8qOjpdKi86IDB4MjcsIC8qOjpbKi8weDY3Lyo6Ol0qLzogMHgyNyxcblx0Lyo6OlsqLzB4NDgvKjo6XSovOiAweDI4LCAvKjo6WyovMHg2OC8qOjpdKi86IDB4MjgsXG5cdC8qOjpbKi8weDQ5Lyo6Ol0qLzogMHgyOSwgLyo6OlsqLzB4NjkvKjo6XSovOiAweDI5LFxuXHQvKjo6WyovMHg0QS8qOjpdKi86IDB4MkEsIC8qOjpbKi8weDZBLyo6Ol0qLzogMHgyQSxcblx0Lyo6OlsqLzB4NEIvKjo6XSovOiAweDJCLCAvKjo6WyovMHg2Qi8qOjpdKi86IDB4MkIsXG5cdC8qOjpbKi8weDRDLyo6Ol0qLzogMHgyQywgLyo6OlsqLzB4NkMvKjo6XSovOiAweDJDLFxuXHQvKjo6WyovMHg0RC8qOjpdKi86IDB4MkQsIC8qOjpbKi8weDZELyo6Ol0qLzogMHgyRCxcblx0Lyo6OlsqLzB4NEUvKjo6XSovOiAweDJFLCAvKjo6WyovMHg2RS8qOjpdKi86IDB4MkUsXG5cdC8qOjpbKi8weDRGLyo6Ol0qLzogMHgyRiwgLyo6OlsqLzB4NkYvKjo6XSovOiAweDJGLFxuXHQvKjo6WyovMHg1OC8qOjpdKi86IDB4MjIsIC8qOjpbKi8weDc4Lyo6Ol0qLzogMHgyMixcblx0Lyo6OlsqLzB4NTkvKjo6XSovOiAweDM5LCAvKjo6WyovMHg3OS8qOjpdKi86IDB4MzksXG5cdC8qOjpbKi8weDVBLyo6Ol0qLzogMHgzQSwgLyo6OlsqLzB4N0EvKjo6XSovOiAweDNBLFxuXHQvKjo6WyovMHg1Qi8qOjpdKi86IDB4M0IsIC8qOjpbKi8weDdCLyo6Ol0qLzogMHgzQixcblx0Lyo6OlsqLzB4NUMvKjo6XSovOiAweDNDLCAvKjo6WyovMHg3Qy8qOjpdKi86IDB4M0MsXG5cdC8qOjpbKi8weDVELyo6Ol0qLzogMHgzRCwgLyo6OlsqLzB4N0QvKjo6XSovOiAweDNEXG59O1xuXG52YXIgUHRnMTggPSB7XG5cdC8qOjpbKi8weDAxLyo6Ol0qLzogeyBuOidQdGdFbGZMZWwnLCBmOnBhcnNlX1B0Z0VsZkxlbCB9LFxuXHQvKjo6WyovMHgwMi8qOjpdKi86IHsgbjonUHRnRWxmUncnLCBmOnBhcnNlX1B0Z0VsZlJ3IH0sXG5cdC8qOjpbKi8weDAzLyo6Ol0qLzogeyBuOidQdGdFbGZDb2wnLCBmOnBhcnNlX1B0Z0VsZkNvbCB9LFxuXHQvKjo6WyovMHgwNi8qOjpdKi86IHsgbjonUHRnRWxmUndWJywgZjpwYXJzZV9QdGdFbGZSd1YgfSxcblx0Lyo6OlsqLzB4MDcvKjo6XSovOiB7IG46J1B0Z0VsZkNvbFYnLCBmOnBhcnNlX1B0Z0VsZkNvbFYgfSxcblx0Lyo6OlsqLzB4MEEvKjo6XSovOiB7IG46J1B0Z0VsZlJhZGljYWwnLCBmOnBhcnNlX1B0Z0VsZlJhZGljYWwgfSxcblx0Lyo6OlsqLzB4MEIvKjo6XSovOiB7IG46J1B0Z0VsZlJhZGljYWxTJywgZjpwYXJzZV9QdGdFbGZSYWRpY2FsUyB9LFxuXHQvKjo6WyovMHgwRC8qOjpdKi86IHsgbjonUHRnRWxmQ29sUycsIGY6cGFyc2VfUHRnRWxmQ29sUyB9LFxuXHQvKjo6WyovMHgwRi8qOjpdKi86IHsgbjonUHRnRWxmQ29sU1YnLCBmOnBhcnNlX1B0Z0VsZkNvbFNWIH0sXG5cdC8qOjpbKi8weDEwLyo6Ol0qLzogeyBuOidQdGdFbGZSYWRpY2FsTGVsJywgZjpwYXJzZV9QdGdFbGZSYWRpY2FsTGVsIH0sXG5cdC8qOjpbKi8weDE5Lyo6Ol0qLzogeyBuOidQdGdMaXN0JywgZjpwYXJzZV9QdGdMaXN0IH0sXG5cdC8qOjpbKi8weDFELyo6Ol0qLzogeyBuOidQdGdTeE5hbWUnLCBmOnBhcnNlX1B0Z1N4TmFtZSB9LFxuXHQvKjo6WyovMHhGRi8qOjpdKi86IHt9XG59O1xudmFyIFB0ZzE5ID0ge1xuXHQvKjo6WyovMHgwMC8qOjpdKi86IHsgbjonUHRnQXR0ck5vb3AnLCBmOnBhcnNlX1B0Z0F0dHJOb29wIH0sXG5cdC8qOjpbKi8weDAxLyo6Ol0qLzogeyBuOidQdGdBdHRyU2VtaScsIGY6cGFyc2VfUHRnQXR0clNlbWkgfSxcblx0Lyo6OlsqLzB4MDIvKjo6XSovOiB7IG46J1B0Z0F0dHJJZicsIGY6cGFyc2VfUHRnQXR0cklmIH0sXG5cdC8qOjpbKi8weDA0Lyo6Ol0qLzogeyBuOidQdGdBdHRyQ2hvb3NlJywgZjpwYXJzZV9QdGdBdHRyQ2hvb3NlIH0sXG5cdC8qOjpbKi8weDA4Lyo6Ol0qLzogeyBuOidQdGdBdHRyR290bycsIGY6cGFyc2VfUHRnQXR0ckdvdG8gfSxcblx0Lyo6OlsqLzB4MTAvKjo6XSovOiB7IG46J1B0Z0F0dHJTdW0nLCBmOnBhcnNlX1B0Z0F0dHJTdW0gfSxcblx0Lyo6OlsqLzB4MjAvKjo6XSovOiB7IG46J1B0Z0F0dHJCYXhjZWwnLCBmOnBhcnNlX1B0Z0F0dHJCYXhjZWwgfSxcblx0Lyo6OlsqLzB4MjEvKjo6XSovOiB7IG46J1B0Z0F0dHJCYXhjZWwnLCBmOnBhcnNlX1B0Z0F0dHJCYXhjZWwgfSxcblx0Lyo6OlsqLzB4NDAvKjo6XSovOiB7IG46J1B0Z0F0dHJTcGFjZScsIGY6cGFyc2VfUHRnQXR0clNwYWNlIH0sXG5cdC8qOjpbKi8weDQxLyo6Ol0qLzogeyBuOidQdGdBdHRyU3BhY2VTZW1pJywgZjpwYXJzZV9QdGdBdHRyU3BhY2VTZW1pIH0sXG5cdC8qOjpbKi8weDgwLyo6Ol0qLzogeyBuOidQdGdBdHRySWZFcnJvcicsIGY6cGFyc2VfUHRnQXR0cklmRXJyb3IgfSxcblx0Lyo6OlsqLzB4RkYvKjo6XSovOiB7fVxufTtcblxuLyogW01TLVhMU10gMi41LjE5OC4xMDMgOyBbTVMtWExTQl0gMi41Ljk3Ljg3ICovXG5mdW5jdGlvbiBwYXJzZV9SZ2JFeHRyYShibG9iLCBsZW5ndGgsIHJnY2UsIG9wdHMpIHtcblx0aWYob3B0cy5iaWZmIDwgOCkgcmV0dXJuIHBhcnNlbm9vcChibG9iLCBsZW5ndGgpO1xuXHR2YXIgdGFyZ2V0ID0gYmxvYi5sICsgbGVuZ3RoO1xuXHR2YXIgbyA9IFtdO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9PSByZ2NlLmxlbmd0aDsgKytpKSB7XG5cdFx0c3dpdGNoKHJnY2VbaV1bMF0pIHtcblx0XHRcdGNhc2UgJ1B0Z0FycmF5JzogLyogUHRnQXJyYXkgLT4gUHRnRXh0cmFBcnJheSAqL1xuXHRcdFx0XHRyZ2NlW2ldWzFdID0gcGFyc2VfUHRnRXh0cmFBcnJheShibG9iLCAwLCBvcHRzKTtcblx0XHRcdFx0by5wdXNoKHJnY2VbaV1bMV0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ1B0Z01lbUFyZWEnOiAvKiBQdGdNZW1BcmVhIC0+IFB0Z0V4dHJhTWVtICovXG5cdFx0XHRcdHJnY2VbaV1bMl0gPSBwYXJzZV9QdGdFeHRyYU1lbShibG9iLCByZ2NlW2ldWzFdLCBvcHRzKTtcblx0XHRcdFx0by5wdXNoKHJnY2VbaV1bMl0pO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ1B0Z0V4cCc6IC8qIFB0Z0V4cCAtPiBQdGdFeHRyYUNvbCAqL1xuXHRcdFx0XHRpZihvcHRzICYmIG9wdHMuYmlmZiA9PSAxMikge1xuXHRcdFx0XHRcdHJnY2VbaV1bMV1bMV0gPSBibG9iLnJlYWRfc2hpZnQoNCk7XG5cdFx0XHRcdFx0by5wdXNoKHJnY2VbaV1bMV0pO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnTGlzdCc6IC8qIFRPRE86IFB0Z0xpc3QgLT4gUHRnRXh0cmFMaXN0ICovXG5cdFx0XHRjYXNlICdQdGdFbGZSYWRpY2FsUyc6IC8qIFRPRE86IFB0Z0VsZlJhZGljYWxTIC0+IFB0Z0V4dHJhRWxmICovXG5cdFx0XHRjYXNlICdQdGdFbGZDb2xTJzogLyogVE9ETzogUHRnRWxmQ29sUyAtPiBQdGdFeHRyYUVsZiAqL1xuXHRcdFx0Y2FzZSAnUHRnRWxmQ29sU1YnOiAvKiBUT0RPOiBQdGdFbGZDb2xTViAtPiBQdGdFeHRyYUVsZiAqL1xuXHRcdFx0XHR0aHJvdyBcIlVuc3VwcG9ydGVkIFwiICsgcmdjZVtpXVswXTtcblx0XHRcdGRlZmF1bHQ6IGJyZWFrO1xuXHRcdH1cblx0fVxuXHRsZW5ndGggPSB0YXJnZXQgLSBibG9iLmw7XG5cdC8qIG5vdGU6IHRoaXMgaXMgdGVjaG5pY2FsbHkgYW4gZXJyb3IgYnV0IEV4Y2VsIGRpc3JlZ2FyZHMgKi9cblx0Ly9pZih0YXJnZXQgIT09IGJsb2IubCAmJiBibG9iLmwgIT09IHRhcmdldCAtIGxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKHRhcmdldCArIFwiICE9IFwiICsgYmxvYi5sKTtcblx0aWYobGVuZ3RoICE9PSAwKSBvLnB1c2gocGFyc2Vub29wKGJsb2IsIGxlbmd0aCkpO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC4xMDQgOyBbTVMtWExTQl0gMi41Ljk3Ljg4ICovXG5mdW5jdGlvbiBwYXJzZV9SZ2NlKGJsb2IsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgdGFyZ2V0ID0gYmxvYi5sICsgbGVuZ3RoO1xuXHR2YXIgUiwgaWQsIHB0Z3MgPSBbXTtcblx0d2hpbGUodGFyZ2V0ICE9IGJsb2IubCkge1xuXHRcdGxlbmd0aCA9IHRhcmdldCAtIGJsb2IubDtcblx0XHRpZCA9IGJsb2JbYmxvYi5sXTtcblx0XHRSID0gUHRnVHlwZXNbaWRdIHx8IFB0Z1R5cGVzW1B0Z0R1cGVzW2lkXV07XG5cdFx0aWYoaWQgPT09IDB4MTggfHwgaWQgPT09IDB4MTkpIFIgPSAoaWQgPT09IDB4MTggPyBQdGcxOCA6IFB0ZzE5KVtibG9iW2Jsb2IubCArIDFdXTtcblx0XHRpZighUiB8fCAhUi5mKSB7IC8qcHRncy5wdXNoKi8ocGFyc2Vub29wKGJsb2IsIGxlbmd0aCkpOyB9XG5cdFx0ZWxzZSB7IHB0Z3MucHVzaChbUi5uLCBSLmYoYmxvYiwgbGVuZ3RoLCBvcHRzKV0pOyB9XG5cdH1cblx0cmV0dXJuIHB0Z3M7XG59XG5cbmZ1bmN0aW9uIHN0cmluZ2lmeV9hcnJheShmLyo6QXJyYXk8QXJyYXk8c3RyaW5nPj4qLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBmLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIHggPSBmW2ldLCByLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdFx0Zm9yKHZhciBqID0gMDsgaiA8IHgubGVuZ3RoOyArK2opIHtcblx0XHRcdHZhciB5ID0geFtqXTtcblx0XHRcdGlmKHkpIHN3aXRjaCh5WzBdKSB7XG5cdFx0XHRcdC8vIFRPRE86IGhhbmRsZSBlbWJlZGRlZCBxdW90ZXNcblx0XHRcdFx0Y2FzZSAweDAyOlxuXHRcdFx0XHRcdC8qOjogaWYodHlwZW9mIHlbMV0gIT0gJ3N0cmluZycpIHRocm93IFwidW5yZWFjaGFibGVcIjsgKi9cblx0XHRcdFx0XHRyLnB1c2goJ1wiJyArIHlbMV0ucmVwbGFjZSgvXCIvZywnXCJcIicpICsgJ1wiJyk7IGJyZWFrO1xuXHRcdFx0XHRkZWZhdWx0OiByLnB1c2goeVsxXSk7XG5cdFx0XHR9IGVsc2Ugci5wdXNoKFwiXCIpO1xuXHRcdH1cblx0XHRvLnB1c2goci5qb2luKFwiLFwiKSk7XG5cdH1cblx0cmV0dXJuIG8uam9pbihcIjtcIik7XG59XG5cbi8qIFtNUy1YTFNdIDIuMi4yIDsgW01TLVhMU0JdIDIuMi4yIFRPRE8gKi9cbnZhciBQdGdCaW5PcCA9IHtcblx0UHRnQWRkOiBcIitcIixcblx0UHRnQ29uY2F0OiBcIiZcIixcblx0UHRnRGl2OiBcIi9cIixcblx0UHRnRXE6IFwiPVwiLFxuXHRQdGdHZTogXCI+PVwiLFxuXHRQdGdHdDogXCI+XCIsXG5cdFB0Z0xlOiBcIjw9XCIsXG5cdFB0Z0x0OiBcIjxcIixcblx0UHRnTXVsOiBcIipcIixcblx0UHRnTmU6IFwiPD5cIixcblx0UHRnUG93ZXI6IFwiXlwiLFxuXHRQdGdTdWI6IFwiLVwiXG59O1xuXG4vLyBMaXN0IG9mIGludmFsaWQgY2hhcmFjdGVycyBuZWVkcyB0byBiZSB0ZXN0ZWQgZnVydGhlclxuZnVuY3Rpb24gZm9ybXVsYV9xdW90ZV9zaGVldF9uYW1lKHNuYW1lLyo6c3RyaW5nKi8sIG9wdHMpLyo6c3RyaW5nKi8ge1xuXHRpZighc25hbWUgJiYgIShvcHRzICYmIG9wdHMuYmlmZiA8PSA1ICYmIG9wdHMuYmlmZiA+PSAyKSkgdGhyb3cgbmV3IEVycm9yKFwiZW1wdHkgc2hlZXQgbmFtZVwiKTtcblx0aWYgKC9bXlxcd1xcdTRFMDAtXFx1OUZGRlxcdTMwNDAtXFx1MzBGRl0vLnRlc3Qoc25hbWUpKSByZXR1cm4gXCInXCIgKyBzbmFtZSArIFwiJ1wiO1xuXHRyZXR1cm4gc25hbWU7XG59XG5mdW5jdGlvbiBnZXRfaXh0aV9yYXcoc3VwYm9va3MsIGl4dGkvKjpudW1iZXIqLywgb3B0cykvKjpzdHJpbmcqLyB7XG5cdGlmKCFzdXBib29rcykgcmV0dXJuIFwiU0gzM1RKU0VSUjBcIjtcblx0aWYob3B0cy5iaWZmID4gOCAmJiAoIXN1cGJvb2tzLlhUSSB8fCAhc3VwYm9va3MuWFRJW2l4dGldKSkgcmV0dXJuIHN1cGJvb2tzLlNoZWV0TmFtZXNbaXh0aV07XG5cdGlmKCFzdXBib29rcy5YVEkpIHJldHVybiBcIlNIMzNUSlNFUlI2XCI7XG5cdHZhciBYVEkgPSBzdXBib29rcy5YVElbaXh0aV07XG5cdGlmKG9wdHMuYmlmZiA8IDgpIHtcblx0XHRpZihpeHRpID4gMTAwMDApIGl4dGktPSA2NTUzNjtcblx0XHRpZihpeHRpIDwgMCkgaXh0aSA9IC1peHRpO1xuXHRcdHJldHVybiBpeHRpID09IDAgPyBcIlwiIDogc3VwYm9va3MuWFRJW2l4dGkgLSAxXTtcblx0fVxuXHRpZighWFRJKSByZXR1cm4gXCJTSDMzVEpTRVJSMVwiO1xuXHR2YXIgbyA9IFwiXCI7XG5cdGlmKG9wdHMuYmlmZiA+IDgpIHN3aXRjaChzdXBib29rc1tYVElbMF1dWzBdKSB7XG5cdFx0Y2FzZSAweDAxNjU6IC8qICdCcnRTdXBTZWxmJyAqL1xuXHRcdFx0byA9IFhUSVsxXSA9PSAtMSA/IFwiI1JFRlwiIDogc3VwYm9va3MuU2hlZXROYW1lc1tYVElbMV1dO1xuXHRcdFx0cmV0dXJuIFhUSVsxXSA9PSBYVElbMl0gPyBvIDogbyArIFwiOlwiICsgc3VwYm9va3MuU2hlZXROYW1lc1tYVElbMl1dO1xuXHRcdGNhc2UgMHgwMTY2OiAvKiAnQnJ0U3VwU2FtZScgKi9cblx0XHRcdGlmKG9wdHMuU0lEICE9IG51bGwpIHJldHVybiBzdXBib29rcy5TaGVldE5hbWVzW29wdHMuU0lEXTtcblx0XHRcdHJldHVybiBcIlNIMzNUSlNTQU1FXCIgKyBzdXBib29rc1tYVElbMF1dWzBdO1xuXHRcdGNhc2UgMHgwMTYzOiAvKiAnQnJ0U3VwQm9va1NyYycgKi9cblx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRkZWZhdWx0OiByZXR1cm4gXCJTSDMzVEpTU1JDXCIgKyBzdXBib29rc1tYVElbMF1dWzBdO1xuXHR9XG5cdHN3aXRjaChzdXBib29rc1tYVElbMF1dWzBdWzBdKSB7XG5cdFx0Y2FzZSAweDA0MDE6XG5cdFx0XHRvID0gWFRJWzFdID09IC0xID8gXCIjUkVGXCIgOiAoc3VwYm9va3MuU2hlZXROYW1lc1tYVElbMV1dIHx8IFwiU0gzM1RKU0VSUjNcIik7XG5cdFx0XHRyZXR1cm4gWFRJWzFdID09IFhUSVsyXSA/IG8gOiBvICsgXCI6XCIgKyBzdXBib29rcy5TaGVldE5hbWVzW1hUSVsyXV07XG5cdFx0Y2FzZSAweDNBMDE6IHJldHVybiBzdXBib29rc1tYVElbMF1dLnNsaWNlKDEpLm1hcChmdW5jdGlvbihuYW1lKSB7IHJldHVybiBuYW1lLk5hbWU7IH0pLmpvaW4oXCI7O1wiKTsgLy9yZXR1cm4gXCJTSDMzVEpTRVJSOFwiO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRpZighc3VwYm9va3NbWFRJWzBdXVswXVszXSkgcmV0dXJuIFwiU0gzM1RKU0VSUjJcIjtcblx0XHRcdG8gPSBYVElbMV0gPT0gLTEgPyBcIiNSRUZcIiA6IChzdXBib29rc1tYVElbMF1dWzBdWzNdW1hUSVsxXV0gfHwgXCJTSDMzVEpTRVJSNFwiKTtcblx0XHRcdHJldHVybiBYVElbMV0gPT0gWFRJWzJdID8gbyA6IG8gKyBcIjpcIiArIHN1cGJvb2tzW1hUSVswXV1bMF1bM11bWFRJWzJdXTtcblx0fVxufVxuZnVuY3Rpb24gZ2V0X2l4dGkoc3VwYm9va3MsIGl4dGkvKjpudW1iZXIqLywgb3B0cykvKjpzdHJpbmcqLyB7XG5cdHZhciBpeHRpcmF3ID0gZ2V0X2l4dGlfcmF3KHN1cGJvb2tzLCBpeHRpLCBvcHRzKTtcblx0cmV0dXJuIGl4dGlyYXcgPT0gXCIjUkVGXCIgPyBpeHRpcmF3IDogZm9ybXVsYV9xdW90ZV9zaGVldF9uYW1lKGl4dGlyYXcsIG9wdHMpO1xufVxuZnVuY3Rpb24gc3RyaW5naWZ5X2Zvcm11bGEoZm9ybXVsYS8qQXJyYXk8YW55PiovLCByYW5nZSwgY2VsbC8qOmFueSovLCBzdXBib29rcywgb3B0cykvKjpzdHJpbmcqLyB7XG5cdHZhciBiaWZmID0gKG9wdHMgJiYgb3B0cy5iaWZmKSB8fCA4O1xuXHR2YXIgX3JhbmdlID0gLypyYW5nZSAhPSBudWxsID8gcmFuZ2UgOiovIHtzOntjOjAsIHI6MH0sZTp7YzowLCByOjB9fTtcblx0dmFyIHN0YWNrLyo6QXJyYXk8c3RyaW5nPiovID0gW10sIGUxLCBlMiwgLyo6OnR5cGUsKi8gYy8qOkNlbGxBZGRyZXNzKi8sIGl4dGk9MCwgbmFtZWlkeD0wLCByLCBzbmFtZT1cIlwiO1xuXHRpZighZm9ybXVsYVswXSB8fCAhZm9ybXVsYVswXVswXSkgcmV0dXJuIFwiXCI7XG5cdHZhciBsYXN0X3NwID0gLTEsIHNwID0gXCJcIjtcblx0Zm9yKHZhciBmZiA9IDAsIGZmbGVuID0gZm9ybXVsYVswXS5sZW5ndGg7IGZmIDwgZmZsZW47ICsrZmYpIHtcblx0XHR2YXIgZiA9IGZvcm11bGFbMF1bZmZdO1xuXHRcdHN3aXRjaChmWzBdKSB7XG5cdFx0XHRjYXNlICdQdGdVbWludXMnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjkzICovXG5cdFx0XHRcdHN0YWNrLnB1c2goXCItXCIgKyBzdGFjay5wb3AoKSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnVXBsdXMnOiAvKiBbTVMtWExTXSAyLjUuMTk4Ljk1ICovXG5cdFx0XHRcdHN0YWNrLnB1c2goXCIrXCIgKyBzdGFjay5wb3AoKSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnUGVyY2VudCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguODEgKi9cblx0XHRcdFx0c3RhY2sucHVzaChzdGFjay5wb3AoKSArIFwiJVwiKTsgYnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0FkZCc6ICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguMjYgKi9cblx0XHRcdGNhc2UgJ1B0Z0NvbmNhdCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNDMgKi9cblx0XHRcdGNhc2UgJ1B0Z0Rpdic6ICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNDUgKi9cblx0XHRcdGNhc2UgJ1B0Z0VxJzogICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNTYgKi9cblx0XHRcdGNhc2UgJ1B0Z0dlJzogICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNjQgKi9cblx0XHRcdGNhc2UgJ1B0Z0d0JzogICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNjUgKi9cblx0XHRcdGNhc2UgJ1B0Z0xlJzogICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNjggKi9cblx0XHRcdGNhc2UgJ1B0Z0x0JzogICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNjkgKi9cblx0XHRcdGNhc2UgJ1B0Z011bCc6ICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNzUgKi9cblx0XHRcdGNhc2UgJ1B0Z05lJzogICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguNzggKi9cblx0XHRcdGNhc2UgJ1B0Z1Bvd2VyJzogIC8qIFtNUy1YTFNdIDIuNS4xOTguODIgKi9cblx0XHRcdGNhc2UgJ1B0Z1N1Yic6ICAgIC8qIFtNUy1YTFNdIDIuNS4xOTguOTAgKi9cblx0XHRcdFx0ZTEgPSBzdGFjay5wb3AoKTsgZTIgPSBzdGFjay5wb3AoKTtcblx0XHRcdFx0aWYobGFzdF9zcCA+PSAwKSB7XG5cdFx0XHRcdFx0c3dpdGNoKGZvcm11bGFbMF1bbGFzdF9zcF1bMV1bMF0pIHtcblx0XHRcdFx0XHRcdGNhc2UgMDpcblx0XHRcdFx0XHRcdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRcdFx0XHRcdFx0c3AgPSBmaWxsKFwiIFwiLCBmb3JtdWxhWzBdW2xhc3Rfc3BdWzFdWzFdKTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlIDE6XG5cdFx0XHRcdFx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRcdFx0XHRcdHNwID0gZmlsbChcIlxcclwiLCBmb3JtdWxhWzBdW2xhc3Rfc3BdWzFdWzFdKTsgYnJlYWs7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHRzcCA9IFwiXCI7XG5cdFx0XHRcdFx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRcdFx0XHRcdGlmKG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIFB0Z0F0dHJTcGFjZVR5cGUgXCIgKyBmb3JtdWxhWzBdW2xhc3Rfc3BdWzFdWzBdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZTIgPSBlMiArIHNwO1xuXHRcdFx0XHRcdGxhc3Rfc3AgPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdGFjay5wdXNoKGUyK1B0Z0Jpbk9wW2ZbMF1dK2UxKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0lzZWN0JzogLyogW01TLVhMU10gMi41LjE5OC42NyAqL1xuXHRcdFx0XHRlMSA9IHN0YWNrLnBvcCgpOyBlMiA9IHN0YWNrLnBvcCgpO1xuXHRcdFx0XHRzdGFjay5wdXNoKGUyK1wiIFwiK2UxKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdQdGdVbmlvbic6IC8qIFtNUy1YTFNdIDIuNS4xOTguOTQgKi9cblx0XHRcdFx0ZTEgPSBzdGFjay5wb3AoKTsgZTIgPSBzdGFjay5wb3AoKTtcblx0XHRcdFx0c3RhY2sucHVzaChlMitcIixcIitlMSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnUmFuZ2UnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjgzICovXG5cdFx0XHRcdGUxID0gc3RhY2sucG9wKCk7IGUyID0gc3RhY2sucG9wKCk7XG5cdFx0XHRcdHN0YWNrLnB1c2goZTIrXCI6XCIrZTEpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnQXR0ckNob29zZSc6IC8qIFtNUy1YTFNdIDIuNS4xOTguMzQgKi9cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdQdGdBdHRyR290byc6IC8qIFtNUy1YTFNdIDIuNS4xOTguMzUgKi9cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdQdGdBdHRySWYnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjM2ICovXG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnQXR0cklmRXJyb3InOiAvKiBbTVMtWExTQl0gMi41Ljk3LjI4ICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cblx0XHRcdGNhc2UgJ1B0Z1JlZic6IC8qIFtNUy1YTFNdIDIuNS4xOTguODQgKi9cblx0XHRcdFx0Lyo6OnR5cGUgPSBmWzFdWzBdOyAqL2MgPSBzaGlmdF9jZWxsX3hscygoZlsxXVsxXS8qOmFueSovKSwgX3JhbmdlLCBvcHRzKTtcblx0XHRcdFx0c3RhY2sucHVzaChlbmNvZGVfY2VsbF94bHMoYywgYmlmZikpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ1B0Z1JlZk4nOiAvKiBbTVMtWExTXSAyLjUuMTk4Ljg4ICovXG5cdFx0XHRcdC8qOjp0eXBlID0gZlsxXVswXTsgKi9jID0gY2VsbCA/IHNoaWZ0X2NlbGxfeGxzKChmWzFdWzFdLyo6YW55Ki8pLCBjZWxsLCBvcHRzKSA6IChmWzFdWzFdLyo6YW55Ki8pO1xuXHRcdFx0XHRzdGFjay5wdXNoKGVuY29kZV9jZWxsX3hscyhjLCBiaWZmKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnUmVmM2QnOiAvKiBbTVMtWExTXSAyLjUuMTk4Ljg1ICovXG5cdFx0XHRcdC8qOjp0eXBlID0gZlsxXVswXTsgKi9peHRpID0gLyo6Ok51bWJlcigqL2ZbMV1bMV0vKjo6KSovOyBjID0gc2hpZnRfY2VsbF94bHMoKGZbMV1bMl0vKjphbnkqLyksIF9yYW5nZSwgb3B0cyk7XG5cdFx0XHRcdHNuYW1lID0gZ2V0X2l4dGkoc3VwYm9va3MsIGl4dGksIG9wdHMpO1xuXHRcdFx0XHR2YXIgdyA9IHNuYW1lOyAvKiBJRTkgZmFpbHMgb24gZGVmaW5lZCBuYW1lcyAqLyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdFx0XHRcdHN0YWNrLnB1c2goc25hbWUgKyBcIiFcIiArIGVuY29kZV9jZWxsX3hscyhjLCBiaWZmKSk7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdGdW5jJzogLyogW01TLVhMU10gMi41LjE5OC42MiAqL1xuXHRcdFx0Y2FzZSAnUHRnRnVuY1Zhcic6IC8qIFtNUy1YTFNdIDIuNS4xOTguNjMgKi9cblx0XHRcdFx0LyogZlsxXSA9IFthcmdjLCBmdW5jLCB0eXBlXSAqL1xuXHRcdFx0XHR2YXIgYXJnYy8qOm51bWJlciovID0gKGZbMV1bMF0vKjphbnkqLyksIGZ1bmMvKjpzdHJpbmcqLyA9IChmWzFdWzFdLyo6YW55Ki8pO1xuXHRcdFx0XHRpZighYXJnYykgYXJnYyA9IDA7XG5cdFx0XHRcdGFyZ2MgJj0gMHg3Rjtcblx0XHRcdFx0dmFyIGFyZ3MgPSBhcmdjID09IDAgPyBbXSA6IHN0YWNrLnNsaWNlKC1hcmdjKTtcblx0XHRcdFx0c3RhY2subGVuZ3RoIC09IGFyZ2M7XG5cdFx0XHRcdGlmKGZ1bmMgPT09ICdVc2VyJykgZnVuYyA9IGFyZ3Muc2hpZnQoKTtcblx0XHRcdFx0c3RhY2sucHVzaChmdW5jICsgXCIoXCIgKyBhcmdzLmpvaW4oXCIsXCIpICsgXCIpXCIpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnQm9vbCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNDIgKi9cblx0XHRcdFx0c3RhY2sucHVzaChmWzFdID8gXCJUUlVFXCIgOiBcIkZBTFNFXCIpOyBicmVhaztcblx0XHRcdGNhc2UgJ1B0Z0ludCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNjYgKi9cblx0XHRcdFx0c3RhY2sucHVzaCgvKjo6U3RyaW5nKCovZlsxXS8qOjopKi8pOyBicmVhaztcblx0XHRcdGNhc2UgJ1B0Z051bSc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNzkgVE9ETzogcHJlY2lzaW9uPyAqL1xuXHRcdFx0XHRzdGFjay5wdXNoKFN0cmluZyhmWzFdKSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnU3RyJzogLyogW01TLVhMU10gMi41LjE5OC44OSAqL1xuXHRcdFx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdFx0XHRzdGFjay5wdXNoKCdcIicgKyBmWzFdLnJlcGxhY2UoL1wiL2csICdcIlwiJykgKyAnXCInKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdQdGdFcnInOiAvKiBbTVMtWExTXSAyLjUuMTk4LjU3ICovXG5cdFx0XHRcdHN0YWNrLnB1c2goLyo6OlN0cmluZygqL2ZbMV0vKjo6KSovKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdQdGdBcmVhTic6IC8qIFtNUy1YTFNdIDIuNS4xOTguMzEgVE9ETyAqL1xuXHRcdFx0XHQvKjo6dHlwZSA9IGZbMV1bMF07ICovciA9IHNoaWZ0X3JhbmdlX3hscyhmWzFdWzFdLCBjZWxsID8ge3M6Y2VsbH0gOiBfcmFuZ2UsIG9wdHMpO1xuXHRcdFx0XHRzdGFjay5wdXNoKGVuY29kZV9yYW5nZV94bHMoKHIvKjphbnkqLyksIG9wdHMpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdQdGdBcmVhJzogLyogW01TLVhMU10gMi41LjE5OC4yNyBUT0RPOiBmaXhlZCBwb2ludHMgKi9cblx0XHRcdFx0Lyo6OnR5cGUgPSBmWzFdWzBdOyAqL3IgPSBzaGlmdF9yYW5nZV94bHMoZlsxXVsxXSwgX3JhbmdlLCBvcHRzKTtcblx0XHRcdFx0c3RhY2sucHVzaChlbmNvZGVfcmFuZ2VfeGxzKChyLyo6YW55Ki8pLCBvcHRzKSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnUHRnQXJlYTNkJzogLyogW01TLVhMU10gMi41LjE5OC4yOCBUT0RPICovXG5cdFx0XHRcdC8qOjp0eXBlID0gZlsxXVswXTsgKi9peHRpID0gLyo6Ok51bWJlcigqL2ZbMV1bMV0vKjo6KSovOyByID0gZlsxXVsyXTtcblx0XHRcdFx0c25hbWUgPSBnZXRfaXh0aShzdXBib29rcywgaXh0aSwgb3B0cyk7XG5cdFx0XHRcdHN0YWNrLnB1c2goc25hbWUgKyBcIiFcIiArIGVuY29kZV9yYW5nZV94bHMoKHIvKjphbnkqLyksIG9wdHMpKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdQdGdBdHRyU3VtJzogLyogW01TLVhMU10gMi41LjE5OC40MSAqL1xuXHRcdFx0XHRzdGFjay5wdXNoKFwiU1VNKFwiICsgc3RhY2sucG9wKCkgKyBcIilcIik7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdBdHRyQmF4Y2VsJzogLyogW01TLVhMU10gMi41LjE5OC4zMyAqL1xuXHRcdFx0Y2FzZSAnUHRnQXR0clNlbWknOiAvKiBbTVMtWExTXSAyLjUuMTk4LjM3ICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdOYW1lJzogLyogW01TLVhMU10gMi41LjE5OC43NiA7IFtNUy1YTFNCXSAyLjUuOTcuNjAgVE9ETzogcmV2aXNpb25zICovXG5cdFx0XHRcdC8qIGZbMV0gPSB0eXBlLCAwLCBuYW1laW5kZXggKi9cblx0XHRcdFx0bmFtZWlkeCA9IChmWzFdWzJdLyo6YW55Ki8pO1xuXHRcdFx0XHR2YXIgbGJsID0gKHN1cGJvb2tzLm5hbWVzfHxbXSlbbmFtZWlkeC0xXSB8fCAoc3VwYm9va3NbMF18fFtdKVtuYW1laWR4XTtcblx0XHRcdFx0dmFyIG5hbWUgPSBsYmwgPyBsYmwuTmFtZSA6IFwiU0gzM1RKU05BTUVcIiArIFN0cmluZyhuYW1laWR4KTtcblx0XHRcdFx0LyogW01TLVhMU0JdIDIuNS45Ny4xMCBGdGFiIC0tIGxhc3QgdmVyaWZpZWQgMjAyMjAyMDQgKi9cblx0XHRcdFx0aWYobmFtZSAmJiBuYW1lLnNsaWNlKDAsNikgPT0gXCJfeGxmbi5cIiAmJiAhb3B0cy54bGZuKSBuYW1lID0gbmFtZS5zbGljZSg2KTtcblx0XHRcdFx0c3RhY2sucHVzaChuYW1lKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z05hbWVYJzogLyogW01TLVhMU10gMi41LjE5OC43NyA7IFtNUy1YTFNCXSAyLjUuOTcuNjEgVE9ETzogcmV2aXNpb25zICovXG5cdFx0XHRcdC8qIGZbMV0gPSB0eXBlLCBpeHRpLCBuYW1laW5kZXggKi9cblx0XHRcdFx0dmFyIGJvb2tpZHgvKjpudW1iZXIqLyA9IChmWzFdWzFdLyo6YW55Ki8pOyBuYW1laWR4ID0gKGZbMV1bMl0vKjphbnkqLyk7IHZhciBleHRlcm5ib29rO1xuXHRcdFx0XHQvKiBUT0RPOiBQcm9wZXJseSBoYW5kbGUgbWlzc2luZyB2YWx1ZXMgLS0gdGhpcyBzaG91bGQgYmUgdXNpbmcgZ2V0X2l4dGlfcmF3IHByaW1hcmlseSAqL1xuXHRcdFx0XHRpZihvcHRzLmJpZmYgPD0gNSkge1xuXHRcdFx0XHRcdGlmKGJvb2tpZHggPCAwKSBib29raWR4ID0gLWJvb2tpZHg7XG5cdFx0XHRcdFx0aWYoc3VwYm9va3NbYm9va2lkeF0pIGV4dGVybmJvb2sgPSBzdXBib29rc1tib29raWR4XVtuYW1laWR4XTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR2YXIgbyA9IFwiXCI7XG5cdFx0XHRcdFx0aWYoKChzdXBib29rc1tib29raWR4XXx8W10pWzBdfHxbXSlbMF0gPT0gMHgzQTAxKXsvKiBlbXB0eSAqL31cblx0XHRcdFx0XHRlbHNlIGlmKCgoc3VwYm9va3NbYm9va2lkeF18fFtdKVswXXx8W10pWzBdID09IDB4MDQwMSl7XG5cdFx0XHRcdFx0XHRpZihzdXBib29rc1tib29raWR4XVtuYW1laWR4XSAmJiBzdXBib29rc1tib29raWR4XVtuYW1laWR4XS5pdGFiID4gMCkge1xuXHRcdFx0XHRcdFx0XHRvID0gc3VwYm9va3MuU2hlZXROYW1lc1tzdXBib29rc1tib29raWR4XVtuYW1laWR4XS5pdGFiLTFdICsgXCIhXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgbyA9IHN1cGJvb2tzLlNoZWV0TmFtZXNbbmFtZWlkeC0xXSsgXCIhXCI7XG5cdFx0XHRcdFx0aWYoc3VwYm9va3NbYm9va2lkeF0gJiYgc3VwYm9va3NbYm9va2lkeF1bbmFtZWlkeF0pIG8gKz0gc3VwYm9va3NbYm9va2lkeF1bbmFtZWlkeF0uTmFtZTtcblx0XHRcdFx0XHRlbHNlIGlmKHN1cGJvb2tzWzBdICYmIHN1cGJvb2tzWzBdW25hbWVpZHhdKSBvICs9IHN1cGJvb2tzWzBdW25hbWVpZHhdLk5hbWU7XG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHR2YXIgaXh0aWRhdGEgPSAoZ2V0X2l4dGlfcmF3KHN1cGJvb2tzLCBib29raWR4LCBvcHRzKXx8XCJcIikuc3BsaXQoXCI7O1wiKTtcblx0XHRcdFx0XHRcdGlmKGl4dGlkYXRhW25hbWVpZHggLSAxXSkgbyA9IGl4dGlkYXRhW25hbWVpZHggLSAxXTsgLy8gVE9ETzogY29uZmlybSB0aGlzIGlzIGNvcnJlY3Rcblx0XHRcdFx0XHRcdGVsc2UgbyArPSBcIlNIMzNUSlNFUlJYXCI7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHN0YWNrLnB1c2gobyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIWV4dGVybmJvb2spIGV4dGVybmJvb2sgPSB7TmFtZTogXCJTSDMzVEpTRVJSWVwifTtcblx0XHRcdFx0c3RhY2sucHVzaChleHRlcm5ib29rLk5hbWUpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnUGFyZW4nOiAvKiBbTVMtWExTXSAyLjUuMTk4LjgwICovXG5cdFx0XHRcdHZhciBscCA9ICcoJywgcnAgPSAnKSc7XG5cdFx0XHRcdGlmKGxhc3Rfc3AgPj0gMCkge1xuXHRcdFx0XHRcdHNwID0gXCJcIjtcblx0XHRcdFx0XHRzd2l0Y2goZm9ybXVsYVswXVtsYXN0X3NwXVsxXVswXSkge1xuXHRcdFx0XHRcdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRcdFx0XHRcdGNhc2UgMjogbHAgPSBmaWxsKFwiIFwiLCBmb3JtdWxhWzBdW2xhc3Rfc3BdWzFdWzFdKSArIGxwOyBicmVhaztcblx0XHRcdFx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRcdFx0XHRjYXNlIDM6IGxwID0gZmlsbChcIlxcclwiLCBmb3JtdWxhWzBdW2xhc3Rfc3BdWzFdWzFdKSArIGxwOyBicmVhaztcblx0XHRcdFx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRcdFx0XHRjYXNlIDQ6IHJwID0gZmlsbChcIiBcIiwgZm9ybXVsYVswXVtsYXN0X3NwXVsxXVsxXSkgKyBycDsgYnJlYWs7XG5cdFx0XHRcdFx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdFx0XHRcdFx0Y2FzZSA1OiBycCA9IGZpbGwoXCJcXHJcIiwgZm9ybXVsYVswXVtsYXN0X3NwXVsxXVsxXSkgKyBycDsgYnJlYWs7XG5cdFx0XHRcdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRcdFx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdFx0XHRcdFx0XHRpZihvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBQdGdBdHRyU3BhY2VUeXBlIFwiICsgZm9ybXVsYVswXVtsYXN0X3NwXVsxXVswXSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxhc3Rfc3AgPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdGFjay5wdXNoKGxwICsgc3RhY2sucG9wKCkgKyBycCk7IGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdSZWZFcnInOiAvKiBbTVMtWExTXSAyLjUuMTk4Ljg2ICovXG5cdFx0XHRcdHN0YWNrLnB1c2goJyNSRUYhJyk7IGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdSZWZFcnIzZCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguODcgKi9cblx0XHRcdFx0c3RhY2sucHVzaCgnI1JFRiEnKTsgYnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0V4cCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNTggVE9ETyAqL1xuXHRcdFx0XHRjID0ge2M6KGZbMV1bMV0vKjphbnkqLykscjooZlsxXVswXS8qOmFueSovKX07XG5cdFx0XHRcdHZhciBxID0gKHtjOiBjZWxsLmMsIHI6Y2VsbC5yfS8qOmFueSovKTtcblx0XHRcdFx0aWYoc3VwYm9va3Muc2hhcmVkZltlbmNvZGVfY2VsbChjKV0pIHtcblx0XHRcdFx0XHR2YXIgcGFyc2VkZiA9IChzdXBib29rcy5zaGFyZWRmW2VuY29kZV9jZWxsKGMpXSk7XG5cdFx0XHRcdFx0c3RhY2sucHVzaChzdHJpbmdpZnlfZm9ybXVsYShwYXJzZWRmLCBfcmFuZ2UsIHEsIHN1cGJvb2tzLCBvcHRzKSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dmFyIGZuZCA9IGZhbHNlO1xuXHRcdFx0XHRcdGZvcihlMT0wO2UxIT1zdXBib29rcy5hcnJheWYubGVuZ3RoOyArK2UxKSB7XG5cdFx0XHRcdFx0XHQvKiBUT0RPOiBzaG91bGQgYmUgc29tZXRoaW5nIGxpa2UgcmFuZ2VfaGFzICovXG5cdFx0XHRcdFx0XHRlMiA9IHN1cGJvb2tzLmFycmF5ZltlMV07XG5cdFx0XHRcdFx0XHRpZihjLmMgPCBlMlswXS5zLmMgfHwgYy5jID4gZTJbMF0uZS5jKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdGlmKGMuciA8IGUyWzBdLnMuciB8fCBjLnIgPiBlMlswXS5lLnIpIGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0c3RhY2sucHVzaChzdHJpbmdpZnlfZm9ybXVsYShlMlsxXSwgX3JhbmdlLCBxLCBzdXBib29rcywgb3B0cykpO1xuXHRcdFx0XHRcdFx0Zm5kID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZighZm5kKSBzdGFjay5wdXNoKC8qOjpTdHJpbmcoKi9mWzFdLyo6OikqLyk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0FycmF5JzogLyogW01TLVhMU10gMi41LjE5OC4zMiBUT0RPICovXG5cdFx0XHRcdHN0YWNrLnB1c2goXCJ7XCIgKyBzdHJpbmdpZnlfYXJyYXkoLyo6OigqL2ZbMV0vKjo6IDphbnkpKi8pICsgXCJ9XCIpO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnTWVtQXJlYSc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNzAgVE9ETzogY29uZmlybSB0aGlzIGlzIGEgbm9uLWRpc3BsYXkgKi9cblx0XHRcdFx0Ly9zdGFjay5wdXNoKFwiKFwiICsgZlsyXS5tYXAoZW5jb2RlX3JhbmdlKS5qb2luKFwiLFwiKSArIFwiKVwiKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0F0dHJTcGFjZSc6IC8qIFtNUy1YTFNdIDIuNS4xOTguMzggKi9cblx0XHRcdGNhc2UgJ1B0Z0F0dHJTcGFjZVNlbWknOiAvKiBbTVMtWExTXSAyLjUuMTk4LjM5ICovXG5cdFx0XHRcdGxhc3Rfc3AgPSBmZjtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z1RibCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguOTIgVE9ETyAqL1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnTWVtRXJyJzogLyogW01TLVhMU10gMi41LjE5OC43MSAqL1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnTWlzc0FyZyc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNzQgKi9cblx0XHRcdFx0c3RhY2sucHVzaChcIlwiKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0FyZWFFcnInOiAvKiBbTVMtWExTXSAyLjUuMTk4LjI5ICovXG5cdFx0XHRcdHN0YWNrLnB1c2goXCIjUkVGIVwiKTsgYnJlYWs7XG5cblx0XHRcdGNhc2UgJ1B0Z0FyZWFFcnIzZCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguMzAgKi9cblx0XHRcdFx0c3RhY2sucHVzaChcIiNSRUYhXCIpOyBicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnTGlzdCc6IC8qIFtNUy1YTFNCXSAyLjUuOTcuNTIgKi9cblx0XHRcdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRcdFx0c3RhY2sucHVzaChcIlRhYmxlXCIgKyBmWzFdLmlkeCArIFwiWyNcIiArIGZbMV0ucnQgKyBcIl1cIik7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdNZW1BcmVhTic6XG5cdFx0XHRjYXNlICdQdGdNZW1Ob01lbU4nOlxuXHRcdFx0Y2FzZSAnUHRnQXR0ck5vb3AnOlxuXHRcdFx0Y2FzZSAnUHRnU2hlZXQnOlxuXHRcdFx0Y2FzZSAnUHRnRW5kU2hlZXQnOlxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnUHRnTWVtRnVuYyc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNzIgVE9ETyAqL1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ1B0Z01lbU5vTWVtJzogLyogW01TLVhMU10gMi41LjE5OC43MyBUT0RPICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdQdGdFbGZDb2wnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjQ2ICovXG5cdFx0XHRjYXNlICdQdGdFbGZDb2xTJzogLyogW01TLVhMU10gMi41LjE5OC40NyAqL1xuXHRcdFx0Y2FzZSAnUHRnRWxmQ29sU1YnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjQ4ICovXG5cdFx0XHRjYXNlICdQdGdFbGZDb2xWJzogLyogW01TLVhMU10gMi41LjE5OC40OSAqL1xuXHRcdFx0Y2FzZSAnUHRnRWxmTGVsJzogLyogW01TLVhMU10gMi41LjE5OC41MCAqL1xuXHRcdFx0Y2FzZSAnUHRnRWxmUmFkaWNhbCc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNTEgKi9cblx0XHRcdGNhc2UgJ1B0Z0VsZlJhZGljYWxMZWwnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjUyICovXG5cdFx0XHRjYXNlICdQdGdFbGZSYWRpY2FsUyc6IC8qIFtNUy1YTFNdIDIuNS4xOTguNTMgKi9cblx0XHRcdGNhc2UgJ1B0Z0VsZlJ3JzogLyogW01TLVhMU10gMi41LjE5OC41NCAqL1xuXHRcdFx0Y2FzZSAnUHRnRWxmUndWJzogLyogW01TLVhMU10gMi41LjE5OC41NSAqL1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBFTEZzXCIpO1xuXG5cdFx0XHRjYXNlICdQdGdTeE5hbWUnOiAvKiBbTVMtWExTXSAyLjUuMTk4LjkxIFRPRE8gLS0gZmluZCBhIHRlc3QgY2FzZSAqL1xuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1VucmVjb2duaXplZCBGb3JtdWxhIFRva2VuOiAnICsgU3RyaW5nKGYpKTtcblx0XHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcignVW5yZWNvZ25pemVkIEZvcm11bGEgVG9rZW46ICcgKyBTdHJpbmcoZikpO1xuXHRcdH1cblx0XHR2YXIgUHRnTm9uRGlzcCA9IFsnUHRnQXR0clNwYWNlJywgJ1B0Z0F0dHJTcGFjZVNlbWknLCAnUHRnQXR0ckdvdG8nXTtcblx0XHRpZihvcHRzLmJpZmYgIT0gMykgaWYobGFzdF9zcCA+PSAwICYmIFB0Z05vbkRpc3AuaW5kZXhPZihmb3JtdWxhWzBdW2ZmXVswXSkgPT0gLTEpIHtcblx0XHRcdGYgPSBmb3JtdWxhWzBdW2xhc3Rfc3BdO1xuXHRcdFx0dmFyIF9sZWZ0ID0gdHJ1ZTtcblx0XHRcdHN3aXRjaChmWzFdWzBdKSB7XG5cdFx0XHRcdC8qIG5vdGU6IHNvbWUgYmFkIFhMU0IgZmlsZXMgb21pdCB0aGUgUHRnUGFyZW4gKi9cblx0XHRcdFx0Y2FzZSA0OiBfbGVmdCA9IGZhbHNlO1xuXHRcdFx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0XHRcdGNhc2UgMDpcblx0XHRcdFx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdFx0XHRcdHNwID0gZmlsbChcIiBcIiwgZlsxXVsxXSk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDU6IF9sZWZ0ID0gZmFsc2U7XG5cdFx0XHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRcdFx0c3AgPSBmaWxsKFwiXFxyXCIsIGZbMV1bMV0pOyBicmVhaztcblx0XHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0XHRzcCA9IFwiXCI7XG5cdFx0XHRcdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRcdFx0XHRpZihvcHRzLldURikgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBQdGdBdHRyU3BhY2VUeXBlIFwiICsgZlsxXVswXSk7XG5cdFx0XHR9XG5cdFx0XHRzdGFjay5wdXNoKChfbGVmdCA/IHNwIDogXCJcIikgKyBzdGFjay5wb3AoKSArIChfbGVmdCA/IFwiXCIgOiBzcCkpO1xuXHRcdFx0bGFzdF9zcCA9IC0xO1xuXHRcdH1cblx0fVxuXHRpZihzdGFjay5sZW5ndGggPiAxICYmIG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJiYWQgZm9ybXVsYSBzdGFja1wiKTtcblx0cmV0dXJuIHN0YWNrWzBdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjEgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfQXJyYXlQYXJzZWRGb3JtdWxhKGJsb2IsIGxlbmd0aCwgb3B0cy8qOjosIHJlZiovKSB7XG5cdHZhciB0YXJnZXQgPSBibG9iLmwgKyBsZW5ndGgsIGxlbiA9IG9wdHMuYmlmZiA9PSAyID8gMSA6IDI7XG5cdHZhciByZ2NiLCBjY2UgPSBibG9iLnJlYWRfc2hpZnQobGVuKTsgLy8gbGVuZ3RoIG9mIHJnY2Vcblx0aWYoY2NlID09IDB4RkZGRikgcmV0dXJuIFtbXSxwYXJzZW5vb3AoYmxvYiwgbGVuZ3RoLTIpXTtcblx0dmFyIHJnY2UgPSBwYXJzZV9SZ2NlKGJsb2IsIGNjZSwgb3B0cyk7XG5cdGlmKGxlbmd0aCAhPT0gY2NlICsgbGVuKSByZ2NiID0gcGFyc2VfUmdiRXh0cmEoYmxvYiwgbGVuZ3RoIC0gY2NlIC0gbGVuLCByZ2NlLCBvcHRzKTtcblx0YmxvYi5sID0gdGFyZ2V0O1xuXHRyZXR1cm4gW3JnY2UsIHJnY2JdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjMgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfWExTQ2VsbFBhcnNlZEZvcm11bGEoYmxvYiwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciB0YXJnZXQgPSBibG9iLmwgKyBsZW5ndGgsIGxlbiA9IG9wdHMuYmlmZiA9PSAyID8gMSA6IDI7XG5cdHZhciByZ2NiLCBjY2UgPSBibG9iLnJlYWRfc2hpZnQobGVuKTsgLy8gbGVuZ3RoIG9mIHJnY2Vcblx0aWYoY2NlID09IDB4RkZGRikgcmV0dXJuIFtbXSxwYXJzZW5vb3AoYmxvYiwgbGVuZ3RoLTIpXTtcblx0dmFyIHJnY2UgPSBwYXJzZV9SZ2NlKGJsb2IsIGNjZSwgb3B0cyk7XG5cdGlmKGxlbmd0aCAhPT0gY2NlICsgbGVuKSByZ2NiID0gcGFyc2VfUmdiRXh0cmEoYmxvYiwgbGVuZ3RoIC0gY2NlIC0gbGVuLCByZ2NlLCBvcHRzKTtcblx0YmxvYi5sID0gdGFyZ2V0O1xuXHRyZXR1cm4gW3JnY2UsIHJnY2JdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTk4LjIxICovXG5mdW5jdGlvbiBwYXJzZV9OYW1lUGFyc2VkRm9ybXVsYShibG9iLCBsZW5ndGgsIG9wdHMsIGNjZSkge1xuXHR2YXIgdGFyZ2V0ID0gYmxvYi5sICsgbGVuZ3RoO1xuXHR2YXIgcmdjZSA9IHBhcnNlX1JnY2UoYmxvYiwgY2NlLCBvcHRzKTtcblx0dmFyIHJnY2I7XG5cdGlmKHRhcmdldCAhPT0gYmxvYi5sKSByZ2NiID0gcGFyc2VfUmdiRXh0cmEoYmxvYiwgdGFyZ2V0IC0gYmxvYi5sLCByZ2NlLCBvcHRzKTtcblx0cmV0dXJuIFtyZ2NlLCByZ2NiXTtcbn1cblxuLyogW01TLVhMU10gMi41LjE5OC4xMTggVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfU2hhcmVkUGFyc2VkRm9ybXVsYShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIHRhcmdldCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIHJnY2IsIGNjZSA9IGJsb2IucmVhZF9zaGlmdCgyKTsgLy8gbGVuZ3RoIG9mIHJnY2Vcblx0dmFyIHJnY2UgPSBwYXJzZV9SZ2NlKGJsb2IsIGNjZSwgb3B0cyk7XG5cdGlmKGNjZSA9PSAweEZGRkYpIHJldHVybiBbW10scGFyc2Vub29wKGJsb2IsIGxlbmd0aC0yKV07XG5cdGlmKGxlbmd0aCAhPT0gY2NlICsgMikgcmdjYiA9IHBhcnNlX1JnYkV4dHJhKGJsb2IsIHRhcmdldCAtIGNjZSAtIDIsIHJnY2UsIG9wdHMpO1xuXHRyZXR1cm4gW3JnY2UsIHJnY2JdO1xufVxuXG4vKiBbTVMtWExTXSAyLjUuMTMzIFRPRE86IGhvdyB0byBlbWl0IGVtcHR5IHN0cmluZ3M/ICovXG5mdW5jdGlvbiBwYXJzZV9Gb3JtdWxhVmFsdWUoYmxvYi8qOjosIGxlbmd0aCovKSB7XG5cdHZhciBiO1xuXHRpZihfX3JlYWRVSW50MTZMRShibG9iLGJsb2IubCArIDYpICE9PSAweEZGRkYpIHJldHVybiBbcGFyc2VfWG51bShibG9iKSwnbiddO1xuXHRzd2l0Y2goYmxvYltibG9iLmxdKSB7XG5cdFx0Y2FzZSAweDAwOiBibG9iLmwgKz0gODsgcmV0dXJuIFtcIlN0cmluZ1wiLCAncyddO1xuXHRcdGNhc2UgMHgwMTogYiA9IGJsb2JbYmxvYi5sKzJdID09PSAweDE7IGJsb2IubCArPSA4OyByZXR1cm4gW2IsJ2InXTtcblx0XHRjYXNlIDB4MDI6IGIgPSBibG9iW2Jsb2IubCsyXTsgYmxvYi5sICs9IDg7IHJldHVybiBbYiwnZSddO1xuXHRcdGNhc2UgMHgwMzogYmxvYi5sICs9IDg7IHJldHVybiBbXCJcIiwncyddO1xuXHR9XG5cdHJldHVybiBbXTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0Zvcm11bGFWYWx1ZSh2YWx1ZSkge1xuXHRpZih2YWx1ZSA9PSBudWxsKSB7XG5cdFx0Ly8gQmxhbmsgU3RyaW5nIFZhbHVlXG5cdFx0dmFyIG8gPSBuZXdfYnVmKDgpO1xuXHRcdG8ud3JpdGVfc2hpZnQoMSwgMHgwMyk7XG5cdFx0by53cml0ZV9zaGlmdCgxLCAwKTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRcdG8ud3JpdGVfc2hpZnQoMiwgMCk7XG5cdFx0by53cml0ZV9zaGlmdCgyLCAweEZGRkYpO1xuXHRcdHJldHVybiBvO1xuXHR9IGVsc2UgaWYodHlwZW9mIHZhbHVlID09IFwibnVtYmVyXCIpIHJldHVybiB3cml0ZV9YbnVtKHZhbHVlKTtcblx0cmV0dXJuIHdyaXRlX1hudW0oMCk7XG59XG5cbi8qIFtNUy1YTFNdIDIuNC4xMjcgVE9ETyAqL1xuZnVuY3Rpb24gcGFyc2VfRm9ybXVsYShibG9iLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGJsb2IubCArIGxlbmd0aDtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNDZWxsKGJsb2IsIDYpO1xuXHRpZihvcHRzLmJpZmYgPT0gMikgKytibG9iLmw7XG5cdHZhciB2YWwgPSBwYXJzZV9Gb3JtdWxhVmFsdWUoYmxvYiw4KTtcblx0dmFyIGZsYWdzID0gYmxvYi5yZWFkX3NoaWZ0KDEpO1xuXHRpZihvcHRzLmJpZmYgIT0gMikge1xuXHRcdGJsb2IucmVhZF9zaGlmdCgxKTtcblx0XHRpZihvcHRzLmJpZmYgPj0gNSkge1xuXHRcdFx0Lyp2YXIgY2huID0gKi9ibG9iLnJlYWRfc2hpZnQoNCk7XG5cdFx0fVxuXHR9XG5cdHZhciBjYmYgPSBwYXJzZV9YTFNDZWxsUGFyc2VkRm9ybXVsYShibG9iLCBlbmQgLSBibG9iLmwsIG9wdHMpO1xuXHRyZXR1cm4ge2NlbGw6Y2VsbCwgdmFsOnZhbFswXSwgZm9ybXVsYTpjYmYsIHNoYXJlZDogKGZsYWdzID4+IDMpICYgMSwgdHQ6dmFsWzFdfTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0Zvcm11bGEoY2VsbC8qOkNlbGwqLywgUi8qOm51bWJlciovLCBDLyo6bnVtYmVyKi8sIG9wdHMsIG9zLyo6bnVtYmVyKi8pIHtcblx0Ly8gQ2VsbFxuXHR2YXIgbzEgPSB3cml0ZV9YTFNDZWxsKFIsIEMsIG9zKTtcblxuXHQvLyBGb3JtdWxhVmFsdWVcblx0dmFyIG8yID0gd3JpdGVfRm9ybXVsYVZhbHVlKGNlbGwudik7XG5cblx0Ly8gZmxhZ3MgKyBjYWNoZVxuXHR2YXIgbzMgPSBuZXdfYnVmKDYpO1xuXHR2YXIgZmxhZ3MgPSAweDAxIHwgMHgyMDtcblx0bzMud3JpdGVfc2hpZnQoMiwgZmxhZ3MpO1xuXHRvMy53cml0ZV9zaGlmdCg0LCAwKTtcblxuXHQvLyBDZWxsUGFyc2VkRm9ybXVsYVxuXHR2YXIgYmYgPSBuZXdfYnVmKGNlbGwuYmYubGVuZ3RoKTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IGNlbGwuYmYubGVuZ3RoOyArK2kpIGJmW2ldID0gY2VsbC5iZltpXTtcblxuXHR2YXIgb3V0ID0gYmNvbmNhdChbbzEsIG8yLCBvMywgYmZdKTtcblx0cmV0dXJuIG91dDtcbn1cblxuXG4vKiBYTFNCIFBhcnNlZCBGb3JtdWxhIHJlY29yZHMgaGF2ZSB0aGUgc2FtZSBzaGFwZSAqL1xuZnVuY3Rpb24gcGFyc2VfWExTQlBhcnNlZEZvcm11bGEoZGF0YSwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciBjY2UgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdHZhciByZ2NlID0gcGFyc2VfUmdjZShkYXRhLCBjY2UsIG9wdHMpO1xuXHR2YXIgY2IgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdHZhciByZ2NiID0gY2IgPiAwID8gcGFyc2VfUmdiRXh0cmEoZGF0YSwgY2IsIHJnY2UsIG9wdHMpIDogbnVsbDtcblx0cmV0dXJuIFtyZ2NlLCByZ2NiXTtcbn1cblxuLyogW01TLVhMU0JdIDIuNS45Ny4xIEFycmF5UGFyc2VkRm9ybXVsYSAqL1xudmFyIHBhcnNlX1hMU0JBcnJheVBhcnNlZEZvcm11bGEgPSBwYXJzZV9YTFNCUGFyc2VkRm9ybXVsYTtcbi8qIFtNUy1YTFNCXSAyLjUuOTcuNCBDZWxsUGFyc2VkRm9ybXVsYSAqL1xudmFyIHBhcnNlX1hMU0JDZWxsUGFyc2VkRm9ybXVsYSA9IHBhcnNlX1hMU0JQYXJzZWRGb3JtdWxhO1xuLyogW01TLVhMU0JdIDIuNS45Ny44IERWUGFyc2VkRm9ybXVsYSAqL1xuLy92YXIgcGFyc2VfWExTQkRWUGFyc2VkRm9ybXVsYSA9IHBhcnNlX1hMU0JQYXJzZWRGb3JtdWxhO1xuLyogW01TLVhMU0JdIDIuNS45Ny45IEZSVFBhcnNlZEZvcm11bGEgKi9cbi8vdmFyIHBhcnNlX1hMU0JGUlRQYXJzZWRGb3JtdWxhID0gcGFyc2VfWExTQlBhcnNlZEZvcm11bGEyO1xuLyogW01TLVhMU0JdIDIuNS45Ny4xMiBOYW1lUGFyc2VkRm9ybXVsYSAqL1xudmFyIHBhcnNlX1hMU0JOYW1lUGFyc2VkRm9ybXVsYSA9IHBhcnNlX1hMU0JQYXJzZWRGb3JtdWxhO1xuLyogW01TLVhMU0JdIDIuNS45Ny45OCBTaGFyZWRQYXJzZWRGb3JtdWxhICovXG52YXIgcGFyc2VfWExTQlNoYXJlZFBhcnNlZEZvcm11bGEgPSBwYXJzZV9YTFNCUGFyc2VkRm9ybXVsYTtcbnZhciBDZXRhYiA9IHtcbiAgMDogXCJCRUVQXCIsXG4gIDE6IFwiT1BFTlwiLFxuICAyOiBcIk9QRU4uTElOS1NcIixcbiAgMzogXCJDTE9TRS5BTExcIixcbiAgNDogXCJTQVZFXCIsXG4gIDU6IFwiU0FWRS5BU1wiLFxuICA2OiBcIkZJTEUuREVMRVRFXCIsXG4gIDc6IFwiUEFHRS5TRVRVUFwiLFxuICA4OiBcIlBSSU5UXCIsXG4gIDk6IFwiUFJJTlRFUi5TRVRVUFwiLFxuICAxMDogXCJRVUlUXCIsXG4gIDExOiBcIk5FVy5XSU5ET1dcIixcbiAgMTI6IFwiQVJSQU5HRS5BTExcIixcbiAgMTM6IFwiV0lORE9XLlNJWkVcIixcbiAgMTQ6IFwiV0lORE9XLk1PVkVcIixcbiAgMTU6IFwiRlVMTFwiLFxuICAxNjogXCJDTE9TRVwiLFxuICAxNzogXCJSVU5cIixcbiAgMjI6IFwiU0VULlBSSU5ULkFSRUFcIixcbiAgMjM6IFwiU0VULlBSSU5ULlRJVExFU1wiLFxuICAyNDogXCJTRVQuUEFHRS5CUkVBS1wiLFxuICAyNTogXCJSRU1PVkUuUEFHRS5CUkVBS1wiLFxuICAyNjogXCJGT05UXCIsXG4gIDI3OiBcIkRJU1BMQVlcIixcbiAgMjg6IFwiUFJPVEVDVC5ET0NVTUVOVFwiLFxuICAyOTogXCJQUkVDSVNJT05cIixcbiAgMzA6IFwiQTEuUjFDMVwiLFxuICAzMTogXCJDQUxDVUxBVEUuTk9XXCIsXG4gIDMyOiBcIkNBTENVTEFUSU9OXCIsXG4gIDM0OiBcIkRBVEEuRklORFwiLFxuICAzNTogXCJFWFRSQUNUXCIsXG4gIDM2OiBcIkRBVEEuREVMRVRFXCIsXG4gIDM3OiBcIlNFVC5EQVRBQkFTRVwiLFxuICAzODogXCJTRVQuQ1JJVEVSSUFcIixcbiAgMzk6IFwiU09SVFwiLFxuICA0MDogXCJEQVRBLlNFUklFU1wiLFxuICA0MTogXCJUQUJMRVwiLFxuICA0MjogXCJGT1JNQVQuTlVNQkVSXCIsXG4gIDQzOiBcIkFMSUdOTUVOVFwiLFxuICA0NDogXCJTVFlMRVwiLFxuICA0NTogXCJCT1JERVJcIixcbiAgNDY6IFwiQ0VMTC5QUk9URUNUSU9OXCIsXG4gIDQ3OiBcIkNPTFVNTi5XSURUSFwiLFxuICA0ODogXCJVTkRPXCIsXG4gIDQ5OiBcIkNVVFwiLFxuICA1MDogXCJDT1BZXCIsXG4gIDUxOiBcIlBBU1RFXCIsXG4gIDUyOiBcIkNMRUFSXCIsXG4gIDUzOiBcIlBBU1RFLlNQRUNJQUxcIixcbiAgNTQ6IFwiRURJVC5ERUxFVEVcIixcbiAgNTU6IFwiSU5TRVJUXCIsXG4gIDU2OiBcIkZJTEwuUklHSFRcIixcbiAgNTc6IFwiRklMTC5ET1dOXCIsXG4gIDYxOiBcIkRFRklORS5OQU1FXCIsXG4gIDYyOiBcIkNSRUFURS5OQU1FU1wiLFxuICA2MzogXCJGT1JNVUxBLkdPVE9cIixcbiAgNjQ6IFwiRk9STVVMQS5GSU5EXCIsXG4gIDY1OiBcIlNFTEVDVC5MQVNULkNFTExcIixcbiAgNjY6IFwiU0hPVy5BQ1RJVkUuQ0VMTFwiLFxuICA2NzogXCJHQUxMRVJZLkFSRUFcIixcbiAgNjg6IFwiR0FMTEVSWS5CQVJcIixcbiAgNjk6IFwiR0FMTEVSWS5DT0xVTU5cIixcbiAgNzA6IFwiR0FMTEVSWS5MSU5FXCIsXG4gIDcxOiBcIkdBTExFUlkuUElFXCIsXG4gIDcyOiBcIkdBTExFUlkuU0NBVFRFUlwiLFxuICA3MzogXCJDT01CSU5BVElPTlwiLFxuICA3NDogXCJQUkVGRVJSRURcIixcbiAgNzU6IFwiQURELk9WRVJMQVlcIixcbiAgNzY6IFwiR1JJRExJTkVTXCIsXG4gIDc3OiBcIlNFVC5QUkVGRVJSRURcIixcbiAgNzg6IFwiQVhFU1wiLFxuICA3OTogXCJMRUdFTkRcIixcbiAgODA6IFwiQVRUQUNILlRFWFRcIixcbiAgODE6IFwiQURELkFSUk9XXCIsXG4gIDgyOiBcIlNFTEVDVC5DSEFSVFwiLFxuICA4MzogXCJTRUxFQ1QuUExPVC5BUkVBXCIsXG4gIDg0OiBcIlBBVFRFUk5TXCIsXG4gIDg1OiBcIk1BSU4uQ0hBUlRcIixcbiAgODY6IFwiT1ZFUkxBWVwiLFxuICA4NzogXCJTQ0FMRVwiLFxuICA4ODogXCJGT1JNQVQuTEVHRU5EXCIsXG4gIDg5OiBcIkZPUk1BVC5URVhUXCIsXG4gIDkwOiBcIkVESVQuUkVQRUFUXCIsXG4gIDkxOiBcIlBBUlNFXCIsXG4gIDkyOiBcIkpVU1RJRllcIixcbiAgOTM6IFwiSElERVwiLFxuICA5NDogXCJVTkhJREVcIixcbiAgOTU6IFwiV09SS1NQQUNFXCIsXG4gIDk2OiBcIkZPUk1VTEFcIixcbiAgOTc6IFwiRk9STVVMQS5GSUxMXCIsXG4gIDk4OiBcIkZPUk1VTEEuQVJSQVlcIixcbiAgOTk6IFwiREFUQS5GSU5ELk5FWFRcIixcbiAgMTAwOiBcIkRBVEEuRklORC5QUkVWXCIsXG4gIDEwMTogXCJGT1JNVUxBLkZJTkQuTkVYVFwiLFxuICAxMDI6IFwiRk9STVVMQS5GSU5ELlBSRVZcIixcbiAgMTAzOiBcIkFDVElWQVRFXCIsXG4gIDEwNDogXCJBQ1RJVkFURS5ORVhUXCIsXG4gIDEwNTogXCJBQ1RJVkFURS5QUkVWXCIsXG4gIDEwNjogXCJVTkxPQ0tFRC5ORVhUXCIsXG4gIDEwNzogXCJVTkxPQ0tFRC5QUkVWXCIsXG4gIDEwODogXCJDT1BZLlBJQ1RVUkVcIixcbiAgMTA5OiBcIlNFTEVDVFwiLFxuICAxMTA6IFwiREVMRVRFLk5BTUVcIixcbiAgMTExOiBcIkRFTEVURS5GT1JNQVRcIixcbiAgMTEyOiBcIlZMSU5FXCIsXG4gIDExMzogXCJITElORVwiLFxuICAxMTQ6IFwiVlBBR0VcIixcbiAgMTE1OiBcIkhQQUdFXCIsXG4gIDExNjogXCJWU0NST0xMXCIsXG4gIDExNzogXCJIU0NST0xMXCIsXG4gIDExODogXCJBTEVSVFwiLFxuICAxMTk6IFwiTkVXXCIsXG4gIDEyMDogXCJDQU5DRUwuQ09QWVwiLFxuICAxMjE6IFwiU0hPVy5DTElQQk9BUkRcIixcbiAgMTIyOiBcIk1FU1NBR0VcIixcbiAgMTI0OiBcIlBBU1RFLkxJTktcIixcbiAgMTI1OiBcIkFQUC5BQ1RJVkFURVwiLFxuICAxMjY6IFwiREVMRVRFLkFSUk9XXCIsXG4gIDEyNzogXCJST1cuSEVJR0hUXCIsXG4gIDEyODogXCJGT1JNQVQuTU9WRVwiLFxuICAxMjk6IFwiRk9STUFULlNJWkVcIixcbiAgMTMwOiBcIkZPUk1VTEEuUkVQTEFDRVwiLFxuICAxMzE6IFwiU0VORC5LRVlTXCIsXG4gIDEzMjogXCJTRUxFQ1QuU1BFQ0lBTFwiLFxuICAxMzM6IFwiQVBQTFkuTkFNRVNcIixcbiAgMTM0OiBcIlJFUExBQ0UuRk9OVFwiLFxuICAxMzU6IFwiRlJFRVpFLlBBTkVTXCIsXG4gIDEzNjogXCJTSE9XLklORk9cIixcbiAgMTM3OiBcIlNQTElUXCIsXG4gIDEzODogXCJPTi5XSU5ET1dcIixcbiAgMTM5OiBcIk9OLkRBVEFcIixcbiAgMTQwOiBcIkRJU0FCTEUuSU5QVVRcIixcbiAgMTQyOiBcIk9VVExJTkVcIixcbiAgMTQzOiBcIkxJU1QuTkFNRVNcIixcbiAgMTQ0OiBcIkZJTEUuQ0xPU0VcIixcbiAgMTQ1OiBcIlNBVkUuV09SS0JPT0tcIixcbiAgMTQ2OiBcIkRBVEEuRk9STVwiLFxuICAxNDc6IFwiQ09QWS5DSEFSVFwiLFxuICAxNDg6IFwiT04uVElNRVwiLFxuICAxNDk6IFwiV0FJVFwiLFxuICAxNTA6IFwiRk9STUFULkZPTlRcIixcbiAgMTUxOiBcIkZJTEwuVVBcIixcbiAgMTUyOiBcIkZJTEwuTEVGVFwiLFxuICAxNTM6IFwiREVMRVRFLk9WRVJMQVlcIixcbiAgMTU1OiBcIlNIT1JULk1FTlVTXCIsXG4gIDE1OTogXCJTRVQuVVBEQVRFLlNUQVRVU1wiLFxuICAxNjE6IFwiQ09MT1IuUEFMRVRURVwiLFxuICAxNjI6IFwiREVMRVRFLlNUWUxFXCIsXG4gIDE2MzogXCJXSU5ET1cuUkVTVE9SRVwiLFxuICAxNjQ6IFwiV0lORE9XLk1BWElNSVpFXCIsXG4gIDE2NjogXCJDSEFOR0UuTElOS1wiLFxuICAxNjc6IFwiQ0FMQ1VMQVRFLkRPQ1VNRU5UXCIsXG4gIDE2ODogXCJPTi5LRVlcIixcbiAgMTY5OiBcIkFQUC5SRVNUT1JFXCIsXG4gIDE3MDogXCJBUFAuTU9WRVwiLFxuICAxNzE6IFwiQVBQLlNJWkVcIixcbiAgMTcyOiBcIkFQUC5NSU5JTUlaRVwiLFxuICAxNzM6IFwiQVBQLk1BWElNSVpFXCIsXG4gIDE3NDogXCJCUklORy5UTy5GUk9OVFwiLFxuICAxNzU6IFwiU0VORC5UTy5CQUNLXCIsXG4gIDE4NTogXCJNQUlOLkNIQVJULlRZUEVcIixcbiAgMTg2OiBcIk9WRVJMQVkuQ0hBUlQuVFlQRVwiLFxuICAxODc6IFwiU0VMRUNULkVORFwiLFxuICAxODg6IFwiT1BFTi5NQUlMXCIsXG4gIDE4OTogXCJTRU5ELk1BSUxcIixcbiAgMTkwOiBcIlNUQU5EQVJELkZPTlRcIixcbiAgMTkxOiBcIkNPTlNPTElEQVRFXCIsXG4gIDE5MjogXCJTT1JULlNQRUNJQUxcIixcbiAgMTkzOiBcIkdBTExFUlkuM0QuQVJFQVwiLFxuICAxOTQ6IFwiR0FMTEVSWS4zRC5DT0xVTU5cIixcbiAgMTk1OiBcIkdBTExFUlkuM0QuTElORVwiLFxuICAxOTY6IFwiR0FMTEVSWS4zRC5QSUVcIixcbiAgMTk3OiBcIlZJRVcuM0RcIixcbiAgMTk4OiBcIkdPQUwuU0VFS1wiLFxuICAxOTk6IFwiV09SS0dST1VQXCIsXG4gIDIwMDogXCJGSUxMLkdST1VQXCIsXG4gIDIwMTogXCJVUERBVEUuTElOS1wiLFxuICAyMDI6IFwiUFJPTU9URVwiLFxuICAyMDM6IFwiREVNT1RFXCIsXG4gIDIwNDogXCJTSE9XLkRFVEFJTFwiLFxuICAyMDY6IFwiVU5HUk9VUFwiLFxuICAyMDc6IFwiT0JKRUNULlBST1BFUlRJRVNcIixcbiAgMjA4OiBcIlNBVkUuTkVXLk9CSkVDVFwiLFxuICAyMDk6IFwiU0hBUkVcIixcbiAgMjEwOiBcIlNIQVJFLk5BTUVcIixcbiAgMjExOiBcIkRVUExJQ0FURVwiLFxuICAyMTI6IFwiQVBQTFkuU1RZTEVcIixcbiAgMjEzOiBcIkFTU0lHTi5UTy5PQkpFQ1RcIixcbiAgMjE0OiBcIk9CSkVDVC5QUk9URUNUSU9OXCIsXG4gIDIxNTogXCJISURFLk9CSkVDVFwiLFxuICAyMTY6IFwiU0VULkVYVFJBQ1RcIixcbiAgMjE3OiBcIkNSRUFURS5QVUJMSVNIRVJcIixcbiAgMjE4OiBcIlNVQlNDUklCRS5UT1wiLFxuICAyMTk6IFwiQVRUUklCVVRFU1wiLFxuICAyMjA6IFwiU0hPVy5UT09MQkFSXCIsXG4gIDIyMjogXCJQUklOVC5QUkVWSUVXXCIsXG4gIDIyMzogXCJFRElULkNPTE9SXCIsXG4gIDIyNDogXCJTSE9XLkxFVkVMU1wiLFxuICAyMjU6IFwiRk9STUFULk1BSU5cIixcbiAgMjI2OiBcIkZPUk1BVC5PVkVSTEFZXCIsXG4gIDIyNzogXCJPTi5SRUNBTENcIixcbiAgMjI4OiBcIkVESVQuU0VSSUVTXCIsXG4gIDIyOTogXCJERUZJTkUuU1RZTEVcIixcbiAgMjQwOiBcIkxJTkUuUFJJTlRcIixcbiAgMjQzOiBcIkVOVEVSLkRBVEFcIixcbiAgMjQ5OiBcIkdBTExFUlkuUkFEQVJcIixcbiAgMjUwOiBcIk1FUkdFLlNUWUxFU1wiLFxuICAyNTE6IFwiRURJVElPTi5PUFRJT05TXCIsXG4gIDI1MjogXCJQQVNURS5QSUNUVVJFXCIsXG4gIDI1MzogXCJQQVNURS5QSUNUVVJFLkxJTktcIixcbiAgMjU0OiBcIlNQRUxMSU5HXCIsXG4gIDI1NjogXCJaT09NXCIsXG4gIDI1OTogXCJJTlNFUlQuT0JKRUNUXCIsXG4gIDI2MDogXCJXSU5ET1cuTUlOSU1JWkVcIixcbiAgMjY1OiBcIlNPVU5ELk5PVEVcIixcbiAgMjY2OiBcIlNPVU5ELlBMQVlcIixcbiAgMjY3OiBcIkZPUk1BVC5TSEFQRVwiLFxuICAyNjg6IFwiRVhURU5ELlBPTFlHT05cIixcbiAgMjY5OiBcIkZPUk1BVC5BVVRPXCIsXG4gIDI3MjogXCJHQUxMRVJZLjNELkJBUlwiLFxuICAyNzM6IFwiR0FMTEVSWS4zRC5TVVJGQUNFXCIsXG4gIDI3NDogXCJGSUxMLkFVVE9cIixcbiAgMjc2OiBcIkNVU1RPTUlaRS5UT09MQkFSXCIsXG4gIDI3NzogXCJBREQuVE9PTFwiLFxuICAyNzg6IFwiRURJVC5PQkpFQ1RcIixcbiAgMjc5OiBcIk9OLkRPVUJMRUNMSUNLXCIsXG4gIDI4MDogXCJPTi5FTlRSWVwiLFxuICAyODE6IFwiV09SS0JPT0suQUREXCIsXG4gIDI4MjogXCJXT1JLQk9PSy5NT1ZFXCIsXG4gIDI4MzogXCJXT1JLQk9PSy5DT1BZXCIsXG4gIDI4NDogXCJXT1JLQk9PSy5PUFRJT05TXCIsXG4gIDI4NTogXCJTQVZFLldPUktTUEFDRVwiLFxuICAyODg6IFwiQ0hBUlQuV0laQVJEXCIsXG4gIDI4OTogXCJERUxFVEUuVE9PTFwiLFxuICAyOTA6IFwiTU9WRS5UT09MXCIsXG4gIDI5MTogXCJXT1JLQk9PSy5TRUxFQ1RcIixcbiAgMjkyOiBcIldPUktCT09LLkFDVElWQVRFXCIsXG4gIDI5MzogXCJBU1NJR04uVE8uVE9PTFwiLFxuICAyOTU6IFwiQ09QWS5UT09MXCIsXG4gIDI5NjogXCJSRVNFVC5UT09MXCIsXG4gIDI5NzogXCJDT05TVFJBSU4uTlVNRVJJQ1wiLFxuICAyOTg6IFwiUEFTVEUuVE9PTFwiLFxuICAzMDI6IFwiV09SS0JPT0suTkVXXCIsXG4gIDMwNTogXCJTQ0VOQVJJTy5DRUxMU1wiLFxuICAzMDY6IFwiU0NFTkFSSU8uREVMRVRFXCIsXG4gIDMwNzogXCJTQ0VOQVJJTy5BRERcIixcbiAgMzA4OiBcIlNDRU5BUklPLkVESVRcIixcbiAgMzA5OiBcIlNDRU5BUklPLlNIT1dcIixcbiAgMzEwOiBcIlNDRU5BUklPLlNIT1cuTkVYVFwiLFxuICAzMTE6IFwiU0NFTkFSSU8uU1VNTUFSWVwiLFxuICAzMTI6IFwiUElWT1QuVEFCTEUuV0laQVJEXCIsXG4gIDMxMzogXCJQSVZPVC5GSUVMRC5QUk9QRVJUSUVTXCIsXG4gIDMxNDogXCJQSVZPVC5GSUVMRFwiLFxuICAzMTU6IFwiUElWT1QuSVRFTVwiLFxuICAzMTY6IFwiUElWT1QuQURELkZJRUxEU1wiLFxuICAzMTg6IFwiT1BUSU9OUy5DQUxDVUxBVElPTlwiLFxuICAzMTk6IFwiT1BUSU9OUy5FRElUXCIsXG4gIDMyMDogXCJPUFRJT05TLlZJRVdcIixcbiAgMzIxOiBcIkFERElOLk1BTkFHRVJcIixcbiAgMzIyOiBcIk1FTlUuRURJVE9SXCIsXG4gIDMyMzogXCJBVFRBQ0guVE9PTEJBUlNcIixcbiAgMzI0OiBcIlZCQUFjdGl2YXRlXCIsXG4gIDMyNTogXCJPUFRJT05TLkNIQVJUXCIsXG4gIDMyODogXCJWQkEuSU5TRVJULkZJTEVcIixcbiAgMzMwOiBcIlZCQS5QUk9DRURVUkUuREVGSU5JVElPTlwiLFxuICAzMzY6IFwiUk9VVElORy5TTElQXCIsXG4gIDMzODogXCJST1VURS5ET0NVTUVOVFwiLFxuICAzMzk6IFwiTUFJTC5MT0dPTlwiLFxuICAzNDI6IFwiSU5TRVJULlBJQ1RVUkVcIixcbiAgMzQzOiBcIkVESVQuVE9PTFwiLFxuICAzNDQ6IFwiR0FMTEVSWS5ET1VHSE5VVFwiLFxuICAzNTA6IFwiQ0hBUlQuVFJFTkRcIixcbiAgMzUyOiBcIlBJVk9ULklURU0uUFJPUEVSVElFU1wiLFxuICAzNTQ6IFwiV09SS0JPT0suSU5TRVJUXCIsXG4gIDM1NTogXCJPUFRJT05TLlRSQU5TSVRJT05cIixcbiAgMzU2OiBcIk9QVElPTlMuR0VORVJBTFwiLFxuICAzNzA6IFwiRklMVEVSLkFEVkFOQ0VEXCIsXG4gIDM3MzogXCJNQUlMLkFERC5NQUlMRVJcIixcbiAgMzc0OiBcIk1BSUwuREVMRVRFLk1BSUxFUlwiLFxuICAzNzU6IFwiTUFJTC5SRVBMWVwiLFxuICAzNzY6IFwiTUFJTC5SRVBMWS5BTExcIixcbiAgMzc3OiBcIk1BSUwuRk9SV0FSRFwiLFxuICAzNzg6IFwiTUFJTC5ORVhULkxFVFRFUlwiLFxuICAzNzk6IFwiREFUQS5MQUJFTFwiLFxuICAzODA6IFwiSU5TRVJULlRJVExFXCIsXG4gIDM4MTogXCJGT05ULlBST1BFUlRJRVNcIixcbiAgMzgyOiBcIk1BQ1JPLk9QVElPTlNcIixcbiAgMzgzOiBcIldPUktCT09LLkhJREVcIixcbiAgMzg0OiBcIldPUktCT09LLlVOSElERVwiLFxuICAzODU6IFwiV09SS0JPT0suREVMRVRFXCIsXG4gIDM4NjogXCJXT1JLQk9PSy5OQU1FXCIsXG4gIDM4ODogXCJHQUxMRVJZLkNVU1RPTVwiLFxuICAzOTA6IFwiQURELkNIQVJULkFVVE9GT1JNQVRcIixcbiAgMzkxOiBcIkRFTEVURS5DSEFSVC5BVVRPRk9STUFUXCIsXG4gIDM5MjogXCJDSEFSVC5BREQuREFUQVwiLFxuICAzOTM6IFwiQVVUTy5PVVRMSU5FXCIsXG4gIDM5NDogXCJUQUIuT1JERVJcIixcbiAgMzk1OiBcIlNIT1cuRElBTE9HXCIsXG4gIDM5NjogXCJTRUxFQ1QuQUxMXCIsXG4gIDM5NzogXCJVTkdST1VQLlNIRUVUU1wiLFxuICAzOTg6IFwiU1VCVE9UQUwuQ1JFQVRFXCIsXG4gIDM5OTogXCJTVUJUT1RBTC5SRU1PVkVcIixcbiAgNDAwOiBcIlJFTkFNRS5PQkpFQ1RcIixcbiAgNDEyOiBcIldPUktCT09LLlNDUk9MTFwiLFxuICA0MTM6IFwiV09SS0JPT0suTkVYVFwiLFxuICA0MTQ6IFwiV09SS0JPT0suUFJFVlwiLFxuICA0MTU6IFwiV09SS0JPT0suVEFCLlNQTElUXCIsXG4gIDQxNjogXCJGVUxMLlNDUkVFTlwiLFxuICA0MTc6IFwiV09SS0JPT0suUFJPVEVDVFwiLFxuICA0MjA6IFwiU0NST0xMQkFSLlBST1BFUlRJRVNcIixcbiAgNDIxOiBcIlBJVk9ULlNIT1cuUEFHRVNcIixcbiAgNDIyOiBcIlRFWFQuVE8uQ09MVU1OU1wiLFxuICA0MjM6IFwiRk9STUFULkNIQVJUVFlQRVwiLFxuICA0MjQ6IFwiTElOSy5GT1JNQVRcIixcbiAgNDI1OiBcIlRSQUNFUi5ESVNQTEFZXCIsXG4gIDQzMDogXCJUUkFDRVIuTkFWSUdBVEVcIixcbiAgNDMxOiBcIlRSQUNFUi5DTEVBUlwiLFxuICA0MzI6IFwiVFJBQ0VSLkVSUk9SXCIsXG4gIDQzMzogXCJQSVZPVC5GSUVMRC5HUk9VUFwiLFxuICA0MzQ6IFwiUElWT1QuRklFTEQuVU5HUk9VUFwiLFxuICA0MzU6IFwiQ0hFQ0tCT1guUFJPUEVSVElFU1wiLFxuICA0MzY6IFwiTEFCRUwuUFJPUEVSVElFU1wiLFxuICA0Mzc6IFwiTElTVEJPWC5QUk9QRVJUSUVTXCIsXG4gIDQzODogXCJFRElUQk9YLlBST1BFUlRJRVNcIixcbiAgNDM5OiBcIlBJVk9ULlJFRlJFU0hcIixcbiAgNDQwOiBcIkxJTksuQ09NQk9cIixcbiAgNDQxOiBcIk9QRU4uVEVYVFwiLFxuICA0NDI6IFwiSElERS5ESUFMT0dcIixcbiAgNDQzOiBcIlNFVC5ESUFMT0cuRk9DVVNcIixcbiAgNDQ0OiBcIkVOQUJMRS5PQkpFQ1RcIixcbiAgNDQ1OiBcIlBVU0hCVVRUT04uUFJPUEVSVElFU1wiLFxuICA0NDY6IFwiU0VULkRJQUxPRy5ERUZBVUxUXCIsXG4gIDQ0NzogXCJGSUxURVJcIixcbiAgNDQ4OiBcIkZJTFRFUi5TSE9XLkFMTFwiLFxuICA0NDk6IFwiQ0xFQVIuT1VUTElORVwiLFxuICA0NTA6IFwiRlVOQ1RJT04uV0laQVJEXCIsXG4gIDQ1MTogXCJBREQuTElTVC5JVEVNXCIsXG4gIDQ1MjogXCJTRVQuTElTVC5JVEVNXCIsXG4gIDQ1MzogXCJSRU1PVkUuTElTVC5JVEVNXCIsXG4gIDQ1NDogXCJTRUxFQ1QuTElTVC5JVEVNXCIsXG4gIDQ1NTogXCJTRVQuQ09OVFJPTC5WQUxVRVwiLFxuICA0NTY6IFwiU0FWRS5DT1BZLkFTXCIsXG4gIDQ1ODogXCJPUFRJT05TLkxJU1RTLkFERFwiLFxuICA0NTk6IFwiT1BUSU9OUy5MSVNUUy5ERUxFVEVcIixcbiAgNDYwOiBcIlNFUklFUy5BWEVTXCIsXG4gIDQ2MTogXCJTRVJJRVMuWFwiLFxuICA0NjI6IFwiU0VSSUVTLllcIixcbiAgNDYzOiBcIkVSUk9SQkFSLlhcIixcbiAgNDY0OiBcIkVSUk9SQkFSLllcIixcbiAgNDY1OiBcIkZPUk1BVC5DSEFSVFwiLFxuICA0NjY6IFwiU0VSSUVTLk9SREVSXCIsXG4gIDQ2NzogXCJNQUlMLkxPR09GRlwiLFxuICA0Njg6IFwiQ0xFQVIuUk9VVElORy5TTElQXCIsXG4gIDQ2OTogXCJBUFAuQUNUSVZBVEUuTUlDUk9TT0ZUXCIsXG4gIDQ3MDogXCJNQUlMLkVESVQuTUFJTEVSXCIsXG4gIDQ3MTogXCJPTi5TSEVFVFwiLFxuICA0NzI6IFwiU1RBTkRBUkQuV0lEVEhcIixcbiAgNDczOiBcIlNDRU5BUklPLk1FUkdFXCIsXG4gIDQ3NDogXCJTVU1NQVJZLklORk9cIixcbiAgNDc1OiBcIkZJTkQuRklMRVwiLFxuICA0NzY6IFwiQUNUSVZFLkNFTEwuRk9OVFwiLFxuICA0Nzc6IFwiRU5BQkxFLlRJUFdJWkFSRFwiLFxuICA0Nzg6IFwiVkJBLk1BS0UuQURESU5cIixcbiAgNDgwOiBcIklOU0VSVERBVEFUQUJMRVwiLFxuICA0ODE6IFwiV09SS0dST1VQLk9QVElPTlNcIixcbiAgNDgyOiBcIk1BSUwuU0VORC5NQUlMRVJcIixcbiAgNDg1OiBcIkFVVE9DT1JSRUNUXCIsXG4gIDQ4OTogXCJQT1NULkRPQ1VNRU5UXCIsXG4gIDQ5MTogXCJQSUNLTElTVFwiLFxuICA0OTM6IFwiVklFVy5TSE9XXCIsXG4gIDQ5NDogXCJWSUVXLkRFRklORVwiLFxuICA0OTU6IFwiVklFVy5ERUxFVEVcIixcbiAgNTA5OiBcIlNIRUVULkJBQ0tHUk9VTkRcIixcbiAgNTEwOiBcIklOU0VSVC5NQVAuT0JKRUNUXCIsXG4gIDUxMTogXCJPUFRJT05TLk1FTk9OT1wiLFxuICA1MTc6IFwiTVNPQ0hFQ0tTXCIsXG4gIDUxODogXCJOT1JNQUxcIixcbiAgNTE5OiBcIkxBWU9VVFwiLFxuICA1MjA6IFwiUk0uUFJJTlQuQVJFQVwiLFxuICA1MjE6IFwiQ0xFQVIuUFJJTlQuQVJFQVwiLFxuICA1MjI6IFwiQURELlBSSU5ULkFSRUFcIixcbiAgNTIzOiBcIk1PVkUuQlJLXCIsXG4gIDU0NTogXCJISURFQ1VSUi5OT1RFXCIsXG4gIDU0NjogXCJISURFQUxMLk5PVEVTXCIsXG4gIDU0NzogXCJERUxFVEUuTk9URVwiLFxuICA1NDg6IFwiVFJBVkVSU0UuTk9URVNcIixcbiAgNTQ5OiBcIkFDVElWQVRFLk5PVEVTXCIsXG4gIDYyMDogXCJQUk9URUNULlJFVklTSU9OU1wiLFxuICA2MjE6IFwiVU5QUk9URUNULlJFVklTSU9OU1wiLFxuICA2NDc6IFwiT1BUSU9OUy5NRVwiLFxuICA2NTM6IFwiV0VCLlBVQkxJU0hcIixcbiAgNjY3OiBcIk5FV1dFQlFVRVJZXCIsXG4gIDY3MzogXCJQSVZPVC5UQUJMRS5DSEFSVFwiLFxuICA3NTM6IFwiT1BUSU9OUy5TQVZFXCIsXG4gIDc1NTogXCJPUFRJT05TLlNQRUxMXCIsXG4gIDgwODogXCJISURFQUxMLklOS0FOTk9UU1wiXG59O1xudmFyIEZ0YWIgPSB7XG4gIDA6IFwiQ09VTlRcIixcbiAgMTogXCJJRlwiLFxuICAyOiBcIklTTkFcIixcbiAgMzogXCJJU0VSUk9SXCIsXG4gIDQ6IFwiU1VNXCIsXG4gIDU6IFwiQVZFUkFHRVwiLFxuICA2OiBcIk1JTlwiLFxuICA3OiBcIk1BWFwiLFxuICA4OiBcIlJPV1wiLFxuICA5OiBcIkNPTFVNTlwiLFxuICAxMDogXCJOQVwiLFxuICAxMTogXCJOUFZcIixcbiAgMTI6IFwiU1RERVZcIixcbiAgMTM6IFwiRE9MTEFSXCIsXG4gIDE0OiBcIkZJWEVEXCIsXG4gIDE1OiBcIlNJTlwiLFxuICAxNjogXCJDT1NcIixcbiAgMTc6IFwiVEFOXCIsXG4gIDE4OiBcIkFUQU5cIixcbiAgMTk6IFwiUElcIixcbiAgMjA6IFwiU1FSVFwiLFxuICAyMTogXCJFWFBcIixcbiAgMjI6IFwiTE5cIixcbiAgMjM6IFwiTE9HMTBcIixcbiAgMjQ6IFwiQUJTXCIsXG4gIDI1OiBcIklOVFwiLFxuICAyNjogXCJTSUdOXCIsXG4gIDI3OiBcIlJPVU5EXCIsXG4gIDI4OiBcIkxPT0tVUFwiLFxuICAyOTogXCJJTkRFWFwiLFxuICAzMDogXCJSRVBUXCIsXG4gIDMxOiBcIk1JRFwiLFxuICAzMjogXCJMRU5cIixcbiAgMzM6IFwiVkFMVUVcIixcbiAgMzQ6IFwiVFJVRVwiLFxuICAzNTogXCJGQUxTRVwiLFxuICAzNjogXCJBTkRcIixcbiAgMzc6IFwiT1JcIixcbiAgMzg6IFwiTk9UXCIsXG4gIDM5OiBcIk1PRFwiLFxuICA0MDogXCJEQ09VTlRcIixcbiAgNDE6IFwiRFNVTVwiLFxuICA0MjogXCJEQVZFUkFHRVwiLFxuICA0MzogXCJETUlOXCIsXG4gIDQ0OiBcIkRNQVhcIixcbiAgNDU6IFwiRFNUREVWXCIsXG4gIDQ2OiBcIlZBUlwiLFxuICA0NzogXCJEVkFSXCIsXG4gIDQ4OiBcIlRFWFRcIixcbiAgNDk6IFwiTElORVNUXCIsXG4gIDUwOiBcIlRSRU5EXCIsXG4gIDUxOiBcIkxPR0VTVFwiLFxuICA1MjogXCJHUk9XVEhcIixcbiAgNTM6IFwiR09UT1wiLFxuICA1NDogXCJIQUxUXCIsXG4gIDU1OiBcIlJFVFVSTlwiLFxuICA1NjogXCJQVlwiLFxuICA1NzogXCJGVlwiLFxuICA1ODogXCJOUEVSXCIsXG4gIDU5OiBcIlBNVFwiLFxuICA2MDogXCJSQVRFXCIsXG4gIDYxOiBcIk1JUlJcIixcbiAgNjI6IFwiSVJSXCIsXG4gIDYzOiBcIlJBTkRcIixcbiAgNjQ6IFwiTUFUQ0hcIixcbiAgNjU6IFwiREFURVwiLFxuICA2NjogXCJUSU1FXCIsXG4gIDY3OiBcIkRBWVwiLFxuICA2ODogXCJNT05USFwiLFxuICA2OTogXCJZRUFSXCIsXG4gIDcwOiBcIldFRUtEQVlcIixcbiAgNzE6IFwiSE9VUlwiLFxuICA3MjogXCJNSU5VVEVcIixcbiAgNzM6IFwiU0VDT05EXCIsXG4gIDc0OiBcIk5PV1wiLFxuICA3NTogXCJBUkVBU1wiLFxuICA3NjogXCJST1dTXCIsXG4gIDc3OiBcIkNPTFVNTlNcIixcbiAgNzg6IFwiT0ZGU0VUXCIsXG4gIDc5OiBcIkFCU1JFRlwiLFxuICA4MDogXCJSRUxSRUZcIixcbiAgODE6IFwiQVJHVU1FTlRcIixcbiAgODI6IFwiU0VBUkNIXCIsXG4gIDgzOiBcIlRSQU5TUE9TRVwiLFxuICA4NDogXCJFUlJPUlwiLFxuICA4NTogXCJTVEVQXCIsXG4gIDg2OiBcIlRZUEVcIixcbiAgODc6IFwiRUNIT1wiLFxuICA4ODogXCJTRVQuTkFNRVwiLFxuICA4OTogXCJDQUxMRVJcIixcbiAgOTA6IFwiREVSRUZcIixcbiAgOTE6IFwiV0lORE9XU1wiLFxuICA5MjogXCJTRVJJRVNcIixcbiAgOTM6IFwiRE9DVU1FTlRTXCIsXG4gIDk0OiBcIkFDVElWRS5DRUxMXCIsXG4gIDk1OiBcIlNFTEVDVElPTlwiLFxuICA5NjogXCJSRVNVTFRcIixcbiAgOTc6IFwiQVRBTjJcIixcbiAgOTg6IFwiQVNJTlwiLFxuICA5OTogXCJBQ09TXCIsXG4gIDEwMDogXCJDSE9PU0VcIixcbiAgMTAxOiBcIkhMT09LVVBcIixcbiAgMTAyOiBcIlZMT09LVVBcIixcbiAgMTAzOiBcIkxJTktTXCIsXG4gIDEwNDogXCJJTlBVVFwiLFxuICAxMDU6IFwiSVNSRUZcIixcbiAgMTA2OiBcIkdFVC5GT1JNVUxBXCIsXG4gIDEwNzogXCJHRVQuTkFNRVwiLFxuICAxMDg6IFwiU0VULlZBTFVFXCIsXG4gIDEwOTogXCJMT0dcIixcbiAgMTEwOiBcIkVYRUNcIixcbiAgMTExOiBcIkNIQVJcIixcbiAgMTEyOiBcIkxPV0VSXCIsXG4gIDExMzogXCJVUFBFUlwiLFxuICAxMTQ6IFwiUFJPUEVSXCIsXG4gIDExNTogXCJMRUZUXCIsXG4gIDExNjogXCJSSUdIVFwiLFxuICAxMTc6IFwiRVhBQ1RcIixcbiAgMTE4OiBcIlRSSU1cIixcbiAgMTE5OiBcIlJFUExBQ0VcIixcbiAgMTIwOiBcIlNVQlNUSVRVVEVcIixcbiAgMTIxOiBcIkNPREVcIixcbiAgMTIyOiBcIk5BTUVTXCIsXG4gIDEyMzogXCJESVJFQ1RPUllcIixcbiAgMTI0OiBcIkZJTkRcIixcbiAgMTI1OiBcIkNFTExcIixcbiAgMTI2OiBcIklTRVJSXCIsXG4gIDEyNzogXCJJU1RFWFRcIixcbiAgMTI4OiBcIklTTlVNQkVSXCIsXG4gIDEyOTogXCJJU0JMQU5LXCIsXG4gIDEzMDogXCJUXCIsXG4gIDEzMTogXCJOXCIsXG4gIDEzMjogXCJGT1BFTlwiLFxuICAxMzM6IFwiRkNMT1NFXCIsXG4gIDEzNDogXCJGU0laRVwiLFxuICAxMzU6IFwiRlJFQURMTlwiLFxuICAxMzY6IFwiRlJFQURcIixcbiAgMTM3OiBcIkZXUklURUxOXCIsXG4gIDEzODogXCJGV1JJVEVcIixcbiAgMTM5OiBcIkZQT1NcIixcbiAgMTQwOiBcIkRBVEVWQUxVRVwiLFxuICAxNDE6IFwiVElNRVZBTFVFXCIsXG4gIDE0MjogXCJTTE5cIixcbiAgMTQzOiBcIlNZRFwiLFxuICAxNDQ6IFwiRERCXCIsXG4gIDE0NTogXCJHRVQuREVGXCIsXG4gIDE0NjogXCJSRUZURVhUXCIsXG4gIDE0NzogXCJURVhUUkVGXCIsXG4gIDE0ODogXCJJTkRJUkVDVFwiLFxuICAxNDk6IFwiUkVHSVNURVJcIixcbiAgMTUwOiBcIkNBTExcIixcbiAgMTUxOiBcIkFERC5CQVJcIixcbiAgMTUyOiBcIkFERC5NRU5VXCIsXG4gIDE1MzogXCJBREQuQ09NTUFORFwiLFxuICAxNTQ6IFwiRU5BQkxFLkNPTU1BTkRcIixcbiAgMTU1OiBcIkNIRUNLLkNPTU1BTkRcIixcbiAgMTU2OiBcIlJFTkFNRS5DT01NQU5EXCIsXG4gIDE1NzogXCJTSE9XLkJBUlwiLFxuICAxNTg6IFwiREVMRVRFLk1FTlVcIixcbiAgMTU5OiBcIkRFTEVURS5DT01NQU5EXCIsXG4gIDE2MDogXCJHRVQuQ0hBUlQuSVRFTVwiLFxuICAxNjE6IFwiRElBTE9HLkJPWFwiLFxuICAxNjI6IFwiQ0xFQU5cIixcbiAgMTYzOiBcIk1ERVRFUk1cIixcbiAgMTY0OiBcIk1JTlZFUlNFXCIsXG4gIDE2NTogXCJNTVVMVFwiLFxuICAxNjY6IFwiRklMRVNcIixcbiAgMTY3OiBcIklQTVRcIixcbiAgMTY4OiBcIlBQTVRcIixcbiAgMTY5OiBcIkNPVU5UQVwiLFxuICAxNzA6IFwiQ0FOQ0VMLktFWVwiLFxuICAxNzE6IFwiRk9SXCIsXG4gIDE3MjogXCJXSElMRVwiLFxuICAxNzM6IFwiQlJFQUtcIixcbiAgMTc0OiBcIk5FWFRcIixcbiAgMTc1OiBcIklOSVRJQVRFXCIsXG4gIDE3NjogXCJSRVFVRVNUXCIsXG4gIDE3NzogXCJQT0tFXCIsXG4gIDE3ODogXCJFWEVDVVRFXCIsXG4gIDE3OTogXCJURVJNSU5BVEVcIixcbiAgMTgwOiBcIlJFU1RBUlRcIixcbiAgMTgxOiBcIkhFTFBcIixcbiAgMTgyOiBcIkdFVC5CQVJcIixcbiAgMTgzOiBcIlBST0RVQ1RcIixcbiAgMTg0OiBcIkZBQ1RcIixcbiAgMTg1OiBcIkdFVC5DRUxMXCIsXG4gIDE4NjogXCJHRVQuV09SS1NQQUNFXCIsXG4gIDE4NzogXCJHRVQuV0lORE9XXCIsXG4gIDE4ODogXCJHRVQuRE9DVU1FTlRcIixcbiAgMTg5OiBcIkRQUk9EVUNUXCIsXG4gIDE5MDogXCJJU05PTlRFWFRcIixcbiAgMTkxOiBcIkdFVC5OT1RFXCIsXG4gIDE5MjogXCJOT1RFXCIsXG4gIDE5MzogXCJTVERFVlBcIixcbiAgMTk0OiBcIlZBUlBcIixcbiAgMTk1OiBcIkRTVERFVlBcIixcbiAgMTk2OiBcIkRWQVJQXCIsXG4gIDE5NzogXCJUUlVOQ1wiLFxuICAxOTg6IFwiSVNMT0dJQ0FMXCIsXG4gIDE5OTogXCJEQ09VTlRBXCIsXG4gIDIwMDogXCJERUxFVEUuQkFSXCIsXG4gIDIwMTogXCJVTlJFR0lTVEVSXCIsXG4gIDIwNDogXCJVU0RPTExBUlwiLFxuICAyMDU6IFwiRklOREJcIixcbiAgMjA2OiBcIlNFQVJDSEJcIixcbiAgMjA3OiBcIlJFUExBQ0VCXCIsXG4gIDIwODogXCJMRUZUQlwiLFxuICAyMDk6IFwiUklHSFRCXCIsXG4gIDIxMDogXCJNSURCXCIsXG4gIDIxMTogXCJMRU5CXCIsXG4gIDIxMjogXCJST1VORFVQXCIsXG4gIDIxMzogXCJST1VORERPV05cIixcbiAgMjE0OiBcIkFTQ1wiLFxuICAyMTU6IFwiREJDU1wiLFxuICAyMTY6IFwiUkFOS1wiLFxuICAyMTk6IFwiQUREUkVTU1wiLFxuICAyMjA6IFwiREFZUzM2MFwiLFxuICAyMjE6IFwiVE9EQVlcIixcbiAgMjIyOiBcIlZEQlwiLFxuICAyMjM6IFwiRUxTRVwiLFxuICAyMjQ6IFwiRUxTRS5JRlwiLFxuICAyMjU6IFwiRU5ELklGXCIsXG4gIDIyNjogXCJGT1IuQ0VMTFwiLFxuICAyMjc6IFwiTUVESUFOXCIsXG4gIDIyODogXCJTVU1QUk9EVUNUXCIsXG4gIDIyOTogXCJTSU5IXCIsXG4gIDIzMDogXCJDT1NIXCIsXG4gIDIzMTogXCJUQU5IXCIsXG4gIDIzMjogXCJBU0lOSFwiLFxuICAyMzM6IFwiQUNPU0hcIixcbiAgMjM0OiBcIkFUQU5IXCIsXG4gIDIzNTogXCJER0VUXCIsXG4gIDIzNjogXCJDUkVBVEUuT0JKRUNUXCIsXG4gIDIzNzogXCJWT0xBVElMRVwiLFxuICAyMzg6IFwiTEFTVC5FUlJPUlwiLFxuICAyMzk6IFwiQ1VTVE9NLlVORE9cIixcbiAgMjQwOiBcIkNVU1RPTS5SRVBFQVRcIixcbiAgMjQxOiBcIkZPUk1VTEEuQ09OVkVSVFwiLFxuICAyNDI6IFwiR0VULkxJTksuSU5GT1wiLFxuICAyNDM6IFwiVEVYVC5CT1hcIixcbiAgMjQ0OiBcIklORk9cIixcbiAgMjQ1OiBcIkdST1VQXCIsXG4gIDI0NjogXCJHRVQuT0JKRUNUXCIsXG4gIDI0NzogXCJEQlwiLFxuICAyNDg6IFwiUEFVU0VcIixcbiAgMjUxOiBcIlJFU1VNRVwiLFxuICAyNTI6IFwiRlJFUVVFTkNZXCIsXG4gIDI1MzogXCJBREQuVE9PTEJBUlwiLFxuICAyNTQ6IFwiREVMRVRFLlRPT0xCQVJcIixcbiAgMjU1OiBcIlVzZXJcIixcbiAgMjU2OiBcIlJFU0VULlRPT0xCQVJcIixcbiAgMjU3OiBcIkVWQUxVQVRFXCIsXG4gIDI1ODogXCJHRVQuVE9PTEJBUlwiLFxuICAyNTk6IFwiR0VULlRPT0xcIixcbiAgMjYwOiBcIlNQRUxMSU5HLkNIRUNLXCIsXG4gIDI2MTogXCJFUlJPUi5UWVBFXCIsXG4gIDI2MjogXCJBUFAuVElUTEVcIixcbiAgMjYzOiBcIldJTkRPVy5USVRMRVwiLFxuICAyNjQ6IFwiU0FWRS5UT09MQkFSXCIsXG4gIDI2NTogXCJFTkFCTEUuVE9PTFwiLFxuICAyNjY6IFwiUFJFU1MuVE9PTFwiLFxuICAyNjc6IFwiUkVHSVNURVIuSURcIixcbiAgMjY4OiBcIkdFVC5XT1JLQk9PS1wiLFxuICAyNjk6IFwiQVZFREVWXCIsXG4gIDI3MDogXCJCRVRBRElTVFwiLFxuICAyNzE6IFwiR0FNTUFMTlwiLFxuICAyNzI6IFwiQkVUQUlOVlwiLFxuICAyNzM6IFwiQklOT01ESVNUXCIsXG4gIDI3NDogXCJDSElESVNUXCIsXG4gIDI3NTogXCJDSElJTlZcIixcbiAgMjc2OiBcIkNPTUJJTlwiLFxuICAyNzc6IFwiQ09ORklERU5DRVwiLFxuICAyNzg6IFwiQ1JJVEJJTk9NXCIsXG4gIDI3OTogXCJFVkVOXCIsXG4gIDI4MDogXCJFWFBPTkRJU1RcIixcbiAgMjgxOiBcIkZESVNUXCIsXG4gIDI4MjogXCJGSU5WXCIsXG4gIDI4MzogXCJGSVNIRVJcIixcbiAgMjg0OiBcIkZJU0hFUklOVlwiLFxuICAyODU6IFwiRkxPT1JcIixcbiAgMjg2OiBcIkdBTU1BRElTVFwiLFxuICAyODc6IFwiR0FNTUFJTlZcIixcbiAgMjg4OiBcIkNFSUxJTkdcIixcbiAgMjg5OiBcIkhZUEdFT01ESVNUXCIsXG4gIDI5MDogXCJMT0dOT1JNRElTVFwiLFxuICAyOTE6IFwiTE9HSU5WXCIsXG4gIDI5MjogXCJORUdCSU5PTURJU1RcIixcbiAgMjkzOiBcIk5PUk1ESVNUXCIsXG4gIDI5NDogXCJOT1JNU0RJU1RcIixcbiAgMjk1OiBcIk5PUk1JTlZcIixcbiAgMjk2OiBcIk5PUk1TSU5WXCIsXG4gIDI5NzogXCJTVEFOREFSRElaRVwiLFxuICAyOTg6IFwiT0REXCIsXG4gIDI5OTogXCJQRVJNVVRcIixcbiAgMzAwOiBcIlBPSVNTT05cIixcbiAgMzAxOiBcIlRESVNUXCIsXG4gIDMwMjogXCJXRUlCVUxMXCIsXG4gIDMwMzogXCJTVU1YTVkyXCIsXG4gIDMwNDogXCJTVU1YMk1ZMlwiLFxuICAzMDU6IFwiU1VNWDJQWTJcIixcbiAgMzA2OiBcIkNISVRFU1RcIixcbiAgMzA3OiBcIkNPUlJFTFwiLFxuICAzMDg6IFwiQ09WQVJcIixcbiAgMzA5OiBcIkZPUkVDQVNUXCIsXG4gIDMxMDogXCJGVEVTVFwiLFxuICAzMTE6IFwiSU5URVJDRVBUXCIsXG4gIDMxMjogXCJQRUFSU09OXCIsXG4gIDMxMzogXCJSU1FcIixcbiAgMzE0OiBcIlNURVlYXCIsXG4gIDMxNTogXCJTTE9QRVwiLFxuICAzMTY6IFwiVFRFU1RcIixcbiAgMzE3OiBcIlBST0JcIixcbiAgMzE4OiBcIkRFVlNRXCIsXG4gIDMxOTogXCJHRU9NRUFOXCIsXG4gIDMyMDogXCJIQVJNRUFOXCIsXG4gIDMyMTogXCJTVU1TUVwiLFxuICAzMjI6IFwiS1VSVFwiLFxuICAzMjM6IFwiU0tFV1wiLFxuICAzMjQ6IFwiWlRFU1RcIixcbiAgMzI1OiBcIkxBUkdFXCIsXG4gIDMyNjogXCJTTUFMTFwiLFxuICAzMjc6IFwiUVVBUlRJTEVcIixcbiAgMzI4OiBcIlBFUkNFTlRJTEVcIixcbiAgMzI5OiBcIlBFUkNFTlRSQU5LXCIsXG4gIDMzMDogXCJNT0RFXCIsXG4gIDMzMTogXCJUUklNTUVBTlwiLFxuICAzMzI6IFwiVElOVlwiLFxuICAzMzQ6IFwiTU9WSUUuQ09NTUFORFwiLFxuICAzMzU6IFwiR0VULk1PVklFXCIsXG4gIDMzNjogXCJDT05DQVRFTkFURVwiLFxuICAzMzc6IFwiUE9XRVJcIixcbiAgMzM4OiBcIlBJVk9ULkFERC5EQVRBXCIsXG4gIDMzOTogXCJHRVQuUElWT1QuVEFCTEVcIixcbiAgMzQwOiBcIkdFVC5QSVZPVC5GSUVMRFwiLFxuICAzNDE6IFwiR0VULlBJVk9ULklURU1cIixcbiAgMzQyOiBcIlJBRElBTlNcIixcbiAgMzQzOiBcIkRFR1JFRVNcIixcbiAgMzQ0OiBcIlNVQlRPVEFMXCIsXG4gIDM0NTogXCJTVU1JRlwiLFxuICAzNDY6IFwiQ09VTlRJRlwiLFxuICAzNDc6IFwiQ09VTlRCTEFOS1wiLFxuICAzNDg6IFwiU0NFTkFSSU8uR0VUXCIsXG4gIDM0OTogXCJPUFRJT05TLkxJU1RTLkdFVFwiLFxuICAzNTA6IFwiSVNQTVRcIixcbiAgMzUxOiBcIkRBVEVESUZcIixcbiAgMzUyOiBcIkRBVEVTVFJJTkdcIixcbiAgMzUzOiBcIk5VTUJFUlNUUklOR1wiLFxuICAzNTQ6IFwiUk9NQU5cIixcbiAgMzU1OiBcIk9QRU4uRElBTE9HXCIsXG4gIDM1NjogXCJTQVZFLkRJQUxPR1wiLFxuICAzNTc6IFwiVklFVy5HRVRcIixcbiAgMzU4OiBcIkdFVFBJVk9UREFUQVwiLFxuICAzNTk6IFwiSFlQRVJMSU5LXCIsXG4gIDM2MDogXCJQSE9ORVRJQ1wiLFxuICAzNjE6IFwiQVZFUkFHRUFcIixcbiAgMzYyOiBcIk1BWEFcIixcbiAgMzYzOiBcIk1JTkFcIixcbiAgMzY0OiBcIlNUREVWUEFcIixcbiAgMzY1OiBcIlZBUlBBXCIsXG4gIDM2NjogXCJTVERFVkFcIixcbiAgMzY3OiBcIlZBUkFcIixcbiAgMzY4OiBcIkJBSFRURVhUXCIsXG4gIDM2OTogXCJUSEFJREFZT0ZXRUVLXCIsXG4gIDM3MDogXCJUSEFJRElHSVRcIixcbiAgMzcxOiBcIlRIQUlNT05USE9GWUVBUlwiLFxuICAzNzI6IFwiVEhBSU5VTVNPVU5EXCIsXG4gIDM3MzogXCJUSEFJTlVNU1RSSU5HXCIsXG4gIDM3NDogXCJUSEFJU1RSSU5HTEVOR1RIXCIsXG4gIDM3NTogXCJJU1RIQUlESUdJVFwiLFxuICAzNzY6IFwiUk9VTkRCQUhURE9XTlwiLFxuICAzNzc6IFwiUk9VTkRCQUhUVVBcIixcbiAgMzc4OiBcIlRIQUlZRUFSXCIsXG4gIDM3OTogXCJSVERcIixcbiAgMzgwOiBcIkNVQkVWQUxVRVwiLFxuICAzODE6IFwiQ1VCRU1FTUJFUlwiLFxuICAzODI6IFwiQ1VCRU1FTUJFUlBST1BFUlRZXCIsXG4gIDM4MzogXCJDVUJFUkFOS0VETUVNQkVSXCIsXG4gIDM4NDogXCJIRVgyQklOXCIsXG4gIDM4NTogXCJIRVgyREVDXCIsXG4gIDM4NjogXCJIRVgyT0NUXCIsXG4gIDM4NzogXCJERUMyQklOXCIsXG4gIDM4ODogXCJERUMySEVYXCIsXG4gIDM4OTogXCJERUMyT0NUXCIsXG4gIDM5MDogXCJPQ1QyQklOXCIsXG4gIDM5MTogXCJPQ1QySEVYXCIsXG4gIDM5MjogXCJPQ1QyREVDXCIsXG4gIDM5MzogXCJCSU4yREVDXCIsXG4gIDM5NDogXCJCSU4yT0NUXCIsXG4gIDM5NTogXCJCSU4ySEVYXCIsXG4gIDM5NjogXCJJTVNVQlwiLFxuICAzOTc6IFwiSU1ESVZcIixcbiAgMzk4OiBcIklNUE9XRVJcIixcbiAgMzk5OiBcIklNQUJTXCIsXG4gIDQwMDogXCJJTVNRUlRcIixcbiAgNDAxOiBcIklNTE5cIixcbiAgNDAyOiBcIklNTE9HMlwiLFxuICA0MDM6IFwiSU1MT0cxMFwiLFxuICA0MDQ6IFwiSU1TSU5cIixcbiAgNDA1OiBcIklNQ09TXCIsXG4gIDQwNjogXCJJTUVYUFwiLFxuICA0MDc6IFwiSU1BUkdVTUVOVFwiLFxuICA0MDg6IFwiSU1DT05KVUdBVEVcIixcbiAgNDA5OiBcIklNQUdJTkFSWVwiLFxuICA0MTA6IFwiSU1SRUFMXCIsXG4gIDQxMTogXCJDT01QTEVYXCIsXG4gIDQxMjogXCJJTVNVTVwiLFxuICA0MTM6IFwiSU1QUk9EVUNUXCIsXG4gIDQxNDogXCJTRVJJRVNTVU1cIixcbiAgNDE1OiBcIkZBQ1RET1VCTEVcIixcbiAgNDE2OiBcIlNRUlRQSVwiLFxuICA0MTc6IFwiUVVPVElFTlRcIixcbiAgNDE4OiBcIkRFTFRBXCIsXG4gIDQxOTogXCJHRVNURVBcIixcbiAgNDIwOiBcIklTRVZFTlwiLFxuICA0MjE6IFwiSVNPRERcIixcbiAgNDIyOiBcIk1ST1VORFwiLFxuICA0MjM6IFwiRVJGXCIsXG4gIDQyNDogXCJFUkZDXCIsXG4gIDQyNTogXCJCRVNTRUxKXCIsXG4gIDQyNjogXCJCRVNTRUxLXCIsXG4gIDQyNzogXCJCRVNTRUxZXCIsXG4gIDQyODogXCJCRVNTRUxJXCIsXG4gIDQyOTogXCJYSVJSXCIsXG4gIDQzMDogXCJYTlBWXCIsXG4gIDQzMTogXCJQUklDRU1BVFwiLFxuICA0MzI6IFwiWUlFTERNQVRcIixcbiAgNDMzOiBcIklOVFJBVEVcIixcbiAgNDM0OiBcIlJFQ0VJVkVEXCIsXG4gIDQzNTogXCJESVNDXCIsXG4gIDQzNjogXCJQUklDRURJU0NcIixcbiAgNDM3OiBcIllJRUxERElTQ1wiLFxuICA0Mzg6IFwiVEJJTExFUVwiLFxuICA0Mzk6IFwiVEJJTExQUklDRVwiLFxuICA0NDA6IFwiVEJJTExZSUVMRFwiLFxuICA0NDE6IFwiUFJJQ0VcIixcbiAgNDQyOiBcIllJRUxEXCIsXG4gIDQ0MzogXCJET0xMQVJERVwiLFxuICA0NDQ6IFwiRE9MTEFSRlJcIixcbiAgNDQ1OiBcIk5PTUlOQUxcIixcbiAgNDQ2OiBcIkVGRkVDVFwiLFxuICA0NDc6IFwiQ1VNUFJJTkNcIixcbiAgNDQ4OiBcIkNVTUlQTVRcIixcbiAgNDQ5OiBcIkVEQVRFXCIsXG4gIDQ1MDogXCJFT01PTlRIXCIsXG4gIDQ1MTogXCJZRUFSRlJBQ1wiLFxuICA0NTI6IFwiQ09VUERBWUJTXCIsXG4gIDQ1MzogXCJDT1VQREFZU1wiLFxuICA0NTQ6IFwiQ09VUERBWVNOQ1wiLFxuICA0NTU6IFwiQ09VUE5DRFwiLFxuICA0NTY6IFwiQ09VUE5VTVwiLFxuICA0NTc6IFwiQ09VUFBDRFwiLFxuICA0NTg6IFwiRFVSQVRJT05cIixcbiAgNDU5OiBcIk1EVVJBVElPTlwiLFxuICA0NjA6IFwiT0RETFBSSUNFXCIsXG4gIDQ2MTogXCJPRERMWUlFTERcIixcbiAgNDYyOiBcIk9EREZQUklDRVwiLFxuICA0NjM6IFwiT0RERllJRUxEXCIsXG4gIDQ2NDogXCJSQU5EQkVUV0VFTlwiLFxuICA0NjU6IFwiV0VFS05VTVwiLFxuICA0NjY6IFwiQU1PUkRFR1JDXCIsXG4gIDQ2NzogXCJBTU9STElOQ1wiLFxuICA0Njg6IFwiQ09OVkVSVFwiLFxuICA3MjQ6IFwiU0hFRVRKU1wiLFxuICA0Njk6IFwiQUNDUklOVFwiLFxuICA0NzA6IFwiQUNDUklOVE1cIixcbiAgNDcxOiBcIldPUktEQVlcIixcbiAgNDcyOiBcIk5FVFdPUktEQVlTXCIsXG4gIDQ3MzogXCJHQ0RcIixcbiAgNDc0OiBcIk1VTFRJTk9NSUFMXCIsXG4gIDQ3NTogXCJMQ01cIixcbiAgNDc2OiBcIkZWU0NIRURVTEVcIixcbiAgNDc3OiBcIkNVQkVLUElNRU1CRVJcIixcbiAgNDc4OiBcIkNVQkVTRVRcIixcbiAgNDc5OiBcIkNVQkVTRVRDT1VOVFwiLFxuICA0ODA6IFwiSUZFUlJPUlwiLFxuICA0ODE6IFwiQ09VTlRJRlNcIixcbiAgNDgyOiBcIlNVTUlGU1wiLFxuICA0ODM6IFwiQVZFUkFHRUlGXCIsXG4gIDQ4NDogXCJBVkVSQUdFSUZTXCJcbn07XG52YXIgRnRhYkFyZ2MgPSB7XG4gIDI6IDEsXG4gIDM6IDEsXG4gIDEwOiAwLFxuICAxNTogMSxcbiAgMTY6IDEsXG4gIDE3OiAxLFxuICAxODogMSxcbiAgMTk6IDAsXG4gIDIwOiAxLFxuICAyMTogMSxcbiAgMjI6IDEsXG4gIDIzOiAxLFxuICAyNDogMSxcbiAgMjU6IDEsXG4gIDI2OiAxLFxuICAyNzogMixcbiAgMzA6IDIsXG4gIDMxOiAzLFxuICAzMjogMSxcbiAgMzM6IDEsXG4gIDM0OiAwLFxuICAzNTogMCxcbiAgMzg6IDEsXG4gIDM5OiAyLFxuICA0MDogMyxcbiAgNDE6IDMsXG4gIDQyOiAzLFxuICA0MzogMyxcbiAgNDQ6IDMsXG4gIDQ1OiAzLFxuICA0NzogMyxcbiAgNDg6IDIsXG4gIDUzOiAxLFxuICA2MTogMyxcbiAgNjM6IDAsXG4gIDY1OiAzLFxuICA2NjogMyxcbiAgNjc6IDEsXG4gIDY4OiAxLFxuICA2OTogMSxcbiAgNzA6IDEsXG4gIDcxOiAxLFxuICA3MjogMSxcbiAgNzM6IDEsXG4gIDc0OiAwLFxuICA3NTogMSxcbiAgNzY6IDEsXG4gIDc3OiAxLFxuICA3OTogMixcbiAgODA6IDIsXG4gIDgzOiAxLFxuICA4NTogMCxcbiAgODY6IDEsXG4gIDg5OiAwLFxuICA5MDogMSxcbiAgOTQ6IDAsXG4gIDk1OiAwLFxuICA5NzogMixcbiAgOTg6IDEsXG4gIDk5OiAxLFxuICAxMDE6IDMsXG4gIDEwMjogMyxcbiAgMTA1OiAxLFxuICAxMDY6IDEsXG4gIDEwODogMixcbiAgMTExOiAxLFxuICAxMTI6IDEsXG4gIDExMzogMSxcbiAgMTE0OiAxLFxuICAxMTc6IDIsXG4gIDExODogMSxcbiAgMTE5OiA0LFxuICAxMjE6IDEsXG4gIDEyNjogMSxcbiAgMTI3OiAxLFxuICAxMjg6IDEsXG4gIDEyOTogMSxcbiAgMTMwOiAxLFxuICAxMzE6IDEsXG4gIDEzMzogMSxcbiAgMTM0OiAxLFxuICAxMzU6IDEsXG4gIDEzNjogMixcbiAgMTM3OiAyLFxuICAxMzg6IDIsXG4gIDE0MDogMSxcbiAgMTQxOiAxLFxuICAxNDI6IDMsXG4gIDE0MzogNCxcbiAgMTQ0OiA0LFxuICAxNjE6IDEsXG4gIDE2MjogMSxcbiAgMTYzOiAxLFxuICAxNjQ6IDEsXG4gIDE2NTogMixcbiAgMTcyOiAxLFxuICAxNzU6IDIsXG4gIDE3NjogMixcbiAgMTc3OiAzLFxuICAxNzg6IDIsXG4gIDE3OTogMSxcbiAgMTg0OiAxLFxuICAxODY6IDEsXG4gIDE4OTogMyxcbiAgMTkwOiAxLFxuICAxOTU6IDMsXG4gIDE5NjogMyxcbiAgMTk3OiAxLFxuICAxOTg6IDEsXG4gIDE5OTogMyxcbiAgMjAxOiAxLFxuICAyMDc6IDQsXG4gIDIxMDogMyxcbiAgMjExOiAxLFxuICAyMTI6IDIsXG4gIDIxMzogMixcbiAgMjE0OiAxLFxuICAyMTU6IDEsXG4gIDIyNTogMCxcbiAgMjI5OiAxLFxuICAyMzA6IDEsXG4gIDIzMTogMSxcbiAgMjMyOiAxLFxuICAyMzM6IDEsXG4gIDIzNDogMSxcbiAgMjM1OiAzLFxuICAyNDQ6IDEsXG4gIDI0NzogNCxcbiAgMjUyOiAyLFxuICAyNTc6IDEsXG4gIDI2MTogMSxcbiAgMjcxOiAxLFxuICAyNzM6IDQsXG4gIDI3NDogMixcbiAgMjc1OiAyLFxuICAyNzY6IDIsXG4gIDI3NzogMyxcbiAgMjc4OiAzLFxuICAyNzk6IDEsXG4gIDI4MDogMyxcbiAgMjgxOiAzLFxuICAyODI6IDMsXG4gIDI4MzogMSxcbiAgMjg0OiAxLFxuICAyODU6IDIsXG4gIDI4NjogNCxcbiAgMjg3OiAzLFxuICAyODg6IDIsXG4gIDI4OTogNCxcbiAgMjkwOiAzLFxuICAyOTE6IDMsXG4gIDI5MjogMyxcbiAgMjkzOiA0LFxuICAyOTQ6IDEsXG4gIDI5NTogMyxcbiAgMjk2OiAxLFxuICAyOTc6IDMsXG4gIDI5ODogMSxcbiAgMjk5OiAyLFxuICAzMDA6IDMsXG4gIDMwMTogMyxcbiAgMzAyOiA0LFxuICAzMDM6IDIsXG4gIDMwNDogMixcbiAgMzA1OiAyLFxuICAzMDY6IDIsXG4gIDMwNzogMixcbiAgMzA4OiAyLFxuICAzMDk6IDMsXG4gIDMxMDogMixcbiAgMzExOiAyLFxuICAzMTI6IDIsXG4gIDMxMzogMixcbiAgMzE0OiAyLFxuICAzMTU6IDIsXG4gIDMxNjogNCxcbiAgMzI1OiAyLFxuICAzMjY6IDIsXG4gIDMyNzogMixcbiAgMzI4OiAyLFxuICAzMzE6IDIsXG4gIDMzMjogMixcbiAgMzM3OiAyLFxuICAzNDI6IDEsXG4gIDM0MzogMSxcbiAgMzQ2OiAyLFxuICAzNDc6IDEsXG4gIDM1MDogNCxcbiAgMzUxOiAzLFxuICAzNTI6IDEsXG4gIDM1MzogMixcbiAgMzYwOiAxLFxuICAzNjg6IDEsXG4gIDM2OTogMSxcbiAgMzcwOiAxLFxuICAzNzE6IDEsXG4gIDM3MjogMSxcbiAgMzczOiAxLFxuICAzNzQ6IDEsXG4gIDM3NTogMSxcbiAgMzc2OiAxLFxuICAzNzc6IDEsXG4gIDM3ODogMSxcbiAgMzgyOiAzLFxuICAzODU6IDEsXG4gIDM5MjogMSxcbiAgMzkzOiAxLFxuICAzOTY6IDIsXG4gIDM5NzogMixcbiAgMzk4OiAyLFxuICAzOTk6IDEsXG4gIDQwMDogMSxcbiAgNDAxOiAxLFxuICA0MDI6IDEsXG4gIDQwMzogMSxcbiAgNDA0OiAxLFxuICA0MDU6IDEsXG4gIDQwNjogMSxcbiAgNDA3OiAxLFxuICA0MDg6IDEsXG4gIDQwOTogMSxcbiAgNDEwOiAxLFxuICA0MTQ6IDQsXG4gIDQxNTogMSxcbiAgNDE2OiAxLFxuICA0MTc6IDIsXG4gIDQyMDogMSxcbiAgNDIxOiAxLFxuICA0MjI6IDIsXG4gIDQyNDogMSxcbiAgNDI1OiAyLFxuICA0MjY6IDIsXG4gIDQyNzogMixcbiAgNDI4OiAyLFxuICA0MzA6IDMsXG4gIDQzODogMyxcbiAgNDM5OiAzLFxuICA0NDA6IDMsXG4gIDQ0MzogMixcbiAgNDQ0OiAyLFxuICA0NDU6IDIsXG4gIDQ0NjogMixcbiAgNDQ3OiA2LFxuICA0NDg6IDYsXG4gIDQ0OTogMixcbiAgNDUwOiAyLFxuICA0NjQ6IDIsXG4gIDQ2ODogMyxcbiAgNDc2OiAyLFxuICA0Nzk6IDEsXG4gIDQ4MDogMixcbiAgNjU1MzU6IDBcbn07XG4vKiBQYXJ0IDMgVE9ETzogYWN0dWFsbHkgcGFyc2UgZm9ybXVsYWUgKi9cbmZ1bmN0aW9uIG9kc190b19jc2ZfZm9ybXVsYShmLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRpZihmLnNsaWNlKDAsMykgPT0gXCJvZjpcIikgZiA9IGYuc2xpY2UoMyk7XG5cdC8qIDUuMiBCYXNpYyBFeHByZXNzaW9ucyAqL1xuXHRpZihmLmNoYXJDb2RlQXQoMCkgPT0gNjEpIHtcblx0XHRmID0gZi5zbGljZSgxKTtcblx0XHRpZihmLmNoYXJDb2RlQXQoMCkgPT0gNjEpIGYgPSBmLnNsaWNlKDEpO1xuXHR9XG5cdGYgPSBmLnJlcGxhY2UoL0NPTVxcLk1JQ1JPU09GVFxcLi9nLCBcIlwiKTtcblx0LyogUGFydCAzIFNlY3Rpb24gNS44IFJlZmVyZW5jZXMgKi9cblx0ZiA9IGYucmVwbGFjZSgvXFxbKCg/OlxcLltBLVpdK1swLTldKykoPzo6XFwuW0EtWl0rWzAtOV0rKT8pXFxdL2csIGZ1bmN0aW9uKCQkLCAkMSkgeyByZXR1cm4gJDEucmVwbGFjZSgvXFwuL2csXCJcIik7IH0pO1xuXHQvKiBUT0RPOiBzb21ldGhpbmcgb3RoZXIgdGhhbiB0aGlzICovXG5cdGYgPSBmLnJlcGxhY2UoL1xcWy4oI1tBLVpdKls/IV0pXFxdL2csIFwiJDFcIik7XG5cdHJldHVybiBmLnJlcGxhY2UoL1s7fl0vZyxcIixcIikucmVwbGFjZSgvXFx8L2csXCI7XCIpO1xufVxuXG5mdW5jdGlvbiBjc2ZfdG9fb2RzX2Zvcm11bGEoZi8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0dmFyIG8gPSBcIm9mOj1cIiArIGYucmVwbGFjZShjcmVmcmVnZXgsIFwiJDFbLiQyJDMkNCQ1XVwiKS5yZXBsYWNlKC9cXF06XFxbL2csXCI6XCIpO1xuXHQvKiBUT0RPOiBzb21ldGhpbmcgb3RoZXIgdGhhbiB0aGlzICovXG5cdHJldHVybiBvLnJlcGxhY2UoLzsvZywgXCJ8XCIpLnJlcGxhY2UoLywvZyxcIjtcIik7XG59XG5cbmZ1bmN0aW9uIG9kc190b19jc2ZfM0Qoci8qOnN0cmluZyovKS8qOltzdHJpbmcsIHN0cmluZ10qLyB7XG5cdHZhciBhID0gci5zcGxpdChcIjpcIik7XG5cdHZhciBzID0gYVswXS5zcGxpdChcIi5cIilbMF07XG5cdHJldHVybiBbcywgYVswXS5zcGxpdChcIi5cIilbMV0gKyAoYS5sZW5ndGggPiAxID8gKFwiOlwiICsgKGFbMV0uc3BsaXQoXCIuXCIpWzFdIHx8IGFbMV0uc3BsaXQoXCIuXCIpWzBdKSkgOiBcIlwiKV07XG59XG5cbmZ1bmN0aW9uIGNzZl90b19vZHNfM0Qoci8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0cmV0dXJuIHIucmVwbGFjZSgvXFwuLyxcIiFcIik7XG59XG5cbnZhciBzdHJzID0ge307IC8vIHNoYXJlZCBzdHJpbmdzXG52YXIgX3NzZm9wdHMgPSB7fTsgLy8gc3ByZWFkc2hlZXQgZm9ybWF0dGluZyBvcHRpb25zXG5cblxuLypnbG9iYWwgTWFwICovXG52YXIgYnJvd3Nlcl9oYXNfTWFwID0gdHlwZW9mIE1hcCAhPT0gJ3VuZGVmaW5lZCc7XG5cbmZ1bmN0aW9uIGdldF9zc3RfaWQoc3N0Lyo6U1NUKi8sIHN0ci8qOnN0cmluZyovLCByZXYpLyo6bnVtYmVyKi8ge1xuXHR2YXIgaSA9IDAsIGxlbiA9IHNzdC5sZW5ndGg7XG5cdGlmKHJldikge1xuXHRcdGlmKGJyb3dzZXJfaGFzX01hcCA/IHJldi5oYXMoc3RyKSA6IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXYsIHN0cikpIHtcblx0XHRcdHZhciByZXZhcnIgPSBicm93c2VyX2hhc19NYXAgPyByZXYuZ2V0KHN0cikgOiByZXZbc3RyXTtcblx0XHRcdGZvcig7IGkgPCByZXZhcnIubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0aWYoc3N0W3JldmFycltpXV0udCA9PT0gc3RyKSB7IHNzdC5Db3VudCArKzsgcmV0dXJuIHJldmFycltpXTsgfVxuXHRcdFx0fVxuXHRcdH1cblx0fSBlbHNlIGZvcig7IGkgPCBsZW47ICsraSkge1xuXHRcdGlmKHNzdFtpXS50ID09PSBzdHIpIHsgc3N0LkNvdW50ICsrOyByZXR1cm4gaTsgfVxuXHR9XG5cdHNzdFtsZW5dID0gKHt0OnN0cn0vKjphbnkqLyk7IHNzdC5Db3VudCArKzsgc3N0LlVuaXF1ZSArKztcblx0aWYocmV2KSB7XG5cdFx0aWYoYnJvd3Nlcl9oYXNfTWFwKSB7XG5cdFx0XHRpZighcmV2LmhhcyhzdHIpKSByZXYuc2V0KHN0ciwgW10pO1xuXHRcdFx0cmV2LmdldChzdHIpLnB1c2gobGVuKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChyZXYsIHN0cikpIHJldltzdHJdID0gW107XG5cdFx0XHRyZXZbc3RyXS5wdXNoKGxlbik7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBsZW47XG59XG5cbmZ1bmN0aW9uIGNvbF9vYmpfdyhDLyo6bnVtYmVyKi8sIGNvbCkge1xuXHR2YXIgcCA9ICh7bWluOkMrMSxtYXg6QysxfS8qOmFueSovKTtcblx0Lyogd2NoIChjaGFycyksIHdweCAocGl4ZWxzKSAqL1xuXHR2YXIgd2NoID0gLTE7XG5cdGlmKGNvbC5NRFcpIE1EVyA9IGNvbC5NRFc7XG5cdGlmKGNvbC53aWR0aCAhPSBudWxsKSBwLmN1c3RvbVdpZHRoID0gMTtcblx0ZWxzZSBpZihjb2wud3B4ICE9IG51bGwpIHdjaCA9IHB4MmNoYXIoY29sLndweCk7XG5cdGVsc2UgaWYoY29sLndjaCAhPSBudWxsKSB3Y2ggPSBjb2wud2NoO1xuXHRpZih3Y2ggPiAtMSkgeyBwLndpZHRoID0gY2hhcjJ3aWR0aCh3Y2gpOyBwLmN1c3RvbVdpZHRoID0gMTsgfVxuXHRlbHNlIGlmKGNvbC53aWR0aCAhPSBudWxsKSBwLndpZHRoID0gY29sLndpZHRoO1xuXHRpZihjb2wuaGlkZGVuKSBwLmhpZGRlbiA9IHRydWU7XG5cdGlmKGNvbC5sZXZlbCAhPSBudWxsKSB7IHAub3V0bGluZUxldmVsID0gcC5sZXZlbCA9IGNvbC5sZXZlbDsgfVxuXHRyZXR1cm4gcDtcbn1cblxuZnVuY3Rpb24gZGVmYXVsdF9tYXJnaW5zKG1hcmdpbnMvKjpNYXJnaW5zKi8sIG1vZGUvKjo/c3RyaW5nKi8pIHtcblx0aWYoIW1hcmdpbnMpIHJldHVybjtcblx0dmFyIGRlZnMgPSBbMC43LCAwLjcsIDAuNzUsIDAuNzUsIDAuMywgMC4zXTtcblx0aWYobW9kZSA9PSAneGxtbCcpIGRlZnMgPSBbMSwgMSwgMSwgMSwgMC41LCAwLjVdO1xuXHRpZihtYXJnaW5zLmxlZnQgICA9PSBudWxsKSBtYXJnaW5zLmxlZnQgICA9IGRlZnNbMF07XG5cdGlmKG1hcmdpbnMucmlnaHQgID09IG51bGwpIG1hcmdpbnMucmlnaHQgID0gZGVmc1sxXTtcblx0aWYobWFyZ2lucy50b3AgICAgPT0gbnVsbCkgbWFyZ2lucy50b3AgICAgPSBkZWZzWzJdO1xuXHRpZihtYXJnaW5zLmJvdHRvbSA9PSBudWxsKSBtYXJnaW5zLmJvdHRvbSA9IGRlZnNbM107XG5cdGlmKG1hcmdpbnMuaGVhZGVyID09IG51bGwpIG1hcmdpbnMuaGVhZGVyID0gZGVmc1s0XTtcblx0aWYobWFyZ2lucy5mb290ZXIgPT0gbnVsbCkgbWFyZ2lucy5mb290ZXIgPSBkZWZzWzVdO1xufVxuXG5mdW5jdGlvbiBnZXRfY2VsbF9zdHlsZShzdHlsZXMvKjpBcnJheTxhbnk+Ki8sIGNlbGwvKjpDZWxsKi8sIG9wdHMpIHtcblx0dmFyIHogPSBvcHRzLnJldnNzZltjZWxsLnogIT0gbnVsbCA/IGNlbGwueiA6IFwiR2VuZXJhbFwiXTtcblx0dmFyIGkgPSAweDNjLCBsZW4gPSBzdHlsZXMubGVuZ3RoO1xuXHRpZih6ID09IG51bGwgJiYgb3B0cy5zc2YpIHtcblx0XHRmb3IoOyBpIDwgMHgxODg7ICsraSkgaWYob3B0cy5zc2ZbaV0gPT0gbnVsbCkge1xuXHRcdFx0U1NGX2xvYWQoY2VsbC56LCBpKTtcblx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRvcHRzLnNzZltpXSA9IGNlbGwuejtcblx0XHRcdG9wdHMucmV2c3NmW2NlbGwuel0gPSB6ID0gaTtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fVxuXHRmb3IoaSA9IDA7IGkgIT0gbGVuOyArK2kpIGlmKHN0eWxlc1tpXS5udW1GbXRJZCA9PT0geikgcmV0dXJuIGk7XG5cdHN0eWxlc1tsZW5dID0ge1xuXHRcdG51bUZtdElkOnosXG5cdFx0Zm9udElkOjAsXG5cdFx0ZmlsbElkOjAsXG5cdFx0Ym9yZGVySWQ6MCxcblx0XHR4ZklkOjAsXG5cdFx0YXBwbHlOdW1iZXJGb3JtYXQ6MVxuXHR9O1xuXHRyZXR1cm4gbGVuO1xufVxuXG5mdW5jdGlvbiBzYWZlX2Zvcm1hdChwLyo6Q2VsbCovLCBmbXRpZC8qOm51bWJlciovLCBmaWxsaWQvKjo/bnVtYmVyKi8sIG9wdHMsIHRoZW1lcywgc3R5bGVzKSB7XG5cdHRyeSB7XG5cdFx0aWYob3B0cy5jZWxsTkYpIHAueiA9IHRhYmxlX2ZtdFtmbXRpZF07XG5cdH0gY2F0Y2goZSkgeyBpZihvcHRzLldURikgdGhyb3cgZTsgfVxuXHRpZihwLnQgPT09ICd6JyAmJiAhb3B0cy5jZWxsU3R5bGVzKSByZXR1cm47XG5cdGlmKHAudCA9PT0gJ2QnICYmIHR5cGVvZiBwLnYgPT09ICdzdHJpbmcnKSBwLnYgPSBwYXJzZURhdGUocC52KTtcblx0aWYoKCFvcHRzIHx8IG9wdHMuY2VsbFRleHQgIT09IGZhbHNlKSAmJiBwLnQgIT09ICd6JykgdHJ5IHtcblx0XHRpZih0YWJsZV9mbXRbZm10aWRdID09IG51bGwpIFNTRl9sb2FkKFNTRkltcGxpY2l0W2ZtdGlkXSB8fCBcIkdlbmVyYWxcIiwgZm10aWQpO1xuXHRcdGlmKHAudCA9PT0gJ2UnKSBwLncgPSBwLncgfHwgQkVycltwLnZdO1xuXHRcdGVsc2UgaWYoZm10aWQgPT09IDApIHtcblx0XHRcdGlmKHAudCA9PT0gJ24nKSB7XG5cdFx0XHRcdGlmKChwLnZ8MCkgPT09IHAudikgcC53ID0gcC52LnRvU3RyaW5nKDEwKTtcblx0XHRcdFx0ZWxzZSBwLncgPSBTU0ZfZ2VuZXJhbF9udW0ocC52KTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYocC50ID09PSAnZCcpIHtcblx0XHRcdFx0dmFyIGRkID0gZGF0ZW51bShwLnYpO1xuXHRcdFx0XHRpZigoZGR8MCkgPT09IGRkKSBwLncgPSBkZC50b1N0cmluZygxMCk7XG5cdFx0XHRcdGVsc2UgcC53ID0gU1NGX2dlbmVyYWxfbnVtKGRkKTtcblx0XHRcdH1cblx0XHRcdGVsc2UgaWYocC52ID09PSB1bmRlZmluZWQpIHJldHVybiBcIlwiO1xuXHRcdFx0ZWxzZSBwLncgPSBTU0ZfZ2VuZXJhbChwLnYsX3NzZm9wdHMpO1xuXHRcdH1cblx0XHRlbHNlIGlmKHAudCA9PT0gJ2QnKSBwLncgPSBTU0ZfZm9ybWF0KGZtdGlkLGRhdGVudW0ocC52KSxfc3Nmb3B0cyk7XG5cdFx0ZWxzZSBwLncgPSBTU0ZfZm9ybWF0KGZtdGlkLHAudixfc3Nmb3B0cyk7XG5cdH0gY2F0Y2goZSkgeyBpZihvcHRzLldURikgdGhyb3cgZTsgfVxuXHRpZighb3B0cy5jZWxsU3R5bGVzKSByZXR1cm47XG5cdGlmKGZpbGxpZCAhPSBudWxsKSB0cnkge1xuXHRcdHAucyA9IHN0eWxlcy5GaWxsc1tmaWxsaWRdO1xuXHRcdGlmIChwLnMuZmdDb2xvciAmJiBwLnMuZmdDb2xvci50aGVtZSAmJiAhcC5zLmZnQ29sb3IucmdiKSB7XG5cdFx0XHRwLnMuZmdDb2xvci5yZ2IgPSByZ2JfdGludCh0aGVtZXMudGhlbWVFbGVtZW50cy5jbHJTY2hlbWVbcC5zLmZnQ29sb3IudGhlbWVdLnJnYiwgcC5zLmZnQ29sb3IudGludCB8fCAwKTtcblx0XHRcdGlmKG9wdHMuV1RGKSBwLnMuZmdDb2xvci5yYXdfcmdiID0gdGhlbWVzLnRoZW1lRWxlbWVudHMuY2xyU2NoZW1lW3Aucy5mZ0NvbG9yLnRoZW1lXS5yZ2I7XG5cdFx0fVxuXHRcdGlmIChwLnMuYmdDb2xvciAmJiBwLnMuYmdDb2xvci50aGVtZSkge1xuXHRcdFx0cC5zLmJnQ29sb3IucmdiID0gcmdiX3RpbnQodGhlbWVzLnRoZW1lRWxlbWVudHMuY2xyU2NoZW1lW3Aucy5iZ0NvbG9yLnRoZW1lXS5yZ2IsIHAucy5iZ0NvbG9yLnRpbnQgfHwgMCk7XG5cdFx0XHRpZihvcHRzLldURikgcC5zLmJnQ29sb3IucmF3X3JnYiA9IHRoZW1lcy50aGVtZUVsZW1lbnRzLmNsclNjaGVtZVtwLnMuYmdDb2xvci50aGVtZV0ucmdiO1xuXHRcdH1cblx0fSBjYXRjaChlKSB7IGlmKG9wdHMuV1RGICYmIHN0eWxlcy5GaWxscykgdGhyb3cgZTsgfVxufVxuXG5mdW5jdGlvbiBjaGVja193cyh3cy8qOldvcmtzaGVldCovLCBzbmFtZS8qOnN0cmluZyovLCBpLyo6bnVtYmVyKi8pIHtcblx0aWYod3MgJiYgd3NbJyFyZWYnXSkge1xuXHRcdHZhciByYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHRcdGlmKHJhbmdlLmUuYyA8IHJhbmdlLnMuYyB8fCByYW5nZS5lLnIgPCByYW5nZS5zLnIpIHRocm93IG5ldyBFcnJvcihcIkJhZCByYW5nZSAoXCIgKyBpICsgXCIpOiBcIiArIHdzWychcmVmJ10pO1xuXHR9XG59XG5mdW5jdGlvbiBwYXJzZV93c194bWxfZGltKHdzLyo6V29ya3NoZWV0Ki8sIHMvKjpzdHJpbmcqLykge1xuXHR2YXIgZCA9IHNhZmVfZGVjb2RlX3JhbmdlKHMpO1xuXHRpZihkLnMucjw9ZC5lLnIgJiYgZC5zLmM8PWQuZS5jICYmIGQucy5yPj0wICYmIGQucy5jPj0wKSB3c1tcIiFyZWZcIl0gPSBlbmNvZGVfcmFuZ2UoZCk7XG59XG52YXIgbWVyZ2VjcmVnZXggPSAvPCg/OlxcdzopP21lcmdlQ2VsbCByZWY9XCJbQS1aMC05Ol0rXCJcXHMqW1xcL10/Pi9nO1xudmFyIHNoZWV0ZGF0YXJlZ2V4ID0gLzwoPzpcXHcrOik/c2hlZXREYXRhW14+XSo+KFtcXHNcXFNdKik8XFwvKD86XFx3KzopP3NoZWV0RGF0YT4vO1xudmFyIGhsaW5rcmVnZXggPSAvPCg/OlxcdzopP2h5cGVybGluayBbXj5dKj4vbWc7XG52YXIgZGltcmVnZXggPSAvXCIoXFx3KjpcXHcqKVwiLztcbnZhciBjb2xyZWdleCA9IC88KD86XFx3Oik/Y29sXFxiW14+XSpbXFwvXT8+L2c7XG52YXIgYWZyZWdleCA9IC88KD86XFx3Oik/YXV0b0ZpbHRlcltePl0qKFtcXC9dfD4oW1xcc1xcU10qKTxcXC8oPzpcXHc6KT9hdXRvRmlsdGVyKT4vZztcbnZhciBtYXJnaW5yZWdleD0gLzwoPzpcXHc6KT9wYWdlTWFyZ2luc1tePl0qXFwvPi9nO1xudmFyIHNoZWV0cHJyZWdleCA9IC88KD86XFx3Oik/c2hlZXRQclxcYig/OltePmEtel1bXj5dKik/XFwvPi87XG52YXIgc2hlZXRwcnJlZ2V4Mj0gLzwoPzpcXHc6KT9zaGVldFByW14+XSooPzpbXFwvXXw+KFtcXHNcXFNdKik8XFwvKD86XFx3Oik/c2hlZXRQcik+LztcbnZhciBzdnNyZWdleCA9IC88KD86XFx3Oik/c2hlZXRWaWV3c1tePl0qKD86W1xcL118PihbXFxzXFxTXSopPFxcLyg/OlxcdzopP3NoZWV0Vmlld3MpPi87XG5cbi8qIDE4LjMgV29ya3NoZWV0cyAqL1xuZnVuY3Rpb24gcGFyc2Vfd3NfeG1sKGRhdGEvKjo/c3RyaW5nKi8sIG9wdHMsIGlkeC8qOm51bWJlciovLCByZWxzLCB3Yi8qOldCV0JQcm9wcyovLCB0aGVtZXMsIHN0eWxlcykvKjpXb3Jrc2hlZXQqLyB7XG5cdGlmKCFkYXRhKSByZXR1cm4gZGF0YTtcblx0aWYoIXJlbHMpIHJlbHMgPSB7JyFpZCc6e319O1xuXHRpZihERU5TRSAhPSBudWxsICYmIG9wdHMuZGVuc2UgPT0gbnVsbCkgb3B0cy5kZW5zZSA9IERFTlNFO1xuXG5cdC8qIDE4LjMuMS45OSB3b3Jrc2hlZXQgQ1RfV29ya3NoZWV0ICovXG5cdHZhciBzID0gb3B0cy5kZW5zZSA/IChbXS8qOmFueSovKSA6ICh7fS8qOmFueSovKTtcblx0dmFyIHJlZmd1ZXNzLyo6UmFuZ2UqLyA9ICh7czoge3I6MjAwMDAwMCwgYzoyMDAwMDAwfSwgZToge3I6MCwgYzowfSB9Lyo6YW55Ki8pO1xuXG5cdHZhciBkYXRhMSA9IFwiXCIsIGRhdGEyID0gXCJcIjtcblx0dmFyIG10Y2gvKjo/YW55Ki8gPSBkYXRhLm1hdGNoKHNoZWV0ZGF0YXJlZ2V4KTtcblx0aWYobXRjaCkge1xuXHRcdGRhdGExID0gZGF0YS5zbGljZSgwLCBtdGNoLmluZGV4KTtcblx0XHRkYXRhMiA9IGRhdGEuc2xpY2UobXRjaC5pbmRleCArIG10Y2hbMF0ubGVuZ3RoKTtcblx0fSBlbHNlIGRhdGExID0gZGF0YTIgPSBkYXRhO1xuXG5cdC8qIDE4LjMuMS44MiBzaGVldFByIENUX1NoZWV0UHIgKi9cblx0dmFyIHNoZWV0UHIgPSBkYXRhMS5tYXRjaChzaGVldHBycmVnZXgpO1xuXHRpZihzaGVldFByKSBwYXJzZV93c194bWxfc2hlZXRwcihzaGVldFByWzBdLCBzLCB3YiwgaWR4KTtcblx0ZWxzZSBpZigoc2hlZXRQciA9IGRhdGExLm1hdGNoKHNoZWV0cHJyZWdleDIpKSkgcGFyc2Vfd3NfeG1sX3NoZWV0cHIyKHNoZWV0UHJbMF0sIHNoZWV0UHJbMV18fFwiXCIsIHMsIHdiLCBpZHgsIHN0eWxlcywgdGhlbWVzKTtcblxuXHQvKiAxOC4zLjEuMzUgZGltZW5zaW9uIENUX1NoZWV0RGltZW5zaW9uICovXG5cdHZhciByaWR4ID0gKGRhdGExLm1hdGNoKC88KD86XFx3KjopP2RpbWVuc2lvbi8pfHx7aW5kZXg6LTF9KS5pbmRleDtcblx0aWYocmlkeCA+IDApIHtcblx0XHR2YXIgcmVmID0gZGF0YTEuc2xpY2UocmlkeCxyaWR4KzUwKS5tYXRjaChkaW1yZWdleCk7XG5cdFx0aWYocmVmKSBwYXJzZV93c194bWxfZGltKHMsIHJlZlsxXSk7XG5cdH1cblxuXHQvKiAxOC4zLjEuODggc2hlZXRWaWV3cyBDVF9TaGVldFZpZXdzICovXG5cdHZhciBzdnMgPSBkYXRhMS5tYXRjaChzdnNyZWdleCk7XG5cdGlmKHN2cyAmJiBzdnNbMV0pIHBhcnNlX3dzX3htbF9zaGVldHZpZXdzKHN2c1sxXSwgd2IpO1xuXG5cdC8qIDE4LjMuMS4xNyBjb2xzIENUX0NvbHMgKi9cblx0dmFyIGNvbHVtbnMvKjpBcnJheTxDb2xJbmZvPiovID0gW107XG5cdGlmKG9wdHMuY2VsbFN0eWxlcykge1xuXHRcdC8qIDE4LjMuMS4xMyBjb2wgQ1RfQ29sICovXG5cdFx0dmFyIGNvbHMgPSBkYXRhMS5tYXRjaChjb2xyZWdleCk7XG5cdFx0aWYoY29scykgcGFyc2Vfd3NfeG1sX2NvbHMoY29sdW1ucywgY29scyk7XG5cdH1cblxuXHQvKiAxOC4zLjEuODAgc2hlZXREYXRhIENUX1NoZWV0RGF0YSA/ICovXG5cdGlmKG10Y2gpIHBhcnNlX3dzX3htbF9kYXRhKG10Y2hbMV0sIHMsIG9wdHMsIHJlZmd1ZXNzLCB0aGVtZXMsIHN0eWxlcyk7XG5cblx0LyogMTguMy4xLjIgIGF1dG9GaWx0ZXIgQ1RfQXV0b0ZpbHRlciAqL1xuXHR2YXIgYWZpbHRlciA9IGRhdGEyLm1hdGNoKGFmcmVnZXgpO1xuXHRpZihhZmlsdGVyKSBzWychYXV0b2ZpbHRlciddID0gcGFyc2Vfd3NfeG1sX2F1dG9maWx0ZXIoYWZpbHRlclswXSk7XG5cblx0LyogMTguMy4xLjU1IG1lcmdlQ2VsbHMgQ1RfTWVyZ2VDZWxscyAqL1xuXHR2YXIgbWVyZ2VzLyo6QXJyYXk8UmFuZ2U+Ki8gPSBbXTtcblx0dmFyIF9tZXJnZSA9IGRhdGEyLm1hdGNoKG1lcmdlY3JlZ2V4KTtcblx0aWYoX21lcmdlKSBmb3IocmlkeCA9IDA7IHJpZHggIT0gX21lcmdlLmxlbmd0aDsgKytyaWR4KVxuXHRcdG1lcmdlc1tyaWR4XSA9IHNhZmVfZGVjb2RlX3JhbmdlKF9tZXJnZVtyaWR4XS5zbGljZShfbWVyZ2VbcmlkeF0uaW5kZXhPZihcIlxcXCJcIikrMSkpO1xuXG5cdC8qIDE4LjMuMS40OCBoeXBlcmxpbmtzIENUX0h5cGVybGlua3MgKi9cblx0dmFyIGhsaW5rID0gZGF0YTIubWF0Y2goaGxpbmtyZWdleCk7XG5cdGlmKGhsaW5rKSBwYXJzZV93c194bWxfaGxpbmtzKHMsIGhsaW5rLCByZWxzKTtcblxuXHQvKiAxOC4zLjEuNjIgcGFnZU1hcmdpbnMgQ1RfUGFnZU1hcmdpbnMgKi9cblx0dmFyIG1hcmdpbnMgPSBkYXRhMi5tYXRjaChtYXJnaW5yZWdleCk7XG5cdGlmKG1hcmdpbnMpIHNbJyFtYXJnaW5zJ10gPSBwYXJzZV93c194bWxfbWFyZ2lucyhwYXJzZXhtbHRhZyhtYXJnaW5zWzBdKSk7XG5cblx0aWYoIXNbXCIhcmVmXCJdICYmIHJlZmd1ZXNzLmUuYyA+PSByZWZndWVzcy5zLmMgJiYgcmVmZ3Vlc3MuZS5yID49IHJlZmd1ZXNzLnMucikgc1tcIiFyZWZcIl0gPSBlbmNvZGVfcmFuZ2UocmVmZ3Vlc3MpO1xuXHRpZihvcHRzLnNoZWV0Um93cyA+IDAgJiYgc1tcIiFyZWZcIl0pIHtcblx0XHR2YXIgdG1wcmVmID0gc2FmZV9kZWNvZGVfcmFuZ2Uoc1tcIiFyZWZcIl0pO1xuXHRcdGlmKG9wdHMuc2hlZXRSb3dzIDw9ICt0bXByZWYuZS5yKSB7XG5cdFx0XHR0bXByZWYuZS5yID0gb3B0cy5zaGVldFJvd3MgLSAxO1xuXHRcdFx0aWYodG1wcmVmLmUuciA+IHJlZmd1ZXNzLmUucikgdG1wcmVmLmUuciA9IHJlZmd1ZXNzLmUucjtcblx0XHRcdGlmKHRtcHJlZi5lLnIgPCB0bXByZWYucy5yKSB0bXByZWYucy5yID0gdG1wcmVmLmUucjtcblx0XHRcdGlmKHRtcHJlZi5lLmMgPiByZWZndWVzcy5lLmMpIHRtcHJlZi5lLmMgPSByZWZndWVzcy5lLmM7XG5cdFx0XHRpZih0bXByZWYuZS5jIDwgdG1wcmVmLnMuYykgdG1wcmVmLnMuYyA9IHRtcHJlZi5lLmM7XG5cdFx0XHRzW1wiIWZ1bGxyZWZcIl0gPSBzW1wiIXJlZlwiXTtcblx0XHRcdHNbXCIhcmVmXCJdID0gZW5jb2RlX3JhbmdlKHRtcHJlZik7XG5cdFx0fVxuXHR9XG5cdGlmKGNvbHVtbnMubGVuZ3RoID4gMCkgc1tcIiFjb2xzXCJdID0gY29sdW1ucztcblx0aWYobWVyZ2VzLmxlbmd0aCA+IDApIHNbXCIhbWVyZ2VzXCJdID0gbWVyZ2VzO1xuXHRyZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX21lcmdlcyhtZXJnZXMvKjpBcnJheTxSYW5nZT4qLykvKjpzdHJpbmcqLyB7XG5cdGlmKG1lcmdlcy5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xuXHR2YXIgbyA9ICc8bWVyZ2VDZWxscyBjb3VudD1cIicgKyBtZXJnZXMubGVuZ3RoICsgJ1wiPic7XG5cdGZvcih2YXIgaSA9IDA7IGkgIT0gbWVyZ2VzLmxlbmd0aDsgKytpKSBvICs9ICc8bWVyZ2VDZWxsIHJlZj1cIicgKyBlbmNvZGVfcmFuZ2UobWVyZ2VzW2ldKSArICdcIi8+Jztcblx0cmV0dXJuIG8gKyAnPC9tZXJnZUNlbGxzPic7XG59XG5cbi8qIDE4LjMuMS44Mi0zIHNoZWV0UHIgQ1RfQ2hhcnRzaGVldFByIC8gQ1RfU2hlZXRQciAqL1xuZnVuY3Rpb24gcGFyc2Vfd3NfeG1sX3NoZWV0cHIoc2hlZXRQci8qOnN0cmluZyovLCBzLCB3Yi8qOldCV0JQcm9wcyovLCBpZHgvKjpudW1iZXIqLykge1xuXHR2YXIgZGF0YSA9IHBhcnNleG1sdGFnKHNoZWV0UHIpO1xuXHRpZighd2IuU2hlZXRzW2lkeF0pIHdiLlNoZWV0c1tpZHhdID0ge307XG5cdGlmKGRhdGEuY29kZU5hbWUpIHdiLlNoZWV0c1tpZHhdLkNvZGVOYW1lID0gdW5lc2NhcGV4bWwodXRmOHJlYWQoZGF0YS5jb2RlTmFtZSkpO1xufVxuZnVuY3Rpb24gcGFyc2Vfd3NfeG1sX3NoZWV0cHIyKHNoZWV0UHIvKjpzdHJpbmcqLywgYm9keS8qOnN0cmluZyovLCBzLCB3Yi8qOldCV0JQcm9wcyovLCBpZHgvKjpudW1iZXIqLykge1xuXHRwYXJzZV93c194bWxfc2hlZXRwcihzaGVldFByLnNsaWNlKDAsIHNoZWV0UHIuaW5kZXhPZihcIj5cIikpLCBzLCB3YiwgaWR4KTtcbn1cbmZ1bmN0aW9uIHdyaXRlX3dzX3htbF9zaGVldHByKHdzLCB3YiwgaWR4LCBvcHRzLCBvKSB7XG5cdHZhciBuZWVkZWQgPSBmYWxzZTtcblx0dmFyIHByb3BzID0ge30sIHBheWxvYWQgPSBudWxsO1xuXHRpZihvcHRzLmJvb2tUeXBlICE9PSAneGxzeCcgJiYgd2IudmJhcmF3KSB7XG5cdFx0dmFyIGNuYW1lID0gd2IuU2hlZXROYW1lc1tpZHhdO1xuXHRcdHRyeSB7IGlmKHdiLldvcmtib29rKSBjbmFtZSA9IHdiLldvcmtib29rLlNoZWV0c1tpZHhdLkNvZGVOYW1lIHx8IGNuYW1lOyB9IGNhdGNoKGUpIHt9XG5cdFx0bmVlZGVkID0gdHJ1ZTtcblx0XHRwcm9wcy5jb2RlTmFtZSA9IHV0Zjh3cml0ZShlc2NhcGV4bWwoY25hbWUpKTtcblx0fVxuXG5cdGlmKHdzICYmIHdzW1wiIW91dGxpbmVcIl0pIHtcblx0XHR2YXIgb3V0bGluZXByb3BzID0ge3N1bW1hcnlCZWxvdzoxLCBzdW1tYXJ5UmlnaHQ6MX07XG5cdFx0aWYod3NbXCIhb3V0bGluZVwiXS5hYm92ZSkgb3V0bGluZXByb3BzLnN1bW1hcnlCZWxvdyA9IDA7XG5cdFx0aWYod3NbXCIhb3V0bGluZVwiXS5sZWZ0KSBvdXRsaW5lcHJvcHMuc3VtbWFyeVJpZ2h0ID0gMDtcblx0XHRwYXlsb2FkID0gKHBheWxvYWR8fFwiXCIpICsgd3JpdGV4dGFnKCdvdXRsaW5lUHInLCBudWxsLCBvdXRsaW5lcHJvcHMpO1xuXHR9XG5cblx0aWYoIW5lZWRlZCAmJiAhcGF5bG9hZCkgcmV0dXJuO1xuXHRvW28ubGVuZ3RoXSA9ICh3cml0ZXh0YWcoJ3NoZWV0UHInLCBwYXlsb2FkLCBwcm9wcykpO1xufVxuXG4vKiAxOC4zLjEuODUgc2hlZXRQcm90ZWN0aW9uIENUX1NoZWV0UHJvdGVjdGlvbiAqL1xudmFyIHNoZWV0cHJvdF9kZWZmYWxzZSA9IFtcIm9iamVjdHNcIiwgXCJzY2VuYXJpb3NcIiwgXCJzZWxlY3RMb2NrZWRDZWxsc1wiLCBcInNlbGVjdFVubG9ja2VkQ2VsbHNcIl07XG52YXIgc2hlZXRwcm90X2RlZnRydWUgPSBbXG5cdFwiZm9ybWF0Q29sdW1uc1wiLCBcImZvcm1hdFJvd3NcIiwgXCJmb3JtYXRDZWxsc1wiLFxuXHRcImluc2VydENvbHVtbnNcIiwgXCJpbnNlcnRSb3dzXCIsIFwiaW5zZXJ0SHlwZXJsaW5rc1wiLFxuXHRcImRlbGV0ZUNvbHVtbnNcIiwgXCJkZWxldGVSb3dzXCIsXG5cdFwic29ydFwiLCBcImF1dG9GaWx0ZXJcIiwgXCJwaXZvdFRhYmxlc1wiXG5dO1xuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX3Byb3RlY3Rpb24oc3ApLyo6c3RyaW5nKi8ge1xuXHQvLyBhbGdvcml0aG1OYW1lLCBoYXNoVmFsdWUsIHNhbHRWYWx1ZSwgc3BpbkNvdW50XG5cdHZhciBvID0gKHtzaGVldDoxfS8qOmFueSovKTtcblx0c2hlZXRwcm90X2RlZmZhbHNlLmZvckVhY2goZnVuY3Rpb24obikgeyBpZihzcFtuXSAhPSBudWxsICYmIHNwW25dKSBvW25dID0gXCIxXCI7IH0pO1xuXHRzaGVldHByb3RfZGVmdHJ1ZS5mb3JFYWNoKGZ1bmN0aW9uKG4pIHsgaWYoc3Bbbl0gIT0gbnVsbCAmJiAhc3Bbbl0pIG9bbl0gPSBcIjBcIjsgfSk7XG5cdC8qIFRPRE86IGFsZ29yaXRobSAqL1xuXHRpZihzcC5wYXNzd29yZCkgby5wYXNzd29yZCA9IGNyeXB0b19DcmVhdGVQYXNzd29yZFZlcmlmaWVyX01ldGhvZDEoc3AucGFzc3dvcmQpLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpO1xuXHRyZXR1cm4gd3JpdGV4dGFnKCdzaGVldFByb3RlY3Rpb24nLCBudWxsLCBvKTtcbn1cblxuZnVuY3Rpb24gcGFyc2Vfd3NfeG1sX2hsaW5rcyhzLCBkYXRhLyo6QXJyYXk8c3RyaW5nPiovLCByZWxzKSB7XG5cdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkocyk7XG5cdGZvcih2YXIgaSA9IDA7IGkgIT0gZGF0YS5sZW5ndGg7ICsraSkge1xuXHRcdHZhciB2YWwgPSBwYXJzZXhtbHRhZyh1dGY4cmVhZChkYXRhW2ldKSwgdHJ1ZSk7XG5cdFx0aWYoIXZhbC5yZWYpIHJldHVybjtcblx0XHR2YXIgcmVsID0gKChyZWxzIHx8IHt9KVsnIWlkJ118fFtdKVt2YWwuaWRdO1xuXHRcdGlmKHJlbCkge1xuXHRcdFx0dmFsLlRhcmdldCA9IHJlbC5UYXJnZXQ7XG5cdFx0XHRpZih2YWwubG9jYXRpb24pIHZhbC5UYXJnZXQgKz0gXCIjXCIrdW5lc2NhcGV4bWwodmFsLmxvY2F0aW9uKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmFsLlRhcmdldCA9IFwiI1wiICsgdW5lc2NhcGV4bWwodmFsLmxvY2F0aW9uKTtcblx0XHRcdHJlbCA9IHtUYXJnZXQ6IHZhbC5UYXJnZXQsIFRhcmdldE1vZGU6ICdJbnRlcm5hbCd9O1xuXHRcdH1cblx0XHR2YWwuUmVsID0gcmVsO1xuXHRcdGlmKHZhbC50b29sdGlwKSB7IHZhbC5Ub29sdGlwID0gdmFsLnRvb2x0aXA7IGRlbGV0ZSB2YWwudG9vbHRpcDsgfVxuXHRcdHZhciBybmcgPSBzYWZlX2RlY29kZV9yYW5nZSh2YWwucmVmKTtcblx0XHRmb3IodmFyIFI9cm5nLnMucjtSPD1ybmcuZS5yOysrUikgZm9yKHZhciBDPXJuZy5zLmM7Qzw9cm5nLmUuYzsrK0MpIHtcblx0XHRcdHZhciBhZGRyID0gZW5jb2RlX2NlbGwoe2M6QyxyOlJ9KTtcblx0XHRcdGlmKGRlbnNlKSB7XG5cdFx0XHRcdGlmKCFzW1JdKSBzW1JdID0gW107XG5cdFx0XHRcdGlmKCFzW1JdW0NdKSBzW1JdW0NdID0ge3Q6XCJ6XCIsdjp1bmRlZmluZWR9O1xuXHRcdFx0XHRzW1JdW0NdLmwgPSB2YWw7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZighc1thZGRyXSkgc1thZGRyXSA9IHt0OlwielwiLHY6dW5kZWZpbmVkfTtcblx0XHRcdFx0c1thZGRyXS5sID0gdmFsO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBwYXJzZV93c194bWxfbWFyZ2lucyhtYXJnaW4pIHtcblx0dmFyIG8gPSB7fTtcblx0W1wibGVmdFwiLCBcInJpZ2h0XCIsIFwidG9wXCIsIFwiYm90dG9tXCIsIFwiaGVhZGVyXCIsIFwiZm9vdGVyXCJdLmZvckVhY2goZnVuY3Rpb24oaykge1xuXHRcdGlmKG1hcmdpbltrXSkgb1trXSA9IHBhcnNlRmxvYXQobWFyZ2luW2tdKTtcblx0fSk7XG5cdHJldHVybiBvO1xufVxuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX21hcmdpbnMobWFyZ2luKS8qOnN0cmluZyovIHtcblx0ZGVmYXVsdF9tYXJnaW5zKG1hcmdpbik7XG5cdHJldHVybiB3cml0ZXh0YWcoJ3BhZ2VNYXJnaW5zJywgbnVsbCwgbWFyZ2luKTtcbn1cblxuZnVuY3Rpb24gcGFyc2Vfd3NfeG1sX2NvbHMoY29sdW1ucywgY29scykge1xuXHR2YXIgc2VlbmNvbCA9IGZhbHNlO1xuXHRmb3IodmFyIGNvbGkgPSAwOyBjb2xpICE9IGNvbHMubGVuZ3RoOyArK2NvbGkpIHtcblx0XHR2YXIgY29sbCA9IHBhcnNleG1sdGFnKGNvbHNbY29saV0sIHRydWUpO1xuXHRcdGlmKGNvbGwuaGlkZGVuKSBjb2xsLmhpZGRlbiA9IHBhcnNleG1sYm9vbChjb2xsLmhpZGRlbik7XG5cdFx0dmFyIGNvbG09cGFyc2VJbnQoY29sbC5taW4sIDEwKS0xLCBjb2xNPXBhcnNlSW50KGNvbGwubWF4LDEwKS0xO1xuXHRcdGlmKGNvbGwub3V0bGluZUxldmVsKSBjb2xsLmxldmVsID0gKCtjb2xsLm91dGxpbmVMZXZlbCB8fCAwKTtcblx0XHRkZWxldGUgY29sbC5taW47IGRlbGV0ZSBjb2xsLm1heDsgY29sbC53aWR0aCA9ICtjb2xsLndpZHRoO1xuXHRcdGlmKCFzZWVuY29sICYmIGNvbGwud2lkdGgpIHsgc2VlbmNvbCA9IHRydWU7IGZpbmRfbWR3X2NvbHcoY29sbC53aWR0aCk7IH1cblx0XHRwcm9jZXNzX2NvbChjb2xsKTtcblx0XHR3aGlsZShjb2xtIDw9IGNvbE0pIGNvbHVtbnNbY29sbSsrXSA9IGR1cChjb2xsKTtcblx0fVxufVxuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX2NvbHMod3MsIGNvbHMpLyo6c3RyaW5nKi8ge1xuXHR2YXIgbyA9IFtcIjxjb2xzPlwiXSwgY29sO1xuXHRmb3IodmFyIGkgPSAwOyBpICE9IGNvbHMubGVuZ3RoOyArK2kpIHtcblx0XHRpZighKGNvbCA9IGNvbHNbaV0pKSBjb250aW51ZTtcblx0XHRvW28ubGVuZ3RoXSA9ICh3cml0ZXh0YWcoJ2NvbCcsIG51bGwsIGNvbF9vYmpfdyhpLCBjb2wpKSk7XG5cdH1cblx0b1tvLmxlbmd0aF0gPSBcIjwvY29scz5cIjtcblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gcGFyc2Vfd3NfeG1sX2F1dG9maWx0ZXIoZGF0YS8qOnN0cmluZyovKSB7XG5cdHZhciBvID0geyByZWY6IChkYXRhLm1hdGNoKC9yZWY9XCIoW15cIl0qKVwiLyl8fFtdKVsxXX07XG5cdHJldHVybiBvO1xufVxuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX2F1dG9maWx0ZXIoZGF0YSwgd3MsIHdiLCBpZHgpLyo6c3RyaW5nKi8ge1xuXHR2YXIgcmVmID0gdHlwZW9mIGRhdGEucmVmID09IFwic3RyaW5nXCIgPyBkYXRhLnJlZiA6IGVuY29kZV9yYW5nZShkYXRhLnJlZik7XG5cdGlmKCF3Yi5Xb3JrYm9vaykgd2IuV29ya2Jvb2sgPSAoe1NoZWV0czpbXX0vKjphbnkqLyk7XG5cdGlmKCF3Yi5Xb3JrYm9vay5OYW1lcykgd2IuV29ya2Jvb2suTmFtZXMgPSBbXTtcblx0dmFyIG5hbWVzLyo6IEFycmF5PGFueT4gKi8gPSB3Yi5Xb3JrYm9vay5OYW1lcztcblx0dmFyIHJhbmdlID0gZGVjb2RlX3JhbmdlKHJlZik7XG5cdGlmKHJhbmdlLnMuciA9PSByYW5nZS5lLnIpIHsgcmFuZ2UuZS5yID0gZGVjb2RlX3JhbmdlKHdzW1wiIXJlZlwiXSkuZS5yOyByZWYgPSBlbmNvZGVfcmFuZ2UocmFuZ2UpOyB9XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBuYW1lcy5sZW5ndGg7ICsraSkge1xuXHRcdHZhciBuYW1lID0gbmFtZXNbaV07XG5cdFx0aWYobmFtZS5OYW1lICE9ICdfeGxubS5fRmlsdGVyRGF0YWJhc2UnKSBjb250aW51ZTtcblx0XHRpZihuYW1lLlNoZWV0ICE9IGlkeCkgY29udGludWU7XG5cdFx0bmFtZS5SZWYgPSBcIidcIiArIHdiLlNoZWV0TmFtZXNbaWR4XSArIFwiJyFcIiArIHJlZjsgYnJlYWs7XG5cdH1cblx0aWYoaSA9PSBuYW1lcy5sZW5ndGgpIG5hbWVzLnB1c2goeyBOYW1lOiAnX3hsbm0uX0ZpbHRlckRhdGFiYXNlJywgU2hlZXQ6IGlkeCwgUmVmOiBcIidcIiArIHdiLlNoZWV0TmFtZXNbaWR4XSArIFwiJyFcIiArIHJlZiAgfSk7XG5cdHJldHVybiB3cml0ZXh0YWcoXCJhdXRvRmlsdGVyXCIsIG51bGwsIHtyZWY6cmVmfSk7XG59XG5cbi8qIDE4LjMuMS44OCBzaGVldFZpZXdzIENUX1NoZWV0Vmlld3MgKi9cbi8qIDE4LjMuMS44NyBzaGVldFZpZXcgQ1RfU2hlZXRWaWV3ICovXG52YXIgc3ZpZXdyZWdleCA9IC88KD86XFx3Oik/c2hlZXRWaWV3KD86W14+YS16XVtePl0qKT9cXC8/Pi87XG5mdW5jdGlvbiBwYXJzZV93c194bWxfc2hlZXR2aWV3cyhkYXRhLCB3Yi8qOldCV0JQcm9wcyovKSB7XG5cdGlmKCF3Yi5WaWV3cykgd2IuVmlld3MgPSBbe31dO1xuXHQoZGF0YS5tYXRjaChzdmlld3JlZ2V4KXx8W10pLmZvckVhY2goZnVuY3Rpb24oci8qOnN0cmluZyovLCBpLyo6bnVtYmVyKi8pIHtcblx0XHR2YXIgdGFnID0gcGFyc2V4bWx0YWcocik7XG5cdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRpZighd2IuVmlld3NbaV0pIHdiLlZpZXdzW2ldID0ge307XG5cdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRpZigrdGFnLnpvb21TY2FsZSkgd2IuVmlld3NbaV0uem9vbSA9ICt0YWcuem9vbVNjYWxlO1xuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0aWYocGFyc2V4bWxib29sKHRhZy5yaWdodFRvTGVmdCkpIHdiLlZpZXdzW2ldLlJUTCA9IHRydWU7XG5cdH0pO1xufVxuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX3NoZWV0dmlld3Mod3MsIG9wdHMsIGlkeCwgd2IpLyo6c3RyaW5nKi8ge1xuXHR2YXIgc3ZpZXcgPSAoe3dvcmtib29rVmlld0lkOlwiMFwifS8qOmFueSovKTtcblx0Ly8gJEZsb3dJZ25vcmVcblx0aWYoKCgod2J8fHt9KS5Xb3JrYm9va3x8e30pLlZpZXdzfHxbXSlbMF0pIHN2aWV3LnJpZ2h0VG9MZWZ0ID0gd2IuV29ya2Jvb2suVmlld3NbMF0uUlRMID8gXCIxXCIgOiBcIjBcIjtcblx0cmV0dXJuIHdyaXRleHRhZyhcInNoZWV0Vmlld3NcIiwgd3JpdGV4dGFnKFwic2hlZXRWaWV3XCIsIG51bGwsIHN2aWV3KSwge30pO1xufVxuXG5mdW5jdGlvbiB3cml0ZV93c194bWxfY2VsbChjZWxsLyo6Q2VsbCovLCByZWYsIHdzLCBvcHRzLyo6OiwgaWR4LCB3YiovKS8qOnN0cmluZyovIHtcblx0aWYoY2VsbC5jKSB3c1snIWNvbW1lbnRzJ10ucHVzaChbcmVmLCBjZWxsLmNdKTtcblx0aWYoY2VsbC52ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIGNlbGwuZiAhPT0gXCJzdHJpbmdcIiB8fCBjZWxsLnQgPT09ICd6JyAmJiAhY2VsbC5mKSByZXR1cm4gXCJcIjtcblx0dmFyIHZ2ID0gXCJcIjtcblx0dmFyIG9sZHQgPSBjZWxsLnQsIG9sZHYgPSBjZWxsLnY7XG5cdGlmKGNlbGwudCAhPT0gXCJ6XCIpIHN3aXRjaChjZWxsLnQpIHtcblx0XHRjYXNlICdiJzogdnYgPSBjZWxsLnYgPyBcIjFcIiA6IFwiMFwiOyBicmVhaztcblx0XHRjYXNlICduJzogdnYgPSAnJytjZWxsLnY7IGJyZWFrO1xuXHRcdGNhc2UgJ2UnOiB2diA9IEJFcnJbY2VsbC52XTsgYnJlYWs7XG5cdFx0Y2FzZSAnZCc6XG5cdFx0XHRpZihvcHRzICYmIG9wdHMuY2VsbERhdGVzKSB2diA9IHBhcnNlRGF0ZShjZWxsLnYsIC0xKS50b0lTT1N0cmluZygpO1xuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdGNlbGwgPSBkdXAoY2VsbCk7XG5cdFx0XHRcdGNlbGwudCA9ICduJztcblx0XHRcdFx0dnYgPSAnJysoY2VsbC52ID0gZGF0ZW51bShwYXJzZURhdGUoY2VsbC52KSkpO1xuXHRcdFx0fVxuXHRcdFx0aWYodHlwZW9mIGNlbGwueiA9PT0gJ3VuZGVmaW5lZCcpIGNlbGwueiA9IHRhYmxlX2ZtdFsxNF07XG5cdFx0XHRicmVhaztcblx0XHRkZWZhdWx0OiB2diA9IGNlbGwudjsgYnJlYWs7XG5cdH1cblx0dmFyIHYgPSB3cml0ZXRhZygndicsIGVzY2FwZXhtbCh2dikpLCBvID0gKHtyOnJlZn0vKjphbnkqLyk7XG5cdC8qIFRPRE86IGNlbGwgc3R5bGUgKi9cblx0dmFyIG9zID0gZ2V0X2NlbGxfc3R5bGUob3B0cy5jZWxsWGZzLCBjZWxsLCBvcHRzKTtcblx0aWYob3MgIT09IDApIG8ucyA9IG9zO1xuXHRzd2l0Y2goY2VsbC50KSB7XG5cdFx0Y2FzZSAnbic6IGJyZWFrO1xuXHRcdGNhc2UgJ2QnOiBvLnQgPSBcImRcIjsgYnJlYWs7XG5cdFx0Y2FzZSAnYic6IG8udCA9IFwiYlwiOyBicmVhaztcblx0XHRjYXNlICdlJzogby50ID0gXCJlXCI7IGJyZWFrO1xuXHRcdGNhc2UgJ3onOiBicmVhaztcblx0XHRkZWZhdWx0OiBpZihjZWxsLnYgPT0gbnVsbCkgeyBkZWxldGUgY2VsbC50OyBicmVhazsgfVxuXHRcdFx0aWYoY2VsbC52Lmxlbmd0aCA+IDMyNzY3KSB0aHJvdyBuZXcgRXJyb3IoXCJUZXh0IGxlbmd0aCBtdXN0IG5vdCBleGNlZWQgMzI3NjcgY2hhcmFjdGVyc1wiKTtcblx0XHRcdGlmKG9wdHMgJiYgb3B0cy5ib29rU1NUKSB7XG5cdFx0XHRcdHYgPSB3cml0ZXRhZygndicsICcnK2dldF9zc3RfaWQob3B0cy5TdHJpbmdzLCBjZWxsLnYsIG9wdHMucmV2U3RyaW5ncykpO1xuXHRcdFx0XHRvLnQgPSBcInNcIjsgYnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRvLnQgPSBcInN0clwiOyBicmVhaztcblx0fVxuXHRpZihjZWxsLnQgIT0gb2xkdCkgeyBjZWxsLnQgPSBvbGR0OyBjZWxsLnYgPSBvbGR2OyB9XG5cdGlmKHR5cGVvZiBjZWxsLmYgPT0gXCJzdHJpbmdcIiAmJiBjZWxsLmYpIHtcblx0XHR2YXIgZmYgPSBjZWxsLkYgJiYgY2VsbC5GLnNsaWNlKDAsIHJlZi5sZW5ndGgpID09IHJlZiA/IHt0OlwiYXJyYXlcIiwgcmVmOmNlbGwuRn0gOiBudWxsO1xuXHRcdHYgPSB3cml0ZXh0YWcoJ2YnLCBlc2NhcGV4bWwoY2VsbC5mKSwgZmYpICsgKGNlbGwudiAhPSBudWxsID8gdiA6IFwiXCIpO1xuXHR9XG5cdGlmKGNlbGwubCkgd3NbJyFsaW5rcyddLnB1c2goW3JlZiwgY2VsbC5sXSk7XG5cdGlmKGNlbGwuRCkgby5jbSA9IDE7XG5cdHJldHVybiB3cml0ZXh0YWcoJ2MnLCB2LCBvKTtcbn1cblxudmFyIHBhcnNlX3dzX3htbF9kYXRhID0gLyojX19QVVJFX18qLyhmdW5jdGlvbigpIHtcblx0dmFyIGNlbGxyZWdleCA9IC88KD86XFx3KzopP2NbIFxcLz5dLywgcm93cmVnZXggPSAvPFxcLyg/Olxcdys6KT9yb3c+Lztcblx0dmFyIHJyZWdleCA9IC9yPVtcIiddKFteXCInXSopW1wiJ10vLCBpc3JlZ2V4ID0gLzwoPzpcXHcrOik/aXM+KFtcXFNcXHNdKj8pPFxcLyg/Olxcdys6KT9pcz4vO1xuXHR2YXIgcmVmcmVnZXggPSAvcmVmPVtcIiddKFteXCInXSopW1wiJ10vO1xuXHR2YXIgbWF0Y2hfdiA9IG1hdGNodGFnKFwidlwiKSwgbWF0Y2hfZiA9IG1hdGNodGFnKFwiZlwiKTtcblxucmV0dXJuIGZ1bmN0aW9uIHBhcnNlX3dzX3htbF9kYXRhKHNkYXRhLyo6c3RyaW5nKi8sIHMsIG9wdHMsIGd1ZXNzLyo6UmFuZ2UqLywgdGhlbWVzLCBzdHlsZXMpIHtcblx0dmFyIHJpID0gMCwgeCA9IFwiXCIsIGNlbGxzLyo6QXJyYXk8c3RyaW5nPiovID0gW10sIGNyZWYvKjo/QXJyYXk8c3RyaW5nPiovID0gW10sIGlkeD0wLCBpPTAsIGNjPTAsIGQ9XCJcIiwgcC8qOmFueSovO1xuXHR2YXIgdGFnLCB0YWdyID0gMCwgdGFnYyA9IDA7XG5cdHZhciBzc3RyLCBmdGFnO1xuXHR2YXIgZm10aWQgPSAwLCBmaWxsaWQgPSAwO1xuXHR2YXIgZG9fZm9ybWF0ID0gQXJyYXkuaXNBcnJheShzdHlsZXMuQ2VsbFhmKSwgY2Y7XG5cdHZhciBhcnJheWYvKjpBcnJheTxbUmFuZ2UsIHN0cmluZ10+Ki8gPSBbXTtcblx0dmFyIHNoYXJlZGYgPSBbXTtcblx0dmFyIGRlbnNlID0gQXJyYXkuaXNBcnJheShzKTtcblx0dmFyIHJvd3MvKjpBcnJheTxSb3dJbmZvPiovID0gW10sIHJvd29iaiA9IHt9LCByb3dyaXRlID0gZmFsc2U7XG5cdHZhciBzaGVldFN0dWJzID0gISFvcHRzLnNoZWV0U3R1YnM7XG5cdGZvcih2YXIgbWFyciA9IHNkYXRhLnNwbGl0KHJvd3JlZ2V4KSwgbXQgPSAwLCBtYXJybGVuID0gbWFyci5sZW5ndGg7IG10ICE9IG1hcnJsZW47ICsrbXQpIHtcblx0XHR4ID0gbWFyclttdF0udHJpbSgpO1xuXHRcdHZhciB4bGVuID0geC5sZW5ndGg7XG5cdFx0aWYoeGxlbiA9PT0gMCkgY29udGludWU7XG5cblx0XHQvKiAxOC4zLjEuNzMgcm93IENUX1JvdyAqL1xuXHRcdHZhciByc3RhcnRpID0gMDtcblx0XHRvdXRhOiBmb3IocmkgPSAwOyByaSA8IHhsZW47ICsrcmkpIHN3aXRjaCgvKnguY2hhckNvZGVBdChyaSkqL3hbcmldKSB7XG5cdFx0XHRjYXNlIFwiPlwiIC8qNjIqLzpcblx0XHRcdFx0aWYoLyp4LmNoYXJDb2RlQXQocmktMSkgIT0gNDcqL3hbcmktMV0gIT0gXCIvXCIpIHsgKytyaTsgYnJlYWsgb3V0YTsgfVxuXHRcdFx0XHRpZihvcHRzICYmIG9wdHMuY2VsbFN0eWxlcykge1xuXHRcdFx0XHRcdC8vIFRPRE86IGF2b2lkIGR1cGxpY2F0aW9uXG5cdFx0XHRcdFx0dGFnID0gcGFyc2V4bWx0YWcoeC5zbGljZShyc3RhcnRpLHJpKSwgdHJ1ZSk7XG5cdFx0XHRcdFx0dGFnciA9IHRhZy5yICE9IG51bGwgPyBwYXJzZUludCh0YWcuciwgMTApIDogdGFncisxOyB0YWdjID0gLTE7XG5cdFx0XHRcdFx0aWYob3B0cy5zaGVldFJvd3MgJiYgb3B0cy5zaGVldFJvd3MgPCB0YWdyKSBjb250aW51ZTtcblx0XHRcdFx0XHRyb3dvYmogPSB7fTsgcm93cml0ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdGlmKHRhZy5odCkgeyByb3dyaXRlID0gdHJ1ZTsgcm93b2JqLmhwdCA9IHBhcnNlRmxvYXQodGFnLmh0KTsgcm93b2JqLmhweCA9IHB0MnB4KHJvd29iai5ocHQpOyB9XG5cdFx0XHRcdFx0aWYodGFnLmhpZGRlbiA9PSBcIjFcIikgeyByb3dyaXRlID0gdHJ1ZTsgcm93b2JqLmhpZGRlbiA9IHRydWU7IH1cblx0XHRcdFx0XHRpZih0YWcub3V0bGluZUxldmVsICE9IG51bGwpIHsgcm93cml0ZSA9IHRydWU7IHJvd29iai5sZXZlbCA9ICt0YWcub3V0bGluZUxldmVsOyB9XG5cdFx0XHRcdFx0aWYocm93cml0ZSkgcm93c1t0YWdyLTFdID0gcm93b2JqO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBcIjxcIiAvKjYwKi86IHJzdGFydGkgPSByaTsgYnJlYWs7XG5cdFx0fVxuXHRcdGlmKHJzdGFydGkgPj0gcmkpIGJyZWFrO1xuXHRcdHRhZyA9IHBhcnNleG1sdGFnKHguc2xpY2UocnN0YXJ0aSxyaSksIHRydWUpO1xuXHRcdHRhZ3IgPSB0YWcuciAhPSBudWxsID8gcGFyc2VJbnQodGFnLnIsIDEwKSA6IHRhZ3IrMTsgdGFnYyA9IC0xO1xuXHRcdGlmKG9wdHMuc2hlZXRSb3dzICYmIG9wdHMuc2hlZXRSb3dzIDwgdGFncikgY29udGludWU7XG5cdFx0aWYoZ3Vlc3Mucy5yID4gdGFnciAtIDEpIGd1ZXNzLnMuciA9IHRhZ3IgLSAxO1xuXHRcdGlmKGd1ZXNzLmUuciA8IHRhZ3IgLSAxKSBndWVzcy5lLnIgPSB0YWdyIC0gMTtcblxuXHRcdGlmKG9wdHMgJiYgb3B0cy5jZWxsU3R5bGVzKSB7XG5cdFx0XHRyb3dvYmogPSB7fTsgcm93cml0ZSA9IGZhbHNlO1xuXHRcdFx0aWYodGFnLmh0KSB7IHJvd3JpdGUgPSB0cnVlOyByb3dvYmouaHB0ID0gcGFyc2VGbG9hdCh0YWcuaHQpOyByb3dvYmouaHB4ID0gcHQycHgocm93b2JqLmhwdCk7IH1cblx0XHRcdGlmKHRhZy5oaWRkZW4gPT0gXCIxXCIpIHsgcm93cml0ZSA9IHRydWU7IHJvd29iai5oaWRkZW4gPSB0cnVlOyB9XG5cdFx0XHRpZih0YWcub3V0bGluZUxldmVsICE9IG51bGwpIHsgcm93cml0ZSA9IHRydWU7IHJvd29iai5sZXZlbCA9ICt0YWcub3V0bGluZUxldmVsOyB9XG5cdFx0XHRpZihyb3dyaXRlKSByb3dzW3RhZ3ItMV0gPSByb3dvYmo7XG5cdFx0fVxuXG5cdFx0LyogMTguMy4xLjQgYyBDVF9DZWxsICovXG5cdFx0Y2VsbHMgPSB4LnNsaWNlKHJpKS5zcGxpdChjZWxscmVnZXgpO1xuXHRcdGZvcih2YXIgcnNsaWNlID0gMDsgcnNsaWNlICE9IGNlbGxzLmxlbmd0aDsgKytyc2xpY2UpIGlmKGNlbGxzW3JzbGljZV0udHJpbSgpLmNoYXJBdCgwKSAhPSBcIjxcIikgYnJlYWs7XG5cdFx0Y2VsbHMgPSBjZWxscy5zbGljZShyc2xpY2UpO1xuXHRcdGZvcihyaSA9IDA7IHJpICE9IGNlbGxzLmxlbmd0aDsgKytyaSkge1xuXHRcdFx0eCA9IGNlbGxzW3JpXS50cmltKCk7XG5cdFx0XHRpZih4Lmxlbmd0aCA9PT0gMCkgY29udGludWU7XG5cdFx0XHRjcmVmID0geC5tYXRjaChycmVnZXgpOyBpZHggPSByaTsgaT0wOyBjYz0wO1xuXHRcdFx0eCA9IFwiPGMgXCIgKyAoeC5zbGljZSgwLDEpPT1cIjxcIj9cIj5cIjpcIlwiKSArIHg7XG5cdFx0XHRpZihjcmVmICE9IG51bGwgJiYgY3JlZi5sZW5ndGggPT09IDIpIHtcblx0XHRcdFx0aWR4ID0gMDsgZD1jcmVmWzFdO1xuXHRcdFx0XHRmb3IoaT0wOyBpICE9IGQubGVuZ3RoOyArK2kpIHtcblx0XHRcdFx0XHRpZigoY2M9ZC5jaGFyQ29kZUF0KGkpLTY0KSA8IDEgfHwgY2MgPiAyNikgYnJlYWs7XG5cdFx0XHRcdFx0aWR4ID0gMjYqaWR4ICsgY2M7XG5cdFx0XHRcdH1cblx0XHRcdFx0LS1pZHg7XG5cdFx0XHRcdHRhZ2MgPSBpZHg7XG5cdFx0XHR9IGVsc2UgKyt0YWdjO1xuXHRcdFx0Zm9yKGkgPSAwOyBpICE9IHgubGVuZ3RoOyArK2kpIGlmKHguY2hhckNvZGVBdChpKSA9PT0gNjIpIGJyZWFrOyArK2k7XG5cdFx0XHR0YWcgPSBwYXJzZXhtbHRhZyh4LnNsaWNlKDAsaSksIHRydWUpO1xuXHRcdFx0aWYoIXRhZy5yKSB0YWcuciA9IGVuY29kZV9jZWxsKHtyOnRhZ3ItMSwgYzp0YWdjfSk7XG5cdFx0XHRkID0geC5zbGljZShpKTtcblx0XHRcdHAgPSAoe3Q6XCJcIn0vKjphbnkqLyk7XG5cblx0XHRcdGlmKChjcmVmPWQubWF0Y2gobWF0Y2hfdikpIT0gbnVsbCAmJiAvKjo6Y3JlZiAhPSBudWxsICYmICovY3JlZlsxXSAhPT0gJycpIHAudj11bmVzY2FwZXhtbChjcmVmWzFdKTtcblx0XHRcdGlmKG9wdHMuY2VsbEZvcm11bGEpIHtcblx0XHRcdFx0aWYoKGNyZWY9ZC5tYXRjaChtYXRjaF9mKSkhPSBudWxsICYmIC8qOjpjcmVmICE9IG51bGwgJiYgKi9jcmVmWzFdICE9PSAnJykge1xuXHRcdFx0XHRcdC8qIFRPRE86IG1hdGNoIGFnYWluc3QgWExTWEZ1dHVyZUZ1bmN0aW9ucyAqL1xuXHRcdFx0XHRcdHAuZj11bmVzY2FwZXhtbCh1dGY4cmVhZChjcmVmWzFdKSkucmVwbGFjZSgvXFxyXFxuL2csIFwiXFxuXCIpO1xuXHRcdFx0XHRcdGlmKCFvcHRzLnhsZm4pIHAuZiA9IF94bGZuKHAuZik7XG5cdFx0XHRcdFx0aWYoLyo6OmNyZWYgIT0gbnVsbCAmJiBjcmVmWzBdICE9IG51bGwgJiYgKi9jcmVmWzBdLmluZGV4T2YoJ3Q9XCJhcnJheVwiJykgPiAtMSkge1xuXHRcdFx0XHRcdFx0cC5GID0gKGQubWF0Y2gocmVmcmVnZXgpfHxbXSlbMV07XG5cdFx0XHRcdFx0XHRpZihwLkYuaW5kZXhPZihcIjpcIikgPiAtMSkgYXJyYXlmLnB1c2goW3NhZmVfZGVjb2RlX3JhbmdlKHAuRiksIHAuRl0pO1xuXHRcdFx0XHRcdH0gZWxzZSBpZigvKjo6Y3JlZiAhPSBudWxsICYmIGNyZWZbMF0gIT0gbnVsbCAmJiAqL2NyZWZbMF0uaW5kZXhPZigndD1cInNoYXJlZFwiJykgPiAtMSkge1xuXHRcdFx0XHRcdFx0Ly8gVE9ETzogcGFyc2UgZm9ybXVsYVxuXHRcdFx0XHRcdFx0ZnRhZyA9IHBhcnNleG1sdGFnKGNyZWZbMF0pO1xuXHRcdFx0XHRcdFx0dmFyIF9fX2YgPSB1bmVzY2FwZXhtbCh1dGY4cmVhZChjcmVmWzFdKSk7XG5cdFx0XHRcdFx0XHRpZighb3B0cy54bGZuKSBfX19mID0gX3hsZm4oX19fZik7XG5cdFx0XHRcdFx0XHRzaGFyZWRmW3BhcnNlSW50KGZ0YWcuc2ksIDEwKV0gPSBbZnRhZywgX19fZiwgdGFnLnJdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmKChjcmVmPWQubWF0Y2goLzxmW14+XSpcXC8+LykpKSB7XG5cdFx0XHRcdFx0ZnRhZyA9IHBhcnNleG1sdGFnKGNyZWZbMF0pO1xuXHRcdFx0XHRcdGlmKHNoYXJlZGZbZnRhZy5zaV0pIHAuZiA9IHNoaWZ0X2Zvcm11bGFfeGxzeChzaGFyZWRmW2Z0YWcuc2ldWzFdLCBzaGFyZWRmW2Z0YWcuc2ldWzJdLypbMF0ucmVmKi8sIHRhZy5yKTtcblx0XHRcdFx0fVxuXHRcdFx0XHQvKiBUT0RPOiBmYWN0b3Igb3V0IGNvbnRhaW5zIGxvZ2ljICovXG5cdFx0XHRcdHZhciBfdGFnID0gZGVjb2RlX2NlbGwodGFnLnIpO1xuXHRcdFx0XHRmb3IoaSA9IDA7IGkgPCBhcnJheWYubGVuZ3RoOyArK2kpXG5cdFx0XHRcdFx0aWYoX3RhZy5yID49IGFycmF5ZltpXVswXS5zLnIgJiYgX3RhZy5yIDw9IGFycmF5ZltpXVswXS5lLnIpXG5cdFx0XHRcdFx0XHRpZihfdGFnLmMgPj0gYXJyYXlmW2ldWzBdLnMuYyAmJiBfdGFnLmMgPD0gYXJyYXlmW2ldWzBdLmUuYylcblx0XHRcdFx0XHRcdFx0cC5GID0gYXJyYXlmW2ldWzFdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZih0YWcudCA9PSBudWxsICYmIHAudiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdGlmKHAuZiB8fCBwLkYpIHtcblx0XHRcdFx0XHRwLnYgPSAwOyBwLnQgPSBcIm5cIjtcblx0XHRcdFx0fSBlbHNlIGlmKCFzaGVldFN0dWJzKSBjb250aW51ZTtcblx0XHRcdFx0ZWxzZSBwLnQgPSBcInpcIjtcblx0XHRcdH1cblx0XHRcdGVsc2UgcC50ID0gdGFnLnQgfHwgXCJuXCI7XG5cdFx0XHRpZihndWVzcy5zLmMgPiB0YWdjKSBndWVzcy5zLmMgPSB0YWdjO1xuXHRcdFx0aWYoZ3Vlc3MuZS5jIDwgdGFnYykgZ3Vlc3MuZS5jID0gdGFnYztcblx0XHRcdC8qIDE4LjE4LjExIHQgU1RfQ2VsbFR5cGUgKi9cblx0XHRcdHN3aXRjaChwLnQpIHtcblx0XHRcdFx0Y2FzZSAnbic6XG5cdFx0XHRcdFx0aWYocC52ID09IFwiXCIgfHwgcC52ID09IG51bGwpIHtcblx0XHRcdFx0XHRcdGlmKCFzaGVldFN0dWJzKSBjb250aW51ZTtcblx0XHRcdFx0XHRcdHAudCA9ICd6Jztcblx0XHRcdFx0XHR9IGVsc2UgcC52ID0gcGFyc2VGbG9hdChwLnYpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdzJzpcblx0XHRcdFx0XHRpZih0eXBlb2YgcC52ID09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdFx0XHRpZighc2hlZXRTdHVicykgY29udGludWU7XG5cdFx0XHRcdFx0XHRwLnQgPSAneic7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNzdHIgPSBzdHJzW3BhcnNlSW50KHAudiwgMTApXTtcblx0XHRcdFx0XHRcdHAudiA9IHNzdHIudDtcblx0XHRcdFx0XHRcdHAuciA9IHNzdHIucjtcblx0XHRcdFx0XHRcdGlmKG9wdHMuY2VsbEhUTUwpIHAuaCA9IHNzdHIuaDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgJ3N0cic6XG5cdFx0XHRcdFx0cC50ID0gXCJzXCI7XG5cdFx0XHRcdFx0cC52ID0gKHAudiE9bnVsbCkgPyB1dGY4cmVhZChwLnYpIDogJyc7XG5cdFx0XHRcdFx0aWYob3B0cy5jZWxsSFRNTCkgcC5oID0gZXNjYXBlaHRtbChwLnYpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlICdpbmxpbmVTdHInOlxuXHRcdFx0XHRcdGNyZWYgPSBkLm1hdGNoKGlzcmVnZXgpO1xuXHRcdFx0XHRcdHAudCA9ICdzJztcblx0XHRcdFx0XHRpZihjcmVmICE9IG51bGwgJiYgKHNzdHIgPSBwYXJzZV9zaShjcmVmWzFdKSkpIHtcblx0XHRcdFx0XHRcdHAudiA9IHNzdHIudDtcblx0XHRcdFx0XHRcdGlmKG9wdHMuY2VsbEhUTUwpIHAuaCA9IHNzdHIuaDtcblx0XHRcdFx0XHR9IGVsc2UgcC52ID0gXCJcIjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAnYic6IHAudiA9IHBhcnNleG1sYm9vbChwLnYpOyBicmVhaztcblx0XHRcdFx0Y2FzZSAnZCc6XG5cdFx0XHRcdFx0aWYob3B0cy5jZWxsRGF0ZXMpIHAudiA9IHBhcnNlRGF0ZShwLnYsIDEpO1xuXHRcdFx0XHRcdGVsc2UgeyBwLnYgPSBkYXRlbnVtKHBhcnNlRGF0ZShwLnYsIDEpKTsgcC50ID0gJ24nOyB9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdC8qIGVycm9yIHN0cmluZyBpbiAudywgbnVtYmVyIGluIC52ICovXG5cdFx0XHRcdGNhc2UgJ2UnOlxuXHRcdFx0XHRcdGlmKCFvcHRzIHx8IG9wdHMuY2VsbFRleHQgIT09IGZhbHNlKSBwLncgPSBwLnY7XG5cdFx0XHRcdFx0cC52ID0gUkJFcnJbcC52XTsgYnJlYWs7XG5cdFx0XHR9XG5cdFx0XHQvKiBmb3JtYXR0aW5nICovXG5cdFx0XHRmbXRpZCA9IGZpbGxpZCA9IDA7XG5cdFx0XHRjZiA9IG51bGw7XG5cdFx0XHRpZihkb19mb3JtYXQgJiYgdGFnLnMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRjZiA9IHN0eWxlcy5DZWxsWGZbdGFnLnNdO1xuXHRcdFx0XHRpZihjZiAhPSBudWxsKSB7XG5cdFx0XHRcdFx0aWYoY2YubnVtRm10SWQgIT0gbnVsbCkgZm10aWQgPSBjZi5udW1GbXRJZDtcblx0XHRcdFx0XHRpZihvcHRzLmNlbGxTdHlsZXMpIHtcblx0XHRcdFx0XHRcdGlmKGNmLmZpbGxJZCAhPSBudWxsKSBmaWxsaWQgPSBjZi5maWxsSWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRzYWZlX2Zvcm1hdChwLCBmbXRpZCwgZmlsbGlkLCBvcHRzLCB0aGVtZXMsIHN0eWxlcyk7XG5cdFx0XHRpZihvcHRzLmNlbGxEYXRlcyAmJiBkb19mb3JtYXQgJiYgcC50ID09ICduJyAmJiBmbXRfaXNfZGF0ZSh0YWJsZV9mbXRbZm10aWRdKSkgeyBwLnQgPSAnZCc7IHAudiA9IG51bWRhdGUocC52KTsgfVxuXHRcdFx0aWYodGFnLmNtICYmIG9wdHMueGxtZXRhKSB7XG5cdFx0XHRcdHZhciBjbSA9IChvcHRzLnhsbWV0YS5DZWxsfHxbXSlbK3RhZy5jbS0xXTtcblx0XHRcdFx0aWYoY20gJiYgY20udHlwZSA9PSAnWExEQVBSJykgcC5EID0gdHJ1ZTtcblx0XHRcdH1cblx0XHRcdGlmKGRlbnNlKSB7XG5cdFx0XHRcdHZhciBfciA9IGRlY29kZV9jZWxsKHRhZy5yKTtcblx0XHRcdFx0aWYoIXNbX3Iucl0pIHNbX3Iucl0gPSBbXTtcblx0XHRcdFx0c1tfci5yXVtfci5jXSA9IHA7XG5cdFx0XHR9IGVsc2Ugc1t0YWcucl0gPSBwO1xuXHRcdH1cblx0fVxuXHRpZihyb3dzLmxlbmd0aCA+IDApIHNbJyFyb3dzJ10gPSByb3dzO1xufTsgfSkoKTtcblxuZnVuY3Rpb24gd3JpdGVfd3NfeG1sX2RhdGEod3MvKjpXb3Jrc2hlZXQqLywgb3B0cywgaWR4Lyo6bnVtYmVyKi8sIHdiLyo6V29ya2Jvb2sqLy8qOjosIHJlbHMqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvLyo6QXJyYXk8c3RyaW5nPiovID0gW10sIHIvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXSwgcmFuZ2UgPSBzYWZlX2RlY29kZV9yYW5nZSh3c1snIXJlZiddKSwgY2VsbD1cIlwiLCByZWYsIHJyID0gXCJcIiwgY29scy8qOkFycmF5PHN0cmluZz4qLyA9IFtdLCBSPTAsIEM9MCwgcm93cyA9IHdzWychcm93cyddO1xuXHR2YXIgZGVuc2UgPSBBcnJheS5pc0FycmF5KHdzKTtcblx0dmFyIHBhcmFtcyA9ICh7cjpycn0vKjphbnkqLyksIHJvdy8qOlJvd0luZm8qLywgaGVpZ2h0ID0gLTE7XG5cdGZvcihDID0gcmFuZ2Uucy5jOyBDIDw9IHJhbmdlLmUuYzsgKytDKSBjb2xzW0NdID0gZW5jb2RlX2NvbChDKTtcblx0Zm9yKFIgPSByYW5nZS5zLnI7IFIgPD0gcmFuZ2UuZS5yOyArK1IpIHtcblx0XHRyID0gW107XG5cdFx0cnIgPSBlbmNvZGVfcm93KFIpO1xuXHRcdGZvcihDID0gcmFuZ2Uucy5jOyBDIDw9IHJhbmdlLmUuYzsgKytDKSB7XG5cdFx0XHRyZWYgPSBjb2xzW0NdICsgcnI7XG5cdFx0XHR2YXIgX2NlbGwgPSBkZW5zZSA/ICh3c1tSXXx8W10pW0NdOiB3c1tyZWZdO1xuXHRcdFx0aWYoX2NlbGwgPT09IHVuZGVmaW5lZCkgY29udGludWU7XG5cdFx0XHRpZigoY2VsbCA9IHdyaXRlX3dzX3htbF9jZWxsKF9jZWxsLCByZWYsIHdzLCBvcHRzLCBpZHgsIHdiKSkgIT0gbnVsbCkgci5wdXNoKGNlbGwpO1xuXHRcdH1cblx0XHRpZihyLmxlbmd0aCA+IDAgfHwgKHJvd3MgJiYgcm93c1tSXSkpIHtcblx0XHRcdHBhcmFtcyA9ICh7cjpycn0vKjphbnkqLyk7XG5cdFx0XHRpZihyb3dzICYmIHJvd3NbUl0pIHtcblx0XHRcdFx0cm93ID0gcm93c1tSXTtcblx0XHRcdFx0aWYocm93LmhpZGRlbikgcGFyYW1zLmhpZGRlbiA9IDE7XG5cdFx0XHRcdGhlaWdodCA9IC0xO1xuXHRcdFx0XHRpZihyb3cuaHB4KSBoZWlnaHQgPSBweDJwdChyb3cuaHB4KTtcblx0XHRcdFx0ZWxzZSBpZihyb3cuaHB0KSBoZWlnaHQgPSByb3cuaHB0O1xuXHRcdFx0XHRpZihoZWlnaHQgPiAtMSkgeyBwYXJhbXMuaHQgPSBoZWlnaHQ7IHBhcmFtcy5jdXN0b21IZWlnaHQgPSAxOyB9XG5cdFx0XHRcdGlmKHJvdy5sZXZlbCkgeyBwYXJhbXMub3V0bGluZUxldmVsID0gcm93LmxldmVsOyB9XG5cdFx0XHR9XG5cdFx0XHRvW28ubGVuZ3RoXSA9ICh3cml0ZXh0YWcoJ3JvdycsIHIuam9pbihcIlwiKSwgcGFyYW1zKSk7XG5cdFx0fVxuXHR9XG5cdGlmKHJvd3MpIGZvcig7IFIgPCByb3dzLmxlbmd0aDsgKytSKSB7XG5cdFx0aWYocm93cyAmJiByb3dzW1JdKSB7XG5cdFx0XHRwYXJhbXMgPSAoe3I6UisxfS8qOmFueSovKTtcblx0XHRcdHJvdyA9IHJvd3NbUl07XG5cdFx0XHRpZihyb3cuaGlkZGVuKSBwYXJhbXMuaGlkZGVuID0gMTtcblx0XHRcdGhlaWdodCA9IC0xO1xuXHRcdFx0aWYgKHJvdy5ocHgpIGhlaWdodCA9IHB4MnB0KHJvdy5ocHgpO1xuXHRcdFx0ZWxzZSBpZiAocm93LmhwdCkgaGVpZ2h0ID0gcm93LmhwdDtcblx0XHRcdGlmIChoZWlnaHQgPiAtMSkgeyBwYXJhbXMuaHQgPSBoZWlnaHQ7IHBhcmFtcy5jdXN0b21IZWlnaHQgPSAxOyB9XG5cdFx0XHRpZiAocm93LmxldmVsKSB7IHBhcmFtcy5vdXRsaW5lTGV2ZWwgPSByb3cubGV2ZWw7IH1cblx0XHRcdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygncm93JywgXCJcIiwgcGFyYW1zKSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3dzX3htbChpZHgvKjpudW1iZXIqLywgb3B0cywgd2IvKjpXb3JrYm9vayovLCByZWxzKS8qOnN0cmluZyovIHtcblx0dmFyIG8gPSBbWE1MX0hFQURFUiwgd3JpdGV4dGFnKCd3b3Jrc2hlZXQnLCBudWxsLCB7XG5cdFx0J3htbG5zJzogWE1MTlNfbWFpblswXSxcblx0XHQneG1sbnM6cic6IFhNTE5TLnJcblx0fSldO1xuXHR2YXIgcyA9IHdiLlNoZWV0TmFtZXNbaWR4XSwgc2lkeCA9IDAsIHJkYXRhID0gXCJcIjtcblx0dmFyIHdzID0gd2IuU2hlZXRzW3NdO1xuXHRpZih3cyA9PSBudWxsKSB3cyA9IHt9O1xuXHR2YXIgcmVmID0gd3NbJyFyZWYnXSB8fCAnQTEnO1xuXHR2YXIgcmFuZ2UgPSBzYWZlX2RlY29kZV9yYW5nZShyZWYpO1xuXHRpZihyYW5nZS5lLmMgPiAweDNGRkYgfHwgcmFuZ2UuZS5yID4gMHhGRkZGRikge1xuXHRcdGlmKG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZSBcIiArIHJlZiArIFwiIGV4Y2VlZHMgZm9ybWF0IGxpbWl0IEExOlhGRDEwNDg1NzZcIik7XG5cdFx0cmFuZ2UuZS5jID0gTWF0aC5taW4ocmFuZ2UuZS5jLCAweDNGRkYpO1xuXHRcdHJhbmdlLmUuciA9IE1hdGgubWluKHJhbmdlLmUuYywgMHhGRkZGRik7XG5cdFx0cmVmID0gZW5jb2RlX3JhbmdlKHJhbmdlKTtcblx0fVxuXHRpZighcmVscykgcmVscyA9IHt9O1xuXHR3c1snIWNvbW1lbnRzJ10gPSBbXTtcblx0dmFyIF9kcmF3aW5nID0gW107XG5cblx0d3JpdGVfd3NfeG1sX3NoZWV0cHIod3MsIHdiLCBpZHgsIG9wdHMsIG8pO1xuXG5cdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnZGltZW5zaW9uJywgbnVsbCwgeydyZWYnOiByZWZ9KSk7XG5cblx0b1tvLmxlbmd0aF0gPSB3cml0ZV93c194bWxfc2hlZXR2aWV3cyh3cywgb3B0cywgaWR4LCB3Yik7XG5cblx0LyogVE9ETzogc3RvcmUgaW4gV0IsIHByb2Nlc3Mgc3R5bGVzICovXG5cdGlmKG9wdHMuc2hlZXRGb3JtYXQpIG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnc2hlZXRGb3JtYXRQcicsIG51bGwsIHtcblx0XHRkZWZhdWx0Um93SGVpZ2h0Om9wdHMuc2hlZXRGb3JtYXQuZGVmYXVsdFJvd0hlaWdodHx8JzE2Jyxcblx0XHRiYXNlQ29sV2lkdGg6b3B0cy5zaGVldEZvcm1hdC5iYXNlQ29sV2lkdGh8fCcxMCcsXG5cdFx0b3V0bGluZUxldmVsUm93Om9wdHMuc2hlZXRGb3JtYXQub3V0bGluZUxldmVsUm93fHwnNydcblx0fSkpO1xuXG5cdGlmKHdzWychY29scyddICE9IG51bGwgJiYgd3NbJyFjb2xzJ10ubGVuZ3RoID4gMCkgb1tvLmxlbmd0aF0gPSAod3JpdGVfd3NfeG1sX2NvbHMod3MsIHdzWychY29scyddKSk7XG5cblx0b1tzaWR4ID0gby5sZW5ndGhdID0gJzxzaGVldERhdGEvPic7XG5cdHdzWychbGlua3MnXSA9IFtdO1xuXHRpZih3c1snIXJlZiddICE9IG51bGwpIHtcblx0XHRyZGF0YSA9IHdyaXRlX3dzX3htbF9kYXRhKHdzLCBvcHRzLCBpZHgsIHdiLCByZWxzKTtcblx0XHRpZihyZGF0YS5sZW5ndGggPiAwKSBvW28ubGVuZ3RoXSA9IChyZGF0YSk7XG5cdH1cblx0aWYoby5sZW5ndGg+c2lkeCsxKSB7IG9bby5sZW5ndGhdID0gKCc8L3NoZWV0RGF0YT4nKTsgb1tzaWR4XT1vW3NpZHhdLnJlcGxhY2UoXCIvPlwiLFwiPlwiKTsgfVxuXG5cdC8qIHNoZWV0Q2FsY1ByICovXG5cblx0aWYod3NbJyFwcm90ZWN0J10pIG9bby5sZW5ndGhdID0gd3JpdGVfd3NfeG1sX3Byb3RlY3Rpb24od3NbJyFwcm90ZWN0J10pO1xuXG5cdC8qIHByb3RlY3RlZFJhbmdlcyAqL1xuXHQvKiBzY2VuYXJpb3MgKi9cblxuXHRpZih3c1snIWF1dG9maWx0ZXInXSAhPSBudWxsKSBvW28ubGVuZ3RoXSA9IHdyaXRlX3dzX3htbF9hdXRvZmlsdGVyKHdzWychYXV0b2ZpbHRlciddLCB3cywgd2IsIGlkeCk7XG5cblx0Lyogc29ydFN0YXRlICovXG5cdC8qIGRhdGFDb25zb2xpZGF0ZSAqL1xuXHQvKiBjdXN0b21TaGVldFZpZXdzICovXG5cblx0aWYod3NbJyFtZXJnZXMnXSAhPSBudWxsICYmIHdzWychbWVyZ2VzJ10ubGVuZ3RoID4gMCkgb1tvLmxlbmd0aF0gPSAod3JpdGVfd3NfeG1sX21lcmdlcyh3c1snIW1lcmdlcyddKSk7XG5cblx0LyogcGhvbmV0aWNQciAqL1xuXHQvKiBjb25kaXRpb25hbEZvcm1hdHRpbmcgKi9cblx0LyogZGF0YVZhbGlkYXRpb25zICovXG5cblx0dmFyIHJlbGMgPSAtMSwgcmVsLCBySWQgPSAtMTtcblx0aWYoLyo6OigqL3dzWychbGlua3MnXS8qOjp8fFtdKSovLmxlbmd0aCA+IDApIHtcblx0XHRvW28ubGVuZ3RoXSA9IFwiPGh5cGVybGlua3M+XCI7XG5cdFx0Lyo6OigqL3dzWychbGlua3MnXS8qOjp8fFtdKSovLmZvckVhY2goZnVuY3Rpb24obCkge1xuXHRcdFx0aWYoIWxbMV0uVGFyZ2V0KSByZXR1cm47XG5cdFx0XHRyZWwgPSAoe1wicmVmXCI6bFswXX0vKjphbnkqLyk7XG5cdFx0XHRpZihsWzFdLlRhcmdldC5jaGFyQXQoMCkgIT0gXCIjXCIpIHtcblx0XHRcdFx0cklkID0gYWRkX3JlbHMocmVscywgLTEsIGVzY2FwZXhtbChsWzFdLlRhcmdldCkucmVwbGFjZSgvIy4qJC8sIFwiXCIpLCBSRUxTLkhMSU5LKTtcblx0XHRcdFx0cmVsW1wicjppZFwiXSA9IFwicklkXCIrcklkO1xuXHRcdFx0fVxuXHRcdFx0aWYoKHJlbGMgPSBsWzFdLlRhcmdldC5pbmRleE9mKFwiI1wiKSkgPiAtMSkgcmVsLmxvY2F0aW9uID0gZXNjYXBleG1sKGxbMV0uVGFyZ2V0LnNsaWNlKHJlbGMrMSkpO1xuXHRcdFx0aWYobFsxXS5Ub29sdGlwKSByZWwudG9vbHRpcCA9IGVzY2FwZXhtbChsWzFdLlRvb2x0aXApO1xuXHRcdFx0b1tvLmxlbmd0aF0gPSB3cml0ZXh0YWcoXCJoeXBlcmxpbmtcIixudWxsLHJlbCk7XG5cdFx0fSk7XG5cdFx0b1tvLmxlbmd0aF0gPSBcIjwvaHlwZXJsaW5rcz5cIjtcblx0fVxuXHRkZWxldGUgd3NbJyFsaW5rcyddO1xuXG5cdC8qIHByaW50T3B0aW9ucyAqL1xuXG5cdGlmKHdzWychbWFyZ2lucyddICE9IG51bGwpIG9bby5sZW5ndGhdID0gIHdyaXRlX3dzX3htbF9tYXJnaW5zKHdzWychbWFyZ2lucyddKTtcblxuXHQvKiBwYWdlU2V0dXAgKi9cblx0LyogaGVhZGVyRm9vdGVyICovXG5cdC8qIHJvd0JyZWFrcyAqL1xuXHQvKiBjb2xCcmVha3MgKi9cblx0LyogY3VzdG9tUHJvcGVydGllcyAqL1xuXHQvKiBjZWxsV2F0Y2hlcyAqL1xuXG5cdGlmKCFvcHRzIHx8IG9wdHMuaWdub3JlRUMgfHwgKG9wdHMuaWdub3JlRUMgPT0gKHZvaWQgMCkpKSBvW28ubGVuZ3RoXSA9IHdyaXRldGFnKFwiaWdub3JlZEVycm9yc1wiLCB3cml0ZXh0YWcoXCJpZ25vcmVkRXJyb3JcIiwgbnVsbCwge251bWJlclN0b3JlZEFzVGV4dDoxLCBzcXJlZjpyZWZ9KSk7XG5cblx0Lyogc21hcnRUYWdzICovXG5cblx0aWYoX2RyYXdpbmcubGVuZ3RoID4gMCkge1xuXHRcdHJJZCA9IGFkZF9yZWxzKHJlbHMsIC0xLCBcIi4uL2RyYXdpbmdzL2RyYXdpbmdcIiArIChpZHgrMSkgKyBcIi54bWxcIiwgUkVMUy5EUkFXKTtcblx0XHRvW28ubGVuZ3RoXSA9IHdyaXRleHRhZyhcImRyYXdpbmdcIiwgbnVsbCwge1wicjppZFwiOlwicklkXCIgKyBySWR9KTtcblx0XHR3c1snIWRyYXdpbmcnXSA9IF9kcmF3aW5nO1xuXHR9XG5cblx0aWYod3NbJyFjb21tZW50cyddLmxlbmd0aCA+IDApIHtcblx0XHRySWQgPSBhZGRfcmVscyhyZWxzLCAtMSwgXCIuLi9kcmF3aW5ncy92bWxEcmF3aW5nXCIgKyAoaWR4KzEpICsgXCIudm1sXCIsIFJFTFMuVk1MKTtcblx0XHRvW28ubGVuZ3RoXSA9IHdyaXRleHRhZyhcImxlZ2FjeURyYXdpbmdcIiwgbnVsbCwge1wicjppZFwiOlwicklkXCIgKyBySWR9KTtcblx0XHR3c1snIWxlZ2FjeSddID0gcklkO1xuXHR9XG5cblx0LyogbGVnYWN5RHJhd2luZ0hGICovXG5cdC8qIHBpY3R1cmUgKi9cblx0Lyogb2xlT2JqZWN0cyAqL1xuXHQvKiBjb250cm9scyAqL1xuXHQvKiB3ZWJQdWJsaXNoSXRlbXMgKi9cblx0LyogdGFibGVQYXJ0cyAqL1xuXHQvKiBleHRMc3QgKi9cblxuXHRpZihvLmxlbmd0aD4xKSB7IG9bby5sZW5ndGhdID0gKCc8L3dvcmtzaGVldD4nKTsgb1sxXT1vWzFdLnJlcGxhY2UoXCIvPlwiLFwiPlwiKTsgfVxuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjcyNiBCcnRSb3dIZHIgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydFJvd0hkcihkYXRhLCBsZW5ndGgpIHtcblx0dmFyIHogPSAoe30vKjphbnkqLyk7XG5cdHZhciB0Z3QgPSBkYXRhLmwgKyBsZW5ndGg7XG5cdHouciA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0ZGF0YS5sICs9IDQ7IC8vIFRPRE86IGl4ZmVcblx0dmFyIG1peVJ3ID0gZGF0YS5yZWFkX3NoaWZ0KDIpO1xuXHRkYXRhLmwgKz0gMTsgLy8gVE9ETzogdG9wL2JvdCBwYWRkaW5nXG5cdHZhciBmbGFncyA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0ZGF0YS5sID0gdGd0O1xuXHRpZihmbGFncyAmIDB4MDcpIHoubGV2ZWwgPSBmbGFncyAmIDB4MDc7XG5cdGlmKGZsYWdzICYgMHgxMCkgei5oaWRkZW4gPSB0cnVlO1xuXHRpZihmbGFncyAmIDB4MjApIHouaHB0ID0gbWl5UncgLyAyMDtcblx0cmV0dXJuIHo7XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRSb3dIZHIoUi8qOm51bWJlciovLCByYW5nZSwgd3MpIHtcblx0dmFyIG8gPSBuZXdfYnVmKDE3KzgqMTYpO1xuXHR2YXIgcm93ID0gKHdzWychcm93cyddfHxbXSlbUl18fHt9O1xuXHRvLndyaXRlX3NoaWZ0KDQsIFIpO1xuXG5cdG8ud3JpdGVfc2hpZnQoNCwgMCk7IC8qIFRPRE86IGl4ZmUgKi9cblxuXHR2YXIgbWl5UncgPSAweDAxNDA7XG5cdGlmKHJvdy5ocHgpIG1peVJ3ID0gcHgycHQocm93LmhweCkgKiAyMDtcblx0ZWxzZSBpZihyb3cuaHB0KSBtaXlSdyA9IHJvdy5ocHQgKiAyMDtcblx0by53cml0ZV9zaGlmdCgyLCBtaXlSdyk7XG5cblx0by53cml0ZV9zaGlmdCgxLCAwKTsgLyogdG9wL2JvdCBwYWRkaW5nICovXG5cblx0dmFyIGZsYWdzID0gMHgwO1xuXHRpZihyb3cubGV2ZWwpIGZsYWdzIHw9IHJvdy5sZXZlbDtcblx0aWYocm93LmhpZGRlbikgZmxhZ3MgfD0gMHgxMDtcblx0aWYocm93LmhweCB8fCByb3cuaHB0KSBmbGFncyB8PSAweDIwO1xuXHRvLndyaXRlX3NoaWZ0KDEsIGZsYWdzKTtcblxuXHRvLndyaXRlX3NoaWZ0KDEsIDApOyAvKiBwaG9uZXRpYyBndWlkZSAqL1xuXG5cdC8qIFtNUy1YTFNCXSAyLjUuOCBCcnRDb2xTcGFuIGV4cGxhaW5zIHRoZSBtZWNoYW5pc20gKi9cblx0dmFyIG5jb2xzcGFuID0gMCwgbGNzID0gby5sO1xuXHRvLmwgKz0gNDtcblxuXHR2YXIgY2FkZHIgPSB7cjpSLCBjOjB9O1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkge1xuXHRcdGlmKChyYW5nZS5zLmMgPiAoKGkrMSkgPDwgMTApKSB8fCAocmFuZ2UuZS5jIDwgKGkgPDwgMTApKSkgY29udGludWU7XG5cdFx0dmFyIGZpcnN0ID0gLTEsIGxhc3QgPSAtMTtcblx0XHRmb3IodmFyIGogPSAoaTw8MTApOyBqIDwgKChpKzEpPDwxMCk7ICsraikge1xuXHRcdFx0Y2FkZHIuYyA9IGo7XG5cdFx0XHR2YXIgY2VsbCA9IEFycmF5LmlzQXJyYXkod3MpID8gKHdzW2NhZGRyLnJdfHxbXSlbY2FkZHIuY10gOiB3c1tlbmNvZGVfY2VsbChjYWRkcildO1xuXHRcdFx0aWYoY2VsbCkgeyBpZihmaXJzdCA8IDApIGZpcnN0ID0gajsgbGFzdCA9IGo7IH1cblx0XHR9XG5cdFx0aWYoZmlyc3QgPCAwKSBjb250aW51ZTtcblx0XHQrK25jb2xzcGFuO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgZmlyc3QpO1xuXHRcdG8ud3JpdGVfc2hpZnQoNCwgbGFzdCk7XG5cdH1cblxuXHR2YXIgbCA9IG8ubDtcblx0by5sID0gbGNzO1xuXHRvLndyaXRlX3NoaWZ0KDQsIG5jb2xzcGFuKTtcblx0by5sID0gbDtcblxuXHRyZXR1cm4gby5sZW5ndGggPiBvLmwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuZnVuY3Rpb24gd3JpdGVfcm93X2hlYWRlcihiYSwgd3MsIHJhbmdlLCBSKSB7XG5cdHZhciBvID0gd3JpdGVfQnJ0Um93SGRyKFIsIHJhbmdlLCB3cyk7XG5cdGlmKChvLmxlbmd0aCA+IDE3KSB8fCAod3NbJyFyb3dzJ118fFtdKVtSXSkgd3JpdGVfcmVjb3JkKGJhLCAweDAwMDAgLyogQnJ0Um93SGRyICovLCBvKTtcbn1cblxuLyogW01TLVhMU0JdIDIuNC44MjAgQnJ0V3NEaW0gKi9cbnZhciBwYXJzZV9CcnRXc0RpbSA9IHBhcnNlX1VuY2hlY2tlZFJmWDtcbnZhciB3cml0ZV9CcnRXc0RpbSA9IHdyaXRlX1VuY2hlY2tlZFJmWDtcblxuLyogW01TLVhMU0JdIDIuNC44MjEgQnJ0V3NGbXRJbmZvICovXG5mdW5jdGlvbiBwYXJzZV9CcnRXc0ZtdEluZm8oLyo6OmRhdGEsIGxlbmd0aCovKSB7XG59XG4vL2Z1bmN0aW9uIHdyaXRlX0JydFdzRm10SW5mbyh3cywgbykgeyB9XG5cbi8qIFtNUy1YTFNCXSAyLjQuODIzIEJydFdzUHJvcCAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0V3NQcm9wKGRhdGEsIGxlbmd0aCkge1xuXHR2YXIgeiA9IHt9O1xuXHR2YXIgZiA9IGRhdGFbZGF0YS5sXTsgKytkYXRhLmw7XG5cdHouYWJvdmUgPSAhKGYgJiAweDQwKTtcblx0ei5sZWZ0ICA9ICEoZiAmIDB4ODApO1xuXHQvKiBUT0RPOiBwdWxsIGZsYWdzICovXG5cdGRhdGEubCArPSAxODtcblx0ei5uYW1lID0gcGFyc2VfWExTQkNvZGVOYW1lKGRhdGEsIGxlbmd0aCAtIDE5KTtcblx0cmV0dXJuIHo7XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRXc1Byb3Aoc3RyLCBvdXRsLCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoODQrNCpzdHIubGVuZ3RoKTtcblx0dmFyIGYgPSAweEMwO1xuXHRpZihvdXRsKSB7XG5cdFx0aWYob3V0bC5hYm92ZSkgZiAmPSB+MHg0MDtcblx0XHRpZihvdXRsLmxlZnQpICBmICY9IH4weDgwO1xuXHR9XG5cdG8ud3JpdGVfc2hpZnQoMSwgZik7XG5cdGZvcih2YXIgaSA9IDE7IGkgPCAzOyArK2kpIG8ud3JpdGVfc2hpZnQoMSwwKTtcblx0d3JpdGVfQnJ0Q29sb3Ioe2F1dG86MX0sIG8pO1xuXHRvLndyaXRlX3NoaWZ0KC00LC0xKTtcblx0by53cml0ZV9zaGlmdCgtNCwtMSk7XG5cdHdyaXRlX1hMU0JDb2RlTmFtZShzdHIsIG8pO1xuXHRyZXR1cm4gby5zbGljZSgwLCBvLmwpO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjMwNiBCcnRDZWxsQmxhbmsgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydENlbGxCbGFuayhkYXRhKSB7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQkNlbGwoZGF0YSk7XG5cdHJldHVybiBbY2VsbF07XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRDZWxsQmxhbmsoY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1Zig4KTtcblx0cmV0dXJuIHdyaXRlX1hMU0JDZWxsKG5jZWxsLCBvKTtcbn1cbmZ1bmN0aW9uIHBhcnNlX0JydFNob3J0QmxhbmsoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JTaG9ydENlbGwoZGF0YSk7XG5cdHJldHVybiBbY2VsbF07XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRTaG9ydEJsYW5rKGNlbGwsIG5jZWxsLCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoNCk7XG5cdHJldHVybiB3cml0ZV9YTFNCU2hvcnRDZWxsKG5jZWxsLCBvKTtcbn1cblxuLyogW01TLVhMU0JdIDIuNC4zMDcgQnJ0Q2VsbEJvb2wgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydENlbGxCb29sKGRhdGEpIHtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNCQ2VsbChkYXRhKTtcblx0dmFyIGZCb29sID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHRyZXR1cm4gW2NlbGwsIGZCb29sLCAnYiddO1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0Q2VsbEJvb2woY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1Zig5KTtcblx0d3JpdGVfWExTQkNlbGwobmNlbGwsIG8pO1xuXHRvLndyaXRlX3NoaWZ0KDEsIGNlbGwudiA/IDEgOiAwKTtcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiBwYXJzZV9CcnRTaG9ydEJvb2woZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JTaG9ydENlbGwoZGF0YSk7XG5cdHZhciBmQm9vbCA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0cmV0dXJuIFtjZWxsLCBmQm9vbCwgJ2InXTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydFNob3J0Qm9vbChjZWxsLCBuY2VsbCwgbykge1xuXHRpZihvID09IG51bGwpIG8gPSBuZXdfYnVmKDUpO1xuXHR3cml0ZV9YTFNCU2hvcnRDZWxsKG5jZWxsLCBvKTtcblx0by53cml0ZV9zaGlmdCgxLCBjZWxsLnYgPyAxIDogMCk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjMwOCBCcnRDZWxsRXJyb3IgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydENlbGxFcnJvcihkYXRhKSB7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQkNlbGwoZGF0YSk7XG5cdHZhciBiRXJyb3IgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cdHJldHVybiBbY2VsbCwgYkVycm9yLCAnZSddO1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0Q2VsbEVycm9yKGNlbGwsIG5jZWxsLCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoOSk7XG5cdHdyaXRlX1hMU0JDZWxsKG5jZWxsLCBvKTtcblx0by53cml0ZV9zaGlmdCgxLCBjZWxsLnYpO1xuXHRyZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHBhcnNlX0JydFNob3J0RXJyb3IoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JTaG9ydENlbGwoZGF0YSk7XG5cdHZhciBiRXJyb3IgPSBkYXRhLnJlYWRfc2hpZnQoMSk7XG5cdHJldHVybiBbY2VsbCwgYkVycm9yLCAnZSddO1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0U2hvcnRFcnJvcihjZWxsLCBuY2VsbCwgbykge1xuXHRpZihvID09IG51bGwpIG8gPSBuZXdfYnVmKDgpO1xuXHR3cml0ZV9YTFNCU2hvcnRDZWxsKG5jZWxsLCBvKTtcblx0by53cml0ZV9zaGlmdCgxLCBjZWxsLnYpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRyZXR1cm4gbztcbn1cblxuXG4vKiBbTVMtWExTQl0gMi40LjMxMSBCcnRDZWxsSXNzdCAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Q2VsbElzc3QoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JDZWxsKGRhdGEpO1xuXHR2YXIgaXNzdCA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0cmV0dXJuIFtjZWxsLCBpc3N0LCAncyddO1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0Q2VsbElzc3QoY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1ZigxMik7XG5cdHdyaXRlX1hMU0JDZWxsKG5jZWxsLCBvKTtcblx0by53cml0ZV9zaGlmdCg0LCBuY2VsbC52KTtcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiBwYXJzZV9CcnRTaG9ydElzc3QoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JTaG9ydENlbGwoZGF0YSk7XG5cdHZhciBpc3N0ID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHRyZXR1cm4gW2NlbGwsIGlzc3QsICdzJ107XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRTaG9ydElzc3QoY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1Zig4KTtcblx0d3JpdGVfWExTQlNob3J0Q2VsbChuY2VsbCwgbyk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgbmNlbGwudik7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjMxMyBCcnRDZWxsUmVhbCAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Q2VsbFJlYWwoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JDZWxsKGRhdGEpO1xuXHR2YXIgdmFsdWUgPSBwYXJzZV9YbnVtKGRhdGEpO1xuXHRyZXR1cm4gW2NlbGwsIHZhbHVlLCAnbiddO1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0Q2VsbFJlYWwoY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1ZigxNik7XG5cdHdyaXRlX1hMU0JDZWxsKG5jZWxsLCBvKTtcblx0d3JpdGVfWG51bShjZWxsLnYsIG8pO1xuXHRyZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHBhcnNlX0JydFNob3J0UmVhbChkYXRhKSB7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQlNob3J0Q2VsbChkYXRhKTtcblx0dmFyIHZhbHVlID0gcGFyc2VfWG51bShkYXRhKTtcblx0cmV0dXJuIFtjZWxsLCB2YWx1ZSwgJ24nXTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydFNob3J0UmVhbChjZWxsLCBuY2VsbCwgbykge1xuXHRpZihvID09IG51bGwpIG8gPSBuZXdfYnVmKDEyKTtcblx0d3JpdGVfWExTQlNob3J0Q2VsbChuY2VsbCwgbyk7XG5cdHdyaXRlX1hudW0oY2VsbC52LCBvKTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuMzE0IEJydENlbGxSayAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Q2VsbFJrKGRhdGEpIHtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNCQ2VsbChkYXRhKTtcblx0dmFyIHZhbHVlID0gcGFyc2VfUmtOdW1iZXIoZGF0YSk7XG5cdHJldHVybiBbY2VsbCwgdmFsdWUsICduJ107XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRDZWxsUmsoY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1ZigxMik7XG5cdHdyaXRlX1hMU0JDZWxsKG5jZWxsLCBvKTtcblx0d3JpdGVfUmtOdW1iZXIoY2VsbC52LCBvKTtcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiBwYXJzZV9CcnRTaG9ydFJrKGRhdGEpIHtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNCU2hvcnRDZWxsKGRhdGEpO1xuXHR2YXIgdmFsdWUgPSBwYXJzZV9Sa051bWJlcihkYXRhKTtcblx0cmV0dXJuIFtjZWxsLCB2YWx1ZSwgJ24nXTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydFNob3J0UmsoY2VsbCwgbmNlbGwsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1Zig4KTtcblx0d3JpdGVfWExTQlNob3J0Q2VsbChuY2VsbCwgbyk7XG5cdHdyaXRlX1JrTnVtYmVyKGNlbGwudiwgbyk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjMyMyBCcnRDZWxsUlN0cmluZyAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Q2VsbFJTdHJpbmcoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JDZWxsKGRhdGEpO1xuXHR2YXIgdmFsdWUgPSBwYXJzZV9SaWNoU3RyKGRhdGEpO1xuXHRyZXR1cm4gW2NlbGwsIHZhbHVlLCAnaXMnXTtcbn1cblxuLyogW01TLVhMU0JdIDIuNC4zMTcgQnJ0Q2VsbFN0ICovXG5mdW5jdGlvbiBwYXJzZV9CcnRDZWxsU3QoZGF0YSkge1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JDZWxsKGRhdGEpO1xuXHR2YXIgdmFsdWUgPSBwYXJzZV9YTFdpZGVTdHJpbmcoZGF0YSk7XG5cdHJldHVybiBbY2VsbCwgdmFsdWUsICdzdHInXTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydENlbGxTdChjZWxsLCBuY2VsbCwgbykge1xuXHRpZihvID09IG51bGwpIG8gPSBuZXdfYnVmKDEyICsgNCAqIGNlbGwudi5sZW5ndGgpO1xuXHR3cml0ZV9YTFNCQ2VsbChuY2VsbCwgbyk7XG5cdHdyaXRlX1hMV2lkZVN0cmluZyhjZWxsLnYsIG8pO1xuXHRyZXR1cm4gby5sZW5ndGggPiBvLmwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuZnVuY3Rpb24gcGFyc2VfQnJ0U2hvcnRTdChkYXRhKSB7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQlNob3J0Q2VsbChkYXRhKTtcblx0dmFyIHZhbHVlID0gcGFyc2VfWExXaWRlU3RyaW5nKGRhdGEpO1xuXHRyZXR1cm4gW2NlbGwsIHZhbHVlLCAnc3RyJ107XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRTaG9ydFN0KGNlbGwsIG5jZWxsLCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoOCArIDQgKiBjZWxsLnYubGVuZ3RoKTtcblx0d3JpdGVfWExTQlNob3J0Q2VsbChuY2VsbCwgbyk7XG5cdHdyaXRlX1hMV2lkZVN0cmluZyhjZWxsLnYsIG8pO1xuXHRyZXR1cm4gby5sZW5ndGggPiBvLmwgPyBvLnNsaWNlKDAsIG8ubCkgOiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjY1MyBCcnRGbWxhQm9vbCAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Rm1sYUJvb2woZGF0YSwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciBlbmQgPSBkYXRhLmwgKyBsZW5ndGg7XG5cdHZhciBjZWxsID0gcGFyc2VfWExTQkNlbGwoZGF0YSk7XG5cdGNlbGwuciA9IG9wdHNbJyFyb3cnXTtcblx0dmFyIHZhbHVlID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHR2YXIgbyA9IFtjZWxsLCB2YWx1ZSwgJ2InXTtcblx0aWYob3B0cy5jZWxsRm9ybXVsYSkge1xuXHRcdGRhdGEubCArPSAyO1xuXHRcdHZhciBmb3JtdWxhID0gcGFyc2VfWExTQkNlbGxQYXJzZWRGb3JtdWxhKGRhdGEsIGVuZCAtIGRhdGEubCwgb3B0cyk7XG5cdFx0b1szXSA9IHN0cmluZ2lmeV9mb3JtdWxhKGZvcm11bGEsIG51bGwvKnJhbmdlKi8sIGNlbGwsIG9wdHMuc3VwYm9va3MsIG9wdHMpOy8qIFRPRE8gKi9cblx0fVxuXHRlbHNlIGRhdGEubCA9IGVuZDtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuNjU0IEJydEZtbGFFcnJvciAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Rm1sYUVycm9yKGRhdGEsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgZW5kID0gZGF0YS5sICsgbGVuZ3RoO1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JDZWxsKGRhdGEpO1xuXHRjZWxsLnIgPSBvcHRzWychcm93J107XG5cdHZhciB2YWx1ZSA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0dmFyIG8gPSBbY2VsbCwgdmFsdWUsICdlJ107XG5cdGlmKG9wdHMuY2VsbEZvcm11bGEpIHtcblx0XHRkYXRhLmwgKz0gMjtcblx0XHR2YXIgZm9ybXVsYSA9IHBhcnNlX1hMU0JDZWxsUGFyc2VkRm9ybXVsYShkYXRhLCBlbmQgLSBkYXRhLmwsIG9wdHMpO1xuXHRcdG9bM10gPSBzdHJpbmdpZnlfZm9ybXVsYShmb3JtdWxhLCBudWxsLypyYW5nZSovLCBjZWxsLCBvcHRzLnN1cGJvb2tzLCBvcHRzKTsvKiBUT0RPICovXG5cdH1cblx0ZWxzZSBkYXRhLmwgPSBlbmQ7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjY1NSBCcnRGbWxhTnVtICovXG5mdW5jdGlvbiBwYXJzZV9CcnRGbWxhTnVtKGRhdGEsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgZW5kID0gZGF0YS5sICsgbGVuZ3RoO1xuXHR2YXIgY2VsbCA9IHBhcnNlX1hMU0JDZWxsKGRhdGEpO1xuXHRjZWxsLnIgPSBvcHRzWychcm93J107XG5cdHZhciB2YWx1ZSA9IHBhcnNlX1hudW0oZGF0YSk7XG5cdHZhciBvID0gW2NlbGwsIHZhbHVlLCAnbiddO1xuXHRpZihvcHRzLmNlbGxGb3JtdWxhKSB7XG5cdFx0ZGF0YS5sICs9IDI7XG5cdFx0dmFyIGZvcm11bGEgPSBwYXJzZV9YTFNCQ2VsbFBhcnNlZEZvcm11bGEoZGF0YSwgZW5kIC0gZGF0YS5sLCBvcHRzKTtcblx0XHRvWzNdID0gc3RyaW5naWZ5X2Zvcm11bGEoZm9ybXVsYSwgbnVsbC8qcmFuZ2UqLywgY2VsbCwgb3B0cy5zdXBib29rcywgb3B0cyk7LyogVE9ETyAqL1xuXHR9XG5cdGVsc2UgZGF0YS5sID0gZW5kO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU0JdIDIuNC42NTYgQnJ0Rm1sYVN0cmluZyAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Rm1sYVN0cmluZyhkYXRhLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGRhdGEubCArIGxlbmd0aDtcblx0dmFyIGNlbGwgPSBwYXJzZV9YTFNCQ2VsbChkYXRhKTtcblx0Y2VsbC5yID0gb3B0c1snIXJvdyddO1xuXHR2YXIgdmFsdWUgPSBwYXJzZV9YTFdpZGVTdHJpbmcoZGF0YSk7XG5cdHZhciBvID0gW2NlbGwsIHZhbHVlLCAnc3RyJ107XG5cdGlmKG9wdHMuY2VsbEZvcm11bGEpIHtcblx0XHRkYXRhLmwgKz0gMjtcblx0XHR2YXIgZm9ybXVsYSA9IHBhcnNlX1hMU0JDZWxsUGFyc2VkRm9ybXVsYShkYXRhLCBlbmQgLSBkYXRhLmwsIG9wdHMpO1xuXHRcdG9bM10gPSBzdHJpbmdpZnlfZm9ybXVsYShmb3JtdWxhLCBudWxsLypyYW5nZSovLCBjZWxsLCBvcHRzLnN1cGJvb2tzLCBvcHRzKTsvKiBUT0RPICovXG5cdH1cblx0ZWxzZSBkYXRhLmwgPSBlbmQ7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjY4MiBCcnRNZXJnZUNlbGwgKi9cbnZhciBwYXJzZV9CcnRNZXJnZUNlbGwgPSBwYXJzZV9VbmNoZWNrZWRSZlg7XG52YXIgd3JpdGVfQnJ0TWVyZ2VDZWxsID0gd3JpdGVfVW5jaGVja2VkUmZYO1xuLyogW01TLVhMU0JdIDIuNC4xMDcgQnJ0QmVnaW5NZXJnZUNlbGxzICovXG5mdW5jdGlvbiB3cml0ZV9CcnRCZWdpbk1lcmdlQ2VsbHMoY250LCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoNCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgY250KTtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuNjYyIEJydEhMaW5rICovXG5mdW5jdGlvbiBwYXJzZV9CcnRITGluayhkYXRhLCBsZW5ndGgvKjo6LCBvcHRzKi8pIHtcblx0dmFyIGVuZCA9IGRhdGEubCArIGxlbmd0aDtcblx0dmFyIHJmeCA9IHBhcnNlX1VuY2hlY2tlZFJmWChkYXRhLCAxNik7XG5cdHZhciByZWxJZCA9IHBhcnNlX1hMTnVsbGFibGVXaWRlU3RyaW5nKGRhdGEpO1xuXHR2YXIgbG9jID0gcGFyc2VfWExXaWRlU3RyaW5nKGRhdGEpO1xuXHR2YXIgdG9vbHRpcCA9IHBhcnNlX1hMV2lkZVN0cmluZyhkYXRhKTtcblx0dmFyIGRpc3BsYXkgPSBwYXJzZV9YTFdpZGVTdHJpbmcoZGF0YSk7XG5cdGRhdGEubCA9IGVuZDtcblx0dmFyIG8gPSAoe3JmeDpyZngsIHJlbElkOnJlbElkLCBsb2M6bG9jLCBkaXNwbGF5OmRpc3BsYXl9Lyo6YW55Ki8pO1xuXHRpZih0b29sdGlwKSBvLlRvb2x0aXAgPSB0b29sdGlwO1xuXHRyZXR1cm4gbztcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydEhMaW5rKGwsIHJJZCkge1xuXHR2YXIgbyA9IG5ld19idWYoNTArNCoobFsxXS5UYXJnZXQubGVuZ3RoICsgKGxbMV0uVG9vbHRpcCB8fCBcIlwiKS5sZW5ndGgpKTtcblx0d3JpdGVfVW5jaGVja2VkUmZYKHtzOmRlY29kZV9jZWxsKGxbMF0pLCBlOmRlY29kZV9jZWxsKGxbMF0pfSwgbyk7XG5cdHdyaXRlX1JlbElEKFwicklkXCIgKyBySWQsIG8pO1xuXHR2YXIgbG9jaWR4ID0gbFsxXS5UYXJnZXQuaW5kZXhPZihcIiNcIik7XG5cdHZhciBsb2MgPSBsb2NpZHggPT0gLTEgPyBcIlwiIDogbFsxXS5UYXJnZXQuc2xpY2UobG9jaWR4KzEpO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcobG9jIHx8IFwiXCIsIG8pO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcobFsxXS5Ub29sdGlwIHx8IFwiXCIsIG8pO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcoXCJcIiwgbyk7XG5cdHJldHVybiBvLnNsaWNlKDAsIG8ubCk7XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuNjkyIEJydFBhbmUgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydFBhbmUoLypkYXRhLCBsZW5ndGgsIG9wdHMqLykge1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjYgQnJ0QXJyRm1sYSAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0QXJyRm1sYShkYXRhLCBsZW5ndGgsIG9wdHMpIHtcblx0dmFyIGVuZCA9IGRhdGEubCArIGxlbmd0aDtcblx0dmFyIHJmeCA9IHBhcnNlX1JmWChkYXRhLCAxNik7XG5cdHZhciBmQWx3YXlzQ2FsYyA9IGRhdGEucmVhZF9zaGlmdCgxKTtcblx0dmFyIG8gPSBbcmZ4XTsgb1syXSA9IGZBbHdheXNDYWxjO1xuXHRpZihvcHRzLmNlbGxGb3JtdWxhKSB7XG5cdFx0dmFyIGZvcm11bGEgPSBwYXJzZV9YTFNCQXJyYXlQYXJzZWRGb3JtdWxhKGRhdGEsIGVuZCAtIGRhdGEubCwgb3B0cyk7XG5cdFx0b1sxXSA9IGZvcm11bGE7XG5cdH0gZWxzZSBkYXRhLmwgPSBlbmQ7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40Ljc1MCBCcnRTaHJGbWxhICovXG5mdW5jdGlvbiBwYXJzZV9CcnRTaHJGbWxhKGRhdGEsIGxlbmd0aCwgb3B0cykge1xuXHR2YXIgZW5kID0gZGF0YS5sICsgbGVuZ3RoO1xuXHR2YXIgcmZ4ID0gcGFyc2VfVW5jaGVja2VkUmZYKGRhdGEsIDE2KTtcblx0dmFyIG8gPSBbcmZ4XTtcblx0aWYob3B0cy5jZWxsRm9ybXVsYSkge1xuXHRcdHZhciBmb3JtdWxhID0gcGFyc2VfWExTQlNoYXJlZFBhcnNlZEZvcm11bGEoZGF0YSwgZW5kIC0gZGF0YS5sLCBvcHRzKTtcblx0XHRvWzFdID0gZm9ybXVsYTtcblx0XHRkYXRhLmwgPSBlbmQ7XG5cdH0gZWxzZSBkYXRhLmwgPSBlbmQ7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjMyMyBCcnRDb2xJbmZvICovXG4vKiBUT0RPOiBvbmNlIFhMUyBDb2xJbmZvIGlzIHNldCwgY29tYmluZSB0aGUgZnVuY3Rpb25zICovXG5mdW5jdGlvbiB3cml0ZV9CcnRDb2xJbmZvKEMvKjpudW1iZXIqLywgY29sLCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoMTgpO1xuXHR2YXIgcCA9IGNvbF9vYmpfdyhDLCBjb2wpO1xuXHRvLndyaXRlX3NoaWZ0KC00LCBDKTtcblx0by53cml0ZV9zaGlmdCgtNCwgQyk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgKHAud2lkdGggfHwgMTApICogMjU2KTtcblx0by53cml0ZV9zaGlmdCg0LCAwLyppeGZlKi8pOyAvLyBzdHlsZVxuXHR2YXIgZmxhZ3MgPSAwO1xuXHRpZihjb2wuaGlkZGVuKSBmbGFncyB8PSAweDAxO1xuXHRpZih0eXBlb2YgcC53aWR0aCA9PSAnbnVtYmVyJykgZmxhZ3MgfD0gMHgwMjtcblx0aWYoY29sLmxldmVsKSBmbGFncyB8PSAoY29sLmxldmVsIDw8IDgpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIGZsYWdzKTsgLy8gYml0IGZsYWdcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuNjc4IEJydE1hcmdpbnMgKi9cbnZhciBCcnRNYXJnaW5LZXlzID0gW1wibGVmdFwiLFwicmlnaHRcIixcInRvcFwiLFwiYm90dG9tXCIsXCJoZWFkZXJcIixcImZvb3RlclwiXTtcbmZ1bmN0aW9uIHBhcnNlX0JydE1hcmdpbnMoZGF0YS8qOjosIGxlbmd0aCwgb3B0cyovKS8qOk1hcmdpbnMqLyB7XG5cdHZhciBtYXJnaW5zID0gKHt9Lyo6YW55Ki8pO1xuXHRCcnRNYXJnaW5LZXlzLmZvckVhY2goZnVuY3Rpb24oaykgeyBtYXJnaW5zW2tdID0gcGFyc2VfWG51bShkYXRhLCA4KTsgfSk7XG5cdHJldHVybiBtYXJnaW5zO1xufVxuZnVuY3Rpb24gd3JpdGVfQnJ0TWFyZ2lucyhtYXJnaW5zLyo6TWFyZ2lucyovLCBvKSB7XG5cdGlmKG8gPT0gbnVsbCkgbyA9IG5ld19idWYoNio4KTtcblx0ZGVmYXVsdF9tYXJnaW5zKG1hcmdpbnMpO1xuXHRCcnRNYXJnaW5LZXlzLmZvckVhY2goZnVuY3Rpb24oaykgeyB3cml0ZV9YbnVtKChtYXJnaW5zLyo6YW55Ki8pW2tdLCBvKTsgfSk7XG5cdHJldHVybiBvO1xufVxuXG4vKiBbTVMtWExTQl0gMi40LjI5OSBCcnRCZWdpbldzVmlldyAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0QmVnaW5Xc1ZpZXcoZGF0YS8qOjosIGxlbmd0aCwgb3B0cyovKSB7XG5cdHZhciBmID0gZGF0YS5yZWFkX3NoaWZ0KDIpO1xuXHRkYXRhLmwgKz0gMjg7XG5cdHJldHVybiB7IFJUTDogZiAmIDB4MjAgfTtcbn1cbmZ1bmN0aW9uIHdyaXRlX0JydEJlZ2luV3NWaWV3KHdzLCBXb3JrYm9vaywgbykge1xuXHRpZihvID09IG51bGwpIG8gPSBuZXdfYnVmKDMwKTtcblx0dmFyIGYgPSAweDM5Yztcblx0aWYoKCgoV29ya2Jvb2t8fHt9KS5WaWV3c3x8W10pWzBdfHx7fSkuUlRMKSBmIHw9IDB4MjA7XG5cdG8ud3JpdGVfc2hpZnQoMiwgZik7IC8vIGJpdCBmbGFnXG5cdG8ud3JpdGVfc2hpZnQoNCwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgMCk7IC8vIHZpZXcgZmlyc3Qgcm93XG5cdG8ud3JpdGVfc2hpZnQoNCwgMCk7IC8vIHZpZXcgZmlyc3QgY29sXG5cdG8ud3JpdGVfc2hpZnQoMSwgMCk7IC8vIGdyaWRsaW5lIGNvbG9yIElDVlxuXHRvLndyaXRlX3NoaWZ0KDEsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDEwMCk7IC8vIHpvb20gc2NhbGVcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAwKTtcblx0by53cml0ZV9zaGlmdCg0LCAwKTsgLy8gd29ya2Jvb2sgdmlldyBpZFxuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU0JdIDIuNC4zMDkgQnJ0Q2VsbElnbm9yZUVDICovXG5mdW5jdGlvbiB3cml0ZV9CcnRDZWxsSWdub3JlRUMocmVmKSB7XG5cdHZhciBvID0gbmV3X2J1ZigyNCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgNCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgMSk7XG5cdHdyaXRlX1VuY2hlY2tlZFJmWChyZWYsIG8pO1xuXHRyZXR1cm4gbztcbn1cblxuLyogW01TLVhMU0JdIDIuNC43NDggQnJ0U2hlZXRQcm90ZWN0aW9uICovXG5mdW5jdGlvbiB3cml0ZV9CcnRTaGVldFByb3RlY3Rpb24oc3AsIG8pIHtcblx0aWYobyA9PSBudWxsKSBvID0gbmV3X2J1ZigxNio0KzIpO1xuXHRvLndyaXRlX3NoaWZ0KDIsIHNwLnBhc3N3b3JkID8gY3J5cHRvX0NyZWF0ZVBhc3N3b3JkVmVyaWZpZXJfTWV0aG9kMShzcC5wYXNzd29yZCkgOiAwKTtcblx0by53cml0ZV9zaGlmdCg0LCAxKTsgLy8gdGhpcyByZWNvcmQgc2hvdWxkIG5vdCBiZSB3cml0dGVuIGlmIG5vIHByb3RlY3Rpb25cblx0W1xuXHRcdFtcIm9iamVjdHNcIiwgICAgICAgICAgICAgZmFsc2VdLCAvLyBmT2JqZWN0c1xuXHRcdFtcInNjZW5hcmlvc1wiLCAgICAgICAgICAgZmFsc2VdLCAvLyBmU2NlbmFyaW9zXG5cdFx0W1wiZm9ybWF0Q2VsbHNcIiwgICAgICAgICAgdHJ1ZV0sIC8vIGZGb3JtYXRDZWxsc1xuXHRcdFtcImZvcm1hdENvbHVtbnNcIiwgICAgICAgIHRydWVdLCAvLyBmRm9ybWF0Q29sdW1uc1xuXHRcdFtcImZvcm1hdFJvd3NcIiwgICAgICAgICAgIHRydWVdLCAvLyBmRm9ybWF0Um93c1xuXHRcdFtcImluc2VydENvbHVtbnNcIiwgICAgICAgIHRydWVdLCAvLyBmSW5zZXJ0Q29sdW1uc1xuXHRcdFtcImluc2VydFJvd3NcIiwgICAgICAgICAgIHRydWVdLCAvLyBmSW5zZXJ0Um93c1xuXHRcdFtcImluc2VydEh5cGVybGlua3NcIiwgICAgIHRydWVdLCAvLyBmSW5zZXJ0SHlwZXJsaW5rc1xuXHRcdFtcImRlbGV0ZUNvbHVtbnNcIiwgICAgICAgIHRydWVdLCAvLyBmRGVsZXRlQ29sdW1uc1xuXHRcdFtcImRlbGV0ZVJvd3NcIiwgICAgICAgICAgIHRydWVdLCAvLyBmRGVsZXRlUm93c1xuXHRcdFtcInNlbGVjdExvY2tlZENlbGxzXCIsICAgZmFsc2VdLCAvLyBmU2VsTG9ja2VkQ2VsbHNcblx0XHRbXCJzb3J0XCIsICAgICAgICAgICAgICAgICB0cnVlXSwgLy8gZlNvcnRcblx0XHRbXCJhdXRvRmlsdGVyXCIsICAgICAgICAgICB0cnVlXSwgLy8gZkF1dG9GaWx0ZXJcblx0XHRbXCJwaXZvdFRhYmxlc1wiLCAgICAgICAgICB0cnVlXSwgLy8gZlBpdm90VGFibGVzXG5cdFx0W1wic2VsZWN0VW5sb2NrZWRDZWxsc1wiLCBmYWxzZV0gIC8vIGZTZWxVbmxvY2tlZENlbGxzXG5cdF0uZm9yRWFjaChmdW5jdGlvbihuKSB7XG5cdFx0Lyo6OiBpZihvID09IG51bGwpIHRocm93IFwidW5yZWFjaGFibGVcIjsgKi9cblx0XHRpZihuWzFdKSBvLndyaXRlX3NoaWZ0KDQsIHNwW25bMF1dICE9IG51bGwgJiYgIXNwW25bMF1dID8gMSA6IDApO1xuXHRcdGVsc2UgICAgICBvLndyaXRlX3NoaWZ0KDQsIHNwW25bMF1dICE9IG51bGwgJiYgc3BbblswXV0gPyAwIDogMSk7XG5cdH0pO1xuXHRyZXR1cm4gbztcbn1cblxuZnVuY3Rpb24gcGFyc2VfQnJ0RFZhbCgvKmRhdGEsIGxlbmd0aCwgb3B0cyovKSB7XG59XG5mdW5jdGlvbiBwYXJzZV9CcnREVmFsMTQoLypkYXRhLCBsZW5ndGgsIG9wdHMqLykge1xufVxuLyogW01TLVhMU0JdIDIuMS43LjYxIFdvcmtzaGVldCAqL1xuZnVuY3Rpb24gcGFyc2Vfd3NfYmluKGRhdGEsIF9vcHRzLCBpZHgsIHJlbHMsIHdiLyo6V0JXQlByb3BzKi8sIHRoZW1lcywgc3R5bGVzKS8qOldvcmtzaGVldCovIHtcblx0aWYoIWRhdGEpIHJldHVybiBkYXRhO1xuXHR2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuXHRpZighcmVscykgcmVscyA9IHsnIWlkJzp7fX07XG5cdGlmKERFTlNFICE9IG51bGwgJiYgb3B0cy5kZW5zZSA9PSBudWxsKSBvcHRzLmRlbnNlID0gREVOU0U7XG5cdHZhciBzLyo6V29ya3NoZWV0Ki8gPSAob3B0cy5kZW5zZSA/IFtdIDoge30pO1xuXG5cdHZhciByZWY7XG5cdHZhciByZWZndWVzcyA9IHtzOiB7cjoyMDAwMDAwLCBjOjIwMDAwMDB9LCBlOiB7cjowLCBjOjB9IH07XG5cblx0dmFyIHN0YXRlLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdHZhciBwYXNzID0gZmFsc2UsIGVuZCA9IGZhbHNlO1xuXHR2YXIgcm93LCBwLCBjZiwgUiwgQywgYWRkciwgc3N0ciwgcnIsIGNlbGwvKjpDZWxsKi87XG5cdHZhciBtZXJnZXMvKjpBcnJheTxSYW5nZT4qLyA9IFtdO1xuXHRvcHRzLmJpZmYgPSAxMjtcblx0b3B0c1snIXJvdyddID0gMDtcblxuXHR2YXIgYWkgPSAwLCBhZiA9IGZhbHNlO1xuXG5cdHZhciBhcnJheWYvKjpBcnJheTxbUmFuZ2UsIHN0cmluZ10+Ki8gPSBbXTtcblx0dmFyIHNoYXJlZGYgPSB7fTtcblx0dmFyIHN1cGJvb2tzID0gb3B0cy5zdXBib29rcyB8fCAvKjo6KCovd2IvKjo6IDphbnkpKi8uc3VwYm9va3MgfHwgKFtbXV0vKjphbnkqLyk7XG5cdHN1cGJvb2tzLnNoYXJlZGYgPSBzaGFyZWRmO1xuXHRzdXBib29rcy5hcnJheWYgPSBhcnJheWY7XG5cdHN1cGJvb2tzLlNoZWV0TmFtZXMgPSB3Yi5TaGVldE5hbWVzIHx8IHdiLlNoZWV0cy5tYXAoZnVuY3Rpb24oeCkgeyByZXR1cm4geC5uYW1lOyB9KTtcblx0aWYoIW9wdHMuc3VwYm9va3MpIHtcblx0XHRvcHRzLnN1cGJvb2tzID0gc3VwYm9va3M7XG5cdFx0aWYod2IuTmFtZXMpIGZvcih2YXIgaSA9IDA7IGkgPCB3Yi5OYW1lcy5sZW5ndGg7ICsraSkgc3VwYm9va3NbMF1baSsxXSA9IHdiLk5hbWVzW2ldO1xuXHR9XG5cblx0dmFyIGNvbGluZm8vKjpBcnJheTxDb2xJbmZvPiovID0gW10sIHJvd2luZm8vKjpBcnJheTxSb3dJbmZvPiovID0gW107XG5cdHZhciBzZWVuY29sID0gZmFsc2U7XG5cblx0WExTQlJlY29yZEVudW1bMHgwMDEwXSA9IHsgbjpcIkJydFNob3J0UmVhbFwiLCBmOnBhcnNlX0JydFNob3J0UmVhbCB9O1xuXG5cdHZhciBjbSwgdm07XG5cblx0cmVjb3JkaG9wcGVyKGRhdGEsIGZ1bmN0aW9uIHdzX3BhcnNlKHZhbCwgUlIsIFJUKSB7XG5cdFx0aWYoZW5kKSByZXR1cm47XG5cdFx0c3dpdGNoKFJUKSB7XG5cdFx0XHRjYXNlIDB4MDA5NDogLyogJ0JydFdzRGltJyAqL1xuXHRcdFx0XHRyZWYgPSB2YWw7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMDA6IC8qICdCcnRSb3dIZHInICovXG5cdFx0XHRcdHJvdyA9IHZhbDtcblx0XHRcdFx0aWYob3B0cy5zaGVldFJvd3MgJiYgb3B0cy5zaGVldFJvd3MgPD0gcm93LnIpIGVuZD10cnVlO1xuXHRcdFx0XHRyciA9IGVuY29kZV9yb3coUiA9IHJvdy5yKTtcblx0XHRcdFx0b3B0c1snIXJvdyddID0gcm93LnI7XG5cdFx0XHRcdGlmKHZhbC5oaWRkZW4gfHwgdmFsLmhwdCB8fCB2YWwubGV2ZWwgIT0gbnVsbCkge1xuXHRcdFx0XHRcdGlmKHZhbC5ocHQpIHZhbC5ocHggPSBwdDJweCh2YWwuaHB0KTtcblx0XHRcdFx0XHRyb3dpbmZvW3ZhbC5yXSA9IHZhbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwMDI6IC8qICdCcnRDZWxsUmsnICovXG5cdFx0XHRjYXNlIDB4MDAwMzogLyogJ0JydENlbGxFcnJvcicgKi9cblx0XHRcdGNhc2UgMHgwMDA0OiAvKiAnQnJ0Q2VsbEJvb2wnICovXG5cdFx0XHRjYXNlIDB4MDAwNTogLyogJ0JydENlbGxSZWFsJyAqL1xuXHRcdFx0Y2FzZSAweDAwMDY6IC8qICdCcnRDZWxsU3QnICovXG5cdFx0XHRjYXNlIDB4MDAwNzogLyogJ0JydENlbGxJc3N0JyAqL1xuXHRcdFx0Y2FzZSAweDAwMDg6IC8qICdCcnRGbWxhU3RyaW5nJyAqL1xuXHRcdFx0Y2FzZSAweDAwMDk6IC8qICdCcnRGbWxhTnVtJyAqL1xuXHRcdFx0Y2FzZSAweDAwMEE6IC8qICdCcnRGbWxhQm9vbCcgKi9cblx0XHRcdGNhc2UgMHgwMDBCOiAvKiAnQnJ0Rm1sYUVycm9yJyAqL1xuXHRcdFx0Y2FzZSAweDAwMEQ6IC8qICdCcnRTaG9ydFJrJyAqL1xuXHRcdFx0Y2FzZSAweDAwMEU6IC8qICdCcnRTaG9ydEVycm9yJyAqL1xuXHRcdFx0Y2FzZSAweDAwMEY6IC8qICdCcnRTaG9ydEJvb2wnICovXG5cdFx0XHRjYXNlIDB4MDAxMDogLyogJ0JydFNob3J0UmVhbCcgKi9cblx0XHRcdGNhc2UgMHgwMDExOiAvKiAnQnJ0U2hvcnRTdCcgKi9cblx0XHRcdGNhc2UgMHgwMDEyOiAvKiAnQnJ0U2hvcnRJc3N0JyAqL1xuXHRcdFx0Y2FzZSAweDAwM0U6IC8qICdCcnRDZWxsUlN0cmluZycgKi9cblx0XHRcdFx0cCA9ICh7dDp2YWxbMl19Lyo6YW55Ki8pO1xuXHRcdFx0XHRzd2l0Y2godmFsWzJdKSB7XG5cdFx0XHRcdFx0Y2FzZSAnbic6IHAudiA9IHZhbFsxXTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncyc6IHNzdHIgPSBzdHJzW3ZhbFsxXV07IHAudiA9IHNzdHIudDsgcC5yID0gc3N0ci5yOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdiJzogcC52ID0gdmFsWzFdID8gdHJ1ZSA6IGZhbHNlOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdlJzogcC52ID0gdmFsWzFdOyBpZihvcHRzLmNlbGxUZXh0ICE9PSBmYWxzZSkgcC53ID0gQkVycltwLnZdOyBicmVhaztcblx0XHRcdFx0XHRjYXNlICdzdHInOiBwLnQgPSAncyc7IHAudiA9IHZhbFsxXTsgYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaXMnOiBwLnQgPSAncyc7IHAudiA9IHZhbFsxXS50OyBicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZigoY2YgPSBzdHlsZXMuQ2VsbFhmW3ZhbFswXS5pU3R5bGVSZWZdKSkgc2FmZV9mb3JtYXQocCxjZi5udW1GbXRJZCxudWxsLG9wdHMsIHRoZW1lcywgc3R5bGVzKTtcblx0XHRcdFx0QyA9IHZhbFswXS5jID09IC0xID8gQyArIDEgOiB2YWxbMF0uYztcblx0XHRcdFx0aWYob3B0cy5kZW5zZSkgeyBpZighc1tSXSkgc1tSXSA9IFtdOyBzW1JdW0NdID0gcDsgfVxuXHRcdFx0XHRlbHNlIHNbZW5jb2RlX2NvbChDKSArIHJyXSA9IHA7XG5cdFx0XHRcdGlmKG9wdHMuY2VsbEZvcm11bGEpIHtcblx0XHRcdFx0XHRhZiA9IGZhbHNlO1xuXHRcdFx0XHRcdGZvcihhaSA9IDA7IGFpIDwgYXJyYXlmLmxlbmd0aDsgKythaSkge1xuXHRcdFx0XHRcdFx0dmFyIGFpaSA9IGFycmF5ZlthaV07XG5cdFx0XHRcdFx0XHRpZihyb3cuciA+PSBhaWlbMF0ucy5yICYmIHJvdy5yIDw9IGFpaVswXS5lLnIpXG5cdFx0XHRcdFx0XHRcdGlmKEMgPj0gYWlpWzBdLnMuYyAmJiBDIDw9IGFpaVswXS5lLmMpIHtcblx0XHRcdFx0XHRcdFx0XHRwLkYgPSBlbmNvZGVfcmFuZ2UoYWlpWzBdKTsgYWYgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKCFhZiAmJiB2YWwubGVuZ3RoID4gMykgcC5mID0gdmFsWzNdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYocmVmZ3Vlc3Mucy5yID4gcm93LnIpIHJlZmd1ZXNzLnMuciA9IHJvdy5yO1xuXHRcdFx0XHRpZihyZWZndWVzcy5zLmMgPiBDKSByZWZndWVzcy5zLmMgPSBDO1xuXHRcdFx0XHRpZihyZWZndWVzcy5lLnIgPCByb3cucikgcmVmZ3Vlc3MuZS5yID0gcm93LnI7XG5cdFx0XHRcdGlmKHJlZmd1ZXNzLmUuYyA8IEMpIHJlZmd1ZXNzLmUuYyA9IEM7XG5cdFx0XHRcdGlmKG9wdHMuY2VsbERhdGVzICYmIGNmICYmIHAudCA9PSAnbicgJiYgZm10X2lzX2RhdGUodGFibGVfZm10W2NmLm51bUZtdElkXSkpIHtcblx0XHRcdFx0XHR2YXIgX2QgPSBTU0ZfcGFyc2VfZGF0ZV9jb2RlKHAudik7IGlmKF9kKSB7IHAudCA9ICdkJzsgcC52ID0gbmV3IERhdGUoX2QueSwgX2QubS0xLF9kLmQsX2QuSCxfZC5NLF9kLlMsX2QudSk7IH1cblx0XHRcdFx0fVxuXHRcdFx0XHRpZihjbSkge1xuXHRcdFx0XHRcdGlmKGNtLnR5cGUgPT0gJ1hMREFQUicpIHAuRCA9IHRydWU7XG5cdFx0XHRcdFx0Y20gPSB2b2lkIDA7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYodm0pIHZtID0gdm9pZCAwO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwMDE6IC8qICdCcnRDZWxsQmxhbmsnICovXG5cdFx0XHRjYXNlIDB4MDAwQzogLyogJ0JydFNob3J0QmxhbmsnICovXG5cdFx0XHRcdGlmKCFvcHRzLnNoZWV0U3R1YnMgfHwgcGFzcykgYnJlYWs7XG5cdFx0XHRcdHAgPSAoe3Q6J3onLHY6dm9pZCAwfS8qOmFueSovKTtcblx0XHRcdFx0QyA9IHZhbFswXS5jID09IC0xID8gQyArIDEgOiB2YWxbMF0uYztcblx0XHRcdFx0aWYob3B0cy5kZW5zZSkgeyBpZighc1tSXSkgc1tSXSA9IFtdOyBzW1JdW0NdID0gcDsgfVxuXHRcdFx0XHRlbHNlIHNbZW5jb2RlX2NvbChDKSArIHJyXSA9IHA7XG5cdFx0XHRcdGlmKHJlZmd1ZXNzLnMuciA+IHJvdy5yKSByZWZndWVzcy5zLnIgPSByb3cucjtcblx0XHRcdFx0aWYocmVmZ3Vlc3Mucy5jID4gQykgcmVmZ3Vlc3Mucy5jID0gQztcblx0XHRcdFx0aWYocmVmZ3Vlc3MuZS5yIDwgcm93LnIpIHJlZmd1ZXNzLmUuciA9IHJvdy5yO1xuXHRcdFx0XHRpZihyZWZndWVzcy5lLmMgPCBDKSByZWZndWVzcy5lLmMgPSBDO1xuXHRcdFx0XHRpZihjbSkge1xuXHRcdFx0XHRcdGlmKGNtLnR5cGUgPT0gJ1hMREFQUicpIHAuRCA9IHRydWU7XG5cdFx0XHRcdFx0Y20gPSB2b2lkIDA7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYodm0pIHZtID0gdm9pZCAwO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwQjA6IC8qICdCcnRNZXJnZUNlbGwnICovXG5cdFx0XHRcdG1lcmdlcy5wdXNoKHZhbCk7IGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDAzMTogeyAvKiAnQnJ0Q2VsbE1ldGEnICovXG5cdFx0XHRcdGNtID0gKChvcHRzLnhsbWV0YXx8e30pLkNlbGx8fFtdKVt2YWwtMV07XG5cdFx0XHR9IGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDFFRTogLyogJ0JydEhMaW5rJyAqL1xuXHRcdFx0XHR2YXIgcmVsID0gcmVsc1snIWlkJ11bdmFsLnJlbElkXTtcblx0XHRcdFx0aWYocmVsKSB7XG5cdFx0XHRcdFx0dmFsLlRhcmdldCA9IHJlbC5UYXJnZXQ7XG5cdFx0XHRcdFx0aWYodmFsLmxvYykgdmFsLlRhcmdldCArPSBcIiNcIit2YWwubG9jO1xuXHRcdFx0XHRcdHZhbC5SZWwgPSByZWw7XG5cdFx0XHRcdH0gZWxzZSBpZih2YWwucmVsSWQgPT0gJycpIHtcblx0XHRcdFx0XHR2YWwuVGFyZ2V0ID0gXCIjXCIgKyB2YWwubG9jO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGZvcihSPXZhbC5yZngucy5yO1I8PXZhbC5yZnguZS5yOysrUikgZm9yKEM9dmFsLnJmeC5zLmM7Qzw9dmFsLnJmeC5lLmM7KytDKSB7XG5cdFx0XHRcdFx0aWYob3B0cy5kZW5zZSkge1xuXHRcdFx0XHRcdFx0aWYoIXNbUl0pIHNbUl0gPSBbXTtcblx0XHRcdFx0XHRcdGlmKCFzW1JdW0NdKSBzW1JdW0NdID0ge3Q6J3onLHY6dW5kZWZpbmVkfTtcblx0XHRcdFx0XHRcdHNbUl1bQ10ubCA9IHZhbDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0YWRkciA9IGVuY29kZV9jZWxsKHtjOkMscjpSfSk7XG5cdFx0XHRcdFx0XHRpZighc1thZGRyXSkgc1thZGRyXSA9IHt0Oid6Jyx2OnVuZGVmaW5lZH07XG5cdFx0XHRcdFx0XHRzW2FkZHJdLmwgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDFBQTogLyogJ0JydEFyckZtbGEnICovXG5cdFx0XHRcdGlmKCFvcHRzLmNlbGxGb3JtdWxhKSBicmVhaztcblx0XHRcdFx0YXJyYXlmLnB1c2godmFsKTtcblx0XHRcdFx0Y2VsbCA9ICgob3B0cy5kZW5zZSA/IHNbUl1bQ10gOiBzW2VuY29kZV9jb2woQykgKyBycl0pLyo6YW55Ki8pO1xuXHRcdFx0XHRjZWxsLmYgPSBzdHJpbmdpZnlfZm9ybXVsYSh2YWxbMV0sIHJlZmd1ZXNzLCB7cjpyb3cuciwgYzpDfSwgc3VwYm9va3MsIG9wdHMpO1xuXHRcdFx0XHRjZWxsLkYgPSBlbmNvZGVfcmFuZ2UodmFsWzBdKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDFBQjogLyogJ0JydFNockZtbGEnICovXG5cdFx0XHRcdGlmKCFvcHRzLmNlbGxGb3JtdWxhKSBicmVhaztcblx0XHRcdFx0c2hhcmVkZltlbmNvZGVfY2VsbCh2YWxbMF0ucyldID0gdmFsWzFdO1xuXHRcdFx0XHRjZWxsID0gKG9wdHMuZGVuc2UgPyBzW1JdW0NdIDogc1tlbmNvZGVfY29sKEMpICsgcnJdKTtcblx0XHRcdFx0Y2VsbC5mID0gc3RyaW5naWZ5X2Zvcm11bGEodmFsWzFdLCByZWZndWVzcywge3I6cm93LnIsIGM6Q30sIHN1cGJvb2tzLCBvcHRzKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdC8qIGlkZW50aWNhbCB0byAnQ29sSW5mbycgaW4gWExTICovXG5cdFx0XHRjYXNlIDB4MDAzQzogLyogJ0JydENvbEluZm8nICovXG5cdFx0XHRcdGlmKCFvcHRzLmNlbGxTdHlsZXMpIGJyZWFrO1xuXHRcdFx0XHR3aGlsZSh2YWwuZSA+PSB2YWwucykge1xuXHRcdFx0XHRcdGNvbGluZm9bdmFsLmUtLV0gPSB7IHdpZHRoOiB2YWwudy8yNTYsIGhpZGRlbjogISEodmFsLmZsYWdzICYgMHgwMSksIGxldmVsOiB2YWwubGV2ZWwgfTtcblx0XHRcdFx0XHRpZighc2VlbmNvbCkgeyBzZWVuY29sID0gdHJ1ZTsgZmluZF9tZHdfY29sdyh2YWwudy8yNTYpOyB9XG5cdFx0XHRcdFx0cHJvY2Vzc19jb2woY29saW5mb1t2YWwuZSsxXSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMEExOiAvKiAnQnJ0QmVnaW5BRmlsdGVyJyAqL1xuXHRcdFx0XHRzWychYXV0b2ZpbHRlciddID0geyByZWY6ZW5jb2RlX3JhbmdlKHZhbCkgfTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMURDOiAvKiAnQnJ0TWFyZ2lucycgKi9cblx0XHRcdFx0c1snIW1hcmdpbnMnXSA9IHZhbDtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMDkzOiAvKiAnQnJ0V3NQcm9wJyAqL1xuXHRcdFx0XHRpZighd2IuU2hlZXRzW2lkeF0pIHdiLlNoZWV0c1tpZHhdID0ge307XG5cdFx0XHRcdGlmKHZhbC5uYW1lKSB3Yi5TaGVldHNbaWR4XS5Db2RlTmFtZSA9IHZhbC5uYW1lO1xuXHRcdFx0XHRpZih2YWwuYWJvdmUgfHwgdmFsLmxlZnQpIHNbJyFvdXRsaW5lJ10gPSB7IGFib3ZlOiB2YWwuYWJvdmUsIGxlZnQ6IHZhbC5sZWZ0IH07XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDA4OTogLyogJ0JydEJlZ2luV3NWaWV3JyAqL1xuXHRcdFx0XHRpZighd2IuVmlld3MpIHdiLlZpZXdzID0gW3t9XTtcblx0XHRcdFx0aWYoIXdiLlZpZXdzWzBdKSB3Yi5WaWV3c1swXSA9IHt9O1xuXHRcdFx0XHRpZih2YWwuUlRMKSB3Yi5WaWV3c1swXS5SVEwgPSB0cnVlO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAxRTU6IC8qICdCcnRXc0ZtdEluZm8nICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDA0MDogLyogJ0JydERWYWwnICovXG5cdFx0XHRjYXNlIDB4MDQxRDogLyogJ0JydERWYWwxNCcgKi9cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMDk3OiAvKiAnQnJ0UGFuZScgKi9cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDA5ODogLyogJ0JydFNlbCcgKi9cblx0XHRcdGNhc2UgMHgwMEFGOiAvKiAnQnJ0QUZpbHRlckRhdGVHcm91cEl0ZW0nICovXG5cdFx0XHRjYXNlIDB4MDI4NDogLyogJ0JydEFjdGl2ZVgnICovXG5cdFx0XHRjYXNlIDB4MDI3MTogLyogJ0JydEJpZ05hbWUnICovXG5cdFx0XHRjYXNlIDB4MDIzMjogLyogJ0JydEJrSGltJyAqL1xuXHRcdFx0Y2FzZSAweDAxOEM6IC8qICdCcnRCcmsnICovXG5cdFx0XHRjYXNlIDB4MDQ1ODogLyogJ0JydENGSWNvbicgKi9cblx0XHRcdGNhc2UgMHgwNDdBOiAvKiAnQnJ0Q0ZSdWxlRXh0JyAqL1xuXHRcdFx0Y2FzZSAweDAxRDc6IC8qICdCcnRDRlZPJyAqL1xuXHRcdFx0Y2FzZSAweDA0MUE6IC8qICdCcnRDRlZPMTQnICovXG5cdFx0XHRjYXNlIDB4MDI4OTogLyogJ0JydENlbGxJZ25vcmVFQycgKi9cblx0XHRcdGNhc2UgMHgwNDUxOiAvKiAnQnJ0Q2VsbElnbm9yZUVDMTQnICovXG5cdFx0XHRjYXNlIDB4MDI0RDogLyogJ0JydENlbGxTbWFydFRhZ1Byb3BlcnR5JyAqL1xuXHRcdFx0Y2FzZSAweDAyNUY6IC8qICdCcnRDZWxsV2F0Y2gnICovXG5cdFx0XHRjYXNlIDB4MDIzNDogLyogJ0JydENvbG9yJyAqL1xuXHRcdFx0Y2FzZSAweDA0MUY6IC8qICdCcnRDb2xvcjE0JyAqL1xuXHRcdFx0Y2FzZSAweDAwQTg6IC8qICdCcnRDb2xvckZpbHRlcicgKi9cblx0XHRcdGNhc2UgMHgwMEFFOiAvKiAnQnJ0Q3VzdG9tRmlsdGVyJyAqL1xuXHRcdFx0Y2FzZSAweDA0OUM6IC8qICdCcnRDdXN0b21GaWx0ZXIxNCcgKi9cblx0XHRcdGNhc2UgMHgwMUYzOiAvKiAnQnJ0RFJlZicgKi9cblx0XHRcdGNhc2UgMHgwMUZCOiAvKiAnQnJ0RFhGJyAqL1xuXHRcdFx0Y2FzZSAweDAyMjY6IC8qICdCcnREcmF3aW5nJyAqL1xuXHRcdFx0Y2FzZSAweDAwQUI6IC8qICdCcnREeW5hbWljRmlsdGVyJyAqL1xuXHRcdFx0Y2FzZSAweDAwQTc6IC8qICdCcnRGaWx0ZXInICovXG5cdFx0XHRjYXNlIDB4MDQ5OTogLyogJ0JydEZpbHRlcjE0JyAqL1xuXHRcdFx0Y2FzZSAweDAwQTk6IC8qICdCcnRJY29uRmlsdGVyJyAqL1xuXHRcdFx0Y2FzZSAweDA0OUQ6IC8qICdCcnRJY29uRmlsdGVyMTQnICovXG5cdFx0XHRjYXNlIDB4MDIyNzogLyogJ0JydExlZ2FjeURyYXdpbmcnICovXG5cdFx0XHRjYXNlIDB4MDIyODogLyogJ0JydExlZ2FjeURyYXdpbmdIRicgKi9cblx0XHRcdGNhc2UgMHgwMjk1OiAvKiAnQnJ0TGlzdFBhcnQnICovXG5cdFx0XHRjYXNlIDB4MDI3RjogLyogJ0JydE9sZU9iamVjdCcgKi9cblx0XHRcdGNhc2UgMHgwMURFOiAvKiAnQnJ0UGFnZVNldHVwJyAqL1xuXHRcdFx0Y2FzZSAweDAyMTk6IC8qICdCcnRQaG9uZXRpY0luZm8nICovXG5cdFx0XHRjYXNlIDB4MDFERDogLyogJ0JydFByaW50T3B0aW9ucycgKi9cblx0XHRcdGNhc2UgMHgwMjE4OiAvKiAnQnJ0UmFuZ2VQcm90ZWN0aW9uJyAqL1xuXHRcdFx0Y2FzZSAweDA0NEY6IC8qICdCcnRSYW5nZVByb3RlY3Rpb24xNCcgKi9cblx0XHRcdGNhc2UgMHgwMkE4OiAvKiAnQnJ0UmFuZ2VQcm90ZWN0aW9uSXNvJyAqL1xuXHRcdFx0Y2FzZSAweDA0NTA6IC8qICdCcnRSYW5nZVByb3RlY3Rpb25Jc28xNCcgKi9cblx0XHRcdGNhc2UgMHgwNDAwOiAvKiAnQnJ0UndEZXNjZW50JyAqL1xuXHRcdFx0Y2FzZSAweDAyOTc6IC8qICdCcnRTaGVldENhbGNQcm9wJyAqL1xuXHRcdFx0Y2FzZSAweDAyMTc6IC8qICdCcnRTaGVldFByb3RlY3Rpb24nICovXG5cdFx0XHRjYXNlIDB4MDJBNjogLyogJ0JydFNoZWV0UHJvdGVjdGlvbklzbycgKi9cblx0XHRcdGNhc2UgMHgwMUY4OiAvKiAnQnJ0U2xjJyAqL1xuXHRcdFx0Y2FzZSAweDA0MTM6IC8qICdCcnRTcGFya2xpbmUnICovXG5cdFx0XHRjYXNlIDB4MDFBQzogLyogJ0JydFRhYmxlJyAqL1xuXHRcdFx0Y2FzZSAweDAwQUE6IC8qICdCcnRUb3AxMEZpbHRlcicgKi9cblx0XHRcdGNhc2UgMHgwQzAwOiAvKiAnQnJ0VWlkJyAqL1xuXHRcdFx0Y2FzZSAweDAwMzI6IC8qICdCcnRWYWx1ZU1ldGEnICovXG5cdFx0XHRjYXNlIDB4MDgxNjogLyogJ0JydFdlYkV4dGVuc2lvbicgKi9cblx0XHRcdGNhc2UgMHgwNDE1OiAvKiAnQnJ0V3NGbXRJbmZvRXgxNCcgKi9cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMDIzOiAvKiAnQnJ0RlJUQmVnaW4nICovXG5cdFx0XHRcdHBhc3MgPSB0cnVlOyBicmVhaztcblx0XHRcdGNhc2UgMHgwMDI0OiAvKiAnQnJ0RlJURW5kJyAqL1xuXHRcdFx0XHRwYXNzID0gZmFsc2U7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjU6IC8qICdCcnRBQ0JlZ2luJyAqL1xuXHRcdFx0XHRzdGF0ZS5wdXNoKFJUKTsgcGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjY6IC8qICdCcnRBQ0VuZCcgKi9cblx0XHRcdFx0c3RhdGUucG9wKCk7IHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmKFJSLlQpey8qIGVtcHR5ICovfVxuXHRcdFx0XHRlbHNlIGlmKCFwYXNzIHx8IG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJVbmV4cGVjdGVkIHJlY29yZCAweFwiICsgUlQudG9TdHJpbmcoMTYpKTtcblx0XHR9XG5cdH0sIG9wdHMpO1xuXG5cdGRlbGV0ZSBvcHRzLnN1cGJvb2tzO1xuXHRkZWxldGUgb3B0c1snIXJvdyddO1xuXG5cdGlmKCFzW1wiIXJlZlwiXSAmJiAocmVmZ3Vlc3Mucy5yIDwgMjAwMDAwMCB8fCByZWYgJiYgKHJlZi5lLnIgPiAwIHx8IHJlZi5lLmMgPiAwIHx8IHJlZi5zLnIgPiAwIHx8IHJlZi5zLmMgPiAwKSkpIHNbXCIhcmVmXCJdID0gZW5jb2RlX3JhbmdlKHJlZiB8fCByZWZndWVzcyk7XG5cdGlmKG9wdHMuc2hlZXRSb3dzICYmIHNbXCIhcmVmXCJdKSB7XG5cdFx0dmFyIHRtcHJlZiA9IHNhZmVfZGVjb2RlX3JhbmdlKHNbXCIhcmVmXCJdKTtcblx0XHRpZihvcHRzLnNoZWV0Um93cyA8PSArdG1wcmVmLmUucikge1xuXHRcdFx0dG1wcmVmLmUuciA9IG9wdHMuc2hlZXRSb3dzIC0gMTtcblx0XHRcdGlmKHRtcHJlZi5lLnIgPiByZWZndWVzcy5lLnIpIHRtcHJlZi5lLnIgPSByZWZndWVzcy5lLnI7XG5cdFx0XHRpZih0bXByZWYuZS5yIDwgdG1wcmVmLnMucikgdG1wcmVmLnMuciA9IHRtcHJlZi5lLnI7XG5cdFx0XHRpZih0bXByZWYuZS5jID4gcmVmZ3Vlc3MuZS5jKSB0bXByZWYuZS5jID0gcmVmZ3Vlc3MuZS5jO1xuXHRcdFx0aWYodG1wcmVmLmUuYyA8IHRtcHJlZi5zLmMpIHRtcHJlZi5zLmMgPSB0bXByZWYuZS5jO1xuXHRcdFx0c1tcIiFmdWxscmVmXCJdID0gc1tcIiFyZWZcIl07XG5cdFx0XHRzW1wiIXJlZlwiXSA9IGVuY29kZV9yYW5nZSh0bXByZWYpO1xuXHRcdH1cblx0fVxuXHRpZihtZXJnZXMubGVuZ3RoID4gMCkgc1tcIiFtZXJnZXNcIl0gPSBtZXJnZXM7XG5cdGlmKGNvbGluZm8ubGVuZ3RoID4gMCkgc1tcIiFjb2xzXCJdID0gY29saW5mbztcblx0aWYocm93aW5mby5sZW5ndGggPiAwKSBzW1wiIXJvd3NcIl0gPSByb3dpbmZvO1xuXHRyZXR1cm4gcztcbn1cblxuLyogVE9ETzogc29tZXRoaW5nIHVzZWZ1bCAtLSB0aGlzIGlzIGEgc3R1YiAqL1xuZnVuY3Rpb24gd3JpdGVfd3NfYmluX2NlbGwoYmEvKjpCdWZBcnJheSovLCBjZWxsLyo6Q2VsbCovLCBSLyo6bnVtYmVyKi8sIEMvKjpudW1iZXIqLywgb3B0cywgd3MvKjpXb3Jrc2hlZXQqLywgbGFzdF9zZWVuLyo6Ym9vbGVhbiovKS8qOmJvb2xlYW4qLyB7XG5cdGlmKGNlbGwudiA9PT0gdW5kZWZpbmVkKSByZXR1cm4gZmFsc2U7XG5cdHZhciB2diA9IFwiXCI7XG5cdHN3aXRjaChjZWxsLnQpIHtcblx0XHRjYXNlICdiJzogdnYgPSBjZWxsLnYgPyBcIjFcIiA6IFwiMFwiOyBicmVhaztcblx0XHRjYXNlICdkJzogLy8gbm8gQnJ0Q2VsbERhdGUgOihcblx0XHRcdGNlbGwgPSBkdXAoY2VsbCk7XG5cdFx0XHRjZWxsLnogPSBjZWxsLnogfHwgdGFibGVfZm10WzE0XTtcblx0XHRcdGNlbGwudiA9IGRhdGVudW0ocGFyc2VEYXRlKGNlbGwudikpOyBjZWxsLnQgPSAnbic7XG5cdFx0XHRicmVhaztcblx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0Y2FzZSAnbic6IGNhc2UgJ2UnOiB2diA9ICcnK2NlbGwudjsgYnJlYWs7XG5cdFx0ZGVmYXVsdDogdnYgPSBjZWxsLnY7IGJyZWFrO1xuXHR9XG5cdHZhciBvLyo6YW55Ki8gPSAoe3I6UiwgYzpDfS8qOmFueSovKTtcblx0LyogVE9ETzogY2VsbCBzdHlsZSAqL1xuXHRvLnMgPSBnZXRfY2VsbF9zdHlsZShvcHRzLmNlbGxYZnMsIGNlbGwsIG9wdHMpO1xuXHRpZihjZWxsLmwpIHdzWychbGlua3MnXS5wdXNoKFtlbmNvZGVfY2VsbChvKSwgY2VsbC5sXSk7XG5cdGlmKGNlbGwuYykgd3NbJyFjb21tZW50cyddLnB1c2goW2VuY29kZV9jZWxsKG8pLCBjZWxsLmNdKTtcblx0c3dpdGNoKGNlbGwudCkge1xuXHRcdGNhc2UgJ3MnOiBjYXNlICdzdHInOlxuXHRcdFx0aWYob3B0cy5ib29rU1NUKSB7XG5cdFx0XHRcdHZ2ID0gZ2V0X3NzdF9pZChvcHRzLlN0cmluZ3MsIChjZWxsLnYvKjphbnkqLyksIG9wdHMucmV2U3RyaW5ncyk7XG5cdFx0XHRcdG8udCA9IFwic1wiOyBvLnYgPSB2djtcblx0XHRcdFx0aWYobGFzdF9zZWVuKSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAxMiAvKiBCcnRTaG9ydElzc3QgKi8sIHdyaXRlX0JydFNob3J0SXNzdChjZWxsLCBvKSk7XG5cdFx0XHRcdGVsc2Ugd3JpdGVfcmVjb3JkKGJhLCAweDAwMDcgLyogQnJ0Q2VsbElzc3QgKi8sIHdyaXRlX0JydENlbGxJc3N0KGNlbGwsIG8pKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG8udCA9IFwic3RyXCI7XG5cdFx0XHRcdGlmKGxhc3Rfc2Vlbikgd3JpdGVfcmVjb3JkKGJhLCAweDAwMTEgLyogQnJ0U2hvcnRTdCAqLywgd3JpdGVfQnJ0U2hvcnRTdChjZWxsLCBvKSk7XG5cdFx0XHRcdGVsc2Ugd3JpdGVfcmVjb3JkKGJhLCAweDAwMDYgLyogQnJ0Q2VsbFN0ICovLCB3cml0ZV9CcnRDZWxsU3QoY2VsbCwgbykpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0Y2FzZSAnbic6XG5cdFx0XHQvKiBUT0RPOiBkZXRlcm1pbmUgdGhyZXNob2xkIGZvciBSZWFsIHZzIFJLICovXG5cdFx0XHRpZihjZWxsLnYgPT0gKGNlbGwudiB8IDApICYmIGNlbGwudiA+IC0xMDAwICYmIGNlbGwudiA8IDEwMDApIHtcblx0XHRcdFx0aWYobGFzdF9zZWVuKSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwRCAvKiBCcnRTaG9ydFJrICovLCB3cml0ZV9CcnRTaG9ydFJrKGNlbGwsIG8pKTtcblx0XHRcdFx0ZWxzZSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwMiAvKiBCcnRDZWxsUmsgKi8sIHdyaXRlX0JydENlbGxSayhjZWxsLCBvKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihsYXN0X3NlZW4pIHdyaXRlX3JlY29yZChiYSwgMHgwMDEwIC8qIEJydFNob3J0UmVhbCAqLywgd3JpdGVfQnJ0U2hvcnRSZWFsKGNlbGwsIG8pKTtcblx0XHRcdFx0ZWxzZSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwNSAvKiBCcnRDZWxsUmVhbCAqLywgd3JpdGVfQnJ0Q2VsbFJlYWwoY2VsbCwgbykpO1xuXHRcdFx0fSByZXR1cm4gdHJ1ZTtcblx0XHRjYXNlICdiJzpcblx0XHRcdG8udCA9IFwiYlwiO1xuXHRcdFx0aWYobGFzdF9zZWVuKSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwRiAvKiBCcnRTaG9ydEJvb2wgKi8sIHdyaXRlX0JydFNob3J0Qm9vbChjZWxsLCBvKSk7XG5cdFx0XHRlbHNlIHdyaXRlX3JlY29yZChiYSwgMHgwMDA0IC8qIEJydENlbGxCb29sICovLCB3cml0ZV9CcnRDZWxsQm9vbChjZWxsLCBvKSk7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRjYXNlICdlJzpcblx0XHRcdG8udCA9IFwiZVwiO1xuXHRcdFx0aWYobGFzdF9zZWVuKSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwRSAvKiBCcnRTaG9ydEVycm9yICovLCB3cml0ZV9CcnRTaG9ydEVycm9yKGNlbGwsIG8pKTtcblx0XHRcdGVsc2Ugd3JpdGVfcmVjb3JkKGJhLCAweDAwMDMgLyogQnJ0Q2VsbEVycm9yICovLCB3cml0ZV9CcnRDZWxsRXJyb3IoY2VsbCwgbykpO1xuXHRcdFx0cmV0dXJuIHRydWU7XG5cdH1cblx0aWYobGFzdF9zZWVuKSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwQyAvKiBCcnRTaG9ydEJsYW5rICovLCB3cml0ZV9CcnRTaG9ydEJsYW5rKGNlbGwsIG8pKTtcblx0ZWxzZSB3cml0ZV9yZWNvcmQoYmEsIDB4MDAwMSAvKiBCcnRDZWxsQmxhbmsgKi8sIHdyaXRlX0JydENlbGxCbGFuayhjZWxsLCBvKSk7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9DRUxMVEFCTEUoYmEsIHdzLyo6V29ya3NoZWV0Ki8sIGlkeC8qOm51bWJlciovLCBvcHRzLyo6Oiwgd2I6V29ya2Jvb2sqLykge1xuXHR2YXIgcmFuZ2UgPSBzYWZlX2RlY29kZV9yYW5nZSh3c1snIXJlZiddIHx8IFwiQTFcIiksIHJlZiwgcnIgPSBcIlwiLCBjb2xzLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDkxIC8qIEJydEJlZ2luU2hlZXREYXRhICovKTtcblx0dmFyIGRlbnNlID0gQXJyYXkuaXNBcnJheSh3cyk7XG5cdHZhciBjYXAgPSByYW5nZS5lLnI7XG5cdGlmKHdzWychcm93cyddKSBjYXAgPSBNYXRoLm1heChyYW5nZS5lLnIsIHdzWychcm93cyddLmxlbmd0aCAtIDEpO1xuXHRmb3IodmFyIFIgPSByYW5nZS5zLnI7IFIgPD0gY2FwOyArK1IpIHtcblx0XHRyciA9IGVuY29kZV9yb3coUik7XG5cdFx0LyogW0FDQ0VMTFRBQkxFXSAqL1xuXHRcdC8qIEJydFJvd0hkciAqL1xuXHRcdHdyaXRlX3Jvd19oZWFkZXIoYmEsIHdzLCByYW5nZSwgUik7XG5cdFx0dmFyIGxhc3Rfc2VlbiA9IGZhbHNlO1xuXHRcdGlmKFIgPD0gcmFuZ2UuZS5yKSBmb3IodmFyIEMgPSByYW5nZS5zLmM7IEMgPD0gcmFuZ2UuZS5jOyArK0MpIHtcblx0XHRcdC8qICoxNjM4NENFTEwgKi9cblx0XHRcdGlmKFIgPT09IHJhbmdlLnMucikgY29sc1tDXSA9IGVuY29kZV9jb2woQyk7XG5cdFx0XHRyZWYgPSBjb2xzW0NdICsgcnI7XG5cdFx0XHR2YXIgY2VsbCA9IGRlbnNlID8gKHdzW1JdfHxbXSlbQ10gOiB3c1tyZWZdO1xuXHRcdFx0aWYoIWNlbGwpIHsgbGFzdF9zZWVuID0gZmFsc2U7IGNvbnRpbnVlOyB9XG5cdFx0XHQvKiB3cml0ZSBjZWxsICovXG5cdFx0XHRsYXN0X3NlZW4gPSB3cml0ZV93c19iaW5fY2VsbChiYSwgY2VsbCwgUiwgQywgb3B0cywgd3MsIGxhc3Rfc2Vlbik7XG5cdFx0fVxuXHR9XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDkyIC8qIEJydEVuZFNoZWV0RGF0YSAqLyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX01FUkdFQ0VMTFMoYmEsIHdzLyo6V29ya3NoZWV0Ki8pIHtcblx0aWYoIXdzIHx8ICF3c1snIW1lcmdlcyddKSByZXR1cm47XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMEIxIC8qIEJydEJlZ2luTWVyZ2VDZWxscyAqLywgd3JpdGVfQnJ0QmVnaW5NZXJnZUNlbGxzKHdzWychbWVyZ2VzJ10ubGVuZ3RoKSk7XG5cdHdzWychbWVyZ2VzJ10uZm9yRWFjaChmdW5jdGlvbihtKSB7IHdyaXRlX3JlY29yZChiYSwgMHgwMEIwIC8qIEJydE1lcmdlQ2VsbCAqLywgd3JpdGVfQnJ0TWVyZ2VDZWxsKG0pKTsgfSk7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMEIyIC8qIEJydEVuZE1lcmdlQ2VsbHMgKi8pO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9DT0xJTkZPUyhiYSwgd3MvKjpXb3Jrc2hlZXQqLy8qOjosIGlkeDpudW1iZXIsIG9wdHMsIHdiOldvcmtib29rKi8pIHtcblx0aWYoIXdzIHx8ICF3c1snIWNvbHMnXSkgcmV0dXJuO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDE4NiAvKiBCcnRCZWdpbkNvbEluZm9zICovKTtcblx0d3NbJyFjb2xzJ10uZm9yRWFjaChmdW5jdGlvbihtLCBpKSB7IGlmKG0pIHdyaXRlX3JlY29yZChiYSwgMHgwMDNDIC8qICdCcnRDb2xJbmZvJyAqLywgd3JpdGVfQnJ0Q29sSW5mbyhpLCBtKSk7IH0pO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDE4NyAvKiBCcnRFbmRDb2xJbmZvcyAqLyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0lHTk9SRUVDUyhiYSwgd3MvKjpXb3Jrc2hlZXQqLykge1xuXHRpZighd3MgfHwgIXdzWychcmVmJ10pIHJldHVybjtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyODggLyogQnJ0QmVnaW5DZWxsSWdub3JlRUNzICovKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyODkgLyogQnJ0Q2VsbElnbm9yZUVDICovLCB3cml0ZV9CcnRDZWxsSWdub3JlRUMoc2FmZV9kZWNvZGVfcmFuZ2Uod3NbJyFyZWYnXSkpKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAyOEEgLyogQnJ0RW5kQ2VsbElnbm9yZUVDcyAqLyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0hMSU5LUyhiYSwgd3MvKjpXb3Jrc2hlZXQqLywgcmVscykge1xuXHQvKiAqQnJ0SExpbmsgKi9cblx0d3NbJyFsaW5rcyddLmZvckVhY2goZnVuY3Rpb24obCkge1xuXHRcdGlmKCFsWzFdLlRhcmdldCkgcmV0dXJuO1xuXHRcdHZhciBySWQgPSBhZGRfcmVscyhyZWxzLCAtMSwgbFsxXS5UYXJnZXQucmVwbGFjZSgvIy4qJC8sIFwiXCIpLCBSRUxTLkhMSU5LKTtcblx0XHR3cml0ZV9yZWNvcmQoYmEsIDB4MDFFRSAvKiBCcnRITGluayAqLywgd3JpdGVfQnJ0SExpbmsobCwgcklkKSk7XG5cdH0pO1xuXHRkZWxldGUgd3NbJyFsaW5rcyddO1xufVxuZnVuY3Rpb24gd3JpdGVfTEVHQUNZRFJBV0lORyhiYSwgd3MvKjpXb3Jrc2hlZXQqLywgaWR4Lyo6bnVtYmVyKi8sIHJlbHMpIHtcblx0LyogW0JydExlZ2FjeURyYXdpbmddICovXG5cdGlmKHdzWychY29tbWVudHMnXS5sZW5ndGggPiAwKSB7XG5cdFx0dmFyIHJJZCA9IGFkZF9yZWxzKHJlbHMsIC0xLCBcIi4uL2RyYXdpbmdzL3ZtbERyYXdpbmdcIiArIChpZHgrMSkgKyBcIi52bWxcIiwgUkVMUy5WTUwpO1xuXHRcdHdyaXRlX3JlY29yZChiYSwgMHgwMjI3IC8qIEJydExlZ2FjeURyYXdpbmcgKi8sIHdyaXRlX1JlbElEKFwicklkXCIgKyBySWQpKTtcblx0XHR3c1snIWxlZ2FjeSddID0gcklkO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0FVVE9GSUxURVIoYmEsIHdzLCB3YiwgaWR4KSB7XG5cdGlmKCF3c1snIWF1dG9maWx0ZXInXSkgcmV0dXJuO1xuXHR2YXIgZGF0YSA9IHdzWychYXV0b2ZpbHRlciddO1xuXHR2YXIgcmVmID0gdHlwZW9mIGRhdGEucmVmID09PSBcInN0cmluZ1wiID8gZGF0YS5yZWYgOiBlbmNvZGVfcmFuZ2UoZGF0YS5yZWYpO1xuXG5cdC8qIFVwZGF0ZSBGaWx0ZXJEYXRhYmFzZSBkZWZpbmVkIG5hbWUgZm9yIHRoZSB3b3Jrc2hlZXQgKi9cblx0aWYoIXdiLldvcmtib29rKSB3Yi5Xb3JrYm9vayA9ICh7U2hlZXRzOltdfS8qOmFueSovKTtcblx0aWYoIXdiLldvcmtib29rLk5hbWVzKSB3Yi5Xb3JrYm9vay5OYW1lcyA9IFtdO1xuXHR2YXIgbmFtZXMvKjogQXJyYXk8YW55PiAqLyA9IHdiLldvcmtib29rLk5hbWVzO1xuXHR2YXIgcmFuZ2UgPSBkZWNvZGVfcmFuZ2UocmVmKTtcblx0aWYocmFuZ2Uucy5yID09IHJhbmdlLmUucikgeyByYW5nZS5lLnIgPSBkZWNvZGVfcmFuZ2Uod3NbXCIhcmVmXCJdKS5lLnI7IHJlZiA9IGVuY29kZV9yYW5nZShyYW5nZSk7IH1cblx0Zm9yKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIG5hbWUgPSBuYW1lc1tpXTtcblx0XHRpZihuYW1lLk5hbWUgIT0gJ194bG5tLl9GaWx0ZXJEYXRhYmFzZScpIGNvbnRpbnVlO1xuXHRcdGlmKG5hbWUuU2hlZXQgIT0gaWR4KSBjb250aW51ZTtcblx0XHRuYW1lLlJlZiA9IFwiJ1wiICsgd2IuU2hlZXROYW1lc1tpZHhdICsgXCInIVwiICsgcmVmOyBicmVhaztcblx0fVxuXHRpZihpID09IG5hbWVzLmxlbmd0aCkgbmFtZXMucHVzaCh7IE5hbWU6ICdfeGxubS5fRmlsdGVyRGF0YWJhc2UnLCBTaGVldDogaWR4LCBSZWY6IFwiJ1wiICsgd2IuU2hlZXROYW1lc1tpZHhdICsgXCInIVwiICsgcmVmICB9KTtcblxuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDBBMSAvKiBCcnRCZWdpbkFGaWx0ZXIgKi8sIHdyaXRlX1VuY2hlY2tlZFJmWChzYWZlX2RlY29kZV9yYW5nZShyZWYpKSk7XG5cdC8qICpGSUxURVJDT0xVTU4gKi9cblx0LyogW1NPUlRTVEFURV0gKi9cblx0LyogQnJ0RW5kQUZpbHRlciAqL1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDBBMiAvKiBCcnRFbmRBRmlsdGVyICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfV1NWSUVXUzIoYmEsIHdzLCBXb3JrYm9vaykge1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDA4NSAvKiBCcnRCZWdpbldzVmlld3MgKi8pO1xuXHR7IC8qIDEqV1NWSUVXMiAqL1xuXHRcdC8qIFtBQ1VJRF0gKi9cblx0XHR3cml0ZV9yZWNvcmQoYmEsIDB4MDA4OSAvKiBCcnRCZWdpbldzVmlldyAqLywgd3JpdGVfQnJ0QmVnaW5Xc1ZpZXcod3MsIFdvcmtib29rKSk7XG5cdFx0LyogW0JydFBhbmVdICovXG5cdFx0LyogKjRCcnRTZWwgKi9cblx0XHQvKiAqNFNYU0VMRUNUICovXG5cdFx0LyogKkZSVCAqL1xuXHRcdHdyaXRlX3JlY29yZChiYSwgMHgwMDhBIC8qIEJydEVuZFdzVmlldyAqLyk7XG5cdH1cblx0LyogKkZSVCAqL1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDA4NiAvKiBCcnRFbmRXc1ZpZXdzICovKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfV1NGTVRJTkZPKC8qOjpiYSwgd3MqLykge1xuXHQvKiBbQUNXU0ZNVElORk9dICovXG5cdC8vIHdyaXRlX3JlY29yZChiYSwgMHgwMUU1IC8qIEJydFdzRm10SW5mbyAqLywgd3JpdGVfQnJ0V3NGbXRJbmZvKHdzKSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX1NIRUVUUFJPVEVDVChiYSwgd3MpIHtcblx0aWYoIXdzWychcHJvdGVjdCddKSByZXR1cm47XG5cdC8qIFtCcnRTaGVldFByb3RlY3Rpb25Jc29dICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMjE3IC8qIEJydFNoZWV0UHJvdGVjdGlvbiAqLywgd3JpdGVfQnJ0U2hlZXRQcm90ZWN0aW9uKHdzWychcHJvdGVjdCddKSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3dzX2JpbihpZHgvKjpudW1iZXIqLywgb3B0cywgd2IvKjpXb3JrYm9vayovLCByZWxzKSB7XG5cdHZhciBiYSA9IGJ1Zl9hcnJheSgpO1xuXHR2YXIgcyA9IHdiLlNoZWV0TmFtZXNbaWR4XSwgd3MgPSB3Yi5TaGVldHNbc10gfHwge307XG5cdHZhciBjLyo6c3RyaW5nKi8gPSBzOyB0cnkgeyBpZih3YiAmJiB3Yi5Xb3JrYm9vaykgYyA9IHdiLldvcmtib29rLlNoZWV0c1tpZHhdLkNvZGVOYW1lIHx8IGM7IH0gY2F0Y2goZSkge31cblx0dmFyIHIgPSBzYWZlX2RlY29kZV9yYW5nZSh3c1snIXJlZiddIHx8IFwiQTFcIik7XG5cdGlmKHIuZS5jID4gMHgzRkZGIHx8IHIuZS5yID4gMHhGRkZGRikge1xuXHRcdGlmKG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZSBcIiArICh3c1snIXJlZiddIHx8IFwiQTFcIikgKyBcIiBleGNlZWRzIGZvcm1hdCBsaW1pdCBBMTpYRkQxMDQ4NTc2XCIpO1xuXHRcdHIuZS5jID0gTWF0aC5taW4oci5lLmMsIDB4M0ZGRik7XG5cdFx0ci5lLnIgPSBNYXRoLm1pbihyLmUuYywgMHhGRkZGRik7XG5cdH1cblx0d3NbJyFsaW5rcyddID0gW107XG5cdC8qIHBhc3NlZCBiYWNrIHRvIHdyaXRlX3ppcCBhbmQgcmVtb3ZlZCB0aGVyZSAqL1xuXHR3c1snIWNvbW1lbnRzJ10gPSBbXTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwODEgLyogQnJ0QmVnaW5TaGVldCAqLyk7XG5cdGlmKHdiLnZiYXJhdyB8fCB3c1snIW91dGxpbmUnXSkgd3JpdGVfcmVjb3JkKGJhLCAweDAwOTMgLyogQnJ0V3NQcm9wICovLCB3cml0ZV9CcnRXc1Byb3AoYywgd3NbJyFvdXRsaW5lJ10pKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwOTQgLyogQnJ0V3NEaW0gKi8sIHdyaXRlX0JydFdzRGltKHIpKTtcblx0d3JpdGVfV1NWSUVXUzIoYmEsIHdzLCB3Yi5Xb3JrYm9vayk7XG5cdHdyaXRlX1dTRk1USU5GTyhiYSwgd3MpO1xuXHR3cml0ZV9DT0xJTkZPUyhiYSwgd3MsIGlkeCwgb3B0cywgd2IpO1xuXHR3cml0ZV9DRUxMVEFCTEUoYmEsIHdzLCBpZHgsIG9wdHMsIHdiKTtcblx0LyogW0JydFNoZWV0Q2FsY1Byb3BdICovXG5cdHdyaXRlX1NIRUVUUFJPVEVDVChiYSwgd3MpO1xuXHQvKiAqKFtCcnRSYW5nZVByb3RlY3Rpb25Jc29dIEJydFJhbmdlUHJvdGVjdGlvbikgKi9cblx0LyogW1NDRU5NQU5dICovXG5cdHdyaXRlX0FVVE9GSUxURVIoYmEsIHdzLCB3YiwgaWR4KTtcblx0LyogW1NPUlRTVEFURV0gKi9cblx0LyogW0RDT05dICovXG5cdC8qIFtVU0VSU0hWSUVXU10gKi9cblx0d3JpdGVfTUVSR0VDRUxMUyhiYSwgd3MpO1xuXHQvKiBbQnJ0UGhvbmV0aWNJbmZvXSAqL1xuXHQvKiAqQ09ORElUSU9OQUxGT1JNQVRUSU5HICovXG5cdC8qIFtEVkFMU10gKi9cblx0d3JpdGVfSExJTktTKGJhLCB3cywgcmVscyk7XG5cdC8qIFtCcnRQcmludE9wdGlvbnNdICovXG5cdGlmKHdzWychbWFyZ2lucyddKSB3cml0ZV9yZWNvcmQoYmEsIDB4MDFEQyAvKiBCcnRNYXJnaW5zICovLCB3cml0ZV9CcnRNYXJnaW5zKHdzWychbWFyZ2lucyddKSk7XG5cdC8qIFtCcnRQYWdlU2V0dXBdICovXG5cdC8qIFtIRUFERVJGT09URVJdICovXG5cdC8qIFtSV0JSS10gKi9cblx0LyogW0NPTEJSS10gKi9cblx0LyogKkJydEJpZ05hbWUgKi9cblx0LyogW0NFTExXQVRDSEVTXSAqL1xuXHRpZighb3B0cyB8fCBvcHRzLmlnbm9yZUVDIHx8IChvcHRzLmlnbm9yZUVDID09ICh2b2lkIDApKSkgd3JpdGVfSUdOT1JFRUNTKGJhLCB3cyk7XG5cdC8qIFtTTUFSVFRBR1NdICovXG5cdC8qIFtCcnREcmF3aW5nXSAqL1xuXHR3cml0ZV9MRUdBQ1lEUkFXSU5HKGJhLCB3cywgaWR4LCByZWxzKTtcblx0LyogW0JydExlZ2FjeURyYXdpbmdIRl0gKi9cblx0LyogW0JydEJrSGltXSAqL1xuXHQvKiBbT0xFT0JKRUNUU10gKi9cblx0LyogW0FDVElWRVhDT05UUk9MU10gKi9cblx0LyogW1dFQlBVQklURU1TXSAqL1xuXHQvKiBbTElTVFBBUlRTXSAqL1xuXHQvKiBGUlRXT1JLU0hFRVQgKi9cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwODIgLyogQnJ0RW5kU2hlZXQgKi8pO1xuXHRyZXR1cm4gYmEuZW5kKCk7XG59XG5mdW5jdGlvbiBwYXJzZV9DYWNoZShkYXRhLyo6c3RyaW5nKi8pLyo6W0FycmF5PG51bWJlcnxzdHJpbmc+LCBzdHJpbmcsID9zdHJpbmddKi8ge1xuXHR2YXIgY29sLyo6QXJyYXk8bnVtYmVyfHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgbnVtID0gZGF0YS5tYXRjaCgvXjxjOm51bUNhY2hlPi8pO1xuXHR2YXIgZjtcblxuXHQvKiAyMS4yLjIuMTUwIHB0IENUX051bVZhbCAqL1xuXHQoZGF0YS5tYXRjaCgvPGM6cHQgaWR4PVwiKFxcZCopXCI+KC4qPyk8XFwvYzpwdD4vbWcpfHxbXSkuZm9yRWFjaChmdW5jdGlvbihwdCkge1xuXHRcdHZhciBxID0gcHQubWF0Y2goLzxjOnB0IGlkeD1cIihcXGQqPylcIj48Yzp2PiguKik8XFwvYzp2PjxcXC9jOnB0Pi8pO1xuXHRcdGlmKCFxKSByZXR1cm47XG5cdFx0Y29sWytxWzFdXSA9IG51bSA/ICtxWzJdIDogcVsyXTtcblx0fSk7XG5cblx0LyogMjEuMi4yLjcxIGZvcm1hdENvZGUgQ1RfWHN0cmluZyAqL1xuXHR2YXIgbmYgPSB1bmVzY2FwZXhtbCgoZGF0YS5tYXRjaCgvPGM6Zm9ybWF0Q29kZT4oW1xcc1xcU10qPyk8XFwvYzpmb3JtYXRDb2RlPi8pIHx8IFtcIlwiLFwiR2VuZXJhbFwiXSlbMV0pO1xuXG5cdChkYXRhLm1hdGNoKC88YzpmPiguKj8pPFxcL2M6Zj4vbWcpfHxbXSkuZm9yRWFjaChmdW5jdGlvbihGKSB7IGYgPSBGLnJlcGxhY2UoLzwuKj8+L2csXCJcIik7IH0pO1xuXG5cdHJldHVybiBbY29sLCBuZiwgZl07XG59XG5cbi8qIDIxLjIgRHJhd2luZ01MIC0gQ2hhcnRzICovXG5mdW5jdGlvbiBwYXJzZV9jaGFydChkYXRhLyo6P3N0cmluZyovLCBuYW1lLyo6c3RyaW5nKi8sIG9wdHMsIHJlbHMsIHdiLCBjc2hlZXQpIHtcblx0dmFyIGNzLyo6V29ya3NoZWV0Ki8gPSAoKGNzaGVldCB8fCB7XCIhdHlwZVwiOlwiY2hhcnRcIn0pLyo6YW55Ki8pO1xuXHRpZighZGF0YSkgcmV0dXJuIGNzaGVldDtcblx0LyogMjEuMi4yLjI3IGNoYXJ0IENUX0NoYXJ0ICovXG5cblx0dmFyIEMgPSAwLCBSID0gMCwgY29sID0gXCJBXCI7XG5cdHZhciByZWZndWVzcyA9IHtzOiB7cjoyMDAwMDAwLCBjOjIwMDAwMDB9LCBlOiB7cjowLCBjOjB9IH07XG5cblx0LyogMjEuMi4yLjEyMCBudW1DYWNoZSBDVF9OdW1EYXRhICovXG5cdChkYXRhLm1hdGNoKC88YzpudW1DYWNoZT5bXFxzXFxTXSo/PFxcL2M6bnVtQ2FjaGU+L2dtKXx8W10pLmZvckVhY2goZnVuY3Rpb24obmMpIHtcblx0XHR2YXIgY2FjaGUgPSBwYXJzZV9DYWNoZShuYyk7XG5cdFx0cmVmZ3Vlc3Mucy5yID0gcmVmZ3Vlc3Mucy5jID0gMDtcblx0XHRyZWZndWVzcy5lLmMgPSBDO1xuXHRcdGNvbCA9IGVuY29kZV9jb2woQyk7XG5cdFx0Y2FjaGVbMF0uZm9yRWFjaChmdW5jdGlvbihuLGkpIHtcblx0XHRcdGNzW2NvbCArIGVuY29kZV9yb3coaSldID0ge3Q6J24nLCB2Om4sIHo6Y2FjaGVbMV0gfTtcblx0XHRcdFIgPSBpO1xuXHRcdH0pO1xuXHRcdGlmKHJlZmd1ZXNzLmUuciA8IFIpIHJlZmd1ZXNzLmUuciA9IFI7XG5cdFx0KytDO1xuXHR9KTtcblx0aWYoQyA+IDApIGNzW1wiIXJlZlwiXSA9IGVuY29kZV9yYW5nZShyZWZndWVzcyk7XG5cdHJldHVybiBjcztcbn1cbi8qIDE4LjMgV29ya3NoZWV0cyBhbHNvIGNvdmVycyBDaGFydHNoZWV0cyAqL1xuZnVuY3Rpb24gcGFyc2VfY3NfeG1sKGRhdGEvKjo/c3RyaW5nKi8sIG9wdHMsIGlkeC8qOm51bWJlciovLCByZWxzLCB3Yi8qOjosIHRoZW1lcywgc3R5bGVzKi8pLyo6V29ya3NoZWV0Ki8ge1xuXHRpZighZGF0YSkgcmV0dXJuIGRhdGE7XG5cdC8qIDE4LjMuMS4xMiBjaGFydHNoZWV0IENUX0NoYXJ0U2hlZXQgKi9cblx0aWYoIXJlbHMpIHJlbHMgPSB7JyFpZCc6e319O1xuXHR2YXIgcyA9ICh7JyF0eXBlJzpcImNoYXJ0XCIsICchZHJhd2VsJzpudWxsLCAnIXJlbCc6XCJcIn0vKjphbnkqLyk7XG5cdHZhciBtO1xuXG5cdC8qIDE4LjMuMS44MyBzaGVldFByIENUX0NoYXJ0c2hlZXRQciAqL1xuXHR2YXIgc2hlZXRQciA9IGRhdGEubWF0Y2goc2hlZXRwcnJlZ2V4KTtcblx0aWYoc2hlZXRQcikgcGFyc2Vfd3NfeG1sX3NoZWV0cHIoc2hlZXRQclswXSwgcywgd2IsIGlkeCk7XG5cblx0LyogMTguMy4xLjM2IGRyYXdpbmcgQ1RfRHJhd2luZyAqL1xuXHRpZigobSA9IGRhdGEubWF0Y2goL2RyYXdpbmcgcjppZD1cIiguKj8pXCIvKSkpIHNbJyFyZWwnXSA9IG1bMV07XG5cblx0aWYocmVsc1snIWlkJ11bc1snIXJlbCddXSkgc1snIWRyYXdlbCddID0gcmVsc1snIWlkJ11bc1snIXJlbCddXTtcblx0cmV0dXJuIHM7XG59XG5mdW5jdGlvbiB3cml0ZV9jc194bWwoaWR4Lyo6bnVtYmVyKi8sIG9wdHMsIHdiLyo6V29ya2Jvb2sqLywgcmVscykvKjpzdHJpbmcqLyB7XG5cdHZhciBvID0gW1hNTF9IRUFERVIsIHdyaXRleHRhZygnY2hhcnRzaGVldCcsIG51bGwsIHtcblx0XHQneG1sbnMnOiBYTUxOU19tYWluWzBdLFxuXHRcdCd4bWxuczpyJzogWE1MTlMuclxuXHR9KV07XG5cdG9bby5sZW5ndGhdID0gd3JpdGV4dGFnKFwiZHJhd2luZ1wiLCBudWxsLCB7XCJyOmlkXCI6IFwicklkMVwifSk7XG5cdGFkZF9yZWxzKHJlbHMsIC0xLCBcIi4uL2RyYXdpbmdzL2RyYXdpbmdcIiArIChpZHgrMSkgKyBcIi54bWxcIiwgUkVMUy5EUkFXKTtcblx0aWYoby5sZW5ndGg+MikgeyBvW28ubGVuZ3RoXSA9ICgnPC9jaGFydHNoZWV0PicpOyBvWzFdPW9bMV0ucmVwbGFjZShcIi8+XCIsXCI+XCIpOyB9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuMzMxIEJydENzUHJvcCAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0Q3NQcm9wKGRhdGEsIGxlbmd0aC8qOm51bWJlciovKSB7XG5cdGRhdGEubCArPSAxMDtcblx0dmFyIG5hbWUgPSBwYXJzZV9YTFdpZGVTdHJpbmcoZGF0YSwgbGVuZ3RoIC0gMTApO1xuXHRyZXR1cm4geyBuYW1lOiBuYW1lIH07XG59XG5cbi8qIFtNUy1YTFNCXSAyLjEuNy43IENoYXJ0IFNoZWV0ICovXG5mdW5jdGlvbiBwYXJzZV9jc19iaW4oZGF0YSwgb3B0cywgaWR4Lyo6bnVtYmVyKi8sIHJlbHMsIHdiLyo6OiwgdGhlbWVzLCBzdHlsZXMqLykvKjpXb3Jrc2hlZXQqLyB7XG5cdGlmKCFkYXRhKSByZXR1cm4gZGF0YTtcblx0aWYoIXJlbHMpIHJlbHMgPSB7JyFpZCc6e319O1xuXHR2YXIgcyA9IHsnIXR5cGUnOlwiY2hhcnRcIiwgJyFkcmF3ZWwnOm51bGwsICchcmVsJzpcIlwifTtcblx0dmFyIHN0YXRlLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdHZhciBwYXNzID0gZmFsc2U7XG5cdHJlY29yZGhvcHBlcihkYXRhLCBmdW5jdGlvbiBjc19wYXJzZSh2YWwsIFIsIFJUKSB7XG5cdFx0c3dpdGNoKFJUKSB7XG5cblx0XHRcdGNhc2UgMHgwMjI2OiAvKiAnQnJ0RHJhd2luZycgKi9cblx0XHRcdFx0c1snIXJlbCddID0gdmFsOyBicmVhaztcblxuXHRcdFx0Y2FzZSAweDAyOEI6IC8qICdCcnRDc1Byb3AnICovXG5cdFx0XHRcdGlmKCF3Yi5TaGVldHNbaWR4XSkgd2IuU2hlZXRzW2lkeF0gPSB7fTtcblx0XHRcdFx0aWYodmFsLm5hbWUpIHdiLlNoZWV0c1tpZHhdLkNvZGVOYW1lID0gdmFsLm5hbWU7XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDIzMjogLyogJ0JydEJrSGltJyAqL1xuXHRcdFx0Y2FzZSAweDAyOEM6IC8qICdCcnRDc1BhZ2VTZXR1cCcgKi9cblx0XHRcdGNhc2UgMHgwMjlEOiAvKiAnQnJ0Q3NQcm90ZWN0aW9uJyAqL1xuXHRcdFx0Y2FzZSAweDAyQTc6IC8qICdCcnRDc1Byb3RlY3Rpb25Jc28nICovXG5cdFx0XHRjYXNlIDB4MDIyNzogLyogJ0JydExlZ2FjeURyYXdpbmcnICovXG5cdFx0XHRjYXNlIDB4MDIyODogLyogJ0JydExlZ2FjeURyYXdpbmdIRicgKi9cblx0XHRcdGNhc2UgMHgwMURDOiAvKiAnQnJ0TWFyZ2lucycgKi9cblx0XHRcdGNhc2UgMHgwQzAwOiAvKiAnQnJ0VWlkJyAqL1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwMjM6IC8qICdCcnRGUlRCZWdpbicgKi9cblx0XHRcdFx0cGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjQ6IC8qICdCcnRGUlRFbmQnICovXG5cdFx0XHRcdHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cdFx0XHRjYXNlIDB4MDAyNTogLyogJ0JydEFDQmVnaW4nICovXG5cdFx0XHRcdHN0YXRlLnB1c2goUlQpOyBicmVhaztcblx0XHRcdGNhc2UgMHgwMDI2OiAvKiAnQnJ0QUNFbmQnICovXG5cdFx0XHRcdHN0YXRlLnBvcCgpOyBicmVhaztcblxuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYoUi5UID4gMCkgc3RhdGUucHVzaChSVCk7XG5cdFx0XHRcdGVsc2UgaWYoUi5UIDwgMCkgc3RhdGUucG9wKCk7XG5cdFx0XHRcdGVsc2UgaWYoIXBhc3MgfHwgb3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcihcIlVuZXhwZWN0ZWQgcmVjb3JkIDB4XCIgKyBSVC50b1N0cmluZygxNikpO1xuXHRcdH1cblx0fSwgb3B0cyk7XG5cblx0aWYocmVsc1snIWlkJ11bc1snIXJlbCddXSkgc1snIWRyYXdlbCddID0gcmVsc1snIWlkJ11bc1snIXJlbCddXTtcblx0cmV0dXJuIHM7XG59XG5mdW5jdGlvbiB3cml0ZV9jc19iaW4oLyo6OmlkeDpudW1iZXIsIG9wdHMsIHdiOldvcmtib29rLCByZWxzKi8pIHtcblx0dmFyIGJhID0gYnVmX2FycmF5KCk7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDgxIC8qIEJydEJlZ2luU2hlZXQgKi8pO1xuXHQvKiBbQnJ0Q3NQcm9wXSAqL1xuXHQvKiBDU1ZJRVdTICovXG5cdC8qIFtbQnJ0Q3NQcm90ZWN0aW9uSXNvXSBCcnRDc1Byb3RlY3Rpb25dICovXG5cdC8qIFtVU0VSQ1NWSUVXU10gKi9cblx0LyogW0JydE1hcmdpbnNdICovXG5cdC8qIFtCcnRDc1BhZ2VTZXR1cF0gKi9cblx0LyogW0hFQURFUkZPT1RFUl0gKi9cblx0LyogQnJ0RHJhd2luZyAqL1xuXHQvKiBbQnJ0TGVnYWN5RHJhd2luZ10gKi9cblx0LyogW0JydExlZ2FjeURyYXdpbmdIRl0gKi9cblx0LyogW0JydEJrSGltXSAqL1xuXHQvKiBbV0VCUFVCSVRFTVNdICovXG5cdC8qIEZSVENIQVJUU0hFRVQgKi9cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwODIgLyogQnJ0RW5kU2hlZXQgKi8pO1xuXHRyZXR1cm4gYmEuZW5kKCk7XG59XG4vKiAxOC4yLjI4IChDVF9Xb3JrYm9va1Byb3RlY3Rpb24pIERlZmF1bHRzICovXG52YXIgV0JQcm9wc0RlZiA9IFtcblx0WydhbGxvd1JlZnJlc2hRdWVyeScsICAgICAgICAgICBmYWxzZSwgXCJib29sXCJdLFxuXHRbJ2F1dG9Db21wcmVzc1BpY3R1cmVzJywgICAgICAgIHRydWUsICBcImJvb2xcIl0sXG5cdFsnYmFja3VwRmlsZScsICAgICAgICAgICAgICAgICAgZmFsc2UsIFwiYm9vbFwiXSxcblx0WydjaGVja0NvbXBhdGliaWxpdHknLCAgICAgICAgICBmYWxzZSwgXCJib29sXCJdLFxuXHRbJ0NvZGVOYW1lJywgICAgICAgICAgICAgICAgICAgICcnXSxcblx0WydkYXRlMTkwNCcsICAgICAgICAgICAgICAgICAgICBmYWxzZSwgXCJib29sXCJdLFxuXHRbJ2RlZmF1bHRUaGVtZVZlcnNpb24nLCAgICAgICAgIDAsICAgICAgXCJpbnRcIl0sXG5cdFsnZmlsdGVyUHJpdmFjeScsICAgICAgICAgICAgICAgZmFsc2UsIFwiYm9vbFwiXSxcblx0WydoaWRlUGl2b3RGaWVsZExpc3QnLCAgICAgICAgICBmYWxzZSwgXCJib29sXCJdLFxuXHRbJ3Byb21wdGVkU29sdXRpb25zJywgICAgICAgICAgIGZhbHNlLCBcImJvb2xcIl0sXG5cdFsncHVibGlzaEl0ZW1zJywgICAgICAgICAgICAgICAgZmFsc2UsIFwiYm9vbFwiXSxcblx0WydyZWZyZXNoQWxsQ29ubmVjdGlvbnMnLCAgICAgICBmYWxzZSwgXCJib29sXCJdLFxuXHRbJ3NhdmVFeHRlcm5hbExpbmtWYWx1ZXMnLCAgICAgIHRydWUsICBcImJvb2xcIl0sXG5cdFsnc2hvd0JvcmRlclVuc2VsZWN0ZWRUYWJsZXMnLCAgdHJ1ZSwgIFwiYm9vbFwiXSxcblx0WydzaG93SW5rQW5ub3RhdGlvbicsICAgICAgICAgICB0cnVlLCAgXCJib29sXCJdLFxuXHRbJ3Nob3dPYmplY3RzJywgICAgICAgICAgICAgICAgICdhbGwnXSxcblx0WydzaG93UGl2b3RDaGFydEZpbHRlcicsICAgICAgICBmYWxzZSwgXCJib29sXCJdLFxuXHRbJ3VwZGF0ZUxpbmtzJywgJ3VzZXJTZXQnXVxuXTtcblxuLyogMTguMi4zMCAoQ1RfQm9va1ZpZXcpIERlZmF1bHRzICovXG52YXIgV0JWaWV3RGVmID0gW1xuXHRbJ2FjdGl2ZVRhYicsICAgICAgICAgICAgICAgICAgIDAsICAgICAgXCJpbnRcIl0sXG5cdFsnYXV0b0ZpbHRlckRhdGVHcm91cGluZycsICAgICAgdHJ1ZSwgIFwiYm9vbFwiXSxcblx0WydmaXJzdFNoZWV0JywgICAgICAgICAgICAgICAgICAwLCAgICAgIFwiaW50XCJdLFxuXHRbJ21pbmltaXplZCcsICAgICAgICAgICAgICAgICAgIGZhbHNlLCBcImJvb2xcIl0sXG5cdFsnc2hvd0hvcml6b250YWxTY3JvbGwnLCAgICAgICAgdHJ1ZSwgIFwiYm9vbFwiXSxcblx0WydzaG93U2hlZXRUYWJzJywgICAgICAgICAgICAgICB0cnVlLCAgXCJib29sXCJdLFxuXHRbJ3Nob3dWZXJ0aWNhbFNjcm9sbCcsICAgICAgICAgIHRydWUsICBcImJvb2xcIl0sXG5cdFsndGFiUmF0aW8nLCAgICAgICAgICAgICAgICAgICAgNjAwLCAgICBcImludFwiXSxcblx0Wyd2aXNpYmlsaXR5JywgICAgICAgICAgICAgICAgICAndmlzaWJsZSddXG5cdC8vd2luZG93e0hlaWdodCxXaWR0aH0sIHt4LHl9V2luZG93XG5dO1xuXG4vKiAxOC4yLjE5IChDVF9TaGVldCkgRGVmYXVsdHMgKi9cbnZhciBTaGVldERlZiA9IFtcblx0Ly9bJ3N0YXRlJywgJ3Zpc2libGUnXVxuXTtcblxuLyogMTguMi4yICAoQ1RfQ2FsY1ByKSBEZWZhdWx0cyAqL1xudmFyIENhbGNQckRlZiA9IFtcblx0WydjYWxjQ29tcGxldGVkJywgJ3RydWUnXSxcblx0WydjYWxjTW9kZScsICdhdXRvJ10sXG5cdFsnY2FsY09uU2F2ZScsICd0cnVlJ10sXG5cdFsnY29uY3VycmVudENhbGMnLCAndHJ1ZSddLFxuXHRbJ2Z1bGxDYWxjT25Mb2FkJywgJ2ZhbHNlJ10sXG5cdFsnZnVsbFByZWNpc2lvbicsICd0cnVlJ10sXG5cdFsnaXRlcmF0ZScsICdmYWxzZSddLFxuXHRbJ2l0ZXJhdGVDb3VudCcsICcxMDAnXSxcblx0WydpdGVyYXRlRGVsdGEnLCAnMC4wMDEnXSxcblx0WydyZWZNb2RlJywgJ0ExJ11cbl07XG5cbi8qIDE4LjIuMyAoQ1RfQ3VzdG9tV29ya2Jvb2tWaWV3KSBEZWZhdWx0cyAqL1xuLyp2YXIgQ3VzdG9tV0JWaWV3RGVmID0gW1xuXHRbJ2F1dG9VcGRhdGUnLCAnZmFsc2UnXSxcblx0WydjaGFuZ2VzU2F2ZWRXaW4nLCAnZmFsc2UnXSxcblx0WydpbmNsdWRlSGlkZGVuUm93Q29sJywgJ3RydWUnXSxcblx0WydpbmNsdWRlUHJpbnRTZXR0aW5ncycsICd0cnVlJ10sXG5cdFsnbWF4aW1pemVkJywgJ2ZhbHNlJ10sXG5cdFsnbWluaW1pemVkJywgJ2ZhbHNlJ10sXG5cdFsnb25seVN5bmMnLCAnZmFsc2UnXSxcblx0WydwZXJzb25hbFZpZXcnLCAnZmFsc2UnXSxcblx0WydzaG93Q29tbWVudHMnLCAnY29tbUluZGljYXRvciddLFxuXHRbJ3Nob3dGb3JtdWxhQmFyJywgJ3RydWUnXSxcblx0WydzaG93SG9yaXpvbnRhbFNjcm9sbCcsICd0cnVlJ10sXG5cdFsnc2hvd09iamVjdHMnLCAnYWxsJ10sXG5cdFsnc2hvd1NoZWV0VGFicycsICd0cnVlJ10sXG5cdFsnc2hvd1N0YXR1c2JhcicsICd0cnVlJ10sXG5cdFsnc2hvd1ZlcnRpY2FsU2Nyb2xsJywgJ3RydWUnXSxcblx0Wyd0YWJSYXRpbycsICc2MDAnXSxcblx0Wyd4V2luZG93JywgJzAnXSxcblx0Wyd5V2luZG93JywgJzAnXVxuXTsqL1xuXG5mdW5jdGlvbiBwdXNoX2RlZmF1bHRzX2FycmF5KHRhcmdldCwgZGVmYXVsdHMpIHtcblx0Zm9yKHZhciBqID0gMDsgaiAhPSB0YXJnZXQubGVuZ3RoOyArK2opIHsgdmFyIHcgPSB0YXJnZXRbal07XG5cdFx0Zm9yKHZhciBpPTA7IGkgIT0gZGVmYXVsdHMubGVuZ3RoOyArK2kpIHsgdmFyIHogPSBkZWZhdWx0c1tpXTtcblx0XHRcdGlmKHdbelswXV0gPT0gbnVsbCkgd1t6WzBdXSA9IHpbMV07XG5cdFx0XHRlbHNlIHN3aXRjaCh6WzJdKSB7XG5cdFx0XHRjYXNlIFwiYm9vbFwiOiBpZih0eXBlb2Ygd1t6WzBdXSA9PSBcInN0cmluZ1wiKSB3W3pbMF1dID0gcGFyc2V4bWxib29sKHdbelswXV0pOyBicmVhaztcblx0XHRcdGNhc2UgXCJpbnRcIjogaWYodHlwZW9mIHdbelswXV0gPT0gXCJzdHJpbmdcIikgd1t6WzBdXSA9IHBhcnNlSW50KHdbelswXV0sIDEwKTsgYnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5mdW5jdGlvbiBwdXNoX2RlZmF1bHRzKHRhcmdldCwgZGVmYXVsdHMpIHtcblx0Zm9yKHZhciBpID0gMDsgaSAhPSBkZWZhdWx0cy5sZW5ndGg7ICsraSkgeyB2YXIgeiA9IGRlZmF1bHRzW2ldO1xuXHRcdGlmKHRhcmdldFt6WzBdXSA9PSBudWxsKSB0YXJnZXRbelswXV0gPSB6WzFdO1xuXHRcdGVsc2Ugc3dpdGNoKHpbMl0pIHtcblx0XHRcdGNhc2UgXCJib29sXCI6IGlmKHR5cGVvZiB0YXJnZXRbelswXV0gPT0gXCJzdHJpbmdcIikgdGFyZ2V0W3pbMF1dID0gcGFyc2V4bWxib29sKHRhcmdldFt6WzBdXSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBcImludFwiOiBpZih0eXBlb2YgdGFyZ2V0W3pbMF1dID09IFwic3RyaW5nXCIpIHRhcmdldFt6WzBdXSA9IHBhcnNlSW50KHRhcmdldFt6WzBdXSwgMTApOyBicmVhaztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gcGFyc2Vfd2JfZGVmYXVsdHMod2IpIHtcblx0cHVzaF9kZWZhdWx0cyh3Yi5XQlByb3BzLCBXQlByb3BzRGVmKTtcblx0cHVzaF9kZWZhdWx0cyh3Yi5DYWxjUHIsIENhbGNQckRlZik7XG5cblx0cHVzaF9kZWZhdWx0c19hcnJheSh3Yi5XQlZpZXcsIFdCVmlld0RlZik7XG5cdHB1c2hfZGVmYXVsdHNfYXJyYXkod2IuU2hlZXRzLCBTaGVldERlZik7XG5cblx0X3NzZm9wdHMuZGF0ZTE5MDQgPSBwYXJzZXhtbGJvb2wod2IuV0JQcm9wcy5kYXRlMTkwNCk7XG59XG5cbmZ1bmN0aW9uIHNhZmUxOTA0KHdiLyo6V29ya2Jvb2sqLykvKjpzdHJpbmcqLyB7XG5cdC8qIFRPRE86IHN0b3JlIGRhdGUxOTA0IHNvbWV3aGVyZSBlbHNlICovXG5cdGlmKCF3Yi5Xb3JrYm9vaykgcmV0dXJuIFwiZmFsc2VcIjtcblx0aWYoIXdiLldvcmtib29rLldCUHJvcHMpIHJldHVybiBcImZhbHNlXCI7XG5cdHJldHVybiBwYXJzZXhtbGJvb2wod2IuV29ya2Jvb2suV0JQcm9wcy5kYXRlMTkwNCkgPyBcInRydWVcIiA6IFwiZmFsc2VcIjtcbn1cblxudmFyIGJhZGNoYXJzID0gLyojX19QVVJFX18qL1wiXVsqP1xcL1xcXFxcIi5zcGxpdChcIlwiKTtcbmZ1bmN0aW9uIGNoZWNrX3dzX25hbWUobi8qOnN0cmluZyovLCBzYWZlLyo6P2Jvb2xlYW4qLykvKjpib29sZWFuKi8ge1xuXHRpZihuLmxlbmd0aCA+IDMxKSB7IGlmKHNhZmUpIHJldHVybiBmYWxzZTsgdGhyb3cgbmV3IEVycm9yKFwiU2hlZXQgbmFtZXMgY2Fubm90IGV4Y2VlZCAzMSBjaGFyc1wiKTsgfVxuXHR2YXIgX2dvb2QgPSB0cnVlO1xuXHRiYWRjaGFycy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHtcblx0XHRpZihuLmluZGV4T2YoYykgPT0gLTEpIHJldHVybjtcblx0XHRpZighc2FmZSkgdGhyb3cgbmV3IEVycm9yKFwiU2hlZXQgbmFtZSBjYW5ub3QgY29udGFpbiA6IFxcXFwgLyA/ICogWyBdXCIpO1xuXHRcdF9nb29kID0gZmFsc2U7XG5cdH0pO1xuXHRyZXR1cm4gX2dvb2Q7XG59XG5mdW5jdGlvbiBjaGVja193Yl9uYW1lcyhOLCBTLCBjb2Rlcykge1xuXHROLmZvckVhY2goZnVuY3Rpb24obixpKSB7XG5cdFx0Y2hlY2tfd3NfbmFtZShuKTtcblx0XHRmb3IodmFyIGogPSAwOyBqIDwgaTsgKytqKSBpZihuID09IE5bal0pIHRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBTaGVldCBOYW1lOiBcIiArIG4pO1xuXHRcdGlmKGNvZGVzKSB7XG5cdFx0XHR2YXIgY24gPSAoUyAmJiBTW2ldICYmIFNbaV0uQ29kZU5hbWUpIHx8IG47XG5cdFx0XHRpZihjbi5jaGFyQ29kZUF0KDApID09IDk1ICYmIGNuLmxlbmd0aCA+IDIyKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgQ29kZSBOYW1lOiBXb3Jrc2hlZXRcIiArIGNuKTtcblx0XHR9XG5cdH0pO1xufVxuZnVuY3Rpb24gY2hlY2tfd2Iod2IpIHtcblx0aWYoIXdiIHx8ICF3Yi5TaGVldE5hbWVzIHx8ICF3Yi5TaGVldHMpIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgV29ya2Jvb2tcIik7XG5cdGlmKCF3Yi5TaGVldE5hbWVzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiV29ya2Jvb2sgaXMgZW1wdHlcIik7XG5cdHZhciBTaGVldHMgPSAod2IuV29ya2Jvb2sgJiYgd2IuV29ya2Jvb2suU2hlZXRzKSB8fCBbXTtcblx0Y2hlY2tfd2JfbmFtZXMod2IuU2hlZXROYW1lcywgU2hlZXRzLCAhIXdiLnZiYXJhdyk7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytpKSBjaGVja193cyh3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1tpXV0sIHdiLlNoZWV0TmFtZXNbaV0sIGkpO1xuXHQvKiBUT0RPOiB2YWxpZGF0ZSB3b3JrYm9vayAqL1xufVxuLyogMTguMiBXb3JrYm9vayAqL1xudmFyIHdibnNyZWdleCA9IC88XFx3Kzp3b3JrYm9vay87XG5mdW5jdGlvbiBwYXJzZV93Yl94bWwoZGF0YSwgb3B0cykvKjpXb3JrYm9va0ZpbGUqLyB7XG5cdGlmKCFkYXRhKSB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCBmaWxlXCIpO1xuXHR2YXIgd2IgPSAvKjo6KCoveyBBcHBWZXJzaW9uOnt9LCBXQlByb3BzOnt9LCBXQlZpZXc6W10sIFNoZWV0czpbXSwgQ2FsY1ByOnt9LCBOYW1lczpbXSwgeG1sbnM6IFwiXCIgfS8qOjopKi87XG5cdHZhciBwYXNzID0gZmFsc2UsIHhtbG5zID0gXCJ4bWxuc1wiO1xuXHR2YXIgZG5hbWUgPSB7fSwgZG5zdGFydCA9IDA7XG5cdGRhdGEucmVwbGFjZSh0YWdyZWdleCwgZnVuY3Rpb24geG1sX3diKHgsIGlkeCkge1xuXHRcdHZhciB5Lyo6YW55Ki8gPSBwYXJzZXhtbHRhZyh4KTtcblx0XHRzd2l0Y2goc3RyaXBfbnMoeVswXSkpIHtcblx0XHRcdGNhc2UgJzw/eG1sJzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMjcgd29ya2Jvb2sgQ1RfV29ya2Jvb2sgMSAqL1xuXHRcdFx0Y2FzZSAnPHdvcmtib29rJzpcblx0XHRcdFx0aWYoeC5tYXRjaCh3Ym5zcmVnZXgpKSB4bWxucyA9IFwieG1sbnNcIiArIHgubWF0Y2goLzwoXFx3Kyk6LylbMV07XG5cdFx0XHRcdHdiLnhtbG5zID0geVt4bWxuc107XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC93b3JrYm9vaz4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4xMyBmaWxlVmVyc2lvbiBDVF9GaWxlVmVyc2lvbiA/ICovXG5cdFx0XHRjYXNlICc8ZmlsZVZlcnNpb24nOiBkZWxldGUgeVswXTsgd2IuQXBwVmVyc2lvbiA9IHk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGZpbGVWZXJzaW9uLz4nOiBjYXNlICc8L2ZpbGVWZXJzaW9uPic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjEyIGZpbGVTaGFyaW5nIENUX0ZpbGVTaGFyaW5nID8gKi9cblx0XHRcdGNhc2UgJzxmaWxlU2hhcmluZyc6XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGZpbGVTaGFyaW5nLz4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4yOCB3b3JrYm9va1ByIENUX1dvcmtib29rUHIgPyAqL1xuXHRcdFx0Y2FzZSAnPHdvcmtib29rUHInOlxuXHRcdFx0Y2FzZSAnPHdvcmtib29rUHIvPic6XG5cdFx0XHRcdFdCUHJvcHNEZWYuZm9yRWFjaChmdW5jdGlvbih3KSB7XG5cdFx0XHRcdFx0aWYoeVt3WzBdXSA9PSBudWxsKSByZXR1cm47XG5cdFx0XHRcdFx0c3dpdGNoKHdbMl0pIHtcblx0XHRcdFx0XHRcdGNhc2UgXCJib29sXCI6IHdiLldCUHJvcHNbd1swXV0gPSBwYXJzZXhtbGJvb2woeVt3WzBdXSk7IGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSBcImludFwiOiB3Yi5XQlByb3BzW3dbMF1dID0gcGFyc2VJbnQoeVt3WzBdXSwgMTApOyBicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6IHdiLldCUHJvcHNbd1swXV0gPSB5W3dbMF1dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmKHkuY29kZU5hbWUpIHdiLldCUHJvcHMuQ29kZU5hbWUgPSB1dGY4cmVhZCh5LmNvZGVOYW1lKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc8L3dvcmtib29rUHI+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMjkgd29ya2Jvb2tQcm90ZWN0aW9uIENUX1dvcmtib29rUHJvdGVjdGlvbiA/ICovXG5cdFx0XHRjYXNlICc8d29ya2Jvb2tQcm90ZWN0aW9uJzpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICc8d29ya2Jvb2tQcm90ZWN0aW9uLz4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4xICBib29rVmlld3MgQ1RfQm9va1ZpZXdzID8gKi9cblx0XHRcdGNhc2UgJzxib29rVmlld3MnOiBjYXNlICc8Ym9va1ZpZXdzPic6IGNhc2UgJzwvYm9va1ZpZXdzPic6IGJyZWFrO1xuXHRcdFx0LyogMTguMi4zMCAgIHdvcmtib29rVmlldyBDVF9Cb29rVmlldyArICovXG5cdFx0XHRjYXNlICc8d29ya2Jvb2tWaWV3JzogY2FzZSAnPHdvcmtib29rVmlldy8+JzogZGVsZXRlIHlbMF07IHdiLldCVmlldy5wdXNoKHkpOyBicmVhaztcblx0XHRcdGNhc2UgJzwvd29ya2Jvb2tWaWV3Pic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjIwIHNoZWV0cyBDVF9TaGVldHMgMSAqL1xuXHRcdFx0Y2FzZSAnPHNoZWV0cyc6IGNhc2UgJzxzaGVldHM+JzogY2FzZSAnPC9zaGVldHM+JzogYnJlYWs7IC8vIGFnZ3JlZ2F0ZSBzaGVldFxuXHRcdFx0LyogMTguMi4xOSAgIHNoZWV0IENUX1NoZWV0ICsgKi9cblx0XHRcdGNhc2UgJzxzaGVldCc6XG5cdFx0XHRcdHN3aXRjaCh5LnN0YXRlKSB7XG5cdFx0XHRcdFx0Y2FzZSBcImhpZGRlblwiOiB5LkhpZGRlbiA9IDE7IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgXCJ2ZXJ5SGlkZGVuXCI6IHkuSGlkZGVuID0gMjsgYnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDogeS5IaWRkZW4gPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRlbGV0ZSB5LnN0YXRlO1xuXHRcdFx0XHR5Lm5hbWUgPSB1bmVzY2FwZXhtbCh1dGY4cmVhZCh5Lm5hbWUpKTtcblx0XHRcdFx0ZGVsZXRlIHlbMF07IHdiLlNoZWV0cy5wdXNoKHkpOyBicmVhaztcblx0XHRcdGNhc2UgJzwvc2hlZXQ+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMTUgZnVuY3Rpb25Hcm91cHMgQ1RfRnVuY3Rpb25Hcm91cHMgPyAqL1xuXHRcdFx0Y2FzZSAnPGZ1bmN0aW9uR3JvdXBzJzogY2FzZSAnPGZ1bmN0aW9uR3JvdXBzLz4nOiBicmVhaztcblx0XHRcdC8qIDE4LjIuMTQgICBmdW5jdGlvbkdyb3VwIENUX0Z1bmN0aW9uR3JvdXAgKyAqL1xuXHRcdFx0Y2FzZSAnPGZ1bmN0aW9uR3JvdXAnOiBicmVhaztcblxuXHRcdFx0LyogMTguMi45ICBleHRlcm5hbFJlZmVyZW5jZXMgQ1RfRXh0ZXJuYWxSZWZlcmVuY2VzID8gKi9cblx0XHRcdGNhc2UgJzxleHRlcm5hbFJlZmVyZW5jZXMnOiBjYXNlICc8L2V4dGVybmFsUmVmZXJlbmNlcz4nOiBjYXNlICc8ZXh0ZXJuYWxSZWZlcmVuY2VzPic6IGJyZWFrO1xuXHRcdFx0LyogMTguMi44ICAgIGV4dGVybmFsUmVmZXJlbmNlIENUX0V4dGVybmFsUmVmZXJlbmNlICsgKi9cblx0XHRcdGNhc2UgJzxleHRlcm5hbFJlZmVyZW5jZSc6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjYgIGRlZmluZWROYW1lcyBDVF9EZWZpbmVkTmFtZXMgPyAqL1xuXHRcdFx0Y2FzZSAnPGRlZmluZWROYW1lcy8+JzogYnJlYWs7XG5cdFx0XHRjYXNlICc8ZGVmaW5lZE5hbWVzPic6IGNhc2UgJzxkZWZpbmVkTmFtZXMnOiBwYXNzPXRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPC9kZWZpbmVkTmFtZXM+JzogcGFzcz1mYWxzZTsgYnJlYWs7XG5cdFx0XHQvKiAxOC4yLjUgICAgZGVmaW5lZE5hbWUgQ1RfRGVmaW5lZE5hbWUgKyAqL1xuXHRcdFx0Y2FzZSAnPGRlZmluZWROYW1lJzoge1xuXHRcdFx0XHRkbmFtZSA9IHt9O1xuXHRcdFx0XHRkbmFtZS5OYW1lID0gdXRmOHJlYWQoeS5uYW1lKTtcblx0XHRcdFx0aWYoeS5jb21tZW50KSBkbmFtZS5Db21tZW50ID0geS5jb21tZW50O1xuXHRcdFx0XHRpZih5LmxvY2FsU2hlZXRJZCkgZG5hbWUuU2hlZXQgPSAreS5sb2NhbFNoZWV0SWQ7XG5cdFx0XHRcdGlmKHBhcnNleG1sYm9vbCh5LmhpZGRlbnx8XCIwXCIpKSBkbmFtZS5IaWRkZW4gPSB0cnVlO1xuXHRcdFx0XHRkbnN0YXJ0ID0gaWR4ICsgeC5sZW5ndGg7XG5cdFx0XHR9XHRicmVhaztcblx0XHRcdGNhc2UgJzwvZGVmaW5lZE5hbWU+Jzoge1xuXHRcdFx0XHRkbmFtZS5SZWYgPSB1bmVzY2FwZXhtbCh1dGY4cmVhZChkYXRhLnNsaWNlKGRuc3RhcnQsIGlkeCkpKTtcblx0XHRcdFx0d2IuTmFtZXMucHVzaChkbmFtZSk7XG5cdFx0XHR9IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPGRlZmluZWROYW1lLz4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4yICBjYWxjUHIgQ1RfQ2FsY1ByID8gKi9cblx0XHRcdGNhc2UgJzxjYWxjUHInOiBkZWxldGUgeVswXTsgd2IuQ2FsY1ByID0geTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8Y2FsY1ByLz4nOiBkZWxldGUgeVswXTsgd2IuQ2FsY1ByID0geTsgYnJlYWs7XG5cdFx0XHRjYXNlICc8L2NhbGNQcj4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4xNiBvbGVTaXplIENUX09sZVNpemUgPyAocmVmIHJlcXVpcmVkKSAqL1xuXHRcdFx0Y2FzZSAnPG9sZVNpemUnOiBicmVhaztcblxuXHRcdFx0LyogMTguMi40ICBjdXN0b21Xb3JrYm9va1ZpZXdzIENUX0N1c3RvbVdvcmtib29rVmlld3MgPyAqL1xuXHRcdFx0Y2FzZSAnPGN1c3RvbVdvcmtib29rVmlld3M+JzogY2FzZSAnPC9jdXN0b21Xb3JrYm9va1ZpZXdzPic6IGNhc2UgJzxjdXN0b21Xb3JrYm9va1ZpZXdzJzogYnJlYWs7XG5cdFx0XHQvKiAxOC4yLjMgIGN1c3RvbVdvcmtib29rVmlldyBDVF9DdXN0b21Xb3JrYm9va1ZpZXcgKyAqL1xuXHRcdFx0Y2FzZSAnPGN1c3RvbVdvcmtib29rVmlldyc6IGNhc2UgJzwvY3VzdG9tV29ya2Jvb2tWaWV3Pic6IGJyZWFrO1xuXG5cdFx0XHQvKiAxOC4yLjE4IHBpdm90Q2FjaGVzIENUX1Bpdm90Q2FjaGVzID8gKi9cblx0XHRcdGNhc2UgJzxwaXZvdENhY2hlcz4nOiBjYXNlICc8L3Bpdm90Q2FjaGVzPic6IGNhc2UgJzxwaXZvdENhY2hlcyc6IGJyZWFrO1xuXHRcdFx0LyogMTguMi4xNyBwaXZvdENhY2hlIENUX1Bpdm90Q2FjaGUgPyAqL1xuXHRcdFx0Y2FzZSAnPHBpdm90Q2FjaGUnOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4yMSBzbWFydFRhZ1ByIENUX1NtYXJ0VGFnUHIgPyAqL1xuXHRcdFx0Y2FzZSAnPHNtYXJ0VGFnUHInOiBjYXNlICc8c21hcnRUYWdQci8+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMjMgc21hcnRUYWdUeXBlcyBDVF9TbWFydFRhZ1R5cGVzID8gKi9cblx0XHRcdGNhc2UgJzxzbWFydFRhZ1R5cGVzJzogY2FzZSAnPHNtYXJ0VGFnVHlwZXM+JzogY2FzZSAnPC9zbWFydFRhZ1R5cGVzPic6IGJyZWFrO1xuXHRcdFx0LyogMTguMi4yMiBzbWFydFRhZ1R5cGUgQ1RfU21hcnRUYWdUeXBlID8gKi9cblx0XHRcdGNhc2UgJzxzbWFydFRhZ1R5cGUnOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4yNCB3ZWJQdWJsaXNoaW5nIENUX1dlYlB1Ymxpc2hpbmcgPyAqL1xuXHRcdFx0Y2FzZSAnPHdlYlB1Ymxpc2hpbmcnOiBjYXNlICc8d2ViUHVibGlzaGluZy8+JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMTEgZmlsZVJlY292ZXJ5UHIgQ1RfRmlsZVJlY292ZXJ5UHIgPyAqL1xuXHRcdFx0Y2FzZSAnPGZpbGVSZWNvdmVyeVByJzogY2FzZSAnPGZpbGVSZWNvdmVyeVByLz4nOiBicmVhaztcblxuXHRcdFx0LyogMTguMi4yNiB3ZWJQdWJsaXNoT2JqZWN0cyBDVF9XZWJQdWJsaXNoT2JqZWN0cyA/ICovXG5cdFx0XHRjYXNlICc8d2ViUHVibGlzaE9iamVjdHM+JzogY2FzZSAnPHdlYlB1Ymxpc2hPYmplY3RzJzogY2FzZSAnPC93ZWJQdWJsaXNoT2JqZWN0cz4nOiBicmVhaztcblx0XHRcdC8qIDE4LjIuMjUgd2ViUHVibGlzaE9iamVjdCBDVF9XZWJQdWJsaXNoT2JqZWN0ID8gKi9cblx0XHRcdGNhc2UgJzx3ZWJQdWJsaXNoT2JqZWN0JzogYnJlYWs7XG5cblx0XHRcdC8qIDE4LjIuMTAgZXh0THN0IENUX0V4dGVuc2lvbkxpc3QgPyAqL1xuXHRcdFx0Y2FzZSAnPGV4dExzdCc6IGNhc2UgJzxleHRMc3Q+JzogY2FzZSAnPC9leHRMc3Q+JzogY2FzZSAnPGV4dExzdC8+JzogYnJlYWs7XG5cdFx0XHQvKiAxOC4yLjcgIGV4dCBDVF9FeHRlbnNpb24gKyAqL1xuXHRcdFx0Y2FzZSAnPGV4dCc6IHBhc3M9dHJ1ZTsgYnJlYWs7IC8vVE9ETzogY2hlY2sgd2l0aCB2ZXJzaW9ucyBvZiBleGNlbFxuXHRcdFx0Y2FzZSAnPC9leHQ+JzogcGFzcz1mYWxzZTsgYnJlYWs7XG5cblx0XHRcdC8qIE90aGVycyAqL1xuXHRcdFx0Y2FzZSAnPEFyY2hJRCc6IGJyZWFrO1xuXHRcdFx0Y2FzZSAnPEFsdGVybmF0ZUNvbnRlbnQnOlxuXHRcdFx0Y2FzZSAnPEFsdGVybmF0ZUNvbnRlbnQ+JzogcGFzcz10cnVlOyBicmVhaztcblx0XHRcdGNhc2UgJzwvQWx0ZXJuYXRlQ29udGVudD4nOiBwYXNzPWZhbHNlOyBicmVhaztcblxuXHRcdFx0LyogVE9ETyAqL1xuXHRcdFx0Y2FzZSAnPHJldmlzaW9uUHRyJzogYnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6IGlmKCFwYXNzICYmIG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCAnICsgeVswXSArICcgaW4gd29ya2Jvb2snKTtcblx0XHR9XG5cdFx0cmV0dXJuIHg7XG5cdH0pO1xuXHRpZihYTUxOU19tYWluLmluZGV4T2Yod2IueG1sbnMpID09PSAtMSkgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biBOYW1lc3BhY2U6IFwiICsgd2IueG1sbnMpO1xuXG5cdHBhcnNlX3diX2RlZmF1bHRzKHdiKTtcblxuXHRyZXR1cm4gd2I7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3diX3htbCh3Yi8qOldvcmtib29rKi8vKjo6LCBvcHRzOj9Xcml0ZU9wdHMqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBvID0gW1hNTF9IRUFERVJdO1xuXHRvW28ubGVuZ3RoXSA9IHdyaXRleHRhZygnd29ya2Jvb2snLCBudWxsLCB7XG5cdFx0J3htbG5zJzogWE1MTlNfbWFpblswXSxcblx0XHQvLyd4bWxuczpteCc6IFhNTE5TLm14LFxuXHRcdC8vJ3htbG5zOnMnOiBYTUxOU19tYWluWzBdLFxuXHRcdCd4bWxuczpyJzogWE1MTlMuclxuXHR9KTtcblxuXHR2YXIgd3JpdGVfbmFtZXMgPSAod2IuV29ya2Jvb2sgJiYgKHdiLldvcmtib29rLk5hbWVzfHxbXSkubGVuZ3RoID4gMCk7XG5cblx0LyogZmlsZVZlcnNpb24gKi9cblx0LyogZmlsZVNoYXJpbmcgKi9cblxuXHR2YXIgd29ya2Jvb2tQci8qOmFueSovID0gKHtjb2RlTmFtZTpcIlRoaXNXb3JrYm9va1wifS8qOmFueSovKTtcblx0aWYod2IuV29ya2Jvb2sgJiYgd2IuV29ya2Jvb2suV0JQcm9wcykge1xuXHRcdFdCUHJvcHNEZWYuZm9yRWFjaChmdW5jdGlvbih4KSB7XG5cdFx0XHQvKjo6IGlmKCF3Yi5Xb3JrYm9vayB8fCAhd2IuV29ya2Jvb2suV0JQcm9wcykgdGhyb3cgXCJ1bnJlYWNoYWJsZVwiOyAqL1xuXHRcdFx0aWYoKHdiLldvcmtib29rLldCUHJvcHNbeFswXV0vKjphbnkqLykgPT0gbnVsbCkgcmV0dXJuO1xuXHRcdFx0aWYoKHdiLldvcmtib29rLldCUHJvcHNbeFswXV0vKjphbnkqLykgPT0geFsxXSkgcmV0dXJuO1xuXHRcdFx0d29ya2Jvb2tQclt4WzBdXSA9ICh3Yi5Xb3JrYm9vay5XQlByb3BzW3hbMF1dLyo6YW55Ki8pO1xuXHRcdH0pO1xuXHRcdC8qOjogaWYoIXdiLldvcmtib29rIHx8ICF3Yi5Xb3JrYm9vay5XQlByb3BzKSB0aHJvdyBcInVucmVhY2hhYmxlXCI7ICovXG5cdFx0aWYod2IuV29ya2Jvb2suV0JQcm9wcy5Db2RlTmFtZSkgeyB3b3JrYm9va1ByLmNvZGVOYW1lID0gd2IuV29ya2Jvb2suV0JQcm9wcy5Db2RlTmFtZTsgZGVsZXRlIHdvcmtib29rUHIuQ29kZU5hbWU7IH1cblx0fVxuXHRvW28ubGVuZ3RoXSA9ICh3cml0ZXh0YWcoJ3dvcmtib29rUHInLCBudWxsLCB3b3JrYm9va1ByKSk7XG5cblx0Lyogd29ya2Jvb2tQcm90ZWN0aW9uICovXG5cblx0dmFyIHNoZWV0cyA9IHdiLldvcmtib29rICYmIHdiLldvcmtib29rLlNoZWV0cyB8fCBbXTtcblx0dmFyIGkgPSAwO1xuXG5cdC8qIGJvb2tWaWV3cyBvbmx5IHdyaXR0ZW4gaWYgZmlyc3Qgd29ya3NoZWV0IGlzIGhpZGRlbiAqL1xuXHRpZihzaGVldHMgJiYgc2hlZXRzWzBdICYmICEhc2hlZXRzWzBdLkhpZGRlbikge1xuXHRcdG9bby5sZW5ndGhdID0gXCI8Ym9va1ZpZXdzPlwiO1xuXHRcdGZvcihpID0gMDsgaSAhPSB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0XHRpZighc2hlZXRzW2ldKSBicmVhaztcblx0XHRcdGlmKCFzaGVldHNbaV0uSGlkZGVuKSBicmVhaztcblx0XHR9XG5cdFx0aWYoaSA9PSB3Yi5TaGVldE5hbWVzLmxlbmd0aCkgaSA9IDA7XG5cdFx0b1tvLmxlbmd0aF0gPSAnPHdvcmtib29rVmlldyBmaXJzdFNoZWV0PVwiJyArIGkgKyAnXCIgYWN0aXZlVGFiPVwiJyArIGkgKyAnXCIvPic7XG5cdFx0b1tvLmxlbmd0aF0gPSBcIjwvYm9va1ZpZXdzPlwiO1xuXHR9XG5cblx0b1tvLmxlbmd0aF0gPSBcIjxzaGVldHM+XCI7XG5cdGZvcihpID0gMDsgaSAhPSB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIHNodCA9ICh7bmFtZTplc2NhcGV4bWwod2IuU2hlZXROYW1lc1tpXS5zbGljZSgwLDMxKSl9Lyo6YW55Ki8pO1xuXHRcdHNodC5zaGVldElkID0gXCJcIisoaSsxKTtcblx0XHRzaHRbXCJyOmlkXCJdID0gXCJySWRcIisoaSsxKTtcblx0XHRpZihzaGVldHNbaV0pIHN3aXRjaChzaGVldHNbaV0uSGlkZGVuKSB7XG5cdFx0XHRjYXNlIDE6IHNodC5zdGF0ZSA9IFwiaGlkZGVuXCI7IGJyZWFrO1xuXHRcdFx0Y2FzZSAyOiBzaHQuc3RhdGUgPSBcInZlcnlIaWRkZW5cIjsgYnJlYWs7XG5cdFx0fVxuXHRcdG9bby5sZW5ndGhdID0gKHdyaXRleHRhZygnc2hlZXQnLG51bGwsc2h0KSk7XG5cdH1cblx0b1tvLmxlbmd0aF0gPSBcIjwvc2hlZXRzPlwiO1xuXG5cdC8qIGZ1bmN0aW9uR3JvdXBzICovXG5cdC8qIGV4dGVybmFsUmVmZXJlbmNlcyAqL1xuXG5cdGlmKHdyaXRlX25hbWVzKSB7XG5cdFx0b1tvLmxlbmd0aF0gPSBcIjxkZWZpbmVkTmFtZXM+XCI7XG5cdFx0aWYod2IuV29ya2Jvb2sgJiYgd2IuV29ya2Jvb2suTmFtZXMpIHdiLldvcmtib29rLk5hbWVzLmZvckVhY2goZnVuY3Rpb24obikge1xuXHRcdFx0dmFyIGQvKjphbnkqLyA9IHtuYW1lOm4uTmFtZX07XG5cdFx0XHRpZihuLkNvbW1lbnQpIGQuY29tbWVudCA9IG4uQ29tbWVudDtcblx0XHRcdGlmKG4uU2hlZXQgIT0gbnVsbCkgZC5sb2NhbFNoZWV0SWQgPSBcIlwiK24uU2hlZXQ7XG5cdFx0XHRpZihuLkhpZGRlbikgZC5oaWRkZW4gPSBcIjFcIjtcblx0XHRcdGlmKCFuLlJlZikgcmV0dXJuO1xuXHRcdFx0b1tvLmxlbmd0aF0gPSB3cml0ZXh0YWcoJ2RlZmluZWROYW1lJywgZXNjYXBleG1sKG4uUmVmKSwgZCk7XG5cdFx0fSk7XG5cdFx0b1tvLmxlbmd0aF0gPSBcIjwvZGVmaW5lZE5hbWVzPlwiO1xuXHR9XG5cblx0LyogY2FsY1ByICovXG5cdC8qIG9sZVNpemUgKi9cblx0LyogY3VzdG9tV29ya2Jvb2tWaWV3cyAqL1xuXHQvKiBwaXZvdENhY2hlcyAqL1xuXHQvKiBzbWFydFRhZ1ByICovXG5cdC8qIHNtYXJ0VGFnVHlwZXMgKi9cblx0Lyogd2ViUHVibGlzaGluZyAqL1xuXHQvKiBmaWxlUmVjb3ZlcnlQciAqL1xuXHQvKiB3ZWJQdWJsaXNoT2JqZWN0cyAqL1xuXHQvKiBleHRMc3QgKi9cblxuXHRpZihvLmxlbmd0aD4yKXsgb1tvLmxlbmd0aF0gPSAnPC93b3JrYm9vaz4nOyBvWzFdPW9bMV0ucmVwbGFjZShcIi8+XCIsXCI+XCIpOyB9XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG4vKiBbTVMtWExTQl0gMi40LjMwNCBCcnRCdW5kbGVTaCAqL1xuZnVuY3Rpb24gcGFyc2VfQnJ0QnVuZGxlU2goZGF0YSwgbGVuZ3RoLyo6bnVtYmVyKi8pIHtcblx0dmFyIHogPSB7fTtcblx0ei5IaWRkZW4gPSBkYXRhLnJlYWRfc2hpZnQoNCk7IC8vaHNTdGF0ZSBTVF9TaGVldFN0YXRlXG5cdHouaVRhYklEID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHR6LnN0clJlbElEID0gcGFyc2VfUmVsSUQoZGF0YSxsZW5ndGgtOCk7XG5cdHoubmFtZSA9IHBhcnNlX1hMV2lkZVN0cmluZyhkYXRhKTtcblx0cmV0dXJuIHo7XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRCdW5kbGVTaChkYXRhLCBvKSB7XG5cdGlmKCFvKSBvID0gbmV3X2J1ZigxMjcpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIGRhdGEuSGlkZGVuKTtcblx0by53cml0ZV9zaGlmdCg0LCBkYXRhLmlUYWJJRCk7XG5cdHdyaXRlX1JlbElEKGRhdGEuc3RyUmVsSUQsIG8pO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcoZGF0YS5uYW1lLnNsaWNlKDAsMzEpLCBvKTtcblx0cmV0dXJuIG8ubGVuZ3RoID4gby5sID8gby5zbGljZSgwLCBvLmwpIDogbztcbn1cblxuLyogW01TLVhMU0JdIDIuNC44MTUgQnJ0V2JQcm9wICovXG5mdW5jdGlvbiBwYXJzZV9CcnRXYlByb3AoZGF0YSwgbGVuZ3RoKS8qOldCUHJvcHMqLyB7XG5cdHZhciBvLyo6V0JQcm9wcyovID0gKHt9Lyo6YW55Ki8pO1xuXHR2YXIgZmxhZ3MgPSBkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdG8uZGVmYXVsdFRoZW1lVmVyc2lvbiA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0dmFyIHN0ck5hbWUgPSAobGVuZ3RoID4gOCkgPyBwYXJzZV9YTFdpZGVTdHJpbmcoZGF0YSkgOiBcIlwiO1xuXHRpZihzdHJOYW1lLmxlbmd0aCA+IDApIG8uQ29kZU5hbWUgPSBzdHJOYW1lO1xuXHRvLmF1dG9Db21wcmVzc1BpY3R1cmVzID0gISEoZmxhZ3MgJiAweDEwMDAwKTtcblx0by5iYWNrdXBGaWxlID0gISEoZmxhZ3MgJiAweDQwKTtcblx0by5jaGVja0NvbXBhdGliaWxpdHkgPSAhIShmbGFncyAmIDB4MTAwMCk7XG5cdG8uZGF0ZTE5MDQgPSAhIShmbGFncyAmIDB4MDEpO1xuXHRvLmZpbHRlclByaXZhY3kgPSAhIShmbGFncyAmIDB4MDgpO1xuXHRvLmhpZGVQaXZvdEZpZWxkTGlzdCA9ICEhKGZsYWdzICYgMHg0MDApO1xuXHRvLnByb21wdGVkU29sdXRpb25zID0gISEoZmxhZ3MgJiAweDEwKTtcblx0by5wdWJsaXNoSXRlbXMgPSAhIShmbGFncyAmIDB4ODAwKTtcblx0by5yZWZyZXNoQWxsQ29ubmVjdGlvbnMgPSAhIShmbGFncyAmIDB4NDAwMDApO1xuXHRvLnNhdmVFeHRlcm5hbExpbmtWYWx1ZXMgPSAhIShmbGFncyAmIDB4ODApO1xuXHRvLnNob3dCb3JkZXJVbnNlbGVjdGVkVGFibGVzID0gISEoZmxhZ3MgJiAweDA0KTtcblx0by5zaG93SW5rQW5ub3RhdGlvbiA9ICEhKGZsYWdzICYgMHgyMCk7XG5cdG8uc2hvd09iamVjdHMgPSBbXCJhbGxcIiwgXCJwbGFjZWhvbGRlcnNcIiwgXCJub25lXCJdWyhmbGFncyA+PiAxMykgJiAweDAzXTtcblx0by5zaG93UGl2b3RDaGFydEZpbHRlciA9ICEhKGZsYWdzICYgMHg4MDAwKTtcblx0by51cGRhdGVMaW5rcyA9IFtcInVzZXJTZXRcIiwgXCJuZXZlclwiLCBcImFsd2F5c1wiXVsoZmxhZ3MgPj4gOCkgJiAweDAzXTtcblx0cmV0dXJuIG87XG59XG5mdW5jdGlvbiB3cml0ZV9CcnRXYlByb3AoZGF0YS8qOj9XQlByb3BzKi8sIG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDcyKTtcblx0dmFyIGZsYWdzID0gMDtcblx0aWYoZGF0YSkge1xuXHRcdC8qIFRPRE86IG1pcnJvciBwYXJzZV9CcnRXYlByb3AgZmllbGRzICovXG5cdFx0aWYoZGF0YS5maWx0ZXJQcml2YWN5KSBmbGFncyB8PSAweDA4O1xuXHR9XG5cdG8ud3JpdGVfc2hpZnQoNCwgZmxhZ3MpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHR3cml0ZV9YTFNCQ29kZU5hbWUoZGF0YSAmJiBkYXRhLkNvZGVOYW1lIHx8IFwiVGhpc1dvcmtib29rXCIsIG8pO1xuXHRyZXR1cm4gby5zbGljZSgwLCBvLmwpO1xufVxuXG5mdW5jdGlvbiBwYXJzZV9CcnRGUlRBcmNoSUQkKGRhdGEsIGxlbmd0aCkge1xuXHR2YXIgbyA9IHt9O1xuXHRkYXRhLnJlYWRfc2hpZnQoNCk7XG5cdG8uQXJjaElEID0gZGF0YS5yZWFkX3NoaWZ0KDQpO1xuXHRkYXRhLmwgKz0gbGVuZ3RoIC0gODtcblx0cmV0dXJuIG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuNjg3IEJydE5hbWUgKi9cbmZ1bmN0aW9uIHBhcnNlX0JydE5hbWUoZGF0YSwgbGVuZ3RoLCBvcHRzKSB7XG5cdHZhciBlbmQgPSBkYXRhLmwgKyBsZW5ndGg7XG5cdGRhdGEubCArPSA0OyAvL3ZhciBmbGFncyA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0ZGF0YS5sICs9IDE7IC8vdmFyIGNoS2V5ID0gZGF0YS5yZWFkX3NoaWZ0KDEpO1xuXHR2YXIgaXRhYiA9IGRhdGEucmVhZF9zaGlmdCg0KTtcblx0dmFyIG5hbWUgPSBwYXJzZV9YTE5hbWVXaWRlU3RyaW5nKGRhdGEpO1xuXHR2YXIgZm9ybXVsYSA9IHBhcnNlX1hMU0JOYW1lUGFyc2VkRm9ybXVsYShkYXRhLCAwLCBvcHRzKTtcblx0dmFyIGNvbW1lbnQgPSBwYXJzZV9YTE51bGxhYmxlV2lkZVN0cmluZyhkYXRhKTtcblx0Ly9pZigwIC8qIGZQcm9jICovKSB7XG5cdFx0Ly8gdW51c2Vkc3RyaW5nMTogWExOdWxsYWJsZVdpZGVTdHJpbmdcblx0XHQvLyBkZXNjcmlwdGlvbjogWExOdWxsYWJsZVdpZGVTdHJpbmdcblx0XHQvLyBoZWxwVG9waWM6IFhMTnVsbGFibGVXaWRlU3RyaW5nXG5cdFx0Ly8gdW51c2Vkc3RyaW5nMjogWExOdWxsYWJsZVdpZGVTdHJpbmdcblx0Ly99XG5cdGRhdGEubCA9IGVuZDtcblx0dmFyIG91dCA9ICh7TmFtZTpuYW1lLCBQdGc6Zm9ybXVsYX0vKjphbnkqLyk7XG5cdGlmKGl0YWIgPCAweEZGRkZGRkYpIG91dC5TaGVldCA9IGl0YWI7XG5cdGlmKGNvbW1lbnQpIG91dC5Db21tZW50ID0gY29tbWVudDtcblx0cmV0dXJuIG91dDtcbn1cblxuLyogW01TLVhMU0JdIDIuMS43LjYxIFdvcmtib29rICovXG5mdW5jdGlvbiBwYXJzZV93Yl9iaW4oZGF0YSwgb3B0cykvKjpXb3JrYm9va0ZpbGUqLyB7XG5cdHZhciB3YiA9IHsgQXBwVmVyc2lvbjp7fSwgV0JQcm9wczp7fSwgV0JWaWV3OltdLCBTaGVldHM6W10sIENhbGNQcjp7fSwgeG1sbnM6IFwiXCIgfTtcblx0dmFyIHN0YXRlLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdHZhciBwYXNzID0gZmFsc2U7XG5cblx0aWYoIW9wdHMpIG9wdHMgPSB7fTtcblx0b3B0cy5iaWZmID0gMTI7XG5cblx0dmFyIE5hbWVzID0gW107XG5cdHZhciBzdXBib29rcyA9IChbW11dLyo6YW55Ki8pO1xuXHRzdXBib29rcy5TaGVldE5hbWVzID0gW107XG5cdHN1cGJvb2tzLlhUSSA9IFtdO1xuXG5cdFhMU0JSZWNvcmRFbnVtWzB4MDAxMF0gPSB7IG46XCJCcnRGUlRBcmNoSUQkXCIsIGY6cGFyc2VfQnJ0RlJUQXJjaElEJCB9O1xuXG5cdHJlY29yZGhvcHBlcihkYXRhLCBmdW5jdGlvbiBob3BwZXJfd2IodmFsLCBSLCBSVCkge1xuXHRcdHN3aXRjaChSVCkge1xuXHRcdFx0Y2FzZSAweDAwOUM6IC8qICdCcnRCdW5kbGVTaCcgKi9cblx0XHRcdFx0c3VwYm9va3MuU2hlZXROYW1lcy5wdXNoKHZhbC5uYW1lKTtcblx0XHRcdFx0d2IuU2hlZXRzLnB1c2godmFsKTsgYnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMDk5OiAvKiAnQnJ0V2JQcm9wJyAqL1xuXHRcdFx0XHR3Yi5XQlByb3BzID0gdmFsOyBicmVhaztcblxuXHRcdFx0Y2FzZSAweDAwMjc6IC8qICdCcnROYW1lJyAqL1xuXHRcdFx0XHRpZih2YWwuU2hlZXQgIT0gbnVsbCkgb3B0cy5TSUQgPSB2YWwuU2hlZXQ7XG5cdFx0XHRcdHZhbC5SZWYgPSBzdHJpbmdpZnlfZm9ybXVsYSh2YWwuUHRnLCBudWxsLCBudWxsLCBzdXBib29rcywgb3B0cyk7XG5cdFx0XHRcdGRlbGV0ZSBvcHRzLlNJRDtcblx0XHRcdFx0ZGVsZXRlIHZhbC5QdGc7XG5cdFx0XHRcdE5hbWVzLnB1c2godmFsKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDQwQzogLyogJ0JydE5hbWVFeHQnICovIGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDE2NTogLyogJ0JydFN1cFNlbGYnICovXG5cdFx0XHRjYXNlIDB4MDE2NjogLyogJ0JydFN1cFNhbWUnICovXG5cdFx0XHRjYXNlIDB4MDE2MzogLyogJ0JydFN1cEJvb2tTcmMnICovXG5cdFx0XHRjYXNlIDB4MDI5QjogLyogJ0JydFN1cEFkZGluJyAqL1xuXHRcdFx0XHRpZighc3VwYm9va3NbMF0ubGVuZ3RoKSBzdXBib29rc1swXSA9IFtSVCwgdmFsXTtcblx0XHRcdFx0ZWxzZSBzdXBib29rcy5wdXNoKFtSVCwgdmFsXSk7XG5cdFx0XHRcdHN1cGJvb2tzW3N1cGJvb2tzLmxlbmd0aCAtIDFdLlhUSSA9IFtdO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgMHgwMTZBOiAvKiAnQnJ0RXh0ZXJuU2hlZXQnICovXG5cdFx0XHRcdGlmKHN1cGJvb2tzLmxlbmd0aCA9PT0gMCkgeyBzdXBib29rc1swXSA9IFtdOyBzdXBib29rc1swXS5YVEkgPSBbXTsgfVxuXHRcdFx0XHRzdXBib29rc1tzdXBib29rcy5sZW5ndGggLSAxXS5YVEkgPSBzdXBib29rc1tzdXBib29rcy5sZW5ndGggLSAxXS5YVEkuY29uY2F0KHZhbCk7XG5cdFx0XHRcdHN1cGJvb2tzLlhUSSA9IHN1cGJvb2tzLlhUSS5jb25jYXQodmFsKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIDB4MDE2OTogLyogJ0JydFBsYWNlaG9sZGVyTmFtZScgKi9cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwODE3OiAvKiAnQnJ0QWJzUGF0aDE1JyAqL1xuXHRcdFx0Y2FzZSAweDAwOUU6IC8qICdCcnRCb29rVmlldycgKi9cblx0XHRcdGNhc2UgMHgwMDhGOiAvKiAnQnJ0QmVnaW5CdW5kbGVTaHMnICovXG5cdFx0XHRjYXNlIDB4MDI5ODogLyogJ0JydEJlZ2luRm5Hcm91cCcgKi9cblx0XHRcdGNhc2UgMHgwMTYxOiAvKiAnQnJ0QmVnaW5FeHRlcm5hbHMnICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHQvKiBjYXNlICdCcnRNb2RlbFRpbWVHcm91cGluZ0NhbGNDb2wnICovXG5cdFx0XHRjYXNlIDB4MEMwMDogLyogJ0JydFVpZCcgKi9cblx0XHRcdGNhc2UgMHgwQzAxOiAvKiAnQnJ0UmV2aXNpb25QdHInICovXG5cdFx0XHRjYXNlIDB4MDIxNjogLyogJ0JydEJvb2tQcm90ZWN0aW9uJyAqL1xuXHRcdFx0Y2FzZSAweDAyQTU6IC8qICdCcnRCb29rUHJvdGVjdGlvbklzbycgKi9cblx0XHRcdGNhc2UgMHgwMDlEOiAvKiAnQnJ0Q2FsY1Byb3AnICovXG5cdFx0XHRjYXNlIDB4MDI2MjogLyogJ0JydENyYXNoUmVjRXJyJyAqL1xuXHRcdFx0Y2FzZSAweDA4MDI6IC8qICdCcnREZWNvdXBsZWRQaXZvdENhY2hlSUQnICovXG5cdFx0XHRjYXNlIDB4MDA5QjogLyogJ0JydEZpbGVSZWNvdmVyJyAqL1xuXHRcdFx0Y2FzZSAweDAyMjQ6IC8qICdCcnRGaWxlU2hhcmluZycgKi9cblx0XHRcdGNhc2UgMHgwMkE0OiAvKiAnQnJ0RmlsZVNoYXJpbmdJc28nICovXG5cdFx0XHRjYXNlIDB4MDA4MDogLyogJ0JydEZpbGVWZXJzaW9uJyAqL1xuXHRcdFx0Y2FzZSAweDAyOTk6IC8qICdCcnRGbkdyb3VwJyAqL1xuXHRcdFx0Y2FzZSAweDA4NTA6IC8qICdCcnRNb2RlbFJlbGF0aW9uc2hpcCcgKi9cblx0XHRcdGNhc2UgMHgwODREOiAvKiAnQnJ0TW9kZWxUYWJsZScgKi9cblx0XHRcdGNhc2UgMHgwMjI1OiAvKiAnQnJ0T2xlU2l6ZScgKi9cblx0XHRcdGNhc2UgMHgwODA1OiAvKiAnQnJ0UGl2b3RUYWJsZVJlZicgKi9cblx0XHRcdGNhc2UgMHgwMjU0OiAvKiAnQnJ0U21hcnRUYWdUeXBlJyAqL1xuXHRcdFx0Y2FzZSAweDA4MUM6IC8qICdCcnRUYWJsZVNsaWNlckNhY2hlSUQnICovXG5cdFx0XHRjYXNlIDB4MDgxQjogLyogJ0JydFRhYmxlU2xpY2VyQ2FjaGVJRHMnICovXG5cdFx0XHRjYXNlIDB4MDgyMjogLyogJ0JydFRpbWVsaW5lQ2FjaGVQaXZvdENhY2hlSUQnICovXG5cdFx0XHRjYXNlIDB4MDE4RDogLyogJ0JydFVzZXJCb29rVmlldycgKi9cblx0XHRcdGNhc2UgMHgwMDlBOiAvKiAnQnJ0V2JGYWN0b2lkJyAqL1xuXHRcdFx0Y2FzZSAweDA0NUQ6IC8qICdCcnRXYlByb3AxNCcgKi9cblx0XHRcdGNhc2UgMHgwMjI5OiAvKiAnQnJ0V2ViT3B0JyAqL1xuXHRcdFx0Y2FzZSAweDA4MkI6IC8qICdCcnRXb3JrQm9va1ByMTUnICovXG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlIDB4MDAyMzogLyogJ0JydEZSVEJlZ2luJyAqL1xuXHRcdFx0XHRzdGF0ZS5wdXNoKFJUKTsgcGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjQ6IC8qICdCcnRGUlRFbmQnICovXG5cdFx0XHRcdHN0YXRlLnBvcCgpOyBwYXNzID0gZmFsc2U7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjU6IC8qICdCcnRBQ0JlZ2luJyAqL1xuXHRcdFx0XHRzdGF0ZS5wdXNoKFJUKTsgcGFzcyA9IHRydWU7IGJyZWFrO1xuXHRcdFx0Y2FzZSAweDAwMjY6IC8qICdCcnRBQ0VuZCcgKi9cblx0XHRcdFx0c3RhdGUucG9wKCk7IHBhc3MgPSBmYWxzZTsgYnJlYWs7XG5cblx0XHRcdGNhc2UgMHgwMDEwOiAvKiAnQnJ0RlJUQXJjaElEJCcgKi8gYnJlYWs7XG5cblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdGlmKFIuVCl7LyogZW1wdHkgKi99XG5cdFx0XHRcdGVsc2UgaWYoIXBhc3MgfHwgKG9wdHMuV1RGICYmIHN0YXRlW3N0YXRlLmxlbmd0aC0xXSAhPSAweDAwMjUgLyogQnJ0QUNCZWdpbiAqLyAmJiBzdGF0ZVtzdGF0ZS5sZW5ndGgtMV0gIT0gMHgwMDIzIC8qIEJydEZSVEJlZ2luICovKSkgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZWNvcmQgMHhcIiArIFJULnRvU3RyaW5nKDE2KSk7XG5cdFx0fVxuXHR9LCBvcHRzKTtcblxuXHRwYXJzZV93Yl9kZWZhdWx0cyh3Yik7XG5cblx0Ly8gJEZsb3dJZ25vcmVcblx0d2IuTmFtZXMgPSBOYW1lcztcblxuXHQod2IvKjphbnkqLykuc3VwYm9va3MgPSBzdXBib29rcztcblx0cmV0dXJuIHdiO1xufVxuXG5mdW5jdGlvbiB3cml0ZV9CVU5ETEVTSFMoYmEsIHdiLyo6Oiwgb3B0cyovKSB7XG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDhGIC8qIEJydEJlZ2luQnVuZGxlU2hzICovKTtcblx0Zm9yKHZhciBpZHggPSAwOyBpZHggIT0gd2IuU2hlZXROYW1lcy5sZW5ndGg7ICsraWR4KSB7XG5cdFx0dmFyIHZpeiA9IHdiLldvcmtib29rICYmIHdiLldvcmtib29rLlNoZWV0cyAmJiB3Yi5Xb3JrYm9vay5TaGVldHNbaWR4XSAmJiB3Yi5Xb3JrYm9vay5TaGVldHNbaWR4XS5IaWRkZW4gfHwgMDtcblx0XHR2YXIgZCA9IHsgSGlkZGVuOiB2aXosIGlUYWJJRDogaWR4KzEsIHN0clJlbElEOiAncklkJyArIChpZHgrMSksIG5hbWU6IHdiLlNoZWV0TmFtZXNbaWR4XSB9O1xuXHRcdHdyaXRlX3JlY29yZChiYSwgMHgwMDlDIC8qIEJydEJ1bmRsZVNoICovLCB3cml0ZV9CcnRCdW5kbGVTaChkKSk7XG5cdH1cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwOTAgLyogQnJ0RW5kQnVuZGxlU2hzICovKTtcbn1cblxuLyogW01TLVhMU0JdIDIuNC42NDkgQnJ0RmlsZVZlcnNpb24gKi9cbmZ1bmN0aW9uIHdyaXRlX0JydEZpbGVWZXJzaW9uKGRhdGEsIG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDEyNyk7XG5cdGZvcih2YXIgaSA9IDA7IGkgIT0gNDsgKytpKSBvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcoXCJTaGVldEpTXCIsIG8pO1xuXHR3cml0ZV9YTFdpZGVTdHJpbmcoWExTWC52ZXJzaW9uLCBvKTtcblx0d3JpdGVfWExXaWRlU3RyaW5nKFhMU1gudmVyc2lvbiwgbyk7XG5cdHdyaXRlX1hMV2lkZVN0cmluZyhcIjcyNjJcIiwgbyk7XG5cdHJldHVybiBvLmxlbmd0aCA+IG8ubCA/IG8uc2xpY2UoMCwgby5sKSA6IG87XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuMzAxIEJydEJvb2tWaWV3ICovXG5mdW5jdGlvbiB3cml0ZV9CcnRCb29rVmlldyhpZHgsIG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDI5KTtcblx0by53cml0ZV9zaGlmdCgtNCwgMCk7XG5cdG8ud3JpdGVfc2hpZnQoLTQsIDQ2MCk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgIDI4ODAwKTtcblx0by53cml0ZV9zaGlmdCg0LCAgMTc2MDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsICA1MDApO1xuXHRvLndyaXRlX3NoaWZ0KDQsICBpZHgpO1xuXHRvLndyaXRlX3NoaWZ0KDQsICBpZHgpO1xuXHR2YXIgZmxhZ3MgPSAweDc4O1xuXHRvLndyaXRlX3NoaWZ0KDEsICBmbGFncyk7XG5cdHJldHVybiBvLmxlbmd0aCA+IG8ubCA/IG8uc2xpY2UoMCwgby5sKSA6IG87XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0JPT0tWSUVXUyhiYSwgd2IvKjo6LCBvcHRzKi8pIHtcblx0LyogcmVxdWlyZWQgaWYgaGlkZGVuIHRhYiBhcHBlYXJzIGJlZm9yZSB2aXNpYmxlIHRhYiAqL1xuXHRpZighd2IuV29ya2Jvb2sgfHwgIXdiLldvcmtib29rLlNoZWV0cykgcmV0dXJuO1xuXHR2YXIgc2hlZXRzID0gd2IuV29ya2Jvb2suU2hlZXRzO1xuXHR2YXIgaSA9IDAsIHZpc3RhYiA9IC0xLCBoaWRkZW4gPSAtMTtcblx0Zm9yKDsgaSA8IHNoZWV0cy5sZW5ndGg7ICsraSkge1xuXHRcdGlmKCFzaGVldHNbaV0gfHwgIXNoZWV0c1tpXS5IaWRkZW4gJiYgdmlzdGFiID09IC0xKSB2aXN0YWIgPSBpO1xuXHRcdGVsc2UgaWYoc2hlZXRzW2ldLkhpZGRlbiA9PSAxICYmIGhpZGRlbiA9PSAtMSkgaGlkZGVuID0gaTtcblx0fVxuXHRpZihoaWRkZW4gPiB2aXN0YWIpIHJldHVybjtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwODcgLyogQnJ0QmVnaW5Cb29rVmlld3MgKi8pO1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDA5RSAvKiBCcnRCb29rVmlldyAqLywgd3JpdGVfQnJ0Qm9va1ZpZXcodmlzdGFiKSk7XG5cdC8qIDEqKEJydEJvb2tWaWV3ICpGUlQpICovXG5cdHdyaXRlX3JlY29yZChiYSwgMHgwMDg4IC8qIEJydEVuZEJvb2tWaWV3cyAqLyk7XG59XG5cbi8qIFtNUy1YTFNCXSAyLjQuMzA1IEJydENhbGNQcm9wICovXG4vKmZ1bmN0aW9uIHdyaXRlX0JydENhbGNQcm9wKGRhdGEsIG8pIHtcblx0aWYoIW8pIG8gPSBuZXdfYnVmKDI2KTtcblx0by53cml0ZV9zaGlmdCg0LDApOyAvLyBmb3JjZSByZWNhbGNcblx0by53cml0ZV9zaGlmdCg0LDEpO1xuXHRvLndyaXRlX3NoaWZ0KDQsMCk7XG5cdHdyaXRlX1hudW0oMCwgbyk7XG5cdG8ud3JpdGVfc2hpZnQoLTQsIDEwMjMpO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDB4MzMpO1xuXHRvLndyaXRlX3NoaWZ0KDEsIDB4MDApO1xuXHRyZXR1cm4gbztcbn0qL1xuXG4vKiBbTVMtWExTQl0gMi40LjY0NiBCcnRGaWxlUmVjb3ZlciAqL1xuLypmdW5jdGlvbiB3cml0ZV9CcnRGaWxlUmVjb3ZlcihkYXRhLCBvKSB7XG5cdGlmKCFvKSBvID0gbmV3X2J1ZigxKTtcblx0by53cml0ZV9zaGlmdCgxLDApO1xuXHRyZXR1cm4gbztcbn0qL1xuXG4vKiBbTVMtWExTQl0gMi4xLjcuNjEgV29ya2Jvb2sgKi9cbmZ1bmN0aW9uIHdyaXRlX3diX2Jpbih3Yiwgb3B0cykge1xuXHR2YXIgYmEgPSBidWZfYXJyYXkoKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwODMgLyogQnJ0QmVnaW5Cb29rICovKTtcblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwODAgLyogQnJ0RmlsZVZlcnNpb24gKi8sIHdyaXRlX0JydEZpbGVWZXJzaW9uKCkpO1xuXHQvKiBbW0JydEZpbGVTaGFyaW5nSXNvXSBCcnRGaWxlU2hhcmluZ10gKi9cblx0d3JpdGVfcmVjb3JkKGJhLCAweDAwOTkgLyogQnJ0V2JQcm9wICovLCB3cml0ZV9CcnRXYlByb3Aod2IuV29ya2Jvb2sgJiYgd2IuV29ya2Jvb2suV0JQcm9wcyB8fCBudWxsKSk7XG5cdC8qIFtBQ0FCU1BBVEhdICovXG5cdC8qIFtbQnJ0Qm9va1Byb3RlY3Rpb25Jc29dIEJydEJvb2tQcm90ZWN0aW9uXSAqL1xuXHR3cml0ZV9CT09LVklFV1MoYmEsIHdiLCBvcHRzKTtcblx0d3JpdGVfQlVORExFU0hTKGJhLCB3Yiwgb3B0cyk7XG5cdC8qIFtGTkdST1VQXSAqL1xuXHQvKiBbRVhURVJOQUxTXSAqL1xuXHQvKiAqQnJ0TmFtZSAqL1xuXHQvKiB3cml0ZV9yZWNvcmQoYmEsIDB4MDA5RCBCcnRDYWxjUHJvcCwgd3JpdGVfQnJ0Q2FsY1Byb3AoKSk7ICovXG5cdC8qIFtCcnRPbGVTaXplXSAqL1xuXHQvKiAqKEJydFVzZXJCb29rVmlldyAqRlJUKSAqL1xuXHQvKiBbUElWT1RDQUNIRUlEU10gKi9cblx0LyogW0JydFdiRmFjdG9pZF0gKi9cblx0LyogW1NNQVJUVEFHVFlQRVNdICovXG5cdC8qIFtCcnRXZWJPcHRdICovXG5cdC8qIHdyaXRlX3JlY29yZChiYSwgMHgwMDlCIEJydEZpbGVSZWNvdmVyLCB3cml0ZV9CcnRGaWxlUmVjb3ZlcigpKTsgKi9cblx0LyogW1dFQlBVQklURU1TXSAqL1xuXHQvKiBbQ1JFUlJTXSAqL1xuXHQvKiBGUlRXT1JLQk9PSyAqL1xuXHR3cml0ZV9yZWNvcmQoYmEsIDB4MDA4NCAvKiBCcnRFbmRCb29rICovKTtcblxuXHRyZXR1cm4gYmEuZW5kKCk7XG59XG5mdW5jdGlvbiBwYXJzZV93YihkYXRhLCBuYW1lLyo6c3RyaW5nKi8sIG9wdHMpLyo6V29ya2Jvb2tGaWxlKi8ge1xuXHRpZihuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiKSByZXR1cm4gcGFyc2Vfd2JfYmluKChkYXRhLyo6YW55Ki8pLCBvcHRzKTtcblx0cmV0dXJuIHBhcnNlX3diX3htbCgoZGF0YS8qOmFueSovKSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX3dzKGRhdGEsIG5hbWUvKjpzdHJpbmcqLywgaWR4Lyo6bnVtYmVyKi8sIG9wdHMsIHJlbHMsIHdiLCB0aGVtZXMsIHN0eWxlcykvKjpXb3Jrc2hlZXQqLyB7XG5cdGlmKG5hbWUuc2xpY2UoLTQpPT09XCIuYmluXCIpIHJldHVybiBwYXJzZV93c19iaW4oKGRhdGEvKjphbnkqLyksIG9wdHMsIGlkeCwgcmVscywgd2IsIHRoZW1lcywgc3R5bGVzKTtcblx0cmV0dXJuIHBhcnNlX3dzX3htbCgoZGF0YS8qOmFueSovKSwgb3B0cywgaWR4LCByZWxzLCB3YiwgdGhlbWVzLCBzdHlsZXMpO1xufVxuXG5mdW5jdGlvbiBwYXJzZV9jcyhkYXRhLCBuYW1lLyo6c3RyaW5nKi8sIGlkeC8qOm51bWJlciovLCBvcHRzLCByZWxzLCB3YiwgdGhlbWVzLCBzdHlsZXMpLyo6V29ya3NoZWV0Ki8ge1xuXHRpZihuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiKSByZXR1cm4gcGFyc2VfY3NfYmluKChkYXRhLyo6YW55Ki8pLCBvcHRzLCBpZHgsIHJlbHMsIHdiLCB0aGVtZXMsIHN0eWxlcyk7XG5cdHJldHVybiBwYXJzZV9jc194bWwoKGRhdGEvKjphbnkqLyksIG9wdHMsIGlkeCwgcmVscywgd2IsIHRoZW1lcywgc3R5bGVzKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VfbXMoZGF0YSwgbmFtZS8qOnN0cmluZyovLCBpZHgvKjpudW1iZXIqLywgb3B0cywgcmVscywgd2IsIHRoZW1lcywgc3R5bGVzKS8qOldvcmtzaGVldCovIHtcblx0aWYobmFtZS5zbGljZSgtNCk9PT1cIi5iaW5cIikgcmV0dXJuIHBhcnNlX21zX2JpbigoZGF0YS8qOmFueSovKSwgb3B0cywgaWR4LCByZWxzLCB3YiwgdGhlbWVzLCBzdHlsZXMpO1xuXHRyZXR1cm4gcGFyc2VfbXNfeG1sKChkYXRhLyo6YW55Ki8pLCBvcHRzLCBpZHgsIHJlbHMsIHdiLCB0aGVtZXMsIHN0eWxlcyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX2RzKGRhdGEsIG5hbWUvKjpzdHJpbmcqLywgaWR4Lyo6bnVtYmVyKi8sIG9wdHMsIHJlbHMsIHdiLCB0aGVtZXMsIHN0eWxlcykvKjpXb3Jrc2hlZXQqLyB7XG5cdGlmKG5hbWUuc2xpY2UoLTQpPT09XCIuYmluXCIpIHJldHVybiBwYXJzZV9kc19iaW4oKGRhdGEvKjphbnkqLyksIG9wdHMsIGlkeCwgcmVscywgd2IsIHRoZW1lcywgc3R5bGVzKTtcblx0cmV0dXJuIHBhcnNlX2RzX3htbCgoZGF0YS8qOmFueSovKSwgb3B0cywgaWR4LCByZWxzLCB3YiwgdGhlbWVzLCBzdHlsZXMpO1xufVxuXG5mdW5jdGlvbiBwYXJzZV9zdHkoZGF0YSwgbmFtZS8qOnN0cmluZyovLCB0aGVtZXMsIG9wdHMpIHtcblx0aWYobmFtZS5zbGljZSgtNCk9PT1cIi5iaW5cIikgcmV0dXJuIHBhcnNlX3N0eV9iaW4oKGRhdGEvKjphbnkqLyksIHRoZW1lcywgb3B0cyk7XG5cdHJldHVybiBwYXJzZV9zdHlfeG1sKChkYXRhLyo6YW55Ki8pLCB0aGVtZXMsIG9wdHMpO1xufVxuXG5mdW5jdGlvbiBwYXJzZV90aGVtZShkYXRhLyo6c3RyaW5nKi8sIG5hbWUvKjpzdHJpbmcqLywgb3B0cykge1xuXHRyZXR1cm4gcGFyc2VfdGhlbWVfeG1sKGRhdGEsIG9wdHMpO1xufVxuXG5mdW5jdGlvbiBwYXJzZV9zc3QoZGF0YSwgbmFtZS8qOnN0cmluZyovLCBvcHRzKS8qOlNTVCovIHtcblx0aWYobmFtZS5zbGljZSgtNCk9PT1cIi5iaW5cIikgcmV0dXJuIHBhcnNlX3NzdF9iaW4oKGRhdGEvKjphbnkqLyksIG9wdHMpO1xuXHRyZXR1cm4gcGFyc2Vfc3N0X3htbCgoZGF0YS8qOmFueSovKSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX2NtbnQoZGF0YSwgbmFtZS8qOnN0cmluZyovLCBvcHRzKS8qOkFycmF5PFJhd0NvbW1lbnQ+Ki8ge1xuXHRpZihuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiKSByZXR1cm4gcGFyc2VfY29tbWVudHNfYmluKChkYXRhLyo6YW55Ki8pLCBvcHRzKTtcblx0cmV0dXJuIHBhcnNlX2NvbW1lbnRzX3htbCgoZGF0YS8qOmFueSovKSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX2NjKGRhdGEsIG5hbWUvKjpzdHJpbmcqLywgb3B0cykge1xuXHRpZihuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiKSByZXR1cm4gcGFyc2VfY2NfYmluKChkYXRhLyo6YW55Ki8pLCBuYW1lLCBvcHRzKTtcblx0cmV0dXJuIHBhcnNlX2NjX3htbCgoZGF0YS8qOmFueSovKSwgbmFtZSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX3hsaW5rKGRhdGEsIHJlbCwgbmFtZS8qOnN0cmluZyovLCBvcHRzKSB7XG5cdGlmKG5hbWUuc2xpY2UoLTQpPT09XCIuYmluXCIpIHJldHVybiBwYXJzZV94bGlua19iaW4oKGRhdGEvKjphbnkqLyksIHJlbCwgbmFtZSwgb3B0cyk7XG5cdHJldHVybiBwYXJzZV94bGlua194bWwoKGRhdGEvKjphbnkqLyksIHJlbCwgbmFtZSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX3hsbWV0YShkYXRhLCBuYW1lLyo6c3RyaW5nKi8sIG9wdHMpIHtcblx0aWYobmFtZS5zbGljZSgtNCk9PT1cIi5iaW5cIikgcmV0dXJuIHBhcnNlX3hsbWV0YV9iaW4oKGRhdGEvKjphbnkqLyksIG5hbWUsIG9wdHMpO1xuXHRyZXR1cm4gcGFyc2VfeGxtZXRhX3htbCgoZGF0YS8qOmFueSovKSwgbmFtZSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3diKHdiLCBuYW1lLyo6c3RyaW5nKi8sIG9wdHMpIHtcblx0cmV0dXJuIChuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiID8gd3JpdGVfd2JfYmluIDogd3JpdGVfd2JfeG1sKSh3Yiwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3dzKGRhdGEvKjpudW1iZXIqLywgbmFtZS8qOnN0cmluZyovLCBvcHRzLCB3Yi8qOldvcmtib29rKi8sIHJlbHMpIHtcblx0cmV0dXJuIChuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiID8gd3JpdGVfd3NfYmluIDogd3JpdGVfd3NfeG1sKShkYXRhLCBvcHRzLCB3YiwgcmVscyk7XG59XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFyc1xuZnVuY3Rpb24gd3JpdGVfY3MoZGF0YS8qOm51bWJlciovLCBuYW1lLyo6c3RyaW5nKi8sIG9wdHMsIHdiLyo6V29ya2Jvb2sqLywgcmVscykge1xuXHRyZXR1cm4gKG5hbWUuc2xpY2UoLTQpPT09XCIuYmluXCIgPyB3cml0ZV9jc19iaW4gOiB3cml0ZV9jc194bWwpKGRhdGEsIG9wdHMsIHdiLCByZWxzKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfc3R5KGRhdGEsIG5hbWUvKjpzdHJpbmcqLywgb3B0cykge1xuXHRyZXR1cm4gKG5hbWUuc2xpY2UoLTQpPT09XCIuYmluXCIgPyB3cml0ZV9zdHlfYmluIDogd3JpdGVfc3R5X3htbCkoZGF0YSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3NzdChkYXRhLyo6U1NUKi8sIG5hbWUvKjpzdHJpbmcqLywgb3B0cykge1xuXHRyZXR1cm4gKG5hbWUuc2xpY2UoLTQpPT09XCIuYmluXCIgPyB3cml0ZV9zc3RfYmluIDogd3JpdGVfc3N0X3htbCkoZGF0YSwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX2NtbnQoZGF0YS8qOkFycmF5PGFueT4qLywgbmFtZS8qOnN0cmluZyovLCBvcHRzKSB7XG5cdHJldHVybiAobmFtZS5zbGljZSgtNCk9PT1cIi5iaW5cIiA/IHdyaXRlX2NvbW1lbnRzX2JpbiA6IHdyaXRlX2NvbW1lbnRzX3htbCkoZGF0YSwgb3B0cyk7XG59XG4vKlxuZnVuY3Rpb24gd3JpdGVfY2MoZGF0YSwgbmFtZTpzdHJpbmcsIG9wdHMpIHtcblx0cmV0dXJuIChuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiID8gd3JpdGVfY2NfYmluIDogd3JpdGVfY2NfeG1sKShkYXRhLCBvcHRzKTtcbn1cbiovXG5cbmZ1bmN0aW9uIHdyaXRlX3hsbWV0YShuYW1lLyo6c3RyaW5nKi8pIHtcblx0cmV0dXJuIChuYW1lLnNsaWNlKC00KT09PVwiLmJpblwiID8gd3JpdGVfeGxtZXRhX2JpbiA6IHdyaXRlX3hsbWV0YV94bWwpKCk7XG59XG52YXIgYXR0cmVnZXhnMj0vKFtcXHc6XSspPSgoPzpcIikoW15cIl0qKSg/OlwiKXwoPzonKShbXiddKikoPzonKSkvZztcbnZhciBhdHRyZWdleDI9LyhbXFx3Ol0rKT0oKD86XCIpKD86W15cIl0qKSg/OlwiKXwoPzonKSg/OlteJ10qKSg/OicpKS87XG5mdW5jdGlvbiB4bG1sX3BhcnNleG1sdGFnKHRhZy8qOnN0cmluZyovLCBza2lwX3Jvb3QvKjo/Ym9vbGVhbiovKSB7XG5cdHZhciB3b3JkcyA9IHRhZy5zcGxpdCgvXFxzKy8pO1xuXHR2YXIgei8qOmFueSovID0gKFtdLyo6YW55Ki8pOyBpZighc2tpcF9yb290KSB6WzBdID0gd29yZHNbMF07XG5cdGlmKHdvcmRzLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHo7XG5cdHZhciBtID0gdGFnLm1hdGNoKGF0dHJlZ2V4ZzIpLCB5LCBqLCB3LCBpO1xuXHRpZihtKSBmb3IoaSA9IDA7IGkgIT0gbS5sZW5ndGg7ICsraSkge1xuXHRcdHkgPSBtW2ldLm1hdGNoKGF0dHJlZ2V4Mik7XG4vKjo6IGlmKCF5IHx8ICF5WzJdKSBjb250aW51ZTsgKi9cblx0XHRpZigoaj15WzFdLmluZGV4T2YoXCI6XCIpKSA9PT0gLTEpIHpbeVsxXV0gPSB5WzJdLnNsaWNlKDEseVsyXS5sZW5ndGgtMSk7XG5cdFx0ZWxzZSB7XG5cdFx0XHRpZih5WzFdLnNsaWNlKDAsNikgPT09IFwieG1sbnM6XCIpIHcgPSBcInhtbG5zXCIreVsxXS5zbGljZSg2KTtcblx0XHRcdGVsc2UgdyA9IHlbMV0uc2xpY2UoaisxKTtcblx0XHRcdHpbd10gPSB5WzJdLnNsaWNlKDEseVsyXS5sZW5ndGgtMSk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiB6O1xufVxuZnVuY3Rpb24geGxtbF9wYXJzZXhtbHRhZ29iaih0YWcvKjpzdHJpbmcqLykge1xuXHR2YXIgd29yZHMgPSB0YWcuc3BsaXQoL1xccysvKTtcblx0dmFyIHogPSB7fTtcblx0aWYod29yZHMubGVuZ3RoID09PSAxKSByZXR1cm4gejtcblx0dmFyIG0gPSB0YWcubWF0Y2goYXR0cmVnZXhnMiksIHksIGosIHcsIGk7XG5cdGlmKG0pIGZvcihpID0gMDsgaSAhPSBtLmxlbmd0aDsgKytpKSB7XG5cdFx0eSA9IG1baV0ubWF0Y2goYXR0cmVnZXgyKTtcbi8qOjogaWYoIXkgfHwgIXlbMl0pIGNvbnRpbnVlOyAqL1xuXHRcdGlmKChqPXlbMV0uaW5kZXhPZihcIjpcIikpID09PSAtMSkgelt5WzFdXSA9IHlbMl0uc2xpY2UoMSx5WzJdLmxlbmd0aC0xKTtcblx0XHRlbHNlIHtcblx0XHRcdGlmKHlbMV0uc2xpY2UoMCw2KSA9PT0gXCJ4bWxuczpcIikgdyA9IFwieG1sbnNcIit5WzFdLnNsaWNlKDYpO1xuXHRcdFx0ZWxzZSB3ID0geVsxXS5zbGljZShqKzEpO1xuXHRcdFx0elt3XSA9IHlbMl0uc2xpY2UoMSx5WzJdLmxlbmd0aC0xKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHo7XG59XG5cbi8vIC0tLS1cblxuLyogbWFwIGZyb20geGxtbCBuYW1lZCBmb3JtYXRzIHRvIFNTRiBUT0RPOiBsb2NhbGl6ZSAqL1xudmFyIFhMTUxGb3JtYXRNYXAvKjoge1tzdHJpbmddOnN0cmluZ30qLztcblxuZnVuY3Rpb24geGxtbF9mb3JtYXQoZm9ybWF0LCB2YWx1ZSkvKjpzdHJpbmcqLyB7XG5cdHZhciBmbXQgPSBYTE1MRm9ybWF0TWFwW2Zvcm1hdF0gfHwgdW5lc2NhcGV4bWwoZm9ybWF0KTtcblx0aWYoZm10ID09PSBcIkdlbmVyYWxcIikgcmV0dXJuIFNTRl9nZW5lcmFsKHZhbHVlKTtcblx0cmV0dXJuIFNTRl9mb3JtYXQoZm10LCB2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIHhsbWxfc2V0X2N1c3Rwcm9wKEN1c3Rwcm9wcywga2V5LCBjcCwgdmFsLyo6c3RyaW5nKi8pIHtcblx0dmFyIG92YWwvKjphbnkqLyA9IHZhbDtcblx0c3dpdGNoKChjcFswXS5tYXRjaCgvZHQ6ZHQ9XCIoW1xcdy5dKylcIi8pfHxbXCJcIixcIlwiXSlbMV0pIHtcblx0XHRjYXNlIFwiYm9vbGVhblwiOiBvdmFsID0gcGFyc2V4bWxib29sKHZhbCk7IGJyZWFrO1xuXHRcdGNhc2UgXCJpMlwiOiBjYXNlIFwiaW50XCI6IG92YWwgPSBwYXJzZUludCh2YWwsIDEwKTsgYnJlYWs7XG5cdFx0Y2FzZSBcInI0XCI6IGNhc2UgXCJmbG9hdFwiOiBvdmFsID0gcGFyc2VGbG9hdCh2YWwpOyBicmVhaztcblx0XHRjYXNlIFwiZGF0ZVwiOiBjYXNlIFwiZGF0ZVRpbWUudHpcIjogb3ZhbCA9IHBhcnNlRGF0ZSh2YWwpOyBicmVhaztcblx0XHRjYXNlIFwiaThcIjogY2FzZSBcInN0cmluZ1wiOiBjYXNlIFwiZml4ZWRcIjogY2FzZSBcInV1aWRcIjogY2FzZSBcImJpbi5iYXNlNjRcIjogYnJlYWs7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiYmFkIGN1c3Rwcm9wOlwiICsgY3BbMF0pO1xuXHR9XG5cdEN1c3Rwcm9wc1t1bmVzY2FwZXhtbChrZXkpXSA9IG92YWw7XG59XG5cbmZ1bmN0aW9uIHNhZmVfZm9ybWF0X3hsbWwoY2VsbC8qOkNlbGwqLywgbmYsIG8pIHtcblx0aWYoY2VsbC50ID09PSAneicpIHJldHVybjtcblx0aWYoIW8gfHwgby5jZWxsVGV4dCAhPT0gZmFsc2UpIHRyeSB7XG5cdFx0aWYoY2VsbC50ID09PSAnZScpIHsgY2VsbC53ID0gY2VsbC53IHx8IEJFcnJbY2VsbC52XTsgfVxuXHRcdGVsc2UgaWYobmYgPT09IFwiR2VuZXJhbFwiKSB7XG5cdFx0XHRpZihjZWxsLnQgPT09ICduJykge1xuXHRcdFx0XHRpZigoY2VsbC52fDApID09PSBjZWxsLnYpIGNlbGwudyA9IGNlbGwudi50b1N0cmluZygxMCk7XG5cdFx0XHRcdGVsc2UgY2VsbC53ID0gU1NGX2dlbmVyYWxfbnVtKGNlbGwudik7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIGNlbGwudyA9IFNTRl9nZW5lcmFsKGNlbGwudik7XG5cdFx0fVxuXHRcdGVsc2UgY2VsbC53ID0geGxtbF9mb3JtYXQobmZ8fFwiR2VuZXJhbFwiLCBjZWxsLnYpO1xuXHR9IGNhdGNoKGUpIHsgaWYoby5XVEYpIHRocm93IGU7IH1cblx0dHJ5IHtcblx0XHR2YXIgeiA9IFhMTUxGb3JtYXRNYXBbbmZdfHxuZnx8XCJHZW5lcmFsXCI7XG5cdFx0aWYoby5jZWxsTkYpIGNlbGwueiA9IHo7XG5cdFx0aWYoby5jZWxsRGF0ZXMgJiYgY2VsbC50ID09ICduJyAmJiBmbXRfaXNfZGF0ZSh6KSkge1xuXHRcdFx0dmFyIF9kID0gU1NGX3BhcnNlX2RhdGVfY29kZShjZWxsLnYpOyBpZihfZCkgeyBjZWxsLnQgPSAnZCc7IGNlbGwudiA9IG5ldyBEYXRlKF9kLnksIF9kLm0tMSxfZC5kLF9kLkgsX2QuTSxfZC5TLF9kLnUpOyB9XG5cdFx0fVxuXHR9IGNhdGNoKGUpIHsgaWYoby5XVEYpIHRocm93IGU7IH1cbn1cblxuZnVuY3Rpb24gcHJvY2Vzc19zdHlsZV94bG1sKHN0eWxlcywgc3RhZywgb3B0cykge1xuXHRpZihvcHRzLmNlbGxTdHlsZXMpIHtcblx0XHRpZihzdGFnLkludGVyaW9yKSB7XG5cdFx0XHR2YXIgSSA9IHN0YWcuSW50ZXJpb3I7XG5cdFx0XHRpZihJLlBhdHRlcm4pIEkucGF0dGVyblR5cGUgPSBYTE1MUGF0dGVyblR5cGVNYXBbSS5QYXR0ZXJuXSB8fCBJLlBhdHRlcm47XG5cdFx0fVxuXHR9XG5cdHN0eWxlc1tzdGFnLklEXSA9IHN0YWc7XG59XG5cbi8qIFRPRE86IHRoZXJlIG11c3QgZXhpc3Qgc29tZSBmb3JtIG9mIE9TUC1ibGVzc2VkIHNwZWMgKi9cbmZ1bmN0aW9uIHBhcnNlX3hsbWxfZGF0YSh4bWwsIHNzLCBkYXRhLCBjZWxsLyo6YW55Ki8sIGJhc2UsIHN0eWxlcywgY3N0eSwgcm93LCBhcnJheWYsIG8pIHtcblx0dmFyIG5mID0gXCJHZW5lcmFsXCIsIHNpZCA9IGNlbGwuU3R5bGVJRCwgUyA9IHt9OyBvID0gbyB8fCB7fTtcblx0dmFyIGludGVyaW9ycyA9IFtdO1xuXHR2YXIgaSA9IDA7XG5cdGlmKHNpZCA9PT0gdW5kZWZpbmVkICYmIHJvdykgc2lkID0gcm93LlN0eWxlSUQ7XG5cdGlmKHNpZCA9PT0gdW5kZWZpbmVkICYmIGNzdHkpIHNpZCA9IGNzdHkuU3R5bGVJRDtcblx0d2hpbGUoc3R5bGVzW3NpZF0gIT09IHVuZGVmaW5lZCkge1xuXHRcdGlmKHN0eWxlc1tzaWRdLm5mKSBuZiA9IHN0eWxlc1tzaWRdLm5mO1xuXHRcdGlmKHN0eWxlc1tzaWRdLkludGVyaW9yKSBpbnRlcmlvcnMucHVzaChzdHlsZXNbc2lkXS5JbnRlcmlvcik7XG5cdFx0aWYoIXN0eWxlc1tzaWRdLlBhcmVudCkgYnJlYWs7XG5cdFx0c2lkID0gc3R5bGVzW3NpZF0uUGFyZW50O1xuXHR9XG5cdHN3aXRjaChkYXRhLlR5cGUpIHtcblx0XHRjYXNlICdCb29sZWFuJzpcblx0XHRcdGNlbGwudCA9ICdiJztcblx0XHRcdGNlbGwudiA9IHBhcnNleG1sYm9vbCh4bWwpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnU3RyaW5nJzpcblx0XHRcdGNlbGwudCA9ICdzJzsgY2VsbC5yID0geGxtbF9maXhzdHIodW5lc2NhcGV4bWwoeG1sKSk7XG5cdFx0XHRjZWxsLnYgPSAoeG1sLmluZGV4T2YoXCI8XCIpID4gLTEgPyB1bmVzY2FwZXhtbChzc3x8eG1sKS5yZXBsYWNlKC88Lio/Pi9nLCBcIlwiKSA6IGNlbGwucik7IC8vIHRvZG86IEJSIGV0Y1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnRGF0ZVRpbWUnOlxuXHRcdFx0aWYoeG1sLnNsaWNlKC0xKSAhPSBcIlpcIikgeG1sICs9IFwiWlwiO1xuXHRcdFx0Y2VsbC52ID0gKHBhcnNlRGF0ZSh4bWwpIC0gbmV3IERhdGUoRGF0ZS5VVEMoMTg5OSwgMTEsIDMwKSkpIC8gKDI0ICogNjAgKiA2MCAqIDEwMDApO1xuXHRcdFx0aWYoY2VsbC52ICE9PSBjZWxsLnYpIGNlbGwudiA9IHVuZXNjYXBleG1sKHhtbCk7XG5cdFx0XHRlbHNlIGlmKGNlbGwudjw2MCkgY2VsbC52ID0gY2VsbC52IC0xO1xuXHRcdFx0aWYoIW5mIHx8IG5mID09IFwiR2VuZXJhbFwiKSBuZiA9IFwieXl5eS1tbS1kZFwiO1xuXHRcdFx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdGNhc2UgJ051bWJlcic6XG5cdFx0XHRpZihjZWxsLnYgPT09IHVuZGVmaW5lZCkgY2VsbC52PSt4bWw7XG5cdFx0XHRpZighY2VsbC50KSBjZWxsLnQgPSAnbic7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdFcnJvcic6IGNlbGwudCA9ICdlJzsgY2VsbC52ID0gUkJFcnJbeG1sXTsgaWYoby5jZWxsVGV4dCAhPT0gZmFsc2UpIGNlbGwudyA9IHhtbDsgYnJlYWs7XG5cdFx0ZGVmYXVsdDpcblx0XHRcdGlmKHhtbCA9PSBcIlwiICYmIHNzID09IFwiXCIpIHsgY2VsbC50ID0gJ3onOyB9XG5cdFx0XHRlbHNlIHsgY2VsbC50ID0gJ3MnOyBjZWxsLnYgPSB4bG1sX2ZpeHN0cihzc3x8eG1sKTsgfVxuXHRcdFx0YnJlYWs7XG5cdH1cblx0c2FmZV9mb3JtYXRfeGxtbChjZWxsLCBuZiwgbyk7XG5cdGlmKG8uY2VsbEZvcm11bGEgIT09IGZhbHNlKSB7XG5cdFx0aWYoY2VsbC5Gb3JtdWxhKSB7XG5cdFx0XHR2YXIgZnN0ciA9IHVuZXNjYXBleG1sKGNlbGwuRm9ybXVsYSk7XG5cdFx0XHQvKiBzdHJpY3RseSBzcGVha2luZywgdGhlIGxlYWRpbmcgPSBpcyByZXF1aXJlZCBidXQgc29tZSB3cml0ZXJzIG9taXQgKi9cblx0XHRcdGlmKGZzdHIuY2hhckNvZGVBdCgwKSA9PSA2MSAvKiA9ICovKSBmc3RyID0gZnN0ci5zbGljZSgxKTtcblx0XHRcdGNlbGwuZiA9IHJjX3RvX2ExKGZzdHIsIGJhc2UpO1xuXHRcdFx0ZGVsZXRlIGNlbGwuRm9ybXVsYTtcblx0XHRcdGlmKGNlbGwuQXJyYXlSYW5nZSA9PSBcIlJDXCIpIGNlbGwuRiA9IHJjX3RvX2ExKFwiUkM6UkNcIiwgYmFzZSk7XG5cdFx0XHRlbHNlIGlmKGNlbGwuQXJyYXlSYW5nZSkge1xuXHRcdFx0XHRjZWxsLkYgPSByY190b19hMShjZWxsLkFycmF5UmFuZ2UsIGJhc2UpO1xuXHRcdFx0XHRhcnJheWYucHVzaChbc2FmZV9kZWNvZGVfcmFuZ2UoY2VsbC5GKSwgY2VsbC5GXSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvcihpID0gMDsgaSA8IGFycmF5Zi5sZW5ndGg7ICsraSlcblx0XHRcdFx0aWYoYmFzZS5yID49IGFycmF5ZltpXVswXS5zLnIgJiYgYmFzZS5yIDw9IGFycmF5ZltpXVswXS5lLnIpXG5cdFx0XHRcdFx0aWYoYmFzZS5jID49IGFycmF5ZltpXVswXS5zLmMgJiYgYmFzZS5jIDw9IGFycmF5ZltpXVswXS5lLmMpXG5cdFx0XHRcdFx0XHRjZWxsLkYgPSBhcnJheWZbaV1bMV07XG5cdFx0fVxuXHR9XG5cdGlmKG8uY2VsbFN0eWxlcykge1xuXHRcdGludGVyaW9ycy5mb3JFYWNoKGZ1bmN0aW9uKHgpIHtcblx0XHRcdGlmKCFTLnBhdHRlcm5UeXBlICYmIHgucGF0dGVyblR5cGUpIFMucGF0dGVyblR5cGUgPSB4LnBhdHRlcm5UeXBlO1xuXHRcdH0pO1xuXHRcdGNlbGwucyA9IFM7XG5cdH1cblx0aWYoY2VsbC5TdHlsZUlEICE9PSB1bmRlZmluZWQpIGNlbGwuaXhmZSA9IGNlbGwuU3R5bGVJRDtcbn1cblxuZnVuY3Rpb24geGxtbF9jbGVhbl9jb21tZW50KGNvbW1lbnQvKjphbnkqLykge1xuXHRjb21tZW50LnQgPSBjb21tZW50LnYgfHwgXCJcIjtcblx0Y29tbWVudC50ID0gY29tbWVudC50LnJlcGxhY2UoL1xcclxcbi9nLFwiXFxuXCIpLnJlcGxhY2UoL1xcci9nLFwiXFxuXCIpO1xuXHRjb21tZW50LnYgPSBjb21tZW50LncgPSBjb21tZW50Lml4ZmUgPSB1bmRlZmluZWQ7XG59XG5cbi8qIFRPRE86IEV2ZXJ5dGhpbmcgKi9cbmZ1bmN0aW9uIHBhcnNlX3hsbWxfeG1sKGQsIF9vcHRzKS8qOldvcmtib29rKi8ge1xuXHR2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuXHRtYWtlX3NzZigpO1xuXHR2YXIgc3RyID0gZGVib20oeGxtbF9ub3JtYWxpemUoZCkpO1xuXHRpZihvcHRzLnR5cGUgPT0gJ2JpbmFyeScgfHwgb3B0cy50eXBlID09ICdhcnJheScgfHwgb3B0cy50eXBlID09ICdiYXNlNjQnKSB7XG5cdFx0aWYodHlwZW9mICRjcHRhYmxlICE9PSAndW5kZWZpbmVkJykgc3RyID0gJGNwdGFibGUudXRpbHMuZGVjb2RlKDY1MDAxLCBjaGFyX2NvZGVzKHN0cikpO1xuXHRcdGVsc2Ugc3RyID0gdXRmOHJlYWQoc3RyKTtcblx0fVxuXHR2YXIgb3BlbmluZyA9IHN0ci5zbGljZSgwLCAxMDI0KS50b0xvd2VyQ2FzZSgpLCBpc2h0bWwgPSBmYWxzZTtcblx0b3BlbmluZyA9IG9wZW5pbmcucmVwbGFjZSgvXCIuKj9cIi9nLCBcIlwiKTtcblx0aWYoKG9wZW5pbmcuaW5kZXhPZihcIj5cIikgJiAxMDIzKSA+IE1hdGgubWluKChvcGVuaW5nLmluZGV4T2YoXCIsXCIpICYgMTAyMyksIChvcGVuaW5nLmluZGV4T2YoXCI7XCIpJjEwMjMpKSkgeyB2YXIgX28gPSBkdXAob3B0cyk7IF9vLnR5cGUgPSBcInN0cmluZ1wiOyByZXR1cm4gUFJOLnRvX3dvcmtib29rKHN0ciwgX28pOyB9XG5cdGlmKG9wZW5pbmcuaW5kZXhPZihcIjw/eG1sXCIpID09IC0xKSBbXCJodG1sXCIsIFwidGFibGVcIiwgXCJoZWFkXCIsIFwibWV0YVwiLCBcInNjcmlwdFwiLCBcInN0eWxlXCIsIFwiZGl2XCJdLmZvckVhY2goZnVuY3Rpb24odGFnKSB7IGlmKG9wZW5pbmcuaW5kZXhPZihcIjxcIiArIHRhZykgPj0gMCkgaXNodG1sID0gdHJ1ZTsgfSk7XG5cdGlmKGlzaHRtbCkgcmV0dXJuIGh0bWxfdG9fd29ya2Jvb2soc3RyLCBvcHRzKTtcblxuXHRYTE1MRm9ybWF0TWFwID0gKHtcblx0XHRcIkdlbmVyYWwgTnVtYmVyXCI6IFwiR2VuZXJhbFwiLFxuXHRcdFwiR2VuZXJhbCBEYXRlXCI6IHRhYmxlX2ZtdFsyMl0sXG5cdFx0XCJMb25nIERhdGVcIjogXCJkZGRkLCBtbW1tIGRkLCB5eXl5XCIsXG5cdFx0XCJNZWRpdW0gRGF0ZVwiOiB0YWJsZV9mbXRbMTVdLFxuXHRcdFwiU2hvcnQgRGF0ZVwiOiB0YWJsZV9mbXRbMTRdLFxuXHRcdFwiTG9uZyBUaW1lXCI6IHRhYmxlX2ZtdFsxOV0sXG5cdFx0XCJNZWRpdW0gVGltZVwiOiB0YWJsZV9mbXRbMThdLFxuXHRcdFwiU2hvcnQgVGltZVwiOiB0YWJsZV9mbXRbMjBdLFxuXHRcdFwiQ3VycmVuY3lcIjogJ1wiJFwiIywjIzAuMDBfKTtbUmVkXVxcXFwoXCIkXCIjLCMjMC4wMFxcXFwpJyxcblx0XHRcIkZpeGVkXCI6IHRhYmxlX2ZtdFsyXSxcblx0XHRcIlN0YW5kYXJkXCI6IHRhYmxlX2ZtdFs0XSxcblx0XHRcIlBlcmNlbnRcIjogdGFibGVfZm10WzEwXSxcblx0XHRcIlNjaWVudGlmaWNcIjogdGFibGVfZm10WzExXSxcblx0XHRcIlllcy9Ob1wiOiAnXCJZZXNcIjtcIlllc1wiO1wiTm9cIjtAJyxcblx0XHRcIlRydWUvRmFsc2VcIjogJ1wiVHJ1ZVwiO1wiVHJ1ZVwiO1wiRmFsc2VcIjtAJyxcblx0XHRcIk9uL09mZlwiOiAnXCJZZXNcIjtcIlllc1wiO1wiTm9cIjtAJ1xuXHR9Lyo6YW55Ki8pO1xuXG5cblx0dmFyIFJuO1xuXHR2YXIgc3RhdGUgPSBbXSwgdG1wO1xuXHRpZihERU5TRSAhPSBudWxsICYmIG9wdHMuZGVuc2UgPT0gbnVsbCkgb3B0cy5kZW5zZSA9IERFTlNFO1xuXHR2YXIgc2hlZXRzID0ge30sIHNoZWV0bmFtZXMvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXSwgY3Vyc2hlZXQvKjpXb3Jrc2hlZXQqLyA9IChvcHRzLmRlbnNlID8gW10gOiB7fSksIHNoZWV0bmFtZSA9IFwiXCI7XG5cdHZhciBjZWxsID0gKHt9Lyo6YW55Ki8pLCByb3cgPSB7fTsvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cdHZhciBkdGFnID0geGxtbF9wYXJzZXhtbHRhZygnPERhdGEgc3M6VHlwZT1cIlN0cmluZ1wiPicpLCBkaWR4ID0gMDtcblx0dmFyIGMgPSAwLCByID0gMDtcblx0dmFyIHJlZmd1ZXNzLyo6UmFuZ2UqLyA9IHtzOiB7cjoyMDAwMDAwLCBjOjIwMDAwMDB9LCBlOiB7cjowLCBjOjB9IH07XG5cdHZhciBzdHlsZXMgPSB7fSwgc3RhZyA9IHt9O1xuXHR2YXIgc3MgPSBcIlwiLCBmaWR4ID0gMDtcblx0dmFyIG1lcmdlcy8qOkFycmF5PFJhbmdlPiovID0gW107XG5cdHZhciBQcm9wcyA9IHt9LCBDdXN0cHJvcHMgPSB7fSwgcGlkeCA9IDAsIGNwID0gW107XG5cdHZhciBjb21tZW50cy8qOkFycmF5PENvbW1lbnQ+Ki8gPSBbXSwgY29tbWVudC8qOkNvbW1lbnQqLyA9ICh7fS8qOmFueSovKTtcblx0dmFyIGNzdHlzID0gW10sIGNzdHksIHNlZW5jb2wgPSBmYWxzZTtcblx0dmFyIGFycmF5Zi8qOkFycmF5PFtSYW5nZSwgc3RyaW5nXT4qLyA9IFtdO1xuXHR2YXIgcm93aW5mby8qOkFycmF5PFJvd0luZm8+Ki8gPSBbXSwgcm93b2JqID0ge30sIGNjID0gMCwgcnIgPSAwO1xuXHR2YXIgV29ya2Jvb2svKjpXQldCUHJvcHMqLyA9ICh7IFNoZWV0czpbXSwgV0JQcm9wczp7ZGF0ZTE5MDQ6ZmFsc2V9IH0vKjphbnkqLyksIHdzcHJvcHMgPSB7fTtcblx0eGxtbHJlZ2V4Lmxhc3RJbmRleCA9IDA7XG5cdHN0ciA9IHN0ci5yZXBsYWNlKC88IS0tKFtcXHNcXFNdKj8pLS0+L21nLFwiXCIpO1xuXHR2YXIgcmF3X1JuMyA9IFwiXCI7XG5cdHdoaWxlKChSbiA9IHhsbWxyZWdleC5leGVjKHN0cikpKSBzd2l0Y2goKFJuWzNdID0gKHJhd19SbjMgPSBSblszXSkudG9Mb3dlckNhc2UoKSkpIHtcblx0XHRjYXNlICdkYXRhJyAvKmNhc2UgJ0RhdGEnKi86XG5cdFx0XHRpZihyYXdfUm4zID09IFwiZGF0YVwiKSB7XG5cdFx0XHRcdGlmKFJuWzFdPT09Jy8nKXtpZigodG1wPXN0YXRlLnBvcCgpKVswXSE9PVJuWzNdKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgc3RhdGU6IFwiK3RtcC5qb2luKFwifFwiKSk7fVxuXHRcdFx0XHRlbHNlIGlmKFJuWzBdLmNoYXJBdChSblswXS5sZW5ndGgtMikgIT09ICcvJykgc3RhdGUucHVzaChbUm5bM10sIHRydWVdKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZihzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMV0pIGJyZWFrO1xuXHRcdFx0aWYoUm5bMV09PT0nLycpIHBhcnNlX3hsbWxfZGF0YShzdHIuc2xpY2UoZGlkeCwgUm4uaW5kZXgpLCBzcywgZHRhZywgc3RhdGVbc3RhdGUubGVuZ3RoLTFdWzBdPT0vKlwiQ29tbWVudFwiKi9cImNvbW1lbnRcIj9jb21tZW50OmNlbGwsIHtjOmMscjpyfSwgc3R5bGVzLCBjc3R5c1tjXSwgcm93LCBhcnJheWYsIG9wdHMpO1xuXHRcdFx0ZWxzZSB7IHNzID0gXCJcIjsgZHRhZyA9IHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pOyBkaWR4ID0gUm4uaW5kZXggKyBSblswXS5sZW5ndGg7IH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2NlbGwnIC8qY2FzZSAnQ2VsbCcqLzpcblx0XHRcdGlmKFJuWzFdPT09Jy8nKXtcblx0XHRcdFx0aWYoY29tbWVudHMubGVuZ3RoID4gMCkgY2VsbC5jID0gY29tbWVudHM7XG5cdFx0XHRcdGlmKCghb3B0cy5zaGVldFJvd3MgfHwgb3B0cy5zaGVldFJvd3MgPiByKSAmJiBjZWxsLnYgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0XHRcdGlmKG9wdHMuZGVuc2UpIHtcblx0XHRcdFx0XHRcdGlmKCFjdXJzaGVldFtyXSkgY3Vyc2hlZXRbcl0gPSBbXTtcblx0XHRcdFx0XHRcdGN1cnNoZWV0W3JdW2NdID0gY2VsbDtcblx0XHRcdFx0XHR9IGVsc2UgY3Vyc2hlZXRbZW5jb2RlX2NvbChjKSArIGVuY29kZV9yb3cocildID0gY2VsbDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihjZWxsLkhSZWYpIHtcblx0XHRcdFx0XHRjZWxsLmwgPSAoe1RhcmdldDp1bmVzY2FwZXhtbChjZWxsLkhSZWYpfS8qOmFueSovKTtcblx0XHRcdFx0XHRpZihjZWxsLkhSZWZTY3JlZW5UaXApIGNlbGwubC5Ub29sdGlwID0gY2VsbC5IUmVmU2NyZWVuVGlwO1xuXHRcdFx0XHRcdGRlbGV0ZSBjZWxsLkhSZWY7IGRlbGV0ZSBjZWxsLkhSZWZTY3JlZW5UaXA7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoY2VsbC5NZXJnZUFjcm9zcyB8fCBjZWxsLk1lcmdlRG93bikge1xuXHRcdFx0XHRcdGNjID0gYyArIChwYXJzZUludChjZWxsLk1lcmdlQWNyb3NzLDEwKXwwKTtcblx0XHRcdFx0XHRyciA9IHIgKyAocGFyc2VJbnQoY2VsbC5NZXJnZURvd24sMTApfDApO1xuXHRcdFx0XHRcdG1lcmdlcy5wdXNoKHtzOntjOmMscjpyfSxlOntjOmNjLHI6cnJ9fSk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIW9wdHMuc2hlZXRTdHVicykgeyBpZihjZWxsLk1lcmdlQWNyb3NzKSBjID0gY2MgKyAxOyBlbHNlICsrYzsgfVxuXHRcdFx0XHRlbHNlIGlmKGNlbGwuTWVyZ2VBY3Jvc3MgfHwgY2VsbC5NZXJnZURvd24pIHtcblx0XHRcdFx0XHQvKjo6IGlmKCFjYykgY2MgPSAwOyBpZighcnIpIHJyID0gMDsgKi9cblx0XHRcdFx0XHRmb3IodmFyIGNtYSA9IGM7IGNtYSA8PSBjYzsgKytjbWEpIHtcblx0XHRcdFx0XHRcdGZvcih2YXIgY21kID0gcjsgY21kIDw9IHJyOyArK2NtZCkge1xuXHRcdFx0XHRcdFx0XHRpZihjbWEgPiBjIHx8IGNtZCA+IHIpIHtcblx0XHRcdFx0XHRcdFx0XHRpZihvcHRzLmRlbnNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZighY3Vyc2hlZXRbY21kXSkgY3Vyc2hlZXRbY21kXSA9IFtdO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y3Vyc2hlZXRbY21kXVtjbWFdID0ge3Q6J3onfTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgY3Vyc2hlZXRbZW5jb2RlX2NvbChjbWEpICsgZW5jb2RlX3JvdyhjbWQpXSA9IHt0Oid6J307XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YyA9IGNjICsgMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlICsrYztcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNlbGwgPSB4bG1sX3BhcnNleG1sdGFnb2JqKFJuWzBdKTtcblx0XHRcdFx0aWYoY2VsbC5JbmRleCkgYyA9ICtjZWxsLkluZGV4IC0gMTtcblx0XHRcdFx0aWYoYyA8IHJlZmd1ZXNzLnMuYykgcmVmZ3Vlc3Mucy5jID0gYztcblx0XHRcdFx0aWYoYyA+IHJlZmd1ZXNzLmUuYykgcmVmZ3Vlc3MuZS5jID0gYztcblx0XHRcdFx0aWYoUm5bMF0uc2xpY2UoLTIpID09PSBcIi8+XCIpICsrYztcblx0XHRcdFx0Y29tbWVudHMgPSBbXTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3JvdycgLypjYXNlICdSb3cnKi86XG5cdFx0XHRpZihSblsxXT09PScvJyB8fCBSblswXS5zbGljZSgtMikgPT09IFwiLz5cIikge1xuXHRcdFx0XHRpZihyIDwgcmVmZ3Vlc3Mucy5yKSByZWZndWVzcy5zLnIgPSByO1xuXHRcdFx0XHRpZihyID4gcmVmZ3Vlc3MuZS5yKSByZWZndWVzcy5lLnIgPSByO1xuXHRcdFx0XHRpZihSblswXS5zbGljZSgtMikgPT09IFwiLz5cIikge1xuXHRcdFx0XHRcdHJvdyA9IHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pO1xuXHRcdFx0XHRcdGlmKHJvdy5JbmRleCkgciA9ICtyb3cuSW5kZXggLSAxO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGMgPSAwOyArK3I7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyb3cgPSB4bG1sX3BhcnNleG1sdGFnKFJuWzBdKTtcblx0XHRcdFx0aWYocm93LkluZGV4KSByID0gK3Jvdy5JbmRleCAtIDE7XG5cdFx0XHRcdHJvd29iaiA9IHt9O1xuXHRcdFx0XHRpZihyb3cuQXV0b0ZpdEhlaWdodCA9PSBcIjBcIiB8fCByb3cuSGVpZ2h0KSB7XG5cdFx0XHRcdFx0cm93b2JqLmhweCA9IHBhcnNlSW50KHJvdy5IZWlnaHQsIDEwKTsgcm93b2JqLmhwdCA9IHB4MnB0KHJvd29iai5ocHgpO1xuXHRcdFx0XHRcdHJvd2luZm9bcl0gPSByb3dvYmo7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYocm93LkhpZGRlbiA9PSBcIjFcIikgeyByb3dvYmouaGlkZGVuID0gdHJ1ZTsgcm93aW5mb1tyXSA9IHJvd29iajsgfVxuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAnd29ya3NoZWV0JyAvKmNhc2UgJ1dvcmtzaGVldCcqLzogLyogVE9ETzogcmVhZCByYW5nZSBmcm9tIEZ1bGxSb3dzL0Z1bGxDb2x1bW5zICovXG5cdFx0XHRpZihSblsxXT09PScvJyl7XG5cdFx0XHRcdGlmKCh0bXA9c3RhdGUucG9wKCkpWzBdIT09Um5bM10pIHRocm93IG5ldyBFcnJvcihcIkJhZCBzdGF0ZTogXCIrdG1wLmpvaW4oXCJ8XCIpKTtcblx0XHRcdFx0c2hlZXRuYW1lcy5wdXNoKHNoZWV0bmFtZSk7XG5cdFx0XHRcdGlmKHJlZmd1ZXNzLnMuciA8PSByZWZndWVzcy5lLnIgJiYgcmVmZ3Vlc3Mucy5jIDw9IHJlZmd1ZXNzLmUuYykge1xuXHRcdFx0XHRcdGN1cnNoZWV0W1wiIXJlZlwiXSA9IGVuY29kZV9yYW5nZShyZWZndWVzcyk7XG5cdFx0XHRcdFx0aWYob3B0cy5zaGVldFJvd3MgJiYgb3B0cy5zaGVldFJvd3MgPD0gcmVmZ3Vlc3MuZS5yKSB7XG5cdFx0XHRcdFx0XHRjdXJzaGVldFtcIiFmdWxscmVmXCJdID0gY3Vyc2hlZXRbXCIhcmVmXCJdO1xuXHRcdFx0XHRcdFx0cmVmZ3Vlc3MuZS5yID0gb3B0cy5zaGVldFJvd3MgLSAxO1xuXHRcdFx0XHRcdFx0Y3Vyc2hlZXRbXCIhcmVmXCJdID0gZW5jb2RlX3JhbmdlKHJlZmd1ZXNzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYobWVyZ2VzLmxlbmd0aCkgY3Vyc2hlZXRbXCIhbWVyZ2VzXCJdID0gbWVyZ2VzO1xuXHRcdFx0XHRpZihjc3R5cy5sZW5ndGggPiAwKSBjdXJzaGVldFtcIiFjb2xzXCJdID0gY3N0eXM7XG5cdFx0XHRcdGlmKHJvd2luZm8ubGVuZ3RoID4gMCkgY3Vyc2hlZXRbXCIhcm93c1wiXSA9IHJvd2luZm87XG5cdFx0XHRcdHNoZWV0c1tzaGVldG5hbWVdID0gY3Vyc2hlZXQ7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRyZWZndWVzcyA9IHtzOiB7cjoyMDAwMDAwLCBjOjIwMDAwMDB9LCBlOiB7cjowLCBjOjB9IH07XG5cdFx0XHRcdHIgPSBjID0gMDtcblx0XHRcdFx0c3RhdGUucHVzaChbUm5bM10sIGZhbHNlXSk7XG5cdFx0XHRcdHRtcCA9IHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pO1xuXHRcdFx0XHRzaGVldG5hbWUgPSB1bmVzY2FwZXhtbCh0bXAuTmFtZSk7XG5cdFx0XHRcdGN1cnNoZWV0ID0gKG9wdHMuZGVuc2UgPyBbXSA6IHt9KTtcblx0XHRcdFx0bWVyZ2VzID0gW107XG5cdFx0XHRcdGFycmF5ZiA9IFtdO1xuXHRcdFx0XHRyb3dpbmZvID0gW107XG5cdFx0XHRcdHdzcHJvcHMgPSB7bmFtZTpzaGVldG5hbWUsIEhpZGRlbjowfTtcblx0XHRcdFx0V29ya2Jvb2suU2hlZXRzLnB1c2god3Nwcm9wcyk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICd0YWJsZScgLypjYXNlICdUYWJsZScqLzpcblx0XHRcdGlmKFJuWzFdPT09Jy8nKXtpZigodG1wPXN0YXRlLnBvcCgpKVswXSE9PVJuWzNdKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgc3RhdGU6IFwiK3RtcC5qb2luKFwifFwiKSk7fVxuXHRcdFx0ZWxzZSBpZihSblswXS5zbGljZSgtMikgPT0gXCIvPlwiKSBicmVhaztcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRzdGF0ZS5wdXNoKFtSblszXSwgZmFsc2VdKTtcblx0XHRcdFx0Y3N0eXMgPSBbXTsgc2VlbmNvbCA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdzdHlsZScgLypjYXNlICdTdHlsZScqLzpcblx0XHRcdGlmKFJuWzFdPT09Jy8nKSBwcm9jZXNzX3N0eWxlX3hsbWwoc3R5bGVzLCBzdGFnLCBvcHRzKTtcblx0XHRcdGVsc2Ugc3RhZyA9IHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdudW1iZXJmb3JtYXQnIC8qY2FzZSAnTnVtYmVyRm9ybWF0JyovOlxuXHRcdFx0c3RhZy5uZiA9IHVuZXNjYXBleG1sKHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pLkZvcm1hdCB8fCBcIkdlbmVyYWxcIik7XG5cdFx0XHRpZihYTE1MRm9ybWF0TWFwW3N0YWcubmZdKSBzdGFnLm5mID0gWExNTEZvcm1hdE1hcFtzdGFnLm5mXTtcblx0XHRcdGZvcih2YXIgc3NmaWR4ID0gMDsgc3NmaWR4ICE9IDB4MTg4OyArK3NzZmlkeCkgaWYodGFibGVfZm10W3NzZmlkeF0gPT0gc3RhZy5uZikgYnJlYWs7XG5cdFx0XHRpZihzc2ZpZHggPT0gMHgxODgpIGZvcihzc2ZpZHggPSAweDM5OyBzc2ZpZHggIT0gMHgxODg7ICsrc3NmaWR4KSBpZih0YWJsZV9mbXRbc3NmaWR4XSA9PSBudWxsKSB7IFNTRl9sb2FkKHN0YWcubmYsIHNzZmlkeCk7IGJyZWFrOyB9XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ2NvbHVtbicgLypjYXNlICdDb2x1bW4nKi86XG5cdFx0XHRpZihzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMF0gIT09IC8qJ1RhYmxlJyovJ3RhYmxlJykgYnJlYWs7XG5cdFx0XHRjc3R5ID0geGxtbF9wYXJzZXhtbHRhZyhSblswXSk7XG5cdFx0XHRpZihjc3R5LkhpZGRlbikgeyBjc3R5LmhpZGRlbiA9IHRydWU7IGRlbGV0ZSBjc3R5LkhpZGRlbjsgfVxuXHRcdFx0aWYoY3N0eS5XaWR0aCkgY3N0eS53cHggPSBwYXJzZUludChjc3R5LldpZHRoLCAxMCk7XG5cdFx0XHRpZighc2VlbmNvbCAmJiBjc3R5LndweCA+IDEwKSB7XG5cdFx0XHRcdHNlZW5jb2wgPSB0cnVlOyBNRFcgPSBERUZfTURXOyAvL2ZpbmRfbWR3X3dweChjc3R5LndweCk7XG5cdFx0XHRcdGZvcih2YXIgX2NvbCA9IDA7IF9jb2wgPCBjc3R5cy5sZW5ndGg7ICsrX2NvbCkgaWYoY3N0eXNbX2NvbF0pIHByb2Nlc3NfY29sKGNzdHlzW19jb2xdKTtcblx0XHRcdH1cblx0XHRcdGlmKHNlZW5jb2wpIHByb2Nlc3NfY29sKGNzdHkpO1xuXHRcdFx0Y3N0eXNbKGNzdHkuSW5kZXgtMXx8Y3N0eXMubGVuZ3RoKV0gPSBjc3R5O1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8ICtjc3R5LlNwYW47ICsraSkgY3N0eXNbY3N0eXMubGVuZ3RoXSA9IGR1cChjc3R5KTtcblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAnbmFtZWRyYW5nZScgLypjYXNlICdOYW1lZFJhbmdlJyovOlxuXHRcdFx0aWYoUm5bMV09PT0nLycpIGJyZWFrO1xuXHRcdFx0aWYoIVdvcmtib29rLk5hbWVzKSBXb3JrYm9vay5OYW1lcyA9IFtdO1xuXHRcdFx0dmFyIF9OYW1lZFJhbmdlID0gcGFyc2V4bWx0YWcoUm5bMF0pO1xuXHRcdFx0dmFyIF9EZWZpbmVkTmFtZS8qOkRlZmluZWROYW1lKi8gPSAoe1xuXHRcdFx0XHROYW1lOiBfTmFtZWRSYW5nZS5OYW1lLFxuXHRcdFx0XHRSZWY6IHJjX3RvX2ExKF9OYW1lZFJhbmdlLlJlZmVyc1RvLnNsaWNlKDEpLCB7cjowLCBjOjB9KVxuXHRcdFx0fS8qOmFueSovKTtcblx0XHRcdGlmKFdvcmtib29rLlNoZWV0cy5sZW5ndGg+MCkgX0RlZmluZWROYW1lLlNoZWV0PVdvcmtib29rLlNoZWV0cy5sZW5ndGgtMTtcblx0XHRcdC8qOjogaWYoV29ya2Jvb2suTmFtZXMpICovV29ya2Jvb2suTmFtZXMucHVzaChfRGVmaW5lZE5hbWUpO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICduYW1lZGNlbGwnIC8qY2FzZSAnTmFtZWRDZWxsJyovOiBicmVhaztcblx0XHRjYXNlICdiJyAvKmNhc2UgJ0InKi86IGJyZWFrO1xuXHRcdGNhc2UgJ2knIC8qY2FzZSAnSScqLzogYnJlYWs7XG5cdFx0Y2FzZSAndScgLypjYXNlICdVJyovOiBicmVhaztcblx0XHRjYXNlICdzJyAvKmNhc2UgJ1MnKi86IGJyZWFrO1xuXHRcdGNhc2UgJ2VtJyAvKmNhc2UgJ0VNJyovOiBicmVhaztcblx0XHRjYXNlICdoMicgLypjYXNlICdIMicqLzogYnJlYWs7XG5cdFx0Y2FzZSAnaDMnIC8qY2FzZSAnSDMnKi86IGJyZWFrO1xuXHRcdGNhc2UgJ3N1YicgLypjYXNlICdTdWInKi86IGJyZWFrO1xuXHRcdGNhc2UgJ3N1cCcgLypjYXNlICdTdXAnKi86IGJyZWFrO1xuXHRcdGNhc2UgJ3NwYW4nIC8qY2FzZSAnU3BhbicqLzogYnJlYWs7XG5cdFx0Y2FzZSAnYWxpZ25tZW50JyAvKmNhc2UgJ0FsaWdubWVudCcqLzpcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2JvcmRlcnMnIC8qY2FzZSAnQm9yZGVycycqLzogYnJlYWs7XG5cdFx0Y2FzZSAnYm9yZGVyJyAvKmNhc2UgJ0JvcmRlcicqLzogYnJlYWs7XG5cdFx0Y2FzZSAnZm9udCcgLypjYXNlICdGb250JyovOlxuXHRcdFx0aWYoUm5bMF0uc2xpY2UoLTIpID09PSBcIi8+XCIpIGJyZWFrO1xuXHRcdFx0ZWxzZSBpZihSblsxXT09PVwiL1wiKSBzcyArPSBzdHIuc2xpY2UoZmlkeCwgUm4uaW5kZXgpO1xuXHRcdFx0ZWxzZSBmaWR4ID0gUm4uaW5kZXggKyBSblswXS5sZW5ndGg7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdpbnRlcmlvcicgLypjYXNlICdJbnRlcmlvcicqLzpcblx0XHRcdGlmKCFvcHRzLmNlbGxTdHlsZXMpIGJyZWFrO1xuXHRcdFx0c3RhZy5JbnRlcmlvciA9IHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSAncHJvdGVjdGlvbicgLypjYXNlICdQcm90ZWN0aW9uJyovOiBicmVhaztcblxuXHRcdGNhc2UgJ2F1dGhvcicgLypjYXNlICdBdXRob3InKi86XG5cdFx0Y2FzZSAndGl0bGUnIC8qY2FzZSAnVGl0bGUnKi86XG5cdFx0Y2FzZSAnZGVzY3JpcHRpb24nIC8qY2FzZSAnRGVzY3JpcHRpb24nKi86XG5cdFx0Y2FzZSAnY3JlYXRlZCcgLypjYXNlICdDcmVhdGVkJyovOlxuXHRcdGNhc2UgJ2tleXdvcmRzJyAvKmNhc2UgJ0tleXdvcmRzJyovOlxuXHRcdGNhc2UgJ3N1YmplY3QnIC8qY2FzZSAnU3ViamVjdCcqLzpcblx0XHRjYXNlICdjYXRlZ29yeScgLypjYXNlICdDYXRlZ29yeScqLzpcblx0XHRjYXNlICdjb21wYW55JyAvKmNhc2UgJ0NvbXBhbnknKi86XG5cdFx0Y2FzZSAnbGFzdGF1dGhvcicgLypjYXNlICdMYXN0QXV0aG9yJyovOlxuXHRcdGNhc2UgJ2xhc3RzYXZlZCcgLypjYXNlICdMYXN0U2F2ZWQnKi86XG5cdFx0Y2FzZSAnbGFzdHByaW50ZWQnIC8qY2FzZSAnTGFzdFByaW50ZWQnKi86XG5cdFx0Y2FzZSAndmVyc2lvbicgLypjYXNlICdWZXJzaW9uJyovOlxuXHRcdGNhc2UgJ3JldmlzaW9uJyAvKmNhc2UgJ1JldmlzaW9uJyovOlxuXHRcdGNhc2UgJ3RvdGFsdGltZScgLypjYXNlICdUb3RhbFRpbWUnKi86XG5cdFx0Y2FzZSAnaHlwZXJsaW5rYmFzZScgLypjYXNlICdIeXBlcmxpbmtCYXNlJyovOlxuXHRcdGNhc2UgJ21hbmFnZXInIC8qY2FzZSAnTWFuYWdlcicqLzpcblx0XHRjYXNlICdjb250ZW50c3RhdHVzJyAvKmNhc2UgJ0NvbnRlbnRTdGF0dXMnKi86XG5cdFx0Y2FzZSAnaWRlbnRpZmllcicgLypjYXNlICdJZGVudGlmaWVyJyovOlxuXHRcdGNhc2UgJ2xhbmd1YWdlJyAvKmNhc2UgJ0xhbmd1YWdlJyovOlxuXHRcdGNhc2UgJ2FwcG5hbWUnIC8qY2FzZSAnQXBwTmFtZScqLzpcblx0XHRcdGlmKFJuWzBdLnNsaWNlKC0yKSA9PT0gXCIvPlwiKSBicmVhaztcblx0XHRcdGVsc2UgaWYoUm5bMV09PT1cIi9cIikgeGxtbF9zZXRfcHJvcChQcm9wcywgcmF3X1JuMywgc3RyLnNsaWNlKHBpZHgsIFJuLmluZGV4KSk7XG5cdFx0XHRlbHNlIHBpZHggPSBSbi5pbmRleCArIFJuWzBdLmxlbmd0aDtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ3BhcmFncmFwaHMnIC8qY2FzZSAnUGFyYWdyYXBocycqLzogYnJlYWs7XG5cblx0XHRjYXNlICdzdHlsZXMnIC8qY2FzZSAnU3R5bGVzJyovOlxuXHRcdGNhc2UgJ3dvcmtib29rJyAvKmNhc2UgJ1dvcmtib29rJyovOlxuXHRcdFx0aWYoUm5bMV09PT0nLycpe2lmKCh0bXA9c3RhdGUucG9wKCkpWzBdIT09Um5bM10pIHRocm93IG5ldyBFcnJvcihcIkJhZCBzdGF0ZTogXCIrdG1wLmpvaW4oXCJ8XCIpKTt9XG5cdFx0XHRlbHNlIHN0YXRlLnB1c2goW1JuWzNdLCBmYWxzZV0pO1xuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdjb21tZW50JyAvKmNhc2UgJ0NvbW1lbnQnKi86XG5cdFx0XHRpZihSblsxXT09PScvJyl7XG5cdFx0XHRcdGlmKCh0bXA9c3RhdGUucG9wKCkpWzBdIT09Um5bM10pIHRocm93IG5ldyBFcnJvcihcIkJhZCBzdGF0ZTogXCIrdG1wLmpvaW4oXCJ8XCIpKTtcblx0XHRcdFx0eGxtbF9jbGVhbl9jb21tZW50KGNvbW1lbnQpO1xuXHRcdFx0XHRjb21tZW50cy5wdXNoKGNvbW1lbnQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0c3RhdGUucHVzaChbUm5bM10sIGZhbHNlXSk7XG5cdFx0XHRcdHRtcCA9IHhsbWxfcGFyc2V4bWx0YWcoUm5bMF0pO1xuXHRcdFx0XHRjb21tZW50ID0gKHthOnRtcC5BdXRob3J9Lyo6YW55Ki8pO1xuXHRcdFx0fVxuXHRcdFx0YnJlYWs7XG5cblx0XHRjYXNlICdhdXRvZmlsdGVyJyAvKmNhc2UgJ0F1dG9GaWx0ZXInKi86XG5cdFx0XHRpZihSblsxXT09PScvJyl7aWYoKHRtcD1zdGF0ZS5wb3AoKSlbMF0hPT1SblszXSkgdGhyb3cgbmV3IEVycm9yKFwiQmFkIHN0YXRlOiBcIit0bXAuam9pbihcInxcIikpO31cblx0XHRcdGVsc2UgaWYoUm5bMF0uY2hhckF0KFJuWzBdLmxlbmd0aC0yKSAhPT0gJy8nKSB7XG5cdFx0XHRcdHZhciBBdXRvRmlsdGVyID0geGxtbF9wYXJzZXhtbHRhZyhSblswXSk7XG5cdFx0XHRcdGN1cnNoZWV0WychYXV0b2ZpbHRlciddID0geyByZWY6cmNfdG9fYTEoQXV0b0ZpbHRlci5SYW5nZSkucmVwbGFjZSgvXFwkL2csXCJcIikgfTtcblx0XHRcdFx0c3RhdGUucHVzaChbUm5bM10sIHRydWVdKTtcblx0XHRcdH1cblx0XHRcdGJyZWFrO1xuXG5cdFx0Y2FzZSAnbmFtZScgLypjYXNlICdOYW1lJyovOiBicmVhaztcblxuXHRcdGNhc2UgJ2RhdGF2YWxpZGF0aW9uJyAvKmNhc2UgJ0RhdGFWYWxpZGF0aW9uJyovOlxuXHRcdFx0aWYoUm5bMV09PT0nLycpe1xuXHRcdFx0XHRpZigodG1wPXN0YXRlLnBvcCgpKVswXSE9PVJuWzNdKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgc3RhdGU6IFwiK3RtcC5qb2luKFwifFwiKSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZihSblswXS5jaGFyQXQoUm5bMF0ubGVuZ3RoLTIpICE9PSAnLycpIHN0YXRlLnB1c2goW1JuWzNdLCB0cnVlXSk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ3BpeGVsc3BlcmluY2gnIC8qY2FzZSAnUGl4ZWxzUGVySW5jaCcqLzpcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgJ2NvbXBvbmVudG9wdGlvbnMnIC8qY2FzZSAnQ29tcG9uZW50T3B0aW9ucycqLzpcblx0XHRjYXNlICdkb2N1bWVudHByb3BlcnRpZXMnIC8qY2FzZSAnRG9jdW1lbnRQcm9wZXJ0aWVzJyovOlxuXHRcdGNhc2UgJ2N1c3RvbWRvY3VtZW50cHJvcGVydGllcycgLypjYXNlICdDdXN0b21Eb2N1bWVudFByb3BlcnRpZXMnKi86XG5cdFx0Y2FzZSAnb2ZmaWNlZG9jdW1lbnRzZXR0aW5ncycgLypjYXNlICdPZmZpY2VEb2N1bWVudFNldHRpbmdzJyovOlxuXHRcdGNhc2UgJ3Bpdm90dGFibGUnIC8qY2FzZSAnUGl2b3RUYWJsZScqLzpcblx0XHRjYXNlICdwaXZvdGNhY2hlJyAvKmNhc2UgJ1Bpdm90Q2FjaGUnKi86XG5cdFx0Y2FzZSAnbmFtZXMnIC8qY2FzZSAnTmFtZXMnKi86XG5cdFx0Y2FzZSAnbWFwaW5mbycgLypjYXNlICdNYXBJbmZvJyovOlxuXHRcdGNhc2UgJ3BhZ2VicmVha3MnIC8qY2FzZSAnUGFnZUJyZWFrcycqLzpcblx0XHRjYXNlICdxdWVyeXRhYmxlJyAvKmNhc2UgJ1F1ZXJ5VGFibGUnKi86XG5cdFx0Y2FzZSAnc29ydGluZycgLypjYXNlICdTb3J0aW5nJyovOlxuXHRcdGNhc2UgJ3NjaGVtYScgLypjYXNlICdTY2hlbWEnKi86IC8vY2FzZSAnZGF0YScgLypjYXNlICdkYXRhJyovOlxuXHRcdGNhc2UgJ2NvbmRpdGlvbmFsZm9ybWF0dGluZycgLypjYXNlICdDb25kaXRpb25hbEZvcm1hdHRpbmcnKi86XG5cdFx0Y2FzZSAnc21hcnR0YWd0eXBlJyAvKmNhc2UgJ1NtYXJ0VGFnVHlwZScqLzpcblx0XHRjYXNlICdzbWFydHRhZ3MnIC8qY2FzZSAnU21hcnRUYWdzJyovOlxuXHRcdGNhc2UgJ2V4Y2Vsd29ya2Jvb2snIC8qY2FzZSAnRXhjZWxXb3JrYm9vaycqLzpcblx0XHRjYXNlICd3b3JrYm9va29wdGlvbnMnIC8qY2FzZSAnV29ya2Jvb2tPcHRpb25zJyovOlxuXHRcdGNhc2UgJ3dvcmtzaGVldG9wdGlvbnMnIC8qY2FzZSAnV29ya3NoZWV0T3B0aW9ucycqLzpcblx0XHRcdGlmKFJuWzFdPT09Jy8nKXtpZigodG1wPXN0YXRlLnBvcCgpKVswXSE9PVJuWzNdKSB0aHJvdyBuZXcgRXJyb3IoXCJCYWQgc3RhdGU6IFwiK3RtcC5qb2luKFwifFwiKSk7fVxuXHRcdFx0ZWxzZSBpZihSblswXS5jaGFyQXQoUm5bMF0ubGVuZ3RoLTIpICE9PSAnLycpIHN0YXRlLnB1c2goW1JuWzNdLCB0cnVlXSk7XG5cdFx0XHRicmVhaztcblxuXHRcdGNhc2UgJ251bGwnIC8qY2FzZSAnTnVsbCcqLzogYnJlYWs7XG5cblx0XHRkZWZhdWx0OlxuXHRcdFx0LyogRk9EUyBmaWxlIHJvb3QgaXMgPG9mZmljZTpkb2N1bWVudD4gKi9cblx0XHRcdGlmKHN0YXRlLmxlbmd0aCA9PSAwICYmIFJuWzNdID09IFwiZG9jdW1lbnRcIikgcmV0dXJuIHBhcnNlX2ZvZHMoc3RyLCBvcHRzKTtcblx0XHRcdC8qIFVPUyBmaWxlIHJvb3QgaXMgPHVvZjpVT0Y+ICovXG5cdFx0XHRpZihzdGF0ZS5sZW5ndGggPT0gMCAmJiBSblszXSA9PSBcInVvZlwiLypcIlVPRlwiKi8pIHJldHVybiBwYXJzZV9mb2RzKHN0ciwgb3B0cyk7XG5cblx0XHRcdHZhciBzZWVuID0gdHJ1ZTtcblx0XHRcdHN3aXRjaChzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMF0pIHtcblx0XHRcdFx0LyogT2ZmaWNlRG9jdW1lbnRTZXR0aW5ncyAqL1xuXHRcdFx0XHRjYXNlICdvZmZpY2Vkb2N1bWVudHNldHRpbmdzJyAvKmNhc2UgJ09mZmljZURvY3VtZW50U2V0dGluZ3MnKi86IHN3aXRjaChSblszXSkge1xuXHRcdFx0XHRcdGNhc2UgJ2FsbG93cG5nJyAvKmNhc2UgJ0FsbG93UE5HJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdyZW1vdmVwZXJzb25hbGluZm9ybWF0aW9uJyAvKmNhc2UgJ1JlbW92ZVBlcnNvbmFsSW5mb3JtYXRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Rvd25sb2FkY29tcG9uZW50cycgLypjYXNlICdEb3dubG9hZENvbXBvbmVudHMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2xvY2F0aW9ub2Zjb21wb25lbnRzJyAvKmNhc2UgJ0xvY2F0aW9uT2ZDb21wb25lbnRzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb2xvcnMnIC8qY2FzZSAnQ29sb3JzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb2xvcicgLypjYXNlICdDb2xvcicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaW5kZXgnIC8qY2FzZSAnSW5kZXgnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3JnYicgLypjYXNlICdSR0InKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3RhcmdldHNjcmVlbnNpemUnIC8qY2FzZSAnVGFyZ2V0U2NyZWVuU2l6ZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncmVhZG9ubHlyZWNvbW1lbmRlZCcgLypjYXNlICdSZWFkT25seVJlY29tbWVuZGVkJyovOiBicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OiBzZWVuID0gZmFsc2U7XG5cdFx0XHRcdH0gYnJlYWs7XG5cblx0XHRcdFx0LyogQ29tcG9uZW50T3B0aW9ucyAqL1xuXHRcdFx0XHRjYXNlICdjb21wb25lbnRvcHRpb25zJyAvKmNhc2UgJ0NvbXBvbmVudE9wdGlvbnMnKi86IHN3aXRjaChSblszXSkge1xuXHRcdFx0XHRcdGNhc2UgJ3Rvb2xiYXInIC8qY2FzZSAnVG9vbGJhcicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaGlkZW9mZmljZWxvZ28nIC8qY2FzZSAnSGlkZU9mZmljZUxvZ28nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NwcmVhZHNoZWV0YXV0b2ZpdCcgLypjYXNlICdTcHJlYWRzaGVldEF1dG9GaXQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2xhYmVsJyAvKmNhc2UgJ0xhYmVsJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjYXB0aW9uJyAvKmNhc2UgJ0NhcHRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ21heGhlaWdodCcgLypjYXNlICdNYXhIZWlnaHQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ21heHdpZHRoJyAvKmNhc2UgJ01heFdpZHRoJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICduZXh0c2hlZXRudW1iZXInIC8qY2FzZSAnTmV4dFNoZWV0TnVtYmVyJyovOiBicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OiBzZWVuID0gZmFsc2U7XG5cdFx0XHRcdH0gYnJlYWs7XG5cblx0XHRcdFx0LyogRXhjZWxXb3JrYm9vayAqL1xuXHRcdFx0XHRjYXNlICdleGNlbHdvcmtib29rJyAvKmNhc2UgJ0V4Y2VsV29ya2Jvb2snKi86IHN3aXRjaChSblszXSkge1xuXHRcdFx0XHRcdGNhc2UgJ2RhdGUxOTA0JyAvKmNhc2UgJ0RhdGUxOTA0JyovOlxuXHRcdFx0XHRcdFx0Lyo6OiBpZighV29ya2Jvb2suV0JQcm9wcykgV29ya2Jvb2suV0JQcm9wcyA9IHt9OyAqL1xuXHRcdFx0XHRcdFx0V29ya2Jvb2suV0JQcm9wcy5kYXRlMTkwNCA9IHRydWU7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICd3aW5kb3doZWlnaHQnIC8qY2FzZSAnV2luZG93SGVpZ2h0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd3aW5kb3d3aWR0aCcgLypjYXNlICdXaW5kb3dXaWR0aCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnd2luZG93dG9weCcgLypjYXNlICdXaW5kb3dUb3BYJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd3aW5kb3d0b3B5JyAvKmNhc2UgJ1dpbmRvd1RvcFknKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3RhYnJhdGlvJyAvKmNhc2UgJ1RhYlJhdGlvJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwcm90ZWN0c3RydWN0dXJlJyAvKmNhc2UgJ1Byb3RlY3RTdHJ1Y3R1cmUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3Byb3RlY3R3aW5kb3cnIC8qY2FzZSAnUHJvdGVjdFdpbmRvdycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncHJvdGVjdHdpbmRvd3MnIC8qY2FzZSAnUHJvdGVjdFdpbmRvd3MnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FjdGl2ZXNoZWV0JyAvKmNhc2UgJ0FjdGl2ZVNoZWV0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdkaXNwbGF5aW5rbm90ZXMnIC8qY2FzZSAnRGlzcGxheUlua05vdGVzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmaXJzdHZpc2libGVzaGVldCcgLypjYXNlICdGaXJzdFZpc2libGVTaGVldCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc3VwYm9vaycgLypjYXNlICdTdXBCb29rJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdzaGVldG5hbWUnIC8qY2FzZSAnU2hlZXROYW1lJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdzaGVldGluZGV4JyAvKmNhc2UgJ1NoZWV0SW5kZXgnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NoZWV0aW5kZXhmaXJzdCcgLypjYXNlICdTaGVldEluZGV4Rmlyc3QnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NoZWV0aW5kZXhsYXN0JyAvKmNhc2UgJ1NoZWV0SW5kZXhMYXN0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdkbGwnIC8qY2FzZSAnRGxsJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhY2NlcHRsYWJlbHNpbmZvcm11bGFzJyAvKmNhc2UgJ0FjY2VwdExhYmVsc0luRm9ybXVsYXMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Rvbm90c2F2ZWxpbmt2YWx1ZXMnIC8qY2FzZSAnRG9Ob3RTYXZlTGlua1ZhbHVlcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaXRlcmF0aW9uJyAvKmNhc2UgJ0l0ZXJhdGlvbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbWF4aXRlcmF0aW9ucycgLypjYXNlICdNYXhJdGVyYXRpb25zJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdtYXhjaGFuZ2UnIC8qY2FzZSAnTWF4Q2hhbmdlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwYXRoJyAvKmNhc2UgJ1BhdGgnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3hjdCcgLypjYXNlICdYY3QnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvdW50JyAvKmNhc2UgJ0NvdW50JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdzZWxlY3RlZHNoZWV0cycgLypjYXNlICdTZWxlY3RlZFNoZWV0cycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY2FsY3VsYXRpb24nIC8qY2FzZSAnQ2FsY3VsYXRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3VuY2FsY2VkJyAvKmNhc2UgJ1VuY2FsY2VkJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdzdGFydHVwcHJvbXB0JyAvKmNhc2UgJ1N0YXJ0dXBQcm9tcHQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NybicgLypjYXNlICdDcm4nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2V4dGVybm5hbWUnIC8qY2FzZSAnRXh0ZXJuTmFtZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZm9ybXVsYScgLypjYXNlICdGb3JtdWxhJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb2xmaXJzdCcgLypjYXNlICdDb2xGaXJzdCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY29sbGFzdCcgLypjYXNlICdDb2xMYXN0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd3YW50YWR2aXNlJyAvKmNhc2UgJ1dhbnRBZHZpc2UnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Jvb2xlYW4nIC8qY2FzZSAnQm9vbGVhbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZXJyb3InIC8qY2FzZSAnRXJyb3InKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3RleHQnIC8qY2FzZSAnVGV4dCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnb2xlJyAvKmNhc2UgJ09MRScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbm9hdXRvcmVjb3ZlcicgLypjYXNlICdOb0F1dG9SZWNvdmVyJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwdWJsaXNob2JqZWN0cycgLypjYXNlICdQdWJsaXNoT2JqZWN0cycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZG9ub3RjYWxjdWxhdGViZWZvcmVzYXZlJyAvKmNhc2UgJ0RvTm90Q2FsY3VsYXRlQmVmb3JlU2F2ZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbnVtYmVyJyAvKmNhc2UgJ051bWJlcicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncmVmbW9kZXIxYzEnIC8qY2FzZSAnUmVmTW9kZVIxQzEnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2VtYmVkc2F2ZXNtYXJ0dGFncycgLypjYXNlICdFbWJlZFNhdmVTbWFydFRhZ3MnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHNlZW4gPSBmYWxzZTtcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0XHQvKiBXb3JrYm9va09wdGlvbnMgKi9cblx0XHRcdFx0Y2FzZSAnd29ya2Jvb2tvcHRpb25zJyAvKmNhc2UgJ1dvcmtib29rT3B0aW9ucycqLzogc3dpdGNoKFJuWzNdKSB7XG5cdFx0XHRcdFx0Y2FzZSAnb3djdmVyc2lvbicgLypjYXNlICdPV0NWZXJzaW9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdoZWlnaHQnIC8qY2FzZSAnSGVpZ2h0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd3aWR0aCcgLypjYXNlICdXaWR0aCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDogc2VlbiA9IGZhbHNlO1xuXHRcdFx0XHR9IGJyZWFrO1xuXG5cdFx0XHRcdC8qIFdvcmtzaGVldE9wdGlvbnMgKi9cblx0XHRcdFx0Y2FzZSAnd29ya3NoZWV0b3B0aW9ucycgLypjYXNlICdXb3Jrc2hlZXRPcHRpb25zJyovOiBzd2l0Y2goUm5bM10pIHtcblx0XHRcdFx0XHRjYXNlICd2aXNpYmxlJyAvKmNhc2UgJ1Zpc2libGUnKi86XG5cdFx0XHRcdFx0XHRpZihSblswXS5zbGljZSgtMikgPT09IFwiLz5cIil7LyogZW1wdHkgKi99XG5cdFx0XHRcdFx0XHRlbHNlIGlmKFJuWzFdPT09XCIvXCIpIHN3aXRjaChzdHIuc2xpY2UocGlkeCwgUm4uaW5kZXgpKSB7XG5cdFx0XHRcdFx0XHRcdGNhc2UgXCJTaGVldEhpZGRlblwiOiB3c3Byb3BzLkhpZGRlbiA9IDE7IGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRjYXNlIFwiU2hlZXRWZXJ5SGlkZGVuXCI6IHdzcHJvcHMuSGlkZGVuID0gMjsgYnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHBpZHggPSBSbi5pbmRleCArIFJuWzBdLmxlbmd0aDtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2hlYWRlcicgLypjYXNlICdIZWFkZXInKi86XG5cdFx0XHRcdFx0XHRpZighY3Vyc2hlZXRbJyFtYXJnaW5zJ10pIGRlZmF1bHRfbWFyZ2lucyhjdXJzaGVldFsnIW1hcmdpbnMnXT17fSwgJ3hsbWwnKTtcblx0XHRcdFx0XHRcdGlmKCFpc05hTigrcGFyc2V4bWx0YWcoUm5bMF0pLk1hcmdpbikpIGN1cnNoZWV0WychbWFyZ2lucyddLmhlYWRlciA9ICtwYXJzZXhtbHRhZyhSblswXSkuTWFyZ2luO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZm9vdGVyJyAvKmNhc2UgJ0Zvb3RlcicqLzpcblx0XHRcdFx0XHRcdGlmKCFjdXJzaGVldFsnIW1hcmdpbnMnXSkgZGVmYXVsdF9tYXJnaW5zKGN1cnNoZWV0WychbWFyZ2lucyddPXt9LCAneGxtbCcpO1xuXHRcdFx0XHRcdFx0aWYoIWlzTmFOKCtwYXJzZXhtbHRhZyhSblswXSkuTWFyZ2luKSkgY3Vyc2hlZXRbJyFtYXJnaW5zJ10uZm9vdGVyID0gK3BhcnNleG1sdGFnKFJuWzBdKS5NYXJnaW47XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdwYWdlbWFyZ2lucycgLypjYXNlICdQYWdlTWFyZ2lucycqLzpcblx0XHRcdFx0XHRcdHZhciBwYWdlbWFyZ2lucyA9IHBhcnNleG1sdGFnKFJuWzBdKTtcblx0XHRcdFx0XHRcdGlmKCFjdXJzaGVldFsnIW1hcmdpbnMnXSkgZGVmYXVsdF9tYXJnaW5zKGN1cnNoZWV0WychbWFyZ2lucyddPXt9LCd4bG1sJyk7XG5cdFx0XHRcdFx0XHRpZighaXNOYU4oK3BhZ2VtYXJnaW5zLlRvcCkpIGN1cnNoZWV0WychbWFyZ2lucyddLnRvcCA9ICtwYWdlbWFyZ2lucy5Ub3A7XG5cdFx0XHRcdFx0XHRpZighaXNOYU4oK3BhZ2VtYXJnaW5zLkxlZnQpKSBjdXJzaGVldFsnIW1hcmdpbnMnXS5sZWZ0ID0gK3BhZ2VtYXJnaW5zLkxlZnQ7XG5cdFx0XHRcdFx0XHRpZighaXNOYU4oK3BhZ2VtYXJnaW5zLlJpZ2h0KSkgY3Vyc2hlZXRbJyFtYXJnaW5zJ10ucmlnaHQgPSArcGFnZW1hcmdpbnMuUmlnaHQ7XG5cdFx0XHRcdFx0XHRpZighaXNOYU4oK3BhZ2VtYXJnaW5zLkJvdHRvbSkpIGN1cnNoZWV0WychbWFyZ2lucyddLmJvdHRvbSA9ICtwYWdlbWFyZ2lucy5Cb3R0b207XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRjYXNlICdkaXNwbGF5cmlnaHR0b2xlZnQnIC8qY2FzZSAnRGlzcGxheVJpZ2h0VG9MZWZ0JyovOlxuXHRcdFx0XHRcdFx0aWYoIVdvcmtib29rLlZpZXdzKSBXb3JrYm9vay5WaWV3cyA9IFtdO1xuXHRcdFx0XHRcdFx0aWYoIVdvcmtib29rLlZpZXdzWzBdKSBXb3JrYm9vay5WaWV3c1swXSA9IHt9O1xuXHRcdFx0XHRcdFx0V29ya2Jvb2suVmlld3NbMF0uUlRMID0gdHJ1ZTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnZnJlZXplcGFuZXMnIC8qY2FzZSAnRnJlZXplUGFuZXMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Zyb3plbm5vc3BsaXQnIC8qY2FzZSAnRnJvemVuTm9TcGxpdCcqLzogYnJlYWs7XG5cblx0XHRcdFx0XHRjYXNlICdzcGxpdGhvcml6b250YWwnIC8qY2FzZSAnU3BsaXRIb3Jpem9udGFsJyovOlxuXHRcdFx0XHRcdGNhc2UgJ3NwbGl0dmVydGljYWwnIC8qY2FzZSAnU3BsaXRWZXJ0aWNhbCcqLzpcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnZG9ub3RkaXNwbGF5Z3JpZGxpbmVzJyAvKmNhc2UgJ0RvTm90RGlzcGxheUdyaWRsaW5lcycqLzpcblx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAnYWN0aXZlcm93JyAvKmNhc2UgJ0FjdGl2ZVJvdycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYWN0aXZlY29sJyAvKmNhc2UgJ0FjdGl2ZUNvbCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndG9wcm93Ym90dG9tcGFuZScgLypjYXNlICdUb3BSb3dCb3R0b21QYW5lJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdsZWZ0Y29sdW1ucmlnaHRwYW5lJyAvKmNhc2UgJ0xlZnRDb2x1bW5SaWdodFBhbmUnKi86IGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAndW5zeW5jZWQnIC8qY2FzZSAnVW5zeW5jZWQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ByaW50JyAvKmNhc2UgJ1ByaW50JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwcmludGVycm9ycycgLypjYXNlICdQcmludEVycm9ycycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncGFuZXMnIC8qY2FzZSAnUGFuZXMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NjYWxlJyAvKmNhc2UgJ1NjYWxlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwYW5lJyAvKmNhc2UgJ1BhbmUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ251bWJlcicgLypjYXNlICdOdW1iZXInKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2xheW91dCcgLypjYXNlICdMYXlvdXQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3BhZ2VzZXR1cCcgLypjYXNlICdQYWdlU2V0dXAnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NlbGVjdGVkJyAvKmNhc2UgJ1NlbGVjdGVkJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwcm90ZWN0b2JqZWN0cycgLypjYXNlICdQcm90ZWN0T2JqZWN0cycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZW5hYmxlc2VsZWN0aW9uJyAvKmNhc2UgJ0VuYWJsZVNlbGVjdGlvbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncHJvdGVjdHNjZW5hcmlvcycgLypjYXNlICdQcm90ZWN0U2NlbmFyaW9zJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2YWxpZHByaW50ZXJpbmZvJyAvKmNhc2UgJ1ZhbGlkUHJpbnRlckluZm8nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2hvcml6b250YWxyZXNvbHV0aW9uJyAvKmNhc2UgJ0hvcml6b250YWxSZXNvbHV0aW9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2ZXJ0aWNhbHJlc29sdXRpb24nIC8qY2FzZSAnVmVydGljYWxSZXNvbHV0aW9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdudW1iZXJvZmNvcGllcycgLypjYXNlICdOdW1iZXJvZkNvcGllcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYWN0aXZlcGFuZScgLypjYXNlICdBY3RpdmVQYW5lJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd0b3Byb3d2aXNpYmxlJyAvKmNhc2UgJ1RvcFJvd1Zpc2libGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2xlZnRjb2x1bW52aXNpYmxlJyAvKmNhc2UgJ0xlZnRDb2x1bW5WaXNpYmxlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmaXR0b3BhZ2UnIC8qY2FzZSAnRml0VG9QYWdlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdyYW5nZXNlbGVjdGlvbicgLypjYXNlICdSYW5nZVNlbGVjdGlvbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncGFwZXJzaXplaW5kZXgnIC8qY2FzZSAnUGFwZXJTaXplSW5kZXgnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3BhZ2VsYXlvdXR6b29tJyAvKmNhc2UgJ1BhZ2VMYXlvdXRab29tJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwYWdlYnJlYWt6b29tJyAvKmNhc2UgJ1BhZ2VCcmVha1pvb20nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2ZpbHRlcm9uJyAvKmNhc2UgJ0ZpbHRlck9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmaXR3aWR0aCcgLypjYXNlICdGaXRXaWR0aCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZml0aGVpZ2h0JyAvKmNhc2UgJ0ZpdEhlaWdodCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY29tbWVudHNsYXlvdXQnIC8qY2FzZSAnQ29tbWVudHNMYXlvdXQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3pvb20nIC8qY2FzZSAnWm9vbScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbGVmdHRvcmlnaHQnIC8qY2FzZSAnTGVmdFRvUmlnaHQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2dyaWRsaW5lcycgLypjYXNlICdHcmlkbGluZXMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FsbG93c29ydCcgLypjYXNlICdBbGxvd1NvcnQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FsbG93ZmlsdGVyJyAvKmNhc2UgJ0FsbG93RmlsdGVyJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhbGxvd2luc2VydHJvd3MnIC8qY2FzZSAnQWxsb3dJbnNlcnRSb3dzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhbGxvd2RlbGV0ZXJvd3MnIC8qY2FzZSAnQWxsb3dEZWxldGVSb3dzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhbGxvd2luc2VydGNvbHMnIC8qY2FzZSAnQWxsb3dJbnNlcnRDb2xzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhbGxvd2RlbGV0ZWNvbHMnIC8qY2FzZSAnQWxsb3dEZWxldGVDb2xzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhbGxvd2luc2VydGh5cGVybGlua3MnIC8qY2FzZSAnQWxsb3dJbnNlcnRIeXBlcmxpbmtzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhbGxvd2Zvcm1hdGNlbGxzJyAvKmNhc2UgJ0FsbG93Rm9ybWF0Q2VsbHMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FsbG93c2l6ZWNvbHMnIC8qY2FzZSAnQWxsb3dTaXplQ29scycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYWxsb3dzaXplcm93cycgLypjYXNlICdBbGxvd1NpemVSb3dzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdub3N1bW1hcnlyb3dzYmVsb3dkZXRhaWwnIC8qY2FzZSAnTm9TdW1tYXJ5Um93c0JlbG93RGV0YWlsJyovOlxuXHRcdFx0XHRcdFx0aWYoIWN1cnNoZWV0W1wiIW91dGxpbmVcIl0pIGN1cnNoZWV0W1wiIW91dGxpbmVcIl0gPSB7fTtcblx0XHRcdFx0XHRcdGN1cnNoZWV0W1wiIW91dGxpbmVcIl0uYWJvdmUgPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndGFiY29sb3JpbmRleCcgLypjYXNlICdUYWJDb2xvckluZGV4JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdkb25vdGRpc3BsYXloZWFkaW5ncycgLypjYXNlICdEb05vdERpc3BsYXlIZWFkaW5ncycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc2hvd3BhZ2VsYXlvdXR6b29tJyAvKmNhc2UgJ1Nob3dQYWdlTGF5b3V0Wm9vbScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbm9zdW1tYXJ5Y29sdW1uc3JpZ2h0ZGV0YWlsJyAvKmNhc2UgJ05vU3VtbWFyeUNvbHVtbnNSaWdodERldGFpbCcqLzpcblx0XHRcdFx0XHRcdGlmKCFjdXJzaGVldFtcIiFvdXRsaW5lXCJdKSBjdXJzaGVldFtcIiFvdXRsaW5lXCJdID0ge307XG5cdFx0XHRcdFx0XHRjdXJzaGVldFtcIiFvdXRsaW5lXCJdLmxlZnQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYmxhY2thbmR3aGl0ZScgLypjYXNlICdCbGFja0FuZFdoaXRlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdkb25vdGRpc3BsYXl6ZXJvcycgLypjYXNlICdEb05vdERpc3BsYXlaZXJvcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZGlzcGxheXBhZ2VicmVhaycgLypjYXNlICdEaXNwbGF5UGFnZUJyZWFrJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdyb3djb2xoZWFkaW5ncycgLypjYXNlICdSb3dDb2xIZWFkaW5ncycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZG9ub3RkaXNwbGF5b3V0bGluZScgLypjYXNlICdEb05vdERpc3BsYXlPdXRsaW5lJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdub29yaWVudGF0aW9uJyAvKmNhc2UgJ05vT3JpZW50YXRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FsbG93dXNlcGl2b3R0YWJsZXMnIC8qY2FzZSAnQWxsb3dVc2VQaXZvdFRhYmxlcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnemVyb2hlaWdodCcgLypjYXNlICdaZXJvSGVpZ2h0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2aWV3YWJsZXJhbmdlJyAvKmNhc2UgJ1ZpZXdhYmxlUmFuZ2UnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NlbGVjdGlvbicgLypjYXNlICdTZWxlY3Rpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3Byb3RlY3Rjb250ZW50cycgLypjYXNlICdQcm90ZWN0Q29udGVudHMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHNlZW4gPSBmYWxzZTtcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0XHQvKiBQaXZvdFRhYmxlICovXG5cdFx0XHRcdGNhc2UgJ3Bpdm90dGFibGUnIC8qY2FzZSAnUGl2b3RUYWJsZScqLzogY2FzZSAncGl2b3RjYWNoZScgLypjYXNlICdQaXZvdENhY2hlJyovOiBzd2l0Y2goUm5bM10pIHtcblx0XHRcdFx0XHRjYXNlICdpbW1lZGlhdGVpdGVtc29uZHJvcCcgLypjYXNlICdJbW1lZGlhdGVJdGVtc09uRHJvcCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc2hvd3BhZ2VtdWx0aXBsZWl0ZW1sYWJlbCcgLypjYXNlICdTaG93UGFnZU11bHRpcGxlSXRlbUxhYmVsJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb21wYWN0cm93aW5kZW50JyAvKmNhc2UgJ0NvbXBhY3RSb3dJbmRlbnQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2xvY2F0aW9uJyAvKmNhc2UgJ0xvY2F0aW9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwaXZvdGZpZWxkJyAvKmNhc2UgJ1Bpdm90RmllbGQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ29yaWVudGF0aW9uJyAvKmNhc2UgJ09yaWVudGF0aW9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdsYXlvdXRmb3JtJyAvKmNhc2UgJ0xheW91dEZvcm0nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2xheW91dHN1YnRvdGFsbG9jYXRpb24nIC8qY2FzZSAnTGF5b3V0U3VidG90YWxMb2NhdGlvbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbGF5b3V0Y29tcGFjdHJvdycgLypjYXNlICdMYXlvdXRDb21wYWN0Um93JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwb3NpdGlvbicgLypjYXNlICdQb3NpdGlvbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncGl2b3RpdGVtJyAvKmNhc2UgJ1Bpdm90SXRlbScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZGF0YXR5cGUnIC8qY2FzZSAnRGF0YVR5cGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2RhdGFmaWVsZCcgLypjYXNlICdEYXRhRmllbGQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NvdXJjZW5hbWUnIC8qY2FzZSAnU291cmNlTmFtZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncGFyZW50ZmllbGQnIC8qY2FzZSAnUGFyZW50RmllbGQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3B0bGluZWl0ZW1zJyAvKmNhc2UgJ1BUTGluZUl0ZW1zJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwdGxpbmVpdGVtJyAvKmNhc2UgJ1BUTGluZUl0ZW0nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvdW50b2ZzYW1laXRlbXMnIC8qY2FzZSAnQ291bnRPZlNhbWVJdGVtcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaXRlbScgLypjYXNlICdJdGVtJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdpdGVtdHlwZScgLypjYXNlICdJdGVtVHlwZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncHRzb3VyY2UnIC8qY2FzZSAnUFRTb3VyY2UnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NhY2hlaW5kZXgnIC8qY2FzZSAnQ2FjaGVJbmRleCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY29uc29saWRhdGlvbnJlZmVyZW5jZScgLypjYXNlICdDb25zb2xpZGF0aW9uUmVmZXJlbmNlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmaWxlbmFtZScgLypjYXNlICdGaWxlTmFtZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncmVmZXJlbmNlJyAvKmNhc2UgJ1JlZmVyZW5jZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbm9jb2x1bW5ncmFuZCcgLypjYXNlICdOb0NvbHVtbkdyYW5kJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdub3Jvd2dyYW5kJyAvKmNhc2UgJ05vUm93R3JhbmQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2JsYW5rbGluZWFmdGVyaXRlbXMnIC8qY2FzZSAnQmxhbmtMaW5lQWZ0ZXJJdGVtcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaGlkZGVuJyAvKmNhc2UgJ0hpZGRlbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc3VidG90YWwnIC8qY2FzZSAnU3VidG90YWwnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Jhc2VmaWVsZCcgLypjYXNlICdCYXNlRmllbGQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ21hcGNoaWxkaXRlbXMnIC8qY2FzZSAnTWFwQ2hpbGRJdGVtcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZnVuY3Rpb24nIC8qY2FzZSAnRnVuY3Rpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3JlZnJlc2hvbmZpbGVvcGVuJyAvKmNhc2UgJ1JlZnJlc2hPbkZpbGVPcGVuJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdwcmludHNldHRpdGxlcycgLypjYXNlICdQcmludFNldFRpdGxlcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbWVyZ2VsYWJlbHMnIC8qY2FzZSAnTWVyZ2VMYWJlbHMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2RlZmF1bHR2ZXJzaW9uJyAvKmNhc2UgJ0RlZmF1bHRWZXJzaW9uJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdyZWZyZXNobmFtZScgLypjYXNlICdSZWZyZXNoTmFtZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncmVmcmVzaGRhdGUnIC8qY2FzZSAnUmVmcmVzaERhdGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3JlZnJlc2hkYXRlY29weScgLypjYXNlICdSZWZyZXNoRGF0ZUNvcHknKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ZlcnNpb25sYXN0cmVmcmVzaCcgLypjYXNlICdWZXJzaW9uTGFzdFJlZnJlc2gnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ZlcnNpb25sYXN0dXBkYXRlJyAvKmNhc2UgJ1ZlcnNpb25MYXN0VXBkYXRlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2ZXJzaW9udXBkYXRlYWJsZW1pbicgLypjYXNlICdWZXJzaW9uVXBkYXRlYWJsZU1pbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndmVyc2lvbnJlZnJlc2hhYmxlbWluJyAvKmNhc2UgJ1ZlcnNpb25SZWZyZXNoYWJsZU1pbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY2FsY3VsYXRpb24nIC8qY2FzZSAnQ2FsY3VsYXRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHNlZW4gPSBmYWxzZTtcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0XHQvKiBQYWdlQnJlYWtzICovXG5cdFx0XHRcdGNhc2UgJ3BhZ2VicmVha3MnIC8qY2FzZSAnUGFnZUJyZWFrcycqLzogc3dpdGNoKFJuWzNdKSB7XG5cdFx0XHRcdFx0Y2FzZSAnY29sYnJlYWtzJyAvKmNhc2UgJ0NvbEJyZWFrcycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY29sYnJlYWsnIC8qY2FzZSAnQ29sQnJlYWsnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3Jvd2JyZWFrcycgLypjYXNlICdSb3dCcmVha3MnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3Jvd2JyZWFrJyAvKmNhc2UgJ1Jvd0JyZWFrJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb2xzdGFydCcgLypjYXNlICdDb2xTdGFydCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY29sZW5kJyAvKmNhc2UgJ0NvbEVuZCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncm93ZW5kJyAvKmNhc2UgJ1Jvd0VuZCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDogc2VlbiA9IGZhbHNlO1xuXHRcdFx0XHR9IGJyZWFrO1xuXG5cdFx0XHRcdC8qIEF1dG9GaWx0ZXIgKi9cblx0XHRcdFx0Y2FzZSAnYXV0b2ZpbHRlcicgLypjYXNlICdBdXRvRmlsdGVyJyovOiBzd2l0Y2goUm5bM10pIHtcblx0XHRcdFx0XHRjYXNlICdhdXRvZmlsdGVyY29sdW1uJyAvKmNhc2UgJ0F1dG9GaWx0ZXJDb2x1bW4nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2F1dG9maWx0ZXJjb25kaXRpb24nIC8qY2FzZSAnQXV0b0ZpbHRlckNvbmRpdGlvbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYXV0b2ZpbHRlcmFuZCcgLypjYXNlICdBdXRvRmlsdGVyQW5kJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhdXRvZmlsdGVyb3InIC8qY2FzZSAnQXV0b0ZpbHRlck9yJyovOiBicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OiBzZWVuID0gZmFsc2U7XG5cdFx0XHRcdH0gYnJlYWs7XG5cblx0XHRcdFx0LyogUXVlcnlUYWJsZSAqL1xuXHRcdFx0XHRjYXNlICdxdWVyeXRhYmxlJyAvKmNhc2UgJ1F1ZXJ5VGFibGUnKi86IHN3aXRjaChSblszXSkge1xuXHRcdFx0XHRcdGNhc2UgJ2lkJyAvKmNhc2UgJ0lkJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhdXRvZm9ybWF0Zm9udCcgLypjYXNlICdBdXRvRm9ybWF0Rm9udCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYXV0b2Zvcm1hdHBhdHRlcm4nIC8qY2FzZSAnQXV0b0Zvcm1hdFBhdHRlcm4nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3F1ZXJ5c291cmNlJyAvKmNhc2UgJ1F1ZXJ5U291cmNlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdxdWVyeXR5cGUnIC8qY2FzZSAnUXVlcnlUeXBlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdlbmFibGVyZWRpcmVjdGlvbnMnIC8qY2FzZSAnRW5hYmxlUmVkaXJlY3Rpb25zJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdyZWZyZXNoZWRpbnhsOScgLypjYXNlICdSZWZyZXNoZWRJblhsOScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndXJsc3RyaW5nJyAvKmNhc2UgJ1VSTFN0cmluZycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnaHRtbHRhYmxlcycgLypjYXNlICdIVE1MVGFibGVzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb25uZWN0aW9uJyAvKmNhc2UgJ0Nvbm5lY3Rpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvbW1hbmR0ZXh0JyAvKmNhc2UgJ0NvbW1hbmRUZXh0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdyZWZyZXNoaW5mbycgLypjYXNlICdSZWZyZXNoSW5mbycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbm90aXRsZXMnIC8qY2FzZSAnTm9UaXRsZXMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ25leHRpZCcgLypjYXNlICdOZXh0SWQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvbHVtbmluZm8nIC8qY2FzZSAnQ29sdW1uSW5mbycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnb3ZlcndyaXRlY2VsbHMnIC8qY2FzZSAnT3ZlcndyaXRlQ2VsbHMnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Rvbm90cHJvbXB0Zm9yZmlsZScgLypjYXNlICdEb05vdFByb21wdEZvckZpbGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3RleHR3aXphcmRzZXR0aW5ncycgLypjYXNlICdUZXh0V2l6YXJkU2V0dGluZ3MnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3NvdXJjZScgLypjYXNlICdTb3VyY2UnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ251bWJlcicgLypjYXNlICdOdW1iZXInKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2RlY2ltYWwnIC8qY2FzZSAnRGVjaW1hbCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndGhvdXNhbmRzZXBhcmF0b3InIC8qY2FzZSAnVGhvdXNhbmRTZXBhcmF0b3InKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3RyYWlsaW5nbWludXNudW1iZXJzJyAvKmNhc2UgJ1RyYWlsaW5nTWludXNOdW1iZXJzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmb3JtYXRzZXR0aW5ncycgLypjYXNlICdGb3JtYXRTZXR0aW5ncycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZmllbGR0eXBlJyAvKmNhc2UgJ0ZpZWxkVHlwZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZGVsaW1pdGVycycgLypjYXNlICdEZWxpbWl0ZXJzJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd0YWInIC8qY2FzZSAnVGFiJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjb21tYScgLypjYXNlICdDb21tYScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnYXV0b2Zvcm1hdG5hbWUnIC8qY2FzZSAnQXV0b0Zvcm1hdE5hbWUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ZlcnNpb25sYXN0ZWRpdCcgLypjYXNlICdWZXJzaW9uTGFzdEVkaXQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ZlcnNpb25sYXN0cmVmcmVzaCcgLypjYXNlICdWZXJzaW9uTGFzdFJlZnJlc2gnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHNlZW4gPSBmYWxzZTtcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0XHRjYXNlICdkYXRhdmFsaWRhdGlvbicgLypjYXNlICdEYXRhVmFsaWRhdGlvbicqLzpcblx0XHRcdFx0c3dpdGNoKFJuWzNdKSB7XG5cdFx0XHRcdFx0Y2FzZSAncmFuZ2UnIC8qY2FzZSAnUmFuZ2UnKi86IGJyZWFrO1xuXG5cdFx0XHRcdFx0Y2FzZSAndHlwZScgLypjYXNlICdUeXBlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdtaW4nIC8qY2FzZSAnTWluJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdtYXgnIC8qY2FzZSAnTWF4JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdzb3J0JyAvKmNhc2UgJ1NvcnQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Rlc2NlbmRpbmcnIC8qY2FzZSAnRGVzY2VuZGluZycqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnb3JkZXInIC8qY2FzZSAnT3JkZXInKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Nhc2VzZW5zaXRpdmUnIC8qY2FzZSAnQ2FzZVNlbnNpdGl2ZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAndmFsdWUnIC8qY2FzZSAnVmFsdWUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Vycm9yc3R5bGUnIC8qY2FzZSAnRXJyb3JTdHlsZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZXJyb3JtZXNzYWdlJyAvKmNhc2UgJ0Vycm9yTWVzc2FnZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZXJyb3J0aXRsZScgLypjYXNlICdFcnJvclRpdGxlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdpbnB1dG1lc3NhZ2UnIC8qY2FzZSAnSW5wdXRNZXNzYWdlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdpbnB1dHRpdGxlJyAvKmNhc2UgJ0lucHV0VGl0bGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvbWJvaGlkZScgLypjYXNlICdDb21ib0hpZGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2lucHV0aGlkZScgLypjYXNlICdJbnB1dEhpZGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvbmRpdGlvbicgLypjYXNlICdDb25kaXRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3F1YWxpZmllcicgLypjYXNlICdRdWFsaWZpZXInKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3VzZWJsYW5rJyAvKmNhc2UgJ1VzZUJsYW5rJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2YWx1ZTEnIC8qY2FzZSAnVmFsdWUxJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2YWx1ZTInIC8qY2FzZSAnVmFsdWUyJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmb3JtYXQnIC8qY2FzZSAnRm9ybWF0JyovOiBicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ2NlbGxyYW5nZWxpc3QnIC8qY2FzZSAnQ2VsbFJhbmdlTGlzdCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0ZGVmYXVsdDogc2VlbiA9IGZhbHNlO1xuXHRcdFx0XHR9IGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgJ3NvcnRpbmcnIC8qY2FzZSAnU29ydGluZycqLzpcblx0XHRcdFx0Y2FzZSAnY29uZGl0aW9uYWxmb3JtYXR0aW5nJyAvKmNhc2UgJ0NvbmRpdGlvbmFsRm9ybWF0dGluZycqLzpcblx0XHRcdFx0c3dpdGNoKFJuWzNdKSB7XG5cdFx0XHRcdFx0Y2FzZSAncmFuZ2UnIC8qY2FzZSAnUmFuZ2UnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3R5cGUnIC8qY2FzZSAnVHlwZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbWluJyAvKmNhc2UgJ01pbicqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnbWF4JyAvKmNhc2UgJ01heCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnc29ydCcgLypjYXNlICdTb3J0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdkZXNjZW5kaW5nJyAvKmNhc2UgJ0Rlc2NlbmRpbmcnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ29yZGVyJyAvKmNhc2UgJ09yZGVyJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdjYXNlc2Vuc2l0aXZlJyAvKmNhc2UgJ0Nhc2VTZW5zaXRpdmUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3ZhbHVlJyAvKmNhc2UgJ1ZhbHVlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdlcnJvcnN0eWxlJyAvKmNhc2UgJ0Vycm9yU3R5bGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Vycm9ybWVzc2FnZScgLypjYXNlICdFcnJvck1lc3NhZ2UnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2Vycm9ydGl0bGUnIC8qY2FzZSAnRXJyb3JUaXRsZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnY2VsbHJhbmdlbGlzdCcgLypjYXNlICdDZWxsUmFuZ2VMaXN0JyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdpbnB1dG1lc3NhZ2UnIC8qY2FzZSAnSW5wdXRNZXNzYWdlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdpbnB1dHRpdGxlJyAvKmNhc2UgJ0lucHV0VGl0bGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvbWJvaGlkZScgLypjYXNlICdDb21ib0hpZGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2lucHV0aGlkZScgLypjYXNlICdJbnB1dEhpZGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2NvbmRpdGlvbicgLypjYXNlICdDb25kaXRpb24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3F1YWxpZmllcicgLypjYXNlICdRdWFsaWZpZXInKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3VzZWJsYW5rJyAvKmNhc2UgJ1VzZUJsYW5rJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2YWx1ZTEnIC8qY2FzZSAnVmFsdWUxJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd2YWx1ZTInIC8qY2FzZSAnVmFsdWUyJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdmb3JtYXQnIC8qY2FzZSAnRm9ybWF0JyovOiBicmVhaztcblx0XHRcdFx0XHRkZWZhdWx0OiBzZWVuID0gZmFsc2U7XG5cdFx0XHRcdH0gYnJlYWs7XG5cblx0XHRcdFx0LyogTWFwSW5mbyAoc2NoZW1hKSAqL1xuXHRcdFx0XHRjYXNlICdtYXBpbmZvJyAvKmNhc2UgJ01hcEluZm8nKi86IGNhc2UgJ3NjaGVtYScgLypjYXNlICdTY2hlbWEnKi86IGNhc2UgJ2RhdGEnIC8qY2FzZSAnZGF0YScqLzogc3dpdGNoKFJuWzNdKSB7XG5cdFx0XHRcdFx0Y2FzZSAnbWFwJyAvKmNhc2UgJ01hcCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZW50cnknIC8qY2FzZSAnRW50cnknKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3JhbmdlJyAvKmNhc2UgJ1JhbmdlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICd4cGF0aCcgLypjYXNlICdYUGF0aCcqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZmllbGQnIC8qY2FzZSAnRmllbGQnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ3hzZHR5cGUnIC8qY2FzZSAnWFNEVHlwZScqLzogYnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAnZmlsdGVyb24nIC8qY2FzZSAnRmlsdGVyT24nKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2FnZ3JlZ2F0ZScgLypjYXNlICdBZ2dyZWdhdGUnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2VsZW1lbnR0eXBlJyAvKmNhc2UgJ0VsZW1lbnRUeXBlJyovOiBicmVhaztcblx0XHRcdFx0XHRjYXNlICdhdHRyaWJ1dGV0eXBlJyAvKmNhc2UgJ0F0dHJpYnV0ZVR5cGUnKi86IGJyZWFrO1xuXHRcdFx0XHQvKiBUaGVzZSBhcmUgZnJvbSB4c2QgKFhNTCBTY2hlbWEgRGVmaW5pdGlvbikgKi9cblx0XHRcdFx0XHRjYXNlICdzY2hlbWEnIC8qY2FzZSAnc2NoZW1hJyovOlxuXHRcdFx0XHRcdGNhc2UgJ2VsZW1lbnQnIC8qY2FzZSAnZWxlbWVudCcqLzpcblx0XHRcdFx0XHRjYXNlICdjb21wbGV4dHlwZScgLypjYXNlICdjb21wbGV4VHlwZScqLzpcblx0XHRcdFx0XHRjYXNlICdkYXRhdHlwZScgLypjYXNlICdkYXRhdHlwZScqLzpcblx0XHRcdFx0XHRjYXNlICdhbGwnIC8qY2FzZSAnYWxsJyovOlxuXHRcdFx0XHRcdGNhc2UgJ2F0dHJpYnV0ZScgLypjYXNlICdhdHRyaWJ1dGUnKi86XG5cdFx0XHRcdFx0Y2FzZSAnZXh0ZW5kcycgLypjYXNlICdleHRlbmRzJyovOiBicmVhaztcblxuXHRcdFx0XHRcdGNhc2UgJ3JvdycgLypjYXNlICdyb3cnKi86IGJyZWFrO1xuXHRcdFx0XHRcdGRlZmF1bHQ6IHNlZW4gPSBmYWxzZTtcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0XHQvKiBTbWFydFRhZ3MgKGNhbiBiZSBhbnl0aGluZykgKi9cblx0XHRcdFx0Y2FzZSAnc21hcnR0YWdzJyAvKmNhc2UgJ1NtYXJ0VGFncycqLzogYnJlYWs7XG5cblx0XHRcdFx0ZGVmYXVsdDogc2VlbiA9IGZhbHNlOyBicmVhaztcblx0XHRcdH1cblx0XHRcdGlmKHNlZW4pIGJyZWFrO1xuXHRcdFx0LyogQ3VzdG9tRG9jdW1lbnRQcm9wZXJ0aWVzICovXG5cdFx0XHRpZihSblszXS5tYXRjaCgvIVxcW0NEQVRBLykpIGJyZWFrO1xuXHRcdFx0aWYoIXN0YXRlW3N0YXRlLmxlbmd0aC0xXVsxXSkgdGhyb3cgJ1VucmVjb2duaXplZCB0YWc6ICcgKyBSblszXSArIFwifFwiICsgc3RhdGUuam9pbihcInxcIik7XG5cdFx0XHRpZihzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMF09PT0vKidDdXN0b21Eb2N1bWVudFByb3BlcnRpZXMnKi8nY3VzdG9tZG9jdW1lbnRwcm9wZXJ0aWVzJykge1xuXHRcdFx0XHRpZihSblswXS5zbGljZSgtMikgPT09IFwiLz5cIikgYnJlYWs7XG5cdFx0XHRcdGVsc2UgaWYoUm5bMV09PT1cIi9cIikgeGxtbF9zZXRfY3VzdHByb3AoQ3VzdHByb3BzLCByYXdfUm4zLCBjcCwgc3RyLnNsaWNlKHBpZHgsIFJuLmluZGV4KSk7XG5cdFx0XHRcdGVsc2UgeyBjcCA9IFJuOyBwaWR4ID0gUm4uaW5kZXggKyBSblswXS5sZW5ndGg7IH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZihvcHRzLldURikgdGhyb3cgJ1VucmVjb2duaXplZCB0YWc6ICcgKyBSblszXSArIFwifFwiICsgc3RhdGUuam9pbihcInxcIik7XG5cdH1cblx0dmFyIG91dCA9ICh7fS8qOmFueSovKTtcblx0aWYoIW9wdHMuYm9va1NoZWV0cyAmJiAhb3B0cy5ib29rUHJvcHMpIG91dC5TaGVldHMgPSBzaGVldHM7XG5cdG91dC5TaGVldE5hbWVzID0gc2hlZXRuYW1lcztcblx0b3V0Lldvcmtib29rID0gV29ya2Jvb2s7XG5cdG91dC5TU0YgPSBkdXAodGFibGVfZm10KTtcblx0b3V0LlByb3BzID0gUHJvcHM7XG5cdG91dC5DdXN0cHJvcHMgPSBDdXN0cHJvcHM7XG5cdHJldHVybiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX3hsbWwoZGF0YS8qOlJhd0J5dGVzfHN0cmluZyovLCBvcHRzKS8qOldvcmtib29rKi8ge1xuXHRmaXhfcmVhZF9vcHRzKG9wdHM9b3B0c3x8e30pO1xuXHRzd2l0Y2gob3B0cy50eXBlfHxcImJhc2U2NFwiKSB7XG5cdFx0Y2FzZSBcImJhc2U2NFwiOiByZXR1cm4gcGFyc2VfeGxtbF94bWwoQmFzZTY0X2RlY29kZShkYXRhKSwgb3B0cyk7XG5cdFx0Y2FzZSBcImJpbmFyeVwiOiBjYXNlIFwiYnVmZmVyXCI6IGNhc2UgXCJmaWxlXCI6IHJldHVybiBwYXJzZV94bG1sX3htbChkYXRhLCBvcHRzKTtcblx0XHRjYXNlIFwiYXJyYXlcIjogcmV0dXJuIHBhcnNlX3hsbWxfeG1sKGEycyhkYXRhKSwgb3B0cyk7XG5cdH1cblx0Lyo6OiB0aHJvdyBuZXcgRXJyb3IoXCJ1bnN1cHBvcnRlZCB0eXBlIFwiICsgb3B0cy50eXBlKTsgKi9cbn1cblxuLyogVE9ETyAqL1xuZnVuY3Rpb24gd3JpdGVfcHJvcHNfeGxtbCh3Yi8qOldvcmtib29rKi8sIG9wdHMpLyo6c3RyaW5nKi8ge1xuXHR2YXIgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHQvKiBEb2N1bWVudFByb3BlcnRpZXMgKi9cblx0aWYod2IuUHJvcHMpIG8ucHVzaCh4bG1sX3dyaXRlX2RvY3Byb3BzKHdiLlByb3BzLCBvcHRzKSk7XG5cdC8qIEN1c3RvbURvY3VtZW50UHJvcGVydGllcyAqL1xuXHRpZih3Yi5DdXN0cHJvcHMpIG8ucHVzaCh4bG1sX3dyaXRlX2N1c3Rwcm9wcyh3Yi5Qcm9wcywgd2IuQ3VzdHByb3BzLCBvcHRzKSk7XG5cdHJldHVybiBvLmpvaW4oXCJcIik7XG59XG4vKiBUT0RPICovXG5mdW5jdGlvbiB3cml0ZV93Yl94bG1sKC8qOjp3Yiwgb3B0cyovKS8qOnN0cmluZyovIHtcblx0LyogT2ZmaWNlRG9jdW1lbnRTZXR0aW5ncyAqL1xuXHQvKiBFeGNlbFdvcmtib29rICovXG5cdHJldHVybiBcIlwiO1xufVxuLyogVE9ETyAqL1xuZnVuY3Rpb24gd3JpdGVfc3R5X3hsbWwod2IsIG9wdHMpLyo6c3RyaW5nKi8ge1xuXHQvKiBTdHlsZXMgKi9cblx0dmFyIHN0eWxlcy8qOkFycmF5PHN0cmluZz4qLyA9IFsnPFN0eWxlIHNzOklEPVwiRGVmYXVsdFwiIHNzOk5hbWU9XCJOb3JtYWxcIj48TnVtYmVyRm9ybWF0Lz48L1N0eWxlPiddO1xuXHRvcHRzLmNlbGxYZnMuZm9yRWFjaChmdW5jdGlvbih4ZiwgaWQpIHtcblx0XHR2YXIgcGF5bG9hZC8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRcdHBheWxvYWQucHVzaCh3cml0ZXh0YWcoJ051bWJlckZvcm1hdCcsIG51bGwsIHtcInNzOkZvcm1hdFwiOiBlc2NhcGV4bWwodGFibGVfZm10W3hmLm51bUZtdElkXSl9KSk7XG5cblx0XHR2YXIgbyA9IC8qOjooKi97XCJzczpJRFwiOiBcInNcIiArICgyMStpZCl9Lyo6OiA6YW55KSovO1xuXHRcdHN0eWxlcy5wdXNoKHdyaXRleHRhZygnU3R5bGUnLCBwYXlsb2FkLmpvaW4oXCJcIiksIG8pKTtcblx0fSk7XG5cdHJldHVybiB3cml0ZXh0YWcoXCJTdHlsZXNcIiwgc3R5bGVzLmpvaW4oXCJcIikpO1xufVxuZnVuY3Rpb24gd3JpdGVfbmFtZV94bG1sKG4pIHsgcmV0dXJuIHdyaXRleHRhZyhcIk5hbWVkUmFuZ2VcIiwgbnVsbCwge1wic3M6TmFtZVwiOiBuLk5hbWUsIFwic3M6UmVmZXJzVG9cIjpcIj1cIiArIGExX3RvX3JjKG4uUmVmLCB7cjowLGM6MH0pfSk7IH1cbmZ1bmN0aW9uIHdyaXRlX25hbWVzX3hsbWwod2IvKjo6LCBvcHRzKi8pLyo6c3RyaW5nKi8ge1xuXHRpZighKCh3Ynx8e30pLldvcmtib29rfHx7fSkuTmFtZXMpIHJldHVybiBcIlwiO1xuXHQvKjo6IGlmKCF3YiB8fCAhd2IuV29ya2Jvb2sgfHwgIXdiLldvcmtib29rLk5hbWVzKSB0aHJvdyBuZXcgRXJyb3IoXCJ1bnJlYWNoYWJsZVwiKTsgKi9cblx0dmFyIG5hbWVzLyo6QXJyYXk8YW55PiovID0gd2IuV29ya2Jvb2suTmFtZXM7XG5cdHZhciBvdXQvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0Zm9yKHZhciBpID0gMDsgaSA8IG5hbWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIG4gPSBuYW1lc1tpXTtcblx0XHRpZihuLlNoZWV0ICE9IG51bGwpIGNvbnRpbnVlO1xuXHRcdGlmKG4uTmFtZS5tYXRjaCgvXl94bGZuXFwuLykpIGNvbnRpbnVlO1xuXHRcdG91dC5wdXNoKHdyaXRlX25hbWVfeGxtbChuKSk7XG5cdH1cblx0cmV0dXJuIHdyaXRleHRhZyhcIk5hbWVzXCIsIG91dC5qb2luKFwiXCIpKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX3dzX3hsbWxfbmFtZXMod3MvKjpXb3Jrc2hlZXQqLywgb3B0cywgaWR4Lyo6bnVtYmVyKi8sIHdiLyo6V29ya2Jvb2sqLykvKjpzdHJpbmcqLyB7XG5cdGlmKCF3cykgcmV0dXJuIFwiXCI7XG5cdGlmKCEoKHdifHx7fSkuV29ya2Jvb2t8fHt9KS5OYW1lcykgcmV0dXJuIFwiXCI7XG5cdC8qOjogaWYoIXdiIHx8ICF3Yi5Xb3JrYm9vayB8fCAhd2IuV29ya2Jvb2suTmFtZXMpIHRocm93IG5ldyBFcnJvcihcInVucmVhY2hhYmxlXCIpOyAqL1xuXHR2YXIgbmFtZXMvKjpBcnJheTxhbnk+Ki8gPSB3Yi5Xb3JrYm9vay5OYW1lcztcblx0dmFyIG91dC8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgbmFtZXMubGVuZ3RoOyArK2kpIHtcblx0XHR2YXIgbiA9IG5hbWVzW2ldO1xuXHRcdGlmKG4uU2hlZXQgIT0gaWR4KSBjb250aW51ZTtcblx0XHQvKnN3aXRjaChuLk5hbWUpIHtcblx0XHRcdGNhc2UgXCJfXCI6IGNvbnRpbnVlO1xuXHRcdH0qL1xuXHRcdGlmKG4uTmFtZS5tYXRjaCgvXl94bGZuXFwuLykpIGNvbnRpbnVlO1xuXHRcdG91dC5wdXNoKHdyaXRlX25hbWVfeGxtbChuKSk7XG5cdH1cblx0cmV0dXJuIG91dC5qb2luKFwiXCIpO1xufVxuLyogV29ya3NoZWV0T3B0aW9ucyAqL1xuZnVuY3Rpb24gd3JpdGVfd3NfeGxtbF93c29wdHMod3MvKjpXb3Jrc2hlZXQqLywgb3B0cywgaWR4Lyo6bnVtYmVyKi8sIHdiLyo6V29ya2Jvb2sqLykvKjpzdHJpbmcqLyB7XG5cdGlmKCF3cykgcmV0dXJuIFwiXCI7XG5cdHZhciBvLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdC8qIE5PVEU6IHNwZWMgdGVjaG5pY2FsbHkgYWxsb3dzIGFueSBvcmRlciwgYnV0IHN0aWNrIHdpdGggaW1wbGllZCBvcmRlciAqL1xuXG5cdC8qIEZpdFRvUGFnZSAqL1xuXHQvKiBEb05vdERpc3BsYXlDb2xIZWFkZXJzICovXG5cdC8qIERvTm90RGlzcGxheVJvd0hlYWRlcnMgKi9cblx0LyogVmlld2FibGVSYW5nZSAqL1xuXHQvKiBTZWxlY3Rpb24gKi9cblx0LyogR3JpZGxpbmVDb2xvciAqL1xuXHQvKiBOYW1lICovXG5cdC8qIEV4Y2VsV29ya3NoZWV0VHlwZSAqL1xuXHQvKiBJbnRsTWFjcm8gKi9cblx0LyogVW5zeW5jZWQgKi9cblx0LyogU2VsZWN0ZWQgKi9cblx0LyogQ29kZU5hbWUgKi9cblxuXHRpZih3c1snIW1hcmdpbnMnXSkge1xuXHRcdG8ucHVzaChcIjxQYWdlU2V0dXA+XCIpO1xuXHRcdGlmKHdzWychbWFyZ2lucyddLmhlYWRlcikgby5wdXNoKHdyaXRleHRhZyhcIkhlYWRlclwiLCBudWxsLCB7J3g6TWFyZ2luJzp3c1snIW1hcmdpbnMnXS5oZWFkZXJ9KSk7XG5cdFx0aWYod3NbJyFtYXJnaW5zJ10uZm9vdGVyKSBvLnB1c2god3JpdGV4dGFnKFwiRm9vdGVyXCIsIG51bGwsIHsneDpNYXJnaW4nOndzWychbWFyZ2lucyddLmZvb3Rlcn0pKTtcblx0XHRvLnB1c2god3JpdGV4dGFnKFwiUGFnZU1hcmdpbnNcIiwgbnVsbCwge1xuXHRcdFx0J3g6Qm90dG9tJzogd3NbJyFtYXJnaW5zJ10uYm90dG9tIHx8IFwiMC43NVwiLFxuXHRcdFx0J3g6TGVmdCc6IHdzWychbWFyZ2lucyddLmxlZnQgfHwgXCIwLjdcIixcblx0XHRcdCd4OlJpZ2h0Jzogd3NbJyFtYXJnaW5zJ10ucmlnaHQgfHwgXCIwLjdcIixcblx0XHRcdCd4OlRvcCc6IHdzWychbWFyZ2lucyddLnRvcCB8fCBcIjAuNzVcIlxuXHRcdH0pKTtcblx0XHRvLnB1c2goXCI8L1BhZ2VTZXR1cD5cIik7XG5cdH1cblxuXHQvKiBQYWdlU2V0dXAgKi9cblx0LyogRGlzcGxheVBhZ2VCcmVhayAqL1xuXHQvKiBUcmFuc2l0aW9uRXhwcmVzc2lvbkV2YWx1YXRpb24gKi9cblx0LyogVHJhbnNpdGlvbkZvcm11bGFFbnRyeSAqL1xuXHQvKiBQcmludCAqL1xuXHQvKiBab29tICovXG5cdC8qIFBhZ2VMYXlvdXRab29tICovXG5cdC8qIFBhZ2VCcmVha1pvb20gKi9cblx0LyogU2hvd1BhZ2VCcmVha1pvb20gKi9cblx0LyogRGVmYXVsdFJvd0hlaWdodCAqL1xuXHQvKiBEZWZhdWx0Q29sdW1uV2lkdGggKi9cblx0LyogU3RhbmRhcmRXaWR0aCAqL1xuXG5cdGlmKHdiICYmIHdiLldvcmtib29rICYmIHdiLldvcmtib29rLlNoZWV0cyAmJiB3Yi5Xb3JrYm9vay5TaGVldHNbaWR4XSkge1xuXHRcdC8qIFZpc2libGUgKi9cblx0XHRpZih3Yi5Xb3JrYm9vay5TaGVldHNbaWR4XS5IaWRkZW4pIG8ucHVzaCh3cml0ZXh0YWcoXCJWaXNpYmxlXCIsICh3Yi5Xb3JrYm9vay5TaGVldHNbaWR4XS5IaWRkZW4gPT0gMSA/IFwiU2hlZXRIaWRkZW5cIiA6IFwiU2hlZXRWZXJ5SGlkZGVuXCIpLCB7fSkpO1xuXHRcdGVsc2Uge1xuXHRcdFx0LyogU2VsZWN0ZWQgKi9cblx0XHRcdGZvcih2YXIgaSA9IDA7IGkgPCBpZHg7ICsraSkgaWYod2IuV29ya2Jvb2suU2hlZXRzW2ldICYmICF3Yi5Xb3JrYm9vay5TaGVldHNbaV0uSGlkZGVuKSBicmVhaztcblx0XHRcdGlmKGkgPT0gaWR4KSBvLnB1c2goXCI8U2VsZWN0ZWQvPlwiKTtcblx0XHR9XG5cdH1cblxuXHQvKiBMZWZ0Q29sdW1uVmlzaWJsZSAqL1xuXG5cdGlmKCgoKCh3Ynx8e30pLldvcmtib29rfHx7fSkuVmlld3N8fFtdKVswXXx8e30pLlJUTCkgby5wdXNoKFwiPERpc3BsYXlSaWdodFRvTGVmdC8+XCIpO1xuXG5cdC8qIEdyaWRsaW5lQ29sb3JJbmRleCAqL1xuXHQvKiBEaXNwbGF5Rm9ybXVsYXMgKi9cblx0LyogRG9Ob3REaXNwbGF5R3JpZGxpbmVzICovXG5cdC8qIERvTm90RGlzcGxheUhlYWRpbmdzICovXG5cdC8qIERvTm90RGlzcGxheU91dGxpbmUgKi9cblx0LyogQXBwbHlBdXRvbWF0aWNPdXRsaW5lU3R5bGVzICovXG5cdC8qIE5vU3VtbWFyeVJvd3NCZWxvd0RldGFpbCAqL1xuXHQvKiBOb1N1bW1hcnlDb2x1bW5zUmlnaHREZXRhaWwgKi9cblx0LyogRG9Ob3REaXNwbGF5WmVyb3MgKi9cblx0LyogQWN0aXZlUm93ICovXG5cdC8qIEFjdGl2ZUNvbHVtbiAqL1xuXHQvKiBGaWx0ZXJPbiAqL1xuXHQvKiBSYW5nZVNlbGVjdGlvbiAqL1xuXHQvKiBUb3BSb3dWaXNpYmxlICovXG5cdC8qIFRvcFJvd0JvdHRvbVBhbmUgKi9cblx0LyogTGVmdENvbHVtblJpZ2h0UGFuZSAqL1xuXHQvKiBBY3RpdmVQYW5lICovXG5cdC8qIFNwbGl0SG9yaXpvbnRhbCAqL1xuXHQvKiBTcGxpdFZlcnRpY2FsICovXG5cdC8qIEZyZWV6ZVBhbmVzICovXG5cdC8qIEZyb3plbk5vU3BsaXQgKi9cblx0LyogVGFiQ29sb3JJbmRleCAqL1xuXHQvKiBQYW5lcyAqL1xuXG5cdC8qIE5PVEU6IFBhc3N3b3JkIG5vdCBzdXBwb3J0ZWQgaW4gWExNTCBGb3JtYXQgKi9cblx0aWYod3NbJyFwcm90ZWN0J10pIHtcblx0XHRvLnB1c2god3JpdGV0YWcoXCJQcm90ZWN0Q29udGVudHNcIiwgXCJUcnVlXCIpKTtcblx0XHRpZih3c1snIXByb3RlY3QnXS5vYmplY3RzKSBvLnB1c2god3JpdGV0YWcoXCJQcm90ZWN0T2JqZWN0c1wiLCBcIlRydWVcIikpO1xuXHRcdGlmKHdzWychcHJvdGVjdCddLnNjZW5hcmlvcykgby5wdXNoKHdyaXRldGFnKFwiUHJvdGVjdFNjZW5hcmlvc1wiLCBcIlRydWVcIikpO1xuXHRcdGlmKHdzWychcHJvdGVjdCddLnNlbGVjdExvY2tlZENlbGxzICE9IG51bGwgJiYgIXdzWychcHJvdGVjdCddLnNlbGVjdExvY2tlZENlbGxzKSBvLnB1c2god3JpdGV0YWcoXCJFbmFibGVTZWxlY3Rpb25cIiwgXCJOb1NlbGVjdGlvblwiKSk7XG5cdFx0ZWxzZSBpZih3c1snIXByb3RlY3QnXS5zZWxlY3RVbmxvY2tlZENlbGxzICE9IG51bGwgJiYgIXdzWychcHJvdGVjdCddLnNlbGVjdFVubG9ja2VkQ2VsbHMpIG8ucHVzaCh3cml0ZXRhZyhcIkVuYWJsZVNlbGVjdGlvblwiLCBcIlVubG9ja2VkQ2VsbHNcIikpO1xuXHRbXG5cdFx0WyBcImZvcm1hdENlbGxzXCIsIFwiQWxsb3dGb3JtYXRDZWxsc1wiIF0sXG5cdFx0WyBcImZvcm1hdENvbHVtbnNcIiwgXCJBbGxvd1NpemVDb2xzXCIgXSxcblx0XHRbIFwiZm9ybWF0Um93c1wiLCBcIkFsbG93U2l6ZVJvd3NcIiBdLFxuXHRcdFsgXCJpbnNlcnRDb2x1bW5zXCIsIFwiQWxsb3dJbnNlcnRDb2xzXCIgXSxcblx0XHRbIFwiaW5zZXJ0Um93c1wiLCBcIkFsbG93SW5zZXJ0Um93c1wiIF0sXG5cdFx0WyBcImluc2VydEh5cGVybGlua3NcIiwgXCJBbGxvd0luc2VydEh5cGVybGlua3NcIiBdLFxuXHRcdFsgXCJkZWxldGVDb2x1bW5zXCIsIFwiQWxsb3dEZWxldGVDb2xzXCIgXSxcblx0XHRbIFwiZGVsZXRlUm93c1wiLCBcIkFsbG93RGVsZXRlUm93c1wiIF0sXG5cdFx0WyBcInNvcnRcIiwgXCJBbGxvd1NvcnRcIiBdLFxuXHRcdFsgXCJhdXRvRmlsdGVyXCIsIFwiQWxsb3dGaWx0ZXJcIiBdLFxuXHRcdFsgXCJwaXZvdFRhYmxlc1wiLCBcIkFsbG93VXNlUGl2b3RUYWJsZXNcIiBdXG5cdF0uZm9yRWFjaChmdW5jdGlvbih4KSB7IGlmKHdzWychcHJvdGVjdCddW3hbMF1dKSBvLnB1c2goXCI8XCIreFsxXStcIi8+XCIpOyB9KTtcblx0fVxuXG5cdGlmKG8ubGVuZ3RoID09IDApIHJldHVybiBcIlwiO1xuXHRyZXR1cm4gd3JpdGV4dGFnKFwiV29ya3NoZWV0T3B0aW9uc1wiLCBvLmpvaW4oXCJcIiksIHt4bWxuczpYTE1MTlMueH0pO1xufVxuZnVuY3Rpb24gd3JpdGVfd3NfeGxtbF9jb21tZW50KGNvbW1lbnRzLyo6QXJyYXk8YW55PiovKS8qOnN0cmluZyovIHtcblx0cmV0dXJuIGNvbW1lbnRzLm1hcChmdW5jdGlvbihjKSB7XG5cdFx0Ly8gVE9ETzogZm9ybWF0dGVkIHRleHRcblx0XHR2YXIgdCA9IHhsbWxfdW5maXhzdHIoYy50fHxcIlwiKTtcblx0XHR2YXIgZCA9d3JpdGV4dGFnKFwic3M6RGF0YVwiLCB0LCB7XCJ4bWxuc1wiOlwiaHR0cDovL3d3dy53My5vcmcvVFIvUkVDLWh0bWw0MFwifSk7XG5cdFx0cmV0dXJuIHdyaXRleHRhZyhcIkNvbW1lbnRcIiwgZCwge1wic3M6QXV0aG9yXCI6Yy5hfSk7XG5cdH0pLmpvaW4oXCJcIik7XG59XG5mdW5jdGlvbiB3cml0ZV93c194bG1sX2NlbGwoY2VsbCwgcmVmLyo6c3RyaW5nKi8sIHdzLCBvcHRzLCBpZHgvKjpudW1iZXIqLywgd2IsIGFkZHIpLyo6c3RyaW5nKi97XG5cdGlmKCFjZWxsIHx8IChjZWxsLnYgPT0gdW5kZWZpbmVkICYmIGNlbGwuZiA9PSB1bmRlZmluZWQpKSByZXR1cm4gXCJcIjtcblxuXHR2YXIgYXR0ciA9IHt9O1xuXHRpZihjZWxsLmYpIGF0dHJbXCJzczpGb3JtdWxhXCJdID0gXCI9XCIgKyBlc2NhcGV4bWwoYTFfdG9fcmMoY2VsbC5mLCBhZGRyKSk7XG5cdGlmKGNlbGwuRiAmJiBjZWxsLkYuc2xpY2UoMCwgcmVmLmxlbmd0aCkgPT0gcmVmKSB7XG5cdFx0dmFyIGVuZCA9IGRlY29kZV9jZWxsKGNlbGwuRi5zbGljZShyZWYubGVuZ3RoICsgMSkpO1xuXHRcdGF0dHJbXCJzczpBcnJheVJhbmdlXCJdID0gXCJSQzpSXCIgKyAoZW5kLnIgPT0gYWRkci5yID8gXCJcIiA6IFwiW1wiICsgKGVuZC5yIC0gYWRkci5yKSArIFwiXVwiKSArIFwiQ1wiICsgKGVuZC5jID09IGFkZHIuYyA/IFwiXCIgOiBcIltcIiArIChlbmQuYyAtIGFkZHIuYykgKyBcIl1cIik7XG5cdH1cblxuXHRpZihjZWxsLmwgJiYgY2VsbC5sLlRhcmdldCkge1xuXHRcdGF0dHJbXCJzczpIUmVmXCJdID0gZXNjYXBleG1sKGNlbGwubC5UYXJnZXQpO1xuXHRcdGlmKGNlbGwubC5Ub29sdGlwKSBhdHRyW1wieDpIUmVmU2NyZWVuVGlwXCJdID0gZXNjYXBleG1sKGNlbGwubC5Ub29sdGlwKTtcblx0fVxuXG5cdGlmKHdzWychbWVyZ2VzJ10pIHtcblx0XHR2YXIgbWFyciA9IHdzWychbWVyZ2VzJ107XG5cdFx0Zm9yKHZhciBtaSA9IDA7IG1pICE9IG1hcnIubGVuZ3RoOyArK21pKSB7XG5cdFx0XHRpZihtYXJyW21pXS5zLmMgIT0gYWRkci5jIHx8IG1hcnJbbWldLnMuciAhPSBhZGRyLnIpIGNvbnRpbnVlO1xuXHRcdFx0aWYobWFyclttaV0uZS5jID4gbWFyclttaV0ucy5jKSBhdHRyWydzczpNZXJnZUFjcm9zcyddID0gbWFyclttaV0uZS5jIC0gbWFyclttaV0ucy5jO1xuXHRcdFx0aWYobWFyclttaV0uZS5yID4gbWFyclttaV0ucy5yKSBhdHRyWydzczpNZXJnZURvd24nXSA9IG1hcnJbbWldLmUuciAtIG1hcnJbbWldLnMucjtcblx0XHR9XG5cdH1cblxuXHR2YXIgdCA9IFwiXCIsIHAgPSBcIlwiO1xuXHRzd2l0Y2goY2VsbC50KSB7XG5cdFx0Y2FzZSAneic6IGlmKCFvcHRzLnNoZWV0U3R1YnMpIHJldHVybiBcIlwiOyBicmVhaztcblx0XHRjYXNlICduJzogdCA9ICdOdW1iZXInOyBwID0gU3RyaW5nKGNlbGwudik7IGJyZWFrO1xuXHRcdGNhc2UgJ2InOiB0ID0gJ0Jvb2xlYW4nOyBwID0gKGNlbGwudiA/IFwiMVwiIDogXCIwXCIpOyBicmVhaztcblx0XHRjYXNlICdlJzogdCA9ICdFcnJvcic7IHAgPSBCRXJyW2NlbGwudl07IGJyZWFrO1xuXHRcdGNhc2UgJ2QnOiB0ID0gJ0RhdGVUaW1lJzsgcCA9IG5ldyBEYXRlKGNlbGwudikudG9JU09TdHJpbmcoKTsgaWYoY2VsbC56ID09IG51bGwpIGNlbGwueiA9IGNlbGwueiB8fCB0YWJsZV9mbXRbMTRdOyBicmVhaztcblx0XHRjYXNlICdzJzogdCA9ICdTdHJpbmcnOyBwID0gZXNjYXBleGxtbChjZWxsLnZ8fFwiXCIpOyBicmVhaztcblx0fVxuXHQvKiBUT0RPOiBjZWxsIHN0eWxlICovXG5cdHZhciBvcyA9IGdldF9jZWxsX3N0eWxlKG9wdHMuY2VsbFhmcywgY2VsbCwgb3B0cyk7XG5cdGF0dHJbXCJzczpTdHlsZUlEXCJdID0gXCJzXCIgKyAoMjErb3MpO1xuXHRhdHRyW1wic3M6SW5kZXhcIl0gPSBhZGRyLmMgKyAxO1xuXHR2YXIgX3YgPSAoY2VsbC52ICE9IG51bGwgPyBwIDogXCJcIik7XG5cdHZhciBtID0gY2VsbC50ID09ICd6JyA/IFwiXCIgOiAoJzxEYXRhIHNzOlR5cGU9XCInICsgdCArICdcIj4nICsgX3YgKyAnPC9EYXRhPicpO1xuXG5cdGlmKChjZWxsLmN8fFtdKS5sZW5ndGggPiAwKSBtICs9IHdyaXRlX3dzX3hsbWxfY29tbWVudChjZWxsLmMpO1xuXG5cdHJldHVybiB3cml0ZXh0YWcoXCJDZWxsXCIsIG0sIGF0dHIpO1xufVxuZnVuY3Rpb24gd3JpdGVfd3NfeGxtbF9yb3coUi8qOm51bWJlciovLCByb3cpLyo6c3RyaW5nKi8ge1xuXHR2YXIgbyA9ICc8Um93IHNzOkluZGV4PVwiJyArIChSKzEpICsgJ1wiJztcblx0aWYocm93KSB7XG5cdFx0aWYocm93LmhwdCAmJiAhcm93LmhweCkgcm93LmhweCA9IHB0MnB4KHJvdy5ocHQpO1xuXHRcdGlmKHJvdy5ocHgpIG8gKz0gJyBzczpBdXRvRml0SGVpZ2h0PVwiMFwiIHNzOkhlaWdodD1cIicgKyByb3cuaHB4ICsgJ1wiJztcblx0XHRpZihyb3cuaGlkZGVuKSBvICs9ICcgc3M6SGlkZGVuPVwiMVwiJztcblx0fVxuXHRyZXR1cm4gbyArICc+Jztcbn1cbi8qIFRPRE8gKi9cbmZ1bmN0aW9uIHdyaXRlX3dzX3hsbWxfdGFibGUod3MvKjpXb3Jrc2hlZXQqLywgb3B0cywgaWR4Lyo6bnVtYmVyKi8sIHdiLyo6V29ya2Jvb2sqLykvKjpzdHJpbmcqLyB7XG5cdGlmKCF3c1snIXJlZiddKSByZXR1cm4gXCJcIjtcblx0dmFyIHJhbmdlLyo6UmFuZ2UqLyA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHR2YXIgbWFyci8qOkFycmF5PFJhbmdlPiovID0gd3NbJyFtZXJnZXMnXSB8fCBbXSwgbWkgPSAwO1xuXHR2YXIgby8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRpZih3c1snIWNvbHMnXSkgd3NbJyFjb2xzJ10uZm9yRWFjaChmdW5jdGlvbihuLCBpKSB7XG5cdFx0cHJvY2Vzc19jb2wobik7XG5cdFx0dmFyIHcgPSAhIW4ud2lkdGg7XG5cdFx0dmFyIHAgPSBjb2xfb2JqX3coaSwgbik7XG5cdFx0dmFyIGsvKjphbnkqLyA9IHtcInNzOkluZGV4XCI6aSsxfTtcblx0XHRpZih3KSBrWydzczpXaWR0aCddID0gd2lkdGgycHgocC53aWR0aCk7XG5cdFx0aWYobi5oaWRkZW4pIGtbJ3NzOkhpZGRlbiddPVwiMVwiO1xuXHRcdG8ucHVzaCh3cml0ZXh0YWcoXCJDb2x1bW5cIixudWxsLGspKTtcblx0fSk7XG5cdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkod3MpO1xuXHRmb3IodmFyIFIgPSByYW5nZS5zLnI7IFIgPD0gcmFuZ2UuZS5yOyArK1IpIHtcblx0XHR2YXIgcm93ID0gW3dyaXRlX3dzX3hsbWxfcm93KFIsICh3c1snIXJvd3MnXXx8W10pW1JdKV07XG5cdFx0Zm9yKHZhciBDID0gcmFuZ2Uucy5jOyBDIDw9IHJhbmdlLmUuYzsgKytDKSB7XG5cdFx0XHR2YXIgc2tpcCA9IGZhbHNlO1xuXHRcdFx0Zm9yKG1pID0gMDsgbWkgIT0gbWFyci5sZW5ndGg7ICsrbWkpIHtcblx0XHRcdFx0aWYobWFyclttaV0ucy5jID4gQykgY29udGludWU7XG5cdFx0XHRcdGlmKG1hcnJbbWldLnMuciA+IFIpIGNvbnRpbnVlO1xuXHRcdFx0XHRpZihtYXJyW21pXS5lLmMgPCBDKSBjb250aW51ZTtcblx0XHRcdFx0aWYobWFyclttaV0uZS5yIDwgUikgY29udGludWU7XG5cdFx0XHRcdGlmKG1hcnJbbWldLnMuYyAhPSBDIHx8IG1hcnJbbWldLnMuciAhPSBSKSBza2lwID0gdHJ1ZTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZihza2lwKSBjb250aW51ZTtcblx0XHRcdHZhciBhZGRyID0ge3I6UixjOkN9O1xuXHRcdFx0dmFyIHJlZiA9IGVuY29kZV9jZWxsKGFkZHIpLCBjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXSA6IHdzW3JlZl07XG5cdFx0XHRyb3cucHVzaCh3cml0ZV93c194bG1sX2NlbGwoY2VsbCwgcmVmLCB3cywgb3B0cywgaWR4LCB3YiwgYWRkcikpO1xuXHRcdH1cblx0XHRyb3cucHVzaChcIjwvUm93PlwiKTtcblx0XHRpZihyb3cubGVuZ3RoID4gMikgby5wdXNoKHJvdy5qb2luKFwiXCIpKTtcblx0fVxuXHRyZXR1cm4gby5qb2luKFwiXCIpO1xufVxuZnVuY3Rpb24gd3JpdGVfd3NfeGxtbChpZHgvKjpudW1iZXIqLywgb3B0cywgd2IvKjpXb3JrYm9vayovKS8qOnN0cmluZyovIHtcblx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0dmFyIHMgPSB3Yi5TaGVldE5hbWVzW2lkeF07XG5cdHZhciB3cyA9IHdiLlNoZWV0c1tzXTtcblxuXHR2YXIgdC8qOnN0cmluZyovID0gd3MgPyB3cml0ZV93c194bG1sX25hbWVzKHdzLCBvcHRzLCBpZHgsIHdiKSA6IFwiXCI7XG5cdGlmKHQubGVuZ3RoID4gMCkgby5wdXNoKFwiPE5hbWVzPlwiICsgdCArIFwiPC9OYW1lcz5cIik7XG5cblx0LyogVGFibGUgKi9cblx0dCA9IHdzID8gd3JpdGVfd3NfeGxtbF90YWJsZSh3cywgb3B0cywgaWR4LCB3YikgOiBcIlwiO1xuXHRpZih0Lmxlbmd0aCA+IDApIG8ucHVzaChcIjxUYWJsZT5cIiArIHQgKyBcIjwvVGFibGU+XCIpO1xuXG5cdC8qIFdvcmtzaGVldE9wdGlvbnMgKi9cblx0by5wdXNoKHdyaXRlX3dzX3hsbWxfd3NvcHRzKHdzLCBvcHRzLCBpZHgsIHdiKSk7XG5cblx0cmV0dXJuIG8uam9pbihcIlwiKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX3hsbWwod2IsIG9wdHMpLyo6c3RyaW5nKi8ge1xuXHRpZighb3B0cykgb3B0cyA9IHt9O1xuXHRpZighd2IuU1NGKSB3Yi5TU0YgPSBkdXAodGFibGVfZm10KTtcblx0aWYod2IuU1NGKSB7XG5cdFx0bWFrZV9zc2YoKTsgU1NGX2xvYWRfdGFibGUod2IuU1NGKTtcblx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdG9wdHMucmV2c3NmID0gZXZlcnRfbnVtKHdiLlNTRik7IG9wdHMucmV2c3NmW3diLlNTRls2NTUzNV1dID0gMDtcblx0XHRvcHRzLnNzZiA9IHdiLlNTRjtcblx0XHRvcHRzLmNlbGxYZnMgPSBbXTtcblx0XHRnZXRfY2VsbF9zdHlsZShvcHRzLmNlbGxYZnMsIHt9LCB7cmV2c3NmOntcIkdlbmVyYWxcIjowfX0pO1xuXHR9XG5cdHZhciBkLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdGQucHVzaCh3cml0ZV9wcm9wc194bG1sKHdiLCBvcHRzKSk7XG5cdGQucHVzaCh3cml0ZV93Yl94bG1sKHdiLCBvcHRzKSk7XG5cdGQucHVzaChcIlwiKTtcblx0ZC5wdXNoKFwiXCIpO1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgd2IuU2hlZXROYW1lcy5sZW5ndGg7ICsraSlcblx0XHRkLnB1c2god3JpdGV4dGFnKFwiV29ya3NoZWV0XCIsIHdyaXRlX3dzX3hsbWwoaSwgb3B0cywgd2IpLCB7XCJzczpOYW1lXCI6ZXNjYXBleG1sKHdiLlNoZWV0TmFtZXNbaV0pfSkpO1xuXHRkWzJdID0gd3JpdGVfc3R5X3hsbWwod2IsIG9wdHMpO1xuXHRkWzNdID0gd3JpdGVfbmFtZXNfeGxtbCh3Yiwgb3B0cyk7XG5cdHJldHVybiBYTUxfSEVBREVSICsgd3JpdGV4dGFnKFwiV29ya2Jvb2tcIiwgZC5qb2luKFwiXCIpLCB7XG5cdFx0J3htbG5zJzogICAgICBYTE1MTlMuc3MsXG5cdFx0J3htbG5zOm8nOiAgICBYTE1MTlMubyxcblx0XHQneG1sbnM6eCc6ICAgIFhMTUxOUy54LFxuXHRcdCd4bWxuczpzcyc6ICAgWExNTE5TLnNzLFxuXHRcdCd4bWxuczpkdCc6ICAgWExNTE5TLmR0LFxuXHRcdCd4bWxuczpodG1sJzogWExNTE5TLmh0bWxcblx0fSk7XG59XG4vKiBbTVMtT0xFRFNdIDIuMy44IENvbXBPYmpTdHJlYW0gKi9cbmZ1bmN0aW9uIHBhcnNlX2NvbXBvYmoob2JqLyo6Q0ZCRW50cnkqLykge1xuXHR2YXIgdiA9IHt9O1xuXHR2YXIgbyA9IG9iai5jb250ZW50O1xuXHQvKjo6IGlmKG8gPT0gbnVsbCkgcmV0dXJuOyAqL1xuXG5cdC8qIFtNUy1PTEVEU10gMi4zLjcgQ29tcE9iakhlYWRlciAtLSBBbGwgZmllbGRzIE1VU1QgYmUgaWdub3JlZCAqL1xuXHRvLmwgPSAyODtcblxuXHR2LkFuc2lVc2VyVHlwZSA9IG8ucmVhZF9zaGlmdCgwLCBcImxwc3RyLWFuc2lcIik7XG5cdHYuQW5zaUNsaXBib2FyZEZvcm1hdCA9IHBhcnNlX0NsaXBib2FyZEZvcm1hdE9yQW5zaVN0cmluZyhvKTtcblxuXHRpZihvLmxlbmd0aCAtIG8ubCA8PSA0KSByZXR1cm4gdjtcblxuXHR2YXIgbS8qOm51bWJlciovID0gby5yZWFkX3NoaWZ0KDQpO1xuXHRpZihtID09IDAgfHwgbSA+IDQwKSByZXR1cm4gdjtcblx0by5sLT00OyB2LlJlc2VydmVkMSA9IG8ucmVhZF9zaGlmdCgwLCBcImxwc3RyLWFuc2lcIik7XG5cblx0aWYoby5sZW5ndGggLSBvLmwgPD0gNCkgcmV0dXJuIHY7XG5cdG0gPSBvLnJlYWRfc2hpZnQoNCk7XG5cdGlmKG0gIT09IDB4NzFiMjM5ZjQpIHJldHVybiB2O1xuXHR2LlVuaWNvZGVDbGlwYm9hcmRGb3JtYXQgPSBwYXJzZV9DbGlwYm9hcmRGb3JtYXRPclVuaWNvZGVTdHJpbmcobyk7XG5cblx0bSA9IG8ucmVhZF9zaGlmdCg0KTtcblx0aWYobSA9PSAwIHx8IG0gPiA0MCkgcmV0dXJuIHY7XG5cdG8ubC09NDsgdi5SZXNlcnZlZDIgPSBvLnJlYWRfc2hpZnQoMCwgXCJscHdzdHJcIik7XG59XG5cbi8qXG5cdENvbnRpbnVlIGxvZ2ljIGZvcjpcblx0LSAyLjQuNTggQ29udGludWUgICAgICAgICAgMHgwMDNjXG5cdC0gMi40LjU5IENvbnRpbnVlQmlnTmFtZSAgIDB4MDQzY1xuXHQtIDIuNC42MCBDb250aW51ZUZydCAgICAgICAweDA4MTJcblx0LSAyLjQuNjEgQ29udGludWVGcnQxMSAgICAgMHgwODc1XG5cdC0gMi40LjYyIENvbnRpbnVlRnJ0MTIgICAgIDB4MDg3ZlxuKi9cbnZhciBDT05USU5VRV9SVCA9IFsgMHgwMDNjLCAweDA0M2MsIDB4MDgxMiwgMHgwODc1LCAweDA4N2YgXTtcbmZ1bmN0aW9uIHNsdXJwKFJlY29yZFR5cGUsIFIsIGJsb2IsIGxlbmd0aC8qOm51bWJlciovLCBvcHRzKS8qOmFueSovIHtcblx0dmFyIGwgPSBsZW5ndGg7XG5cdHZhciBidWZzID0gW107XG5cdHZhciBkID0gYmxvYi5zbGljZShibG9iLmwsYmxvYi5sK2wpO1xuXHRpZihvcHRzICYmIG9wdHMuZW5jICYmIG9wdHMuZW5jLmluc2l0dSAmJiBkLmxlbmd0aCA+IDApIHN3aXRjaChSZWNvcmRUeXBlKSB7XG5cdGNhc2UgMHgwMDA5OiBjYXNlIDB4MDIwOTogY2FzZSAweDA0MDk6IGNhc2UgMHgwODA5LyogQk9GICovOiBjYXNlIDB4MDAyZiAvKiBGaWxlUGFzcyAqLzogY2FzZSAweDAxOTUgLyogRmlsZUxvY2sgKi86IGNhc2UgMHgwMGUxIC8qIEludGVyZmFjZUhkciAqLzogY2FzZSAweDAxOTYgLyogUlJESW5mbyAqLzogY2FzZSAweDAxMzggLyogUlJESGVhZCAqLzogY2FzZSAweDAxOTQgLyogVXNyRXhjbCAqLzogY2FzZSAweDAwMGEgLyogRU9GICovOlxuXHRcdGJyZWFrO1xuXHRjYXNlIDB4MDA4NSAvKiBCb3VuZFNoZWV0OCAqLzpcblx0XHRicmVhaztcblx0ZGVmYXVsdDpcblx0XHRvcHRzLmVuYy5pbnNpdHUoZCk7XG5cdH1cblx0YnVmcy5wdXNoKGQpO1xuXHRibG9iLmwgKz0gbDtcblx0dmFyIG5leHRydCA9IF9fcmVhZFVJbnQxNkxFKGJsb2IsYmxvYi5sKSwgbmV4dCA9IFhMU1JlY29yZEVudW1bbmV4dHJ0XTtcblx0dmFyIHN0YXJ0ID0gMDtcblx0d2hpbGUobmV4dCAhPSBudWxsICYmIENPTlRJTlVFX1JULmluZGV4T2YobmV4dHJ0KSA+IC0xKSB7XG5cdFx0bCA9IF9fcmVhZFVJbnQxNkxFKGJsb2IsYmxvYi5sKzIpO1xuXHRcdHN0YXJ0ID0gYmxvYi5sICsgNDtcblx0XHRpZihuZXh0cnQgPT0gMHgwODEyIC8qIENvbnRpbnVlRnJ0ICovKSBzdGFydCArPSA0O1xuXHRcdGVsc2UgaWYobmV4dHJ0ID09IDB4MDg3NSB8fCBuZXh0cnQgPT0gMHgwODdmKSB7XG5cdFx0XHRzdGFydCArPSAxMjtcblx0XHR9XG5cdFx0ZCA9IGJsb2Iuc2xpY2Uoc3RhcnQsYmxvYi5sKzQrbCk7XG5cdFx0YnVmcy5wdXNoKGQpO1xuXHRcdGJsb2IubCArPSA0K2w7XG5cdFx0bmV4dCA9IChYTFNSZWNvcmRFbnVtW25leHRydCA9IF9fcmVhZFVJbnQxNkxFKGJsb2IsIGJsb2IubCldKTtcblx0fVxuXHR2YXIgYiA9IChiY29uY2F0KGJ1ZnMpLyo6YW55Ki8pO1xuXHRwcmVwX2Jsb2IoYiwgMCk7XG5cdHZhciBsbCA9IDA7IGIubGVucyA9IFtdO1xuXHRmb3IodmFyIGogPSAwOyBqIDwgYnVmcy5sZW5ndGg7ICsraikgeyBiLmxlbnMucHVzaChsbCk7IGxsICs9IGJ1ZnNbal0ubGVuZ3RoOyB9XG5cdGlmKGIubGVuZ3RoIDwgbGVuZ3RoKSB0aHJvdyBcIlhMUyBSZWNvcmQgMHhcIiArIFJlY29yZFR5cGUudG9TdHJpbmcoMTYpICsgXCIgVHJ1bmNhdGVkOiBcIiArIGIubGVuZ3RoICsgXCIgPCBcIiArIGxlbmd0aDtcblx0cmV0dXJuIFIuZihiLCBiLmxlbmd0aCwgb3B0cyk7XG59XG5cbmZ1bmN0aW9uIHNhZmVfZm9ybWF0X3hmKHAvKjphbnkqLywgb3B0cy8qOlBhcnNlT3B0cyovLCBkYXRlMTkwNC8qOj9ib29sZWFuKi8pIHtcblx0aWYocC50ID09PSAneicpIHJldHVybjtcblx0aWYoIXAuWEYpIHJldHVybjtcblx0dmFyIGZtdGlkID0gMDtcblx0dHJ5IHtcblx0XHRmbXRpZCA9IHAueiB8fCBwLlhGLm51bUZtdElkIHx8IDA7XG5cdFx0aWYob3B0cy5jZWxsTkYpIHAueiA9IHRhYmxlX2ZtdFtmbXRpZF07XG5cdH0gY2F0Y2goZSkgeyBpZihvcHRzLldURikgdGhyb3cgZTsgfVxuXHRpZighb3B0cyB8fCBvcHRzLmNlbGxUZXh0ICE9PSBmYWxzZSkgdHJ5IHtcblx0XHRpZihwLnQgPT09ICdlJykgeyBwLncgPSBwLncgfHwgQkVycltwLnZdOyB9XG5cdFx0ZWxzZSBpZihmbXRpZCA9PT0gMCB8fCBmbXRpZCA9PSBcIkdlbmVyYWxcIikge1xuXHRcdFx0aWYocC50ID09PSAnbicpIHtcblx0XHRcdFx0aWYoKHAudnwwKSA9PT0gcC52KSBwLncgPSBwLnYudG9TdHJpbmcoMTApO1xuXHRcdFx0XHRlbHNlIHAudyA9IFNTRl9nZW5lcmFsX251bShwLnYpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZSBwLncgPSBTU0ZfZ2VuZXJhbChwLnYpO1xuXHRcdH1cblx0XHRlbHNlIHAudyA9IFNTRl9mb3JtYXQoZm10aWQscC52LCB7ZGF0ZTE5MDQ6ISFkYXRlMTkwNCwgZGF0ZU5GOiBvcHRzICYmIG9wdHMuZGF0ZU5GfSk7XG5cdH0gY2F0Y2goZSkgeyBpZihvcHRzLldURikgdGhyb3cgZTsgfVxuXHRpZihvcHRzLmNlbGxEYXRlcyAmJiBmbXRpZCAmJiBwLnQgPT0gJ24nICYmIGZtdF9pc19kYXRlKHRhYmxlX2ZtdFtmbXRpZF0gfHwgU3RyaW5nKGZtdGlkKSkpIHtcblx0XHR2YXIgX2QgPSBTU0ZfcGFyc2VfZGF0ZV9jb2RlKHAudik7IGlmKF9kKSB7IHAudCA9ICdkJzsgcC52ID0gbmV3IERhdGUoX2QueSwgX2QubS0xLF9kLmQsX2QuSCxfZC5NLF9kLlMsX2QudSk7IH1cblx0fVxufVxuXG5mdW5jdGlvbiBtYWtlX2NlbGwodmFsLCBpeGZlLCB0KS8qOkNlbGwqLyB7XG5cdHJldHVybiAoe3Y6dmFsLCBpeGZlOml4ZmUsIHQ6dH0vKjphbnkqLyk7XG59XG5cbi8vIDIuMy4yXG5mdW5jdGlvbiBwYXJzZV93b3JrYm9vayhibG9iLCBvcHRpb25zLyo6UGFyc2VPcHRzKi8pLyo6V29ya2Jvb2sqLyB7XG5cdHZhciB3YiA9ICh7b3B0czp7fX0vKjphbnkqLyk7XG5cdHZhciBTaGVldHMgPSB7fTtcblx0aWYoREVOU0UgIT0gbnVsbCAmJiBvcHRpb25zLmRlbnNlID09IG51bGwpIG9wdGlvbnMuZGVuc2UgPSBERU5TRTtcblx0dmFyIG91dC8qOldvcmtzaGVldCovID0gKChvcHRpb25zLmRlbnNlID8gW10gOiB7fSkvKjphbnkqLyk7XG5cdHZhciBEaXJlY3RvcnkgPSB7fTtcblx0dmFyIHJhbmdlLyo6UmFuZ2UqLyA9ICh7fS8qOmFueSovKTtcblx0dmFyIGxhc3RfZm9ybXVsYSA9IG51bGw7XG5cdHZhciBzc3QvKjpTU1QqLyA9IChbXS8qOmFueSovKTtcblx0dmFyIGN1cl9zaGVldCA9IFwiXCI7XG5cdHZhciBQcmVhbWJsZSA9IHt9O1xuXHR2YXIgbGFzdGNlbGwsIGxhc3RfY2VsbCA9IFwiXCIsIGNjLyo6Q2VsbCovLCBjbW50LCBybmdDLCBybmdSO1xuXHR2YXIgc2hhcmVkZiA9IHt9O1xuXHR2YXIgYXJyYXlmLyo6QXJyYXk8W1JhbmdlLCBzdHJpbmddPiovID0gW107XG5cdHZhciB0ZW1wX3ZhbC8qOkNlbGwqLztcblx0dmFyIGNvdW50cnk7XG5cdHZhciBYRnMgPSBbXTsgLyogWEYgcmVjb3JkcyAqL1xuXHR2YXIgcGFsZXR0ZS8qOkFycmF5PFtudW1iZXIsIG51bWJlciwgbnVtYmVyXT4qLyA9IFtdO1xuXHR2YXIgV29ya2Jvb2svKjpXQldCUHJvcHMqLyA9ICh7IFNoZWV0czpbXSwgV0JQcm9wczp7ZGF0ZTE5MDQ6ZmFsc2V9LCBWaWV3czpbe31dIH0vKjphbnkqLyksIHdzcHJvcHMgPSB7fTtcblx0dmFyIGdldF9yZ2IgPSBmdW5jdGlvbiBnZXRyZ2IoaWN2Lyo6bnVtYmVyKi8pLyo6W251bWJlciwgbnVtYmVyLCBudW1iZXJdKi8ge1xuXHRcdGlmKGljdiA8IDgpIHJldHVybiBYTFNJY3ZbaWN2XTtcblx0XHRpZihpY3YgPCA2NCkgcmV0dXJuIHBhbGV0dGVbaWN2LThdIHx8IFhMU0ljdltpY3ZdO1xuXHRcdHJldHVybiBYTFNJY3ZbaWN2XTtcblx0fTtcblx0dmFyIHByb2Nlc3NfY2VsbF9zdHlsZSA9IGZ1bmN0aW9uIHBjcyhjZWxsLCBsaW5lLyo6YW55Ki8sIG9wdGlvbnMpIHtcblx0XHR2YXIgeGZkID0gbGluZS5YRi5kYXRhO1xuXHRcdGlmKCF4ZmQgfHwgIXhmZC5wYXR0ZXJuVHlwZSB8fCAhb3B0aW9ucyB8fCAhb3B0aW9ucy5jZWxsU3R5bGVzKSByZXR1cm47XG5cdFx0bGluZS5zID0gKHt9Lyo6YW55Ki8pO1xuXHRcdGxpbmUucy5wYXR0ZXJuVHlwZSA9IHhmZC5wYXR0ZXJuVHlwZTtcblx0XHR2YXIgdDtcblx0XHRpZigodCA9IHJnYjJIZXgoZ2V0X3JnYih4ZmQuaWN2Rm9yZSkpKSkgeyBsaW5lLnMuZmdDb2xvciA9IHtyZ2I6dH07IH1cblx0XHRpZigodCA9IHJnYjJIZXgoZ2V0X3JnYih4ZmQuaWN2QmFjaykpKSkgeyBsaW5lLnMuYmdDb2xvciA9IHtyZ2I6dH07IH1cblx0fTtcblx0dmFyIGFkZGNlbGwgPSBmdW5jdGlvbiBhZGRjZWxsKGNlbGwvKjphbnkqLywgbGluZS8qOmFueSovLCBvcHRpb25zLyo6YW55Ki8pIHtcblx0XHRpZihmaWxlX2RlcHRoID4gMSkgcmV0dXJuO1xuXHRcdGlmKG9wdGlvbnMuc2hlZXRSb3dzICYmIGNlbGwuciA+PSBvcHRpb25zLnNoZWV0Um93cykgcmV0dXJuO1xuXHRcdGlmKG9wdGlvbnMuY2VsbFN0eWxlcyAmJiBsaW5lLlhGICYmIGxpbmUuWEYuZGF0YSkgcHJvY2Vzc19jZWxsX3N0eWxlKGNlbGwsIGxpbmUsIG9wdGlvbnMpO1xuXHRcdGRlbGV0ZSBsaW5lLml4ZmU7IGRlbGV0ZSBsaW5lLlhGO1xuXHRcdGxhc3RjZWxsID0gY2VsbDtcblx0XHRsYXN0X2NlbGwgPSBlbmNvZGVfY2VsbChjZWxsKTtcblx0XHRpZighcmFuZ2UgfHwgIXJhbmdlLnMgfHwgIXJhbmdlLmUpIHJhbmdlID0ge3M6e3I6MCxjOjB9LGU6e3I6MCxjOjB9fTtcblx0XHRpZihjZWxsLnIgPCByYW5nZS5zLnIpIHJhbmdlLnMuciA9IGNlbGwucjtcblx0XHRpZihjZWxsLmMgPCByYW5nZS5zLmMpIHJhbmdlLnMuYyA9IGNlbGwuYztcblx0XHRpZihjZWxsLnIgKyAxID4gcmFuZ2UuZS5yKSByYW5nZS5lLnIgPSBjZWxsLnIgKyAxO1xuXHRcdGlmKGNlbGwuYyArIDEgPiByYW5nZS5lLmMpIHJhbmdlLmUuYyA9IGNlbGwuYyArIDE7XG5cdFx0aWYob3B0aW9ucy5jZWxsRm9ybXVsYSAmJiBsaW5lLmYpIHtcblx0XHRcdGZvcih2YXIgYWZpID0gMDsgYWZpIDwgYXJyYXlmLmxlbmd0aDsgKythZmkpIHtcblx0XHRcdFx0aWYoYXJyYXlmW2FmaV1bMF0ucy5jID4gY2VsbC5jIHx8IGFycmF5ZlthZmldWzBdLnMuciA+IGNlbGwucikgY29udGludWU7XG5cdFx0XHRcdGlmKGFycmF5ZlthZmldWzBdLmUuYyA8IGNlbGwuYyB8fCBhcnJheWZbYWZpXVswXS5lLnIgPCBjZWxsLnIpIGNvbnRpbnVlO1xuXHRcdFx0XHRsaW5lLkYgPSBlbmNvZGVfcmFuZ2UoYXJyYXlmW2FmaV1bMF0pO1xuXHRcdFx0XHRpZihhcnJheWZbYWZpXVswXS5zLmMgIT0gY2VsbC5jIHx8IGFycmF5ZlthZmldWzBdLnMuciAhPSBjZWxsLnIpIGRlbGV0ZSBsaW5lLmY7XG5cdFx0XHRcdGlmKGxpbmUuZikgbGluZS5mID0gXCJcIiArIHN0cmluZ2lmeV9mb3JtdWxhKGFycmF5ZlthZmldWzFdLCByYW5nZSwgY2VsbCwgc3VwYm9va3MsIG9wdHMpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0e1xuXHRcdFx0aWYob3B0aW9ucy5kZW5zZSkge1xuXHRcdFx0XHRpZighb3V0W2NlbGwucl0pIG91dFtjZWxsLnJdID0gW107XG5cdFx0XHRcdG91dFtjZWxsLnJdW2NlbGwuY10gPSBsaW5lO1xuXHRcdFx0fSBlbHNlIG91dFtsYXN0X2NlbGxdID0gbGluZTtcblx0XHR9XG5cdH07XG5cdHZhciBvcHRzID0gKHtcblx0XHRlbmM6IGZhbHNlLCAvLyBlbmNyeXB0ZWRcblx0XHRzYmNjaDogMCwgLy8gY2NoIGluIHRoZSBwcmVjZWRpbmcgU3VwQm9va1xuXHRcdHNuYW1lczogW10sIC8vIHNoZWV0bmFtZXNcblx0XHRzaGFyZWRmOiBzaGFyZWRmLCAvLyBzaGFyZWQgZm9ybXVsYWUgYnkgYWRkcmVzc1xuXHRcdGFycmF5ZjogYXJyYXlmLCAvLyBhcnJheSBmb3JtdWxhZSBhcnJheVxuXHRcdHJydGFiaWQ6IFtdLCAvLyBSUlRhYklkXG5cdFx0bGFzdHVzZXI6IFwiXCIsIC8vIExhc3QgVXNlciBmcm9tIFdyaXRlQWNjZXNzXG5cdFx0YmlmZjogOCwgLy8gQklGRiB2ZXJzaW9uXG5cdFx0Y29kZXBhZ2U6IDAsIC8vIENQIGZyb20gQ29kZVBhZ2UgcmVjb3JkXG5cdFx0d2lubG9ja2VkOiAwLCAvLyBmTG9ja1duIGZyb20gV2luUHJvdGVjdFxuXHRcdGNlbGxTdHlsZXM6ICEhb3B0aW9ucyAmJiAhIW9wdGlvbnMuY2VsbFN0eWxlcyxcblx0XHRXVEY6ICEhb3B0aW9ucyAmJiAhIW9wdGlvbnMud3RmXG5cdH0vKjphbnkqLyk7XG5cdGlmKG9wdGlvbnMucGFzc3dvcmQpIG9wdHMucGFzc3dvcmQgPSBvcHRpb25zLnBhc3N3b3JkO1xuXHR2YXIgdGhlbWVzO1xuXHR2YXIgbWVyZ2VzLyo6QXJyYXk8UmFuZ2U+Ki8gPSBbXTtcblx0dmFyIG9iamVjdHMgPSBbXTtcblx0dmFyIGNvbGluZm8vKjpBcnJheTxDb2xJbmZvPiovID0gW10sIHJvd2luZm8vKjpBcnJheTxSb3dJbmZvPiovID0gW107XG5cdHZhciBzZWVuY29sID0gZmFsc2U7XG5cdHZhciBzdXBib29rcyA9IChbXS8qOmFueSovKTsgLy8gMS1pbmRleGVkLCB3aWxsIGhvbGQgZXh0ZXJuIG5hbWVzXG5cdHN1cGJvb2tzLlNoZWV0TmFtZXMgPSBvcHRzLnNuYW1lcztcblx0c3VwYm9va3Muc2hhcmVkZiA9IG9wdHMuc2hhcmVkZjtcblx0c3VwYm9va3MuYXJyYXlmID0gb3B0cy5hcnJheWY7XG5cdHN1cGJvb2tzLm5hbWVzID0gW107XG5cdHN1cGJvb2tzLlhUSSA9IFtdO1xuXHR2YXIgbGFzdF9SVCA9IDA7XG5cdHZhciBmaWxlX2RlcHRoID0gMDsgLyogVE9ETzogbWFrZSBhIHJlYWwgc3RhY2sgKi9cblx0dmFyIEJJRkYyRm10ID0gMCwgQklGRjJGbXRUYWJsZS8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgRmlsdGVyRGF0YWJhc2VzID0gW107IC8qIFRPRE86IHNvcnQgb3V0IHN1cGJvb2tzIGFuZCBwcm9jZXNzIGVsc2V3aGVyZSAqL1xuXHR2YXIgbGFzdF9sYmwvKjo/RGVmaW5lZE5hbWUqLztcblxuXHQvKiBleHBsaWNpdCBvdmVycmlkZSBmb3Igc29tZSBicm9rZW4gd3JpdGVycyAqL1xuXHRvcHRzLmNvZGVwYWdlID0gMTIwMDtcblx0c2V0X2NwKDEyMDApO1xuXHR2YXIgc2Vlbl9jb2RlcGFnZSA9IGZhbHNlO1xuXHR3aGlsZShibG9iLmwgPCBibG9iLmxlbmd0aCAtIDEpIHtcblx0XHR2YXIgcyA9IGJsb2IubDtcblx0XHR2YXIgUmVjb3JkVHlwZSA9IGJsb2IucmVhZF9zaGlmdCgyKTtcblx0XHRpZihSZWNvcmRUeXBlID09PSAwICYmIGxhc3RfUlQgPT09IDB4MDAwYSAvKiBFT0YgKi8pIGJyZWFrO1xuXHRcdHZhciBsZW5ndGggPSAoYmxvYi5sID09PSBibG9iLmxlbmd0aCA/IDAgOiBibG9iLnJlYWRfc2hpZnQoMikpO1xuXHRcdHZhciBSID0gWExTUmVjb3JkRW51bVtSZWNvcmRUeXBlXTtcblx0XHQvL2NvbnNvbGUubG9nKFJlY29yZFR5cGUudG9TdHJpbmcoMTYpLCBSZWNvcmRUeXBlLCBSLCBibG9iLmwsIGxlbmd0aCwgYmxvYi5sZW5ndGgpO1xuXHRcdC8vaWYoIVIpIGNvbnNvbGUubG9nKGJsb2Iuc2xpY2UoYmxvYi5sLCBibG9iLmwgKyBsZW5ndGgpKTtcblx0XHRpZihSICYmIFIuZikge1xuXHRcdFx0aWYob3B0aW9ucy5ib29rU2hlZXRzKSB7XG5cdFx0XHRcdGlmKGxhc3RfUlQgPT09IDB4MDA4NSAvKiBCb3VuZFNoZWV0OCAqLyAmJiBSZWNvcmRUeXBlICE9PSAweDAwODUgLyogUi5uICE9PSAnQm91bmRTaGVldDgnICovKSBicmVhaztcblx0XHRcdH1cblx0XHRcdGxhc3RfUlQgPSBSZWNvcmRUeXBlO1xuXHRcdFx0aWYoUi5yID09PSAyIHx8IFIuciA9PSAxMikge1xuXHRcdFx0XHR2YXIgcnQgPSBibG9iLnJlYWRfc2hpZnQoMik7IGxlbmd0aCAtPSAyO1xuXHRcdFx0XHRpZighb3B0cy5lbmMgJiYgcnQgIT09IFJlY29yZFR5cGUgJiYgKCgocnQmMHhGRik8PDgpfChydD4+OCkpICE9PSBSZWNvcmRUeXBlKSB0aHJvdyBuZXcgRXJyb3IoXCJydCBtaXNtYXRjaDogXCIgKyBydCArIFwiIT1cIiArIFJlY29yZFR5cGUpO1xuXHRcdFx0XHRpZihSLnIgPT0gMTIpe1xuXHRcdFx0XHRcdGJsb2IubCArPSAxMDsgbGVuZ3RoIC09IDEwO1xuXHRcdFx0XHR9IC8vIHNraXAgRlJUXG5cdFx0XHR9XG5cdFx0XHQvL2NvbnNvbGUuZXJyb3IoUixibG9iLmwsbGVuZ3RoLGJsb2IubGVuZ3RoKTtcblx0XHRcdHZhciB2YWwvKjphbnkqLyA9ICh7fS8qOmFueSovKTtcblx0XHRcdGlmKFJlY29yZFR5cGUgPT09IDB4MDAwYSAvKiBFT0YgKi8pIHZhbCA9IC8qOjooKi9SLmYoYmxvYiwgbGVuZ3RoLCBvcHRzKS8qOjogOmFueSkqLztcblx0XHRcdGVsc2UgdmFsID0gLyo6OigqL3NsdXJwKFJlY29yZFR5cGUsIFIsIGJsb2IsIGxlbmd0aCwgb3B0cykvKjo6IDphbnkpKi87XG5cdFx0XHQvKjo6IHZhbCA9ICh2YWw6YW55KTsgKi9cblx0XHRcdGlmKGZpbGVfZGVwdGggPT0gMCAmJiBbMHgwMDA5LCAweDAyMDksIDB4MDQwOSwgMHgwODA5XS5pbmRleE9mKGxhc3RfUlQpID09PSAtMSAvKiAnQk9GJyAqLykgY29udGludWU7XG5cdFx0XHRzd2l0Y2goUmVjb3JkVHlwZSkge1xuXHRcdFx0XHRjYXNlIDB4MDAyMiAvKiBEYXRlMTkwNCAqLzpcblx0XHRcdFx0XHQvKjo6IGlmKCFXb3JrYm9vay5XQlByb3BzKSBXb3JrYm9vay5XQlByb3BzID0ge307ICovXG5cdFx0XHRcdFx0d2Iub3B0cy5EYXRlMTkwNCA9IFdvcmtib29rLldCUHJvcHMuZGF0ZTE5MDQgPSB2YWw7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDA4NiAvKiBXcml0ZVByb3RlY3QgKi86IHdiLm9wdHMuV3JpdGVQcm90ZWN0ID0gdHJ1ZTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDJmIC8qIEZpbGVQYXNzICovOlxuXHRcdFx0XHRcdGlmKCFvcHRzLmVuYykgYmxvYi5sID0gMDtcblx0XHRcdFx0XHRvcHRzLmVuYyA9IHZhbDtcblx0XHRcdFx0XHRpZighb3B0aW9ucy5wYXNzd29yZCkgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBpcyBwYXNzd29yZC1wcm90ZWN0ZWRcIik7XG5cdFx0XHRcdFx0aWYodmFsLnZhbGlkID09IG51bGwpIHRocm93IG5ldyBFcnJvcihcIkVuY3J5cHRpb24gc2NoZW1lIHVuc3VwcG9ydGVkXCIpO1xuXHRcdFx0XHRcdGlmKCF2YWwudmFsaWQpIHRocm93IG5ldyBFcnJvcihcIlBhc3N3b3JkIGlzIGluY29ycmVjdFwiKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwNWMgLyogV3JpdGVBY2Nlc3MgKi86IG9wdHMubGFzdHVzZXIgPSB2YWw7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDA0MiAvKiBDb2RlUGFnZSAqLzpcblx0XHRcdFx0XHR2YXIgY3B2YWwgPSBOdW1iZXIodmFsKTtcblx0XHRcdFx0XHQvKiBvdmVycmlkZXMgYmFzZWQgb24gdGVzdCBjYXNlcyAqL1xuXHRcdFx0XHRcdHN3aXRjaChjcHZhbCkge1xuXHRcdFx0XHRcdFx0Y2FzZSAweDUyMTI6IGNwdmFsID0gIDEyMDA7IGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAweDgwMDA6IGNwdmFsID0gMTAwMDA7IGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAweDgwMDE6IGNwdmFsID0gIDEyNTI7IGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRzZXRfY3Aob3B0cy5jb2RlcGFnZSA9IGNwdmFsKTtcblx0XHRcdFx0XHRzZWVuX2NvZGVwYWdlID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAxM2QgLyogUlJUYWJJZCAqLzogb3B0cy5ycnRhYmlkID0gdmFsOyBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwMTkgLyogV2luUHJvdGVjdCAqLzogb3B0cy53aW5sb2NrZWQgPSB2YWw7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDFiNyAvKiBSZWZyZXNoQWxsICovOiB3Yi5vcHRzW1wiUmVmcmVzaEFsbFwiXSA9IHZhbDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDBjIC8qIENhbGNDb3VudCAqLzogd2Iub3B0c1tcIkNhbGNDb3VudFwiXSA9IHZhbDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDEwIC8qIENhbGNEZWx0YSAqLzogd2Iub3B0c1tcIkNhbGNEZWx0YVwiXSA9IHZhbDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDExIC8qIENhbGNJdGVyICovOiB3Yi5vcHRzW1wiQ2FsY0l0ZXJcIl0gPSB2YWw7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAwZCAvKiBDYWxjTW9kZSAqLzogd2Iub3B0c1tcIkNhbGNNb2RlXCJdID0gdmFsOyBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwMGUgLyogQ2FsY1ByZWNpc2lvbiAqLzogd2Iub3B0c1tcIkNhbGNQcmVjaXNpb25cIl0gPSB2YWw7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDA1ZiAvKiBDYWxjU2F2ZVJlY2FsYyAqLzogd2Iub3B0c1tcIkNhbGNTYXZlUmVjYWxjXCJdID0gdmFsOyBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwMGYgLyogQ2FsY1JlZk1vZGUgKi86IG9wdHMuQ2FsY1JlZk1vZGUgPSB2YWw7IGJyZWFrOyAvLyBUT0RPOiBpbXBsZW1lbnQgUjFDMVxuXHRcdFx0XHRjYXNlIDB4MDhhMyAvKiBGb3JjZUZ1bGxDYWxjdWxhdGlvbiAqLzogd2Iub3B0cy5GdWxsQ2FsYyA9IHZhbDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDgxIC8qIFdzQm9vbCAqLzpcblx0XHRcdFx0XHRpZih2YWwuZkRpYWxvZykgb3V0W1wiIXR5cGVcIl0gPSBcImRpYWxvZ1wiO1xuXHRcdFx0XHRcdGlmKCF2YWwuZkJlbG93KSAob3V0W1wiIW91dGxpbmVcIl0gfHwgKG91dFtcIiFvdXRsaW5lXCJdID0ge30pKS5hYm92ZSA9IHRydWU7XG5cdFx0XHRcdFx0aWYoIXZhbC5mUmlnaHQpIChvdXRbXCIhb3V0bGluZVwiXSB8fCAob3V0W1wiIW91dGxpbmVcIl0gPSB7fSkpLmxlZnQgPSB0cnVlO1xuXHRcdFx0XHRcdGJyZWFrOyAvLyBUT0RPXG5cdFx0XHRcdGNhc2UgMHgwMGUwIC8qIFhGICovOlxuXHRcdFx0XHRcdFhGcy5wdXNoKHZhbCk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDFhZSAvKiBTdXBCb29rICovOlxuXHRcdFx0XHRcdHN1cGJvb2tzLnB1c2goW3ZhbF0pO1xuXHRcdFx0XHRcdHN1cGJvb2tzW3N1cGJvb2tzLmxlbmd0aC0xXS5YVEkgPSBbXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwMjM6IGNhc2UgMHgwMjIzIC8qIEV4dGVybk5hbWUgKi86XG5cdFx0XHRcdFx0c3VwYm9va3Nbc3VwYm9va3MubGVuZ3RoLTFdLnB1c2godmFsKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwMTg6IGNhc2UgMHgwMjE4IC8qIExibCAqLzpcblx0XHRcdFx0XHRsYXN0X2xibCA9ICh7XG5cdFx0XHRcdFx0XHROYW1lOiB2YWwuTmFtZSxcblx0XHRcdFx0XHRcdFJlZjogc3RyaW5naWZ5X2Zvcm11bGEodmFsLnJnY2UscmFuZ2UsbnVsbCxzdXBib29rcyxvcHRzKVxuXHRcdFx0XHRcdH0vKjpEZWZpbmVkTmFtZSovKTtcblx0XHRcdFx0XHRpZih2YWwuaXRhYiA+IDApIGxhc3RfbGJsLlNoZWV0ID0gdmFsLml0YWIgLSAxO1xuXHRcdFx0XHRcdHN1cGJvb2tzLm5hbWVzLnB1c2gobGFzdF9sYmwpO1xuXHRcdFx0XHRcdGlmKCFzdXBib29rc1swXSkgeyBzdXBib29rc1swXSA9IFtdOyBzdXBib29rc1swXS5YVEkgPSBbXTsgfVxuXHRcdFx0XHRcdHN1cGJvb2tzW3N1cGJvb2tzLmxlbmd0aC0xXS5wdXNoKHZhbCk7XG5cdFx0XHRcdFx0aWYodmFsLk5hbWUgPT0gXCJfeGxubS5fRmlsdGVyRGF0YWJhc2VcIiAmJiB2YWwuaXRhYiA+IDApXG5cdFx0XHRcdFx0XHRpZih2YWwucmdjZSAmJiB2YWwucmdjZVswXSAmJiB2YWwucmdjZVswXVswXSAmJiB2YWwucmdjZVswXVswXVswXSA9PSAnUHRnQXJlYTNkJylcblx0XHRcdFx0XHRcdFx0RmlsdGVyRGF0YWJhc2VzW3ZhbC5pdGFiIC0gMV0gPSB7IHJlZjogZW5jb2RlX3JhbmdlKHZhbC5yZ2NlWzBdWzBdWzFdWzJdKSB9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAxNiAvKiBFeHRlcm5Db3VudCAqLzogb3B0cy5FeHRlcm5Db3VudCA9IHZhbDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDE3IC8qIEV4dGVyblNoZWV0ICovOlxuXHRcdFx0XHRcdGlmKHN1cGJvb2tzLmxlbmd0aCA9PSAwKSB7IHN1cGJvb2tzWzBdID0gW107IHN1cGJvb2tzWzBdLlhUSSA9IFtdOyB9XG5cdFx0XHRcdFx0c3VwYm9va3Nbc3VwYm9va3MubGVuZ3RoIC0gMV0uWFRJID0gc3VwYm9va3Nbc3VwYm9va3MubGVuZ3RoIC0gMV0uWFRJLmNvbmNhdCh2YWwpOyBzdXBib29rcy5YVEkgPSBzdXBib29rcy5YVEkuY29uY2F0KHZhbCk7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDg5NCAvKiBOYW1lQ210ICovOlxuXHRcdFx0XHRcdC8qIFRPRE86IHNlYXJjaCBmb3IgY29ycmVjdCBuYW1lICovXG5cdFx0XHRcdFx0aWYob3B0cy5iaWZmIDwgOCkgYnJlYWs7XG5cdFx0XHRcdFx0aWYobGFzdF9sYmwgIT0gbnVsbCkgbGFzdF9sYmwuQ29tbWVudCA9IHZhbFsxXTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwMTIgLyogUHJvdGVjdCAqLzogb3V0W1wiIXByb3RlY3RcIl0gPSB2YWw7IGJyZWFrOyAvKiBmb3Igc2hlZXQgb3IgYm9vayAqL1xuXHRcdFx0XHRjYXNlIDB4MDAxMyAvKiBQYXNzd29yZCAqLzogaWYodmFsICE9PSAwICYmIG9wdHMuV1RGKSBjb25zb2xlLmVycm9yKFwiUGFzc3dvcmQgdmVyaWZpZXI6IFwiICsgdmFsKTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDg1IC8qIEJvdW5kU2hlZXQ4ICovOiB7XG5cdFx0XHRcdFx0RGlyZWN0b3J5W3ZhbC5wb3NdID0gdmFsO1xuXHRcdFx0XHRcdG9wdHMuc25hbWVzLnB1c2godmFsLm5hbWUpO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAwYSAvKiBFT0YgKi86IHtcblx0XHRcdFx0XHRpZigtLWZpbGVfZGVwdGgpIGJyZWFrO1xuXHRcdFx0XHRcdGlmKHJhbmdlLmUpIHtcblx0XHRcdFx0XHRcdGlmKHJhbmdlLmUuciA+IDAgJiYgcmFuZ2UuZS5jID4gMCkge1xuXHRcdFx0XHRcdFx0XHRyYW5nZS5lLnItLTsgcmFuZ2UuZS5jLS07XG5cdFx0XHRcdFx0XHRcdG91dFtcIiFyZWZcIl0gPSBlbmNvZGVfcmFuZ2UocmFuZ2UpO1xuXHRcdFx0XHRcdFx0XHRpZihvcHRpb25zLnNoZWV0Um93cyAmJiBvcHRpb25zLnNoZWV0Um93cyA8PSByYW5nZS5lLnIpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgdG1wcmkgPSByYW5nZS5lLnI7XG5cdFx0XHRcdFx0XHRcdFx0cmFuZ2UuZS5yID0gb3B0aW9ucy5zaGVldFJvd3MgLSAxO1xuXHRcdFx0XHRcdFx0XHRcdG91dFtcIiFmdWxscmVmXCJdID0gb3V0W1wiIXJlZlwiXTtcblx0XHRcdFx0XHRcdFx0XHRvdXRbXCIhcmVmXCJdID0gZW5jb2RlX3JhbmdlKHJhbmdlKTtcblx0XHRcdFx0XHRcdFx0XHRyYW5nZS5lLnIgPSB0bXByaTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyYW5nZS5lLnIrKzsgcmFuZ2UuZS5jKys7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZihtZXJnZXMubGVuZ3RoID4gMCkgb3V0W1wiIW1lcmdlc1wiXSA9IG1lcmdlcztcblx0XHRcdFx0XHRcdGlmKG9iamVjdHMubGVuZ3RoID4gMCkgb3V0W1wiIW9iamVjdHNcIl0gPSBvYmplY3RzO1xuXHRcdFx0XHRcdFx0aWYoY29saW5mby5sZW5ndGggPiAwKSBvdXRbXCIhY29sc1wiXSA9IGNvbGluZm87XG5cdFx0XHRcdFx0XHRpZihyb3dpbmZvLmxlbmd0aCA+IDApIG91dFtcIiFyb3dzXCJdID0gcm93aW5mbztcblx0XHRcdFx0XHRcdFdvcmtib29rLlNoZWV0cy5wdXNoKHdzcHJvcHMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihjdXJfc2hlZXQgPT09IFwiXCIpIFByZWFtYmxlID0gb3V0OyBlbHNlIFNoZWV0c1tjdXJfc2hlZXRdID0gb3V0O1xuXHRcdFx0XHRcdG91dCA9ICgob3B0aW9ucy5kZW5zZSA/IFtdIDoge30pLyo6YW55Ki8pO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAwOTogY2FzZSAweDAyMDk6IGNhc2UgMHgwNDA5OiBjYXNlIDB4MDgwOSAvKiBCT0YgKi86IHtcblx0XHRcdFx0XHRpZihvcHRzLmJpZmYgPT09IDgpIG9wdHMuYmlmZiA9IHtcblx0XHRcdFx0XHRcdC8qOjpbKi8weDAwMDkvKjo6XSovOjIsXG5cdFx0XHRcdFx0XHQvKjo6WyovMHgwMjA5Lyo6Ol0qLzozLFxuXHRcdFx0XHRcdFx0Lyo6OlsqLzB4MDQwOS8qOjpdKi86NFxuXHRcdFx0XHRcdH1bUmVjb3JkVHlwZV0gfHwge1xuXHRcdFx0XHRcdFx0Lyo6OlsqLzB4MDIwMC8qOjpdKi86Mixcblx0XHRcdFx0XHRcdC8qOjpbKi8weDAzMDAvKjo6XSovOjMsXG5cdFx0XHRcdFx0XHQvKjo6WyovMHgwNDAwLyo6Ol0qLzo0LFxuXHRcdFx0XHRcdFx0Lyo6OlsqLzB4MDUwMC8qOjpdKi86NSxcblx0XHRcdFx0XHRcdC8qOjpbKi8weDA2MDAvKjo6XSovOjgsXG5cdFx0XHRcdFx0XHQvKjo6WyovMHgwMDAyLyo6Ol0qLzoyLFxuXHRcdFx0XHRcdFx0Lyo6OlsqLzB4MDAwNy8qOjpdKi86MlxuXHRcdFx0XHRcdH1bdmFsLkJJRkZWZXJdIHx8IDg7XG5cdFx0XHRcdFx0b3B0cy5iaWZmZ3Vlc3MgPSB2YWwuQklGRlZlciA9PSAwO1xuXHRcdFx0XHRcdGlmKHZhbC5CSUZGVmVyID09IDAgJiYgdmFsLmR0ID09IDB4MTAwMCkgeyBvcHRzLmJpZmYgPSA1OyBzZWVuX2NvZGVwYWdlID0gdHJ1ZTsgc2V0X2NwKG9wdHMuY29kZXBhZ2UgPSAyODU5MSk7IH1cblx0XHRcdFx0XHRpZihvcHRzLmJpZmYgPT0gOCAmJiB2YWwuQklGRlZlciA9PSAwICYmIHZhbC5kdCA9PSAxNikgb3B0cy5iaWZmID0gMjtcblx0XHRcdFx0XHRpZihmaWxlX2RlcHRoKyspIGJyZWFrO1xuXHRcdFx0XHRcdG91dCA9ICgob3B0aW9ucy5kZW5zZSA/IFtdIDoge30pLyo6YW55Ki8pO1xuXG5cdFx0XHRcdFx0aWYob3B0cy5iaWZmIDwgOCAmJiAhc2Vlbl9jb2RlcGFnZSkgeyBzZWVuX2NvZGVwYWdlID0gdHJ1ZTsgc2V0X2NwKG9wdHMuY29kZXBhZ2UgPSBvcHRpb25zLmNvZGVwYWdlIHx8IDEyNTIpOyB9XG5cblx0XHRcdFx0XHRpZihvcHRzLmJpZmYgPCA1IHx8IHZhbC5CSUZGVmVyID09IDAgJiYgdmFsLmR0ID09IDB4MTAwMCkge1xuXHRcdFx0XHRcdFx0aWYoY3VyX3NoZWV0ID09PSBcIlwiKSBjdXJfc2hlZXQgPSBcIlNoZWV0MVwiO1xuXHRcdFx0XHRcdFx0cmFuZ2UgPSB7czp7cjowLGM6MH0sZTp7cjowLGM6MH19O1xuXHRcdFx0XHRcdFx0LyogZmFrZSBCb3VuZFNoZWV0OCAqL1xuXHRcdFx0XHRcdFx0dmFyIGZha2ViczggPSB7cG9zOiBibG9iLmwgLSBsZW5ndGgsIG5hbWU6Y3VyX3NoZWV0fTtcblx0XHRcdFx0XHRcdERpcmVjdG9yeVtmYWtlYnM4LnBvc10gPSBmYWtlYnM4O1xuXHRcdFx0XHRcdFx0b3B0cy5zbmFtZXMucHVzaChjdXJfc2hlZXQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGN1cl9zaGVldCA9IChEaXJlY3Rvcnlbc10gfHwge25hbWU6XCJcIn0pLm5hbWU7XG5cdFx0XHRcdFx0aWYodmFsLmR0ID09IDB4MjApIG91dFtcIiF0eXBlXCJdID0gXCJjaGFydFwiO1xuXHRcdFx0XHRcdGlmKHZhbC5kdCA9PSAweDQwKSBvdXRbXCIhdHlwZVwiXSA9IFwibWFjcm9cIjtcblx0XHRcdFx0XHRtZXJnZXMgPSBbXTtcblx0XHRcdFx0XHRvYmplY3RzID0gW107XG5cdFx0XHRcdFx0b3B0cy5hcnJheWYgPSBhcnJheWYgPSBbXTtcblx0XHRcdFx0XHRjb2xpbmZvID0gW107IHJvd2luZm8gPSBbXTtcblx0XHRcdFx0XHRzZWVuY29sID0gZmFsc2U7XG5cdFx0XHRcdFx0d3Nwcm9wcyA9IHtIaWRkZW46KERpcmVjdG9yeVtzXXx8e2hzOjB9KS5ocywgbmFtZTpjdXJfc2hlZXQgfTtcblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAyMDMgLyogTnVtYmVyICovOiBjYXNlIDB4MDAwMyAvKiBCSUZGMk5VTSAqLzogY2FzZSAweDAwMDIgLyogQklGRjJJTlQgKi86IHtcblx0XHRcdFx0XHRpZihvdXRbXCIhdHlwZVwiXSA9PSBcImNoYXJ0XCIpIGlmKG9wdGlvbnMuZGVuc2UgPyAob3V0W3ZhbC5yXXx8W10pW3ZhbC5jXTogb3V0W2VuY29kZV9jZWxsKHtjOnZhbC5jLCByOnZhbC5yfSldKSArK3ZhbC5jO1xuXHRcdFx0XHRcdHRlbXBfdmFsID0gKHtpeGZlOiB2YWwuaXhmZSwgWEY6IFhGc1t2YWwuaXhmZV18fHt9LCB2OnZhbC52YWwsIHQ6J24nfS8qOmFueSovKTtcblx0XHRcdFx0XHRpZihCSUZGMkZtdCA+IDApIHRlbXBfdmFsLnogPSBCSUZGMkZtdFRhYmxlWyh0ZW1wX3ZhbC5peGZlPj44KSAmIDB4M0ZdO1xuXHRcdFx0XHRcdHNhZmVfZm9ybWF0X3hmKHRlbXBfdmFsLCBvcHRpb25zLCB3Yi5vcHRzLkRhdGUxOTA0KTtcblx0XHRcdFx0XHRhZGRjZWxsKHtjOnZhbC5jLCByOnZhbC5yfSwgdGVtcF92YWwsIG9wdGlvbnMpO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAwNTogY2FzZSAweDAyMDUgLyogQm9vbEVyciAqLzoge1xuXHRcdFx0XHRcdHRlbXBfdmFsID0gKHtpeGZlOiB2YWwuaXhmZSwgWEY6IFhGc1t2YWwuaXhmZV0sIHY6dmFsLnZhbCwgdDp2YWwudH0vKjphbnkqLyk7XG5cdFx0XHRcdFx0aWYoQklGRjJGbXQgPiAwKSB0ZW1wX3ZhbC56ID0gQklGRjJGbXRUYWJsZVsodGVtcF92YWwuaXhmZT4+OCkgJiAweDNGXTtcblx0XHRcdFx0XHRzYWZlX2Zvcm1hdF94Zih0ZW1wX3ZhbCwgb3B0aW9ucywgd2Iub3B0cy5EYXRlMTkwNCk7XG5cdFx0XHRcdFx0YWRkY2VsbCh7Yzp2YWwuYywgcjp2YWwucn0sIHRlbXBfdmFsLCBvcHRpb25zKTtcblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAyN2UgLyogUksgKi86IHtcblx0XHRcdFx0XHR0ZW1wX3ZhbCA9ICh7aXhmZTogdmFsLml4ZmUsIFhGOiBYRnNbdmFsLml4ZmVdLCB2OnZhbC5ya251bSwgdDonbid9Lyo6YW55Ki8pO1xuXHRcdFx0XHRcdGlmKEJJRkYyRm10ID4gMCkgdGVtcF92YWwueiA9IEJJRkYyRm10VGFibGVbKHRlbXBfdmFsLml4ZmU+PjgpICYgMHgzRl07XG5cdFx0XHRcdFx0c2FmZV9mb3JtYXRfeGYodGVtcF92YWwsIG9wdGlvbnMsIHdiLm9wdHMuRGF0ZTE5MDQpO1xuXHRcdFx0XHRcdGFkZGNlbGwoe2M6dmFsLmMsIHI6dmFsLnJ9LCB0ZW1wX3ZhbCwgb3B0aW9ucyk7XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMGJkIC8qIE11bFJrICovOiB7XG5cdFx0XHRcdFx0Zm9yKHZhciBqID0gdmFsLmM7IGogPD0gdmFsLkM7ICsraikge1xuXHRcdFx0XHRcdFx0dmFyIGl4ZmUgPSB2YWwucmtyZWNbai12YWwuY11bMF07XG5cdFx0XHRcdFx0XHR0ZW1wX3ZhbD0gKHtpeGZlOml4ZmUsIFhGOlhGc1tpeGZlXSwgdjp2YWwucmtyZWNbai12YWwuY11bMV0sIHQ6J24nfS8qOmFueSovKTtcblx0XHRcdFx0XHRcdGlmKEJJRkYyRm10ID4gMCkgdGVtcF92YWwueiA9IEJJRkYyRm10VGFibGVbKHRlbXBfdmFsLml4ZmU+PjgpICYgMHgzRl07XG5cdFx0XHRcdFx0XHRzYWZlX2Zvcm1hdF94Zih0ZW1wX3ZhbCwgb3B0aW9ucywgd2Iub3B0cy5EYXRlMTkwNCk7XG5cdFx0XHRcdFx0XHRhZGRjZWxsKHtjOmosIHI6dmFsLnJ9LCB0ZW1wX3ZhbCwgb3B0aW9ucyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAwNjogY2FzZSAweDAyMDY6IGNhc2UgMHgwNDA2IC8qIEZvcm11bGEgKi86IHtcblx0XHRcdFx0XHRpZih2YWwudmFsID09ICdTdHJpbmcnKSB7IGxhc3RfZm9ybXVsYSA9IHZhbDsgYnJlYWs7IH1cblx0XHRcdFx0XHR0ZW1wX3ZhbCA9IG1ha2VfY2VsbCh2YWwudmFsLCB2YWwuY2VsbC5peGZlLCB2YWwudHQpO1xuXHRcdFx0XHRcdHRlbXBfdmFsLlhGID0gWEZzW3RlbXBfdmFsLml4ZmVdO1xuXHRcdFx0XHRcdGlmKG9wdGlvbnMuY2VsbEZvcm11bGEpIHtcblx0XHRcdFx0XHRcdHZhciBfZiA9IHZhbC5mb3JtdWxhO1xuXHRcdFx0XHRcdFx0aWYoX2YgJiYgX2ZbMF0gJiYgX2ZbMF1bMF0gJiYgX2ZbMF1bMF1bMF0gPT0gJ1B0Z0V4cCcpIHtcblx0XHRcdFx0XHRcdFx0dmFyIF9mciA9IF9mWzBdWzBdWzFdWzBdLCBfZmMgPSBfZlswXVswXVsxXVsxXTtcblx0XHRcdFx0XHRcdFx0dmFyIF9mZSA9IGVuY29kZV9jZWxsKHtyOl9mciwgYzpfZmN9KTtcblx0XHRcdFx0XHRcdFx0aWYoc2hhcmVkZltfZmVdKSB0ZW1wX3ZhbC5mID0gXCJcIitzdHJpbmdpZnlfZm9ybXVsYSh2YWwuZm9ybXVsYSxyYW5nZSx2YWwuY2VsbCxzdXBib29rcywgb3B0cyk7XG5cdFx0XHRcdFx0XHRcdGVsc2UgdGVtcF92YWwuRiA9ICgob3B0aW9ucy5kZW5zZSA/IChvdXRbX2ZyXXx8W10pW19mY106IG91dFtfZmVdKSB8fCB7fSkuRjtcblx0XHRcdFx0XHRcdH0gZWxzZSB0ZW1wX3ZhbC5mID0gXCJcIitzdHJpbmdpZnlfZm9ybXVsYSh2YWwuZm9ybXVsYSxyYW5nZSx2YWwuY2VsbCxzdXBib29rcywgb3B0cyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKEJJRkYyRm10ID4gMCkgdGVtcF92YWwueiA9IEJJRkYyRm10VGFibGVbKHRlbXBfdmFsLml4ZmU+PjgpICYgMHgzRl07XG5cdFx0XHRcdFx0c2FmZV9mb3JtYXRfeGYodGVtcF92YWwsIG9wdGlvbnMsIHdiLm9wdHMuRGF0ZTE5MDQpO1xuXHRcdFx0XHRcdGFkZGNlbGwodmFsLmNlbGwsIHRlbXBfdmFsLCBvcHRpb25zKTtcblx0XHRcdFx0XHRsYXN0X2Zvcm11bGEgPSB2YWw7XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDA3OiBjYXNlIDB4MDIwNyAvKiBTdHJpbmcgKi86IHtcblx0XHRcdFx0XHRpZihsYXN0X2Zvcm11bGEpIHsgLyogdGVjaG5pY2FsbHkgYWx3YXlzIHRydWUgKi9cblx0XHRcdFx0XHRcdGxhc3RfZm9ybXVsYS52YWwgPSB2YWw7XG5cdFx0XHRcdFx0XHR0ZW1wX3ZhbCA9IG1ha2VfY2VsbCh2YWwsIGxhc3RfZm9ybXVsYS5jZWxsLml4ZmUsICdzJyk7XG5cdFx0XHRcdFx0XHR0ZW1wX3ZhbC5YRiA9IFhGc1t0ZW1wX3ZhbC5peGZlXTtcblx0XHRcdFx0XHRcdGlmKG9wdGlvbnMuY2VsbEZvcm11bGEpIHtcblx0XHRcdFx0XHRcdFx0dGVtcF92YWwuZiA9IFwiXCIrc3RyaW5naWZ5X2Zvcm11bGEobGFzdF9mb3JtdWxhLmZvcm11bGEsIHJhbmdlLCBsYXN0X2Zvcm11bGEuY2VsbCwgc3VwYm9va3MsIG9wdHMpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYoQklGRjJGbXQgPiAwKSB0ZW1wX3ZhbC56ID0gQklGRjJGbXRUYWJsZVsodGVtcF92YWwuaXhmZT4+OCkgJiAweDNGXTtcblx0XHRcdFx0XHRcdHNhZmVfZm9ybWF0X3hmKHRlbXBfdmFsLCBvcHRpb25zLCB3Yi5vcHRzLkRhdGUxOTA0KTtcblx0XHRcdFx0XHRcdGFkZGNlbGwobGFzdF9mb3JtdWxhLmNlbGwsIHRlbXBfdmFsLCBvcHRpb25zKTtcblx0XHRcdFx0XHRcdGxhc3RfZm9ybXVsYSA9IG51bGw7XG5cdFx0XHRcdFx0fSBlbHNlIHRocm93IG5ldyBFcnJvcihcIlN0cmluZyByZWNvcmQgZXhwZWN0cyBGb3JtdWxhXCIpO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAyMTogY2FzZSAweDAyMjEgLyogQXJyYXkgKi86IHtcblx0XHRcdFx0XHRhcnJheWYucHVzaCh2YWwpO1xuXHRcdFx0XHRcdHZhciBfYXJyYXlzdGFydCA9IGVuY29kZV9jZWxsKHZhbFswXS5zKTtcblx0XHRcdFx0XHRjYyA9IG9wdGlvbnMuZGVuc2UgPyAob3V0W3ZhbFswXS5zLnJdfHxbXSlbdmFsWzBdLnMuY10gOiBvdXRbX2FycmF5c3RhcnRdO1xuXHRcdFx0XHRcdGlmKG9wdGlvbnMuY2VsbEZvcm11bGEgJiYgY2MpIHtcblx0XHRcdFx0XHRcdGlmKCFsYXN0X2Zvcm11bGEpIGJyZWFrOyAvKiB0ZWNobmljYWxseSB1bnJlYWNoYWJsZSAqL1xuXHRcdFx0XHRcdFx0aWYoIV9hcnJheXN0YXJ0IHx8ICFjYykgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYy5mID0gXCJcIitzdHJpbmdpZnlfZm9ybXVsYSh2YWxbMV0sIHJhbmdlLCB2YWxbMF0sIHN1cGJvb2tzLCBvcHRzKTtcblx0XHRcdFx0XHRcdGNjLkYgPSBlbmNvZGVfcmFuZ2UodmFsWzBdKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwNGJjIC8qIFNockZtbGEgKi86IHtcblx0XHRcdFx0XHRpZighb3B0aW9ucy5jZWxsRm9ybXVsYSkgYnJlYWs7XG5cdFx0XHRcdFx0aWYobGFzdF9jZWxsKSB7XG5cdFx0XHRcdFx0XHQvKiBUT0RPOiBjYXB0dXJlIHJhbmdlICovXG5cdFx0XHRcdFx0XHRpZighbGFzdF9mb3JtdWxhKSBicmVhazsgLyogdGVjaG5pY2FsbHkgdW5yZWFjaGFibGUgKi9cblx0XHRcdFx0XHRcdHNoYXJlZGZbZW5jb2RlX2NlbGwobGFzdF9mb3JtdWxhLmNlbGwpXT0gdmFsWzBdO1xuXHRcdFx0XHRcdFx0Y2MgPSBvcHRpb25zLmRlbnNlID8gKG91dFtsYXN0X2Zvcm11bGEuY2VsbC5yXXx8W10pW2xhc3RfZm9ybXVsYS5jZWxsLmNdIDogb3V0W2VuY29kZV9jZWxsKGxhc3RfZm9ybXVsYS5jZWxsKV07XG5cdFx0XHRcdFx0XHQoY2N8fHt9KS5mID0gXCJcIitzdHJpbmdpZnlfZm9ybXVsYSh2YWxbMF0sIHJhbmdlLCBsYXN0Y2VsbCwgc3VwYm9va3MsIG9wdHMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwZmQgLyogTGFiZWxTc3QgKi86XG5cdFx0XHRcdFx0dGVtcF92YWw9bWFrZV9jZWxsKHNzdFt2YWwuaXNzdF0udCwgdmFsLml4ZmUsICdzJyk7XG5cdFx0XHRcdFx0aWYoc3N0W3ZhbC5pc3N0XS5oKSB0ZW1wX3ZhbC5oID0gc3N0W3ZhbC5pc3N0XS5oO1xuXHRcdFx0XHRcdHRlbXBfdmFsLlhGID0gWEZzW3RlbXBfdmFsLml4ZmVdO1xuXHRcdFx0XHRcdGlmKEJJRkYyRm10ID4gMCkgdGVtcF92YWwueiA9IEJJRkYyRm10VGFibGVbKHRlbXBfdmFsLml4ZmU+PjgpICYgMHgzRl07XG5cdFx0XHRcdFx0c2FmZV9mb3JtYXRfeGYodGVtcF92YWwsIG9wdGlvbnMsIHdiLm9wdHMuRGF0ZTE5MDQpO1xuXHRcdFx0XHRcdGFkZGNlbGwoe2M6dmFsLmMsIHI6dmFsLnJ9LCB0ZW1wX3ZhbCwgb3B0aW9ucyk7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMjAxIC8qIEJsYW5rICovOiBpZihvcHRpb25zLnNoZWV0U3R1YnMpIHtcblx0XHRcdFx0XHR0ZW1wX3ZhbCA9ICh7aXhmZTogdmFsLml4ZmUsIFhGOiBYRnNbdmFsLml4ZmVdLCB0Oid6J30vKjphbnkqLyk7XG5cdFx0XHRcdFx0aWYoQklGRjJGbXQgPiAwKSB0ZW1wX3ZhbC56ID0gQklGRjJGbXRUYWJsZVsodGVtcF92YWwuaXhmZT4+OCkgJiAweDNGXTtcblx0XHRcdFx0XHRzYWZlX2Zvcm1hdF94Zih0ZW1wX3ZhbCwgb3B0aW9ucywgd2Iub3B0cy5EYXRlMTkwNCk7XG5cdFx0XHRcdFx0YWRkY2VsbCh7Yzp2YWwuYywgcjp2YWwucn0sIHRlbXBfdmFsLCBvcHRpb25zKTtcblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwYmUgLyogTXVsQmxhbmsgKi86IGlmKG9wdGlvbnMuc2hlZXRTdHVicykge1xuXHRcdFx0XHRcdGZvcih2YXIgX2ogPSB2YWwuYzsgX2ogPD0gdmFsLkM7ICsrX2opIHtcblx0XHRcdFx0XHRcdHZhciBfaXhmZSA9IHZhbC5peGZlW19qLXZhbC5jXTtcblx0XHRcdFx0XHRcdHRlbXBfdmFsPSAoe2l4ZmU6X2l4ZmUsIFhGOlhGc1tfaXhmZV0sIHQ6J3onfS8qOmFueSovKTtcblx0XHRcdFx0XHRcdGlmKEJJRkYyRm10ID4gMCkgdGVtcF92YWwueiA9IEJJRkYyRm10VGFibGVbKHRlbXBfdmFsLml4ZmU+PjgpICYgMHgzRl07XG5cdFx0XHRcdFx0XHRzYWZlX2Zvcm1hdF94Zih0ZW1wX3ZhbCwgb3B0aW9ucywgd2Iub3B0cy5EYXRlMTkwNCk7XG5cdFx0XHRcdFx0XHRhZGRjZWxsKHtjOl9qLCByOnZhbC5yfSwgdGVtcF92YWwsIG9wdGlvbnMpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwZDYgLyogUlN0cmluZyAqLzpcblx0XHRcdFx0Y2FzZSAweDAyMDQgLyogTGFiZWwgKi86IGNhc2UgMHgwMDA0IC8qIEJJRkYyU1RSICovOlxuXHRcdFx0XHRcdHRlbXBfdmFsPW1ha2VfY2VsbCh2YWwudmFsLCB2YWwuaXhmZSwgJ3MnKTtcblx0XHRcdFx0XHR0ZW1wX3ZhbC5YRiA9IFhGc1t0ZW1wX3ZhbC5peGZlXTtcblx0XHRcdFx0XHRpZihCSUZGMkZtdCA+IDApIHRlbXBfdmFsLnogPSBCSUZGMkZtdFRhYmxlWyh0ZW1wX3ZhbC5peGZlPj44KSAmIDB4M0ZdO1xuXHRcdFx0XHRcdHNhZmVfZm9ybWF0X3hmKHRlbXBfdmFsLCBvcHRpb25zLCB3Yi5vcHRzLkRhdGUxOTA0KTtcblx0XHRcdFx0XHRhZGRjZWxsKHtjOnZhbC5jLCByOnZhbC5yfSwgdGVtcF92YWwsIG9wdGlvbnMpO1xuXHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgMHgwMDAwOiBjYXNlIDB4MDIwMCAvKiBEaW1lbnNpb25zICovOiB7XG5cdFx0XHRcdFx0aWYoZmlsZV9kZXB0aCA9PT0gMSkgcmFuZ2UgPSB2YWw7IC8qIFRPRE86IHN0YWNrICovXG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMGZjIC8qIFNTVCAqLzoge1xuXHRcdFx0XHRcdHNzdCA9IHZhbDtcblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDA0MWUgLyogRm9ybWF0ICovOiB7IC8qIHZhbCA9IFtpZCwgZm10XSAqL1xuXHRcdFx0XHRcdGlmKG9wdHMuYmlmZiA9PSA0KSB7XG5cdFx0XHRcdFx0XHRCSUZGMkZtdFRhYmxlW0JJRkYyRm10KytdID0gdmFsWzFdO1xuXHRcdFx0XHRcdFx0Zm9yKHZhciBiNGlkeCA9IDA7IGI0aWR4IDwgQklGRjJGbXQgKyAxNjM7ICsrYjRpZHgpIGlmKHRhYmxlX2ZtdFtiNGlkeF0gPT0gdmFsWzFdKSBicmVhaztcblx0XHRcdFx0XHRcdGlmKGI0aWR4ID49IDE2MykgU1NGX2xvYWQodmFsWzFdLCBCSUZGMkZtdCArIDE2Myk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgU1NGX2xvYWQodmFsWzFdLCB2YWxbMF0pO1xuXHRcdFx0XHR9IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDAxZSAvKiBCSUZGMkZPUk1BVCAqLzoge1xuXHRcdFx0XHRcdEJJRkYyRm10VGFibGVbQklGRjJGbXQrK10gPSB2YWw7XG5cdFx0XHRcdFx0Zm9yKHZhciBiMmlkeCA9IDA7IGIyaWR4IDwgQklGRjJGbXQgKyAxNjM7ICsrYjJpZHgpIGlmKHRhYmxlX2ZtdFtiMmlkeF0gPT0gdmFsKSBicmVhaztcblx0XHRcdFx0XHRpZihiMmlkeCA+PSAxNjMpIFNTRl9sb2FkKHZhbCwgQklGRjJGbXQgKyAxNjMpO1xuXHRcdFx0XHR9IGJyZWFrO1xuXG5cdFx0XHRcdGNhc2UgMHgwMGU1IC8qIE1lcmdlQ2VsbHMgKi86IG1lcmdlcyA9IG1lcmdlcy5jb25jYXQodmFsKTsgYnJlYWs7XG5cblx0XHRcdFx0Y2FzZSAweDAwNWQgLyogT2JqICovOiBvYmplY3RzW3ZhbC5jbW9bMF1dID0gb3B0cy5sYXN0b2JqID0gdmFsOyBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAxYjYgLyogVHhPICovOiBvcHRzLmxhc3RvYmouVHhPID0gdmFsOyBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwN2YgLyogSW1EYXRhICovOiBvcHRzLmxhc3RvYmouSW1EYXRhID0gdmFsOyBicmVhaztcblxuXHRcdFx0XHRjYXNlIDB4MDFiOCAvKiBITGluayAqLzoge1xuXHRcdFx0XHRcdGZvcihybmdSID0gdmFsWzBdLnMucjsgcm5nUiA8PSB2YWxbMF0uZS5yOyArK3JuZ1IpXG5cdFx0XHRcdFx0XHRmb3Iocm5nQyA9IHZhbFswXS5zLmM7IHJuZ0MgPD0gdmFsWzBdLmUuYzsgKytybmdDKSB7XG5cdFx0XHRcdFx0XHRcdGNjID0gb3B0aW9ucy5kZW5zZSA/IChvdXRbcm5nUl18fFtdKVtybmdDXSA6IG91dFtlbmNvZGVfY2VsbCh7YzpybmdDLHI6cm5nUn0pXTtcblx0XHRcdFx0XHRcdFx0aWYoY2MpIGNjLmwgPSB2YWxbMV07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwODAwIC8qIEhMaW5rVG9vbHRpcCAqLzoge1xuXHRcdFx0XHRcdGZvcihybmdSID0gdmFsWzBdLnMucjsgcm5nUiA8PSB2YWxbMF0uZS5yOyArK3JuZ1IpXG5cdFx0XHRcdFx0XHRmb3Iocm5nQyA9IHZhbFswXS5zLmM7IHJuZ0MgPD0gdmFsWzBdLmUuYzsgKytybmdDKSB7XG5cdFx0XHRcdFx0XHRcdGNjID0gb3B0aW9ucy5kZW5zZSA/IChvdXRbcm5nUl18fFtdKVtybmdDXSA6IG91dFtlbmNvZGVfY2VsbCh7YzpybmdDLHI6cm5nUn0pXTtcblx0XHRcdFx0XHRcdFx0aWYoY2MgJiYgY2MubCkgY2MubC5Ub29sdGlwID0gdmFsWzFdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDFjIC8qIE5vdGUgKi86IHtcblx0XHRcdFx0XHRpZihvcHRzLmJpZmYgPD0gNSAmJiBvcHRzLmJpZmYgPj0gMikgYnJlYWs7IC8qIFRPRE86IEJJRkY1ICovXG5cdFx0XHRcdFx0Y2MgPSBvcHRpb25zLmRlbnNlID8gKG91dFt2YWxbMF0ucl18fFtdKVt2YWxbMF0uY10gOiBvdXRbZW5jb2RlX2NlbGwodmFsWzBdKV07XG5cdFx0XHRcdFx0dmFyIG5vdGVvYmogPSBvYmplY3RzW3ZhbFsyXV07XG5cdFx0XHRcdFx0aWYoIWNjKSB7XG5cdFx0XHRcdFx0XHRpZihvcHRpb25zLmRlbnNlKSB7XG5cdFx0XHRcdFx0XHRcdGlmKCFvdXRbdmFsWzBdLnJdKSBvdXRbdmFsWzBdLnJdID0gW107XG5cdFx0XHRcdFx0XHRcdGNjID0gb3V0W3ZhbFswXS5yXVt2YWxbMF0uY10gPSAoe3Q6XCJ6XCJ9Lyo6YW55Ki8pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y2MgPSBvdXRbZW5jb2RlX2NlbGwodmFsWzBdKV0gPSAoe3Q6XCJ6XCJ9Lyo6YW55Ki8pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmFuZ2UuZS5yID0gTWF0aC5tYXgocmFuZ2UuZS5yLCB2YWxbMF0ucik7XG5cdFx0XHRcdFx0XHRyYW5nZS5zLnIgPSBNYXRoLm1pbihyYW5nZS5zLnIsIHZhbFswXS5yKTtcblx0XHRcdFx0XHRcdHJhbmdlLmUuYyA9IE1hdGgubWF4KHJhbmdlLmUuYywgdmFsWzBdLmMpO1xuXHRcdFx0XHRcdFx0cmFuZ2Uucy5jID0gTWF0aC5taW4ocmFuZ2Uucy5jLCB2YWxbMF0uYyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmKCFjYy5jKSBjYy5jID0gW107XG5cdFx0XHRcdFx0Y21udCA9IHthOnZhbFsxXSx0Om5vdGVvYmouVHhPLnR9O1xuXHRcdFx0XHRcdGNjLmMucHVzaChjbW50KTtcblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDA4N2QgLyogWEZFeHQgKi86IHVwZGF0ZV94ZmV4dChYRnNbdmFsLml4ZmVdLCB2YWwuZXh0KTsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDdkIC8qIENvbEluZm8gKi86IHtcblx0XHRcdFx0XHRpZighb3B0cy5jZWxsU3R5bGVzKSBicmVhaztcblx0XHRcdFx0XHR3aGlsZSh2YWwuZSA+PSB2YWwucykge1xuXHRcdFx0XHRcdFx0Y29saW5mb1t2YWwuZS0tXSA9IHsgd2lkdGg6IHZhbC53LzI1NiwgbGV2ZWw6ICh2YWwubGV2ZWwgfHwgMCksIGhpZGRlbjogISEodmFsLmZsYWdzICYgMSkgfTtcblx0XHRcdFx0XHRcdGlmKCFzZWVuY29sKSB7IHNlZW5jb2wgPSB0cnVlOyBmaW5kX21kd19jb2x3KHZhbC53LzI1Nik7IH1cblx0XHRcdFx0XHRcdHByb2Nlc3NfY29sKGNvbGluZm9bdmFsLmUrMV0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAyMDggLyogUm93ICovOiB7XG5cdFx0XHRcdFx0dmFyIHJvd29iaiA9IHt9O1xuXHRcdFx0XHRcdGlmKHZhbC5sZXZlbCAhPSBudWxsKSB7IHJvd2luZm9bdmFsLnJdID0gcm93b2JqOyByb3dvYmoubGV2ZWwgPSB2YWwubGV2ZWw7IH1cblx0XHRcdFx0XHRpZih2YWwuaGlkZGVuKSB7IHJvd2luZm9bdmFsLnJdID0gcm93b2JqOyByb3dvYmouaGlkZGVuID0gdHJ1ZTsgfVxuXHRcdFx0XHRcdGlmKHZhbC5ocHQpIHtcblx0XHRcdFx0XHRcdHJvd2luZm9bdmFsLnJdID0gcm93b2JqO1xuXHRcdFx0XHRcdFx0cm93b2JqLmhwdCA9IHZhbC5ocHQ7IHJvd29iai5ocHggPSBwdDJweCh2YWwuaHB0KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMDI2IC8qIExlZnRNYXJnaW4gKi86XG5cdFx0XHRcdGNhc2UgMHgwMDI3IC8qIFJpZ2h0TWFyZ2luICovOlxuXHRcdFx0XHRjYXNlIDB4MDAyOCAvKiBUb3BNYXJnaW4gKi86XG5cdFx0XHRcdGNhc2UgMHgwMDI5IC8qIEJvdHRvbU1hcmdpbiAqLzpcblx0XHRcdFx0XHRpZighb3V0WychbWFyZ2lucyddKSBkZWZhdWx0X21hcmdpbnMob3V0WychbWFyZ2lucyddID0ge30pO1xuXHRcdFx0XHRcdG91dFsnIW1hcmdpbnMnXVsoezB4MjY6IFwibGVmdFwiLCAweDI3OlwicmlnaHRcIiwgMHgyODpcInRvcFwiLCAweDI5OlwiYm90dG9tXCJ9KVtSZWNvcmRUeXBlXV0gPSB2YWw7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwMGExIC8qIFNldHVwICovOiAvLyBUT0RPXG5cdFx0XHRcdFx0aWYoIW91dFsnIW1hcmdpbnMnXSkgZGVmYXVsdF9tYXJnaW5zKG91dFsnIW1hcmdpbnMnXSA9IHt9KTtcblx0XHRcdFx0XHRvdXRbJyFtYXJnaW5zJ10uaGVhZGVyID0gdmFsLmhlYWRlcjtcblx0XHRcdFx0XHRvdXRbJyFtYXJnaW5zJ10uZm9vdGVyID0gdmFsLmZvb3Rlcjtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAyM2UgLyogV2luZG93MiAqLzogLy8gVE9ET1xuXHRcdFx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRcdFx0aWYodmFsLlJUTCkgV29ya2Jvb2suVmlld3NbMF0uUlRMID0gdHJ1ZTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAweDAwOTIgLyogUGFsZXR0ZSAqLzogcGFsZXR0ZSA9IHZhbDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMHgwODk2IC8qIFRoZW1lICovOiB0aGVtZXMgPSB2YWw7IGJyZWFrO1xuXHRcdFx0XHRjYXNlIDB4MDA4YyAvKiBDb3VudHJ5ICovOiBjb3VudHJ5ID0gdmFsOyBicmVhaztcblx0XHRcdFx0Y2FzZSAweDAxYmEgLyogQ29kZU5hbWUgKi86IHtcblx0XHRcdFx0XHQvKjo6IGlmKCFXb3JrYm9vay5XQlByb3BzKSBXb3JrYm9vay5XQlByb3BzID0ge307ICovXG5cdFx0XHRcdFx0aWYoIWN1cl9zaGVldCkgV29ya2Jvb2suV0JQcm9wcy5Db2RlTmFtZSA9IHZhbCB8fCBcIlRoaXNXb3JrYm9va1wiO1xuXHRcdFx0XHRcdGVsc2Ugd3Nwcm9wcy5Db2RlTmFtZSA9IHZhbCB8fCB3c3Byb3BzLm5hbWU7XG5cdFx0XHRcdH0gYnJlYWs7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmKCFSKSBjb25zb2xlLmVycm9yKFwiTWlzc2luZyBJbmZvIGZvciBYTFMgUmVjb3JkIDB4XCIgKyBSZWNvcmRUeXBlLnRvU3RyaW5nKDE2KSk7XG5cdFx0XHRibG9iLmwgKz0gbGVuZ3RoO1xuXHRcdH1cblx0fVxuXHR3Yi5TaGVldE5hbWVzPWtleXMoRGlyZWN0b3J5KS5zb3J0KGZ1bmN0aW9uKGEsYikgeyByZXR1cm4gTnVtYmVyKGEpIC0gTnVtYmVyKGIpOyB9KS5tYXAoZnVuY3Rpb24oeCl7cmV0dXJuIERpcmVjdG9yeVt4XS5uYW1lO30pO1xuXHRpZighb3B0aW9ucy5ib29rU2hlZXRzKSB3Yi5TaGVldHM9U2hlZXRzO1xuXHRpZighd2IuU2hlZXROYW1lcy5sZW5ndGggJiYgUHJlYW1ibGVbXCIhcmVmXCJdKSB7XG5cdFx0d2IuU2hlZXROYW1lcy5wdXNoKFwiU2hlZXQxXCIpO1xuXHRcdC8qanNoaW50IC1XMDY5ICovXG5cdFx0aWYod2IuU2hlZXRzKSB3Yi5TaGVldHNbXCJTaGVldDFcIl0gPSBQcmVhbWJsZTtcblx0XHQvKmpzaGludCArVzA2OSAqL1xuXHR9IGVsc2Ugd2IuUHJlYW1ibGU9UHJlYW1ibGU7XG5cdGlmKHdiLlNoZWV0cykgRmlsdGVyRGF0YWJhc2VzLmZvckVhY2goZnVuY3Rpb24ocixpKSB7IHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2ldXVsnIWF1dG9maWx0ZXInXSA9IHI7IH0pO1xuXHR3Yi5TdHJpbmdzID0gc3N0O1xuXHR3Yi5TU0YgPSBkdXAodGFibGVfZm10KTtcblx0aWYob3B0cy5lbmMpIHdiLkVuY3J5cHRpb24gPSBvcHRzLmVuYztcblx0aWYodGhlbWVzKSB3Yi5UaGVtZXMgPSB0aGVtZXM7XG5cdHdiLk1ldGFkYXRhID0ge307XG5cdGlmKGNvdW50cnkgIT09IHVuZGVmaW5lZCkgd2IuTWV0YWRhdGEuQ291bnRyeSA9IGNvdW50cnk7XG5cdGlmKHN1cGJvb2tzLm5hbWVzLmxlbmd0aCA+IDApIFdvcmtib29rLk5hbWVzID0gc3VwYm9va3MubmFtZXM7XG5cdHdiLldvcmtib29rID0gV29ya2Jvb2s7XG5cdHJldHVybiB3Yjtcbn1cblxuLyogVE9ETzogc3BsaXQgcHJvcHMqL1xudmFyIFBTQ0xTSUQgPSB7XG5cdFNJOiBcImUwODU5ZmYyZjk0ZjY4MTBhYjkxMDgwMDJiMjdiM2Q5XCIsXG5cdERTSTogXCIwMmQ1Y2RkNTljMmUxYjEwOTM5NzA4MDAyYjJjZjlhZVwiLFxuXHRVREk6IFwiMDVkNWNkZDU5YzJlMWIxMDkzOTcwODAwMmIyY2Y5YWVcIlxufTtcbmZ1bmN0aW9uIHBhcnNlX3hsc19wcm9wcyhjZmIvKjpDRkJDb250YWluZXIqLywgcHJvcHMsIG8pIHtcblx0LyogW01TLU9TSEFSRURdIDIuMy4zLjIuMiBEb2N1bWVudCBTdW1tYXJ5IEluZm9ybWF0aW9uIFByb3BlcnR5IFNldCAqL1xuXHR2YXIgRFNJID0gQ0ZCLmZpbmQoY2ZiLCAnLyFEb2N1bWVudFN1bW1hcnlJbmZvcm1hdGlvbicpO1xuXHRpZihEU0kgJiYgRFNJLnNpemUgPiAwKSB0cnkge1xuXHRcdHZhciBEb2NTdW1tYXJ5ID0gcGFyc2VfUHJvcGVydHlTZXRTdHJlYW0oRFNJLCBEb2NTdW1tYXJ5UElERFNJLCBQU0NMU0lELkRTSSk7XG5cdFx0Zm9yKHZhciBkIGluIERvY1N1bW1hcnkpIHByb3BzW2RdID0gRG9jU3VtbWFyeVtkXTtcblx0fSBjYXRjaChlKSB7aWYoby5XVEYpIHRocm93IGU7LyogZW1wdHkgKi99XG5cblx0LyogW01TLU9TSEFSRURdIDIuMy4zLjIuMSBTdW1tYXJ5IEluZm9ybWF0aW9uIFByb3BlcnR5IFNldCovXG5cdHZhciBTSSA9IENGQi5maW5kKGNmYiwgJy8hU3VtbWFyeUluZm9ybWF0aW9uJyk7XG5cdGlmKFNJICYmIFNJLnNpemUgPiAwKSB0cnkge1xuXHRcdHZhciBTdW1tYXJ5ID0gcGFyc2VfUHJvcGVydHlTZXRTdHJlYW0oU0ksIFN1bW1hcnlQSURTSSwgUFNDTFNJRC5TSSk7XG5cdFx0Zm9yKHZhciBzIGluIFN1bW1hcnkpIGlmKHByb3BzW3NdID09IG51bGwpIHByb3BzW3NdID0gU3VtbWFyeVtzXTtcblx0fSBjYXRjaChlKSB7aWYoby5XVEYpIHRocm93IGU7LyogZW1wdHkgKi99XG5cblx0aWYocHJvcHMuSGVhZGluZ1BhaXJzICYmIHByb3BzLlRpdGxlc09mUGFydHMpIHtcblx0XHRsb2FkX3Byb3BzX3BhaXJzKHByb3BzLkhlYWRpbmdQYWlycywgcHJvcHMuVGl0bGVzT2ZQYXJ0cywgcHJvcHMsIG8pO1xuXHRcdGRlbGV0ZSBwcm9wcy5IZWFkaW5nUGFpcnM7IGRlbGV0ZSBwcm9wcy5UaXRsZXNPZlBhcnRzO1xuXHR9XG59XG5mdW5jdGlvbiB3cml0ZV94bHNfcHJvcHMod2IvKjpXb3JrYm9vayovLCBjZmIvKjpDRkJDb250YWluZXIqLykge1xuXHR2YXIgRFNFbnRyaWVzID0gW10sIFNFbnRyaWVzID0gW10sIENFbnRyaWVzID0gW107XG5cdHZhciBpID0gMCwgS2V5cztcblx0dmFyIERvY1N1bW1hcnlSRS8qOntba2V5OnN0cmluZ106c3RyaW5nfSovID0gZXZlcnRfa2V5KERvY1N1bW1hcnlQSUREU0ksIFwiblwiKTtcblx0dmFyIFN1bW1hcnlSRS8qOntba2V5OnN0cmluZ106c3RyaW5nfSovID0gZXZlcnRfa2V5KFN1bW1hcnlQSURTSSwgXCJuXCIpO1xuXHRpZih3Yi5Qcm9wcykge1xuXHRcdEtleXMgPSBrZXlzKHdiLlByb3BzKTtcblx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdGZvcihpID0gMDsgaSA8IEtleXMubGVuZ3RoOyArK2kpIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoRG9jU3VtbWFyeVJFLCBLZXlzW2ldKSA/IERTRW50cmllcyA6IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChTdW1tYXJ5UkUsIEtleXNbaV0pID8gU0VudHJpZXMgOiBDRW50cmllcykucHVzaChbS2V5c1tpXSwgd2IuUHJvcHNbS2V5c1tpXV1dKTtcblx0fVxuXHRpZih3Yi5DdXN0cHJvcHMpIHtcblx0XHRLZXlzID0ga2V5cyh3Yi5DdXN0cHJvcHMpO1xuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0Zm9yKGkgPSAwOyBpIDwgS2V5cy5sZW5ndGg7ICsraSkgaWYoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCgod2IuUHJvcHN8fHt9KSwgS2V5c1tpXSkpIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoRG9jU3VtbWFyeVJFLCBLZXlzW2ldKSA/IERTRW50cmllcyA6IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChTdW1tYXJ5UkUsIEtleXNbaV0pID8gU0VudHJpZXMgOiBDRW50cmllcykucHVzaChbS2V5c1tpXSwgd2IuQ3VzdHByb3BzW0tleXNbaV1dXSk7XG5cdH1cblx0dmFyIENFbnRyaWVzMiA9IFtdO1xuXHRmb3IoaSA9IDA7IGkgPCBDRW50cmllcy5sZW5ndGg7ICsraSkge1xuXHRcdGlmKFhMU1BTU2tpcC5pbmRleE9mKENFbnRyaWVzW2ldWzBdKSA+IC0xIHx8IFBzZXVkb1Byb3BzUGFpcnMuaW5kZXhPZihDRW50cmllc1tpXVswXSkgPiAtMSkgY29udGludWU7XG5cdFx0aWYoQ0VudHJpZXNbaV1bMV0gPT0gbnVsbCkgY29udGludWU7XG5cdFx0Q0VudHJpZXMyLnB1c2goQ0VudHJpZXNbaV0pO1xuXHR9XG5cdGlmKFNFbnRyaWVzLmxlbmd0aCkgQ0ZCLnV0aWxzLmNmYl9hZGQoY2ZiLCBcIi9cXHUwMDA1U3VtbWFyeUluZm9ybWF0aW9uXCIsIHdyaXRlX1Byb3BlcnR5U2V0U3RyZWFtKFNFbnRyaWVzLCBQU0NMU0lELlNJLCBTdW1tYXJ5UkUsIFN1bW1hcnlQSURTSSkpO1xuXHRpZihEU0VudHJpZXMubGVuZ3RoIHx8IENFbnRyaWVzMi5sZW5ndGgpIENGQi51dGlscy5jZmJfYWRkKGNmYiwgXCIvXFx1MDAwNURvY3VtZW50U3VtbWFyeUluZm9ybWF0aW9uXCIsIHdyaXRlX1Byb3BlcnR5U2V0U3RyZWFtKERTRW50cmllcywgUFNDTFNJRC5EU0ksIERvY1N1bW1hcnlSRSwgRG9jU3VtbWFyeVBJRERTSSwgQ0VudHJpZXMyLmxlbmd0aCA/IENFbnRyaWVzMiA6IG51bGwsIFBTQ0xTSUQuVURJKSk7XG59XG5cbmZ1bmN0aW9uIHBhcnNlX3hsc2NmYihjZmIvKjphbnkqLywgb3B0aW9ucy8qOj9QYXJzZU9wdHMqLykvKjpXb3JrYm9vayovIHtcbmlmKCFvcHRpb25zKSBvcHRpb25zID0ge307XG5maXhfcmVhZF9vcHRzKG9wdGlvbnMpO1xucmVzZXRfY3AoKTtcbmlmKG9wdGlvbnMuY29kZXBhZ2UpIHNldF9hbnNpKG9wdGlvbnMuY29kZXBhZ2UpO1xudmFyIENvbXBPYmovKjo/Q0ZCRW50cnkqLywgV0IvKjo/YW55Ki87XG5pZihjZmIuRnVsbFBhdGhzKSB7XG5cdGlmKENGQi5maW5kKGNmYiwgJy9lbmNyeXB0aW9uJykpIHRocm93IG5ldyBFcnJvcihcIkZpbGUgaXMgcGFzc3dvcmQtcHJvdGVjdGVkXCIpO1xuXHRDb21wT2JqID0gQ0ZCLmZpbmQoY2ZiLCAnIUNvbXBPYmonKTtcblx0V0IgPSBDRkIuZmluZChjZmIsICcvV29ya2Jvb2snKSB8fCBDRkIuZmluZChjZmIsICcvQm9vaycpO1xufSBlbHNlIHtcblx0c3dpdGNoKG9wdGlvbnMudHlwZSkge1xuXHRcdGNhc2UgJ2Jhc2U2NCc6IGNmYiA9IHMyYShCYXNlNjRfZGVjb2RlKGNmYikpOyBicmVhaztcblx0XHRjYXNlICdiaW5hcnknOiBjZmIgPSBzMmEoY2ZiKTsgYnJlYWs7XG5cdFx0Y2FzZSAnYnVmZmVyJzogYnJlYWs7XG5cdFx0Y2FzZSAnYXJyYXknOiBpZighQXJyYXkuaXNBcnJheShjZmIpKSBjZmIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjZmIpOyBicmVhaztcblx0fVxuXHRwcmVwX2Jsb2IoY2ZiLCAwKTtcblx0V0IgPSAoe2NvbnRlbnQ6IGNmYn0vKjphbnkqLyk7XG59XG52YXIgLyo6OkNvbXBPYmpQLCAqL1dvcmtib29rUC8qOjogOldvcmtib29rID0gWExTWC51dGlscy5ib29rX25ldygpOyAqLztcblxudmFyIF9kYXRhLyo6P2FueSovO1xuaWYoQ29tcE9iaikgLyo6OkNvbXBPYmpQID0gKi9wYXJzZV9jb21wb2JqKENvbXBPYmopO1xuaWYob3B0aW9ucy5ib29rUHJvcHMgJiYgIW9wdGlvbnMuYm9va1NoZWV0cykgV29ya2Jvb2tQID0gKHt9Lyo6YW55Ki8pO1xuZWxzZS8qOjogaWYoY2ZiIGluc3RhbmNlb2YgQ0ZCQ29udGFpbmVyKSAqLyB7XG5cdHZhciBUID0gaGFzX2J1ZiA/ICdidWZmZXInIDogJ2FycmF5Jztcblx0aWYoV0IgJiYgV0IuY29udGVudCkgV29ya2Jvb2tQID0gcGFyc2Vfd29ya2Jvb2soV0IuY29udGVudCwgb3B0aW9ucyk7XG5cdC8qIFF1YXR0cm8gUHJvIDctOCAqL1xuXHRlbHNlIGlmKChfZGF0YT1DRkIuZmluZChjZmIsICdQZXJmZWN0T2ZmaWNlX01BSU4nKSkgJiYgX2RhdGEuY29udGVudCkgV29ya2Jvb2tQID0gV0tfLnRvX3dvcmtib29rKF9kYXRhLmNvbnRlbnQsIChvcHRpb25zLnR5cGUgPSBULCBvcHRpb25zKSk7XG5cdC8qIFF1YXR0cm8gUHJvIDkgKi9cblx0ZWxzZSBpZigoX2RhdGE9Q0ZCLmZpbmQoY2ZiLCAnTmF0aXZlQ29udGVudF9NQUlOJykpICYmIF9kYXRhLmNvbnRlbnQpIFdvcmtib29rUCA9IFdLXy50b193b3JrYm9vayhfZGF0YS5jb250ZW50LCAob3B0aW9ucy50eXBlID0gVCwgb3B0aW9ucykpO1xuXHQvKiBXb3JrcyA0IGZvciBNYWMgKi9cblx0ZWxzZSBpZigoX2RhdGE9Q0ZCLmZpbmQoY2ZiLCAnTU4wJykpICYmIF9kYXRhLmNvbnRlbnQpIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIFdvcmtzIDQgZm9yIE1hYyBmaWxlXCIpO1xuXHRlbHNlIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIFdvcmtib29rIHN0cmVhbVwiKTtcblx0aWYob3B0aW9ucy5ib29rVkJBICYmIGNmYi5GdWxsUGF0aHMgJiYgQ0ZCLmZpbmQoY2ZiLCAnL19WQkFfUFJPSkVDVF9DVVIvVkJBL2RpcicpKSBXb3JrYm9va1AudmJhcmF3ID0gbWFrZV92YmFfeGxzKGNmYik7XG59XG5cbnZhciBwcm9wcyA9IHt9O1xuaWYoY2ZiLkZ1bGxQYXRocykgcGFyc2VfeGxzX3Byb3BzKC8qOjooKCovY2ZiLyo6OiA6YW55KTpDRkJDb250YWluZXIpKi8sIHByb3BzLCBvcHRpb25zKTtcblxuV29ya2Jvb2tQLlByb3BzID0gV29ya2Jvb2tQLkN1c3Rwcm9wcyA9IHByb3BzOyAvKiBUT0RPOiBzcGxpdCB1cCBwcm9wZXJ0aWVzICovXG5pZihvcHRpb25zLmJvb2tGaWxlcykgV29ya2Jvb2tQLmNmYiA9IGNmYjtcbi8qV29ya2Jvb2tQLkNvbXBPYmpQID0gQ29tcE9ialA7IC8vIFRPRE86IHN0b3JhZ2U/ICovXG5yZXR1cm4gV29ya2Jvb2tQO1xufVxuXG5cbmZ1bmN0aW9uIHdyaXRlX3hsc2NmYih3Yi8qOldvcmtib29rKi8sIG9wdHMvKjpXcml0ZU9wdHMqLykvKjpDRkJDb250YWluZXIqLyB7XG5cdHZhciBvID0gb3B0cyB8fCB7fTtcblx0dmFyIGNmYiA9IENGQi51dGlscy5jZmJfbmV3KHtyb290OlwiUlwifSk7XG5cdHZhciB3YnBhdGggPSBcIi9Xb3JrYm9va1wiO1xuXHRzd2l0Y2goby5ib29rVHlwZSB8fCBcInhsc1wiKSB7XG5cdFx0Y2FzZSBcInhsc1wiOiBvLmJvb2tUeXBlID0gXCJiaWZmOFwiO1xuXHRcdC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRjYXNlIFwieGxhXCI6IGlmKCFvLmJvb2tUeXBlKSBvLmJvb2tUeXBlID0gXCJ4bGFcIjtcblx0XHQvKiBmYWxscyB0aHJvdWdoICovXG5cdFx0Y2FzZSBcImJpZmY4XCI6IHdicGF0aCA9IFwiL1dvcmtib29rXCI7IG8uYmlmZiA9IDg7IGJyZWFrO1xuXHRcdGNhc2UgXCJiaWZmNVwiOiB3YnBhdGggPSBcIi9Cb29rXCI7IG8uYmlmZiA9IDU7IGJyZWFrO1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcImludmFsaWQgdHlwZSBcIiArIG8uYm9va1R5cGUgKyBcIiBmb3IgWExTIENGQlwiKTtcblx0fVxuXHRDRkIudXRpbHMuY2ZiX2FkZChjZmIsIHdicGF0aCwgd3JpdGVfYmlmZl9idWYod2IsIG8pKTtcblx0aWYoby5iaWZmID09IDggJiYgKHdiLlByb3BzIHx8IHdiLkN1c3Rwcm9wcykpIHdyaXRlX3hsc19wcm9wcyh3YiwgY2ZiKTtcblx0Ly8gVE9ETzogU0ksIERTSSwgQ09cblx0aWYoby5iaWZmID09IDggJiYgd2IudmJhcmF3KSBmaWxsX3ZiYV94bHMoY2ZiLCBDRkIucmVhZCh3Yi52YmFyYXcsIHt0eXBlOiB0eXBlb2Ygd2IudmJhcmF3ID09IFwic3RyaW5nXCIgPyBcImJpbmFyeVwiIDogXCJidWZmZXJcIn0pKTtcblx0cmV0dXJuIGNmYjtcbn1cbi8qIFtNUy1YTFNCXSAyLjMgUmVjb3JkIEVudW1lcmF0aW9uICovXG52YXIgWExTQlJlY29yZEVudW0gPSB7XG5cdC8qOjpbKi8weDAwMDAvKjo6XSovOiB7IC8qIG46XCJCcnRSb3dIZHJcIiwgKi8gZjpwYXJzZV9CcnRSb3dIZHIgfSxcblx0Lyo6OlsqLzB4MDAwMS8qOjpdKi86IHsgLyogbjpcIkJydENlbGxCbGFua1wiLCAqLyBmOnBhcnNlX0JydENlbGxCbGFuayB9LFxuXHQvKjo6WyovMHgwMDAyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q2VsbFJrXCIsICovIGY6cGFyc2VfQnJ0Q2VsbFJrIH0sXG5cdC8qOjpbKi8weDAwMDMvKjo6XSovOiB7IC8qIG46XCJCcnRDZWxsRXJyb3JcIiwgKi8gZjpwYXJzZV9CcnRDZWxsRXJyb3IgfSxcblx0Lyo6OlsqLzB4MDAwNC8qOjpdKi86IHsgLyogbjpcIkJydENlbGxCb29sXCIsICovIGY6cGFyc2VfQnJ0Q2VsbEJvb2wgfSxcblx0Lyo6OlsqLzB4MDAwNS8qOjpdKi86IHsgLyogbjpcIkJydENlbGxSZWFsXCIsICovIGY6cGFyc2VfQnJ0Q2VsbFJlYWwgfSxcblx0Lyo6OlsqLzB4MDAwNi8qOjpdKi86IHsgLyogbjpcIkJydENlbGxTdFwiLCAqLyBmOnBhcnNlX0JydENlbGxTdCB9LFxuXHQvKjo6WyovMHgwMDA3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q2VsbElzc3RcIiwgKi8gZjpwYXJzZV9CcnRDZWxsSXNzdCB9LFxuXHQvKjo6WyovMHgwMDA4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0Rm1sYVN0cmluZ1wiLCAqLyBmOnBhcnNlX0JydEZtbGFTdHJpbmcgfSxcblx0Lyo6OlsqLzB4MDAwOS8qOjpdKi86IHsgLyogbjpcIkJydEZtbGFOdW1cIiwgKi8gZjpwYXJzZV9CcnRGbWxhTnVtIH0sXG5cdC8qOjpbKi8weDAwMEEvKjo6XSovOiB7IC8qIG46XCJCcnRGbWxhQm9vbFwiLCAqLyBmOnBhcnNlX0JydEZtbGFCb29sIH0sXG5cdC8qOjpbKi8weDAwMEIvKjo6XSovOiB7IC8qIG46XCJCcnRGbWxhRXJyb3JcIiwgKi8gZjpwYXJzZV9CcnRGbWxhRXJyb3IgfSxcblx0Lyo6OlsqLzB4MDAwQy8qOjpdKi86IHsgLyogbjpcIkJydFNob3J0QmxhbmtcIiwgKi8gZjpwYXJzZV9CcnRTaG9ydEJsYW5rIH0sXG5cdC8qOjpbKi8weDAwMEQvKjo6XSovOiB7IC8qIG46XCJCcnRTaG9ydFJrXCIsICovIGY6cGFyc2VfQnJ0U2hvcnRSayB9LFxuXHQvKjo6WyovMHgwMDBFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hvcnRFcnJvclwiLCAqLyBmOnBhcnNlX0JydFNob3J0RXJyb3IgfSxcblx0Lyo6OlsqLzB4MDAwRi8qOjpdKi86IHsgLyogbjpcIkJydFNob3J0Qm9vbFwiLCAqLyBmOnBhcnNlX0JydFNob3J0Qm9vbCB9LFxuXHQvKjo6WyovMHgwMDEwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hvcnRSZWFsXCIsICovIGY6cGFyc2VfQnJ0U2hvcnRSZWFsIH0sXG5cdC8qOjpbKi8weDAwMTEvKjo6XSovOiB7IC8qIG46XCJCcnRTaG9ydFN0XCIsICovIGY6cGFyc2VfQnJ0U2hvcnRTdCB9LFxuXHQvKjo6WyovMHgwMDEyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hvcnRJc3N0XCIsICovIGY6cGFyc2VfQnJ0U2hvcnRJc3N0IH0sXG5cdC8qOjpbKi8weDAwMTMvKjo6XSovOiB7IC8qIG46XCJCcnRTU1RJdGVtXCIsICovIGY6cGFyc2VfUmljaFN0ciB9LFxuXHQvKjo6WyovMHgwMDE0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UENESU1pc3NpbmdcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDE1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UENESU51bWJlclwiICovIH0sXG5cdC8qOjpbKi8weDAwMTYvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJQm9vbGVhblwiICovIH0sXG5cdC8qOjpbKi8weDAwMTcvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJRXJyb3JcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDE4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UENESVN0cmluZ1wiICovIH0sXG5cdC8qOjpbKi8weDAwMTkvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJRGF0ZXRpbWVcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDFBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UENESUluZGV4XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDAxQi8qOjpdKi86IHsgLyogbjpcIkJydFBDRElBTWlzc2luZ1wiICovIH0sXG5cdC8qOjpbKi8weDAwMUMvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJQU51bWJlclwiICovIH0sXG5cdC8qOjpbKi8weDAwMUQvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJQUJvb2xlYW5cIiAqLyB9LFxuXHQvKjo6WyovMHgwMDFFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UENESUFFcnJvclwiICovIH0sXG5cdC8qOjpbKi8weDAwMUYvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJQVN0cmluZ1wiICovIH0sXG5cdC8qOjpbKi8weDAwMjAvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RJQURhdGV0aW1lXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDAyMS8qOjpdKi86IHsgLyogbjpcIkJydFBDUlJlY29yZFwiICovIH0sXG5cdC8qOjpbKi8weDAwMjIvKjo6XSovOiB7IC8qIG46XCJCcnRQQ1JSZWNvcmREdFwiICovIH0sXG5cdC8qOjpbKi8weDAwMjMvKjo6XSovOiB7IC8qIG46XCJCcnRGUlRCZWdpblwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDAyNC8qOjpdKi86IHsgLyogbjpcIkJydEZSVEVuZFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwMjUvKjo6XSovOiB7IC8qIG46XCJCcnRBQ0JlZ2luXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMDI2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QUNFbmRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDI3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0TmFtZVwiLCAqLyBmOnBhcnNlX0JydE5hbWUgfSxcblx0Lyo6OlsqLzB4MDAyOC8qOjpdKi86IHsgLyogbjpcIkJydEluZGV4Um93QmxvY2tcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDJBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0SW5kZXhCbG9ja1wiICovIH0sXG5cdC8qOjpbKi8weDAwMkIvKjo6XSovOiB7IC8qIG46XCJCcnRGb250XCIsICovIGY6cGFyc2VfQnJ0Rm9udCB9LFxuXHQvKjo6WyovMHgwMDJDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Rm10XCIsICovIGY6cGFyc2VfQnJ0Rm10IH0sXG5cdC8qOjpbKi8weDAwMkQvKjo6XSovOiB7IC8qIG46XCJCcnRGaWxsXCIsICovIGY6cGFyc2VfQnJ0RmlsbCB9LFxuXHQvKjo6WyovMHgwMDJFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Qm9yZGVyXCIsICovIGY6cGFyc2VfQnJ0Qm9yZGVyIH0sXG5cdC8qOjpbKi8weDAwMkYvKjo6XSovOiB7IC8qIG46XCJCcnRYRlwiLCAqLyBmOnBhcnNlX0JydFhGIH0sXG5cdC8qOjpbKi8weDAwMzAvKjo6XSovOiB7IC8qIG46XCJCcnRTdHlsZVwiICovIH0sXG5cdC8qOjpbKi8weDAwMzEvKjo6XSovOiB7IC8qIG46XCJCcnRDZWxsTWV0YVwiLCAqLyBmOnBhcnNlX0ludDMyTEUgfSxcblx0Lyo6OlsqLzB4MDAzMi8qOjpdKi86IHsgLyogbjpcIkJydFZhbHVlTWV0YVwiICovIH0sXG5cdC8qOjpbKi8weDAwMzMvKjo6XSovOiB7IC8qIG46XCJCcnRNZGJcIiAqLyBmOnBhcnNlX0JydE1kYiB9LFxuXHQvKjo6WyovMHgwMDM0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5GbWRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwMzUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRGbWRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDM2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5NZHhcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwMzcvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNZHhcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDM4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5NZHhUdXBsZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDAzOS8qOjpdKi86IHsgLyogbjpcIkJydEVuZE1keFR1cGxlXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDAzQS8qOjpdKi86IHsgLyogbjpcIkJydE1keE1icklzdHJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDNCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3RyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDAzQy8qOjpdKi86IHsgLyogbjpcIkJydENvbEluZm9cIiwgKi8gZjpwYXJzZV9Db2xJbmZvIH0sXG5cdC8qOjpbKi8weDAwM0UvKjo6XSovOiB7IC8qIG46XCJCcnRDZWxsUlN0cmluZ1wiLCAqLyBmOnBhcnNlX0JydENlbGxSU3RyaW5nIH0sXG5cdC8qOjpbKi8weDAwM0YvKjo6XSovOiB7IC8qIG46XCJCcnRDYWxjQ2hhaW5JdGVtJFwiLCAqLyBmOnBhcnNlX0JydENhbGNDaGFpbkl0ZW0kIH0sXG5cdC8qOjpbKi8weDAwNDAvKjo6XSovOiB7IC8qIG46XCJCcnREVmFsXCIsICovIGY6cGFyc2VfQnJ0RFZhbCB9LFxuXHQvKjo6WyovMHgwMDQxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3h2Y2VsbE51bVwiICovIH0sXG5cdC8qOjpbKi8weDAwNDIvKjo6XSovOiB7IC8qIG46XCJCcnRTeHZjZWxsU3RyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA0My8qOjpdKi86IHsgLyogbjpcIkJydFN4dmNlbGxCb29sXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA0NC8qOjpdKi86IHsgLyogbjpcIkJydFN4dmNlbGxFcnJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDQ1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3h2Y2VsbERhdGVcIiAqLyB9LFxuXHQvKjo6WyovMHgwMDQ2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3h2Y2VsbE5pbFwiICovIH0sXG5cdC8qOjpbKi8weDAwODAvKjo6XSovOiB7IC8qIG46XCJCcnRGaWxlVmVyc2lvblwiICovIH0sXG5cdC8qOjpbKi8weDAwODEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNoZWV0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMDgyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2hlZXRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDgzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Cb29rXCIsICovIFQ6MSwgZjpwYXJzZW5vb3AsIHA6MCB9LFxuXHQvKjo6WyovMHgwMDg0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQm9va1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwODUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbldzVmlld3NcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwODYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRXc1ZpZXdzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDA4Ny8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQm9va1ZpZXdzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMDg4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQm9va1ZpZXdzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDA4OS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luV3NWaWV3XCIsICovIFQ6MSwgZjpwYXJzZV9CcnRCZWdpbldzVmlldyB9LFxuXHQvKjo6WyovMHgwMDhBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kV3NWaWV3XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDA4Qi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQ3NWaWV3c1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDA4Qy8qOjpdKi86IHsgLyogbjpcIkJydEVuZENzVmlld3NcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDhELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Dc1ZpZXdcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwOEUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRDc1ZpZXdcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDhGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5CdW5kbGVTaHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwOTAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRCdW5kbGVTaHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDkxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TaGVldERhdGFcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwOTIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTaGVldERhdGFcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMDkzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0V3NQcm9wXCIsICovIGY6cGFyc2VfQnJ0V3NQcm9wIH0sXG5cdC8qOjpbKi8weDAwOTQvKjo6XSovOiB7IC8qIG46XCJCcnRXc0RpbVwiLCAqLyBmOnBhcnNlX0JydFdzRGltLCBwOjE2IH0sXG5cdC8qOjpbKi8weDAwOTcvKjo6XSovOiB7IC8qIG46XCJCcnRQYW5lXCIsICovIGY6cGFyc2VfQnJ0UGFuZSB9LFxuXHQvKjo6WyovMHgwMDk4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2VsXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA5OS8qOjpdKi86IHsgLyogbjpcIkJydFdiUHJvcFwiLCAqLyBmOnBhcnNlX0JydFdiUHJvcCB9LFxuXHQvKjo6WyovMHgwMDlBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0V2JGYWN0b2lkXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA5Qi8qOjpdKi86IHsgLyogbjpcIkJydEZpbGVSZWNvdmVyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA5Qy8qOjpdKi86IHsgLyogbjpcIkJydEJ1bmRsZVNoXCIsICovIGY6cGFyc2VfQnJ0QnVuZGxlU2ggfSxcblx0Lyo6OlsqLzB4MDA5RC8qOjpdKi86IHsgLyogbjpcIkJydENhbGNQcm9wXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA5RS8qOjpdKi86IHsgLyogbjpcIkJydEJvb2tWaWV3XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDA5Ri8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU3N0XCIsICovIFQ6MSwgZjpwYXJzZV9CcnRCZWdpblNzdCB9LFxuXHQvKjo6WyovMHgwMEEwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU3N0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBBMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQUZpbHRlclwiLCAqLyBUOjEsIGY6cGFyc2VfVW5jaGVja2VkUmZYIH0sXG5cdC8qOjpbKi8weDAwQTIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRBRmlsdGVyXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBBMy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRmlsdGVyQ29sdW1uXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEE0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRmlsdGVyQ29sdW1uXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBBNS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRmlsdGVyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBBNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZEZpbHRlcnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEE3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RmlsdGVyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDBBOC8qOjpdKi86IHsgLyogbjpcIkJydENvbG9yRmlsdGVyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDBBOS8qOjpdKi86IHsgLyogbjpcIkJydEljb25GaWx0ZXJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMEFBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0VG9wMTBGaWx0ZXJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMEFCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RHluYW1pY0ZpbHRlclwiICovIH0sXG5cdC8qOjpbKi8weDAwQUMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkN1c3RvbUZpbHRlcnNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwQUQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRDdXN0b21GaWx0ZXJzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBBRS8qOjpdKi86IHsgLyogbjpcIkJydEN1c3RvbUZpbHRlclwiICovIH0sXG5cdC8qOjpbKi8weDAwQUYvKjo6XSovOiB7IC8qIG46XCJCcnRBRmlsdGVyRGF0ZUdyb3VwSXRlbVwiICovIH0sXG5cdC8qOjpbKi8weDAwQjAvKjo6XSovOiB7IC8qIG46XCJCcnRNZXJnZUNlbGxcIiwgKi8gZjpwYXJzZV9CcnRNZXJnZUNlbGwgfSxcblx0Lyo6OlsqLzB4MDBCMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luTWVyZ2VDZWxsc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBCMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZE1lcmdlQ2VsbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEIzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QaXZvdENhY2hlRGVmXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEI0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUGl2b3RDYWNoZURlZlwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwQjUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREZpZWxkc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBCNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREZpZWxkc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwQjcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREZpZWxkXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEI4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENERmllbGRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEI5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTb3VyY2VcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwQkEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTb3VyY2VcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEJCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTUmFuZ2VcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwQkMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTUmFuZ2VcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEJELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RGQXRibFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBCRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREZBdGJsXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBCRi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENESVJ1blwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBDMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRElSdW5cIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEMxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QaXZvdENhY2hlUmVjb3Jkc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBDMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBpdm90Q2FjaGVSZWNvcmRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBDMy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENESGllcmFyY2hpZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwQzQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RIaWVyYXJjaGllc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwQzUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREhpZXJhcmNoeVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBDNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREhpZXJhcmNoeVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwQzcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREhGaWVsZHNVc2FnZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBDOC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREhGaWVsZHNVc2FnZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwQzkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkV4dENvbm5lY3Rpb25cIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwQ0EvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFeHRDb25uZWN0aW9uXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBDQi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRUNEYlByb3BzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMENDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRUNEYlByb3BzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBDRC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRUNPbGFwUHJvcHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwQ0UvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFQ09sYXBQcm9wc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwQ0YvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDRFNDb25zb2xcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRDAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTQ29uc29sXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBEMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENEU0NQYWdlc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBEMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRFNDUGFnZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEQzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTQ1BhZ2VcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRDQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTQ1BhZ2VcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEQ1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTQ1BJdGVtXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEQ2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEU0NQSXRlbVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwRDcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDRFNDU2V0c1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBEOC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRFNDU2V0c1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwRDkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDRFNDU2V0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMERBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEU0NTZXRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMERCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RGR3JvdXBcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwREMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RGR3JvdXBcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMERELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RGR0l0ZW1zXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMERFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENERkdJdGVtc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwREYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREZHUmFuZ2VcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRTAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RGR1JhbmdlXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBFMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENERkdEaXNjcmV0ZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBFMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREZHRGlzY3JldGVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEUzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTRFR1cGxlQ2FjaGVcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRTQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTRFR1cGxlQ2FjaGVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEU1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTRFRDRW50cmllc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBFNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRFNEVENFbnRyaWVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBFNy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENEU0RUQ0VNZW1iZXJzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEU4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEU0RUQ0VNZW1iZXJzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBFOS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENEU0RUQ0VNZW1iZXJcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRUEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTRFRDRU1lbWJlclwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwRUIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDRFNEVENRdWVyaWVzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEVDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEU0RUQ1F1ZXJpZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEVELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTRFRDUXVlcnlcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRUUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTRFRDUXVlcnlcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEVGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTRFRDU2V0c1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBGMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRFNEVENTZXRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBGMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENEU0RUQ1NldFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBGMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRFNEVENTZXRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEYzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RDYWxjSXRlbXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRjQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RDYWxjSXRlbXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEY1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RDYWxjSXRlbVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBGNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRENhbGNJdGVtXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDBGNy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUFJ1bGVcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRjgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQUnVsZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwRjkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBSRmlsdGVyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDBGQS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBSRmlsdGVyc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAwRkIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBSRmlsdGVyXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMEZDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUFJGaWx0ZXJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEZELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QTmFtZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAwRkUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQTmFtZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMEZGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QTmFtZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEwMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBOYW1lXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEwMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUE5QYWlyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEwMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBOUGFpcnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTAzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QTlBhaXJcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMDQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQTlBhaXJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTA1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5FQ1dlYlByb3BzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTA2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRUNXZWJQcm9wc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMDcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkVjV3BUYWJsZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMDgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFQ1dQVGFibGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEwOS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRUNQYXJhbXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMEEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFQ1BhcmFtc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMEIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkVDUGFyYW1cIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMEMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFQ1BhcmFtXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEwRC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENES1BJc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEwRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREtQSXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTBGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RLUElcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMTAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RLUElcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTExLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EaW1zXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTEyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRGltc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMTMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkRpbVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDExNC8qOjpdKi86IHsgLyogbjpcIkJydEVuZERpbVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMTUvKjo6XSovOiB7IC8qIG46XCJCcnRJbmRleFBhcnRFbmRcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTE2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TdHlsZVNoZWV0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTE3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU3R5bGVTaGVldFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMTgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYVmlld1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDExOS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVklcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTFBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFZJXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTFCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFZJc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDExQy8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVklzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDExRC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hWRFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDExRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVkRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTFGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFZEc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEyMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVkRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEyMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hQSVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEyMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYUElcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTIzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFBJc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEyNC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYUElzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEyNS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hESVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEyNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYRElcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTI3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWERJc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEyOC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYRElzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEyOS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hMSVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEyQS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYTElcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTJCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWExJUndzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTJDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hMSVJ3c1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMkQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYTElDb2xzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTJFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hMSUNvbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTJGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWEZvcm1hdFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEzMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYRm9ybWF0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEzMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hGb3JtYXRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTMyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU3hGb3JtYXRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEzMy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU3hTZWxlY3RcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMzQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTeFNlbGVjdFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxMzUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbklTWFZEUndzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTM2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kSVNYVkRSd3NcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTM3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5JU1hWRENvbHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxMzgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRJU1hWRENvbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTM5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hMb2NhdGlvblwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxM0EvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYTG9jYXRpb25cIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxM0IvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFZpZXdcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTNDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFRIc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEzRC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVEhzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDEzRS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hUSFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDEzRi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVEhcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTQwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5JU1hUSFJ3c1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE0MS8qOjpdKi86IHsgLyogbjpcIkJydEVuZElTWFRIUndzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE0Mi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luSVNYVEhDb2xzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTQzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kSVNYVEhDb2xzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE0NC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hURE1QU1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE0NS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVERNUHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTQ2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFRETVBcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNDcvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFRETVBcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTQ4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFRISXRlbXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNDkvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFRISXRlbXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTRBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFRISXRlbVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE0Qi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYVEhJdGVtXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE0Qy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luTWV0YWRhdGFcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNEQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNZXRhZGF0YVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxNEUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkVzbWR0aW5mb1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE0Ri8qOjpdKi86IHsgLyogbjpcIkJydE1kdGluZm9cIiwgKi8gZjpwYXJzZV9CcnRNZHRpbmZvIH0sXG5cdC8qOjpbKi8weDAxNTAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFc21kdGluZm9cIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTUxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Fc21kYlwiLCAqLyBmOnBhcnNlX0JydEJlZ2luRXNtZGIsIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTUyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRXNtZGJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTUzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Fc2ZtZFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE1NC8qOjpdKi86IHsgLyogbjpcIkJydEVuZEVzZm1kXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE1NS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2luZ2xlQ2VsbHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNTYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTaW5nbGVDZWxsc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxNTcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkxpc3RcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNTgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRMaXN0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE1OS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luTGlzdENvbHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNUEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRMaXN0Q29sc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxNUIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkxpc3RDb2xcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNUMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRMaXN0Q29sXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE1RC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luTGlzdFhtbENQclwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE1RS8qOjpdKi86IHsgLyogbjpcIkJydEVuZExpc3RYbWxDUHJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTVGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0TGlzdENDRm1sYVwiICovIH0sXG5cdC8qOjpbKi8weDAxNjAvKjo6XSovOiB7IC8qIG46XCJCcnRMaXN0VHJGbWxhXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE2MS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRXh0ZXJuYWxzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTYyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRXh0ZXJuYWxzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE2My8qOjpdKi86IHsgLyogbjpcIkJydFN1cEJvb2tTcmNcIiwgKi8gZjpwYXJzZV9SZWxJRH0sXG5cdC8qOjpbKi8weDAxNjUvKjo6XSovOiB7IC8qIG46XCJCcnRTdXBTZWxmXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE2Ni8qOjpdKi86IHsgLyogbjpcIkJydFN1cFNhbWVcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTY3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3VwVGFic1wiICovIH0sXG5cdC8qOjpbKi8weDAxNjgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblN1cEJvb2tcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNjkvKjo6XSovOiB7IC8qIG46XCJCcnRQbGFjZWhvbGRlck5hbWVcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTZBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RXh0ZXJuU2hlZXRcIiwgKi8gZjpwYXJzZV9FeHRlcm5TaGVldCB9LFxuXHQvKjo6WyovMHgwMTZCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RXh0ZXJuVGFibGVTdGFydFwiICovIH0sXG5cdC8qOjpbKi8weDAxNkMvKjo6XSovOiB7IC8qIG46XCJCcnRFeHRlcm5UYWJsZUVuZFwiICovIH0sXG5cdC8qOjpbKi8weDAxNkUvKjo6XSovOiB7IC8qIG46XCJCcnRFeHRlcm5Sb3dIZHJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTZGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RXh0ZXJuQ2VsbEJsYW5rXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE3MC8qOjpdKi86IHsgLyogbjpcIkJydEV4dGVybkNlbGxSZWFsXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE3MS8qOjpdKi86IHsgLyogbjpcIkJydEV4dGVybkNlbGxCb29sXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE3Mi8qOjpdKi86IHsgLyogbjpcIkJydEV4dGVybkNlbGxFcnJvclwiICovIH0sXG5cdC8qOjpbKi8weDAxNzMvKjo6XSovOiB7IC8qIG46XCJCcnRFeHRlcm5DZWxsU3RyaW5nXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE3NC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRXNtZHhcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNzUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFc21keFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxNzYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbk1keFNldFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE3Ny8qOjpdKi86IHsgLyogbjpcIkJydEVuZE1keFNldFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxNzgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbk1keE1iclByb3BcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxNzkvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNZHhNYnJQcm9wXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE3QS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luTWR4S1BJXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMTdCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kTWR4S1BJXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE3Qy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRXNzdHJcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxN0QvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFc3N0clwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxN0UvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBSRkl0ZW1cIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxN0YvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQUkZJdGVtXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE4MC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUGl2b3RDYWNoZUlEc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE4MS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBpdm90Q2FjaGVJRHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTgyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QaXZvdENhY2hlSURcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxODMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQaXZvdENhY2hlSURcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTg0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5JU1hWSXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxODUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRJU1hWSXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMTg2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Db2xJbmZvc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE4Ny8qOjpdKi86IHsgLyogbjpcIkJydEVuZENvbEluZm9zXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDE4OC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUndCcmtcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxODkvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRSd0Jya1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxOEEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNvbEJya1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE4Qi8qOjpdKi86IHsgLyogbjpcIkJydEVuZENvbEJya1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxOEMvKjo6XSovOiB7IC8qIG46XCJCcnRCcmtcIiAqLyB9LFxuXHQvKjo6WyovMHgwMThELyo6Ol0qLzogeyAvKiBuOlwiQnJ0VXNlckJvb2tWaWV3XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE4RS8qOjpdKi86IHsgLyogbjpcIkJydEluZm9cIiAqLyB9LFxuXHQvKjo6WyovMHgwMThGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q1VzclwiICovIH0sXG5cdC8qOjpbKi8weDAxOTAvKjo6XSovOiB7IC8qIG46XCJCcnRVc3JcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTkxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Vc2Vyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDE5My8qOjpdKi86IHsgLyogbjpcIkJydEVPRlwiICovIH0sXG5cdC8qOjpbKi8weDAxOTQvKjo6XSovOiB7IC8qIG46XCJCcnRVQ1JcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTk1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UlJJbnNEZWxcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTk2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UlJFbmRJbnNEZWxcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTk3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UlJNb3ZlXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE5OC8qOjpdKi86IHsgLyogbjpcIkJydFJSRW5kTW92ZVwiICovIH0sXG5cdC8qOjpbKi8weDAxOTkvKjo6XSovOiB7IC8qIG46XCJCcnRSUkNoZ0NlbGxcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTlBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UlJFbmRDaGdDZWxsXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE5Qi8qOjpdKi86IHsgLyogbjpcIkJydFJSSGVhZGVyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE5Qy8qOjpdKi86IHsgLyogbjpcIkJydFJSVXNlclZpZXdcIiAqLyB9LFxuXHQvKjo6WyovMHgwMTlELyo6Ol0qLzogeyAvKiBuOlwiQnJ0UlJSZW5TaGVldFwiICovIH0sXG5cdC8qOjpbKi8weDAxOUUvKjo6XSovOiB7IC8qIG46XCJCcnRSUkluc2VydFNoXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDE5Ri8qOjpdKi86IHsgLyogbjpcIkJydFJSRGVmTmFtZVwiICovIH0sXG5cdC8qOjpbKi8weDAxQTAvKjo6XSovOiB7IC8qIG46XCJCcnRSUk5vdGVcIiAqLyB9LFxuXHQvKjo6WyovMHgwMUExLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UlJDb25mbGljdFwiICovIH0sXG5cdC8qOjpbKi8weDAxQTIvKjo6XSovOiB7IC8qIG46XCJCcnRSUlRRU0lGXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDFBMy8qOjpdKi86IHsgLyogbjpcIkJydFJSRm9ybWF0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDFBNC8qOjpdKi86IHsgLyogbjpcIkJydFJSRW5kRm9ybWF0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDFBNS8qOjpdKi86IHsgLyogbjpcIkJydFJSQXV0b0ZtdFwiICovIH0sXG5cdC8qOjpbKi8weDAxQTYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblVzZXJTaFZpZXdzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUE3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Vc2VyU2hWaWV3XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUE4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVXNlclNoVmlld1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQTkvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRVc2VyU2hWaWV3c1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQUEvKjo6XSovOiB7IC8qIG46XCJCcnRBcnJGbWxhXCIsICovIGY6cGFyc2VfQnJ0QXJyRm1sYSB9LFxuXHQvKjo6WyovMHgwMUFCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hyRm1sYVwiLCAqLyBmOnBhcnNlX0JydFNockZtbGEgfSxcblx0Lyo6OlsqLzB4MDFBQy8qOjpdKi86IHsgLyogbjpcIkJydFRhYmxlXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDFBRC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRXh0Q29ubmVjdGlvbnNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxQUUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFeHRDb25uZWN0aW9uc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQUYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDRENhbGNNZW1zXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUIwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEQ2FsY01lbXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUIxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RDYWxjTWVtXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUIyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEQ2FsY01lbVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQjMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREhHTGV2ZWxzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUI0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENESEdMZXZlbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUI1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RIR0xldmVsXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUI2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENESEdMZXZlbFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQjcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREhHTEdyb3Vwc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFCOC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREhHTEdyb3Vwc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQjkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDREhHTEdyb3VwXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUJBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENESEdMR3JvdXBcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUJCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RIR0xHTWVtYmVyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFCQy8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREhHTEdNZW1iZXJzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFCRC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENESEdMR01lbWJlclwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFCRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDREhHTEdNZW1iZXJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUJGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5RU0lcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxQzAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRRU0lcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUMxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5RU0lSXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUMyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUVNJUlwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQzMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkRlbGV0ZWROYW1lc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFDNC8qOjpdKi86IHsgLyogbjpcIkJydEVuZERlbGV0ZWROYW1lc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQzUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkRlbGV0ZWROYW1lXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUM2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRGVsZXRlZE5hbWVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUM3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5RU0lGc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFDOC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFFTSUZzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFDOS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUVNJRlwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFDQS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFFTSUZcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUNCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5BdXRvU29ydFNjb3BlXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUNDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQXV0b1NvcnRTY29wZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQ0QvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNvbmRpdGlvbmFsRm9ybWF0dGluZ1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFDRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZENvbmRpdGlvbmFsRm9ybWF0dGluZ1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxQ0YvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNGUnVsZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFEMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZENGUnVsZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxRDEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkljb25TZXRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxRDIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRJY29uU2V0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFEMy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRGF0YWJhclwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFENC8qOjpdKi86IHsgLyogbjpcIkJydEVuZERhdGFiYXJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUQ1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Db2xvclNjYWxlXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUQ2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ29sb3JTY2FsZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxRDcvKjo6XSovOiB7IC8qIG46XCJCcnRDRlZPXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDFEOC8qOjpdKi86IHsgLyogbjpcIkJydEV4dGVyblZhbHVlTWV0YVwiICovIH0sXG5cdC8qOjpbKi8weDAxRDkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNvbG9yUGFsZXR0ZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFEQS8qOjpdKi86IHsgLyogbjpcIkJydEVuZENvbG9yUGFsZXR0ZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxREIvKjo6XSovOiB7IC8qIG46XCJCcnRJbmRleGVkQ29sb3JcIiAqLyB9LFxuXHQvKjo6WyovMHgwMURDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0TWFyZ2luc1wiLCAqLyBmOnBhcnNlX0JydE1hcmdpbnMgfSxcblx0Lyo6OlsqLzB4MDFERC8qOjpdKi86IHsgLyogbjpcIkJydFByaW50T3B0aW9uc1wiICovIH0sXG5cdC8qOjpbKi8weDAxREUvKjo6XSovOiB7IC8qIG46XCJCcnRQYWdlU2V0dXBcIiAqLyB9LFxuXHQvKjo6WyovMHgwMURGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5IZWFkZXJGb290ZXJcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxRTAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRIZWFkZXJGb290ZXJcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUUxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWENydEZvcm1hdFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFFMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYQ3J0Rm9ybWF0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFFMy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hDcnRGb3JtYXRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUU0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hDcnRGb3JtYXRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFFNS8qOjpdKi86IHsgLyogbjpcIkJydFdzRm10SW5mb1wiLCAqLyBmOnBhcnNlX0JydFdzRm10SW5mbyB9LFxuXHQvKjo6WyovMHgwMUU2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5NZ3NcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxRTcvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNR3NcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUU4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5NR01hcHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAxRTkvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNR01hcHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUVBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5NR1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFFQi8qOjpdKi86IHsgLyogbjpcIkJydEVuZE1HXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFFQy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luTWFwXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUVELyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kTWFwXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFFRS8qOjpdKi86IHsgLyogbjpcIkJydEhMaW5rXCIsICovIGY6cGFyc2VfQnJ0SExpbmsgfSxcblx0Lyo6OlsqLzB4MDFFRi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRENvblwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFGMC8qOjpdKi86IHsgLyogbjpcIkJydEVuZERDb25cIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMUYxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EUmVmc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFGMi8qOjpdKi86IHsgLyogbjpcIkJydEVuZERSZWZzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFGMy8qOjpdKi86IHsgLyogbjpcIkJydERSZWZcIiAqLyB9LFxuXHQvKjo6WyovMHgwMUY0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TY2VuTWFuXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUY1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2Nlbk1hblwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxRjYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNjdFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFGNy8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNjdFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxRjgvKjo6XSovOiB7IC8qIG46XCJCcnRTbGNcIiAqLyB9LFxuXHQvKjo6WyovMHgwMUY5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EWEZzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMUZBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRFhGc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAxRkIvKjo6XSovOiB7IC8qIG46XCJCcnREWEZcIiAqLyB9LFxuXHQvKjo6WyovMHgwMUZDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5UYWJsZVN0eWxlc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFGRC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFRhYmxlU3R5bGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDFGRS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVGFibGVTdHlsZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDFGRi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFRhYmxlU3R5bGVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjAwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0VGFibGVTdHlsZUVsZW1lbnRcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjAxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0VGFibGVTdHlsZUNsaWVudFwiICovIH0sXG5cdC8qOjpbKi8weDAyMDIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblZvbERlcHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyMDMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRWb2xEZXBzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDIwNC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVm9sVHlwZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDIwNS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFZvbFR5cGVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjA2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Wb2xNYWluXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjA3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVm9sTWFpblwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyMDgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblZvbFRvcGljXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjA5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVm9sVG9waWNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjBBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Vm9sU3VidG9waWNcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjBCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Vm9sUmVmXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDIwQy8qOjpdKi86IHsgLyogbjpcIkJydFZvbE51bVwiICovIH0sXG5cdC8qOjpbKi8weDAyMEQvKjo6XSovOiB7IC8qIG46XCJCcnRWb2xFcnJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjBFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Vm9sU3RyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDIwRi8qOjpdKi86IHsgLyogbjpcIkJydFZvbEJvb2xcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjEwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5DYWxjQ2hhaW4kXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjExLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ2FsY0NoYWluJFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyMTIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNvcnRTdGF0ZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDIxMy8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNvcnRTdGF0ZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyMTQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNvcnRDb25kXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjE1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU29ydENvbmRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjE2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0Qm9va1Byb3RlY3Rpb25cIiAqLyB9LFxuXHQvKjo6WyovMHgwMjE3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hlZXRQcm90ZWN0aW9uXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDIxOC8qOjpdKi86IHsgLyogbjpcIkJydFJhbmdlUHJvdGVjdGlvblwiICovIH0sXG5cdC8qOjpbKi8weDAyMTkvKjo6XSovOiB7IC8qIG46XCJCcnRQaG9uZXRpY0luZm9cIiAqLyB9LFxuXHQvKjo6WyovMHgwMjFBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5FQ1R4dFdpelwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDIxQi8qOjpdKi86IHsgLyogbjpcIkJydEVuZEVDVHh0V2l6XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDIxQy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRUNUV0ZsZEluZm9Mc3RcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyMUQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFQ1RXRmxkSW5mb0xzdFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyMUUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkVDVHdGbGRJbmZvXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjI0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RmlsZVNoYXJpbmdcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjI1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0T2xlU2l6ZVwiICovIH0sXG5cdC8qOjpbKi8weDAyMjYvKjo6XSovOiB7IC8qIG46XCJCcnREcmF3aW5nXCIsICovIGY6cGFyc2VfUmVsSUQgfSxcblx0Lyo6OlsqLzB4MDIyNy8qOjpdKi86IHsgLyogbjpcIkJydExlZ2FjeURyYXdpbmdcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjI4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0TGVnYWN5RHJhd2luZ0hGXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDIyOS8qOjpdKi86IHsgLyogbjpcIkJydFdlYk9wdFwiICovIH0sXG5cdC8qOjpbKi8weDAyMkEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbldlYlB1Ykl0ZW1zXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjJCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kV2ViUHViSXRlbXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjJDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5XZWJQdWJJdGVtXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjJELyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kV2ViUHViSXRlbVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyMkUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYQ29uZEZtdFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDIyRi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYQ29uZEZtdFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyMzAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYQ29uZEZtdHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyMzEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWENvbmRGbXRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDIzMi8qOjpdKi86IHsgLyogbjpcIkJydEJrSGltXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDIzNC8qOjpdKi86IHsgLyogbjpcIkJydENvbG9yXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDIzNS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luSW5kZXhlZENvbG9yc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDIzNi8qOjpdKi86IHsgLyogbjpcIkJydEVuZEluZGV4ZWRDb2xvcnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjM5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5NUlVDb2xvcnNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyM0EvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNUlVDb2xvcnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjNDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0TVJVQ29sb3JcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjNELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EVmFsc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDIzRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZERWYWxzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI0MS8qOjpdKi86IHsgLyogbjpcIkJydFN1cE5hbWVTdGFydFwiICovIH0sXG5cdC8qOjpbKi8weDAyNDIvKjo6XSovOiB7IC8qIG46XCJCcnRTdXBOYW1lVmFsdWVTdGFydFwiICovIH0sXG5cdC8qOjpbKi8weDAyNDMvKjo6XSovOiB7IC8qIG46XCJCcnRTdXBOYW1lVmFsdWVFbmRcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjQ0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3VwTmFtZU51bVwiICovIH0sXG5cdC8qOjpbKi8weDAyNDUvKjo6XSovOiB7IC8qIG46XCJCcnRTdXBOYW1lRXJyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI0Ni8qOjpdKi86IHsgLyogbjpcIkJydFN1cE5hbWVTdFwiICovIH0sXG5cdC8qOjpbKi8weDAyNDcvKjo6XSovOiB7IC8qIG46XCJCcnRTdXBOYW1lTmlsXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI0OC8qOjpdKi86IHsgLyogbjpcIkJydFN1cE5hbWVCb29sXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI0OS8qOjpdKi86IHsgLyogbjpcIkJydFN1cE5hbWVGbWxhXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI0QS8qOjpdKi86IHsgLyogbjpcIkJydFN1cE5hbWVCaXRzXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI0Qi8qOjpdKi86IHsgLyogbjpcIkJydFN1cE5hbWVFbmRcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjRDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU3VwQm9va1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyNEQvKjo6XSovOiB7IC8qIG46XCJCcnRDZWxsU21hcnRUYWdQcm9wZXJ0eVwiICovIH0sXG5cdC8qOjpbKi8weDAyNEUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNlbGxTbWFydFRhZ1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDI0Ri8qOjpdKi86IHsgLyogbjpcIkJydEVuZENlbGxTbWFydFRhZ1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyNTAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNlbGxTbWFydFRhZ3NcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyNTEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRDZWxsU21hcnRUYWdzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI1Mi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU21hcnRUYWdzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjUzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU21hcnRUYWdzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI1NC8qOjpdKi86IHsgLyogbjpcIkJydFNtYXJ0VGFnVHlwZVwiICovIH0sXG5cdC8qOjpbKi8weDAyNTUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNtYXJ0VGFnVHlwZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyNTYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbWFydFRhZ1R5cGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI1Ny8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hGaWx0ZXJzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjU4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hGaWx0ZXJzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI1OS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hGSUxURVJcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyNUEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWEZpbHRlclwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyNUIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkZpbGxzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjVDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRmlsbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjVELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5DZWxsV2F0Y2hlc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDI1RS8qOjpdKi86IHsgLyogbjpcIkJydEVuZENlbGxXYXRjaGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI1Ri8qOjpdKi86IHsgLyogbjpcIkJydENlbGxXYXRjaFwiICovIH0sXG5cdC8qOjpbKi8weDAyNjAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNSRXJyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDI2MS8qOjpdKi86IHsgLyogbjpcIkJydEVuZENSRXJyc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyNjIvKjo6XSovOiB7IC8qIG46XCJCcnRDcmFzaFJlY0VyclwiICovIH0sXG5cdC8qOjpbKi8weDAyNjMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkZvbnRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjY0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRm9udHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjY1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Cb3JkZXJzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjY2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQm9yZGVyc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyNjcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkZtdHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyNjgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRGbXRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI2OS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQ2VsbFhGc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDI2QS8qOjpdKi86IHsgLyogbjpcIkJydEVuZENlbGxYRnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjZCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TdHlsZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyNkMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTdHlsZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjcxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmlnTmFtZVwiICovIH0sXG5cdC8qOjpbKi8weDAyNzIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNlbGxTdHlsZVhGc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDI3My8qOjpdKi86IHsgLyogbjpcIkJydEVuZENlbGxTdHlsZVhGc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyNzQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNvbW1lbnRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjc1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ29tbWVudHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjc2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Db21tZW50QXV0aG9yc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDI3Ny8qOjpdKi86IHsgLyogbjpcIkJydEVuZENvbW1lbnRBdXRob3JzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI3OC8qOjpdKi86IHsgLyogbjpcIkJydENvbW1lbnRBdXRob3JcIiwgKi8gZjpwYXJzZV9CcnRDb21tZW50QXV0aG9yIH0sXG5cdC8qOjpbKi8weDAyNzkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNvbW1lbnRMaXN0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjdBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ29tbWVudExpc3RcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjdCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Db21tZW50XCIsICovIFQ6MSwgZjpwYXJzZV9CcnRCZWdpbkNvbW1lbnR9LFxuXHQvKjo6WyovMHgwMjdDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ29tbWVudFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyN0QvKjo6XSovOiB7IC8qIG46XCJCcnRDb21tZW50VGV4dFwiLCAqLyBmOnBhcnNlX0JydENvbW1lbnRUZXh0IH0sXG5cdC8qOjpbKi8weDAyN0UvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbk9sZU9iamVjdHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyN0YvKjo6XSovOiB7IC8qIG46XCJCcnRPbGVPYmplY3RcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjgwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kT2xlT2JqZWN0c1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyODEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblN4cnVsZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyODIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTeFJ1bGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI4My8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQWN0aXZlWENvbnRyb2xzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMjg0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QWN0aXZlWFwiICovIH0sXG5cdC8qOjpbKi8weDAyODUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRBY3RpdmVYQ29udHJvbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjg2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0RTRFRDRU1lbWJlcnNTb3J0QnlcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyODgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNlbGxJZ25vcmVFQ3NcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyODkvKjo6XSovOiB7IC8qIG46XCJCcnRDZWxsSWdub3JlRUNcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjhBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ2VsbElnbm9yZUVDc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyOEIvKjo6XSovOiB7IC8qIG46XCJCcnRDc1Byb3BcIiwgKi8gZjpwYXJzZV9CcnRDc1Byb3AgfSxcblx0Lyo6OlsqLzB4MDI4Qy8qOjpdKi86IHsgLyogbjpcIkJydENzUGFnZVNldHVwXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI4RC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVXNlckNzVmlld3NcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyOEUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRVc2VyQ3NWaWV3c1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyOEYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblVzZXJDc1ZpZXdcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyOTAvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRVc2VyQ3NWaWV3XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDI5MS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUGNkU0ZDSUVudHJpZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyOTIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RTRkNJRW50cmllc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDAyOTMvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RTRkNJRW50cnlcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjk0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5MaXN0UGFydHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyOTUvKjo6XSovOiB7IC8qIG46XCJCcnRMaXN0UGFydFwiICovIH0sXG5cdC8qOjpbKi8weDAyOTYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRMaXN0UGFydHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjk3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hlZXRDYWxjUHJvcFwiICovIH0sXG5cdC8qOjpbKi8weDAyOTgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkZuR3JvdXBcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDAyOTkvKjo6XSovOiB7IC8qIG46XCJCcnRGbkdyb3VwXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI5QS8qOjpdKi86IHsgLyogbjpcIkJydEVuZEZuR3JvdXBcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwMjlCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3VwQWRkaW5cIiAqLyB9LFxuXHQvKjo6WyovMHgwMjlDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U1hURE1QT3JkZXJcIiAqLyB9LFxuXHQvKjo6WyovMHgwMjlELyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q3NQcm90ZWN0aW9uXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDI5Ri8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luV3NTb3J0TWFwXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMkEwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kV3NTb3J0TWFwXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDJBMS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUlJTb3J0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwMkEyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUlJTb3J0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDJBMy8qOjpdKi86IHsgLyogbjpcIkJydFJSU29ydEl0ZW1cIiAqLyB9LFxuXHQvKjo6WyovMHgwMkE0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RmlsZVNoYXJpbmdJc29cIiAqLyB9LFxuXHQvKjo6WyovMHgwMkE1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0Qm9va1Byb3RlY3Rpb25Jc29cIiAqLyB9LFxuXHQvKjo6WyovMHgwMkE2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2hlZXRQcm90ZWN0aW9uSXNvXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDJBNy8qOjpdKi86IHsgLyogbjpcIkJydENzUHJvdGVjdGlvbklzb1wiICovIH0sXG5cdC8qOjpbKi8weDAyQTgvKjo6XSovOiB7IC8qIG46XCJCcnRSYW5nZVByb3RlY3Rpb25Jc29cIiAqLyB9LFxuXHQvKjo6WyovMHgwMkE5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RFZhbExpc3RcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDAwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UndEZXNjZW50XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQwMS8qOjpdKi86IHsgLyogbjpcIkJydEtub3duRm9udHNcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDAyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWFR1cGxlU2V0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDAzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hUdXBsZVNldFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0MDQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYVHVwbGVTZXRIZWFkZXJcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MDUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFR1cGxlU2V0SGVhZGVyXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQwNi8qOjpdKi86IHsgLyogbjpcIkJydFNYVHVwbGVTZXRIZWFkZXJJdGVtXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQwNy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hUdXBsZVNldERhdGFcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MDgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFR1cGxlU2V0RGF0YVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0MDkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYVHVwbGVTZXRSb3dcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MEEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFR1cGxlU2V0Um93XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQwQi8qOjpdKi86IHsgLyogbjpcIkJydFNYVHVwbGVTZXRSb3dJdGVtXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQwQy8qOjpdKi86IHsgLyogbjpcIkJydE5hbWVFeHRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDBELyo6Ol0qLzogeyAvKiBuOlwiQnJ0UENESDE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQwRS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENEQ2FsY01lbTE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDBGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUENEQ2FsY01lbTE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQxMC8qOjpdKi86IHsgLyogbjpcIkJydFNYVEgxNFwiICovIH0sXG5cdC8qOjpbKi8weDA0MTEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNwYXJrbGluZUdyb3VwXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDEyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU3BhcmtsaW5lR3JvdXBcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDEzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3BhcmtsaW5lXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQxNC8qOjpdKi86IHsgLyogbjpcIkJydFNYREkxNFwiICovIH0sXG5cdC8qOjpbKi8weDA0MTUvKjo6XSovOiB7IC8qIG46XCJCcnRXc0ZtdEluZm9FeDE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQxNi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQ29uZGl0aW9uYWxGb3JtYXR0aW5nMTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MTcvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRDb25kaXRpb25hbEZvcm1hdHRpbmcxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0MTgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNGUnVsZTE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDE5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ0ZSdWxlMTRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDFBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q0ZWTzE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQxQi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRGF0YWJhcjE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDFDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5JY29uU2V0MTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MUQvKjo6XSovOiB7IC8qIG46XCJCcnREVmFsMTRcIiwgKi8gZjogcGFyc2VfQnJ0RFZhbDE0IH0sXG5cdC8qOjpbKi8weDA0MUUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkRWYWxzMTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MUYvKjo6XSovOiB7IC8qIG46XCJCcnRDb2xvcjE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQyMC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU3BhcmtsaW5lc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQyMS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNwYXJrbGluZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDIyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TcGFya2xpbmVHcm91cHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MjMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTcGFya2xpbmVHcm91cHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDI1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U1hWRDE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQyNi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hWaWV3MTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MjcvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWFZpZXcxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0MjgvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYVmlldzE2XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDI5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hWaWV3MTZcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDJBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QQ0QxNFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQyQi8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBDRDE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQyQy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRXh0Q29ubjE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDJELyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRXh0Q29ubjE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQyRS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyQ2FjaGVJRHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MkYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJDYWNoZUlEc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0MzAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNsaWNlckNhY2hlSURcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MzEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJDYWNoZUlEXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQzMy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyQ2FjaGVcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MzQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJDYWNoZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0MzUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNsaWNlckNhY2hlRGVmXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDM2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyQ2FjaGVEZWZcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDM3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TbGljZXJzRXhcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0MzgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJzRXhcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDM5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TbGljZXJFeFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQzQS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNsaWNlckV4XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQzQi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDNDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQzRC8qOjpdKi86IHsgLyogbjpcIkJydFNsaWNlckNhY2hlUGl2b3RUYWJsZXNcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDNFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TbGljZXJDYWNoZU9sYXBJbXBsXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDNGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyQ2FjaGVPbGFwSW1wbFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NDAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNsaWNlckNhY2hlTGV2ZWxzRGF0YVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ0MS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNsaWNlckNhY2hlTGV2ZWxzRGF0YVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NDIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNsaWNlckNhY2hlTGV2ZWxEYXRhXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDQzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyQ2FjaGVMZXZlbERhdGFcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDQ0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TbGljZXJDYWNoZVNpUmFuZ2VzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDQ1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyQ2FjaGVTaVJhbmdlc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NDYvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNsaWNlckNhY2hlU2lSYW5nZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ0Ny8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNsaWNlckNhY2hlU2lSYW5nZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NDgvKjo6XSovOiB7IC8qIG46XCJCcnRTbGljZXJDYWNoZU9sYXBJdGVtXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ0OS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyQ2FjaGVTZWxlY3Rpb25zXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDRBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U2xpY2VyQ2FjaGVTZWxlY3Rpb25cIiAqLyB9LFxuXHQvKjo6WyovMHgwNDRCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyQ2FjaGVTZWxlY3Rpb25zXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ0Qy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyQ2FjaGVOYXRpdmVcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NEQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJDYWNoZU5hdGl2ZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NEUvKjo6XSovOiB7IC8qIG46XCJCcnRTbGljZXJDYWNoZU5hdGl2ZUl0ZW1cIiAqLyB9LFxuXHQvKjo6WyovMHgwNDRGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UmFuZ2VQcm90ZWN0aW9uMTRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDUwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UmFuZ2VQcm90ZWN0aW9uSXNvMTRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDUxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q2VsbElnbm9yZUVDMTRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDU3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0TGlzdDE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ1OC8qOjpdKi86IHsgLyogbjpcIkJydENGSWNvblwiICovIH0sXG5cdC8qOjpbKi8weDA0NTkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNsaWNlckNhY2hlc1Bpdm90Q2FjaGVJRHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NUEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJDYWNoZXNQaXZvdENhY2hlSURzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ1Qi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2Vyc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ1Qy8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNsaWNlcnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDVELyo6Ol0qLzogeyAvKiBuOlwiQnJ0V2JQcm9wMTRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDVFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWEVkaXRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NUYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWEVkaXRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDYwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWEVkaXRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDYxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hFZGl0c1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NjIvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYQ2hhbmdlXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDYzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU1hDaGFuZ2VcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDY0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TWENoYW5nZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NjUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWENoYW5nZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDY2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0U1hUdXBsZUl0ZW1zXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ2OC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyU3R5bGVcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NjkvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJTdHlsZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NkEvKjo6XSovOiB7IC8qIG46XCJCcnRTbGljZXJTdHlsZUVsZW1lbnRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDZCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TdHlsZVNoZWV0RXh0MTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NkMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTdHlsZVNoZWV0RXh0MTRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDZELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TbGljZXJDYWNoZXNQaXZvdENhY2hlSURcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NkUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTbGljZXJDYWNoZXNQaXZvdENhY2hlSURcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDZGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Db25kaXRpb25hbEZvcm1hdHRpbmdzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDcwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ29uZGl0aW9uYWxGb3JtYXR0aW5nc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NzEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBDRENhbGNNZW1FeHRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NzIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RDYWxjTWVtRXh0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ3My8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUENEQ2FsY01lbXNFeHRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0NzQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQQ0RDYWxjTWVtc0V4dFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0NzUvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RGaWVsZDE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ3Ni8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyU3R5bGVzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDc3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU2xpY2VyU3R5bGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ3OC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU2xpY2VyU3R5bGVFbGVtZW50c1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ3OS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNsaWNlclN0eWxlRWxlbWVudHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDdBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q0ZSdWxlRXh0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ3Qi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luU1hDb25kRm10MTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0N0MvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTWENvbmRGbXQxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0N0QvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNYQ29uZEZtdHMxNFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ3RS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFNYQ29uZEZtdHMxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0ODAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblNvcnRDb25kMTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0ODEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRTb3J0Q29uZDE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ4Mi8qOjpdKi86IHsgLyogbjpcIkJydEVuZERWYWxzMTRcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwNDgzLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kSWNvblNldDE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ4NC8qOjpdKi86IHsgLyogbjpcIkJydEVuZERhdGFiYXIxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0ODUvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkNvbG9yU2NhbGUxNFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ4Ni8qOjpdKi86IHsgLyogbjpcIkJydEVuZENvbG9yU2NhbGUxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0ODcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblN4cnVsZXMxNFwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDQ4OC8qOjpdKi86IHsgLyogbjpcIkJydEVuZFN4cnVsZXMxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0ODkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBSdWxlMTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0OEEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQUnVsZTE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ4Qi8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUFJGaWx0ZXJzMTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0OEMvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQUkZpbHRlcnMxNFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA0OEQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBSRmlsdGVyMTRcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA0OEUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRQUkZpbHRlcjE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ4Ri8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUFJGSXRlbTE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDkwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUFJGSXRlbTE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ5MS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQ2VsbElnbm9yZUVDczE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDkyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kQ2VsbElnbm9yZUVDczE0XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ5My8qOjpdKi86IHsgLyogbjpcIkJydER4ZjE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ5NC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRHhGMTRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDk1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRHhmMTRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDQ5OS8qOjpdKi86IHsgLyogbjpcIkJydEZpbHRlcjE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ5QS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQ3VzdG9tRmlsdGVyczE0XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwNDlDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q3VzdG9tRmlsdGVyMTRcIiAqLyB9LFxuXHQvKjo6WyovMHgwNDlELyo6Ol0qLzogeyAvKiBuOlwiQnJ0SWNvbkZpbHRlcjE0XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDQ5RS8qOjpdKi86IHsgLyogbjpcIkJydFBpdm90Q2FjaGVDb25uZWN0aW9uTmFtZVwiICovIH0sXG5cdC8qOjpbKi8weDA4MDAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkRlY291cGxlZFBpdm90Q2FjaGVJRHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4MDEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmREZWNvdXBsZWRQaXZvdENhY2hlSURzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgwMi8qOjpdKi86IHsgLyogbjpcIkJydERlY291cGxlZFBpdm90Q2FjaGVJRFwiICovIH0sXG5cdC8qOjpbKi8weDA4MDMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblBpdm90VGFibGVSZWZzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODA0Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUGl2b3RUYWJsZVJlZnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODA1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UGl2b3RUYWJsZVJlZlwiICovIH0sXG5cdC8qOjpbKi8weDA4MDYvKjo6XSovOiB7IC8qIG46XCJCcnRTbGljZXJDYWNoZUJvb2tQaXZvdFRhYmxlc1wiICovIH0sXG5cdC8qOjpbKi8weDA4MDcvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblN4dmNlbGxzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODA4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kU3h2Y2VsbHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODA5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5TeFJvd1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDgwQS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFN4Um93XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgwQy8qOjpdKi86IHsgLyogbjpcIkJydFBjZENhbGNNZW0xNVwiICovIH0sXG5cdC8qOjpbKi8weDA4MTMvKjo6XSovOiB7IC8qIG46XCJCcnRRc2kxNVwiICovIH0sXG5cdC8qOjpbKi8weDA4MTQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbldlYkV4dGVuc2lvbnNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4MTUvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRXZWJFeHRlbnNpb25zXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgxNi8qOjpdKi86IHsgLyogbjpcIkJydFdlYkV4dGVuc2lvblwiICovIH0sXG5cdC8qOjpbKi8weDA4MTcvKjo6XSovOiB7IC8qIG46XCJCcnRBYnNQYXRoMTVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODE4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5QaXZvdFRhYmxlVUlTZXR0aW5nc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDgxOS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFBpdm90VGFibGVVSVNldHRpbmdzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgxQi8qOjpdKi86IHsgLyogbjpcIkJydFRhYmxlU2xpY2VyQ2FjaGVJRHNcIiAqLyB9LFxuXHQvKjo6WyovMHgwODFDLyo6Ol0qLzogeyAvKiBuOlwiQnJ0VGFibGVTbGljZXJDYWNoZUlEXCIgKi8gfSxcblx0Lyo6OlsqLzB4MDgxRC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVGFibGVTbGljZXJDYWNoZVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDgxRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZFRhYmxlU2xpY2VyQ2FjaGVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODFGLyo6Ol0qLzogeyAvKiBuOlwiQnJ0U3hGaWx0ZXIxNVwiICovIH0sXG5cdC8qOjpbKi8weDA4MjAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblRpbWVsaW5lQ2FjaGVQaXZvdENhY2hlSURzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODIxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVGltZWxpbmVDYWNoZVBpdm90Q2FjaGVJRHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODIyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0VGltZWxpbmVDYWNoZVBpdm90Q2FjaGVJRFwiICovIH0sXG5cdC8qOjpbKi8weDA4MjMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblRpbWVsaW5lQ2FjaGVJRHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4MjQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRUaW1lbGluZUNhY2hlSURzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgyNS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVGltZWxpbmVDYWNoZUlEXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODI2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVGltZWxpbmVDYWNoZUlEXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgyNy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVGltZWxpbmVzRXhcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4MjgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRUaW1lbGluZXNFeFwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4MjkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblRpbWVsaW5lRXhcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4MkEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRUaW1lbGluZUV4XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgyQi8qOjpdKi86IHsgLyogbjpcIkJydFdvcmtCb29rUHIxNVwiICovIH0sXG5cdC8qOjpbKi8weDA4MkMvKjo6XSovOiB7IC8qIG46XCJCcnRQQ0RIMTVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODJELyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5UaW1lbGluZVN0eWxlXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODJFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVGltZWxpbmVTdHlsZVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4MkYvKjo6XSovOiB7IC8qIG46XCJCcnRUaW1lbGluZVN0eWxlRWxlbWVudFwiICovIH0sXG5cdC8qOjpbKi8weDA4MzAvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblRpbWVsaW5lU3R5bGVzaGVldEV4dDE1XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODMxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVGltZWxpbmVTdHlsZXNoZWV0RXh0MTVcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODMyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5UaW1lbGluZVN0eWxlc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDgzMy8qOjpdKi86IHsgLyogbjpcIkJydEVuZFRpbWVsaW5lU3R5bGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgzNC8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luVGltZWxpbmVTdHlsZUVsZW1lbnRzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODM1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kVGltZWxpbmVTdHlsZUVsZW1lbnRzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgzNi8qOjpdKi86IHsgLyogbjpcIkJydER4ZjE1XCIgKi8gfSxcblx0Lyo6OlsqLzB4MDgzNy8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRHhmczE1XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODM4Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRHhmczE1XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDgzOS8qOjpdKi86IHsgLyogbjpcIkJydFNsaWNlckNhY2hlSGlkZUl0ZW1zV2l0aE5vRGF0YVwiICovIH0sXG5cdC8qOjpbKi8weDA4M0EvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkl0ZW1VbmlxdWVOYW1lc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDgzQi8qOjpdKi86IHsgLyogbjpcIkJydEVuZEl0ZW1VbmlxdWVOYW1lc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4M0MvKjo6XSovOiB7IC8qIG46XCJCcnRJdGVtVW5pcXVlTmFtZVwiICovIH0sXG5cdC8qOjpbKi8weDA4M0QvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkV4dENvbm4xNVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDgzRS8qOjpdKi86IHsgLyogbjpcIkJydEVuZEV4dENvbm4xNVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4M0YvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbk9sZWRiUHIxNVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDg0MC8qOjpdKi86IHsgLyogbjpcIkJydEVuZE9sZWRiUHIxNVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4NDEvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkRhdGFGZWVkUHIxNVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDg0Mi8qOjpdKi86IHsgLyogbjpcIkJydEVuZERhdGFGZWVkUHIxNVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4NDMvKjo6XSovOiB7IC8qIG46XCJCcnRUZXh0UHIxNVwiICovIH0sXG5cdC8qOjpbKi8weDA4NDQvKjo6XSovOiB7IC8qIG46XCJCcnRSYW5nZVByMTVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODQ1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RGJDb21tYW5kMTVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODQ2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EYlRhYmxlczE1XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODQ3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRGJUYWJsZXMxNVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4NDgvKjo6XSovOiB7IC8qIG46XCJCcnREYlRhYmxlMTVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODQ5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EYXRhTW9kZWxcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4NEEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmREYXRhTW9kZWxcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODRCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Nb2RlbFRhYmxlc1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDg0Qy8qOjpdKi86IHsgLyogbjpcIkJydEVuZE1vZGVsVGFibGVzXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDg0RC8qOjpdKi86IHsgLyogbjpcIkJydE1vZGVsVGFibGVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODRFLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Nb2RlbFJlbGF0aW9uc2hpcHNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4NEYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNb2RlbFJlbGF0aW9uc2hpcHNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODUwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0TW9kZWxSZWxhdGlvbnNoaXBcIiAqLyB9LFxuXHQvKjo6WyovMHgwODUxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5FQ1R4dFdpejE1XCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgwODUyLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kRUNUeHRXaXoxNVwiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDA4NTMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpbkVDVFdGbGRJbmZvTHN0MTVcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4NTQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRFQ1RXRmxkSW5mb0xzdDE1XCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDg1NS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luRUNUV0ZsZEluZm8xNVwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDg1Ni8qOjpdKi86IHsgLyogbjpcIkJydEZpZWxkTGlzdEFjdGl2ZUl0ZW1cIiAqLyB9LFxuXHQvKjo6WyovMHgwODU3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UGl2b3RDYWNoZUlkVmVyc2lvblwiICovIH0sXG5cdC8qOjpbKi8weDA4NTgvKjo6XSovOiB7IC8qIG46XCJCcnRTWERJMTVcIiAqLyB9LFxuXHQvKjo6WyovMHgwODU5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Nb2RlbFRpbWVHcm91cGluZ3NcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDA4NUEvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRNb2RlbFRpbWVHcm91cGluZ3NcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgwODVCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5Nb2RlbFRpbWVHcm91cGluZ1wiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MDg1Qy8qOjpdKi86IHsgLyogbjpcIkJydEVuZE1vZGVsVGltZUdyb3VwaW5nXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MDg1RC8qOjpdKi86IHsgLyogbjpcIkJydE1vZGVsVGltZUdyb3VwaW5nQ2FsY0NvbFwiICovIH0sXG5cdC8qOjpbKi8weDBDMDAvKjo6XSovOiB7IC8qIG46XCJCcnRVaWRcIiAqLyB9LFxuXHQvKjo6WyovMHgwQzAxLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UmV2aXNpb25QdHJcIiAqLyB9LFxuXHQvKjo6WyovMHgxMDAwLyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5EeW5hbWljQXJyYXlQclwiLCAqLyBUOjEgfSxcblx0Lyo6OlsqLzB4MTAwMS8qOjpdKi86IHsgLyogbjpcIkJydEVuZER5bmFtaWNBcnJheVByXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MTM4QS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luUmljaFZhbHVlQmxvY2tcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDEzOEIvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRSaWNoVmFsdWVCbG9ja1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDEzRDkvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblJpY2hGaWx0ZXJzXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgxM0RBLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUmljaEZpbHRlcnNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgxM0RCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0UmljaEZpbHRlclwiICovIH0sXG5cdC8qOjpbKi8weDEzREMvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblJpY2hGaWx0ZXJDb2x1bW5cIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDEzREQvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRSaWNoRmlsdGVyQ29sdW1uXCIsICovIFQ6LTEgfSxcblx0Lyo6OlsqLzB4MTNERS8qOjpdKi86IHsgLyogbjpcIkJydEJlZ2luQ3VzdG9tUmljaEZpbHRlcnNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDEzREYvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRDdXN0b21SaWNoRmlsdGVyc1wiLCAqLyBUOi0xIH0sXG5cdC8qOjpbKi8weDEzRTAvKjo6XSovOiB7IC8qIG46XCJCcnRDdXN0b21SaWNoRmlsdGVyXCIgKi8gfSxcblx0Lyo6OlsqLzB4MTNFMS8qOjpdKi86IHsgLyogbjpcIkJydFRvcDEwUmljaEZpbHRlclwiICovIH0sXG5cdC8qOjpbKi8weDEzRTIvKjo6XSovOiB7IC8qIG46XCJCcnREeW5hbWljUmljaEZpbHRlclwiICovIH0sXG5cdC8qOjpbKi8weDEzRTQvKjo6XSovOiB7IC8qIG46XCJCcnRCZWdpblJpY2hTb3J0Q29uZGl0aW9uXCIsICovIFQ6MSB9LFxuXHQvKjo6WyovMHgxM0U1Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0RW5kUmljaFNvcnRDb25kaXRpb25cIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgxM0U2Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0UmljaEZpbHRlckRhdGVHcm91cEl0ZW1cIiAqLyB9LFxuXHQvKjo6WyovMHgxM0U3Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0QmVnaW5DYWxjRmVhdHVyZXNcIiwgKi8gVDoxIH0sXG5cdC8qOjpbKi8weDEzRTgvKjo6XSovOiB7IC8qIG46XCJCcnRFbmRDYWxjRmVhdHVyZXNcIiwgKi8gVDotMSB9LFxuXHQvKjo6WyovMHgxM0U5Lyo6Ol0qLzogeyAvKiBuOlwiQnJ0Q2FsY0ZlYXR1cmVcIiAqLyB9LFxuXHQvKjo6WyovMHgxM0VCLyo6Ol0qLzogeyAvKiBuOlwiQnJ0RXh0ZXJuYWxMaW5rc1ByXCIgKi8gfSxcblx0Lyo6OlsqLzB4RkZGRi8qOjpdKi86IHsgbjpcIlwiIH1cbn07XG5cbi8qIFtNUy1YTFNdIDIuMyBSZWNvcmQgRW51bWVyYXRpb24gKGFuZCBvdGhlciBzb3VyY2VzKSAqL1xudmFyIFhMU1JlY29yZEVudW0gPSB7XG5cdC8qIFtNUy1YTFNdIDIuMyBSZWNvcmQgRW51bWVyYXRpb24gMjAyMS0wOC0xNyAqL1xuXHQvKjo6WyovMHgwMDA2Lyo6Ol0qLzogeyAvKiBuOlwiRm9ybXVsYVwiLCAqLyBmOnBhcnNlX0Zvcm11bGEgfSxcblx0Lyo6OlsqLzB4MDAwYS8qOjpdKi86IHsgLyogbjpcIkVPRlwiLCAqLyBmOnBhcnNlbm9vcDIgfSxcblx0Lyo6OlsqLzB4MDAwYy8qOjpdKi86IHsgLyogbjpcIkNhbGNDb3VudFwiLCAqLyBmOnBhcnNldWludDE2IH0sIC8vXG5cdC8qOjpbKi8weDAwMGQvKjo6XSovOiB7IC8qIG46XCJDYWxjTW9kZVwiLCAqLyBmOnBhcnNldWludDE2IH0sIC8vXG5cdC8qOjpbKi8weDAwMGUvKjo6XSovOiB7IC8qIG46XCJDYWxjUHJlY2lzaW9uXCIsICovIGY6cGFyc2Vib29sIH0sIC8vXG5cdC8qOjpbKi8weDAwMGYvKjo6XSovOiB7IC8qIG46XCJDYWxjUmVmTW9kZVwiLCAqLyBmOnBhcnNlYm9vbCB9LCAvL1xuXHQvKjo6WyovMHgwMDEwLyo6Ol0qLzogeyAvKiBuOlwiQ2FsY0RlbHRhXCIsICovIGY6cGFyc2VfWG51bSB9LCAvL1xuXHQvKjo6WyovMHgwMDExLyo6Ol0qLzogeyAvKiBuOlwiQ2FsY0l0ZXJcIiwgKi8gZjpwYXJzZWJvb2wgfSwgLy9cblx0Lyo6OlsqLzB4MDAxMi8qOjpdKi86IHsgLyogbjpcIlByb3RlY3RcIiwgKi8gZjpwYXJzZWJvb2wgfSxcblx0Lyo6OlsqLzB4MDAxMy8qOjpdKi86IHsgLyogbjpcIlBhc3N3b3JkXCIsICovIGY6cGFyc2V1aW50MTYgfSxcblx0Lyo6OlsqLzB4MDAxNC8qOjpdKi86IHsgLyogbjpcIkhlYWRlclwiLCAqLyBmOnBhcnNlX1hMSGVhZGVyRm9vdGVyIH0sXG5cdC8qOjpbKi8weDAwMTUvKjo6XSovOiB7IC8qIG46XCJGb290ZXJcIiwgKi8gZjpwYXJzZV9YTEhlYWRlckZvb3RlciB9LFxuXHQvKjo6WyovMHgwMDE3Lyo6Ol0qLzogeyAvKiBuOlwiRXh0ZXJuU2hlZXRcIiwgKi8gZjpwYXJzZV9FeHRlcm5TaGVldCB9LFxuXHQvKjo6WyovMHgwMDE4Lyo6Ol0qLzogeyAvKiBuOlwiTGJsXCIsICovIGY6cGFyc2VfTGJsIH0sXG5cdC8qOjpbKi8weDAwMTkvKjo6XSovOiB7IC8qIG46XCJXaW5Qcm90ZWN0XCIsICovIGY6cGFyc2Vib29sIH0sXG5cdC8qOjpbKi8weDAwMWEvKjo6XSovOiB7IC8qIG46XCJWZXJ0aWNhbFBhZ2VCcmVha3NcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDAxYi8qOjpdKi86IHsgLyogbjpcIkhvcml6b250YWxQYWdlQnJlYWtzXCIsICovIH0sXG5cdC8qOjpbKi8weDAwMWMvKjo6XSovOiB7IC8qIG46XCJOb3RlXCIsICovIGY6cGFyc2VfTm90ZSB9LFxuXHQvKjo6WyovMHgwMDFkLyo6Ol0qLzogeyAvKiBuOlwiU2VsZWN0aW9uXCIsICovIH0sXG5cdC8qOjpbKi8weDAwMjIvKjo6XSovOiB7IC8qIG46XCJEYXRlMTkwNFwiLCAqLyBmOnBhcnNlYm9vbCB9LFxuXHQvKjo6WyovMHgwMDIzLyo6Ol0qLzogeyAvKiBuOlwiRXh0ZXJuTmFtZVwiLCAqLyBmOnBhcnNlX0V4dGVybk5hbWUgfSxcblx0Lyo6OlsqLzB4MDAyNi8qOjpdKi86IHsgLyogbjpcIkxlZnRNYXJnaW5cIiwgKi8gZjpwYXJzZV9YbnVtIH0sIC8vICpcblx0Lyo6OlsqLzB4MDAyNy8qOjpdKi86IHsgLyogbjpcIlJpZ2h0TWFyZ2luXCIsICovIGY6cGFyc2VfWG51bSB9LCAvLyAqXG5cdC8qOjpbKi8weDAwMjgvKjo6XSovOiB7IC8qIG46XCJUb3BNYXJnaW5cIiwgKi8gZjpwYXJzZV9YbnVtIH0sIC8vICpcblx0Lyo6OlsqLzB4MDAyOS8qOjpdKi86IHsgLyogbjpcIkJvdHRvbU1hcmdpblwiLCAqLyBmOnBhcnNlX1hudW0gfSwgLy8gKlxuXHQvKjo6WyovMHgwMDJhLyo6Ol0qLzogeyAvKiBuOlwiUHJpbnRSb3dDb2xcIiwgKi8gZjpwYXJzZWJvb2wgfSxcblx0Lyo6OlsqLzB4MDAyYi8qOjpdKi86IHsgLyogbjpcIlByaW50R3JpZFwiLCAqLyBmOnBhcnNlYm9vbCB9LFxuXHQvKjo6WyovMHgwMDJmLyo6Ol0qLzogeyAvKiBuOlwiRmlsZVBhc3NcIiwgKi8gZjpwYXJzZV9GaWxlUGFzcyB9LFxuXHQvKjo6WyovMHgwMDMxLyo6Ol0qLzogeyAvKiBuOlwiRm9udFwiLCAqLyBmOnBhcnNlX0ZvbnQgfSxcblx0Lyo6OlsqLzB4MDAzMy8qOjpdKi86IHsgLyogbjpcIlByaW50U2l6ZVwiLCAqLyBmOnBhcnNldWludDE2IH0sXG5cdC8qOjpbKi8weDAwM2MvKjo6XSovOiB7IC8qIG46XCJDb250aW51ZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDNkLyo6Ol0qLzogeyAvKiBuOlwiV2luZG93MVwiLCAqLyBmOnBhcnNlX1dpbmRvdzEgfSxcblx0Lyo6OlsqLzB4MDA0MC8qOjpdKi86IHsgLyogbjpcIkJhY2t1cFwiLCAqLyBmOnBhcnNlYm9vbCB9LFxuXHQvKjo6WyovMHgwMDQxLyo6Ol0qLzogeyAvKiBuOlwiUGFuZVwiLCAqLyBmOnBhcnNlX1BhbmUgfSxcblx0Lyo6OlsqLzB4MDA0Mi8qOjpdKi86IHsgLyogbjpcIkNvZGVQYWdlXCIsICovIGY6cGFyc2V1aW50MTYgfSxcblx0Lyo6OlsqLzB4MDA0ZC8qOjpdKi86IHsgLyogbjpcIlBsc1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDUwLyo6Ol0qLzogeyAvKiBuOlwiRENvblwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDUxLyo6Ol0qLzogeyAvKiBuOlwiRENvblJlZlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDUyLyo6Ol0qLzogeyAvKiBuOlwiRENvbk5hbWVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA1NS8qOjpdKi86IHsgLyogbjpcIkRlZkNvbFdpZHRoXCIsICovIGY6cGFyc2V1aW50MTYgfSxcblx0Lyo6OlsqLzB4MDA1OS8qOjpdKi86IHsgLyogbjpcIlhDVFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDVhLyo6Ol0qLzogeyAvKiBuOlwiQ1JOXCIsICovIH0sXG5cdC8qOjpbKi8weDAwNWIvKjo6XSovOiB7IC8qIG46XCJGaWxlU2hhcmluZ1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDVjLyo6Ol0qLzogeyAvKiBuOlwiV3JpdGVBY2Nlc3NcIiwgKi8gZjpwYXJzZV9Xcml0ZUFjY2VzcyB9LFxuXHQvKjo6WyovMHgwMDVkLyo6Ol0qLzogeyAvKiBuOlwiT2JqXCIsICovIGY6cGFyc2VfT2JqIH0sXG5cdC8qOjpbKi8weDAwNWUvKjo6XSovOiB7IC8qIG46XCJVbmNhbGNlZFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDVmLyo6Ol0qLzogeyAvKiBuOlwiQ2FsY1NhdmVSZWNhbGNcIiwgKi8gZjpwYXJzZWJvb2wgfSwgLy9cblx0Lyo6OlsqLzB4MDA2MC8qOjpdKi86IHsgLyogbjpcIlRlbXBsYXRlXCIsICovIH0sXG5cdC8qOjpbKi8weDAwNjEvKjo6XSovOiB7IC8qIG46XCJJbnRsXCIsICovIH0sXG5cdC8qOjpbKi8weDAwNjMvKjo6XSovOiB7IC8qIG46XCJPYmpQcm90ZWN0XCIsICovIGY6cGFyc2Vib29sIH0sXG5cdC8qOjpbKi8weDAwN2QvKjo6XSovOiB7IC8qIG46XCJDb2xJbmZvXCIsICovIGY6cGFyc2VfQ29sSW5mbyB9LFxuXHQvKjo6WyovMHgwMDgwLyo6Ol0qLzogeyAvKiBuOlwiR3V0c1wiLCAqLyBmOnBhcnNlX0d1dHMgfSxcblx0Lyo6OlsqLzB4MDA4MS8qOjpdKi86IHsgLyogbjpcIldzQm9vbFwiLCAqLyBmOnBhcnNlX1dzQm9vbCB9LFxuXHQvKjo6WyovMHgwMDgyLyo6Ol0qLzogeyAvKiBuOlwiR3JpZFNldFwiLCAqLyBmOnBhcnNldWludDE2IH0sXG5cdC8qOjpbKi8weDAwODMvKjo6XSovOiB7IC8qIG46XCJIQ2VudGVyXCIsICovIGY6cGFyc2Vib29sIH0sXG5cdC8qOjpbKi8weDAwODQvKjo6XSovOiB7IC8qIG46XCJWQ2VudGVyXCIsICovIGY6cGFyc2Vib29sIH0sXG5cdC8qOjpbKi8weDAwODUvKjo6XSovOiB7IC8qIG46XCJCb3VuZFNoZWV0OFwiLCAqLyBmOnBhcnNlX0JvdW5kU2hlZXQ4IH0sXG5cdC8qOjpbKi8weDAwODYvKjo6XSovOiB7IC8qIG46XCJXcml0ZVByb3RlY3RcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA4Yy8qOjpdKi86IHsgLyogbjpcIkNvdW50cnlcIiwgKi8gZjpwYXJzZV9Db3VudHJ5IH0sXG5cdC8qOjpbKi8weDAwOGQvKjo6XSovOiB7IC8qIG46XCJIaWRlT2JqXCIsICovIGY6cGFyc2V1aW50MTYgfSxcblx0Lyo6OlsqLzB4MDA5MC8qOjpdKi86IHsgLyogbjpcIlNvcnRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA5Mi8qOjpdKi86IHsgLyogbjpcIlBhbGV0dGVcIiwgKi8gZjpwYXJzZV9QYWxldHRlIH0sXG5cdC8qOjpbKi8weDAwOTcvKjo6XSovOiB7IC8qIG46XCJTeW5jXCIsICovIH0sXG5cdC8qOjpbKi8weDAwOTgvKjo6XSovOiB7IC8qIG46XCJMUHJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA5OS8qOjpdKi86IHsgLyogbjpcIkR4R0NvbFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDlhLyo6Ol0qLzogeyAvKiBuOlwiRm5Hcm91cE5hbWVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA5Yi8qOjpdKi86IHsgLyogbjpcIkZpbHRlck1vZGVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA5Yy8qOjpdKi86IHsgLyogbjpcIkJ1aWx0SW5Gbkdyb3VwQ291bnRcIiwgKi8gZjpwYXJzZXVpbnQxNiB9LFxuXHQvKjo6WyovMHgwMDlkLyo6Ol0qLzogeyAvKiBuOlwiQXV0b0ZpbHRlckluZm9cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA5ZS8qOjpdKi86IHsgLyogbjpcIkF1dG9GaWx0ZXJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBhMC8qOjpdKi86IHsgLyogbjpcIlNjbFwiLCAqLyBmOnBhcnNlX1NjbCB9LFxuXHQvKjo6WyovMHgwMGExLyo6Ol0qLzogeyAvKiBuOlwiU2V0dXBcIiwgKi8gZjpwYXJzZV9TZXR1cCB9LFxuXHQvKjo6WyovMHgwMGFlLyo6Ol0qLzogeyAvKiBuOlwiU2Nlbk1hblwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGFmLyo6Ol0qLzogeyAvKiBuOlwiU0NFTkFSSU9cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBiMC8qOjpdKi86IHsgLyogbjpcIlN4Vmlld1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGIxLyo6Ol0qLzogeyAvKiBuOlwiU3h2ZFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGIyLyo6Ol0qLzogeyAvKiBuOlwiU1hWSVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGI0Lyo6Ol0qLzogeyAvKiBuOlwiU3hJdmRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBiNS8qOjpdKi86IHsgLyogbjpcIlNYTElcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBiNi8qOjpdKi86IHsgLyogbjpcIlNYUElcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBiOC8qOjpdKi86IHsgLyogbjpcIkRvY1JvdXRlXCIsICovIH0sXG5cdC8qOjpbKi8weDAwYjkvKjo6XSovOiB7IC8qIG46XCJSZWNpcE5hbWVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBiZC8qOjpdKi86IHsgLyogbjpcIk11bFJrXCIsICovIGY6cGFyc2VfTXVsUmsgfSxcblx0Lyo6OlsqLzB4MDBiZS8qOjpdKi86IHsgLyogbjpcIk11bEJsYW5rXCIsICovIGY6cGFyc2VfTXVsQmxhbmsgfSxcblx0Lyo6OlsqLzB4MDBjMS8qOjpdKi86IHsgLyogbjpcIk1tc1wiLCAqLyBmOnBhcnNlbm9vcDIgfSxcblx0Lyo6OlsqLzB4MDBjNS8qOjpdKi86IHsgLyogbjpcIlNYRElcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBjNi8qOjpdKi86IHsgLyogbjpcIlNYREJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBjNy8qOjpdKi86IHsgLyogbjpcIlNYRkRCXCIsICovIH0sXG5cdC8qOjpbKi8weDAwYzgvKjo6XSovOiB7IC8qIG46XCJTWERCQlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGM5Lyo6Ol0qLzogeyAvKiBuOlwiU1hOdW1cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBjYS8qOjpdKi86IHsgLyogbjpcIlN4Qm9vbFwiLCAqLyBmOnBhcnNlYm9vbCB9LFxuXHQvKjo6WyovMHgwMGNiLyo6Ol0qLzogeyAvKiBuOlwiU3hFcnJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBjYy8qOjpdKi86IHsgLyogbjpcIlNYSW50XCIsICovIH0sXG5cdC8qOjpbKi8weDAwY2QvKjo6XSovOiB7IC8qIG46XCJTWFN0cmluZ1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGNlLyo6Ol0qLzogeyAvKiBuOlwiU1hEdHJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBjZi8qOjpdKi86IHsgLyogbjpcIlN4TmlsXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZDAvKjo6XSovOiB7IC8qIG46XCJTWFRibFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGQxLyo6Ol0qLzogeyAvKiBuOlwiU1hUQlJHSUlUTVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGQyLyo6Ol0qLzogeyAvKiBuOlwiU3hUYnBnXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZDMvKjo6XSovOiB7IC8qIG46XCJPYlByb2pcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBkNS8qOjpdKi86IHsgLyogbjpcIlNYU3RyZWFtSURcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBkNy8qOjpdKi86IHsgLyogbjpcIkRCQ2VsbFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGQ4Lyo6Ol0qLzogeyAvKiBuOlwiU1hSbmdcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBkOS8qOjpdKi86IHsgLyogbjpcIlN4SXN4b3BlclwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGRhLyo6Ol0qLzogeyAvKiBuOlwiQm9va0Jvb2xcIiwgKi8gZjpwYXJzZXVpbnQxNiB9LFxuXHQvKjo6WyovMHgwMGRjLyo6Ol0qLzogeyAvKiBuOlwiRGJPclBhcmFtUXJ5XCIsICovIH0sXG5cdC8qOjpbKi8weDAwZGQvKjo6XSovOiB7IC8qIG46XCJTY2VuYXJpb1Byb3RlY3RcIiwgKi8gZjpwYXJzZWJvb2wgfSxcblx0Lyo6OlsqLzB4MDBkZS8qOjpdKi86IHsgLyogbjpcIk9sZU9iamVjdFNpemVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBlMC8qOjpdKi86IHsgLyogbjpcIlhGXCIsICovIGY6cGFyc2VfWEYgfSxcblx0Lyo6OlsqLzB4MDBlMS8qOjpdKi86IHsgLyogbjpcIkludGVyZmFjZUhkclwiLCAqLyBmOnBhcnNlX0ludGVyZmFjZUhkciB9LFxuXHQvKjo6WyovMHgwMGUyLyo6Ol0qLzogeyAvKiBuOlwiSW50ZXJmYWNlRW5kXCIsICovIGY6cGFyc2Vub29wMiB9LFxuXHQvKjo6WyovMHgwMGUzLyo6Ol0qLzogeyAvKiBuOlwiU1hWU1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGU1Lyo6Ol0qLzogeyAvKiBuOlwiTWVyZ2VDZWxsc1wiLCAqLyBmOnBhcnNlX01lcmdlQ2VsbHMgfSxcblx0Lyo6OlsqLzB4MDBlOS8qOjpdKi86IHsgLyogbjpcIkJrSGltXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZWIvKjo6XSovOiB7IC8qIG46XCJNc29EcmF3aW5nR3JvdXBcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBlYy8qOjpdKi86IHsgLyogbjpcIk1zb0RyYXdpbmdcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBlZC8qOjpdKi86IHsgLyogbjpcIk1zb0RyYXdpbmdTZWxlY3Rpb25cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBlZi8qOjpdKi86IHsgLyogbjpcIlBob25ldGljSW5mb1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGYwLyo6Ol0qLzogeyAvKiBuOlwiU3hSdWxlXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZjEvKjo6XSovOiB7IC8qIG46XCJTWEV4XCIsICovIH0sXG5cdC8qOjpbKi8weDAwZjIvKjo6XSovOiB7IC8qIG46XCJTeEZpbHRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBmNC8qOjpdKi86IHsgLyogbjpcIlN4RFhGXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZjUvKjo6XSovOiB7IC8qIG46XCJTeEl0bVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGY2Lyo6Ol0qLzogeyAvKiBuOlwiU3hOYW1lXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZjcvKjo6XSovOiB7IC8qIG46XCJTeFNlbGVjdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGY4Lyo6Ol0qLzogeyAvKiBuOlwiU1hQYWlyXCIsICovIH0sXG5cdC8qOjpbKi8weDAwZjkvKjo6XSovOiB7IC8qIG46XCJTeEZtbGFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDBmYi8qOjpdKi86IHsgLyogbjpcIlN4Rm9ybWF0XCIsICovIH0sXG5cdC8qOjpbKi8weDAwZmMvKjo6XSovOiB7IC8qIG46XCJTU1RcIiwgKi8gZjpwYXJzZV9TU1QgfSxcblx0Lyo6OlsqLzB4MDBmZC8qOjpdKi86IHsgLyogbjpcIkxhYmVsU3N0XCIsICovIGY6cGFyc2VfTGFiZWxTc3QgfSxcblx0Lyo6OlsqLzB4MDBmZi8qOjpdKi86IHsgLyogbjpcIkV4dFNTVFwiLCAqLyBmOnBhcnNlX0V4dFNTVCB9LFxuXHQvKjo6WyovMHgwMTAwLyo6Ol0qLzogeyAvKiBuOlwiU1hWREV4XCIsICovIH0sXG5cdC8qOjpbKi8weDAxMDMvKjo6XSovOiB7IC8qIG46XCJTWEZvcm11bGFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDEyMi8qOjpdKi86IHsgLyogbjpcIlNYREJFeFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMTM3Lyo6Ol0qLzogeyAvKiBuOlwiUlJESW5zRGVsXCIsICovIH0sXG5cdC8qOjpbKi8weDAxMzgvKjo6XSovOiB7IC8qIG46XCJSUkRIZWFkXCIsICovIH0sXG5cdC8qOjpbKi8weDAxM2IvKjo6XSovOiB7IC8qIG46XCJSUkRDaGdDZWxsXCIsICovIH0sXG5cdC8qOjpbKi8weDAxM2QvKjo6XSovOiB7IC8qIG46XCJSUlRhYklkXCIsICovIGY6cGFyc2V1aW50MTZhIH0sXG5cdC8qOjpbKi8weDAxM2UvKjo6XSovOiB7IC8qIG46XCJSUkRSZW5TaGVldFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMTNmLyo6Ol0qLzogeyAvKiBuOlwiUlJTb3J0XCIsICovIH0sXG5cdC8qOjpbKi8weDAxNDAvKjo6XSovOiB7IC8qIG46XCJSUkRNb3ZlXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNGEvKjo6XSovOiB7IC8qIG46XCJSUkZvcm1hdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMTRiLyo6Ol0qLzogeyAvKiBuOlwiUlJBdXRvRm10XCIsICovIH0sXG5cdC8qOjpbKi8weDAxNGQvKjo6XSovOiB7IC8qIG46XCJSUkluc2VydFNoXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNGUvKjo6XSovOiB7IC8qIG46XCJSUkRNb3ZlQmVnaW5cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE0Zi8qOjpdKi86IHsgLyogbjpcIlJSRE1vdmVFbmRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE1MC8qOjpdKi86IHsgLyogbjpcIlJSREluc0RlbEJlZ2luXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNTEvKjo6XSovOiB7IC8qIG46XCJSUkRJbnNEZWxFbmRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE1Mi8qOjpdKi86IHsgLyogbjpcIlJSRENvbmZsaWN0XCIsICovIH0sXG5cdC8qOjpbKi8weDAxNTMvKjo6XSovOiB7IC8qIG46XCJSUkREZWZOYW1lXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNTQvKjo6XSovOiB7IC8qIG46XCJSUkRSc3RFdHhwXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNWYvKjo6XSovOiB7IC8qIG46XCJMUm5nXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNjAvKjo6XSovOiB7IC8qIG46XCJVc2VzRUxGc1wiLCAqLyBmOnBhcnNlYm9vbCB9LFxuXHQvKjo6WyovMHgwMTYxLyo6Ol0qLzogeyAvKiBuOlwiRFNGXCIsICovIGY6cGFyc2Vub29wMiB9LFxuXHQvKjo6WyovMHgwMTkxLyo6Ol0qLzogeyAvKiBuOlwiQ1VzclwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMTkyLyo6Ol0qLzogeyAvKiBuOlwiQ2JVc3JcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE5My8qOjpdKi86IHsgLyogbjpcIlVzckluZm9cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE5NC8qOjpdKi86IHsgLyogbjpcIlVzckV4Y2xcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE5NS8qOjpdKi86IHsgLyogbjpcIkZpbGVMb2NrXCIsICovIH0sXG5cdC8qOjpbKi8weDAxOTYvKjo6XSovOiB7IC8qIG46XCJSUkRJbmZvXCIsICovIH0sXG5cdC8qOjpbKi8weDAxOTcvKjo6XSovOiB7IC8qIG46XCJCQ1VzcnNcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDE5OC8qOjpdKi86IHsgLyogbjpcIlVzckNoa1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMWE5Lyo6Ol0qLzogeyAvKiBuOlwiVXNlckJWaWV3XCIsICovIH0sXG5cdC8qOjpbKi8weDAxYWEvKjo6XSovOiB7IC8qIG46XCJVc2VyU1ZpZXdCZWdpblwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMWFiLyo6Ol0qLzogeyAvKiBuOlwiVXNlclNWaWV3RW5kXCIsICovIH0sXG5cdC8qOjpbKi8weDAxYWMvKjo6XSovOiB7IC8qIG46XCJSUkRVc2VyVmlld1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMWFkLyo6Ol0qLzogeyAvKiBuOlwiUXNpXCIsICovIH0sXG5cdC8qOjpbKi8weDAxYWUvKjo6XSovOiB7IC8qIG46XCJTdXBCb29rXCIsICovIGY6cGFyc2VfU3VwQm9vayB9LFxuXHQvKjo6WyovMHgwMWFmLyo6Ol0qLzogeyAvKiBuOlwiUHJvdDRSZXZcIiwgKi8gZjpwYXJzZWJvb2wgfSxcblx0Lyo6OlsqLzB4MDFiMC8qOjpdKi86IHsgLyogbjpcIkNvbmRGbXRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDFiMS8qOjpdKi86IHsgLyogbjpcIkNGXCIsICovIH0sXG5cdC8qOjpbKi8weDAxYjIvKjo6XSovOiB7IC8qIG46XCJEVmFsXCIsICovIH0sXG5cdC8qOjpbKi8weDAxYjUvKjo6XSovOiB7IC8qIG46XCJEQ29uQmluXCIsICovIH0sXG5cdC8qOjpbKi8weDAxYjYvKjo6XSovOiB7IC8qIG46XCJUeE9cIiwgKi8gZjpwYXJzZV9UeE8gfSxcblx0Lyo6OlsqLzB4MDFiNy8qOjpdKi86IHsgLyogbjpcIlJlZnJlc2hBbGxcIiwgKi8gZjpwYXJzZWJvb2wgfSwgLy9cblx0Lyo6OlsqLzB4MDFiOC8qOjpdKi86IHsgLyogbjpcIkhMaW5rXCIsICovIGY6cGFyc2VfSExpbmsgfSxcblx0Lyo6OlsqLzB4MDFiOS8qOjpdKi86IHsgLyogbjpcIkxlbFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMWJhLyo6Ol0qLzogeyAvKiBuOlwiQ29kZU5hbWVcIiwgKi8gZjpwYXJzZV9YTFVuaWNvZGVTdHJpbmcgfSxcblx0Lyo6OlsqLzB4MDFiYi8qOjpdKi86IHsgLyogbjpcIlNYRkRCVHlwZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMWJjLyo6Ol0qLzogeyAvKiBuOlwiUHJvdDRSZXZQYXNzXCIsICovIGY6cGFyc2V1aW50MTYgfSxcblx0Lyo6OlsqLzB4MDFiZC8qOjpdKi86IHsgLyogbjpcIk9iTm9NYWNyb3NcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDFiZS8qOjpdKi86IHsgLyogbjpcIkR2XCIsICovIH0sXG5cdC8qOjpbKi8weDAxYzAvKjo6XSovOiB7IC8qIG46XCJFeGNlbDlGaWxlXCIsICovIGY6cGFyc2Vub29wMiB9LFxuXHQvKjo6WyovMHgwMWMxLyo6Ol0qLzogeyAvKiBuOlwiUmVjYWxjSWRcIiwgKi8gZjpwYXJzZV9SZWNhbGNJZCwgcjoyfSxcblx0Lyo6OlsqLzB4MDFjMi8qOjpdKi86IHsgLyogbjpcIkVudEV4VTJcIiwgKi8gZjpwYXJzZW5vb3AyIH0sXG5cdC8qOjpbKi8weDAyMDAvKjo6XSovOiB7IC8qIG46XCJEaW1lbnNpb25zXCIsICovIGY6cGFyc2VfRGltZW5zaW9ucyB9LFxuXHQvKjo6WyovMHgwMjAxLyo6Ol0qLzogeyAvKiBuOlwiQmxhbmtcIiwgKi8gZjpwYXJzZV9CbGFuayB9LFxuXHQvKjo6WyovMHgwMjAzLyo6Ol0qLzogeyAvKiBuOlwiTnVtYmVyXCIsICovIGY6cGFyc2VfTnVtYmVyIH0sXG5cdC8qOjpbKi8weDAyMDQvKjo6XSovOiB7IC8qIG46XCJMYWJlbFwiLCAqLyBmOnBhcnNlX0xhYmVsIH0sXG5cdC8qOjpbKi8weDAyMDUvKjo6XSovOiB7IC8qIG46XCJCb29sRXJyXCIsICovIGY6cGFyc2VfQm9vbEVyciB9LFxuXHQvKjo6WyovMHgwMjA3Lyo6Ol0qLzogeyAvKiBuOlwiU3RyaW5nXCIsICovIGY6cGFyc2VfU3RyaW5nIH0sXG5cdC8qOjpbKi8weDAyMDgvKjo6XSovOiB7IC8qIG46XCJSb3dcIiwgKi8gZjpwYXJzZV9Sb3cgfSxcblx0Lyo6OlsqLzB4MDIwYi8qOjpdKi86IHsgLyogbjpcIkluZGV4XCIsICovIH0sXG5cdC8qOjpbKi8weDAyMjEvKjo6XSovOiB7IC8qIG46XCJBcnJheVwiLCAqLyBmOnBhcnNlX0FycmF5IH0sXG5cdC8qOjpbKi8weDAyMjUvKjo6XSovOiB7IC8qIG46XCJEZWZhdWx0Um93SGVpZ2h0XCIsICovIGY6cGFyc2VfRGVmYXVsdFJvd0hlaWdodCB9LFxuXHQvKjo6WyovMHgwMjM2Lyo6Ol0qLzogeyAvKiBuOlwiVGFibGVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDIzZS8qOjpdKi86IHsgLyogbjpcIldpbmRvdzJcIiwgKi8gZjpwYXJzZV9XaW5kb3cyIH0sXG5cdC8qOjpbKi8weDAyN2UvKjo6XSovOiB7IC8qIG46XCJSS1wiLCAqLyBmOnBhcnNlX1JLIH0sXG5cdC8qOjpbKi8weDAyOTMvKjo6XSovOiB7IC8qIG46XCJTdHlsZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwNDE4Lyo6Ol0qLzogeyAvKiBuOlwiQmlnTmFtZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwNDFlLyo6Ol0qLzogeyAvKiBuOlwiRm9ybWF0XCIsICovIGY6cGFyc2VfRm9ybWF0IH0sXG5cdC8qOjpbKi8weDA0M2MvKjo6XSovOiB7IC8qIG46XCJDb250aW51ZUJpZ05hbWVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDRiYy8qOjpdKi86IHsgLyogbjpcIlNockZtbGFcIiwgKi8gZjpwYXJzZV9TaHJGbWxhIH0sXG5cdC8qOjpbKi8weDA4MDAvKjo6XSovOiB7IC8qIG46XCJITGlua1Rvb2x0aXBcIiwgKi8gZjpwYXJzZV9ITGlua1Rvb2x0aXAgfSxcblx0Lyo6OlsqLzB4MDgwMS8qOjpdKi86IHsgLyogbjpcIldlYlB1YlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODAyLyo6Ol0qLzogeyAvKiBuOlwiUXNpU1hUYWdcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgwMy8qOjpdKi86IHsgLyogbjpcIkRCUXVlcnlFeHRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgwNC8qOjpdKi86IHsgLyogbjpcIkV4dFN0cmluZ1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwODA1Lyo6Ol0qLzogeyAvKiBuOlwiVHh0UXJ5XCIsICovIH0sXG5cdC8qOjpbKi8weDA4MDYvKjo6XSovOiB7IC8qIG46XCJRc2lyXCIsICovIH0sXG5cdC8qOjpbKi8weDA4MDcvKjo6XSovOiB7IC8qIG46XCJRc2lmXCIsICovIH0sXG5cdC8qOjpbKi8weDA4MDgvKjo6XSovOiB7IC8qIG46XCJSUkRUUVNJRlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODA5Lyo6Ol0qLzogeyAvKiBuOlwiQk9GXCIsICovIGY6cGFyc2VfQk9GIH0sXG5cdC8qOjpbKi8weDA4MGEvKjo6XSovOiB7IC8qIG46XCJPbGVEYkNvbm5cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgwYi8qOjpdKi86IHsgLyogbjpcIldPcHRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgwYy8qOjpdKi86IHsgLyogbjpcIlNYVmlld0V4XCIsICovIH0sXG5cdC8qOjpbKi8weDA4MGQvKjo6XSovOiB7IC8qIG46XCJTWFRIXCIsICovIH0sXG5cdC8qOjpbKi8weDA4MGUvKjo6XSovOiB7IC8qIG46XCJTWFBJRXhcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgwZi8qOjpdKi86IHsgLyogbjpcIlNYVkRURXhcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgxMC8qOjpdKi86IHsgLyogbjpcIlNYVmlld0V4OVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODEyLyo6Ol0qLzogeyAvKiBuOlwiQ29udGludWVGcnRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDgxMy8qOjpdKi86IHsgLyogbjpcIlJlYWxUaW1lRGF0YVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODUwLyo6Ol0qLzogeyAvKiBuOlwiQ2hhcnRGcnRJbmZvXCIsICovIH0sXG5cdC8qOjpbKi8weDA4NTEvKjo6XSovOiB7IC8qIG46XCJGcnRXcmFwcGVyXCIsICovIH0sXG5cdC8qOjpbKi8weDA4NTIvKjo6XSovOiB7IC8qIG46XCJTdGFydEJsb2NrXCIsICovIH0sXG5cdC8qOjpbKi8weDA4NTMvKjo6XSovOiB7IC8qIG46XCJFbmRCbG9ja1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwODU0Lyo6Ol0qLzogeyAvKiBuOlwiU3RhcnRPYmplY3RcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg1NS8qOjpdKi86IHsgLyogbjpcIkVuZE9iamVjdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODU2Lyo6Ol0qLzogeyAvKiBuOlwiQ2F0TGFiXCIsICovIH0sXG5cdC8qOjpbKi8weDA4NTcvKjo6XSovOiB7IC8qIG46XCJZTXVsdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODU4Lyo6Ol0qLzogeyAvKiBuOlwiU1hWaWV3TGlua1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwODU5Lyo6Ol0qLzogeyAvKiBuOlwiUGl2b3RDaGFydEJpdHNcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg1YS8qOjpdKi86IHsgLyogbjpcIkZydEZvbnRMaXN0XCIsICovIH0sXG5cdC8qOjpbKi8weDA4NjIvKjo6XSovOiB7IC8qIG46XCJTaGVldEV4dFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODYzLyo6Ol0qLzogeyAvKiBuOlwiQm9va0V4dFwiLCAqLyByOjEyfSxcblx0Lyo6OlsqLzB4MDg2NC8qOjpdKi86IHsgLyogbjpcIlNYQWRkbFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODY1Lyo6Ol0qLzogeyAvKiBuOlwiQ3JFcnJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg2Ni8qOjpdKi86IHsgLyogbjpcIkhGUGljdHVyZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODY3Lyo6Ol0qLzogeyAvKiBuOlwiRmVhdEhkclwiLCAqLyBmOnBhcnNlbm9vcDIgfSxcblx0Lyo6OlsqLzB4MDg2OC8qOjpdKi86IHsgLyogbjpcIkZlYXRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg2YS8qOjpdKi86IHsgLyogbjpcIkRhdGFMYWJFeHRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg2Yi8qOjpdKi86IHsgLyogbjpcIkRhdGFMYWJFeHRDb250ZW50c1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwODZjLyo6Ol0qLzogeyAvKiBuOlwiQ2VsbFdhdGNoXCIsICovIH0sXG5cdC8qOjpbKi8weDA4NzEvKjo6XSovOiB7IC8qIG46XCJGZWF0SGRyMTFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg3Mi8qOjpdKi86IHsgLyogbjpcIkZlYXR1cmUxMVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODc0Lyo6Ol0qLzogeyAvKiBuOlwiRHJvcERvd25PYmpJZHNcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg3NS8qOjpdKi86IHsgLyogbjpcIkNvbnRpbnVlRnJ0MTFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg3Ni8qOjpdKi86IHsgLyogbjpcIkRDb25uXCIsICovIH0sXG5cdC8qOjpbKi8weDA4NzcvKjo6XSovOiB7IC8qIG46XCJMaXN0MTJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg3OC8qOjpdKi86IHsgLyogbjpcIkZlYXR1cmUxMlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODc5Lyo6Ol0qLzogeyAvKiBuOlwiQ29uZEZtdDEyXCIsICovIH0sXG5cdC8qOjpbKi8weDA4N2EvKjo6XSovOiB7IC8qIG46XCJDRjEyXCIsICovIH0sXG5cdC8qOjpbKi8weDA4N2IvKjo6XSovOiB7IC8qIG46XCJDRkV4XCIsICovIH0sXG5cdC8qOjpbKi8weDA4N2MvKjo6XSovOiB7IC8qIG46XCJYRkNSQ1wiLCAqLyBmOnBhcnNlX1hGQ1JDLCByOjEyIH0sXG5cdC8qOjpbKi8weDA4N2QvKjo6XSovOiB7IC8qIG46XCJYRkV4dFwiLCAqLyBmOnBhcnNlX1hGRXh0LCByOjEyIH0sXG5cdC8qOjpbKi8weDA4N2UvKjo6XSovOiB7IC8qIG46XCJBdXRvRmlsdGVyMTJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg3Zi8qOjpdKi86IHsgLyogbjpcIkNvbnRpbnVlRnJ0MTJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg4NC8qOjpdKi86IHsgLyogbjpcIk1EVEluZm9cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg4NS8qOjpdKi86IHsgLyogbjpcIk1EWFN0clwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODg2Lyo6Ol0qLzogeyAvKiBuOlwiTURYVHVwbGVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg4Ny8qOjpdKi86IHsgLyogbjpcIk1EWFNldFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODg4Lyo6Ol0qLzogeyAvKiBuOlwiTURYUHJvcFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODg5Lyo6Ol0qLzogeyAvKiBuOlwiTURYS1BJXCIsICovIH0sXG5cdC8qOjpbKi8weDA4OGEvKjo6XSovOiB7IC8qIG46XCJNREJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg4Yi8qOjpdKi86IHsgLyogbjpcIlBMVlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODhjLyo6Ol0qLzogeyAvKiBuOlwiQ29tcGF0MTJcIiwgKi8gZjpwYXJzZWJvb2wsIHI6MTIgfSxcblx0Lyo6OlsqLzB4MDg4ZC8qOjpdKi86IHsgLyogbjpcIkRYRlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODhlLyo6Ol0qLzogeyAvKiBuOlwiVGFibGVTdHlsZXNcIiwgKi8gcjoxMiB9LFxuXHQvKjo6WyovMHgwODhmLyo6Ol0qLzogeyAvKiBuOlwiVGFibGVTdHlsZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODkwLyo6Ol0qLzogeyAvKiBuOlwiVGFibGVTdHlsZUVsZW1lbnRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg5Mi8qOjpdKi86IHsgLyogbjpcIlN0eWxlRXh0XCIsICovIH0sXG5cdC8qOjpbKi8weDA4OTMvKjo6XSovOiB7IC8qIG46XCJOYW1lUHVibGlzaFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODk0Lyo6Ol0qLzogeyAvKiBuOlwiTmFtZUNtdFwiLCAqLyBmOnBhcnNlX05hbWVDbXQsIHI6MTIgfSxcblx0Lyo6OlsqLzB4MDg5NS8qOjpdKi86IHsgLyogbjpcIlNvcnREYXRhXCIsICovIH0sXG5cdC8qOjpbKi8weDA4OTYvKjo6XSovOiB7IC8qIG46XCJUaGVtZVwiLCAqLyBmOnBhcnNlX1RoZW1lLCByOjEyIH0sXG5cdC8qOjpbKi8weDA4OTcvKjo6XSovOiB7IC8qIG46XCJHVUlEVHlwZUxpYlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODk4Lyo6Ol0qLzogeyAvKiBuOlwiRm5HcnAxMlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODk5Lyo6Ol0qLzogeyAvKiBuOlwiTmFtZUZuR3JwMTJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg5YS8qOjpdKi86IHsgLyogbjpcIk1UUlNldHRpbmdzXCIsICovIGY6cGFyc2VfTVRSU2V0dGluZ3MsIHI6MTIgfSxcblx0Lyo6OlsqLzB4MDg5Yi8qOjpdKi86IHsgLyogbjpcIkNvbXByZXNzUGljdHVyZXNcIiwgKi8gZjpwYXJzZW5vb3AyIH0sXG5cdC8qOjpbKi8weDA4OWMvKjo6XSovOiB7IC8qIG46XCJIZWFkZXJGb290ZXJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg5ZC8qOjpdKi86IHsgLyogbjpcIkNydExheW91dDEyXCIsICovIH0sXG5cdC8qOjpbKi8weDA4OWUvKjo6XSovOiB7IC8qIG46XCJDcnRNbEZydFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODlmLyo6Ol0qLzogeyAvKiBuOlwiQ3J0TWxGcnRDb250aW51ZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGEzLyo6Ol0qLzogeyAvKiBuOlwiRm9yY2VGdWxsQ2FsY3VsYXRpb25cIiwgKi8gZjpwYXJzZV9Gb3JjZUZ1bGxDYWxjdWxhdGlvbiB9LFxuXHQvKjo6WyovMHgwOGE0Lyo6Ol0qLzogeyAvKiBuOlwiU2hhcGVQcm9wc1N0cmVhbVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGE1Lyo6Ol0qLzogeyAvKiBuOlwiVGV4dFByb3BzU3RyZWFtXCIsICovIH0sXG5cdC8qOjpbKi8weDA4YTYvKjo6XSovOiB7IC8qIG46XCJSaWNoVGV4dFN0cmVhbVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGE3Lyo6Ol0qLzogeyAvKiBuOlwiQ3J0TGF5b3V0MTJBXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMDEvKjo6XSovOiB7IC8qIG46XCJVbml0c1wiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDAyLyo6Ol0qLzogeyAvKiBuOlwiQ2hhcnRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAwMy8qOjpdKi86IHsgLyogbjpcIlNlcmllc1wiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDA2Lyo6Ol0qLzogeyAvKiBuOlwiRGF0YUZvcm1hdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDA3Lyo6Ol0qLzogeyAvKiBuOlwiTGluZUZvcm1hdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDA5Lyo6Ol0qLzogeyAvKiBuOlwiTWFya2VyRm9ybWF0XCIsICovIH0sXG5cdC8qOjpbKi8weDEwMGEvKjo6XSovOiB7IC8qIG46XCJBcmVhRm9ybWF0XCIsICovIH0sXG5cdC8qOjpbKi8weDEwMGIvKjo6XSovOiB7IC8qIG46XCJQaWVGb3JtYXRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAwYy8qOjpdKi86IHsgLyogbjpcIkF0dGFjaGVkTGFiZWxcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAwZC8qOjpdKi86IHsgLyogbjpcIlNlcmllc1RleHRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAxNC8qOjpdKi86IHsgLyogbjpcIkNoYXJ0Rm9ybWF0XCIsICovIH0sXG5cdC8qOjpbKi8weDEwMTUvKjo6XSovOiB7IC8qIG46XCJMZWdlbmRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAxNi8qOjpdKi86IHsgLyogbjpcIlNlcmllc0xpc3RcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAxNy8qOjpdKi86IHsgLyogbjpcIkJhclwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDE4Lyo6Ol0qLzogeyAvKiBuOlwiTGluZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDE5Lyo6Ol0qLzogeyAvKiBuOlwiUGllXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMWEvKjo6XSovOiB7IC8qIG46XCJBcmVhXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMWIvKjo6XSovOiB7IC8qIG46XCJTY2F0dGVyXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMWMvKjo6XSovOiB7IC8qIG46XCJDcnRMaW5lXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMWQvKjo6XSovOiB7IC8qIG46XCJBeGlzXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMWUvKjo6XSovOiB7IC8qIG46XCJUaWNrXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMWYvKjo6XSovOiB7IC8qIG46XCJWYWx1ZVJhbmdlXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMjAvKjo6XSovOiB7IC8qIG46XCJDYXRTZXJSYW5nZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDIxLyo6Ol0qLzogeyAvKiBuOlwiQXhpc0xpbmVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAyMi8qOjpdKi86IHsgLyogbjpcIkNydExpbmtcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAyNC8qOjpdKi86IHsgLyogbjpcIkRlZmF1bHRUZXh0XCIsICovIH0sXG5cdC8qOjpbKi8weDEwMjUvKjo6XSovOiB7IC8qIG46XCJUZXh0XCIsICovIH0sXG5cdC8qOjpbKi8weDEwMjYvKjo6XSovOiB7IC8qIG46XCJGb250WFwiLCAqLyBmOnBhcnNldWludDE2IH0sXG5cdC8qOjpbKi8weDEwMjcvKjo6XSovOiB7IC8qIG46XCJPYmplY3RMaW5rXCIsICovIH0sXG5cdC8qOjpbKi8weDEwMzIvKjo6XSovOiB7IC8qIG46XCJGcmFtZVwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDMzLyo6Ol0qLzogeyAvKiBuOlwiQmVnaW5cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAzNC8qOjpdKi86IHsgLyogbjpcIkVuZFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDM1Lyo6Ol0qLzogeyAvKiBuOlwiUGxvdEFyZWFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAzYS8qOjpdKi86IHsgLyogbjpcIkNoYXJ0M2RcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAzYy8qOjpdKi86IHsgLyogbjpcIlBpY0ZcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAzZC8qOjpdKi86IHsgLyogbjpcIkRyb3BCYXJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTAzZS8qOjpdKi86IHsgLyogbjpcIlJhZGFyXCIsICovIH0sXG5cdC8qOjpbKi8weDEwM2YvKjo6XSovOiB7IC8qIG46XCJTdXJmXCIsICovIH0sXG5cdC8qOjpbKi8weDEwNDAvKjo6XSovOiB7IC8qIG46XCJSYWRhckFyZWFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA0MS8qOjpdKi86IHsgLyogbjpcIkF4aXNQYXJlbnRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA0My8qOjpdKi86IHsgLyogbjpcIkxlZ2VuZEV4Y2VwdGlvblwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDQ0Lyo6Ol0qLzogeyAvKiBuOlwiU2h0UHJvcHNcIiwgKi8gZjpwYXJzZV9TaHRQcm9wcyB9LFxuXHQvKjo6WyovMHgxMDQ1Lyo6Ol0qLzogeyAvKiBuOlwiU2VyVG9DcnRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA0Ni8qOjpdKi86IHsgLyogbjpcIkF4ZXNVc2VkXCIsICovIH0sXG5cdC8qOjpbKi8weDEwNDgvKjo6XSovOiB7IC8qIG46XCJTQmFzZVJlZlwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDRhLyo6Ol0qLzogeyAvKiBuOlwiU2VyUGFyZW50XCIsICovIH0sXG5cdC8qOjpbKi8weDEwNGIvKjo6XSovOiB7IC8qIG46XCJTZXJBdXhUcmVuZFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDRlLyo6Ol0qLzogeyAvKiBuOlwiSUZtdFJlY29yZFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDRmLyo6Ol0qLzogeyAvKiBuOlwiUG9zXCIsICovIH0sXG5cdC8qOjpbKi8weDEwNTAvKjo6XSovOiB7IC8qIG46XCJBbFJ1bnNcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA1MS8qOjpdKi86IHsgLyogbjpcIkJSQUlcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA1Yi8qOjpdKi86IHsgLyogbjpcIlNlckF1eEVyckJhclwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDVjLyo6Ol0qLzogeyAvKiBuOlwiQ2xydENsaWVudFwiLCAqLyBmOnBhcnNlX0NscnRDbGllbnQgfSxcblx0Lyo6OlsqLzB4MTA1ZC8qOjpdKi86IHsgLyogbjpcIlNlckZtdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDVmLyo6Ol0qLzogeyAvKiBuOlwiQ2hhcnQzREJhclNoYXBlXCIsICovIH0sXG5cdC8qOjpbKi8weDEwNjAvKjo6XSovOiB7IC8qIG46XCJGYmlcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA2MS8qOjpdKi86IHsgLyogbjpcIkJvcFBvcFwiLCAqLyB9LFxuXHQvKjo6WyovMHgxMDYyLyo6Ol0qLzogeyAvKiBuOlwiQXhjRXh0XCIsICovIH0sXG5cdC8qOjpbKi8weDEwNjMvKjo6XSovOiB7IC8qIG46XCJEYXRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA2NC8qOjpdKi86IHsgLyogbjpcIlBsb3RHcm93dGhcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA2NS8qOjpdKi86IHsgLyogbjpcIlNJSW5kZXhcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA2Ni8qOjpdKi86IHsgLyogbjpcIkdlbEZyYW1lXCIsICovIH0sXG5cdC8qOjpbKi8weDEwNjcvKjo6XSovOiB7IC8qIG46XCJCb3BQb3BDdXN0b21cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MTA2OC8qOjpdKi86IHsgLyogbjpcIkZiaTJcIiwgKi8gfSxcblxuXHQvKjo6WyovMHgwMDAwLyo6Ol0qLzogeyAvKiBuOlwiRGltZW5zaW9uc1wiLCAqLyBmOnBhcnNlX0RpbWVuc2lvbnMgfSxcblx0Lyo6OlsqLzB4MDAwMS8qOjpdKi86IHsgLyogbjpcIkJJRkYyQkxBTktcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDAwMi8qOjpdKi86IHsgLyogbjpcIkJJRkYySU5UXCIsICovIGY6cGFyc2VfQklGRjJJTlQgfSxcblx0Lyo6OlsqLzB4MDAwMy8qOjpdKi86IHsgLyogbjpcIkJJRkYyTlVNXCIsICovIGY6cGFyc2VfQklGRjJOVU0gfSxcblx0Lyo6OlsqLzB4MDAwNC8qOjpdKi86IHsgLyogbjpcIkJJRkYyU1RSXCIsICovIGY6cGFyc2VfQklGRjJTVFIgfSxcblx0Lyo6OlsqLzB4MDAwNS8qOjpdKi86IHsgLyogbjpcIkJvb2xFcnJcIiwgKi8gZjpwYXJzZV9Cb29sRXJyIH0sXG5cdC8qOjpbKi8weDAwMDcvKjo6XSovOiB7IC8qIG46XCJTdHJpbmdcIiwgKi8gZjpwYXJzZV9CSUZGMlNUUklORyB9LFxuXHQvKjo6WyovMHgwMDA4Lyo6Ol0qLzogeyAvKiBuOlwiQklGRjJST1dcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDAwOS8qOjpdKi86IHsgLyogbjpcIkJPRlwiLCAqLyBmOnBhcnNlX0JPRiB9LFxuXHQvKjo6WyovMHgwMDBiLyo6Ol0qLzogeyAvKiBuOlwiSW5kZXhcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDAxNi8qOjpdKi86IHsgLyogbjpcIkV4dGVybkNvdW50XCIsICovIGY6cGFyc2V1aW50MTYgfSxcblx0Lyo6OlsqLzB4MDAxZS8qOjpdKi86IHsgLyogbjpcIkJJRkYyRk9STUFUXCIsICovIGY6cGFyc2VfQklGRjJGb3JtYXQgfSxcblx0Lyo6OlsqLzB4MDAxZi8qOjpdKi86IHsgLyogbjpcIkJJRkYyRk1UQ05UXCIsICovIH0sIC8qIDE2LWJpdCBjbnQgb2YgQklGRjJGT1JNQVQgcmVjb3JkcyAqL1xuXHQvKjo6WyovMHgwMDIwLyo6Ol0qLzogeyAvKiBuOlwiQklGRjJDT0xJTkZPXCIsICovIH0sXG5cdC8qOjpbKi8weDAwMjEvKjo6XSovOiB7IC8qIG46XCJBcnJheVwiLCAqLyBmOnBhcnNlX0FycmF5IH0sXG5cdC8qOjpbKi8weDAwMjQvKjo6XSovOiB7IC8qIG46XCJDT0xXSURUSFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDI1Lyo6Ol0qLzogeyAvKiBuOlwiRGVmYXVsdFJvd0hlaWdodFwiLCAqLyBmOnBhcnNlX0RlZmF1bHRSb3dIZWlnaHQgfSxcblx0Ly8gMHgyYyA/P1xuXHQvLyAweDJkID8/XG5cdC8vIDB4MmUgPz9cblx0Ly8gMHgzMCBGT05UQ09VTlQ6IG51bWJlciBvZiBmb250c1xuXHQvKjo6WyovMHgwMDMyLyo6Ol0qLzogeyAvKiBuOlwiQklGRjJGT05UWFRSQVwiLCAqLyBmOnBhcnNlX0JJRkYyRk9OVFhUUkEgfSxcblx0Ly8gMHgzNTogSU5GT09QVFNcblx0Ly8gMHgzNjogVEFCTEUgKEJJRkYyIG9ubHkpXG5cdC8vIDB4Mzc6IFRBQkxFMiAoQklGRjIgb25seSlcblx0Ly8gMHgzODogV05ERVNLXG5cdC8vIDB4MzkgPz9cblx0Ly8gMHgzYTogQkVHSU5QUkVGXG5cdC8vIDB4M2I6IEVORFBSRUZcblx0Lyo6OlsqLzB4MDAzZS8qOjpdKi86IHsgLyogbjpcIkJJRkYyV0lORE9XMlwiLCAqLyB9LFxuXHQvLyAweDNmID8/XG5cdC8vIDB4NDY6IFNIT1dTQ1JPTExcblx0Ly8gMHg0NzogU0hPV0ZPUk1VTEFcblx0Ly8gMHg0ODogU1RBVFVTQkFSXG5cdC8vIDB4NDk6IFNIT1JUTUVOVVNcblx0Ly8gMHg0QTpcblx0Ly8gMHg0Qjpcblx0Ly8gMHg0Qzpcblx0Ly8gMHg0RTpcblx0Ly8gMHg0Rjpcblx0Ly8gMHg1ODogVE9PTEJBUiAoQklGRjMpXG5cblx0LyogLSAtIC0gKi9cblx0Lyo6OlsqLzB4MDAzNC8qOjpdKi86IHsgLyogbjpcIkRERU9iak5hbWVcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA0My8qOjpdKi86IHsgLyogbjpcIkJJRkYyWEZcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA0NC8qOjpdKi86IHsgLyogbjpcIkJJRkYyWEZJTkRFWFwiLCAqLyBmOnBhcnNldWludDE2IH0sXG5cdC8qOjpbKi8weDAwNDUvKjo6XSovOiB7IC8qIG46XCJCSUZGMkZPTlRDTFJcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA1Ni8qOjpdKi86IHsgLyogbjpcIkJJRkY0Rk1UQ05UXCIsICovIH0sIC8qIDE2LWJpdCBjbnQsIHNpbWlsYXIgdG8gQklGRjIgKi9cblx0Lyo6OlsqLzB4MDA3ZS8qOjpdKi86IHsgLyogbjpcIlJLXCIsICovIH0sIC8qIE5vdCBuZWNlc3NhcmlseSBzYW1lIGFzIDB4MDI3ZSAqL1xuXHQvKjo6WyovMHgwMDdmLyo6Ol0qLzogeyAvKiBuOlwiSW1EYXRhXCIsICovIGY6cGFyc2VfSW1EYXRhIH0sXG5cdC8qOjpbKi8weDAwODcvKjo6XSovOiB7IC8qIG46XCJBZGRpblwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMDg4Lyo6Ol0qLzogeyAvKiBuOlwiRWRnXCIsICovIH0sXG5cdC8qOjpbKi8weDAwODkvKjo6XSovOiB7IC8qIG46XCJQdWJcIiwgKi8gfSxcblx0Ly8gMHg4QVxuXHQvLyAweDhCIExIOiBhbHRlcm5hdGUgbWVudSBrZXkgZmxhZyAoQklGRjMvNClcblx0Ly8gMHg4RVxuXHQvLyAweDhGXG5cdC8qOjpbKi8weDAwOTEvKjo6XSovOiB7IC8qIG46XCJTdWJcIiwgKi8gfSxcblx0Ly8gMHg5MyBTVFlMRVxuXHQvKjo6WyovMHgwMDk0Lyo6Ol0qLzogeyAvKiBuOlwiTEhSZWNvcmRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDA5NS8qOjpdKi86IHsgLyogbjpcIkxITkdyYXBoXCIsICovIH0sXG5cdC8qOjpbKi8weDAwOTYvKjo6XSovOiB7IC8qIG46XCJTb3VuZFwiLCAqLyB9LFxuXHQvLyAweEEyIEZOUFJPVE86IGZ1bmN0aW9uIHByb3RvdHlwZXMgKEJJRkY0KVxuXHQvLyAweEEzXG5cdC8vIDB4QThcblx0Lyo6OlsqLzB4MDBhOS8qOjpdKi86IHsgLyogbjpcIkNvb3JkTGlzdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGFiLyo6Ol0qLzogeyAvKiBuOlwiR0NXXCIsICovIH0sXG5cdC8qOjpbKi8weDAwYmMvKjo6XSovOiB7IC8qIG46XCJTaHJGbWxhXCIsICovIH0sIC8qIE5vdCBuZWNlc3NhcmlseSBzYW1lIGFzIDB4MDRiYyAqL1xuXHQvKjo6WyovMHgwMGJmLyo6Ol0qLzogeyAvKiBuOlwiVG9vbGJhckhkclwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGMwLyo6Ol0qLzogeyAvKiBuOlwiVG9vbGJhckVuZFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGMyLyo6Ol0qLzogeyAvKiBuOlwiQWRkTWVudVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGMzLyo6Ol0qLzogeyAvKiBuOlwiRGVsTWVudVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGQ2Lyo6Ol0qLzogeyAvKiBuOlwiUlN0cmluZ1wiLCAqLyBmOnBhcnNlX1JTdHJpbmcgfSxcblx0Lyo6OlsqLzB4MDBkZi8qOjpdKi86IHsgLyogbjpcIlVERGVzY1wiLCAqLyB9LFxuXHQvKjo6WyovMHgwMGVhLyo6Ol0qLzogeyAvKiBuOlwiVGFiSWRDb25mXCIsICovIH0sXG5cdC8qOjpbKi8weDAxNjIvKjo6XSovOiB7IC8qIG46XCJYTDVNb2RpZnlcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDFhNS8qOjpdKi86IHsgLyogbjpcIkZpbGVTaGFyaW5nMlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMjA2Lyo6Ol0qLzogeyAvKiBuOlwiRm9ybXVsYVwiLCAqLyBmOnBhcnNlX0Zvcm11bGEgfSxcblx0Lyo6OlsqLzB4MDIwOS8qOjpdKi86IHsgLyogbjpcIkJPRlwiLCAqLyBmOnBhcnNlX0JPRiB9LFxuXHQvKjo6WyovMHgwMjE4Lyo6Ol0qLzogeyAvKiBuOlwiTGJsXCIsICovIGY6cGFyc2VfTGJsIH0sXG5cdC8qOjpbKi8weDAyMjMvKjo6XSovOiB7IC8qIG46XCJFeHRlcm5OYW1lXCIsICovIGY6cGFyc2VfRXh0ZXJuTmFtZSB9LFxuXHQvKjo6WyovMHgwMjMxLyo6Ol0qLzogeyAvKiBuOlwiRm9udFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwMjQzLyo6Ol0qLzogeyAvKiBuOlwiQklGRjNYRlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwNDA2Lyo6Ol0qLzogeyAvKiBuOlwiRm9ybXVsYVwiLCAqLyBmOnBhcnNlX0Zvcm11bGEgfSxcblx0Lyo6OlsqLzB4MDQwOS8qOjpdKi86IHsgLyogbjpcIkJPRlwiLCAqLyBmOnBhcnNlX0JPRiB9LFxuXHQvKjo6WyovMHgwNDQzLyo6Ol0qLzogeyAvKiBuOlwiQklGRjRYRlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwODZkLyo6Ol0qLzogeyAvKiBuOlwiRmVhdEluZm9cIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg3My8qOjpdKi86IHsgLyogbjpcIkZlYXRJbmZvMTFcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDg4MS8qOjpdKi86IHsgLyogbjpcIlNYQWRkbDEyXCIsICovIH0sXG5cdC8qOjpbKi8weDA4YzAvKjo6XSovOiB7IC8qIG46XCJBdXRvV2ViUHViXCIsICovIH0sXG5cdC8qOjpbKi8weDA4YzEvKjo6XSovOiB7IC8qIG46XCJMaXN0T2JqXCIsICovIH0sXG5cdC8qOjpbKi8weDA4YzIvKjo6XSovOiB7IC8qIG46XCJMaXN0RmllbGRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDhjMy8qOjpdKi86IHsgLyogbjpcIkxpc3REVlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGM0Lyo6Ol0qLzogeyAvKiBuOlwiTGlzdENvbmRGbXRcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDhjNS8qOjpdKi86IHsgLyogbjpcIkxpc3RDRlwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGM2Lyo6Ol0qLzogeyAvKiBuOlwiRk1RcnlcIiwgKi8gfSxcblx0Lyo6OlsqLzB4MDhjNy8qOjpdKi86IHsgLyogbjpcIkZNU1FyeVwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGM4Lyo6Ol0qLzogeyAvKiBuOlwiUExWXCIsICovIH0sXG5cdC8qOjpbKi8weDA4YzkvKjo6XSovOiB7IC8qIG46XCJMbkV4dFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGNhLyo6Ol0qLzogeyAvKiBuOlwiTWtyRXh0XCIsICovIH0sXG5cdC8qOjpbKi8weDA4Y2IvKjo6XSovOiB7IC8qIG46XCJDcnRDb29wdFwiLCAqLyB9LFxuXHQvKjo6WyovMHgwOGQ2Lyo6Ol0qLzogeyAvKiBuOlwiRlJUQXJjaElkJFwiLCAqLyByOjEyIH0sXG5cblx0Lyo6OlsqLzB4NzI2Mi8qOjpdKi86IHt9XG59O1xuXG5mdW5jdGlvbiB3cml0ZV9iaWZmX3JlYyhiYS8qOkJ1ZkFycmF5Ki8sIHR5cGUvKjpudW1iZXIqLywgcGF5bG9hZCwgbGVuZ3RoLyo6P251bWJlciovKS8qOnZvaWQqLyB7XG5cdHZhciB0Lyo6bnVtYmVyKi8gPSB0eXBlO1xuXHRpZihpc05hTih0KSkgcmV0dXJuO1xuXHR2YXIgbGVuID0gbGVuZ3RoIHx8IChwYXlsb2FkfHxbXSkubGVuZ3RoIHx8IDA7XG5cdHZhciBvID0gYmEubmV4dCg0KTtcblx0by53cml0ZV9zaGlmdCgyLCB0KTtcblx0by53cml0ZV9zaGlmdCgyLCBsZW4pO1xuXHRpZigvKjo6IGxlbiAhPSBudWxsICYmKi9sZW4gPiAwICYmIGlzX2J1ZihwYXlsb2FkKSkgYmEucHVzaChwYXlsb2FkKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfYmlmZl9jb250aW51ZShiYS8qOkJ1ZkFycmF5Ki8sIHR5cGUvKjpudW1iZXIqLywgcGF5bG9hZCwgbGVuZ3RoLyo6P251bWJlciovKS8qOnZvaWQqLyB7XG5cdHZhciBsZW4gPSBsZW5ndGggfHwgKHBheWxvYWR8fFtdKS5sZW5ndGggfHwgMDtcblx0aWYobGVuIDw9IDgyMjQpIHJldHVybiB3cml0ZV9iaWZmX3JlYyhiYSwgdHlwZSwgcGF5bG9hZCwgbGVuKTtcblx0dmFyIHQgPSB0eXBlO1xuXHRpZihpc05hTih0KSkgcmV0dXJuO1xuXHR2YXIgcGFydHMgPSBwYXlsb2FkLnBhcnRzIHx8IFtdLCBzaWR4ID0gMDtcblx0dmFyIGkgPSAwLCB3ID0gMDtcblx0d2hpbGUodyArIChwYXJ0c1tzaWR4XSB8fCA4MjI0KSA8PSA4MjI0KSB7IHcrPSAocGFydHNbc2lkeF0gfHwgODIyNCk7IHNpZHgrKzsgfVxuXHR2YXIgbyA9IGJhLm5leHQoNCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgdCk7XG5cdG8ud3JpdGVfc2hpZnQoMiwgdyk7XG5cdGJhLnB1c2gocGF5bG9hZC5zbGljZShpLCBpICsgdykpO1xuXHRpICs9IHc7XG5cdHdoaWxlKGkgPCBsZW4pIHtcblx0XHRvID0gYmEubmV4dCg0KTtcblx0XHRvLndyaXRlX3NoaWZ0KDIsIDB4M2MpOyAvLyBUT0RPOiBmaWd1cmUgb3V0IGNvcnJlY3QgY29udGludWUgdHlwZVxuXHRcdHcgPSAwO1xuXHRcdHdoaWxlKHcgKyAocGFydHNbc2lkeF0gfHwgODIyNCkgPD0gODIyNCkgeyB3Kz0gKHBhcnRzW3NpZHhdIHx8IDgyMjQpOyBzaWR4Kys7IH1cblx0XHRvLndyaXRlX3NoaWZ0KDIsIHcpO1xuXHRcdGJhLnB1c2gocGF5bG9hZC5zbGljZShpLCBpK3cpKTsgaSs9IHc7XG5cdH1cbn1cblxuZnVuY3Rpb24gd3JpdGVfQklGRjJDZWxsKG91dCwgci8qOm51bWJlciovLCBjLyo6bnVtYmVyKi8pIHtcblx0aWYoIW91dCkgb3V0ID0gbmV3X2J1Zig3KTtcblx0b3V0LndyaXRlX3NoaWZ0KDIsIHIpO1xuXHRvdXQud3JpdGVfc2hpZnQoMiwgYyk7XG5cdG91dC53cml0ZV9zaGlmdCgyLCAwKTtcblx0b3V0LndyaXRlX3NoaWZ0KDEsIDApO1xuXHRyZXR1cm4gb3V0O1xufVxuXG5mdW5jdGlvbiB3cml0ZV9CSUZGMkJFUlIoci8qOm51bWJlciovLCBjLyo6bnVtYmVyKi8sIHZhbCwgdC8qOj9zdHJpbmcqLykge1xuXHR2YXIgb3V0ID0gbmV3X2J1Zig5KTtcblx0d3JpdGVfQklGRjJDZWxsKG91dCwgciwgYyk7XG5cdHdyaXRlX0Jlcyh2YWwsIHQgfHwgJ2InLCBvdXQpO1xuXHRyZXR1cm4gb3V0O1xufVxuXG4vKiBUT0RPOiBjb2RlcGFnZSwgbGFyZ2Ugc3RyaW5ncyAqL1xuZnVuY3Rpb24gd3JpdGVfQklGRjJMQUJFTChyLyo6bnVtYmVyKi8sIGMvKjpudW1iZXIqLywgdmFsKSB7XG5cdHZhciBvdXQgPSBuZXdfYnVmKDggKyAyKnZhbC5sZW5ndGgpO1xuXHR3cml0ZV9CSUZGMkNlbGwob3V0LCByLCBjKTtcblx0b3V0LndyaXRlX3NoaWZ0KDEsIHZhbC5sZW5ndGgpO1xuXHRvdXQud3JpdGVfc2hpZnQodmFsLmxlbmd0aCwgdmFsLCAnc2JjcycpO1xuXHRyZXR1cm4gb3V0LmwgPCBvdXQubGVuZ3RoID8gb3V0LnNsaWNlKDAsIG91dC5sKSA6IG91dDtcbn1cblxuZnVuY3Rpb24gd3JpdGVfd3NfYmlmZjJfY2VsbChiYS8qOkJ1ZkFycmF5Ki8sIGNlbGwvKjpDZWxsKi8sIFIvKjpudW1iZXIqLywgQy8qOm51bWJlciovLyo6Oiwgb3B0cyovKSB7XG5cdGlmKGNlbGwudiAhPSBudWxsKSBzd2l0Y2goY2VsbC50KSB7XG5cdFx0Y2FzZSAnZCc6IGNhc2UgJ24nOlxuXHRcdFx0dmFyIHYgPSBjZWxsLnQgPT0gJ2QnID8gZGF0ZW51bShwYXJzZURhdGUoY2VsbC52KSkgOiBjZWxsLnY7XG5cdFx0XHRpZigodiA9PSAodnwwKSkgJiYgKHYgPj0gMCkgJiYgKHYgPCA2NTUzNikpXG5cdFx0XHRcdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwMDIsIHdyaXRlX0JJRkYySU5UKFIsIEMsIHYpKTtcblx0XHRcdGVsc2Vcblx0XHRcdFx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDAwMywgd3JpdGVfQklGRjJOVU0oUixDLCB2KSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0Y2FzZSAnYic6IGNhc2UgJ2UnOiB3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMDA1LCB3cml0ZV9CSUZGMkJFUlIoUiwgQywgY2VsbC52LCBjZWxsLnQpKTsgcmV0dXJuO1xuXHRcdC8qIFRPRE86IGNvZGVwYWdlLCBzc3QgKi9cblx0XHRjYXNlICdzJzogY2FzZSAnc3RyJzpcblx0XHRcdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwMDQsIHdyaXRlX0JJRkYyTEFCRUwoUiwgQywgKGNlbGwudnx8XCJcIikuc2xpY2UoMCwyNTUpKSk7XG5cdFx0XHRyZXR1cm47XG5cdH1cblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDAwMSwgd3JpdGVfQklGRjJDZWxsKG51bGwsIFIsIEMpKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfd3NfYmlmZjIoYmEvKjpCdWZBcnJheSovLCB3cy8qOldvcmtzaGVldCovLCBpZHgvKjpudW1iZXIqLywgb3B0cy8qOjosIHdiOldvcmtib29rKi8pIHtcblx0dmFyIGRlbnNlID0gQXJyYXkuaXNBcnJheSh3cyk7XG5cdHZhciByYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10gfHwgXCJBMVwiKSwgcmVmLyo6c3RyaW5nKi8sIHJyID0gXCJcIiwgY29scy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRpZihyYW5nZS5lLmMgPiAweEZGIHx8IHJhbmdlLmUuciA+IDB4M0ZGRikge1xuXHRcdGlmKG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZSBcIiArICh3c1snIXJlZiddIHx8IFwiQTFcIikgKyBcIiBleGNlZWRzIGZvcm1hdCBsaW1pdCBBMTpJVjE2Mzg0XCIpO1xuXHRcdHJhbmdlLmUuYyA9IE1hdGgubWluKHJhbmdlLmUuYywgMHhGRik7XG5cdFx0cmFuZ2UuZS5yID0gTWF0aC5taW4ocmFuZ2UuZS5jLCAweDNGRkYpO1xuXHRcdHJlZiA9IGVuY29kZV9yYW5nZShyYW5nZSk7XG5cdH1cblx0Zm9yKHZhciBSID0gcmFuZ2Uucy5yOyBSIDw9IHJhbmdlLmUucjsgKytSKSB7XG5cdFx0cnIgPSBlbmNvZGVfcm93KFIpO1xuXHRcdGZvcih2YXIgQyA9IHJhbmdlLnMuYzsgQyA8PSByYW5nZS5lLmM7ICsrQykge1xuXHRcdFx0aWYoUiA9PT0gcmFuZ2Uucy5yKSBjb2xzW0NdID0gZW5jb2RlX2NvbChDKTtcblx0XHRcdHJlZiA9IGNvbHNbQ10gKyBycjtcblx0XHRcdHZhciBjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXSA6IHdzW3JlZl07XG5cdFx0XHRpZighY2VsbCkgY29udGludWU7XG5cdFx0XHQvKiB3cml0ZSBjZWxsICovXG5cdFx0XHR3cml0ZV93c19iaWZmMl9jZWxsKGJhLCBjZWxsLCBSLCBDLCBvcHRzKTtcblx0XHR9XG5cdH1cbn1cblxuLyogQmFzZWQgb24gdGVzdCBmaWxlcyAqL1xuZnVuY3Rpb24gd3JpdGVfYmlmZjJfYnVmKHdiLyo6V29ya2Jvb2sqLywgb3B0cy8qOldyaXRlT3B0cyovKSB7XG5cdHZhciBvID0gb3B0cyB8fCB7fTtcblx0aWYoREVOU0UgIT0gbnVsbCAmJiBvLmRlbnNlID09IG51bGwpIG8uZGVuc2UgPSBERU5TRTtcblx0dmFyIGJhID0gYnVmX2FycmF5KCk7XG5cdHZhciBpZHggPSAwO1xuXHRmb3IodmFyIGk9MDtpPHdiLlNoZWV0TmFtZXMubGVuZ3RoOysraSkgaWYod2IuU2hlZXROYW1lc1tpXSA9PSBvLnNoZWV0KSBpZHg9aTtcblx0aWYoaWR4ID09IDAgJiYgISFvLnNoZWV0ICYmIHdiLlNoZWV0TmFtZXNbMF0gIT0gby5zaGVldCkgdGhyb3cgbmV3IEVycm9yKFwiU2hlZXQgbm90IGZvdW5kOiBcIiArIG8uc2hlZXQpO1xuXHR3cml0ZV9iaWZmX3JlYyhiYSwgKG8uYmlmZiA9PSA0ID8gMHgwNDA5IDogKG8uYmlmZiA9PSAzID8gMHgwMjA5IDogMHgwMDA5KSksIHdyaXRlX0JPRih3YiwgMHgxMCwgbykpO1xuXHQvKiAuLi4gKi9cblx0d3JpdGVfd3NfYmlmZjIoYmEsIHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBpZHgsIG8sIHdiKTtcblx0LyogLi4uICovXG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwMEEpO1xuXHRyZXR1cm4gYmEuZW5kKCk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX0ZPTlRTX2JpZmY4KGJhLCBkYXRhLCBvcHRzKSB7XG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwMzEgLyogRm9udCAqLywgd3JpdGVfRm9udCh7XG5cdFx0c3o6MTIsXG5cdFx0Y29sb3I6IHt0aGVtZToxfSxcblx0XHRuYW1lOiBcIkFyaWFsXCIsXG5cdFx0ZmFtaWx5OiAyLFxuXHRcdHNjaGVtZTogXCJtaW5vclwiXG5cdH0sIG9wdHMpKTtcbn1cblxuXG5mdW5jdGlvbiB3cml0ZV9GTVRTX2JpZmY4KGJhLCBORi8qOj9TU0ZUYWJsZSovLCBvcHRzKSB7XG5cdGlmKCFORikgcmV0dXJuO1xuXHRbWzUsOF0sWzIzLDI2XSxbNDEsNDRdLFsvKjYzKi81MCwvKjY2XSxbMTY0LCovMzkyXV0uZm9yRWFjaChmdW5jdGlvbihyKSB7XG5cdFx0Lyo6OiBpZighTkYpIHJldHVybjsgKi9cblx0XHRmb3IodmFyIGkgPSByWzBdOyBpIDw9IHJbMV07ICsraSkgaWYoTkZbaV0gIT0gbnVsbCkgd3JpdGVfYmlmZl9yZWMoYmEsIDB4MDQxRSAvKiBGb3JtYXQgKi8sIHdyaXRlX0Zvcm1hdChpLCBORltpXSwgb3B0cykpO1xuXHR9KTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfRkVBVChiYSwgd3MpIHtcblx0LyogW01TLVhMU10gMi40LjExMiAqL1xuXHR2YXIgbyA9IG5ld19idWYoMTkpO1xuXHRvLndyaXRlX3NoaWZ0KDQsIDB4ODY3KTsgby53cml0ZV9zaGlmdCg0LCAwKTsgby53cml0ZV9zaGlmdCg0LCAwKTtcblx0by53cml0ZV9zaGlmdCgyLCAzKTsgby53cml0ZV9zaGlmdCgxLCAxKTsgby53cml0ZV9zaGlmdCg0LCAwKTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDg2NyAvKiBGZWF0SGRyICovLCBvKTtcblx0LyogW01TLVhMU10gMi40LjExMSAqL1xuXHRvID0gbmV3X2J1ZigzOSk7XG5cdG8ud3JpdGVfc2hpZnQoNCwgMHg4NjgpOyBvLndyaXRlX3NoaWZ0KDQsIDApOyBvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDMpOyBvLndyaXRlX3NoaWZ0KDEsIDApOyBvLndyaXRlX3NoaWZ0KDQsIDApO1xuXHRvLndyaXRlX3NoaWZ0KDIsIDEpOyBvLndyaXRlX3NoaWZ0KDQsIDQpOyBvLndyaXRlX3NoaWZ0KDIsIDApO1xuXHR3cml0ZV9SZWY4VShzYWZlX2RlY29kZV9yYW5nZSh3c1snIXJlZiddfHxcIkExXCIpLCBvKTtcblx0by53cml0ZV9zaGlmdCg0LCA0KTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDg2OCAvKiBGZWF0ICovLCBvKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfQ0VMTFhGU19iaWZmOChiYSwgb3B0cykge1xuXHRmb3IodmFyIGkgPSAwOyBpIDwgMTY7ICsraSkgd3JpdGVfYmlmZl9yZWMoYmEsIDB4MDBlMCAvKiBYRiAqLywgd3JpdGVfWEYoe251bUZtdElkOjAsIHN0eWxlOnRydWV9LCAwLCBvcHRzKSk7XG5cdG9wdHMuY2VsbFhmcy5mb3JFYWNoKGZ1bmN0aW9uKGMpIHtcblx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMGUwIC8qIFhGICovLCB3cml0ZV9YRihjLCAwLCBvcHRzKSk7XG5cdH0pO1xufVxuXG5mdW5jdGlvbiB3cml0ZV93c19iaWZmOF9obGlua3MoYmEvKjpCdWZBcnJheSovLCB3cykge1xuXHRmb3IodmFyIFI9MDsgUjx3c1snIWxpbmtzJ10ubGVuZ3RoOyArK1IpIHtcblx0XHR2YXIgSEwgPSB3c1snIWxpbmtzJ11bUl07XG5cdFx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDFiOCAvKiBITGluayAqLywgd3JpdGVfSExpbmsoSEwpKTtcblx0XHRpZihITFsxXS5Ub29sdGlwKSB3cml0ZV9iaWZmX3JlYyhiYSwgMHgwODAwIC8qIEhMaW5rVG9vbHRpcCAqLywgd3JpdGVfSExpbmtUb29sdGlwKEhMKSk7XG5cdH1cblx0ZGVsZXRlIHdzWychbGlua3MnXTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfd3NfY29sc19iaWZmOChiYSwgY29scykge1xuXHRpZighY29scykgcmV0dXJuO1xuXHR2YXIgY250ID0gMDtcblx0Y29scy5mb3JFYWNoKGZ1bmN0aW9uKGNvbCwgaWR4KSB7XG5cdFx0aWYoKytjbnQgPD0gMjU2ICYmIGNvbCkge1xuXHRcdFx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDA3ZCAvKiBDb2xJbmZvICovLCB3cml0ZV9Db2xJbmZvKGNvbF9vYmpfdyhpZHgsIGNvbCksIGlkeCkpO1xuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3dzX2JpZmY4X2NlbGwoYmEvKjpCdWZBcnJheSovLCBjZWxsLyo6Q2VsbCovLCBSLyo6bnVtYmVyKi8sIEMvKjpudW1iZXIqLywgb3B0cykge1xuXHR2YXIgb3MgPSAxNiArIGdldF9jZWxsX3N0eWxlKG9wdHMuY2VsbFhmcywgY2VsbCwgb3B0cyk7XG5cdGlmKGNlbGwudiA9PSBudWxsICYmICFjZWxsLmJmKSB7XG5cdFx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDIwMSAvKiBCbGFuayAqLywgd3JpdGVfWExTQ2VsbChSLCBDLCBvcykpO1xuXHRcdHJldHVybjtcblx0fVxuXHRpZihjZWxsLmJmKSB3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMDA2IC8qIEZvcm11bGEgKi8sIHdyaXRlX0Zvcm11bGEoY2VsbCwgUiwgQywgb3B0cywgb3MpKTtcblx0ZWxzZSBzd2l0Y2goY2VsbC50KSB7XG5cdFx0Y2FzZSAnZCc6IGNhc2UgJ24nOlxuXHRcdFx0dmFyIHYgPSBjZWxsLnQgPT0gJ2QnID8gZGF0ZW51bShwYXJzZURhdGUoY2VsbC52KSkgOiBjZWxsLnY7XG5cdFx0XHQvKiBUT0RPOiBlbWl0IFJLIGFzIGFwcHJvcHJpYXRlICovXG5cdFx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMjAzIC8qIE51bWJlciAqLywgd3JpdGVfTnVtYmVyKFIsIEMsIHYsIG9zLCBvcHRzKSk7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlICdiJzogY2FzZSAnZSc6XG5cdFx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMjA1IC8qIEJvb2xFcnIgKi8sIHdyaXRlX0Jvb2xFcnIoUiwgQywgY2VsbC52LCBvcywgb3B0cywgY2VsbC50KSk7XG5cdFx0XHRicmVhaztcblx0XHQvKiBUT0RPOiBjb2RlcGFnZSwgc3N0ICovXG5cdFx0Y2FzZSAncyc6IGNhc2UgJ3N0cic6XG5cdFx0XHRpZihvcHRzLmJvb2tTU1QpIHtcblx0XHRcdFx0dmFyIGlzc3QgPSBnZXRfc3N0X2lkKG9wdHMuU3RyaW5ncywgY2VsbC52LCBvcHRzLnJldlN0cmluZ3MpO1xuXHRcdFx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMGZkIC8qIExhYmVsU3N0ICovLCB3cml0ZV9MYWJlbFNzdChSLCBDLCBpc3N0LCBvcywgb3B0cykpO1xuXHRcdFx0fSBlbHNlIHdyaXRlX2JpZmZfcmVjKGJhLCAweDAyMDQgLyogTGFiZWwgKi8sIHdyaXRlX0xhYmVsKFIsIEMsIChjZWxsLnZ8fFwiXCIpLnNsaWNlKDAsMjU1KSwgb3MsIG9wdHMpKTtcblx0XHRcdGJyZWFrO1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMjAxIC8qIEJsYW5rICovLCB3cml0ZV9YTFNDZWxsKFIsIEMsIG9zKSk7XG5cdH1cbn1cblxuLyogW01TLVhMU10gMi4xLjcuMjAuNSAqL1xuZnVuY3Rpb24gd3JpdGVfd3NfYmlmZjgoaWR4Lyo6bnVtYmVyKi8sIG9wdHMsIHdiLyo6V29ya2Jvb2sqLykge1xuXHR2YXIgYmEgPSBidWZfYXJyYXkoKTtcblx0dmFyIHMgPSB3Yi5TaGVldE5hbWVzW2lkeF0sIHdzID0gd2IuU2hlZXRzW3NdIHx8IHt9O1xuXHR2YXIgX1dCLyo6V0JXQlByb3BzKi8gPSAoKHdifHx7fSkuV29ya2Jvb2t8fHt9Lyo6YW55Ki8pO1xuXHR2YXIgX3NoZWV0Lyo6V0JXU1Byb3AqLyA9ICgoX1dCLlNoZWV0c3x8W10pW2lkeF18fHt9Lyo6YW55Ki8pO1xuXHR2YXIgZGVuc2UgPSBBcnJheS5pc0FycmF5KHdzKTtcblx0dmFyIGI4ID0gb3B0cy5iaWZmID09IDg7XG5cdHZhciByZWYvKjpzdHJpbmcqLywgcnIgPSBcIlwiLCBjb2xzLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdHZhciByYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10gfHwgXCJBMVwiKTtcblx0dmFyIE1BWF9ST1dTID0gYjggPyA2NTUzNiA6IDE2Mzg0O1xuXHRpZihyYW5nZS5lLmMgPiAweEZGIHx8IHJhbmdlLmUuciA+PSBNQVhfUk9XUykge1xuXHRcdGlmKG9wdHMuV1RGKSB0aHJvdyBuZXcgRXJyb3IoXCJSYW5nZSBcIiArICh3c1snIXJlZiddIHx8IFwiQTFcIikgKyBcIiBleGNlZWRzIGZvcm1hdCBsaW1pdCBBMTpJVjE2Mzg0XCIpO1xuXHRcdHJhbmdlLmUuYyA9IE1hdGgubWluKHJhbmdlLmUuYywgMHhGRik7XG5cdFx0cmFuZ2UuZS5yID0gTWF0aC5taW4ocmFuZ2UuZS5jLCBNQVhfUk9XUy0xKTtcblx0fVxuXG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDA4MDksIHdyaXRlX0JPRih3YiwgMHgxMCwgb3B0cykpO1xuXHQvKiBbVW5jYWxjZWRdIEluZGV4ICovXG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwMGQgLyogQ2FsY01vZGUgKi8sIHdyaXRldWludDE2KDEpKTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDAwYyAvKiBDYWxjQ291bnQgKi8sIHdyaXRldWludDE2KDEwMCkpO1xuXHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMDBmIC8qIENhbGNSZWZNb2RlICovLCB3cml0ZWJvb2wodHJ1ZSkpO1xuXHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMDExIC8qIENhbGNJdGVyICovLCB3cml0ZWJvb2woZmFsc2UpKTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDAxMCAvKiBDYWxjRGVsdGEgKi8sIHdyaXRlX1hudW0oMC4wMDEpKTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDA1ZiAvKiBDYWxjU2F2ZVJlY2FsYyAqLywgd3JpdGVib29sKHRydWUpKTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDAyYSAvKiBQcmludFJvd0NvbCAqLywgd3JpdGVib29sKGZhbHNlKSk7XG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwMmIgLyogUHJpbnRHcmlkICovLCB3cml0ZWJvb2woZmFsc2UpKTtcblx0d3JpdGVfYmlmZl9yZWMoYmEsIDB4MDA4MiAvKiBHcmlkU2V0ICovLCB3cml0ZXVpbnQxNigxKSk7XG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwODAgLyogR3V0cyAqLywgd3JpdGVfR3V0cyhbMCwwXSkpO1xuXHQvKiBEZWZhdWx0Um93SGVpZ2h0IFdzQm9vbCBbU3luY10gW0xQcl0gW0hvcml6b250YWxQYWdlQnJlYWtzXSBbVmVydGljYWxQYWdlQnJlYWtzXSAqL1xuXHQvKiBIZWFkZXIgKHN0cmluZykgKi9cblx0LyogRm9vdGVyIChzdHJpbmcpICovXG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwODMgLyogSENlbnRlciAqLywgd3JpdGVib29sKGZhbHNlKSk7XG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAwODQgLyogVkNlbnRlciAqLywgd3JpdGVib29sKGZhbHNlKSk7XG5cdC8qIC4uLiAqL1xuXHRpZihiOCkgd3JpdGVfd3NfY29sc19iaWZmOChiYSwgd3NbXCIhY29sc1wiXSk7XG5cdC8qIC4uLiAqL1xuXHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgyMDAsIHdyaXRlX0RpbWVuc2lvbnMocmFuZ2UsIG9wdHMpKTtcblx0LyogLi4uICovXG5cblx0aWYoYjgpIHdzWychbGlua3MnXSA9IFtdO1xuXHRmb3IodmFyIFIgPSByYW5nZS5zLnI7IFIgPD0gcmFuZ2UuZS5yOyArK1IpIHtcblx0XHRyciA9IGVuY29kZV9yb3coUik7XG5cdFx0Zm9yKHZhciBDID0gcmFuZ2Uucy5jOyBDIDw9IHJhbmdlLmUuYzsgKytDKSB7XG5cdFx0XHRpZihSID09PSByYW5nZS5zLnIpIGNvbHNbQ10gPSBlbmNvZGVfY29sKEMpO1xuXHRcdFx0cmVmID0gY29sc1tDXSArIHJyO1xuXHRcdFx0dmFyIGNlbGwgPSBkZW5zZSA/ICh3c1tSXXx8W10pW0NdIDogd3NbcmVmXTtcblx0XHRcdGlmKCFjZWxsKSBjb250aW51ZTtcblx0XHRcdC8qIHdyaXRlIGNlbGwgKi9cblx0XHRcdHdyaXRlX3dzX2JpZmY4X2NlbGwoYmEsIGNlbGwsIFIsIEMsIG9wdHMpO1xuXHRcdFx0aWYoYjggJiYgY2VsbC5sKSB3c1snIWxpbmtzJ10ucHVzaChbcmVmLCBjZWxsLmxdKTtcblx0XHR9XG5cdH1cblx0dmFyIGNuYW1lLyo6c3RyaW5nKi8gPSBfc2hlZXQuQ29kZU5hbWUgfHwgX3NoZWV0Lm5hbWUgfHwgcztcblx0LyogLi4uICovXG5cdGlmKGI4KSB3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMjNlIC8qIFdpbmRvdzIgKi8sIHdyaXRlX1dpbmRvdzIoKF9XQi5WaWV3c3x8W10pWzBdKSk7XG5cdC8qIC4uLiAqL1xuXHRpZihiOCAmJiAod3NbJyFtZXJnZXMnXXx8W10pLmxlbmd0aCkgd3JpdGVfYmlmZl9yZWMoYmEsIDB4MDBlNSAvKiBNZXJnZUNlbGxzICovLCB3cml0ZV9NZXJnZUNlbGxzKHdzWychbWVyZ2VzJ10pKTtcblx0LyogW0xSbmddICpRVUVSWVRBQkxFIFtQSE9ORVRJQ0lORk9dIENPTkRGTVRTICovXG5cdGlmKGI4KSB3cml0ZV93c19iaWZmOF9obGlua3MoYmEsIHdzKTtcblx0LyogW0RWQUxdICovXG5cdHdyaXRlX2JpZmZfcmVjKGJhLCAweDAxYmEgLyogQ29kZU5hbWUgKi8sIHdyaXRlX1hMVW5pY29kZVN0cmluZyhjbmFtZSwgb3B0cykpO1xuXHQvKiAqV2ViUHViICpDZWxsV2F0Y2ggW1NoZWV0RXh0XSAqL1xuXHRpZihiOCkgd3JpdGVfRkVBVChiYSwgd3MpO1xuXHQvKiAqRkVBVDExICpSRUNPUkQxMiAqL1xuXHR3cml0ZV9iaWZmX3JlYyhiYSwgMHgwMDBhIC8qIEVPRiAqLyk7XG5cdHJldHVybiBiYS5lbmQoKTtcbn1cblxuLyogW01TLVhMU10gMi4xLjcuMjAuMyAqL1xuZnVuY3Rpb24gd3JpdGVfYmlmZjhfZ2xvYmFsKHdiLyo6V29ya2Jvb2sqLywgYnVmcywgb3B0cy8qOldyaXRlT3B0cyovKSB7XG5cdHZhciBBID0gYnVmX2FycmF5KCk7XG5cdHZhciBfV0IvKjpXQldCUHJvcHMqLyA9ICgod2J8fHt9KS5Xb3JrYm9va3x8e30vKjphbnkqLyk7XG5cdHZhciBfc2hlZXRzLyo6QXJyYXk8V0JXU1Byb3A+Ki8gPSAoX1dCLlNoZWV0c3x8W10pO1xuXHR2YXIgX3diLyo6V0JQcm9wcyovID0gLyo6OigoKi9fV0IuV0JQcm9wc3x8ey8qOjpDb2RlTmFtZTpcIlRoaXNXb3JrYm9va1wiKi99Lyo6OiApOmFueSkqLztcblx0dmFyIGI4ID0gb3B0cy5iaWZmID09IDgsIGI1ID0gb3B0cy5iaWZmID09IDU7XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDgwOSwgd3JpdGVfQk9GKHdiLCAweDA1LCBvcHRzKSk7XG5cdGlmKG9wdHMuYm9va1R5cGUgPT0gXCJ4bGFcIikgd3JpdGVfYmlmZl9yZWMoQSwgMHgwMDg3IC8qIEFkZGluICovKTtcblx0d3JpdGVfYmlmZl9yZWMoQSwgMHgwMGUxIC8qIEludGVyZmFjZUhkciAqLywgYjggPyB3cml0ZXVpbnQxNigweDA0YjApIDogbnVsbCk7XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDBjMSAvKiBNbXMgKi8sIHdyaXRlemVyb2VzKDIpKTtcblx0aWYoYjUpIHdyaXRlX2JpZmZfcmVjKEEsIDB4MDBiZiAvKiBUb29sYmFySGRyICovKTtcblx0aWYoYjUpIHdyaXRlX2JpZmZfcmVjKEEsIDB4MDBjMCAvKiBUb29sYmFyRW5kICovKTtcblx0d3JpdGVfYmlmZl9yZWMoQSwgMHgwMGUyIC8qIEludGVyZmFjZUVuZCAqLyk7XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDA1YyAvKiBXcml0ZUFjY2VzcyAqLywgd3JpdGVfV3JpdGVBY2Nlc3MoXCJTaGVldEpTXCIsIG9wdHMpKTtcblx0LyogW0ZpbGVTaGFyaW5nXSAqL1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAwNDIgLyogQ29kZVBhZ2UgKi8sIHdyaXRldWludDE2KGI4ID8gMHgwNGIwIDogMHgwNEU0KSk7XG5cdC8qICoyMDQ3IExlbCAqL1xuXHRpZihiOCkgd3JpdGVfYmlmZl9yZWMoQSwgMHgwMTYxIC8qIERTRiAqLywgd3JpdGV1aW50MTYoMCkpO1xuXHRpZihiOCkgd3JpdGVfYmlmZl9yZWMoQSwgMHgwMWMwIC8qIEV4Y2VsOUZpbGUgKi8pO1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAxM2QgLyogUlJUYWJJZCAqLywgd3JpdGVfUlJUYWJJZCh3Yi5TaGVldE5hbWVzLmxlbmd0aCkpO1xuXHRpZihiOCAmJiB3Yi52YmFyYXcpIHdyaXRlX2JpZmZfcmVjKEEsIDB4MDBkMyAvKiBPYlByb2ogKi8pO1xuXHQvKiBbT2JOb01hY3Jvc10gKi9cblx0aWYoYjggJiYgd2IudmJhcmF3KSB7XG5cdFx0dmFyIGNuYW1lLyo6c3RyaW5nKi8gPSBfd2IuQ29kZU5hbWUgfHwgXCJUaGlzV29ya2Jvb2tcIjtcblx0XHR3cml0ZV9iaWZmX3JlYyhBLCAweDAxYmEgLyogQ29kZU5hbWUgKi8sIHdyaXRlX1hMVW5pY29kZVN0cmluZyhjbmFtZSwgb3B0cykpO1xuXHR9XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDA5YyAvKiBCdWlsdEluRm5Hcm91cENvdW50ICovLCB3cml0ZXVpbnQxNigweDExKSk7XG5cdC8qICpGbkdyb3VwTmFtZSAqRm5HcnAxMiAqL1xuXHQvKiAqTGJsICovXG5cdC8qIFtPbGVPYmplY3RTaXplXSAqL1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAwMTkgLyogV2luUHJvdGVjdCAqLywgd3JpdGVib29sKGZhbHNlKSk7XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDAxMiAvKiBQcm90ZWN0ICovLCB3cml0ZWJvb2woZmFsc2UpKTtcblx0d3JpdGVfYmlmZl9yZWMoQSwgMHgwMDEzIC8qIFBhc3N3b3JkICovLCB3cml0ZXVpbnQxNigwKSk7XG5cdGlmKGI4KSB3cml0ZV9iaWZmX3JlYyhBLCAweDAxYWYgLyogUHJvdDRSZXYgKi8sIHdyaXRlYm9vbChmYWxzZSkpO1xuXHRpZihiOCkgd3JpdGVfYmlmZl9yZWMoQSwgMHgwMWJjIC8qIFByb3Q0UmV2UGFzcyAqLywgd3JpdGV1aW50MTYoMCkpO1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAwM2QgLyogV2luZG93MSAqLywgd3JpdGVfV2luZG93MShvcHRzKSk7XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDA0MCAvKiBCYWNrdXAgKi8sIHdyaXRlYm9vbChmYWxzZSkpO1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAwOGQgLyogSGlkZU9iaiAqLywgd3JpdGV1aW50MTYoMCkpO1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAwMjIgLyogRGF0ZTE5MDQgKi8sIHdyaXRlYm9vbChzYWZlMTkwNCh3Yik9PVwidHJ1ZVwiKSk7XG5cdHdyaXRlX2JpZmZfcmVjKEEsIDB4MDAwZSAvKiBDYWxjUHJlY2lzaW9uICovLCB3cml0ZWJvb2wodHJ1ZSkpO1xuXHRpZihiOCkgd3JpdGVfYmlmZl9yZWMoQSwgMHgwMWI3IC8qIFJlZnJlc2hBbGwgKi8sIHdyaXRlYm9vbChmYWxzZSkpO1xuXHR3cml0ZV9iaWZmX3JlYyhBLCAweDAwREEgLyogQm9va0Jvb2wgKi8sIHdyaXRldWludDE2KDApKTtcblx0LyogLi4uICovXG5cdHdyaXRlX0ZPTlRTX2JpZmY4KEEsIHdiLCBvcHRzKTtcblx0d3JpdGVfRk1UU19iaWZmOChBLCB3Yi5TU0YsIG9wdHMpO1xuXHR3cml0ZV9DRUxMWEZTX2JpZmY4KEEsIG9wdHMpO1xuXHQvKiAuLi4gKi9cblx0aWYoYjgpIHdyaXRlX2JpZmZfcmVjKEEsIDB4MDE2MCAvKiBVc2VzRUxGcyAqLywgd3JpdGVib29sKGZhbHNlKSk7XG5cdHZhciBhID0gQS5lbmQoKTtcblxuXHR2YXIgQyA9IGJ1Zl9hcnJheSgpO1xuXHQvKiBNRVRBREFUQSBbTVRSU2V0dGluZ3NdIFtGb3JjZUZ1bGxDYWxjdWxhdGlvbl0gKi9cblx0aWYoYjgpIHdyaXRlX2JpZmZfcmVjKEMsIDB4MDA4Qywgd3JpdGVfQ291bnRyeSgpKTtcblx0LyogKlNVUEJPT0sgKkxCTCAqUlREIFtSZWNhbGNJZF0gKkhGUGljdHVyZSAqTVNPRFJBV0lOR0dST1VQICovXG5cblx0LyogQklGRjg6IFtTU1QgKkNvbnRpbnVlXSBFeHRTU1QgKi9cblx0aWYoYjggJiYgb3B0cy5TdHJpbmdzKSB3cml0ZV9iaWZmX2NvbnRpbnVlKEMsIDB4MDBGQywgd3JpdGVfU1NUKG9wdHMuU3RyaW5ncywgb3B0cykpO1xuXG5cdC8qICpXZWJQdWIgW1dPcHRdIFtDckVycl0gW0Jvb2tFeHRdICpGZWF0SGRyICpEQ29ubiBbVEhFTUVdIFtDb21wcmVzc1BpY3R1cmVzXSBbQ29tcGF0MTJdIFtHVUlEVHlwZUxpYl0gKi9cblx0d3JpdGVfYmlmZl9yZWMoQywgMHgwMDBBIC8qIEVPRiAqLyk7XG5cdHZhciBjID0gQy5lbmQoKTtcblxuXHR2YXIgQiA9IGJ1Zl9hcnJheSgpO1xuXHR2YXIgYmxlbiA9IDAsIGogPSAwO1xuXHRmb3IoaiA9IDA7IGogPCB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytqKSBibGVuICs9IChiOCA/IDEyIDogMTEpICsgKGI4ID8gMiA6IDEpICogd2IuU2hlZXROYW1lc1tqXS5sZW5ndGg7XG5cdHZhciBzdGFydCA9IGEubGVuZ3RoICsgYmxlbiArIGMubGVuZ3RoO1xuXHRmb3IoaiA9IDA7IGogPCB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytqKSB7XG5cdFx0dmFyIF9zaGVldC8qOldCV1NQcm9wKi8gPSBfc2hlZXRzW2pdIHx8ICh7fS8qOmFueSovKTtcblx0XHR3cml0ZV9iaWZmX3JlYyhCLCAweDAwODUgLyogQm91bmRTaGVldDggKi8sIHdyaXRlX0JvdW5kU2hlZXQ4KHtwb3M6c3RhcnQsIGhzOl9zaGVldC5IaWRkZW58fDAsIGR0OjAsIG5hbWU6d2IuU2hlZXROYW1lc1tqXX0sIG9wdHMpKTtcblx0XHRzdGFydCArPSBidWZzW2pdLmxlbmd0aDtcblx0fVxuXHQvKiAxKkJvdW5kU2hlZXQ4ICovXG5cdHZhciBiID0gQi5lbmQoKTtcblx0aWYoYmxlbiAhPSBiLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiQlM4IFwiICsgYmxlbiArIFwiICE9IFwiICsgYi5sZW5ndGgpO1xuXG5cdHZhciBvdXQgPSBbXTtcblx0aWYoYS5sZW5ndGgpIG91dC5wdXNoKGEpO1xuXHRpZihiLmxlbmd0aCkgb3V0LnB1c2goYik7XG5cdGlmKGMubGVuZ3RoKSBvdXQucHVzaChjKTtcblx0cmV0dXJuIGJjb25jYXQob3V0KTtcbn1cblxuLyogW01TLVhMU10gMi4xLjcuMjAgV29ya2Jvb2sgU3RyZWFtICovXG5mdW5jdGlvbiB3cml0ZV9iaWZmOF9idWYod2IvKjpXb3JrYm9vayovLCBvcHRzLyo6V3JpdGVPcHRzKi8pIHtcblx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHR2YXIgYnVmcyA9IFtdO1xuXG5cdGlmKHdiICYmICF3Yi5TU0YpIHtcblx0XHR3Yi5TU0YgPSBkdXAodGFibGVfZm10KTtcblx0fVxuXHRpZih3YiAmJiB3Yi5TU0YpIHtcblx0XHRtYWtlX3NzZigpOyBTU0ZfbG9hZF90YWJsZSh3Yi5TU0YpO1xuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0by5yZXZzc2YgPSBldmVydF9udW0od2IuU1NGKTsgby5yZXZzc2Zbd2IuU1NGWzY1NTM1XV0gPSAwO1xuXHRcdG8uc3NmID0gd2IuU1NGO1xuXHR9XG5cblx0by5TdHJpbmdzID0gLyo6OigoKi9bXS8qOjogOmFueSk6U1NUKSovOyBvLlN0cmluZ3MuQ291bnQgPSAwOyBvLlN0cmluZ3MuVW5pcXVlID0gMDtcblx0Zml4X3dyaXRlX29wdHMobyk7XG5cblx0by5jZWxsWGZzID0gW107XG5cdGdldF9jZWxsX3N0eWxlKG8uY2VsbFhmcywge30sIHtyZXZzc2Y6e1wiR2VuZXJhbFwiOjB9fSk7XG5cblx0aWYoIXdiLlByb3BzKSB3Yi5Qcm9wcyA9IHt9O1xuXG5cdGZvcih2YXIgaSA9IDA7IGkgPCB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytpKSBidWZzW2J1ZnMubGVuZ3RoXSA9IHdyaXRlX3dzX2JpZmY4KGksIG8sIHdiKTtcblx0YnVmcy51bnNoaWZ0KHdyaXRlX2JpZmY4X2dsb2JhbCh3YiwgYnVmcywgbykpO1xuXHRyZXR1cm4gYmNvbmNhdChidWZzKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfYmlmZl9idWYod2IvKjpXb3JrYm9vayovLCBvcHRzLyo6V3JpdGVPcHRzKi8pIHtcblx0Zm9yKHZhciBpID0gMDsgaSA8PSB3Yi5TaGVldE5hbWVzLmxlbmd0aDsgKytpKSB7XG5cdFx0dmFyIHdzID0gd2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbaV1dO1xuXHRcdGlmKCF3cyB8fCAhd3NbXCIhcmVmXCJdKSBjb250aW51ZTtcblx0XHR2YXIgcmFuZ2UgPSBkZWNvZGVfcmFuZ2Uod3NbXCIhcmVmXCJdKTtcblx0XHRpZihyYW5nZS5lLmMgPiAyNTUpIHsgLy8gbm90ZTogMjU1IGlzIElWXG5cdFx0aWYodHlwZW9mIGNvbnNvbGUgIT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlLmVycm9yKSBjb25zb2xlLmVycm9yKFwiV29ya3NoZWV0ICdcIiArIHdiLlNoZWV0TmFtZXNbaV0gKyBcIicgZXh0ZW5kcyBiZXlvbmQgY29sdW1uIElWICgyNTUpLiAgRGF0YSBtYXkgYmUgbG9zdC5cIik7XG5cdFx0fVxuXHR9XG5cblx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHRzd2l0Y2goby5iaWZmIHx8IDIpIHtcblx0XHRjYXNlIDg6IGNhc2UgNTogcmV0dXJuIHdyaXRlX2JpZmY4X2J1Zih3Yiwgb3B0cyk7XG5cdFx0Y2FzZSA0OiBjYXNlIDM6IGNhc2UgMjogcmV0dXJuIHdyaXRlX2JpZmYyX2J1Zih3Yiwgb3B0cyk7XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKFwiaW52YWxpZCB0eXBlIFwiICsgby5ib29rVHlwZSArIFwiIGZvciBCSUZGXCIpO1xufVxuLyogbm90ZTogYnJvd3NlciBET00gZWxlbWVudCBjYW5ub3Qgc2VlIG1zby0gc3R5bGUgYXR0cnMsIG11c3QgcGFyc2UgKi9cbmZ1bmN0aW9uIGh0bWxfdG9fc2hlZXQoc3RyLyo6c3RyaW5nKi8sIF9vcHRzKS8qOldvcmtib29rKi8ge1xuXHR2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuXHRpZihERU5TRSAhPSBudWxsICYmIG9wdHMuZGVuc2UgPT0gbnVsbCkgb3B0cy5kZW5zZSA9IERFTlNFO1xuXHR2YXIgd3MvKjpXb3Jrc2hlZXQqLyA9IG9wdHMuZGVuc2UgPyAoW10vKjphbnkqLykgOiAoe30vKjphbnkqLyk7XG5cdHN0ciA9IHN0ci5yZXBsYWNlKC88IS0tLio/LS0+L2csIFwiXCIpO1xuXHR2YXIgbXRjaC8qOmFueSovID0gc3RyLm1hdGNoKC88dGFibGUvaSk7XG5cdGlmKCFtdGNoKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEhUTUw6IGNvdWxkIG5vdCBmaW5kIDx0YWJsZT5cIik7XG5cdHZhciBtdGNoMi8qOmFueSovID0gc3RyLm1hdGNoKC88XFwvdGFibGUvaSk7XG5cdHZhciBpLyo6bnVtYmVyKi8gPSBtdGNoLmluZGV4LCBqLyo6bnVtYmVyKi8gPSBtdGNoMiAmJiBtdGNoMi5pbmRleCB8fCBzdHIubGVuZ3RoO1xuXHR2YXIgcm93cyA9IHNwbGl0X3JlZ2V4KHN0ci5zbGljZShpLCBqKSwgLyg6Pzx0cltePl0qPikvaSwgXCI8dHI+XCIpO1xuXHR2YXIgUiA9IC0xLCBDID0gMCwgUlMgPSAwLCBDUyA9IDA7XG5cdHZhciByYW5nZS8qOlJhbmdlKi8gPSB7czp7cjoxMDAwMDAwMCwgYzoxMDAwMDAwMH0sZTp7cjowLGM6MH19O1xuXHR2YXIgbWVyZ2VzLyo6QXJyYXk8UmFuZ2U+Ki8gPSBbXTtcblx0Zm9yKGkgPSAwOyBpIDwgcm93cy5sZW5ndGg7ICsraSkge1xuXHRcdHZhciByb3cgPSByb3dzW2ldLnRyaW0oKTtcblx0XHR2YXIgaGQgPSByb3cuc2xpY2UoMCwzKS50b0xvd2VyQ2FzZSgpO1xuXHRcdGlmKGhkID09IFwiPHRyXCIpIHsgKytSOyBpZihvcHRzLnNoZWV0Um93cyAmJiBvcHRzLnNoZWV0Um93cyA8PSBSKSB7IC0tUjsgYnJlYWs7IH0gQyA9IDA7IGNvbnRpbnVlOyB9XG5cdFx0aWYoaGQgIT0gXCI8dGRcIiAmJiBoZCAhPSBcIjx0aFwiKSBjb250aW51ZTtcblx0XHR2YXIgY2VsbHMgPSByb3cuc3BsaXQoLzxcXC90W2RoXT4vaSk7XG5cdFx0Zm9yKGogPSAwOyBqIDwgY2VsbHMubGVuZ3RoOyArK2opIHtcblx0XHRcdHZhciBjZWxsID0gY2VsbHNbal0udHJpbSgpO1xuXHRcdFx0aWYoIWNlbGwubWF0Y2goLzx0W2RoXS9pKSkgY29udGludWU7XG5cdFx0XHR2YXIgbSA9IGNlbGwsIGNjID0gMDtcblx0XHRcdC8qIFRPRE86IHBhcnNlIHN0eWxlcyBldGMgKi9cblx0XHRcdHdoaWxlKG0uY2hhckF0KDApID09IFwiPFwiICYmIChjYyA9IG0uaW5kZXhPZihcIj5cIikpID4gLTEpIG0gPSBtLnNsaWNlKGNjKzEpO1xuXHRcdFx0Zm9yKHZhciBtaWR4ID0gMDsgbWlkeCA8IG1lcmdlcy5sZW5ndGg7ICsrbWlkeCkge1xuXHRcdFx0XHR2YXIgX21lcmdlLyo6UmFuZ2UqLyA9IG1lcmdlc1ttaWR4XTtcblx0XHRcdFx0aWYoX21lcmdlLnMuYyA9PSBDICYmIF9tZXJnZS5zLnIgPCBSICYmIFIgPD0gX21lcmdlLmUucikgeyBDID0gX21lcmdlLmUuYyArIDE7IG1pZHggPSAtMTsgfVxuXHRcdFx0fVxuXHRcdFx0dmFyIHRhZyA9IHBhcnNleG1sdGFnKGNlbGwuc2xpY2UoMCwgY2VsbC5pbmRleE9mKFwiPlwiKSkpO1xuXHRcdFx0Q1MgPSB0YWcuY29sc3BhbiA/ICt0YWcuY29sc3BhbiA6IDE7XG5cdFx0XHRpZigoUlMgPSArdGFnLnJvd3NwYW4pPjEgfHwgQ1M+MSkgbWVyZ2VzLnB1c2goe3M6e3I6UixjOkN9LGU6e3I6UiArIChSU3x8MSkgLSAxLCBjOkMgKyBDUyAtIDF9fSk7XG5cdFx0XHR2YXIgX3QvKjpzdHJpbmcqLyA9IHRhZy50IHx8IHRhZ1tcImRhdGEtdFwiXSB8fCBcIlwiO1xuXHRcdFx0LyogVE9ETzogZ2VuZXJhdGUgc3R1YiBjZWxscyAqL1xuXHRcdFx0aWYoIW0ubGVuZ3RoKSB7IEMgKz0gQ1M7IGNvbnRpbnVlOyB9XG5cdFx0XHRtID0gaHRtbGRlY29kZShtKTtcblx0XHRcdGlmKHJhbmdlLnMuciA+IFIpIHJhbmdlLnMuciA9IFI7IGlmKHJhbmdlLmUuciA8IFIpIHJhbmdlLmUuciA9IFI7XG5cdFx0XHRpZihyYW5nZS5zLmMgPiBDKSByYW5nZS5zLmMgPSBDOyBpZihyYW5nZS5lLmMgPCBDKSByYW5nZS5lLmMgPSBDO1xuXHRcdFx0aWYoIW0ubGVuZ3RoKSB7IEMgKz0gQ1M7IGNvbnRpbnVlOyB9XG5cdFx0XHR2YXIgby8qOkNlbGwqLyA9IHt0OidzJywgdjptfTtcblx0XHRcdGlmKG9wdHMucmF3IHx8ICFtLnRyaW0oKS5sZW5ndGggfHwgX3QgPT0gJ3MnKXt9XG5cdFx0XHRlbHNlIGlmKG0gPT09ICdUUlVFJykgbyA9IHt0OidiJywgdjp0cnVlfTtcblx0XHRcdGVsc2UgaWYobSA9PT0gJ0ZBTFNFJykgbyA9IHt0OidiJywgdjpmYWxzZX07XG5cdFx0XHRlbHNlIGlmKCFpc05hTihmdXp6eW51bShtKSkpIG8gPSB7dDonbicsIHY6ZnV6enludW0obSl9O1xuXHRcdFx0ZWxzZSBpZighaXNOYU4oZnV6enlkYXRlKG0pLmdldERhdGUoKSkpIHtcblx0XHRcdFx0byA9ICh7dDonZCcsIHY6cGFyc2VEYXRlKG0pfS8qOmFueSovKTtcblx0XHRcdFx0aWYoIW9wdHMuY2VsbERhdGVzKSBvID0gKHt0OiduJywgdjpkYXRlbnVtKG8udil9Lyo6YW55Ki8pO1xuXHRcdFx0XHRvLnogPSBvcHRzLmRhdGVORiB8fCB0YWJsZV9mbXRbMTRdO1xuXHRcdFx0fVxuXHRcdFx0aWYob3B0cy5kZW5zZSkgeyBpZighd3NbUl0pIHdzW1JdID0gW107IHdzW1JdW0NdID0gbzsgfVxuXHRcdFx0ZWxzZSB3c1tlbmNvZGVfY2VsbCh7cjpSLCBjOkN9KV0gPSBvO1xuXHRcdFx0QyArPSBDUztcblx0XHR9XG5cdH1cblx0d3NbJyFyZWYnXSA9IGVuY29kZV9yYW5nZShyYW5nZSk7XG5cdGlmKG1lcmdlcy5sZW5ndGgpIHdzW1wiIW1lcmdlc1wiXSA9IG1lcmdlcztcblx0cmV0dXJuIHdzO1xufVxuZnVuY3Rpb24gbWFrZV9odG1sX3Jvdyh3cy8qOldvcmtzaGVldCovLCByLyo6UmFuZ2UqLywgUi8qOm51bWJlciovLCBvLyo6U2hlZXQySFRNTE9wdHMqLykvKjpzdHJpbmcqLyB7XG5cdHZhciBNLyo6QXJyYXk8UmFuZ2U+Ki8gPSAod3NbJyFtZXJnZXMnXSB8fFtdKTtcblx0dmFyIG9vLyo6QXJyYXk8c3RyaW5nPiovID0gW107XG5cdGZvcih2YXIgQyA9IHIucy5jOyBDIDw9IHIuZS5jOyArK0MpIHtcblx0XHR2YXIgUlMgPSAwLCBDUyA9IDA7XG5cdFx0Zm9yKHZhciBqID0gMDsgaiA8IE0ubGVuZ3RoOyArK2opIHtcblx0XHRcdGlmKE1bal0ucy5yID4gUiB8fCBNW2pdLnMuYyA+IEMpIGNvbnRpbnVlO1xuXHRcdFx0aWYoTVtqXS5lLnIgPCBSIHx8IE1bal0uZS5jIDwgQykgY29udGludWU7XG5cdFx0XHRpZihNW2pdLnMuciA8IFIgfHwgTVtqXS5zLmMgPCBDKSB7IFJTID0gLTE7IGJyZWFrOyB9XG5cdFx0XHRSUyA9IE1bal0uZS5yIC0gTVtqXS5zLnIgKyAxOyBDUyA9IE1bal0uZS5jIC0gTVtqXS5zLmMgKyAxOyBicmVhaztcblx0XHR9XG5cdFx0aWYoUlMgPCAwKSBjb250aW51ZTtcblx0XHR2YXIgY29vcmQgPSBlbmNvZGVfY2VsbCh7cjpSLGM6Q30pO1xuXHRcdHZhciBjZWxsID0gby5kZW5zZSA/ICh3c1tSXXx8W10pW0NdIDogd3NbY29vcmRdO1xuXHRcdC8qIFRPRE86IGh0bWwgZW50aXRpZXMgKi9cblx0XHR2YXIgdyA9IChjZWxsICYmIGNlbGwudiAhPSBudWxsKSAmJiAoY2VsbC5oIHx8IGVzY2FwZWh0bWwoY2VsbC53IHx8IChmb3JtYXRfY2VsbChjZWxsKSwgY2VsbC53KSB8fCBcIlwiKSkgfHwgXCJcIjtcblx0XHR2YXIgc3AgPSAoe30vKjphbnkqLyk7XG5cdFx0aWYoUlMgPiAxKSBzcC5yb3dzcGFuID0gUlM7XG5cdFx0aWYoQ1MgPiAxKSBzcC5jb2xzcGFuID0gQ1M7XG5cdFx0aWYoby5lZGl0YWJsZSkgdyA9ICc8c3BhbiBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCI+JyArIHcgKyAnPC9zcGFuPic7XG5cdFx0ZWxzZSBpZihjZWxsKSB7XG5cdFx0XHRzcFtcImRhdGEtdFwiXSA9IGNlbGwgJiYgY2VsbC50IHx8ICd6Jztcblx0XHRcdGlmKGNlbGwudiAhPSBudWxsKSBzcFtcImRhdGEtdlwiXSA9IGNlbGwudjtcblx0XHRcdGlmKGNlbGwueiAhPSBudWxsKSBzcFtcImRhdGEtelwiXSA9IGNlbGwuejtcblx0XHRcdGlmKGNlbGwubCAmJiAoY2VsbC5sLlRhcmdldCB8fCBcIiNcIikuY2hhckF0KDApICE9IFwiI1wiKSB3ID0gJzxhIGhyZWY9XCInICsgY2VsbC5sLlRhcmdldCArJ1wiPicgKyB3ICsgJzwvYT4nO1xuXHRcdH1cblx0XHRzcC5pZCA9IChvLmlkIHx8IFwic2pzXCIpICsgXCItXCIgKyBjb29yZDtcblx0XHRvby5wdXNoKHdyaXRleHRhZygndGQnLCB3LCBzcCkpO1xuXHR9XG5cdHZhciBwcmVhbWJsZSA9IFwiPHRyPlwiO1xuXHRyZXR1cm4gcHJlYW1ibGUgKyBvby5qb2luKFwiXCIpICsgXCI8L3RyPlwiO1xufVxuXG52YXIgSFRNTF9CRUdJTiA9ICc8aHRtbD48aGVhZD48bWV0YSBjaGFyc2V0PVwidXRmLThcIi8+PHRpdGxlPlNoZWV0SlMgVGFibGUgRXhwb3J0PC90aXRsZT48L2hlYWQ+PGJvZHk+JztcbnZhciBIVE1MX0VORCA9ICc8L2JvZHk+PC9odG1sPic7XG5cbmZ1bmN0aW9uIGh0bWxfdG9fd29ya2Jvb2soc3RyLyo6c3RyaW5nKi8sIG9wdHMpLyo6V29ya2Jvb2sqLyB7XG5cdHZhciBtdGNoID0gc3RyLm1hdGNoKC88dGFibGVbXFxzXFxTXSo/PltcXHNcXFNdKj88XFwvdGFibGU+L2dpKTtcblx0aWYoIW10Y2ggfHwgbXRjaC5sZW5ndGggPT0gMCkgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBIVE1MOiBjb3VsZCBub3QgZmluZCA8dGFibGU+XCIpO1xuXHRpZihtdGNoLmxlbmd0aCA9PSAxKSByZXR1cm4gc2hlZXRfdG9fd29ya2Jvb2soaHRtbF90b19zaGVldChtdGNoWzBdLCBvcHRzKSwgb3B0cyk7XG5cdHZhciB3YiA9IGJvb2tfbmV3KCk7XG5cdG10Y2guZm9yRWFjaChmdW5jdGlvbihzLCBpZHgpIHsgYm9va19hcHBlbmRfc2hlZXQod2IsIGh0bWxfdG9fc2hlZXQocywgb3B0cyksIFwiU2hlZXRcIiArIChpZHgrMSkpOyB9KTtcblx0cmV0dXJuIHdiO1xufVxuXG5mdW5jdGlvbiBtYWtlX2h0bWxfcHJlYW1ibGUod3MvKjpXb3Jrc2hlZXQqLywgUi8qOlJhbmdlKi8sIG8vKjpTaGVldDJIVE1MT3B0cyovKS8qOnN0cmluZyovIHtcblx0dmFyIG91dC8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRyZXR1cm4gb3V0LmpvaW4oXCJcIikgKyAnPHRhYmxlJyArIChvICYmIG8uaWQgPyAnIGlkPVwiJyArIG8uaWQgKyAnXCInIDogXCJcIikgKyAnPic7XG59XG5cbmZ1bmN0aW9uIHNoZWV0X3RvX2h0bWwod3MvKjpXb3Jrc2hlZXQqLywgb3B0cy8qOj9TaGVldDJIVE1MT3B0cyovLyosIHdiOj9Xb3JrYm9vayovKS8qOnN0cmluZyovIHtcblx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHR2YXIgaGVhZGVyID0gby5oZWFkZXIgIT0gbnVsbCA/IG8uaGVhZGVyIDogSFRNTF9CRUdJTjtcblx0dmFyIGZvb3RlciA9IG8uZm9vdGVyICE9IG51bGwgPyBvLmZvb3RlciA6IEhUTUxfRU5EO1xuXHR2YXIgb3V0Lyo6QXJyYXk8c3RyaW5nPiovID0gW2hlYWRlcl07XG5cdHZhciByID0gZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHRvLmRlbnNlID0gQXJyYXkuaXNBcnJheSh3cyk7XG5cdG91dC5wdXNoKG1ha2VfaHRtbF9wcmVhbWJsZSh3cywgciwgbykpO1xuXHRmb3IodmFyIFIgPSByLnMucjsgUiA8PSByLmUucjsgKytSKSBvdXQucHVzaChtYWtlX2h0bWxfcm93KHdzLCByLCBSLCBvKSk7XG5cdG91dC5wdXNoKFwiPC90YWJsZT5cIiArIGZvb3Rlcik7XG5cdHJldHVybiBvdXQuam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gc2hlZXRfYWRkX2RvbSh3cy8qOldvcmtzaGVldCovLCB0YWJsZS8qOkhUTUxFbGVtZW50Ki8sIF9vcHRzLyo6P2FueSovKS8qOldvcmtzaGVldCovIHtcblx0dmFyIG9wdHMgPSBfb3B0cyB8fCB7fTtcblx0aWYoREVOU0UgIT0gbnVsbCkgb3B0cy5kZW5zZSA9IERFTlNFO1xuXHR2YXIgb3JfUiA9IDAsIG9yX0MgPSAwO1xuXHRpZihvcHRzLm9yaWdpbiAhPSBudWxsKSB7XG5cdFx0aWYodHlwZW9mIG9wdHMub3JpZ2luID09ICdudW1iZXInKSBvcl9SID0gb3B0cy5vcmlnaW47XG5cdFx0ZWxzZSB7XG5cdFx0XHR2YXIgX29yaWdpbi8qOkNlbGxBZGRyZXNzKi8gPSB0eXBlb2Ygb3B0cy5vcmlnaW4gPT0gXCJzdHJpbmdcIiA/IGRlY29kZV9jZWxsKG9wdHMub3JpZ2luKSA6IG9wdHMub3JpZ2luO1xuXHRcdFx0b3JfUiA9IF9vcmlnaW4ucjsgb3JfQyA9IF9vcmlnaW4uYztcblx0XHR9XG5cdH1cblxuXHR2YXIgcm93cy8qOkhUTUxDb2xsZWN0aW9uPEhUTUxUYWJsZVJvd0VsZW1lbnQ+Ki8gPSB0YWJsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgndHInKTtcblx0dmFyIHNoZWV0Um93cyA9IE1hdGgubWluKG9wdHMuc2hlZXRSb3dzfHwxMDAwMDAwMCwgcm93cy5sZW5ndGgpO1xuXHR2YXIgcmFuZ2UvKjpSYW5nZSovID0ge3M6e3I6MCxjOjB9LGU6e3I6b3JfUixjOm9yX0N9fTtcblx0aWYod3NbXCIhcmVmXCJdKSB7XG5cdFx0dmFyIF9yYW5nZS8qOlJhbmdlKi8gPSBkZWNvZGVfcmFuZ2Uod3NbXCIhcmVmXCJdKTtcblx0XHRyYW5nZS5zLnIgPSBNYXRoLm1pbihyYW5nZS5zLnIsIF9yYW5nZS5zLnIpO1xuXHRcdHJhbmdlLnMuYyA9IE1hdGgubWluKHJhbmdlLnMuYywgX3JhbmdlLnMuYyk7XG5cdFx0cmFuZ2UuZS5yID0gTWF0aC5tYXgocmFuZ2UuZS5yLCBfcmFuZ2UuZS5yKTtcblx0XHRyYW5nZS5lLmMgPSBNYXRoLm1heChyYW5nZS5lLmMsIF9yYW5nZS5lLmMpO1xuXHRcdGlmKG9yX1IgPT0gLTEpIHJhbmdlLmUuciA9IG9yX1IgPSBfcmFuZ2UuZS5yICsgMTtcblx0fVxuXHR2YXIgbWVyZ2VzLyo6QXJyYXk8UmFuZ2U+Ki8gPSBbXSwgbWlkeCA9IDA7XG5cdHZhciByb3dpbmZvLyo6QXJyYXk8Um93SW5mbz4qLyA9IHdzW1wiIXJvd3NcIl0gfHwgKHdzW1wiIXJvd3NcIl0gPSBbXSk7XG5cdHZhciBfUiA9IDAsIFIgPSAwLCBfQyA9IDAsIEMgPSAwLCBSUyA9IDAsIENTID0gMDtcblx0aWYoIXdzW1wiIWNvbHNcIl0pIHdzWychY29scyddID0gW107XG5cdGZvcig7IF9SIDwgcm93cy5sZW5ndGggJiYgUiA8IHNoZWV0Um93czsgKytfUikge1xuXHRcdHZhciByb3cvKjpIVE1MVGFibGVSb3dFbGVtZW50Ki8gPSByb3dzW19SXTtcblx0XHRpZiAoaXNfZG9tX2VsZW1lbnRfaGlkZGVuKHJvdykpIHtcblx0XHRcdGlmIChvcHRzLmRpc3BsYXkpIGNvbnRpbnVlO1xuXHRcdFx0cm93aW5mb1tSXSA9IHtoaWRkZW46IHRydWV9O1xuXHRcdH1cblx0XHR2YXIgZWx0cy8qOkhUTUxDb2xsZWN0aW9uPEhUTUxUYWJsZUNlbGxFbGVtZW50PiovID0gKHJvdy5jaGlsZHJlbi8qOmFueSovKTtcblx0XHRmb3IoX0MgPSBDID0gMDsgX0MgPCBlbHRzLmxlbmd0aDsgKytfQykge1xuXHRcdFx0dmFyIGVsdC8qOkhUTUxUYWJsZUNlbGxFbGVtZW50Ki8gPSBlbHRzW19DXTtcblx0XHRcdGlmIChvcHRzLmRpc3BsYXkgJiYgaXNfZG9tX2VsZW1lbnRfaGlkZGVuKGVsdCkpIGNvbnRpbnVlO1xuXHRcdFx0dmFyIHYvKjo/c3RyaW5nKi8gPSBlbHQuaGFzQXR0cmlidXRlKCdkYXRhLXYnKSA/IGVsdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdicpIDogZWx0Lmhhc0F0dHJpYnV0ZSgndicpID8gZWx0LmdldEF0dHJpYnV0ZSgndicpIDogaHRtbGRlY29kZShlbHQuaW5uZXJIVE1MKTtcblx0XHRcdHZhciB6Lyo6P3N0cmluZyovID0gZWx0LmdldEF0dHJpYnV0ZSgnZGF0YS16JykgfHwgZWx0LmdldEF0dHJpYnV0ZSgneicpO1xuXHRcdFx0Zm9yKG1pZHggPSAwOyBtaWR4IDwgbWVyZ2VzLmxlbmd0aDsgKyttaWR4KSB7XG5cdFx0XHRcdHZhciBtLyo6UmFuZ2UqLyA9IG1lcmdlc1ttaWR4XTtcblx0XHRcdFx0aWYobS5zLmMgPT0gQyArIG9yX0MgJiYgbS5zLnIgPCBSICsgb3JfUiAmJiBSICsgb3JfUiA8PSBtLmUucikgeyBDID0gbS5lLmMrMSAtIG9yX0M7IG1pZHggPSAtMTsgfVxuXHRcdFx0fVxuXHRcdFx0LyogVE9ETzogZmlndXJlIG91dCBob3cgdG8gZXh0cmFjdCBub25zdGFuZGFyZCBtc28tIHN0eWxlICovXG5cdFx0XHRDUyA9ICtlbHQuZ2V0QXR0cmlidXRlKFwiY29sc3BhblwiKSB8fCAxO1xuXHRcdFx0aWYoICgoUlMgPSAoK2VsdC5nZXRBdHRyaWJ1dGUoXCJyb3dzcGFuXCIpIHx8IDEpKSk+MSB8fCBDUz4xKSBtZXJnZXMucHVzaCh7czp7cjpSICsgb3JfUixjOkMgKyBvcl9DfSxlOntyOlIgKyBvcl9SICsgKFJTfHwxKSAtIDEsIGM6QyArIG9yX0MgKyAoQ1N8fDEpIC0gMX19KTtcblx0XHRcdHZhciBvLyo6Q2VsbCovID0ge3Q6J3MnLCB2OnZ9O1xuXHRcdFx0dmFyIF90Lyo6c3RyaW5nKi8gPSBlbHQuZ2V0QXR0cmlidXRlKFwiZGF0YS10XCIpIHx8IGVsdC5nZXRBdHRyaWJ1dGUoXCJ0XCIpIHx8IFwiXCI7XG5cdFx0XHRpZih2ICE9IG51bGwpIHtcblx0XHRcdFx0aWYodi5sZW5ndGggPT0gMCkgby50ID0gX3QgfHwgJ3onO1xuXHRcdFx0XHRlbHNlIGlmKG9wdHMucmF3IHx8IHYudHJpbSgpLmxlbmd0aCA9PSAwIHx8IF90ID09IFwic1wiKXt9XG5cdFx0XHRcdGVsc2UgaWYodiA9PT0gJ1RSVUUnKSBvID0ge3Q6J2InLCB2OnRydWV9O1xuXHRcdFx0XHRlbHNlIGlmKHYgPT09ICdGQUxTRScpIG8gPSB7dDonYicsIHY6ZmFsc2V9O1xuXHRcdFx0XHRlbHNlIGlmKCFpc05hTihmdXp6eW51bSh2KSkpIG8gPSB7dDonbicsIHY6ZnV6enludW0odil9O1xuXHRcdFx0XHRlbHNlIGlmKCFpc05hTihmdXp6eWRhdGUodikuZ2V0RGF0ZSgpKSkge1xuXHRcdFx0XHRcdG8gPSAoe3Q6J2QnLCB2OnBhcnNlRGF0ZSh2KX0vKjphbnkqLyk7XG5cdFx0XHRcdFx0aWYoIW9wdHMuY2VsbERhdGVzKSBvID0gKHt0OiduJywgdjpkYXRlbnVtKG8udil9Lyo6YW55Ki8pO1xuXHRcdFx0XHRcdG8ueiA9IG9wdHMuZGF0ZU5GIHx8IHRhYmxlX2ZtdFsxNF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmKG8ueiA9PT0gdW5kZWZpbmVkICYmIHogIT0gbnVsbCkgby56ID0gejtcblx0XHRcdC8qIFRoZSBmaXJzdCBsaW5rIGlzIHVzZWQuICBMaW5rcyBhcmUgYXNzdW1lZCB0byBiZSBmdWxseSBzcGVjaWZpZWQuXG5cdFx0XHQgKiBUT0RPOiBUaGUgcmlnaHQgd2F5IHRvIHByb2Nlc3MgcmVsYXRpdmUgbGlua3MgaXMgdG8gbWFrZSBhIG5ldyA8YT4gKi9cblx0XHRcdHZhciBsID0gXCJcIiwgQWVsdHMgPSBlbHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJBXCIpO1xuXHRcdFx0aWYoQWVsdHMgJiYgQWVsdHMubGVuZ3RoKSBmb3IodmFyIEFlbHRpID0gMDsgQWVsdGkgPCBBZWx0cy5sZW5ndGg7ICsrQWVsdGkpXHRpZihBZWx0c1tBZWx0aV0uaGFzQXR0cmlidXRlKFwiaHJlZlwiKSkge1xuXHRcdFx0XHRsID0gQWVsdHNbQWVsdGldLmdldEF0dHJpYnV0ZShcImhyZWZcIik7IGlmKGwuY2hhckF0KDApICE9IFwiI1wiKSBicmVhaztcblx0XHRcdH1cblx0XHRcdGlmKGwgJiYgbC5jaGFyQXQoMCkgIT0gXCIjXCIpIG8ubCA9ICh7IFRhcmdldDogbCB9KTtcblx0XHRcdGlmKG9wdHMuZGVuc2UpIHsgaWYoIXdzW1IgKyBvcl9SXSkgd3NbUiArIG9yX1JdID0gW107IHdzW1IgKyBvcl9SXVtDICsgb3JfQ10gPSBvOyB9XG5cdFx0XHRlbHNlIHdzW2VuY29kZV9jZWxsKHtjOkMgKyBvcl9DLCByOlIgKyBvcl9SfSldID0gbztcblx0XHRcdGlmKHJhbmdlLmUuYyA8IEMgKyBvcl9DKSByYW5nZS5lLmMgPSBDICsgb3JfQztcblx0XHRcdEMgKz0gQ1M7XG5cdFx0fVxuXHRcdCsrUjtcblx0fVxuXHRpZihtZXJnZXMubGVuZ3RoKSB3c1snIW1lcmdlcyddID0gKHdzW1wiIW1lcmdlc1wiXSB8fCBbXSkuY29uY2F0KG1lcmdlcyk7XG5cdHJhbmdlLmUuciA9IE1hdGgubWF4KHJhbmdlLmUuciwgUiAtIDEgKyBvcl9SKTtcblx0d3NbJyFyZWYnXSA9IGVuY29kZV9yYW5nZShyYW5nZSk7XG5cdGlmKFIgPj0gc2hlZXRSb3dzKSB3c1snIWZ1bGxyZWYnXSA9IGVuY29kZV9yYW5nZSgocmFuZ2UuZS5yID0gcm93cy5sZW5ndGgtX1IrUi0xICsgb3JfUixyYW5nZSkpOyAvLyBXZSBjYW4gY291bnQgdGhlIHJlYWwgbnVtYmVyIG9mIHJvd3MgdG8gcGFyc2UgYnV0IHdlIGRvbid0IHRvIGltcHJvdmUgdGhlIHBlcmZvcm1hbmNlXG5cdHJldHVybiB3cztcbn1cblxuZnVuY3Rpb24gcGFyc2VfZG9tX3RhYmxlKHRhYmxlLyo6SFRNTEVsZW1lbnQqLywgX29wdHMvKjo/YW55Ki8pLyo6V29ya3NoZWV0Ki8ge1xuXHR2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuXHR2YXIgd3MvKjpXb3Jrc2hlZXQqLyA9IG9wdHMuZGVuc2UgPyAoW10vKjphbnkqLykgOiAoe30vKjphbnkqLyk7XG5cdHJldHVybiBzaGVldF9hZGRfZG9tKHdzLCB0YWJsZSwgX29wdHMpO1xufVxuXG5mdW5jdGlvbiB0YWJsZV90b19ib29rKHRhYmxlLyo6SFRNTEVsZW1lbnQqLywgb3B0cy8qOj9hbnkqLykvKjpXb3JrYm9vayovIHtcblx0cmV0dXJuIHNoZWV0X3RvX3dvcmtib29rKHBhcnNlX2RvbV90YWJsZSh0YWJsZSwgb3B0cyksIG9wdHMpO1xufVxuXG5mdW5jdGlvbiBpc19kb21fZWxlbWVudF9oaWRkZW4oZWxlbWVudC8qOkhUTUxFbGVtZW50Ki8pLyo6Ym9vbGVhbiovIHtcblx0dmFyIGRpc3BsYXkvKjpzdHJpbmcqLyA9ICcnO1xuXHR2YXIgZ2V0X2NvbXB1dGVkX3N0eWxlLyo6P2Z1bmN0aW9uKi8gPSBnZXRfZ2V0X2NvbXB1dGVkX3N0eWxlX2Z1bmN0aW9uKGVsZW1lbnQpO1xuXHRpZihnZXRfY29tcHV0ZWRfc3R5bGUpIGRpc3BsYXkgPSBnZXRfY29tcHV0ZWRfc3R5bGUoZWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZSgnZGlzcGxheScpO1xuXHRpZighZGlzcGxheSkgZGlzcGxheSA9IGVsZW1lbnQuc3R5bGUgJiYgZWxlbWVudC5zdHlsZS5kaXNwbGF5O1xuXHRyZXR1cm4gZGlzcGxheSA9PT0gJ25vbmUnO1xufVxuXG4vKiBnbG9iYWwgZ2V0Q29tcHV0ZWRTdHlsZSAqL1xuZnVuY3Rpb24gZ2V0X2dldF9jb21wdXRlZF9zdHlsZV9mdW5jdGlvbihlbGVtZW50Lyo6SFRNTEVsZW1lbnQqLykvKjo/ZnVuY3Rpb24qLyB7XG5cdC8vIFRoZSBwcm9wZXIgZ2V0Q29tcHV0ZWRTdHlsZSBpbXBsZW1lbnRhdGlvbiBpcyB0aGUgb25lIGRlZmluZWQgaW4gdGhlIGVsZW1lbnQgd2luZG93XG5cdGlmKGVsZW1lbnQub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldyAmJiB0eXBlb2YgZWxlbWVudC5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGUgPT09ICdmdW5jdGlvbicpIHJldHVybiBlbGVtZW50Lm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuZ2V0Q29tcHV0ZWRTdHlsZTtcblx0Ly8gSWYgaXQgaXMgbm90IGF2YWlsYWJsZSwgdHJ5IHRvIGdldCBvbmUgZnJvbSB0aGUgZ2xvYmFsIG5hbWVzcGFjZVxuXHRpZih0eXBlb2YgZ2V0Q29tcHV0ZWRTdHlsZSA9PT0gJ2Z1bmN0aW9uJykgcmV0dXJuIGdldENvbXB1dGVkU3R5bGU7XG5cdHJldHVybiBudWxsO1xufVxuLyogT3BlbkRvY3VtZW50ICovXG5mdW5jdGlvbiBwYXJzZV90ZXh0X3AodGV4dC8qOnN0cmluZyovLyo6OiwgdGFnKi8pLyo6QXJyYXk8YW55PiovIHtcblx0LyogNi4xLjIgV2hpdGUgU3BhY2UgQ2hhcmFjdGVycyAqL1xuXHR2YXIgZml4ZWQgPSB0ZXh0XG5cdFx0LnJlcGxhY2UoL1tcXHRcXHJcXG5dL2csIFwiIFwiKS50cmltKCkucmVwbGFjZSgvICsvZywgXCIgXCIpXG5cdFx0LnJlcGxhY2UoLzx0ZXh0OnNcXC8+L2csXCIgXCIpXG5cdFx0LnJlcGxhY2UoLzx0ZXh0OnMgdGV4dDpjPVwiKFxcZCspXCJcXC8+L2csIGZ1bmN0aW9uKCQkLCQxKSB7IHJldHVybiBBcnJheShwYXJzZUludCgkMSwxMCkrMSkuam9pbihcIiBcIik7IH0pXG5cdFx0LnJlcGxhY2UoLzx0ZXh0OnRhYltePl0qXFwvPi9nLFwiXFx0XCIpXG5cdFx0LnJlcGxhY2UoLzx0ZXh0OmxpbmUtYnJlYWtcXC8+L2csXCJcXG5cIik7XG5cdHZhciB2ID0gdW5lc2NhcGV4bWwoZml4ZWQucmVwbGFjZSgvPFtePl0qPi9nLFwiXCIpKTtcblxuXHRyZXR1cm4gW3ZdO1xufVxuXG52YXIgbnVtYmVyX2Zvcm1hdHNfb2RzID0ge1xuXHQvKiBvZHMgbmFtZTogW3Nob3J0IHNzZiBmbXQsIGxvbmcgc3NmIGZtdF0gKi9cblx0ZGF5OiAgICAgICAgICAgW1wiZFwiLCAgIFwiZGRcIl0sXG5cdG1vbnRoOiAgICAgICAgIFtcIm1cIiwgICBcIm1tXCJdLFxuXHR5ZWFyOiAgICAgICAgICBbXCJ5XCIsICAgXCJ5eVwiXSxcblx0aG91cnM6ICAgICAgICAgW1wiaFwiLCAgIFwiaGhcIl0sXG5cdG1pbnV0ZXM6ICAgICAgIFtcIm1cIiwgICBcIm1tXCJdLFxuXHRzZWNvbmRzOiAgICAgICBbXCJzXCIsICAgXCJzc1wiXSxcblx0XCJhbS1wbVwiOiAgICAgICBbXCJBL1BcIiwgXCJBTS9QTVwiXSxcblx0XCJkYXktb2Ytd2Vla1wiOiBbXCJkZGRcIiwgXCJkZGRkXCJdLFxuXHRlcmE6ICAgICAgICAgICBbXCJlXCIsICAgXCJlZVwiXSxcblx0LyogdGhlcmUgaXMgbm8gbmF0aXZlIHJlcHJlc2VudGF0aW9uIG9mIExPIFwiUVwiIGZvcm1hdCAqL1xuXHRxdWFydGVyOiAgICAgICBbXCJcXFxcUW1cIiwgXCJtXFxcXFxcXCJ0aCBxdWFydGVyXFxcIlwiXVxufTtcblxuXG5mdW5jdGlvbiBwYXJzZV9jb250ZW50X3htbChkLyo6c3RyaW5nKi8sIF9vcHRzKS8qOldvcmtib29rKi8ge1xuXHRcdHZhciBvcHRzID0gX29wdHMgfHwge307XG5cdFx0aWYoREVOU0UgIT0gbnVsbCAmJiBvcHRzLmRlbnNlID09IG51bGwpIG9wdHMuZGVuc2UgPSBERU5TRTtcblx0XHR2YXIgc3RyID0geGxtbF9ub3JtYWxpemUoZCk7XG5cdFx0dmFyIHN0YXRlLyo6QXJyYXk8YW55PiovID0gW10sIHRtcDtcblx0XHR2YXIgdGFnLyo6OiA9IHt9Ki87XG5cdFx0dmFyIE5GdGFnID0ge25hbWU6XCJcIn0sIE5GID0gXCJcIiwgcGlkeCA9IDA7XG5cdFx0dmFyIHNoZWV0YWcvKjo6ID0ge25hbWU6XCJcIiwgJ+WQjeensCc6XCJcIn0qLztcblx0XHR2YXIgcm93dGFnLyo6OiA9IHsn6KGM5Y+3JzpcIlwifSovO1xuXHRcdHZhciBTaGVldHMgPSB7fSwgU2hlZXROYW1lcy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRcdHZhciB3cyA9IG9wdHMuZGVuc2UgPyAoW10vKjphbnkqLykgOiAoe30vKjphbnkqLyk7XG5cdFx0dmFyIFJuLCBxLyo6OiA6YW55ID0gKHt0OlwiXCIsIHY6bnVsbCwgejpudWxsLCB3OlwiXCIsYzpbXSx9OmFueSkqLztcblx0XHR2YXIgY3RhZyA9ICh7dmFsdWU6XCJcIn0vKjphbnkqLyk7XG5cdFx0dmFyIHRleHRwID0gXCJcIiwgdGV4dHBpZHggPSAwLCB0ZXh0cHRhZy8qOjogPSB7fSovO1xuXHRcdHZhciB0ZXh0UiA9IFtdO1xuXHRcdHZhciBSID0gLTEsIEMgPSAtMSwgcmFuZ2UgPSB7czoge3I6MTAwMDAwMCxjOjEwMDAwMDAwfSwgZToge3I6MCwgYzowfX07XG5cdFx0dmFyIHJvd19vbCA9IDA7XG5cdFx0dmFyIG51bWJlcl9mb3JtYXRfbWFwID0ge307XG5cdFx0dmFyIG1lcmdlcy8qOkFycmF5PFJhbmdlPiovID0gW10sIG1yYW5nZSA9IHt9LCBtUiA9IDAsIG1DID0gMDtcblx0XHR2YXIgcm93aW5mby8qOkFycmF5PFJvd0luZm8+Ki8gPSBbXSwgcm93cGVhdCA9IDEsIGNvbHBlYXQgPSAxO1xuXHRcdHZhciBhcnJheWYvKjpBcnJheTxbUmFuZ2UsIHN0cmluZ10+Ki8gPSBbXTtcblx0XHR2YXIgV0IgPSB7TmFtZXM6W119O1xuXHRcdHZhciBhdGFnID0gKHt9Lyo6YW55Ki8pO1xuXHRcdHZhciBfUmVmLyo6W3N0cmluZywgc3RyaW5nXSovID0gW1wiXCIsIFwiXCJdO1xuXHRcdHZhciBjb21tZW50cy8qOkFycmF5PENvbW1lbnQ+Ki8gPSBbXSwgY29tbWVudC8qOkNvbW1lbnQqLyA9ICh7fS8qOmFueSovKTtcblx0XHR2YXIgY3JlYXRvciA9IFwiXCIsIGNyZWF0b3JpZHggPSAwO1xuXHRcdHZhciBpc3N0dWIgPSBmYWxzZSwgaW50YWJsZSA9IGZhbHNlO1xuXHRcdHZhciBpID0gMDtcblx0XHR4bG1scmVnZXgubGFzdEluZGV4ID0gMDtcblx0XHRzdHIgPSBzdHIucmVwbGFjZSgvPCEtLShbXFxzXFxTXSo/KS0tPi9tZyxcIlwiKS5yZXBsYWNlKC88IURPQ1RZUEVbXlxcW10qXFxbW15cXF1dKlxcXT4vZ20sXCJcIik7XG5cdFx0d2hpbGUoKFJuID0geGxtbHJlZ2V4LmV4ZWMoc3RyKSkpIHN3aXRjaCgoUm5bM109Um5bM10ucmVwbGFjZSgvXy4qJC8sXCJcIikpKSB7XG5cblx0XHRcdGNhc2UgJ3RhYmxlJzogY2FzZSAn5bel5L2c6KGoJzogLy8gOS4xLjIgPHRhYmxlOnRhYmxlPlxuXHRcdFx0XHRpZihSblsxXT09PScvJykge1xuXHRcdFx0XHRcdGlmKHJhbmdlLmUuYyA+PSByYW5nZS5zLmMgJiYgcmFuZ2UuZS5yID49IHJhbmdlLnMucikgd3NbJyFyZWYnXSA9IGVuY29kZV9yYW5nZShyYW5nZSk7XG5cdFx0XHRcdFx0ZWxzZSB3c1snIXJlZiddID0gXCJBMTpBMVwiO1xuXHRcdFx0XHRcdGlmKG9wdHMuc2hlZXRSb3dzID4gMCAmJiBvcHRzLnNoZWV0Um93cyA8PSByYW5nZS5lLnIpIHtcblx0XHRcdFx0XHRcdHdzWychZnVsbHJlZiddID0gd3NbJyFyZWYnXTtcblx0XHRcdFx0XHRcdHJhbmdlLmUuciA9IG9wdHMuc2hlZXRSb3dzIC0gMTtcblx0XHRcdFx0XHRcdHdzWychcmVmJ10gPSBlbmNvZGVfcmFuZ2UocmFuZ2UpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihtZXJnZXMubGVuZ3RoKSB3c1snIW1lcmdlcyddID0gbWVyZ2VzO1xuXHRcdFx0XHRcdGlmKHJvd2luZm8ubGVuZ3RoKSB3c1tcIiFyb3dzXCJdID0gcm93aW5mbztcblx0XHRcdFx0XHRzaGVldGFnLm5hbWUgPSBzaGVldGFnWyflkI3np7AnXSB8fCBzaGVldGFnLm5hbWU7XG5cdFx0XHRcdFx0aWYodHlwZW9mIEpTT04gIT09ICd1bmRlZmluZWQnKSBKU09OLnN0cmluZ2lmeShzaGVldGFnKTtcblx0XHRcdFx0XHRTaGVldE5hbWVzLnB1c2goc2hlZXRhZy5uYW1lKTtcblx0XHRcdFx0XHRTaGVldHNbc2hlZXRhZy5uYW1lXSA9IHdzO1xuXHRcdFx0XHRcdGludGFibGUgPSBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIGlmKFJuWzBdLmNoYXJBdChSblswXS5sZW5ndGgtMikgIT09ICcvJykge1xuXHRcdFx0XHRcdHNoZWV0YWcgPSBwYXJzZXhtbHRhZyhSblswXSwgZmFsc2UpO1xuXHRcdFx0XHRcdFIgPSBDID0gLTE7XG5cdFx0XHRcdFx0cmFuZ2Uucy5yID0gcmFuZ2Uucy5jID0gMTAwMDAwMDA7IHJhbmdlLmUuciA9IHJhbmdlLmUuYyA9IDA7XG5cdFx0XHRcdFx0d3MgPSBvcHRzLmRlbnNlID8gKFtdLyo6YW55Ki8pIDogKHt9Lyo6YW55Ki8pOyBtZXJnZXMgPSBbXTtcblx0XHRcdFx0XHRyb3dpbmZvID0gW107XG5cdFx0XHRcdFx0aW50YWJsZSA9IHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3RhYmxlLXJvdy1ncm91cCc6IC8vIDkuMS45IDx0YWJsZTp0YWJsZS1yb3ctZ3JvdXA+XG5cdFx0XHRcdGlmKFJuWzFdID09PSBcIi9cIikgLS1yb3dfb2w7IGVsc2UgKytyb3dfb2w7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndGFibGUtcm93JzogY2FzZSAn6KGMJzogLy8gOS4xLjMgPHRhYmxlOnRhYmxlLXJvdz5cblx0XHRcdFx0aWYoUm5bMV0gPT09ICcvJykgeyBSKz1yb3dwZWF0OyByb3dwZWF0ID0gMTsgYnJlYWs7IH1cblx0XHRcdFx0cm93dGFnID0gcGFyc2V4bWx0YWcoUm5bMF0sIGZhbHNlKTtcblx0XHRcdFx0aWYocm93dGFnWyfooYzlj7cnXSkgUiA9IHJvd3RhZ1sn6KGM5Y+3J10gLSAxOyBlbHNlIGlmKFIgPT0gLTEpIFIgPSAwO1xuXHRcdFx0XHRyb3dwZWF0ID0gK3Jvd3RhZ1snbnVtYmVyLXJvd3MtcmVwZWF0ZWQnXSB8fCAxO1xuXHRcdFx0XHQvKiBUT0RPOiByZW1vdmUgbWFnaWMgKi9cblx0XHRcdFx0aWYocm93cGVhdCA8IDEwKSBmb3IoaSA9IDA7IGkgPCByb3dwZWF0OyArK2kpIGlmKHJvd19vbCA+IDApIHJvd2luZm9bUiArIGldID0ge2xldmVsOiByb3dfb2x9O1xuXHRcdFx0XHRDID0gLTE7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnY292ZXJlZC10YWJsZS1jZWxsJzogLy8gOS4xLjUgPHRhYmxlOmNvdmVyZWQtdGFibGUtY2VsbD5cblx0XHRcdFx0aWYoUm5bMV0gIT09ICcvJykgKytDO1xuXHRcdFx0XHRpZihvcHRzLnNoZWV0U3R1YnMpIHtcblx0XHRcdFx0XHRpZihvcHRzLmRlbnNlKSB7IGlmKCF3c1tSXSkgd3NbUl0gPSBbXTsgd3NbUl1bQ10gPSB7dDoneid9OyB9XG5cdFx0XHRcdFx0ZWxzZSB3c1tlbmNvZGVfY2VsbCh7cjpSLGM6Q30pXSA9IHt0Oid6J307XG5cdFx0XHRcdH1cblx0XHRcdFx0dGV4dHAgPSBcIlwiOyB0ZXh0UiA9IFtdO1xuXHRcdFx0XHRicmVhazsgLyogc3R1YiAqL1xuXHRcdFx0Y2FzZSAndGFibGUtY2VsbCc6IGNhc2UgJ+aVsOaNric6XG5cdFx0XHRcdGlmKFJuWzBdLmNoYXJBdChSblswXS5sZW5ndGgtMikgPT09ICcvJykge1xuXHRcdFx0XHRcdCsrQztcblx0XHRcdFx0XHRjdGFnID0gcGFyc2V4bWx0YWcoUm5bMF0sIGZhbHNlKTtcblx0XHRcdFx0XHRjb2xwZWF0ID0gcGFyc2VJbnQoY3RhZ1snbnVtYmVyLWNvbHVtbnMtcmVwZWF0ZWQnXXx8XCIxXCIsIDEwKTtcblx0XHRcdFx0XHRxID0gKHt0Oid6JywgdjpudWxsLyo6OiAsIHo6bnVsbCwgdzpcIlwiLGM6W10qL30vKjphbnkqLyk7XG5cdFx0XHRcdFx0aWYoY3RhZy5mb3JtdWxhICYmIG9wdHMuY2VsbEZvcm11bGEgIT0gZmFsc2UpIHEuZiA9IG9kc190b19jc2ZfZm9ybXVsYSh1bmVzY2FwZXhtbChjdGFnLmZvcm11bGEpKTtcblx0XHRcdFx0XHRpZigoY3RhZ1sn5pWw5o2u57G75Z6LJ10gfHwgY3RhZ1sndmFsdWUtdHlwZSddKSA9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRcdFx0XHRxLnQgPSBcInNcIjsgcS52ID0gdW5lc2NhcGV4bWwoY3RhZ1snc3RyaW5nLXZhbHVlJ10gfHwgXCJcIik7XG5cdFx0XHRcdFx0XHRpZihvcHRzLmRlbnNlKSB7XG5cdFx0XHRcdFx0XHRcdGlmKCF3c1tSXSkgd3NbUl0gPSBbXTtcblx0XHRcdFx0XHRcdFx0d3NbUl1bQ10gPSBxO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0d3NbZW5jb2RlX2NlbGwoe3I6UixjOkN9KV0gPSBxO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRDKz0gY29scGVhdC0xO1xuXHRcdFx0XHR9IGVsc2UgaWYoUm5bMV0hPT0nLycpIHtcblx0XHRcdFx0XHQrK0M7XG5cdFx0XHRcdFx0dGV4dHAgPSBcIlwiOyB0ZXh0cGlkeCA9IDA7IHRleHRSID0gW107XG5cdFx0XHRcdFx0Y29scGVhdCA9IDE7XG5cdFx0XHRcdFx0dmFyIHJwdFIgPSByb3dwZWF0ID8gUiArIHJvd3BlYXQgLSAxIDogUjtcblx0XHRcdFx0XHRpZihDID4gcmFuZ2UuZS5jKSByYW5nZS5lLmMgPSBDO1xuXHRcdFx0XHRcdGlmKEMgPCByYW5nZS5zLmMpIHJhbmdlLnMuYyA9IEM7XG5cdFx0XHRcdFx0aWYoUiA8IHJhbmdlLnMucikgcmFuZ2Uucy5yID0gUjtcblx0XHRcdFx0XHRpZihycHRSID4gcmFuZ2UuZS5yKSByYW5nZS5lLnIgPSBycHRSO1xuXHRcdFx0XHRcdGN0YWcgPSBwYXJzZXhtbHRhZyhSblswXSwgZmFsc2UpO1xuXHRcdFx0XHRcdGNvbW1lbnRzID0gW107IGNvbW1lbnQgPSAoe30vKjphbnkqLyk7XG5cdFx0XHRcdFx0cSA9ICh7dDpjdGFnWyfmlbDmja7nsbvlnosnXSB8fCBjdGFnWyd2YWx1ZS10eXBlJ10sIHY6bnVsbC8qOjogLCB6Om51bGwsIHc6XCJcIixjOltdKi99Lyo6YW55Ki8pO1xuXHRcdFx0XHRcdGlmKG9wdHMuY2VsbEZvcm11bGEpIHtcblx0XHRcdFx0XHRcdGlmKGN0YWcuZm9ybXVsYSkgY3RhZy5mb3JtdWxhID0gdW5lc2NhcGV4bWwoY3RhZy5mb3JtdWxhKTtcblx0XHRcdFx0XHRcdGlmKGN0YWdbJ251bWJlci1tYXRyaXgtY29sdW1ucy1zcGFubmVkJ10gJiYgY3RhZ1snbnVtYmVyLW1hdHJpeC1yb3dzLXNwYW5uZWQnXSkge1xuXHRcdFx0XHRcdFx0XHRtUiA9IHBhcnNlSW50KGN0YWdbJ251bWJlci1tYXRyaXgtcm93cy1zcGFubmVkJ10sMTApIHx8IDA7XG5cdFx0XHRcdFx0XHRcdG1DID0gcGFyc2VJbnQoY3RhZ1snbnVtYmVyLW1hdHJpeC1jb2x1bW5zLXNwYW5uZWQnXSwxMCkgfHwgMDtcblx0XHRcdFx0XHRcdFx0bXJhbmdlID0ge3M6IHtyOlIsYzpDfSwgZTp7cjpSICsgbVItMSxjOkMgKyBtQy0xfX07XG5cdFx0XHRcdFx0XHRcdHEuRiA9IGVuY29kZV9yYW5nZShtcmFuZ2UpO1xuXHRcdFx0XHRcdFx0XHRhcnJheWYucHVzaChbbXJhbmdlLCBxLkZdKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmKGN0YWcuZm9ybXVsYSkgcS5mID0gb2RzX3RvX2NzZl9mb3JtdWxhKGN0YWcuZm9ybXVsYSk7XG5cdFx0XHRcdFx0XHRlbHNlIGZvcihpID0gMDsgaSA8IGFycmF5Zi5sZW5ndGg7ICsraSlcblx0XHRcdFx0XHRcdFx0aWYoUiA+PSBhcnJheWZbaV1bMF0ucy5yICYmIFIgPD0gYXJyYXlmW2ldWzBdLmUucilcblx0XHRcdFx0XHRcdFx0XHRpZihDID49IGFycmF5ZltpXVswXS5zLmMgJiYgQyA8PSBhcnJheWZbaV1bMF0uZS5jKVxuXHRcdFx0XHRcdFx0XHRcdFx0cS5GID0gYXJyYXlmW2ldWzFdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihjdGFnWydudW1iZXItY29sdW1ucy1zcGFubmVkJ10gfHwgY3RhZ1snbnVtYmVyLXJvd3Mtc3Bhbm5lZCddKSB7XG5cdFx0XHRcdFx0XHRtUiA9IHBhcnNlSW50KGN0YWdbJ251bWJlci1yb3dzLXNwYW5uZWQnXSwxMCkgfHwgMDtcblx0XHRcdFx0XHRcdG1DID0gcGFyc2VJbnQoY3RhZ1snbnVtYmVyLWNvbHVtbnMtc3Bhbm5lZCddLDEwKSB8fCAwO1xuXHRcdFx0XHRcdFx0bXJhbmdlID0ge3M6IHtyOlIsYzpDfSwgZTp7cjpSICsgbVItMSxjOkMgKyBtQy0xfX07XG5cdFx0XHRcdFx0XHRtZXJnZXMucHVzaChtcmFuZ2UpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qIDE5LjY3NS4yIHRhYmxlOm51bWJlci1jb2x1bW5zLXJlcGVhdGVkICovXG5cdFx0XHRcdFx0aWYoY3RhZ1snbnVtYmVyLWNvbHVtbnMtcmVwZWF0ZWQnXSkgY29scGVhdCA9IHBhcnNlSW50KGN0YWdbJ251bWJlci1jb2x1bW5zLXJlcGVhdGVkJ10sIDEwKTtcblxuXHRcdFx0XHRcdC8qIDE5LjM4NSBvZmZpY2U6dmFsdWUtdHlwZSAqL1xuXHRcdFx0XHRcdHN3aXRjaChxLnQpIHtcblx0XHRcdFx0XHRcdGNhc2UgJ2Jvb2xlYW4nOiBxLnQgPSAnYic7IHEudiA9IHBhcnNleG1sYm9vbChjdGFnWydib29sZWFuLXZhbHVlJ10pOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ2Zsb2F0JzogcS50ID0gJ24nOyBxLnYgPSBwYXJzZUZsb2F0KGN0YWcudmFsdWUpOyBicmVhaztcblx0XHRcdFx0XHRcdGNhc2UgJ3BlcmNlbnRhZ2UnOiBxLnQgPSAnbic7IHEudiA9IHBhcnNlRmxvYXQoY3RhZy52YWx1ZSk7IGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnY3VycmVuY3knOiBxLnQgPSAnbic7IHEudiA9IHBhcnNlRmxvYXQoY3RhZy52YWx1ZSk7IGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAnZGF0ZSc6IHEudCA9ICdkJzsgcS52ID0gcGFyc2VEYXRlKGN0YWdbJ2RhdGUtdmFsdWUnXSk7XG5cdFx0XHRcdFx0XHRcdGlmKCFvcHRzLmNlbGxEYXRlcykgeyBxLnQgPSAnbic7IHEudiA9IGRhdGVudW0ocS52KTsgfVxuXHRcdFx0XHRcdFx0XHRxLnogPSAnbS9kL3l5JzsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICd0aW1lJzogcS50ID0gJ24nOyBxLnYgPSBwYXJzZV9pc29kdXIoY3RhZ1sndGltZS12YWx1ZSddKS84NjQwMDtcblx0XHRcdFx0XHRcdFx0aWYob3B0cy5jZWxsRGF0ZXMpIHsgcS50ID0gJ2QnOyBxLnYgPSBudW1kYXRlKHEudik7IH1cblx0XHRcdFx0XHRcdFx0cS56ID0gJ0hIOk1NOlNTJzsgYnJlYWs7XG5cdFx0XHRcdFx0XHRjYXNlICdudW1iZXInOiBxLnQgPSAnbic7IHEudiA9IHBhcnNlRmxvYXQoY3RhZ1sn5pWw5o2u5pWw5YC8J10pOyBicmVhaztcblx0XHRcdFx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdFx0XHRcdGlmKHEudCA9PT0gJ3N0cmluZycgfHwgcS50ID09PSAndGV4dCcgfHwgIXEudCkge1xuXHRcdFx0XHRcdFx0XHRcdHEudCA9ICdzJztcblx0XHRcdFx0XHRcdFx0XHRpZihjdGFnWydzdHJpbmctdmFsdWUnXSAhPSBudWxsKSB7IHRleHRwID0gdW5lc2NhcGV4bWwoY3RhZ1snc3RyaW5nLXZhbHVlJ10pOyB0ZXh0UiA9IFtdOyB9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIHZhbHVlIHR5cGUgJyArIHEudCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlzc3R1YiA9IGZhbHNlO1xuXHRcdFx0XHRcdGlmKHEudCA9PT0gJ3MnKSB7XG5cdFx0XHRcdFx0XHRxLnYgPSB0ZXh0cCB8fCAnJztcblx0XHRcdFx0XHRcdGlmKHRleHRSLmxlbmd0aCkgcS5SID0gdGV4dFI7XG5cdFx0XHRcdFx0XHRpc3N0dWIgPSB0ZXh0cGlkeCA9PSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZihhdGFnLlRhcmdldCkgcS5sID0gYXRhZztcblx0XHRcdFx0XHRpZihjb21tZW50cy5sZW5ndGggPiAwKSB7IHEuYyA9IGNvbW1lbnRzOyBjb21tZW50cyA9IFtdOyB9XG5cdFx0XHRcdFx0aWYodGV4dHAgJiYgb3B0cy5jZWxsVGV4dCAhPT0gZmFsc2UpIHEudyA9IHRleHRwO1xuXHRcdFx0XHRcdGlmKGlzc3R1YikgeyBxLnQgPSBcInpcIjsgZGVsZXRlIHEudjsgfVxuXHRcdFx0XHRcdGlmKCFpc3N0dWIgfHwgb3B0cy5zaGVldFN0dWJzKSB7XG5cdFx0XHRcdFx0XHRpZighKG9wdHMuc2hlZXRSb3dzICYmIG9wdHMuc2hlZXRSb3dzIDw9IFIpKSB7XG5cdFx0XHRcdFx0XHRcdGZvcih2YXIgcnB0ID0gMDsgcnB0IDwgcm93cGVhdDsgKytycHQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb2xwZWF0ID0gcGFyc2VJbnQoY3RhZ1snbnVtYmVyLWNvbHVtbnMtcmVwZWF0ZWQnXXx8XCIxXCIsIDEwKTtcblx0XHRcdFx0XHRcdFx0XHRpZihvcHRzLmRlbnNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZighd3NbUiArIHJwdF0pIHdzW1IgKyBycHRdID0gW107XG5cdFx0XHRcdFx0XHRcdFx0XHR3c1tSICsgcnB0XVtDXSA9IHJwdCA9PSAwID8gcSA6IGR1cChxKTtcblx0XHRcdFx0XHRcdFx0XHRcdHdoaWxlKC0tY29scGVhdCA+IDApIHdzW1IgKyBycHRdW0MgKyBjb2xwZWF0XSA9IGR1cChxKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0d3NbZW5jb2RlX2NlbGwoe3I6UiArIHJwdCxjOkN9KV0gPSBxO1xuXHRcdFx0XHRcdFx0XHRcdFx0d2hpbGUoLS1jb2xwZWF0ID4gMCkgd3NbZW5jb2RlX2NlbGwoe3I6UiArIHJwdCxjOkMgKyBjb2xwZWF0fSldID0gZHVwKHEpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZihyYW5nZS5lLmMgPD0gQykgcmFuZ2UuZS5jID0gQztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb2xwZWF0ID0gcGFyc2VJbnQoY3RhZ1snbnVtYmVyLWNvbHVtbnMtcmVwZWF0ZWQnXXx8XCIxXCIsIDEwKTtcblx0XHRcdFx0XHRDICs9IGNvbHBlYXQtMTsgY29scGVhdCA9IDA7XG5cdFx0XHRcdFx0cSA9IHsvKjo6IHQ6XCJcIiwgdjpudWxsLCB6Om51bGwsIHc6XCJcIixjOltdKi99O1xuXHRcdFx0XHRcdHRleHRwID0gXCJcIjsgdGV4dFIgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRhdGFnID0gKHt9Lyo6YW55Ki8pO1xuXHRcdFx0XHRicmVhazsgLy8gOS4xLjQgPHRhYmxlOnRhYmxlLWNlbGw+XG5cblx0XHRcdC8qIHB1cmUgc3RhdGUgKi9cblx0XHRcdGNhc2UgJ2RvY3VtZW50JzogLy8gVE9ETzogPG9mZmljZTpkb2N1bWVudD4gaXMgdGhlIHJvb3QgZm9yIEZPRFNcblx0XHRcdGNhc2UgJ2RvY3VtZW50LWNvbnRlbnQnOiBjYXNlICfnlLXlrZDooajmoLzmlofmoaMnOiAvLyAzLjEuMy4yIDxvZmZpY2U6ZG9jdW1lbnQtY29udGVudD5cblx0XHRcdGNhc2UgJ3NwcmVhZHNoZWV0JzogY2FzZSAn5Li75L2TJzogLy8gMy43IDxvZmZpY2U6c3ByZWFkc2hlZXQ+XG5cdFx0XHRjYXNlICdzY3JpcHRzJzogLy8gMy4xMiA8b2ZmaWNlOnNjcmlwdHM+XG5cdFx0XHRjYXNlICdzdHlsZXMnOiAvLyBUT0RPIDxvZmZpY2U6c3R5bGVzPlxuXHRcdFx0Y2FzZSAnZm9udC1mYWNlLWRlY2xzJzogLy8gMy4xNCA8b2ZmaWNlOmZvbnQtZmFjZS1kZWNscz5cblx0XHRcdGNhc2UgJ21hc3Rlci1zdHlsZXMnOiAvLyAzLjE1LjQgPG9mZmljZTptYXN0ZXItc3R5bGVzPiAtLSByZWxldmFudCBmb3IgRk9EU1xuXHRcdFx0XHRpZihSblsxXT09PScvJyl7aWYoKHRtcD1zdGF0ZS5wb3AoKSlbMF0hPT1SblszXSkgdGhyb3cgXCJCYWQgc3RhdGU6IFwiK3RtcDt9XG5cdFx0XHRcdGVsc2UgaWYoUm5bMF0uY2hhckF0KFJuWzBdLmxlbmd0aC0yKSAhPT0gJy8nKSBzdGF0ZS5wdXNoKFtSblszXSwgdHJ1ZV0pO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnYW5ub3RhdGlvbic6IC8vIDE0LjEgPG9mZmljZTphbm5vdGF0aW9uPlxuXHRcdFx0XHRpZihSblsxXT09PScvJyl7XG5cdFx0XHRcdFx0aWYoKHRtcD1zdGF0ZS5wb3AoKSlbMF0hPT1SblszXSkgdGhyb3cgXCJCYWQgc3RhdGU6IFwiK3RtcDtcblx0XHRcdFx0XHRjb21tZW50LnQgPSB0ZXh0cDtcblx0XHRcdFx0XHRpZih0ZXh0Ui5sZW5ndGgpIC8qOjooKi9jb21tZW50Lyo6OiA6YW55KSovLlIgPSB0ZXh0Ujtcblx0XHRcdFx0XHRjb21tZW50LmEgPSBjcmVhdG9yO1xuXHRcdFx0XHRcdGNvbW1lbnRzLnB1c2goY29tbWVudCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSBpZihSblswXS5jaGFyQXQoUm5bMF0ubGVuZ3RoLTIpICE9PSAnLycpIHtzdGF0ZS5wdXNoKFtSblszXSwgZmFsc2VdKTt9XG5cdFx0XHRcdGNyZWF0b3IgPSBcIlwiOyBjcmVhdG9yaWR4ID0gMDtcblx0XHRcdFx0dGV4dHAgPSBcIlwiOyB0ZXh0cGlkeCA9IDA7IHRleHRSID0gW107XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRjYXNlICdjcmVhdG9yJzogLy8gNC4zLjIuNyA8ZGM6Y3JlYXRvcj5cblx0XHRcdFx0aWYoUm5bMV09PT0nLycpIHsgY3JlYXRvciA9IHN0ci5zbGljZShjcmVhdG9yaWR4LFJuLmluZGV4KTsgfVxuXHRcdFx0XHRlbHNlIGNyZWF0b3JpZHggPSBSbi5pbmRleCArIFJuWzBdLmxlbmd0aDtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdC8qIGlnbm9yZSBzdGF0ZSAqL1xuXHRcdFx0Y2FzZSAnbWV0YSc6IGNhc2UgJ+WFg+aVsOaNric6IC8vIFRPRE86IDxvZmZpY2U6bWV0YT4gPHVvZjrlhYPmlbDmja4+IEZPRFMvVU9GXG5cdFx0XHRjYXNlICdzZXR0aW5ncyc6IC8vIFRPRE86IDxvZmZpY2U6c2V0dGluZ3M+XG5cdFx0XHRjYXNlICdjb25maWctaXRlbS1zZXQnOiAvLyBUT0RPOiA8b2ZmaWNlOmNvbmZpZy1pdGVtLXNldD5cblx0XHRcdGNhc2UgJ2NvbmZpZy1pdGVtLW1hcC1pbmRleGVkJzogLy8gVE9ETzogPG9mZmljZTpjb25maWctaXRlbS1tYXAtaW5kZXhlZD5cblx0XHRcdGNhc2UgJ2NvbmZpZy1pdGVtLW1hcC1lbnRyeSc6IC8vIFRPRE86IDxvZmZpY2U6Y29uZmlnLWl0ZW0tbWFwLWVudHJ5PlxuXHRcdFx0Y2FzZSAnY29uZmlnLWl0ZW0tbWFwLW5hbWVkJzogLy8gVE9ETzogPG9mZmljZTpjb25maWctaXRlbS1tYXAtZW50cnk+XG5cdFx0XHRjYXNlICdzaGFwZXMnOiAvLyA5LjIuOCA8dGFibGU6c2hhcGVzPlxuXHRcdFx0Y2FzZSAnZnJhbWUnOiAvLyAxMC40LjIgPGRyYXc6ZnJhbWU+XG5cdFx0XHRjYXNlICd0ZXh0LWJveCc6IC8vIDEwLjQuMyA8ZHJhdzp0ZXh0LWJveD5cblx0XHRcdGNhc2UgJ2ltYWdlJzogLy8gMTAuNC40IDxkcmF3OmltYWdlPlxuXHRcdFx0Y2FzZSAnZGF0YS1waWxvdC10YWJsZXMnOiAvLyA5LjYuMiA8dGFibGU6ZGF0YS1waWxvdC10YWJsZXM+XG5cdFx0XHRjYXNlICdsaXN0LXN0eWxlJzogLy8gMTYuMzAgPHRleHQ6bGlzdC1zdHlsZT5cblx0XHRcdGNhc2UgJ2Zvcm0nOiAvLyAxMy4xMyA8Zm9ybTpmb3JtPlxuXHRcdFx0Y2FzZSAnZGRlLWxpbmtzJzogLy8gOS44IDx0YWJsZTpkZGUtbGlua3M+XG5cdFx0XHRjYXNlICdldmVudC1saXN0ZW5lcnMnOiAvLyBUT0RPXG5cdFx0XHRjYXNlICdjaGFydCc6IC8vIFRPRE9cblx0XHRcdFx0aWYoUm5bMV09PT0nLycpe2lmKCh0bXA9c3RhdGUucG9wKCkpWzBdIT09Um5bM10pIHRocm93IFwiQmFkIHN0YXRlOiBcIit0bXA7fVxuXHRcdFx0XHRlbHNlIGlmKFJuWzBdLmNoYXJBdChSblswXS5sZW5ndGgtMikgIT09ICcvJykgc3RhdGUucHVzaChbUm5bM10sIGZhbHNlXSk7XG5cdFx0XHRcdHRleHRwID0gXCJcIjsgdGV4dHBpZHggPSAwOyB0ZXh0UiA9IFtdO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnc2NpZW50aWZpYy1udW1iZXInOiAvLyBUT0RPOiA8bnVtYmVyOnNjaWVudGlmaWMtbnVtYmVyPlxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2N1cnJlbmN5LXN5bWJvbCc6IC8vIFRPRE86IDxudW1iZXI6Y3VycmVuY3ktc3ltYm9sPlxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ2N1cnJlbmN5LXN0eWxlJzogLy8gVE9ETzogPG51bWJlcjpjdXJyZW5jeS1zdHlsZT5cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdudW1iZXItc3R5bGUnOiAvLyAxNi4yNy4yIDxudW1iZXI6bnVtYmVyLXN0eWxlPlxuXHRcdFx0Y2FzZSAncGVyY2VudGFnZS1zdHlsZSc6IC8vIDE2LjI3LjkgPG51bWJlcjpwZXJjZW50YWdlLXN0eWxlPlxuXHRcdFx0Y2FzZSAnZGF0ZS1zdHlsZSc6IC8vIDE2LjI3LjEwIDxudW1iZXI6ZGF0ZS1zdHlsZT5cblx0XHRcdGNhc2UgJ3RpbWUtc3R5bGUnOiAvLyAxNi4yNy4xOCA8bnVtYmVyOnRpbWUtc3R5bGU+XG5cdFx0XHRcdGlmKFJuWzFdPT09Jy8nKXtcblx0XHRcdFx0XHRudW1iZXJfZm9ybWF0X21hcFtORnRhZy5uYW1lXSA9IE5GO1xuXHRcdFx0XHRcdGlmKCh0bXA9c3RhdGUucG9wKCkpWzBdIT09Um5bM10pIHRocm93IFwiQmFkIHN0YXRlOiBcIit0bXA7XG5cdFx0XHRcdH0gZWxzZSBpZihSblswXS5jaGFyQXQoUm5bMF0ubGVuZ3RoLTIpICE9PSAnLycpIHtcblx0XHRcdFx0XHRORiA9IFwiXCI7XG5cdFx0XHRcdFx0TkZ0YWcgPSBwYXJzZXhtbHRhZyhSblswXSwgZmFsc2UpO1xuXHRcdFx0XHRcdHN0YXRlLnB1c2goW1JuWzNdLCB0cnVlXSk7XG5cdFx0XHRcdH0gYnJlYWs7XG5cblx0XHRcdGNhc2UgJ3NjcmlwdCc6IGJyZWFrOyAvLyAzLjEzIDxvZmZpY2U6c2NyaXB0PlxuXHRcdFx0Y2FzZSAnbGlicmFyaWVzJzogYnJlYWs7IC8vIFRPRE86IDxvb286bGlicmFyaWVzPlxuXHRcdFx0Y2FzZSAnYXV0b21hdGljLXN0eWxlcyc6IGJyZWFrOyAvLyAzLjE1LjMgPG9mZmljZTphdXRvbWF0aWMtc3R5bGVzPlxuXG5cdFx0XHRjYXNlICdkZWZhdWx0LXN0eWxlJzogLy8gVE9ETzogPHN0eWxlOmRlZmF1bHQtc3R5bGU+XG5cdFx0XHRjYXNlICdwYWdlLWxheW91dCc6IGJyZWFrOyAvLyBUT0RPOiA8c3R5bGU6cGFnZS1sYXlvdXQ+XG5cdFx0XHRjYXNlICdzdHlsZSc6IC8vIDE2LjIgPHN0eWxlOnN0eWxlPlxuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ21hcCc6IGJyZWFrOyAvLyAxNi4zIDxzdHlsZTptYXA+XG5cdFx0XHRjYXNlICdmb250LWZhY2UnOiBicmVhazsgLy8gMTYuMjEgPHN0eWxlOmZvbnQtZmFjZT5cblxuXHRcdFx0Y2FzZSAncGFyYWdyYXBoLXByb3BlcnRpZXMnOiBicmVhazsgLy8gMTcuNiA8c3R5bGU6cGFyYWdyYXBoLXByb3BlcnRpZXM+XG5cdFx0XHRjYXNlICd0YWJsZS1wcm9wZXJ0aWVzJzogYnJlYWs7IC8vIDE3LjE1IDxzdHlsZTp0YWJsZS1wcm9wZXJ0aWVzPlxuXHRcdFx0Y2FzZSAndGFibGUtY29sdW1uLXByb3BlcnRpZXMnOiBicmVhazsgLy8gMTcuMTYgPHN0eWxlOnRhYmxlLWNvbHVtbi1wcm9wZXJ0aWVzPlxuXHRcdFx0Y2FzZSAndGFibGUtcm93LXByb3BlcnRpZXMnOiBicmVhazsgLy8gMTcuMTcgPHN0eWxlOnRhYmxlLXJvdy1wcm9wZXJ0aWVzPlxuXHRcdFx0Y2FzZSAndGFibGUtY2VsbC1wcm9wZXJ0aWVzJzogYnJlYWs7IC8vIDE3LjE4IDxzdHlsZTp0YWJsZS1jZWxsLXByb3BlcnRpZXM+XG5cblx0XHRcdGNhc2UgJ251bWJlcic6IC8vIDE2LjI3LjMgPG51bWJlcjpudW1iZXI+XG5cdFx0XHRcdHN3aXRjaChzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMF0pIHtcblx0XHRcdFx0XHRjYXNlICd0aW1lLXN0eWxlJzpcblx0XHRcdFx0XHRjYXNlICdkYXRlLXN0eWxlJzpcblx0XHRcdFx0XHRcdHRhZyA9IHBhcnNleG1sdGFnKFJuWzBdLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRORiArPSBudW1iZXJfZm9ybWF0c19vZHNbUm5bM11dW3RhZy5zdHlsZT09PSdsb25nJz8xOjBdOyBicmVhaztcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0Y2FzZSAnZnJhY3Rpb24nOiBicmVhazsgLy8gVE9ETyAxNi4yNy42IDxudW1iZXI6ZnJhY3Rpb24+XG5cblx0XHRcdGNhc2UgJ2RheSc6IC8vIDE2LjI3LjExIDxudW1iZXI6ZGF5PlxuXHRcdFx0Y2FzZSAnbW9udGgnOiAvLyAxNi4yNy4xMiA8bnVtYmVyOm1vbnRoPlxuXHRcdFx0Y2FzZSAneWVhcic6IC8vIDE2LjI3LjEzIDxudW1iZXI6eWVhcj5cblx0XHRcdGNhc2UgJ2VyYSc6IC8vIDE2LjI3LjE0IDxudW1iZXI6ZXJhPlxuXHRcdFx0Y2FzZSAnZGF5LW9mLXdlZWsnOiAvLyAxNi4yNy4xNSA8bnVtYmVyOmRheS1vZi13ZWVrPlxuXHRcdFx0Y2FzZSAnd2Vlay1vZi15ZWFyJzogLy8gMTYuMjcuMTYgPG51bWJlcjp3ZWVrLW9mLXllYXI+XG5cdFx0XHRjYXNlICdxdWFydGVyJzogLy8gMTYuMjcuMTcgPG51bWJlcjpxdWFydGVyPlxuXHRcdFx0Y2FzZSAnaG91cnMnOiAvLyAxNi4yNy4xOSA8bnVtYmVyOmhvdXJzPlxuXHRcdFx0Y2FzZSAnbWludXRlcyc6IC8vIDE2LjI3LjIwIDxudW1iZXI6bWludXRlcz5cblx0XHRcdGNhc2UgJ3NlY29uZHMnOiAvLyAxNi4yNy4yMSA8bnVtYmVyOnNlY29uZHM+XG5cdFx0XHRjYXNlICdhbS1wbSc6IC8vIDE2LjI3LjIyIDxudW1iZXI6YW0tcG0+XG5cdFx0XHRcdHN3aXRjaChzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMF0pIHtcblx0XHRcdFx0XHRjYXNlICd0aW1lLXN0eWxlJzpcblx0XHRcdFx0XHRjYXNlICdkYXRlLXN0eWxlJzpcblx0XHRcdFx0XHRcdHRhZyA9IHBhcnNleG1sdGFnKFJuWzBdLCBmYWxzZSk7XG5cdFx0XHRcdFx0XHRORiArPSBudW1iZXJfZm9ybWF0c19vZHNbUm5bM11dW3RhZy5zdHlsZT09PSdsb25nJz8xOjBdOyBicmVhaztcblx0XHRcdFx0fSBicmVhaztcblxuXHRcdFx0Y2FzZSAnYm9vbGVhbi1zdHlsZSc6IGJyZWFrOyAvLyAxNi4yNy4yMyA8bnVtYmVyOmJvb2xlYW4tc3R5bGU+XG5cdFx0XHRjYXNlICdib29sZWFuJzogYnJlYWs7IC8vIDE2LjI3LjI0IDxudW1iZXI6Ym9vbGVhbj5cblx0XHRcdGNhc2UgJ3RleHQtc3R5bGUnOiBicmVhazsgLy8gMTYuMjcuMjUgPG51bWJlcjp0ZXh0LXN0eWxlPlxuXHRcdFx0Y2FzZSAndGV4dCc6IC8vIDE2LjI3LjI2IDxudW1iZXI6dGV4dD5cblx0XHRcdFx0aWYoUm5bMF0uc2xpY2UoLTIpID09PSBcIi8+XCIpIGJyZWFrO1xuXHRcdFx0XHRlbHNlIGlmKFJuWzFdPT09XCIvXCIpIHN3aXRjaChzdGF0ZVtzdGF0ZS5sZW5ndGgtMV1bMF0pIHtcblx0XHRcdFx0XHRjYXNlICdudW1iZXItc3R5bGUnOlxuXHRcdFx0XHRcdGNhc2UgJ2RhdGUtc3R5bGUnOlxuXHRcdFx0XHRcdGNhc2UgJ3RpbWUtc3R5bGUnOlxuXHRcdFx0XHRcdFx0TkYgKz0gc3RyLnNsaWNlKHBpZHgsIFJuLmluZGV4KTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgcGlkeCA9IFJuLmluZGV4ICsgUm5bMF0ubGVuZ3RoO1xuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnbmFtZWQtcmFuZ2UnOiAvLyA5LjQuMTIgPHRhYmxlOm5hbWVkLXJhbmdlPlxuXHRcdFx0XHR0YWcgPSBwYXJzZXhtbHRhZyhSblswXSwgZmFsc2UpO1xuXHRcdFx0XHRfUmVmID0gb2RzX3RvX2NzZl8zRCh0YWdbJ2NlbGwtcmFuZ2UtYWRkcmVzcyddKTtcblx0XHRcdFx0dmFyIG5yYW5nZSA9ICh7TmFtZTp0YWcubmFtZSwgUmVmOl9SZWZbMF0gKyAnIScgKyBfUmVmWzFdfS8qOmFueSovKTtcblx0XHRcdFx0aWYoaW50YWJsZSkgbnJhbmdlLlNoZWV0ID0gU2hlZXROYW1lcy5sZW5ndGg7XG5cdFx0XHRcdFdCLk5hbWVzLnB1c2gobnJhbmdlKTtcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3RleHQtY29udGVudCc6IGJyZWFrOyAvLyAxNi4yNy4yNyA8bnVtYmVyOnRleHQtY29udGVudD5cblx0XHRcdGNhc2UgJ3RleHQtcHJvcGVydGllcyc6IGJyZWFrOyAvLyAxNi4yNy4yNyA8c3R5bGU6dGV4dC1wcm9wZXJ0aWVzPlxuXHRcdFx0Y2FzZSAnZW1iZWRkZWQtdGV4dCc6IGJyZWFrOyAvLyAxNi4yNy40IDxudW1iZXI6ZW1iZWRkZWQtdGV4dD5cblxuXHRcdFx0Y2FzZSAnYm9keSc6IGNhc2UgJ+eUteWtkOihqOagvCc6IGJyZWFrOyAvLyAzLjMgMTYuOS42IDE5LjcyNi4zXG5cblx0XHRcdGNhc2UgJ2Zvcm1zJzogYnJlYWs7IC8vIDEyLjI1LjIgMTMuMlxuXHRcdFx0Y2FzZSAndGFibGUtY29sdW1uJzogYnJlYWs7IC8vIDkuMS42IDx0YWJsZTp0YWJsZS1jb2x1bW4+XG5cdFx0XHRjYXNlICd0YWJsZS1oZWFkZXItcm93cyc6IGJyZWFrOyAvLyA5LjEuNyA8dGFibGU6dGFibGUtaGVhZGVyLXJvd3M+XG5cdFx0XHRjYXNlICd0YWJsZS1yb3dzJzogYnJlYWs7IC8vIDkuMS4xMiA8dGFibGU6dGFibGUtcm93cz5cblx0XHRcdC8qIFRPRE86IG91dGxpbmUgbGV2ZWxzICovXG5cdFx0XHRjYXNlICd0YWJsZS1jb2x1bW4tZ3JvdXAnOiBicmVhazsgLy8gOS4xLjEwIDx0YWJsZTp0YWJsZS1jb2x1bW4tZ3JvdXA+XG5cdFx0XHRjYXNlICd0YWJsZS1oZWFkZXItY29sdW1ucyc6IGJyZWFrOyAvLyA5LjEuMTEgPHRhYmxlOnRhYmxlLWhlYWRlci1jb2x1bW5zPlxuXHRcdFx0Y2FzZSAndGFibGUtY29sdW1ucyc6IGJyZWFrOyAvLyA5LjEuMTIgPHRhYmxlOnRhYmxlLWNvbHVtbnM+XG5cblx0XHRcdGNhc2UgJ251bGwtZGF0ZSc6IGJyZWFrOyAvLyA5LjQuMiA8dGFibGU6bnVsbC1kYXRlPiBUT0RPOiBkYXRlMTkwNFxuXG5cdFx0XHRjYXNlICdncmFwaGljLXByb3BlcnRpZXMnOiBicmVhazsgLy8gMTcuMjEgPHN0eWxlOmdyYXBoaWMtcHJvcGVydGllcz5cblx0XHRcdGNhc2UgJ2NhbGN1bGF0aW9uLXNldHRpbmdzJzogYnJlYWs7IC8vIDkuNC4xIDx0YWJsZTpjYWxjdWxhdGlvbi1zZXR0aW5ncz5cblx0XHRcdGNhc2UgJ25hbWVkLWV4cHJlc3Npb25zJzogYnJlYWs7IC8vIDkuNC4xMSA8dGFibGU6bmFtZWQtZXhwcmVzc2lvbnM+XG5cdFx0XHRjYXNlICdsYWJlbC1yYW5nZSc6IGJyZWFrOyAvLyA5LjQuOSA8dGFibGU6bGFiZWwtcmFuZ2U+XG5cdFx0XHRjYXNlICdsYWJlbC1yYW5nZXMnOiBicmVhazsgLy8gOS40LjEwIDx0YWJsZTpsYWJlbC1yYW5nZXM+XG5cdFx0XHRjYXNlICduYW1lZC1leHByZXNzaW9uJzogYnJlYWs7IC8vIDkuNC4xMyA8dGFibGU6bmFtZWQtZXhwcmVzc2lvbj5cblx0XHRcdGNhc2UgJ3NvcnQnOiBicmVhazsgLy8gOS40LjE5IDx0YWJsZTpzb3J0PlxuXHRcdFx0Y2FzZSAnc29ydC1ieSc6IGJyZWFrOyAvLyA5LjQuMjAgPHRhYmxlOnNvcnQtYnk+XG5cdFx0XHRjYXNlICdzb3J0LWdyb3Vwcyc6IGJyZWFrOyAvLyA5LjQuMjIgPHRhYmxlOnNvcnQtZ3JvdXBzPlxuXG5cdFx0XHRjYXNlICd0YWInOiBicmVhazsgLy8gNi4xLjQgPHRleHQ6dGFiPlxuXHRcdFx0Y2FzZSAnbGluZS1icmVhayc6IGJyZWFrOyAvLyA2LjEuNSA8dGV4dDpsaW5lLWJyZWFrPlxuXHRcdFx0Y2FzZSAnc3Bhbic6IGJyZWFrOyAvLyA2LjEuNyA8dGV4dDpzcGFuPlxuXHRcdFx0Y2FzZSAncCc6IGNhc2UgJ+aWh+acrOS4sic6IC8vIDUuMS4zIDx0ZXh0OnA+XG5cdFx0XHRcdGlmKFsnbWFzdGVyLXN0eWxlcyddLmluZGV4T2Yoc3RhdGVbc3RhdGUubGVuZ3RoLTFdWzBdKSA+IC0xKSBicmVhaztcblx0XHRcdFx0aWYoUm5bMV09PT0nLycgJiYgKCFjdGFnIHx8ICFjdGFnWydzdHJpbmctdmFsdWUnXSkpIHtcblx0XHRcdFx0XHR2YXIgcHRwID0gcGFyc2VfdGV4dF9wKHN0ci5zbGljZSh0ZXh0cGlkeCxSbi5pbmRleCksIHRleHRwdGFnKTtcblx0XHRcdFx0XHR0ZXh0cCA9ICh0ZXh0cC5sZW5ndGggPiAwID8gdGV4dHAgKyBcIlxcblwiIDogXCJcIikgKyBwdHBbMF07XG5cdFx0XHRcdH0gZWxzZSB7IHRleHRwdGFnID0gcGFyc2V4bWx0YWcoUm5bMF0sIGZhbHNlKTsgdGV4dHBpZHggPSBSbi5pbmRleCArIFJuWzBdLmxlbmd0aDsgfVxuXHRcdFx0XHRicmVhazsgLy8gPHRleHQ6cD5cblx0XHRcdGNhc2UgJ3MnOiBicmVhazsgLy8gPHRleHQ6cz5cblxuXHRcdFx0Y2FzZSAnZGF0YWJhc2UtcmFuZ2UnOiAvLyA5LjQuMTUgPHRhYmxlOmRhdGFiYXNlLXJhbmdlPlxuXHRcdFx0XHRpZihSblsxXT09PScvJykgYnJlYWs7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0X1JlZiA9IG9kc190b19jc2ZfM0QocGFyc2V4bWx0YWcoUm5bMF0pWyd0YXJnZXQtcmFuZ2UtYWRkcmVzcyddKTtcblx0XHRcdFx0XHRTaGVldHNbX1JlZlswXV1bJyFhdXRvZmlsdGVyJ10gPSB7IHJlZjpfUmVmWzFdIH07XG5cdFx0XHRcdH0gY2F0Y2goZSkgey8qIGVtcHR5ICovfVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0Y2FzZSAnZGF0ZSc6IGJyZWFrOyAvLyA8KjpkYXRlPlxuXG5cdFx0XHRjYXNlICdvYmplY3QnOiBicmVhazsgLy8gMTAuNC42LjIgPGRyYXc6b2JqZWN0PlxuXHRcdFx0Y2FzZSAndGl0bGUnOiBjYXNlICfmoIfpopgnOiBicmVhazsgLy8gPCo6dGl0bGU+IE9SIDx1b2Y65qCH6aKYPlxuXHRcdFx0Y2FzZSAnZGVzYyc6IGJyZWFrOyAvLyA8KjpkZXNjPlxuXHRcdFx0Y2FzZSAnYmluYXJ5LWRhdGEnOiBicmVhazsgLy8gMTAuNC41IFRPRE86IGI2NCBibG9iXG5cblx0XHRcdC8qIDkuMiBBZHZhbmNlZCBUYWJsZXMgKi9cblx0XHRcdGNhc2UgJ3RhYmxlLXNvdXJjZSc6IGJyZWFrOyAvLyA5LjIuNlxuXHRcdFx0Y2FzZSAnc2NlbmFyaW8nOiBicmVhazsgLy8gOS4yLjZcblxuXHRcdFx0Y2FzZSAnaXRlcmF0aW9uJzogYnJlYWs7IC8vIDkuNC4zIDx0YWJsZTppdGVyYXRpb24+XG5cdFx0XHRjYXNlICdjb250ZW50LXZhbGlkYXRpb25zJzogYnJlYWs7IC8vIDkuNC40IDx0YWJsZTpcblx0XHRcdGNhc2UgJ2NvbnRlbnQtdmFsaWRhdGlvbic6IGJyZWFrOyAvLyA5LjQuNSA8dGFibGU6XG5cdFx0XHRjYXNlICdoZWxwLW1lc3NhZ2UnOiBicmVhazsgLy8gOS40LjYgPHRhYmxlOlxuXHRcdFx0Y2FzZSAnZXJyb3ItbWVzc2FnZSc6IGJyZWFrOyAvLyA5LjQuNyA8dGFibGU6XG5cdFx0XHRjYXNlICdkYXRhYmFzZS1yYW5nZXMnOiBicmVhazsgLy8gOS40LjE0IDx0YWJsZTpkYXRhYmFzZS1yYW5nZXM+XG5cdFx0XHRjYXNlICdmaWx0ZXInOiBicmVhazsgLy8gOS41LjIgPHRhYmxlOmZpbHRlcj5cblx0XHRcdGNhc2UgJ2ZpbHRlci1hbmQnOiBicmVhazsgLy8gOS41LjMgPHRhYmxlOmZpbHRlci1hbmQ+XG5cdFx0XHRjYXNlICdmaWx0ZXItb3InOiBicmVhazsgLy8gOS41LjQgPHRhYmxlOmZpbHRlci1vcj5cblx0XHRcdGNhc2UgJ2ZpbHRlci1jb25kaXRpb24nOiBicmVhazsgLy8gOS41LjUgPHRhYmxlOmZpbHRlci1jb25kaXRpb24+XG5cblx0XHRcdGNhc2UgJ2xpc3QtbGV2ZWwtc3R5bGUtYnVsbGV0JzogYnJlYWs7IC8vIDE2LjMxIDx0ZXh0OlxuXHRcdFx0Y2FzZSAnbGlzdC1sZXZlbC1zdHlsZS1udW1iZXInOiBicmVhazsgLy8gMTYuMzIgPHRleHQ6XG5cdFx0XHRjYXNlICdsaXN0LWxldmVsLXByb3BlcnRpZXMnOiBicmVhazsgLy8gMTcuMTkgPHN0eWxlOlxuXG5cdFx0XHQvKiA3LjMgRG9jdW1lbnQgRmllbGRzICovXG5cdFx0XHRjYXNlICdzZW5kZXItZmlyc3RuYW1lJzogLy8gNy4zLjYuMlxuXHRcdFx0Y2FzZSAnc2VuZGVyLWxhc3RuYW1lJzogLy8gNy4zLjYuM1xuXHRcdFx0Y2FzZSAnc2VuZGVyLWluaXRpYWxzJzogLy8gNy4zLjYuNFxuXHRcdFx0Y2FzZSAnc2VuZGVyLXRpdGxlJzogLy8gNy4zLjYuNVxuXHRcdFx0Y2FzZSAnc2VuZGVyLXBvc2l0aW9uJzogLy8gNy4zLjYuNlxuXHRcdFx0Y2FzZSAnc2VuZGVyLWVtYWlsJzogLy8gNy4zLjYuN1xuXHRcdFx0Y2FzZSAnc2VuZGVyLXBob25lLXByaXZhdGUnOiAvLyA3LjMuNi44XG5cdFx0XHRjYXNlICdzZW5kZXItZmF4JzogLy8gNy4zLjYuOVxuXHRcdFx0Y2FzZSAnc2VuZGVyLWNvbXBhbnknOiAvLyA3LjMuNi4xMFxuXHRcdFx0Y2FzZSAnc2VuZGVyLXBob25lLXdvcmsnOiAvLyA3LjMuNi4xMVxuXHRcdFx0Y2FzZSAnc2VuZGVyLXN0cmVldCc6IC8vIDcuMy42LjEyXG5cdFx0XHRjYXNlICdzZW5kZXItY2l0eSc6IC8vIDcuMy42LjEzXG5cdFx0XHRjYXNlICdzZW5kZXItcG9zdGFsLWNvZGUnOiAvLyA3LjMuNi4xNFxuXHRcdFx0Y2FzZSAnc2VuZGVyLWNvdW50cnknOiAvLyA3LjMuNi4xNVxuXHRcdFx0Y2FzZSAnc2VuZGVyLXN0YXRlLW9yLXByb3ZpbmNlJzogLy8gNy4zLjYuMTZcblx0XHRcdGNhc2UgJ2F1dGhvci1uYW1lJzogLy8gNy4zLjcuMVxuXHRcdFx0Y2FzZSAnYXV0aG9yLWluaXRpYWxzJzogLy8gNy4zLjcuMlxuXHRcdFx0Y2FzZSAnY2hhcHRlcic6IC8vIDcuMy44XG5cdFx0XHRjYXNlICdmaWxlLW5hbWUnOiAvLyA3LjMuOVxuXHRcdFx0Y2FzZSAndGVtcGxhdGUtbmFtZSc6IC8vIDcuMy45XG5cdFx0XHRjYXNlICdzaGVldC1uYW1lJzogLy8gNy4zLjlcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ2V2ZW50LWxpc3RlbmVyJzpcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHQvKiBUT0RPOiBGT0RTIFByb3BlcnRpZXMgKi9cblx0XHRcdGNhc2UgJ2luaXRpYWwtY3JlYXRvcic6XG5cdFx0XHRjYXNlICdjcmVhdGlvbi1kYXRlJzpcblx0XHRcdGNhc2UgJ3ByaW50LWRhdGUnOlxuXHRcdFx0Y2FzZSAnZ2VuZXJhdG9yJzpcblx0XHRcdGNhc2UgJ2RvY3VtZW50LXN0YXRpc3RpYyc6XG5cdFx0XHRjYXNlICd1c2VyLWRlZmluZWQnOlxuXHRcdFx0Y2FzZSAnZWRpdGluZy1kdXJhdGlvbic6XG5cdFx0XHRjYXNlICdlZGl0aW5nLWN5Y2xlcyc6XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHQvKiBUT0RPOiBGT0RTIENvbmZpZyAqL1xuXHRcdFx0Y2FzZSAnY29uZmlnLWl0ZW0nOlxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0LyogVE9ETzogc3R5bGUgdG9rZW5zICovXG5cdFx0XHRjYXNlICdwYWdlLW51bWJlcic6IGJyZWFrOyAvLyBUT0RPIDx0ZXh0OnBhZ2UtbnVtYmVyPlxuXHRcdFx0Y2FzZSAncGFnZS1jb3VudCc6IGJyZWFrOyAvLyBUT0RPIDx0ZXh0OnBhZ2UtY291bnQ+XG5cdFx0XHRjYXNlICd0aW1lJzogYnJlYWs7IC8vIFRPRE8gPHRleHQ6dGltZT5cblxuXHRcdFx0LyogOS4zIEFkdmFuY2VkIFRhYmxlIENlbGxzICovXG5cdFx0XHRjYXNlICdjZWxsLXJhbmdlLXNvdXJjZSc6IGJyZWFrOyAvLyA5LjMuMSA8dGFibGU6XG5cdFx0XHRjYXNlICdkZXRlY3RpdmUnOiBicmVhazsgLy8gOS4zLjIgPHRhYmxlOlxuXHRcdFx0Y2FzZSAnb3BlcmF0aW9uJzogYnJlYWs7IC8vIDkuMy4zIDx0YWJsZTpcblx0XHRcdGNhc2UgJ2hpZ2hsaWdodGVkLXJhbmdlJzogYnJlYWs7IC8vIDkuMy40IDx0YWJsZTpcblxuXHRcdFx0LyogOS42IERhdGEgUGlsb3QgVGFibGVzIDx0YWJsZTogKi9cblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3QtdGFibGUnOiAvLyA5LjYuM1xuXHRcdFx0Y2FzZSAnc291cmNlLWNlbGwtcmFuZ2UnOiAvLyA5LjYuNVxuXHRcdFx0Y2FzZSAnc291cmNlLXNlcnZpY2UnOiAvLyA5LjYuNlxuXHRcdFx0Y2FzZSAnZGF0YS1waWxvdC1maWVsZCc6IC8vIDkuNi43XG5cdFx0XHRjYXNlICdkYXRhLXBpbG90LWxldmVsJzogLy8gOS42Ljhcblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3Qtc3VidG90YWxzJzogLy8gOS42Ljlcblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3Qtc3VidG90YWwnOiAvLyA5LjYuMTBcblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3QtbWVtYmVycyc6IC8vIDkuNi4xMVxuXHRcdFx0Y2FzZSAnZGF0YS1waWxvdC1tZW1iZXInOiAvLyA5LjYuMTJcblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3QtZGlzcGxheS1pbmZvJzogLy8gOS42LjEzXG5cdFx0XHRjYXNlICdkYXRhLXBpbG90LXNvcnQtaW5mbyc6IC8vIDkuNi4xNFxuXHRcdFx0Y2FzZSAnZGF0YS1waWxvdC1sYXlvdXQtaW5mbyc6IC8vIDkuNi4xNVxuXHRcdFx0Y2FzZSAnZGF0YS1waWxvdC1maWVsZC1yZWZlcmVuY2UnOiAvLyA5LjYuMTZcblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3QtZ3JvdXBzJzogLy8gOS42LjE3XG5cdFx0XHRjYXNlICdkYXRhLXBpbG90LWdyb3VwJzogLy8gOS42LjE4XG5cdFx0XHRjYXNlICdkYXRhLXBpbG90LWdyb3VwLW1lbWJlcic6IC8vIDkuNi4xOVxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0LyogMTAuMyBEcmF3aW5nIFNoYXBlcyAqL1xuXHRcdFx0Y2FzZSAncmVjdCc6IC8vIDEwLjMuMlxuXHRcdFx0XHRicmVhaztcblxuXHRcdFx0LyogMTQuNiBEREUgQ29ubmVjdGlvbnMgKi9cblx0XHRcdGNhc2UgJ2RkZS1jb25uZWN0aW9uLWRlY2xzJzogLy8gMTQuNi4yIDx0ZXh0OlxuXHRcdFx0Y2FzZSAnZGRlLWNvbm5lY3Rpb24tZGVjbCc6IC8vIDE0LjYuMyA8dGV4dDpcblx0XHRcdGNhc2UgJ2RkZS1saW5rJzogLy8gMTQuNi40IDx0YWJsZTpcblx0XHRcdGNhc2UgJ2RkZS1zb3VyY2UnOiAvLyAxNC42LjUgPG9mZmljZTpcblx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdGNhc2UgJ3Byb3BlcnRpZXMnOiBicmVhazsgLy8gMTMuNyA8Zm9ybTpwcm9wZXJ0aWVzPlxuXHRcdFx0Y2FzZSAncHJvcGVydHknOiBicmVhazsgLy8gMTMuOCA8Zm9ybTpwcm9wZXJ0eT5cblxuXHRcdFx0Y2FzZSAnYSc6IC8vIDYuMS44IGh5cGVybGlua1xuXHRcdFx0XHRpZihSblsxXSE9PSAnLycpIHtcblx0XHRcdFx0XHRhdGFnID0gcGFyc2V4bWx0YWcoUm5bMF0sIGZhbHNlKTtcblx0XHRcdFx0XHRpZighYXRhZy5ocmVmKSBicmVhaztcblx0XHRcdFx0XHRhdGFnLlRhcmdldCA9IHVuZXNjYXBleG1sKGF0YWcuaHJlZik7IGRlbGV0ZSBhdGFnLmhyZWY7XG5cdFx0XHRcdFx0aWYoYXRhZy5UYXJnZXQuY2hhckF0KDApID09IFwiI1wiICYmIGF0YWcuVGFyZ2V0LmluZGV4T2YoXCIuXCIpID4gLTEpIHtcblx0XHRcdFx0XHRcdF9SZWYgPSBvZHNfdG9fY3NmXzNEKGF0YWcuVGFyZ2V0LnNsaWNlKDEpKTtcblx0XHRcdFx0XHRcdGF0YWcuVGFyZ2V0ID0gXCIjXCIgKyBfUmVmWzBdICsgXCIhXCIgKyBfUmVmWzFdO1xuXHRcdFx0XHRcdH0gZWxzZSBpZihhdGFnLlRhcmdldC5tYXRjaCgvXlxcLlxcLltcXFxcXFwvXS8pKSBhdGFnLlRhcmdldCA9IGF0YWcuVGFyZ2V0LnNsaWNlKDMpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHQvKiBub24tc3RhbmRhcmQgKi9cblx0XHRcdGNhc2UgJ3RhYmxlLXByb3RlY3Rpb24nOiBicmVhaztcblx0XHRcdGNhc2UgJ2RhdGEtcGlsb3QtZ3JhbmQtdG90YWwnOiBicmVhazsgLy8gPHRhYmxlOlxuXHRcdFx0Y2FzZSAnb2ZmaWNlLWRvY3VtZW50LWNvbW1vbi1hdHRycyc6IGJyZWFrOyAvLyBiYXJlXG5cdFx0XHRkZWZhdWx0OiBzd2l0Y2goUm5bMl0pIHtcblx0XHRcdFx0Y2FzZSAnZGM6JzogICAgICAgLy8gVE9ETzogcHJvcGVydGllc1xuXHRcdFx0XHRjYXNlICdjYWxjZXh0Oic6ICAvLyBpZ25vcmUgdW5kb2N1bWVudGVkIGV4dGVuc2lvbnNcblx0XHRcdFx0Y2FzZSAnbG9leHQ6JzogICAgLy8gaWdub3JlIHVuZG9jdW1lbnRlZCBleHRlbnNpb25zXG5cdFx0XHRcdGNhc2UgJ29vbzonOiAgICAgIC8vIGlnbm9yZSB1bmRvY3VtZW50ZWQgZXh0ZW5zaW9uc1xuXHRcdFx0XHRjYXNlICdjaGFydG9vbzonOiAvLyBpZ25vcmUgdW5kb2N1bWVudGVkIGV4dGVuc2lvbnNcblx0XHRcdFx0Y2FzZSAnZHJhdzonOiAgICAgLy8gVE9ETzogZHJhd2luZ1xuXHRcdFx0XHRjYXNlICdzdHlsZTonOiAgICAvLyBUT0RPOiBzdHlsZXNcblx0XHRcdFx0Y2FzZSAnY2hhcnQ6JzogICAgLy8gVE9ETzogY2hhcnRzXG5cdFx0XHRcdGNhc2UgJ2Zvcm06JzogICAgIC8vIFRPRE86IGZvcm1zXG5cdFx0XHRcdGNhc2UgJ3VvZjonOiAgICAgIC8vIFRPRE86IHVvZlxuXHRcdFx0XHRjYXNlICfooag6JzogICAgICAgLy8gVE9ETzogdW9mXG5cdFx0XHRcdGNhc2UgJ+WtlzonOiAgICAgICAvLyBUT0RPOiB1b2Zcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0ZGVmYXVsdDogaWYob3B0cy5XVEYpIHRocm93IG5ldyBFcnJvcihSbik7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHZhciBvdXQvKjpXb3JrYm9vayovID0gKHtcblx0XHRcdFNoZWV0czogU2hlZXRzLFxuXHRcdFx0U2hlZXROYW1lczogU2hlZXROYW1lcyxcblx0XHRcdFdvcmtib29rOiBXQlxuXHRcdH0vKjphbnkqLyk7XG5cdFx0aWYob3B0cy5ib29rU2hlZXRzKSBkZWxldGUgLyo6OigqL291dC8qOjogOmFueSkqLy5TaGVldHM7XG5cdFx0cmV0dXJuIG91dDtcbn1cblxuZnVuY3Rpb24gcGFyc2Vfb2RzKHppcC8qOlpJUEZpbGUqLywgb3B0cy8qOj9QYXJzZU9wdHMqLykvKjpXb3JrYm9vayovIHtcblx0b3B0cyA9IG9wdHMgfHwgKHt9Lyo6YW55Ki8pO1xuXHRpZihzYWZlZ2V0emlwZmlsZSh6aXAsICdNRVRBLUlORi9tYW5pZmVzdC54bWwnKSkgcGFyc2VfbWFuaWZlc3QoZ2V0emlwZGF0YSh6aXAsICdNRVRBLUlORi9tYW5pZmVzdC54bWwnKSwgb3B0cyk7XG5cdHZhciBjb250ZW50ID0gZ2V0emlwc3RyKHppcCwgJ2NvbnRlbnQueG1sJyk7XG5cdGlmKCFjb250ZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJNaXNzaW5nIGNvbnRlbnQueG1sIGluIE9EUyAvIFVPRiBmaWxlXCIpO1xuXHR2YXIgd2IgPSBwYXJzZV9jb250ZW50X3htbCh1dGY4cmVhZChjb250ZW50KSwgb3B0cyk7XG5cdGlmKHNhZmVnZXR6aXBmaWxlKHppcCwgJ21ldGEueG1sJykpIHdiLlByb3BzID0gcGFyc2VfY29yZV9wcm9wcyhnZXR6aXBkYXRhKHppcCwgJ21ldGEueG1sJykpO1xuXHRyZXR1cm4gd2I7XG59XG5mdW5jdGlvbiBwYXJzZV9mb2RzKGRhdGEvKjpzdHJpbmcqLywgb3B0cy8qOj9QYXJzZU9wdHMqLykvKjpXb3JrYm9vayovIHtcblx0cmV0dXJuIHBhcnNlX2NvbnRlbnRfeG1sKGRhdGEsIG9wdHMpO1xufVxuXG4vKiBPcGVuRG9jdW1lbnQgKi9cbnZhciB3cml0ZV9zdHlsZXNfb2RzLyo6eyh3YjphbnksIG9wdHM6YW55KTpzdHJpbmd9Ki8gPSAvKiBAX19QVVJFX18gKi8oZnVuY3Rpb24oKSB7XG5cdHZhciBtYXN0ZXJfc3R5bGVzID0gW1xuXHRcdCc8b2ZmaWNlOm1hc3Rlci1zdHlsZXM+Jyxcblx0XHRcdCc8c3R5bGU6bWFzdGVyLXBhZ2Ugc3R5bGU6bmFtZT1cIm1wMVwiIHN0eWxlOnBhZ2UtbGF5b3V0LW5hbWU9XCJtcDFcIj4nLFxuXHRcdFx0XHQnPHN0eWxlOmhlYWRlci8+Jyxcblx0XHRcdFx0JzxzdHlsZTpoZWFkZXItbGVmdCBzdHlsZTpkaXNwbGF5PVwiZmFsc2VcIi8+Jyxcblx0XHRcdFx0JzxzdHlsZTpmb290ZXIvPicsXG5cdFx0XHRcdCc8c3R5bGU6Zm9vdGVyLWxlZnQgc3R5bGU6ZGlzcGxheT1cImZhbHNlXCIvPicsXG5cdFx0XHQnPC9zdHlsZTptYXN0ZXItcGFnZT4nLFxuXHRcdCc8L29mZmljZTptYXN0ZXItc3R5bGVzPidcblx0XS5qb2luKFwiXCIpO1xuXG5cdHZhciBwYXlsb2FkID0gJzxvZmZpY2U6ZG9jdW1lbnQtc3R5bGVzICcgKyB3eHRfaGVscGVyKHtcblx0XHQneG1sbnM6b2ZmaWNlJzogICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6b2ZmaWNlOjEuMFwiLFxuXHRcdCd4bWxuczp0YWJsZSc6ICAgIFwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDp4bWxuczp0YWJsZToxLjBcIixcblx0XHQneG1sbnM6c3R5bGUnOiAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6c3R5bGU6MS4wXCIsXG5cdFx0J3htbG5zOnRleHQnOiAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOnRleHQ6MS4wXCIsXG5cdFx0J3htbG5zOmRyYXcnOiAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOmRyYXdpbmc6MS4wXCIsXG5cdFx0J3htbG5zOmZvJzogICAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOnhzbC1mby1jb21wYXRpYmxlOjEuMFwiLFxuXHRcdCd4bWxuczp4bGluayc6ICAgIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuXHRcdCd4bWxuczpkYyc6ICAgICAgIFwiaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS9cIixcblx0XHQneG1sbnM6bnVtYmVyJzogICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6ZGF0YXN0eWxlOjEuMFwiLFxuXHRcdCd4bWxuczpzdmcnOiAgICAgIFwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDp4bWxuczpzdmctY29tcGF0aWJsZToxLjBcIixcblx0XHQneG1sbnM6b2YnOiAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6b2Y6MS4yXCIsXG5cdFx0J29mZmljZTp2ZXJzaW9uJzogXCIxLjJcIlxuXHR9KSArICc+JyArIG1hc3Rlcl9zdHlsZXMgKyAnPC9vZmZpY2U6ZG9jdW1lbnQtc3R5bGVzPic7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHdzbygvKjo6d2IsIG9wdHMqLykge1xuXHRcdHJldHVybiBYTUxfSEVBREVSICsgcGF5bG9hZDtcblx0fTtcbn0pKCk7XG52YXIgd3JpdGVfY29udGVudF9vZHMvKjp7KHdiOmFueSwgb3B0czphbnkpOnN0cmluZ30qLyA9IC8qIEBfX1BVUkVfXyAqLyhmdW5jdGlvbigpIHtcblx0LyogNi4xLjIgV2hpdGUgU3BhY2UgQ2hhcmFjdGVycyAqL1xuXHR2YXIgd3JpdGVfdGV4dF9wID0gZnVuY3Rpb24odGV4dC8qOnN0cmluZyovKS8qOnN0cmluZyovIHtcblx0XHRyZXR1cm4gZXNjYXBleG1sKHRleHQpXG5cdFx0XHQucmVwbGFjZSgvICArL2csIGZ1bmN0aW9uKCQkKXtyZXR1cm4gJzx0ZXh0OnMgdGV4dDpjPVwiJyskJC5sZW5ndGgrJ1wiLz4nO30pXG5cdFx0XHQucmVwbGFjZSgvXFx0L2csIFwiPHRleHQ6dGFiLz5cIilcblx0XHRcdC5yZXBsYWNlKC9cXG4vZywgXCI8L3RleHQ6cD48dGV4dDpwPlwiKVxuXHRcdFx0LnJlcGxhY2UoL14gLywgXCI8dGV4dDpzLz5cIikucmVwbGFjZSgvICQvLCBcIjx0ZXh0OnMvPlwiKTtcblx0fTtcblxuXHR2YXIgbnVsbF9jZWxsX3htbCA9ICcgICAgICAgICAgPHRhYmxlOnRhYmxlLWNlbGwgLz5cXG4nO1xuXHR2YXIgY292ZXJlZF9jZWxsX3htbCA9ICcgICAgICAgICAgPHRhYmxlOmNvdmVyZWQtdGFibGUtY2VsbC8+XFxuJztcblx0dmFyIHdyaXRlX3dzID0gZnVuY3Rpb24od3MsIHdiLyo6V29ya2Jvb2sqLywgaS8qOm51bWJlciovLyo6Oiwgb3B0cyovKS8qOnN0cmluZyovIHtcblx0XHQvKiBTZWN0aW9uIDkgVGFibGVzICovXG5cdFx0dmFyIG8vKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0XHRvLnB1c2goJyAgICAgIDx0YWJsZTp0YWJsZSB0YWJsZTpuYW1lPVwiJyArIGVzY2FwZXhtbCh3Yi5TaGVldE5hbWVzW2ldKSArICdcIiB0YWJsZTpzdHlsZS1uYW1lPVwidGExXCI+XFxuJyk7XG5cdFx0dmFyIFI9MCxDPTAsIHJhbmdlID0gZGVjb2RlX3JhbmdlKHdzWychcmVmJ118fFwiQTFcIik7XG5cdFx0dmFyIG1hcnIvKjpBcnJheTxSYW5nZT4qLyA9IHdzWychbWVyZ2VzJ10gfHwgW10sIG1pID0gMDtcblx0XHR2YXIgZGVuc2UgPSBBcnJheS5pc0FycmF5KHdzKTtcblx0XHRpZih3c1tcIiFjb2xzXCJdKSB7XG5cdFx0XHRmb3IoQyA9IDA7IEMgPD0gcmFuZ2UuZS5jOyArK0MpIG8ucHVzaCgnICAgICAgICA8dGFibGU6dGFibGUtY29sdW1uJyArICh3c1tcIiFjb2xzXCJdW0NdID8gJyB0YWJsZTpzdHlsZS1uYW1lPVwiY28nICsgd3NbXCIhY29sc1wiXVtDXS5vZHMgKyAnXCInIDogJycpICsgJz48L3RhYmxlOnRhYmxlLWNvbHVtbj5cXG4nKTtcblx0XHR9XG5cdFx0dmFyIEggPSBcIlwiLCBST1dTID0gd3NbXCIhcm93c1wiXXx8W107XG5cdFx0Zm9yKFIgPSAwOyBSIDwgcmFuZ2Uucy5yOyArK1IpIHtcblx0XHRcdEggPSBST1dTW1JdID8gJyB0YWJsZTpzdHlsZS1uYW1lPVwicm8nICsgUk9XU1tSXS5vZHMgKyAnXCInIDogXCJcIjtcblx0XHRcdG8ucHVzaCgnICAgICAgICA8dGFibGU6dGFibGUtcm93JyArIEggKyAnPjwvdGFibGU6dGFibGUtcm93PlxcbicpO1xuXHRcdH1cblx0XHRmb3IoOyBSIDw9IHJhbmdlLmUucjsgKytSKSB7XG5cdFx0XHRIID0gUk9XU1tSXSA/ICcgdGFibGU6c3R5bGUtbmFtZT1cInJvJyArIFJPV1NbUl0ub2RzICsgJ1wiJyA6IFwiXCI7XG5cdFx0XHRvLnB1c2goJyAgICAgICAgPHRhYmxlOnRhYmxlLXJvdycgKyBIICsgJz5cXG4nKTtcblx0XHRcdGZvcihDPTA7IEMgPCByYW5nZS5zLmM7ICsrQykgby5wdXNoKG51bGxfY2VsbF94bWwpO1xuXHRcdFx0Zm9yKDsgQyA8PSByYW5nZS5lLmM7ICsrQykge1xuXHRcdFx0XHR2YXIgc2tpcCA9IGZhbHNlLCBjdCA9IHt9LCB0ZXh0cCA9IFwiXCI7XG5cdFx0XHRcdGZvcihtaSA9IDA7IG1pICE9IG1hcnIubGVuZ3RoOyArK21pKSB7XG5cdFx0XHRcdFx0aWYobWFyclttaV0ucy5jID4gQykgY29udGludWU7XG5cdFx0XHRcdFx0aWYobWFyclttaV0ucy5yID4gUikgY29udGludWU7XG5cdFx0XHRcdFx0aWYobWFyclttaV0uZS5jIDwgQykgY29udGludWU7XG5cdFx0XHRcdFx0aWYobWFyclttaV0uZS5yIDwgUikgY29udGludWU7XG5cdFx0XHRcdFx0aWYobWFyclttaV0ucy5jICE9IEMgfHwgbWFyclttaV0ucy5yICE9IFIpIHNraXAgPSB0cnVlO1xuXHRcdFx0XHRcdGN0Wyd0YWJsZTpudW1iZXItY29sdW1ucy1zcGFubmVkJ10gPSAobWFyclttaV0uZS5jIC0gbWFyclttaV0ucy5jICsgMSk7XG5cdFx0XHRcdFx0Y3RbJ3RhYmxlOm51bWJlci1yb3dzLXNwYW5uZWQnXSA9ICAgIChtYXJyW21pXS5lLnIgLSBtYXJyW21pXS5zLnIgKyAxKTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRpZihza2lwKSB7IG8ucHVzaChjb3ZlcmVkX2NlbGxfeG1sKTsgY29udGludWU7IH1cblx0XHRcdFx0dmFyIHJlZiA9IGVuY29kZV9jZWxsKHtyOlIsIGM6Q30pLCBjZWxsID0gZGVuc2UgPyAod3NbUl18fFtdKVtDXTogd3NbcmVmXTtcblx0XHRcdFx0aWYoY2VsbCAmJiBjZWxsLmYpIHtcblx0XHRcdFx0XHRjdFsndGFibGU6Zm9ybXVsYSddID0gZXNjYXBleG1sKGNzZl90b19vZHNfZm9ybXVsYShjZWxsLmYpKTtcblx0XHRcdFx0XHRpZihjZWxsLkYpIHtcblx0XHRcdFx0XHRcdGlmKGNlbGwuRi5zbGljZSgwLCByZWYubGVuZ3RoKSA9PSByZWYpIHtcblx0XHRcdFx0XHRcdFx0dmFyIF9GcmVmID0gZGVjb2RlX3JhbmdlKGNlbGwuRik7XG5cdFx0XHRcdFx0XHRcdGN0Wyd0YWJsZTpudW1iZXItbWF0cml4LWNvbHVtbnMtc3Bhbm5lZCddID0gKF9GcmVmLmUuYyAtIF9GcmVmLnMuYyArIDEpO1xuXHRcdFx0XHRcdFx0XHRjdFsndGFibGU6bnVtYmVyLW1hdHJpeC1yb3dzLXNwYW5uZWQnXSA9ICAgIChfRnJlZi5lLnIgLSBfRnJlZi5zLnIgKyAxKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIWNlbGwpIHsgby5wdXNoKG51bGxfY2VsbF94bWwpOyBjb250aW51ZTsgfVxuXHRcdFx0XHRzd2l0Y2goY2VsbC50KSB7XG5cdFx0XHRcdFx0Y2FzZSAnYic6XG5cdFx0XHRcdFx0XHR0ZXh0cCA9IChjZWxsLnYgPyAnVFJVRScgOiAnRkFMU0UnKTtcblx0XHRcdFx0XHRcdGN0WydvZmZpY2U6dmFsdWUtdHlwZSddID0gXCJib29sZWFuXCI7XG5cdFx0XHRcdFx0XHRjdFsnb2ZmaWNlOmJvb2xlYW4tdmFsdWUnXSA9IChjZWxsLnYgPyAndHJ1ZScgOiAnZmFsc2UnKTtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ24nOlxuXHRcdFx0XHRcdFx0dGV4dHAgPSAoY2VsbC53fHxTdHJpbmcoY2VsbC52fHwwKSk7XG5cdFx0XHRcdFx0XHRjdFsnb2ZmaWNlOnZhbHVlLXR5cGUnXSA9IFwiZmxvYXRcIjtcblx0XHRcdFx0XHRcdGN0WydvZmZpY2U6dmFsdWUnXSA9IChjZWxsLnZ8fDApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0Y2FzZSAncyc6IGNhc2UgJ3N0cic6XG5cdFx0XHRcdFx0XHR0ZXh0cCA9IGNlbGwudiA9PSBudWxsID8gXCJcIiA6IGNlbGwudjtcblx0XHRcdFx0XHRcdGN0WydvZmZpY2U6dmFsdWUtdHlwZSddID0gXCJzdHJpbmdcIjtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdGNhc2UgJ2QnOlxuXHRcdFx0XHRcdFx0dGV4dHAgPSAoY2VsbC53fHwocGFyc2VEYXRlKGNlbGwudikudG9JU09TdHJpbmcoKSkpO1xuXHRcdFx0XHRcdFx0Y3RbJ29mZmljZTp2YWx1ZS10eXBlJ10gPSBcImRhdGVcIjtcblx0XHRcdFx0XHRcdGN0WydvZmZpY2U6ZGF0ZS12YWx1ZSddID0gKHBhcnNlRGF0ZShjZWxsLnYpLnRvSVNPU3RyaW5nKCkpO1xuXHRcdFx0XHRcdFx0Y3RbJ3RhYmxlOnN0eWxlLW5hbWUnXSA9IFwiY2UxXCI7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHQvL2Nhc2UgJ2UnOlxuXHRcdFx0XHRcdGRlZmF1bHQ6IG8ucHVzaChudWxsX2NlbGxfeG1sKTsgY29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0dmFyIHRleHRfcCA9IHdyaXRlX3RleHRfcCh0ZXh0cCk7XG5cdFx0XHRcdGlmKGNlbGwubCAmJiBjZWxsLmwuVGFyZ2V0KSB7XG5cdFx0XHRcdFx0dmFyIF90Z3QgPSBjZWxsLmwuVGFyZ2V0O1xuXHRcdFx0XHRcdF90Z3QgPSBfdGd0LmNoYXJBdCgwKSA9PSBcIiNcIiA/IFwiI1wiICsgY3NmX3RvX29kc18zRChfdGd0LnNsaWNlKDEpKSA6IF90Z3Q7XG5cdFx0XHRcdFx0Ly8gVE9ETzogY2hvb3NlIGNvcnJlY3QgcGFyZW50IHBhdGggZm9ybWF0IGJhc2VkIG9uIGxpbmsgZGVsaW1pdGVyc1xuXHRcdFx0XHRcdGlmKF90Z3QuY2hhckF0KDApICE9IFwiI1wiICYmICFfdGd0Lm1hdGNoKC9eXFx3KzovKSkgX3RndCA9ICcuLi8nICsgX3RndDtcblx0XHRcdFx0XHR0ZXh0X3AgPSB3cml0ZXh0YWcoJ3RleHQ6YScsIHRleHRfcCwgeyd4bGluazpocmVmJzogX3RndC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIil9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRvLnB1c2goJyAgICAgICAgICAnICsgd3JpdGV4dGFnKCd0YWJsZTp0YWJsZS1jZWxsJywgd3JpdGV4dGFnKCd0ZXh0OnAnLCB0ZXh0X3AsIHt9KSwgY3QpICsgJ1xcbicpO1xuXHRcdFx0fVxuXHRcdFx0by5wdXNoKCcgICAgICAgIDwvdGFibGU6dGFibGUtcm93PlxcbicpO1xuXHRcdH1cblx0XHRvLnB1c2goJyAgICAgIDwvdGFibGU6dGFibGU+XFxuJyk7XG5cdFx0cmV0dXJuIG8uam9pbihcIlwiKTtcblx0fTtcblxuXHR2YXIgd3JpdGVfYXV0b21hdGljX3N0eWxlc19vZHMgPSBmdW5jdGlvbihvLyo6QXJyYXk8c3RyaW5nPiovLCB3Yikge1xuXHRcdG8ucHVzaCgnIDxvZmZpY2U6YXV0b21hdGljLXN0eWxlcz5cXG4nKTtcblxuXHRcdG8ucHVzaCgnICA8bnVtYmVyOmRhdGUtc3R5bGUgc3R5bGU6bmFtZT1cIk4zN1wiIG51bWJlcjphdXRvbWF0aWMtb3JkZXI9XCJ0cnVlXCI+XFxuJyk7XG5cdFx0by5wdXNoKCcgICA8bnVtYmVyOm1vbnRoIG51bWJlcjpzdHlsZT1cImxvbmdcIi8+XFxuJyk7XG5cdFx0by5wdXNoKCcgICA8bnVtYmVyOnRleHQ+LzwvbnVtYmVyOnRleHQ+XFxuJyk7XG5cdFx0by5wdXNoKCcgICA8bnVtYmVyOmRheSBudW1iZXI6c3R5bGU9XCJsb25nXCIvPlxcbicpO1xuXHRcdG8ucHVzaCgnICAgPG51bWJlcjp0ZXh0Pi88L251bWJlcjp0ZXh0PlxcbicpO1xuXHRcdG8ucHVzaCgnICAgPG51bWJlcjp5ZWFyLz5cXG4nKTtcblx0XHRvLnB1c2goJyAgPC9udW1iZXI6ZGF0ZS1zdHlsZT5cXG4nKTtcblxuXHRcdC8qIGNvbHVtbiBzdHlsZXMgKi9cblx0XHR2YXIgY2lkeCA9IDA7XG5cdFx0d2IuU2hlZXROYW1lcy5tYXAoZnVuY3Rpb24obikgeyByZXR1cm4gd2IuU2hlZXRzW25dOyB9KS5mb3JFYWNoKGZ1bmN0aW9uKHdzKSB7XG5cdFx0XHRpZighd3MpIHJldHVybjtcblx0XHRcdGlmKHdzW1wiIWNvbHNcIl0pIHtcblx0XHRcdFx0Zm9yKHZhciBDID0gMDsgQyA8IHdzW1wiIWNvbHNcIl0ubGVuZ3RoOyArK0MpIGlmKHdzW1wiIWNvbHNcIl1bQ10pIHtcblx0XHRcdFx0XHR2YXIgY29sb2JqID0gd3NbXCIhY29sc1wiXVtDXTtcblx0XHRcdFx0XHRpZihjb2xvYmoud2lkdGggPT0gbnVsbCAmJiBjb2xvYmoud3B4ID09IG51bGwgJiYgY29sb2JqLndjaCA9PSBudWxsKSBjb250aW51ZTtcblx0XHRcdFx0XHRwcm9jZXNzX2NvbChjb2xvYmopO1xuXHRcdFx0XHRcdGNvbG9iai5vZHMgPSBjaWR4O1xuXHRcdFx0XHRcdHZhciB3ID0gd3NbXCIhY29sc1wiXVtDXS53cHggKyBcInB4XCI7XG5cdFx0XHRcdFx0by5wdXNoKCcgIDxzdHlsZTpzdHlsZSBzdHlsZTpuYW1lPVwiY28nICsgY2lkeCArICdcIiBzdHlsZTpmYW1pbHk9XCJ0YWJsZS1jb2x1bW5cIj5cXG4nKTtcblx0XHRcdFx0XHRvLnB1c2goJyAgIDxzdHlsZTp0YWJsZS1jb2x1bW4tcHJvcGVydGllcyBmbzpicmVhay1iZWZvcmU9XCJhdXRvXCIgc3R5bGU6Y29sdW1uLXdpZHRoPVwiJyArIHcgKyAnXCIvPlxcbicpO1xuXHRcdFx0XHRcdG8ucHVzaCgnICA8L3N0eWxlOnN0eWxlPlxcbicpO1xuXHRcdFx0XHRcdCsrY2lkeDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0Lyogcm93IHN0eWxlcyAqL1xuXHRcdHZhciByaWR4ID0gMDtcblx0XHR3Yi5TaGVldE5hbWVzLm1hcChmdW5jdGlvbihuKSB7IHJldHVybiB3Yi5TaGVldHNbbl07IH0pLmZvckVhY2goZnVuY3Rpb24od3MpIHtcblx0XHRcdGlmKCF3cykgcmV0dXJuO1xuXHRcdFx0aWYod3NbXCIhcm93c1wiXSkge1xuXHRcdFx0XHRmb3IodmFyIFIgPSAwOyBSIDwgd3NbXCIhcm93c1wiXS5sZW5ndGg7ICsrUikgaWYod3NbXCIhcm93c1wiXVtSXSkge1xuXHRcdFx0XHRcdHdzW1wiIXJvd3NcIl1bUl0ub2RzID0gcmlkeDtcblx0XHRcdFx0XHR2YXIgaCA9IHdzW1wiIXJvd3NcIl1bUl0uaHB4ICsgXCJweFwiO1xuXHRcdFx0XHRcdG8ucHVzaCgnICA8c3R5bGU6c3R5bGUgc3R5bGU6bmFtZT1cInJvJyArIHJpZHggKyAnXCIgc3R5bGU6ZmFtaWx5PVwidGFibGUtcm93XCI+XFxuJyk7XG5cdFx0XHRcdFx0by5wdXNoKCcgICA8c3R5bGU6dGFibGUtcm93LXByb3BlcnRpZXMgZm86YnJlYWstYmVmb3JlPVwiYXV0b1wiIHN0eWxlOnJvdy1oZWlnaHQ9XCInICsgaCArICdcIi8+XFxuJyk7XG5cdFx0XHRcdFx0by5wdXNoKCcgIDwvc3R5bGU6c3R5bGU+XFxuJyk7XG5cdFx0XHRcdFx0KytyaWR4O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHQvKiB0YWJsZSAqL1xuXHRcdG8ucHVzaCgnICA8c3R5bGU6c3R5bGUgc3R5bGU6bmFtZT1cInRhMVwiIHN0eWxlOmZhbWlseT1cInRhYmxlXCIgc3R5bGU6bWFzdGVyLXBhZ2UtbmFtZT1cIm1wMVwiPlxcbicpO1xuXHRcdG8ucHVzaCgnICAgPHN0eWxlOnRhYmxlLXByb3BlcnRpZXMgdGFibGU6ZGlzcGxheT1cInRydWVcIiBzdHlsZTp3cml0aW5nLW1vZGU9XCJsci10YlwiLz5cXG4nKTtcblx0XHRvLnB1c2goJyAgPC9zdHlsZTpzdHlsZT5cXG4nKTtcblxuXHRcdC8qIHRhYmxlIGNlbGxzLCB0ZXh0ICovXG5cdFx0by5wdXNoKCcgIDxzdHlsZTpzdHlsZSBzdHlsZTpuYW1lPVwiY2UxXCIgc3R5bGU6ZmFtaWx5PVwidGFibGUtY2VsbFwiIHN0eWxlOnBhcmVudC1zdHlsZS1uYW1lPVwiRGVmYXVsdFwiIHN0eWxlOmRhdGEtc3R5bGUtbmFtZT1cIk4zN1wiLz5cXG4nKTtcblxuXHRcdC8qIHBhZ2UtbGF5b3V0ICovXG5cblx0XHRvLnB1c2goJyA8L29mZmljZTphdXRvbWF0aWMtc3R5bGVzPlxcbicpO1xuXHR9O1xuXG5cdHJldHVybiBmdW5jdGlvbiB3Y3god2IsIG9wdHMpIHtcblx0XHR2YXIgbyA9IFtYTUxfSEVBREVSXTtcblx0XHQvKiAzLjEuMy4yICovXG5cdFx0dmFyIGF0dHIgPSB3eHRfaGVscGVyKHtcblx0XHRcdCd4bWxuczpvZmZpY2UnOiAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6b2ZmaWNlOjEuMFwiLFxuXHRcdFx0J3htbG5zOnRhYmxlJzogICAgICAgIFwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDp4bWxuczp0YWJsZToxLjBcIixcblx0XHRcdCd4bWxuczpzdHlsZSc6ICAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6c3R5bGU6MS4wXCIsXG5cdFx0XHQneG1sbnM6dGV4dCc6ICAgICAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOnRleHQ6MS4wXCIsXG5cdFx0XHQneG1sbnM6ZHJhdyc6ICAgICAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOmRyYXdpbmc6MS4wXCIsXG5cdFx0XHQneG1sbnM6Zm8nOiAgICAgICAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOnhzbC1mby1jb21wYXRpYmxlOjEuMFwiLFxuXHRcdFx0J3htbG5zOnhsaW5rJzogICAgICAgIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLFxuXHRcdFx0J3htbG5zOmRjJzogICAgICAgICAgIFwiaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS9cIixcblx0XHRcdCd4bWxuczptZXRhJzogICAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6bWV0YToxLjBcIixcblx0XHRcdCd4bWxuczpudW1iZXInOiAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6ZGF0YXN0eWxlOjEuMFwiLFxuXHRcdFx0J3htbG5zOnByZXNlbnRhdGlvbic6IFwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDp4bWxuczpwcmVzZW50YXRpb246MS4wXCIsXG5cdFx0XHQneG1sbnM6c3ZnJzogICAgICAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOnN2Zy1jb21wYXRpYmxlOjEuMFwiLFxuXHRcdFx0J3htbG5zOmNoYXJ0JzogICAgICAgIFwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDp4bWxuczpjaGFydDoxLjBcIixcblx0XHRcdCd4bWxuczpkcjNkJzogICAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6ZHIzZDoxLjBcIixcblx0XHRcdCd4bWxuczptYXRoJzogICAgICAgICBcImh0dHA6Ly93d3cudzMub3JnLzE5OTgvTWF0aC9NYXRoTUxcIixcblx0XHRcdCd4bWxuczpmb3JtJzogICAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6Zm9ybToxLjBcIixcblx0XHRcdCd4bWxuczpzY3JpcHQnOiAgICAgICBcInVybjpvYXNpczpuYW1lczp0YzpvcGVuZG9jdW1lbnQ6eG1sbnM6c2NyaXB0OjEuMFwiLFxuXHRcdFx0J3htbG5zOm9vbyc6ICAgICAgICAgIFwiaHR0cDovL29wZW5vZmZpY2Uub3JnLzIwMDQvb2ZmaWNlXCIsXG5cdFx0XHQneG1sbnM6b29vdyc6ICAgICAgICAgXCJodHRwOi8vb3Blbm9mZmljZS5vcmcvMjAwNC93cml0ZXJcIixcblx0XHRcdCd4bWxuczpvb29jJzogICAgICAgICBcImh0dHA6Ly9vcGVub2ZmaWNlLm9yZy8yMDA0L2NhbGNcIixcblx0XHRcdCd4bWxuczpkb20nOiAgICAgICAgICBcImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiLFxuXHRcdFx0J3htbG5zOnhmb3Jtcyc6ICAgICAgIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMi94Zm9ybXNcIixcblx0XHRcdCd4bWxuczp4c2QnOiAgICAgICAgICBcImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hXCIsXG5cdFx0XHQneG1sbnM6eHNpJzogICAgICAgICAgXCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYS1pbnN0YW5jZVwiLFxuXHRcdFx0J3htbG5zOnNoZWV0JzogICAgICAgIFwidXJuOm9hc2lzOm5hbWVzOnRjOm9wZW5kb2N1bWVudDpzaDMzdGpzOjEuMFwiLFxuXHRcdFx0J3htbG5zOnJwdCc6ICAgICAgICAgIFwiaHR0cDovL29wZW5vZmZpY2Uub3JnLzIwMDUvcmVwb3J0XCIsXG5cdFx0XHQneG1sbnM6b2YnOiAgICAgICAgICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOm9mOjEuMlwiLFxuXHRcdFx0J3htbG5zOnhodG1sJzogICAgICAgIFwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLFxuXHRcdFx0J3htbG5zOmdyZGRsJzogICAgICAgIFwiaHR0cDovL3d3dy53My5vcmcvMjAwMy9nL2RhdGEtdmlldyNcIixcblx0XHRcdCd4bWxuczp0YWJsZW9vbyc6ICAgICBcImh0dHA6Ly9vcGVub2ZmaWNlLm9yZy8yMDA5L3RhYmxlXCIsXG5cdFx0XHQneG1sbnM6ZHJhd29vbyc6ICAgICAgXCJodHRwOi8vb3Blbm9mZmljZS5vcmcvMjAxMC9kcmF3XCIsXG5cdFx0XHQneG1sbnM6Y2FsY2V4dCc6ICAgICAgXCJ1cm46b3JnOmRvY3VtZW50Zm91bmRhdGlvbjpuYW1lczpleHBlcmltZW50YWw6Y2FsYzp4bWxuczpjYWxjZXh0OjEuMFwiLFxuXHRcdFx0J3htbG5zOmxvZXh0JzogICAgICAgIFwidXJuOm9yZzpkb2N1bWVudGZvdW5kYXRpb246bmFtZXM6ZXhwZXJpbWVudGFsOm9mZmljZTp4bWxuczpsb2V4dDoxLjBcIixcblx0XHRcdCd4bWxuczpmaWVsZCc6ICAgICAgICBcInVybjpvcGVub2ZmaWNlOm5hbWVzOmV4cGVyaW1lbnRhbDpvb28tbXMtaW50ZXJvcDp4bWxuczpmaWVsZDoxLjBcIixcblx0XHRcdCd4bWxuczpmb3JteCc6ICAgICAgICBcInVybjpvcGVub2ZmaWNlOm5hbWVzOmV4cGVyaW1lbnRhbDpvb3htbC1vZGYtaW50ZXJvcDp4bWxuczpmb3JtOjEuMFwiLFxuXHRcdFx0J3htbG5zOmNzczN0JzogICAgICAgIFwiaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy10ZXh0L1wiLFxuXHRcdFx0J29mZmljZTp2ZXJzaW9uJzogICAgIFwiMS4yXCJcblx0XHR9KTtcblxuXHRcdHZhciBmb2RzID0gd3h0X2hlbHBlcih7XG5cdFx0XHQneG1sbnM6Y29uZmlnJzogICAgXCJ1cm46b2FzaXM6bmFtZXM6dGM6b3BlbmRvY3VtZW50OnhtbG5zOmNvbmZpZzoxLjBcIixcblx0XHRcdCdvZmZpY2U6bWltZXR5cGUnOiBcImFwcGxpY2F0aW9uL3ZuZC5vYXNpcy5vcGVuZG9jdW1lbnQuc3ByZWFkc2hlZXRcIlxuXHRcdH0pO1xuXG5cdFx0aWYob3B0cy5ib29rVHlwZSA9PSBcImZvZHNcIikge1xuXHRcdFx0by5wdXNoKCc8b2ZmaWNlOmRvY3VtZW50JyArIGF0dHIgKyBmb2RzICsgJz5cXG4nKTtcblx0XHRcdG8ucHVzaCh3cml0ZV9tZXRhX29kcygpLnJlcGxhY2UoL29mZmljZTpkb2N1bWVudC1tZXRhL2csIFwib2ZmaWNlOm1ldGFcIikpO1xuXHRcdFx0Ly8gVE9ETzogc2V0dGluZ3MgKGVxdWl2IG9mIHNldHRpbmdzLnhtbCBmb3IgT0RTKVxuXHRcdH0gZWxzZSBvLnB1c2goJzxvZmZpY2U6ZG9jdW1lbnQtY29udGVudCcgKyBhdHRyICArICc+XFxuJyk7XG5cdFx0Ly8gby5wdXNoKCcgIDxvZmZpY2U6c2NyaXB0cy8+XFxuJyk7XG5cdFx0d3JpdGVfYXV0b21hdGljX3N0eWxlc19vZHMobywgd2IpO1xuXHRcdG8ucHVzaCgnICA8b2ZmaWNlOmJvZHk+XFxuJyk7XG5cdFx0by5wdXNoKCcgICAgPG9mZmljZTpzcHJlYWRzaGVldD5cXG4nKTtcblx0XHRmb3IodmFyIGkgPSAwOyBpICE9IHdiLlNoZWV0TmFtZXMubGVuZ3RoOyArK2kpIG8ucHVzaCh3cml0ZV93cyh3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1tpXV0sIHdiLCBpLCBvcHRzKSk7XG5cdFx0by5wdXNoKCcgICAgPC9vZmZpY2U6c3ByZWFkc2hlZXQ+XFxuJyk7XG5cdFx0by5wdXNoKCcgIDwvb2ZmaWNlOmJvZHk+XFxuJyk7XG5cdFx0aWYob3B0cy5ib29rVHlwZSA9PSBcImZvZHNcIikgby5wdXNoKCc8L29mZmljZTpkb2N1bWVudD4nKTtcblx0XHRlbHNlIG8ucHVzaCgnPC9vZmZpY2U6ZG9jdW1lbnQtY29udGVudD4nKTtcblx0XHRyZXR1cm4gby5qb2luKFwiXCIpO1xuXHR9O1xufSkoKTtcblxuZnVuY3Rpb24gd3JpdGVfb2RzKHdiLyo6YW55Ki8sIG9wdHMvKjphbnkqLykge1xuXHRpZihvcHRzLmJvb2tUeXBlID09IFwiZm9kc1wiKSByZXR1cm4gd3JpdGVfY29udGVudF9vZHMod2IsIG9wdHMpO1xuXG5cdHZhciB6aXAgPSB6aXBfbmV3KCk7XG5cdHZhciBmID0gXCJcIjtcblxuXHR2YXIgbWFuaWZlc3QvKjpBcnJheTxBcnJheTxzdHJpbmc+ID4qLyA9IFtdO1xuXHR2YXIgcmRmLyo6QXJyYXk8W3N0cmluZywgc3RyaW5nXT4qLyA9IFtdO1xuXG5cdC8qIFBhcnQgMyBTZWN0aW9uIDMuMyBNSU1FIE1lZGlhIFR5cGUgKi9cblx0ZiA9IFwibWltZXR5cGVcIjtcblx0emlwX2FkZF9maWxlKHppcCwgZiwgXCJhcHBsaWNhdGlvbi92bmQub2FzaXMub3BlbmRvY3VtZW50LnNwcmVhZHNoZWV0XCIpO1xuXG5cdC8qIFBhcnQgMSBTZWN0aW9uIDIuMiBEb2N1bWVudHMgKi9cblx0ZiA9IFwiY29udGVudC54bWxcIjtcblx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfY29udGVudF9vZHMod2IsIG9wdHMpKTtcblx0bWFuaWZlc3QucHVzaChbZiwgXCJ0ZXh0L3htbFwiXSk7XG5cdHJkZi5wdXNoKFtmLCBcIkNvbnRlbnRGaWxlXCJdKTtcblxuXHQvKiBUT0RPOiB0aGVzZSBhcmUgaGFyZC1jb2RlZCBzdHlsZXMgdG8gc2F0aWF0ZSBleGNlbCAqL1xuXHRmID0gXCJzdHlsZXMueG1sXCI7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX3N0eWxlc19vZHMod2IsIG9wdHMpKTtcblx0bWFuaWZlc3QucHVzaChbZiwgXCJ0ZXh0L3htbFwiXSk7XG5cdHJkZi5wdXNoKFtmLCBcIlN0eWxlc0ZpbGVcIl0pO1xuXG5cdC8qIFRPRE86IHRoaXMgaXMgaGFyZC1jb2RlZCB0byBzYXRpYXRlIGV4Y2VsICovXG5cdGYgPSBcIm1ldGEueG1sXCI7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIFhNTF9IRUFERVIgKyB3cml0ZV9tZXRhX29kcygvKjo6d2IsIG9wdHMqLykpO1xuXHRtYW5pZmVzdC5wdXNoKFtmLCBcInRleHQveG1sXCJdKTtcblx0cmRmLnB1c2goW2YsIFwiTWV0YWRhdGFGaWxlXCJdKTtcblxuXHQvKiBQYXJ0IDMgU2VjdGlvbiA2IE1ldGFkYXRhIE1hbmlmZXN0IEZpbGUgKi9cblx0ZiA9IFwibWFuaWZlc3QucmRmXCI7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX3JkZihyZGYvKiwgb3B0cyovKSk7XG5cdG1hbmlmZXN0LnB1c2goW2YsIFwiYXBwbGljYXRpb24vcmRmK3htbFwiXSk7XG5cblx0LyogUGFydCAzIFNlY3Rpb24gNCBNYW5pZmVzdCBGaWxlICovXG5cdGYgPSBcIk1FVEEtSU5GL21hbmlmZXN0LnhtbFwiO1xuXHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3cml0ZV9tYW5pZmVzdChtYW5pZmVzdC8qLCBvcHRzKi8pKTtcblxuXHRyZXR1cm4gemlwO1xufVxuXG4vKiEgc2hlZXRqcyAoQykgMjAxMy1wcmVzZW50IFNoZWV0SlMgLS0gaHR0cDovL3NoZWV0anMuY29tICovXG5mdW5jdGlvbiB1OF90b19kYXRhdmlldyhhcnJheSkge1xuICByZXR1cm4gbmV3IERhdGFWaWV3KGFycmF5LmJ1ZmZlciwgYXJyYXkuYnl0ZU9mZnNldCwgYXJyYXkuYnl0ZUxlbmd0aCk7XG59XG5mdW5jdGlvbiB1OHN0cih1OCkge1xuICByZXR1cm4gdHlwZW9mIFRleHREZWNvZGVyICE9IFwidW5kZWZpbmVkXCIgPyBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUodTgpIDogdXRmOHJlYWQoYTJzKHU4KSk7XG59XG5mdW5jdGlvbiBzdHJ1OChzdHIpIHtcbiAgcmV0dXJuIHR5cGVvZiBUZXh0RW5jb2RlciAhPSBcInVuZGVmaW5lZFwiID8gbmV3IFRleHRFbmNvZGVyKCkuZW5jb2RlKHN0cikgOiBzMmEodXRmOHdyaXRlKHN0cikpO1xufVxuZnVuY3Rpb24gdThjb250YWlucyhib2R5LCBzZWFyY2gpIHtcbiAgb3V0ZXI6XG4gICAgZm9yICh2YXIgTCA9IDA7IEwgPD0gYm9keS5sZW5ndGggLSBzZWFyY2gubGVuZ3RoOyArK0wpIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgc2VhcmNoLmxlbmd0aDsgKytqKVxuICAgICAgICBpZiAoYm9keVtMICsgal0gIT0gc2VhcmNoW2pdKVxuICAgICAgICAgIGNvbnRpbnVlIG91dGVyO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiB1OGNvbmNhdCh1OGEpIHtcbiAgdmFyIGxlbiA9IHU4YS5yZWR1Y2UoZnVuY3Rpb24oYWNjLCB4KSB7XG4gICAgcmV0dXJuIGFjYyArIHgubGVuZ3RoO1xuICB9LCAwKTtcbiAgdmFyIG91dCA9IG5ldyBVaW50OEFycmF5KGxlbik7XG4gIHZhciBvZmYgPSAwO1xuICB1OGEuZm9yRWFjaChmdW5jdGlvbih1OCkge1xuICAgIG91dC5zZXQodTgsIG9mZik7XG4gICAgb2ZmICs9IHU4Lmxlbmd0aDtcbiAgfSk7XG4gIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBwb3BjbnQoeCkge1xuICB4IC09IHggPj4gMSAmIDE0MzE2NTU3NjU7XG4gIHggPSAoeCAmIDg1ODk5MzQ1OSkgKyAoeCA+PiAyICYgODU4OTkzNDU5KTtcbiAgcmV0dXJuICh4ICsgKHggPj4gNCkgJiAyNTI2NDUxMzUpICogMTY4NDMwMDkgPj4+IDI0O1xufVxuZnVuY3Rpb24gcmVhZERlY2ltYWwxMjhMRShidWYsIG9mZnNldCkge1xuICB2YXIgZXhwID0gKGJ1ZltvZmZzZXQgKyAxNV0gJiAxMjcpIDw8IDcgfCBidWZbb2Zmc2V0ICsgMTRdID4+IDE7XG4gIHZhciBtYW50aXNzYSA9IGJ1ZltvZmZzZXQgKyAxNF0gJiAxO1xuICBmb3IgKHZhciBqID0gb2Zmc2V0ICsgMTM7IGogPj0gb2Zmc2V0OyAtLWopXG4gICAgbWFudGlzc2EgPSBtYW50aXNzYSAqIDI1NiArIGJ1ZltqXTtcbiAgcmV0dXJuIChidWZbb2Zmc2V0ICsgMTVdICYgMTI4ID8gLW1hbnRpc3NhIDogbWFudGlzc2EpICogTWF0aC5wb3coMTAsIGV4cCAtIDYxNzYpO1xufVxuZnVuY3Rpb24gd3JpdGVEZWNpbWFsMTI4TEUoYnVmLCBvZmZzZXQsIHZhbHVlKSB7XG4gIHZhciBleHAgPSBNYXRoLmZsb29yKHZhbHVlID09IDAgPyAwIDogTWF0aC5MT0cxMEUgKiBNYXRoLmxvZyhNYXRoLmFicyh2YWx1ZSkpKSArIDYxNzYgLSAyMDtcbiAgdmFyIG1hbnRpc3NhID0gdmFsdWUgLyBNYXRoLnBvdygxMCwgZXhwIC0gNjE3Nik7XG4gIGJ1ZltvZmZzZXQgKyAxNV0gfD0gZXhwID4+IDc7XG4gIGJ1ZltvZmZzZXQgKyAxNF0gfD0gKGV4cCAmIDEyNykgPDwgMTtcbiAgZm9yICh2YXIgaSA9IDA7IG1hbnRpc3NhID49IDE7ICsraSwgbWFudGlzc2EgLz0gMjU2KVxuICAgIGJ1ZltvZmZzZXQgKyBpXSA9IG1hbnRpc3NhICYgMjU1O1xuICBidWZbb2Zmc2V0ICsgMTVdIHw9IHZhbHVlID49IDAgPyAwIDogMTI4O1xufVxuZnVuY3Rpb24gcGFyc2VfdmFyaW50NDkoYnVmLCBwdHIpIHtcbiAgdmFyIGwgPSBwdHIgPyBwdHJbMF0gOiAwO1xuICB2YXIgdXN6ID0gYnVmW2xdICYgMTI3O1xuICB2YXJpbnQ6XG4gICAgaWYgKGJ1ZltsKytdID49IDEyOCkge1xuICAgICAgdXN6IHw9IChidWZbbF0gJiAxMjcpIDw8IDc7XG4gICAgICBpZiAoYnVmW2wrK10gPCAxMjgpXG4gICAgICAgIGJyZWFrIHZhcmludDtcbiAgICAgIHVzeiB8PSAoYnVmW2xdICYgMTI3KSA8PCAxNDtcbiAgICAgIGlmIChidWZbbCsrXSA8IDEyOClcbiAgICAgICAgYnJlYWsgdmFyaW50O1xuICAgICAgdXN6IHw9IChidWZbbF0gJiAxMjcpIDw8IDIxO1xuICAgICAgaWYgKGJ1ZltsKytdIDwgMTI4KVxuICAgICAgICBicmVhayB2YXJpbnQ7XG4gICAgICB1c3ogKz0gKGJ1ZltsXSAmIDEyNykgKiBNYXRoLnBvdygyLCAyOCk7XG4gICAgICArK2w7XG4gICAgICBpZiAoYnVmW2wrK10gPCAxMjgpXG4gICAgICAgIGJyZWFrIHZhcmludDtcbiAgICAgIHVzeiArPSAoYnVmW2xdICYgMTI3KSAqIE1hdGgucG93KDIsIDM1KTtcbiAgICAgICsrbDtcbiAgICAgIGlmIChidWZbbCsrXSA8IDEyOClcbiAgICAgICAgYnJlYWsgdmFyaW50O1xuICAgICAgdXN6ICs9IChidWZbbF0gJiAxMjcpICogTWF0aC5wb3coMiwgNDIpO1xuICAgICAgKytsO1xuICAgICAgaWYgKGJ1ZltsKytdIDwgMTI4KVxuICAgICAgICBicmVhayB2YXJpbnQ7XG4gICAgfVxuICBpZiAocHRyKVxuICAgIHB0clswXSA9IGw7XG4gIHJldHVybiB1c3o7XG59XG5mdW5jdGlvbiB3cml0ZV92YXJpbnQ0OSh2KSB7XG4gIHZhciB1c3ogPSBuZXcgVWludDhBcnJheSg3KTtcbiAgdXN6WzBdID0gdiAmIDEyNztcbiAgdmFyIEwgPSAxO1xuICBzejpcbiAgICBpZiAodiA+IDEyNykge1xuICAgICAgdXN6W0wgLSAxXSB8PSAxMjg7XG4gICAgICB1c3pbTF0gPSB2ID4+IDcgJiAxMjc7XG4gICAgICArK0w7XG4gICAgICBpZiAodiA8PSAxNjM4MylcbiAgICAgICAgYnJlYWsgc3o7XG4gICAgICB1c3pbTCAtIDFdIHw9IDEyODtcbiAgICAgIHVzeltMXSA9IHYgPj4gMTQgJiAxMjc7XG4gICAgICArK0w7XG4gICAgICBpZiAodiA8PSAyMDk3MTUxKVxuICAgICAgICBicmVhayBzejtcbiAgICAgIHVzeltMIC0gMV0gfD0gMTI4O1xuICAgICAgdXN6W0xdID0gdiA+PiAyMSAmIDEyNztcbiAgICAgICsrTDtcbiAgICAgIGlmICh2IDw9IDI2ODQzNTQ1NSlcbiAgICAgICAgYnJlYWsgc3o7XG4gICAgICB1c3pbTCAtIDFdIHw9IDEyODtcbiAgICAgIHVzeltMXSA9IHYgLyAyNTYgPj4+IDIxICYgMTI3O1xuICAgICAgKytMO1xuICAgICAgaWYgKHYgPD0gMzQzNTk3MzgzNjcpXG4gICAgICAgIGJyZWFrIHN6O1xuICAgICAgdXN6W0wgLSAxXSB8PSAxMjg7XG4gICAgICB1c3pbTF0gPSB2IC8gNjU1MzYgPj4+IDIxICYgMTI3O1xuICAgICAgKytMO1xuICAgICAgaWYgKHYgPD0gNDM5ODA0NjUxMTEwMylcbiAgICAgICAgYnJlYWsgc3o7XG4gICAgICB1c3pbTCAtIDFdIHw9IDEyODtcbiAgICAgIHVzeltMXSA9IHYgLyAxNjc3NzIxNiA+Pj4gMjEgJiAxMjc7XG4gICAgICArK0w7XG4gICAgfVxuICByZXR1cm4gdXN6LnNsaWNlKDAsIEwpO1xufVxuZnVuY3Rpb24gdmFyaW50X3RvX2kzMihidWYpIHtcbiAgdmFyIGwgPSAwLCBpMzIgPSBidWZbbF0gJiAxMjc7XG4gIHZhcmludDpcbiAgICBpZiAoYnVmW2wrK10gPj0gMTI4KSB7XG4gICAgICBpMzIgfD0gKGJ1ZltsXSAmIDEyNykgPDwgNztcbiAgICAgIGlmIChidWZbbCsrXSA8IDEyOClcbiAgICAgICAgYnJlYWsgdmFyaW50O1xuICAgICAgaTMyIHw9IChidWZbbF0gJiAxMjcpIDw8IDE0O1xuICAgICAgaWYgKGJ1ZltsKytdIDwgMTI4KVxuICAgICAgICBicmVhayB2YXJpbnQ7XG4gICAgICBpMzIgfD0gKGJ1ZltsXSAmIDEyNykgPDwgMjE7XG4gICAgICBpZiAoYnVmW2wrK10gPCAxMjgpXG4gICAgICAgIGJyZWFrIHZhcmludDtcbiAgICAgIGkzMiB8PSAoYnVmW2xdICYgMTI3KSA8PCAyODtcbiAgICB9XG4gIHJldHVybiBpMzI7XG59XG5mdW5jdGlvbiBwYXJzZV9zaGFsbG93KGJ1Zikge1xuICB2YXIgb3V0ID0gW10sIHB0ciA9IFswXTtcbiAgd2hpbGUgKHB0clswXSA8IGJ1Zi5sZW5ndGgpIHtcbiAgICB2YXIgb2ZmID0gcHRyWzBdO1xuICAgIHZhciBudW0gPSBwYXJzZV92YXJpbnQ0OShidWYsIHB0cik7XG4gICAgdmFyIHR5cGUgPSBudW0gJiA3O1xuICAgIG51bSA9IE1hdGguZmxvb3IobnVtIC8gOCk7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgdmFyIHJlcztcbiAgICBpZiAobnVtID09IDApXG4gICAgICBicmVhaztcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgMDpcbiAgICAgICAge1xuICAgICAgICAgIHZhciBsID0gcHRyWzBdO1xuICAgICAgICAgIHdoaWxlIChidWZbcHRyWzBdKytdID49IDEyOClcbiAgICAgICAgICAgIDtcbiAgICAgICAgICByZXMgPSBidWYuc2xpY2UobCwgcHRyWzBdKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgNTpcbiAgICAgICAgbGVuID0gNDtcbiAgICAgICAgcmVzID0gYnVmLnNsaWNlKHB0clswXSwgcHRyWzBdICsgbGVuKTtcbiAgICAgICAgcHRyWzBdICs9IGxlbjtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGxlbiA9IDg7XG4gICAgICAgIHJlcyA9IGJ1Zi5zbGljZShwdHJbMF0sIHB0clswXSArIGxlbik7XG4gICAgICAgIHB0clswXSArPSBsZW47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAyOlxuICAgICAgICBsZW4gPSBwYXJzZV92YXJpbnQ0OShidWYsIHB0cik7XG4gICAgICAgIHJlcyA9IGJ1Zi5zbGljZShwdHJbMF0sIHB0clswXSArIGxlbik7XG4gICAgICAgIHB0clswXSArPSBsZW47XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAzOlxuICAgICAgY2FzZSA0OlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiUEIgVHlwZSBcIi5jb25jYXQodHlwZSwgXCIgZm9yIEZpZWxkIFwiKS5jb25jYXQobnVtLCBcIiBhdCBvZmZzZXQgXCIpLmNvbmNhdChvZmYpKTtcbiAgICB9XG4gICAgdmFyIHYgPSB7IGRhdGE6IHJlcywgdHlwZTogdHlwZSB9O1xuICAgIGlmIChvdXRbbnVtXSA9PSBudWxsKVxuICAgICAgb3V0W251bV0gPSBbdl07XG4gICAgZWxzZVxuICAgICAgb3V0W251bV0ucHVzaCh2KTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuZnVuY3Rpb24gd3JpdGVfc2hhbGxvdyhwcm90bykge1xuICB2YXIgb3V0ID0gW107XG4gIHByb3RvLmZvckVhY2goZnVuY3Rpb24oZmllbGQsIGlkeCkge1xuICAgIGZpZWxkLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgaWYgKCFpdGVtLmRhdGEpXG4gICAgICAgIHJldHVybjtcbiAgICAgIG91dC5wdXNoKHdyaXRlX3ZhcmludDQ5KGlkeCAqIDggKyBpdGVtLnR5cGUpKTtcbiAgICAgIGlmIChpdGVtLnR5cGUgPT0gMilcbiAgICAgICAgb3V0LnB1c2god3JpdGVfdmFyaW50NDkoaXRlbS5kYXRhLmxlbmd0aCkpO1xuICAgICAgb3V0LnB1c2goaXRlbS5kYXRhKTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiB1OGNvbmNhdChvdXQpO1xufVxuZnVuY3Rpb24gbWFwcGEoZGF0YSwgY2IpIHtcbiAgcmV0dXJuIChkYXRhID09IG51bGwgPyB2b2lkIDAgOiBkYXRhLm1hcChmdW5jdGlvbihkKSB7XG4gICAgcmV0dXJuIGNiKGQuZGF0YSk7XG4gIH0pKSB8fCBbXTtcbn1cbmZ1bmN0aW9uIHBhcnNlX2l3YV9maWxlKGJ1Zikge1xuICB2YXIgX2E7XG4gIHZhciBvdXQgPSBbXSwgcHRyID0gWzBdO1xuICB3aGlsZSAocHRyWzBdIDwgYnVmLmxlbmd0aCkge1xuICAgIHZhciBsZW4gPSBwYXJzZV92YXJpbnQ0OShidWYsIHB0cik7XG4gICAgdmFyIGFpID0gcGFyc2Vfc2hhbGxvdyhidWYuc2xpY2UocHRyWzBdLCBwdHJbMF0gKyBsZW4pKTtcbiAgICBwdHJbMF0gKz0gbGVuO1xuICAgIHZhciByZXMgPSB7XG4gICAgICBpZDogdmFyaW50X3RvX2kzMihhaVsxXVswXS5kYXRhKSxcbiAgICAgIG1lc3NhZ2VzOiBbXVxuICAgIH07XG4gICAgYWlbMl0uZm9yRWFjaChmdW5jdGlvbihiKSB7XG4gICAgICB2YXIgbWkgPSBwYXJzZV9zaGFsbG93KGIuZGF0YSk7XG4gICAgICB2YXIgZmwgPSB2YXJpbnRfdG9faTMyKG1pWzNdWzBdLmRhdGEpO1xuICAgICAgcmVzLm1lc3NhZ2VzLnB1c2goe1xuICAgICAgICBtZXRhOiBtaSxcbiAgICAgICAgZGF0YTogYnVmLnNsaWNlKHB0clswXSwgcHRyWzBdICsgZmwpXG4gICAgICB9KTtcbiAgICAgIHB0clswXSArPSBmbDtcbiAgICB9KTtcbiAgICBpZiAoKF9hID0gYWlbM10pID09IG51bGwgPyB2b2lkIDAgOiBfYVswXSlcbiAgICAgIHJlcy5tZXJnZSA9IHZhcmludF90b19pMzIoYWlbM11bMF0uZGF0YSkgPj4+IDAgPiAwO1xuICAgIG91dC5wdXNoKHJlcyk7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHdyaXRlX2l3YV9maWxlKGlhcykge1xuICB2YXIgYnVmcyA9IFtdO1xuICBpYXMuZm9yRWFjaChmdW5jdGlvbihpYSkge1xuICAgIHZhciBhaSA9IFtdO1xuICAgIGFpWzFdID0gW3sgZGF0YTogd3JpdGVfdmFyaW50NDkoaWEuaWQpLCB0eXBlOiAwIH1dO1xuICAgIGFpWzJdID0gW107XG4gICAgaWYgKGlhLm1lcmdlICE9IG51bGwpXG4gICAgICBhaVszXSA9IFt7IGRhdGE6IHdyaXRlX3ZhcmludDQ5KCshIWlhLm1lcmdlKSwgdHlwZTogMCB9XTtcbiAgICB2YXIgbWlkYXRhID0gW107XG4gICAgaWEubWVzc2FnZXMuZm9yRWFjaChmdW5jdGlvbihtaSkge1xuICAgICAgbWlkYXRhLnB1c2gobWkuZGF0YSk7XG4gICAgICBtaS5tZXRhWzNdID0gW3sgdHlwZTogMCwgZGF0YTogd3JpdGVfdmFyaW50NDkobWkuZGF0YS5sZW5ndGgpIH1dO1xuICAgICAgYWlbMl0ucHVzaCh7IGRhdGE6IHdyaXRlX3NoYWxsb3cobWkubWV0YSksIHR5cGU6IDIgfSk7XG4gICAgfSk7XG4gICAgdmFyIGFpcGF5bG9hZCA9IHdyaXRlX3NoYWxsb3coYWkpO1xuICAgIGJ1ZnMucHVzaCh3cml0ZV92YXJpbnQ0OShhaXBheWxvYWQubGVuZ3RoKSk7XG4gICAgYnVmcy5wdXNoKGFpcGF5bG9hZCk7XG4gICAgbWlkYXRhLmZvckVhY2goZnVuY3Rpb24obWlkKSB7XG4gICAgICByZXR1cm4gYnVmcy5wdXNoKG1pZCk7XG4gICAgfSk7XG4gIH0pO1xuICByZXR1cm4gdThjb25jYXQoYnVmcyk7XG59XG5mdW5jdGlvbiBwYXJzZV9zbmFwcHlfY2h1bmsodHlwZSwgYnVmKSB7XG4gIGlmICh0eXBlICE9IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBTbmFwcHkgY2h1bmsgdHlwZSBcIi5jb25jYXQodHlwZSkpO1xuICB2YXIgcHRyID0gWzBdO1xuICB2YXIgdXN6ID0gcGFyc2VfdmFyaW50NDkoYnVmLCBwdHIpO1xuICB2YXIgY2h1bmtzID0gW107XG4gIHdoaWxlIChwdHJbMF0gPCBidWYubGVuZ3RoKSB7XG4gICAgdmFyIHRhZyA9IGJ1ZltwdHJbMF1dICYgMztcbiAgICBpZiAodGFnID09IDApIHtcbiAgICAgIHZhciBsZW4gPSBidWZbcHRyWzBdKytdID4+IDI7XG4gICAgICBpZiAobGVuIDwgNjApXG4gICAgICAgICsrbGVuO1xuICAgICAgZWxzZSB7XG4gICAgICAgIHZhciBjID0gbGVuIC0gNTk7XG4gICAgICAgIGxlbiA9IGJ1ZltwdHJbMF1dO1xuICAgICAgICBpZiAoYyA+IDEpXG4gICAgICAgICAgbGVuIHw9IGJ1ZltwdHJbMF0gKyAxXSA8PCA4O1xuICAgICAgICBpZiAoYyA+IDIpXG4gICAgICAgICAgbGVuIHw9IGJ1ZltwdHJbMF0gKyAyXSA8PCAxNjtcbiAgICAgICAgaWYgKGMgPiAzKVxuICAgICAgICAgIGxlbiB8PSBidWZbcHRyWzBdICsgM10gPDwgMjQ7XG4gICAgICAgIGxlbiA+Pj49IDA7XG4gICAgICAgIGxlbisrO1xuICAgICAgICBwdHJbMF0gKz0gYztcbiAgICAgIH1cbiAgICAgIGNodW5rcy5wdXNoKGJ1Zi5zbGljZShwdHJbMF0sIHB0clswXSArIGxlbikpO1xuICAgICAgcHRyWzBdICs9IGxlbjtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb2Zmc2V0ID0gMCwgbGVuZ3RoID0gMDtcbiAgICAgIGlmICh0YWcgPT0gMSkge1xuICAgICAgICBsZW5ndGggPSAoYnVmW3B0clswXV0gPj4gMiAmIDcpICsgNDtcbiAgICAgICAgb2Zmc2V0ID0gKGJ1ZltwdHJbMF0rK10gJiAyMjQpIDw8IDM7XG4gICAgICAgIG9mZnNldCB8PSBidWZbcHRyWzBdKytdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGVuZ3RoID0gKGJ1ZltwdHJbMF0rK10gPj4gMikgKyAxO1xuICAgICAgICBpZiAodGFnID09IDIpIHtcbiAgICAgICAgICBvZmZzZXQgPSBidWZbcHRyWzBdXSB8IGJ1ZltwdHJbMF0gKyAxXSA8PCA4O1xuICAgICAgICAgIHB0clswXSArPSAyO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG9mZnNldCA9IChidWZbcHRyWzBdXSB8IGJ1ZltwdHJbMF0gKyAxXSA8PCA4IHwgYnVmW3B0clswXSArIDJdIDw8IDE2IHwgYnVmW3B0clswXSArIDNdIDw8IDI0KSA+Pj4gMDtcbiAgICAgICAgICBwdHJbMF0gKz0gNDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY2h1bmtzID0gW3U4Y29uY2F0KGNodW5rcyldO1xuICAgICAgaWYgKG9mZnNldCA9PSAwKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9mZnNldCAwXCIpO1xuICAgICAgaWYgKG9mZnNldCA+IGNodW5rc1swXS5sZW5ndGgpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb2Zmc2V0IGJleW9uZCBsZW5ndGhcIik7XG4gICAgICBpZiAobGVuZ3RoID49IG9mZnNldCkge1xuICAgICAgICBjaHVua3MucHVzaChjaHVua3NbMF0uc2xpY2UoLW9mZnNldCkpO1xuICAgICAgICBsZW5ndGggLT0gb2Zmc2V0O1xuICAgICAgICB3aGlsZSAobGVuZ3RoID49IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMV0ubGVuZ3RoKSB7XG4gICAgICAgICAgY2h1bmtzLnB1c2goY2h1bmtzW2NodW5rcy5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgbGVuZ3RoIC09IGNodW5rc1tjaHVua3MubGVuZ3RoIC0gMV0ubGVuZ3RoO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBjaHVua3MucHVzaChjaHVua3NbMF0uc2xpY2UoLW9mZnNldCwgLW9mZnNldCArIGxlbmd0aCkpO1xuICAgIH1cbiAgfVxuICB2YXIgbyA9IHU4Y29uY2F0KGNodW5rcyk7XG4gIGlmIChvLmxlbmd0aCAhPSB1c3opXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCBsZW5ndGg6IFwiLmNvbmNhdChvLmxlbmd0aCwgXCIgIT0gXCIpLmNvbmNhdCh1c3opKTtcbiAgcmV0dXJuIG87XG59XG5mdW5jdGlvbiBkZWNvbXByZXNzX2l3YV9maWxlKGJ1Zikge1xuICB2YXIgb3V0ID0gW107XG4gIHZhciBsID0gMDtcbiAgd2hpbGUgKGwgPCBidWYubGVuZ3RoKSB7XG4gICAgdmFyIHQgPSBidWZbbCsrXTtcbiAgICB2YXIgbGVuID0gYnVmW2xdIHwgYnVmW2wgKyAxXSA8PCA4IHwgYnVmW2wgKyAyXSA8PCAxNjtcbiAgICBsICs9IDM7XG4gICAgb3V0LnB1c2gocGFyc2Vfc25hcHB5X2NodW5rKHQsIGJ1Zi5zbGljZShsLCBsICsgbGVuKSkpO1xuICAgIGwgKz0gbGVuO1xuICB9XG4gIGlmIChsICE9PSBidWYubGVuZ3RoKVxuICAgIHRocm93IG5ldyBFcnJvcihcImRhdGEgaXMgbm90IGEgdmFsaWQgZnJhbWVkIHN0cmVhbSFcIik7XG4gIHJldHVybiB1OGNvbmNhdChvdXQpO1xufVxuZnVuY3Rpb24gY29tcHJlc3NfaXdhX2ZpbGUoYnVmKSB7XG4gIHZhciBvdXQgPSBbXTtcbiAgdmFyIGwgPSAwO1xuICB3aGlsZSAobCA8IGJ1Zi5sZW5ndGgpIHtcbiAgICB2YXIgYyA9IE1hdGgubWluKGJ1Zi5sZW5ndGggLSBsLCAyNjg0MzU0NTUpO1xuICAgIHZhciBmcmFtZSA9IG5ldyBVaW50OEFycmF5KDQpO1xuICAgIG91dC5wdXNoKGZyYW1lKTtcbiAgICB2YXIgdXN6ID0gd3JpdGVfdmFyaW50NDkoYyk7XG4gICAgdmFyIEwgPSB1c3oubGVuZ3RoO1xuICAgIG91dC5wdXNoKHVzeik7XG4gICAgaWYgKGMgPD0gNjApIHtcbiAgICAgIEwrKztcbiAgICAgIG91dC5wdXNoKG5ldyBVaW50OEFycmF5KFtjIC0gMSA8PCAyXSkpO1xuICAgIH0gZWxzZSBpZiAoYyA8PSAyNTYpIHtcbiAgICAgIEwgKz0gMjtcbiAgICAgIG91dC5wdXNoKG5ldyBVaW50OEFycmF5KFsyNDAsIGMgLSAxICYgMjU1XSkpO1xuICAgIH0gZWxzZSBpZiAoYyA8PSA2NTUzNikge1xuICAgICAgTCArPSAzO1xuICAgICAgb3V0LnB1c2gobmV3IFVpbnQ4QXJyYXkoWzI0NCwgYyAtIDEgJiAyNTUsIGMgLSAxID4+IDggJiAyNTVdKSk7XG4gICAgfSBlbHNlIGlmIChjIDw9IDE2Nzc3MjE2KSB7XG4gICAgICBMICs9IDQ7XG4gICAgICBvdXQucHVzaChuZXcgVWludDhBcnJheShbMjQ4LCBjIC0gMSAmIDI1NSwgYyAtIDEgPj4gOCAmIDI1NSwgYyAtIDEgPj4gMTYgJiAyNTVdKSk7XG4gICAgfSBlbHNlIGlmIChjIDw9IDQyOTQ5NjcyOTYpIHtcbiAgICAgIEwgKz0gNTtcbiAgICAgIG91dC5wdXNoKG5ldyBVaW50OEFycmF5KFsyNTIsIGMgLSAxICYgMjU1LCBjIC0gMSA+PiA4ICYgMjU1LCBjIC0gMSA+PiAxNiAmIDI1NSwgYyAtIDEgPj4+IDI0ICYgMjU1XSkpO1xuICAgIH1cbiAgICBvdXQucHVzaChidWYuc2xpY2UobCwgbCArIGMpKTtcbiAgICBMICs9IGM7XG4gICAgZnJhbWVbMF0gPSAwO1xuICAgIGZyYW1lWzFdID0gTCAmIDI1NTtcbiAgICBmcmFtZVsyXSA9IEwgPj4gOCAmIDI1NTtcbiAgICBmcmFtZVszXSA9IEwgPj4gMTYgJiAyNTU7XG4gICAgbCArPSBjO1xuICB9XG4gIHJldHVybiB1OGNvbmNhdChvdXQpO1xufVxuZnVuY3Rpb24gcGFyc2Vfb2xkX3N0b3JhZ2UoYnVmLCBzc3QsIHJzc3QsIHYpIHtcbiAgdmFyIGR2ID0gdThfdG9fZGF0YXZpZXcoYnVmKTtcbiAgdmFyIGZsYWdzID0gZHYuZ2V0VWludDMyKDQsIHRydWUpO1xuICB2YXIgZGF0YV9vZmZzZXQgPSAodiA+IDEgPyAxMiA6IDgpICsgcG9wY250KGZsYWdzICYgKHYgPiAxID8gMzQ3MCA6IDM5OCkpICogNDtcbiAgdmFyIHJpZHggPSAtMSwgc2lkeCA9IC0xLCBpZWVlID0gTmFOLCBkdCA9IG5ldyBEYXRlKDIwMDEsIDAsIDEpO1xuICBpZiAoZmxhZ3MgJiA1MTIpIHtcbiAgICByaWR4ID0gZHYuZ2V0VWludDMyKGRhdGFfb2Zmc2V0LCB0cnVlKTtcbiAgICBkYXRhX29mZnNldCArPSA0O1xuICB9XG4gIGRhdGFfb2Zmc2V0ICs9IHBvcGNudChmbGFncyAmICh2ID4gMSA/IDEyMjg4IDogNDA5NikpICogNDtcbiAgaWYgKGZsYWdzICYgMTYpIHtcbiAgICBzaWR4ID0gZHYuZ2V0VWludDMyKGRhdGFfb2Zmc2V0LCB0cnVlKTtcbiAgICBkYXRhX29mZnNldCArPSA0O1xuICB9XG4gIGlmIChmbGFncyAmIDMyKSB7XG4gICAgaWVlZSA9IGR2LmdldEZsb2F0NjQoZGF0YV9vZmZzZXQsIHRydWUpO1xuICAgIGRhdGFfb2Zmc2V0ICs9IDg7XG4gIH1cbiAgaWYgKGZsYWdzICYgNjQpIHtcbiAgICBkdC5zZXRUaW1lKGR0LmdldFRpbWUoKSArIGR2LmdldEZsb2F0NjQoZGF0YV9vZmZzZXQsIHRydWUpICogMWUzKTtcbiAgICBkYXRhX29mZnNldCArPSA4O1xuICB9XG4gIHZhciByZXQ7XG4gIHN3aXRjaCAoYnVmWzJdKSB7XG4gICAgY2FzZSAwOlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgcmV0ID0geyB0OiBcIm5cIiwgdjogaWVlZSB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0ID0geyB0OiBcInNcIiwgdjogc3N0W3NpZHhdIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlIDU6XG4gICAgICByZXQgPSB7IHQ6IFwiZFwiLCB2OiBkdCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA2OlxuICAgICAgcmV0ID0geyB0OiBcImJcIiwgdjogaWVlZSA+IDAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNzpcbiAgICAgIHJldCA9IHsgdDogXCJuXCIsIHY6IGllZWUgLyA4NjQwMCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA4OlxuICAgICAgcmV0ID0geyB0OiBcImVcIiwgdjogMCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA5OlxuICAgICAge1xuICAgICAgICBpZiAocmlkeCA+IC0xKVxuICAgICAgICAgIHJldCA9IHsgdDogXCJzXCIsIHY6IHJzc3RbcmlkeF0gfTtcbiAgICAgICAgZWxzZSBpZiAoc2lkeCA+IC0xKVxuICAgICAgICAgIHJldCA9IHsgdDogXCJzXCIsIHY6IHNzdFtzaWR4XSB9O1xuICAgICAgICBlbHNlIGlmICghaXNOYU4oaWVlZSkpXG4gICAgICAgICAgcmV0ID0geyB0OiBcIm5cIiwgdjogaWVlZSB9O1xuICAgICAgICBlbHNlXG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgY2VsbCB0eXBlIFwiLmNvbmNhdChidWYuc2xpY2UoMCwgNCkpKTtcbiAgICAgIH1cbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBjZWxsIHR5cGUgXCIuY29uY2F0KGJ1Zi5zbGljZSgwLCA0KSkpO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5mdW5jdGlvbiBwYXJzZV9uZXdfc3RvcmFnZShidWYsIHNzdCwgcnNzdCkge1xuICB2YXIgZHYgPSB1OF90b19kYXRhdmlldyhidWYpO1xuICB2YXIgZmxhZ3MgPSBkdi5nZXRVaW50MzIoOCwgdHJ1ZSk7XG4gIHZhciBkYXRhX29mZnNldCA9IDEyO1xuICB2YXIgcmlkeCA9IC0xLCBzaWR4ID0gLTEsIGQxMjggPSBOYU4sIGllZWUgPSBOYU4sIGR0ID0gbmV3IERhdGUoMjAwMSwgMCwgMSk7XG4gIGlmIChmbGFncyAmIDEpIHtcbiAgICBkMTI4ID0gcmVhZERlY2ltYWwxMjhMRShidWYsIGRhdGFfb2Zmc2V0KTtcbiAgICBkYXRhX29mZnNldCArPSAxNjtcbiAgfVxuICBpZiAoZmxhZ3MgJiAyKSB7XG4gICAgaWVlZSA9IGR2LmdldEZsb2F0NjQoZGF0YV9vZmZzZXQsIHRydWUpO1xuICAgIGRhdGFfb2Zmc2V0ICs9IDg7XG4gIH1cbiAgaWYgKGZsYWdzICYgNCkge1xuICAgIGR0LnNldFRpbWUoZHQuZ2V0VGltZSgpICsgZHYuZ2V0RmxvYXQ2NChkYXRhX29mZnNldCwgdHJ1ZSkgKiAxZTMpO1xuICAgIGRhdGFfb2Zmc2V0ICs9IDg7XG4gIH1cbiAgaWYgKGZsYWdzICYgOCkge1xuICAgIHNpZHggPSBkdi5nZXRVaW50MzIoZGF0YV9vZmZzZXQsIHRydWUpO1xuICAgIGRhdGFfb2Zmc2V0ICs9IDQ7XG4gIH1cbiAgaWYgKGZsYWdzICYgMTYpIHtcbiAgICByaWR4ID0gZHYuZ2V0VWludDMyKGRhdGFfb2Zmc2V0LCB0cnVlKTtcbiAgICBkYXRhX29mZnNldCArPSA0O1xuICB9XG4gIHZhciByZXQ7XG4gIHN3aXRjaCAoYnVmWzFdKSB7XG4gICAgY2FzZSAwOlxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAyOlxuICAgICAgcmV0ID0geyB0OiBcIm5cIiwgdjogZDEyOCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAzOlxuICAgICAgcmV0ID0geyB0OiBcInNcIiwgdjogc3N0W3NpZHhdIH07XG4gICAgICBicmVhaztcbiAgICBjYXNlIDU6XG4gICAgICByZXQgPSB7IHQ6IFwiZFwiLCB2OiBkdCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA2OlxuICAgICAgcmV0ID0geyB0OiBcImJcIiwgdjogaWVlZSA+IDAgfTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgNzpcbiAgICAgIHJldCA9IHsgdDogXCJuXCIsIHY6IGllZWUgLyA4NjQwMCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA4OlxuICAgICAgcmV0ID0geyB0OiBcImVcIiwgdjogMCB9O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSA5OlxuICAgICAge1xuICAgICAgICBpZiAocmlkeCA+IC0xKVxuICAgICAgICAgIHJldCA9IHsgdDogXCJzXCIsIHY6IHJzc3RbcmlkeF0gfTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIGNlbGwgdHlwZSBcIi5jb25jYXQoYnVmWzFdLCBcIiA6IFwiKS5jb25jYXQoZmxhZ3MgJiAzMSwgXCIgOiBcIikuY29uY2F0KGJ1Zi5zbGljZSgwLCA0KSkpO1xuICAgICAgfVxuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMDpcbiAgICAgIHJldCA9IHsgdDogXCJuXCIsIHY6IGQxMjggfTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCBjZWxsIHR5cGUgXCIuY29uY2F0KGJ1ZlsxXSwgXCIgOiBcIikuY29uY2F0KGZsYWdzICYgMzEsIFwiIDogXCIpLmNvbmNhdChidWYuc2xpY2UoMCwgNCkpKTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuZnVuY3Rpb24gd3JpdGVfbmV3X3N0b3JhZ2UoY2VsbCwgc3N0KSB7XG4gIHZhciBvdXQgPSBuZXcgVWludDhBcnJheSgzMiksIGR2ID0gdThfdG9fZGF0YXZpZXcob3V0KSwgbCA9IDEyLCBmbGFncyA9IDA7XG4gIG91dFswXSA9IDU7XG4gIHN3aXRjaCAoY2VsbC50KSB7XG4gICAgY2FzZSBcIm5cIjpcbiAgICAgIG91dFsxXSA9IDI7XG4gICAgICB3cml0ZURlY2ltYWwxMjhMRShvdXQsIGwsIGNlbGwudik7XG4gICAgICBmbGFncyB8PSAxO1xuICAgICAgbCArPSAxNjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJiXCI6XG4gICAgICBvdXRbMV0gPSA2O1xuICAgICAgZHYuc2V0RmxvYXQ2NChsLCBjZWxsLnYgPyAxIDogMCwgdHJ1ZSk7XG4gICAgICBmbGFncyB8PSAyO1xuICAgICAgbCArPSA4O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcInNcIjpcbiAgICAgIGlmIChzc3QuaW5kZXhPZihjZWxsLnYpID09IC0xKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJWYWx1ZSBcIi5jb25jYXQoY2VsbC52LCBcIiBtaXNzaW5nIGZyb20gU1NUIVwiKSk7XG4gICAgICBvdXRbMV0gPSAzO1xuICAgICAgZHYuc2V0VWludDMyKGwsIHNzdC5pbmRleE9mKGNlbGwudiksIHRydWUpO1xuICAgICAgZmxhZ3MgfD0gODtcbiAgICAgIGwgKz0gNDtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICB0aHJvdyBcInVuc3VwcG9ydGVkIGNlbGwgdHlwZSBcIiArIGNlbGwudDtcbiAgfVxuICBkdi5zZXRVaW50MzIoOCwgZmxhZ3MsIHRydWUpO1xuICByZXR1cm4gb3V0LnNsaWNlKDAsIGwpO1xufVxuZnVuY3Rpb24gd3JpdGVfb2xkX3N0b3JhZ2UoY2VsbCwgc3N0KSB7XG4gIHZhciBvdXQgPSBuZXcgVWludDhBcnJheSgzMiksIGR2ID0gdThfdG9fZGF0YXZpZXcob3V0KSwgbCA9IDEyLCBmbGFncyA9IDA7XG4gIG91dFswXSA9IDM7XG4gIHN3aXRjaCAoY2VsbC50KSB7XG4gICAgY2FzZSBcIm5cIjpcbiAgICAgIG91dFsyXSA9IDI7XG4gICAgICBkdi5zZXRGbG9hdDY0KGwsIGNlbGwudiwgdHJ1ZSk7XG4gICAgICBmbGFncyB8PSAzMjtcbiAgICAgIGwgKz0gODtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJiXCI6XG4gICAgICBvdXRbMl0gPSA2O1xuICAgICAgZHYuc2V0RmxvYXQ2NChsLCBjZWxsLnYgPyAxIDogMCwgdHJ1ZSk7XG4gICAgICBmbGFncyB8PSAzMjtcbiAgICAgIGwgKz0gODtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJzXCI6XG4gICAgICBpZiAoc3N0LmluZGV4T2YoY2VsbC52KSA9PSAtMSlcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVmFsdWUgXCIuY29uY2F0KGNlbGwudiwgXCIgbWlzc2luZyBmcm9tIFNTVCFcIikpO1xuICAgICAgb3V0WzJdID0gMztcbiAgICAgIGR2LnNldFVpbnQzMihsLCBzc3QuaW5kZXhPZihjZWxsLnYpLCB0cnVlKTtcbiAgICAgIGZsYWdzIHw9IDE2O1xuICAgICAgbCArPSA0O1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IFwidW5zdXBwb3J0ZWQgY2VsbCB0eXBlIFwiICsgY2VsbC50O1xuICB9XG4gIGR2LnNldFVpbnQzMig0LCBmbGFncywgdHJ1ZSk7XG4gIHJldHVybiBvdXQuc2xpY2UoMCwgbCk7XG59XG5mdW5jdGlvbiBwYXJzZV9jZWxsX3N0b3JhZ2UoYnVmLCBzc3QsIHJzc3QpIHtcbiAgc3dpdGNoIChidWZbMF0pIHtcbiAgICBjYXNlIDA6XG4gICAgY2FzZSAxOlxuICAgIGNhc2UgMjpcbiAgICBjYXNlIDM6XG4gICAgICByZXR1cm4gcGFyc2Vfb2xkX3N0b3JhZ2UoYnVmLCBzc3QsIHJzc3QsIGJ1ZlswXSk7XG4gICAgY2FzZSA1OlxuICAgICAgcmV0dXJuIHBhcnNlX25ld19zdG9yYWdlKGJ1Ziwgc3N0LCByc3N0KTtcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgcGF5bG9hZCB2ZXJzaW9uIFwiLmNvbmNhdChidWZbMF0pKTtcbiAgfVxufVxuZnVuY3Rpb24gcGFyc2VfVFNQX1JlZmVyZW5jZShidWYpIHtcbiAgdmFyIHBiID0gcGFyc2Vfc2hhbGxvdyhidWYpO1xuICByZXR1cm4gcGFyc2VfdmFyaW50NDkocGJbMV1bMF0uZGF0YSk7XG59XG5mdW5jdGlvbiB3cml0ZV9UU1BfUmVmZXJlbmNlKGlkeCkge1xuICB2YXIgb3V0ID0gW107XG4gIG91dFsxXSA9IFt7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KGlkeCkgfV07XG4gIHJldHVybiB3cml0ZV9zaGFsbG93KG91dCk7XG59XG5mdW5jdGlvbiBwYXJzZV9UU1RfVGFibGVEYXRhTGlzdChNLCByb290KSB7XG4gIHZhciBwYiA9IHBhcnNlX3NoYWxsb3cocm9vdC5kYXRhKTtcbiAgdmFyIHR5cGUgPSB2YXJpbnRfdG9faTMyKHBiWzFdWzBdLmRhdGEpO1xuICB2YXIgZW50cmllcyA9IHBiWzNdO1xuICB2YXIgZGF0YSA9IFtdO1xuICAoZW50cmllcyB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbihlbnRyeSkge1xuICAgIHZhciBsZSA9IHBhcnNlX3NoYWxsb3coZW50cnkuZGF0YSk7XG4gICAgdmFyIGtleSA9IHZhcmludF90b19pMzIobGVbMV1bMF0uZGF0YSkgPj4+IDA7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlIDE6XG4gICAgICAgIGRhdGFba2V5XSA9IHU4c3RyKGxlWzNdWzBdLmRhdGEpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgODpcbiAgICAgICAge1xuICAgICAgICAgIHZhciBydCA9IE1bcGFyc2VfVFNQX1JlZmVyZW5jZShsZVs5XVswXS5kYXRhKV1bMF07XG4gICAgICAgICAgdmFyIHJ0cCA9IHBhcnNlX3NoYWxsb3cocnQuZGF0YSk7XG4gICAgICAgICAgdmFyIHJ0cHJlZiA9IE1bcGFyc2VfVFNQX1JlZmVyZW5jZShydHBbMV1bMF0uZGF0YSldWzBdO1xuICAgICAgICAgIHZhciBtdHlwZSA9IHZhcmludF90b19pMzIocnRwcmVmLm1ldGFbMV1bMF0uZGF0YSk7XG4gICAgICAgICAgaWYgKG10eXBlICE9IDIwMDEpXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCIyMDAwIHVuZXhwZWN0ZWQgcmVmZXJlbmNlIHRvIFwiLmNvbmNhdChtdHlwZSkpO1xuICAgICAgICAgIHZhciB0c3dwc2EgPSBwYXJzZV9zaGFsbG93KHJ0cHJlZi5kYXRhKTtcbiAgICAgICAgICBkYXRhW2tleV0gPSB0c3dwc2FbM10ubWFwKGZ1bmN0aW9uKHgpIHtcbiAgICAgICAgICAgIHJldHVybiB1OHN0cih4LmRhdGEpO1xuICAgICAgICAgIH0pLmpvaW4oXCJcIik7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGRhdGE7XG59XG5mdW5jdGlvbiBwYXJzZV9UU1RfVGlsZVJvd0luZm8odTgsIHR5cGUpIHtcbiAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2YsIF9nLCBfaCwgX2ksIF9qLCBfaywgX2wsIF9tLCBfbjtcbiAgdmFyIHBiID0gcGFyc2Vfc2hhbGxvdyh1OCk7XG4gIHZhciBSID0gdmFyaW50X3RvX2kzMihwYlsxXVswXS5kYXRhKSA+Pj4gMDtcbiAgdmFyIGNudCA9IHZhcmludF90b19pMzIocGJbMl1bMF0uZGF0YSkgPj4+IDA7XG4gIHZhciB3aWRlX29mZnNldHMgPSAoKF9iID0gKF9hID0gcGJbOF0pID09IG51bGwgPyB2b2lkIDAgOiBfYVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLmRhdGEpICYmIHZhcmludF90b19pMzIocGJbOF1bMF0uZGF0YSkgPiAwIHx8IGZhbHNlO1xuICB2YXIgdXNlZF9zdG9yYWdlX3U4LCB1c2VkX3N0b3JhZ2U7XG4gIGlmICgoKF9kID0gKF9jID0gcGJbN10pID09IG51bGwgPyB2b2lkIDAgOiBfY1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kLmRhdGEpICYmIHR5cGUgIT0gMCkge1xuICAgIHVzZWRfc3RvcmFnZV91OCA9IChfZiA9IChfZSA9IHBiWzddKSA9PSBudWxsID8gdm9pZCAwIDogX2VbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfZi5kYXRhO1xuICAgIHVzZWRfc3RvcmFnZSA9IChfaCA9IChfZyA9IHBiWzZdKSA9PSBudWxsID8gdm9pZCAwIDogX2dbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfaC5kYXRhO1xuICB9IGVsc2UgaWYgKCgoX2ogPSAoX2kgPSBwYls0XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9pWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2ouZGF0YSkgJiYgdHlwZSAhPSAxKSB7XG4gICAgdXNlZF9zdG9yYWdlX3U4ID0gKF9sID0gKF9rID0gcGJbNF0pID09IG51bGwgPyB2b2lkIDAgOiBfa1swXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9sLmRhdGE7XG4gICAgdXNlZF9zdG9yYWdlID0gKF9uID0gKF9tID0gcGJbM10pID09IG51bGwgPyB2b2lkIDAgOiBfbVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9uLmRhdGE7XG4gIH0gZWxzZVxuICAgIHRocm93IFwiTlVNQkVSUyBUaWxlIG1pc3NpbmcgXCIuY29uY2F0KHR5cGUsIFwiIGNlbGwgc3RvcmFnZVwiKTtcbiAgdmFyIHdpZHRoID0gd2lkZV9vZmZzZXRzID8gNCA6IDE7XG4gIHZhciB1c2VkX3N0b3JhZ2Vfb2Zmc2V0cyA9IHU4X3RvX2RhdGF2aWV3KHVzZWRfc3RvcmFnZV91OCk7XG4gIHZhciBvZmZzZXRzID0gW107XG4gIGZvciAodmFyIEMgPSAwOyBDIDwgdXNlZF9zdG9yYWdlX3U4Lmxlbmd0aCAvIDI7ICsrQykge1xuICAgIHZhciBvZmYgPSB1c2VkX3N0b3JhZ2Vfb2Zmc2V0cy5nZXRVaW50MTYoQyAqIDIsIHRydWUpO1xuICAgIGlmIChvZmYgPCA2NTUzNSlcbiAgICAgIG9mZnNldHMucHVzaChbQywgb2ZmXSk7XG4gIH1cbiAgaWYgKG9mZnNldHMubGVuZ3RoICE9IGNudClcbiAgICB0aHJvdyBcIkV4cGVjdGVkIFwiLmNvbmNhdChjbnQsIFwiIGNlbGxzLCBmb3VuZCBcIikuY29uY2F0KG9mZnNldHMubGVuZ3RoKTtcbiAgdmFyIGNlbGxzID0gW107XG4gIGZvciAoQyA9IDA7IEMgPCBvZmZzZXRzLmxlbmd0aCAtIDE7ICsrQylcbiAgICBjZWxsc1tvZmZzZXRzW0NdWzBdXSA9IHVzZWRfc3RvcmFnZS5zdWJhcnJheShvZmZzZXRzW0NdWzFdICogd2lkdGgsIG9mZnNldHNbQyArIDFdWzFdICogd2lkdGgpO1xuICBpZiAob2Zmc2V0cy5sZW5ndGggPj0gMSlcbiAgICBjZWxsc1tvZmZzZXRzW29mZnNldHMubGVuZ3RoIC0gMV1bMF1dID0gdXNlZF9zdG9yYWdlLnN1YmFycmF5KG9mZnNldHNbb2Zmc2V0cy5sZW5ndGggLSAxXVsxXSAqIHdpZHRoKTtcbiAgcmV0dXJuIHsgUjogUiwgY2VsbHM6IGNlbGxzIH07XG59XG5mdW5jdGlvbiBwYXJzZV9UU1RfVGlsZShNLCByb290KSB7XG4gIHZhciBfYTtcbiAgdmFyIHBiID0gcGFyc2Vfc2hhbGxvdyhyb290LmRhdGEpO1xuICB2YXIgc3RvcmFnZSA9ICgoX2EgPSBwYiA9PSBudWxsID8gdm9pZCAwIDogcGJbN10pID09IG51bGwgPyB2b2lkIDAgOiBfYVswXSkgPyB2YXJpbnRfdG9faTMyKHBiWzddWzBdLmRhdGEpID4+PiAwID4gMCA/IDEgOiAwIDogLTE7XG4gIHZhciByaSA9IG1hcHBhKHBiWzVdLCBmdW5jdGlvbih1OCkge1xuICAgIHJldHVybiBwYXJzZV9UU1RfVGlsZVJvd0luZm8odTgsIHN0b3JhZ2UpO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICBucm93czogdmFyaW50X3RvX2kzMihwYls0XVswXS5kYXRhKSA+Pj4gMCxcbiAgICBkYXRhOiByaS5yZWR1Y2UoZnVuY3Rpb24oYWNjLCB4KSB7XG4gICAgICBpZiAoIWFjY1t4LlJdKVxuICAgICAgICBhY2NbeC5SXSA9IFtdO1xuICAgICAgeC5jZWxscy5mb3JFYWNoKGZ1bmN0aW9uKGNlbGwsIEMpIHtcbiAgICAgICAgaWYgKGFjY1t4LlJdW0NdKVxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZSBjZWxsIHI9XCIuY29uY2F0KHguUiwgXCIgYz1cIikuY29uY2F0KEMpKTtcbiAgICAgICAgYWNjW3guUl1bQ10gPSBjZWxsO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYWNjO1xuICAgIH0sIFtdKVxuICB9O1xufVxuZnVuY3Rpb24gcGFyc2VfVFNUX1RhYmxlTW9kZWxBcmNoaXZlKE0sIHJvb3QsIHdzKSB7XG4gIHZhciBfYTtcbiAgdmFyIHBiID0gcGFyc2Vfc2hhbGxvdyhyb290LmRhdGEpO1xuICB2YXIgcmFuZ2UgPSB7IHM6IHsgcjogMCwgYzogMCB9LCBlOiB7IHI6IDAsIGM6IDAgfSB9O1xuICByYW5nZS5lLnIgPSAodmFyaW50X3RvX2kzMihwYls2XVswXS5kYXRhKSA+Pj4gMCkgLSAxO1xuICBpZiAocmFuZ2UuZS5yIDwgMClcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHJvdyB2YXJpbnQgXCIuY29uY2F0KHBiWzZdWzBdLmRhdGEpKTtcbiAgcmFuZ2UuZS5jID0gKHZhcmludF90b19pMzIocGJbN11bMF0uZGF0YSkgPj4+IDApIC0gMTtcbiAgaWYgKHJhbmdlLmUuYyA8IDApXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBjb2wgdmFyaW50IFwiLmNvbmNhdChwYls3XVswXS5kYXRhKSk7XG4gIHdzW1wiIXJlZlwiXSA9IGVuY29kZV9yYW5nZShyYW5nZSk7XG4gIHZhciBzdG9yZSA9IHBhcnNlX3NoYWxsb3cocGJbNF1bMF0uZGF0YSk7XG4gIHZhciBzc3QgPSBwYXJzZV9UU1RfVGFibGVEYXRhTGlzdChNLCBNW3BhcnNlX1RTUF9SZWZlcmVuY2Uoc3RvcmVbNF1bMF0uZGF0YSldWzBdKTtcbiAgdmFyIHJzc3QgPSAoKF9hID0gc3RvcmVbMTddKSA9PSBudWxsID8gdm9pZCAwIDogX2FbMF0pID8gcGFyc2VfVFNUX1RhYmxlRGF0YUxpc3QoTSwgTVtwYXJzZV9UU1BfUmVmZXJlbmNlKHN0b3JlWzE3XVswXS5kYXRhKV1bMF0pIDogW107XG4gIHZhciB0aWxlID0gcGFyc2Vfc2hhbGxvdyhzdG9yZVszXVswXS5kYXRhKTtcbiAgdmFyIF9SID0gMDtcbiAgdGlsZVsxXS5mb3JFYWNoKGZ1bmN0aW9uKHQpIHtcbiAgICB2YXIgdGwgPSBwYXJzZV9zaGFsbG93KHQuZGF0YSk7XG4gICAgdmFyIHJlZiA9IE1bcGFyc2VfVFNQX1JlZmVyZW5jZSh0bFsyXVswXS5kYXRhKV1bMF07XG4gICAgdmFyIG10eXBlID0gdmFyaW50X3RvX2kzMihyZWYubWV0YVsxXVswXS5kYXRhKTtcbiAgICBpZiAobXR5cGUgIT0gNjAwMilcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIjYwMDEgdW5leHBlY3RlZCByZWZlcmVuY2UgdG8gXCIuY29uY2F0KG10eXBlKSk7XG4gICAgdmFyIF90aWxlID0gcGFyc2VfVFNUX1RpbGUoTSwgcmVmKTtcbiAgICBfdGlsZS5kYXRhLmZvckVhY2goZnVuY3Rpb24ocm93LCBSKSB7XG4gICAgICByb3cuZm9yRWFjaChmdW5jdGlvbihidWYsIEMpIHtcbiAgICAgICAgdmFyIGFkZHIgPSBlbmNvZGVfY2VsbCh7IHI6IF9SICsgUiwgYzogQyB9KTtcbiAgICAgICAgdmFyIHJlcyA9IHBhcnNlX2NlbGxfc3RvcmFnZShidWYsIHNzdCwgcnNzdCk7XG4gICAgICAgIGlmIChyZXMpXG4gICAgICAgICAgd3NbYWRkcl0gPSByZXM7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBfUiArPSBfdGlsZS5ucm93cztcbiAgfSk7XG59XG5mdW5jdGlvbiBwYXJzZV9UU1RfVGFibGVJbmZvQXJjaGl2ZShNLCByb290KSB7XG4gIHZhciBwYiA9IHBhcnNlX3NoYWxsb3cocm9vdC5kYXRhKTtcbiAgdmFyIG91dCA9IHsgXCIhcmVmXCI6IFwiQTFcIiB9O1xuICB2YXIgdGFibGVyZWYgPSBNW3BhcnNlX1RTUF9SZWZlcmVuY2UocGJbMl1bMF0uZGF0YSldO1xuICB2YXIgbXR5cGUgPSB2YXJpbnRfdG9faTMyKHRhYmxlcmVmWzBdLm1ldGFbMV1bMF0uZGF0YSk7XG4gIGlmIChtdHlwZSAhPSA2MDAxKVxuICAgIHRocm93IG5ldyBFcnJvcihcIjYwMDAgdW5leHBlY3RlZCByZWZlcmVuY2UgdG8gXCIuY29uY2F0KG10eXBlKSk7XG4gIHBhcnNlX1RTVF9UYWJsZU1vZGVsQXJjaGl2ZShNLCB0YWJsZXJlZlswXSwgb3V0KTtcbiAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHBhcnNlX1ROX1NoZWV0QXJjaGl2ZShNLCByb290KSB7XG4gIHZhciBfYTtcbiAgdmFyIHBiID0gcGFyc2Vfc2hhbGxvdyhyb290LmRhdGEpO1xuICB2YXIgb3V0ID0ge1xuICAgIG5hbWU6ICgoX2EgPSBwYlsxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hWzBdKSA/IHU4c3RyKHBiWzFdWzBdLmRhdGEpIDogXCJcIixcbiAgICBzaGVldHM6IFtdXG4gIH07XG4gIHZhciBzaGFwZW9mZnMgPSBtYXBwYShwYlsyXSwgcGFyc2VfVFNQX1JlZmVyZW5jZSk7XG4gIHNoYXBlb2Zmcy5mb3JFYWNoKGZ1bmN0aW9uKG9mZikge1xuICAgIE1bb2ZmXS5mb3JFYWNoKGZ1bmN0aW9uKG0pIHtcbiAgICAgIHZhciBtdHlwZSA9IHZhcmludF90b19pMzIobS5tZXRhWzFdWzBdLmRhdGEpO1xuICAgICAgaWYgKG10eXBlID09IDZlMylcbiAgICAgICAgb3V0LnNoZWV0cy5wdXNoKHBhcnNlX1RTVF9UYWJsZUluZm9BcmNoaXZlKE0sIG0pKTtcbiAgICB9KTtcbiAgfSk7XG4gIHJldHVybiBvdXQ7XG59XG5mdW5jdGlvbiBwYXJzZV9UTl9Eb2N1bWVudEFyY2hpdmUoTSwgcm9vdCkge1xuICB2YXIgb3V0ID0gYm9va19uZXcoKTtcbiAgdmFyIHBiID0gcGFyc2Vfc2hhbGxvdyhyb290LmRhdGEpO1xuICB2YXIgc2hlZXRvZmZzID0gbWFwcGEocGJbMV0sIHBhcnNlX1RTUF9SZWZlcmVuY2UpO1xuICBzaGVldG9mZnMuZm9yRWFjaChmdW5jdGlvbihvZmYpIHtcbiAgICBNW29mZl0uZm9yRWFjaChmdW5jdGlvbihtKSB7XG4gICAgICB2YXIgbXR5cGUgPSB2YXJpbnRfdG9faTMyKG0ubWV0YVsxXVswXS5kYXRhKTtcbiAgICAgIGlmIChtdHlwZSA9PSAyKSB7XG4gICAgICAgIHZhciByb290MiA9IHBhcnNlX1ROX1NoZWV0QXJjaGl2ZShNLCBtKTtcbiAgICAgICAgcm9vdDIuc2hlZXRzLmZvckVhY2goZnVuY3Rpb24oc2hlZXQsIGlkeCkge1xuICAgICAgICAgIGJvb2tfYXBwZW5kX3NoZWV0KG91dCwgc2hlZXQsIGlkeCA9PSAwID8gcm9vdDIubmFtZSA6IHJvb3QyLm5hbWUgKyBcIl9cIiArIGlkeCwgdHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgaWYgKG91dC5TaGVldE5hbWVzLmxlbmd0aCA9PSAwKVxuICAgIHRocm93IG5ldyBFcnJvcihcIkVtcHR5IE5VTUJFUlMgZmlsZVwiKTtcbiAgcmV0dXJuIG91dDtcbn1cbmZ1bmN0aW9uIHBhcnNlX251bWJlcnNfaXdhKGNmYikge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIHZhciBNID0ge30sIGluZGljZXMgPSBbXTtcbiAgY2ZiLkZ1bGxQYXRocy5mb3JFYWNoKGZ1bmN0aW9uKHApIHtcbiAgICBpZiAocC5tYXRjaCgvXFwuaXdwdjIvKSlcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuc3VwcG9ydGVkIHBhc3N3b3JkIHByb3RlY3Rpb25cIik7XG4gIH0pO1xuICBjZmIuRmlsZUluZGV4LmZvckVhY2goZnVuY3Rpb24ocykge1xuICAgIGlmICghcy5uYW1lLm1hdGNoKC9cXC5pd2EkLykpXG4gICAgICByZXR1cm47XG4gICAgdmFyIG87XG4gICAgdHJ5IHtcbiAgICAgIG8gPSBkZWNvbXByZXNzX2l3YV9maWxlKHMuY29udGVudCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGNvbnNvbGUubG9nKFwiPz8gXCIgKyBzLmNvbnRlbnQubGVuZ3RoICsgXCIgXCIgKyAoZS5tZXNzYWdlIHx8IGUpKTtcbiAgICB9XG4gICAgdmFyIHBhY2tldHM7XG4gICAgdHJ5IHtcbiAgICAgIHBhY2tldHMgPSBwYXJzZV9pd2FfZmlsZShvKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICByZXR1cm4gY29uc29sZS5sb2coXCIjIyBcIiArIChlLm1lc3NhZ2UgfHwgZSkpO1xuICAgIH1cbiAgICBwYWNrZXRzLmZvckVhY2goZnVuY3Rpb24ocGFja2V0KSB7XG4gICAgICBNW3BhY2tldC5pZF0gPSBwYWNrZXQubWVzc2FnZXM7XG4gICAgICBpbmRpY2VzLnB1c2gocGFja2V0LmlkKTtcbiAgICB9KTtcbiAgfSk7XG4gIGlmICghaW5kaWNlcy5sZW5ndGgpXG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmlsZSBoYXMgbm8gbWVzc2FnZXNcIik7XG4gIHZhciBkb2Nyb290ID0gKChfZCA9IChfYyA9IChfYiA9IChfYSA9IE0gPT0gbnVsbCA/IHZvaWQgMCA6IE1bMV0pID09IG51bGwgPyB2b2lkIDAgOiBfYVswXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iLm1ldGEpID09IG51bGwgPyB2b2lkIDAgOiBfY1sxXSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9kWzBdLmRhdGEpICYmIHZhcmludF90b19pMzIoTVsxXVswXS5tZXRhWzFdWzBdLmRhdGEpID09IDEgJiYgTVsxXVswXTtcbiAgaWYgKCFkb2Nyb290KVxuICAgIGluZGljZXMuZm9yRWFjaChmdW5jdGlvbihpZHgpIHtcbiAgICAgIE1baWR4XS5mb3JFYWNoKGZ1bmN0aW9uKGl3YW0pIHtcbiAgICAgICAgdmFyIG10eXBlID0gdmFyaW50X3RvX2kzMihpd2FtLm1ldGFbMV1bMF0uZGF0YSkgPj4+IDA7XG4gICAgICAgIGlmIChtdHlwZSA9PSAxKSB7XG4gICAgICAgICAgaWYgKCFkb2Nyb290KVxuICAgICAgICAgICAgZG9jcm9vdCA9IGl3YW07XG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRG9jdW1lbnQgaGFzIG11bHRpcGxlIHJvb3RzXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgaWYgKCFkb2Nyb290KVxuICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIERvY3VtZW50IHJvb3RcIik7XG4gIHJldHVybiBwYXJzZV9UTl9Eb2N1bWVudEFyY2hpdmUoTSwgZG9jcm9vdCk7XG59XG5mdW5jdGlvbiB3cml0ZV90aWxlX3Jvdyh0cmksIGRhdGEsIFNTVCkge1xuICB2YXIgX2EsIF9iLCBfYywgX2Q7XG4gIGlmICghKChfYSA9IHRyaVs2XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hWzBdKSB8fCAhKChfYiA9IHRyaVs3XSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iWzBdKSlcbiAgICB0aHJvdyBcIk11dGF0aW9uIG9ubHkgd29ya3Mgb24gcG9zdC1CTkMgc3RvcmFnZXMhXCI7XG4gIHZhciB3aWRlX29mZnNldHMgPSAoKF9kID0gKF9jID0gdHJpWzhdKSA9PSBudWxsID8gdm9pZCAwIDogX2NbMF0pID09IG51bGwgPyB2b2lkIDAgOiBfZC5kYXRhKSAmJiB2YXJpbnRfdG9faTMyKHRyaVs4XVswXS5kYXRhKSA+IDAgfHwgZmFsc2U7XG4gIGlmICh3aWRlX29mZnNldHMpXG4gICAgdGhyb3cgXCJNYXRoIG9ubHkgd29ya3Mgd2l0aCBub3JtYWwgb2Zmc2V0c1wiO1xuICB2YXIgY250ID0gMDtcbiAgdmFyIGR2ID0gdThfdG9fZGF0YXZpZXcodHJpWzddWzBdLmRhdGEpLCBsYXN0X29mZnNldCA9IDAsIGNlbGxfc3RvcmFnZSA9IFtdO1xuICB2YXIgX2R2ID0gdThfdG9fZGF0YXZpZXcodHJpWzRdWzBdLmRhdGEpLCBfbGFzdF9vZmZzZXQgPSAwLCBfY2VsbF9zdG9yYWdlID0gW107XG4gIGZvciAodmFyIEMgPSAwOyBDIDwgZGF0YS5sZW5ndGg7ICsrQykge1xuICAgIGlmIChkYXRhW0NdID09IG51bGwpIHtcbiAgICAgIGR2LnNldFVpbnQxNihDICogMiwgNjU1MzUsIHRydWUpO1xuICAgICAgX2R2LnNldFVpbnQxNihDICogMiwgNjU1MzUpO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGR2LnNldFVpbnQxNihDICogMiwgbGFzdF9vZmZzZXQsIHRydWUpO1xuICAgIF9kdi5zZXRVaW50MTYoQyAqIDIsIF9sYXN0X29mZnNldCwgdHJ1ZSk7XG4gICAgdmFyIGNlbGxvYWQsIF9jZWxsb2FkO1xuICAgIHN3aXRjaCAodHlwZW9mIGRhdGFbQ10pIHtcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgY2VsbG9hZCA9IHdyaXRlX25ld19zdG9yYWdlKHsgdDogXCJzXCIsIHY6IGRhdGFbQ10gfSwgU1NUKTtcbiAgICAgICAgX2NlbGxvYWQgPSB3cml0ZV9vbGRfc3RvcmFnZSh7IHQ6IFwic1wiLCB2OiBkYXRhW0NdIH0sIFNTVCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgICBjZWxsb2FkID0gd3JpdGVfbmV3X3N0b3JhZ2UoeyB0OiBcIm5cIiwgdjogZGF0YVtDXSB9LCBTU1QpO1xuICAgICAgICBfY2VsbG9hZCA9IHdyaXRlX29sZF9zdG9yYWdlKHsgdDogXCJuXCIsIHY6IGRhdGFbQ10gfSwgU1NUKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFwiYm9vbGVhblwiOlxuICAgICAgICBjZWxsb2FkID0gd3JpdGVfbmV3X3N0b3JhZ2UoeyB0OiBcImJcIiwgdjogZGF0YVtDXSB9LCBTU1QpO1xuICAgICAgICBfY2VsbG9hZCA9IHdyaXRlX29sZF9zdG9yYWdlKHsgdDogXCJiXCIsIHY6IGRhdGFbQ10gfSwgU1NUKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbnN1cHBvcnRlZCB2YWx1ZSBcIiArIGRhdGFbQ10pO1xuICAgIH1cbiAgICBjZWxsX3N0b3JhZ2UucHVzaChjZWxsb2FkKTtcbiAgICBsYXN0X29mZnNldCArPSBjZWxsb2FkLmxlbmd0aDtcbiAgICBfY2VsbF9zdG9yYWdlLnB1c2goX2NlbGxvYWQpO1xuICAgIF9sYXN0X29mZnNldCArPSBfY2VsbG9hZC5sZW5ndGg7XG4gICAgKytjbnQ7XG4gIH1cbiAgdHJpWzJdWzBdLmRhdGEgPSB3cml0ZV92YXJpbnQ0OShjbnQpO1xuICBmb3IgKDsgQyA8IHRyaVs3XVswXS5kYXRhLmxlbmd0aCAvIDI7ICsrQykge1xuICAgIGR2LnNldFVpbnQxNihDICogMiwgNjU1MzUsIHRydWUpO1xuICAgIF9kdi5zZXRVaW50MTYoQyAqIDIsIDY1NTM1LCB0cnVlKTtcbiAgfVxuICB0cmlbNl1bMF0uZGF0YSA9IHU4Y29uY2F0KGNlbGxfc3RvcmFnZSk7XG4gIHRyaVszXVswXS5kYXRhID0gdThjb25jYXQoX2NlbGxfc3RvcmFnZSk7XG4gIHJldHVybiBjbnQ7XG59XG5mdW5jdGlvbiB3cml0ZV9udW1iZXJzX2l3YSh3Yiwgb3B0cykge1xuICBpZiAoIW9wdHMgfHwgIW9wdHMubnVtYmVycylcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJNdXN0IHBhc3MgYSBgbnVtYmVyc2Agb3B0aW9uIC0tIGNoZWNrIHRoZSBSRUFETUVcIik7XG4gIHZhciB3cyA9IHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzWzBdXTtcbiAgaWYgKHdiLlNoZWV0TmFtZXMubGVuZ3RoID4gMSlcbiAgICBjb25zb2xlLmVycm9yKFwiVGhlIE51bWJlcnMgd3JpdGVyIGN1cnJlbnRseSB3cml0ZXMgb25seSB0aGUgZmlyc3QgdGFibGVcIik7XG4gIHZhciByYW5nZSA9IGRlY29kZV9yYW5nZSh3c1tcIiFyZWZcIl0pO1xuICByYW5nZS5zLnIgPSByYW5nZS5zLmMgPSAwO1xuICB2YXIgdHJ1bmMgPSBmYWxzZTtcbiAgaWYgKHJhbmdlLmUuYyA+IDkpIHtcbiAgICB0cnVuYyA9IHRydWU7XG4gICAgcmFuZ2UuZS5jID0gOTtcbiAgfVxuICBpZiAocmFuZ2UuZS5yID4gNDkpIHtcbiAgICB0cnVuYyA9IHRydWU7XG4gICAgcmFuZ2UuZS5yID0gNDk7XG4gIH1cbiAgaWYgKHRydW5jKVxuICAgIGNvbnNvbGUuZXJyb3IoXCJUaGUgTnVtYmVycyB3cml0ZXIgaXMgY3VycmVudGx5IGxpbWl0ZWQgdG8gXCIuY29uY2F0KGVuY29kZV9yYW5nZShyYW5nZSkpKTtcbiAgdmFyIGRhdGEgPSBzaGVldF90b19qc29uKHdzLCB7IHJhbmdlOiByYW5nZSwgaGVhZGVyOiAxIH0pO1xuICB2YXIgU1NUID0gW1wiflNoMzN0SjV+XCJdO1xuICBkYXRhLmZvckVhY2goZnVuY3Rpb24ocm93KSB7XG4gICAgcmV0dXJuIHJvdy5mb3JFYWNoKGZ1bmN0aW9uKGNlbGwpIHtcbiAgICAgIGlmICh0eXBlb2YgY2VsbCA9PSBcInN0cmluZ1wiKVxuICAgICAgICBTU1QucHVzaChjZWxsKTtcbiAgICB9KTtcbiAgfSk7XG4gIHZhciBkZXBlbmRlbnRzID0ge307XG4gIHZhciBpbmRpY2VzID0gW107XG4gIHZhciBjZmIgPSBDRkIucmVhZChvcHRzLm51bWJlcnMsIHsgdHlwZTogXCJiYXNlNjRcIiB9KTtcbiAgY2ZiLkZpbGVJbmRleC5tYXAoZnVuY3Rpb24oZmksIGlkeCkge1xuICAgIHJldHVybiBbZmksIGNmYi5GdWxsUGF0aHNbaWR4XV07XG4gIH0pLmZvckVhY2goZnVuY3Rpb24ocm93KSB7XG4gICAgdmFyIGZpID0gcm93WzBdLCBmcCA9IHJvd1sxXTtcbiAgICBpZiAoZmkudHlwZSAhPSAyKVxuICAgICAgcmV0dXJuO1xuICAgIGlmICghZmkubmFtZS5tYXRjaCgvXFwuaXdhLykpXG4gICAgICByZXR1cm47XG4gICAgdmFyIG9sZF9jb250ZW50ID0gZmkuY29udGVudDtcbiAgICB2YXIgcmF3MSA9IGRlY29tcHJlc3NfaXdhX2ZpbGUob2xkX2NvbnRlbnQpO1xuICAgIHZhciB4MiA9IHBhcnNlX2l3YV9maWxlKHJhdzEpO1xuICAgIHgyLmZvckVhY2goZnVuY3Rpb24ocGFja2V0Mikge1xuICAgICAgaW5kaWNlcy5wdXNoKHBhY2tldDIuaWQpO1xuICAgICAgZGVwZW5kZW50c1twYWNrZXQyLmlkXSA9IHsgZGVwczogW10sIGxvY2F0aW9uOiBmcCwgdHlwZTogdmFyaW50X3RvX2kzMihwYWNrZXQyLm1lc3NhZ2VzWzBdLm1ldGFbMV1bMF0uZGF0YSkgfTtcbiAgICB9KTtcbiAgfSk7XG4gIGluZGljZXMuc29ydChmdW5jdGlvbih4MiwgeTIpIHtcbiAgICByZXR1cm4geDIgLSB5MjtcbiAgfSk7XG4gIHZhciBpbmRpY2VzX3ZhcmludCA9IGluZGljZXMuZmlsdGVyKGZ1bmN0aW9uKHgyKSB7XG4gICAgcmV0dXJuIHgyID4gMTtcbiAgfSkubWFwKGZ1bmN0aW9uKHgyKSB7XG4gICAgcmV0dXJuIFt4Miwgd3JpdGVfdmFyaW50NDkoeDIpXTtcbiAgfSk7XG4gIGNmYi5GaWxlSW5kZXgubWFwKGZ1bmN0aW9uKGZpLCBpZHgpIHtcbiAgICByZXR1cm4gW2ZpLCBjZmIuRnVsbFBhdGhzW2lkeF1dO1xuICB9KS5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuICAgIHZhciBmaSA9IHJvd1swXSwgZnAgPSByb3dbMV07XG4gICAgaWYgKCFmaS5uYW1lLm1hdGNoKC9cXC5pd2EvKSlcbiAgICAgIHJldHVybjtcbiAgICB2YXIgeDIgPSBwYXJzZV9pd2FfZmlsZShkZWNvbXByZXNzX2l3YV9maWxlKGZpLmNvbnRlbnQpKTtcbiAgICB4Mi5mb3JFYWNoKGZ1bmN0aW9uKGlhKSB7XG4gICAgICBpYS5tZXNzYWdlcy5mb3JFYWNoKGZ1bmN0aW9uKG0pIHtcbiAgICAgICAgaW5kaWNlc192YXJpbnQuZm9yRWFjaChmdW5jdGlvbihpdmkpIHtcbiAgICAgICAgICBpZiAoaWEubWVzc2FnZXMuc29tZShmdW5jdGlvbihtZXNzKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFyaW50X3RvX2kzMihtZXNzLm1ldGFbMV1bMF0uZGF0YSkgIT0gMTEwMDYgJiYgdThjb250YWlucyhtZXNzLmRhdGEsIGl2aVsxXSk7XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgICAgIGRlcGVuZGVudHNbaXZpWzBdXS5kZXBzLnB1c2goaWEuaWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIGZ1bmN0aW9uIGdldF91bmlxdWVfbXNnaWQoKSB7XG4gICAgZm9yICh2YXIgaSA9IDkyNzI2MjsgaSA8IDJlNjsgKytpKVxuICAgICAgaWYgKCFkZXBlbmRlbnRzW2ldKVxuICAgICAgICByZXR1cm4gaTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJUb28gbWFueSBtZXNzYWdlc1wiKTtcbiAgfVxuICB2YXIgZW50cnkgPSBDRkIuZmluZChjZmIsIGRlcGVuZGVudHNbMV0ubG9jYXRpb24pO1xuICB2YXIgeCA9IHBhcnNlX2l3YV9maWxlKGRlY29tcHJlc3NfaXdhX2ZpbGUoZW50cnkuY29udGVudCkpO1xuICB2YXIgZG9jcm9vdDtcbiAgZm9yICh2YXIgeGkgPSAwOyB4aSA8IHgubGVuZ3RoOyArK3hpKSB7XG4gICAgdmFyIHBhY2tldCA9IHhbeGldO1xuICAgIGlmIChwYWNrZXQuaWQgPT0gMSlcbiAgICAgIGRvY3Jvb3QgPSBwYWNrZXQ7XG4gIH1cbiAgdmFyIHNoZWV0cm9vdHJlZiA9IHBhcnNlX1RTUF9SZWZlcmVuY2UocGFyc2Vfc2hhbGxvdyhkb2Nyb290Lm1lc3NhZ2VzWzBdLmRhdGEpWzFdWzBdLmRhdGEpO1xuICBlbnRyeSA9IENGQi5maW5kKGNmYiwgZGVwZW5kZW50c1tzaGVldHJvb3RyZWZdLmxvY2F0aW9uKTtcbiAgeCA9IHBhcnNlX2l3YV9maWxlKGRlY29tcHJlc3NfaXdhX2ZpbGUoZW50cnkuY29udGVudCkpO1xuICBmb3IgKHhpID0gMDsgeGkgPCB4Lmxlbmd0aDsgKyt4aSkge1xuICAgIHBhY2tldCA9IHhbeGldO1xuICAgIGlmIChwYWNrZXQuaWQgPT0gc2hlZXRyb290cmVmKVxuICAgICAgZG9jcm9vdCA9IHBhY2tldDtcbiAgfVxuICBzaGVldHJvb3RyZWYgPSBwYXJzZV9UU1BfUmVmZXJlbmNlKHBhcnNlX3NoYWxsb3coZG9jcm9vdC5tZXNzYWdlc1swXS5kYXRhKVsyXVswXS5kYXRhKTtcbiAgZW50cnkgPSBDRkIuZmluZChjZmIsIGRlcGVuZGVudHNbc2hlZXRyb290cmVmXS5sb2NhdGlvbik7XG4gIHggPSBwYXJzZV9pd2FfZmlsZShkZWNvbXByZXNzX2l3YV9maWxlKGVudHJ5LmNvbnRlbnQpKTtcbiAgZm9yICh4aSA9IDA7IHhpIDwgeC5sZW5ndGg7ICsreGkpIHtcbiAgICBwYWNrZXQgPSB4W3hpXTtcbiAgICBpZiAocGFja2V0LmlkID09IHNoZWV0cm9vdHJlZilcbiAgICAgIGRvY3Jvb3QgPSBwYWNrZXQ7XG4gIH1cbiAgc2hlZXRyb290cmVmID0gcGFyc2VfVFNQX1JlZmVyZW5jZShwYXJzZV9zaGFsbG93KGRvY3Jvb3QubWVzc2FnZXNbMF0uZGF0YSlbMl1bMF0uZGF0YSk7XG4gIGVudHJ5ID0gQ0ZCLmZpbmQoY2ZiLCBkZXBlbmRlbnRzW3NoZWV0cm9vdHJlZl0ubG9jYXRpb24pO1xuICB4ID0gcGFyc2VfaXdhX2ZpbGUoZGVjb21wcmVzc19pd2FfZmlsZShlbnRyeS5jb250ZW50KSk7XG4gIGZvciAoeGkgPSAwOyB4aSA8IHgubGVuZ3RoOyArK3hpKSB7XG4gICAgcGFja2V0ID0geFt4aV07XG4gICAgaWYgKHBhY2tldC5pZCA9PSBzaGVldHJvb3RyZWYpXG4gICAgICBkb2Nyb290ID0gcGFja2V0O1xuICB9XG4gIHZhciBwYiA9IHBhcnNlX3NoYWxsb3coZG9jcm9vdC5tZXNzYWdlc1swXS5kYXRhKTtcbiAge1xuICAgIHBiWzZdWzBdLmRhdGEgPSB3cml0ZV92YXJpbnQ0OShyYW5nZS5lLnIgKyAxKTtcbiAgICBwYls3XVswXS5kYXRhID0gd3JpdGVfdmFyaW50NDkocmFuZ2UuZS5jICsgMSk7XG4gICAgdmFyIGNydWlkc3JlZiA9IHBhcnNlX1RTUF9SZWZlcmVuY2UocGJbNDZdWzBdLmRhdGEpO1xuICAgIHZhciBvbGRidWNrZXQgPSBDRkIuZmluZChjZmIsIGRlcGVuZGVudHNbY3J1aWRzcmVmXS5sb2NhdGlvbik7XG4gICAgdmFyIF94ID0gcGFyc2VfaXdhX2ZpbGUoZGVjb21wcmVzc19pd2FfZmlsZShvbGRidWNrZXQuY29udGVudCkpO1xuICAgIHtcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgX3gubGVuZ3RoOyArK2opIHtcbiAgICAgICAgaWYgKF94W2pdLmlkID09IGNydWlkc3JlZilcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGlmIChfeFtqXS5pZCAhPSBjcnVpZHNyZWYpXG4gICAgICAgIHRocm93IFwiQmFkIENvbHVtblJvd1VJRE1hcEFyY2hpdmVcIjtcbiAgICAgIHZhciBjcnVpZHMgPSBwYXJzZV9zaGFsbG93KF94W2pdLm1lc3NhZ2VzWzBdLmRhdGEpO1xuICAgICAgY3J1aWRzWzFdID0gW107XG4gICAgICBjcnVpZHNbMl0gPSBbXSwgY3J1aWRzWzNdID0gW107XG4gICAgICBmb3IgKHZhciBDID0gMDsgQyA8PSByYW5nZS5lLmM7ICsrQykge1xuICAgICAgICB2YXIgdXVpZCA9IFtdO1xuICAgICAgICB1dWlkWzFdID0gdXVpZFsyXSA9IFt7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KEMgKyA0MjA2OTApIH1dO1xuICAgICAgICBjcnVpZHNbMV0ucHVzaCh7IHR5cGU6IDIsIGRhdGE6IHdyaXRlX3NoYWxsb3codXVpZCkgfSk7XG4gICAgICAgIGNydWlkc1syXS5wdXNoKHsgdHlwZTogMCwgZGF0YTogd3JpdGVfdmFyaW50NDkoQykgfSk7XG4gICAgICAgIGNydWlkc1szXS5wdXNoKHsgdHlwZTogMCwgZGF0YTogd3JpdGVfdmFyaW50NDkoQykgfSk7XG4gICAgICB9XG4gICAgICBjcnVpZHNbNF0gPSBbXTtcbiAgICAgIGNydWlkc1s1XSA9IFtdLCBjcnVpZHNbNl0gPSBbXTtcbiAgICAgIGZvciAodmFyIFIgPSAwOyBSIDw9IHJhbmdlLmUucjsgKytSKSB7XG4gICAgICAgIHV1aWQgPSBbXTtcbiAgICAgICAgdXVpZFsxXSA9IHV1aWRbMl0gPSBbeyB0eXBlOiAwLCBkYXRhOiB3cml0ZV92YXJpbnQ0OShSICsgNzI2MjcwKSB9XTtcbiAgICAgICAgY3J1aWRzWzRdLnB1c2goeyB0eXBlOiAyLCBkYXRhOiB3cml0ZV9zaGFsbG93KHV1aWQpIH0pO1xuICAgICAgICBjcnVpZHNbNV0ucHVzaCh7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KFIpIH0pO1xuICAgICAgICBjcnVpZHNbNl0ucHVzaCh7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KFIpIH0pO1xuICAgICAgfVxuICAgICAgX3hbal0ubWVzc2FnZXNbMF0uZGF0YSA9IHdyaXRlX3NoYWxsb3coY3J1aWRzKTtcbiAgICB9XG4gICAgb2xkYnVja2V0LmNvbnRlbnQgPSBjb21wcmVzc19pd2FfZmlsZSh3cml0ZV9pd2FfZmlsZShfeCkpO1xuICAgIG9sZGJ1Y2tldC5zaXplID0gb2xkYnVja2V0LmNvbnRlbnQubGVuZ3RoO1xuICAgIGRlbGV0ZSBwYls0Nl07XG4gICAgdmFyIHN0b3JlID0gcGFyc2Vfc2hhbGxvdyhwYls0XVswXS5kYXRhKTtcbiAgICB7XG4gICAgICBzdG9yZVs3XVswXS5kYXRhID0gd3JpdGVfdmFyaW50NDkocmFuZ2UuZS5yICsgMSk7XG4gICAgICB2YXIgcm93X2hlYWRlcnMgPSBwYXJzZV9zaGFsbG93KHN0b3JlWzFdWzBdLmRhdGEpO1xuICAgICAgdmFyIHJvd19oZWFkZXJfcmVmID0gcGFyc2VfVFNQX1JlZmVyZW5jZShyb3dfaGVhZGVyc1syXVswXS5kYXRhKTtcbiAgICAgIG9sZGJ1Y2tldCA9IENGQi5maW5kKGNmYiwgZGVwZW5kZW50c1tyb3dfaGVhZGVyX3JlZl0ubG9jYXRpb24pO1xuICAgICAgX3ggPSBwYXJzZV9pd2FfZmlsZShkZWNvbXByZXNzX2l3YV9maWxlKG9sZGJ1Y2tldC5jb250ZW50KSk7XG4gICAgICB7XG4gICAgICAgIGlmIChfeFswXS5pZCAhPSByb3dfaGVhZGVyX3JlZilcbiAgICAgICAgICB0aHJvdyBcIkJhZCBIZWFkZXJTdG9yYWdlQnVja2V0XCI7XG4gICAgICAgIHZhciBiYXNlX2J1Y2tldCA9IHBhcnNlX3NoYWxsb3coX3hbMF0ubWVzc2FnZXNbMF0uZGF0YSk7XG4gICAgICAgIGZvciAoUiA9IDA7IFIgPCBkYXRhLmxlbmd0aDsgKytSKSB7XG4gICAgICAgICAgdmFyIF9idWNrZXQgPSBwYXJzZV9zaGFsbG93KGJhc2VfYnVja2V0WzJdWzBdLmRhdGEpO1xuICAgICAgICAgIF9idWNrZXRbMV1bMF0uZGF0YSA9IHdyaXRlX3ZhcmludDQ5KFIpO1xuICAgICAgICAgIF9idWNrZXRbNF1bMF0uZGF0YSA9IHdyaXRlX3ZhcmludDQ5KGRhdGFbUl0ubGVuZ3RoKTtcbiAgICAgICAgICBiYXNlX2J1Y2tldFsyXVtSXSA9IHsgdHlwZTogYmFzZV9idWNrZXRbMl1bMF0udHlwZSwgZGF0YTogd3JpdGVfc2hhbGxvdyhfYnVja2V0KSB9O1xuICAgICAgICB9XG4gICAgICAgIF94WzBdLm1lc3NhZ2VzWzBdLmRhdGEgPSB3cml0ZV9zaGFsbG93KGJhc2VfYnVja2V0KTtcbiAgICAgIH1cbiAgICAgIG9sZGJ1Y2tldC5jb250ZW50ID0gY29tcHJlc3NfaXdhX2ZpbGUod3JpdGVfaXdhX2ZpbGUoX3gpKTtcbiAgICAgIG9sZGJ1Y2tldC5zaXplID0gb2xkYnVja2V0LmNvbnRlbnQubGVuZ3RoO1xuICAgICAgdmFyIGNvbF9oZWFkZXJfcmVmID0gcGFyc2VfVFNQX1JlZmVyZW5jZShzdG9yZVsyXVswXS5kYXRhKTtcbiAgICAgIG9sZGJ1Y2tldCA9IENGQi5maW5kKGNmYiwgZGVwZW5kZW50c1tjb2xfaGVhZGVyX3JlZl0ubG9jYXRpb24pO1xuICAgICAgX3ggPSBwYXJzZV9pd2FfZmlsZShkZWNvbXByZXNzX2l3YV9maWxlKG9sZGJ1Y2tldC5jb250ZW50KSk7XG4gICAgICB7XG4gICAgICAgIGlmIChfeFswXS5pZCAhPSBjb2xfaGVhZGVyX3JlZilcbiAgICAgICAgICB0aHJvdyBcIkJhZCBIZWFkZXJTdG9yYWdlQnVja2V0XCI7XG4gICAgICAgIGJhc2VfYnVja2V0ID0gcGFyc2Vfc2hhbGxvdyhfeFswXS5tZXNzYWdlc1swXS5kYXRhKTtcbiAgICAgICAgZm9yIChDID0gMDsgQyA8PSByYW5nZS5lLmM7ICsrQykge1xuICAgICAgICAgIF9idWNrZXQgPSBwYXJzZV9zaGFsbG93KGJhc2VfYnVja2V0WzJdWzBdLmRhdGEpO1xuICAgICAgICAgIF9idWNrZXRbMV1bMF0uZGF0YSA9IHdyaXRlX3ZhcmludDQ5KEMpO1xuICAgICAgICAgIF9idWNrZXRbNF1bMF0uZGF0YSA9IHdyaXRlX3ZhcmludDQ5KHJhbmdlLmUuciArIDEpO1xuICAgICAgICAgIGJhc2VfYnVja2V0WzJdW0NdID0geyB0eXBlOiBiYXNlX2J1Y2tldFsyXVswXS50eXBlLCBkYXRhOiB3cml0ZV9zaGFsbG93KF9idWNrZXQpIH07XG4gICAgICAgIH1cbiAgICAgICAgX3hbMF0ubWVzc2FnZXNbMF0uZGF0YSA9IHdyaXRlX3NoYWxsb3coYmFzZV9idWNrZXQpO1xuICAgICAgfVxuICAgICAgb2xkYnVja2V0LmNvbnRlbnQgPSBjb21wcmVzc19pd2FfZmlsZSh3cml0ZV9pd2FfZmlsZShfeCkpO1xuICAgICAgb2xkYnVja2V0LnNpemUgPSBvbGRidWNrZXQuY29udGVudC5sZW5ndGg7XG4gICAgICB2YXIgc3N0cmVmID0gcGFyc2VfVFNQX1JlZmVyZW5jZShzdG9yZVs0XVswXS5kYXRhKTtcbiAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbnRyeSA9IENGQi5maW5kKGNmYiwgZGVwZW5kZW50c1tzc3RyZWZdLmxvY2F0aW9uKTtcbiAgICAgICAgdmFyIHN4ID0gcGFyc2VfaXdhX2ZpbGUoZGVjb21wcmVzc19pd2FfZmlsZShzZW50cnkuY29udGVudCkpO1xuICAgICAgICB2YXIgc3N0cm9vdDtcbiAgICAgICAgZm9yICh2YXIgc3hpID0gMDsgc3hpIDwgc3gubGVuZ3RoOyArK3N4aSkge1xuICAgICAgICAgIHZhciBwYWNrZXQyID0gc3hbc3hpXTtcbiAgICAgICAgICBpZiAocGFja2V0Mi5pZCA9PSBzc3RyZWYpXG4gICAgICAgICAgICBzc3Ryb290ID0gcGFja2V0MjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgc3N0ZGF0YSA9IHBhcnNlX3NoYWxsb3coc3N0cm9vdC5tZXNzYWdlc1swXS5kYXRhKTtcbiAgICAgICAge1xuICAgICAgICAgIHNzdGRhdGFbM10gPSBbXTtcbiAgICAgICAgICB2YXIgbmV3c3N0ID0gW107XG4gICAgICAgICAgU1NULmZvckVhY2goZnVuY3Rpb24oc3RyLCBpKSB7XG4gICAgICAgICAgICBuZXdzc3RbMV0gPSBbeyB0eXBlOiAwLCBkYXRhOiB3cml0ZV92YXJpbnQ0OShpKSB9XTtcbiAgICAgICAgICAgIG5ld3NzdFsyXSA9IFt7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KDEpIH1dO1xuICAgICAgICAgICAgbmV3c3N0WzNdID0gW3sgdHlwZTogMiwgZGF0YTogc3RydTgoc3RyKSB9XTtcbiAgICAgICAgICAgIHNzdGRhdGFbM10ucHVzaCh7IHR5cGU6IDIsIGRhdGE6IHdyaXRlX3NoYWxsb3cobmV3c3N0KSB9KTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBzc3Ryb290Lm1lc3NhZ2VzWzBdLmRhdGEgPSB3cml0ZV9zaGFsbG93KHNzdGRhdGEpO1xuICAgICAgICB2YXIgc3kgPSB3cml0ZV9pd2FfZmlsZShzeCk7XG4gICAgICAgIHZhciByYXczMiA9IGNvbXByZXNzX2l3YV9maWxlKHN5KTtcbiAgICAgICAgc2VudHJ5LmNvbnRlbnQgPSByYXczMjtcbiAgICAgICAgc2VudHJ5LnNpemUgPSBzZW50cnkuY29udGVudC5sZW5ndGg7XG4gICAgICB9KSgpO1xuICAgICAgdmFyIHRpbGUgPSBwYXJzZV9zaGFsbG93KHN0b3JlWzNdWzBdLmRhdGEpO1xuICAgICAge1xuICAgICAgICB2YXIgdCA9IHRpbGVbMV1bMF07XG4gICAgICAgIGRlbGV0ZSB0aWxlWzJdO1xuICAgICAgICB2YXIgdGwgPSBwYXJzZV9zaGFsbG93KHQuZGF0YSk7XG4gICAgICAgIHtcbiAgICAgICAgICB2YXIgdGlsZXJlZiA9IHBhcnNlX1RTUF9SZWZlcmVuY2UodGxbMl1bMF0uZGF0YSk7XG4gICAgICAgICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHRlbnRyeSA9IENGQi5maW5kKGNmYiwgZGVwZW5kZW50c1t0aWxlcmVmXS5sb2NhdGlvbik7XG4gICAgICAgICAgICB2YXIgdHggPSBwYXJzZV9pd2FfZmlsZShkZWNvbXByZXNzX2l3YV9maWxlKHRlbnRyeS5jb250ZW50KSk7XG4gICAgICAgICAgICB2YXIgdGlsZXJvb3Q7XG4gICAgICAgICAgICBmb3IgKHZhciBzeGkgPSAwOyBzeGkgPCB0eC5sZW5ndGg7ICsrc3hpKSB7XG4gICAgICAgICAgICAgIHZhciBwYWNrZXQyID0gdHhbc3hpXTtcbiAgICAgICAgICAgICAgaWYgKHBhY2tldDIuaWQgPT0gdGlsZXJlZilcbiAgICAgICAgICAgICAgICB0aWxlcm9vdCA9IHBhY2tldDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgdGlsZWRhdGEgPSBwYXJzZV9zaGFsbG93KHRpbGVyb290Lm1lc3NhZ2VzWzBdLmRhdGEpO1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBkZWxldGUgdGlsZWRhdGFbNl07XG4gICAgICAgICAgICAgIGRlbGV0ZSB0aWxlWzddO1xuICAgICAgICAgICAgICB2YXIgcm93bG9hZCA9IG5ldyBVaW50OEFycmF5KHRpbGVkYXRhWzVdWzBdLmRhdGEpO1xuICAgICAgICAgICAgICB0aWxlZGF0YVs1XSA9IFtdO1xuICAgICAgICAgICAgICB2YXIgY250ID0gMDtcbiAgICAgICAgICAgICAgZm9yICh2YXIgUjIgPSAwOyBSMiA8PSByYW5nZS5lLnI7ICsrUjIpIHtcbiAgICAgICAgICAgICAgICB2YXIgdGlsZXJvdyA9IHBhcnNlX3NoYWxsb3cocm93bG9hZCk7XG4gICAgICAgICAgICAgICAgY250ICs9IHdyaXRlX3RpbGVfcm93KHRpbGVyb3csIGRhdGFbUjJdLCBTU1QpO1xuICAgICAgICAgICAgICAgIHRpbGVyb3dbMV1bMF0uZGF0YSA9IHdyaXRlX3ZhcmludDQ5KFIyKTtcbiAgICAgICAgICAgICAgICB0aWxlZGF0YVs1XS5wdXNoKHsgZGF0YTogd3JpdGVfc2hhbGxvdyh0aWxlcm93KSwgdHlwZTogMiB9KTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aWxlZGF0YVsxXSA9IFt7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KHJhbmdlLmUuYyArIDEpIH1dO1xuICAgICAgICAgICAgICB0aWxlZGF0YVsyXSA9IFt7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KHJhbmdlLmUuciArIDEpIH1dO1xuICAgICAgICAgICAgICB0aWxlZGF0YVszXSA9IFt7IHR5cGU6IDAsIGRhdGE6IHdyaXRlX3ZhcmludDQ5KGNudCkgfV07XG4gICAgICAgICAgICAgIHRpbGVkYXRhWzRdID0gW3sgdHlwZTogMCwgZGF0YTogd3JpdGVfdmFyaW50NDkocmFuZ2UuZS5yICsgMSkgfV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aWxlcm9vdC5tZXNzYWdlc1swXS5kYXRhID0gd3JpdGVfc2hhbGxvdyh0aWxlZGF0YSk7XG4gICAgICAgICAgICB2YXIgdHkgPSB3cml0ZV9pd2FfZmlsZSh0eCk7XG4gICAgICAgICAgICB2YXIgcmF3MzIgPSBjb21wcmVzc19pd2FfZmlsZSh0eSk7XG4gICAgICAgICAgICB0ZW50cnkuY29udGVudCA9IHJhdzMyO1xuICAgICAgICAgICAgdGVudHJ5LnNpemUgPSB0ZW50cnkuY29udGVudC5sZW5ndGg7XG4gICAgICAgICAgfSkoKTtcbiAgICAgICAgfVxuICAgICAgICB0LmRhdGEgPSB3cml0ZV9zaGFsbG93KHRsKTtcbiAgICAgIH1cbiAgICAgIHN0b3JlWzNdWzBdLmRhdGEgPSB3cml0ZV9zaGFsbG93KHRpbGUpO1xuICAgIH1cbiAgICBwYls0XVswXS5kYXRhID0gd3JpdGVfc2hhbGxvdyhzdG9yZSk7XG4gIH1cbiAgZG9jcm9vdC5tZXNzYWdlc1swXS5kYXRhID0gd3JpdGVfc2hhbGxvdyhwYik7XG4gIHZhciB5ID0gd3JpdGVfaXdhX2ZpbGUoeCk7XG4gIHZhciByYXczID0gY29tcHJlc3NfaXdhX2ZpbGUoeSk7XG4gIGVudHJ5LmNvbnRlbnQgPSByYXczO1xuICBlbnRyeS5zaXplID0gZW50cnkuY29udGVudC5sZW5ndGg7XG4gIHJldHVybiBjZmI7XG59XG5mdW5jdGlvbiBmaXhfb3B0c19mdW5jKGRlZmF1bHRzLyo6QXJyYXk8QXJyYXk8YW55PiA+Ki8pLyo6eyhvOmFueSk6dm9pZH0qLyB7XG5cdHJldHVybiBmdW5jdGlvbiBmaXhfb3B0cyhvcHRzKSB7XG5cdFx0Zm9yKHZhciBpID0gMDsgaSAhPSBkZWZhdWx0cy5sZW5ndGg7ICsraSkge1xuXHRcdFx0dmFyIGQgPSBkZWZhdWx0c1tpXTtcblx0XHRcdGlmKG9wdHNbZFswXV0gPT09IHVuZGVmaW5lZCkgb3B0c1tkWzBdXSA9IGRbMV07XG5cdFx0XHRpZihkWzJdID09PSAnbicpIG9wdHNbZFswXV0gPSBOdW1iZXIob3B0c1tkWzBdXSk7XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBmaXhfcmVhZF9vcHRzKG9wdHMpIHtcbmZpeF9vcHRzX2Z1bmMoW1xuXHRbJ2NlbGxORicsIGZhbHNlXSwgLyogZW1pdCBjZWxsIG51bWJlciBmb3JtYXQgc3RyaW5nIGFzIC56ICovXG5cdFsnY2VsbEhUTUwnLCB0cnVlXSwgLyogZW1pdCBodG1sIHN0cmluZyBhcyAuaCAqL1xuXHRbJ2NlbGxGb3JtdWxhJywgdHJ1ZV0sIC8qIGVtaXQgZm9ybXVsYWUgYXMgLmYgKi9cblx0WydjZWxsU3R5bGVzJywgZmFsc2VdLCAvKiBlbWl0cyBzdHlsZS90aGVtZSBhcyAucyAqL1xuXHRbJ2NlbGxUZXh0JywgdHJ1ZV0sIC8qIGVtaXQgZm9ybWF0dGVkIHRleHQgYXMgLncgKi9cblx0WydjZWxsRGF0ZXMnLCBmYWxzZV0sIC8qIGVtaXQgZGF0ZSBjZWxscyB3aXRoIHR5cGUgYGRgICovXG5cblx0WydzaGVldFN0dWJzJywgZmFsc2VdLCAvKiBlbWl0IGVtcHR5IGNlbGxzICovXG5cdFsnc2hlZXRSb3dzJywgMCwgJ24nXSwgLyogcmVhZCBuIHJvd3MgKDAgPSByZWFkIGFsbCByb3dzKSAqL1xuXG5cdFsnYm9va0RlcHMnLCBmYWxzZV0sIC8qIHBhcnNlIGNhbGN1bGF0aW9uIGNoYWlucyAqL1xuXHRbJ2Jvb2tTaGVldHMnLCBmYWxzZV0sIC8qIG9ubHkgdHJ5IHRvIGdldCBzaGVldCBuYW1lcyAobm8gU2hlZXRzKSAqL1xuXHRbJ2Jvb2tQcm9wcycsIGZhbHNlXSwgLyogb25seSB0cnkgdG8gZ2V0IHByb3BlcnRpZXMgKG5vIFNoZWV0cykgKi9cblx0Wydib29rRmlsZXMnLCBmYWxzZV0sIC8qIGluY2x1ZGUgcmF3IGZpbGUgc3RydWN0dXJlIChrZXlzLCBmaWxlcywgY2ZiKSAqL1xuXHRbJ2Jvb2tWQkEnLCBmYWxzZV0sIC8qIGluY2x1ZGUgdmJhIHJhdyBkYXRhICh2YmFyYXcpICovXG5cblx0WydwYXNzd29yZCcsJyddLCAvKiBwYXNzd29yZCAqL1xuXHRbJ1dURicsIGZhbHNlXSAvKiBXVEYgbW9kZSAodGhyb3dzIGVycm9ycykgKi9cbl0pKG9wdHMpO1xufVxuXG5mdW5jdGlvbiBmaXhfd3JpdGVfb3B0cyhvcHRzKSB7XG5maXhfb3B0c19mdW5jKFtcblx0WydjZWxsRGF0ZXMnLCBmYWxzZV0sIC8qIHdyaXRlIGRhdGUgY2VsbHMgd2l0aCB0eXBlIGBkYCAqL1xuXG5cdFsnYm9va1NTVCcsIGZhbHNlXSwgLyogR2VuZXJhdGUgU2hhcmVkIFN0cmluZyBUYWJsZSAqL1xuXG5cdFsnYm9va1R5cGUnLCAneGxzeCddLCAvKiBUeXBlIG9mIHdvcmtib29rICh4bHN4L20vYikgKi9cblxuXHRbJ2NvbXByZXNzaW9uJywgZmFsc2VdLCAvKiBVc2UgZmlsZSBjb21wcmVzc2lvbiAqL1xuXG5cdFsnV1RGJywgZmFsc2VdIC8qIFdURiBtb2RlICh0aHJvd3MgZXJyb3JzKSAqL1xuXSkob3B0cyk7XG59XG5mdW5jdGlvbiBnZXRfc2hlZXRfdHlwZShuLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRpZihSRUxTLldTLmluZGV4T2YobikgPiAtMSkgcmV0dXJuIFwic2hlZXRcIjtcblx0aWYoUkVMUy5DUyAmJiBuID09IFJFTFMuQ1MpIHJldHVybiBcImNoYXJ0XCI7XG5cdGlmKFJFTFMuRFMgJiYgbiA9PSBSRUxTLkRTKSByZXR1cm4gXCJkaWFsb2dcIjtcblx0aWYoUkVMUy5NUyAmJiBuID09IFJFTFMuTVMpIHJldHVybiBcIm1hY3JvXCI7XG5cdHJldHVybiAobiAmJiBuLmxlbmd0aCkgPyBuIDogXCJzaGVldFwiO1xufVxuZnVuY3Rpb24gc2FmZV9wYXJzZV93YnJlbHMod2JyZWxzLCBzaGVldHMpIHtcblx0aWYoIXdicmVscykgcmV0dXJuIDA7XG5cdHRyeSB7XG5cdFx0d2JyZWxzID0gc2hlZXRzLm1hcChmdW5jdGlvbiBwd2JyKHcpIHsgaWYoIXcuaWQpIHcuaWQgPSB3LnN0clJlbElEOyByZXR1cm4gW3cubmFtZSwgd2JyZWxzWychaWQnXVt3LmlkXS5UYXJnZXQsIGdldF9zaGVldF90eXBlKHdicmVsc1snIWlkJ11bdy5pZF0uVHlwZSldOyB9KTtcblx0fSBjYXRjaChlKSB7IHJldHVybiBudWxsOyB9XG5cdHJldHVybiAhd2JyZWxzIHx8IHdicmVscy5sZW5ndGggPT09IDAgPyBudWxsIDogd2JyZWxzO1xufVxuXG5mdW5jdGlvbiBzYWZlX3BhcnNlX3NoZWV0KHppcCwgcGF0aC8qOnN0cmluZyovLCByZWxzUGF0aC8qOnN0cmluZyovLCBzaGVldCwgaWR4Lyo6bnVtYmVyKi8sIHNoZWV0UmVscywgc2hlZXRzLCBzdHlwZS8qOnN0cmluZyovLCBvcHRzLCB3YiwgdGhlbWVzLCBzdHlsZXMpIHtcblx0dHJ5IHtcblx0XHRzaGVldFJlbHNbc2hlZXRdPXBhcnNlX3JlbHMoZ2V0emlwc3RyKHppcCwgcmVsc1BhdGgsIHRydWUpLCBwYXRoKTtcblx0XHR2YXIgZGF0YSA9IGdldHppcGRhdGEoemlwLCBwYXRoKTtcblx0XHR2YXIgX3dzO1xuXHRcdHN3aXRjaChzdHlwZSkge1xuXHRcdFx0Y2FzZSAnc2hlZXQnOiAgX3dzID0gcGFyc2Vfd3MoZGF0YSwgcGF0aCwgaWR4LCBvcHRzLCBzaGVldFJlbHNbc2hlZXRdLCB3YiwgdGhlbWVzLCBzdHlsZXMpOyBicmVhaztcblx0XHRcdGNhc2UgJ2NoYXJ0JzogIF93cyA9IHBhcnNlX2NzKGRhdGEsIHBhdGgsIGlkeCwgb3B0cywgc2hlZXRSZWxzW3NoZWV0XSwgd2IsIHRoZW1lcywgc3R5bGVzKTtcblx0XHRcdFx0aWYoIV93cyB8fCAhX3dzWychZHJhd2VsJ10pIGJyZWFrO1xuXHRcdFx0XHR2YXIgZGZpbGUgPSByZXNvbHZlX3BhdGgoX3dzWychZHJhd2VsJ10uVGFyZ2V0LCBwYXRoKTtcblx0XHRcdFx0dmFyIGRyZWxzcCA9IGdldF9yZWxzX3BhdGgoZGZpbGUpO1xuXHRcdFx0XHR2YXIgZHJhdyA9IHBhcnNlX2RyYXdpbmcoZ2V0emlwc3RyKHppcCwgZGZpbGUsIHRydWUpLCBwYXJzZV9yZWxzKGdldHppcHN0cih6aXAsIGRyZWxzcCwgdHJ1ZSksIGRmaWxlKSk7XG5cdFx0XHRcdHZhciBjaGFydHAgPSByZXNvbHZlX3BhdGgoZHJhdywgZGZpbGUpO1xuXHRcdFx0XHR2YXIgY3JlbHNwID0gZ2V0X3JlbHNfcGF0aChjaGFydHApO1xuXHRcdFx0XHRfd3MgPSBwYXJzZV9jaGFydChnZXR6aXBzdHIoemlwLCBjaGFydHAsIHRydWUpLCBjaGFydHAsIG9wdHMsIHBhcnNlX3JlbHMoZ2V0emlwc3RyKHppcCwgY3JlbHNwLCB0cnVlKSwgY2hhcnRwKSwgd2IsIF93cyk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnbWFjcm8nOiAgX3dzID0gcGFyc2VfbXMoZGF0YSwgcGF0aCwgaWR4LCBvcHRzLCBzaGVldFJlbHNbc2hlZXRdLCB3YiwgdGhlbWVzLCBzdHlsZXMpOyBicmVhaztcblx0XHRcdGNhc2UgJ2RpYWxvZyc6IF93cyA9IHBhcnNlX2RzKGRhdGEsIHBhdGgsIGlkeCwgb3B0cywgc2hlZXRSZWxzW3NoZWV0XSwgd2IsIHRoZW1lcywgc3R5bGVzKTsgYnJlYWs7XG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgc2hlZXQgdHlwZSBcIiArIHN0eXBlKTtcblx0XHR9XG5cdFx0c2hlZXRzW3NoZWV0XSA9IF93cztcblxuXHRcdC8qIHNjYW4gcmVscyBmb3IgY29tbWVudHMgYW5kIHRocmVhZGVkIGNvbW1lbnRzICovXG5cdFx0dmFyIHRjb21tZW50cyA9IFtdO1xuXHRcdGlmKHNoZWV0UmVscyAmJiBzaGVldFJlbHNbc2hlZXRdKSBrZXlzKHNoZWV0UmVsc1tzaGVldF0pLmZvckVhY2goZnVuY3Rpb24obikge1xuXHRcdFx0dmFyIGRmaWxlID0gXCJcIjtcblx0XHRcdGlmKHNoZWV0UmVsc1tzaGVldF1bbl0uVHlwZSA9PSBSRUxTLkNNTlQpIHtcblx0XHRcdFx0ZGZpbGUgPSByZXNvbHZlX3BhdGgoc2hlZXRSZWxzW3NoZWV0XVtuXS5UYXJnZXQsIHBhdGgpO1xuXHRcdFx0XHR2YXIgY29tbWVudHMgPSBwYXJzZV9jbW50KGdldHppcGRhdGEoemlwLCBkZmlsZSwgdHJ1ZSksIGRmaWxlLCBvcHRzKTtcblx0XHRcdFx0aWYoIWNvbW1lbnRzIHx8ICFjb21tZW50cy5sZW5ndGgpIHJldHVybjtcblx0XHRcdFx0c2hlZXRfaW5zZXJ0X2NvbW1lbnRzKF93cywgY29tbWVudHMsIGZhbHNlKTtcblx0XHRcdH1cblx0XHRcdGlmKHNoZWV0UmVsc1tzaGVldF1bbl0uVHlwZSA9PSBSRUxTLlRDTU5UKSB7XG5cdFx0XHRcdGRmaWxlID0gcmVzb2x2ZV9wYXRoKHNoZWV0UmVsc1tzaGVldF1bbl0uVGFyZ2V0LCBwYXRoKTtcblx0XHRcdFx0dGNvbW1lbnRzID0gdGNvbW1lbnRzLmNvbmNhdChwYXJzZV90Y21udF94bWwoZ2V0emlwZGF0YSh6aXAsIGRmaWxlLCB0cnVlKSwgb3B0cykpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdGlmKHRjb21tZW50cyAmJiB0Y29tbWVudHMubGVuZ3RoKSBzaGVldF9pbnNlcnRfY29tbWVudHMoX3dzLCB0Y29tbWVudHMsIHRydWUsIG9wdHMucGVvcGxlIHx8IFtdKTtcblx0fSBjYXRjaChlKSB7IGlmKG9wdHMuV1RGKSB0aHJvdyBlOyB9XG59XG5cbmZ1bmN0aW9uIHN0cmlwX2Zyb250X3NsYXNoKHgvKjpzdHJpbmcqLykvKjpzdHJpbmcqLyB7IHJldHVybiB4LmNoYXJBdCgwKSA9PSAnLycgPyB4LnNsaWNlKDEpIDogeDsgfVxuXG5mdW5jdGlvbiBwYXJzZV96aXAoemlwLyo6WklQKi8sIG9wdHMvKjo/UGFyc2VPcHRzKi8pLyo6V29ya2Jvb2sqLyB7XG5cdG1ha2Vfc3NmKCk7XG5cdG9wdHMgPSBvcHRzIHx8IHt9O1xuXHRmaXhfcmVhZF9vcHRzKG9wdHMpO1xuXG5cdC8qIE9wZW5Eb2N1bWVudCBQYXJ0IDMgU2VjdGlvbiAyLjIuMSBPcGVuRG9jdW1lbnQgUGFja2FnZSAqL1xuXHRpZihzYWZlZ2V0emlwZmlsZSh6aXAsICdNRVRBLUlORi9tYW5pZmVzdC54bWwnKSkgcmV0dXJuIHBhcnNlX29kcyh6aXAsIG9wdHMpO1xuXHQvKiBVT0MgKi9cblx0aWYoc2FmZWdldHppcGZpbGUoemlwLCAnb2JqZWN0ZGF0YS54bWwnKSkgcmV0dXJuIHBhcnNlX29kcyh6aXAsIG9wdHMpO1xuXHQvKiBOdW1iZXJzICovXG5cdGlmKHNhZmVnZXR6aXBmaWxlKHppcCwgJ0luZGV4L0RvY3VtZW50Lml3YScpKSB7XG5cdFx0aWYodHlwZW9mIFVpbnQ4QXJyYXkgPT0gXCJ1bmRlZmluZWRcIikgdGhyb3cgbmV3IEVycm9yKCdOVU1CRVJTIGZpbGUgcGFyc2luZyByZXF1aXJlcyBVaW50OEFycmF5IHN1cHBvcnQnKTtcblx0XHRpZih0eXBlb2YgcGFyc2VfbnVtYmVyc19pd2EgIT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0aWYoemlwLkZpbGVJbmRleCkgcmV0dXJuIHBhcnNlX251bWJlcnNfaXdhKHppcCk7XG5cdFx0XHR2YXIgX3ppcCA9IENGQi51dGlscy5jZmJfbmV3KCk7XG5cdFx0XHR6aXBlbnRyaWVzKHppcCkuZm9yRWFjaChmdW5jdGlvbihlKSB7IHppcF9hZGRfZmlsZShfemlwLCBlLCBnZXR6aXBiaW4oemlwLCBlKSk7IH0pO1xuXHRcdFx0cmV0dXJuIHBhcnNlX251bWJlcnNfaXdhKF96aXApO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIE5VTUJFUlMgZmlsZScpO1xuXHR9XG5cdGlmKCFzYWZlZ2V0emlwZmlsZSh6aXAsICdbQ29udGVudF9UeXBlc10ueG1sJykpIHtcblx0XHRpZihzYWZlZ2V0emlwZmlsZSh6aXAsICdpbmRleC54bWwuZ3onKSkgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBOVU1CRVJTIDA4IGZpbGUnKTtcblx0XHRpZihzYWZlZ2V0emlwZmlsZSh6aXAsICdpbmRleC54bWwnKSkgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBOVU1CRVJTIDA5IGZpbGUnKTtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIFpJUCBmaWxlJyk7XG5cdH1cblxuXHR2YXIgZW50cmllcyA9IHppcGVudHJpZXMoemlwKTtcblx0dmFyIGRpciA9IHBhcnNlX2N0KChnZXR6aXBzdHIoemlwLCAnW0NvbnRlbnRfVHlwZXNdLnhtbCcpLyo6P2FueSovKSk7XG5cdHZhciB4bHNiID0gZmFsc2U7XG5cdHZhciBzaGVldHMsIGJpbm5hbWU7XG5cdGlmKGRpci53b3JrYm9va3MubGVuZ3RoID09PSAwKSB7XG5cdFx0YmlubmFtZSA9IFwieGwvd29ya2Jvb2sueG1sXCI7XG5cdFx0aWYoZ2V0emlwZGF0YSh6aXAsYmlubmFtZSwgdHJ1ZSkpIGRpci53b3JrYm9va3MucHVzaChiaW5uYW1lKTtcblx0fVxuXHRpZihkaXIud29ya2Jvb2tzLmxlbmd0aCA9PT0gMCkge1xuXHRcdGJpbm5hbWUgPSBcInhsL3dvcmtib29rLmJpblwiO1xuXHRcdGlmKCFnZXR6aXBkYXRhKHppcCxiaW5uYW1lLHRydWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZCBub3QgZmluZCB3b3JrYm9va1wiKTtcblx0XHRkaXIud29ya2Jvb2tzLnB1c2goYmlubmFtZSk7XG5cdFx0eGxzYiA9IHRydWU7XG5cdH1cblx0aWYoZGlyLndvcmtib29rc1swXS5zbGljZSgtMykgPT0gXCJiaW5cIikgeGxzYiA9IHRydWU7XG5cblx0dmFyIHRoZW1lcyA9ICh7fS8qOmFueSovKTtcblx0dmFyIHN0eWxlcyA9ICh7fS8qOmFueSovKTtcblx0aWYoIW9wdHMuYm9va1NoZWV0cyAmJiAhb3B0cy5ib29rUHJvcHMpIHtcblx0XHRzdHJzID0gW107XG5cdFx0aWYoZGlyLnNzdCkgdHJ5IHsgc3Rycz1wYXJzZV9zc3QoZ2V0emlwZGF0YSh6aXAsIHN0cmlwX2Zyb250X3NsYXNoKGRpci5zc3QpKSwgZGlyLnNzdCwgb3B0cyk7IH0gY2F0Y2goZSkgeyBpZihvcHRzLldURikgdGhyb3cgZTsgfVxuXG5cdFx0aWYob3B0cy5jZWxsU3R5bGVzICYmIGRpci50aGVtZXMubGVuZ3RoKSB0aGVtZXMgPSBwYXJzZV90aGVtZShnZXR6aXBzdHIoemlwLCBkaXIudGhlbWVzWzBdLnJlcGxhY2UoL15cXC8vLCcnKSwgdHJ1ZSl8fFwiXCIsZGlyLnRoZW1lc1swXSwgb3B0cyk7XG5cblx0XHRpZihkaXIuc3R5bGUpIHN0eWxlcyA9IHBhcnNlX3N0eShnZXR6aXBkYXRhKHppcCwgc3RyaXBfZnJvbnRfc2xhc2goZGlyLnN0eWxlKSksIGRpci5zdHlsZSwgdGhlbWVzLCBvcHRzKTtcblx0fVxuXG5cdC8qdmFyIGV4dGVybmJvb2tzID0gKi9kaXIubGlua3MubWFwKGZ1bmN0aW9uKGxpbmspIHtcblx0XHR0cnkge1xuXHRcdFx0dmFyIHJlbHMgPSBwYXJzZV9yZWxzKGdldHppcHN0cih6aXAsIGdldF9yZWxzX3BhdGgoc3RyaXBfZnJvbnRfc2xhc2gobGluaykpKSwgbGluayk7XG5cdFx0XHRyZXR1cm4gcGFyc2VfeGxpbmsoZ2V0emlwZGF0YSh6aXAsIHN0cmlwX2Zyb250X3NsYXNoKGxpbmspKSwgcmVscywgbGluaywgb3B0cyk7XG5cdFx0fSBjYXRjaChlKSB7fVxuXHR9KTtcblxuXHR2YXIgd2IgPSBwYXJzZV93YihnZXR6aXBkYXRhKHppcCwgc3RyaXBfZnJvbnRfc2xhc2goZGlyLndvcmtib29rc1swXSkpLCBkaXIud29ya2Jvb2tzWzBdLCBvcHRzKTtcblxuXHR2YXIgcHJvcHMgPSB7fSwgcHJvcGRhdGEgPSBcIlwiO1xuXG5cdGlmKGRpci5jb3JlcHJvcHMubGVuZ3RoKSB7XG5cdFx0cHJvcGRhdGEgPSBnZXR6aXBkYXRhKHppcCwgc3RyaXBfZnJvbnRfc2xhc2goZGlyLmNvcmVwcm9wc1swXSksIHRydWUpO1xuXHRcdGlmKHByb3BkYXRhKSBwcm9wcyA9IHBhcnNlX2NvcmVfcHJvcHMocHJvcGRhdGEpO1xuXHRcdGlmKGRpci5leHRwcm9wcy5sZW5ndGggIT09IDApIHtcblx0XHRcdHByb3BkYXRhID0gZ2V0emlwZGF0YSh6aXAsIHN0cmlwX2Zyb250X3NsYXNoKGRpci5leHRwcm9wc1swXSksIHRydWUpO1xuXHRcdFx0aWYocHJvcGRhdGEpIHBhcnNlX2V4dF9wcm9wcyhwcm9wZGF0YSwgcHJvcHMsIG9wdHMpO1xuXHRcdH1cblx0fVxuXG5cdHZhciBjdXN0cHJvcHMgPSB7fTtcblx0aWYoIW9wdHMuYm9va1NoZWV0cyB8fCBvcHRzLmJvb2tQcm9wcykge1xuXHRcdGlmIChkaXIuY3VzdHByb3BzLmxlbmd0aCAhPT0gMCkge1xuXHRcdFx0cHJvcGRhdGEgPSBnZXR6aXBzdHIoemlwLCBzdHJpcF9mcm9udF9zbGFzaChkaXIuY3VzdHByb3BzWzBdKSwgdHJ1ZSk7XG5cdFx0XHRpZihwcm9wZGF0YSkgY3VzdHByb3BzID0gcGFyc2VfY3VzdF9wcm9wcyhwcm9wZGF0YSwgb3B0cyk7XG5cdFx0fVxuXHR9XG5cblx0dmFyIG91dCA9ICh7fS8qOmFueSovKTtcblx0aWYob3B0cy5ib29rU2hlZXRzIHx8IG9wdHMuYm9va1Byb3BzKSB7XG5cdFx0aWYod2IuU2hlZXRzKSBzaGVldHMgPSB3Yi5TaGVldHMubWFwKGZ1bmN0aW9uIHBsdWNrKHgpeyByZXR1cm4geC5uYW1lOyB9KTtcblx0XHRlbHNlIGlmKHByb3BzLldvcmtzaGVldHMgJiYgcHJvcHMuU2hlZXROYW1lcy5sZW5ndGggPiAwKSBzaGVldHM9cHJvcHMuU2hlZXROYW1lcztcblx0XHRpZihvcHRzLmJvb2tQcm9wcykgeyBvdXQuUHJvcHMgPSBwcm9wczsgb3V0LkN1c3Rwcm9wcyA9IGN1c3Rwcm9wczsgfVxuXHRcdGlmKG9wdHMuYm9va1NoZWV0cyAmJiB0eXBlb2Ygc2hlZXRzICE9PSAndW5kZWZpbmVkJykgb3V0LlNoZWV0TmFtZXMgPSBzaGVldHM7XG5cdFx0aWYob3B0cy5ib29rU2hlZXRzID8gb3V0LlNoZWV0TmFtZXMgOiBvcHRzLmJvb2tQcm9wcykgcmV0dXJuIG91dDtcblx0fVxuXHRzaGVldHMgPSB7fTtcblxuXHR2YXIgZGVwcyA9IHt9O1xuXHRpZihvcHRzLmJvb2tEZXBzICYmIGRpci5jYWxjY2hhaW4pIGRlcHM9cGFyc2VfY2MoZ2V0emlwZGF0YSh6aXAsIHN0cmlwX2Zyb250X3NsYXNoKGRpci5jYWxjY2hhaW4pKSxkaXIuY2FsY2NoYWluLG9wdHMpO1xuXG5cdHZhciBpPTA7XG5cdHZhciBzaGVldFJlbHMgPSAoe30vKjphbnkqLyk7XG5cdHZhciBwYXRoLCByZWxzUGF0aDtcblxuXHR7XG5cdFx0dmFyIHdic2hlZXRzID0gd2IuU2hlZXRzO1xuXHRcdHByb3BzLldvcmtzaGVldHMgPSB3YnNoZWV0cy5sZW5ndGg7XG5cdFx0cHJvcHMuU2hlZXROYW1lcyA9IFtdO1xuXHRcdGZvcih2YXIgaiA9IDA7IGogIT0gd2JzaGVldHMubGVuZ3RoOyArK2opIHtcblx0XHRcdHByb3BzLlNoZWV0TmFtZXNbal0gPSB3YnNoZWV0c1tqXS5uYW1lO1xuXHRcdH1cblx0fVxuXG5cdHZhciB3YmV4dCA9IHhsc2IgPyBcImJpblwiIDogXCJ4bWxcIjtcblx0dmFyIHdicmVsc2kgPSBkaXIud29ya2Jvb2tzWzBdLmxhc3RJbmRleE9mKFwiL1wiKTtcblx0dmFyIHdicmVsc2ZpbGUgPSAoZGlyLndvcmtib29rc1swXS5zbGljZSgwLCB3YnJlbHNpKzEpICsgXCJfcmVscy9cIiArIGRpci53b3JrYm9va3NbMF0uc2xpY2Uod2JyZWxzaSsxKSArIFwiLnJlbHNcIikucmVwbGFjZSgvXlxcLy8sXCJcIik7XG5cdGlmKCFzYWZlZ2V0emlwZmlsZSh6aXAsIHdicmVsc2ZpbGUpKSB3YnJlbHNmaWxlID0gJ3hsL19yZWxzL3dvcmtib29rLicgKyB3YmV4dCArICcucmVscyc7XG5cdHZhciB3YnJlbHMgPSBwYXJzZV9yZWxzKGdldHppcHN0cih6aXAsIHdicmVsc2ZpbGUsIHRydWUpLCB3YnJlbHNmaWxlLnJlcGxhY2UoL19yZWxzLiovLCBcInM1c1wiKSk7XG5cblx0aWYoKGRpci5tZXRhZGF0YSB8fCBbXSkubGVuZ3RoID49IDEpIHtcblx0XHQvKiBUT0RPOiBNRFggYW5kIG90aGVyIHR5cGVzIG9mIG1ldGFkYXRhICovXG5cdFx0b3B0cy54bG1ldGEgPSBwYXJzZV94bG1ldGEoZ2V0emlwZGF0YSh6aXAsIHN0cmlwX2Zyb250X3NsYXNoKGRpci5tZXRhZGF0YVswXSkpLGRpci5tZXRhZGF0YVswXSxvcHRzKTtcblx0fVxuXG5cdGlmKChkaXIucGVvcGxlIHx8IFtdKS5sZW5ndGggPj0gMSkge1xuXHRcdG9wdHMucGVvcGxlID0gcGFyc2VfcGVvcGxlX3htbChnZXR6aXBkYXRhKHppcCwgc3RyaXBfZnJvbnRfc2xhc2goZGlyLnBlb3BsZVswXSkpLG9wdHMpO1xuXHR9XG5cblx0aWYod2JyZWxzKSB3YnJlbHMgPSBzYWZlX3BhcnNlX3dicmVscyh3YnJlbHMsIHdiLlNoZWV0cyk7XG5cblx0LyogTnVtYmVycyBpT1MgaGFjayAqL1xuXHR2YXIgbm1vZGUgPSAoZ2V0emlwZGF0YSh6aXAsXCJ4bC93b3Jrc2hlZXRzL3NoZWV0LnhtbFwiLHRydWUpKT8xOjA7XG5cdHdzbG9vcDogZm9yKGkgPSAwOyBpICE9IHByb3BzLldvcmtzaGVldHM7ICsraSkge1xuXHRcdHZhciBzdHlwZSA9IFwic2hlZXRcIjtcblx0XHRpZih3YnJlbHMgJiYgd2JyZWxzW2ldKSB7XG5cdFx0XHRwYXRoID0gJ3hsLycgKyAod2JyZWxzW2ldWzFdKS5yZXBsYWNlKC9bXFwvXT94bFxcLy8sIFwiXCIpO1xuXHRcdFx0aWYoIXNhZmVnZXR6aXBmaWxlKHppcCwgcGF0aCkpIHBhdGggPSB3YnJlbHNbaV1bMV07XG5cdFx0XHRpZighc2FmZWdldHppcGZpbGUoemlwLCBwYXRoKSkgcGF0aCA9IHdicmVsc2ZpbGUucmVwbGFjZSgvX3JlbHNcXC8uKiQvLFwiXCIpICsgd2JyZWxzW2ldWzFdO1xuXHRcdFx0c3R5cGUgPSB3YnJlbHNbaV1bMl07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHBhdGggPSAneGwvd29ya3NoZWV0cy9zaGVldCcrKGkrMS1ubW9kZSkrXCIuXCIgKyB3YmV4dDtcblx0XHRcdHBhdGggPSBwYXRoLnJlcGxhY2UoL3NoZWV0MFxcLi8sXCJzaGVldC5cIik7XG5cdFx0fVxuXHRcdHJlbHNQYXRoID0gcGF0aC5yZXBsYWNlKC9eKC4qKShcXC8pKFteXFwvXSopJC8sIFwiJDEvX3JlbHMvJDMucmVsc1wiKTtcblx0XHRpZihvcHRzICYmIG9wdHMuc2hlZXRzICE9IG51bGwpIHN3aXRjaCh0eXBlb2Ygb3B0cy5zaGVldHMpIHtcblx0XHRcdGNhc2UgXCJudW1iZXJcIjogaWYoaSAhPSBvcHRzLnNoZWV0cykgY29udGludWUgd3Nsb29wOyBicmVhaztcblx0XHRcdGNhc2UgXCJzdHJpbmdcIjogaWYocHJvcHMuU2hlZXROYW1lc1tpXS50b0xvd2VyQ2FzZSgpICE9IG9wdHMuc2hlZXRzLnRvTG93ZXJDYXNlKCkpIGNvbnRpbnVlIHdzbG9vcDsgYnJlYWs7XG5cdFx0XHRkZWZhdWx0OiBpZihBcnJheS5pc0FycmF5ICYmIEFycmF5LmlzQXJyYXkob3B0cy5zaGVldHMpKSB7XG5cdFx0XHRcdHZhciBzbmpzZWVuID0gZmFsc2U7XG5cdFx0XHRcdGZvcih2YXIgc25qID0gMDsgc25qICE9IG9wdHMuc2hlZXRzLmxlbmd0aDsgKytzbmopIHtcblx0XHRcdFx0XHRpZih0eXBlb2Ygb3B0cy5zaGVldHNbc25qXSA9PSBcIm51bWJlclwiICYmIG9wdHMuc2hlZXRzW3Nual0gPT0gaSkgc25qc2Vlbj0xO1xuXHRcdFx0XHRcdGlmKHR5cGVvZiBvcHRzLnNoZWV0c1tzbmpdID09IFwic3RyaW5nXCIgJiYgb3B0cy5zaGVldHNbc25qXS50b0xvd2VyQ2FzZSgpID09IHByb3BzLlNoZWV0TmFtZXNbaV0udG9Mb3dlckNhc2UoKSkgc25qc2VlbiA9IDE7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoIXNuanNlZW4pIGNvbnRpbnVlIHdzbG9vcDtcblx0XHRcdH1cblx0XHR9XG5cdFx0c2FmZV9wYXJzZV9zaGVldCh6aXAsIHBhdGgsIHJlbHNQYXRoLCBwcm9wcy5TaGVldE5hbWVzW2ldLCBpLCBzaGVldFJlbHMsIHNoZWV0cywgc3R5cGUsIG9wdHMsIHdiLCB0aGVtZXMsIHN0eWxlcyk7XG5cdH1cblxuXHRvdXQgPSAoe1xuXHRcdERpcmVjdG9yeTogZGlyLFxuXHRcdFdvcmtib29rOiB3Yixcblx0XHRQcm9wczogcHJvcHMsXG5cdFx0Q3VzdHByb3BzOiBjdXN0cHJvcHMsXG5cdFx0RGVwczogZGVwcyxcblx0XHRTaGVldHM6IHNoZWV0cyxcblx0XHRTaGVldE5hbWVzOiBwcm9wcy5TaGVldE5hbWVzLFxuXHRcdFN0cmluZ3M6IHN0cnMsXG5cdFx0U3R5bGVzOiBzdHlsZXMsXG5cdFx0VGhlbWVzOiB0aGVtZXMsXG5cdFx0U1NGOiBkdXAodGFibGVfZm10KVxuXHR9Lyo6YW55Ki8pO1xuXHRpZihvcHRzICYmIG9wdHMuYm9va0ZpbGVzKSB7XG5cdFx0aWYoemlwLmZpbGVzKSB7XG5cdFx0XHRvdXQua2V5cyA9IGVudHJpZXM7XG5cdFx0XHRvdXQuZmlsZXMgPSB6aXAuZmlsZXM7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG91dC5rZXlzID0gW107XG5cdFx0XHRvdXQuZmlsZXMgPSB7fTtcblx0XHRcdHppcC5GdWxsUGF0aHMuZm9yRWFjaChmdW5jdGlvbihwLCBpZHgpIHtcblx0XHRcdFx0cCA9IHAucmVwbGFjZSgvXlJvb3QgRW50cnlbXFwvXS8sIFwiXCIpO1xuXHRcdFx0XHRvdXQua2V5cy5wdXNoKHApO1xuXHRcdFx0XHRvdXQuZmlsZXNbcF0gPSB6aXAuRmlsZUluZGV4W2lkeF07XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblx0aWYob3B0cyAmJiBvcHRzLmJvb2tWQkEpIHtcblx0XHRpZihkaXIudmJhLmxlbmd0aCA+IDApIG91dC52YmFyYXcgPSBnZXR6aXBkYXRhKHppcCxzdHJpcF9mcm9udF9zbGFzaChkaXIudmJhWzBdKSx0cnVlKTtcblx0XHRlbHNlIGlmKGRpci5kZWZhdWx0cyAmJiBkaXIuZGVmYXVsdHMuYmluID09PSBDVF9WQkEpIG91dC52YmFyYXcgPSBnZXR6aXBkYXRhKHppcCwgJ3hsL3ZiYVByb2plY3QuYmluJyx0cnVlKTtcblx0fVxuXHRyZXR1cm4gb3V0O1xufVxuXG4vKiBbTVMtT0ZGQ1JZUFRPXSAyLjEuMSAqL1xuZnVuY3Rpb24gcGFyc2VfeGxzeGNmYihjZmIsIF9vcHRzLyo6P1BhcnNlT3B0cyovKS8qOldvcmtib29rKi8ge1xuXHR2YXIgb3B0cyA9IF9vcHRzIHx8IHt9O1xuXHR2YXIgZiA9ICdXb3JrYm9vaycsIGRhdGEgPSBDRkIuZmluZChjZmIsIGYpO1xuXHR0cnkge1xuXHRmID0gJy8hRGF0YVNwYWNlcy9WZXJzaW9uJztcblx0ZGF0YSA9IENGQi5maW5kKGNmYiwgZik7IGlmKCFkYXRhIHx8ICFkYXRhLmNvbnRlbnQpIHRocm93IG5ldyBFcnJvcihcIkVDTUEtMzc2IEVuY3J5cHRlZCBmaWxlIG1pc3NpbmcgXCIgKyBmKTtcblx0Lyp2YXIgdmVyc2lvbiA9ICovcGFyc2VfRGF0YVNwYWNlVmVyc2lvbkluZm8oZGF0YS5jb250ZW50KTtcblxuXHQvKiAyLjMuNC4xICovXG5cdGYgPSAnLyFEYXRhU3BhY2VzL0RhdGFTcGFjZU1hcCc7XG5cdGRhdGEgPSBDRkIuZmluZChjZmIsIGYpOyBpZighZGF0YSB8fCAhZGF0YS5jb250ZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJFQ01BLTM3NiBFbmNyeXB0ZWQgZmlsZSBtaXNzaW5nIFwiICsgZik7XG5cdHZhciBkc20gPSBwYXJzZV9EYXRhU3BhY2VNYXAoZGF0YS5jb250ZW50KTtcblx0aWYoZHNtLmxlbmd0aCAhPT0gMSB8fCBkc21bMF0uY29tcHMubGVuZ3RoICE9PSAxIHx8IGRzbVswXS5jb21wc1swXS50ICE9PSAwIHx8IGRzbVswXS5uYW1lICE9PSBcIlN0cm9uZ0VuY3J5cHRpb25EYXRhU3BhY2VcIiB8fCBkc21bMF0uY29tcHNbMF0udiAhPT0gXCJFbmNyeXB0ZWRQYWNrYWdlXCIpXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiRUNNQS0zNzYgRW5jcnlwdGVkIGZpbGUgYmFkIFwiICsgZik7XG5cblx0LyogMi4zLjQuMiAqL1xuXHRmID0gJy8hRGF0YVNwYWNlcy9EYXRhU3BhY2VJbmZvL1N0cm9uZ0VuY3J5cHRpb25EYXRhU3BhY2UnO1xuXHRkYXRhID0gQ0ZCLmZpbmQoY2ZiLCBmKTsgaWYoIWRhdGEgfHwgIWRhdGEuY29udGVudCkgdGhyb3cgbmV3IEVycm9yKFwiRUNNQS0zNzYgRW5jcnlwdGVkIGZpbGUgbWlzc2luZyBcIiArIGYpO1xuXHR2YXIgc2VkcyA9IHBhcnNlX0RhdGFTcGFjZURlZmluaXRpb24oZGF0YS5jb250ZW50KTtcblx0aWYoc2Vkcy5sZW5ndGggIT0gMSB8fCBzZWRzWzBdICE9IFwiU3Ryb25nRW5jcnlwdGlvblRyYW5zZm9ybVwiKVxuXHRcdHRocm93IG5ldyBFcnJvcihcIkVDTUEtMzc2IEVuY3J5cHRlZCBmaWxlIGJhZCBcIiArIGYpO1xuXG5cdC8qIDIuMy40LjMgKi9cblx0ZiA9ICcvIURhdGFTcGFjZXMvVHJhbnNmb3JtSW5mby9TdHJvbmdFbmNyeXB0aW9uVHJhbnNmb3JtLyFQcmltYXJ5Jztcblx0ZGF0YSA9IENGQi5maW5kKGNmYiwgZik7IGlmKCFkYXRhIHx8ICFkYXRhLmNvbnRlbnQpIHRocm93IG5ldyBFcnJvcihcIkVDTUEtMzc2IEVuY3J5cHRlZCBmaWxlIG1pc3NpbmcgXCIgKyBmKTtcblx0Lyp2YXIgaGRyID0gKi9wYXJzZV9QcmltYXJ5KGRhdGEuY29udGVudCk7XG5cdH0gY2F0Y2goZSkge31cblxuXHRmID0gJy9FbmNyeXB0aW9uSW5mbyc7XG5cdGRhdGEgPSBDRkIuZmluZChjZmIsIGYpOyBpZighZGF0YSB8fCAhZGF0YS5jb250ZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJFQ01BLTM3NiBFbmNyeXB0ZWQgZmlsZSBtaXNzaW5nIFwiICsgZik7XG5cdHZhciBlaW5mbyA9IHBhcnNlX0VuY3J5cHRpb25JbmZvKGRhdGEuY29udGVudCk7XG5cblx0LyogMi4zLjQuNCAqL1xuXHRmID0gJy9FbmNyeXB0ZWRQYWNrYWdlJztcblx0ZGF0YSA9IENGQi5maW5kKGNmYiwgZik7IGlmKCFkYXRhIHx8ICFkYXRhLmNvbnRlbnQpIHRocm93IG5ldyBFcnJvcihcIkVDTUEtMzc2IEVuY3J5cHRlZCBmaWxlIG1pc3NpbmcgXCIgKyBmKTtcblxuLypnbG9iYWwgZGVjcnlwdF9hZ2lsZSAqL1xuLyo6OiBkZWNsYXJlIHZhciBkZWNyeXB0X2FnaWxlOmFueTsgKi9cblx0aWYoZWluZm9bMF0gPT0gMHgwNCAmJiB0eXBlb2YgZGVjcnlwdF9hZ2lsZSAhPT0gJ3VuZGVmaW5lZCcpIHJldHVybiBkZWNyeXB0X2FnaWxlKGVpbmZvWzFdLCBkYXRhLmNvbnRlbnQsIG9wdHMucGFzc3dvcmQgfHwgXCJcIiwgb3B0cyk7XG4vKmdsb2JhbCBkZWNyeXB0X3N0ZDc2ICovXG4vKjo6IGRlY2xhcmUgdmFyIGRlY3J5cHRfc3RkNzY6YW55OyAqL1xuXHRpZihlaW5mb1swXSA9PSAweDAyICYmIHR5cGVvZiBkZWNyeXB0X3N0ZDc2ICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIGRlY3J5cHRfc3RkNzYoZWluZm9bMV0sIGRhdGEuY29udGVudCwgb3B0cy5wYXNzd29yZCB8fCBcIlwiLCBvcHRzKTtcblx0dGhyb3cgbmV3IEVycm9yKFwiRmlsZSBpcyBwYXNzd29yZC1wcm90ZWN0ZWRcIik7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3ppcCh3Yi8qOldvcmtib29rKi8sIG9wdHMvKjpXcml0ZU9wdHMqLykvKjpaSVAqLyB7XG5cdGlmKG9wdHMuYm9va1R5cGUgPT0gXCJvZHNcIikgcmV0dXJuIHdyaXRlX29kcyh3Yiwgb3B0cyk7XG5cdGlmKG9wdHMuYm9va1R5cGUgPT0gXCJudW1iZXJzXCIpIHJldHVybiB3cml0ZV9udW1iZXJzX2l3YSh3Yiwgb3B0cyk7XG5cdGlmKG9wdHMuYm9va1R5cGUgPT0gXCJ4bHNiXCIpIHJldHVybiB3cml0ZV96aXBfeGxzeGIod2IsIG9wdHMpO1xuXHRyZXR1cm4gd3JpdGVfemlwX3hsc3god2IsIG9wdHMpO1xufVxuXG4vKiBYTFNYIGFuZCBYTFNCIHdyaXRpbmcgYXJlIHZlcnkgc2ltaWxhci4gIE9yaWdpbmFsbHkgdGhleSB3ZXJlIHVuaWZpZWQgaW4gb25lXG4gICBleHBvcnQgZnVuY3Rpb24uICBUaGlzIGlzIGhvcnJpYmxlIGZvciB0cmVlIHNoYWtpbmcgaW4gdGhlIGNvbW1vbiBjYXNlIChtb3N0XG4gICBhcHBsaWNhdGlvbnMgbmVlZCB0byBleHBvcnQgZmlsZXMgaW4gb25lIGZvcm1hdCkgc28gdGhpcyBmdW5jdGlvbiBzdXBwb3J0c1xuICAgYm90aCBmb3JtYXRzIHdoaWxlIHdyaXRlX3ppcF94bHN4IG9ubHkgaGFuZGxlcyBYTFNYICovXG5mdW5jdGlvbiB3cml0ZV96aXBfeGxzeGIod2IvKjpXb3JrYm9vayovLCBvcHRzLyo6V3JpdGVPcHRzKi8pLyo6WklQKi8ge1xuXHRfc2hhcGVpZCA9IDEwMjQ7XG5cdGlmKHdiICYmICF3Yi5TU0YpIHtcblx0XHR3Yi5TU0YgPSBkdXAodGFibGVfZm10KTtcblx0fVxuXHRpZih3YiAmJiB3Yi5TU0YpIHtcblx0XHRtYWtlX3NzZigpOyBTU0ZfbG9hZF90YWJsZSh3Yi5TU0YpO1xuXHRcdC8vICRGbG93SWdub3JlXG5cdFx0b3B0cy5yZXZzc2YgPSBldmVydF9udW0od2IuU1NGKTsgb3B0cy5yZXZzc2Zbd2IuU1NGWzY1NTM1XV0gPSAwO1xuXHRcdG9wdHMuc3NmID0gd2IuU1NGO1xuXHR9XG5cdG9wdHMucmVscyA9IHt9OyBvcHRzLndicmVscyA9IHt9O1xuXHRvcHRzLlN0cmluZ3MgPSAvKjo6KCgqL1tdLyo6OiA6YW55KTpTU1QpKi87IG9wdHMuU3RyaW5ncy5Db3VudCA9IDA7IG9wdHMuU3RyaW5ncy5VbmlxdWUgPSAwO1xuXHRpZihicm93c2VyX2hhc19NYXApIG9wdHMucmV2U3RyaW5ncyA9IG5ldyBNYXAoKTtcblx0ZWxzZSB7IG9wdHMucmV2U3RyaW5ncyA9IHt9OyBvcHRzLnJldlN0cmluZ3MuZm9vID0gW107IGRlbGV0ZSBvcHRzLnJldlN0cmluZ3MuZm9vOyB9XG5cdHZhciB3YmV4dCA9IG9wdHMuYm9va1R5cGUgPT0gXCJ4bHNiXCIgPyBcImJpblwiIDogXCJ4bWxcIjtcblx0dmFyIHZiYWZtdCA9IFZCQUZNVFMuaW5kZXhPZihvcHRzLmJvb2tUeXBlKSA+IC0xO1xuXHR2YXIgY3QgPSBuZXdfY3QoKTtcblx0Zml4X3dyaXRlX29wdHMob3B0cyA9IG9wdHMgfHwge30pO1xuXHR2YXIgemlwID0gemlwX25ldygpO1xuXHR2YXIgZiA9IFwiXCIsIHJJZCA9IDA7XG5cblx0b3B0cy5jZWxsWGZzID0gW107XG5cdGdldF9jZWxsX3N0eWxlKG9wdHMuY2VsbFhmcywge30sIHtyZXZzc2Y6e1wiR2VuZXJhbFwiOjB9fSk7XG5cblx0aWYoIXdiLlByb3BzKSB3Yi5Qcm9wcyA9IHt9O1xuXG5cdGYgPSBcImRvY1Byb3BzL2NvcmUueG1sXCI7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX2NvcmVfcHJvcHMod2IuUHJvcHMsIG9wdHMpKTtcblx0Y3QuY29yZXByb3BzLnB1c2goZik7XG5cdGFkZF9yZWxzKG9wdHMucmVscywgMiwgZiwgUkVMUy5DT1JFX1BST1BTKTtcblxuXHQvKjo6aWYoIXdiLlByb3BzKSB0aHJvdyBcInVucmVhY2hhYmxlXCI7ICovXG5cdGYgPSBcImRvY1Byb3BzL2FwcC54bWxcIjtcblx0aWYod2IuUHJvcHMgJiYgd2IuUHJvcHMuU2hlZXROYW1lcyl7LyogZW1wdHkgKi99XG5cdGVsc2UgaWYoIXdiLldvcmtib29rIHx8ICF3Yi5Xb3JrYm9vay5TaGVldHMpIHdiLlByb3BzLlNoZWV0TmFtZXMgPSB3Yi5TaGVldE5hbWVzO1xuXHRlbHNlIHtcblx0XHR2YXIgX3NuID0gW107XG5cdFx0Zm9yKHZhciBfaSA9IDA7IF9pIDwgd2IuU2hlZXROYW1lcy5sZW5ndGg7ICsrX2kpXG5cdFx0XHRpZigod2IuV29ya2Jvb2suU2hlZXRzW19pXXx8e30pLkhpZGRlbiAhPSAyKSBfc24ucHVzaCh3Yi5TaGVldE5hbWVzW19pXSk7XG5cdFx0d2IuUHJvcHMuU2hlZXROYW1lcyA9IF9zbjtcblx0fVxuXHR3Yi5Qcm9wcy5Xb3Jrc2hlZXRzID0gd2IuUHJvcHMuU2hlZXROYW1lcy5sZW5ndGg7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX2V4dF9wcm9wcyh3Yi5Qcm9wcywgb3B0cykpO1xuXHRjdC5leHRwcm9wcy5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLnJlbHMsIDMsIGYsIFJFTFMuRVhUX1BST1BTKTtcblxuXHRpZih3Yi5DdXN0cHJvcHMgIT09IHdiLlByb3BzICYmIGtleXMod2IuQ3VzdHByb3BzfHx7fSkubGVuZ3RoID4gMCkge1xuXHRcdGYgPSBcImRvY1Byb3BzL2N1c3RvbS54bWxcIjtcblx0XHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3cml0ZV9jdXN0X3Byb3BzKHdiLkN1c3Rwcm9wcywgb3B0cykpO1xuXHRcdGN0LmN1c3Rwcm9wcy5wdXNoKGYpO1xuXHRcdGFkZF9yZWxzKG9wdHMucmVscywgNCwgZiwgUkVMUy5DVVNUX1BST1BTKTtcblx0fVxuXG5cdGZvcihySWQ9MTtySWQgPD0gd2IuU2hlZXROYW1lcy5sZW5ndGg7ICsrcklkKSB7XG5cdFx0dmFyIHdzcmVscyA9IHsnIWlkJzp7fX07XG5cdFx0dmFyIHdzID0gd2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbcklkLTFdXTtcblx0XHR2YXIgX3R5cGUgPSAod3MgfHwge30pW1wiIXR5cGVcIl0gfHwgXCJzaGVldFwiO1xuXHRcdHN3aXRjaChfdHlwZSkge1xuXHRcdGNhc2UgXCJjaGFydFwiOlxuXHRcdFx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRmID0gXCJ4bC93b3Jrc2hlZXRzL3NoZWV0XCIgKyBySWQgKyBcIi5cIiArIHdiZXh0O1xuXHRcdFx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfd3MocklkLTEsIGYsIG9wdHMsIHdiLCB3c3JlbHMpKTtcblx0XHRcdGN0LnNoZWV0cy5wdXNoKGYpO1xuXHRcdFx0YWRkX3JlbHMob3B0cy53YnJlbHMsIC0xLCBcIndvcmtzaGVldHMvc2hlZXRcIiArIHJJZCArIFwiLlwiICsgd2JleHQsIFJFTFMuV1NbMF0pO1xuXHRcdH1cblxuXHRcdGlmKHdzKSB7XG5cdFx0XHR2YXIgY29tbWVudHMgPSB3c1snIWNvbW1lbnRzJ107XG5cdFx0XHR2YXIgbmVlZF92bWwgPSBmYWxzZTtcblx0XHRcdHZhciBjZiA9IFwiXCI7XG5cdFx0XHRpZihjb21tZW50cyAmJiBjb21tZW50cy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGNmID0gXCJ4bC9jb21tZW50c1wiICsgcklkICsgXCIuXCIgKyB3YmV4dDtcblx0XHRcdFx0emlwX2FkZF9maWxlKHppcCwgY2YsIHdyaXRlX2NtbnQoY29tbWVudHMsIGNmLCBvcHRzKSk7XG5cdFx0XHRcdGN0LmNvbW1lbnRzLnB1c2goY2YpO1xuXHRcdFx0XHRhZGRfcmVscyh3c3JlbHMsIC0xLCBcIi4uL2NvbW1lbnRzXCIgKyBySWQgKyBcIi5cIiArIHdiZXh0LCBSRUxTLkNNTlQpO1xuXHRcdFx0XHRuZWVkX3ZtbCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZih3c1snIWxlZ2FjeSddKSB7XG5cdFx0XHRcdGlmKG5lZWRfdm1sKSB6aXBfYWRkX2ZpbGUoemlwLCBcInhsL2RyYXdpbmdzL3ZtbERyYXdpbmdcIiArIChySWQpICsgXCIudm1sXCIsIHdyaXRlX2NvbW1lbnRzX3ZtbChySWQsIHdzWychY29tbWVudHMnXSkpO1xuXHRcdFx0fVxuXHRcdFx0ZGVsZXRlIHdzWychY29tbWVudHMnXTtcblx0XHRcdGRlbGV0ZSB3c1snIWxlZ2FjeSddO1xuXHRcdH1cblxuXHRcdGlmKHdzcmVsc1snIWlkJ10ucklkMSkgemlwX2FkZF9maWxlKHppcCwgZ2V0X3JlbHNfcGF0aChmKSwgd3JpdGVfcmVscyh3c3JlbHMpKTtcblx0fVxuXG5cdGlmKG9wdHMuU3RyaW5ncyAhPSBudWxsICYmIG9wdHMuU3RyaW5ncy5sZW5ndGggPiAwKSB7XG5cdFx0ZiA9IFwieGwvc2hhcmVkU3RyaW5ncy5cIiArIHdiZXh0O1xuXHRcdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX3NzdChvcHRzLlN0cmluZ3MsIGYsIG9wdHMpKTtcblx0XHRjdC5zdHJzLnB1c2goZik7XG5cdFx0YWRkX3JlbHMob3B0cy53YnJlbHMsIC0xLCBcInNoYXJlZFN0cmluZ3MuXCIgKyB3YmV4dCwgUkVMUy5TU1QpO1xuXHR9XG5cblx0ZiA9IFwieGwvd29ya2Jvb2suXCIgKyB3YmV4dDtcblx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfd2Iod2IsIGYsIG9wdHMpKTtcblx0Y3Qud29ya2Jvb2tzLnB1c2goZik7XG5cdGFkZF9yZWxzKG9wdHMucmVscywgMSwgZiwgUkVMUy5XQik7XG5cblx0LyogVE9ETzogc29tZXRoaW5nIG1vcmUgaW50ZWxsaWdlbnQgd2l0aCB0aGVtZXMgKi9cblxuXHRmID0gXCJ4bC90aGVtZS90aGVtZTEueG1sXCI7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX3RoZW1lKHdiLlRoZW1lcywgb3B0cykpO1xuXHRjdC50aGVtZXMucHVzaChmKTtcblx0YWRkX3JlbHMob3B0cy53YnJlbHMsIC0xLCBcInRoZW1lL3RoZW1lMS54bWxcIiwgUkVMUy5USEVNRSk7XG5cblx0LyogVE9ETzogc29tZXRoaW5nIG1vcmUgaW50ZWxsaWdlbnQgd2l0aCBzdHlsZXMgKi9cblxuXHRmID0gXCJ4bC9zdHlsZXMuXCIgKyB3YmV4dDtcblx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfc3R5KHdiLCBmLCBvcHRzKSk7XG5cdGN0LnN0eWxlcy5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLndicmVscywgLTEsIFwic3R5bGVzLlwiICsgd2JleHQsIFJFTFMuU1RZKTtcblxuXHRpZih3Yi52YmFyYXcgJiYgdmJhZm10KSB7XG5cdFx0ZiA9IFwieGwvdmJhUHJvamVjdC5iaW5cIjtcblx0XHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3Yi52YmFyYXcpO1xuXHRcdGN0LnZiYS5wdXNoKGYpO1xuXHRcdGFkZF9yZWxzKG9wdHMud2JyZWxzLCAtMSwgXCJ2YmFQcm9qZWN0LmJpblwiLCBSRUxTLlZCQSk7XG5cdH1cblxuXHRmID0gXCJ4bC9tZXRhZGF0YS5cIiArIHdiZXh0O1xuXHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3cml0ZV94bG1ldGEoZikpO1xuXHRjdC5tZXRhZGF0YS5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLndicmVscywgLTEsIFwibWV0YWRhdGEuXCIgKyB3YmV4dCwgUkVMUy5YTE1FVEEpO1xuXG5cdHppcF9hZGRfZmlsZSh6aXAsIFwiW0NvbnRlbnRfVHlwZXNdLnhtbFwiLCB3cml0ZV9jdChjdCwgb3B0cykpO1xuXHR6aXBfYWRkX2ZpbGUoemlwLCAnX3JlbHMvLnJlbHMnLCB3cml0ZV9yZWxzKG9wdHMucmVscykpO1xuXHR6aXBfYWRkX2ZpbGUoemlwLCAneGwvX3JlbHMvd29ya2Jvb2suJyArIHdiZXh0ICsgJy5yZWxzJywgd3JpdGVfcmVscyhvcHRzLndicmVscykpO1xuXG5cdGRlbGV0ZSBvcHRzLnJldnNzZjsgZGVsZXRlIG9wdHMuc3NmO1xuXHRyZXR1cm4gemlwO1xufVxuXG5mdW5jdGlvbiB3cml0ZV96aXBfeGxzeCh3Yi8qOldvcmtib29rKi8sIG9wdHMvKjpXcml0ZU9wdHMqLykvKjpaSVAqLyB7XG5cdF9zaGFwZWlkID0gMTAyNDtcblx0aWYod2IgJiYgIXdiLlNTRikge1xuXHRcdHdiLlNTRiA9IGR1cCh0YWJsZV9mbXQpO1xuXHR9XG5cdGlmKHdiICYmIHdiLlNTRikge1xuXHRcdG1ha2Vfc3NmKCk7IFNTRl9sb2FkX3RhYmxlKHdiLlNTRik7XG5cdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRvcHRzLnJldnNzZiA9IGV2ZXJ0X251bSh3Yi5TU0YpOyBvcHRzLnJldnNzZlt3Yi5TU0ZbNjU1MzVdXSA9IDA7XG5cdFx0b3B0cy5zc2YgPSB3Yi5TU0Y7XG5cdH1cblx0b3B0cy5yZWxzID0ge307IG9wdHMud2JyZWxzID0ge307XG5cdG9wdHMuU3RyaW5ncyA9IC8qOjooKCovW10vKjo6IDphbnkpOlNTVCkqLzsgb3B0cy5TdHJpbmdzLkNvdW50ID0gMDsgb3B0cy5TdHJpbmdzLlVuaXF1ZSA9IDA7XG5cdGlmKGJyb3dzZXJfaGFzX01hcCkgb3B0cy5yZXZTdHJpbmdzID0gbmV3IE1hcCgpO1xuXHRlbHNlIHsgb3B0cy5yZXZTdHJpbmdzID0ge307IG9wdHMucmV2U3RyaW5ncy5mb28gPSBbXTsgZGVsZXRlIG9wdHMucmV2U3RyaW5ncy5mb287IH1cblx0dmFyIHdiZXh0ID0gXCJ4bWxcIjtcblx0dmFyIHZiYWZtdCA9IFZCQUZNVFMuaW5kZXhPZihvcHRzLmJvb2tUeXBlKSA+IC0xO1xuXHR2YXIgY3QgPSBuZXdfY3QoKTtcblx0Zml4X3dyaXRlX29wdHMob3B0cyA9IG9wdHMgfHwge30pO1xuXHR2YXIgemlwID0gemlwX25ldygpO1xuXHR2YXIgZiA9IFwiXCIsIHJJZCA9IDA7XG5cblx0b3B0cy5jZWxsWGZzID0gW107XG5cdGdldF9jZWxsX3N0eWxlKG9wdHMuY2VsbFhmcywge30sIHtyZXZzc2Y6e1wiR2VuZXJhbFwiOjB9fSk7XG5cblx0aWYoIXdiLlByb3BzKSB3Yi5Qcm9wcyA9IHt9O1xuXG5cdGYgPSBcImRvY1Byb3BzL2NvcmUueG1sXCI7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX2NvcmVfcHJvcHMod2IuUHJvcHMsIG9wdHMpKTtcblx0Y3QuY29yZXByb3BzLnB1c2goZik7XG5cdGFkZF9yZWxzKG9wdHMucmVscywgMiwgZiwgUkVMUy5DT1JFX1BST1BTKTtcblxuXHQvKjo6aWYoIXdiLlByb3BzKSB0aHJvdyBcInVucmVhY2hhYmxlXCI7ICovXG5cdGYgPSBcImRvY1Byb3BzL2FwcC54bWxcIjtcblx0aWYod2IuUHJvcHMgJiYgd2IuUHJvcHMuU2hlZXROYW1lcyl7LyogZW1wdHkgKi99XG5cdGVsc2UgaWYoIXdiLldvcmtib29rIHx8ICF3Yi5Xb3JrYm9vay5TaGVldHMpIHdiLlByb3BzLlNoZWV0TmFtZXMgPSB3Yi5TaGVldE5hbWVzO1xuXHRlbHNlIHtcblx0XHR2YXIgX3NuID0gW107XG5cdFx0Zm9yKHZhciBfaSA9IDA7IF9pIDwgd2IuU2hlZXROYW1lcy5sZW5ndGg7ICsrX2kpXG5cdFx0XHRpZigod2IuV29ya2Jvb2suU2hlZXRzW19pXXx8e30pLkhpZGRlbiAhPSAyKSBfc24ucHVzaCh3Yi5TaGVldE5hbWVzW19pXSk7XG5cdFx0d2IuUHJvcHMuU2hlZXROYW1lcyA9IF9zbjtcblx0fVxuXHR3Yi5Qcm9wcy5Xb3Jrc2hlZXRzID0gd2IuUHJvcHMuU2hlZXROYW1lcy5sZW5ndGg7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX2V4dF9wcm9wcyh3Yi5Qcm9wcywgb3B0cykpO1xuXHRjdC5leHRwcm9wcy5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLnJlbHMsIDMsIGYsIFJFTFMuRVhUX1BST1BTKTtcblxuXHRpZih3Yi5DdXN0cHJvcHMgIT09IHdiLlByb3BzICYmIGtleXMod2IuQ3VzdHByb3BzfHx7fSkubGVuZ3RoID4gMCkge1xuXHRcdGYgPSBcImRvY1Byb3BzL2N1c3RvbS54bWxcIjtcblx0XHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3cml0ZV9jdXN0X3Byb3BzKHdiLkN1c3Rwcm9wcywgb3B0cykpO1xuXHRcdGN0LmN1c3Rwcm9wcy5wdXNoKGYpO1xuXHRcdGFkZF9yZWxzKG9wdHMucmVscywgNCwgZiwgUkVMUy5DVVNUX1BST1BTKTtcblx0fVxuXG5cdHZhciBwZW9wbGUgPSBbXCJTaGVldEo1XCJdO1xuXHRvcHRzLnRjaWQgPSAwO1xuXG5cdGZvcihySWQ9MTtySWQgPD0gd2IuU2hlZXROYW1lcy5sZW5ndGg7ICsrcklkKSB7XG5cdFx0dmFyIHdzcmVscyA9IHsnIWlkJzp7fX07XG5cdFx0dmFyIHdzID0gd2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbcklkLTFdXTtcblx0XHR2YXIgX3R5cGUgPSAod3MgfHwge30pW1wiIXR5cGVcIl0gfHwgXCJzaGVldFwiO1xuXHRcdHN3aXRjaChfdHlwZSkge1xuXHRcdGNhc2UgXCJjaGFydFwiOlxuXHRcdFx0LyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdGRlZmF1bHQ6XG5cdFx0XHRmID0gXCJ4bC93b3Jrc2hlZXRzL3NoZWV0XCIgKyBySWQgKyBcIi5cIiArIHdiZXh0O1xuXHRcdFx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfd3NfeG1sKHJJZC0xLCBvcHRzLCB3Yiwgd3NyZWxzKSk7XG5cdFx0XHRjdC5zaGVldHMucHVzaChmKTtcblx0XHRcdGFkZF9yZWxzKG9wdHMud2JyZWxzLCAtMSwgXCJ3b3Jrc2hlZXRzL3NoZWV0XCIgKyBySWQgKyBcIi5cIiArIHdiZXh0LCBSRUxTLldTWzBdKTtcblx0XHR9XG5cblx0XHRpZih3cykge1xuXHRcdFx0dmFyIGNvbW1lbnRzID0gd3NbJyFjb21tZW50cyddO1xuXHRcdFx0dmFyIG5lZWRfdm1sID0gZmFsc2U7XG5cdFx0XHR2YXIgY2YgPSBcIlwiO1xuXHRcdFx0aWYoY29tbWVudHMgJiYgY29tbWVudHMubGVuZ3RoID4gMCkge1xuXHRcdFx0XHR2YXIgbmVlZHRjID0gZmFsc2U7XG5cdFx0XHRcdGNvbW1lbnRzLmZvckVhY2goZnVuY3Rpb24oY2Fycikge1xuXHRcdFx0XHRcdGNhcnJbMV0uZm9yRWFjaChmdW5jdGlvbihjKSB7IGlmKGMuVCA9PSB0cnVlKSBuZWVkdGMgPSB0cnVlOyB9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGlmKG5lZWR0Yykge1xuXHRcdFx0XHRcdGNmID0gXCJ4bC90aHJlYWRlZENvbW1lbnRzL3RocmVhZGVkQ29tbWVudFwiICsgcklkICsgXCIuXCIgKyB3YmV4dDtcblx0XHRcdFx0XHR6aXBfYWRkX2ZpbGUoemlwLCBjZiwgd3JpdGVfdGNtbnRfeG1sKGNvbW1lbnRzLCBwZW9wbGUsIG9wdHMpKTtcblx0XHRcdFx0XHRjdC50aHJlYWRlZGNvbW1lbnRzLnB1c2goY2YpO1xuXHRcdFx0XHRcdGFkZF9yZWxzKHdzcmVscywgLTEsIFwiLi4vdGhyZWFkZWRDb21tZW50cy90aHJlYWRlZENvbW1lbnRcIiArIHJJZCArIFwiLlwiICsgd2JleHQsIFJFTFMuVENNTlQpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2YgPSBcInhsL2NvbW1lbnRzXCIgKyBySWQgKyBcIi5cIiArIHdiZXh0O1xuXHRcdFx0XHR6aXBfYWRkX2ZpbGUoemlwLCBjZiwgd3JpdGVfY29tbWVudHNfeG1sKGNvbW1lbnRzLCBvcHRzKSk7XG5cdFx0XHRcdGN0LmNvbW1lbnRzLnB1c2goY2YpO1xuXHRcdFx0XHRhZGRfcmVscyh3c3JlbHMsIC0xLCBcIi4uL2NvbW1lbnRzXCIgKyBySWQgKyBcIi5cIiArIHdiZXh0LCBSRUxTLkNNTlQpO1xuXHRcdFx0XHRuZWVkX3ZtbCA9IHRydWU7XG5cdFx0XHR9XG5cdFx0XHRpZih3c1snIWxlZ2FjeSddKSB7XG5cdFx0XHRcdGlmKG5lZWRfdm1sKSB6aXBfYWRkX2ZpbGUoemlwLCBcInhsL2RyYXdpbmdzL3ZtbERyYXdpbmdcIiArIChySWQpICsgXCIudm1sXCIsIHdyaXRlX2NvbW1lbnRzX3ZtbChySWQsIHdzWychY29tbWVudHMnXSkpO1xuXHRcdFx0fVxuXHRcdFx0ZGVsZXRlIHdzWychY29tbWVudHMnXTtcblx0XHRcdGRlbGV0ZSB3c1snIWxlZ2FjeSddO1xuXHRcdH1cblxuXHRcdGlmKHdzcmVsc1snIWlkJ10ucklkMSkgemlwX2FkZF9maWxlKHppcCwgZ2V0X3JlbHNfcGF0aChmKSwgd3JpdGVfcmVscyh3c3JlbHMpKTtcblx0fVxuXG5cdGlmKG9wdHMuU3RyaW5ncyAhPSBudWxsICYmIG9wdHMuU3RyaW5ncy5sZW5ndGggPiAwKSB7XG5cdFx0ZiA9IFwieGwvc2hhcmVkU3RyaW5ncy5cIiArIHdiZXh0O1xuXHRcdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX3NzdF94bWwob3B0cy5TdHJpbmdzLCBvcHRzKSk7XG5cdFx0Y3Quc3Rycy5wdXNoKGYpO1xuXHRcdGFkZF9yZWxzKG9wdHMud2JyZWxzLCAtMSwgXCJzaGFyZWRTdHJpbmdzLlwiICsgd2JleHQsIFJFTFMuU1NUKTtcblx0fVxuXG5cdGYgPSBcInhsL3dvcmtib29rLlwiICsgd2JleHQ7XG5cdHppcF9hZGRfZmlsZSh6aXAsIGYsIHdyaXRlX3diX3htbCh3Yiwgb3B0cykpO1xuXHRjdC53b3JrYm9va3MucHVzaChmKTtcblx0YWRkX3JlbHMob3B0cy5yZWxzLCAxLCBmLCBSRUxTLldCKTtcblxuXHQvKiBUT0RPOiBzb21ldGhpbmcgbW9yZSBpbnRlbGxpZ2VudCB3aXRoIHRoZW1lcyAqL1xuXG5cdGYgPSBcInhsL3RoZW1lL3RoZW1lMS54bWxcIjtcblx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfdGhlbWUod2IuVGhlbWVzLCBvcHRzKSk7XG5cdGN0LnRoZW1lcy5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLndicmVscywgLTEsIFwidGhlbWUvdGhlbWUxLnhtbFwiLCBSRUxTLlRIRU1FKTtcblxuXHQvKiBUT0RPOiBzb21ldGhpbmcgbW9yZSBpbnRlbGxpZ2VudCB3aXRoIHN0eWxlcyAqL1xuXG5cdGYgPSBcInhsL3N0eWxlcy5cIiArIHdiZXh0O1xuXHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3cml0ZV9zdHlfeG1sKHdiLCBvcHRzKSk7XG5cdGN0LnN0eWxlcy5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLndicmVscywgLTEsIFwic3R5bGVzLlwiICsgd2JleHQsIFJFTFMuU1RZKTtcblxuXHRpZih3Yi52YmFyYXcgJiYgdmJhZm10KSB7XG5cdFx0ZiA9IFwieGwvdmJhUHJvamVjdC5iaW5cIjtcblx0XHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3Yi52YmFyYXcpO1xuXHRcdGN0LnZiYS5wdXNoKGYpO1xuXHRcdGFkZF9yZWxzKG9wdHMud2JyZWxzLCAtMSwgXCJ2YmFQcm9qZWN0LmJpblwiLCBSRUxTLlZCQSk7XG5cdH1cblxuXHRmID0gXCJ4bC9tZXRhZGF0YS5cIiArIHdiZXh0O1xuXHR6aXBfYWRkX2ZpbGUoemlwLCBmLCB3cml0ZV94bG1ldGFfeG1sKCkpO1xuXHRjdC5tZXRhZGF0YS5wdXNoKGYpO1xuXHRhZGRfcmVscyhvcHRzLndicmVscywgLTEsIFwibWV0YWRhdGEuXCIgKyB3YmV4dCwgUkVMUy5YTE1FVEEpO1xuXG5cdGlmKHBlb3BsZS5sZW5ndGggPiAxKSB7XG5cdFx0ZiA9IFwieGwvcGVyc29ucy9wZXJzb24ueG1sXCI7XG5cdFx0emlwX2FkZF9maWxlKHppcCwgZiwgd3JpdGVfcGVvcGxlX3htbChwZW9wbGUsIG9wdHMpKTtcblx0XHRjdC5wZW9wbGUucHVzaChmKTtcblx0XHRhZGRfcmVscyhvcHRzLndicmVscywgLTEsIFwicGVyc29ucy9wZXJzb24ueG1sXCIsIFJFTFMuUEVPUExFKTtcblx0fVxuXG5cdHppcF9hZGRfZmlsZSh6aXAsIFwiW0NvbnRlbnRfVHlwZXNdLnhtbFwiLCB3cml0ZV9jdChjdCwgb3B0cykpO1xuXHR6aXBfYWRkX2ZpbGUoemlwLCAnX3JlbHMvLnJlbHMnLCB3cml0ZV9yZWxzKG9wdHMucmVscykpO1xuXHR6aXBfYWRkX2ZpbGUoemlwLCAneGwvX3JlbHMvd29ya2Jvb2suJyArIHdiZXh0ICsgJy5yZWxzJywgd3JpdGVfcmVscyhvcHRzLndicmVscykpO1xuXG5cdGRlbGV0ZSBvcHRzLnJldnNzZjsgZGVsZXRlIG9wdHMuc3NmO1xuXHRyZXR1cm4gemlwO1xufVxuXG5mdW5jdGlvbiBmaXJzdGJ5dGUoZi8qOlJhd0RhdGEqLyxvLyo6P1R5cGVPcHRzKi8pLyo6QXJyYXk8bnVtYmVyPiovIHtcblx0dmFyIHggPSBcIlwiO1xuXHRzd2l0Y2goKG98fHt9KS50eXBlIHx8IFwiYmFzZTY0XCIpIHtcblx0XHRjYXNlICdidWZmZXInOiByZXR1cm4gW2ZbMF0sIGZbMV0sIGZbMl0sIGZbM10sIGZbNF0sIGZbNV0sIGZbNl0sIGZbN11dO1xuXHRcdGNhc2UgJ2Jhc2U2NCc6IHggPSBCYXNlNjRfZGVjb2RlKGYuc2xpY2UoMCwxMikpOyBicmVhaztcblx0XHRjYXNlICdiaW5hcnknOiB4ID0gZjsgYnJlYWs7XG5cdFx0Y2FzZSAnYXJyYXknOiAgcmV0dXJuIFtmWzBdLCBmWzFdLCBmWzJdLCBmWzNdLCBmWzRdLCBmWzVdLCBmWzZdLCBmWzddXTtcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgdHlwZSBcIiArIChvICYmIG8udHlwZSB8fCBcInVuZGVmaW5lZFwiKSk7XG5cdH1cblx0cmV0dXJuIFt4LmNoYXJDb2RlQXQoMCksIHguY2hhckNvZGVBdCgxKSwgeC5jaGFyQ29kZUF0KDIpLCB4LmNoYXJDb2RlQXQoMyksIHguY2hhckNvZGVBdCg0KSwgeC5jaGFyQ29kZUF0KDUpLCB4LmNoYXJDb2RlQXQoNiksIHguY2hhckNvZGVBdCg3KV07XG59XG5cbmZ1bmN0aW9uIHJlYWRfY2ZiKGNmYi8qOkNGQkNvbnRhaW5lciovLCBvcHRzLyo6P1BhcnNlT3B0cyovKS8qOldvcmtib29rKi8ge1xuXHRpZihDRkIuZmluZChjZmIsIFwiRW5jcnlwdGVkUGFja2FnZVwiKSkgcmV0dXJuIHBhcnNlX3hsc3hjZmIoY2ZiLCBvcHRzKTtcblx0cmV0dXJuIHBhcnNlX3hsc2NmYihjZmIsIG9wdHMpO1xufVxuXG5mdW5jdGlvbiByZWFkX3ppcChkYXRhLyo6UmF3RGF0YSovLCBvcHRzLyo6P1BhcnNlT3B0cyovKS8qOldvcmtib29rKi8ge1xuXHR2YXIgemlwLCBkID0gZGF0YTtcblx0dmFyIG8gPSBvcHRzfHx7fTtcblx0aWYoIW8udHlwZSkgby50eXBlID0gKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSA/IFwiYnVmZmVyXCIgOiBcImJhc2U2NFwiO1xuXHR6aXAgPSB6aXBfcmVhZChkLCBvKTtcblx0cmV0dXJuIHBhcnNlX3ppcCh6aXAsIG8pO1xufVxuXG5mdW5jdGlvbiByZWFkX3BsYWludGV4dChkYXRhLyo6c3RyaW5nKi8sIG8vKjpQYXJzZU9wdHMqLykvKjpXb3JrYm9vayovIHtcblx0dmFyIGkgPSAwO1xuXHRtYWluOiB3aGlsZShpIDwgZGF0YS5sZW5ndGgpIHN3aXRjaChkYXRhLmNoYXJDb2RlQXQoaSkpIHtcblx0XHRjYXNlIDB4MEE6IGNhc2UgMHgwRDogY2FzZSAweDIwOiArK2k7IGJyZWFrO1xuXHRcdGNhc2UgMHgzQzogcmV0dXJuIHBhcnNlX3hsbWwoZGF0YS5zbGljZShpKSxvKTtcblx0XHRkZWZhdWx0OiBicmVhayBtYWluO1xuXHR9XG5cdHJldHVybiBQUk4udG9fd29ya2Jvb2soZGF0YSwgbyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRfcGxhaW50ZXh0X3JhdyhkYXRhLyo6UmF3RGF0YSovLCBvLyo6UGFyc2VPcHRzKi8pLyo6V29ya2Jvb2sqLyB7XG5cdHZhciBzdHIgPSBcIlwiLCBieXRlcyA9IGZpcnN0Ynl0ZShkYXRhLCBvKTtcblx0c3dpdGNoKG8udHlwZSkge1xuXHRcdGNhc2UgJ2Jhc2U2NCc6IHN0ciA9IEJhc2U2NF9kZWNvZGUoZGF0YSk7IGJyZWFrO1xuXHRcdGNhc2UgJ2JpbmFyeSc6IHN0ciA9IGRhdGE7IGJyZWFrO1xuXHRcdGNhc2UgJ2J1ZmZlcic6IHN0ciA9IGRhdGEudG9TdHJpbmcoJ2JpbmFyeScpOyBicmVhaztcblx0XHRjYXNlICdhcnJheSc6IHN0ciA9IGNjMnN0cihkYXRhKTsgYnJlYWs7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvLnR5cGUpO1xuXHR9XG5cdGlmKGJ5dGVzWzBdID09IDB4RUYgJiYgYnl0ZXNbMV0gPT0gMHhCQiAmJiBieXRlc1syXSA9PSAweEJGKSBzdHIgPSB1dGY4cmVhZChzdHIpO1xuXHRvLnR5cGUgPSBcImJpbmFyeVwiO1xuXHRyZXR1cm4gcmVhZF9wbGFpbnRleHQoc3RyLCBvKTtcbn1cblxuZnVuY3Rpb24gcmVhZF91dGYxNihkYXRhLyo6UmF3RGF0YSovLCBvLyo6UGFyc2VPcHRzKi8pLyo6V29ya2Jvb2sqLyB7XG5cdHZhciBkID0gZGF0YTtcblx0aWYoby50eXBlID09ICdiYXNlNjQnKSBkID0gQmFzZTY0X2RlY29kZShkKTtcblx0ZCA9ICRjcHRhYmxlLnV0aWxzLmRlY29kZSgxMjAwLCBkLnNsaWNlKDIpLCAnc3RyJyk7XG5cdG8udHlwZSA9IFwiYmluYXJ5XCI7XG5cdHJldHVybiByZWFkX3BsYWludGV4dChkLCBvKTtcbn1cblxuZnVuY3Rpb24gYnN0cmlmeShkYXRhLyo6c3RyaW5nKi8pLyo6c3RyaW5nKi8ge1xuXHRyZXR1cm4gIWRhdGEubWF0Y2goL1teXFx4MDAtXFx4N0ZdLykgPyBkYXRhIDogdXRmOHdyaXRlKGRhdGEpO1xufVxuXG5mdW5jdGlvbiByZWFkX3BybihkYXRhLCBkLCBvLCBzdHIpIHtcblx0aWYoc3RyKSB7IG8udHlwZSA9IFwic3RyaW5nXCI7IHJldHVybiBQUk4udG9fd29ya2Jvb2soZGF0YSwgbyk7IH1cblx0cmV0dXJuIFBSTi50b193b3JrYm9vayhkLCBvKTtcbn1cblxuZnVuY3Rpb24gcmVhZFN5bmMoZGF0YS8qOlJhd0RhdGEqLywgb3B0cy8qOj9QYXJzZU9wdHMqLykvKjpXb3JrYm9vayovIHtcblx0cmVzZXRfY3AoKTtcblx0dmFyIG8gPSBvcHRzfHx7fTtcblx0aWYodHlwZW9mIEFycmF5QnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiBkYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHJldHVybiByZWFkU3luYyhuZXcgVWludDhBcnJheShkYXRhKSwgKG8gPSBkdXAobyksIG8udHlwZSA9IFwiYXJyYXlcIiwgbykpO1xuXHRpZih0eXBlb2YgVWludDhBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiYgZGF0YSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgJiYgIW8udHlwZSkgby50eXBlID0gdHlwZW9mIERlbm8gIT09IFwidW5kZWZpbmVkXCIgPyBcImJ1ZmZlclwiIDogXCJhcnJheVwiO1xuXHR2YXIgZCA9IGRhdGEsIG4gPSBbMCwwLDAsMF0sIHN0ciA9IGZhbHNlO1xuXHRpZihvLmNlbGxTdHlsZXMpIHsgby5jZWxsTkYgPSB0cnVlOyBvLnNoZWV0U3R1YnMgPSB0cnVlOyB9XG5cdF9zc2ZvcHRzID0ge307XG5cdGlmKG8uZGF0ZU5GKSBfc3Nmb3B0cy5kYXRlTkYgPSBvLmRhdGVORjtcblx0aWYoIW8udHlwZSkgby50eXBlID0gKGhhc19idWYgJiYgQnVmZmVyLmlzQnVmZmVyKGRhdGEpKSA/IFwiYnVmZmVyXCIgOiBcImJhc2U2NFwiO1xuXHRpZihvLnR5cGUgPT0gXCJmaWxlXCIpIHsgby50eXBlID0gaGFzX2J1ZiA/IFwiYnVmZmVyXCIgOiBcImJpbmFyeVwiOyBkID0gcmVhZF9iaW5hcnkoZGF0YSk7IGlmKHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzX2J1Zikgby50eXBlID0gXCJhcnJheVwiOyB9XG5cdGlmKG8udHlwZSA9PSBcInN0cmluZ1wiKSB7IHN0ciA9IHRydWU7IG8udHlwZSA9IFwiYmluYXJ5XCI7IG8uY29kZXBhZ2UgPSA2NTAwMTsgZCA9IGJzdHJpZnkoZGF0YSk7IH1cblx0aWYoby50eXBlID09ICdhcnJheScgJiYgdHlwZW9mIFVpbnQ4QXJyYXkgIT09ICd1bmRlZmluZWQnICYmIGRhdGEgaW5zdGFuY2VvZiBVaW50OEFycmF5ICYmIHR5cGVvZiBBcnJheUJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHQvLyAkRmxvd0lnbm9yZVxuXHRcdHZhciBhYj1uZXcgQXJyYXlCdWZmZXIoMyksIHZ1PW5ldyBVaW50OEFycmF5KGFiKTsgdnUuZm9vPVwiYmFyXCI7XG5cdFx0Ly8gJEZsb3dJZ25vcmVcblx0XHRpZighdnUuZm9vKSB7bz1kdXAobyk7IG8udHlwZT0nYXJyYXknOyByZXR1cm4gcmVhZFN5bmMoYWIyYShkKSwgbyk7fVxuXHR9XG5cdHN3aXRjaCgobiA9IGZpcnN0Ynl0ZShkLCBvKSlbMF0pIHtcblx0XHRjYXNlIDB4RDA6IGlmKG5bMV0gPT09IDB4Q0YgJiYgblsyXSA9PT0gMHgxMSAmJiBuWzNdID09PSAweEUwICYmIG5bNF0gPT09IDB4QTEgJiYgbls1XSA9PT0gMHhCMSAmJiBuWzZdID09PSAweDFBICYmIG5bN10gPT09IDB4RTEpIHJldHVybiByZWFkX2NmYihDRkIucmVhZChkLCBvKSwgbyk7IGJyZWFrO1xuXHRcdGNhc2UgMHgwOTogaWYoblsxXSA8PSAweDA4KSByZXR1cm4gcGFyc2VfeGxzY2ZiKGQsIG8pOyBicmVhaztcblx0XHRjYXNlIDB4M0M6IHJldHVybiBwYXJzZV94bG1sKGQsIG8pO1xuXHRcdGNhc2UgMHg0OTpcblx0XHRcdGlmKG5bMV0gPT09IDB4NDkgJiYgblsyXSA9PT0gMHgyYSAmJiBuWzNdID09PSAweDAwKSB0aHJvdyBuZXcgRXJyb3IoXCJUSUZGIEltYWdlIEZpbGUgaXMgbm90IGEgc3ByZWFkc2hlZXRcIik7XG5cdFx0XHRpZihuWzFdID09PSAweDQ0KSByZXR1cm4gcmVhZF93Yl9JRChkLCBvKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgMHg1NDogaWYoblsxXSA9PT0gMHg0MSAmJiBuWzJdID09PSAweDQyICYmIG5bM10gPT09IDB4NEMpIHJldHVybiBESUYudG9fd29ya2Jvb2soZCwgbyk7IGJyZWFrO1xuXHRcdGNhc2UgMHg1MDogcmV0dXJuIChuWzFdID09PSAweDRCICYmIG5bMl0gPCAweDA5ICYmIG5bM10gPCAweDA5KSA/IHJlYWRfemlwKGQsIG8pIDogcmVhZF9wcm4oZGF0YSwgZCwgbywgc3RyKTtcblx0XHRjYXNlIDB4RUY6IHJldHVybiBuWzNdID09PSAweDNDID8gcGFyc2VfeGxtbChkLCBvKSA6IHJlYWRfcHJuKGRhdGEsIGQsIG8sIHN0cik7XG5cdFx0Y2FzZSAweEZGOlxuXHRcdFx0aWYoblsxXSA9PT0gMHhGRSkgeyByZXR1cm4gcmVhZF91dGYxNihkLCBvKTsgfVxuXHRcdFx0ZWxzZSBpZihuWzFdID09PSAweDAwICYmIG5bMl0gPT09IDB4MDIgJiYgblszXSA9PT0gMHgwMCkgcmV0dXJuIFdLXy50b193b3JrYm9vayhkLCBvKTtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgMHgwMDpcblx0XHRcdGlmKG5bMV0gPT09IDB4MDApIHtcblx0XHRcdFx0aWYoblsyXSA+PSAweDAyICYmIG5bM10gPT09IDB4MDApIHJldHVybiBXS18udG9fd29ya2Jvb2soZCwgbyk7XG5cdFx0XHRcdGlmKG5bMl0gPT09IDB4MDAgJiYgKG5bM10gPT09IDB4MDggfHwgblszXSA9PT0gMHgwOSkpIHJldHVybiBXS18udG9fd29ya2Jvb2soZCwgbyk7XG5cdFx0XHR9XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDB4MDM6IGNhc2UgMHg4MzogY2FzZSAweDhCOiBjYXNlIDB4OEM6IHJldHVybiBEQkYudG9fd29ya2Jvb2soZCwgbyk7XG5cdFx0Y2FzZSAweDdCOiBpZihuWzFdID09PSAweDVDICYmIG5bMl0gPT09IDB4NzIgJiYgblszXSA9PT0gMHg3NCkgcmV0dXJuIFJURi50b193b3JrYm9vayhkLCBvKTsgYnJlYWs7XG5cdFx0Y2FzZSAweDBBOiBjYXNlIDB4MEQ6IGNhc2UgMHgyMDogcmV0dXJuIHJlYWRfcGxhaW50ZXh0X3JhdyhkLCBvKTtcblx0XHRjYXNlIDB4ODk6IGlmKG5bMV0gPT09IDB4NTAgJiYgblsyXSA9PT0gMHg0RSAmJiBuWzNdID09PSAweDQ3KSB0aHJvdyBuZXcgRXJyb3IoXCJQTkcgSW1hZ2UgRmlsZSBpcyBub3QgYSBzcHJlYWRzaGVldFwiKTsgYnJlYWs7XG5cdH1cblx0aWYoREJGX1NVUFBPUlRFRF9WRVJTSU9OUy5pbmRleE9mKG5bMF0pID4gLTEgJiYgblsyXSA8PSAxMiAmJiBuWzNdIDw9IDMxKSByZXR1cm4gREJGLnRvX3dvcmtib29rKGQsIG8pO1xuXHRyZXR1cm4gcmVhZF9wcm4oZGF0YSwgZCwgbywgc3RyKTtcbn1cblxuZnVuY3Rpb24gcmVhZEZpbGVTeW5jKGZpbGVuYW1lLyo6c3RyaW5nKi8sIG9wdHMvKjo/UGFyc2VPcHRzKi8pLyo6V29ya2Jvb2sqLyB7XG5cdHZhciBvID0gb3B0c3x8e307IG8udHlwZSA9ICdmaWxlJztcblx0cmV0dXJuIHJlYWRTeW5jKGZpbGVuYW1lLCBvKTtcbn1cbmZ1bmN0aW9uIHdyaXRlX2NmYl9jdHIoY2ZiLyo6Q0ZCQ29udGFpbmVyKi8sIG8vKjpXcml0ZU9wdHMqLykvKjphbnkqLyB7XG5cdHN3aXRjaChvLnR5cGUpIHtcblx0XHRjYXNlIFwiYmFzZTY0XCI6IGNhc2UgXCJiaW5hcnlcIjogYnJlYWs7XG5cdFx0Y2FzZSBcImJ1ZmZlclwiOiBjYXNlIFwiYXJyYXlcIjogby50eXBlID0gXCJcIjsgYnJlYWs7XG5cdFx0Y2FzZSBcImZpbGVcIjogcmV0dXJuIHdyaXRlX2RsKG8uZmlsZSwgQ0ZCLndyaXRlKGNmYiwge3R5cGU6aGFzX2J1ZiA/ICdidWZmZXInIDogXCJcIn0pKTtcblx0XHRjYXNlIFwic3RyaW5nXCI6IHRocm93IG5ldyBFcnJvcihcIidzdHJpbmcnIG91dHB1dCB0eXBlIGludmFsaWQgZm9yICdcIiArIG8uYm9va1R5cGUgKyBcIicgZmlsZXNcIik7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvLnR5cGUpO1xuXHR9XG5cdHJldHVybiBDRkIud3JpdGUoY2ZiLCBvKTtcbn1cblxuLyo6OiBkZWNsYXJlIHZhciBlbmNyeXB0X2FnaWxlOmFueTsgKi9cbmZ1bmN0aW9uIHdyaXRlX3ppcF90eXBlKHdiLyo6V29ya2Jvb2sqLywgb3B0cy8qOj9Xcml0ZU9wdHMqLykvKjphbnkqLyB7XG5cdHZhciBvID0gZHVwKG9wdHN8fHt9KTtcblx0dmFyIHogPSB3cml0ZV96aXAod2IsIG8pO1xuXHRyZXR1cm4gd3JpdGVfemlwX2Rlbm91ZW1lbnQoeiwgbyk7XG59XG5mdW5jdGlvbiB3cml0ZV96aXBfdHlwZVhMU1god2IvKjpXb3JrYm9vayovLCBvcHRzLyo6P1dyaXRlT3B0cyovKS8qOmFueSovIHtcblx0dmFyIG8gPSBkdXAob3B0c3x8e30pO1xuXHR2YXIgeiA9IHdyaXRlX3ppcF94bHN4KHdiLCBvKTtcblx0cmV0dXJuIHdyaXRlX3ppcF9kZW5vdWVtZW50KHosIG8pO1xufVxuZnVuY3Rpb24gd3JpdGVfemlwX2Rlbm91ZW1lbnQoei8qOmFueSovLCBvLyo6P1dyaXRlT3B0cyovKS8qOmFueSovIHtcblx0dmFyIG9vcHRzID0ge307XG5cdHZhciBmdHlwZSA9IGhhc19idWYgPyBcIm5vZGVidWZmZXJcIiA6ICh0eXBlb2YgVWludDhBcnJheSAhPT0gXCJ1bmRlZmluZWRcIiA/IFwiYXJyYXlcIiA6IFwic3RyaW5nXCIpO1xuXHRpZihvLmNvbXByZXNzaW9uKSBvb3B0cy5jb21wcmVzc2lvbiA9ICdERUZMQVRFJztcblx0aWYoby5wYXNzd29yZCkgb29wdHMudHlwZSA9IGZ0eXBlO1xuXHRlbHNlIHN3aXRjaChvLnR5cGUpIHtcblx0XHRjYXNlIFwiYmFzZTY0XCI6IG9vcHRzLnR5cGUgPSBcImJhc2U2NFwiOyBicmVhaztcblx0XHRjYXNlIFwiYmluYXJ5XCI6IG9vcHRzLnR5cGUgPSBcInN0cmluZ1wiOyBicmVhaztcblx0XHRjYXNlIFwic3RyaW5nXCI6IHRocm93IG5ldyBFcnJvcihcIidzdHJpbmcnIG91dHB1dCB0eXBlIGludmFsaWQgZm9yICdcIiArIG8uYm9va1R5cGUgKyBcIicgZmlsZXNcIik7XG5cdFx0Y2FzZSBcImJ1ZmZlclwiOlxuXHRcdGNhc2UgXCJmaWxlXCI6IG9vcHRzLnR5cGUgPSBmdHlwZTsgYnJlYWs7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvLnR5cGUpO1xuXHR9XG5cdHZhciBvdXQgPSB6LkZ1bGxQYXRocyA/IENGQi53cml0ZSh6LCB7ZmlsZVR5cGU6XCJ6aXBcIiwgdHlwZTogLyo6OigqL3tcIm5vZGVidWZmZXJcIjogXCJidWZmZXJcIiwgXCJzdHJpbmdcIjogXCJiaW5hcnlcIn0vKjo6IDphbnkpKi9bb29wdHMudHlwZV0gfHwgb29wdHMudHlwZSwgY29tcHJlc3Npb246ICEhby5jb21wcmVzc2lvbn0pIDogei5nZW5lcmF0ZShvb3B0cyk7XG5cdGlmKHR5cGVvZiBEZW5vICE9PSBcInVuZGVmaW5lZFwiKSB7XG5cdFx0aWYodHlwZW9mIG91dCA9PSBcInN0cmluZ1wiKSB7XG5cdFx0XHRpZihvLnR5cGUgPT0gXCJiaW5hcnlcIiB8fCBvLnR5cGUgPT0gXCJiYXNlNjRcIikgcmV0dXJuIG91dDtcblx0XHRcdG91dCA9IG5ldyBVaW50OEFycmF5KHMyYWIob3V0KSk7XG5cdFx0fVxuXHR9XG4vKmpzaGludCAtVzA4MyAqL1xuXHRpZihvLnBhc3N3b3JkICYmIHR5cGVvZiBlbmNyeXB0X2FnaWxlICE9PSAndW5kZWZpbmVkJykgcmV0dXJuIHdyaXRlX2NmYl9jdHIoZW5jcnlwdF9hZ2lsZShvdXQsIG8ucGFzc3dvcmQpLCBvKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bmRlZlxuLypqc2hpbnQgK1cwODMgKi9cblx0aWYoby50eXBlID09PSBcImZpbGVcIikgcmV0dXJuIHdyaXRlX2RsKG8uZmlsZSwgb3V0KTtcblx0cmV0dXJuIG8udHlwZSA9PSBcInN0cmluZ1wiID8gdXRmOHJlYWQoLyo6OigqL291dC8qOjogOmFueSkqLykgOiBvdXQ7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX2NmYl90eXBlKHdiLyo6V29ya2Jvb2sqLywgb3B0cy8qOj9Xcml0ZU9wdHMqLykvKjphbnkqLyB7XG5cdHZhciBvID0gb3B0c3x8e307XG5cdHZhciBjZmIvKjpDRkJDb250YWluZXIqLyA9IHdyaXRlX3hsc2NmYih3Yiwgbyk7XG5cdHJldHVybiB3cml0ZV9jZmJfY3RyKGNmYiwgbyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3N0cmluZ190eXBlKG91dC8qOnN0cmluZyovLCBvcHRzLyo6V3JpdGVPcHRzKi8sIGJvbS8qOj9zdHJpbmcqLykvKjphbnkqLyB7XG5cdGlmKCFib20pIGJvbSA9IFwiXCI7XG5cdHZhciBvID0gYm9tICsgb3V0O1xuXHRzd2l0Y2gob3B0cy50eXBlKSB7XG5cdFx0Y2FzZSBcImJhc2U2NFwiOiByZXR1cm4gQmFzZTY0X2VuY29kZSh1dGY4d3JpdGUobykpO1xuXHRcdGNhc2UgXCJiaW5hcnlcIjogcmV0dXJuIHV0Zjh3cml0ZShvKTtcblx0XHRjYXNlIFwic3RyaW5nXCI6IHJldHVybiBvdXQ7XG5cdFx0Y2FzZSBcImZpbGVcIjogcmV0dXJuIHdyaXRlX2RsKG9wdHMuZmlsZSwgbywgJ3V0ZjgnKTtcblx0XHRjYXNlIFwiYnVmZmVyXCI6IHtcblx0XHRcdGlmKGhhc19idWYpIHJldHVybiBCdWZmZXJfZnJvbShvLCAndXRmOCcpO1xuXHRcdFx0ZWxzZSBpZih0eXBlb2YgVGV4dEVuY29kZXIgIT09IFwidW5kZWZpbmVkXCIpIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUobyk7XG5cdFx0XHRlbHNlIHJldHVybiB3cml0ZV9zdHJpbmdfdHlwZShvLCB7dHlwZTonYmluYXJ5J30pLnNwbGl0KFwiXCIpLm1hcChmdW5jdGlvbihjKSB7IHJldHVybiBjLmNoYXJDb2RlQXQoMCk7IH0pO1xuXHRcdH1cblx0fVxuXHR0aHJvdyBuZXcgRXJyb3IoXCJVbnJlY29nbml6ZWQgdHlwZSBcIiArIG9wdHMudHlwZSk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlX3N0eHRfdHlwZShvdXQvKjpzdHJpbmcqLywgb3B0cy8qOldyaXRlT3B0cyovKS8qOmFueSovIHtcblx0c3dpdGNoKG9wdHMudHlwZSkge1xuXHRcdGNhc2UgXCJiYXNlNjRcIjogcmV0dXJuIEJhc2U2NF9lbmNvZGUob3V0KTtcblx0XHRjYXNlIFwiYmluYXJ5XCI6IHJldHVybiBvdXQ7XG5cdFx0Y2FzZSBcInN0cmluZ1wiOiByZXR1cm4gb3V0OyAvKiBvdmVycmlkZSBpbiBzaGVldF90b190eHQgKi9cblx0XHRjYXNlIFwiZmlsZVwiOiByZXR1cm4gd3JpdGVfZGwob3B0cy5maWxlLCBvdXQsICdiaW5hcnknKTtcblx0XHRjYXNlIFwiYnVmZmVyXCI6IHtcblx0XHRcdGlmKGhhc19idWYpIHJldHVybiBCdWZmZXJfZnJvbShvdXQsICdiaW5hcnknKTtcblx0XHRcdGVsc2UgcmV0dXJuIG91dC5zcGxpdChcIlwiKS5tYXAoZnVuY3Rpb24oYykgeyByZXR1cm4gYy5jaGFyQ29kZUF0KDApOyB9KTtcblx0XHR9XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKFwiVW5yZWNvZ25pemVkIHR5cGUgXCIgKyBvcHRzLnR5cGUpO1xufVxuXG4vKiBUT0RPOiB0ZXN0IGNvbnNpc3RlbmN5ICovXG5mdW5jdGlvbiB3cml0ZV9iaW5hcnlfdHlwZShvdXQsIG9wdHMvKjpXcml0ZU9wdHMqLykvKjphbnkqLyB7XG5cdHN3aXRjaChvcHRzLnR5cGUpIHtcblx0XHRjYXNlIFwic3RyaW5nXCI6XG5cdFx0Y2FzZSBcImJhc2U2NFwiOlxuXHRcdGNhc2UgXCJiaW5hcnlcIjpcblx0XHRcdHZhciBic3RyID0gXCJcIjtcblx0XHRcdC8vICRGbG93SWdub3JlXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgKytpKSBic3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUob3V0W2ldKTtcblx0XHRcdHJldHVybiBvcHRzLnR5cGUgPT0gJ2Jhc2U2NCcgPyBCYXNlNjRfZW5jb2RlKGJzdHIpIDogb3B0cy50eXBlID09ICdzdHJpbmcnID8gdXRmOHJlYWQoYnN0cikgOiBic3RyO1xuXHRcdGNhc2UgXCJmaWxlXCI6IHJldHVybiB3cml0ZV9kbChvcHRzLmZpbGUsIG91dCk7XG5cdFx0Y2FzZSBcImJ1ZmZlclwiOiByZXR1cm4gb3V0O1xuXHRcdGRlZmF1bHQ6IHRocm93IG5ldyBFcnJvcihcIlVucmVjb2duaXplZCB0eXBlIFwiICsgb3B0cy50eXBlKTtcblx0fVxufVxuXG5mdW5jdGlvbiB3cml0ZVN5bmNYTFNYKHdiLyo6V29ya2Jvb2sqLywgb3B0cy8qOj9Xcml0ZU9wdHMqLykge1xuXHRyZXNldF9jcCgpO1xuXHRjaGVja193Yih3Yik7XG5cdHZhciBvID0gZHVwKG9wdHN8fHt9KTtcblx0aWYoby5jZWxsU3R5bGVzKSB7IG8uY2VsbE5GID0gdHJ1ZTsgby5zaGVldFN0dWJzID0gdHJ1ZTsgfVxuXHRpZihvLnR5cGUgPT0gXCJhcnJheVwiKSB7IG8udHlwZSA9IFwiYmluYXJ5XCI7IHZhciBvdXQvKjpzdHJpbmcqLyA9ICh3cml0ZVN5bmNYTFNYKHdiLCBvKS8qOmFueSovKTsgby50eXBlID0gXCJhcnJheVwiOyByZXR1cm4gczJhYihvdXQpOyB9XG5cdHJldHVybiB3cml0ZV96aXBfdHlwZVhMU1god2IsIG8pO1xufVxuXG5mdW5jdGlvbiB3cml0ZVN5bmMod2IvKjpXb3JrYm9vayovLCBvcHRzLyo6P1dyaXRlT3B0cyovKSB7XG5cdHJlc2V0X2NwKCk7XG5cdGNoZWNrX3diKHdiKTtcblx0dmFyIG8gPSBkdXAob3B0c3x8e30pO1xuXHRpZihvLmNlbGxTdHlsZXMpIHsgby5jZWxsTkYgPSB0cnVlOyBvLnNoZWV0U3R1YnMgPSB0cnVlOyB9XG5cdGlmKG8udHlwZSA9PSBcImFycmF5XCIpIHsgby50eXBlID0gXCJiaW5hcnlcIjsgdmFyIG91dC8qOnN0cmluZyovID0gKHdyaXRlU3luYyh3YiwgbykvKjphbnkqLyk7IG8udHlwZSA9IFwiYXJyYXlcIjsgcmV0dXJuIHMyYWIob3V0KTsgfVxuXHR2YXIgaWR4ID0gMDtcblx0aWYoby5zaGVldCkge1xuXHRcdGlmKHR5cGVvZiBvLnNoZWV0ID09IFwibnVtYmVyXCIpIGlkeCA9IG8uc2hlZXQ7XG5cdFx0ZWxzZSBpZHggPSB3Yi5TaGVldE5hbWVzLmluZGV4T2Yoby5zaGVldCk7XG5cdFx0aWYoIXdiLlNoZWV0TmFtZXNbaWR4XSkgdGhyb3cgbmV3IEVycm9yKFwiU2hlZXQgbm90IGZvdW5kOiBcIiArIG8uc2hlZXQgKyBcIiA6IFwiICsgKHR5cGVvZiBvLnNoZWV0KSk7XG5cdH1cblx0c3dpdGNoKG8uYm9va1R5cGUgfHwgJ3hsc2InKSB7XG5cdFx0Y2FzZSAneG1sJzpcblx0XHRjYXNlICd4bG1sJzogcmV0dXJuIHdyaXRlX3N0cmluZ190eXBlKHdyaXRlX3hsbWwod2IsIG8pLCBvKTtcblx0XHRjYXNlICdzbGsnOlxuXHRcdGNhc2UgJ3N5bGsnOiByZXR1cm4gd3JpdGVfc3RyaW5nX3R5cGUoU1lMSy5mcm9tX3NoZWV0KHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBvKSwgbyk7XG5cdFx0Y2FzZSAnaHRtJzpcblx0XHRjYXNlICdodG1sJzogcmV0dXJuIHdyaXRlX3N0cmluZ190eXBlKHNoZWV0X3RvX2h0bWwod2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbaWR4XV0sIG8pLCBvKTtcblx0XHRjYXNlICd0eHQnOiByZXR1cm4gd3JpdGVfc3R4dF90eXBlKHNoZWV0X3RvX3R4dCh3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1tpZHhdXSwgbyksIG8pO1xuXHRcdGNhc2UgJ2Nzdic6IHJldHVybiB3cml0ZV9zdHJpbmdfdHlwZShzaGVldF90b19jc3Yod2IuU2hlZXRzW3diLlNoZWV0TmFtZXNbaWR4XV0sIG8pLCBvLCBcIlxcdWZlZmZcIik7XG5cdFx0Y2FzZSAnZGlmJzogcmV0dXJuIHdyaXRlX3N0cmluZ190eXBlKERJRi5mcm9tX3NoZWV0KHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBvKSwgbyk7XG5cdFx0Y2FzZSAnZGJmJzogcmV0dXJuIHdyaXRlX2JpbmFyeV90eXBlKERCRi5mcm9tX3NoZWV0KHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBvKSwgbyk7XG5cdFx0Y2FzZSAncHJuJzogcmV0dXJuIHdyaXRlX3N0cmluZ190eXBlKFBSTi5mcm9tX3NoZWV0KHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBvKSwgbyk7XG5cdFx0Y2FzZSAncnRmJzogcmV0dXJuIHdyaXRlX3N0cmluZ190eXBlKFJURi5mcm9tX3NoZWV0KHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBvKSwgbyk7XG5cdFx0Y2FzZSAnZXRoJzogcmV0dXJuIHdyaXRlX3N0cmluZ190eXBlKEVUSC5mcm9tX3NoZWV0KHdiLlNoZWV0c1t3Yi5TaGVldE5hbWVzW2lkeF1dLCBvKSwgbyk7XG5cdFx0Y2FzZSAnZm9kcyc6IHJldHVybiB3cml0ZV9zdHJpbmdfdHlwZSh3cml0ZV9vZHMod2IsIG8pLCBvKTtcblx0XHRjYXNlICd3azEnOiByZXR1cm4gd3JpdGVfYmluYXJ5X3R5cGUoV0tfLnNoZWV0X3RvX3drMSh3Yi5TaGVldHNbd2IuU2hlZXROYW1lc1tpZHhdXSwgbyksIG8pO1xuXHRcdGNhc2UgJ3drMyc6IHJldHVybiB3cml0ZV9iaW5hcnlfdHlwZShXS18uYm9va190b193azMod2IsIG8pLCBvKTtcblx0XHRjYXNlICdiaWZmMic6IGlmKCFvLmJpZmYpIG8uYmlmZiA9IDI7IC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRjYXNlICdiaWZmMyc6IGlmKCFvLmJpZmYpIG8uYmlmZiA9IDM7IC8qIGZhbGxzIHRocm91Z2ggKi9cblx0XHRjYXNlICdiaWZmNCc6IGlmKCFvLmJpZmYpIG8uYmlmZiA9IDQ7IHJldHVybiB3cml0ZV9iaW5hcnlfdHlwZSh3cml0ZV9iaWZmX2J1Zih3YiwgbyksIG8pO1xuXHRcdGNhc2UgJ2JpZmY1JzogaWYoIW8uYmlmZikgby5iaWZmID0gNTsgLyogZmFsbHMgdGhyb3VnaCAqL1xuXHRcdGNhc2UgJ2JpZmY4Jzpcblx0XHRjYXNlICd4bGEnOlxuXHRcdGNhc2UgJ3hscyc6IGlmKCFvLmJpZmYpIG8uYmlmZiA9IDg7IHJldHVybiB3cml0ZV9jZmJfdHlwZSh3Yiwgbyk7XG5cdFx0Y2FzZSAneGxzeCc6XG5cdFx0Y2FzZSAneGxzbSc6XG5cdFx0Y2FzZSAneGxhbSc6XG5cdFx0Y2FzZSAneGxzYic6XG5cdFx0Y2FzZSAnbnVtYmVycyc6XG5cdFx0Y2FzZSAnb2RzJzogcmV0dXJuIHdyaXRlX3ppcF90eXBlKHdiLCBvKTtcblx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IgKFwiVW5yZWNvZ25pemVkIGJvb2tUeXBlIHxcIiArIG8uYm9va1R5cGUgKyBcInxcIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVzb2x2ZV9ib29rX3R5cGUoby8qOldyaXRlRmlsZU9wdHMqLykge1xuXHRpZihvLmJvb2tUeXBlKSByZXR1cm47XG5cdHZhciBfQlQgPSB7XG5cdFx0XCJ4bHNcIjogXCJiaWZmOFwiLFxuXHRcdFwiaHRtXCI6IFwiaHRtbFwiLFxuXHRcdFwic2xrXCI6IFwic3lsa1wiLFxuXHRcdFwic29jaWFsY2FsY1wiOiBcImV0aFwiLFxuXHRcdFwiU2gzM3RKU1wiOiBcIldURlwiXG5cdH07XG5cdHZhciBleHQgPSBvLmZpbGUuc2xpY2Uoby5maWxlLmxhc3RJbmRleE9mKFwiLlwiKSkudG9Mb3dlckNhc2UoKTtcblx0aWYoZXh0Lm1hdGNoKC9eXFwuW2Etel0rJC8pKSBvLmJvb2tUeXBlID0gZXh0LnNsaWNlKDEpO1xuXHRvLmJvb2tUeXBlID0gX0JUW28uYm9va1R5cGVdIHx8IG8uYm9va1R5cGU7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmlsZVN5bmMod2IvKjpXb3JrYm9vayovLCBmaWxlbmFtZS8qOnN0cmluZyovLCBvcHRzLyo6P1dyaXRlRmlsZU9wdHMqLykge1xuXHR2YXIgbyA9IG9wdHN8fHt9OyBvLnR5cGUgPSAnZmlsZSc7XG5cdG8uZmlsZSA9IGZpbGVuYW1lO1xuXHRyZXNvbHZlX2Jvb2tfdHlwZShvKTtcblx0cmV0dXJuIHdyaXRlU3luYyh3Yiwgbyk7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmlsZVN5bmNYTFNYKHdiLyo6V29ya2Jvb2sqLywgZmlsZW5hbWUvKjpzdHJpbmcqLywgb3B0cy8qOj9Xcml0ZUZpbGVPcHRzKi8pIHtcblx0dmFyIG8gPSBvcHRzfHx7fTsgby50eXBlID0gJ2ZpbGUnO1xuXHRvLmZpbGUgPSBmaWxlbmFtZTtcblx0cmVzb2x2ZV9ib29rX3R5cGUobyk7XG5cdHJldHVybiB3cml0ZVN5bmNYTFNYKHdiLCBvKTtcbn1cblxuXG5mdW5jdGlvbiB3cml0ZUZpbGVBc3luYyhmaWxlbmFtZS8qOnN0cmluZyovLCB3Yi8qOldvcmtib29rKi8sIG9wdHMvKjo/V3JpdGVGaWxlT3B0cyovLCBjYi8qOj8oZT86RXJybm9FcnJvcik9PnZvaWQqLykge1xuXHR2YXIgbyA9IG9wdHN8fHt9OyBvLnR5cGUgPSAnZmlsZSc7XG5cdG8uZmlsZSA9IGZpbGVuYW1lO1xuXHRyZXNvbHZlX2Jvb2tfdHlwZShvKTtcblx0by50eXBlID0gJ2J1ZmZlcic7XG5cdHZhciBfY2IgPSBjYjsgaWYoIShfY2IgaW5zdGFuY2VvZiBGdW5jdGlvbikpIF9jYiA9IChvcHRzLyo6YW55Ki8pO1xuXHRyZXR1cm4gX2ZzLndyaXRlRmlsZShmaWxlbmFtZSwgd3JpdGVTeW5jKHdiLCBvKSwgX2NiKTtcbn1cbi8qOjpcbnR5cGUgTUpST2JqZWN0ID0ge1xuXHRyb3c6IGFueTtcblx0aXNlbXB0eTogYm9vbGVhbjtcbn07XG4qL1xuZnVuY3Rpb24gbWFrZV9qc29uX3JvdyhzaGVldC8qOldvcmtzaGVldCovLCByLyo6UmFuZ2UqLywgUi8qOm51bWJlciovLCBjb2xzLyo6QXJyYXk8c3RyaW5nPiovLCBoZWFkZXIvKjpudW1iZXIqLywgaGRyLyo6QXJyYXk8YW55PiovLCBkZW5zZS8qOmJvb2xlYW4qLywgby8qOlNoZWV0MkpTT05PcHRzKi8pLyo6TUpST2JqZWN0Ki8ge1xuXHR2YXIgcnIgPSBlbmNvZGVfcm93KFIpO1xuXHR2YXIgZGVmdmFsID0gby5kZWZ2YWwsIHJhdyA9IG8ucmF3IHx8ICFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobywgXCJyYXdcIik7XG5cdHZhciBpc2VtcHR5ID0gdHJ1ZTtcblx0dmFyIHJvdy8qOmFueSovID0gKGhlYWRlciA9PT0gMSkgPyBbXSA6IHt9O1xuXHRpZihoZWFkZXIgIT09IDEpIHtcblx0XHRpZihPYmplY3QuZGVmaW5lUHJvcGVydHkpIHRyeSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyb3csICdfX3Jvd051bV9fJywge3ZhbHVlOlIsIGVudW1lcmFibGU6ZmFsc2V9KTsgfSBjYXRjaChlKSB7IHJvdy5fX3Jvd051bV9fID0gUjsgfVxuXHRcdGVsc2Ugcm93Ll9fcm93TnVtX18gPSBSO1xuXHR9XG5cdGlmKCFkZW5zZSB8fCBzaGVldFtSXSkgZm9yICh2YXIgQyA9IHIucy5jOyBDIDw9IHIuZS5jOyArK0MpIHtcblx0XHR2YXIgdmFsID0gZGVuc2UgPyBzaGVldFtSXVtDXSA6IHNoZWV0W2NvbHNbQ10gKyBycl07XG5cdFx0aWYodmFsID09PSB1bmRlZmluZWQgfHwgdmFsLnQgPT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYoZGVmdmFsID09PSB1bmRlZmluZWQpIGNvbnRpbnVlO1xuXHRcdFx0aWYoaGRyW0NdICE9IG51bGwpIHsgcm93W2hkcltDXV0gPSBkZWZ2YWw7IH1cblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblx0XHR2YXIgdiA9IHZhbC52O1xuXHRcdHN3aXRjaCh2YWwudCl7XG5cdFx0XHRjYXNlICd6JzogaWYodiA9PSBudWxsKSBicmVhazsgY29udGludWU7XG5cdFx0XHRjYXNlICdlJzogdiA9ICh2ID09IDAgPyBudWxsIDogdm9pZCAwKTsgYnJlYWs7XG5cdFx0XHRjYXNlICdzJzogY2FzZSAnZCc6IGNhc2UgJ2InOiBjYXNlICduJzogYnJlYWs7XG5cdFx0XHRkZWZhdWx0OiB0aHJvdyBuZXcgRXJyb3IoJ3VucmVjb2duaXplZCB0eXBlICcgKyB2YWwudCk7XG5cdFx0fVxuXHRcdGlmKGhkcltDXSAhPSBudWxsKSB7XG5cdFx0XHRpZih2ID09IG51bGwpIHtcblx0XHRcdFx0aWYodmFsLnQgPT0gXCJlXCIgJiYgdiA9PT0gbnVsbCkgcm93W2hkcltDXV0gPSBudWxsO1xuXHRcdFx0XHRlbHNlIGlmKGRlZnZhbCAhPT0gdW5kZWZpbmVkKSByb3dbaGRyW0NdXSA9IGRlZnZhbDtcblx0XHRcdFx0ZWxzZSBpZihyYXcgJiYgdiA9PT0gbnVsbCkgcm93W2hkcltDXV0gPSBudWxsO1xuXHRcdFx0XHRlbHNlIGNvbnRpbnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cm93W2hkcltDXV0gPSByYXcgJiYgKHZhbC50ICE9PSBcIm5cIiB8fCAodmFsLnQgPT09IFwiblwiICYmIG8ucmF3TnVtYmVycyAhPT0gZmFsc2UpKSA/IHYgOiBmb3JtYXRfY2VsbCh2YWwsdixvKTtcblx0XHRcdH1cblx0XHRcdGlmKHYgIT0gbnVsbCkgaXNlbXB0eSA9IGZhbHNlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4geyByb3c6IHJvdywgaXNlbXB0eTogaXNlbXB0eSB9O1xufVxuXG5cbmZ1bmN0aW9uIHNoZWV0X3RvX2pzb24oc2hlZXQvKjpXb3Jrc2hlZXQqLywgb3B0cy8qOj9TaGVldDJKU09OT3B0cyovKSB7XG5cdGlmKHNoZWV0ID09IG51bGwgfHwgc2hlZXRbXCIhcmVmXCJdID09IG51bGwpIHJldHVybiBbXTtcblx0dmFyIHZhbCA9IHt0OiduJyx2OjB9LCBoZWFkZXIgPSAwLCBvZmZzZXQgPSAxLCBoZHIvKjpBcnJheTxhbnk+Ki8gPSBbXSwgdj0wLCB2dj1cIlwiO1xuXHR2YXIgciA9IHtzOntyOjAsYzowfSxlOntyOjAsYzowfX07XG5cdHZhciBvID0gb3B0cyB8fCB7fTtcblx0dmFyIHJhbmdlID0gby5yYW5nZSAhPSBudWxsID8gby5yYW5nZSA6IHNoZWV0W1wiIXJlZlwiXTtcblx0aWYoby5oZWFkZXIgPT09IDEpIGhlYWRlciA9IDE7XG5cdGVsc2UgaWYoby5oZWFkZXIgPT09IFwiQVwiKSBoZWFkZXIgPSAyO1xuXHRlbHNlIGlmKEFycmF5LmlzQXJyYXkoby5oZWFkZXIpKSBoZWFkZXIgPSAzO1xuXHRlbHNlIGlmKG8uaGVhZGVyID09IG51bGwpIGhlYWRlciA9IDA7XG5cdHN3aXRjaCh0eXBlb2YgcmFuZ2UpIHtcblx0XHRjYXNlICdzdHJpbmcnOiByID0gc2FmZV9kZWNvZGVfcmFuZ2UocmFuZ2UpOyBicmVhaztcblx0XHRjYXNlICdudW1iZXInOiByID0gc2FmZV9kZWNvZGVfcmFuZ2Uoc2hlZXRbXCIhcmVmXCJdKTsgci5zLnIgPSByYW5nZTsgYnJlYWs7XG5cdFx0ZGVmYXVsdDogciA9IHJhbmdlO1xuXHR9XG5cdGlmKGhlYWRlciA+IDApIG9mZnNldCA9IDA7XG5cdHZhciByciA9IGVuY29kZV9yb3coci5zLnIpO1xuXHR2YXIgY29scy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgb3V0Lyo6QXJyYXk8YW55PiovID0gW107XG5cdHZhciBvdXRpID0gMCwgY291bnRlciA9IDA7XG5cdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkoc2hlZXQpO1xuXHR2YXIgUiA9IHIucy5yLCBDID0gMDtcblx0dmFyIGhlYWRlcl9jbnQgPSB7fTtcblx0aWYoZGVuc2UgJiYgIXNoZWV0W1JdKSBzaGVldFtSXSA9IFtdO1xuXHR2YXIgY29saW5mby8qOkFycmF5PENvbEluZm8+Ki8gPSBvLnNraXBIaWRkZW4gJiYgc2hlZXRbXCIhY29sc1wiXSB8fCBbXTtcblx0dmFyIHJvd2luZm8vKjpBcnJheTxDb2xJbmZvPiovID0gby5za2lwSGlkZGVuICYmIHNoZWV0W1wiIXJvd3NcIl0gfHwgW107XG5cdGZvcihDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykge1xuXHRcdGlmKCgoY29saW5mb1tDXXx8e30pLmhpZGRlbikpIGNvbnRpbnVlO1xuXHRcdGNvbHNbQ10gPSBlbmNvZGVfY29sKEMpO1xuXHRcdHZhbCA9IGRlbnNlID8gc2hlZXRbUl1bQ10gOiBzaGVldFtjb2xzW0NdICsgcnJdO1xuXHRcdHN3aXRjaChoZWFkZXIpIHtcblx0XHRcdGNhc2UgMTogaGRyW0NdID0gQyAtIHIucy5jOyBicmVhaztcblx0XHRcdGNhc2UgMjogaGRyW0NdID0gY29sc1tDXTsgYnJlYWs7XG5cdFx0XHRjYXNlIDM6IGhkcltDXSA9IG8uaGVhZGVyW0MgLSByLnMuY107IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYodmFsID09IG51bGwpIHZhbCA9IHt3OiBcIl9fRU1QVFlcIiwgdDogXCJzXCJ9O1xuXHRcdFx0XHR2diA9IHYgPSBmb3JtYXRfY2VsbCh2YWwsIG51bGwsIG8pO1xuXHRcdFx0XHRjb3VudGVyID0gaGVhZGVyX2NudFt2XSB8fCAwO1xuXHRcdFx0XHRpZighY291bnRlcikgaGVhZGVyX2NudFt2XSA9IDE7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGRvIHsgdnYgPSB2ICsgXCJfXCIgKyAoY291bnRlcisrKTsgfSB3aGlsZShoZWFkZXJfY250W3Z2XSk7IGhlYWRlcl9jbnRbdl0gPSBjb3VudGVyO1xuXHRcdFx0XHRcdGhlYWRlcl9jbnRbdnZdID0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRoZHJbQ10gPSB2djtcblx0XHR9XG5cdH1cblx0Zm9yIChSID0gci5zLnIgKyBvZmZzZXQ7IFIgPD0gci5lLnI7ICsrUikge1xuXHRcdGlmICgocm93aW5mb1tSXXx8e30pLmhpZGRlbikgY29udGludWU7XG5cdFx0dmFyIHJvdyA9IG1ha2VfanNvbl9yb3coc2hlZXQsIHIsIFIsIGNvbHMsIGhlYWRlciwgaGRyLCBkZW5zZSwgbyk7XG5cdFx0aWYoKHJvdy5pc2VtcHR5ID09PSBmYWxzZSkgfHwgKGhlYWRlciA9PT0gMSA/IG8uYmxhbmtyb3dzICE9PSBmYWxzZSA6ICEhby5ibGFua3Jvd3MpKSBvdXRbb3V0aSsrXSA9IHJvdy5yb3c7XG5cdH1cblx0b3V0Lmxlbmd0aCA9IG91dGk7XG5cdHJldHVybiBvdXQ7XG59XG5cbnZhciBxcmVnID0gL1wiL2c7XG5mdW5jdGlvbiBtYWtlX2Nzdl9yb3coc2hlZXQvKjpXb3Jrc2hlZXQqLywgci8qOlJhbmdlKi8sIFIvKjpudW1iZXIqLywgY29scy8qOkFycmF5PHN0cmluZz4qLywgZnMvKjpudW1iZXIqLywgcnMvKjpudW1iZXIqLywgRlMvKjpzdHJpbmcqLywgby8qOlNoZWV0MkNTVk9wdHMqLykvKjo/c3RyaW5nKi8ge1xuXHR2YXIgaXNlbXB0eSA9IHRydWU7XG5cdHZhciByb3cvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXSwgdHh0ID0gXCJcIiwgcnIgPSBlbmNvZGVfcm93KFIpO1xuXHRmb3IodmFyIEMgPSByLnMuYzsgQyA8PSByLmUuYzsgKytDKSB7XG5cdFx0aWYgKCFjb2xzW0NdKSBjb250aW51ZTtcblx0XHR2YXIgdmFsID0gby5kZW5zZSA/IChzaGVldFtSXXx8W10pW0NdOiBzaGVldFtjb2xzW0NdICsgcnJdO1xuXHRcdGlmKHZhbCA9PSBudWxsKSB0eHQgPSBcIlwiO1xuXHRcdGVsc2UgaWYodmFsLnYgIT0gbnVsbCkge1xuXHRcdFx0aXNlbXB0eSA9IGZhbHNlO1xuXHRcdFx0dHh0ID0gJycrKG8ucmF3TnVtYmVycyAmJiB2YWwudCA9PSBcIm5cIiA/IHZhbC52IDogZm9ybWF0X2NlbGwodmFsLCBudWxsLCBvKSk7XG5cdFx0XHRmb3IodmFyIGkgPSAwLCBjYyA9IDA7IGkgIT09IHR4dC5sZW5ndGg7ICsraSkgaWYoKGNjID0gdHh0LmNoYXJDb2RlQXQoaSkpID09PSBmcyB8fCBjYyA9PT0gcnMgfHwgY2MgPT09IDM0IHx8IG8uZm9yY2VRdW90ZXMpIHt0eHQgPSBcIlxcXCJcIiArIHR4dC5yZXBsYWNlKHFyZWcsICdcIlwiJykgKyBcIlxcXCJcIjsgYnJlYWs7IH1cblx0XHRcdGlmKHR4dCA9PSBcIklEXCIpIHR4dCA9ICdcIklEXCInO1xuXHRcdH0gZWxzZSBpZih2YWwuZiAhPSBudWxsICYmICF2YWwuRikge1xuXHRcdFx0aXNlbXB0eSA9IGZhbHNlO1xuXHRcdFx0dHh0ID0gJz0nICsgdmFsLmY7IGlmKHR4dC5pbmRleE9mKFwiLFwiKSA+PSAwKSB0eHQgPSAnXCInICsgdHh0LnJlcGxhY2UocXJlZywgJ1wiXCInKSArICdcIic7XG5cdFx0fSBlbHNlIHR4dCA9IFwiXCI7XG5cdFx0LyogTk9URTogRXhjZWwgQ1NWIGRvZXMgbm90IHN1cHBvcnQgYXJyYXkgZm9ybXVsYWUgKi9cblx0XHRyb3cucHVzaCh0eHQpO1xuXHR9XG5cdGlmKG8uYmxhbmtyb3dzID09PSBmYWxzZSAmJiBpc2VtcHR5KSByZXR1cm4gbnVsbDtcblx0cmV0dXJuIHJvdy5qb2luKEZTKTtcbn1cblxuZnVuY3Rpb24gc2hlZXRfdG9fY3N2KHNoZWV0Lyo6V29ya3NoZWV0Ki8sIG9wdHMvKjo/U2hlZXQyQ1NWT3B0cyovKS8qOnN0cmluZyovIHtcblx0dmFyIG91dC8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgbyA9IG9wdHMgPT0gbnVsbCA/IHt9IDogb3B0cztcblx0aWYoc2hlZXQgPT0gbnVsbCB8fCBzaGVldFtcIiFyZWZcIl0gPT0gbnVsbCkgcmV0dXJuIFwiXCI7XG5cdHZhciByID0gc2FmZV9kZWNvZGVfcmFuZ2Uoc2hlZXRbXCIhcmVmXCJdKTtcblx0dmFyIEZTID0gby5GUyAhPT0gdW5kZWZpbmVkID8gby5GUyA6IFwiLFwiLCBmcyA9IEZTLmNoYXJDb2RlQXQoMCk7XG5cdHZhciBSUyA9IG8uUlMgIT09IHVuZGVmaW5lZCA/IG8uUlMgOiBcIlxcblwiLCBycyA9IFJTLmNoYXJDb2RlQXQoMCk7XG5cdHZhciBlbmRyZWdleCA9IG5ldyBSZWdFeHAoKEZTPT1cInxcIiA/IFwiXFxcXHxcIiA6IEZTKStcIiskXCIpO1xuXHR2YXIgcm93ID0gXCJcIiwgY29scy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHRvLmRlbnNlID0gQXJyYXkuaXNBcnJheShzaGVldCk7XG5cdHZhciBjb2xpbmZvLyo6QXJyYXk8Q29sSW5mbz4qLyA9IG8uc2tpcEhpZGRlbiAmJiBzaGVldFtcIiFjb2xzXCJdIHx8IFtdO1xuXHR2YXIgcm93aW5mby8qOkFycmF5PENvbEluZm8+Ki8gPSBvLnNraXBIaWRkZW4gJiYgc2hlZXRbXCIhcm93c1wiXSB8fCBbXTtcblx0Zm9yKHZhciBDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykgaWYgKCEoKGNvbGluZm9bQ118fHt9KS5oaWRkZW4pKSBjb2xzW0NdID0gZW5jb2RlX2NvbChDKTtcblx0dmFyIHcgPSAwO1xuXHRmb3IodmFyIFIgPSByLnMucjsgUiA8PSByLmUucjsgKytSKSB7XG5cdFx0aWYgKChyb3dpbmZvW1JdfHx7fSkuaGlkZGVuKSBjb250aW51ZTtcblx0XHRyb3cgPSBtYWtlX2Nzdl9yb3coc2hlZXQsIHIsIFIsIGNvbHMsIGZzLCBycywgRlMsIG8pO1xuXHRcdGlmKHJvdyA9PSBudWxsKSB7IGNvbnRpbnVlOyB9XG5cdFx0aWYoby5zdHJpcCkgcm93ID0gcm93LnJlcGxhY2UoZW5kcmVnZXgsXCJcIik7XG5cdFx0aWYocm93IHx8IChvLmJsYW5rcm93cyAhPT0gZmFsc2UpKSBvdXQucHVzaCgodysrID8gUlMgOiBcIlwiKSArIHJvdyk7XG5cdH1cblx0ZGVsZXRlIG8uZGVuc2U7XG5cdHJldHVybiBvdXQuam9pbihcIlwiKTtcbn1cblxuZnVuY3Rpb24gc2hlZXRfdG9fdHh0KHNoZWV0Lyo6V29ya3NoZWV0Ki8sIG9wdHMvKjo/U2hlZXQyQ1NWT3B0cyovKSB7XG5cdGlmKCFvcHRzKSBvcHRzID0ge307IG9wdHMuRlMgPSBcIlxcdFwiOyBvcHRzLlJTID0gXCJcXG5cIjtcblx0dmFyIHMgPSBzaGVldF90b19jc3Yoc2hlZXQsIG9wdHMpO1xuXHRpZih0eXBlb2YgJGNwdGFibGUgPT0gJ3VuZGVmaW5lZCcgfHwgb3B0cy50eXBlID09ICdzdHJpbmcnKSByZXR1cm4gcztcblx0dmFyIG8gPSAkY3B0YWJsZS51dGlscy5lbmNvZGUoMTIwMCwgcywgJ3N0cicpO1xuXHRyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZSgyNTUpICsgU3RyaW5nLmZyb21DaGFyQ29kZSgyNTQpICsgbztcbn1cblxuZnVuY3Rpb24gc2hlZXRfdG9fZm9ybXVsYWUoc2hlZXQvKjpXb3Jrc2hlZXQqLykvKjpBcnJheTxzdHJpbmc+Ki8ge1xuXHR2YXIgeSA9IFwiXCIsIHgsIHZhbD1cIlwiO1xuXHRpZihzaGVldCA9PSBudWxsIHx8IHNoZWV0W1wiIXJlZlwiXSA9PSBudWxsKSByZXR1cm4gW107XG5cdHZhciByID0gc2FmZV9kZWNvZGVfcmFuZ2Uoc2hlZXRbJyFyZWYnXSksIHJyID0gXCJcIiwgY29scy8qOkFycmF5PHN0cmluZz4qLyA9IFtdLCBDO1xuXHR2YXIgY21kcy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgZGVuc2UgPSBBcnJheS5pc0FycmF5KHNoZWV0KTtcblx0Zm9yKEMgPSByLnMuYzsgQyA8PSByLmUuYzsgKytDKSBjb2xzW0NdID0gZW5jb2RlX2NvbChDKTtcblx0Zm9yKHZhciBSID0gci5zLnI7IFIgPD0gci5lLnI7ICsrUikge1xuXHRcdHJyID0gZW5jb2RlX3JvdyhSKTtcblx0XHRmb3IoQyA9IHIucy5jOyBDIDw9IHIuZS5jOyArK0MpIHtcblx0XHRcdHkgPSBjb2xzW0NdICsgcnI7XG5cdFx0XHR4ID0gZGVuc2UgPyAoc2hlZXRbUl18fFtdKVtDXSA6IHNoZWV0W3ldO1xuXHRcdFx0dmFsID0gXCJcIjtcblx0XHRcdGlmKHggPT09IHVuZGVmaW5lZCkgY29udGludWU7XG5cdFx0XHRlbHNlIGlmKHguRiAhPSBudWxsKSB7XG5cdFx0XHRcdHkgPSB4LkY7XG5cdFx0XHRcdGlmKCF4LmYpIGNvbnRpbnVlO1xuXHRcdFx0XHR2YWwgPSB4LmY7XG5cdFx0XHRcdGlmKHkuaW5kZXhPZihcIjpcIikgPT0gLTEpIHkgPSB5ICsgXCI6XCIgKyB5O1xuXHRcdFx0fVxuXHRcdFx0aWYoeC5mICE9IG51bGwpIHZhbCA9IHguZjtcblx0XHRcdGVsc2UgaWYoeC50ID09ICd6JykgY29udGludWU7XG5cdFx0XHRlbHNlIGlmKHgudCA9PSAnbicgJiYgeC52ICE9IG51bGwpIHZhbCA9IFwiXCIgKyB4LnY7XG5cdFx0XHRlbHNlIGlmKHgudCA9PSAnYicpIHZhbCA9IHgudiA/IFwiVFJVRVwiIDogXCJGQUxTRVwiO1xuXHRcdFx0ZWxzZSBpZih4LncgIT09IHVuZGVmaW5lZCkgdmFsID0gXCInXCIgKyB4Lnc7XG5cdFx0XHRlbHNlIGlmKHgudiA9PT0gdW5kZWZpbmVkKSBjb250aW51ZTtcblx0XHRcdGVsc2UgaWYoeC50ID09ICdzJykgdmFsID0gXCInXCIgKyB4LnY7XG5cdFx0XHRlbHNlIHZhbCA9IFwiXCIreC52O1xuXHRcdFx0Y21kc1tjbWRzLmxlbmd0aF0gPSB5ICsgXCI9XCIgKyB2YWw7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBjbWRzO1xufVxuXG5mdW5jdGlvbiBzaGVldF9hZGRfanNvbihfd3MvKjo/V29ya3NoZWV0Ki8sIGpzLyo6QXJyYXk8YW55PiovLCBvcHRzKS8qOldvcmtzaGVldCovIHtcblx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHR2YXIgb2Zmc2V0ID0gKyFvLnNraXBIZWFkZXI7XG5cdHZhciB3cy8qOldvcmtzaGVldCovID0gX3dzIHx8ICh7fS8qOmFueSovKTtcblx0dmFyIF9SID0gMCwgX0MgPSAwO1xuXHRpZih3cyAmJiBvLm9yaWdpbiAhPSBudWxsKSB7XG5cdFx0aWYodHlwZW9mIG8ub3JpZ2luID09ICdudW1iZXInKSBfUiA9IG8ub3JpZ2luO1xuXHRcdGVsc2Uge1xuXHRcdFx0dmFyIF9vcmlnaW4vKjpDZWxsQWRkcmVzcyovID0gdHlwZW9mIG8ub3JpZ2luID09IFwic3RyaW5nXCIgPyBkZWNvZGVfY2VsbChvLm9yaWdpbikgOiBvLm9yaWdpbjtcblx0XHRcdF9SID0gX29yaWdpbi5yOyBfQyA9IF9vcmlnaW4uYztcblx0XHR9XG5cdH1cblx0dmFyIGNlbGwvKjpDZWxsKi87XG5cdHZhciByYW5nZS8qOlJhbmdlKi8gPSAoe3M6IHtjOjAsIHI6MH0sIGU6IHtjOl9DLCByOl9SICsganMubGVuZ3RoIC0gMSArIG9mZnNldH19Lyo6YW55Ki8pO1xuXHRpZih3c1snIXJlZiddKSB7XG5cdFx0dmFyIF9yYW5nZSA9IHNhZmVfZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHRcdHJhbmdlLmUuYyA9IE1hdGgubWF4KHJhbmdlLmUuYywgX3JhbmdlLmUuYyk7XG5cdFx0cmFuZ2UuZS5yID0gTWF0aC5tYXgocmFuZ2UuZS5yLCBfcmFuZ2UuZS5yKTtcblx0XHRpZihfUiA9PSAtMSkgeyBfUiA9IF9yYW5nZS5lLnIgKyAxOyByYW5nZS5lLnIgPSBfUiArIGpzLmxlbmd0aCAtIDEgKyBvZmZzZXQ7IH1cblx0fSBlbHNlIHtcblx0XHRpZihfUiA9PSAtMSkgeyBfUiA9IDA7IHJhbmdlLmUuciA9IGpzLmxlbmd0aCAtIDEgKyBvZmZzZXQ7IH1cblx0fVxuXHR2YXIgaGRyLyo6QXJyYXk8c3RyaW5nPiovID0gby5oZWFkZXIgfHwgW10sIEMgPSAwO1xuXG5cdGpzLmZvckVhY2goZnVuY3Rpb24gKEpTLCBSLyo6bnVtYmVyKi8pIHtcblx0XHRrZXlzKEpTKS5mb3JFYWNoKGZ1bmN0aW9uKGspIHtcblx0XHRcdGlmKChDPWhkci5pbmRleE9mKGspKSA9PSAtMSkgaGRyW0M9aGRyLmxlbmd0aF0gPSBrO1xuXHRcdFx0dmFyIHYgPSBKU1trXTtcblx0XHRcdHZhciB0ID0gJ3onO1xuXHRcdFx0dmFyIHogPSBcIlwiO1xuXHRcdFx0dmFyIHJlZiA9IGVuY29kZV9jZWxsKHtjOl9DICsgQyxyOl9SICsgUiArIG9mZnNldH0pO1xuXHRcdFx0Y2VsbCA9IHdzX2dldF9jZWxsX3N0dWIod3MsIHJlZik7XG5cdFx0XHRpZih2ICYmIHR5cGVvZiB2ID09PSAnb2JqZWN0JyAmJiAhKHYgaW5zdGFuY2VvZiBEYXRlKSl7XG5cdFx0XHRcdHdzW3JlZl0gPSB2O1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYodHlwZW9mIHYgPT0gJ251bWJlcicpIHQgPSAnbic7XG5cdFx0XHRcdGVsc2UgaWYodHlwZW9mIHYgPT0gJ2Jvb2xlYW4nKSB0ID0gJ2InO1xuXHRcdFx0XHRlbHNlIGlmKHR5cGVvZiB2ID09ICdzdHJpbmcnKSB0ID0gJ3MnO1xuXHRcdFx0XHRlbHNlIGlmKHYgaW5zdGFuY2VvZiBEYXRlKSB7XG5cdFx0XHRcdFx0dCA9ICdkJztcblx0XHRcdFx0XHRpZighby5jZWxsRGF0ZXMpIHsgdCA9ICduJzsgdiA9IGRhdGVudW0odik7IH1cblx0XHRcdFx0XHR6ID0gKG8uZGF0ZU5GIHx8IHRhYmxlX2ZtdFsxNF0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2UgaWYodiA9PT0gbnVsbCAmJiBvLm51bGxFcnJvcikgeyB0ID0gJ2UnOyB2ID0gMDsgfVxuXHRcdFx0XHRpZighY2VsbCkgd3NbcmVmXSA9IGNlbGwgPSAoe3Q6dCwgdjp2fS8qOmFueSovKTtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0Y2VsbC50ID0gdDsgY2VsbC52ID0gdjtcblx0XHRcdFx0XHRkZWxldGUgY2VsbC53OyBkZWxldGUgY2VsbC5SO1xuXHRcdFx0XHRcdGlmKHopIGNlbGwueiA9IHo7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYoeikgY2VsbC56ID0gejtcblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG5cdHJhbmdlLmUuYyA9IE1hdGgubWF4KHJhbmdlLmUuYywgX0MgKyBoZHIubGVuZ3RoIC0gMSk7XG5cdHZhciBfX1IgPSBlbmNvZGVfcm93KF9SKTtcblx0aWYob2Zmc2V0KSBmb3IoQyA9IDA7IEMgPCBoZHIubGVuZ3RoOyArK0MpIHdzW2VuY29kZV9jb2woQyArIF9DKSArIF9fUl0gPSB7dDoncycsIHY6aGRyW0NdfTtcblx0d3NbJyFyZWYnXSA9IGVuY29kZV9yYW5nZShyYW5nZSk7XG5cdHJldHVybiB3cztcbn1cbmZ1bmN0aW9uIGpzb25fdG9fc2hlZXQoanMvKjpBcnJheTxhbnk+Ki8sIG9wdHMpLyo6V29ya3NoZWV0Ki8geyByZXR1cm4gc2hlZXRfYWRkX2pzb24obnVsbCwganMsIG9wdHMpOyB9XG5cbi8qIGdldCBjZWxsLCBjcmVhdGluZyBhIHN0dWIgaWYgbmVjZXNzYXJ5ICovXG5mdW5jdGlvbiB3c19nZXRfY2VsbF9zdHViKHdzLyo6V29ya3NoZWV0Ki8sIFIsIEMvKjo/bnVtYmVyKi8pLyo6Q2VsbCovIHtcblx0LyogQTEgY2VsbCBhZGRyZXNzICovXG5cdGlmKHR5cGVvZiBSID09IFwic3RyaW5nXCIpIHtcblx0XHQvKiBkZW5zZSAqL1xuXHRcdGlmKEFycmF5LmlzQXJyYXkod3MpKSB7XG5cdFx0XHR2YXIgUkMgPSBkZWNvZGVfY2VsbChSKTtcblx0XHRcdGlmKCF3c1tSQy5yXSkgd3NbUkMucl0gPSBbXTtcblx0XHRcdHJldHVybiB3c1tSQy5yXVtSQy5jXSB8fCAod3NbUkMucl1bUkMuY10gPSB7dDoneid9KTtcblx0XHR9XG5cdFx0cmV0dXJuIHdzW1JdIHx8ICh3c1tSXSA9IHt0Oid6J30pO1xuXHR9XG5cdC8qIGNlbGwgYWRkcmVzcyBvYmplY3QgKi9cblx0aWYodHlwZW9mIFIgIT0gXCJudW1iZXJcIikgcmV0dXJuIHdzX2dldF9jZWxsX3N0dWIod3MsIGVuY29kZV9jZWxsKFIpKTtcblx0LyogUiBhbmQgQyBhcmUgMC1iYXNlZCBpbmRpY2VzICovXG5cdHJldHVybiB3c19nZXRfY2VsbF9zdHViKHdzLCBlbmNvZGVfY2VsbCh7cjpSLGM6Q3x8MH0pKTtcbn1cblxuLyogZmluZCBzaGVldCBpbmRleCBmb3IgZ2l2ZW4gbmFtZSAvIHZhbGlkYXRlIGluZGV4ICovXG5mdW5jdGlvbiB3Yl9zaGVldF9pZHgod2IvKjpXb3JrYm9vayovLCBzaC8qOm51bWJlcnxzdHJpbmcqLykge1xuXHRpZih0eXBlb2Ygc2ggPT0gXCJudW1iZXJcIikge1xuXHRcdGlmKHNoID49IDAgJiYgd2IuU2hlZXROYW1lcy5sZW5ndGggPiBzaCkgcmV0dXJuIHNoO1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIHNoZWV0ICMgXCIgKyBzaCk7XG5cdH0gZWxzZSBpZih0eXBlb2Ygc2ggPT0gXCJzdHJpbmdcIikge1xuXHRcdHZhciBpZHggPSB3Yi5TaGVldE5hbWVzLmluZGV4T2Yoc2gpO1xuXHRcdGlmKGlkeCA+IC0xKSByZXR1cm4gaWR4O1xuXHRcdHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIHNoZWV0IG5hbWUgfFwiICsgc2ggKyBcInxcIik7XG5cdH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBzaGVldCB8XCIgKyBzaCArIFwifFwiKTtcbn1cblxuLyogc2ltcGxlIGJsYW5rIHdvcmtib29rIG9iamVjdCAqL1xuZnVuY3Rpb24gYm9va19uZXcoKS8qOldvcmtib29rKi8ge1xuXHRyZXR1cm4geyBTaGVldE5hbWVzOiBbXSwgU2hlZXRzOiB7fSB9O1xufVxuXG4vKiBhZGQgYSB3b3Jrc2hlZXQgdG8gdGhlIGVuZCBvZiBhIGdpdmVuIHdvcmtib29rICovXG5mdW5jdGlvbiBib29rX2FwcGVuZF9zaGVldCh3Yi8qOldvcmtib29rKi8sIHdzLyo6V29ya3NoZWV0Ki8sIG5hbWUvKjo/c3RyaW5nKi8sIHJvbGwvKjo/Ym9vbGVhbiovKS8qOnN0cmluZyovIHtcblx0dmFyIGkgPSAxO1xuXHRpZighbmFtZSkgZm9yKDsgaSA8PSAweEZGRkY7ICsraSwgbmFtZSA9IHVuZGVmaW5lZCkgaWYod2IuU2hlZXROYW1lcy5pbmRleE9mKG5hbWUgPSBcIlNoZWV0XCIgKyBpKSA9PSAtMSkgYnJlYWs7XG5cdGlmKCFuYW1lIHx8IHdiLlNoZWV0TmFtZXMubGVuZ3RoID49IDB4RkZGRikgdGhyb3cgbmV3IEVycm9yKFwiVG9vIG1hbnkgd29ya3NoZWV0c1wiKTtcblx0aWYocm9sbCAmJiB3Yi5TaGVldE5hbWVzLmluZGV4T2YobmFtZSkgPj0gMCkge1xuXHRcdHZhciBtID0gbmFtZS5tYXRjaCgvKF4uKj8pKFxcZCspJC8pO1xuXHRcdGkgPSBtICYmICttWzJdIHx8IDA7XG5cdFx0dmFyIHJvb3QgPSBtICYmIG1bMV0gfHwgbmFtZTtcblx0XHRmb3IoKytpOyBpIDw9IDB4RkZGRjsgKytpKSBpZih3Yi5TaGVldE5hbWVzLmluZGV4T2YobmFtZSA9IHJvb3QgKyBpKSA9PSAtMSkgYnJlYWs7XG5cdH1cblx0Y2hlY2tfd3NfbmFtZShuYW1lKTtcblx0aWYod2IuU2hlZXROYW1lcy5pbmRleE9mKG5hbWUpID49IDApIHRocm93IG5ldyBFcnJvcihcIldvcmtzaGVldCB3aXRoIG5hbWUgfFwiICsgbmFtZSArIFwifCBhbHJlYWR5IGV4aXN0cyFcIik7XG5cblx0d2IuU2hlZXROYW1lcy5wdXNoKG5hbWUpO1xuXHR3Yi5TaGVldHNbbmFtZV0gPSB3cztcblx0cmV0dXJuIG5hbWU7XG59XG5cbi8qIHNldCBzaGVldCB2aXNpYmlsaXR5ICh2aXNpYmxlL2hpZGRlbi92ZXJ5IGhpZGRlbikgKi9cbmZ1bmN0aW9uIGJvb2tfc2V0X3NoZWV0X3Zpc2liaWxpdHkod2IvKjpXb3JrYm9vayovLCBzaC8qOm51bWJlcnxzdHJpbmcqLywgdmlzLyo6bnVtYmVyKi8pIHtcblx0aWYoIXdiLldvcmtib29rKSB3Yi5Xb3JrYm9vayA9IHt9O1xuXHRpZighd2IuV29ya2Jvb2suU2hlZXRzKSB3Yi5Xb3JrYm9vay5TaGVldHMgPSBbXTtcblxuXHR2YXIgaWR4ID0gd2Jfc2hlZXRfaWR4KHdiLCBzaCk7XG5cdC8vICRGbG93SWdub3JlXG5cdGlmKCF3Yi5Xb3JrYm9vay5TaGVldHNbaWR4XSkgd2IuV29ya2Jvb2suU2hlZXRzW2lkeF0gPSB7fTtcblxuXHRzd2l0Y2godmlzKSB7XG5cdFx0Y2FzZSAwOiBjYXNlIDE6IGNhc2UgMjogYnJlYWs7XG5cdFx0ZGVmYXVsdDogdGhyb3cgbmV3IEVycm9yKFwiQmFkIHNoZWV0IHZpc2liaWxpdHkgc2V0dGluZyBcIiArIHZpcyk7XG5cdH1cblx0Ly8gJEZsb3dJZ25vcmVcblx0d2IuV29ya2Jvb2suU2hlZXRzW2lkeF0uSGlkZGVuID0gdmlzO1xufVxuXG4vKiBzZXQgbnVtYmVyIGZvcm1hdCAqL1xuZnVuY3Rpb24gY2VsbF9zZXRfbnVtYmVyX2Zvcm1hdChjZWxsLyo6Q2VsbCovLCBmbXQvKjpzdHJpbmd8bnVtYmVyKi8pIHtcblx0Y2VsbC56ID0gZm10O1xuXHRyZXR1cm4gY2VsbDtcbn1cblxuLyogc2V0IGNlbGwgaHlwZXJsaW5rICovXG5mdW5jdGlvbiBjZWxsX3NldF9oeXBlcmxpbmsoY2VsbC8qOkNlbGwqLywgdGFyZ2V0Lyo6c3RyaW5nKi8sIHRvb2x0aXAvKjo/c3RyaW5nKi8pIHtcblx0aWYoIXRhcmdldCkge1xuXHRcdGRlbGV0ZSBjZWxsLmw7XG5cdH0gZWxzZSB7XG5cdFx0Y2VsbC5sID0gKHsgVGFyZ2V0OiB0YXJnZXQgfS8qOkh5cGVybGluayovKTtcblx0XHRpZih0b29sdGlwKSBjZWxsLmwuVG9vbHRpcCA9IHRvb2x0aXA7XG5cdH1cblx0cmV0dXJuIGNlbGw7XG59XG5mdW5jdGlvbiBjZWxsX3NldF9pbnRlcm5hbF9saW5rKGNlbGwvKjpDZWxsKi8sIHJhbmdlLyo6c3RyaW5nKi8sIHRvb2x0aXAvKjo/c3RyaW5nKi8pIHsgcmV0dXJuIGNlbGxfc2V0X2h5cGVybGluayhjZWxsLCBcIiNcIiArIHJhbmdlLCB0b29sdGlwKTsgfVxuXG4vKiBhZGQgdG8gY2VsbCBjb21tZW50cyAqL1xuZnVuY3Rpb24gY2VsbF9hZGRfY29tbWVudChjZWxsLyo6Q2VsbCovLCB0ZXh0Lyo6c3RyaW5nKi8sIGF1dGhvci8qOj9zdHJpbmcqLykge1xuXHRpZighY2VsbC5jKSBjZWxsLmMgPSBbXTtcblx0Y2VsbC5jLnB1c2goe3Q6dGV4dCwgYTphdXRob3J8fFwiU2hlZXRKU1wifSk7XG59XG5cbi8qIHNldCBhcnJheSBmb3JtdWxhIGFuZCBmbHVzaCByZWxhdGVkIGNlbGxzICovXG5mdW5jdGlvbiBzaGVldF9zZXRfYXJyYXlfZm9ybXVsYSh3cy8qOldvcmtzaGVldCovLCByYW5nZSwgZm9ybXVsYS8qOnN0cmluZyovLCBkeW5hbWljLyo6Ym9vbGVhbiovKSB7XG5cdHZhciBybmcgPSB0eXBlb2YgcmFuZ2UgIT0gXCJzdHJpbmdcIiA/IHJhbmdlIDogc2FmZV9kZWNvZGVfcmFuZ2UocmFuZ2UpO1xuXHR2YXIgcm5nc3RyID0gdHlwZW9mIHJhbmdlID09IFwic3RyaW5nXCIgPyByYW5nZSA6IGVuY29kZV9yYW5nZShyYW5nZSk7XG5cdGZvcih2YXIgUiA9IHJuZy5zLnI7IFIgPD0gcm5nLmUucjsgKytSKSBmb3IodmFyIEMgPSBybmcucy5jOyBDIDw9IHJuZy5lLmM7ICsrQykge1xuXHRcdHZhciBjZWxsID0gd3NfZ2V0X2NlbGxfc3R1Yih3cywgUiwgQyk7XG5cdFx0Y2VsbC50ID0gJ24nO1xuXHRcdGNlbGwuRiA9IHJuZ3N0cjtcblx0XHRkZWxldGUgY2VsbC52O1xuXHRcdGlmKFIgPT0gcm5nLnMuciAmJiBDID09IHJuZy5zLmMpIHtcblx0XHRcdGNlbGwuZiA9IGZvcm11bGE7XG5cdFx0XHRpZihkeW5hbWljKSBjZWxsLkQgPSB0cnVlO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gd3M7XG59XG5cbnZhciB1dGlscy8qOmFueSovID0ge1xuXHRlbmNvZGVfY29sOiBlbmNvZGVfY29sLFxuXHRlbmNvZGVfcm93OiBlbmNvZGVfcm93LFxuXHRlbmNvZGVfY2VsbDogZW5jb2RlX2NlbGwsXG5cdGVuY29kZV9yYW5nZTogZW5jb2RlX3JhbmdlLFxuXHRkZWNvZGVfY29sOiBkZWNvZGVfY29sLFxuXHRkZWNvZGVfcm93OiBkZWNvZGVfcm93LFxuXHRzcGxpdF9jZWxsOiBzcGxpdF9jZWxsLFxuXHRkZWNvZGVfY2VsbDogZGVjb2RlX2NlbGwsXG5cdGRlY29kZV9yYW5nZTogZGVjb2RlX3JhbmdlLFxuXHRmb3JtYXRfY2VsbDogZm9ybWF0X2NlbGwsXG5cdHNoZWV0X2FkZF9hb2E6IHNoZWV0X2FkZF9hb2EsXG5cdHNoZWV0X2FkZF9qc29uOiBzaGVldF9hZGRfanNvbixcblx0c2hlZXRfYWRkX2RvbTogc2hlZXRfYWRkX2RvbSxcblx0YW9hX3RvX3NoZWV0OiBhb2FfdG9fc2hlZXQsXG5cdGpzb25fdG9fc2hlZXQ6IGpzb25fdG9fc2hlZXQsXG5cdHRhYmxlX3RvX3NoZWV0OiBwYXJzZV9kb21fdGFibGUsXG5cdHRhYmxlX3RvX2Jvb2s6IHRhYmxlX3RvX2Jvb2ssXG5cdHNoZWV0X3RvX2Nzdjogc2hlZXRfdG9fY3N2LFxuXHRzaGVldF90b190eHQ6IHNoZWV0X3RvX3R4dCxcblx0c2hlZXRfdG9fanNvbjogc2hlZXRfdG9fanNvbixcblx0c2hlZXRfdG9faHRtbDogc2hlZXRfdG9faHRtbCxcblx0c2hlZXRfdG9fZm9ybXVsYWU6IHNoZWV0X3RvX2Zvcm11bGFlLFxuXHRzaGVldF90b19yb3dfb2JqZWN0X2FycmF5OiBzaGVldF90b19qc29uLFxuXHRzaGVldF9nZXRfY2VsbDogd3NfZ2V0X2NlbGxfc3R1Yixcblx0Ym9va19uZXc6IGJvb2tfbmV3LFxuXHRib29rX2FwcGVuZF9zaGVldDogYm9va19hcHBlbmRfc2hlZXQsXG5cdGJvb2tfc2V0X3NoZWV0X3Zpc2liaWxpdHk6IGJvb2tfc2V0X3NoZWV0X3Zpc2liaWxpdHksXG5cdGNlbGxfc2V0X251bWJlcl9mb3JtYXQ6IGNlbGxfc2V0X251bWJlcl9mb3JtYXQsXG5cdGNlbGxfc2V0X2h5cGVybGluazogY2VsbF9zZXRfaHlwZXJsaW5rLFxuXHRjZWxsX3NldF9pbnRlcm5hbF9saW5rOiBjZWxsX3NldF9pbnRlcm5hbF9saW5rLFxuXHRjZWxsX2FkZF9jb21tZW50OiBjZWxsX2FkZF9jb21tZW50LFxuXHRzaGVldF9zZXRfYXJyYXlfZm9ybXVsYTogc2hlZXRfc2V0X2FycmF5X2Zvcm11bGEsXG5cdGNvbnN0czoge1xuXHRcdFNIRUVUX1ZJU0lCTEU6IDAsXG5cdFx0U0hFRVRfSElEREVOOiAxLFxuXHRcdFNIRUVUX1ZFUllfSElEREVOOiAyXG5cdH1cbn07XG5cbnZhciBfUmVhZGFibGU7XG5mdW5jdGlvbiBzZXRfcmVhZGFibGUoUikgeyBfUmVhZGFibGUgPSBSOyB9XG5cbmZ1bmN0aW9uIHdyaXRlX2Nzdl9zdHJlYW0oc2hlZXQvKjpXb3Jrc2hlZXQqLywgb3B0cy8qOj9TaGVldDJDU1ZPcHRzKi8pIHtcblx0dmFyIHN0cmVhbSA9IF9SZWFkYWJsZSgpO1xuXHR2YXIgbyA9IG9wdHMgPT0gbnVsbCA/IHt9IDogb3B0cztcblx0aWYoc2hlZXQgPT0gbnVsbCB8fCBzaGVldFtcIiFyZWZcIl0gPT0gbnVsbCkgeyBzdHJlYW0ucHVzaChudWxsKTsgcmV0dXJuIHN0cmVhbTsgfVxuXHR2YXIgciA9IHNhZmVfZGVjb2RlX3JhbmdlKHNoZWV0W1wiIXJlZlwiXSk7XG5cdHZhciBGUyA9IG8uRlMgIT09IHVuZGVmaW5lZCA/IG8uRlMgOiBcIixcIiwgZnMgPSBGUy5jaGFyQ29kZUF0KDApO1xuXHR2YXIgUlMgPSBvLlJTICE9PSB1bmRlZmluZWQgPyBvLlJTIDogXCJcXG5cIiwgcnMgPSBSUy5jaGFyQ29kZUF0KDApO1xuXHR2YXIgZW5kcmVnZXggPSBuZXcgUmVnRXhwKChGUz09XCJ8XCIgPyBcIlxcXFx8XCIgOiBGUykrXCIrJFwiKTtcblx0dmFyIHJvdy8qOj9zdHJpbmcqLyA9IFwiXCIsIGNvbHMvKjpBcnJheTxzdHJpbmc+Ki8gPSBbXTtcblx0by5kZW5zZSA9IEFycmF5LmlzQXJyYXkoc2hlZXQpO1xuXHR2YXIgY29saW5mby8qOkFycmF5PENvbEluZm8+Ki8gPSBvLnNraXBIaWRkZW4gJiYgc2hlZXRbXCIhY29sc1wiXSB8fCBbXTtcblx0dmFyIHJvd2luZm8vKjpBcnJheTxSb3dJbmZvPiovID0gby5za2lwSGlkZGVuICYmIHNoZWV0W1wiIXJvd3NcIl0gfHwgW107XG5cdGZvcih2YXIgQyA9IHIucy5jOyBDIDw9IHIuZS5jOyArK0MpIGlmICghKChjb2xpbmZvW0NdfHx7fSkuaGlkZGVuKSkgY29sc1tDXSA9IGVuY29kZV9jb2woQyk7XG5cdHZhciBSID0gci5zLnI7XG5cdHZhciBCT00gPSBmYWxzZSwgdyA9IDA7XG5cdHN0cmVhbS5fcmVhZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKCFCT00pIHsgQk9NID0gdHJ1ZTsgcmV0dXJuIHN0cmVhbS5wdXNoKFwiXFx1RkVGRlwiKTsgfVxuXHRcdHdoaWxlKFIgPD0gci5lLnIpIHtcblx0XHRcdCsrUjtcblx0XHRcdGlmICgocm93aW5mb1tSLTFdfHx7fSkuaGlkZGVuKSBjb250aW51ZTtcblx0XHRcdHJvdyA9IG1ha2VfY3N2X3JvdyhzaGVldCwgciwgUi0xLCBjb2xzLCBmcywgcnMsIEZTLCBvKTtcblx0XHRcdGlmKHJvdyAhPSBudWxsKSB7XG5cdFx0XHRcdGlmKG8uc3RyaXApIHJvdyA9IHJvdy5yZXBsYWNlKGVuZHJlZ2V4LFwiXCIpO1xuXHRcdFx0XHRpZihyb3cgfHwgKG8uYmxhbmtyb3dzICE9PSBmYWxzZSkpIHJldHVybiBzdHJlYW0ucHVzaCgodysrID8gUlMgOiBcIlwiKSArIHJvdyk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiBzdHJlYW0ucHVzaChudWxsKTtcblx0fTtcblx0cmV0dXJuIHN0cmVhbTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfaHRtbF9zdHJlYW0od3MvKjpXb3Jrc2hlZXQqLywgb3B0cy8qOj9TaGVldDJIVE1MT3B0cyovKSB7XG5cdHZhciBzdHJlYW0gPSBfUmVhZGFibGUoKTtcblxuXHR2YXIgbyA9IG9wdHMgfHwge307XG5cdHZhciBoZWFkZXIgPSBvLmhlYWRlciAhPSBudWxsID8gby5oZWFkZXIgOiBIVE1MX0JFR0lOO1xuXHR2YXIgZm9vdGVyID0gby5mb290ZXIgIT0gbnVsbCA/IG8uZm9vdGVyIDogSFRNTF9FTkQ7XG5cdHN0cmVhbS5wdXNoKGhlYWRlcik7XG5cdHZhciByID0gZGVjb2RlX3JhbmdlKHdzWychcmVmJ10pO1xuXHRvLmRlbnNlID0gQXJyYXkuaXNBcnJheSh3cyk7XG5cdHN0cmVhbS5wdXNoKG1ha2VfaHRtbF9wcmVhbWJsZSh3cywgciwgbykpO1xuXHR2YXIgUiA9IHIucy5yO1xuXHR2YXIgZW5kID0gZmFsc2U7XG5cdHN0cmVhbS5fcmVhZCA9IGZ1bmN0aW9uKCkge1xuXHRcdGlmKFIgPiByLmUucikge1xuXHRcdFx0aWYoIWVuZCkgeyBlbmQgPSB0cnVlOyBzdHJlYW0ucHVzaChcIjwvdGFibGU+XCIgKyBmb290ZXIpOyB9XG5cdFx0XHRyZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG5cdFx0fVxuXHRcdHdoaWxlKFIgPD0gci5lLnIpIHtcblx0XHRcdHN0cmVhbS5wdXNoKG1ha2VfaHRtbF9yb3cod3MsIHIsIFIsIG8pKTtcblx0XHRcdCsrUjtcblx0XHRcdGJyZWFrO1xuXHRcdH1cblx0fTtcblx0cmV0dXJuIHN0cmVhbTtcbn1cblxuZnVuY3Rpb24gd3JpdGVfanNvbl9zdHJlYW0oc2hlZXQvKjpXb3Jrc2hlZXQqLywgb3B0cy8qOj9TaGVldDJDU1ZPcHRzKi8pIHtcblx0dmFyIHN0cmVhbSA9IF9SZWFkYWJsZSh7b2JqZWN0TW9kZTp0cnVlfSk7XG5cblx0aWYoc2hlZXQgPT0gbnVsbCB8fCBzaGVldFtcIiFyZWZcIl0gPT0gbnVsbCkgeyBzdHJlYW0ucHVzaChudWxsKTsgcmV0dXJuIHN0cmVhbTsgfVxuXHR2YXIgdmFsID0ge3Q6J24nLHY6MH0sIGhlYWRlciA9IDAsIG9mZnNldCA9IDEsIGhkci8qOkFycmF5PGFueT4qLyA9IFtdLCB2PTAsIHZ2PVwiXCI7XG5cdHZhciByID0ge3M6e3I6MCxjOjB9LGU6e3I6MCxjOjB9fTtcblx0dmFyIG8gPSBvcHRzIHx8IHt9O1xuXHR2YXIgcmFuZ2UgPSBvLnJhbmdlICE9IG51bGwgPyBvLnJhbmdlIDogc2hlZXRbXCIhcmVmXCJdO1xuXHRpZihvLmhlYWRlciA9PT0gMSkgaGVhZGVyID0gMTtcblx0ZWxzZSBpZihvLmhlYWRlciA9PT0gXCJBXCIpIGhlYWRlciA9IDI7XG5cdGVsc2UgaWYoQXJyYXkuaXNBcnJheShvLmhlYWRlcikpIGhlYWRlciA9IDM7XG5cdHN3aXRjaCh0eXBlb2YgcmFuZ2UpIHtcblx0XHRjYXNlICdzdHJpbmcnOiByID0gc2FmZV9kZWNvZGVfcmFuZ2UocmFuZ2UpOyBicmVhaztcblx0XHRjYXNlICdudW1iZXInOiByID0gc2FmZV9kZWNvZGVfcmFuZ2Uoc2hlZXRbXCIhcmVmXCJdKTsgci5zLnIgPSByYW5nZTsgYnJlYWs7XG5cdFx0ZGVmYXVsdDogciA9IHJhbmdlO1xuXHR9XG5cdGlmKGhlYWRlciA+IDApIG9mZnNldCA9IDA7XG5cdHZhciByciA9IGVuY29kZV9yb3coci5zLnIpO1xuXHR2YXIgY29scy8qOkFycmF5PHN0cmluZz4qLyA9IFtdO1xuXHR2YXIgY291bnRlciA9IDA7XG5cdHZhciBkZW5zZSA9IEFycmF5LmlzQXJyYXkoc2hlZXQpO1xuXHR2YXIgUiA9IHIucy5yLCBDID0gMDtcblx0dmFyIGhlYWRlcl9jbnQgPSB7fTtcblx0aWYoZGVuc2UgJiYgIXNoZWV0W1JdKSBzaGVldFtSXSA9IFtdO1xuXHR2YXIgY29saW5mby8qOkFycmF5PENvbEluZm8+Ki8gPSBvLnNraXBIaWRkZW4gJiYgc2hlZXRbXCIhY29sc1wiXSB8fCBbXTtcblx0dmFyIHJvd2luZm8vKjpBcnJheTxSb3dJbmZvPiovID0gby5za2lwSGlkZGVuICYmIHNoZWV0W1wiIXJvd3NcIl0gfHwgW107XG5cdGZvcihDID0gci5zLmM7IEMgPD0gci5lLmM7ICsrQykge1xuXHRcdGlmKCgoY29saW5mb1tDXXx8e30pLmhpZGRlbikpIGNvbnRpbnVlO1xuXHRcdGNvbHNbQ10gPSBlbmNvZGVfY29sKEMpO1xuXHRcdHZhbCA9IGRlbnNlID8gc2hlZXRbUl1bQ10gOiBzaGVldFtjb2xzW0NdICsgcnJdO1xuXHRcdHN3aXRjaChoZWFkZXIpIHtcblx0XHRcdGNhc2UgMTogaGRyW0NdID0gQyAtIHIucy5jOyBicmVhaztcblx0XHRcdGNhc2UgMjogaGRyW0NdID0gY29sc1tDXTsgYnJlYWs7XG5cdFx0XHRjYXNlIDM6IGhkcltDXSA9IG8uaGVhZGVyW0MgLSByLnMuY107IGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0aWYodmFsID09IG51bGwpIHZhbCA9IHt3OiBcIl9fRU1QVFlcIiwgdDogXCJzXCJ9O1xuXHRcdFx0XHR2diA9IHYgPSBmb3JtYXRfY2VsbCh2YWwsIG51bGwsIG8pO1xuXHRcdFx0XHRjb3VudGVyID0gaGVhZGVyX2NudFt2XSB8fCAwO1xuXHRcdFx0XHRpZighY291bnRlcikgaGVhZGVyX2NudFt2XSA9IDE7XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGRvIHsgdnYgPSB2ICsgXCJfXCIgKyAoY291bnRlcisrKTsgfSB3aGlsZShoZWFkZXJfY250W3Z2XSk7IGhlYWRlcl9jbnRbdl0gPSBjb3VudGVyO1xuXHRcdFx0XHRcdGhlYWRlcl9jbnRbdnZdID0gMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRoZHJbQ10gPSB2djtcblx0XHR9XG5cdH1cblx0UiA9IHIucy5yICsgb2Zmc2V0O1xuXHRzdHJlYW0uX3JlYWQgPSBmdW5jdGlvbigpIHtcblx0XHR3aGlsZShSIDw9IHIuZS5yKSB7XG5cdFx0XHRpZiAoKHJvd2luZm9bUi0xXXx8e30pLmhpZGRlbikgY29udGludWU7XG5cdFx0XHR2YXIgcm93ID0gbWFrZV9qc29uX3JvdyhzaGVldCwgciwgUiwgY29scywgaGVhZGVyLCBoZHIsIGRlbnNlLCBvKTtcblx0XHRcdCsrUjtcblx0XHRcdGlmKChyb3cuaXNlbXB0eSA9PT0gZmFsc2UpIHx8IChoZWFkZXIgPT09IDEgPyBvLmJsYW5rcm93cyAhPT0gZmFsc2UgOiAhIW8uYmxhbmtyb3dzKSkge1xuXHRcdFx0XHRzdHJlYW0ucHVzaChyb3cucm93KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gc3RyZWFtLnB1c2gobnVsbCk7XG5cdH07XG5cdHJldHVybiBzdHJlYW07XG59XG5cbnZhciBfX3N0cmVhbSA9IHtcblx0dG9fanNvbjogd3JpdGVfanNvbl9zdHJlYW0sXG5cdHRvX2h0bWw6IHdyaXRlX2h0bWxfc3RyZWFtLFxuXHR0b19jc3Y6IHdyaXRlX2Nzdl9zdHJlYW0sXG4gIHNldF9yZWFkYWJsZTogc2V0X3JlYWRhYmxlXG59O1xuZXhwb3J0IGNvbnN0IHZlcnNpb24gPSBYTFNYLnZlcnNpb247XG5leHBvcnQge1xuXHRwYXJzZV94bHNjZmIsXG5cdHBhcnNlX3ppcCxcblx0cmVhZFN5bmMgYXMgcmVhZCxcblx0cmVhZEZpbGVTeW5jIGFzIHJlYWRGaWxlLFxuXHRyZWFkRmlsZVN5bmMsXG5cdHdyaXRlU3luYyBhcyB3cml0ZSxcblx0d3JpdGVGaWxlU3luYyBhcyB3cml0ZUZpbGUsXG5cdHdyaXRlRmlsZVN5bmMsXG5cdHdyaXRlRmlsZUFzeW5jLFxuXHR3cml0ZVN5bmNYTFNYIGFzIHdyaXRlWExTWCxcblx0d3JpdGVGaWxlU3luY1hMU1ggYXMgd3JpdGVGaWxlWExTWCxcblx0dXRpbHMsXG5cdF9fc3RyZWFtIGFzIHN0cmVhbSxcblx0U1NGLFxuXHRDRkJcbn07XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbl9fd2VicGFja19yZXF1aXJlX18ubiA9IChtb2R1bGUpID0+IHtcblx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG5cdFx0KCkgPT4gKG1vZHVsZVsnZGVmYXVsdCddKSA6XG5cdFx0KCkgPT4gKG1vZHVsZSk7XG5cdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsIHsgYTogZ2V0dGVyIH0pO1xuXHRyZXR1cm4gZ2V0dGVyO1xufTsiLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyA9PVVzZXJTY3JpcHQ9PVxyXG4vLyBAbmFtZSAgICAgICAgaUNhcmUgVG9vbHNcclxuLy8gQG5hbWVzcGFjZSAgIFZpb2xlbnRtb25rZXkgU2NyaXB0c1xyXG4vLyBAbm9mcmFtZXNcclxuLy8gQG1hdGNoICAgICAgIGh0dHBzOi8vaWNhcmUtdmFsaS5sYXVzYW5uZS5jaC9pY2FyZS8qXHJcbi8vIEBtYXRjaCAgICAgICBodHRwczovL2ljYXJlLmxhdXNhbm5lLmNoL2ljYXJlLypcclxuLy8gQGdyYW50ICAgICAgIG5vbmVcclxuLy8gQHZlcnNpb24gICAgIDEuMVxyXG4vLyBAYXV0aG9yICAgICAgTmljb2xhcyBNYWl0cmVcclxuLy8gQGRlc2NyaXB0aW9uIFRhc2sgc2NoZWR1bGVyIGZvciBpY2FyZSBhbmQgaGVscGVyc1xyXG4vLyA9PS9Vc2VyU2NyaXB0PT1cclxuXHJcbmltcG9ydCB7IGJ1aWxkVGFza1dpbmRvdyB9IGZyb20gXCIuL2NvbXBvbmVudHMvVGFza1dpbmRvd1wiO1xyXG5pbXBvcnQgeyBoYW5kbGVUYXNrcyB9IGZyb20gXCIuL2xpYi90YXNrXCI7XHJcbmltcG9ydCB7XHJcbiAgYnVpbGRHb1RvQ29udHJhY3RCdXR0b25JbnRlZ3JhdGlvbixcclxuICBidWlsZFJlbW92ZUVuZERhdGVCdXR0b25JbnRlZ3JhdGlvbixcclxuICBidWlsZFRvb2xzQnV0dG9uSW50ZWdyYXRpb24sXHJcbn0gZnJvbSBcIi4vbGliL1VJQnVpbGRlclwiO1xyXG5pbXBvcnQgeyB1cmxDaGVjayB9IGZyb20gXCIuL2xpYi91cmxcIjtcclxuLy91c2UgdmlvbGVudG1vbmtleSBmb3IgY3VzdG9tIGVkaXRvclxyXG5cclxuLy9hZGQgdG9vbHMgYnV0dG9uIHRvIHRvcCBiYXJcclxuYnVpbGRUb29sc0J1dHRvbkludGVncmF0aW9uKCk7XHJcbi8vYWRkIGNvbnRyYWN0IGJ1dHRvbiB0byBwZXJzb24gcGFnZVxyXG5pZiAodXJsQ2hlY2soW1wiL2ljYXJlL0JlL1BlcnNvbkVkaXQuZG9cIiwgXCIvaWNhcmUvQmUvS2luZEVkaXQuZG9cIl0pKSB7XHJcbiAgYnVpbGRHb1RvQ29udHJhY3RCdXR0b25JbnRlZ3JhdGlvbigpO1xyXG59XHJcbi8vYWRkIGVuZCBkYXRlIHJlbW92YWwgYnV0dG9uIG9uIGNvbnRyYWN0IHBhZ2VcclxuaWYgKHVybENoZWNrKFwiL2ljYXJlL0JlL1ZlcnRyYWdFZGl0LmRvXCIpKSB7XHJcbiAgYnVpbGRSZW1vdmVFbmREYXRlQnV0dG9uSW50ZWdyYXRpb24oKTtcclxufVxyXG5cclxuYnVpbGRUYXNrV2luZG93KCk7XHJcblxyXG4vL2V4ZWMgb24gcGFnZSBsb2FkXHJcbmhhbmRsZVRhc2tzKCk7XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==